.main-table(ng-style="$ctrl.tableWidthStyle()")
  //- .main-grid(ui-grid="{ data: $ctrl.state.active.activeLayout.items, enableFiltering: true }" ng-hide="$ctrl.state.active.dividerPercent < 2" ui-grid-auto-resize ui-grid-edit ui-grid-resize-columns ui-grid-empty-base-layer)
  .main-grid(ui-grid="$ctrl.gridOptions" ng-hide="$ctrl.state.active.dividerPercent < 2" ui-grid-auto-resize ui-grid-edit ui-grid-resize-columns ui-grid-empty-base-layer)
.main-canvas(ng-style="$ctrl.canvasWidthStyle()")
  .control-area
    .containers
      .options-container.view-options-container(ng-show="$ctrl.viewOptionsVisible")
      .options-container.snapshot-container(ng-show="snapshotVisible")
      .options-container.layout-container(ng-show="layoutVisible")
    .buttons
      button.btn.btn-circle.btn-lg(ng-click="$ctrl.viewOptionsVisible=!$ctrl.viewOptionsVisible; $ctrl.snapshotVisible=false; $ctrl.layoutVisible=false" ng-class="$ctrl.viewOptionsVisible ? 'button-active' : ''")
        img.btn-icon.view-options(src="./app/images/active/view_options.svg")
      button.btn.btn-circle.btn-lg(disabled ng-click="$ctrl.snapshotVisible=!$ctrl.snapshotVisible; $ctrl.viewOptionsVisible=false; $ctrl.layoutVisible=false" ng-class="$ctrl.snapshotVisible ? 'button-active' : ''")
        img.btn-icon.snapshot(src="./app/images/active/snapshot.svg")
      button.btn.btn-circle.btn-lg(disabled ng-click="$ctrl.layoutVisible=!$ctrl.layoutVisible; $ctrl.viewOptionsVisible=false; $ctrl.snapshotVisible=false" ng-class="$ctrl.layoutVisible ? 'button-active' : ''")
        img.btn-icon.snapshot(src="./app/images/active/layout.svg")
  svg.main-svg
    g.main-g
      rect.main-background
      g.main-g-items
.draggable-divider(drag-container="true" on-drag-end="dragging = false; $ctrl.dragDivider($event)" on-drag="$ctrl.dragDivider($event)" ng-style="$ctrl.dragTabLeftStyle()")
  .drag-tab(ng-hide="$ctrl.state.active.dividerPercent > 2 && $ctrl.state.active.dividerPercent < 98")
.node-search(ng-show="$ctrl.currentlyAdding")
  .input-group
    .input-group-addon.addon-left
      i.glyphicon.glyphicon-search(ng-hide="loadingSearchResults")
      .spinner(ng-if="loadingSearchResults")
    input.form-control(type="text" ng-model="$ctrl.nodeSearchSelected" placeholder="Search" uib-typeahead="result as $ctrl.nodeSearchLabel(result) for result in $ctrl.nodeSearchResults($viewValue)" typeahead-popup-template-url="resultPopupTemplate.html" typeahead-template-url="resultTemplate.html" typeahead-loading="loadingSearchResults" typeahead-no-results="noResults" typeahead-on-select="$ctrl.nodeSearchSelect($item, $model, $label, $event)" typeahead-wait-ms="1000")
    .input-group-addon.addon-right(ng-click="$ctrl.nodeSearchRemove()")
      //-i.glyphicon.glyphicon-remove
      img.dismiss-icon(src="./app/images/filter/remove.svg")
  .no-results(ng-show="noResults")
    label No Results Found
#circle-menu.circle-menu
#properties-menu.circle-menu
.active-tooltip
script(type="text/ng-template" id="resultTemplate.html")
  a
    span.resultType {{ match.model.additionalInformation.typeDescriptions | prefLang }}
    span.resultActual {{ match.label }}
    label.resultSource(ng-repeat="ds in match.model.additionalInformation.dataSourceDescriptions") {{ ds.value | makeAcronym }}
script(type="text/ng-template" id="resultPopupTemplate.html")
  .custom-popup-wrapper(ng-style="{top:position().top+'px', left: position().left+'px'}" style="display: block;" ng-show="isOpen() && !moveInProgress" aria-hidden="{{!isOpen()}}")
    label.cold-node Add "{{ query }}" as an unlinked node 
    
    ul.dropdown-menu(role="listbox")
      li.uib-typeahead-match(ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)" role="option" id="{{::match.id}}")
        div(uib-typeahead-match index="$index" match="match" query="query" template-url="templateUrl")
