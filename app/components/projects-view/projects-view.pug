.container
  h3.header-title Data Pen
    span.header-subtitle Projects
    
  .head

  //-div(ng-repeat="(id,projectSource) in $ctrl.projectSources track by $index")   
  div(ng-repeat="(id,projectSource) in $ctrl.projectSources track by $index")
    .sort-container(ng-controller="projectsSortController" ng-if="$ctrl.projectSourceState[id]=='ready' && $ctrl.projects.Projects.length !== 0")
      select(ng-model="item.id" ng-selected="0" ng-options="option.id as option.name for option in options")
        option(ng-repeat="option in data.availableOptions" value="{{option.id}}") {{option.name}}
        
    a(ui-sref="configure({sourceId:id})" ng-if="$ctrl.projectSourceState[id]=='ready'" ) 
      button.new-project-button(type="button" data-toggle="modal" data-target="#newProjectDialog" ng-class="$ctrl.projects.Projects.length === 0 ? 'none-position' : ''") Start new project
                  
    .row
    .spinner(ng-if="$ctrl.projectSourceState[id]=='loading'")
    .alert.alert-danger(ng-if="$ctrl.projectSourceState[id]=='error'") Error loading: {{projects}}
    .no-projects(ng-if="$ctrl.projects.Projects.length === 0 && $ctrl.projectSourceState[id]=='ready'")
      p.no-project-text A project contains a set of sources, filters, and active data, as well as tabular and graphical workspaces. Create a project to get started!
      //-button.new-project-button(type="button" data-toggle="modal" data-target="#newProjectDialog") Start new project
    ul.projects-list
      li.project-cell(ng-if="$ctrl.projectSourceState[id]=='ready'",ng-repeat="project in $ctrl.projects[id] track by $index" ng-init="optionsVisibility=''" ng-mouseenter="optionsVisibility='visible'" ng-mouseleave="optionsVisibility=''")
        .row
          a.citable-content(ui-sref="project({id:project.id,sparqlEndpoint:project.source.sparqlEndpoint,graph:project.source.graph})"): citable(citable="project",no-link)
          .citable-sources.col-md-3
            label Sources
            ul
              //- li(ng-repeat="source in project.authorityEndpoints.concat(project.archiveEndpoints)") {{ source.labels | prefLabel }}
              li Virtual International Authority File
              li GeoNames
              li Electronic Enlightenment
          ul.project-options(ng-class="optionsVisibility")
            li Edit
            li Duplicate
            li Export
            li.delete-project(ng-click="$ctrl.deleteProject(id, $index, project)") Delete
