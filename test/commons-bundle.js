/******/ (function(modules) { // webpackBootstrap
/******/ 	// install a JSONP callback for chunk loading
/******/ 	var parentJsonpFunction = window["webpackJsonp"];
/******/ 	window["webpackJsonp"] = function webpackJsonpCallback(chunkIds, moreModules, executeModules) {
/******/ 		// add "moreModules" to the modules object,
/******/ 		// then flag all "chunkIds" as loaded and fire callback
/******/ 		var moduleId, chunkId, i = 0, resolves = [], result;
/******/ 		for(;i < chunkIds.length; i++) {
/******/ 			chunkId = chunkIds[i];
/******/ 			if(installedChunks[chunkId]) {
/******/ 				resolves.push(installedChunks[chunkId][0]);
/******/ 			}
/******/ 			installedChunks[chunkId] = 0;
/******/ 		}
/******/ 		for(moduleId in moreModules) {
/******/ 			if(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {
/******/ 				modules[moduleId] = moreModules[moduleId];
/******/ 			}
/******/ 		}
/******/ 		if(parentJsonpFunction) parentJsonpFunction(chunkIds, moreModules, executeModules);
/******/ 		while(resolves.length) {
/******/ 			resolves.shift()();
/******/ 		}
/******/ 		if(executeModules) {
/******/ 			for(i=0; i < executeModules.length; i++) {
/******/ 				result = __webpack_require__(__webpack_require__.s = executeModules[i]);
/******/ 			}
/******/ 		}
/******/ 		return result;
/******/ 	};
/******/ 	function hotDisposeChunk(chunkId) {
/******/ 		delete installedChunks[chunkId];
/******/ 	}
/******/ 	var parentHotUpdateCallback = this["webpackHotUpdate"];
/******/ 	this["webpackHotUpdate"] = 
/******/ 	function webpackHotUpdateCallback(chunkId, moreModules) { // eslint-disable-line no-unused-vars
/******/ 		hotAddUpdateChunk(chunkId, moreModules);
/******/ 		if(parentHotUpdateCallback) parentHotUpdateCallback(chunkId, moreModules);
/******/ 	} ;
/******/ 	
/******/ 	function hotDownloadUpdateChunk(chunkId) { // eslint-disable-line no-unused-vars
/******/ 		var head = document.getElementsByTagName("head")[0];
/******/ 		var script = document.createElement("script");
/******/ 		script.type = "text/javascript";
/******/ 		script.charset = "utf-8";
/******/ 		script.src = __webpack_require__.p + "" + chunkId + "." + hotCurrentHash + ".hot-update.js";
/******/ 		head.appendChild(script);
/******/ 	}
/******/ 	
/******/ 	function hotDownloadManifest() { // eslint-disable-line no-unused-vars
/******/ 		return new Promise(function(resolve, reject) {
/******/ 			if(typeof XMLHttpRequest === "undefined")
/******/ 				return reject(new Error("No browser support"));
/******/ 			try {
/******/ 				var request = new XMLHttpRequest();
/******/ 				var requestPath = __webpack_require__.p + "" + hotCurrentHash + ".hot-update.json";
/******/ 				request.open("GET", requestPath, true);
/******/ 				request.timeout = 10000;
/******/ 				request.send(null);
/******/ 			} catch(err) {
/******/ 				return reject(err);
/******/ 			}
/******/ 			request.onreadystatechange = function() {
/******/ 				if(request.readyState !== 4) return;
/******/ 				if(request.status === 0) {
/******/ 					// timeout
/******/ 					reject(new Error("Manifest request to " + requestPath + " timed out."));
/******/ 				} else if(request.status === 404) {
/******/ 					// no update available
/******/ 					resolve();
/******/ 				} else if(request.status !== 200 && request.status !== 304) {
/******/ 					// other failure
/******/ 					reject(new Error("Manifest request to " + requestPath + " failed."));
/******/ 				} else {
/******/ 					// success
/******/ 					try {
/******/ 						var update = JSON.parse(request.responseText);
/******/ 					} catch(e) {
/******/ 						reject(e);
/******/ 						return;
/******/ 					}
/******/ 					resolve(update);
/******/ 				}
/******/ 			};
/******/ 		});
/******/ 	}
/******/
/******/ 	
/******/ 	
/******/ 	var hotApplyOnUpdate = true;
/******/ 	var hotCurrentHash = "0a8c7151b203feeed7bf"; // eslint-disable-line no-unused-vars
/******/ 	var hotCurrentModuleData = {};
/******/ 	var hotCurrentChildModule; // eslint-disable-line no-unused-vars
/******/ 	var hotCurrentParents = []; // eslint-disable-line no-unused-vars
/******/ 	var hotCurrentParentsTemp = []; // eslint-disable-line no-unused-vars
/******/ 	
/******/ 	function hotCreateRequire(moduleId) { // eslint-disable-line no-unused-vars
/******/ 		var me = installedModules[moduleId];
/******/ 		if(!me) return __webpack_require__;
/******/ 		var fn = function(request) {
/******/ 			if(me.hot.active) {
/******/ 				if(installedModules[request]) {
/******/ 					if(installedModules[request].parents.indexOf(moduleId) < 0)
/******/ 						installedModules[request].parents.push(moduleId);
/******/ 				} else {
/******/ 					hotCurrentParents = [moduleId];
/******/ 					hotCurrentChildModule = request;
/******/ 				}
/******/ 				if(me.children.indexOf(request) < 0)
/******/ 					me.children.push(request);
/******/ 			} else {
/******/ 				console.warn("[HMR] unexpected require(" + request + ") from disposed module " + moduleId);
/******/ 				hotCurrentParents = [];
/******/ 			}
/******/ 			return __webpack_require__(request);
/******/ 		};
/******/ 		var ObjectFactory = function ObjectFactory(name) {
/******/ 			return {
/******/ 				configurable: true,
/******/ 				enumerable: true,
/******/ 				get: function() {
/******/ 					return __webpack_require__[name];
/******/ 				},
/******/ 				set: function(value) {
/******/ 					__webpack_require__[name] = value;
/******/ 				}
/******/ 			};
/******/ 		};
/******/ 		for(var name in __webpack_require__) {
/******/ 			if(Object.prototype.hasOwnProperty.call(__webpack_require__, name) && name !== "e") {
/******/ 				Object.defineProperty(fn, name, ObjectFactory(name));
/******/ 			}
/******/ 		}
/******/ 		fn.e = function(chunkId) {
/******/ 			if(hotStatus === "ready")
/******/ 				hotSetStatus("prepare");
/******/ 			hotChunksLoading++;
/******/ 			return __webpack_require__.e(chunkId).then(finishChunkLoading, function(err) {
/******/ 				finishChunkLoading();
/******/ 				throw err;
/******/ 			});
/******/ 	
/******/ 			function finishChunkLoading() {
/******/ 				hotChunksLoading--;
/******/ 				if(hotStatus === "prepare") {
/******/ 					if(!hotWaitingFilesMap[chunkId]) {
/******/ 						hotEnsureUpdateChunk(chunkId);
/******/ 					}
/******/ 					if(hotChunksLoading === 0 && hotWaitingFiles === 0) {
/******/ 						hotUpdateDownloaded();
/******/ 					}
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 		return fn;
/******/ 	}
/******/ 	
/******/ 	function hotCreateModule(moduleId) { // eslint-disable-line no-unused-vars
/******/ 		var hot = {
/******/ 			// private stuff
/******/ 			_acceptedDependencies: {},
/******/ 			_declinedDependencies: {},
/******/ 			_selfAccepted: false,
/******/ 			_selfDeclined: false,
/******/ 			_disposeHandlers: [],
/******/ 			_main: hotCurrentChildModule !== moduleId,
/******/ 	
/******/ 			// Module API
/******/ 			active: true,
/******/ 			accept: function(dep, callback) {
/******/ 				if(typeof dep === "undefined")
/******/ 					hot._selfAccepted = true;
/******/ 				else if(typeof dep === "function")
/******/ 					hot._selfAccepted = dep;
/******/ 				else if(typeof dep === "object")
/******/ 					for(var i = 0; i < dep.length; i++)
/******/ 						hot._acceptedDependencies[dep[i]] = callback || function() {};
/******/ 				else
/******/ 					hot._acceptedDependencies[dep] = callback || function() {};
/******/ 			},
/******/ 			decline: function(dep) {
/******/ 				if(typeof dep === "undefined")
/******/ 					hot._selfDeclined = true;
/******/ 				else if(typeof dep === "object")
/******/ 					for(var i = 0; i < dep.length; i++)
/******/ 						hot._declinedDependencies[dep[i]] = true;
/******/ 				else
/******/ 					hot._declinedDependencies[dep] = true;
/******/ 			},
/******/ 			dispose: function(callback) {
/******/ 				hot._disposeHandlers.push(callback);
/******/ 			},
/******/ 			addDisposeHandler: function(callback) {
/******/ 				hot._disposeHandlers.push(callback);
/******/ 			},
/******/ 			removeDisposeHandler: function(callback) {
/******/ 				var idx = hot._disposeHandlers.indexOf(callback);
/******/ 				if(idx >= 0) hot._disposeHandlers.splice(idx, 1);
/******/ 			},
/******/ 	
/******/ 			// Management API
/******/ 			check: hotCheck,
/******/ 			apply: hotApply,
/******/ 			status: function(l) {
/******/ 				if(!l) return hotStatus;
/******/ 				hotStatusHandlers.push(l);
/******/ 			},
/******/ 			addStatusHandler: function(l) {
/******/ 				hotStatusHandlers.push(l);
/******/ 			},
/******/ 			removeStatusHandler: function(l) {
/******/ 				var idx = hotStatusHandlers.indexOf(l);
/******/ 				if(idx >= 0) hotStatusHandlers.splice(idx, 1);
/******/ 			},
/******/ 	
/******/ 			//inherit from previous dispose call
/******/ 			data: hotCurrentModuleData[moduleId]
/******/ 		};
/******/ 		hotCurrentChildModule = undefined;
/******/ 		return hot;
/******/ 	}
/******/ 	
/******/ 	var hotStatusHandlers = [];
/******/ 	var hotStatus = "idle";
/******/ 	
/******/ 	function hotSetStatus(newStatus) {
/******/ 		hotStatus = newStatus;
/******/ 		for(var i = 0; i < hotStatusHandlers.length; i++)
/******/ 			hotStatusHandlers[i].call(null, newStatus);
/******/ 	}
/******/ 	
/******/ 	// while downloading
/******/ 	var hotWaitingFiles = 0;
/******/ 	var hotChunksLoading = 0;
/******/ 	var hotWaitingFilesMap = {};
/******/ 	var hotRequestedFilesMap = {};
/******/ 	var hotAvailableFilesMap = {};
/******/ 	var hotDeferred;
/******/ 	
/******/ 	// The update info
/******/ 	var hotUpdate, hotUpdateNewHash;
/******/ 	
/******/ 	function toModuleId(id) {
/******/ 		var isNumber = (+id) + "" === id;
/******/ 		return isNumber ? +id : id;
/******/ 	}
/******/ 	
/******/ 	function hotCheck(apply) {
/******/ 		if(hotStatus !== "idle") throw new Error("check() is only allowed in idle status");
/******/ 		hotApplyOnUpdate = apply;
/******/ 		hotSetStatus("check");
/******/ 		return hotDownloadManifest().then(function(update) {
/******/ 			if(!update) {
/******/ 				hotSetStatus("idle");
/******/ 				return null;
/******/ 			}
/******/ 			hotRequestedFilesMap = {};
/******/ 			hotWaitingFilesMap = {};
/******/ 			hotAvailableFilesMap = update.c;
/******/ 			hotUpdateNewHash = update.h;
/******/ 	
/******/ 			hotSetStatus("prepare");
/******/ 			var promise = new Promise(function(resolve, reject) {
/******/ 				hotDeferred = {
/******/ 					resolve: resolve,
/******/ 					reject: reject
/******/ 				};
/******/ 			});
/******/ 			hotUpdate = {};
/******/ 			for(var chunkId in installedChunks)
/******/ 			{ // eslint-disable-line no-lone-blocks
/******/ 				/*globals chunkId */
/******/ 				hotEnsureUpdateChunk(chunkId);
/******/ 			}
/******/ 			if(hotStatus === "prepare" && hotChunksLoading === 0 && hotWaitingFiles === 0) {
/******/ 				hotUpdateDownloaded();
/******/ 			}
/******/ 			return promise;
/******/ 		});
/******/ 	}
/******/ 	
/******/ 	function hotAddUpdateChunk(chunkId, moreModules) { // eslint-disable-line no-unused-vars
/******/ 		if(!hotAvailableFilesMap[chunkId] || !hotRequestedFilesMap[chunkId])
/******/ 			return;
/******/ 		hotRequestedFilesMap[chunkId] = false;
/******/ 		for(var moduleId in moreModules) {
/******/ 			if(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {
/******/ 				hotUpdate[moduleId] = moreModules[moduleId];
/******/ 			}
/******/ 		}
/******/ 		if(--hotWaitingFiles === 0 && hotChunksLoading === 0) {
/******/ 			hotUpdateDownloaded();
/******/ 		}
/******/ 	}
/******/ 	
/******/ 	function hotEnsureUpdateChunk(chunkId) {
/******/ 		if(!hotAvailableFilesMap[chunkId]) {
/******/ 			hotWaitingFilesMap[chunkId] = true;
/******/ 		} else {
/******/ 			hotRequestedFilesMap[chunkId] = true;
/******/ 			hotWaitingFiles++;
/******/ 			hotDownloadUpdateChunk(chunkId);
/******/ 		}
/******/ 	}
/******/ 	
/******/ 	function hotUpdateDownloaded() {
/******/ 		hotSetStatus("ready");
/******/ 		var deferred = hotDeferred;
/******/ 		hotDeferred = null;
/******/ 		if(!deferred) return;
/******/ 		if(hotApplyOnUpdate) {
/******/ 			hotApply(hotApplyOnUpdate).then(function(result) {
/******/ 				deferred.resolve(result);
/******/ 			}, function(err) {
/******/ 				deferred.reject(err);
/******/ 			});
/******/ 		} else {
/******/ 			var outdatedModules = [];
/******/ 			for(var id in hotUpdate) {
/******/ 				if(Object.prototype.hasOwnProperty.call(hotUpdate, id)) {
/******/ 					outdatedModules.push(toModuleId(id));
/******/ 				}
/******/ 			}
/******/ 			deferred.resolve(outdatedModules);
/******/ 		}
/******/ 	}
/******/ 	
/******/ 	function hotApply(options) {
/******/ 		if(hotStatus !== "ready") throw new Error("apply() is only allowed in ready status");
/******/ 		options = options || {};
/******/ 	
/******/ 		var cb;
/******/ 		var i;
/******/ 		var j;
/******/ 		var module;
/******/ 		var moduleId;
/******/ 	
/******/ 		function getAffectedStuff(updateModuleId) {
/******/ 			var outdatedModules = [updateModuleId];
/******/ 			var outdatedDependencies = {};
/******/ 	
/******/ 			var queue = outdatedModules.slice().map(function(id) {
/******/ 				return {
/******/ 					chain: [id],
/******/ 					id: id
/******/ 				};
/******/ 			});
/******/ 			while(queue.length > 0) {
/******/ 				var queueItem = queue.pop();
/******/ 				var moduleId = queueItem.id;
/******/ 				var chain = queueItem.chain;
/******/ 				module = installedModules[moduleId];
/******/ 				if(!module || module.hot._selfAccepted)
/******/ 					continue;
/******/ 				if(module.hot._selfDeclined) {
/******/ 					return {
/******/ 						type: "self-declined",
/******/ 						chain: chain,
/******/ 						moduleId: moduleId
/******/ 					};
/******/ 				}
/******/ 				if(module.hot._main) {
/******/ 					return {
/******/ 						type: "unaccepted",
/******/ 						chain: chain,
/******/ 						moduleId: moduleId
/******/ 					};
/******/ 				}
/******/ 				for(var i = 0; i < module.parents.length; i++) {
/******/ 					var parentId = module.parents[i];
/******/ 					var parent = installedModules[parentId];
/******/ 					if(!parent) continue;
/******/ 					if(parent.hot._declinedDependencies[moduleId]) {
/******/ 						return {
/******/ 							type: "declined",
/******/ 							chain: chain.concat([parentId]),
/******/ 							moduleId: moduleId,
/******/ 							parentId: parentId
/******/ 						};
/******/ 					}
/******/ 					if(outdatedModules.indexOf(parentId) >= 0) continue;
/******/ 					if(parent.hot._acceptedDependencies[moduleId]) {
/******/ 						if(!outdatedDependencies[parentId])
/******/ 							outdatedDependencies[parentId] = [];
/******/ 						addAllToSet(outdatedDependencies[parentId], [moduleId]);
/******/ 						continue;
/******/ 					}
/******/ 					delete outdatedDependencies[parentId];
/******/ 					outdatedModules.push(parentId);
/******/ 					queue.push({
/******/ 						chain: chain.concat([parentId]),
/******/ 						id: parentId
/******/ 					});
/******/ 				}
/******/ 			}
/******/ 	
/******/ 			return {
/******/ 				type: "accepted",
/******/ 				moduleId: updateModuleId,
/******/ 				outdatedModules: outdatedModules,
/******/ 				outdatedDependencies: outdatedDependencies
/******/ 			};
/******/ 		}
/******/ 	
/******/ 		function addAllToSet(a, b) {
/******/ 			for(var i = 0; i < b.length; i++) {
/******/ 				var item = b[i];
/******/ 				if(a.indexOf(item) < 0)
/******/ 					a.push(item);
/******/ 			}
/******/ 		}
/******/ 	
/******/ 		// at begin all updates modules are outdated
/******/ 		// the "outdated" status can propagate to parents if they don't accept the children
/******/ 		var outdatedDependencies = {};
/******/ 		var outdatedModules = [];
/******/ 		var appliedUpdate = {};
/******/ 	
/******/ 		var warnUnexpectedRequire = function warnUnexpectedRequire() {
/******/ 			console.warn("[HMR] unexpected require(" + result.moduleId + ") to disposed module");
/******/ 		};
/******/ 	
/******/ 		for(var id in hotUpdate) {
/******/ 			if(Object.prototype.hasOwnProperty.call(hotUpdate, id)) {
/******/ 				moduleId = toModuleId(id);
/******/ 				var result;
/******/ 				if(hotUpdate[id]) {
/******/ 					result = getAffectedStuff(moduleId);
/******/ 				} else {
/******/ 					result = {
/******/ 						type: "disposed",
/******/ 						moduleId: id
/******/ 					};
/******/ 				}
/******/ 				var abortError = false;
/******/ 				var doApply = false;
/******/ 				var doDispose = false;
/******/ 				var chainInfo = "";
/******/ 				if(result.chain) {
/******/ 					chainInfo = "\nUpdate propagation: " + result.chain.join(" -> ");
/******/ 				}
/******/ 				switch(result.type) {
/******/ 					case "self-declined":
/******/ 						if(options.onDeclined)
/******/ 							options.onDeclined(result);
/******/ 						if(!options.ignoreDeclined)
/******/ 							abortError = new Error("Aborted because of self decline: " + result.moduleId + chainInfo);
/******/ 						break;
/******/ 					case "declined":
/******/ 						if(options.onDeclined)
/******/ 							options.onDeclined(result);
/******/ 						if(!options.ignoreDeclined)
/******/ 							abortError = new Error("Aborted because of declined dependency: " + result.moduleId + " in " + result.parentId + chainInfo);
/******/ 						break;
/******/ 					case "unaccepted":
/******/ 						if(options.onUnaccepted)
/******/ 							options.onUnaccepted(result);
/******/ 						if(!options.ignoreUnaccepted)
/******/ 							abortError = new Error("Aborted because " + moduleId + " is not accepted" + chainInfo);
/******/ 						break;
/******/ 					case "accepted":
/******/ 						if(options.onAccepted)
/******/ 							options.onAccepted(result);
/******/ 						doApply = true;
/******/ 						break;
/******/ 					case "disposed":
/******/ 						if(options.onDisposed)
/******/ 							options.onDisposed(result);
/******/ 						doDispose = true;
/******/ 						break;
/******/ 					default:
/******/ 						throw new Error("Unexception type " + result.type);
/******/ 				}
/******/ 				if(abortError) {
/******/ 					hotSetStatus("abort");
/******/ 					return Promise.reject(abortError);
/******/ 				}
/******/ 				if(doApply) {
/******/ 					appliedUpdate[moduleId] = hotUpdate[moduleId];
/******/ 					addAllToSet(outdatedModules, result.outdatedModules);
/******/ 					for(moduleId in result.outdatedDependencies) {
/******/ 						if(Object.prototype.hasOwnProperty.call(result.outdatedDependencies, moduleId)) {
/******/ 							if(!outdatedDependencies[moduleId])
/******/ 								outdatedDependencies[moduleId] = [];
/******/ 							addAllToSet(outdatedDependencies[moduleId], result.outdatedDependencies[moduleId]);
/******/ 						}
/******/ 					}
/******/ 				}
/******/ 				if(doDispose) {
/******/ 					addAllToSet(outdatedModules, [result.moduleId]);
/******/ 					appliedUpdate[moduleId] = warnUnexpectedRequire;
/******/ 				}
/******/ 			}
/******/ 		}
/******/ 	
/******/ 		// Store self accepted outdated modules to require them later by the module system
/******/ 		var outdatedSelfAcceptedModules = [];
/******/ 		for(i = 0; i < outdatedModules.length; i++) {
/******/ 			moduleId = outdatedModules[i];
/******/ 			if(installedModules[moduleId] && installedModules[moduleId].hot._selfAccepted)
/******/ 				outdatedSelfAcceptedModules.push({
/******/ 					module: moduleId,
/******/ 					errorHandler: installedModules[moduleId].hot._selfAccepted
/******/ 				});
/******/ 		}
/******/ 	
/******/ 		// Now in "dispose" phase
/******/ 		hotSetStatus("dispose");
/******/ 		Object.keys(hotAvailableFilesMap).forEach(function(chunkId) {
/******/ 			if(hotAvailableFilesMap[chunkId] === false) {
/******/ 				hotDisposeChunk(chunkId);
/******/ 			}
/******/ 		});
/******/ 	
/******/ 		var idx;
/******/ 		var queue = outdatedModules.slice();
/******/ 		while(queue.length > 0) {
/******/ 			moduleId = queue.pop();
/******/ 			module = installedModules[moduleId];
/******/ 			if(!module) continue;
/******/ 	
/******/ 			var data = {};
/******/ 	
/******/ 			// Call dispose handlers
/******/ 			var disposeHandlers = module.hot._disposeHandlers;
/******/ 			for(j = 0; j < disposeHandlers.length; j++) {
/******/ 				cb = disposeHandlers[j];
/******/ 				cb(data);
/******/ 			}
/******/ 			hotCurrentModuleData[moduleId] = data;
/******/ 	
/******/ 			// disable module (this disables requires from this module)
/******/ 			module.hot.active = false;
/******/ 	
/******/ 			// remove module from cache
/******/ 			delete installedModules[moduleId];
/******/ 	
/******/ 			// remove "parents" references from all children
/******/ 			for(j = 0; j < module.children.length; j++) {
/******/ 				var child = installedModules[module.children[j]];
/******/ 				if(!child) continue;
/******/ 				idx = child.parents.indexOf(moduleId);
/******/ 				if(idx >= 0) {
/******/ 					child.parents.splice(idx, 1);
/******/ 				}
/******/ 			}
/******/ 		}
/******/ 	
/******/ 		// remove outdated dependency from module children
/******/ 		var dependency;
/******/ 		var moduleOutdatedDependencies;
/******/ 		for(moduleId in outdatedDependencies) {
/******/ 			if(Object.prototype.hasOwnProperty.call(outdatedDependencies, moduleId)) {
/******/ 				module = installedModules[moduleId];
/******/ 				if(module) {
/******/ 					moduleOutdatedDependencies = outdatedDependencies[moduleId];
/******/ 					for(j = 0; j < moduleOutdatedDependencies.length; j++) {
/******/ 						dependency = moduleOutdatedDependencies[j];
/******/ 						idx = module.children.indexOf(dependency);
/******/ 						if(idx >= 0) module.children.splice(idx, 1);
/******/ 					}
/******/ 				}
/******/ 			}
/******/ 		}
/******/ 	
/******/ 		// Not in "apply" phase
/******/ 		hotSetStatus("apply");
/******/ 	
/******/ 		hotCurrentHash = hotUpdateNewHash;
/******/ 	
/******/ 		// insert new code
/******/ 		for(moduleId in appliedUpdate) {
/******/ 			if(Object.prototype.hasOwnProperty.call(appliedUpdate, moduleId)) {
/******/ 				modules[moduleId] = appliedUpdate[moduleId];
/******/ 			}
/******/ 		}
/******/ 	
/******/ 		// call accept handlers
/******/ 		var error = null;
/******/ 		for(moduleId in outdatedDependencies) {
/******/ 			if(Object.prototype.hasOwnProperty.call(outdatedDependencies, moduleId)) {
/******/ 				module = installedModules[moduleId];
/******/ 				moduleOutdatedDependencies = outdatedDependencies[moduleId];
/******/ 				var callbacks = [];
/******/ 				for(i = 0; i < moduleOutdatedDependencies.length; i++) {
/******/ 					dependency = moduleOutdatedDependencies[i];
/******/ 					cb = module.hot._acceptedDependencies[dependency];
/******/ 					if(callbacks.indexOf(cb) >= 0) continue;
/******/ 					callbacks.push(cb);
/******/ 				}
/******/ 				for(i = 0; i < callbacks.length; i++) {
/******/ 					cb = callbacks[i];
/******/ 					try {
/******/ 						cb(moduleOutdatedDependencies);
/******/ 					} catch(err) {
/******/ 						if(options.onErrored) {
/******/ 							options.onErrored({
/******/ 								type: "accept-errored",
/******/ 								moduleId: moduleId,
/******/ 								dependencyId: moduleOutdatedDependencies[i],
/******/ 								error: err
/******/ 							});
/******/ 						}
/******/ 						if(!options.ignoreErrored) {
/******/ 							if(!error)
/******/ 								error = err;
/******/ 						}
/******/ 					}
/******/ 				}
/******/ 			}
/******/ 		}
/******/ 	
/******/ 		// Load self accepted modules
/******/ 		for(i = 0; i < outdatedSelfAcceptedModules.length; i++) {
/******/ 			var item = outdatedSelfAcceptedModules[i];
/******/ 			moduleId = item.module;
/******/ 			hotCurrentParents = [moduleId];
/******/ 			try {
/******/ 				__webpack_require__(moduleId);
/******/ 			} catch(err) {
/******/ 				if(typeof item.errorHandler === "function") {
/******/ 					try {
/******/ 						item.errorHandler(err);
/******/ 					} catch(err2) {
/******/ 						if(options.onErrored) {
/******/ 							options.onErrored({
/******/ 								type: "self-accept-error-handler-errored",
/******/ 								moduleId: moduleId,
/******/ 								error: err2,
/******/ 								orginalError: err
/******/ 							});
/******/ 						}
/******/ 						if(!options.ignoreErrored) {
/******/ 							if(!error)
/******/ 								error = err2;
/******/ 						}
/******/ 						if(!error)
/******/ 							error = err;
/******/ 					}
/******/ 				} else {
/******/ 					if(options.onErrored) {
/******/ 						options.onErrored({
/******/ 							type: "self-accept-errored",
/******/ 							moduleId: moduleId,
/******/ 							error: err
/******/ 						});
/******/ 					}
/******/ 					if(!options.ignoreErrored) {
/******/ 						if(!error)
/******/ 							error = err;
/******/ 					}
/******/ 				}
/******/ 			}
/******/ 		}
/******/ 	
/******/ 		// handle errors in accept handlers and self accepted module load
/******/ 		if(error) {
/******/ 			hotSetStatus("fail");
/******/ 			return Promise.reject(error);
/******/ 		}
/******/ 	
/******/ 		hotSetStatus("idle");
/******/ 		return Promise.resolve(outdatedModules);
/******/ 	}
/******/
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// objects to store loaded and loading chunks
/******/ 	var installedChunks = {
/******/ 		2: 0
/******/ 	};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {},
/******/ 			hot: hotCreateModule(moduleId),
/******/ 			parents: (hotCurrentParentsTemp = hotCurrentParents, hotCurrentParents = [], hotCurrentParentsTemp),
/******/ 			children: []
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, hotCreateRequire(moduleId));
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/ 	// This file contains only the entry chunk.
/******/ 	// The chunk loading function for additional chunks
/******/ 	__webpack_require__.e = function requireEnsure(chunkId) {
/******/ 		if(installedChunks[chunkId] === 0) {
/******/ 			return Promise.resolve();
/******/ 		}
/******/
/******/ 		// a Promise means "currently loading".
/******/ 		if(installedChunks[chunkId]) {
/******/ 			return installedChunks[chunkId][2];
/******/ 		}
/******/
/******/ 		// setup Promise in chunk cache
/******/ 		var promise = new Promise(function(resolve, reject) {
/******/ 			installedChunks[chunkId] = [resolve, reject];
/******/ 		});
/******/ 		installedChunks[chunkId][2] = promise;
/******/
/******/ 		// start chunk loading
/******/ 		var head = document.getElementsByTagName('head')[0];
/******/ 		var script = document.createElement('script');
/******/ 		script.type = 'text/javascript';
/******/ 		script.charset = 'utf-8';
/******/ 		script.async = true;
/******/ 		script.timeout = 120000;
/******/
/******/ 		if (__webpack_require__.nc) {
/******/ 			script.setAttribute("nonce", __webpack_require__.nc);
/******/ 		}
/******/ 		script.src = __webpack_require__.p + "" + chunkId + "-bundle.js";
/******/ 		var timeout = setTimeout(onScriptComplete, 120000);
/******/ 		script.onerror = script.onload = onScriptComplete;
/******/ 		function onScriptComplete() {
/******/ 			// avoid mem leaks in IE.
/******/ 			script.onerror = script.onload = null;
/******/ 			clearTimeout(timeout);
/******/ 			var chunk = installedChunks[chunkId];
/******/ 			if(chunk !== 0) {
/******/ 				if(chunk) {
/******/ 					chunk[1](new Error('Loading chunk ' + chunkId + ' failed.'));
/******/ 				}
/******/ 				installedChunks[chunkId] = undefined;
/******/ 			}
/******/ 		};
/******/ 		head.appendChild(script);
/******/
/******/ 		return promise;
/******/ 	};
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// identity function for calling harmony imports with the correct context
/******/ 	__webpack_require__.i = function(value) { return value; };
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// on error function for async loading
/******/ 	__webpack_require__.oe = function(err) { console.error(err); throw err; };
/******/
/******/ 	// __webpack_hash__
/******/ 	__webpack_require__.h = function() { return hotCurrentHash; };
/******/ })
/************************************************************************/
/******/ ([
/* 0 */,
/* 1 */,
/* 2 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_collection_utils__ = __webpack_require__(6);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"p\", function() { return Node; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"i\", function() { return NodeFromNode; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return DefaultGraph; });\n/* unused harmony export UNDEF */\n/* unused harmony export Variable */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"h\", function() { return NamedNode; });\n/* unused harmony export BlankNode */\n/* unused harmony export Literal */\n/* unused harmony export Quad */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"g\", function() { return Triple; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return Graph; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return DataFactory; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"m\", function() { return FIBRA; });\n/* unused harmony export SD */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"j\", function() { return SKOS; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"o\", function() { return VOID; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"k\", function() { return DCTerms; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"l\", function() { return FOAF; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"e\", function() { return OWL; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"n\", function() { return RDF; });\n/* unused harmony export XMLSchema */\n/* unused harmony export CIDOC */\n/* unused harmony export GETTY */\n/* unused harmony export MADS */\n/* unused harmony export GEOVOCAB */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"f\", function() { return ENodeMap; });\n/* unused harmony export EONodeMap */\n/* unused harmony export NodeSet */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return ONodeSet; });\n\n\nvar __extends = this && this.__extends || function () {\n    var extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (d, b) {\n        d.__proto__ = b;\n    } || function (d, b) {\n        for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() {\n            this.constructor = d;\n        }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n}();\nvar s = fi.seco.sparql;\n\nvar Node = function () {\n    function Node(value, termType, language, datatype) {\n        if (language === void 0) {\n            language = undefined;\n        }\n        if (datatype === void 0) {\n            datatype = undefined;\n        }\n        this.value = value;\n        this.termType = termType;\n        this.language = language;\n        this.datatype = datatype;\n    }\n    Node.prototype.toCanonical = function () {\n        switch (this.termType) {\n            case 'NamedNode':\n                return '<' + this.value + '>';\n            case 'BlankNode':\n                return '_:' + this.value;\n            case 'Literal':\n                return s.SparqlService.stringToSPARQLString(this.value) + (this.language ? '@' + this.language : !this.datatype || RDF.langString.equals(this.datatype) || XMLSchema.string.equals(this.datatype) ? '' : '^^' + this.datatype.toCanonical());\n            case 'Variable':\n                return '?' + this.value;\n            case 'DefaultGraph':\n                return '';\n            case 'UNDEF':\n                return 'UNDEF';\n            default:\n                throw 'Unknown term type ' + this;\n        }\n    };\n    Node.prototype.equals = function (other) {\n        return this.termType === other.termType && this.value === other.value && (this.termType !== 'Literal' || this.language === other.language && this.datatype === other.datatype);\n    };\n    return Node;\n}();\n\nvar NodeFromNode = function (_super) {\n    __extends(NodeFromNode, _super);\n    function NodeFromNode(other) {\n        return _super.call(this, other.value, other.termType, other.language, other.datatype) || this;\n    }\n    return NodeFromNode;\n}(Node);\n\nvar DefaultGraph = function (_super) {\n    __extends(DefaultGraph, _super);\n    function DefaultGraph() {\n        return _super.call(this, '', 'DefaultGraph') || this;\n    }\n    DefaultGraph.prototype.toCanonical = function () {\n        return '';\n    };\n    DefaultGraph.prototype.equals = function (other) {\n        return other.termType === 'DefaultGraph';\n    };\n    return DefaultGraph;\n}(Node);\n\nDefaultGraph.instance = new DefaultGraph();\nvar UNDEF = function (_super) {\n    __extends(UNDEF, _super);\n    function UNDEF() {\n        return _super.call(this, '', 'UNDEF') || this;\n    }\n    UNDEF.prototype.toCanonical = function () {\n        return '';\n    };\n    UNDEF.prototype.equals = function (other) {\n        return other.termType === 'UNDEF';\n    };\n    return UNDEF;\n}(Node);\n\nUNDEF.instance = new UNDEF();\nvar Variable = function (_super) {\n    __extends(Variable, _super);\n    function Variable(value) {\n        return _super.call(this, value, 'Variable') || this;\n    }\n    Variable.prototype.toCanonical = function () {\n        return '?' + this.value;\n    };\n    return Variable;\n}(Node);\n\nvar NamedNode = function (_super) {\n    __extends(NamedNode, _super);\n    function NamedNode(value) {\n        return _super.call(this, value, 'NamedNode') || this;\n    }\n    NamedNode.prototype.toCanonical = function () {\n        return '<' + this.value + '>';\n    };\n    return NamedNode;\n}(Node);\n\nvar BlankNode = function (_super) {\n    __extends(BlankNode, _super);\n    function BlankNode(value) {\n        return _super.call(this, value, 'BlankNode') || this;\n    }\n    BlankNode.prototype.toCanonical = function () {\n        return '?' + this.value;\n    };\n    return BlankNode;\n}(Node);\n\nvar Literal = function (_super) {\n    __extends(Literal, _super);\n    function Literal(value, language, datatype) {\n        if (language === void 0) {\n            language = '';\n        }\n        return _super.call(this, value, 'Literal', language, datatype ? datatype : language ? RDF.langString : XMLSchema.string) || this;\n    }\n    return Literal;\n}(Node);\n\nvar Quad = function () {\n    function Quad(subject, predicate, object, graph) {\n        this.subject = subject;\n        this.predicate = predicate;\n        this.object = object;\n        this.graph = graph;\n    }\n    Quad.prototype.toCanonical = function () {\n        return this.subject.toCanonical() + ' ' + this.predicate.toCanonical() + ' ' + this.object.toCanonical() + (this.graph.termType === 'DefaultGraph' ? '' : ' ' + this.graph.toCanonical());\n    };\n    Quad.prototype.equals = function (other) {\n        return this.subject.equals(other.subject) && this.predicate.equals(other.predicate) && this.object.equals(other.object) && this.graph.equals(other.graph);\n    };\n    return Quad;\n}();\n\nvar Triple = function () {\n    function Triple(subject, predicate, object) {\n        this.subject = subject;\n        this.predicate = predicate;\n        this.object = object;\n        this.graph = DefaultGraph.instance;\n    }\n    Triple.prototype.toCanonical = function () {\n        return this.subject.toCanonical() + ' ' + this.predicate.toCanonical() + ' ' + this.object.toCanonical();\n    };\n    Triple.prototype.equals = function (other) {\n        return this.subject.equals(other.subject) && this.predicate.equals(other.predicate) && this.object.equals(other.object) && this.graph.equals(other.graph);\n    };\n    return Triple;\n}();\n\nvar Graph = function () {\n    function Graph(graph, triples) {\n        if (triples === void 0) {\n            triples = [];\n        }\n        this.graph = graph;\n        this.triples = triples;\n    }\n    return Graph;\n}();\n\nvar DataFactory = function () {\n    function DataFactory() {\n        this.nextBlankNodeId = 0;\n    }\n    DataFactory.nodeFromBinding = function (binding) {\n        return DataFactory.instance.nodeFromBinding(binding);\n    };\n    DataFactory.nodeFromNode = function (other) {\n        return DataFactory.instance.nodeFromNode(other);\n    };\n    DataFactory.nodeFromCanonicalRepresentation = function (id) {\n        return DataFactory.instance.nodeFromCanonicalRepresentation(id);\n    };\n    DataFactory.namedNode = function (value) {\n        return DataFactory.instance.namedNode(value);\n    };\n    DataFactory.blankNode = function (value) {\n        return DataFactory.instance.blankNode(value);\n    };\n    DataFactory.literal = function (value, languageOrDatatype) {\n        return DataFactory.instance.literal(value, languageOrDatatype);\n    };\n    DataFactory.variable = function (value) {\n        return DataFactory.instance.variable(value);\n    };\n    DataFactory.defaultGraph = function () {\n        return DataFactory.instance.defaultGraph();\n    };\n    DataFactory.triple = function (subject, predicate, object) {\n        return DataFactory.instance.triple(subject, predicate, object);\n    };\n    DataFactory.quad = function (subject, predicate, object, graph) {\n        return DataFactory.instance.quad(subject, predicate, object, graph);\n    };\n    DataFactory.prototype.nodeFromBinding = function (binding) {\n        var n = new Node(binding.value, binding.type === 'literal' ? 'Literal' : binding.type === 'uri' ? 'NamedNode' : 'BlankNode');\n        if (binding.type === 'literal') {\n            n.language = binding['xml:lang'] ? binding['xml:lang'] : '';\n            n.datatype = binding.datatype ? new NamedNode(binding.datatype) : n.language !== '' ? RDF.langString : XMLSchema.string;\n        }\n        return n;\n    };\n    DataFactory.prototype.nodeFromNode = function (other) {\n        if (other.termType === 'Literal') return new Literal(other.value, other.language, other.datatype);else return new Node(other.value, other.termType);\n    };\n    DataFactory.prototype.nodeFromCanonicalRepresentation = function (id) {\n        if (id.indexOf('<') === 0) return new NamedNode(id.substring(1, id.length - 1));else if (id.indexOf('_:') === 0) return new BlankNode(id.substring(2));else {\n            var value = id.substring(1, id.lastIndexOf('\"'));\n            if (id.lastIndexOf('@') === id.lastIndexOf('\"') + 1) return new Literal(value, id.substring(id.lastIndexOf('@')));else if (id.lastIndexOf('^^<') === id.lastIndexOf('\"') + 1) return new Literal(value, '', new NamedNode(id.substring(id.lastIndexOf('^^<'), id.length - 1)));else return new Literal(value);\n        }\n    };\n    DataFactory.prototype.namedNode = function (value) {\n        return new NamedNode(value);\n    };\n    DataFactory.prototype.blankNode = function (value) {\n        return new BlankNode(value ? value : 'b' + ++this.nextBlankNodeId);\n    };\n    DataFactory.prototype.literal = function (value, languageOrDatatype) {\n        if (typeof languageOrDatatype === 'string') return new Literal(value, languageOrDatatype);else return new Literal(value, undefined, languageOrDatatype);\n    };\n    DataFactory.prototype.variable = function (value) {\n        return new Variable(value);\n    };\n    DataFactory.prototype.defaultGraph = function () {\n        return DefaultGraph.instance;\n    };\n    DataFactory.prototype.triple = function (subject, predicate, object) {\n        return new Triple(subject, predicate, object);\n    };\n    DataFactory.prototype.quad = function (subject, predicate, object, graph) {\n        return new Quad(subject, predicate, object, graph ? graph : DefaultGraph.instance);\n    };\n    return DataFactory;\n}();\n\nDataFactory.instance = new DataFactory();\n// DRAFT\nvar FIBRA = function () {\n    function FIBRA() {}\n    return FIBRA;\n}();\n\nFIBRA.ns = 'http://hdlab.stanford.edu/fibra/ontology#';\nFIBRA.Project = new NamedNode(FIBRA.ns + 'Project');\nFIBRA.graph = new NamedNode(FIBRA.ns + 'graph');\nFIBRA.qualifiedAssertion = new NamedNode(FIBRA.ns + 'qualifiedAssertion');\nFIBRA.order = new NamedNode(FIBRA.ns + 'order');\nFIBRA.schemaNS = new NamedNode(FIBRA.ns + 'schemaNS');\nFIBRA.instanceNS = new NamedNode(FIBRA.ns + 'instanceNS');\nFIBRA.updateEndpoint = new NamedNode(FIBRA.ns + 'updateEndpoint');\nFIBRA.configuration = new NamedNode(FIBRA.ns + 'configuration');\nFIBRA.configurationReference = new NamedNode(FIBRA.ns + 'configurationReference');\nFIBRA.schema = new NamedNode(FIBRA.ns + 'schema');\nFIBRA.schemaReference = new NamedNode(FIBRA.ns + 'schemaReference');\nFIBRA.autocompletionQuery = new NamedNode(FIBRA.ns + 'autocompletionQuery');\nFIBRA.propertyQuery = new NamedNode(FIBRA.ns + 'propertyQuery');\nFIBRA.classQuery = new NamedNode(FIBRA.ns + 'classQuery');\nFIBRA.itemQuery = new NamedNode(FIBRA.ns + 'itemQuery');\nFIBRA.deleteItemQuery = new NamedNode(FIBRA.ns + 'deleteItemQuery');\nFIBRA.RemoteEndpointConfiguration = new NamedNode(FIBRA.ns + 'RemoteEndpointConfiguration');\nFIBRA.PrimaryEndpointConfiguration = new NamedNode(FIBRA.ns + 'PrimaryEndpointConfiguration');\nFIBRA.AuthorityEndpointConfiguration = new NamedNode(FIBRA.ns + 'AuthorityEndpointConfiguration');\nFIBRA.ArchiveEndpointConfiguration = new NamedNode(FIBRA.ns + 'ArchiveEndpointConfiguration');\nFIBRA.Schema = new NamedNode(FIBRA.ns + 'Schema');\nvar SD = function () {\n    function SD() {}\n    return SD;\n}();\n\nSD.ns = 'http://www.w3.org/ns/sparql-service-description#';\nSD._name = new NamedNode(SD.ns + 'name');\nvar SKOS = function () {\n    function SKOS() {}\n    return SKOS;\n}();\n\nSKOS.ns = 'http://www.w3.org/2004/02/skos/core#';\nSKOS.prefLabel = new NamedNode(SKOS.ns + 'prefLabel');\nSKOS.altLabel = new NamedNode(SKOS.ns + 'altLabel');\nSKOS.related = new NamedNode(SKOS.ns + 'related');\nvar VOID = function () {\n    function VOID() {}\n    return VOID;\n}();\n\nVOID.ns = 'http://rdfs.org/ns/void#';\nVOID.sparqlEndpoint = new NamedNode(VOID.ns + 'sparqlEndpoint');\nvar DCTerms = function () {\n    function DCTerms() {}\n    return DCTerms;\n}();\n\nDCTerms.ns = 'http://purl.org/dc/terms/';\nDCTerms.rightsHolder = new NamedNode(DCTerms.ns + 'rightsHolder');\nDCTerms.description = new NamedNode(DCTerms.ns + 'description');\nvar FOAF = function () {\n    function FOAF() {}\n    return FOAF;\n}();\n\nFOAF.ns = 'http://xmlns.com/foaf/0.1/';\nFOAF.homepage = new NamedNode(FOAF.ns + 'homepage');\nvar OWL = function () {\n    function OWL() {}\n    return OWL;\n}();\n\nOWL.ns = 'http://www.w3.org/2002/07/owl#';\nOWL.sameAs = new NamedNode(OWL.ns + 'sameAs');\nOWL.Thing = new NamedNode(OWL.ns + 'Thing');\nOWL.Class = new NamedNode(OWL.ns + 'Class');\nvar RDF = function () {\n    function RDF() {}\n    return RDF;\n}();\n\nRDF.ns = 'http://www.w3.org/1999/02/22-rdf-syntax-ns#';\nRDF.type = new NamedNode(RDF.ns + 'type');\nRDF.langString = new NamedNode(RDF.ns + 'langString');\nRDF.Triple = new NamedNode(RDF.ns + 'Triple');\nRDF.subject = new NamedNode(RDF.ns + 'subject');\nRDF.predicate = new NamedNode(RDF.ns + 'predicate');\nRDF.object = new NamedNode(RDF.ns + 'object');\nRDF.value = new NamedNode(RDF.ns + 'value');\nvar XMLSchema = function () {\n    function XMLSchema() {}\n    return XMLSchema;\n}();\n\nXMLSchema.ns = 'http://www.w3.org/2001/XMLSchema#';\nXMLSchema.string = new NamedNode(XMLSchema.ns + 'string');\nvar CIDOC = function () {\n    function CIDOC() {}\n    return CIDOC;\n}();\n\nCIDOC.ns = 'http://www.cidoc-crm.org/cidoc-crm/';\nCIDOC.Person = new NamedNode(CIDOC.ns + 'E21_Person');\nCIDOC.Place = new NamedNode(CIDOC.ns + 'E53_Place');\nCIDOC.Group = new NamedNode(CIDOC.ns + 'E74_Group');\nvar GETTY = function () {\n    function GETTY() {}\n    return GETTY;\n}();\n\nGETTY.ns = 'http://vocab.getty.edu/ontology#';\nGETTY.AdminPlaceConcept = new NamedNode(GETTY.ns + 'AdminPlaceConcept');\nGETTY.PhysicalPlaceConcept = new NamedNode(GETTY.ns + 'PhysicalPlaceConcept');\nGETTY.PhysAdminPlaceConcept = new NamedNode(GETTY.ns + 'PhysAdminPlaceConcept');\nGETTY.PersonConcept = new NamedNode(GETTY.ns + 'PersonConcept');\nGETTY.GroupConcept = new NamedNode(GETTY.ns + 'GroupConcept');\nvar MADS = function () {\n    function MADS() {}\n    return MADS;\n}();\n\nMADS.ns = 'http://www.loc.gov/mads/rdf/v1#';\nMADS.CorporateName = new NamedNode(MADS.ns + 'CorporateName');\nMADS.PersonalName = new NamedNode(MADS.ns + 'PersonalName');\nMADS.NameTitle = new NamedNode(MADS.ns + 'NameTitle');\nMADS.Geographic = new NamedNode(MADS.ns + 'Geographic');\nvar GEOVOCAB = function () {\n    function GEOVOCAB() {}\n    return GEOVOCAB;\n}();\n\nGEOVOCAB.ns = 'http://geovocab.org/spatial#';\nGEOVOCAB.Feature = new NamedNode(GEOVOCAB.ns + 'Feature');\nvar ENodeMap = function () {\n    function ENodeMap(create, map) {\n        if (create === void 0) {\n            create = function () {\n                return {};\n            };\n        }\n        if (map === void 0) {\n            map = new __WEBPACK_IMPORTED_MODULE_0__components_collection_utils__[\"a\" /* EMap */]();\n        }\n        this.create = create;\n        this.map = map;\n    }\n    ENodeMap.prototype.goc = function (key, create) {\n        if (!this.has(key)) this.set(key, create ? create(key) : this.create(key));\n        return this.get(key);\n    };\n    ENodeMap.prototype.get = function (key) {\n        return this.map.get(key.toCanonical());\n    };\n    ENodeMap.prototype.remove = function (key) {\n        return this.map.remove(key.toCanonical());\n    };\n    ENodeMap.prototype.each = function (f) {\n        var _this = this;\n        this.map.each(function (value, key, map) {\n            return f(value, DataFactory.instance.nodeFromCanonicalRepresentation(key), _this);\n        });\n    };\n    ENodeMap.prototype.has = function (key) {\n        return this.map.has(key.toCanonical());\n    };\n    ENodeMap.prototype.set = function (key, value) {\n        this.map.set(key.toCanonical(), value);\n        return this;\n    };\n    Object.defineProperty(ENodeMap.prototype, \"size\", {\n        get: function () {\n            return this.map.size();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ENodeMap.prototype.values = function () {\n        return this.map.values();\n    };\n    ENodeMap.prototype.keys = function () {\n        return this.map.keys().map(function (k) {\n            return DataFactory.instance.nodeFromCanonicalRepresentation(k);\n        });\n    };\n    ENodeMap.prototype.entries = function () {\n        return this.map.entries().map(function (o) {\n            return { key: DataFactory.instance.nodeFromCanonicalRepresentation(o.key), value: o.value };\n        });\n    };\n    ENodeMap.prototype.clear = function () {\n        this.map.clear();\n        return this;\n    };\n    return ENodeMap;\n}();\n\nvar EONodeMap = function (_super) {\n    __extends(EONodeMap, _super);\n    function EONodeMap(create) {\n        return _super.call(this, create, new __WEBPACK_IMPORTED_MODULE_0__components_collection_utils__[\"c\" /* EOMap */]()) || this;\n    }\n    return EONodeMap;\n}(ENodeMap);\n\nvar NodeSet = function () {\n    function NodeSet(map) {\n        if (map === void 0) {\n            map = new __WEBPACK_IMPORTED_MODULE_0__components_collection_utils__[\"a\" /* EMap */]();\n        }\n        this.m = new ENodeMap(undefined, map);\n    }\n    NodeSet.prototype.add = function (value) {\n        this.m.set(value, value);\n        return this;\n    };\n    NodeSet.prototype.adda = function (arr) {\n        var _this = this;\n        arr.forEach(function (n) {\n            return _this.add(n);\n        });\n        return this;\n    };\n    NodeSet.prototype.adds = function (oset) {\n        var _this = this;\n        oset.each(function (n) {\n            return _this.add(n);\n        });\n        return this;\n    };\n    NodeSet.prototype.has = function (value) {\n        return this.m.has(value);\n    };\n    NodeSet.prototype.get = function (value) {\n        return this.m.get(value);\n    };\n    NodeSet.prototype.clear = function () {\n        this.m.clear();\n        return this;\n    };\n    NodeSet.prototype.remove = function (value) {\n        return this.m.remove(value);\n    };\n    NodeSet.prototype.values = function () {\n        return this.m.values();\n    };\n    Object.defineProperty(NodeSet.prototype, \"size\", {\n        get: function () {\n            return this.m.size;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    NodeSet.prototype.each = function (f) {\n        var _this = this;\n        this.m.each(function (value, key, map) {\n            return f(value, value, _this);\n        });\n    };\n    return NodeSet;\n}();\n\nvar ONodeSet = function (_super) {\n    __extends(ONodeSet, _super);\n    function ONodeSet() {\n        return _super.call(this, new __WEBPACK_IMPORTED_MODULE_0__components_collection_utils__[\"c\" /* EOMap */]()) || this;\n    }\n    return ONodeSet;\n}(NodeSet);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2FwcC9tb2RlbHMvcmRmLnRzPzQxZmMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG52YXIgcyA9IGZpLnNlY28uc3BhcnFsO1xuaW1wb3J0IHsgRU1hcCwgRU9NYXAgfSBmcm9tICcuLi9jb21wb25lbnRzL2NvbGxlY3Rpb24tdXRpbHMnO1xudmFyIE5vZGUgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5vZGUodmFsdWUsIHRlcm1UeXBlLCBsYW5ndWFnZSwgZGF0YXR5cGUpIHtcbiAgICAgICAgaWYgKGxhbmd1YWdlID09PSB2b2lkIDApIHsgbGFuZ3VhZ2UgPSB1bmRlZmluZWQ7IH1cbiAgICAgICAgaWYgKGRhdGF0eXBlID09PSB2b2lkIDApIHsgZGF0YXR5cGUgPSB1bmRlZmluZWQ7IH1cbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgICB0aGlzLnRlcm1UeXBlID0gdGVybVR5cGU7XG4gICAgICAgIHRoaXMubGFuZ3VhZ2UgPSBsYW5ndWFnZTtcbiAgICAgICAgdGhpcy5kYXRhdHlwZSA9IGRhdGF0eXBlO1xuICAgIH1cbiAgICBOb2RlLnByb3RvdHlwZS50b0Nhbm9uaWNhbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc3dpdGNoICh0aGlzLnRlcm1UeXBlKSB7XG4gICAgICAgICAgICBjYXNlICdOYW1lZE5vZGUnOiByZXR1cm4gJzwnICsgdGhpcy52YWx1ZSArICc+JztcbiAgICAgICAgICAgIGNhc2UgJ0JsYW5rTm9kZSc6IHJldHVybiAnXzonICsgdGhpcy52YWx1ZTtcbiAgICAgICAgICAgIGNhc2UgJ0xpdGVyYWwnOiByZXR1cm4gcy5TcGFycWxTZXJ2aWNlLnN0cmluZ1RvU1BBUlFMU3RyaW5nKHRoaXMudmFsdWUpICsgKHRoaXMubGFuZ3VhZ2UgPyAnQCcgKyB0aGlzLmxhbmd1YWdlIDogKCF0aGlzLmRhdGF0eXBlIHx8IFJERi5sYW5nU3RyaW5nLmVxdWFscyh0aGlzLmRhdGF0eXBlKSB8fCBYTUxTY2hlbWEuc3RyaW5nLmVxdWFscyh0aGlzLmRhdGF0eXBlKSA/ICcnIDogJ15eJyArIHRoaXMuZGF0YXR5cGUudG9DYW5vbmljYWwoKSkpO1xuICAgICAgICAgICAgY2FzZSAnVmFyaWFibGUnOiByZXR1cm4gJz8nICsgdGhpcy52YWx1ZTtcbiAgICAgICAgICAgIGNhc2UgJ0RlZmF1bHRHcmFwaCc6IHJldHVybiAnJztcbiAgICAgICAgICAgIGNhc2UgJ1VOREVGJzogcmV0dXJuICdVTkRFRic7XG4gICAgICAgICAgICBkZWZhdWx0OiB0aHJvdyAnVW5rbm93biB0ZXJtIHR5cGUgJyArIHRoaXM7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE5vZGUucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvdGhlcikge1xuICAgICAgICByZXR1cm4gdGhpcy50ZXJtVHlwZSA9PT0gb3RoZXIudGVybVR5cGUgJiYgdGhpcy52YWx1ZSA9PT0gb3RoZXIudmFsdWUgJiYgKHRoaXMudGVybVR5cGUgIT09ICdMaXRlcmFsJyB8fCAodGhpcy5sYW5ndWFnZSA9PT0gb3RoZXIubGFuZ3VhZ2UgJiYgdGhpcy5kYXRhdHlwZSA9PT0gb3RoZXIuZGF0YXR5cGUpKTtcbiAgICB9O1xuICAgIHJldHVybiBOb2RlO1xufSgpKTtcbmV4cG9ydCB7IE5vZGUgfTtcbnZhciBOb2RlRnJvbU5vZGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhOb2RlRnJvbU5vZGUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTm9kZUZyb21Ob2RlKG90aGVyKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBvdGhlci52YWx1ZSwgb3RoZXIudGVybVR5cGUsIG90aGVyLmxhbmd1YWdlLCBvdGhlci5kYXRhdHlwZSkgfHwgdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIE5vZGVGcm9tTm9kZTtcbn0oTm9kZSkpO1xuZXhwb3J0IHsgTm9kZUZyb21Ob2RlIH07XG52YXIgRGVmYXVsdEdyYXBoID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRGVmYXVsdEdyYXBoLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIERlZmF1bHRHcmFwaCgpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsICcnLCAnRGVmYXVsdEdyYXBoJykgfHwgdGhpcztcbiAgICB9XG4gICAgRGVmYXVsdEdyYXBoLnByb3RvdHlwZS50b0Nhbm9uaWNhbCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcnOyB9O1xuICAgIERlZmF1bHRHcmFwaC5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG90aGVyKSB7IHJldHVybiBvdGhlci50ZXJtVHlwZSA9PT0gJ0RlZmF1bHRHcmFwaCc7IH07XG4gICAgcmV0dXJuIERlZmF1bHRHcmFwaDtcbn0oTm9kZSkpO1xuZXhwb3J0IHsgRGVmYXVsdEdyYXBoIH07XG5EZWZhdWx0R3JhcGguaW5zdGFuY2UgPSBuZXcgRGVmYXVsdEdyYXBoKCk7XG52YXIgVU5ERUYgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhVTkRFRiwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBVTkRFRigpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsICcnLCAnVU5ERUYnKSB8fCB0aGlzO1xuICAgIH1cbiAgICBVTkRFRi5wcm90b3R5cGUudG9DYW5vbmljYWwgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnJzsgfTtcbiAgICBVTkRFRi5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG90aGVyKSB7IHJldHVybiBvdGhlci50ZXJtVHlwZSA9PT0gJ1VOREVGJzsgfTtcbiAgICByZXR1cm4gVU5ERUY7XG59KE5vZGUpKTtcbmV4cG9ydCB7IFVOREVGIH07XG5VTkRFRi5pbnN0YW5jZSA9IG5ldyBVTkRFRigpO1xudmFyIFZhcmlhYmxlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVmFyaWFibGUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gVmFyaWFibGUodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIHZhbHVlLCAnVmFyaWFibGUnKSB8fCB0aGlzO1xuICAgIH1cbiAgICBWYXJpYWJsZS5wcm90b3R5cGUudG9DYW5vbmljYWwgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnPycgKyB0aGlzLnZhbHVlOyB9O1xuICAgIHJldHVybiBWYXJpYWJsZTtcbn0oTm9kZSkpO1xuZXhwb3J0IHsgVmFyaWFibGUgfTtcbnZhciBOYW1lZE5vZGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhOYW1lZE5vZGUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTmFtZWROb2RlKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCB2YWx1ZSwgJ05hbWVkTm9kZScpIHx8IHRoaXM7XG4gICAgfVxuICAgIE5hbWVkTm9kZS5wcm90b3R5cGUudG9DYW5vbmljYWwgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnPCcgKyB0aGlzLnZhbHVlICsgJz4nOyB9O1xuICAgIHJldHVybiBOYW1lZE5vZGU7XG59KE5vZGUpKTtcbmV4cG9ydCB7IE5hbWVkTm9kZSB9O1xudmFyIEJsYW5rTm9kZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEJsYW5rTm9kZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBCbGFua05vZGUodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIHZhbHVlLCAnQmxhbmtOb2RlJykgfHwgdGhpcztcbiAgICB9XG4gICAgQmxhbmtOb2RlLnByb3RvdHlwZS50b0Nhbm9uaWNhbCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICc/JyArIHRoaXMudmFsdWU7IH07XG4gICAgcmV0dXJuIEJsYW5rTm9kZTtcbn0oTm9kZSkpO1xuZXhwb3J0IHsgQmxhbmtOb2RlIH07XG52YXIgTGl0ZXJhbCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKExpdGVyYWwsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTGl0ZXJhbCh2YWx1ZSwgbGFuZ3VhZ2UsIGRhdGF0eXBlKSB7XG4gICAgICAgIGlmIChsYW5ndWFnZSA9PT0gdm9pZCAwKSB7IGxhbmd1YWdlID0gJyc7IH1cbiAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIHZhbHVlLCAnTGl0ZXJhbCcsIGxhbmd1YWdlLCBkYXRhdHlwZSA/IGRhdGF0eXBlIDogKGxhbmd1YWdlID8gUkRGLmxhbmdTdHJpbmcgOiBYTUxTY2hlbWEuc3RyaW5nKSkgfHwgdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIExpdGVyYWw7XG59KE5vZGUpKTtcbmV4cG9ydCB7IExpdGVyYWwgfTtcbnZhciBRdWFkID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBRdWFkKHN1YmplY3QsIHByZWRpY2F0ZSwgb2JqZWN0LCBncmFwaCkge1xuICAgICAgICB0aGlzLnN1YmplY3QgPSBzdWJqZWN0O1xuICAgICAgICB0aGlzLnByZWRpY2F0ZSA9IHByZWRpY2F0ZTtcbiAgICAgICAgdGhpcy5vYmplY3QgPSBvYmplY3Q7XG4gICAgICAgIHRoaXMuZ3JhcGggPSBncmFwaDtcbiAgICB9XG4gICAgUXVhZC5wcm90b3R5cGUudG9DYW5vbmljYWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN1YmplY3QudG9DYW5vbmljYWwoKSArICcgJyArIHRoaXMucHJlZGljYXRlLnRvQ2Fub25pY2FsKCkgKyAnICcgKyB0aGlzLm9iamVjdC50b0Nhbm9uaWNhbCgpICsgKHRoaXMuZ3JhcGgudGVybVR5cGUgPT09ICdEZWZhdWx0R3JhcGgnID8gJycgOiAoJyAnICsgdGhpcy5ncmFwaC50b0Nhbm9uaWNhbCgpKSk7XG4gICAgfTtcbiAgICBRdWFkLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAob3RoZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3ViamVjdC5lcXVhbHMob3RoZXIuc3ViamVjdCkgJiYgdGhpcy5wcmVkaWNhdGUuZXF1YWxzKG90aGVyLnByZWRpY2F0ZSkgJiYgdGhpcy5vYmplY3QuZXF1YWxzKG90aGVyLm9iamVjdCkgJiYgdGhpcy5ncmFwaC5lcXVhbHMob3RoZXIuZ3JhcGgpO1xuICAgIH07XG4gICAgcmV0dXJuIFF1YWQ7XG59KCkpO1xuZXhwb3J0IHsgUXVhZCB9O1xudmFyIFRyaXBsZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gVHJpcGxlKHN1YmplY3QsIHByZWRpY2F0ZSwgb2JqZWN0KSB7XG4gICAgICAgIHRoaXMuc3ViamVjdCA9IHN1YmplY3Q7XG4gICAgICAgIHRoaXMucHJlZGljYXRlID0gcHJlZGljYXRlO1xuICAgICAgICB0aGlzLm9iamVjdCA9IG9iamVjdDtcbiAgICAgICAgdGhpcy5ncmFwaCA9IERlZmF1bHRHcmFwaC5pbnN0YW5jZTtcbiAgICB9XG4gICAgVHJpcGxlLnByb3RvdHlwZS50b0Nhbm9uaWNhbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3ViamVjdC50b0Nhbm9uaWNhbCgpICsgJyAnICsgdGhpcy5wcmVkaWNhdGUudG9DYW5vbmljYWwoKSArICcgJyArIHRoaXMub2JqZWN0LnRvQ2Fub25pY2FsKCk7XG4gICAgfTtcbiAgICBUcmlwbGUucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvdGhlcikge1xuICAgICAgICByZXR1cm4gdGhpcy5zdWJqZWN0LmVxdWFscyhvdGhlci5zdWJqZWN0KSAmJiB0aGlzLnByZWRpY2F0ZS5lcXVhbHMob3RoZXIucHJlZGljYXRlKSAmJiB0aGlzLm9iamVjdC5lcXVhbHMob3RoZXIub2JqZWN0KSAmJiB0aGlzLmdyYXBoLmVxdWFscyhvdGhlci5ncmFwaCk7XG4gICAgfTtcbiAgICByZXR1cm4gVHJpcGxlO1xufSgpKTtcbmV4cG9ydCB7IFRyaXBsZSB9O1xudmFyIEdyYXBoID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBHcmFwaChncmFwaCwgdHJpcGxlcykge1xuICAgICAgICBpZiAodHJpcGxlcyA9PT0gdm9pZCAwKSB7IHRyaXBsZXMgPSBbXTsgfVxuICAgICAgICB0aGlzLmdyYXBoID0gZ3JhcGg7XG4gICAgICAgIHRoaXMudHJpcGxlcyA9IHRyaXBsZXM7XG4gICAgfVxuICAgIHJldHVybiBHcmFwaDtcbn0oKSk7XG5leHBvcnQgeyBHcmFwaCB9O1xudmFyIERhdGFGYWN0b3J5ID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBEYXRhRmFjdG9yeSgpIHtcbiAgICAgICAgdGhpcy5uZXh0QmxhbmtOb2RlSWQgPSAwO1xuICAgIH1cbiAgICBEYXRhRmFjdG9yeS5ub2RlRnJvbUJpbmRpbmcgPSBmdW5jdGlvbiAoYmluZGluZykge1xuICAgICAgICByZXR1cm4gRGF0YUZhY3RvcnkuaW5zdGFuY2Uubm9kZUZyb21CaW5kaW5nKGJpbmRpbmcpO1xuICAgIH07XG4gICAgRGF0YUZhY3Rvcnkubm9kZUZyb21Ob2RlID0gZnVuY3Rpb24gKG90aGVyKSB7XG4gICAgICAgIHJldHVybiBEYXRhRmFjdG9yeS5pbnN0YW5jZS5ub2RlRnJvbU5vZGUob3RoZXIpO1xuICAgIH07XG4gICAgRGF0YUZhY3Rvcnkubm9kZUZyb21DYW5vbmljYWxSZXByZXNlbnRhdGlvbiA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICByZXR1cm4gRGF0YUZhY3RvcnkuaW5zdGFuY2Uubm9kZUZyb21DYW5vbmljYWxSZXByZXNlbnRhdGlvbihpZCk7XG4gICAgfTtcbiAgICBEYXRhRmFjdG9yeS5uYW1lZE5vZGUgPSBmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIERhdGFGYWN0b3J5Lmluc3RhbmNlLm5hbWVkTm9kZSh2YWx1ZSk7IH07XG4gICAgRGF0YUZhY3RvcnkuYmxhbmtOb2RlID0gZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiBEYXRhRmFjdG9yeS5pbnN0YW5jZS5ibGFua05vZGUodmFsdWUpOyB9O1xuICAgIERhdGFGYWN0b3J5LmxpdGVyYWwgPSBmdW5jdGlvbiAodmFsdWUsIGxhbmd1YWdlT3JEYXRhdHlwZSkge1xuICAgICAgICByZXR1cm4gRGF0YUZhY3RvcnkuaW5zdGFuY2UubGl0ZXJhbCh2YWx1ZSwgbGFuZ3VhZ2VPckRhdGF0eXBlKTtcbiAgICB9O1xuICAgIERhdGFGYWN0b3J5LnZhcmlhYmxlID0gZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiBEYXRhRmFjdG9yeS5pbnN0YW5jZS52YXJpYWJsZSh2YWx1ZSk7IH07XG4gICAgRGF0YUZhY3RvcnkuZGVmYXVsdEdyYXBoID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gRGF0YUZhY3RvcnkuaW5zdGFuY2UuZGVmYXVsdEdyYXBoKCk7IH07XG4gICAgRGF0YUZhY3RvcnkudHJpcGxlID0gZnVuY3Rpb24gKHN1YmplY3QsIHByZWRpY2F0ZSwgb2JqZWN0KSB7XG4gICAgICAgIHJldHVybiBEYXRhRmFjdG9yeS5pbnN0YW5jZS50cmlwbGUoc3ViamVjdCwgcHJlZGljYXRlLCBvYmplY3QpO1xuICAgIH07XG4gICAgRGF0YUZhY3RvcnkucXVhZCA9IGZ1bmN0aW9uIChzdWJqZWN0LCBwcmVkaWNhdGUsIG9iamVjdCwgZ3JhcGgpIHtcbiAgICAgICAgcmV0dXJuIERhdGFGYWN0b3J5Lmluc3RhbmNlLnF1YWQoc3ViamVjdCwgcHJlZGljYXRlLCBvYmplY3QsIGdyYXBoKTtcbiAgICB9O1xuICAgIERhdGFGYWN0b3J5LnByb3RvdHlwZS5ub2RlRnJvbUJpbmRpbmcgPSBmdW5jdGlvbiAoYmluZGluZykge1xuICAgICAgICB2YXIgbiA9IG5ldyBOb2RlKGJpbmRpbmcudmFsdWUsIGJpbmRpbmcudHlwZSA9PT0gJ2xpdGVyYWwnID8gJ0xpdGVyYWwnIDogKGJpbmRpbmcudHlwZSA9PT0gJ3VyaScgPyAnTmFtZWROb2RlJyA6ICdCbGFua05vZGUnKSk7XG4gICAgICAgIGlmIChiaW5kaW5nLnR5cGUgPT09ICdsaXRlcmFsJykge1xuICAgICAgICAgICAgbi5sYW5ndWFnZSA9IGJpbmRpbmdbJ3htbDpsYW5nJ10gPyBiaW5kaW5nWyd4bWw6bGFuZyddIDogJyc7XG4gICAgICAgICAgICBuLmRhdGF0eXBlID0gYmluZGluZy5kYXRhdHlwZSA/IG5ldyBOYW1lZE5vZGUoYmluZGluZy5kYXRhdHlwZSkgOiAobi5sYW5ndWFnZSAhPT0gJycgPyBSREYubGFuZ1N0cmluZyA6IFhNTFNjaGVtYS5zdHJpbmcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuO1xuICAgIH07XG4gICAgRGF0YUZhY3RvcnkucHJvdG90eXBlLm5vZGVGcm9tTm9kZSA9IGZ1bmN0aW9uIChvdGhlcikge1xuICAgICAgICBpZiAob3RoZXIudGVybVR5cGUgPT09ICdMaXRlcmFsJylcbiAgICAgICAgICAgIHJldHVybiBuZXcgTGl0ZXJhbChvdGhlci52YWx1ZSwgb3RoZXIubGFuZ3VhZ2UsIG90aGVyLmRhdGF0eXBlKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBOb2RlKG90aGVyLnZhbHVlLCBvdGhlci50ZXJtVHlwZSk7XG4gICAgfTtcbiAgICBEYXRhRmFjdG9yeS5wcm90b3R5cGUubm9kZUZyb21DYW5vbmljYWxSZXByZXNlbnRhdGlvbiA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICBpZiAoaWQuaW5kZXhPZignPCcpID09PSAwKVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBOYW1lZE5vZGUoaWQuc3Vic3RyaW5nKDEsIGlkLmxlbmd0aCAtIDEpKTtcbiAgICAgICAgZWxzZSBpZiAoaWQuaW5kZXhPZignXzonKSA9PT0gMClcbiAgICAgICAgICAgIHJldHVybiBuZXcgQmxhbmtOb2RlKGlkLnN1YnN0cmluZygyKSk7XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gaWQuc3Vic3RyaW5nKDEsIGlkLmxhc3RJbmRleE9mKCdcIicpKTtcbiAgICAgICAgICAgIGlmIChpZC5sYXN0SW5kZXhPZignQCcpID09PSBpZC5sYXN0SW5kZXhPZignXCInKSArIDEpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBMaXRlcmFsKHZhbHVlLCBpZC5zdWJzdHJpbmcoaWQubGFzdEluZGV4T2YoJ0AnKSkpO1xuICAgICAgICAgICAgZWxzZSBpZiAoaWQubGFzdEluZGV4T2YoJ15ePCcpID09PSBpZC5sYXN0SW5kZXhPZignXCInKSArIDEpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBMaXRlcmFsKHZhbHVlLCAnJywgbmV3IE5hbWVkTm9kZShpZC5zdWJzdHJpbmcoaWQubGFzdEluZGV4T2YoJ15ePCcpLCBpZC5sZW5ndGggLSAxKSkpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTGl0ZXJhbCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIERhdGFGYWN0b3J5LnByb3RvdHlwZS5uYW1lZE5vZGUgPSBmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIG5ldyBOYW1lZE5vZGUodmFsdWUpOyB9O1xuICAgIERhdGFGYWN0b3J5LnByb3RvdHlwZS5ibGFua05vZGUgPSBmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIG5ldyBCbGFua05vZGUodmFsdWUgPyB2YWx1ZSA6ICgnYicgKyArK3RoaXMubmV4dEJsYW5rTm9kZUlkKSk7IH07XG4gICAgRGF0YUZhY3RvcnkucHJvdG90eXBlLmxpdGVyYWwgPSBmdW5jdGlvbiAodmFsdWUsIGxhbmd1YWdlT3JEYXRhdHlwZSkge1xuICAgICAgICBpZiAodHlwZW9mIChsYW5ndWFnZU9yRGF0YXR5cGUpID09PSAnc3RyaW5nJylcbiAgICAgICAgICAgIHJldHVybiBuZXcgTGl0ZXJhbCh2YWx1ZSwgbGFuZ3VhZ2VPckRhdGF0eXBlKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBMaXRlcmFsKHZhbHVlLCB1bmRlZmluZWQsIGxhbmd1YWdlT3JEYXRhdHlwZSk7XG4gICAgfTtcbiAgICBEYXRhRmFjdG9yeS5wcm90b3R5cGUudmFyaWFibGUgPSBmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIG5ldyBWYXJpYWJsZSh2YWx1ZSk7IH07XG4gICAgRGF0YUZhY3RvcnkucHJvdG90eXBlLmRlZmF1bHRHcmFwaCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIERlZmF1bHRHcmFwaC5pbnN0YW5jZTsgfTtcbiAgICBEYXRhRmFjdG9yeS5wcm90b3R5cGUudHJpcGxlID0gZnVuY3Rpb24gKHN1YmplY3QsIHByZWRpY2F0ZSwgb2JqZWN0KSB7XG4gICAgICAgIHJldHVybiBuZXcgVHJpcGxlKHN1YmplY3QsIHByZWRpY2F0ZSwgb2JqZWN0KTtcbiAgICB9O1xuICAgIERhdGFGYWN0b3J5LnByb3RvdHlwZS5xdWFkID0gZnVuY3Rpb24gKHN1YmplY3QsIHByZWRpY2F0ZSwgb2JqZWN0LCBncmFwaCkge1xuICAgICAgICByZXR1cm4gbmV3IFF1YWQoc3ViamVjdCwgcHJlZGljYXRlLCBvYmplY3QsIGdyYXBoID8gZ3JhcGggOiBEZWZhdWx0R3JhcGguaW5zdGFuY2UpO1xuICAgIH07XG4gICAgcmV0dXJuIERhdGFGYWN0b3J5O1xufSgpKTtcbmV4cG9ydCB7IERhdGFGYWN0b3J5IH07XG5EYXRhRmFjdG9yeS5pbnN0YW5jZSA9IG5ldyBEYXRhRmFjdG9yeSgpO1xuLy8gRFJBRlRcbnZhciBGSUJSQSA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRklCUkEoKSB7XG4gICAgfVxuICAgIHJldHVybiBGSUJSQTtcbn0oKSk7XG5leHBvcnQgeyBGSUJSQSB9O1xuRklCUkEubnMgPSAnaHR0cDovL2hkbGFiLnN0YW5mb3JkLmVkdS9maWJyYS9vbnRvbG9neSMnO1xuRklCUkEuUHJvamVjdCA9IG5ldyBOYW1lZE5vZGUoRklCUkEubnMgKyAnUHJvamVjdCcpO1xuRklCUkEuZ3JhcGggPSBuZXcgTmFtZWROb2RlKEZJQlJBLm5zICsgJ2dyYXBoJyk7XG5GSUJSQS5xdWFsaWZpZWRBc3NlcnRpb24gPSBuZXcgTmFtZWROb2RlKEZJQlJBLm5zICsgJ3F1YWxpZmllZEFzc2VydGlvbicpO1xuRklCUkEub3JkZXIgPSBuZXcgTmFtZWROb2RlKEZJQlJBLm5zICsgJ29yZGVyJyk7XG5GSUJSQS5zY2hlbWFOUyA9IG5ldyBOYW1lZE5vZGUoRklCUkEubnMgKyAnc2NoZW1hTlMnKTtcbkZJQlJBLmluc3RhbmNlTlMgPSBuZXcgTmFtZWROb2RlKEZJQlJBLm5zICsgJ2luc3RhbmNlTlMnKTtcbkZJQlJBLnVwZGF0ZUVuZHBvaW50ID0gbmV3IE5hbWVkTm9kZShGSUJSQS5ucyArICd1cGRhdGVFbmRwb2ludCcpO1xuRklCUkEuY29uZmlndXJhdGlvbiA9IG5ldyBOYW1lZE5vZGUoRklCUkEubnMgKyAnY29uZmlndXJhdGlvbicpO1xuRklCUkEuY29uZmlndXJhdGlvblJlZmVyZW5jZSA9IG5ldyBOYW1lZE5vZGUoRklCUkEubnMgKyAnY29uZmlndXJhdGlvblJlZmVyZW5jZScpO1xuRklCUkEuc2NoZW1hID0gbmV3IE5hbWVkTm9kZShGSUJSQS5ucyArICdzY2hlbWEnKTtcbkZJQlJBLnNjaGVtYVJlZmVyZW5jZSA9IG5ldyBOYW1lZE5vZGUoRklCUkEubnMgKyAnc2NoZW1hUmVmZXJlbmNlJyk7XG5GSUJSQS5hdXRvY29tcGxldGlvblF1ZXJ5ID0gbmV3IE5hbWVkTm9kZShGSUJSQS5ucyArICdhdXRvY29tcGxldGlvblF1ZXJ5Jyk7XG5GSUJSQS5wcm9wZXJ0eVF1ZXJ5ID0gbmV3IE5hbWVkTm9kZShGSUJSQS5ucyArICdwcm9wZXJ0eVF1ZXJ5Jyk7XG5GSUJSQS5jbGFzc1F1ZXJ5ID0gbmV3IE5hbWVkTm9kZShGSUJSQS5ucyArICdjbGFzc1F1ZXJ5Jyk7XG5GSUJSQS5pdGVtUXVlcnkgPSBuZXcgTmFtZWROb2RlKEZJQlJBLm5zICsgJ2l0ZW1RdWVyeScpO1xuRklCUkEuZGVsZXRlSXRlbVF1ZXJ5ID0gbmV3IE5hbWVkTm9kZShGSUJSQS5ucyArICdkZWxldGVJdGVtUXVlcnknKTtcbkZJQlJBLlJlbW90ZUVuZHBvaW50Q29uZmlndXJhdGlvbiA9IG5ldyBOYW1lZE5vZGUoRklCUkEubnMgKyAnUmVtb3RlRW5kcG9pbnRDb25maWd1cmF0aW9uJyk7XG5GSUJSQS5QcmltYXJ5RW5kcG9pbnRDb25maWd1cmF0aW9uID0gbmV3IE5hbWVkTm9kZShGSUJSQS5ucyArICdQcmltYXJ5RW5kcG9pbnRDb25maWd1cmF0aW9uJyk7XG5GSUJSQS5BdXRob3JpdHlFbmRwb2ludENvbmZpZ3VyYXRpb24gPSBuZXcgTmFtZWROb2RlKEZJQlJBLm5zICsgJ0F1dGhvcml0eUVuZHBvaW50Q29uZmlndXJhdGlvbicpO1xuRklCUkEuQXJjaGl2ZUVuZHBvaW50Q29uZmlndXJhdGlvbiA9IG5ldyBOYW1lZE5vZGUoRklCUkEubnMgKyAnQXJjaGl2ZUVuZHBvaW50Q29uZmlndXJhdGlvbicpO1xuRklCUkEuU2NoZW1hID0gbmV3IE5hbWVkTm9kZShGSUJSQS5ucyArICdTY2hlbWEnKTtcbnZhciBTRCA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU0QoKSB7XG4gICAgfVxuICAgIHJldHVybiBTRDtcbn0oKSk7XG5leHBvcnQgeyBTRCB9O1xuU0QubnMgPSAnaHR0cDovL3d3dy53My5vcmcvbnMvc3BhcnFsLXNlcnZpY2UtZGVzY3JpcHRpb24jJztcblNELl9uYW1lID0gbmV3IE5hbWVkTm9kZShTRC5ucyArICduYW1lJyk7XG52YXIgU0tPUyA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU0tPUygpIHtcbiAgICB9XG4gICAgcmV0dXJuIFNLT1M7XG59KCkpO1xuZXhwb3J0IHsgU0tPUyB9O1xuU0tPUy5ucyA9ICdodHRwOi8vd3d3LnczLm9yZy8yMDA0LzAyL3Nrb3MvY29yZSMnO1xuU0tPUy5wcmVmTGFiZWwgPSBuZXcgTmFtZWROb2RlKFNLT1MubnMgKyAncHJlZkxhYmVsJyk7XG5TS09TLmFsdExhYmVsID0gbmV3IE5hbWVkTm9kZShTS09TLm5zICsgJ2FsdExhYmVsJyk7XG5TS09TLnJlbGF0ZWQgPSBuZXcgTmFtZWROb2RlKFNLT1MubnMgKyAncmVsYXRlZCcpO1xudmFyIFZPSUQgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFZPSUQoKSB7XG4gICAgfVxuICAgIHJldHVybiBWT0lEO1xufSgpKTtcbmV4cG9ydCB7IFZPSUQgfTtcblZPSUQubnMgPSAnaHR0cDovL3JkZnMub3JnL25zL3ZvaWQjJztcblZPSUQuc3BhcnFsRW5kcG9pbnQgPSBuZXcgTmFtZWROb2RlKFZPSUQubnMgKyAnc3BhcnFsRW5kcG9pbnQnKTtcbnZhciBEQ1Rlcm1zID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBEQ1Rlcm1zKCkge1xuICAgIH1cbiAgICByZXR1cm4gRENUZXJtcztcbn0oKSk7XG5leHBvcnQgeyBEQ1Rlcm1zIH07XG5EQ1Rlcm1zLm5zID0gJ2h0dHA6Ly9wdXJsLm9yZy9kYy90ZXJtcy8nO1xuRENUZXJtcy5yaWdodHNIb2xkZXIgPSBuZXcgTmFtZWROb2RlKERDVGVybXMubnMgKyAncmlnaHRzSG9sZGVyJyk7XG5EQ1Rlcm1zLmRlc2NyaXB0aW9uID0gbmV3IE5hbWVkTm9kZShEQ1Rlcm1zLm5zICsgJ2Rlc2NyaXB0aW9uJyk7XG52YXIgRk9BRiA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRk9BRigpIHtcbiAgICB9XG4gICAgcmV0dXJuIEZPQUY7XG59KCkpO1xuZXhwb3J0IHsgRk9BRiB9O1xuRk9BRi5ucyA9ICdodHRwOi8veG1sbnMuY29tL2ZvYWYvMC4xLyc7XG5GT0FGLmhvbWVwYWdlID0gbmV3IE5hbWVkTm9kZShGT0FGLm5zICsgJ2hvbWVwYWdlJyk7XG52YXIgT1dMID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBPV0woKSB7XG4gICAgfVxuICAgIHJldHVybiBPV0w7XG59KCkpO1xuZXhwb3J0IHsgT1dMIH07XG5PV0wubnMgPSAnaHR0cDovL3d3dy53My5vcmcvMjAwMi8wNy9vd2wjJztcbk9XTC5zYW1lQXMgPSBuZXcgTmFtZWROb2RlKE9XTC5ucyArICdzYW1lQXMnKTtcbk9XTC5UaGluZyA9IG5ldyBOYW1lZE5vZGUoT1dMLm5zICsgJ1RoaW5nJyk7XG5PV0wuQ2xhc3MgPSBuZXcgTmFtZWROb2RlKE9XTC5ucyArICdDbGFzcycpO1xudmFyIFJERiA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUkRGKCkge1xuICAgIH1cbiAgICByZXR1cm4gUkRGO1xufSgpKTtcbmV4cG9ydCB7IFJERiB9O1xuUkRGLm5zID0gJ2h0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMnO1xuUkRGLnR5cGUgPSBuZXcgTmFtZWROb2RlKFJERi5ucyArICd0eXBlJyk7XG5SREYubGFuZ1N0cmluZyA9IG5ldyBOYW1lZE5vZGUoUkRGLm5zICsgJ2xhbmdTdHJpbmcnKTtcblJERi5UcmlwbGUgPSBuZXcgTmFtZWROb2RlKFJERi5ucyArICdUcmlwbGUnKTtcblJERi5zdWJqZWN0ID0gbmV3IE5hbWVkTm9kZShSREYubnMgKyAnc3ViamVjdCcpO1xuUkRGLnByZWRpY2F0ZSA9IG5ldyBOYW1lZE5vZGUoUkRGLm5zICsgJ3ByZWRpY2F0ZScpO1xuUkRGLm9iamVjdCA9IG5ldyBOYW1lZE5vZGUoUkRGLm5zICsgJ29iamVjdCcpO1xuUkRGLnZhbHVlID0gbmV3IE5hbWVkTm9kZShSREYubnMgKyAndmFsdWUnKTtcbnZhciBYTUxTY2hlbWEgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFhNTFNjaGVtYSgpIHtcbiAgICB9XG4gICAgcmV0dXJuIFhNTFNjaGVtYTtcbn0oKSk7XG5leHBvcnQgeyBYTUxTY2hlbWEgfTtcblhNTFNjaGVtYS5ucyA9ICdodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYSMnO1xuWE1MU2NoZW1hLnN0cmluZyA9IG5ldyBOYW1lZE5vZGUoWE1MU2NoZW1hLm5zICsgJ3N0cmluZycpO1xudmFyIENJRE9DID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBDSURPQygpIHtcbiAgICB9XG4gICAgcmV0dXJuIENJRE9DO1xufSgpKTtcbmV4cG9ydCB7IENJRE9DIH07XG5DSURPQy5ucyA9ICdodHRwOi8vd3d3LmNpZG9jLWNybS5vcmcvY2lkb2MtY3JtLyc7XG5DSURPQy5QZXJzb24gPSBuZXcgTmFtZWROb2RlKENJRE9DLm5zICsgJ0UyMV9QZXJzb24nKTtcbkNJRE9DLlBsYWNlID0gbmV3IE5hbWVkTm9kZShDSURPQy5ucyArICdFNTNfUGxhY2UnKTtcbkNJRE9DLkdyb3VwID0gbmV3IE5hbWVkTm9kZShDSURPQy5ucyArICdFNzRfR3JvdXAnKTtcbnZhciBHRVRUWSA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gR0VUVFkoKSB7XG4gICAgfVxuICAgIHJldHVybiBHRVRUWTtcbn0oKSk7XG5leHBvcnQgeyBHRVRUWSB9O1xuR0VUVFkubnMgPSAnaHR0cDovL3ZvY2FiLmdldHR5LmVkdS9vbnRvbG9neSMnO1xuR0VUVFkuQWRtaW5QbGFjZUNvbmNlcHQgPSBuZXcgTmFtZWROb2RlKEdFVFRZLm5zICsgJ0FkbWluUGxhY2VDb25jZXB0Jyk7XG5HRVRUWS5QaHlzaWNhbFBsYWNlQ29uY2VwdCA9IG5ldyBOYW1lZE5vZGUoR0VUVFkubnMgKyAnUGh5c2ljYWxQbGFjZUNvbmNlcHQnKTtcbkdFVFRZLlBoeXNBZG1pblBsYWNlQ29uY2VwdCA9IG5ldyBOYW1lZE5vZGUoR0VUVFkubnMgKyAnUGh5c0FkbWluUGxhY2VDb25jZXB0Jyk7XG5HRVRUWS5QZXJzb25Db25jZXB0ID0gbmV3IE5hbWVkTm9kZShHRVRUWS5ucyArICdQZXJzb25Db25jZXB0Jyk7XG5HRVRUWS5Hcm91cENvbmNlcHQgPSBuZXcgTmFtZWROb2RlKEdFVFRZLm5zICsgJ0dyb3VwQ29uY2VwdCcpO1xudmFyIE1BRFMgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE1BRFMoKSB7XG4gICAgfVxuICAgIHJldHVybiBNQURTO1xufSgpKTtcbmV4cG9ydCB7IE1BRFMgfTtcbk1BRFMubnMgPSAnaHR0cDovL3d3dy5sb2MuZ292L21hZHMvcmRmL3YxIyc7XG5NQURTLkNvcnBvcmF0ZU5hbWUgPSBuZXcgTmFtZWROb2RlKE1BRFMubnMgKyAnQ29ycG9yYXRlTmFtZScpO1xuTUFEUy5QZXJzb25hbE5hbWUgPSBuZXcgTmFtZWROb2RlKE1BRFMubnMgKyAnUGVyc29uYWxOYW1lJyk7XG5NQURTLk5hbWVUaXRsZSA9IG5ldyBOYW1lZE5vZGUoTUFEUy5ucyArICdOYW1lVGl0bGUnKTtcbk1BRFMuR2VvZ3JhcGhpYyA9IG5ldyBOYW1lZE5vZGUoTUFEUy5ucyArICdHZW9ncmFwaGljJyk7XG52YXIgR0VPVk9DQUIgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEdFT1ZPQ0FCKCkge1xuICAgIH1cbiAgICByZXR1cm4gR0VPVk9DQUI7XG59KCkpO1xuZXhwb3J0IHsgR0VPVk9DQUIgfTtcbkdFT1ZPQ0FCLm5zID0gJ2h0dHA6Ly9nZW92b2NhYi5vcmcvc3BhdGlhbCMnO1xuR0VPVk9DQUIuRmVhdHVyZSA9IG5ldyBOYW1lZE5vZGUoR0VPVk9DQUIubnMgKyAnRmVhdHVyZScpO1xudmFyIEVOb2RlTWFwID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBFTm9kZU1hcChjcmVhdGUsIG1hcCkge1xuICAgICAgICBpZiAoY3JlYXRlID09PSB2b2lkIDApIHsgY3JlYXRlID0gZnVuY3Rpb24gKCkgeyByZXR1cm4ge307IH07IH1cbiAgICAgICAgaWYgKG1hcCA9PT0gdm9pZCAwKSB7IG1hcCA9IG5ldyBFTWFwKCk7IH1cbiAgICAgICAgdGhpcy5jcmVhdGUgPSBjcmVhdGU7XG4gICAgICAgIHRoaXMubWFwID0gbWFwO1xuICAgIH1cbiAgICBFTm9kZU1hcC5wcm90b3R5cGUuZ29jID0gZnVuY3Rpb24gKGtleSwgY3JlYXRlKSB7XG4gICAgICAgIGlmICghdGhpcy5oYXMoa2V5KSlcbiAgICAgICAgICAgIHRoaXMuc2V0KGtleSwgY3JlYXRlID8gY3JlYXRlKGtleSkgOiB0aGlzLmNyZWF0ZShrZXkpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KGtleSk7XG4gICAgfTtcbiAgICBFTm9kZU1hcC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXAuZ2V0KGtleS50b0Nhbm9uaWNhbCgpKTtcbiAgICB9O1xuICAgIEVOb2RlTWFwLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hcC5yZW1vdmUoa2V5LnRvQ2Fub25pY2FsKCkpO1xuICAgIH07XG4gICAgRU5vZGVNYXAucHJvdG90eXBlLmVhY2ggPSBmdW5jdGlvbiAoZikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLm1hcC5lYWNoKGZ1bmN0aW9uICh2YWx1ZSwga2V5LCBtYXApIHsgcmV0dXJuIGYodmFsdWUsIERhdGFGYWN0b3J5Lmluc3RhbmNlLm5vZGVGcm9tQ2Fub25pY2FsUmVwcmVzZW50YXRpb24oa2V5KSwgX3RoaXMpOyB9KTtcbiAgICB9O1xuICAgIEVOb2RlTWFwLnByb3RvdHlwZS5oYXMgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hcC5oYXMoa2V5LnRvQ2Fub25pY2FsKCkpO1xuICAgIH07XG4gICAgRU5vZGVNYXAucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gICAgICAgIHRoaXMubWFwLnNldChrZXkudG9DYW5vbmljYWwoKSwgdmFsdWUpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShFTm9kZU1hcC5wcm90b3R5cGUsIFwic2l6ZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubWFwLnNpemUoKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgRU5vZGVNYXAucHJvdG90eXBlLnZhbHVlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWFwLnZhbHVlcygpO1xuICAgIH07XG4gICAgRU5vZGVNYXAucHJvdG90eXBlLmtleXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hcC5rZXlzKCkubWFwKGZ1bmN0aW9uIChrKSB7IHJldHVybiBEYXRhRmFjdG9yeS5pbnN0YW5jZS5ub2RlRnJvbUNhbm9uaWNhbFJlcHJlc2VudGF0aW9uKGspOyB9KTtcbiAgICB9O1xuICAgIEVOb2RlTWFwLnByb3RvdHlwZS5lbnRyaWVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXAuZW50cmllcygpLm1hcChmdW5jdGlvbiAobykgeyByZXR1cm4geyBrZXk6IERhdGFGYWN0b3J5Lmluc3RhbmNlLm5vZGVGcm9tQ2Fub25pY2FsUmVwcmVzZW50YXRpb24oby5rZXkpLCB2YWx1ZTogby52YWx1ZSB9OyB9KTtcbiAgICB9O1xuICAgIEVOb2RlTWFwLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5tYXAuY2xlYXIoKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICByZXR1cm4gRU5vZGVNYXA7XG59KCkpO1xuZXhwb3J0IHsgRU5vZGVNYXAgfTtcbnZhciBFT05vZGVNYXAgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhFT05vZGVNYXAsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gRU9Ob2RlTWFwKGNyZWF0ZSkge1xuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgY3JlYXRlLCBuZXcgRU9NYXAoKSkgfHwgdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIEVPTm9kZU1hcDtcbn0oRU5vZGVNYXApKTtcbmV4cG9ydCB7IEVPTm9kZU1hcCB9O1xudmFyIE5vZGVTZXQgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5vZGVTZXQobWFwKSB7XG4gICAgICAgIGlmIChtYXAgPT09IHZvaWQgMCkgeyBtYXAgPSBuZXcgRU1hcCgpOyB9XG4gICAgICAgIHRoaXMubSA9IG5ldyBFTm9kZU1hcCh1bmRlZmluZWQsIG1hcCk7XG4gICAgfVxuICAgIE5vZGVTZXQucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0aGlzLm0uc2V0KHZhbHVlLCB2YWx1ZSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgTm9kZVNldC5wcm90b3R5cGUuYWRkYSA9IGZ1bmN0aW9uIChhcnIpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgYXJyLmZvckVhY2goZnVuY3Rpb24gKG4pIHsgcmV0dXJuIF90aGlzLmFkZChuKTsgfSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgTm9kZVNldC5wcm90b3R5cGUuYWRkcyA9IGZ1bmN0aW9uIChvc2V0KSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIG9zZXQuZWFjaChmdW5jdGlvbiAobikgeyByZXR1cm4gX3RoaXMuYWRkKG4pOyB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBOb2RlU2V0LnByb3RvdHlwZS5oYXMgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubS5oYXModmFsdWUpO1xuICAgIH07XG4gICAgTm9kZVNldC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm0uZ2V0KHZhbHVlKTtcbiAgICB9O1xuICAgIE5vZGVTZXQucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLm0uY2xlYXIoKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBOb2RlU2V0LnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubS5yZW1vdmUodmFsdWUpO1xuICAgIH07XG4gICAgTm9kZVNldC5wcm90b3R5cGUudmFsdWVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tLnZhbHVlcygpO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE5vZGVTZXQucHJvdG90eXBlLCBcInNpemVcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm0uc2l6ZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgTm9kZVNldC5wcm90b3R5cGUuZWFjaCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMubS5lYWNoKGZ1bmN0aW9uICh2YWx1ZSwga2V5LCBtYXApIHsgcmV0dXJuIGYodmFsdWUsIHZhbHVlLCBfdGhpcyk7IH0pO1xuICAgIH07XG4gICAgcmV0dXJuIE5vZGVTZXQ7XG59KCkpO1xuZXhwb3J0IHsgTm9kZVNldCB9O1xudmFyIE9Ob2RlU2V0ID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoT05vZGVTZXQsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gT05vZGVTZXQoKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBuZXcgRU9NYXAoKSkgfHwgdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIE9Ob2RlU2V0O1xufShOb2RlU2V0KSk7XG5leHBvcnQgeyBPTm9kZVNldCB9O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vYXBwL21vZGVscy9yZGYudHMiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFQQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU9BO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),
/* 3 */,
/* 4 */,
/* 5 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__models_richnode__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__models_rdf__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__services_worker_service_worker_service__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__components_collection_utils__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__components_misc_utils__ = __webpack_require__(20);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return PropertyAndValue; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"e\", function() { return RichPropertyValue; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return PropertyToValues; });\n/* unused harmony export Item */\n/* unused harmony export SimpleConstraint */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return SparqlItemService; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return SparqlItemWorkerService; });\n\n\nvar __extends = this && this.__extends || function () {\n    var extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (d, b) {\n        d.__proto__ = b;\n    } || function (d, b) {\n        for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() {\n            this.constructor = d;\n        }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n}();\n\n\n\n\n\n\nvar PropertyAndValue = function () {\n    function PropertyAndValue(property, object, properties) {\n        if (properties === void 0) {\n            properties = [];\n        }\n        this.property = property;\n        this.object = object;\n        this.properties = properties;\n    }\n    PropertyAndValue.prototype.pruned = function () {\n        return new PropertyAndValue(new __WEBPACK_IMPORTED_MODULE_1__models_richnode__[\"a\" /* PrunedRichNodeFromNode */](this.property), new __WEBPACK_IMPORTED_MODULE_1__models_richnode__[\"a\" /* PrunedRichNodeFromNode */](this.object), this.properties.map(function (p) {\n            return p.pruned();\n        }));\n    };\n    return PropertyAndValue;\n}();\n\nvar RichPropertyValue = function () {\n    function RichPropertyValue(value, properties) {\n        if (properties === void 0) {\n            properties = [];\n        }\n        this.value = value;\n        this.properties = properties;\n    }\n    return RichPropertyValue;\n}();\n\nvar PropertyToValues = function (_super) {\n    __extends(PropertyToValues, _super);\n    function PropertyToValues(property) {\n        var _this = _super.call(this, property) || this;\n        _this.values = [];\n        return _this;\n    }\n    PropertyToValues.toPropertyAndValues = function (pv, includePropertiesOfProperties) {\n        return pv.values.map(function (v) {\n            return new PropertyAndValue(pv, v.value, __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5__components_misc_utils__[\"a\" /* flatten */])(v.properties.map(function (pv2) {\n                return pv2.values.map(function (v2) {\n                    return new PropertyAndValue(pv2, v2.value);\n                });\n            })));\n        });\n    };\n    PropertyToValues.prototype.toPropertyAndValues = function (includePropertiesOfProperties) {\n        return PropertyToValues.toPropertyAndValues(this, includePropertiesOfProperties);\n    };\n    return PropertyToValues;\n}(__WEBPACK_IMPORTED_MODULE_1__models_richnode__[\"b\" /* RichNodeFromRichNode */]);\n\nvar Item = function (_super) {\n    __extends(Item, _super);\n    function Item() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.localProperties = [];\n        _this.remoteProperties = [];\n        _this.localInverseProperties = [];\n        _this.remoteInverseProperties = [];\n        return _this;\n    }\n    return Item;\n}(__WEBPACK_IMPORTED_MODULE_1__models_richnode__[\"c\" /* FullRichNodeFromNode */]);\n\nvar SimpleConstraint = function () {\n    function SimpleConstraint(constraintString, priority) {\n        if (priority === void 0) {\n            priority = 0;\n        }\n        this.constraintString = constraintString;\n        this.priority = priority;\n    }\n    return SimpleConstraint;\n}();\n\nvar SparqlItemService = function () {\n    function SparqlItemService(workerService) {\n        this.workerService = workerService;\n    }\n    /**\n     * Get a single item from the local store\n     * @param queryRemote whether to query remote endpoints for properties\n     * @param canceller promise that can be resolved to cancel a remote fetch\n     */\n    SparqlItemService.prototype.getItem = function (id, queryRemote, canceller) {\n        if (queryRemote === void 0) {\n            queryRemote = false;\n        }\n        return this.workerService.call('sparqlItemWorkerService', 'getItems', [[id.toCanonical()], queryRemote], canceller).then(function (items) {\n            return items[0];\n        }, null, function (info) {\n            return { endpointType: info.endpointType, endpoint: info.endpoint, item: info.items[0] };\n        });\n    };\n    /**\n     * Get multiple items from the local store\n     * @param queryRemote whether to query remote endpoints for properties\n     * @param canceller promise that can be resolved to cancel a remote fetch\n     */\n    SparqlItemService.prototype.getItems = function (ids, queryRemote, canceller) {\n        if (queryRemote === void 0) {\n            queryRemote = false;\n        }\n        return this.workerService.call('sparqlItemWorkerService', 'getItems', [ids.map(function (id) {\n            return id.toCanonical();\n        }), queryRemote], canceller);\n    };\n    SparqlItemService.prototype.getAllItems = function (queryRemote, canceller) {\n        if (queryRemote === void 0) {\n            queryRemote = false;\n        }\n        return this.workerService.call('sparqlItemWorkerService', 'getItems', [false, queryRemote], canceller);\n    };\n    SparqlItemService.prototype.createNewItem = function (properties) {\n        if (properties === void 0) {\n            properties = [];\n        }\n        return this.workerService.call('sparqlItemWorkerService', 'createNewItem', [properties.map(function (pv) {\n            return pv.pruned();\n        })]);\n    };\n    SparqlItemService.prototype.alterItem = function (id, propertiesToAdd, propertiesToRemove) {\n        if (propertiesToRemove === void 0) {\n            propertiesToRemove = [];\n        }\n        return this.workerService.call('sparqlItemWorkerService', 'alterItem', [id, propertiesToAdd.map(function (pv) {\n            return pv.pruned();\n        }), propertiesToRemove.map(function (pv) {\n            return pv.pruned();\n        })]);\n    };\n    SparqlItemService.prototype.deleteItem = function (id) {\n        return this.workerService.call('sparqlItemWorkerService', 'deleteItem', [id]);\n    };\n    return SparqlItemService;\n}();\n\nSparqlItemService.naiveGetLocalItemPropertiesQuery = \"PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\\nPREFIX mads: <http://www.loc.gov/mads/rdf/v1#>\\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\\nSELECT ?id ?itemLabel ?property ?propertyLabel ?object ?objectLabel {\\n# STARTGRAPH\\n  VALUES ?id { <IDS> }\\n  ?id skos:prefLabel|mads:authoritativeLabel|rdfs:label ?itemLabel .\\n  FILTER(LANG(?itemLabel)='' || LANG(?itemLabel)='<PREFLANG>')\\n  ?id ?property ?object .\\n  OPTIONAL {\\n    ?property skos:prefLabel|rdfs:label ?propertyLabelP .\\n    FILTER(LANG(?propertyLabelP)='' || LANG(?propertyLabelP)='<PREFLANG>')\\n  }\\n  BIND(COALESCE(?propertyLabelP,REPLACE(REPLACE(REPLACE(REPLACE(STR(?property),\\\".*/\\\",\\\"\\\"),\\\".*#\\\",\\\"\\\"),\\\"_\\\",\\\" \\\"),\\\"([A-Z\\u00C5\\u00C4\\u00D6])\\\",\\\" $1\\\")) AS ?propertyLabel)\\n  OPTIONAL {\\n    ?object skos:prefLabel|rdfs:label ?objectLabelP .\\n    FILTER(LANG(?objectLabelP)='' || LANG(?objectLabelP)='<PREFLANG>')\\n  }\\n  BIND (IF(ISIRI(?object),COALESCE(?objectLabelP,REPLACE(REPLACE(REPLACE(REPLACE(STR(?object),\\\".*/\\\",\\\"\\\"),\\\".*#\\\",\\\"\\\"),\\\"_\\\",\\\" \\\"),\\\"([A-Z\\u00C5\\u00C4\\u00D6])\\\",\\\" $1\\\")),?object) AS ?objectLabel)\\n# ENDGRAPH\\n}\";\nSparqlItemService.getLocalItemPropertiesQuery = \"PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\\nPREFIX mads: <http://www.loc.gov/mads/rdf/v1#>\\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\\nPREFIX sf: <http://ldf.fi/functions#>\\nSELECT ?id ?itemLabel ?property ?propertyLabel ?object ?objectLabel {\\n# STARTGRAPH\\n  VALUES ?id { <IDS> }\\n  { ?id ?property ?object . }\\n  UNION\\n  { ?object ?property ?id . }\\n  ?id sf:preferredLanguageLiteral (skos:prefLabel mads:authoritativeLabel rdfs:label skos:altLabel mads:variantLabel '<PREFLANG>' '' ?itemLabel) .\\n  OPTIONAL {\\n    ?property sf:preferredLanguageLiteral (skos:prefLabel mads:authoritativeLabel rdfs:label skos:altLabel mads:variantLabel '<PREFLANG>' '' ?propertyLabelP)\\n  }\\n  BIND(COALESCE(?propertyLabelP,REPLACE(REPLACE(REPLACE(REPLACE(STR(?property),\\\".*/\\\",\\\"\\\"),\\\".*#\\\",\\\"\\\"),\\\"_\\\",\\\" \\\"),\\\"([A-Z\\u00C5\\u00C4\\u00D6])\\\",\\\" $1\\\")) AS ?propertyLabel)\\n  OPTIONAL {\\n    ?object sf:preferredLanguageLiteral (skos:prefLabel mads:authoritativeLabel rdfs:label skos:altLabel mads:variantLabel '<PREFLANG>' '' ?objectLabelP) .\\n  }\\n  BIND (IF(ISIRI(?object),COALESCE(?objectLabelP,REPLACE(REPLACE(REPLACE(REPLACE(STR(?object),\\\".*/\\\",\\\"\\\"),\\\".*#\\\",\\\"\\\"),\\\"_\\\",\\\" \\\"),\\\"([A-Z\\u00C5\\u00C4\\u00D6])\\\",\\\" $1\\\")),?object) AS ?objectLabel)\\n# ENDGRAPH\\n}\";\nSparqlItemService.getRemoteItemPropertiesQuery = \"PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\\nPREFIX mads: <http://www.loc.gov/mads/rdf/v1#>\\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\\nPREFIX sf: <http://ldf.fi/functions#>\\nSELECT ?id ?property ?propertyLabel ?object ?objectLabel {\\nVALUES (?id ?oid) { <IDPAIRS> }\\n?oid ?property ?object .\\nOPTIONAL {\\n  ?property sf:preferredLanguageLiteral (skos:prefLabel mads:authoritativeLabel rdfs:label skos:altLabel mads:variantLabel '<PREFLANG>' '' ?propertyLabelP)\\n}\\nBIND(COALESCE(?propertyLabelP,REPLACE(REPLACE(REPLACE(REPLACE(STR(?property),\\\".*/\\\",\\\"\\\"),\\\".*#\\\",\\\"\\\"),\\\"_\\\",\\\" \\\"),\\\"([A-Z\\u00C5\\u00C4\\u00D6])\\\",\\\" $1\\\")) AS ?propertyLabel)\\nOPTIONAL {\\n  ?object sf:preferredLanguageLiteral (skos:prefLabel mads:authoritativeLabel rdfs:label skos:altLabel mads:variantLabel '<PREFLANG>' '' ?objectLabelP) .\\n}\\nBIND (IF(ISIRI(?object),COALESCE(?objectLabelP,REPLACE(REPLACE(REPLACE(REPLACE(STR(?object),\\\".*/\\\",\\\"\\\"),\\\".*#\\\",\\\"\\\"),\\\"_\\\",\\\" \\\"),\\\"([A-Z\\u00C5\\u00C4\\u00D6])\\\",\\\" $1\\\")),?object) AS ?objectLabel)\\n}\\n\";\nSparqlItemService.deleteItemQuery = \"DELETE {\\n# STARTGRAPH\\n  <ID> ?p ?o .\\n  ?s ?p <ID> .\\n# ENDGRAPH\\n}\\nWHERE {\\n# STARTGRAPH\\n  { <ID> ?p ?o } UNION { ?s ?p <ID> }\\n# ENDGRAPH\\n}\\n\";\nvar SparqlItemWorkerService = function () {\n    function SparqlItemWorkerService(fibraSparqlService, $q, sparqlUpdateWorkerService, stateWorkerService) {\n        this.fibraSparqlService = fibraSparqlService;\n        this.$q = $q;\n        this.sparqlUpdateWorkerService = sparqlUpdateWorkerService;\n        this.stateWorkerService = stateWorkerService;\n    }\n    SparqlItemWorkerService.processItemResult = function (properties, propertyMap, propertyValueMap, sameAses, endpoint, b) {\n        if (b['property']) {\n            var n = propertyValueMap.goc(b['property'].value).goc(b['object'].value, function () {\n                var propertyToValues = propertyMap.goc(b['property'].value, function () {\n                    var ret = new PropertyToValues(__WEBPACK_IMPORTED_MODULE_2__models_rdf__[\"b\" /* DataFactory */].instance.nodeFromBinding(b['property']));\n                    if (b['propertyLabel']) ret.label = b['propertyLabel'].value;\n                    properties.push(ret);\n                    return ret;\n                });\n                var oNode = new __WEBPACK_IMPORTED_MODULE_1__models_richnode__[\"c\" /* FullRichNodeFromNode */](__WEBPACK_IMPORTED_MODULE_2__models_rdf__[\"b\" /* DataFactory */].instance.nodeFromBinding(b['object']));\n                oNode.sourceEndpoints = [];\n                propertyToValues.values.push(new RichPropertyValue(oNode));\n                if (__WEBPACK_IMPORTED_MODULE_2__models_rdf__[\"e\" /* OWL */].sameAs.equals(propertyToValues)) sameAses.push(oNode);\n                return oNode;\n            });\n            n.sourceEndpoints.push(endpoint);\n            if (b['objectLabel'] && !n.label) n.label = b['objectLabel'].value;\n        }\n    };\n    SparqlItemWorkerService.prototype.getItems = function (ids, queryRemote, canceller) {\n        var _this = this;\n        if (queryRemote === void 0) {\n            queryRemote = false;\n        }\n        var queryTemplate = this.stateWorkerService.state.project.itemQuery;\n        if (!ids) queryTemplate = queryTemplate.replace(/VALUES \\?id { <IDS> }/g, '');else queryTemplate = queryTemplate.replace(/<IDS>/g, ids.join(''));\n        queryTemplate = queryTemplate.replace(/<PREFLANG>/g, this.stateWorkerService.state.language);\n        var items = new __WEBPACK_IMPORTED_MODULE_4__components_collection_utils__[\"a\" /* EMap */](function (id) {\n            return new Item(__WEBPACK_IMPORTED_MODULE_2__models_rdf__[\"b\" /* DataFactory */].instance.namedNode(id));\n        });\n        var ret = this.$q.defer();\n        this.fibraSparqlService.query(this.stateWorkerService.state.project.endpoint, queryTemplate, { timeout: canceller }).then(function (response) {\n            var idPropertyMap = new __WEBPACK_IMPORTED_MODULE_4__components_collection_utils__[\"a\" /* EMap */](function () {\n                return new __WEBPACK_IMPORTED_MODULE_4__components_collection_utils__[\"a\" /* EMap */]();\n            });\n            var idPropertyValueMap = new __WEBPACK_IMPORTED_MODULE_4__components_collection_utils__[\"a\" /* EMap */](function () {\n                return new __WEBPACK_IMPORTED_MODULE_4__components_collection_utils__[\"a\" /* EMap */](function () {\n                    return new __WEBPACK_IMPORTED_MODULE_4__components_collection_utils__[\"a\" /* EMap */]();\n                });\n            });\n            var idSameAses = new __WEBPACK_IMPORTED_MODULE_2__models_rdf__[\"f\" /* ENodeMap */](function () {\n                return [];\n            });\n            for (var _i = 0, _a = response.results.bindings; _i < _a.length; _i++) {\n                var b = _a[_i];\n                var item = items.goc(b['id'].value);\n                if (b['itemLabel']) item.label = b['itemLabel'].value;\n                SparqlItemWorkerService.processItemResult(item.localProperties, idPropertyMap.goc(b['id'].value), idPropertyValueMap.goc(b['id'].value), idSameAses.goc(item), _this.stateWorkerService.state.project.endpoint, b);\n            }\n            if (queryRemote) {\n                ret.notify({ endpointType: 'primary', endpoint: _this.stateWorkerService.state.project.endpoint, items: items.values() });\n                var itemIdQuery_1 = '';\n                for (var _b = 0, _c = items.values(); _b < _c.length; _b++) {\n                    var item = _c[_b];\n                    itemIdQuery_1 += '(' + item.toCanonical() + item.toCanonical() + ')';\n                    for (var _d = 0, _e = idSameAses.get(item); _d < _e.length; _d++) {\n                        var item2 = _e[_d];\n                        itemIdQuery_1 += '(' + item.toCanonical() + item2.toCanonical() + ')';\n                    }\n                }\n                _this.$q.all(_this.stateWorkerService.state.project.remoteEndpoints().map(function (endpoint) {\n                    var queryTemplate2 = endpoint.itemQuery;\n                    queryTemplate2 = queryTemplate2.replace(/<IDPAIRS>/g, itemIdQuery_1);\n                    queryTemplate2 = queryTemplate2.replace(/<PREFLANG>/g, _this.stateWorkerService.state.language);\n                    return _this.fibraSparqlService.query(endpoint.endpoint, queryTemplate2, { timeout: canceller }).then(function (response2) {\n                        if (response2.results.bindings.length !== 0) {\n                            for (var _i = 0, _a = response2.results.bindings; _i < _a.length; _i++) {\n                                var b = _a[_i];\n                                var item = items.goc(b['id'].value);\n                                SparqlItemWorkerService.processItemResult(item.remoteProperties, idPropertyMap.goc(b['id'].value), idPropertyValueMap.goc(b['id'].value), idSameAses.goc(item), endpoint.id, b);\n                            }\n                            ret.notify({ endpointType: 'remote', endpoint: endpoint.id, items: items.values() });\n                        }\n                    }, function (error) {\n                        return ret.notify({ endpointType: 'remote', endpoint: endpoint.id, error: __WEBPACK_IMPORTED_MODULE_3__services_worker_service_worker_service__[\"b\" /* WorkerWorkerService */].stripFunctions(error) });\n                    });\n                })).then(function () {\n                    return ret.resolve(items.values());\n                });\n            } else ret.resolve(items.values());\n        });\n        return ret.promise;\n    };\n    SparqlItemWorkerService.prototype.deleteItem = function (id) {\n        return this.fibraSparqlService.update(this.stateWorkerService.state.project.updateEndpoint, this.stateWorkerService.state.project.deleteItemQuery.replace(/<ID>/g, id.toCanonical())).then(function (r) {\n            return true;\n        }, function (r) {\n            return false;\n        });\n    };\n    SparqlItemWorkerService.prototype.alterItem = function (id, propertiesToAdd, propertiesToRemove) {\n        if (propertiesToRemove === void 0) {\n            propertiesToRemove = [];\n        }\n        var triplesToAdd = [];\n        var triplesToRemove = [];\n        propertiesToAdd.forEach(function (property) {\n            return triplesToAdd.push(new __WEBPACK_IMPORTED_MODULE_2__models_rdf__[\"g\" /* Triple */](id, property.property, property.object));\n        });\n        propertiesToRemove.forEach(function (property) {\n            return triplesToRemove.push(new __WEBPACK_IMPORTED_MODULE_2__models_rdf__[\"g\" /* Triple */](id, property.property, property.object));\n        });\n        return this.sparqlUpdateWorkerService.updateGraphs(this.stateWorkerService.state.project.updateEndpoint, [new __WEBPACK_IMPORTED_MODULE_2__models_rdf__[\"c\" /* Graph */](this.stateWorkerService.state.project.graph ? __WEBPACK_IMPORTED_MODULE_2__models_rdf__[\"b\" /* DataFactory */].namedNode(this.stateWorkerService.state.project.graph) : __WEBPACK_IMPORTED_MODULE_2__models_rdf__[\"d\" /* DefaultGraph */].instance, triplesToAdd)], [new __WEBPACK_IMPORTED_MODULE_2__models_rdf__[\"c\" /* Graph */](this.stateWorkerService.state.project.graph ? __WEBPACK_IMPORTED_MODULE_2__models_rdf__[\"b\" /* DataFactory */].namedNode(this.stateWorkerService.state.project.graph) : __WEBPACK_IMPORTED_MODULE_2__models_rdf__[\"d\" /* DefaultGraph */].instance, triplesToRemove)]);\n    };\n    SparqlItemWorkerService.prototype.createNewItem = function (properties) {\n        if (properties === void 0) {\n            properties = [];\n        }\n        var deferred = this.$q.defer();\n        var subject = new __WEBPACK_IMPORTED_MODULE_2__models_rdf__[\"h\" /* NamedNode */](this.stateWorkerService.state.project.instanceNS + __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5__components_misc_utils__[\"b\" /* UUID */])());\n        deferred.notify(subject);\n        var triplesToAdd = [];\n        properties.forEach(function (property) {\n            return triplesToAdd.push(new __WEBPACK_IMPORTED_MODULE_2__models_rdf__[\"g\" /* Triple */](subject, property.property, property.object));\n        });\n        this.sparqlUpdateWorkerService.updateGraphs(this.stateWorkerService.state.project.updateEndpoint, [new __WEBPACK_IMPORTED_MODULE_2__models_rdf__[\"c\" /* Graph */](this.stateWorkerService.state.project.graph ? __WEBPACK_IMPORTED_MODULE_2__models_rdf__[\"b\" /* DataFactory */].namedNode(this.stateWorkerService.state.project.graph) : __WEBPACK_IMPORTED_MODULE_2__models_rdf__[\"d\" /* DefaultGraph */].instance, triplesToAdd)]).then(function () {\n            return deferred.resolve(subject);\n        }, deferred.reject, deferred.notify);\n        return deferred.promise;\n    };\n    return SparqlItemWorkerService;\n}();\n\n__WEBPACK_IMPORTED_MODULE_0_angular__[\"module\"]('fibra.services.sparql-item-service', []).config(function ($provide) {\n    $provide.service('sparqlItemService', SparqlItemService);\n});//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2FwcC9zZXJ2aWNlcy9zcGFycWwtaXRlbS1zZXJ2aWNlLnRzPzk3YWYiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5pbXBvcnQgKiBhcyBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IHsgUHJ1bmVkUmljaE5vZGVGcm9tTm9kZSwgUmljaE5vZGVGcm9tUmljaE5vZGUsIEZ1bGxSaWNoTm9kZUZyb21Ob2RlIH0gZnJvbSAnLi4vbW9kZWxzL3JpY2hub2RlJztcbmltcG9ydCB7IERhdGFGYWN0b3J5LCBEZWZhdWx0R3JhcGgsIEVOb2RlTWFwLCBPV0wsIFRyaXBsZSwgR3JhcGgsIE5hbWVkTm9kZSB9IGZyb20gJy4uL21vZGVscy9yZGYnO1xuaW1wb3J0IHsgV29ya2VyV29ya2VyU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL3dvcmtlci1zZXJ2aWNlL3dvcmtlci1zZXJ2aWNlJztcbmltcG9ydCB7IEVNYXAgfSBmcm9tICcuLi9jb21wb25lbnRzL2NvbGxlY3Rpb24tdXRpbHMnO1xuaW1wb3J0IHsgVVVJRCwgZmxhdHRlbiB9IGZyb20gJy4uL2NvbXBvbmVudHMvbWlzYy11dGlscyc7XG52YXIgUHJvcGVydHlBbmRWYWx1ZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUHJvcGVydHlBbmRWYWx1ZShwcm9wZXJ0eSwgb2JqZWN0LCBwcm9wZXJ0aWVzKSB7XG4gICAgICAgIGlmIChwcm9wZXJ0aWVzID09PSB2b2lkIDApIHsgcHJvcGVydGllcyA9IFtdOyB9XG4gICAgICAgIHRoaXMucHJvcGVydHkgPSBwcm9wZXJ0eTtcbiAgICAgICAgdGhpcy5vYmplY3QgPSBvYmplY3Q7XG4gICAgICAgIHRoaXMucHJvcGVydGllcyA9IHByb3BlcnRpZXM7XG4gICAgfVxuICAgIFByb3BlcnR5QW5kVmFsdWUucHJvdG90eXBlLnBydW5lZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9wZXJ0eUFuZFZhbHVlKG5ldyBQcnVuZWRSaWNoTm9kZUZyb21Ob2RlKHRoaXMucHJvcGVydHkpLCBuZXcgUHJ1bmVkUmljaE5vZGVGcm9tTm9kZSh0aGlzLm9iamVjdCksIHRoaXMucHJvcGVydGllcy5tYXAoZnVuY3Rpb24gKHApIHsgcmV0dXJuIHAucHJ1bmVkKCk7IH0pKTtcbiAgICB9O1xuICAgIHJldHVybiBQcm9wZXJ0eUFuZFZhbHVlO1xufSgpKTtcbmV4cG9ydCB7IFByb3BlcnR5QW5kVmFsdWUgfTtcbnZhciBSaWNoUHJvcGVydHlWYWx1ZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUmljaFByb3BlcnR5VmFsdWUodmFsdWUsIHByb3BlcnRpZXMpIHtcbiAgICAgICAgaWYgKHByb3BlcnRpZXMgPT09IHZvaWQgMCkgeyBwcm9wZXJ0aWVzID0gW107IH1cbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgICB0aGlzLnByb3BlcnRpZXMgPSBwcm9wZXJ0aWVzO1xuICAgIH1cbiAgICByZXR1cm4gUmljaFByb3BlcnR5VmFsdWU7XG59KCkpO1xuZXhwb3J0IHsgUmljaFByb3BlcnR5VmFsdWUgfTtcbnZhciBQcm9wZXJ0eVRvVmFsdWVzID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUHJvcGVydHlUb1ZhbHVlcywgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBQcm9wZXJ0eVRvVmFsdWVzKHByb3BlcnR5KSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHByb3BlcnR5KSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy52YWx1ZXMgPSBbXTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBQcm9wZXJ0eVRvVmFsdWVzLnRvUHJvcGVydHlBbmRWYWx1ZXMgPSBmdW5jdGlvbiAocHYsIGluY2x1ZGVQcm9wZXJ0aWVzT2ZQcm9wZXJ0aWVzKSB7XG4gICAgICAgIHJldHVybiBwdi52YWx1ZXMubWFwKGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvcGVydHlBbmRWYWx1ZShwdiwgdi52YWx1ZSwgZmxhdHRlbih2LnByb3BlcnRpZXMubWFwKGZ1bmN0aW9uIChwdjIpIHtcbiAgICAgICAgICAgIHJldHVybiBwdjIudmFsdWVzLm1hcChmdW5jdGlvbiAodjIpIHsgcmV0dXJuIG5ldyBQcm9wZXJ0eUFuZFZhbHVlKHB2MiwgdjIudmFsdWUpOyB9KTtcbiAgICAgICAgfSkpKTsgfSk7XG4gICAgfTtcbiAgICBQcm9wZXJ0eVRvVmFsdWVzLnByb3RvdHlwZS50b1Byb3BlcnR5QW5kVmFsdWVzID0gZnVuY3Rpb24gKGluY2x1ZGVQcm9wZXJ0aWVzT2ZQcm9wZXJ0aWVzKSB7XG4gICAgICAgIHJldHVybiBQcm9wZXJ0eVRvVmFsdWVzLnRvUHJvcGVydHlBbmRWYWx1ZXModGhpcywgaW5jbHVkZVByb3BlcnRpZXNPZlByb3BlcnRpZXMpO1xuICAgIH07XG4gICAgcmV0dXJuIFByb3BlcnR5VG9WYWx1ZXM7XG59KFJpY2hOb2RlRnJvbVJpY2hOb2RlKSk7XG5leHBvcnQgeyBQcm9wZXJ0eVRvVmFsdWVzIH07XG52YXIgSXRlbSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEl0ZW0sIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gSXRlbSgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLmxvY2FsUHJvcGVydGllcyA9IFtdO1xuICAgICAgICBfdGhpcy5yZW1vdGVQcm9wZXJ0aWVzID0gW107XG4gICAgICAgIF90aGlzLmxvY2FsSW52ZXJzZVByb3BlcnRpZXMgPSBbXTtcbiAgICAgICAgX3RoaXMucmVtb3RlSW52ZXJzZVByb3BlcnRpZXMgPSBbXTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICByZXR1cm4gSXRlbTtcbn0oRnVsbFJpY2hOb2RlRnJvbU5vZGUpKTtcbmV4cG9ydCB7IEl0ZW0gfTtcbnZhciBTaW1wbGVDb25zdHJhaW50ID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTaW1wbGVDb25zdHJhaW50KGNvbnN0cmFpbnRTdHJpbmcsIHByaW9yaXR5KSB7XG4gICAgICAgIGlmIChwcmlvcml0eSA9PT0gdm9pZCAwKSB7IHByaW9yaXR5ID0gMDsgfVxuICAgICAgICB0aGlzLmNvbnN0cmFpbnRTdHJpbmcgPSBjb25zdHJhaW50U3RyaW5nO1xuICAgICAgICB0aGlzLnByaW9yaXR5ID0gcHJpb3JpdHk7XG4gICAgfVxuICAgIHJldHVybiBTaW1wbGVDb25zdHJhaW50O1xufSgpKTtcbmV4cG9ydCB7IFNpbXBsZUNvbnN0cmFpbnQgfTtcbnZhciBTcGFycWxJdGVtU2VydmljZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU3BhcnFsSXRlbVNlcnZpY2Uod29ya2VyU2VydmljZSkge1xuICAgICAgICB0aGlzLndvcmtlclNlcnZpY2UgPSB3b3JrZXJTZXJ2aWNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgYSBzaW5nbGUgaXRlbSBmcm9tIHRoZSBsb2NhbCBzdG9yZVxuICAgICAqIEBwYXJhbSBxdWVyeVJlbW90ZSB3aGV0aGVyIHRvIHF1ZXJ5IHJlbW90ZSBlbmRwb2ludHMgZm9yIHByb3BlcnRpZXNcbiAgICAgKiBAcGFyYW0gY2FuY2VsbGVyIHByb21pc2UgdGhhdCBjYW4gYmUgcmVzb2x2ZWQgdG8gY2FuY2VsIGEgcmVtb3RlIGZldGNoXG4gICAgICovXG4gICAgU3BhcnFsSXRlbVNlcnZpY2UucHJvdG90eXBlLmdldEl0ZW0gPSBmdW5jdGlvbiAoaWQsIHF1ZXJ5UmVtb3RlLCBjYW5jZWxsZXIpIHtcbiAgICAgICAgaWYgKHF1ZXJ5UmVtb3RlID09PSB2b2lkIDApIHsgcXVlcnlSZW1vdGUgPSBmYWxzZTsgfVxuICAgICAgICByZXR1cm4gdGhpcy53b3JrZXJTZXJ2aWNlLmNhbGwoJ3NwYXJxbEl0ZW1Xb3JrZXJTZXJ2aWNlJywgJ2dldEl0ZW1zJywgW1tpZC50b0Nhbm9uaWNhbCgpXSwgcXVlcnlSZW1vdGVdLCBjYW5jZWxsZXIpLnRoZW4oZnVuY3Rpb24gKGl0ZW1zKSB7IHJldHVybiBpdGVtc1swXTsgfSwgbnVsbCwgZnVuY3Rpb24gKGluZm8pIHsgcmV0dXJuIHsgZW5kcG9pbnRUeXBlOiBpbmZvLmVuZHBvaW50VHlwZSwgZW5kcG9pbnQ6IGluZm8uZW5kcG9pbnQsIGl0ZW06IGluZm8uaXRlbXNbMF0gfTsgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgbXVsdGlwbGUgaXRlbXMgZnJvbSB0aGUgbG9jYWwgc3RvcmVcbiAgICAgKiBAcGFyYW0gcXVlcnlSZW1vdGUgd2hldGhlciB0byBxdWVyeSByZW1vdGUgZW5kcG9pbnRzIGZvciBwcm9wZXJ0aWVzXG4gICAgICogQHBhcmFtIGNhbmNlbGxlciBwcm9taXNlIHRoYXQgY2FuIGJlIHJlc29sdmVkIHRvIGNhbmNlbCBhIHJlbW90ZSBmZXRjaFxuICAgICAqL1xuICAgIFNwYXJxbEl0ZW1TZXJ2aWNlLnByb3RvdHlwZS5nZXRJdGVtcyA9IGZ1bmN0aW9uIChpZHMsIHF1ZXJ5UmVtb3RlLCBjYW5jZWxsZXIpIHtcbiAgICAgICAgaWYgKHF1ZXJ5UmVtb3RlID09PSB2b2lkIDApIHsgcXVlcnlSZW1vdGUgPSBmYWxzZTsgfVxuICAgICAgICByZXR1cm4gdGhpcy53b3JrZXJTZXJ2aWNlLmNhbGwoJ3NwYXJxbEl0ZW1Xb3JrZXJTZXJ2aWNlJywgJ2dldEl0ZW1zJywgW2lkcy5tYXAoZnVuY3Rpb24gKGlkKSB7IHJldHVybiBpZC50b0Nhbm9uaWNhbCgpOyB9KSwgcXVlcnlSZW1vdGVdLCBjYW5jZWxsZXIpO1xuICAgIH07XG4gICAgU3BhcnFsSXRlbVNlcnZpY2UucHJvdG90eXBlLmdldEFsbEl0ZW1zID0gZnVuY3Rpb24gKHF1ZXJ5UmVtb3RlLCBjYW5jZWxsZXIpIHtcbiAgICAgICAgaWYgKHF1ZXJ5UmVtb3RlID09PSB2b2lkIDApIHsgcXVlcnlSZW1vdGUgPSBmYWxzZTsgfVxuICAgICAgICByZXR1cm4gdGhpcy53b3JrZXJTZXJ2aWNlLmNhbGwoJ3NwYXJxbEl0ZW1Xb3JrZXJTZXJ2aWNlJywgJ2dldEl0ZW1zJywgW2ZhbHNlLCBxdWVyeVJlbW90ZV0sIGNhbmNlbGxlcik7XG4gICAgfTtcbiAgICBTcGFycWxJdGVtU2VydmljZS5wcm90b3R5cGUuY3JlYXRlTmV3SXRlbSA9IGZ1bmN0aW9uIChwcm9wZXJ0aWVzKSB7XG4gICAgICAgIGlmIChwcm9wZXJ0aWVzID09PSB2b2lkIDApIHsgcHJvcGVydGllcyA9IFtdOyB9XG4gICAgICAgIHJldHVybiB0aGlzLndvcmtlclNlcnZpY2UuY2FsbCgnc3BhcnFsSXRlbVdvcmtlclNlcnZpY2UnLCAnY3JlYXRlTmV3SXRlbScsIFtwcm9wZXJ0aWVzLm1hcChmdW5jdGlvbiAocHYpIHsgcmV0dXJuIHB2LnBydW5lZCgpOyB9KV0pO1xuICAgIH07XG4gICAgU3BhcnFsSXRlbVNlcnZpY2UucHJvdG90eXBlLmFsdGVySXRlbSA9IGZ1bmN0aW9uIChpZCwgcHJvcGVydGllc1RvQWRkLCBwcm9wZXJ0aWVzVG9SZW1vdmUpIHtcbiAgICAgICAgaWYgKHByb3BlcnRpZXNUb1JlbW92ZSA9PT0gdm9pZCAwKSB7IHByb3BlcnRpZXNUb1JlbW92ZSA9IFtdOyB9XG4gICAgICAgIHJldHVybiB0aGlzLndvcmtlclNlcnZpY2UuY2FsbCgnc3BhcnFsSXRlbVdvcmtlclNlcnZpY2UnLCAnYWx0ZXJJdGVtJywgWyhpZCksIHByb3BlcnRpZXNUb0FkZC5tYXAoZnVuY3Rpb24gKHB2KSB7IHJldHVybiBwdi5wcnVuZWQoKTsgfSksIHByb3BlcnRpZXNUb1JlbW92ZS5tYXAoZnVuY3Rpb24gKHB2KSB7IHJldHVybiBwdi5wcnVuZWQoKTsgfSldKTtcbiAgICB9O1xuICAgIFNwYXJxbEl0ZW1TZXJ2aWNlLnByb3RvdHlwZS5kZWxldGVJdGVtID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLndvcmtlclNlcnZpY2UuY2FsbCgnc3BhcnFsSXRlbVdvcmtlclNlcnZpY2UnLCAnZGVsZXRlSXRlbScsIFtpZF0pO1xuICAgIH07XG4gICAgcmV0dXJuIFNwYXJxbEl0ZW1TZXJ2aWNlO1xufSgpKTtcbmV4cG9ydCB7IFNwYXJxbEl0ZW1TZXJ2aWNlIH07XG5TcGFycWxJdGVtU2VydmljZS5uYWl2ZUdldExvY2FsSXRlbVByb3BlcnRpZXNRdWVyeSA9IFwiUFJFRklYIHNrb3M6IDxodHRwOi8vd3d3LnczLm9yZy8yMDA0LzAyL3Nrb3MvY29yZSM+XFxuUFJFRklYIG1hZHM6IDxodHRwOi8vd3d3LmxvYy5nb3YvbWFkcy9yZGYvdjEjPlxcblBSRUZJWCByZGZzOiA8aHR0cDovL3d3dy53My5vcmcvMjAwMC8wMS9yZGYtc2NoZW1hIz5cXG5QUkVGSVggb3dsOiA8aHR0cDovL3d3dy53My5vcmcvMjAwMi8wNy9vd2wjPlxcblNFTEVDVCA/aWQgP2l0ZW1MYWJlbCA/cHJvcGVydHkgP3Byb3BlcnR5TGFiZWwgP29iamVjdCA/b2JqZWN0TGFiZWwge1xcbiMgU1RBUlRHUkFQSFxcbiAgVkFMVUVTID9pZCB7IDxJRFM+IH1cXG4gID9pZCBza29zOnByZWZMYWJlbHxtYWRzOmF1dGhvcml0YXRpdmVMYWJlbHxyZGZzOmxhYmVsID9pdGVtTGFiZWwgLlxcbiAgRklMVEVSKExBTkcoP2l0ZW1MYWJlbCk9JycgfHwgTEFORyg/aXRlbUxhYmVsKT0nPFBSRUZMQU5HPicpXFxuICA/aWQgP3Byb3BlcnR5ID9vYmplY3QgLlxcbiAgT1BUSU9OQUwge1xcbiAgICA/cHJvcGVydHkgc2tvczpwcmVmTGFiZWx8cmRmczpsYWJlbCA/cHJvcGVydHlMYWJlbFAgLlxcbiAgICBGSUxURVIoTEFORyg/cHJvcGVydHlMYWJlbFApPScnIHx8IExBTkcoP3Byb3BlcnR5TGFiZWxQKT0nPFBSRUZMQU5HPicpXFxuICB9XFxuICBCSU5EKENPQUxFU0NFKD9wcm9wZXJ0eUxhYmVsUCxSRVBMQUNFKFJFUExBQ0UoUkVQTEFDRShSRVBMQUNFKFNUUig/cHJvcGVydHkpLFxcXCIuKi9cXFwiLFxcXCJcXFwiKSxcXFwiLiojXFxcIixcXFwiXFxcIiksXFxcIl9cXFwiLFxcXCIgXFxcIiksXFxcIihbQS1aXFx1MDBDNVxcdTAwQzRcXHUwMEQ2XSlcXFwiLFxcXCIgJDFcXFwiKSkgQVMgP3Byb3BlcnR5TGFiZWwpXFxuICBPUFRJT05BTCB7XFxuICAgID9vYmplY3Qgc2tvczpwcmVmTGFiZWx8cmRmczpsYWJlbCA/b2JqZWN0TGFiZWxQIC5cXG4gICAgRklMVEVSKExBTkcoP29iamVjdExhYmVsUCk9JycgfHwgTEFORyg/b2JqZWN0TGFiZWxQKT0nPFBSRUZMQU5HPicpXFxuICB9XFxuICBCSU5EIChJRihJU0lSSSg/b2JqZWN0KSxDT0FMRVNDRSg/b2JqZWN0TGFiZWxQLFJFUExBQ0UoUkVQTEFDRShSRVBMQUNFKFJFUExBQ0UoU1RSKD9vYmplY3QpLFxcXCIuKi9cXFwiLFxcXCJcXFwiKSxcXFwiLiojXFxcIixcXFwiXFxcIiksXFxcIl9cXFwiLFxcXCIgXFxcIiksXFxcIihbQS1aXFx1MDBDNVxcdTAwQzRcXHUwMEQ2XSlcXFwiLFxcXCIgJDFcXFwiKSksP29iamVjdCkgQVMgP29iamVjdExhYmVsKVxcbiMgRU5ER1JBUEhcXG59XCI7XG5TcGFycWxJdGVtU2VydmljZS5nZXRMb2NhbEl0ZW1Qcm9wZXJ0aWVzUXVlcnkgPSBcIlBSRUZJWCBza29zOiA8aHR0cDovL3d3dy53My5vcmcvMjAwNC8wMi9za29zL2NvcmUjPlxcblBSRUZJWCBtYWRzOiA8aHR0cDovL3d3dy5sb2MuZ292L21hZHMvcmRmL3YxIz5cXG5QUkVGSVggcmRmczogPGh0dHA6Ly93d3cudzMub3JnLzIwMDAvMDEvcmRmLXNjaGVtYSM+XFxuUFJFRklYIG93bDogPGh0dHA6Ly93d3cudzMub3JnLzIwMDIvMDcvb3dsIz5cXG5QUkVGSVggc2Y6IDxodHRwOi8vbGRmLmZpL2Z1bmN0aW9ucyM+XFxuU0VMRUNUID9pZCA/aXRlbUxhYmVsID9wcm9wZXJ0eSA/cHJvcGVydHlMYWJlbCA/b2JqZWN0ID9vYmplY3RMYWJlbCB7XFxuIyBTVEFSVEdSQVBIXFxuICBWQUxVRVMgP2lkIHsgPElEUz4gfVxcbiAgeyA/aWQgP3Byb3BlcnR5ID9vYmplY3QgLiB9XFxuICBVTklPTlxcbiAgeyA/b2JqZWN0ID9wcm9wZXJ0eSA/aWQgLiB9XFxuICA/aWQgc2Y6cHJlZmVycmVkTGFuZ3VhZ2VMaXRlcmFsIChza29zOnByZWZMYWJlbCBtYWRzOmF1dGhvcml0YXRpdmVMYWJlbCByZGZzOmxhYmVsIHNrb3M6YWx0TGFiZWwgbWFkczp2YXJpYW50TGFiZWwgJzxQUkVGTEFORz4nICcnID9pdGVtTGFiZWwpIC5cXG4gIE9QVElPTkFMIHtcXG4gICAgP3Byb3BlcnR5IHNmOnByZWZlcnJlZExhbmd1YWdlTGl0ZXJhbCAoc2tvczpwcmVmTGFiZWwgbWFkczphdXRob3JpdGF0aXZlTGFiZWwgcmRmczpsYWJlbCBza29zOmFsdExhYmVsIG1hZHM6dmFyaWFudExhYmVsICc8UFJFRkxBTkc+JyAnJyA/cHJvcGVydHlMYWJlbFApXFxuICB9XFxuICBCSU5EKENPQUxFU0NFKD9wcm9wZXJ0eUxhYmVsUCxSRVBMQUNFKFJFUExBQ0UoUkVQTEFDRShSRVBMQUNFKFNUUig/cHJvcGVydHkpLFxcXCIuKi9cXFwiLFxcXCJcXFwiKSxcXFwiLiojXFxcIixcXFwiXFxcIiksXFxcIl9cXFwiLFxcXCIgXFxcIiksXFxcIihbQS1aXFx1MDBDNVxcdTAwQzRcXHUwMEQ2XSlcXFwiLFxcXCIgJDFcXFwiKSkgQVMgP3Byb3BlcnR5TGFiZWwpXFxuICBPUFRJT05BTCB7XFxuICAgID9vYmplY3Qgc2Y6cHJlZmVycmVkTGFuZ3VhZ2VMaXRlcmFsIChza29zOnByZWZMYWJlbCBtYWRzOmF1dGhvcml0YXRpdmVMYWJlbCByZGZzOmxhYmVsIHNrb3M6YWx0TGFiZWwgbWFkczp2YXJpYW50TGFiZWwgJzxQUkVGTEFORz4nICcnID9vYmplY3RMYWJlbFApIC5cXG4gIH1cXG4gIEJJTkQgKElGKElTSVJJKD9vYmplY3QpLENPQUxFU0NFKD9vYmplY3RMYWJlbFAsUkVQTEFDRShSRVBMQUNFKFJFUExBQ0UoUkVQTEFDRShTVFIoP29iamVjdCksXFxcIi4qL1xcXCIsXFxcIlxcXCIpLFxcXCIuKiNcXFwiLFxcXCJcXFwiKSxcXFwiX1xcXCIsXFxcIiBcXFwiKSxcXFwiKFtBLVpcXHUwMEM1XFx1MDBDNFxcdTAwRDZdKVxcXCIsXFxcIiAkMVxcXCIpKSw/b2JqZWN0KSBBUyA/b2JqZWN0TGFiZWwpXFxuIyBFTkRHUkFQSFxcbn1cIjtcblNwYXJxbEl0ZW1TZXJ2aWNlLmdldFJlbW90ZUl0ZW1Qcm9wZXJ0aWVzUXVlcnkgPSBcIlBSRUZJWCBza29zOiA8aHR0cDovL3d3dy53My5vcmcvMjAwNC8wMi9za29zL2NvcmUjPlxcblBSRUZJWCBtYWRzOiA8aHR0cDovL3d3dy5sb2MuZ292L21hZHMvcmRmL3YxIz5cXG5QUkVGSVggcmRmczogPGh0dHA6Ly93d3cudzMub3JnLzIwMDAvMDEvcmRmLXNjaGVtYSM+XFxuUFJFRklYIG93bDogPGh0dHA6Ly93d3cudzMub3JnLzIwMDIvMDcvb3dsIz5cXG5QUkVGSVggc2Y6IDxodHRwOi8vbGRmLmZpL2Z1bmN0aW9ucyM+XFxuU0VMRUNUID9pZCA/cHJvcGVydHkgP3Byb3BlcnR5TGFiZWwgP29iamVjdCA/b2JqZWN0TGFiZWwge1xcblZBTFVFUyAoP2lkID9vaWQpIHsgPElEUEFJUlM+IH1cXG4/b2lkID9wcm9wZXJ0eSA/b2JqZWN0IC5cXG5PUFRJT05BTCB7XFxuICA/cHJvcGVydHkgc2Y6cHJlZmVycmVkTGFuZ3VhZ2VMaXRlcmFsIChza29zOnByZWZMYWJlbCBtYWRzOmF1dGhvcml0YXRpdmVMYWJlbCByZGZzOmxhYmVsIHNrb3M6YWx0TGFiZWwgbWFkczp2YXJpYW50TGFiZWwgJzxQUkVGTEFORz4nICcnID9wcm9wZXJ0eUxhYmVsUClcXG59XFxuQklORChDT0FMRVNDRSg/cHJvcGVydHlMYWJlbFAsUkVQTEFDRShSRVBMQUNFKFJFUExBQ0UoUkVQTEFDRShTVFIoP3Byb3BlcnR5KSxcXFwiLiovXFxcIixcXFwiXFxcIiksXFxcIi4qI1xcXCIsXFxcIlxcXCIpLFxcXCJfXFxcIixcXFwiIFxcXCIpLFxcXCIoW0EtWlxcdTAwQzVcXHUwMEM0XFx1MDBENl0pXFxcIixcXFwiICQxXFxcIikpIEFTID9wcm9wZXJ0eUxhYmVsKVxcbk9QVElPTkFMIHtcXG4gID9vYmplY3Qgc2Y6cHJlZmVycmVkTGFuZ3VhZ2VMaXRlcmFsIChza29zOnByZWZMYWJlbCBtYWRzOmF1dGhvcml0YXRpdmVMYWJlbCByZGZzOmxhYmVsIHNrb3M6YWx0TGFiZWwgbWFkczp2YXJpYW50TGFiZWwgJzxQUkVGTEFORz4nICcnID9vYmplY3RMYWJlbFApIC5cXG59XFxuQklORCAoSUYoSVNJUkkoP29iamVjdCksQ09BTEVTQ0UoP29iamVjdExhYmVsUCxSRVBMQUNFKFJFUExBQ0UoUkVQTEFDRShSRVBMQUNFKFNUUig/b2JqZWN0KSxcXFwiLiovXFxcIixcXFwiXFxcIiksXFxcIi4qI1xcXCIsXFxcIlxcXCIpLFxcXCJfXFxcIixcXFwiIFxcXCIpLFxcXCIoW0EtWlxcdTAwQzVcXHUwMEM0XFx1MDBENl0pXFxcIixcXFwiICQxXFxcIikpLD9vYmplY3QpIEFTID9vYmplY3RMYWJlbClcXG59XFxuXCI7XG5TcGFycWxJdGVtU2VydmljZS5kZWxldGVJdGVtUXVlcnkgPSBcIkRFTEVURSB7XFxuIyBTVEFSVEdSQVBIXFxuICA8SUQ+ID9wID9vIC5cXG4gID9zID9wIDxJRD4gLlxcbiMgRU5ER1JBUEhcXG59XFxuV0hFUkUge1xcbiMgU1RBUlRHUkFQSFxcbiAgeyA8SUQ+ID9wID9vIH0gVU5JT04geyA/cyA/cCA8SUQ+IH1cXG4jIEVOREdSQVBIXFxufVxcblwiO1xudmFyIFNwYXJxbEl0ZW1Xb3JrZXJTZXJ2aWNlID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTcGFycWxJdGVtV29ya2VyU2VydmljZShmaWJyYVNwYXJxbFNlcnZpY2UsICRxLCBzcGFycWxVcGRhdGVXb3JrZXJTZXJ2aWNlLCBzdGF0ZVdvcmtlclNlcnZpY2UpIHtcbiAgICAgICAgdGhpcy5maWJyYVNwYXJxbFNlcnZpY2UgPSBmaWJyYVNwYXJxbFNlcnZpY2U7XG4gICAgICAgIHRoaXMuJHEgPSAkcTtcbiAgICAgICAgdGhpcy5zcGFycWxVcGRhdGVXb3JrZXJTZXJ2aWNlID0gc3BhcnFsVXBkYXRlV29ya2VyU2VydmljZTtcbiAgICAgICAgdGhpcy5zdGF0ZVdvcmtlclNlcnZpY2UgPSBzdGF0ZVdvcmtlclNlcnZpY2U7XG4gICAgfVxuICAgIFNwYXJxbEl0ZW1Xb3JrZXJTZXJ2aWNlLnByb2Nlc3NJdGVtUmVzdWx0ID0gZnVuY3Rpb24gKHByb3BlcnRpZXMsIHByb3BlcnR5TWFwLCBwcm9wZXJ0eVZhbHVlTWFwLCBzYW1lQXNlcywgZW5kcG9pbnQsIGIpIHtcbiAgICAgICAgaWYgKGJbJ3Byb3BlcnR5J10pIHtcbiAgICAgICAgICAgIHZhciBuID0gcHJvcGVydHlWYWx1ZU1hcC5nb2MoYlsncHJvcGVydHknXS52YWx1ZSkuZ29jKGJbJ29iamVjdCddLnZhbHVlLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb3BlcnR5VG9WYWx1ZXMgPSBwcm9wZXJ0eU1hcC5nb2MoYlsncHJvcGVydHknXS52YWx1ZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmV0ID0gbmV3IFByb3BlcnR5VG9WYWx1ZXMoRGF0YUZhY3RvcnkuaW5zdGFuY2Uubm9kZUZyb21CaW5kaW5nKGJbJ3Byb3BlcnR5J10pKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJbJ3Byb3BlcnR5TGFiZWwnXSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldC5sYWJlbCA9IGJbJ3Byb3BlcnR5TGFiZWwnXS52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgcHJvcGVydGllcy5wdXNoKHJldCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdmFyIG9Ob2RlID0gbmV3IEZ1bGxSaWNoTm9kZUZyb21Ob2RlKERhdGFGYWN0b3J5Lmluc3RhbmNlLm5vZGVGcm9tQmluZGluZyhiWydvYmplY3QnXSkpO1xuICAgICAgICAgICAgICAgIG9Ob2RlLnNvdXJjZUVuZHBvaW50cyA9IFtdO1xuICAgICAgICAgICAgICAgIHByb3BlcnR5VG9WYWx1ZXMudmFsdWVzLnB1c2gobmV3IFJpY2hQcm9wZXJ0eVZhbHVlKG9Ob2RlKSk7XG4gICAgICAgICAgICAgICAgaWYgKE9XTC5zYW1lQXMuZXF1YWxzKHByb3BlcnR5VG9WYWx1ZXMpKVxuICAgICAgICAgICAgICAgICAgICBzYW1lQXNlcy5wdXNoKG9Ob2RlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gb05vZGU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIG4uc291cmNlRW5kcG9pbnRzLnB1c2goZW5kcG9pbnQpO1xuICAgICAgICAgICAgaWYgKGJbJ29iamVjdExhYmVsJ10gJiYgIW4ubGFiZWwpXG4gICAgICAgICAgICAgICAgbi5sYWJlbCA9IGJbJ29iamVjdExhYmVsJ10udmFsdWU7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFNwYXJxbEl0ZW1Xb3JrZXJTZXJ2aWNlLnByb3RvdHlwZS5nZXRJdGVtcyA9IGZ1bmN0aW9uIChpZHMsIHF1ZXJ5UmVtb3RlLCBjYW5jZWxsZXIpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKHF1ZXJ5UmVtb3RlID09PSB2b2lkIDApIHsgcXVlcnlSZW1vdGUgPSBmYWxzZTsgfVxuICAgICAgICB2YXIgcXVlcnlUZW1wbGF0ZSA9IHRoaXMuc3RhdGVXb3JrZXJTZXJ2aWNlLnN0YXRlLnByb2plY3QuaXRlbVF1ZXJ5O1xuICAgICAgICBpZiAoIWlkcylcbiAgICAgICAgICAgIHF1ZXJ5VGVtcGxhdGUgPSBxdWVyeVRlbXBsYXRlLnJlcGxhY2UoL1ZBTFVFUyBcXD9pZCB7IDxJRFM+IH0vZywgJycpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBxdWVyeVRlbXBsYXRlID0gcXVlcnlUZW1wbGF0ZS5yZXBsYWNlKC88SURTPi9nLCBpZHMuam9pbignJykpO1xuICAgICAgICBxdWVyeVRlbXBsYXRlID0gcXVlcnlUZW1wbGF0ZS5yZXBsYWNlKC88UFJFRkxBTkc+L2csIHRoaXMuc3RhdGVXb3JrZXJTZXJ2aWNlLnN0YXRlLmxhbmd1YWdlKTtcbiAgICAgICAgdmFyIGl0ZW1zID0gbmV3IEVNYXAoZnVuY3Rpb24gKGlkKSB7IHJldHVybiBuZXcgSXRlbShEYXRhRmFjdG9yeS5pbnN0YW5jZS5uYW1lZE5vZGUoaWQpKTsgfSk7XG4gICAgICAgIHZhciByZXQgPSB0aGlzLiRxLmRlZmVyKCk7XG4gICAgICAgIHRoaXMuZmlicmFTcGFycWxTZXJ2aWNlLnF1ZXJ5KHRoaXMuc3RhdGVXb3JrZXJTZXJ2aWNlLnN0YXRlLnByb2plY3QuZW5kcG9pbnQsIHF1ZXJ5VGVtcGxhdGUsIHsgdGltZW91dDogY2FuY2VsbGVyIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICB2YXIgaWRQcm9wZXJ0eU1hcCA9IG5ldyBFTWFwKGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5ldyBFTWFwKCk7IH0pO1xuICAgICAgICAgICAgdmFyIGlkUHJvcGVydHlWYWx1ZU1hcCA9IG5ldyBFTWFwKGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5ldyBFTWFwKGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5ldyBFTWFwKCk7IH0pOyB9KTtcbiAgICAgICAgICAgIHZhciBpZFNhbWVBc2VzID0gbmV3IEVOb2RlTWFwKGZ1bmN0aW9uICgpIHsgcmV0dXJuIFtdOyB9KTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSByZXNwb25zZS5yZXN1bHRzLmJpbmRpbmdzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBiID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIHZhciBpdGVtID0gaXRlbXMuZ29jKGJbJ2lkJ10udmFsdWUpO1xuICAgICAgICAgICAgICAgIGlmIChiWydpdGVtTGFiZWwnXSlcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5sYWJlbCA9IGJbJ2l0ZW1MYWJlbCddLnZhbHVlO1xuICAgICAgICAgICAgICAgIFNwYXJxbEl0ZW1Xb3JrZXJTZXJ2aWNlLnByb2Nlc3NJdGVtUmVzdWx0KGl0ZW0ubG9jYWxQcm9wZXJ0aWVzLCBpZFByb3BlcnR5TWFwLmdvYyhiWydpZCddLnZhbHVlKSwgaWRQcm9wZXJ0eVZhbHVlTWFwLmdvYyhiWydpZCddLnZhbHVlKSwgaWRTYW1lQXNlcy5nb2MoaXRlbSksIF90aGlzLnN0YXRlV29ya2VyU2VydmljZS5zdGF0ZS5wcm9qZWN0LmVuZHBvaW50LCBiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChxdWVyeVJlbW90ZSkge1xuICAgICAgICAgICAgICAgIHJldC5ub3RpZnkoeyBlbmRwb2ludFR5cGU6ICdwcmltYXJ5JywgZW5kcG9pbnQ6IF90aGlzLnN0YXRlV29ya2VyU2VydmljZS5zdGF0ZS5wcm9qZWN0LmVuZHBvaW50LCBpdGVtczogaXRlbXMudmFsdWVzKCkgfSk7XG4gICAgICAgICAgICAgICAgdmFyIGl0ZW1JZFF1ZXJ5XzEgPSAnJztcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfYiA9IDAsIF9jID0gaXRlbXMudmFsdWVzKCk7IF9iIDwgX2MubGVuZ3RoOyBfYisrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpdGVtID0gX2NbX2JdO1xuICAgICAgICAgICAgICAgICAgICBpdGVtSWRRdWVyeV8xICs9ICcoJyArIGl0ZW0udG9DYW5vbmljYWwoKSArIGl0ZW0udG9DYW5vbmljYWwoKSArICcpJztcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2QgPSAwLCBfZSA9IGlkU2FtZUFzZXMuZ2V0KGl0ZW0pOyBfZCA8IF9lLmxlbmd0aDsgX2QrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW0yID0gX2VbX2RdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbUlkUXVlcnlfMSArPSAnKCcgKyBpdGVtLnRvQ2Fub25pY2FsKCkgKyBpdGVtMi50b0Nhbm9uaWNhbCgpICsgJyknO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF90aGlzLiRxLmFsbChfdGhpcy5zdGF0ZVdvcmtlclNlcnZpY2Uuc3RhdGUucHJvamVjdC5yZW1vdGVFbmRwb2ludHMoKS5tYXAoZnVuY3Rpb24gKGVuZHBvaW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBxdWVyeVRlbXBsYXRlMiA9IGVuZHBvaW50Lml0ZW1RdWVyeTtcbiAgICAgICAgICAgICAgICAgICAgcXVlcnlUZW1wbGF0ZTIgPSBxdWVyeVRlbXBsYXRlMi5yZXBsYWNlKC88SURQQUlSUz4vZywgaXRlbUlkUXVlcnlfMSk7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5VGVtcGxhdGUyID0gcXVlcnlUZW1wbGF0ZTIucmVwbGFjZSgvPFBSRUZMQU5HPi9nLCBfdGhpcy5zdGF0ZVdvcmtlclNlcnZpY2Uuc3RhdGUubGFuZ3VhZ2UpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuZmlicmFTcGFycWxTZXJ2aWNlLnF1ZXJ5KGVuZHBvaW50LmVuZHBvaW50LCBxdWVyeVRlbXBsYXRlMiwgeyB0aW1lb3V0OiBjYW5jZWxsZXIgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UyLnJlc3VsdHMuYmluZGluZ3MubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHJlc3BvbnNlMi5yZXN1bHRzLmJpbmRpbmdzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYiA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBpdGVtcy5nb2MoYlsnaWQnXS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNwYXJxbEl0ZW1Xb3JrZXJTZXJ2aWNlLnByb2Nlc3NJdGVtUmVzdWx0KGl0ZW0ucmVtb3RlUHJvcGVydGllcywgaWRQcm9wZXJ0eU1hcC5nb2MoYlsnaWQnXS52YWx1ZSksIGlkUHJvcGVydHlWYWx1ZU1hcC5nb2MoYlsnaWQnXS52YWx1ZSksIGlkU2FtZUFzZXMuZ29jKGl0ZW0pLCBlbmRwb2ludC5pZCwgYik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldC5ub3RpZnkoeyBlbmRwb2ludFR5cGU6ICdyZW1vdGUnLCBlbmRwb2ludDogZW5kcG9pbnQuaWQsIGl0ZW1zOiBpdGVtcy52YWx1ZXMoKSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7IHJldHVybiByZXQubm90aWZ5KHsgZW5kcG9pbnRUeXBlOiAncmVtb3RlJywgZW5kcG9pbnQ6IGVuZHBvaW50LmlkLCBlcnJvcjogV29ya2VyV29ya2VyU2VydmljZS5zdHJpcEZ1bmN0aW9ucyhlcnJvcikgfSk7IH0pO1xuICAgICAgICAgICAgICAgIH0pKS50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJldC5yZXNvbHZlKGl0ZW1zLnZhbHVlcygpKTsgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgcmV0LnJlc29sdmUoaXRlbXMudmFsdWVzKCkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHJldC5wcm9taXNlO1xuICAgIH07XG4gICAgU3BhcnFsSXRlbVdvcmtlclNlcnZpY2UucHJvdG90eXBlLmRlbGV0ZUl0ZW0gPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmlicmFTcGFycWxTZXJ2aWNlLnVwZGF0ZSh0aGlzLnN0YXRlV29ya2VyU2VydmljZS5zdGF0ZS5wcm9qZWN0LnVwZGF0ZUVuZHBvaW50LCB0aGlzLnN0YXRlV29ya2VyU2VydmljZS5zdGF0ZS5wcm9qZWN0LmRlbGV0ZUl0ZW1RdWVyeS5yZXBsYWNlKC88SUQ+L2csIGlkLnRvQ2Fub25pY2FsKCkpKS50aGVuKGZ1bmN0aW9uIChyKSB7IHJldHVybiB0cnVlOyB9LCBmdW5jdGlvbiAocikgeyByZXR1cm4gZmFsc2U7IH0pO1xuICAgIH07XG4gICAgU3BhcnFsSXRlbVdvcmtlclNlcnZpY2UucHJvdG90eXBlLmFsdGVySXRlbSA9IGZ1bmN0aW9uIChpZCwgcHJvcGVydGllc1RvQWRkLCBwcm9wZXJ0aWVzVG9SZW1vdmUpIHtcbiAgICAgICAgaWYgKHByb3BlcnRpZXNUb1JlbW92ZSA9PT0gdm9pZCAwKSB7IHByb3BlcnRpZXNUb1JlbW92ZSA9IFtdOyB9XG4gICAgICAgIHZhciB0cmlwbGVzVG9BZGQgPSBbXTtcbiAgICAgICAgdmFyIHRyaXBsZXNUb1JlbW92ZSA9IFtdO1xuICAgICAgICBwcm9wZXJ0aWVzVG9BZGQuZm9yRWFjaChmdW5jdGlvbiAocHJvcGVydHkpIHsgcmV0dXJuIHRyaXBsZXNUb0FkZC5wdXNoKG5ldyBUcmlwbGUoaWQsIHByb3BlcnR5LnByb3BlcnR5LCBwcm9wZXJ0eS5vYmplY3QpKTsgfSk7XG4gICAgICAgIHByb3BlcnRpZXNUb1JlbW92ZS5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wZXJ0eSkgeyByZXR1cm4gdHJpcGxlc1RvUmVtb3ZlLnB1c2gobmV3IFRyaXBsZShpZCwgcHJvcGVydHkucHJvcGVydHksIHByb3BlcnR5Lm9iamVjdCkpOyB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3BhcnFsVXBkYXRlV29ya2VyU2VydmljZS51cGRhdGVHcmFwaHModGhpcy5zdGF0ZVdvcmtlclNlcnZpY2Uuc3RhdGUucHJvamVjdC51cGRhdGVFbmRwb2ludCwgW25ldyBHcmFwaCh0aGlzLnN0YXRlV29ya2VyU2VydmljZS5zdGF0ZS5wcm9qZWN0LmdyYXBoID8gRGF0YUZhY3RvcnkubmFtZWROb2RlKHRoaXMuc3RhdGVXb3JrZXJTZXJ2aWNlLnN0YXRlLnByb2plY3QuZ3JhcGgpIDogRGVmYXVsdEdyYXBoLmluc3RhbmNlLCB0cmlwbGVzVG9BZGQpXSwgW25ldyBHcmFwaCh0aGlzLnN0YXRlV29ya2VyU2VydmljZS5zdGF0ZS5wcm9qZWN0LmdyYXBoID8gRGF0YUZhY3RvcnkubmFtZWROb2RlKHRoaXMuc3RhdGVXb3JrZXJTZXJ2aWNlLnN0YXRlLnByb2plY3QuZ3JhcGgpIDogRGVmYXVsdEdyYXBoLmluc3RhbmNlLCB0cmlwbGVzVG9SZW1vdmUpXSk7XG4gICAgfTtcbiAgICBTcGFycWxJdGVtV29ya2VyU2VydmljZS5wcm90b3R5cGUuY3JlYXRlTmV3SXRlbSA9IGZ1bmN0aW9uIChwcm9wZXJ0aWVzKSB7XG4gICAgICAgIGlmIChwcm9wZXJ0aWVzID09PSB2b2lkIDApIHsgcHJvcGVydGllcyA9IFtdOyB9XG4gICAgICAgIHZhciBkZWZlcnJlZCA9IHRoaXMuJHEuZGVmZXIoKTtcbiAgICAgICAgdmFyIHN1YmplY3QgPSBuZXcgTmFtZWROb2RlKHRoaXMuc3RhdGVXb3JrZXJTZXJ2aWNlLnN0YXRlLnByb2plY3QuaW5zdGFuY2VOUyArIFVVSUQoKSk7XG4gICAgICAgIGRlZmVycmVkLm5vdGlmeShzdWJqZWN0KTtcbiAgICAgICAgdmFyIHRyaXBsZXNUb0FkZCA9IFtdO1xuICAgICAgICBwcm9wZXJ0aWVzLmZvckVhY2goZnVuY3Rpb24gKHByb3BlcnR5KSB7IHJldHVybiB0cmlwbGVzVG9BZGQucHVzaChuZXcgVHJpcGxlKHN1YmplY3QsIHByb3BlcnR5LnByb3BlcnR5LCBwcm9wZXJ0eS5vYmplY3QpKTsgfSk7XG4gICAgICAgIHRoaXMuc3BhcnFsVXBkYXRlV29ya2VyU2VydmljZS51cGRhdGVHcmFwaHModGhpcy5zdGF0ZVdvcmtlclNlcnZpY2Uuc3RhdGUucHJvamVjdC51cGRhdGVFbmRwb2ludCwgW25ldyBHcmFwaCh0aGlzLnN0YXRlV29ya2VyU2VydmljZS5zdGF0ZS5wcm9qZWN0LmdyYXBoID8gRGF0YUZhY3RvcnkubmFtZWROb2RlKHRoaXMuc3RhdGVXb3JrZXJTZXJ2aWNlLnN0YXRlLnByb2plY3QuZ3JhcGgpIDogRGVmYXVsdEdyYXBoLmluc3RhbmNlLCB0cmlwbGVzVG9BZGQpXSkudGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiBkZWZlcnJlZC5yZXNvbHZlKHN1YmplY3QpOyB9LCBkZWZlcnJlZC5yZWplY3QsIGRlZmVycmVkLm5vdGlmeSk7XG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgIH07XG4gICAgcmV0dXJuIFNwYXJxbEl0ZW1Xb3JrZXJTZXJ2aWNlO1xufSgpKTtcbmV4cG9ydCB7IFNwYXJxbEl0ZW1Xb3JrZXJTZXJ2aWNlIH07XG5hbmd1bGFyLm1vZHVsZSgnZmlicmEuc2VydmljZXMuc3BhcnFsLWl0ZW0tc2VydmljZScsIFtdKVxuICAgIC5jb25maWcoZnVuY3Rpb24gKCRwcm92aWRlKSB7XG4gICAgJHByb3ZpZGUuc2VydmljZSgnc3BhcnFsSXRlbVNlcnZpY2UnLCBTcGFycWxJdGVtU2VydmljZSk7XG59KTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2FwcC9zZXJ2aWNlcy9zcGFycWwtaXRlbS1zZXJ2aWNlLnRzIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFLQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBOzs7OztBQUtBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9");

/***/ }),
/* 6 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return Map; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return EMap; });\n/* unused harmony export IdentitySet */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return StringSet; });\n/* unused harmony export OMap */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return EOMap; });\n/* unused harmony export OStringSet */\n/* unused harmony export goc */\n/* unused harmony export ogoc */\n/* unused harmony export cpush */\n/* unused harmony export cpushs */\n\n\nvar __extends = this && this.__extends || function () {\n    var extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (d, b) {\n        d.__proto__ = b;\n    } || function (d, b) {\n        for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() {\n            this.constructor = d;\n        }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n}();\nvar Map = function () {\n    function Map() {\n        this.s = {};\n    }\n    Map.prototype.has = function (key) {\n        return this.s[key] !== undefined;\n    };\n    Map.prototype.set = function (key, value) {\n        this.s[key] = value;\n        return this;\n    };\n    Map.prototype.get = function (key) {\n        return this.s[key];\n    };\n    Map.prototype.remove = function (key) {\n        var contained = this.has(key);\n        delete this.s[key];\n        return contained;\n    };\n    Map.prototype.sets = function (obj) {\n        for (var key in obj) this.set(key, obj[key]);\n        return this;\n    };\n    Map.prototype.setm = function (obj) {\n        for (var key in obj) this.set(key, obj[key]);\n        return this;\n    };\n    Map.prototype.clear = function () {\n        this.s = {};\n        return this;\n    };\n    Map.prototype.keys = function () {\n        var ret = [];\n        for (var key in this.s) ret.push(key);\n        return ret;\n    };\n    Map.prototype.values = function () {\n        var ret = [];\n        for (var key in this.s) ret.push(this.s[key]);\n        return ret;\n    };\n    Map.prototype.entries = function () {\n        var ret = [];\n        for (var key in this.s) ret.push({ key: key, value: this.s[key] });\n        return ret;\n    };\n    Map.prototype.each = function (func) {\n        for (var key in this.s) func(this.s[key], key, this);\n        return undefined;\n    };\n    Map.prototype.size = function () {\n        var size = 0;\n        /*tslint:disable no-unused-variable*/\n        for (var key in this.s) size++;\n        /*tslint:enable no-unused-variable*/\n        return size;\n    };\n    Map.prototype.empty = function () {\n        return this.size() === 0;\n    };\n    return Map;\n}();\n\nvar EMap = function (_super) {\n    __extends(EMap, _super);\n    function EMap(create) {\n        if (create === void 0) {\n            create = function () {\n                return {};\n            };\n        }\n        var _this = _super.call(this) || this;\n        _this.create = create;\n        return _this;\n    }\n    EMap.prototype.goc = function (key, create) {\n        if (!this.has(key)) this.set(key, create ? create(key) : this.create(key));\n        return this.get(key);\n    };\n    return EMap;\n}(Map);\n\nvar IdentitySet = function () {\n    function IdentitySet() {\n        this.a = [];\n    }\n    IdentitySet.prototype.clear = function () {\n        this.a = [];\n        return this;\n    };\n    IdentitySet.prototype.has = function (key) {\n        return this.a.indexOf(key) !== -1;\n    };\n    IdentitySet.prototype.add = function (key) {\n        if (this.has(key)) return this;\n        this.a.push(key);\n        return this;\n    };\n    IdentitySet.prototype.adda = function (arr) {\n        var _this = this;\n        arr.forEach(function (v) {\n            return _this.add(v);\n        });\n        return this;\n    };\n    IdentitySet.prototype.adds = function (oset) {\n        var _this = this;\n        oset.each(function (v) {\n            return _this.add(v);\n        });\n        return this;\n    };\n    IdentitySet.prototype.remove = function (key) {\n        var index = this.a.indexOf(key);\n        if (index === -1) return false;\n        this.a.splice(index, 1);\n        return true;\n    };\n    IdentitySet.prototype.each = function (func) {\n        for (var _i = 0, _a = this.a; _i < _a.length; _i++) {\n            var value = _a[_i];\n            func(value, value, this);\n        }\n        return undefined;\n    };\n    IdentitySet.prototype.size = function () {\n        return this.a.length;\n    };\n    IdentitySet.prototype.empty = function () {\n        return this.size() === 0;\n    };\n    IdentitySet.prototype.values = function () {\n        return this.a;\n    };\n    return IdentitySet;\n}();\n\nvar StringSet = function () {\n    function StringSet() {\n        this.s = {};\n    }\n    StringSet.prototype.clear = function () {\n        this.s = {};\n        return this;\n    };\n    StringSet.prototype.has = function (key) {\n        return this.s[key] !== undefined;\n    };\n    StringSet.prototype.add = function (key) {\n        this.s[key] = '';\n        return this;\n    };\n    StringSet.prototype.adda = function (arr) {\n        var _this = this;\n        arr.forEach(function (str) {\n            return _this.add(str);\n        });\n        return this;\n    };\n    StringSet.prototype.adds = function (oset) {\n        var _this = this;\n        oset.each(function (str) {\n            return _this.add(str);\n        });\n        return this;\n    };\n    StringSet.prototype.remove = function (key) {\n        var contained = this.has(key);\n        delete this.s[key];\n        return contained;\n    };\n    StringSet.prototype.each = function (func) {\n        for (var key in this.s) func(key, key, this);\n        return undefined;\n    };\n    StringSet.prototype.size = function () {\n        var size = 0;\n        /*tslint:disable no-unused-variable*/\n        for (var key in this.s) size++;\n        /*tslint:enable no-unused-variable*/\n        return size;\n    };\n    StringSet.prototype.empty = function () {\n        return this.size() === 0;\n    };\n    StringSet.prototype.values = function () {\n        var ret = [];\n        for (var key in this.s) ret.push(key);\n        return ret;\n    };\n    return StringSet;\n}();\n\nvar OMap = function (_super) {\n    __extends(OMap, _super);\n    function OMap() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.a = [];\n        return _this;\n    }\n    OMap.prototype.set = function (key, value) {\n        if (!this.has(key)) {\n            _super.prototype.set.call(this, key, value);\n            this.a.push(value);\n        }\n        return this;\n    };\n    OMap.prototype.remove = function (key) {\n        var value = this.get(key);\n        if (value !== undefined) {\n            _super.prototype.remove.call(this, key);\n            this.a.splice(this.a.indexOf(value), 1);\n        }\n        return value !== undefined;\n    };\n    OMap.prototype.size = function () {\n        return this.a.length;\n    };\n    OMap.prototype.values = function () {\n        return this.a;\n    };\n    OMap.prototype.clear = function () {\n        _super.prototype.clear.call(this);\n        this.a = [];\n        return this;\n    };\n    return OMap;\n}(Map);\n\nvar EOMap = function (_super) {\n    __extends(EOMap, _super);\n    function EOMap(create) {\n        var _this = _super.call(this) || this;\n        _this.create = create;\n        return _this;\n    }\n    EOMap.prototype.goc = function (key, create) {\n        if (!this.has(key)) this.set(key, create ? create(key) : this.create(key));\n        return this.get(key);\n    };\n    return EOMap;\n}(OMap);\n\nvar OStringSet = function (_super) {\n    __extends(OStringSet, _super);\n    function OStringSet() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.a = [];\n        return _this;\n    }\n    OStringSet.prototype.add = function (key) {\n        if (!this.has(key)) {\n            _super.prototype.add.call(this, key);\n            this.a.push(key);\n        }\n        return this;\n    };\n    OStringSet.prototype.remove = function (key) {\n        var contained = _super.prototype.remove.call(this, key);\n        if (contained) this.a.splice(this.a.indexOf(key), 1);\n        return contained;\n    };\n    OStringSet.prototype.size = function () {\n        return this.a.length;\n    };\n    OStringSet.prototype.values = function () {\n        return this.a;\n    };\n    OStringSet.prototype.clear = function () {\n        _super.prototype.clear.call(this);\n        this.a = [];\n        return this;\n    };\n    return OStringSet;\n}(StringSet);\n\nfunction goc(obj, key, create) {\n    if (obj[key] === undefined) obj[key] = create ? create(key) : {};\n    return obj[key];\n}\nfunction ogoc(obj, key, arr, create) {\n    if (obj[key] === undefined) {\n        obj[key] = create ? create(key) : {};\n        arr.push(obj[key]);\n    }\n    return obj[key];\n}\nfunction cpush(arr, obj, key, value) {\n    if (obj[key] === undefined) {\n        obj[key] = value;\n        arr.push(value);\n    }\n}\nfunction cpushs(arr, obj, obj2) {\n    for (var key in obj2) cpush(arr, obj, key, obj2[key]);\n}//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2FwcC9jb21wb25lbnRzL2NvbGxlY3Rpb24tdXRpbHMudHM/NzM1MyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbnZhciBNYXAgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE1hcCgpIHtcbiAgICAgICAgdGhpcy5zID0ge307XG4gICAgfVxuICAgIE1hcC5wcm90b3R5cGUuaGFzID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zW2tleV0gIT09IHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIE1hcC5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgICAgdGhpcy5zW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBNYXAucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc1trZXldO1xuICAgIH07XG4gICAgTWFwLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHZhciBjb250YWluZWQgPSB0aGlzLmhhcyhrZXkpO1xuICAgICAgICBkZWxldGUgdGhpcy5zW2tleV07XG4gICAgICAgIHJldHVybiBjb250YWluZWQ7XG4gICAgfTtcbiAgICBNYXAucHJvdG90eXBlLnNldHMgPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIGZvciAodmFyIGtleSBpbiBvYmopXG4gICAgICAgICAgICB0aGlzLnNldChrZXksIG9ialtrZXldKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBNYXAucHJvdG90eXBlLnNldG0gPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIGZvciAodmFyIGtleSBpbiBvYmopXG4gICAgICAgICAgICB0aGlzLnNldChrZXksIG9ialtrZXldKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBNYXAucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnMgPSB7fTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBNYXAucHJvdG90eXBlLmtleXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciByZXQgPSBbXTtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMucylcbiAgICAgICAgICAgIHJldC5wdXNoKGtleSk7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfTtcbiAgICBNYXAucHJvdG90eXBlLnZhbHVlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHJldCA9IFtdO1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5zKVxuICAgICAgICAgICAgcmV0LnB1c2godGhpcy5zW2tleV0pO1xuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH07XG4gICAgTWFwLnByb3RvdHlwZS5lbnRyaWVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcmV0ID0gW107XG4gICAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLnMpXG4gICAgICAgICAgICByZXQucHVzaCh7IGtleToga2V5LCB2YWx1ZTogdGhpcy5zW2tleV0gfSk7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfTtcbiAgICBNYXAucHJvdG90eXBlLmVhY2ggPSBmdW5jdGlvbiAoZnVuYykge1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5zKVxuICAgICAgICAgICAgZnVuYyh0aGlzLnNba2V5XSwga2V5LCB0aGlzKTtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIE1hcC5wcm90b3R5cGUuc2l6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNpemUgPSAwO1xuICAgICAgICAvKnRzbGludDpkaXNhYmxlIG5vLXVudXNlZC12YXJpYWJsZSovXG4gICAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLnMpXG4gICAgICAgICAgICBzaXplKys7XG4gICAgICAgIC8qdHNsaW50OmVuYWJsZSBuby11bnVzZWQtdmFyaWFibGUqL1xuICAgICAgICByZXR1cm4gc2l6ZTtcbiAgICB9O1xuICAgIE1hcC5wcm90b3R5cGUuZW1wdHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNpemUoKSA9PT0gMDtcbiAgICB9O1xuICAgIHJldHVybiBNYXA7XG59KCkpO1xuZXhwb3J0IHsgTWFwIH07XG52YXIgRU1hcCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEVNYXAsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gRU1hcChjcmVhdGUpIHtcbiAgICAgICAgaWYgKGNyZWF0ZSA9PT0gdm9pZCAwKSB7IGNyZWF0ZSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHt9OyB9OyB9XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLmNyZWF0ZSA9IGNyZWF0ZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBFTWFwLnByb3RvdHlwZS5nb2MgPSBmdW5jdGlvbiAoa2V5LCBjcmVhdGUpIHtcbiAgICAgICAgaWYgKCF0aGlzLmhhcyhrZXkpKVxuICAgICAgICAgICAgdGhpcy5zZXQoa2V5LCBjcmVhdGUgPyBjcmVhdGUoa2V5KSA6IHRoaXMuY3JlYXRlKGtleSkpO1xuICAgICAgICByZXR1cm4gdGhpcy5nZXQoa2V5KTtcbiAgICB9O1xuICAgIHJldHVybiBFTWFwO1xufShNYXApKTtcbmV4cG9ydCB7IEVNYXAgfTtcbnZhciBJZGVudGl0eVNldCA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gSWRlbnRpdHlTZXQoKSB7XG4gICAgICAgIHRoaXMuYSA9IFtdO1xuICAgIH1cbiAgICBJZGVudGl0eVNldC5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuYSA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIElkZW50aXR5U2V0LnByb3RvdHlwZS5oYXMgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmEuaW5kZXhPZihrZXkpICE9PSAtMTtcbiAgICB9O1xuICAgIElkZW50aXR5U2V0LnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIGlmICh0aGlzLmhhcyhrZXkpKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIHRoaXMuYS5wdXNoKGtleSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgSWRlbnRpdHlTZXQucHJvdG90eXBlLmFkZGEgPSBmdW5jdGlvbiAoYXJyKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGFyci5mb3JFYWNoKGZ1bmN0aW9uICh2KSB7IHJldHVybiBfdGhpcy5hZGQodik7IH0pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIElkZW50aXR5U2V0LnByb3RvdHlwZS5hZGRzID0gZnVuY3Rpb24gKG9zZXQpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgb3NldC5lYWNoKGZ1bmN0aW9uICh2KSB7IHJldHVybiBfdGhpcy5hZGQodik7IH0pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIElkZW50aXR5U2V0LnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHZhciBpbmRleCA9IHRoaXMuYS5pbmRleE9mKGtleSk7XG4gICAgICAgIGlmIChpbmRleCA9PT0gLTEpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHRoaXMuYS5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICAgIElkZW50aXR5U2V0LnByb3RvdHlwZS5lYWNoID0gZnVuY3Rpb24gKGZ1bmMpIHtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuYTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IF9hW19pXTtcbiAgICAgICAgICAgIGZ1bmModmFsdWUsIHZhbHVlLCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH07XG4gICAgSWRlbnRpdHlTZXQucHJvdG90eXBlLnNpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmEubGVuZ3RoO1xuICAgIH07XG4gICAgSWRlbnRpdHlTZXQucHJvdG90eXBlLmVtcHR5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zaXplKCkgPT09IDA7XG4gICAgfTtcbiAgICBJZGVudGl0eVNldC5wcm90b3R5cGUudmFsdWVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hO1xuICAgIH07XG4gICAgcmV0dXJuIElkZW50aXR5U2V0O1xufSgpKTtcbmV4cG9ydCB7IElkZW50aXR5U2V0IH07XG52YXIgU3RyaW5nU2V0ID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTdHJpbmdTZXQoKSB7XG4gICAgICAgIHRoaXMucyA9IHt9O1xuICAgIH1cbiAgICBTdHJpbmdTZXQucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnMgPSB7fTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBTdHJpbmdTZXQucHJvdG90eXBlLmhhcyA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc1trZXldICE9PSB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICBTdHJpbmdTZXQucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgdGhpcy5zW2tleV0gPSAnJztcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBTdHJpbmdTZXQucHJvdG90eXBlLmFkZGEgPSBmdW5jdGlvbiAoYXJyKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGFyci5mb3JFYWNoKGZ1bmN0aW9uIChzdHIpIHsgcmV0dXJuIF90aGlzLmFkZChzdHIpOyB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBTdHJpbmdTZXQucHJvdG90eXBlLmFkZHMgPSBmdW5jdGlvbiAob3NldCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBvc2V0LmVhY2goZnVuY3Rpb24gKHN0cikgeyByZXR1cm4gX3RoaXMuYWRkKHN0cik7IH0pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIFN0cmluZ1NldC5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICB2YXIgY29udGFpbmVkID0gdGhpcy5oYXMoa2V5KTtcbiAgICAgICAgZGVsZXRlIHRoaXMuc1trZXldO1xuICAgICAgICByZXR1cm4gY29udGFpbmVkO1xuICAgIH07XG4gICAgU3RyaW5nU2V0LnByb3RvdHlwZS5lYWNoID0gZnVuY3Rpb24gKGZ1bmMpIHtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMucylcbiAgICAgICAgICAgIGZ1bmMoa2V5LCBrZXksIHRoaXMpO1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH07XG4gICAgU3RyaW5nU2V0LnByb3RvdHlwZS5zaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2l6ZSA9IDA7XG4gICAgICAgIC8qdHNsaW50OmRpc2FibGUgbm8tdW51c2VkLXZhcmlhYmxlKi9cbiAgICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMucylcbiAgICAgICAgICAgIHNpemUrKztcbiAgICAgICAgLyp0c2xpbnQ6ZW5hYmxlIG5vLXVudXNlZC12YXJpYWJsZSovXG4gICAgICAgIHJldHVybiBzaXplO1xuICAgIH07XG4gICAgU3RyaW5nU2V0LnByb3RvdHlwZS5lbXB0eSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZSgpID09PSAwO1xuICAgIH07XG4gICAgU3RyaW5nU2V0LnByb3RvdHlwZS52YWx1ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciByZXQgPSBbXTtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMucylcbiAgICAgICAgICAgIHJldC5wdXNoKGtleSk7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfTtcbiAgICByZXR1cm4gU3RyaW5nU2V0O1xufSgpKTtcbmV4cG9ydCB7IFN0cmluZ1NldCB9O1xudmFyIE9NYXAgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhPTWFwLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE9NYXAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5hID0gW107XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgT01hcC5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgICAgaWYgKCF0aGlzLmhhcyhrZXkpKSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLnNldC5jYWxsKHRoaXMsIGtleSwgdmFsdWUpO1xuICAgICAgICAgICAgdGhpcy5hLnB1c2godmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgT01hcC5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLmdldChrZXkpO1xuICAgICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5yZW1vdmUuY2FsbCh0aGlzLCBrZXkpO1xuICAgICAgICAgICAgdGhpcy5hLnNwbGljZSh0aGlzLmEuaW5kZXhPZih2YWx1ZSksIDEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZSAhPT0gdW5kZWZpbmVkO1xuICAgIH07XG4gICAgT01hcC5wcm90b3R5cGUuc2l6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYS5sZW5ndGg7XG4gICAgfTtcbiAgICBPTWFwLnByb3RvdHlwZS52YWx1ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmE7XG4gICAgfTtcbiAgICBPTWFwLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5jbGVhci5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLmEgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICByZXR1cm4gT01hcDtcbn0oTWFwKSk7XG5leHBvcnQgeyBPTWFwIH07XG52YXIgRU9NYXAgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhFT01hcCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBFT01hcChjcmVhdGUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuY3JlYXRlID0gY3JlYXRlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIEVPTWFwLnByb3RvdHlwZS5nb2MgPSBmdW5jdGlvbiAoa2V5LCBjcmVhdGUpIHtcbiAgICAgICAgaWYgKCF0aGlzLmhhcyhrZXkpKVxuICAgICAgICAgICAgdGhpcy5zZXQoa2V5LCBjcmVhdGUgPyBjcmVhdGUoa2V5KSA6IHRoaXMuY3JlYXRlKGtleSkpO1xuICAgICAgICByZXR1cm4gdGhpcy5nZXQoa2V5KTtcbiAgICB9O1xuICAgIHJldHVybiBFT01hcDtcbn0oT01hcCkpO1xuZXhwb3J0IHsgRU9NYXAgfTtcbnZhciBPU3RyaW5nU2V0ID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoT1N0cmluZ1NldCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBPU3RyaW5nU2V0KCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuYSA9IFtdO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIE9TdHJpbmdTZXQucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgaWYgKCF0aGlzLmhhcyhrZXkpKSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLmFkZC5jYWxsKHRoaXMsIGtleSk7XG4gICAgICAgICAgICB0aGlzLmEucHVzaChrZXkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgT1N0cmluZ1NldC5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICB2YXIgY29udGFpbmVkID0gX3N1cGVyLnByb3RvdHlwZS5yZW1vdmUuY2FsbCh0aGlzLCBrZXkpO1xuICAgICAgICBpZiAoY29udGFpbmVkKVxuICAgICAgICAgICAgdGhpcy5hLnNwbGljZSh0aGlzLmEuaW5kZXhPZihrZXkpLCAxKTtcbiAgICAgICAgcmV0dXJuIGNvbnRhaW5lZDtcbiAgICB9O1xuICAgIE9TdHJpbmdTZXQucHJvdG90eXBlLnNpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmEubGVuZ3RoO1xuICAgIH07XG4gICAgT1N0cmluZ1NldC5wcm90b3R5cGUudmFsdWVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hO1xuICAgIH07XG4gICAgT1N0cmluZ1NldC5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuY2xlYXIuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5hID0gW107XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgcmV0dXJuIE9TdHJpbmdTZXQ7XG59KFN0cmluZ1NldCkpO1xuZXhwb3J0IHsgT1N0cmluZ1NldCB9O1xuZXhwb3J0IGZ1bmN0aW9uIGdvYyhvYmosIGtleSwgY3JlYXRlKSB7XG4gICAgaWYgKG9ialtrZXldID09PSB1bmRlZmluZWQpXG4gICAgICAgIG9ialtrZXldID0gY3JlYXRlID8gY3JlYXRlKGtleSkgOiB7fTtcbiAgICByZXR1cm4gb2JqW2tleV07XG59XG5leHBvcnQgZnVuY3Rpb24gb2dvYyhvYmosIGtleSwgYXJyLCBjcmVhdGUpIHtcbiAgICBpZiAob2JqW2tleV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBvYmpba2V5XSA9IGNyZWF0ZSA/IGNyZWF0ZShrZXkpIDoge307XG4gICAgICAgIGFyci5wdXNoKG9ialtrZXldKTtcbiAgICB9XG4gICAgcmV0dXJuIG9ialtrZXldO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNwdXNoKGFyciwgb2JqLCBrZXksIHZhbHVlKSB7XG4gICAgaWYgKG9ialtrZXldID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgb2JqW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgYXJyLnB1c2godmFsdWUpO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBjcHVzaHMoYXJyLCBvYmosIG9iajIpIHtcbiAgICBmb3IgKHZhciBrZXkgaW4gb2JqMilcbiAgICAgICAgY3B1c2goYXJyLCBvYmosIGtleSwgb2JqMltrZXldKTtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2FwcC9jb21wb25lbnRzL2NvbGxlY3Rpb24tdXRpbHMudHMiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUEiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),
/* 7 */,
/* 8 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__rdf__ = __webpack_require__(2);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return CitableSource; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return Citable; });\n\n\n\nvar CitableSource = function () {\n    function CitableSource(sparqlEndpoint, graph) {\n        this.sparqlEndpoint = sparqlEndpoint;\n        this.graph = graph;\n    }\n    CitableSource.clone = function (source) {\n        return new CitableSource(source.sparqlEndpoint, source.graph);\n    };\n    return CitableSource;\n}();\n\nvar Citable = function () {\n    function Citable(id, source, labels, url, descriptions, rightsHolders) {\n        if (labels === void 0) {\n            labels = [];\n        }\n        if (descriptions === void 0) {\n            descriptions = [];\n        }\n        if (rightsHolders === void 0) {\n            rightsHolders = [];\n        }\n        this.labels = labels;\n        this.url = url;\n        this.descriptions = descriptions;\n        this.rightsHolders = rightsHolders;\n        this.source = {\n            sparqlEndpoint: null\n        };\n        this.id = id;\n        this.source = source;\n    }\n    Citable.toTurtle = function (c, fragmentsById, prefixes) {\n        prefixes['skos'] = __WEBPACK_IMPORTED_MODULE_0__rdf__[\"j\" /* SKOS */].ns;\n        prefixes['dcterms'] = __WEBPACK_IMPORTED_MODULE_0__rdf__[\"k\" /* DCTerms */].ns;\n        prefixes['foaf'] = __WEBPACK_IMPORTED_MODULE_0__rdf__[\"l\" /* FOAF */].ns;\n        prefixes['fibra'] = __WEBPACK_IMPORTED_MODULE_0__rdf__[\"m\" /* FIBRA */].ns;\n        prefixes['rdf'] = __WEBPACK_IMPORTED_MODULE_0__rdf__[\"n\" /* RDF */].ns;\n        var f = fragmentsById.get(c.id);\n        c.labels.forEach(function (label) {\n            if (label.value) f = f + (\"\\nskos:prefLabel \" + label.toCanonical() + \" ;\");\n        });\n        c.descriptions.forEach(function (descr) {\n            if (descr.value) f = f + (\"\\ndcterms:description \" + descr.toCanonical() + \" ;\");\n        });\n        if (c.url) f = f + (\"\\nfoaf:homepage <\" + c.url + \"> ;\");\n        if (c.rightsHolders.length > 0) {\n            f = f + \"\\ndcterms:rightsHolder \";\n            c.rightsHolders.forEach(function (rh) {\n                f = f + (\"<\" + rh.id + \">, \");\n                if (!fragmentsById.has(rh.id)) {\n                    fragmentsById.set(rh.id, \"<\" + rh.id + \"> a foaf:Agent ;\");\n                    rh.toTurtle(fragmentsById, prefixes);\n                }\n            });\n            f = f.substring(0, f.length - 2) + ' ;';\n            if (c.rightsHolders.length > 1) c.rightsHolders.forEach(function (rh, index) {\n                f = f + (\"\\nfibra:qualifiedAssertion [\\n  rdf:predicate dcterms:rightsHolder ;\\n  rdf:object <\" + rh.id + \"> ;\\n  fibra:order \" + index + \" ;\\n] ;\");\n            });\n        }\n        fragmentsById.set(c.id, f);\n    };\n    Citable.prototype.toTurtle = function (fragmentsById, prefixes) {\n        Citable.toTurtle(this, fragmentsById, prefixes);\n    };\n    return Citable;\n}();\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2FwcC9tb2RlbHMvY2l0YWJsZS50cz80YjJiIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcbmltcG9ydCB7IFNLT1MsIERDVGVybXMsIEZPQUYsIEZJQlJBLCBSREYgfSBmcm9tICcuL3JkZic7XG52YXIgQ2l0YWJsZVNvdXJjZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ2l0YWJsZVNvdXJjZShzcGFycWxFbmRwb2ludCwgZ3JhcGgpIHtcbiAgICAgICAgdGhpcy5zcGFycWxFbmRwb2ludCA9IHNwYXJxbEVuZHBvaW50O1xuICAgICAgICB0aGlzLmdyYXBoID0gZ3JhcGg7XG4gICAgfVxuICAgIENpdGFibGVTb3VyY2UuY2xvbmUgPSBmdW5jdGlvbiAoc291cmNlKSB7IHJldHVybiBuZXcgQ2l0YWJsZVNvdXJjZShzb3VyY2Uuc3BhcnFsRW5kcG9pbnQsIHNvdXJjZS5ncmFwaCk7IH07XG4gICAgcmV0dXJuIENpdGFibGVTb3VyY2U7XG59KCkpO1xuZXhwb3J0IHsgQ2l0YWJsZVNvdXJjZSB9O1xudmFyIENpdGFibGUgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIENpdGFibGUoaWQsIHNvdXJjZSwgbGFiZWxzLCB1cmwsIGRlc2NyaXB0aW9ucywgcmlnaHRzSG9sZGVycykge1xuICAgICAgICBpZiAobGFiZWxzID09PSB2b2lkIDApIHsgbGFiZWxzID0gW107IH1cbiAgICAgICAgaWYgKGRlc2NyaXB0aW9ucyA9PT0gdm9pZCAwKSB7IGRlc2NyaXB0aW9ucyA9IFtdOyB9XG4gICAgICAgIGlmIChyaWdodHNIb2xkZXJzID09PSB2b2lkIDApIHsgcmlnaHRzSG9sZGVycyA9IFtdOyB9XG4gICAgICAgIHRoaXMubGFiZWxzID0gbGFiZWxzO1xuICAgICAgICB0aGlzLnVybCA9IHVybDtcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbnMgPSBkZXNjcmlwdGlvbnM7XG4gICAgICAgIHRoaXMucmlnaHRzSG9sZGVycyA9IHJpZ2h0c0hvbGRlcnM7XG4gICAgICAgIHRoaXMuc291cmNlID0ge1xuICAgICAgICAgICAgc3BhcnFsRW5kcG9pbnQ6IG51bGxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICB9XG4gICAgQ2l0YWJsZS50b1R1cnRsZSA9IGZ1bmN0aW9uIChjLCBmcmFnbWVudHNCeUlkLCBwcmVmaXhlcykge1xuICAgICAgICBwcmVmaXhlc1snc2tvcyddID0gU0tPUy5ucztcbiAgICAgICAgcHJlZml4ZXNbJ2RjdGVybXMnXSA9IERDVGVybXMubnM7XG4gICAgICAgIHByZWZpeGVzWydmb2FmJ10gPSBGT0FGLm5zO1xuICAgICAgICBwcmVmaXhlc1snZmlicmEnXSA9IEZJQlJBLm5zO1xuICAgICAgICBwcmVmaXhlc1sncmRmJ10gPSBSREYubnM7XG4gICAgICAgIHZhciBmID0gZnJhZ21lbnRzQnlJZC5nZXQoYy5pZCk7XG4gICAgICAgIGMubGFiZWxzLmZvckVhY2goZnVuY3Rpb24gKGxhYmVsKSB7XG4gICAgICAgICAgICBpZiAobGFiZWwudmFsdWUpXG4gICAgICAgICAgICAgICAgZiA9IGYgKyAoXCJcXG5za29zOnByZWZMYWJlbCBcIiArIGxhYmVsLnRvQ2Fub25pY2FsKCkgKyBcIiA7XCIpO1xuICAgICAgICB9KTtcbiAgICAgICAgYy5kZXNjcmlwdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoZGVzY3IpIHtcbiAgICAgICAgICAgIGlmIChkZXNjci52YWx1ZSlcbiAgICAgICAgICAgICAgICBmID0gZiArIChcIlxcbmRjdGVybXM6ZGVzY3JpcHRpb24gXCIgKyBkZXNjci50b0Nhbm9uaWNhbCgpICsgXCIgO1wiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChjLnVybClcbiAgICAgICAgICAgIGYgPSBmICsgKFwiXFxuZm9hZjpob21lcGFnZSA8XCIgKyBjLnVybCArIFwiPiA7XCIpO1xuICAgICAgICBpZiAoYy5yaWdodHNIb2xkZXJzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGYgPSBmICsgXCJcXG5kY3Rlcm1zOnJpZ2h0c0hvbGRlciBcIjtcbiAgICAgICAgICAgIGMucmlnaHRzSG9sZGVycy5mb3JFYWNoKGZ1bmN0aW9uIChyaCkge1xuICAgICAgICAgICAgICAgIGYgPSBmICsgKFwiPFwiICsgcmguaWQgKyBcIj4sIFwiKTtcbiAgICAgICAgICAgICAgICBpZiAoIWZyYWdtZW50c0J5SWQuaGFzKHJoLmlkKSkge1xuICAgICAgICAgICAgICAgICAgICBmcmFnbWVudHNCeUlkLnNldChyaC5pZCwgXCI8XCIgKyByaC5pZCArIFwiPiBhIGZvYWY6QWdlbnQgO1wiKTtcbiAgICAgICAgICAgICAgICAgICAgcmgudG9UdXJ0bGUoZnJhZ21lbnRzQnlJZCwgcHJlZml4ZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZiA9IGYuc3Vic3RyaW5nKDAsIGYubGVuZ3RoIC0gMikgKyAnIDsnO1xuICAgICAgICAgICAgaWYgKGMucmlnaHRzSG9sZGVycy5sZW5ndGggPiAxKVxuICAgICAgICAgICAgICAgIGMucmlnaHRzSG9sZGVycy5mb3JFYWNoKGZ1bmN0aW9uIChyaCwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgZiA9IGYgKyAoXCJcXG5maWJyYTpxdWFsaWZpZWRBc3NlcnRpb24gW1xcbiAgcmRmOnByZWRpY2F0ZSBkY3Rlcm1zOnJpZ2h0c0hvbGRlciA7XFxuICByZGY6b2JqZWN0IDxcIiArIHJoLmlkICsgXCI+IDtcXG4gIGZpYnJhOm9yZGVyIFwiICsgaW5kZXggKyBcIiA7XFxuXSA7XCIpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGZyYWdtZW50c0J5SWQuc2V0KGMuaWQsIGYpO1xuICAgIH07XG4gICAgQ2l0YWJsZS5wcm90b3R5cGUudG9UdXJ0bGUgPSBmdW5jdGlvbiAoZnJhZ21lbnRzQnlJZCwgcHJlZml4ZXMpIHsgQ2l0YWJsZS50b1R1cnRsZSh0aGlzLCBmcmFnbWVudHNCeUlkLCBwcmVmaXhlcyk7IH07XG4gICAgcmV0dXJuIENpdGFibGU7XG59KCkpO1xuZXhwb3J0IHsgQ2l0YWJsZSB9O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vYXBwL21vZGVscy9jaXRhYmxlLnRzIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),
/* 9 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__models_rdf__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__worker_service_worker_service__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__components_collection_utils__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_angular__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return AutocompletionResults; });\n/* unused harmony export ResultGroup */\n/* unused harmony export Result */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return SparqlAutocompleteService; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return SparqlAutocompleteWorkerService; });\n\n\n\n\n\nvar s = fi.seco.sparql;\n\nvar AutocompletionResults = function () {\n    function AutocompletionResults() {\n        this.localMatchingResults = [];\n        this.localNonMatchingResults = [];\n        this.remoteResults = [];\n    }\n    return AutocompletionResults;\n}();\n\nvar ResultGroup = function () {\n    function ResultGroup(label) {\n        this.label = label;\n        this.results = [];\n    }\n    return ResultGroup;\n}();\n\nvar Result = function () {\n    function Result(ids, datasources, matchedLabel, prefLabel) {\n        this.ids = ids;\n        this.datasources = datasources;\n        this.matchedLabel = matchedLabel;\n        this.prefLabel = prefLabel;\n        this.additionalInformation = {};\n    }\n    return Result;\n}();\n\nvar SparqlAutocompleteService = function () {\n    function SparqlAutocompleteService(workerService) {\n        this.workerService = workerService;\n    }\n    SparqlAutocompleteService.prototype.autocomplete = function (query, limit, queryRemote, limits, canceller) {\n        if (queryRemote === void 0) {\n            queryRemote = false;\n        }\n        if (limits === void 0) {\n            limits = '';\n        }\n        return this.workerService.call('sparqlAutocompleteWorkerService', 'autocomplete', [query, limit, queryRemote, limits], canceller);\n    };\n    return SparqlAutocompleteService;\n}();\n\nSparqlAutocompleteService.naiveMatchQueryTemplate = \"PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\\nPREFIX mads: <http://www.loc.gov/mads/rdf/v1#>\\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\\nPREFIX dcterms: <http://purl.org/dc/terms/>\\nSELECT ?groupId ?id ?prefLabel ?matchedLabel ?sameAs ?altLabel { # ADDITIONALVARIABLES\\nGRAPH <GRAPH> {\\n  {\\n    SELECT ?groupId ?id {\\n      {\\n        ?id skos:prefLabel|rdfs:label|skos:altLabel|mads:authoritativeLabel|mads:variantLabel <QUERY> .\\n      } UNION {\\n        ?id skos:prefLabel|rdfs:label|skos:altLabel|mads:authoritativeLabel|mads:variantLabel <QUERY>@<PREFLANG> .\\n      }\\n      ?id a ?groupId .\\n    }\\n    GROUP BY ?groupId ?id\\n    HAVING(BOUND(?id))\\n    LIMIT <LIMIT>\\n  }\\n  ?id skos:prefLabel|rdfs:label|skos:altLabel|mads:authoritativeLabel|mads:variantLabel ?matchedLabel .\\n  FILTER (REGEX(LCASE(?matchedLabel),CONCAT(\\\"\\\\\\\\b\\\",LCASE(<QUERY>))))\\n  BIND(COALESCE(?groupLabelP,REPLACE(REPLACE(REPLACE(REPLACE(STR(?groupId),\\\".*/\\\",\\\"\\\"),\\\".*#\\\",\\\"\\\"),\\\"_\\\",\\\" \\\"),\\\"([A-Z\\u00C5\\u00C4\\u00D6])\\\",\\\" $1\\\")) AS ?groupLabel)\\n  {\\n    ?id  rdfs:label|skos:prefLabel|mads:authoritativeLabel ?prefLabel .\\n  } UNION {\\n    ?id owl:sameAs ?sameAs .\\n  } UNION {\\n    ?id skos:altLabel|mads:variantLabel ?altLabel .\\n  }\\n  # ADDITIONALSELECT\\n}\\n}\";\nSparqlAutocompleteService.defaultMatchQuery = \"\\nPREFIX text: <http://jena.apache.org/text#>\\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\\nPREFIX mads: <http://www.loc.gov/mads/rdf/v1#>\\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\\nPREFIX sf: <http://ldf.fi/functions#>\\nPREFIX fibra: <http://ldf.fi/fibra/schema#>\\nPREFIX dcterms: <http://purl.org/dc/terms/>\\nSELECT ?groupId ?id ?prefLabel ?matchedLabel ?sameAs ?altLabel { # ADDITIONALVARIABLES\\n# STARTGRAPH\\n  {\\n    SELECT ?groupId ?id (SUM(?sc) AS ?score) {\\n      {\\n        SELECT ?groupId ?id ?sc {\\n          BIND(CONCAT(\\\"\\\\\\\"\\\",REPLACE(<QUERY>,\\\"([\\\\\\\\+\\\\\\\\-\\\\\\\\&\\\\\\\\|\\\\\\\\!\\\\\\\\(\\\\\\\\)\\\\\\\\{\\\\\\\\}\\\\\\\\[\\\\\\\\]\\\\\\\\^\\\\\\\\\\\\\\\"\\\\\\\\~\\\\\\\\*\\\\\\\\?\\\\\\\\:\\\\\\\\/\\\\\\\\\\\\\\\\])\\\",\\\"\\\\\\\\$1\\\"),\\\"\\\\\\\"\\\") AS ?query)\\n          (?id ?sc) text:query ?query .\\n          ?id skos:prefLabel|rdfs:label|skos:altLabel|mads:authoritativeLabel|mads:variantLabel ?matchedLabel\\n          FILTER (LCASE(?matchedLabel)=LCASE(<QUERY>))\\n          ?id a ?groupIdLocal .\\n          BIND(?groupIdLocal AS ?groupId)\\n          # CONSTRAINTS\\n        }\\n        GROUP BY ?groupId ?id ?sc\\n        LIMIT <LIMIT>\\n      } UNION {\\n        SELECT ?groupId ?id ?sc {\\n          BIND(CONCAT(REPLACE(<QUERY>,\\\"([\\\\\\\\+\\\\\\\\-\\\\\\\\&\\\\\\\\|\\\\\\\\!\\\\\\\\(\\\\\\\\)\\\\\\\\{\\\\\\\\}\\\\\\\\[\\\\\\\\]\\\\\\\\^\\\\\\\\\\\\\\\"\\\\\\\\~\\\\\\\\*\\\\\\\\?\\\\\\\\:\\\\\\\\/\\\\\\\\\\\\\\\\])\\\",\\\"\\\\\\\\$1\\\"),\\\"*\\\") AS ?query)\\n          (?id ?sc) text:query ?query .\\n          ?id a ?groupIdLocal .\\n          BIND(?groupIdLocal AS ?groupId)\\n          # CONSTRAINTS\\n        }\\n        GROUP BY ?groupId ?id ?sc\\n        LIMIT <LIMIT>\\n      }\\n    }\\n    GROUP BY ?groupId ?id\\n    HAVING(BOUND(?id))\\n    LIMIT <LIMIT>\\n  }\\n  ?id skos:prefLabel|rdfs:label|skos:altLabel|mads:authoritativeLabel|mads:variantLabel ?matchedLabel\\n  FILTER (REGEX(LCASE(?matchedLabel),CONCAT(\\\"\\\\\\\\b\\\",LCASE(<QUERY>))))\\n  {\\n    ?id sf:preferredLanguageLiteral (skos:prefLabel mads:authoritativeLabel rdfs:label skos:altLabel mads:variantLabel '<PREFLANG>' '' ?prefLabel) .\\n  } UNION {\\n    ?id owl:sameAs ?sameAs .\\n  } UNION {\\n    ?id skos:altLabel|mads:variantLabel ?altLabel .\\n  }\\n  # ADDITIONALSELECT\\n# ENDGRAPH\\n}\\n\";\nvar ProcessingData = function () {\n    function ProcessingData() {\n        this.idToIdSet = new __WEBPACK_IMPORTED_MODULE_2__components_collection_utils__[\"a\" /* EMap */](function () {\n            return new __WEBPACK_IMPORTED_MODULE_2__components_collection_utils__[\"b\" /* StringSet */]();\n        }); // id to sameAs ids\n        this.idToGroupIdSet = new __WEBPACK_IMPORTED_MODULE_2__components_collection_utils__[\"a\" /* EMap */](function () {\n            return new __WEBPACK_IMPORTED_MODULE_2__components_collection_utils__[\"b\" /* StringSet */]();\n        });\n        this.ifpVarPlusValueToIdSet = new __WEBPACK_IMPORTED_MODULE_2__components_collection_utils__[\"a\" /* EMap */](function () {\n            return new __WEBPACK_IMPORTED_MODULE_2__components_collection_utils__[\"a\" /* EMap */](function () {\n                return new __WEBPACK_IMPORTED_MODULE_2__components_collection_utils__[\"b\" /* StringSet */]();\n            });\n        }); // inverse functional properties & values to ids\n        this.idToPrefLabelSet = new __WEBPACK_IMPORTED_MODULE_2__components_collection_utils__[\"a\" /* EMap */](function () {\n            return new __WEBPACK_IMPORTED_MODULE_0__models_rdf__[\"a\" /* ONodeSet */]();\n        });\n        this.idToMatchedLabelSet = new __WEBPACK_IMPORTED_MODULE_2__components_collection_utils__[\"a\" /* EMap */](function () {\n            return new __WEBPACK_IMPORTED_MODULE_0__models_rdf__[\"a\" /* ONodeSet */]();\n        });\n        this.idToAltLabelSet = new __WEBPACK_IMPORTED_MODULE_2__components_collection_utils__[\"a\" /* EMap */](function () {\n            return new __WEBPACK_IMPORTED_MODULE_0__models_rdf__[\"a\" /* ONodeSet */]();\n        });\n        this.idToDatasourceSet = new __WEBPACK_IMPORTED_MODULE_2__components_collection_utils__[\"a\" /* EMap */](function () {\n            return new __WEBPACK_IMPORTED_MODULE_2__components_collection_utils__[\"b\" /* StringSet */]();\n        });\n        this.seen = new __WEBPACK_IMPORTED_MODULE_2__components_collection_utils__[\"b\" /* StringSet */]();\n    }\n    return ProcessingData;\n}();\nvar SparqlAutocompleteWorkerService = function () {\n    function SparqlAutocompleteWorkerService($q, fibraSparqlService, stateWorkerService) {\n        this.$q = $q;\n        this.fibraSparqlService = fibraSparqlService;\n        this.stateWorkerService = stateWorkerService;\n    }\n    SparqlAutocompleteWorkerService.processBindings = function (pd, endpoint, result) {\n        result.results.bindings.forEach(function (binding) {\n            var id = binding['id'].value;\n            pd.idToIdSet.goc(id).add(id);\n            pd.idToDatasourceSet.goc(id).add(endpoint);\n            if (binding['prefLabel']) pd.idToPrefLabelSet.goc(id).add(__WEBPACK_IMPORTED_MODULE_0__models_rdf__[\"b\" /* DataFactory */].instance.nodeFromBinding(binding['prefLabel']));\n            if (binding['altLabel']) pd.idToAltLabelSet.goc(id).add(__WEBPACK_IMPORTED_MODULE_0__models_rdf__[\"b\" /* DataFactory */].instance.nodeFromBinding(binding['altLabel']));\n            if (binding['matchedLabel']) pd.idToMatchedLabelSet.goc(id).add(__WEBPACK_IMPORTED_MODULE_0__models_rdf__[\"b\" /* DataFactory */].instance.nodeFromBinding(binding['matchedLabel']));\n            if (binding['groupId']) {\n                pd.idToGroupIdSet.goc(id).add(binding['groupId'].value);\n                if (binding['groupLabel']) pd.idToPrefLabelSet.goc(binding['groupId'].value).add(__WEBPACK_IMPORTED_MODULE_0__models_rdf__[\"b\" /* DataFactory */].instance.nodeFromBinding(binding['groupLabel']));\n            }\n            if (binding['sameAs']) {\n                pd.idToIdSet.get(id).add(binding['sameAs'].value);\n                pd.idToIdSet.goc(binding['sameAs'].value).add(id);\n            }\n            for (var _i = 0, _a = result.head.vars; _i < _a.length; _i++) {\n                var v = _a[_i];\n                if (v.indexOf('ifp') === 0 && binding[v]) pd.ifpVarPlusValueToIdSet.goc(v.substring(3)).goc(binding[v].value).add(id);\n            }\n        });\n    };\n    SparqlAutocompleteWorkerService.buildResults = function (pd, groupIdToGroup, dataModel, prefLang) {\n        var res = [];\n        pd.idToIdSet.each(function (idSet, id) {\n            var seen = pd.seen.has(id) || idSet.values().some(function (id2) {\n                return pd.seen.has(id2);\n            });\n            if (!seen) {\n                pd.seen.adds(idSet);\n                var result_1 = new Result(idSet.values().map(function (oid) {\n                    return __WEBPACK_IMPORTED_MODULE_0__models_rdf__[\"b\" /* DataFactory */].instance.namedNode(oid);\n                }), pd.idToDatasourceSet.get(id).values(), pd.idToMatchedLabelSet.get(id).values()[0], pd.idToPrefLabelSet.has(id) ? pd.idToPrefLabelSet.get(id).values()[0] : null);\n                if (pd.idToAltLabelSet.has(id)) result_1.additionalInformation['altLabel'] = pd.idToAltLabelSet.get(id).values();\n                result_1.additionalInformation['type'] = pd.idToGroupIdSet.get(id).values().map(function (v) {\n                    return __WEBPACK_IMPORTED_MODULE_0__models_rdf__[\"b\" /* DataFactory */].instance.namedNode(v);\n                });\n                result_1.additionalInformation['typeLabel'] = pd.idToGroupIdSet.get(id).values().map(function (v) {\n                    return pd.idToPrefLabelSet.has(id) ? pd.idToPrefLabelSet.get(id).values()[0] : null;\n                });\n                pd.idToGroupIdSet.get(id).each(function (gid) {\n                    return groupIdToGroup.goc(gid, function () {\n                        var glabel = dataModel.classMap.has(gid) ? dataModel.classMap.get(gid).getLabel(prefLang) : pd.idToPrefLabelSet.has(gid) ? pd.idToPrefLabelSet.get(gid).values()[0].value : gid;\n                        var resultGroup = new ResultGroup(glabel);\n                        res.push(resultGroup);\n                        return resultGroup;\n                    }).results.push(result_1);\n                });\n            }\n        });\n        return res;\n    };\n    SparqlAutocompleteWorkerService.unifyResults = function (pd) {\n        // create sameAses for all objects sharing same inverse functional property values\n        pd.ifpVarPlusValueToIdSet.each(function (valueToIdSet) {\n            return valueToIdSet.each(function (ids) {\n                return ids.each(function (id) {\n                    return pd.idToIdSet.goc(id).adds(ids);\n                });\n            });\n        });\n        // consolidate id sets as well as all id -related information\n        pd.idToIdSet.each(function (idSet, id) {\n            return idSet.each(function (oid) {\n                var oidSet = pd.idToIdSet.get(oid);\n                if (idSet !== oidSet) {\n                    pd.idToIdSet.set(oid, idSet);\n                    idSet.adds(oidSet);\n                    var datasourceSet = pd.idToDatasourceSet.get(id);\n                    var oDatasourceSet = pd.idToDatasourceSet.get(oid);\n                    if (datasourceSet) {\n                        if (oDatasourceSet) datasourceSet.adds(oDatasourceSet);\n                        pd.idToDatasourceSet.set(oid, datasourceSet);\n                    } else if (oDatasourceSet) pd.idToDatasourceSet.set(id, oDatasourceSet);\n                    var groupIdSet = pd.idToGroupIdSet.get(id);\n                    var oGroupIdSet = pd.idToGroupIdSet.get(oid);\n                    if (groupIdSet) {\n                        if (oGroupIdSet) groupIdSet.adds(oGroupIdSet);\n                        pd.idToGroupIdSet.set(oid, groupIdSet);\n                    } else if (oGroupIdSet) pd.idToGroupIdSet.set(id, oGroupIdSet);\n                    var mSet = pd.idToPrefLabelSet.get(id);\n                    var oSet = pd.idToPrefLabelSet.get(oid);\n                    if (mSet) {\n                        if (oSet) mSet.adds(oSet);\n                        pd.idToPrefLabelSet.set(oid, mSet);\n                    } else if (oSet) pd.idToPrefLabelSet.set(id, oSet);\n                    mSet = pd.idToMatchedLabelSet.get(id);\n                    oSet = pd.idToMatchedLabelSet.get(oid);\n                    if (mSet) {\n                        if (oSet) mSet.adds(oSet);\n                        pd.idToMatchedLabelSet.set(oid, mSet);\n                    } else if (oSet) pd.idToMatchedLabelSet.set(id, oSet);\n                    mSet = pd.idToAltLabelSet.get(id);\n                    oSet = pd.idToAltLabelSet.get(oid);\n                    if (mSet) {\n                        if (oSet) mSet.adds(oSet);\n                        pd.idToAltLabelSet.set(oid, mSet);\n                    } else if (oSet) pd.idToAltLabelSet.set(id, oSet);\n                }\n            });\n        });\n    };\n    SparqlAutocompleteWorkerService.prototype.autocomplete = function (query, limit, queryRemote, limits, canceller) {\n        var _this = this;\n        if (queryRemote === void 0) {\n            queryRemote = false;\n        }\n        if (limits === void 0) {\n            limits = '';\n        }\n        var d = this.$q.defer();\n        var results = new AutocompletionResults();\n        var queryTemplate = this.stateWorkerService.state.project.autocompletionQuery;\n        queryTemplate = queryTemplate.replace(/<QUERY>/g, s.SparqlService.stringToSPARQLString(query));\n        queryTemplate = queryTemplate.replace(/<LIMIT>/g, '' + limit);\n        queryTemplate = queryTemplate.replace(/# CONSTRAINTS/g, limits);\n        queryTemplate = queryTemplate.replace(/<PREFLANG>/g, this.stateWorkerService.state.language);\n        var pd = new ProcessingData();\n        var primaryProcessed = this.fibraSparqlService.query(this.stateWorkerService.state.project.endpoint, queryTemplate, { timeout: canceller }).then(function (response) {\n            SparqlAutocompleteWorkerService.processBindings(pd, _this.stateWorkerService.state.project.endpoint, response);\n            // SparqlAutocompleteWorkerService.unifyResults(pd)\n            results.localMatchingResults = SparqlAutocompleteWorkerService.buildResults(pd, new __WEBPACK_IMPORTED_MODULE_2__components_collection_utils__[\"a\" /* EMap */](), _this.stateWorkerService.state.project.dataModel, _this.stateWorkerService.state.language);\n            if (!queryRemote) d.resolve(results);else d.notify({ endpointType: 'primary', endpoint: _this.stateWorkerService.state.project.id, results: results });\n        });\n        if (queryRemote) {\n            // FIXME: It is currently possible that we miss equivalencies because equivalent data from one source doesn't fit the limit while it does for another. Add further query to make sure all equivalencies are fetched (either in autocompletion or latest in import)\n            var remoteGroupIdToGroup_1 = new __WEBPACK_IMPORTED_MODULE_2__components_collection_utils__[\"a\" /* EMap */]();\n            this.$q.all(this.stateWorkerService.state.project.remoteEndpoints().map(function (endpointConfiguration) {\n                queryTemplate = endpointConfiguration.autocompletionQuery;\n                queryTemplate = queryTemplate.replace(/<QUERY>/g, s.SparqlService.stringToSPARQLString(query));\n                queryTemplate = queryTemplate.replace(/<LIMIT>/g, '' + limit);\n                queryTemplate = queryTemplate.replace(/<PREFLANG>/g, _this.stateWorkerService.state.language);\n                return _this.fibraSparqlService.query(endpointConfiguration.endpoint, queryTemplate, { timeout: canceller }).then(function (response) {\n                    if (response.results.bindings.length !== 0) {\n                        primaryProcessed.then(function () {\n                            SparqlAutocompleteWorkerService.processBindings(pd, endpointConfiguration.id, response);\n                            SparqlAutocompleteWorkerService.unifyResults(pd);\n                            results.remoteResults = results.remoteResults.concat(SparqlAutocompleteWorkerService.buildResults(pd, remoteGroupIdToGroup_1, _this.stateWorkerService.state.project.dataModel, _this.stateWorkerService.state.language));\n                            d.notify({ endpointType: 'remote', endpoint: endpointConfiguration.id, results: results });\n                        });\n                    }\n                }, function (error) {\n                    return d.notify({ endpointType: 'remote', endpoint: endpointConfiguration.id, error: __WEBPACK_IMPORTED_MODULE_1__worker_service_worker_service__[\"b\" /* WorkerWorkerService */].stripFunctions(error) });\n                });\n            })).then(function () {\n                return d.resolve(results);\n            });\n        }\n        return d.promise;\n    };\n    return SparqlAutocompleteWorkerService;\n}();\n\n__WEBPACK_IMPORTED_MODULE_3_angular__[\"module\"]('fibra.services.sparql-autocomplete-service', []).config(function ($provide) {\n    $provide.service('sparqlAutocompleteService', SparqlAutocompleteService);\n});//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2FwcC9zZXJ2aWNlcy9zcGFycWwtYXV0b2NvbXBsZXRlLXNlcnZpY2UudHM/YjEyZSJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5pbXBvcnQgeyBPTm9kZVNldCwgRGF0YUZhY3RvcnkgfSBmcm9tICcuLi9tb2RlbHMvcmRmJztcbmltcG9ydCB7IFdvcmtlcldvcmtlclNlcnZpY2UgfSBmcm9tICcuL3dvcmtlci1zZXJ2aWNlL3dvcmtlci1zZXJ2aWNlJztcbmltcG9ydCB7IEVNYXAsIFN0cmluZ1NldCB9IGZyb20gJy4uL2NvbXBvbmVudHMvY29sbGVjdGlvbi11dGlscyc7XG52YXIgcyA9IGZpLnNlY28uc3BhcnFsO1xuaW1wb3J0ICogYXMgYW5ndWxhciBmcm9tICdhbmd1bGFyJztcbnZhciBBdXRvY29tcGxldGlvblJlc3VsdHMgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEF1dG9jb21wbGV0aW9uUmVzdWx0cygpIHtcbiAgICAgICAgdGhpcy5sb2NhbE1hdGNoaW5nUmVzdWx0cyA9IFtdO1xuICAgICAgICB0aGlzLmxvY2FsTm9uTWF0Y2hpbmdSZXN1bHRzID0gW107XG4gICAgICAgIHRoaXMucmVtb3RlUmVzdWx0cyA9IFtdO1xuICAgIH1cbiAgICByZXR1cm4gQXV0b2NvbXBsZXRpb25SZXN1bHRzO1xufSgpKTtcbmV4cG9ydCB7IEF1dG9jb21wbGV0aW9uUmVzdWx0cyB9O1xudmFyIFJlc3VsdEdyb3VwID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBSZXN1bHRHcm91cChsYWJlbCkge1xuICAgICAgICB0aGlzLmxhYmVsID0gbGFiZWw7XG4gICAgICAgIHRoaXMucmVzdWx0cyA9IFtdO1xuICAgIH1cbiAgICByZXR1cm4gUmVzdWx0R3JvdXA7XG59KCkpO1xuZXhwb3J0IHsgUmVzdWx0R3JvdXAgfTtcbnZhciBSZXN1bHQgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFJlc3VsdChpZHMsIGRhdGFzb3VyY2VzLCBtYXRjaGVkTGFiZWwsIHByZWZMYWJlbCkge1xuICAgICAgICB0aGlzLmlkcyA9IGlkcztcbiAgICAgICAgdGhpcy5kYXRhc291cmNlcyA9IGRhdGFzb3VyY2VzO1xuICAgICAgICB0aGlzLm1hdGNoZWRMYWJlbCA9IG1hdGNoZWRMYWJlbDtcbiAgICAgICAgdGhpcy5wcmVmTGFiZWwgPSBwcmVmTGFiZWw7XG4gICAgICAgIHRoaXMuYWRkaXRpb25hbEluZm9ybWF0aW9uID0ge307XG4gICAgfVxuICAgIHJldHVybiBSZXN1bHQ7XG59KCkpO1xuZXhwb3J0IHsgUmVzdWx0IH07XG52YXIgU3BhcnFsQXV0b2NvbXBsZXRlU2VydmljZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU3BhcnFsQXV0b2NvbXBsZXRlU2VydmljZSh3b3JrZXJTZXJ2aWNlKSB7XG4gICAgICAgIHRoaXMud29ya2VyU2VydmljZSA9IHdvcmtlclNlcnZpY2U7XG4gICAgfVxuICAgIFNwYXJxbEF1dG9jb21wbGV0ZVNlcnZpY2UucHJvdG90eXBlLmF1dG9jb21wbGV0ZSA9IGZ1bmN0aW9uIChxdWVyeSwgbGltaXQsIHF1ZXJ5UmVtb3RlLCBsaW1pdHMsIGNhbmNlbGxlcikge1xuICAgICAgICBpZiAocXVlcnlSZW1vdGUgPT09IHZvaWQgMCkgeyBxdWVyeVJlbW90ZSA9IGZhbHNlOyB9XG4gICAgICAgIGlmIChsaW1pdHMgPT09IHZvaWQgMCkgeyBsaW1pdHMgPSAnJzsgfVxuICAgICAgICByZXR1cm4gdGhpcy53b3JrZXJTZXJ2aWNlLmNhbGwoJ3NwYXJxbEF1dG9jb21wbGV0ZVdvcmtlclNlcnZpY2UnLCAnYXV0b2NvbXBsZXRlJywgW3F1ZXJ5LCBsaW1pdCwgcXVlcnlSZW1vdGUsIGxpbWl0c10sIGNhbmNlbGxlcik7XG4gICAgfTtcbiAgICByZXR1cm4gU3BhcnFsQXV0b2NvbXBsZXRlU2VydmljZTtcbn0oKSk7XG5leHBvcnQgeyBTcGFycWxBdXRvY29tcGxldGVTZXJ2aWNlIH07XG5TcGFycWxBdXRvY29tcGxldGVTZXJ2aWNlLm5haXZlTWF0Y2hRdWVyeVRlbXBsYXRlID0gXCJQUkVGSVggcmRmczogPGh0dHA6Ly93d3cudzMub3JnLzIwMDAvMDEvcmRmLXNjaGVtYSM+XFxuUFJFRklYIHNrb3M6IDxodHRwOi8vd3d3LnczLm9yZy8yMDA0LzAyL3Nrb3MvY29yZSM+XFxuUFJFRklYIG1hZHM6IDxodHRwOi8vd3d3LmxvYy5nb3YvbWFkcy9yZGYvdjEjPlxcblBSRUZJWCBvd2w6IDxodHRwOi8vd3d3LnczLm9yZy8yMDAyLzA3L293bCM+XFxuUFJFRklYIGRjdGVybXM6IDxodHRwOi8vcHVybC5vcmcvZGMvdGVybXMvPlxcblNFTEVDVCA/Z3JvdXBJZCA/aWQgP3ByZWZMYWJlbCA/bWF0Y2hlZExhYmVsID9zYW1lQXMgP2FsdExhYmVsIHsgIyBBRERJVElPTkFMVkFSSUFCTEVTXFxuR1JBUEggPEdSQVBIPiB7XFxuICB7XFxuICAgIFNFTEVDVCA/Z3JvdXBJZCA/aWQge1xcbiAgICAgIHtcXG4gICAgICAgID9pZCBza29zOnByZWZMYWJlbHxyZGZzOmxhYmVsfHNrb3M6YWx0TGFiZWx8bWFkczphdXRob3JpdGF0aXZlTGFiZWx8bWFkczp2YXJpYW50TGFiZWwgPFFVRVJZPiAuXFxuICAgICAgfSBVTklPTiB7XFxuICAgICAgICA/aWQgc2tvczpwcmVmTGFiZWx8cmRmczpsYWJlbHxza29zOmFsdExhYmVsfG1hZHM6YXV0aG9yaXRhdGl2ZUxhYmVsfG1hZHM6dmFyaWFudExhYmVsIDxRVUVSWT5APFBSRUZMQU5HPiAuXFxuICAgICAgfVxcbiAgICAgID9pZCBhID9ncm91cElkIC5cXG4gICAgfVxcbiAgICBHUk9VUCBCWSA/Z3JvdXBJZCA/aWRcXG4gICAgSEFWSU5HKEJPVU5EKD9pZCkpXFxuICAgIExJTUlUIDxMSU1JVD5cXG4gIH1cXG4gID9pZCBza29zOnByZWZMYWJlbHxyZGZzOmxhYmVsfHNrb3M6YWx0TGFiZWx8bWFkczphdXRob3JpdGF0aXZlTGFiZWx8bWFkczp2YXJpYW50TGFiZWwgP21hdGNoZWRMYWJlbCAuXFxuICBGSUxURVIgKFJFR0VYKExDQVNFKD9tYXRjaGVkTGFiZWwpLENPTkNBVChcXFwiXFxcXFxcXFxiXFxcIixMQ0FTRSg8UVVFUlk+KSkpKVxcbiAgQklORChDT0FMRVNDRSg/Z3JvdXBMYWJlbFAsUkVQTEFDRShSRVBMQUNFKFJFUExBQ0UoUkVQTEFDRShTVFIoP2dyb3VwSWQpLFxcXCIuKi9cXFwiLFxcXCJcXFwiKSxcXFwiLiojXFxcIixcXFwiXFxcIiksXFxcIl9cXFwiLFxcXCIgXFxcIiksXFxcIihbQS1aXFx1MDBDNVxcdTAwQzRcXHUwMEQ2XSlcXFwiLFxcXCIgJDFcXFwiKSkgQVMgP2dyb3VwTGFiZWwpXFxuICB7XFxuICAgID9pZCAgcmRmczpsYWJlbHxza29zOnByZWZMYWJlbHxtYWRzOmF1dGhvcml0YXRpdmVMYWJlbCA/cHJlZkxhYmVsIC5cXG4gIH0gVU5JT04ge1xcbiAgICA/aWQgb3dsOnNhbWVBcyA/c2FtZUFzIC5cXG4gIH0gVU5JT04ge1xcbiAgICA/aWQgc2tvczphbHRMYWJlbHxtYWRzOnZhcmlhbnRMYWJlbCA/YWx0TGFiZWwgLlxcbiAgfVxcbiAgIyBBRERJVElPTkFMU0VMRUNUXFxufVxcbn1cIjtcblNwYXJxbEF1dG9jb21wbGV0ZVNlcnZpY2UuZGVmYXVsdE1hdGNoUXVlcnkgPSBcIlxcblBSRUZJWCB0ZXh0OiA8aHR0cDovL2plbmEuYXBhY2hlLm9yZy90ZXh0Iz5cXG5QUkVGSVggcmRmczogPGh0dHA6Ly93d3cudzMub3JnLzIwMDAvMDEvcmRmLXNjaGVtYSM+XFxuUFJFRklYIHNrb3M6IDxodHRwOi8vd3d3LnczLm9yZy8yMDA0LzAyL3Nrb3MvY29yZSM+XFxuUFJFRklYIG1hZHM6IDxodHRwOi8vd3d3LmxvYy5nb3YvbWFkcy9yZGYvdjEjPlxcblBSRUZJWCBvd2w6IDxodHRwOi8vd3d3LnczLm9yZy8yMDAyLzA3L293bCM+XFxuUFJFRklYIHNmOiA8aHR0cDovL2xkZi5maS9mdW5jdGlvbnMjPlxcblBSRUZJWCBmaWJyYTogPGh0dHA6Ly9sZGYuZmkvZmlicmEvc2NoZW1hIz5cXG5QUkVGSVggZGN0ZXJtczogPGh0dHA6Ly9wdXJsLm9yZy9kYy90ZXJtcy8+XFxuU0VMRUNUID9ncm91cElkID9pZCA/cHJlZkxhYmVsID9tYXRjaGVkTGFiZWwgP3NhbWVBcyA/YWx0TGFiZWwgeyAjIEFERElUSU9OQUxWQVJJQUJMRVNcXG4jIFNUQVJUR1JBUEhcXG4gIHtcXG4gICAgU0VMRUNUID9ncm91cElkID9pZCAoU1VNKD9zYykgQVMgP3Njb3JlKSB7XFxuICAgICAge1xcbiAgICAgICAgU0VMRUNUID9ncm91cElkID9pZCA/c2Mge1xcbiAgICAgICAgICBCSU5EKENPTkNBVChcXFwiXFxcXFxcXCJcXFwiLFJFUExBQ0UoPFFVRVJZPixcXFwiKFtcXFxcXFxcXCtcXFxcXFxcXC1cXFxcXFxcXCZcXFxcXFxcXHxcXFxcXFxcXCFcXFxcXFxcXChcXFxcXFxcXClcXFxcXFxcXHtcXFxcXFxcXH1cXFxcXFxcXFtcXFxcXFxcXF1cXFxcXFxcXF5cXFxcXFxcXFxcXFxcXFwiXFxcXFxcXFx+XFxcXFxcXFwqXFxcXFxcXFw/XFxcXFxcXFw6XFxcXFxcXFwvXFxcXFxcXFxcXFxcXFxcXF0pXFxcIixcXFwiXFxcXFxcXFwkMVxcXCIpLFxcXCJcXFxcXFxcIlxcXCIpIEFTID9xdWVyeSlcXG4gICAgICAgICAgKD9pZCA/c2MpIHRleHQ6cXVlcnkgP3F1ZXJ5IC5cXG4gICAgICAgICAgP2lkIHNrb3M6cHJlZkxhYmVsfHJkZnM6bGFiZWx8c2tvczphbHRMYWJlbHxtYWRzOmF1dGhvcml0YXRpdmVMYWJlbHxtYWRzOnZhcmlhbnRMYWJlbCA/bWF0Y2hlZExhYmVsXFxuICAgICAgICAgIEZJTFRFUiAoTENBU0UoP21hdGNoZWRMYWJlbCk9TENBU0UoPFFVRVJZPikpXFxuICAgICAgICAgID9pZCBhID9ncm91cElkTG9jYWwgLlxcbiAgICAgICAgICBCSU5EKD9ncm91cElkTG9jYWwgQVMgP2dyb3VwSWQpXFxuICAgICAgICAgICMgQ09OU1RSQUlOVFNcXG4gICAgICAgIH1cXG4gICAgICAgIEdST1VQIEJZID9ncm91cElkID9pZCA/c2NcXG4gICAgICAgIExJTUlUIDxMSU1JVD5cXG4gICAgICB9IFVOSU9OIHtcXG4gICAgICAgIFNFTEVDVCA/Z3JvdXBJZCA/aWQgP3NjIHtcXG4gICAgICAgICAgQklORChDT05DQVQoUkVQTEFDRSg8UVVFUlk+LFxcXCIoW1xcXFxcXFxcK1xcXFxcXFxcLVxcXFxcXFxcJlxcXFxcXFxcfFxcXFxcXFxcIVxcXFxcXFxcKFxcXFxcXFxcKVxcXFxcXFxce1xcXFxcXFxcfVxcXFxcXFxcW1xcXFxcXFxcXVxcXFxcXFxcXlxcXFxcXFxcXFxcXFxcXCJcXFxcXFxcXH5cXFxcXFxcXCpcXFxcXFxcXD9cXFxcXFxcXDpcXFxcXFxcXC9cXFxcXFxcXFxcXFxcXFxcXSlcXFwiLFxcXCJcXFxcXFxcXCQxXFxcIiksXFxcIipcXFwiKSBBUyA/cXVlcnkpXFxuICAgICAgICAgICg/aWQgP3NjKSB0ZXh0OnF1ZXJ5ID9xdWVyeSAuXFxuICAgICAgICAgID9pZCBhID9ncm91cElkTG9jYWwgLlxcbiAgICAgICAgICBCSU5EKD9ncm91cElkTG9jYWwgQVMgP2dyb3VwSWQpXFxuICAgICAgICAgICMgQ09OU1RSQUlOVFNcXG4gICAgICAgIH1cXG4gICAgICAgIEdST1VQIEJZID9ncm91cElkID9pZCA/c2NcXG4gICAgICAgIExJTUlUIDxMSU1JVD5cXG4gICAgICB9XFxuICAgIH1cXG4gICAgR1JPVVAgQlkgP2dyb3VwSWQgP2lkXFxuICAgIEhBVklORyhCT1VORCg/aWQpKVxcbiAgICBMSU1JVCA8TElNSVQ+XFxuICB9XFxuICA/aWQgc2tvczpwcmVmTGFiZWx8cmRmczpsYWJlbHxza29zOmFsdExhYmVsfG1hZHM6YXV0aG9yaXRhdGl2ZUxhYmVsfG1hZHM6dmFyaWFudExhYmVsID9tYXRjaGVkTGFiZWxcXG4gIEZJTFRFUiAoUkVHRVgoTENBU0UoP21hdGNoZWRMYWJlbCksQ09OQ0FUKFxcXCJcXFxcXFxcXGJcXFwiLExDQVNFKDxRVUVSWT4pKSkpXFxuICB7XFxuICAgID9pZCBzZjpwcmVmZXJyZWRMYW5ndWFnZUxpdGVyYWwgKHNrb3M6cHJlZkxhYmVsIG1hZHM6YXV0aG9yaXRhdGl2ZUxhYmVsIHJkZnM6bGFiZWwgc2tvczphbHRMYWJlbCBtYWRzOnZhcmlhbnRMYWJlbCAnPFBSRUZMQU5HPicgJycgP3ByZWZMYWJlbCkgLlxcbiAgfSBVTklPTiB7XFxuICAgID9pZCBvd2w6c2FtZUFzID9zYW1lQXMgLlxcbiAgfSBVTklPTiB7XFxuICAgID9pZCBza29zOmFsdExhYmVsfG1hZHM6dmFyaWFudExhYmVsID9hbHRMYWJlbCAuXFxuICB9XFxuICAjIEFERElUSU9OQUxTRUxFQ1RcXG4jIEVOREdSQVBIXFxufVxcblwiO1xudmFyIFByb2Nlc3NpbmdEYXRhID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBQcm9jZXNzaW5nRGF0YSgpIHtcbiAgICAgICAgdGhpcy5pZFRvSWRTZXQgPSBuZXcgRU1hcChmdW5jdGlvbiAoKSB7IHJldHVybiBuZXcgU3RyaW5nU2V0KCk7IH0pOyAvLyBpZCB0byBzYW1lQXMgaWRzXG4gICAgICAgIHRoaXMuaWRUb0dyb3VwSWRTZXQgPSBuZXcgRU1hcChmdW5jdGlvbiAoKSB7IHJldHVybiBuZXcgU3RyaW5nU2V0KCk7IH0pO1xuICAgICAgICB0aGlzLmlmcFZhclBsdXNWYWx1ZVRvSWRTZXQgPSBuZXcgRU1hcChmdW5jdGlvbiAoKSB7IHJldHVybiBuZXcgRU1hcChmdW5jdGlvbiAoKSB7IHJldHVybiBuZXcgU3RyaW5nU2V0KCk7IH0pOyB9KTsgLy8gaW52ZXJzZSBmdW5jdGlvbmFsIHByb3BlcnRpZXMgJiB2YWx1ZXMgdG8gaWRzXG4gICAgICAgIHRoaXMuaWRUb1ByZWZMYWJlbFNldCA9IG5ldyBFTWFwKGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5ldyBPTm9kZVNldCgpOyB9KTtcbiAgICAgICAgdGhpcy5pZFRvTWF0Y2hlZExhYmVsU2V0ID0gbmV3IEVNYXAoZnVuY3Rpb24gKCkgeyByZXR1cm4gbmV3IE9Ob2RlU2V0KCk7IH0pO1xuICAgICAgICB0aGlzLmlkVG9BbHRMYWJlbFNldCA9IG5ldyBFTWFwKGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5ldyBPTm9kZVNldCgpOyB9KTtcbiAgICAgICAgdGhpcy5pZFRvRGF0YXNvdXJjZVNldCA9IG5ldyBFTWFwKGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5ldyBTdHJpbmdTZXQoKTsgfSk7XG4gICAgICAgIHRoaXMuc2VlbiA9IG5ldyBTdHJpbmdTZXQoKTtcbiAgICB9XG4gICAgcmV0dXJuIFByb2Nlc3NpbmdEYXRhO1xufSgpKTtcbnZhciBTcGFycWxBdXRvY29tcGxldGVXb3JrZXJTZXJ2aWNlID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTcGFycWxBdXRvY29tcGxldGVXb3JrZXJTZXJ2aWNlKCRxLCBmaWJyYVNwYXJxbFNlcnZpY2UsIHN0YXRlV29ya2VyU2VydmljZSkge1xuICAgICAgICB0aGlzLiRxID0gJHE7XG4gICAgICAgIHRoaXMuZmlicmFTcGFycWxTZXJ2aWNlID0gZmlicmFTcGFycWxTZXJ2aWNlO1xuICAgICAgICB0aGlzLnN0YXRlV29ya2VyU2VydmljZSA9IHN0YXRlV29ya2VyU2VydmljZTtcbiAgICB9XG4gICAgU3BhcnFsQXV0b2NvbXBsZXRlV29ya2VyU2VydmljZS5wcm9jZXNzQmluZGluZ3MgPSBmdW5jdGlvbiAocGQsIGVuZHBvaW50LCByZXN1bHQpIHtcbiAgICAgICAgcmVzdWx0LnJlc3VsdHMuYmluZGluZ3MuZm9yRWFjaChmdW5jdGlvbiAoYmluZGluZykge1xuICAgICAgICAgICAgdmFyIGlkID0gYmluZGluZ1snaWQnXS52YWx1ZTtcbiAgICAgICAgICAgIHBkLmlkVG9JZFNldC5nb2MoaWQpLmFkZChpZCk7XG4gICAgICAgICAgICBwZC5pZFRvRGF0YXNvdXJjZVNldC5nb2MoaWQpLmFkZChlbmRwb2ludCk7XG4gICAgICAgICAgICBpZiAoYmluZGluZ1sncHJlZkxhYmVsJ10pXG4gICAgICAgICAgICAgICAgcGQuaWRUb1ByZWZMYWJlbFNldC5nb2MoaWQpLmFkZChEYXRhRmFjdG9yeS5pbnN0YW5jZS5ub2RlRnJvbUJpbmRpbmcoYmluZGluZ1sncHJlZkxhYmVsJ10pKTtcbiAgICAgICAgICAgIGlmIChiaW5kaW5nWydhbHRMYWJlbCddKVxuICAgICAgICAgICAgICAgIHBkLmlkVG9BbHRMYWJlbFNldC5nb2MoaWQpLmFkZChEYXRhRmFjdG9yeS5pbnN0YW5jZS5ub2RlRnJvbUJpbmRpbmcoYmluZGluZ1snYWx0TGFiZWwnXSkpO1xuICAgICAgICAgICAgaWYgKGJpbmRpbmdbJ21hdGNoZWRMYWJlbCddKVxuICAgICAgICAgICAgICAgIHBkLmlkVG9NYXRjaGVkTGFiZWxTZXQuZ29jKGlkKS5hZGQoRGF0YUZhY3RvcnkuaW5zdGFuY2Uubm9kZUZyb21CaW5kaW5nKGJpbmRpbmdbJ21hdGNoZWRMYWJlbCddKSk7XG4gICAgICAgICAgICBpZiAoYmluZGluZ1snZ3JvdXBJZCddKSB7XG4gICAgICAgICAgICAgICAgcGQuaWRUb0dyb3VwSWRTZXQuZ29jKGlkKS5hZGQoYmluZGluZ1snZ3JvdXBJZCddLnZhbHVlKTtcbiAgICAgICAgICAgICAgICBpZiAoYmluZGluZ1snZ3JvdXBMYWJlbCddKVxuICAgICAgICAgICAgICAgICAgICBwZC5pZFRvUHJlZkxhYmVsU2V0LmdvYyhiaW5kaW5nWydncm91cElkJ10udmFsdWUpLmFkZChEYXRhRmFjdG9yeS5pbnN0YW5jZS5ub2RlRnJvbUJpbmRpbmcoYmluZGluZ1snZ3JvdXBMYWJlbCddKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYmluZGluZ1snc2FtZUFzJ10pIHtcbiAgICAgICAgICAgICAgICBwZC5pZFRvSWRTZXQuZ2V0KGlkKS5hZGQoYmluZGluZ1snc2FtZUFzJ10udmFsdWUpO1xuICAgICAgICAgICAgICAgIHBkLmlkVG9JZFNldC5nb2MoYmluZGluZ1snc2FtZUFzJ10udmFsdWUpLmFkZChpZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gcmVzdWx0LmhlYWQudmFyczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgdiA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBpZiAodi5pbmRleE9mKCdpZnAnKSA9PT0gMCAmJiBiaW5kaW5nW3ZdKVxuICAgICAgICAgICAgICAgICAgICBwZC5pZnBWYXJQbHVzVmFsdWVUb0lkU2V0LmdvYyh2LnN1YnN0cmluZygzKSkuZ29jKGJpbmRpbmdbdl0udmFsdWUpLmFkZChpZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgU3BhcnFsQXV0b2NvbXBsZXRlV29ya2VyU2VydmljZS5idWlsZFJlc3VsdHMgPSBmdW5jdGlvbiAocGQsIGdyb3VwSWRUb0dyb3VwLCBkYXRhTW9kZWwsIHByZWZMYW5nKSB7XG4gICAgICAgIHZhciByZXMgPSBbXTtcbiAgICAgICAgcGQuaWRUb0lkU2V0LmVhY2goZnVuY3Rpb24gKGlkU2V0LCBpZCkge1xuICAgICAgICAgICAgdmFyIHNlZW4gPSBwZC5zZWVuLmhhcyhpZCkgfHwgaWRTZXQudmFsdWVzKCkuc29tZShmdW5jdGlvbiAoaWQyKSB7IHJldHVybiBwZC5zZWVuLmhhcyhpZDIpOyB9KTtcbiAgICAgICAgICAgIGlmICghc2Vlbikge1xuICAgICAgICAgICAgICAgIHBkLnNlZW4uYWRkcyhpZFNldCk7XG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdF8xID0gbmV3IFJlc3VsdChpZFNldC52YWx1ZXMoKS5tYXAoZnVuY3Rpb24gKG9pZCkgeyByZXR1cm4gRGF0YUZhY3RvcnkuaW5zdGFuY2UubmFtZWROb2RlKG9pZCk7IH0pLCBwZC5pZFRvRGF0YXNvdXJjZVNldC5nZXQoaWQpLnZhbHVlcygpLCBwZC5pZFRvTWF0Y2hlZExhYmVsU2V0LmdldChpZCkudmFsdWVzKClbMF0sIHBkLmlkVG9QcmVmTGFiZWxTZXQuaGFzKGlkKSA/IHBkLmlkVG9QcmVmTGFiZWxTZXQuZ2V0KGlkKS52YWx1ZXMoKVswXSA6IG51bGwpO1xuICAgICAgICAgICAgICAgIGlmIChwZC5pZFRvQWx0TGFiZWxTZXQuaGFzKGlkKSlcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0XzEuYWRkaXRpb25hbEluZm9ybWF0aW9uWydhbHRMYWJlbCddID0gcGQuaWRUb0FsdExhYmVsU2V0LmdldChpZCkudmFsdWVzKCk7XG4gICAgICAgICAgICAgICAgcmVzdWx0XzEuYWRkaXRpb25hbEluZm9ybWF0aW9uWyd0eXBlJ10gPSBwZC5pZFRvR3JvdXBJZFNldC5nZXQoaWQpLnZhbHVlcygpLm1hcChmdW5jdGlvbiAodikgeyByZXR1cm4gRGF0YUZhY3RvcnkuaW5zdGFuY2UubmFtZWROb2RlKHYpOyB9KTtcbiAgICAgICAgICAgICAgICByZXN1bHRfMS5hZGRpdGlvbmFsSW5mb3JtYXRpb25bJ3R5cGVMYWJlbCddID0gcGQuaWRUb0dyb3VwSWRTZXQuZ2V0KGlkKS52YWx1ZXMoKS5tYXAoZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBkLmlkVG9QcmVmTGFiZWxTZXQuaGFzKGlkKSA/IHBkLmlkVG9QcmVmTGFiZWxTZXQuZ2V0KGlkKS52YWx1ZXMoKVswXSA6IG51bGw7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcGQuaWRUb0dyb3VwSWRTZXQuZ2V0KGlkKS5lYWNoKGZ1bmN0aW9uIChnaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdyb3VwSWRUb0dyb3VwLmdvYyhnaWQsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBnbGFiZWwgPSBkYXRhTW9kZWwuY2xhc3NNYXAuaGFzKGdpZCkgPyBkYXRhTW9kZWwuY2xhc3NNYXAuZ2V0KGdpZCkuZ2V0TGFiZWwocHJlZkxhbmcpIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAocGQuaWRUb1ByZWZMYWJlbFNldC5oYXMoZ2lkKSA/IHBkLmlkVG9QcmVmTGFiZWxTZXQuZ2V0KGdpZCkudmFsdWVzKClbMF0udmFsdWUgOiBnaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdEdyb3VwID0gbmV3IFJlc3VsdEdyb3VwKGdsYWJlbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMucHVzaChyZXN1bHRHcm91cCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0R3JvdXA7XG4gICAgICAgICAgICAgICAgICAgIH0pLnJlc3VsdHMucHVzaChyZXN1bHRfMSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH07XG4gICAgU3BhcnFsQXV0b2NvbXBsZXRlV29ya2VyU2VydmljZS51bmlmeVJlc3VsdHMgPSBmdW5jdGlvbiAocGQpIHtcbiAgICAgICAgLy8gY3JlYXRlIHNhbWVBc2VzIGZvciBhbGwgb2JqZWN0cyBzaGFyaW5nIHNhbWUgaW52ZXJzZSBmdW5jdGlvbmFsIHByb3BlcnR5IHZhbHVlc1xuICAgICAgICBwZC5pZnBWYXJQbHVzVmFsdWVUb0lkU2V0LmVhY2goZnVuY3Rpb24gKHZhbHVlVG9JZFNldCkgeyByZXR1cm4gdmFsdWVUb0lkU2V0LmVhY2goZnVuY3Rpb24gKGlkcykgeyByZXR1cm4gaWRzLmVhY2goZnVuY3Rpb24gKGlkKSB7IHJldHVybiBwZC5pZFRvSWRTZXQuZ29jKGlkKS5hZGRzKGlkcyk7IH0pOyB9KTsgfSk7XG4gICAgICAgIC8vIGNvbnNvbGlkYXRlIGlkIHNldHMgYXMgd2VsbCBhcyBhbGwgaWQgLXJlbGF0ZWQgaW5mb3JtYXRpb25cbiAgICAgICAgcGQuaWRUb0lkU2V0LmVhY2goZnVuY3Rpb24gKGlkU2V0LCBpZCkgeyByZXR1cm4gaWRTZXQuZWFjaChmdW5jdGlvbiAob2lkKSB7XG4gICAgICAgICAgICB2YXIgb2lkU2V0ID0gcGQuaWRUb0lkU2V0LmdldChvaWQpO1xuICAgICAgICAgICAgaWYgKGlkU2V0ICE9PSBvaWRTZXQpIHtcbiAgICAgICAgICAgICAgICBwZC5pZFRvSWRTZXQuc2V0KG9pZCwgaWRTZXQpO1xuICAgICAgICAgICAgICAgIGlkU2V0LmFkZHMob2lkU2V0KTtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YXNvdXJjZVNldCA9IHBkLmlkVG9EYXRhc291cmNlU2V0LmdldChpZCk7XG4gICAgICAgICAgICAgICAgdmFyIG9EYXRhc291cmNlU2V0ID0gcGQuaWRUb0RhdGFzb3VyY2VTZXQuZ2V0KG9pZCk7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGFzb3VyY2VTZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9EYXRhc291cmNlU2V0KVxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YXNvdXJjZVNldC5hZGRzKG9EYXRhc291cmNlU2V0KTtcbiAgICAgICAgICAgICAgICAgICAgcGQuaWRUb0RhdGFzb3VyY2VTZXQuc2V0KG9pZCwgZGF0YXNvdXJjZVNldCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG9EYXRhc291cmNlU2V0KVxuICAgICAgICAgICAgICAgICAgICBwZC5pZFRvRGF0YXNvdXJjZVNldC5zZXQoaWQsIG9EYXRhc291cmNlU2V0KTtcbiAgICAgICAgICAgICAgICB2YXIgZ3JvdXBJZFNldCA9IHBkLmlkVG9Hcm91cElkU2V0LmdldChpZCk7XG4gICAgICAgICAgICAgICAgdmFyIG9Hcm91cElkU2V0ID0gcGQuaWRUb0dyb3VwSWRTZXQuZ2V0KG9pZCk7XG4gICAgICAgICAgICAgICAgaWYgKGdyb3VwSWRTZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9Hcm91cElkU2V0KVxuICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZFNldC5hZGRzKG9Hcm91cElkU2V0KTtcbiAgICAgICAgICAgICAgICAgICAgcGQuaWRUb0dyb3VwSWRTZXQuc2V0KG9pZCwgZ3JvdXBJZFNldCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG9Hcm91cElkU2V0KVxuICAgICAgICAgICAgICAgICAgICBwZC5pZFRvR3JvdXBJZFNldC5zZXQoaWQsIG9Hcm91cElkU2V0KTtcbiAgICAgICAgICAgICAgICB2YXIgbVNldCA9IHBkLmlkVG9QcmVmTGFiZWxTZXQuZ2V0KGlkKTtcbiAgICAgICAgICAgICAgICB2YXIgb1NldCA9IHBkLmlkVG9QcmVmTGFiZWxTZXQuZ2V0KG9pZCk7XG4gICAgICAgICAgICAgICAgaWYgKG1TZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9TZXQpXG4gICAgICAgICAgICAgICAgICAgICAgICBtU2V0LmFkZHMob1NldCk7XG4gICAgICAgICAgICAgICAgICAgIHBkLmlkVG9QcmVmTGFiZWxTZXQuc2V0KG9pZCwgbVNldCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG9TZXQpXG4gICAgICAgICAgICAgICAgICAgIHBkLmlkVG9QcmVmTGFiZWxTZXQuc2V0KGlkLCBvU2V0KTtcbiAgICAgICAgICAgICAgICBtU2V0ID0gcGQuaWRUb01hdGNoZWRMYWJlbFNldC5nZXQoaWQpO1xuICAgICAgICAgICAgICAgIG9TZXQgPSBwZC5pZFRvTWF0Y2hlZExhYmVsU2V0LmdldChvaWQpO1xuICAgICAgICAgICAgICAgIGlmIChtU2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvU2V0KVxuICAgICAgICAgICAgICAgICAgICAgICAgbVNldC5hZGRzKG9TZXQpO1xuICAgICAgICAgICAgICAgICAgICBwZC5pZFRvTWF0Y2hlZExhYmVsU2V0LnNldChvaWQsIG1TZXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChvU2V0KVxuICAgICAgICAgICAgICAgICAgICBwZC5pZFRvTWF0Y2hlZExhYmVsU2V0LnNldChpZCwgb1NldCk7XG4gICAgICAgICAgICAgICAgbVNldCA9IHBkLmlkVG9BbHRMYWJlbFNldC5nZXQoaWQpO1xuICAgICAgICAgICAgICAgIG9TZXQgPSBwZC5pZFRvQWx0TGFiZWxTZXQuZ2V0KG9pZCk7XG4gICAgICAgICAgICAgICAgaWYgKG1TZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9TZXQpXG4gICAgICAgICAgICAgICAgICAgICAgICBtU2V0LmFkZHMob1NldCk7XG4gICAgICAgICAgICAgICAgICAgIHBkLmlkVG9BbHRMYWJlbFNldC5zZXQob2lkLCBtU2V0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAob1NldClcbiAgICAgICAgICAgICAgICAgICAgcGQuaWRUb0FsdExhYmVsU2V0LnNldChpZCwgb1NldCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pOyB9KTtcbiAgICB9O1xuICAgIFNwYXJxbEF1dG9jb21wbGV0ZVdvcmtlclNlcnZpY2UucHJvdG90eXBlLmF1dG9jb21wbGV0ZSA9IGZ1bmN0aW9uIChxdWVyeSwgbGltaXQsIHF1ZXJ5UmVtb3RlLCBsaW1pdHMsIGNhbmNlbGxlcikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAocXVlcnlSZW1vdGUgPT09IHZvaWQgMCkgeyBxdWVyeVJlbW90ZSA9IGZhbHNlOyB9XG4gICAgICAgIGlmIChsaW1pdHMgPT09IHZvaWQgMCkgeyBsaW1pdHMgPSAnJzsgfVxuICAgICAgICB2YXIgZCA9IHRoaXMuJHEuZGVmZXIoKTtcbiAgICAgICAgdmFyIHJlc3VsdHMgPSBuZXcgQXV0b2NvbXBsZXRpb25SZXN1bHRzKCk7XG4gICAgICAgIHZhciBxdWVyeVRlbXBsYXRlID0gdGhpcy5zdGF0ZVdvcmtlclNlcnZpY2Uuc3RhdGUucHJvamVjdC5hdXRvY29tcGxldGlvblF1ZXJ5O1xuICAgICAgICBxdWVyeVRlbXBsYXRlID0gcXVlcnlUZW1wbGF0ZS5yZXBsYWNlKC88UVVFUlk+L2csIHMuU3BhcnFsU2VydmljZS5zdHJpbmdUb1NQQVJRTFN0cmluZyhxdWVyeSkpO1xuICAgICAgICBxdWVyeVRlbXBsYXRlID0gcXVlcnlUZW1wbGF0ZS5yZXBsYWNlKC88TElNSVQ+L2csICcnICsgbGltaXQpO1xuICAgICAgICBxdWVyeVRlbXBsYXRlID0gcXVlcnlUZW1wbGF0ZS5yZXBsYWNlKC8jIENPTlNUUkFJTlRTL2csIGxpbWl0cyk7XG4gICAgICAgIHF1ZXJ5VGVtcGxhdGUgPSBxdWVyeVRlbXBsYXRlLnJlcGxhY2UoLzxQUkVGTEFORz4vZywgdGhpcy5zdGF0ZVdvcmtlclNlcnZpY2Uuc3RhdGUubGFuZ3VhZ2UpO1xuICAgICAgICB2YXIgcGQgPSBuZXcgUHJvY2Vzc2luZ0RhdGEoKTtcbiAgICAgICAgdmFyIHByaW1hcnlQcm9jZXNzZWQgPSB0aGlzLmZpYnJhU3BhcnFsU2VydmljZS5xdWVyeSh0aGlzLnN0YXRlV29ya2VyU2VydmljZS5zdGF0ZS5wcm9qZWN0LmVuZHBvaW50LCBxdWVyeVRlbXBsYXRlLCB7IHRpbWVvdXQ6IGNhbmNlbGxlciB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgU3BhcnFsQXV0b2NvbXBsZXRlV29ya2VyU2VydmljZS5wcm9jZXNzQmluZGluZ3MocGQsIF90aGlzLnN0YXRlV29ya2VyU2VydmljZS5zdGF0ZS5wcm9qZWN0LmVuZHBvaW50LCByZXNwb25zZSk7XG4gICAgICAgICAgICAvLyBTcGFycWxBdXRvY29tcGxldGVXb3JrZXJTZXJ2aWNlLnVuaWZ5UmVzdWx0cyhwZClcbiAgICAgICAgICAgIHJlc3VsdHMubG9jYWxNYXRjaGluZ1Jlc3VsdHMgPSBTcGFycWxBdXRvY29tcGxldGVXb3JrZXJTZXJ2aWNlLmJ1aWxkUmVzdWx0cyhwZCwgbmV3IEVNYXAoKSwgX3RoaXMuc3RhdGVXb3JrZXJTZXJ2aWNlLnN0YXRlLnByb2plY3QuZGF0YU1vZGVsLCBfdGhpcy5zdGF0ZVdvcmtlclNlcnZpY2Uuc3RhdGUubGFuZ3VhZ2UpO1xuICAgICAgICAgICAgaWYgKCFxdWVyeVJlbW90ZSlcbiAgICAgICAgICAgICAgICBkLnJlc29sdmUocmVzdWx0cyk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgZC5ub3RpZnkoeyBlbmRwb2ludFR5cGU6ICdwcmltYXJ5JywgZW5kcG9pbnQ6IF90aGlzLnN0YXRlV29ya2VyU2VydmljZS5zdGF0ZS5wcm9qZWN0LmlkLCByZXN1bHRzOiByZXN1bHRzIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHF1ZXJ5UmVtb3RlKSB7XG4gICAgICAgICAgICAvLyBGSVhNRTogSXQgaXMgY3VycmVudGx5IHBvc3NpYmxlIHRoYXQgd2UgbWlzcyBlcXVpdmFsZW5jaWVzIGJlY2F1c2UgZXF1aXZhbGVudCBkYXRhIGZyb20gb25lIHNvdXJjZSBkb2Vzbid0IGZpdCB0aGUgbGltaXQgd2hpbGUgaXQgZG9lcyBmb3IgYW5vdGhlci4gQWRkIGZ1cnRoZXIgcXVlcnkgdG8gbWFrZSBzdXJlIGFsbCBlcXVpdmFsZW5jaWVzIGFyZSBmZXRjaGVkIChlaXRoZXIgaW4gYXV0b2NvbXBsZXRpb24gb3IgbGF0ZXN0IGluIGltcG9ydClcbiAgICAgICAgICAgIHZhciByZW1vdGVHcm91cElkVG9Hcm91cF8xID0gbmV3IEVNYXAoKTtcbiAgICAgICAgICAgIHRoaXMuJHEuYWxsKHRoaXMuc3RhdGVXb3JrZXJTZXJ2aWNlLnN0YXRlLnByb2plY3QucmVtb3RlRW5kcG9pbnRzKCkubWFwKGZ1bmN0aW9uIChlbmRwb2ludENvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgICAgICAgICBxdWVyeVRlbXBsYXRlID0gZW5kcG9pbnRDb25maWd1cmF0aW9uLmF1dG9jb21wbGV0aW9uUXVlcnk7XG4gICAgICAgICAgICAgICAgcXVlcnlUZW1wbGF0ZSA9IHF1ZXJ5VGVtcGxhdGUucmVwbGFjZSgvPFFVRVJZPi9nLCBzLlNwYXJxbFNlcnZpY2Uuc3RyaW5nVG9TUEFSUUxTdHJpbmcocXVlcnkpKTtcbiAgICAgICAgICAgICAgICBxdWVyeVRlbXBsYXRlID0gcXVlcnlUZW1wbGF0ZS5yZXBsYWNlKC88TElNSVQ+L2csICcnICsgbGltaXQpO1xuICAgICAgICAgICAgICAgIHF1ZXJ5VGVtcGxhdGUgPSBxdWVyeVRlbXBsYXRlLnJlcGxhY2UoLzxQUkVGTEFORz4vZywgX3RoaXMuc3RhdGVXb3JrZXJTZXJ2aWNlLnN0YXRlLmxhbmd1YWdlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuZmlicmFTcGFycWxTZXJ2aWNlLnF1ZXJ5KGVuZHBvaW50Q29uZmlndXJhdGlvbi5lbmRwb2ludCwgcXVlcnlUZW1wbGF0ZSwgeyB0aW1lb3V0OiBjYW5jZWxsZXIgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnJlc3VsdHMuYmluZGluZ3MubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmltYXJ5UHJvY2Vzc2VkLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNwYXJxbEF1dG9jb21wbGV0ZVdvcmtlclNlcnZpY2UucHJvY2Vzc0JpbmRpbmdzKHBkLCBlbmRwb2ludENvbmZpZ3VyYXRpb24uaWQsIHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTcGFycWxBdXRvY29tcGxldGVXb3JrZXJTZXJ2aWNlLnVuaWZ5UmVzdWx0cyhwZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0cy5yZW1vdGVSZXN1bHRzID0gcmVzdWx0cy5yZW1vdGVSZXN1bHRzLmNvbmNhdChTcGFycWxBdXRvY29tcGxldGVXb3JrZXJTZXJ2aWNlLmJ1aWxkUmVzdWx0cyhwZCwgcmVtb3RlR3JvdXBJZFRvR3JvdXBfMSwgX3RoaXMuc3RhdGVXb3JrZXJTZXJ2aWNlLnN0YXRlLnByb2plY3QuZGF0YU1vZGVsLCBfdGhpcy5zdGF0ZVdvcmtlclNlcnZpY2Uuc3RhdGUubGFuZ3VhZ2UpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkLm5vdGlmeSh7IGVuZHBvaW50VHlwZTogJ3JlbW90ZScsIGVuZHBvaW50OiBlbmRwb2ludENvbmZpZ3VyYXRpb24uaWQsIHJlc3VsdHM6IHJlc3VsdHMgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikgeyByZXR1cm4gZC5ub3RpZnkoeyBlbmRwb2ludFR5cGU6ICdyZW1vdGUnLCBlbmRwb2ludDogZW5kcG9pbnRDb25maWd1cmF0aW9uLmlkLCBlcnJvcjogV29ya2VyV29ya2VyU2VydmljZS5zdHJpcEZ1bmN0aW9ucyhlcnJvcikgfSk7IH0pO1xuICAgICAgICAgICAgfSkpLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gZC5yZXNvbHZlKHJlc3VsdHMpOyB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZC5wcm9taXNlO1xuICAgIH07XG4gICAgcmV0dXJuIFNwYXJxbEF1dG9jb21wbGV0ZVdvcmtlclNlcnZpY2U7XG59KCkpO1xuZXhwb3J0IHsgU3BhcnFsQXV0b2NvbXBsZXRlV29ya2VyU2VydmljZSB9O1xuYW5ndWxhci5tb2R1bGUoJ2ZpYnJhLnNlcnZpY2VzLnNwYXJxbC1hdXRvY29tcGxldGUtc2VydmljZScsIFtdKVxuICAgIC5jb25maWcoZnVuY3Rpb24gKCRwcm92aWRlKSB7XG4gICAgJHByb3ZpZGUuc2VydmljZSgnc3BhcnFsQXV0b2NvbXBsZXRlU2VydmljZScsIFNwYXJxbEF1dG9jb21wbGV0ZVNlcnZpY2UpO1xufSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9hcHAvc2VydmljZXMvc3BhcnFsLWF1dG9jb21wbGV0ZS1zZXJ2aWNlLnRzIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9");

/***/ }),
/* 10 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__components_tree_tree_component__ = __webpack_require__(23);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return SparqlTreeService; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return SparqlTreeWorkerService; });\n\n\n\n\nvar SparqlTreeService = function () {\n    function SparqlTreeService(workerService) {\n        this.workerService = workerService;\n    }\n    SparqlTreeService.prototype.getTree = function (endpoint, query, canceller) {\n        return this.workerService.call('sparqlTreeWorkerService', 'getTree', [endpoint, query], canceller);\n    };\n    return SparqlTreeService;\n}();\n\nSparqlTreeService.getClassTreeQuery = \"PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\\nPREFIX sf: <http://ldf.fi/functions#>\\nSELECT ?subClass ?superClass ?class ?classLabel ?instances {\\n# STARTGRAPH\\n  {\\n    ?groupId rdfs:subClassOf ?class .\\n    FILTER EXISTS {\\n      ?id a ?groupId .\\n      # CONSTRAINTS\\n    }\\n    BIND(?groupId AS ?subClass)\\n  } UNION {\\n    {\\n      SELECT ?groupId (COUNT(*) AS ?instances) {\\n        ?id a ?groupId .\\n      }\\n      GROUP BY ?groupId\\n    }\\n    # CONSTRAINTS\\n    BIND (?groupId AS ?class)\\n  }\\n  OPTIONAL {\\n    ?class sf:preferredLanguageLiteral (skos:prefLabel rdfs:label skos:altLabel 'en' '' ?classLabelP) .\\n  }\\n  FILTER(ISIRI(?class))\\n  BIND(COALESCE(?classLabelP,REPLACE(REPLACE(REPLACE(REPLACE(STR(?class),\\\".*/\\\",\\\"\\\"),\\\".*#\\\",\\\"\\\"),\\\"_\\\",\\\" \\\"),\\\"([A-Z\\u00C5\\u00C4\\u00D6])\\\",\\\" $1\\\")) AS ?classLabel)\\n# ENDGRAPH\\n}\\n\";\nvar SparqlTreeWorkerService = function () {\n    function SparqlTreeWorkerService(fibraSparqlService) {\n        this.fibraSparqlService = fibraSparqlService;\n    }\n    SparqlTreeWorkerService.prototype.getTree = function (endpoint, query, canceller) {\n        return this.fibraSparqlService.query(endpoint, query, { timeout: canceller }).then(function (response) {\n            var parents = {};\n            var classes = {};\n            response.results.bindings.forEach(function (binding) {\n                if (binding['classLabel']) classes[binding['class'].value] = new __WEBPACK_IMPORTED_MODULE_1__components_tree_tree_component__[\"a\" /* TreeNode */](binding['class'].value, binding['classLabel'].value);\n                if (binding['instances']) classes[binding['class'].value].instances = parseInt(binding['instances'].value, 10);\n                if (binding['subClass']) {\n                    var subClass = binding['subClass'].value;\n                    if (!parents[subClass]) parents[subClass] = {};\n                    parents[subClass][binding['class'].value] = true;\n                }\n                if (binding['superClass']) {\n                    var subClass = binding['class'].value;\n                    if (!parents[subClass]) parents[subClass] = {};\n                    parents[subClass][binding['superClass'].value] = true;\n                }\n            });\n            var ret = [];\n            for (var id in classes) {\n                if (!parents[id]) ret.push(classes[id]);else for (var pid in parents[id]) classes[pid].children.push(classes[id]);\n            }\n            return ret;\n        });\n    };\n    return SparqlTreeWorkerService;\n}();\n\n__WEBPACK_IMPORTED_MODULE_0_angular__[\"module\"]('fibra.services.sparql-tree-service', []).config(function ($provide) {\n    $provide.service('sparqlTreeService', SparqlTreeService);\n});//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcHAvc2VydmljZXMvc3BhcnFsLXRyZWUtc2VydmljZS50cz9lZGU4Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcbmltcG9ydCAqIGFzIGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG5pbXBvcnQgeyBUcmVlTm9kZSB9IGZyb20gJy4uL2NvbXBvbmVudHMvdHJlZS90cmVlLWNvbXBvbmVudCc7XG52YXIgU3BhcnFsVHJlZVNlcnZpY2UgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFNwYXJxbFRyZWVTZXJ2aWNlKHdvcmtlclNlcnZpY2UpIHtcbiAgICAgICAgdGhpcy53b3JrZXJTZXJ2aWNlID0gd29ya2VyU2VydmljZTtcbiAgICB9XG4gICAgU3BhcnFsVHJlZVNlcnZpY2UucHJvdG90eXBlLmdldFRyZWUgPSBmdW5jdGlvbiAoZW5kcG9pbnQsIHF1ZXJ5LCBjYW5jZWxsZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud29ya2VyU2VydmljZS5jYWxsKCdzcGFycWxUcmVlV29ya2VyU2VydmljZScsICdnZXRUcmVlJywgW2VuZHBvaW50LCBxdWVyeV0sIGNhbmNlbGxlcik7XG4gICAgfTtcbiAgICByZXR1cm4gU3BhcnFsVHJlZVNlcnZpY2U7XG59KCkpO1xuZXhwb3J0IHsgU3BhcnFsVHJlZVNlcnZpY2UgfTtcblNwYXJxbFRyZWVTZXJ2aWNlLmdldENsYXNzVHJlZVF1ZXJ5ID0gXCJQUkVGSVggc2tvczogPGh0dHA6Ly93d3cudzMub3JnLzIwMDQvMDIvc2tvcy9jb3JlIz5cXG5QUkVGSVggcmRmczogPGh0dHA6Ly93d3cudzMub3JnLzIwMDAvMDEvcmRmLXNjaGVtYSM+XFxuUFJFRklYIHNmOiA8aHR0cDovL2xkZi5maS9mdW5jdGlvbnMjPlxcblNFTEVDVCA/c3ViQ2xhc3MgP3N1cGVyQ2xhc3MgP2NsYXNzID9jbGFzc0xhYmVsID9pbnN0YW5jZXMge1xcbiMgU1RBUlRHUkFQSFxcbiAge1xcbiAgICA/Z3JvdXBJZCByZGZzOnN1YkNsYXNzT2YgP2NsYXNzIC5cXG4gICAgRklMVEVSIEVYSVNUUyB7XFxuICAgICAgP2lkIGEgP2dyb3VwSWQgLlxcbiAgICAgICMgQ09OU1RSQUlOVFNcXG4gICAgfVxcbiAgICBCSU5EKD9ncm91cElkIEFTID9zdWJDbGFzcylcXG4gIH0gVU5JT04ge1xcbiAgICB7XFxuICAgICAgU0VMRUNUID9ncm91cElkIChDT1VOVCgqKSBBUyA/aW5zdGFuY2VzKSB7XFxuICAgICAgICA/aWQgYSA/Z3JvdXBJZCAuXFxuICAgICAgfVxcbiAgICAgIEdST1VQIEJZID9ncm91cElkXFxuICAgIH1cXG4gICAgIyBDT05TVFJBSU5UU1xcbiAgICBCSU5EICg/Z3JvdXBJZCBBUyA/Y2xhc3MpXFxuICB9XFxuICBPUFRJT05BTCB7XFxuICAgID9jbGFzcyBzZjpwcmVmZXJyZWRMYW5ndWFnZUxpdGVyYWwgKHNrb3M6cHJlZkxhYmVsIHJkZnM6bGFiZWwgc2tvczphbHRMYWJlbCAnZW4nICcnID9jbGFzc0xhYmVsUCkgLlxcbiAgfVxcbiAgRklMVEVSKElTSVJJKD9jbGFzcykpXFxuICBCSU5EKENPQUxFU0NFKD9jbGFzc0xhYmVsUCxSRVBMQUNFKFJFUExBQ0UoUkVQTEFDRShSRVBMQUNFKFNUUig/Y2xhc3MpLFxcXCIuKi9cXFwiLFxcXCJcXFwiKSxcXFwiLiojXFxcIixcXFwiXFxcIiksXFxcIl9cXFwiLFxcXCIgXFxcIiksXFxcIihbQS1aXFx1MDBDNVxcdTAwQzRcXHUwMEQ2XSlcXFwiLFxcXCIgJDFcXFwiKSkgQVMgP2NsYXNzTGFiZWwpXFxuIyBFTkRHUkFQSFxcbn1cXG5cIjtcbnZhciBTcGFycWxUcmVlV29ya2VyU2VydmljZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU3BhcnFsVHJlZVdvcmtlclNlcnZpY2UoZmlicmFTcGFycWxTZXJ2aWNlKSB7XG4gICAgICAgIHRoaXMuZmlicmFTcGFycWxTZXJ2aWNlID0gZmlicmFTcGFycWxTZXJ2aWNlO1xuICAgIH1cbiAgICBTcGFycWxUcmVlV29ya2VyU2VydmljZS5wcm90b3R5cGUuZ2V0VHJlZSA9IGZ1bmN0aW9uIChlbmRwb2ludCwgcXVlcnksIGNhbmNlbGxlcikge1xuICAgICAgICByZXR1cm4gdGhpcy5maWJyYVNwYXJxbFNlcnZpY2UucXVlcnkoZW5kcG9pbnQsIHF1ZXJ5LCB7IHRpbWVvdXQ6IGNhbmNlbGxlciB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgdmFyIHBhcmVudHMgPSB7fTtcbiAgICAgICAgICAgIHZhciBjbGFzc2VzID0ge307XG4gICAgICAgICAgICByZXNwb25zZS5yZXN1bHRzLmJpbmRpbmdzLmZvckVhY2goZnVuY3Rpb24gKGJpbmRpbmcpIHtcbiAgICAgICAgICAgICAgICBpZiAoYmluZGluZ1snY2xhc3NMYWJlbCddKVxuICAgICAgICAgICAgICAgICAgICBjbGFzc2VzW2JpbmRpbmdbJ2NsYXNzJ10udmFsdWVdID0gbmV3IFRyZWVOb2RlKGJpbmRpbmdbJ2NsYXNzJ10udmFsdWUsIGJpbmRpbmdbJ2NsYXNzTGFiZWwnXS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKGJpbmRpbmdbJ2luc3RhbmNlcyddKVxuICAgICAgICAgICAgICAgICAgICBjbGFzc2VzW2JpbmRpbmdbJ2NsYXNzJ10udmFsdWVdLmluc3RhbmNlcyA9IHBhcnNlSW50KGJpbmRpbmdbJ2luc3RhbmNlcyddLnZhbHVlLCAxMCk7XG4gICAgICAgICAgICAgICAgaWYgKGJpbmRpbmdbJ3N1YkNsYXNzJ10pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN1YkNsYXNzID0gYmluZGluZ1snc3ViQ2xhc3MnXS52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFwYXJlbnRzW3N1YkNsYXNzXSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudHNbc3ViQ2xhc3NdID0ge307XG4gICAgICAgICAgICAgICAgICAgIHBhcmVudHNbc3ViQ2xhc3NdW2JpbmRpbmdbJ2NsYXNzJ10udmFsdWVdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGJpbmRpbmdbJ3N1cGVyQ2xhc3MnXSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3ViQ2xhc3MgPSBiaW5kaW5nWydjbGFzcyddLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXBhcmVudHNbc3ViQ2xhc3NdKVxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50c1tzdWJDbGFzc10gPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50c1tzdWJDbGFzc11bYmluZGluZ1snc3VwZXJDbGFzcyddLnZhbHVlXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB2YXIgcmV0ID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpZCBpbiBjbGFzc2VzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFwYXJlbnRzW2lkXSlcbiAgICAgICAgICAgICAgICAgICAgcmV0LnB1c2goY2xhc3Nlc1tpZF0pO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgcGlkIGluIHBhcmVudHNbaWRdKVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3Nlc1twaWRdLmNoaWxkcmVuLnB1c2goY2xhc3Nlc1tpZF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gU3BhcnFsVHJlZVdvcmtlclNlcnZpY2U7XG59KCkpO1xuZXhwb3J0IHsgU3BhcnFsVHJlZVdvcmtlclNlcnZpY2UgfTtcbmFuZ3VsYXIubW9kdWxlKCdmaWJyYS5zZXJ2aWNlcy5zcGFycWwtdHJlZS1zZXJ2aWNlJywgW10pXG4gICAgLmNvbmZpZyhmdW5jdGlvbiAoJHByb3ZpZGUpIHtcbiAgICAkcHJvdmlkZS5zZXJ2aWNlKCdzcGFycWxUcmVlU2VydmljZScsIFNwYXJxbFRyZWVTZXJ2aWNlKTtcbn0pO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vYXBwL3NlcnZpY2VzL3NwYXJxbC10cmVlLXNlcnZpY2UudHMiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9");

/***/ }),
/* 11 */,
/* 12 */,
/* 13 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__models_richnode__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__components_collection_utils__ = __webpack_require__(6);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return Class; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return Property; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return DataModel; });\n\n\nvar __extends = this && this.__extends || function () {\n    var extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (d, b) {\n        d.__proto__ = b;\n    } || function (d, b) {\n        for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() {\n            this.constructor = d;\n        }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n}();\n\n\nvar AsNodes = function () {\n    function AsNodes(id) {\n        this.id = id;\n        this.labels = [];\n        this.descriptions = [];\n        this.types = [];\n    }\n    AsNodes.prototype.getLabel = function (prefLang) {\n        return this.asNode(prefLang).label;\n    };\n    AsNodes.prototype.asNode = function (prefLang) {\n        var ret = this.asNodes[prefLang];\n        if (ret) return ret;\n        ret = this.asNodes[''];\n        if (ret) return ret;\n        for (var lang in this.asNodes) return this.asNodes[lang];\n        return undefined;\n    };\n    AsNodes.prototype.buildAsNodes = function () {\n        var _this = this;\n        if (!this.asNodes) {\n            this.asNodes = {};\n            var langs_1 = new __WEBPACK_IMPORTED_MODULE_1__components_collection_utils__[\"b\" /* StringSet */]();\n            var llMap_1 = new __WEBPACK_IMPORTED_MODULE_1__components_collection_utils__[\"d\" /* Map */]();\n            var ldMap_1 = new __WEBPACK_IMPORTED_MODULE_1__components_collection_utils__[\"d\" /* Map */]();\n            var tlMap_1 = new __WEBPACK_IMPORTED_MODULE_1__components_collection_utils__[\"d\" /* Map */]();\n            this.labels.forEach(function (l) {\n                llMap_1.set(l.language, l.value);\n                if (!llMap_1.has('')) llMap_1.set('', l.value);\n                langs_1.add(l.language);\n            });\n            this.descriptions.forEach(function (d) {\n                ldMap_1.set(d.language, d.value);\n                if (!ldMap_1.has('')) ldMap_1.set('', d.value);\n                langs_1.add(d.language);\n            });\n            this.types.forEach(function (t) {\n                t.buildAsNodes();\n                var tlMap2 = new __WEBPACK_IMPORTED_MODULE_1__components_collection_utils__[\"d\" /* Map */]();\n                tlMap_1.set(t.id.value, tlMap2);\n                t.labels.forEach(function (tl) {\n                    tlMap2.set(tl.language, tl.value);\n                    if (!tlMap2.has('')) tlMap2.set('', tl.value);\n                    langs_1.add(tl.language);\n                });\n            });\n            langs_1.each(function (l) {\n                var rn = new __WEBPACK_IMPORTED_MODULE_0__models_richnode__[\"c\" /* FullRichNodeFromNode */](_this.id);\n                rn.label = llMap_1.get(l);\n                if (!rn.label) rn.label = llMap_1.get('');\n                rn.description = ldMap_1.get(l);\n                if (!rn.description) rn.description = ldMap_1.get('');\n                rn.types = _this.types.map(function (tc) {\n                    return tc.id === _this.id ? rn : tc.asNode(l);\n                });\n                _this.asNodes[l] = rn;\n            });\n        }\n    };\n    return AsNodes;\n}();\nvar Class = function (_super) {\n    __extends(Class, _super);\n    function Class(id) {\n        var _this = _super.call(this, id) || this;\n        _this.superClasses = [];\n        _this.subClasses = [];\n        _this.properties = [];\n        _this.inverseProperties = [];\n        return _this;\n    }\n    return Class;\n}(AsNodes);\n\nvar Property = function (_super) {\n    __extends(Property, _super);\n    function Property(id) {\n        var _this = _super.call(this, id) || this;\n        _this.domains = [];\n        _this.ranges = [];\n        _this.superProperties = [];\n        _this.subProperties = [];\n        return _this;\n    }\n    return Property;\n}(AsNodes);\n\nvar DataModel = function () {\n    function DataModel() {\n        this.classMap = new __WEBPACK_IMPORTED_MODULE_1__components_collection_utils__[\"d\" /* Map */]();\n        this.propertyMap = new __WEBPACK_IMPORTED_MODULE_1__components_collection_utils__[\"d\" /* Map */]();\n        this.rootClasses = [];\n        this.rootProperties = [];\n    }\n    DataModel.getFilter = function (types) {\n        if (types.length === 0) return '';else return 'FILTER (?groupId IN (' + types.map(function (id) {\n            return id.toCanonical();\n        }).join(', ') + '))';\n    };\n    return DataModel;\n}();\n\nDataModel.propertyQuery = \"PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\\nPREFIX sf: <http://ldf.fi/functions#>\\nPREFIX dcterms: <http://purl.org/dc/terms/>\\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\\nSELECT ?id ?domains ?ranges ?labels ?descriptions ?types ?inverseProperty ?superProperties ?subProperties {\\n# STARTGRAPH\\n  {\\n    ?types rdfs:subClassOf* rdf:Property .\\n    ?id a ?types .\\n  }\\n    {\\n    ?id skos:prefLabel|rdfs:label ?labels .\\n  } UNION {\\n    ?id rdfs:comment|dcterms:description ?descriptions .\\n  } UNION {\\n    ?id owl:inverseOf ?inverseProperty .\\n  } UNION {\\n    ?id rdfs:domain ?domains .\\n  } UNION {\\n    ?id rdfs:range ?ranges .\\n  } UNION {\\n    ?id rdfs:subPropertyOf ?superProperties .\\n  } UNION {\\n    ?subProperties rdfs:subPropertyOf ?id .\\n  }\\n# ENDGRAPH\\n}\";\nDataModel.classQuery = \"PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\\nPREFIX sf: <http://ldf.fi/functions#>\\nPREFIX dcterms: <http://purl.org/dc/terms/>\\nSELECT ?id ?types ?labels ?descriptions ?superClasses ?subClasses {\\n# STARTGRAPH\\n  {\\n    ?types rdfs:subClassOf* rdfs:Class .\\n    ?id a ?types .\\n  }\\n  {\\n    ?id skos:prefLabel|rdfs:label ?labels .\\n  } UNION {\\n    ?id rdfs:comment|dcterms:description ?descriptions .\\n  } UNION {\\n    ?id rdfs:subClassOf ?superClasses .\\n  } UNION {\\n    ?subClasses rdfs:subClassOf ?id .\\n  }\\n# ENDGRAPH\\n}\";//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcHAvc2VydmljZXMvcHJvamVjdC1zZXJ2aWNlL2RhdGEtbW9kZWwudHM/MzI2NCJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmltcG9ydCB7IEZ1bGxSaWNoTm9kZUZyb21Ob2RlIH0gZnJvbSAnLi4vLi4vbW9kZWxzL3JpY2hub2RlJztcbmltcG9ydCB7IFN0cmluZ1NldCwgTWFwIH0gZnJvbSAnLi4vLi4vY29tcG9uZW50cy9jb2xsZWN0aW9uLXV0aWxzJztcbnZhciBBc05vZGVzID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBBc05vZGVzKGlkKSB7XG4gICAgICAgIHRoaXMuaWQgPSBpZDtcbiAgICAgICAgdGhpcy5sYWJlbHMgPSBbXTtcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbnMgPSBbXTtcbiAgICAgICAgdGhpcy50eXBlcyA9IFtdO1xuICAgIH1cbiAgICBBc05vZGVzLnByb3RvdHlwZS5nZXRMYWJlbCA9IGZ1bmN0aW9uIChwcmVmTGFuZykge1xuICAgICAgICByZXR1cm4gdGhpcy5hc05vZGUocHJlZkxhbmcpLmxhYmVsO1xuICAgIH07XG4gICAgQXNOb2Rlcy5wcm90b3R5cGUuYXNOb2RlID0gZnVuY3Rpb24gKHByZWZMYW5nKSB7XG4gICAgICAgIHZhciByZXQgPSB0aGlzLmFzTm9kZXNbcHJlZkxhbmddO1xuICAgICAgICBpZiAocmV0KVxuICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgcmV0ID0gdGhpcy5hc05vZGVzWycnXTtcbiAgICAgICAgaWYgKHJldClcbiAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgIGZvciAodmFyIGxhbmcgaW4gdGhpcy5hc05vZGVzKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXNOb2Rlc1tsYW5nXTtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIEFzTm9kZXMucHJvdG90eXBlLmJ1aWxkQXNOb2RlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKCF0aGlzLmFzTm9kZXMpIHtcbiAgICAgICAgICAgIHRoaXMuYXNOb2RlcyA9IHt9O1xuICAgICAgICAgICAgdmFyIGxhbmdzXzEgPSBuZXcgU3RyaW5nU2V0KCk7XG4gICAgICAgICAgICB2YXIgbGxNYXBfMSA9IG5ldyBNYXAoKTtcbiAgICAgICAgICAgIHZhciBsZE1hcF8xID0gbmV3IE1hcCgpO1xuICAgICAgICAgICAgdmFyIHRsTWFwXzEgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICB0aGlzLmxhYmVscy5mb3JFYWNoKGZ1bmN0aW9uIChsKSB7XG4gICAgICAgICAgICAgICAgbGxNYXBfMS5zZXQobC5sYW5ndWFnZSwgbC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKCFsbE1hcF8xLmhhcygnJykpXG4gICAgICAgICAgICAgICAgICAgIGxsTWFwXzEuc2V0KCcnLCBsLnZhbHVlKTtcbiAgICAgICAgICAgICAgICBsYW5nc18xLmFkZChsLmxhbmd1YWdlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5kZXNjcmlwdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICAgIGxkTWFwXzEuc2V0KGQubGFuZ3VhZ2UsIGQudmFsdWUpO1xuICAgICAgICAgICAgICAgIGlmICghbGRNYXBfMS5oYXMoJycpKVxuICAgICAgICAgICAgICAgICAgICBsZE1hcF8xLnNldCgnJywgZC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgbGFuZ3NfMS5hZGQoZC5sYW5ndWFnZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMudHlwZXMuZm9yRWFjaChmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgICAgIHQuYnVpbGRBc05vZGVzKCk7XG4gICAgICAgICAgICAgICAgdmFyIHRsTWFwMiA9IG5ldyBNYXAoKTtcbiAgICAgICAgICAgICAgICB0bE1hcF8xLnNldCh0LmlkLnZhbHVlLCB0bE1hcDIpO1xuICAgICAgICAgICAgICAgIHQubGFiZWxzLmZvckVhY2goZnVuY3Rpb24gKHRsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRsTWFwMi5zZXQodGwubGFuZ3VhZ2UsIHRsLnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0bE1hcDIuaGFzKCcnKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHRsTWFwMi5zZXQoJycsIHRsLnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgbGFuZ3NfMS5hZGQodGwubGFuZ3VhZ2UpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBsYW5nc18xLmVhY2goZnVuY3Rpb24gKGwpIHtcbiAgICAgICAgICAgICAgICB2YXIgcm4gPSBuZXcgRnVsbFJpY2hOb2RlRnJvbU5vZGUoX3RoaXMuaWQpO1xuICAgICAgICAgICAgICAgIHJuLmxhYmVsID0gbGxNYXBfMS5nZXQobCk7XG4gICAgICAgICAgICAgICAgaWYgKCFybi5sYWJlbClcbiAgICAgICAgICAgICAgICAgICAgcm4ubGFiZWwgPSBsbE1hcF8xLmdldCgnJyk7XG4gICAgICAgICAgICAgICAgcm4uZGVzY3JpcHRpb24gPSBsZE1hcF8xLmdldChsKTtcbiAgICAgICAgICAgICAgICBpZiAoIXJuLmRlc2NyaXB0aW9uKVxuICAgICAgICAgICAgICAgICAgICBybi5kZXNjcmlwdGlvbiA9IGxkTWFwXzEuZ2V0KCcnKTtcbiAgICAgICAgICAgICAgICBybi50eXBlcyA9IF90aGlzLnR5cGVzLm1hcChmdW5jdGlvbiAodGMpIHsgcmV0dXJuIHRjLmlkID09PSBfdGhpcy5pZCA/IHJuIDogdGMuYXNOb2RlKGwpOyB9KTtcbiAgICAgICAgICAgICAgICBfdGhpcy5hc05vZGVzW2xdID0gcm47XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIEFzTm9kZXM7XG59KCkpO1xudmFyIENsYXNzID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQ2xhc3MsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQ2xhc3MoaWQpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgaWQpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnN1cGVyQ2xhc3NlcyA9IFtdO1xuICAgICAgICBfdGhpcy5zdWJDbGFzc2VzID0gW107XG4gICAgICAgIF90aGlzLnByb3BlcnRpZXMgPSBbXTtcbiAgICAgICAgX3RoaXMuaW52ZXJzZVByb3BlcnRpZXMgPSBbXTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICByZXR1cm4gQ2xhc3M7XG59KEFzTm9kZXMpKTtcbmV4cG9ydCB7IENsYXNzIH07XG52YXIgUHJvcGVydHkgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhQcm9wZXJ0eSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBQcm9wZXJ0eShpZCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBpZCkgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuZG9tYWlucyA9IFtdO1xuICAgICAgICBfdGhpcy5yYW5nZXMgPSBbXTtcbiAgICAgICAgX3RoaXMuc3VwZXJQcm9wZXJ0aWVzID0gW107XG4gICAgICAgIF90aGlzLnN1YlByb3BlcnRpZXMgPSBbXTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICByZXR1cm4gUHJvcGVydHk7XG59KEFzTm9kZXMpKTtcbmV4cG9ydCB7IFByb3BlcnR5IH07XG52YXIgRGF0YU1vZGVsID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBEYXRhTW9kZWwoKSB7XG4gICAgICAgIHRoaXMuY2xhc3NNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMucHJvcGVydHlNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMucm9vdENsYXNzZXMgPSBbXTtcbiAgICAgICAgdGhpcy5yb290UHJvcGVydGllcyA9IFtdO1xuICAgIH1cbiAgICBEYXRhTW9kZWwuZ2V0RmlsdGVyID0gZnVuY3Rpb24gKHR5cGVzKSB7XG4gICAgICAgIGlmICh0eXBlcy5sZW5ndGggPT09IDApXG4gICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHJldHVybiAnRklMVEVSICg/Z3JvdXBJZCBJTiAoJyArIHR5cGVzLm1hcChmdW5jdGlvbiAoaWQpIHsgcmV0dXJuIGlkLnRvQ2Fub25pY2FsKCk7IH0pLmpvaW4oJywgJykgKyAnKSknO1xuICAgIH07XG4gICAgcmV0dXJuIERhdGFNb2RlbDtcbn0oKSk7XG5leHBvcnQgeyBEYXRhTW9kZWwgfTtcbkRhdGFNb2RlbC5wcm9wZXJ0eVF1ZXJ5ID0gXCJQUkVGSVggcmRmczogPGh0dHA6Ly93d3cudzMub3JnLzIwMDAvMDEvcmRmLXNjaGVtYSM+XFxuUFJFRklYIHNrb3M6IDxodHRwOi8vd3d3LnczLm9yZy8yMDA0LzAyL3Nrb3MvY29yZSM+XFxuUFJFRklYIG93bDogPGh0dHA6Ly93d3cudzMub3JnLzIwMDIvMDcvb3dsIz5cXG5QUkVGSVggc2Y6IDxodHRwOi8vbGRmLmZpL2Z1bmN0aW9ucyM+XFxuUFJFRklYIGRjdGVybXM6IDxodHRwOi8vcHVybC5vcmcvZGMvdGVybXMvPlxcblBSRUZJWCByZGY6IDxodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjPlxcblNFTEVDVCA/aWQgP2RvbWFpbnMgP3JhbmdlcyA/bGFiZWxzID9kZXNjcmlwdGlvbnMgP3R5cGVzID9pbnZlcnNlUHJvcGVydHkgP3N1cGVyUHJvcGVydGllcyA/c3ViUHJvcGVydGllcyB7XFxuIyBTVEFSVEdSQVBIXFxuICB7XFxuICAgID90eXBlcyByZGZzOnN1YkNsYXNzT2YqIHJkZjpQcm9wZXJ0eSAuXFxuICAgID9pZCBhID90eXBlcyAuXFxuICB9XFxuICAgIHtcXG4gICAgP2lkIHNrb3M6cHJlZkxhYmVsfHJkZnM6bGFiZWwgP2xhYmVscyAuXFxuICB9IFVOSU9OIHtcXG4gICAgP2lkIHJkZnM6Y29tbWVudHxkY3Rlcm1zOmRlc2NyaXB0aW9uID9kZXNjcmlwdGlvbnMgLlxcbiAgfSBVTklPTiB7XFxuICAgID9pZCBvd2w6aW52ZXJzZU9mID9pbnZlcnNlUHJvcGVydHkgLlxcbiAgfSBVTklPTiB7XFxuICAgID9pZCByZGZzOmRvbWFpbiA/ZG9tYWlucyAuXFxuICB9IFVOSU9OIHtcXG4gICAgP2lkIHJkZnM6cmFuZ2UgP3JhbmdlcyAuXFxuICB9IFVOSU9OIHtcXG4gICAgP2lkIHJkZnM6c3ViUHJvcGVydHlPZiA/c3VwZXJQcm9wZXJ0aWVzIC5cXG4gIH0gVU5JT04ge1xcbiAgICA/c3ViUHJvcGVydGllcyByZGZzOnN1YlByb3BlcnR5T2YgP2lkIC5cXG4gIH1cXG4jIEVOREdSQVBIXFxufVwiO1xuRGF0YU1vZGVsLmNsYXNzUXVlcnkgPSBcIlBSRUZJWCByZGZzOiA8aHR0cDovL3d3dy53My5vcmcvMjAwMC8wMS9yZGYtc2NoZW1hIz5cXG5QUkVGSVggc2tvczogPGh0dHA6Ly93d3cudzMub3JnLzIwMDQvMDIvc2tvcy9jb3JlIz5cXG5QUkVGSVggb3dsOiA8aHR0cDovL3d3dy53My5vcmcvMjAwMi8wNy9vd2wjPlxcblBSRUZJWCBzZjogPGh0dHA6Ly9sZGYuZmkvZnVuY3Rpb25zIz5cXG5QUkVGSVggZGN0ZXJtczogPGh0dHA6Ly9wdXJsLm9yZy9kYy90ZXJtcy8+XFxuU0VMRUNUID9pZCA/dHlwZXMgP2xhYmVscyA/ZGVzY3JpcHRpb25zID9zdXBlckNsYXNzZXMgP3N1YkNsYXNzZXMge1xcbiMgU1RBUlRHUkFQSFxcbiAge1xcbiAgICA/dHlwZXMgcmRmczpzdWJDbGFzc09mKiByZGZzOkNsYXNzIC5cXG4gICAgP2lkIGEgP3R5cGVzIC5cXG4gIH1cXG4gIHtcXG4gICAgP2lkIHNrb3M6cHJlZkxhYmVsfHJkZnM6bGFiZWwgP2xhYmVscyAuXFxuICB9IFVOSU9OIHtcXG4gICAgP2lkIHJkZnM6Y29tbWVudHxkY3Rlcm1zOmRlc2NyaXB0aW9uID9kZXNjcmlwdGlvbnMgLlxcbiAgfSBVTklPTiB7XFxuICAgID9pZCByZGZzOnN1YkNsYXNzT2YgP3N1cGVyQ2xhc3NlcyAuXFxuICB9IFVOSU9OIHtcXG4gICAgP3N1YkNsYXNzZXMgcmRmczpzdWJDbGFzc09mID9pZCAuXFxuICB9XFxuIyBFTkRHUkFQSFxcbn1cIjtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2FwcC9zZXJ2aWNlcy9wcm9qZWN0LXNlcnZpY2UvZGF0YS1tb2RlbC50cyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),
/* 14 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__prototype_mapping_configuration__ = __webpack_require__(30);\n/* unused harmony export WorkerServiceConfiguration */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return WorkerService; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return WorkerWorkerService; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return StateWorkerService; });\n\n\n\n\nvar WorkerServiceConfiguration = function () {\n    function WorkerServiceConfiguration(appName, workerThreads, importScripts) {\n        this.appName = appName;\n        this.workerThreads = workerThreads;\n        this.importScripts = importScripts;\n    }\n    return WorkerServiceConfiguration;\n}();\n\nvar WorkerService = function () {\n    function WorkerService(workerServiceConfiguration, workerServicePrototypeMappingConfiguration, $rootScope, $window, $q) {\n        var _this = this;\n        this.workerServicePrototypeMappingConfiguration = workerServicePrototypeMappingConfiguration;\n        this.$q = $q;\n        this.currentWorker = 0;\n        this.deferreds = [];\n        var path = $window.location.protocol + '//' + $window.location.host;\n        var importScripts = workerServiceConfiguration.importScripts.map(function (s) {\n            return s.indexOf('http') !== 0 ? path + (s.indexOf('/') !== 0 ? $window.location.pathname : '') + s : s;\n        });\n        var blobURL = $window.URL.createObjectURL(new Blob([WorkerService.workerTemplate.replace(/<APP_NAME>/g, workerServiceConfiguration.appName).replace(/<IMPORT_SCRIPTS>/g, importScripts.join('\\',\\''))], { type: 'application/javascript' }));\n        this.workers = [];\n        for (var i = 0; i < workerServiceConfiguration.workerThreads; i++) {\n            this.workers.push(new Worker(blobURL));\n            this.workers[i].addEventListener('message', function (e) {\n                var eventId = e.data.event;\n                if (eventId === 'broadcast') {\n                    $rootScope.$broadcast(e.data.name, _this.restorePrototypes(e.data.args));\n                    $rootScope.$apply();\n                } else {\n                    var deferred = _this.deferreds[e.data.id];\n                    if (deferred) {\n                        if (eventId === 'success') {\n                            delete _this.deferreds[e.data.id];\n                            deferred.resolve(_this.restorePrototypes(e.data.data));\n                        } else if (eventId === 'failure') {\n                            delete _this.deferreds[e.data.id];\n                            deferred.reject(_this.restorePrototypes(e.data.data));\n                        } else deferred.notify(_this.restorePrototypes(e.data.data));\n                    }\n                }\n            });\n        }\n    }\n    WorkerService.stripMarks = function (args) {\n        if (!args || !args.__mark || typeof args !== 'object') return;\n        delete args.__mark;\n        if (args instanceof Array) args.forEach(function (arg) {\n            return WorkerService.stripMarks(arg);\n        });else {\n            for (var key in args) if (args.hasOwnProperty(key)) WorkerService.stripMarks(args[key]);\n        }\n    };\n    WorkerService.stripPrototypes = function (args) {\n        if (!args || !args.__className || typeof args !== 'object') return;\n        delete args.__className;\n        if (args instanceof Array) args.forEach(function (arg) {\n            return WorkerService.stripPrototypes(arg);\n        });else {\n            for (var key in args) if (args.hasOwnProperty(key)) WorkerService.stripPrototypes(args[key]);\n        }\n    };\n    WorkerService.savePrototypes = function (args) {\n        WorkerService.stripPrototypes(args);\n        this.savePrototypesInternal(args);\n        return args;\n    };\n    WorkerService.savePrototypesInternal = function (args) {\n        if (!args || args.__className || typeof args !== 'object') return;\n        if (args instanceof Array) args.forEach(function (arg) {\n            return WorkerService.savePrototypesInternal(arg);\n        });else {\n            if (args.constructor.__name || args.constructor.name !== 'Object') {\n                var currentPrototype = Object.getPrototypeOf(args);\n                out: while (currentPrototype !== Object.prototype) {\n                    for (var _i = 0, _a = Object.getOwnPropertyNames(currentPrototype); _i < _a.length; _i++) {\n                        var prop = _a[_i];\n                        if (prop !== 'constructor' && typeof args.__proto__[prop] === 'function') {\n                            args.__className = args.constructor.__name ? args.constructor.__name : args.constructor.name;\n                            break out;\n                        }\n                    }\n                    currentPrototype = Object.getPrototypeOf(currentPrototype);\n                }\n                if (!args.__className) args.__className = 'Object';\n            }\n            for (var key in args) if (args.hasOwnProperty(key)) WorkerService.savePrototypesInternal(args[key]);\n        }\n    };\n    WorkerService.prototype.$broadcast = function (name, args) {\n        this.workers.forEach(function (w) {\n            return w.postMessage({ name: name, args: WorkerService.savePrototypes(args) });\n        });\n    };\n    WorkerService.prototype.callAll = function (service, method, args, canceller) {\n        var _this = this;\n        if (args === void 0) {\n            args = [];\n        }\n        var deferred = this.$q.defer();\n        this.deferreds.push(deferred);\n        var id = this.deferreds.length - 1;\n        var message = {\n            id: id,\n            service: service,\n            method: method,\n            args: WorkerService.savePrototypes(args)\n        };\n        if (canceller) canceller.then(function () {\n            _this.workers.forEach(function (worker) {\n                return worker.postMessage({\n                    id: id,\n                    cancel: true\n                });\n            });\n            delete _this.deferreds[id];\n        });\n        this.workers.forEach(function (worker) {\n            return worker.postMessage(message);\n        });\n        return deferred.promise;\n    };\n    WorkerService.prototype.call = function (service, method, args, canceller) {\n        var _this = this;\n        if (args === void 0) {\n            args = [];\n        }\n        var deferred = this.$q.defer();\n        this.deferreds.push(deferred);\n        var id = this.deferreds.length - 1;\n        var worker = this.workers[this.currentWorker];\n        this.currentWorker = (this.currentWorker + 1) % this.workers.length;\n        if (canceller) canceller.then(function () {\n            worker.postMessage({\n                id: id,\n                cancel: true\n            });\n            delete _this.deferreds[id];\n        });\n        worker.postMessage({\n            id: id,\n            service: service,\n            method: method,\n            args: WorkerService.savePrototypes(args)\n        });\n        return deferred.promise;\n    };\n    WorkerService.prototype.restorePrototypes = function (args) {\n        this.restorePrototypesInternal(args);\n        WorkerService.stripMarks(args);\n        return args;\n    };\n    WorkerService.prototype.restorePrototypesInternal = function (args) {\n        var _this = this;\n        if (!args || args.__mark || typeof args !== 'object') return;\n        args.__mark = true;\n        if (args instanceof Array) args.forEach(function (arg) {\n            return _this.restorePrototypesInternal(arg);\n        });else {\n            if (args.__className) {\n                var prototype = this.workerServicePrototypeMappingConfiguration[args.__className];\n                if (!prototype) throw 'Unknown prototype ' + args.__className;\n                args.__proto__ = prototype;\n                delete args.__className;\n            }\n            for (var key in args) if (args.hasOwnProperty(key)) this.restorePrototypesInternal(args[key]);\n        }\n    };\n    return WorkerService;\n}();\n\nWorkerService.workerTemplate = \"\\n    var window = self\\n    window.history = {}\\n    window.Node = function () {}\\n    //self.setImmediate = function(fn) { return window.setTimeout(fn, 0) }\\n    window.document = {\\n      readyState: 'complete',\\n      cookie: '',\\n      querySelector: function () {},\\n      addEventListener: function() {},\\n      createElement: function() {\\n        return {\\n          pathname: '',\\n          setAttribute: function(key, value) {}\\n        };\\n      },\\n    };\\n    importScripts('<IMPORT_SCRIPTS>')\\n    window.angular.module('<APP_NAME>').run(['workerWorkerService', function(workerWorkerService) {\\n      self.addEventListener('message', function(e) { workerWorkerService.onMessage(e.data) })\\n    }])\\n    window.angular.bootstrap(null, ['<APP_NAME>'])\\n    setTimeout(function() {\\n      self.history = undefined\\n      self.Node = undefined\\n      self.document = undefined\\n      self.window = undefined\\n    }, 0)\\n  \";\nvar WorkerWorkerService = function () {\n    function WorkerWorkerService(workerServicePrototypeMappingConfiguration, $injector, $q, $rootScope) {\n        this.workerServicePrototypeMappingConfiguration = workerServicePrototypeMappingConfiguration;\n        this.$injector = $injector;\n        this.$q = $q;\n        this.$rootScope = $rootScope;\n        this.cancellers = [];\n    }\n    WorkerWorkerService.stripFunctions = function (obj) {\n        var ret = {};\n        for (var key in obj) if (typeof obj[key] === 'object') ret[key] = WorkerWorkerService.stripFunctions(obj[key]);else if (typeof obj[key] !== 'function') ret[key] = obj[key];\n        return ret;\n    };\n    WorkerWorkerService.prototype.$broadcast = function (name, args) {\n        try {\n            self.postMessage({ event: 'broadcast', name: name, args: WorkerService.savePrototypes(args) });\n        } catch (e) {\n            console.log(args, e);\n            throw e;\n        }\n    };\n    WorkerWorkerService.prototype.onMessage = function (message) {\n        var _this = this;\n        if (message.id === undefined) {\n            this.$rootScope.$broadcast(message.name, this.restorePrototypes(message.args));\n            this.$rootScope.$apply();\n        } else if (message.cancel) {\n            var canceller = this.cancellers[message.id];\n            delete this.cancellers[message.id];\n            if (canceller) canceller.resolve();\n        } else {\n            var service = this.$injector.get(message.service);\n            var canceller = this.$q.defer();\n            this.cancellers[message.id] = canceller;\n            var promise = service[message.method].apply(service, this.restorePrototypes(message.args).concat(canceller.promise));\n            if (!promise || !promise.then) {\n                var deferred = this.$q.defer();\n                deferred.resolve(promise);\n                promise = deferred.promise;\n            }\n            promise.then(function (success) {\n                delete _this.cancellers[message.id];\n                self.postMessage({ event: 'success', id: message.id, data: WorkerService.savePrototypes(success) });\n            }, function (error) {\n                delete _this.cancellers[message.id];\n                if (error instanceof Error) {\n                    self.postMessage({ event: 'failure', id: message.id, data: { name: error.name, message: error.message, stack: error.stack } });\n                    throw error;\n                }\n                self.postMessage({ event: 'failure', id: message.id, data: WorkerService.savePrototypes(WorkerWorkerService.stripFunctions(error)) });\n            }, function (update) {\n                return self.postMessage({ event: 'update', id: message.id, data: WorkerService.savePrototypes(update) });\n            });\n        }\n    };\n    WorkerWorkerService.prototype.restorePrototypes = function (args) {\n        this.restorePrototypesInternal(args);\n        WorkerService.stripMarks(args);\n        return args;\n    };\n    WorkerWorkerService.prototype.restorePrototypesInternal = function (args) {\n        var _this = this;\n        if (!args || args.__mark || typeof args !== 'object') return;\n        args.__mark = true;\n        if (args instanceof Array) args.forEach(function (arg) {\n            return _this.restorePrototypesInternal(arg);\n        });else {\n            if (args.__className) {\n                var prototype = this.workerServicePrototypeMappingConfiguration[args.__className];\n                if (!prototype) throw 'Unknown prototype ' + args.__className;\n                args.__proto__ = prototype;\n                delete args.__className;\n            }\n            for (var key in args) if (args.hasOwnProperty(key)) this.restorePrototypesInternal(args[key]);\n        }\n    };\n    return WorkerWorkerService;\n}();\n\nvar StateWorkerService = function () {\n    function StateWorkerService() {}\n    StateWorkerService.prototype.setState = function (state) {\n        this.state = state;\n    };\n    return StateWorkerService;\n}();\n\n__WEBPACK_IMPORTED_MODULE_0_angular__[\"module\"]('fibra.services.worker-service', ['fibra.services.worker-service-prototype-mapping-configuration']).config(function ($provide) {\n    $provide.service('stateWorkerService', StateWorkerService);\n    $provide.service('workerService', WorkerService);\n    $provide.service('workerWorkerService', WorkerWorkerService);\n});//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcHAvc2VydmljZXMvd29ya2VyLXNlcnZpY2Uvd29ya2VyLXNlcnZpY2UudHM/NjkzOCJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5pbXBvcnQgKiBhcyBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0ICcuL3Byb3RvdHlwZS1tYXBwaW5nLWNvbmZpZ3VyYXRpb24nO1xudmFyIFdvcmtlclNlcnZpY2VDb25maWd1cmF0aW9uID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBXb3JrZXJTZXJ2aWNlQ29uZmlndXJhdGlvbihhcHBOYW1lLCB3b3JrZXJUaHJlYWRzLCBpbXBvcnRTY3JpcHRzKSB7XG4gICAgICAgIHRoaXMuYXBwTmFtZSA9IGFwcE5hbWU7XG4gICAgICAgIHRoaXMud29ya2VyVGhyZWFkcyA9IHdvcmtlclRocmVhZHM7XG4gICAgICAgIHRoaXMuaW1wb3J0U2NyaXB0cyA9IGltcG9ydFNjcmlwdHM7XG4gICAgfVxuICAgIHJldHVybiBXb3JrZXJTZXJ2aWNlQ29uZmlndXJhdGlvbjtcbn0oKSk7XG5leHBvcnQgeyBXb3JrZXJTZXJ2aWNlQ29uZmlndXJhdGlvbiB9O1xudmFyIFdvcmtlclNlcnZpY2UgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFdvcmtlclNlcnZpY2Uod29ya2VyU2VydmljZUNvbmZpZ3VyYXRpb24sIHdvcmtlclNlcnZpY2VQcm90b3R5cGVNYXBwaW5nQ29uZmlndXJhdGlvbiwgJHJvb3RTY29wZSwgJHdpbmRvdywgJHEpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy53b3JrZXJTZXJ2aWNlUHJvdG90eXBlTWFwcGluZ0NvbmZpZ3VyYXRpb24gPSB3b3JrZXJTZXJ2aWNlUHJvdG90eXBlTWFwcGluZ0NvbmZpZ3VyYXRpb247XG4gICAgICAgIHRoaXMuJHEgPSAkcTtcbiAgICAgICAgdGhpcy5jdXJyZW50V29ya2VyID0gMDtcbiAgICAgICAgdGhpcy5kZWZlcnJlZHMgPSBbXTtcbiAgICAgICAgdmFyIHBhdGggPSAkd2luZG93LmxvY2F0aW9uLnByb3RvY29sICsgJy8vJyArICR3aW5kb3cubG9jYXRpb24uaG9zdDtcbiAgICAgICAgdmFyIGltcG9ydFNjcmlwdHMgPSB3b3JrZXJTZXJ2aWNlQ29uZmlndXJhdGlvbi5pbXBvcnRTY3JpcHRzLm1hcChmdW5jdGlvbiAocykge1xuICAgICAgICAgICAgcmV0dXJuIHMuaW5kZXhPZignaHR0cCcpICE9PSAwID8gcGF0aCArIChzLmluZGV4T2YoJy8nKSAhPT0gMCA/ICR3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgOiAnJykgKyBzIDogcztcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBibG9iVVJMID0gKCR3aW5kb3cuVVJMKS5jcmVhdGVPYmplY3RVUkwobmV3IEJsb2IoW1dvcmtlclNlcnZpY2Uud29ya2VyVGVtcGxhdGUucmVwbGFjZSgvPEFQUF9OQU1FPi9nLCB3b3JrZXJTZXJ2aWNlQ29uZmlndXJhdGlvbi5hcHBOYW1lKS5yZXBsYWNlKC88SU1QT1JUX1NDUklQVFM+L2csIGltcG9ydFNjcmlwdHMuam9pbignXFwnLFxcJycpKV0sIHsgdHlwZTogJ2FwcGxpY2F0aW9uL2phdmFzY3JpcHQnIH0pKTtcbiAgICAgICAgdGhpcy53b3JrZXJzID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgd29ya2VyU2VydmljZUNvbmZpZ3VyYXRpb24ud29ya2VyVGhyZWFkczsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLndvcmtlcnMucHVzaChuZXcgV29ya2VyKGJsb2JVUkwpKTtcbiAgICAgICAgICAgIHRoaXMud29ya2Vyc1tpXS5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgZXZlbnRJZCA9IGUuZGF0YS5ldmVudDtcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnRJZCA9PT0gJ2Jyb2FkY2FzdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KGUuZGF0YS5uYW1lLCBfdGhpcy5yZXN0b3JlUHJvdG90eXBlcyhlLmRhdGEuYXJncykpO1xuICAgICAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRhcHBseSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gX3RoaXMuZGVmZXJyZWRzW2UuZGF0YS5pZF07XG4gICAgICAgICAgICAgICAgICAgIGlmIChkZWZlcnJlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50SWQgPT09ICdzdWNjZXNzJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBfdGhpcy5kZWZlcnJlZHNbZS5kYXRhLmlkXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKF90aGlzLnJlc3RvcmVQcm90b3R5cGVzKGUuZGF0YS5kYXRhKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChldmVudElkID09PSAnZmFpbHVyZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgX3RoaXMuZGVmZXJyZWRzW2UuZGF0YS5pZF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KF90aGlzLnJlc3RvcmVQcm90b3R5cGVzKGUuZGF0YS5kYXRhKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQubm90aWZ5KF90aGlzLnJlc3RvcmVQcm90b3R5cGVzKGUuZGF0YS5kYXRhKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBXb3JrZXJTZXJ2aWNlLnN0cmlwTWFya3MgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICBpZiAoIWFyZ3MgfHwgIWFyZ3MuX19tYXJrIHx8IHR5cGVvZiBhcmdzICE9PSAnb2JqZWN0JylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgZGVsZXRlIGFyZ3MuX19tYXJrO1xuICAgICAgICBpZiAoYXJncyBpbnN0YW5jZW9mIEFycmF5KVxuICAgICAgICAgICAgYXJncy5mb3JFYWNoKGZ1bmN0aW9uIChhcmcpIHsgcmV0dXJuIFdvcmtlclNlcnZpY2Uuc3RyaXBNYXJrcyhhcmcpOyB9KTtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gYXJncylcbiAgICAgICAgICAgICAgICBpZiAoYXJncy5oYXNPd25Qcm9wZXJ0eShrZXkpKVxuICAgICAgICAgICAgICAgICAgICBXb3JrZXJTZXJ2aWNlLnN0cmlwTWFya3MoYXJnc1trZXldKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgV29ya2VyU2VydmljZS5zdHJpcFByb3RvdHlwZXMgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICBpZiAoIWFyZ3MgfHwgIWFyZ3MuX19jbGFzc05hbWUgfHwgdHlwZW9mIGFyZ3MgIT09ICdvYmplY3QnKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBkZWxldGUgYXJncy5fX2NsYXNzTmFtZTtcbiAgICAgICAgaWYgKGFyZ3MgaW5zdGFuY2VvZiBBcnJheSlcbiAgICAgICAgICAgIGFyZ3MuZm9yRWFjaChmdW5jdGlvbiAoYXJnKSB7IHJldHVybiBXb3JrZXJTZXJ2aWNlLnN0cmlwUHJvdG90eXBlcyhhcmcpOyB9KTtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gYXJncylcbiAgICAgICAgICAgICAgICBpZiAoYXJncy5oYXNPd25Qcm9wZXJ0eShrZXkpKVxuICAgICAgICAgICAgICAgICAgICBXb3JrZXJTZXJ2aWNlLnN0cmlwUHJvdG90eXBlcyhhcmdzW2tleV0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBXb3JrZXJTZXJ2aWNlLnNhdmVQcm90b3R5cGVzID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgV29ya2VyU2VydmljZS5zdHJpcFByb3RvdHlwZXMoYXJncyk7XG4gICAgICAgIHRoaXMuc2F2ZVByb3RvdHlwZXNJbnRlcm5hbChhcmdzKTtcbiAgICAgICAgcmV0dXJuIGFyZ3M7XG4gICAgfTtcbiAgICBXb3JrZXJTZXJ2aWNlLnNhdmVQcm90b3R5cGVzSW50ZXJuYWwgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICBpZiAoIWFyZ3MgfHwgYXJncy5fX2NsYXNzTmFtZSB8fCB0eXBlb2YgYXJncyAhPT0gJ29iamVjdCcpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmIChhcmdzIGluc3RhbmNlb2YgQXJyYXkpXG4gICAgICAgICAgICBhcmdzLmZvckVhY2goZnVuY3Rpb24gKGFyZykgeyByZXR1cm4gV29ya2VyU2VydmljZS5zYXZlUHJvdG90eXBlc0ludGVybmFsKGFyZyk7IH0pO1xuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmIChhcmdzLmNvbnN0cnVjdG9yLl9fbmFtZSB8fCBhcmdzLmNvbnN0cnVjdG9yLm5hbWUgIT09ICdPYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRQcm90b3R5cGUgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoYXJncyk7XG4gICAgICAgICAgICAgICAgb3V0OiB3aGlsZSAoY3VycmVudFByb3RvdHlwZSAhPT0gT2JqZWN0LnByb3RvdHlwZSkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoY3VycmVudFByb3RvdHlwZSk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJvcCA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcm9wICE9PSAnY29uc3RydWN0b3InICYmIHR5cGVvZiAoYXJncy5fX3Byb3RvX19bcHJvcF0pID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJncy5fX2NsYXNzTmFtZSA9IGFyZ3MuY29uc3RydWN0b3IuX19uYW1lID8gYXJncy5jb25zdHJ1Y3Rvci5fX25hbWUgOiBhcmdzLmNvbnN0cnVjdG9yLm5hbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsgb3V0O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQcm90b3R5cGUgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoY3VycmVudFByb3RvdHlwZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghYXJncy5fX2NsYXNzTmFtZSlcbiAgICAgICAgICAgICAgICAgICAgYXJncy5fX2NsYXNzTmFtZSA9ICdPYmplY3QnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIGFyZ3MpXG4gICAgICAgICAgICAgICAgaWYgKGFyZ3MuaGFzT3duUHJvcGVydHkoa2V5KSlcbiAgICAgICAgICAgICAgICAgICAgV29ya2VyU2VydmljZS5zYXZlUHJvdG90eXBlc0ludGVybmFsKGFyZ3Nba2V5XSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFdvcmtlclNlcnZpY2UucHJvdG90eXBlLiRicm9hZGNhc3QgPSBmdW5jdGlvbiAobmFtZSwgYXJncykge1xuICAgICAgICB0aGlzLndvcmtlcnMuZm9yRWFjaChmdW5jdGlvbiAodykgeyByZXR1cm4gdy5wb3N0TWVzc2FnZSh7IG5hbWU6IG5hbWUsIGFyZ3M6IFdvcmtlclNlcnZpY2Uuc2F2ZVByb3RvdHlwZXMoYXJncykgfSk7IH0pO1xuICAgIH07XG4gICAgV29ya2VyU2VydmljZS5wcm90b3R5cGUuY2FsbEFsbCA9IGZ1bmN0aW9uIChzZXJ2aWNlLCBtZXRob2QsIGFyZ3MsIGNhbmNlbGxlcikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoYXJncyA9PT0gdm9pZCAwKSB7IGFyZ3MgPSBbXTsgfVxuICAgICAgICB2YXIgZGVmZXJyZWQgPSB0aGlzLiRxLmRlZmVyKCk7XG4gICAgICAgIHRoaXMuZGVmZXJyZWRzLnB1c2goZGVmZXJyZWQpO1xuICAgICAgICB2YXIgaWQgPSB0aGlzLmRlZmVycmVkcy5sZW5ndGggLSAxO1xuICAgICAgICB2YXIgbWVzc2FnZSA9IHtcbiAgICAgICAgICAgIGlkOiBpZCxcbiAgICAgICAgICAgIHNlcnZpY2U6IHNlcnZpY2UsXG4gICAgICAgICAgICBtZXRob2Q6IG1ldGhvZCxcbiAgICAgICAgICAgIGFyZ3M6IFdvcmtlclNlcnZpY2Uuc2F2ZVByb3RvdHlwZXMoYXJncylcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGNhbmNlbGxlcilcbiAgICAgICAgICAgIGNhbmNlbGxlci50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy53b3JrZXJzLmZvckVhY2goZnVuY3Rpb24gKHdvcmtlcikgeyByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGlkLFxuICAgICAgICAgICAgICAgICAgICBjYW5jZWw6IHRydWVcbiAgICAgICAgICAgICAgICB9KTsgfSk7XG4gICAgICAgICAgICAgICAgZGVsZXRlIF90aGlzLmRlZmVycmVkc1tpZF07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgdGhpcy53b3JrZXJzLmZvckVhY2goZnVuY3Rpb24gKHdvcmtlcikgeyByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKG1lc3NhZ2UpOyB9KTtcbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgfTtcbiAgICBXb3JrZXJTZXJ2aWNlLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKHNlcnZpY2UsIG1ldGhvZCwgYXJncywgY2FuY2VsbGVyKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmIChhcmdzID09PSB2b2lkIDApIHsgYXJncyA9IFtdOyB9XG4gICAgICAgIHZhciBkZWZlcnJlZCA9IHRoaXMuJHEuZGVmZXIoKTtcbiAgICAgICAgdGhpcy5kZWZlcnJlZHMucHVzaChkZWZlcnJlZCk7XG4gICAgICAgIHZhciBpZCA9IHRoaXMuZGVmZXJyZWRzLmxlbmd0aCAtIDE7XG4gICAgICAgIHZhciB3b3JrZXIgPSB0aGlzLndvcmtlcnNbdGhpcy5jdXJyZW50V29ya2VyXTtcbiAgICAgICAgdGhpcy5jdXJyZW50V29ya2VyID0gKHRoaXMuY3VycmVudFdvcmtlciArIDEpICUgdGhpcy53b3JrZXJzLmxlbmd0aDtcbiAgICAgICAgaWYgKGNhbmNlbGxlcilcbiAgICAgICAgICAgIGNhbmNlbGxlci50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB3b3JrZXIucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICBpZDogaWQsXG4gICAgICAgICAgICAgICAgICAgIGNhbmNlbDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBfdGhpcy5kZWZlcnJlZHNbaWRdO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICBpZDogaWQsXG4gICAgICAgICAgICBzZXJ2aWNlOiBzZXJ2aWNlLFxuICAgICAgICAgICAgbWV0aG9kOiBtZXRob2QsXG4gICAgICAgICAgICBhcmdzOiBXb3JrZXJTZXJ2aWNlLnNhdmVQcm90b3R5cGVzKGFyZ3MpXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICB9O1xuICAgIFdvcmtlclNlcnZpY2UucHJvdG90eXBlLnJlc3RvcmVQcm90b3R5cGVzID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgdGhpcy5yZXN0b3JlUHJvdG90eXBlc0ludGVybmFsKGFyZ3MpO1xuICAgICAgICBXb3JrZXJTZXJ2aWNlLnN0cmlwTWFya3MoYXJncyk7XG4gICAgICAgIHJldHVybiBhcmdzO1xuICAgIH07XG4gICAgV29ya2VyU2VydmljZS5wcm90b3R5cGUucmVzdG9yZVByb3RvdHlwZXNJbnRlcm5hbCA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICghYXJncyB8fCBhcmdzLl9fbWFyayB8fCB0eXBlb2YgYXJncyAhPT0gJ29iamVjdCcpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGFyZ3MuX19tYXJrID0gdHJ1ZTtcbiAgICAgICAgaWYgKGFyZ3MgaW5zdGFuY2VvZiBBcnJheSlcbiAgICAgICAgICAgIGFyZ3MuZm9yRWFjaChmdW5jdGlvbiAoYXJnKSB7IHJldHVybiBfdGhpcy5yZXN0b3JlUHJvdG90eXBlc0ludGVybmFsKGFyZyk7IH0pO1xuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmIChhcmdzLl9fY2xhc3NOYW1lKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb3RvdHlwZSA9IHRoaXMud29ya2VyU2VydmljZVByb3RvdHlwZU1hcHBpbmdDb25maWd1cmF0aW9uW2FyZ3MuX19jbGFzc05hbWVdO1xuICAgICAgICAgICAgICAgIGlmICghcHJvdG90eXBlKVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyAnVW5rbm93biBwcm90b3R5cGUgJyArIGFyZ3MuX19jbGFzc05hbWU7XG4gICAgICAgICAgICAgICAgYXJncy5fX3Byb3RvX18gPSBwcm90b3R5cGU7XG4gICAgICAgICAgICAgICAgZGVsZXRlIGFyZ3MuX19jbGFzc05hbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gYXJncylcbiAgICAgICAgICAgICAgICBpZiAoYXJncy5oYXNPd25Qcm9wZXJ0eShrZXkpKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc3RvcmVQcm90b3R5cGVzSW50ZXJuYWwoYXJnc1trZXldKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFdvcmtlclNlcnZpY2U7XG59KCkpO1xuZXhwb3J0IHsgV29ya2VyU2VydmljZSB9O1xuV29ya2VyU2VydmljZS53b3JrZXJUZW1wbGF0ZSA9IFwiXFxuICAgIHZhciB3aW5kb3cgPSBzZWxmXFxuICAgIHdpbmRvdy5oaXN0b3J5ID0ge31cXG4gICAgd2luZG93Lk5vZGUgPSBmdW5jdGlvbiAoKSB7fVxcbiAgICAvL3NlbGYuc2V0SW1tZWRpYXRlID0gZnVuY3Rpb24oZm4pIHsgcmV0dXJuIHdpbmRvdy5zZXRUaW1lb3V0KGZuLCAwKSB9XFxuICAgIHdpbmRvdy5kb2N1bWVudCA9IHtcXG4gICAgICByZWFkeVN0YXRlOiAnY29tcGxldGUnLFxcbiAgICAgIGNvb2tpZTogJycsXFxuICAgICAgcXVlcnlTZWxlY3RvcjogZnVuY3Rpb24gKCkge30sXFxuICAgICAgYWRkRXZlbnRMaXN0ZW5lcjogZnVuY3Rpb24oKSB7fSxcXG4gICAgICBjcmVhdGVFbGVtZW50OiBmdW5jdGlvbigpIHtcXG4gICAgICAgIHJldHVybiB7XFxuICAgICAgICAgIHBhdGhuYW1lOiAnJyxcXG4gICAgICAgICAgc2V0QXR0cmlidXRlOiBmdW5jdGlvbihrZXksIHZhbHVlKSB7fVxcbiAgICAgICAgfTtcXG4gICAgICB9LFxcbiAgICB9O1xcbiAgICBpbXBvcnRTY3JpcHRzKCc8SU1QT1JUX1NDUklQVFM+JylcXG4gICAgd2luZG93LmFuZ3VsYXIubW9kdWxlKCc8QVBQX05BTUU+JykucnVuKFsnd29ya2VyV29ya2VyU2VydmljZScsIGZ1bmN0aW9uKHdvcmtlcldvcmtlclNlcnZpY2UpIHtcXG4gICAgICBzZWxmLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBmdW5jdGlvbihlKSB7IHdvcmtlcldvcmtlclNlcnZpY2Uub25NZXNzYWdlKGUuZGF0YSkgfSlcXG4gICAgfV0pXFxuICAgIHdpbmRvdy5hbmd1bGFyLmJvb3RzdHJhcChudWxsLCBbJzxBUFBfTkFNRT4nXSlcXG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcXG4gICAgICBzZWxmLmhpc3RvcnkgPSB1bmRlZmluZWRcXG4gICAgICBzZWxmLk5vZGUgPSB1bmRlZmluZWRcXG4gICAgICBzZWxmLmRvY3VtZW50ID0gdW5kZWZpbmVkXFxuICAgICAgc2VsZi53aW5kb3cgPSB1bmRlZmluZWRcXG4gICAgfSwgMClcXG4gIFwiO1xudmFyIFdvcmtlcldvcmtlclNlcnZpY2UgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFdvcmtlcldvcmtlclNlcnZpY2Uod29ya2VyU2VydmljZVByb3RvdHlwZU1hcHBpbmdDb25maWd1cmF0aW9uLCAkaW5qZWN0b3IsICRxLCAkcm9vdFNjb3BlKSB7XG4gICAgICAgIHRoaXMud29ya2VyU2VydmljZVByb3RvdHlwZU1hcHBpbmdDb25maWd1cmF0aW9uID0gd29ya2VyU2VydmljZVByb3RvdHlwZU1hcHBpbmdDb25maWd1cmF0aW9uO1xuICAgICAgICB0aGlzLiRpbmplY3RvciA9ICRpbmplY3RvcjtcbiAgICAgICAgdGhpcy4kcSA9ICRxO1xuICAgICAgICB0aGlzLiRyb290U2NvcGUgPSAkcm9vdFNjb3BlO1xuICAgICAgICB0aGlzLmNhbmNlbGxlcnMgPSBbXTtcbiAgICB9XG4gICAgV29ya2VyV29ya2VyU2VydmljZS5zdHJpcEZ1bmN0aW9ucyA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgdmFyIHJldCA9IHt9O1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gb2JqKVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmpba2V5XSA9PT0gJ29iamVjdCcpXG4gICAgICAgICAgICAgICAgcmV0W2tleV0gPSBXb3JrZXJXb3JrZXJTZXJ2aWNlLnN0cmlwRnVuY3Rpb25zKG9ialtrZXldKTtcbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBvYmpba2V5XSAhPT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgICAgICAgICByZXRba2V5XSA9IG9ialtrZXldO1xuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH07XG4gICAgV29ya2VyV29ya2VyU2VydmljZS5wcm90b3R5cGUuJGJyb2FkY2FzdCA9IGZ1bmN0aW9uIChuYW1lLCBhcmdzKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBzZWxmLnBvc3RNZXNzYWdlKHsgZXZlbnQ6ICdicm9hZGNhc3QnLCBuYW1lOiBuYW1lLCBhcmdzOiBXb3JrZXJTZXJ2aWNlLnNhdmVQcm90b3R5cGVzKGFyZ3MpIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhhcmdzLCBlKTtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFdvcmtlcldvcmtlclNlcnZpY2UucHJvdG90eXBlLm9uTWVzc2FnZSA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmIChtZXNzYWdlLmlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuJHJvb3RTY29wZS4kYnJvYWRjYXN0KG1lc3NhZ2UubmFtZSwgdGhpcy5yZXN0b3JlUHJvdG90eXBlcyhtZXNzYWdlLmFyZ3MpKTtcbiAgICAgICAgICAgIHRoaXMuJHJvb3RTY29wZS4kYXBwbHkoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChtZXNzYWdlLmNhbmNlbCkge1xuICAgICAgICAgICAgdmFyIGNhbmNlbGxlciA9IHRoaXMuY2FuY2VsbGVyc1ttZXNzYWdlLmlkXTtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmNhbmNlbGxlcnNbbWVzc2FnZS5pZF07XG4gICAgICAgICAgICBpZiAoY2FuY2VsbGVyKVxuICAgICAgICAgICAgICAgIGNhbmNlbGxlci5yZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgc2VydmljZSA9IHRoaXMuJGluamVjdG9yLmdldChtZXNzYWdlLnNlcnZpY2UpO1xuICAgICAgICAgICAgdmFyIGNhbmNlbGxlciA9IHRoaXMuJHEuZGVmZXIoKTtcbiAgICAgICAgICAgIHRoaXMuY2FuY2VsbGVyc1ttZXNzYWdlLmlkXSA9IGNhbmNlbGxlcjtcbiAgICAgICAgICAgIHZhciBwcm9taXNlID0gc2VydmljZVttZXNzYWdlLm1ldGhvZF0uYXBwbHkoc2VydmljZSwgdGhpcy5yZXN0b3JlUHJvdG90eXBlcyhtZXNzYWdlLmFyZ3MpLmNvbmNhdChjYW5jZWxsZXIucHJvbWlzZSkpO1xuICAgICAgICAgICAgaWYgKCFwcm9taXNlIHx8ICFwcm9taXNlLnRoZW4pIHtcbiAgICAgICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSB0aGlzLiRxLmRlZmVyKCk7XG4gICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShwcm9taXNlKTtcbiAgICAgICAgICAgICAgICBwcm9taXNlID0gZGVmZXJyZWQucHJvbWlzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHByb21pc2UudGhlbihmdW5jdGlvbiAoc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBfdGhpcy5jYW5jZWxsZXJzW21lc3NhZ2UuaWRdO1xuICAgICAgICAgICAgICAgIHNlbGYucG9zdE1lc3NhZ2UoeyBldmVudDogJ3N1Y2Nlc3MnLCBpZDogbWVzc2FnZS5pZCwgZGF0YTogV29ya2VyU2VydmljZS5zYXZlUHJvdG90eXBlcyhzdWNjZXNzKSB9KTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBfdGhpcy5jYW5jZWxsZXJzW21lc3NhZ2UuaWRdO1xuICAgICAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYucG9zdE1lc3NhZ2UoeyBldmVudDogJ2ZhaWx1cmUnLCBpZDogbWVzc2FnZS5pZCwgZGF0YTogeyBuYW1lOiBlcnJvci5uYW1lLCBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLCBzdGFjazogZXJyb3Iuc3RhY2sgfSB9KTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNlbGYucG9zdE1lc3NhZ2UoeyBldmVudDogJ2ZhaWx1cmUnLCBpZDogbWVzc2FnZS5pZCwgZGF0YTogV29ya2VyU2VydmljZS5zYXZlUHJvdG90eXBlcyhXb3JrZXJXb3JrZXJTZXJ2aWNlLnN0cmlwRnVuY3Rpb25zKGVycm9yKSkgfSk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAodXBkYXRlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYucG9zdE1lc3NhZ2UoeyBldmVudDogJ3VwZGF0ZScsIGlkOiBtZXNzYWdlLmlkLCBkYXRhOiBXb3JrZXJTZXJ2aWNlLnNhdmVQcm90b3R5cGVzKHVwZGF0ZSkgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgV29ya2VyV29ya2VyU2VydmljZS5wcm90b3R5cGUucmVzdG9yZVByb3RvdHlwZXMgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICB0aGlzLnJlc3RvcmVQcm90b3R5cGVzSW50ZXJuYWwoYXJncyk7XG4gICAgICAgIFdvcmtlclNlcnZpY2Uuc3RyaXBNYXJrcyhhcmdzKTtcbiAgICAgICAgcmV0dXJuIGFyZ3M7XG4gICAgfTtcbiAgICBXb3JrZXJXb3JrZXJTZXJ2aWNlLnByb3RvdHlwZS5yZXN0b3JlUHJvdG90eXBlc0ludGVybmFsID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKCFhcmdzIHx8IGFyZ3MuX19tYXJrIHx8IHR5cGVvZiBhcmdzICE9PSAnb2JqZWN0JylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgYXJncy5fX21hcmsgPSB0cnVlO1xuICAgICAgICBpZiAoYXJncyBpbnN0YW5jZW9mIEFycmF5KVxuICAgICAgICAgICAgYXJncy5mb3JFYWNoKGZ1bmN0aW9uIChhcmcpIHsgcmV0dXJuIF90aGlzLnJlc3RvcmVQcm90b3R5cGVzSW50ZXJuYWwoYXJnKTsgfSk7XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKGFyZ3MuX19jbGFzc05hbWUpIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJvdG90eXBlID0gdGhpcy53b3JrZXJTZXJ2aWNlUHJvdG90eXBlTWFwcGluZ0NvbmZpZ3VyYXRpb25bYXJncy5fX2NsYXNzTmFtZV07XG4gICAgICAgICAgICAgICAgaWYgKCFwcm90b3R5cGUpXG4gICAgICAgICAgICAgICAgICAgIHRocm93ICdVbmtub3duIHByb3RvdHlwZSAnICsgYXJncy5fX2NsYXNzTmFtZTtcbiAgICAgICAgICAgICAgICBhcmdzLl9fcHJvdG9fXyA9IHByb3RvdHlwZTtcbiAgICAgICAgICAgICAgICBkZWxldGUgYXJncy5fX2NsYXNzTmFtZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBhcmdzKVxuICAgICAgICAgICAgICAgIGlmIChhcmdzLmhhc093blByb3BlcnR5KGtleSkpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVzdG9yZVByb3RvdHlwZXNJbnRlcm5hbChhcmdzW2tleV0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gV29ya2VyV29ya2VyU2VydmljZTtcbn0oKSk7XG5leHBvcnQgeyBXb3JrZXJXb3JrZXJTZXJ2aWNlIH07XG52YXIgU3RhdGVXb3JrZXJTZXJ2aWNlID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTdGF0ZVdvcmtlclNlcnZpY2UoKSB7XG4gICAgfVxuICAgIFN0YXRlV29ya2VyU2VydmljZS5wcm90b3R5cGUuc2V0U3RhdGUgPSBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgIH07XG4gICAgcmV0dXJuIFN0YXRlV29ya2VyU2VydmljZTtcbn0oKSk7XG5leHBvcnQgeyBTdGF0ZVdvcmtlclNlcnZpY2UgfTtcbmFuZ3VsYXIubW9kdWxlKCdmaWJyYS5zZXJ2aWNlcy53b3JrZXItc2VydmljZScsIFsnZmlicmEuc2VydmljZXMud29ya2VyLXNlcnZpY2UtcHJvdG90eXBlLW1hcHBpbmctY29uZmlndXJhdGlvbiddKVxuICAgIC5jb25maWcoZnVuY3Rpb24gKCRwcm92aWRlKSB7XG4gICAgJHByb3ZpZGUuc2VydmljZSgnc3RhdGVXb3JrZXJTZXJ2aWNlJywgU3RhdGVXb3JrZXJTZXJ2aWNlKTtcbiAgICAkcHJvdmlkZS5zZXJ2aWNlKCd3b3JrZXJTZXJ2aWNlJywgV29ya2VyU2VydmljZSk7XG4gICAgJHByb3ZpZGUuc2VydmljZSgnd29ya2VyV29ya2VyU2VydmljZScsIFdvcmtlcldvcmtlclNlcnZpY2UpO1xufSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9hcHAvc2VydmljZXMvd29ya2VyLXNlcnZpY2Uvd29ya2VyLXNlcnZpY2UudHMiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),
/* 15 */,
/* 16 */,
/* 17 */,
/* 18 */,
/* 19 */,
/* 20 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__collection_utils__ = __webpack_require__(6);\n/* harmony export (immutable) */ __webpack_exports__[\"c\"] = toTurtle;\n/* unused harmony export citableToTurtle */\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = UUID;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = flatten;\n\n\n\nfunction toTurtle(prefixes, m) {\n    var s = '';\n    for (var key in prefixes) s = s + '@prefix ' + key + ': <' + prefixes[key] + '> .\\n';\n    m.values().forEach(function (str) {\n        return s = s + str.substring(0, str.length - 2) + ' .\\n\\n';\n    });\n    return s;\n}\nfunction citableToTurtle(c) {\n    var prefixes = {};\n    var m = new __WEBPACK_IMPORTED_MODULE_0__collection_utils__[\"d\" /* Map */]();\n    c.toTurtle(m, prefixes);\n    return toTurtle(prefixes, m);\n}\nvar lut = [];\nfor (var i = 0; i < 256; i++) lut[i] = (i < 16 ? '0' : '') + i.toString(16);\nfunction UUID() {\n    /* tslint:disable:no-bitwise */\n    var d0 = Math.random() * 0xffffffff | 0;\n    var d1 = Math.random() * 0xffffffff | 0;\n    var d2 = Math.random() * 0xffffffff | 0;\n    var d3 = Math.random() * 0xffffffff | 0;\n    return lut[d0 & 0xff] + lut[d0 >> 8 & 0xff] + lut[d0 >> 16 & 0xff] + lut[d0 >> 24 & 0xff] + '-' + lut[d1 & 0xff] + lut[d1 >> 8 & 0xff] + '-' + lut[d1 >> 16 & 0x0f | 0x40] + lut[d1 >> 24 & 0xff] + '-' + lut[d2 & 0x3f | 0x80] + lut[d2 >> 8 & 0xff] + '-' + lut[d2 >> 16 & 0xff] + lut[d2 >> 24 & 0xff] + lut[d3 & 0xff] + lut[d3 >> 8 & 0xff] + lut[d3 >> 16 & 0xff] + lut[d3 >> 24 & 0xff];\n    /* tslint:enable:no-bitwise */\n}\nfunction flatten(arr, initial) {\n    if (initial === void 0) {\n        initial = [];\n    }\n    return arr.reduce(function (flat, toFlatten) {\n        return flat.concat(Array.isArray(toFlatten) ? flatten(toFlatten) : toFlatten);\n    }, initial);\n}//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcHAvY29tcG9uZW50cy9taXNjLXV0aWxzLnRzPzQ2YjQiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuaW1wb3J0IHsgTWFwIH0gZnJvbSAnLi9jb2xsZWN0aW9uLXV0aWxzJztcbmV4cG9ydCBmdW5jdGlvbiB0b1R1cnRsZShwcmVmaXhlcywgbSkge1xuICAgIHZhciBzID0gJyc7XG4gICAgZm9yICh2YXIga2V5IGluIHByZWZpeGVzKVxuICAgICAgICBzID0gcyArICdAcHJlZml4ICcgKyBrZXkgKyAnOiA8JyArIHByZWZpeGVzW2tleV0gKyAnPiAuXFxuJztcbiAgICBtLnZhbHVlcygpLmZvckVhY2goZnVuY3Rpb24gKHN0cikgeyByZXR1cm4gcyA9IHMgKyBzdHIuc3Vic3RyaW5nKDAsIHN0ci5sZW5ndGggLSAyKSArICcgLlxcblxcbic7IH0pO1xuICAgIHJldHVybiBzO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNpdGFibGVUb1R1cnRsZShjKSB7XG4gICAgdmFyIHByZWZpeGVzID0ge307XG4gICAgdmFyIG0gPSBuZXcgTWFwKCk7XG4gICAgYy50b1R1cnRsZShtLCBwcmVmaXhlcyk7XG4gICAgcmV0dXJuIHRvVHVydGxlKHByZWZpeGVzLCBtKTtcbn1cbnZhciBsdXQgPSBbXTtcbmZvciAodmFyIGkgPSAwOyBpIDwgMjU2OyBpKyspXG4gICAgbHV0W2ldID0gKGkgPCAxNiA/ICcwJyA6ICcnKSArIGkudG9TdHJpbmcoMTYpO1xuZXhwb3J0IGZ1bmN0aW9uIFVVSUQoKSB7XG4gICAgLyogdHNsaW50OmRpc2FibGU6bm8tYml0d2lzZSAqL1xuICAgIHZhciBkMCA9IE1hdGgucmFuZG9tKCkgKiAweGZmZmZmZmZmIHwgMDtcbiAgICB2YXIgZDEgPSBNYXRoLnJhbmRvbSgpICogMHhmZmZmZmZmZiB8IDA7XG4gICAgdmFyIGQyID0gTWF0aC5yYW5kb20oKSAqIDB4ZmZmZmZmZmYgfCAwO1xuICAgIHZhciBkMyA9IE1hdGgucmFuZG9tKCkgKiAweGZmZmZmZmZmIHwgMDtcbiAgICByZXR1cm4gbHV0W2QwICYgMHhmZl0gKyBsdXRbZDAgPj4gOCAmIDB4ZmZdICsgbHV0W2QwID4+IDE2ICYgMHhmZl0gKyBsdXRbZDAgPj4gMjQgJiAweGZmXSArICctJyArXG4gICAgICAgIGx1dFtkMSAmIDB4ZmZdICsgbHV0W2QxID4+IDggJiAweGZmXSArICctJyArIGx1dFtkMSA+PiAxNiAmIDB4MGYgfCAweDQwXSArIGx1dFtkMSA+PiAyNCAmIDB4ZmZdICsgJy0nICtcbiAgICAgICAgbHV0W2QyICYgMHgzZiB8IDB4ODBdICsgbHV0W2QyID4+IDggJiAweGZmXSArICctJyArIGx1dFtkMiA+PiAxNiAmIDB4ZmZdICsgbHV0W2QyID4+IDI0ICYgMHhmZl0gK1xuICAgICAgICBsdXRbZDMgJiAweGZmXSArIGx1dFtkMyA+PiA4ICYgMHhmZl0gKyBsdXRbZDMgPj4gMTYgJiAweGZmXSArIGx1dFtkMyA+PiAyNCAmIDB4ZmZdO1xuICAgIC8qIHRzbGludDplbmFibGU6bm8tYml0d2lzZSAqL1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZsYXR0ZW4oYXJyLCBpbml0aWFsKSB7XG4gICAgaWYgKGluaXRpYWwgPT09IHZvaWQgMCkgeyBpbml0aWFsID0gW107IH1cbiAgICByZXR1cm4gYXJyLnJlZHVjZShmdW5jdGlvbiAoZmxhdCwgdG9GbGF0dGVuKSB7IHJldHVybiBmbGF0LmNvbmNhdChBcnJheS5pc0FycmF5KHRvRmxhdHRlbikgPyBmbGF0dGVuKHRvRmxhdHRlbikgOiB0b0ZsYXR0ZW4pOyB9LCBpbml0aWFsKTtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2FwcC9jb21wb25lbnRzL21pc2MtdXRpbHMudHMiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),
/* 21 */,
/* 22 */,
/* 23 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return TreeNode; });\n/* unused harmony export TreeComponent */\n\n\nvar TreeNode = function () {\n    function TreeNode(id, label) {\n        this.id = id;\n        this.label = label;\n        this.children = [];\n        this.selected = true;\n        this.open = true;\n    }\n    TreeNode.recursivelyProcess = function (node, f) {\n        f(node);\n        node.children.forEach(function (n) {\n            return TreeNode.recursivelyProcess(n, f);\n        });\n    };\n    TreeNode.filter = function (node, f) {\n        var ret = node.cloneWithoutChildren();\n        for (var _i = 0, _a = node.children; _i < _a.length; _i++) {\n            var cn = _a[_i];\n            if (f(cn)) ret.children.push(cn);\n        }\n        return ret;\n    };\n    TreeNode.recursivelyMap = function (node, f) {\n        var cns = [];\n        for (var _i = 0, _a = node.children; _i < _a.length; _i++) {\n            var cn = _a[_i];\n            cns = cns.concat(TreeNode.recursivelyMap(cn, f));\n        }\n        return f(node, cns);\n    };\n    TreeNode.prototype.cloneWithoutChildren = function () {\n        var ret = new TreeNode(this.id, this.label);\n        ret.instances = this.instances;\n        ret.matchingInstances = this.matchingInstances;\n        ret.selected = this.selected;\n        ret.open = this.open;\n        return ret;\n    };\n    return TreeNode;\n}();\n\nvar TreeComponent = function () {\n    function TreeComponent() {\n        this.bindings = {\n            tree: '<',\n            onSelect: '&'\n        };\n        this.templateUrl = 'components/tree/tree.html';\n    }\n    return TreeComponent;\n}();\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcHAvY29tcG9uZW50cy90cmVlL3RyZWUtY29tcG9uZW50LnRzP2UwMzkiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xudmFyIFRyZWVOb2RlID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBUcmVlTm9kZShpZCwgbGFiZWwpIHtcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgICAgICB0aGlzLmxhYmVsID0gbGFiZWw7XG4gICAgICAgIHRoaXMuY2hpbGRyZW4gPSBbXTtcbiAgICAgICAgdGhpcy5zZWxlY3RlZCA9IHRydWU7XG4gICAgICAgIHRoaXMub3BlbiA9IHRydWU7XG4gICAgfVxuICAgIFRyZWVOb2RlLnJlY3Vyc2l2ZWx5UHJvY2VzcyA9IGZ1bmN0aW9uIChub2RlLCBmKSB7XG4gICAgICAgIGYobm9kZSk7XG4gICAgICAgIG5vZGUuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAobikgeyByZXR1cm4gVHJlZU5vZGUucmVjdXJzaXZlbHlQcm9jZXNzKG4sIGYpOyB9KTtcbiAgICB9O1xuICAgIFRyZWVOb2RlLmZpbHRlciA9IGZ1bmN0aW9uIChub2RlLCBmKSB7XG4gICAgICAgIHZhciByZXQgPSBub2RlLmNsb25lV2l0aG91dENoaWxkcmVuKCk7XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBub2RlLmNoaWxkcmVuOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIGNuID0gX2FbX2ldO1xuICAgICAgICAgICAgaWYgKGYoY24pKVxuICAgICAgICAgICAgICAgIHJldC5jaGlsZHJlbi5wdXNoKGNuKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH07XG4gICAgVHJlZU5vZGUucmVjdXJzaXZlbHlNYXAgPSBmdW5jdGlvbiAobm9kZSwgZikge1xuICAgICAgICB2YXIgY25zID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBub2RlLmNoaWxkcmVuOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgdmFyIGNuID0gX2FbX2ldO1xuICAgICAgICAgICAgY25zID0gY25zLmNvbmNhdChUcmVlTm9kZS5yZWN1cnNpdmVseU1hcChjbiwgZikpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmKG5vZGUsIGNucyk7XG4gICAgfTtcbiAgICBUcmVlTm9kZS5wcm90b3R5cGUuY2xvbmVXaXRob3V0Q2hpbGRyZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciByZXQgPSBuZXcgVHJlZU5vZGUodGhpcy5pZCwgdGhpcy5sYWJlbCk7XG4gICAgICAgIHJldC5pbnN0YW5jZXMgPSB0aGlzLmluc3RhbmNlcztcbiAgICAgICAgcmV0Lm1hdGNoaW5nSW5zdGFuY2VzID0gdGhpcy5tYXRjaGluZ0luc3RhbmNlcztcbiAgICAgICAgcmV0LnNlbGVjdGVkID0gdGhpcy5zZWxlY3RlZDtcbiAgICAgICAgcmV0Lm9wZW4gPSB0aGlzLm9wZW47XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfTtcbiAgICByZXR1cm4gVHJlZU5vZGU7XG59KCkpO1xuZXhwb3J0IHsgVHJlZU5vZGUgfTtcbnZhciBUcmVlQ29tcG9uZW50ID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBUcmVlQ29tcG9uZW50KCkge1xuICAgICAgICB0aGlzLmJpbmRpbmdzID0ge1xuICAgICAgICAgICAgdHJlZTogJzwnLFxuICAgICAgICAgICAgb25TZWxlY3Q6ICcmJyxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy50ZW1wbGF0ZVVybCA9ICdjb21wb25lbnRzL3RyZWUvdHJlZS5odG1sJztcbiAgICB9XG4gICAgcmV0dXJuIFRyZWVDb21wb25lbnQ7XG59KCkpO1xuZXhwb3J0IHsgVHJlZUNvbXBvbmVudCB9O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vYXBwL2NvbXBvbmVudHMvdHJlZS90cmVlLWNvbXBvbmVudC50cyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9");

/***/ }),
/* 24 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__rdf__ = __webpack_require__(2);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return FullRichNodeFromNode; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return RichNodeFromRichNode; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return PrunedRichNodeFromNode; });\n\n\nvar __extends = this && this.__extends || function () {\n    var extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (d, b) {\n        d.__proto__ = b;\n    } || function (d, b) {\n        for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() {\n            this.constructor = d;\n        }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n}();\n\nvar FullRichNodeFromNode = function (_super) {\n    __extends(FullRichNodeFromNode, _super);\n    function FullRichNodeFromNode(node, label, description, types, sourceEndpoints) {\n        if (types === void 0) {\n            types = [];\n        }\n        if (sourceEndpoints === void 0) {\n            sourceEndpoints = [];\n        }\n        var _this = _super.call(this, node) || this;\n        _this.label = label;\n        _this.description = description;\n        _this.types = types;\n        _this.sourceEndpoints = sourceEndpoints;\n        return _this;\n    }\n    return FullRichNodeFromNode;\n}(__WEBPACK_IMPORTED_MODULE_0__rdf__[\"i\" /* NodeFromNode */]);\n\nvar RichNodeFromRichNode = function (_super) {\n    __extends(RichNodeFromRichNode, _super);\n    function RichNodeFromRichNode(node) {\n        var _this = _super.call(this, node) || this;\n        _this.label = node.label;\n        _this.description = node.description;\n        _this.types = node.types;\n        _this.sourceEndpoints = node.sourceEndpoints;\n        return _this;\n    }\n    return RichNodeFromRichNode;\n}(__WEBPACK_IMPORTED_MODULE_0__rdf__[\"i\" /* NodeFromNode */]);\n\nvar PrunedRichNodeFromNode = function (_super) {\n    __extends(PrunedRichNodeFromNode, _super);\n    function PrunedRichNodeFromNode(node) {\n        return _super.call(this, node) || this;\n    }\n    return PrunedRichNodeFromNode;\n}(__WEBPACK_IMPORTED_MODULE_0__rdf__[\"i\" /* NodeFromNode */]);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcHAvbW9kZWxzL3JpY2hub2RlLnRzPzI3ZGEiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5pbXBvcnQgeyBOb2RlRnJvbU5vZGUgfSBmcm9tICcuL3JkZic7XG52YXIgRnVsbFJpY2hOb2RlRnJvbU5vZGUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhGdWxsUmljaE5vZGVGcm9tTm9kZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBGdWxsUmljaE5vZGVGcm9tTm9kZShub2RlLCBsYWJlbCwgZGVzY3JpcHRpb24sIHR5cGVzLCBzb3VyY2VFbmRwb2ludHMpIHtcbiAgICAgICAgaWYgKHR5cGVzID09PSB2b2lkIDApIHsgdHlwZXMgPSBbXTsgfVxuICAgICAgICBpZiAoc291cmNlRW5kcG9pbnRzID09PSB2b2lkIDApIHsgc291cmNlRW5kcG9pbnRzID0gW107IH1cbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgbm9kZSkgfHwgdGhpcztcbiAgICAgICAgX3RoaXMubGFiZWwgPSBsYWJlbDtcbiAgICAgICAgX3RoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICAgICAgX3RoaXMudHlwZXMgPSB0eXBlcztcbiAgICAgICAgX3RoaXMuc291cmNlRW5kcG9pbnRzID0gc291cmNlRW5kcG9pbnRzO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBGdWxsUmljaE5vZGVGcm9tTm9kZTtcbn0oTm9kZUZyb21Ob2RlKSk7XG5leHBvcnQgeyBGdWxsUmljaE5vZGVGcm9tTm9kZSB9O1xudmFyIFJpY2hOb2RlRnJvbVJpY2hOb2RlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUmljaE5vZGVGcm9tUmljaE5vZGUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gUmljaE5vZGVGcm9tUmljaE5vZGUobm9kZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBub2RlKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5sYWJlbCA9IG5vZGUubGFiZWw7XG4gICAgICAgIF90aGlzLmRlc2NyaXB0aW9uID0gbm9kZS5kZXNjcmlwdGlvbjtcbiAgICAgICAgX3RoaXMudHlwZXMgPSBub2RlLnR5cGVzO1xuICAgICAgICBfdGhpcy5zb3VyY2VFbmRwb2ludHMgPSBub2RlLnNvdXJjZUVuZHBvaW50cztcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICByZXR1cm4gUmljaE5vZGVGcm9tUmljaE5vZGU7XG59KE5vZGVGcm9tTm9kZSkpO1xuZXhwb3J0IHsgUmljaE5vZGVGcm9tUmljaE5vZGUgfTtcbnZhciBQcnVuZWRSaWNoTm9kZUZyb21Ob2RlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUHJ1bmVkUmljaE5vZGVGcm9tTm9kZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBQcnVuZWRSaWNoTm9kZUZyb21Ob2RlKG5vZGUpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIG5vZGUpIHx8IHRoaXM7XG4gICAgfVxuICAgIHJldHVybiBQcnVuZWRSaWNoTm9kZUZyb21Ob2RlO1xufShOb2RlRnJvbU5vZGUpKTtcbmV4cG9ydCB7IFBydW5lZFJpY2hOb2RlRnJvbU5vZGUgfTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2FwcC9tb2RlbHMvcmljaG5vZGUudHMiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),
/* 25 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__models_citable__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__sparql_autocomplete_service__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__sparql_item_service__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__services_sparql_tree_service__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__data_model__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__models_rdf__ = __webpack_require__(2);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return PrimaryEndpointConfiguration; });\n\n\nvar __extends = this && this.__extends || function () {\n    var extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (d, b) {\n        d.__proto__ = b;\n    } || function (d, b) {\n        for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() {\n            this.constructor = d;\n        }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n}();\n\n\n\n\n\n\nvar s = fi.seco.sparql.SparqlService;\nvar PrimaryEndpointConfiguration = function (_super) {\n    __extends(PrimaryEndpointConfiguration, _super);\n    function PrimaryEndpointConfiguration() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.compatibleEndpoints = [];\n        _this.autocompletionQuery = __WEBPACK_IMPORTED_MODULE_1__sparql_autocomplete_service__[\"b\" /* SparqlAutocompleteService */].defaultMatchQuery;\n        _this.itemQuery = __WEBPACK_IMPORTED_MODULE_2__sparql_item_service__[\"b\" /* SparqlItemService */].getLocalItemPropertiesQuery;\n        _this.deleteItemQuery = __WEBPACK_IMPORTED_MODULE_2__sparql_item_service__[\"b\" /* SparqlItemService */].deleteItemQuery;\n        _this.treeQuery = __WEBPACK_IMPORTED_MODULE_3__services_sparql_tree_service__[\"b\" /* SparqlTreeService */].getClassTreeQuery;\n        _this.classQuery = __WEBPACK_IMPORTED_MODULE_4__data_model__[\"a\" /* DataModel */].classQuery;\n        _this.propertyQuery = __WEBPACK_IMPORTED_MODULE_4__data_model__[\"a\" /* DataModel */].propertyQuery;\n        return _this;\n    }\n    PrimaryEndpointConfiguration.prototype.toTurtle = function (fragmentsById, prefixes) {\n        if (!fragmentsById.has(this.id)) {\n            prefixes['fibra'] = __WEBPACK_IMPORTED_MODULE_5__models_rdf__[\"m\" /* FIBRA */].ns;\n            fragmentsById.set(this.id, \"<\" + this.id + \"> a fibra:PrimaryEndpointConfiguration ;\");\n            _super.prototype.toTurtle.call(this, fragmentsById, prefixes);\n            var f_1 = fragmentsById.get(this.id);\n            var nece = this.compatibleEndpoints.filter(function (e) {\n                return e;\n            });\n            if (nece.length !== 0) {\n                f_1 = f_1 + \"\\nfibra:compatibleEndpoint \";\n                nece.forEach(function (e) {\n                    return f_1 = f_1 + (\"<\" + e + \">, \");\n                });\n                f_1 = f_1.substring(0, f_1.length - 2) + ' ;';\n            }\n            f_1 = f_1 + (\"\\nfibra:autocompletionQuery \" + s.stringToSPARQLString(this.autocompletionQuery) + \" ;\\nfibra:treeQuery \" + s.stringToSPARQLString(this.treeQuery) + \" ;\\nfibra:propertyQuery \" + s.stringToSPARQLString(this.propertyQuery) + \" ;\\nfibra:classQuery \" + s.stringToSPARQLString(this.classQuery) + \" ;\\nfibra:itemQuery \" + s.stringToSPARQLString(this.itemQuery) + \" ;\\nfibra:deleteItemQuery \" + s.stringToSPARQLString(this.deleteItemQuery) + \" .\");\n            fragmentsById.set(this.id, f_1);\n        }\n    };\n    PrimaryEndpointConfiguration.prototype.copyToProject = function (p) {\n        var aq = this.autocompletionQuery;\n        aq = p.graph ? aq.replace(/# STARTGRAPH/g, 'GRAPH <' + p.graph + '> {').replace(/# ENDGRAPH/g, '}') : aq.replace(/.*# STARTGRAPH\\n/g, '').replace(/.*# ENDGRAPH\\n/g, '');\n        p.autocompletionQuery = aq;\n        aq = this.itemQuery;\n        aq = p.graph ? aq.replace(/# STARTGRAPH/g, 'GRAPH <' + p.graph + '> {').replace(/# ENDGRAPH/g, '}') : aq.replace(/.*# STARTGRAPH\\n/g, '').replace(/.*# ENDGRAPH\\n/g, '');\n        p.itemQuery = aq;\n        aq = this.deleteItemQuery;\n        aq = p.graph ? aq.replace(/# STARTGRAPH/g, 'GRAPH <' + p.graph + '> {').replace(/# ENDGRAPH/g, '}') : aq.replace(/.*# STARTGRAPH\\n/g, '').replace(/.*# ENDGRAPH\\n/g, '');\n        p.deleteItemQuery = aq;\n        aq = this.treeQuery;\n        aq = p.graph ? aq.replace(/# STARTGRAPH/g, 'GRAPH <' + p.graph + '> {').replace(/# ENDGRAPH/g, '}') : aq.replace(/.*# STARTGRAPH\\n/g, '').replace(/.*# ENDGRAPH\\n/g, '');\n        p.treeQuery = aq;\n        aq = this.propertyQuery;\n        aq = p.graph ? aq.replace(/# STARTGRAPH/g, 'GRAPH <' + p.graph + '> {').replace(/# ENDGRAPH/g, '}') : aq.replace(/.*# STARTGRAPH\\n/g, '').replace(/.*# ENDGRAPH\\n/g, '');\n        p.propertyQuery = aq;\n        aq = this.classQuery;\n        aq = p.graph ? aq.replace(/# STARTGRAPH/g, 'GRAPH <' + p.graph + '> {').replace(/# ENDGRAPH/g, '}') : aq.replace(/.*# STARTGRAPH\\n/g, '').replace(/.*# ENDGRAPH\\n/g, '');\n        p.classQuery = aq;\n    };\n    return PrimaryEndpointConfiguration;\n}(__WEBPACK_IMPORTED_MODULE_0__models_citable__[\"b\" /* Citable */]);\n\nPrimaryEndpointConfiguration.listPrimaryEndpointConfigurationsQuery = \"PREFIX fibra: <http://hdlab.stanford.edu/fibra/ontology#>\\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\\nPREFIX dcterms: <http://purl.org/dc/terms/>\\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\\nSELECT ?id ?labels ?descriptions ?compatibleEndpoints ?rightsHolders ?rightsHolders_labels ?rightsHolders_descriptions ?rightsHolders_url ?rightsHolders_order ?url ?autocompletionQuery ?itemQuery ?deleteItemQuery ?treeQuery ?properyQuery ?classQuery {\\n# STARTGRAPH\\n  ?id a fibra:PrimaryEndpointConfiguration .\\n  { ?id skos:prefLabel ?labels }\\n  UNION\\n  { ?id dcterms:description ?descriptions }\\n  UNION\\n  { ?id fibra:compatibleEndpoint ?compatibleEndpoints }\\n  UNION\\n  {\\n    ?id fibra:autocompletionQuery ?autocompletionQuery .\\n    ?id fibra:itemQuery ?itemQuery .\\n    ?id fibra:deleteItemQuery ?deleteItemQuery .\\n    ?id fibra:treeQuery ?treeQuery .\\n    ?id fibra:propertyQuery ?propertyQuery .\\n    ?id fibra:classQuery ?classQuery .\\n    OPTIONAL { ?id foaf:homepage ?url }\\n  } UNION {\\n    {\\n      ?id dcterms:rightsHolder ?rightsHolders\\n    } UNION {\\n      ?id fibra:qualifiedAssertion ?qa .\\n      ?qa rdf:predicate dcterms:rightsHolder .\\n      ?qa rdf:object ?rightsHolders .\\n      OPTIONAL { ?qa fibra:order ?rightsHolders_order }\\n    }\\n    {\\n      ?rightsHolders skos:prefLabel ?rightsHolders_labels\\n    } UNION {\\n      ?rightsHolders foaf:homepage ?rightsHolders_url\\n    } UNION {\\n      ?rightsHolders dcterms:description ?rightsHolders_descriptions\\n    }\\n  }\\n# ENDGRAPH\\n}\";\nPrimaryEndpointConfiguration.primaryEndpointConfigurationQuery = \"PREFIX fibra: <http://hdlab.stanford.edu/fibra/ontology#>\\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\\nPREFIX dcterms: <http://purl.org/dc/terms/>\\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\\nSELECT ?labels ?descriptions ?compatibleEndpoints ?rightsHolders ?rightsHolders_labels ?rightsHolders_descriptions ?rightsHolders_url ?rightsHolders_order ?url ?autocompletionQuery ?itemQuery ?deleteItemQuery ?treeQuery ?properyQuery ?classQuery {\\n# STARTGRAPH\\n  { <ID> skos:prefLabel ?labels }\\n  UNION\\n  { <ID> dcterms:description ?descriptions }\\n  UNION\\n  { <ID> fibra:compatibleEndpoint ?compatibleEndpoints }\\n  UNION\\n  {\\n    <ID> fibra:autocompletionQuery ?autocompletionQuery .\\n    <ID> fibra:itemQuery ?itemQuery .\\n    <ID> fibra:deleteItemQuery ?deleteItemQuery .\\n    <ID> fibra:treeQuery ?treeQuery .\\n    <ID> fibra:propertyQuery ?propertyQuery .\\n    <ID> fibra:classQuery ?classQuery .\\n    OPTIONAL { <ID> foaf:homepage ?url }\\n  } UNION {\\n    {\\n      <ID> dcterms:rightsHolder ?rightsHolders\\n    } UNION {\\n      <ID> fibra:qualifiedAssertion ?qa .\\n      <ID> rdf:predicate dcterms:rightsHolder .\\n      <ID> rdf:object ?rightsHolders .\\n      OPTIONAL { <ID> fibra:order ?rightsHolders_order }\\n    }\\n    {\\n      ?rightsHolders skos:prefLabel ?rightsHolders_labels\\n    } UNION {\\n      ?rightsHolders foaf:homepage ?rightsHolders_url\\n    } UNION {\\n      ?rightsHolders dcterms:description ?rightsHolders_descriptions\\n    }\\n  }\\n# ENDGRAPH\\n}\";//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcHAvc2VydmljZXMvcHJvamVjdC1zZXJ2aWNlL3ByaW1hcnktZW5kcG9pbnQtY29uZmlndXJhdGlvbi50cz8wODI5Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuaW1wb3J0IHsgQ2l0YWJsZSB9IGZyb20gJy4uLy4uL21vZGVscy9jaXRhYmxlJztcbmltcG9ydCB7IFNwYXJxbEF1dG9jb21wbGV0ZVNlcnZpY2UgfSBmcm9tICcuLi9zcGFycWwtYXV0b2NvbXBsZXRlLXNlcnZpY2UnO1xuaW1wb3J0IHsgU3BhcnFsSXRlbVNlcnZpY2UgfSBmcm9tICcuLi9zcGFycWwtaXRlbS1zZXJ2aWNlJztcbmltcG9ydCB7IFNwYXJxbFRyZWVTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvc3BhcnFsLXRyZWUtc2VydmljZSc7XG5pbXBvcnQgeyBEYXRhTW9kZWwgfSBmcm9tICcuL2RhdGEtbW9kZWwnO1xuaW1wb3J0IHsgRklCUkEgfSBmcm9tICcuLi8uLi9tb2RlbHMvcmRmJztcbnZhciBzID0gZmkuc2Vjby5zcGFycWwuU3BhcnFsU2VydmljZTtcbnZhciBQcmltYXJ5RW5kcG9pbnRDb25maWd1cmF0aW9uID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUHJpbWFyeUVuZHBvaW50Q29uZmlndXJhdGlvbiwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBQcmltYXJ5RW5kcG9pbnRDb25maWd1cmF0aW9uKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuY29tcGF0aWJsZUVuZHBvaW50cyA9IFtdO1xuICAgICAgICBfdGhpcy5hdXRvY29tcGxldGlvblF1ZXJ5ID0gU3BhcnFsQXV0b2NvbXBsZXRlU2VydmljZS5kZWZhdWx0TWF0Y2hRdWVyeTtcbiAgICAgICAgX3RoaXMuaXRlbVF1ZXJ5ID0gU3BhcnFsSXRlbVNlcnZpY2UuZ2V0TG9jYWxJdGVtUHJvcGVydGllc1F1ZXJ5O1xuICAgICAgICBfdGhpcy5kZWxldGVJdGVtUXVlcnkgPSBTcGFycWxJdGVtU2VydmljZS5kZWxldGVJdGVtUXVlcnk7XG4gICAgICAgIF90aGlzLnRyZWVRdWVyeSA9IFNwYXJxbFRyZWVTZXJ2aWNlLmdldENsYXNzVHJlZVF1ZXJ5O1xuICAgICAgICBfdGhpcy5jbGFzc1F1ZXJ5ID0gRGF0YU1vZGVsLmNsYXNzUXVlcnk7XG4gICAgICAgIF90aGlzLnByb3BlcnR5UXVlcnkgPSBEYXRhTW9kZWwucHJvcGVydHlRdWVyeTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBQcmltYXJ5RW5kcG9pbnRDb25maWd1cmF0aW9uLnByb3RvdHlwZS50b1R1cnRsZSA9IGZ1bmN0aW9uIChmcmFnbWVudHNCeUlkLCBwcmVmaXhlcykge1xuICAgICAgICBpZiAoIWZyYWdtZW50c0J5SWQuaGFzKHRoaXMuaWQpKSB7XG4gICAgICAgICAgICBwcmVmaXhlc1snZmlicmEnXSA9IEZJQlJBLm5zO1xuICAgICAgICAgICAgZnJhZ21lbnRzQnlJZC5zZXQodGhpcy5pZCwgXCI8XCIgKyB0aGlzLmlkICsgXCI+IGEgZmlicmE6UHJpbWFyeUVuZHBvaW50Q29uZmlndXJhdGlvbiA7XCIpO1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS50b1R1cnRsZS5jYWxsKHRoaXMsIGZyYWdtZW50c0J5SWQsIHByZWZpeGVzKTtcbiAgICAgICAgICAgIHZhciBmXzEgPSBmcmFnbWVudHNCeUlkLmdldCh0aGlzLmlkKTtcbiAgICAgICAgICAgIHZhciBuZWNlID0gdGhpcy5jb21wYXRpYmxlRW5kcG9pbnRzLmZpbHRlcihmdW5jdGlvbiAoZSkgeyByZXR1cm4gZTsgfSk7XG4gICAgICAgICAgICBpZiAobmVjZS5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgICAgICBmXzEgPSBmXzEgKyBcIlxcbmZpYnJhOmNvbXBhdGlibGVFbmRwb2ludCBcIjtcbiAgICAgICAgICAgICAgICBuZWNlLmZvckVhY2goZnVuY3Rpb24gKGUpIHsgcmV0dXJuIGZfMSA9IGZfMSArIChcIjxcIiArIGUgKyBcIj4sIFwiKTsgfSk7XG4gICAgICAgICAgICAgICAgZl8xID0gZl8xLnN1YnN0cmluZygwLCBmXzEubGVuZ3RoIC0gMikgKyAnIDsnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZl8xID0gZl8xICsgKFwiXFxuZmlicmE6YXV0b2NvbXBsZXRpb25RdWVyeSBcIiArIHMuc3RyaW5nVG9TUEFSUUxTdHJpbmcodGhpcy5hdXRvY29tcGxldGlvblF1ZXJ5KSArIFwiIDtcXG5maWJyYTp0cmVlUXVlcnkgXCIgKyBzLnN0cmluZ1RvU1BBUlFMU3RyaW5nKHRoaXMudHJlZVF1ZXJ5KSArIFwiIDtcXG5maWJyYTpwcm9wZXJ0eVF1ZXJ5IFwiICsgcy5zdHJpbmdUb1NQQVJRTFN0cmluZyh0aGlzLnByb3BlcnR5UXVlcnkpICsgXCIgO1xcbmZpYnJhOmNsYXNzUXVlcnkgXCIgKyBzLnN0cmluZ1RvU1BBUlFMU3RyaW5nKHRoaXMuY2xhc3NRdWVyeSkgKyBcIiA7XFxuZmlicmE6aXRlbVF1ZXJ5IFwiICsgcy5zdHJpbmdUb1NQQVJRTFN0cmluZyh0aGlzLml0ZW1RdWVyeSkgKyBcIiA7XFxuZmlicmE6ZGVsZXRlSXRlbVF1ZXJ5IFwiICsgcy5zdHJpbmdUb1NQQVJRTFN0cmluZyh0aGlzLmRlbGV0ZUl0ZW1RdWVyeSkgKyBcIiAuXCIpO1xuICAgICAgICAgICAgZnJhZ21lbnRzQnlJZC5zZXQodGhpcy5pZCwgZl8xKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgUHJpbWFyeUVuZHBvaW50Q29uZmlndXJhdGlvbi5wcm90b3R5cGUuY29weVRvUHJvamVjdCA9IGZ1bmN0aW9uIChwKSB7XG4gICAgICAgIHZhciBhcSA9IHRoaXMuYXV0b2NvbXBsZXRpb25RdWVyeTtcbiAgICAgICAgYXEgPSBwLmdyYXBoID8gYXEucmVwbGFjZSgvIyBTVEFSVEdSQVBIL2csICdHUkFQSCA8JyArIHAuZ3JhcGggKyAnPiB7JykucmVwbGFjZSgvIyBFTkRHUkFQSC9nLCAnfScpIDogYXEucmVwbGFjZSgvLiojIFNUQVJUR1JBUEhcXG4vZywgJycpLnJlcGxhY2UoLy4qIyBFTkRHUkFQSFxcbi9nLCAnJyk7XG4gICAgICAgIHAuYXV0b2NvbXBsZXRpb25RdWVyeSA9IGFxO1xuICAgICAgICBhcSA9IHRoaXMuaXRlbVF1ZXJ5O1xuICAgICAgICBhcSA9IHAuZ3JhcGggPyBhcS5yZXBsYWNlKC8jIFNUQVJUR1JBUEgvZywgJ0dSQVBIIDwnICsgcC5ncmFwaCArICc+IHsnKS5yZXBsYWNlKC8jIEVOREdSQVBIL2csICd9JykgOiBhcS5yZXBsYWNlKC8uKiMgU1RBUlRHUkFQSFxcbi9nLCAnJykucmVwbGFjZSgvLiojIEVOREdSQVBIXFxuL2csICcnKTtcbiAgICAgICAgcC5pdGVtUXVlcnkgPSBhcTtcbiAgICAgICAgYXEgPSB0aGlzLmRlbGV0ZUl0ZW1RdWVyeTtcbiAgICAgICAgYXEgPSBwLmdyYXBoID8gYXEucmVwbGFjZSgvIyBTVEFSVEdSQVBIL2csICdHUkFQSCA8JyArIHAuZ3JhcGggKyAnPiB7JykucmVwbGFjZSgvIyBFTkRHUkFQSC9nLCAnfScpIDogYXEucmVwbGFjZSgvLiojIFNUQVJUR1JBUEhcXG4vZywgJycpLnJlcGxhY2UoLy4qIyBFTkRHUkFQSFxcbi9nLCAnJyk7XG4gICAgICAgIHAuZGVsZXRlSXRlbVF1ZXJ5ID0gYXE7XG4gICAgICAgIGFxID0gdGhpcy50cmVlUXVlcnk7XG4gICAgICAgIGFxID0gcC5ncmFwaCA/IGFxLnJlcGxhY2UoLyMgU1RBUlRHUkFQSC9nLCAnR1JBUEggPCcgKyBwLmdyYXBoICsgJz4geycpLnJlcGxhY2UoLyMgRU5ER1JBUEgvZywgJ30nKSA6IGFxLnJlcGxhY2UoLy4qIyBTVEFSVEdSQVBIXFxuL2csICcnKS5yZXBsYWNlKC8uKiMgRU5ER1JBUEhcXG4vZywgJycpO1xuICAgICAgICBwLnRyZWVRdWVyeSA9IGFxO1xuICAgICAgICBhcSA9IHRoaXMucHJvcGVydHlRdWVyeTtcbiAgICAgICAgYXEgPSBwLmdyYXBoID8gYXEucmVwbGFjZSgvIyBTVEFSVEdSQVBIL2csICdHUkFQSCA8JyArIHAuZ3JhcGggKyAnPiB7JykucmVwbGFjZSgvIyBFTkRHUkFQSC9nLCAnfScpIDogYXEucmVwbGFjZSgvLiojIFNUQVJUR1JBUEhcXG4vZywgJycpLnJlcGxhY2UoLy4qIyBFTkRHUkFQSFxcbi9nLCAnJyk7XG4gICAgICAgIHAucHJvcGVydHlRdWVyeSA9IGFxO1xuICAgICAgICBhcSA9IHRoaXMuY2xhc3NRdWVyeTtcbiAgICAgICAgYXEgPSBwLmdyYXBoID8gYXEucmVwbGFjZSgvIyBTVEFSVEdSQVBIL2csICdHUkFQSCA8JyArIHAuZ3JhcGggKyAnPiB7JykucmVwbGFjZSgvIyBFTkRHUkFQSC9nLCAnfScpIDogYXEucmVwbGFjZSgvLiojIFNUQVJUR1JBUEhcXG4vZywgJycpLnJlcGxhY2UoLy4qIyBFTkRHUkFQSFxcbi9nLCAnJyk7XG4gICAgICAgIHAuY2xhc3NRdWVyeSA9IGFxO1xuICAgIH07XG4gICAgcmV0dXJuIFByaW1hcnlFbmRwb2ludENvbmZpZ3VyYXRpb247XG59KENpdGFibGUpKTtcbmV4cG9ydCB7IFByaW1hcnlFbmRwb2ludENvbmZpZ3VyYXRpb24gfTtcblByaW1hcnlFbmRwb2ludENvbmZpZ3VyYXRpb24ubGlzdFByaW1hcnlFbmRwb2ludENvbmZpZ3VyYXRpb25zUXVlcnkgPSBcIlBSRUZJWCBmaWJyYTogPGh0dHA6Ly9oZGxhYi5zdGFuZm9yZC5lZHUvZmlicmEvb250b2xvZ3kjPlxcblBSRUZJWCBza29zOiA8aHR0cDovL3d3dy53My5vcmcvMjAwNC8wMi9za29zL2NvcmUjPlxcblBSRUZJWCBkY3Rlcm1zOiA8aHR0cDovL3B1cmwub3JnL2RjL3Rlcm1zLz5cXG5QUkVGSVggZm9hZjogPGh0dHA6Ly94bWxucy5jb20vZm9hZi8wLjEvPlxcblBSRUZJWCByZGY6IDxodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjPlxcblNFTEVDVCA/aWQgP2xhYmVscyA/ZGVzY3JpcHRpb25zID9jb21wYXRpYmxlRW5kcG9pbnRzID9yaWdodHNIb2xkZXJzID9yaWdodHNIb2xkZXJzX2xhYmVscyA/cmlnaHRzSG9sZGVyc19kZXNjcmlwdGlvbnMgP3JpZ2h0c0hvbGRlcnNfdXJsID9yaWdodHNIb2xkZXJzX29yZGVyID91cmwgP2F1dG9jb21wbGV0aW9uUXVlcnkgP2l0ZW1RdWVyeSA/ZGVsZXRlSXRlbVF1ZXJ5ID90cmVlUXVlcnkgP3Byb3BlcnlRdWVyeSA/Y2xhc3NRdWVyeSB7XFxuIyBTVEFSVEdSQVBIXFxuICA/aWQgYSBmaWJyYTpQcmltYXJ5RW5kcG9pbnRDb25maWd1cmF0aW9uIC5cXG4gIHsgP2lkIHNrb3M6cHJlZkxhYmVsID9sYWJlbHMgfVxcbiAgVU5JT05cXG4gIHsgP2lkIGRjdGVybXM6ZGVzY3JpcHRpb24gP2Rlc2NyaXB0aW9ucyB9XFxuICBVTklPTlxcbiAgeyA/aWQgZmlicmE6Y29tcGF0aWJsZUVuZHBvaW50ID9jb21wYXRpYmxlRW5kcG9pbnRzIH1cXG4gIFVOSU9OXFxuICB7XFxuICAgID9pZCBmaWJyYTphdXRvY29tcGxldGlvblF1ZXJ5ID9hdXRvY29tcGxldGlvblF1ZXJ5IC5cXG4gICAgP2lkIGZpYnJhOml0ZW1RdWVyeSA/aXRlbVF1ZXJ5IC5cXG4gICAgP2lkIGZpYnJhOmRlbGV0ZUl0ZW1RdWVyeSA/ZGVsZXRlSXRlbVF1ZXJ5IC5cXG4gICAgP2lkIGZpYnJhOnRyZWVRdWVyeSA/dHJlZVF1ZXJ5IC5cXG4gICAgP2lkIGZpYnJhOnByb3BlcnR5UXVlcnkgP3Byb3BlcnR5UXVlcnkgLlxcbiAgICA/aWQgZmlicmE6Y2xhc3NRdWVyeSA/Y2xhc3NRdWVyeSAuXFxuICAgIE9QVElPTkFMIHsgP2lkIGZvYWY6aG9tZXBhZ2UgP3VybCB9XFxuICB9IFVOSU9OIHtcXG4gICAge1xcbiAgICAgID9pZCBkY3Rlcm1zOnJpZ2h0c0hvbGRlciA/cmlnaHRzSG9sZGVyc1xcbiAgICB9IFVOSU9OIHtcXG4gICAgICA/aWQgZmlicmE6cXVhbGlmaWVkQXNzZXJ0aW9uID9xYSAuXFxuICAgICAgP3FhIHJkZjpwcmVkaWNhdGUgZGN0ZXJtczpyaWdodHNIb2xkZXIgLlxcbiAgICAgID9xYSByZGY6b2JqZWN0ID9yaWdodHNIb2xkZXJzIC5cXG4gICAgICBPUFRJT05BTCB7ID9xYSBmaWJyYTpvcmRlciA/cmlnaHRzSG9sZGVyc19vcmRlciB9XFxuICAgIH1cXG4gICAge1xcbiAgICAgID9yaWdodHNIb2xkZXJzIHNrb3M6cHJlZkxhYmVsID9yaWdodHNIb2xkZXJzX2xhYmVsc1xcbiAgICB9IFVOSU9OIHtcXG4gICAgICA/cmlnaHRzSG9sZGVycyBmb2FmOmhvbWVwYWdlID9yaWdodHNIb2xkZXJzX3VybFxcbiAgICB9IFVOSU9OIHtcXG4gICAgICA/cmlnaHRzSG9sZGVycyBkY3Rlcm1zOmRlc2NyaXB0aW9uID9yaWdodHNIb2xkZXJzX2Rlc2NyaXB0aW9uc1xcbiAgICB9XFxuICB9XFxuIyBFTkRHUkFQSFxcbn1cIjtcblByaW1hcnlFbmRwb2ludENvbmZpZ3VyYXRpb24ucHJpbWFyeUVuZHBvaW50Q29uZmlndXJhdGlvblF1ZXJ5ID0gXCJQUkVGSVggZmlicmE6IDxodHRwOi8vaGRsYWIuc3RhbmZvcmQuZWR1L2ZpYnJhL29udG9sb2d5Iz5cXG5QUkVGSVggc2tvczogPGh0dHA6Ly93d3cudzMub3JnLzIwMDQvMDIvc2tvcy9jb3JlIz5cXG5QUkVGSVggZGN0ZXJtczogPGh0dHA6Ly9wdXJsLm9yZy9kYy90ZXJtcy8+XFxuUFJFRklYIGZvYWY6IDxodHRwOi8veG1sbnMuY29tL2ZvYWYvMC4xLz5cXG5QUkVGSVggcmRmOiA8aHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIz5cXG5TRUxFQ1QgP2xhYmVscyA/ZGVzY3JpcHRpb25zID9jb21wYXRpYmxlRW5kcG9pbnRzID9yaWdodHNIb2xkZXJzID9yaWdodHNIb2xkZXJzX2xhYmVscyA/cmlnaHRzSG9sZGVyc19kZXNjcmlwdGlvbnMgP3JpZ2h0c0hvbGRlcnNfdXJsID9yaWdodHNIb2xkZXJzX29yZGVyID91cmwgP2F1dG9jb21wbGV0aW9uUXVlcnkgP2l0ZW1RdWVyeSA/ZGVsZXRlSXRlbVF1ZXJ5ID90cmVlUXVlcnkgP3Byb3BlcnlRdWVyeSA/Y2xhc3NRdWVyeSB7XFxuIyBTVEFSVEdSQVBIXFxuICB7IDxJRD4gc2tvczpwcmVmTGFiZWwgP2xhYmVscyB9XFxuICBVTklPTlxcbiAgeyA8SUQ+IGRjdGVybXM6ZGVzY3JpcHRpb24gP2Rlc2NyaXB0aW9ucyB9XFxuICBVTklPTlxcbiAgeyA8SUQ+IGZpYnJhOmNvbXBhdGlibGVFbmRwb2ludCA/Y29tcGF0aWJsZUVuZHBvaW50cyB9XFxuICBVTklPTlxcbiAge1xcbiAgICA8SUQ+IGZpYnJhOmF1dG9jb21wbGV0aW9uUXVlcnkgP2F1dG9jb21wbGV0aW9uUXVlcnkgLlxcbiAgICA8SUQ+IGZpYnJhOml0ZW1RdWVyeSA/aXRlbVF1ZXJ5IC5cXG4gICAgPElEPiBmaWJyYTpkZWxldGVJdGVtUXVlcnkgP2RlbGV0ZUl0ZW1RdWVyeSAuXFxuICAgIDxJRD4gZmlicmE6dHJlZVF1ZXJ5ID90cmVlUXVlcnkgLlxcbiAgICA8SUQ+IGZpYnJhOnByb3BlcnR5UXVlcnkgP3Byb3BlcnR5UXVlcnkgLlxcbiAgICA8SUQ+IGZpYnJhOmNsYXNzUXVlcnkgP2NsYXNzUXVlcnkgLlxcbiAgICBPUFRJT05BTCB7IDxJRD4gZm9hZjpob21lcGFnZSA/dXJsIH1cXG4gIH0gVU5JT04ge1xcbiAgICB7XFxuICAgICAgPElEPiBkY3Rlcm1zOnJpZ2h0c0hvbGRlciA/cmlnaHRzSG9sZGVyc1xcbiAgICB9IFVOSU9OIHtcXG4gICAgICA8SUQ+IGZpYnJhOnF1YWxpZmllZEFzc2VydGlvbiA/cWEgLlxcbiAgICAgIDxJRD4gcmRmOnByZWRpY2F0ZSBkY3Rlcm1zOnJpZ2h0c0hvbGRlciAuXFxuICAgICAgPElEPiByZGY6b2JqZWN0ID9yaWdodHNIb2xkZXJzIC5cXG4gICAgICBPUFRJT05BTCB7IDxJRD4gZmlicmE6b3JkZXIgP3JpZ2h0c0hvbGRlcnNfb3JkZXIgfVxcbiAgICB9XFxuICAgIHtcXG4gICAgICA/cmlnaHRzSG9sZGVycyBza29zOnByZWZMYWJlbCA/cmlnaHRzSG9sZGVyc19sYWJlbHNcXG4gICAgfSBVTklPTiB7XFxuICAgICAgP3JpZ2h0c0hvbGRlcnMgZm9hZjpob21lcGFnZSA/cmlnaHRzSG9sZGVyc191cmxcXG4gICAgfSBVTklPTiB7XFxuICAgICAgP3JpZ2h0c0hvbGRlcnMgZGN0ZXJtczpkZXNjcmlwdGlvbiA/cmlnaHRzSG9sZGVyc19kZXNjcmlwdGlvbnNcXG4gICAgfVxcbiAgfVxcbiMgRU5ER1JBUEhcXG59XCI7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9hcHAvc2VydmljZXMvcHJvamVjdC1zZXJ2aWNlL3ByaW1hcnktZW5kcG9pbnQtY29uZmlndXJhdGlvbi50cyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),
/* 26 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__models_citable__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__data_model__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__sparql_autocomplete_service__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__services_sparql_tree_service__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__sparql_item_service__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__primary_endpoint_configuration__ = __webpack_require__(25);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__models_rdf__ = __webpack_require__(2);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return Project; });\n\n\nvar __extends = this && this.__extends || function () {\n    var extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (d, b) {\n        d.__proto__ = b;\n    } || function (d, b) {\n        for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() {\n            this.constructor = d;\n        }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n}();\n\n\n\n\n\n\n\nvar s = fi.seco.sparql.SparqlService;\nvar Project = function (_super) {\n    __extends(Project, _super);\n    function Project() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.instanceNS = 'http://ldf.fi/fibra/';\n        _this.schemaNS = 'http://ldf.fi/fibra/schema#';\n        _this.dataModel = new __WEBPACK_IMPORTED_MODULE_1__data_model__[\"a\" /* DataModel */]();\n        _this.autocompletionQuery = __WEBPACK_IMPORTED_MODULE_2__sparql_autocomplete_service__[\"b\" /* SparqlAutocompleteService */].defaultMatchQuery;\n        // TODO: remove\n        _this.treeQuery = __WEBPACK_IMPORTED_MODULE_3__services_sparql_tree_service__[\"b\" /* SparqlTreeService */].getClassTreeQuery;\n        _this.itemQuery = __WEBPACK_IMPORTED_MODULE_4__sparql_item_service__[\"b\" /* SparqlItemService */].getLocalItemPropertiesQuery;\n        _this.deleteItemQuery = __WEBPACK_IMPORTED_MODULE_4__sparql_item_service__[\"b\" /* SparqlItemService */].deleteItemQuery;\n        _this.classQuery = __WEBPACK_IMPORTED_MODULE_1__data_model__[\"a\" /* DataModel */].classQuery;\n        _this.propertyQuery = __WEBPACK_IMPORTED_MODULE_1__data_model__[\"a\" /* DataModel */].propertyQuery;\n        _this.authorityEndpoints = [];\n        _this.archiveEndpoints = [];\n        _this.schemas = [];\n        return _this;\n    }\n    Project.prototype.remoteEndpoints = function () {\n        return this.archiveEndpoints.concat(this.authorityEndpoints);\n    };\n    Project.prototype.asTemplate = function () {\n        var p = new __WEBPACK_IMPORTED_MODULE_5__primary_endpoint_configuration__[\"a\" /* PrimaryEndpointConfiguration */]();\n        p.autocompletionQuery = this.autocompletionQuery;\n        p.itemQuery = this.itemQuery;\n        p.deleteItemQuery = this.deleteItemQuery;\n        p.treeQuery = this.treeQuery;\n        p.propertyQuery = this.propertyQuery;\n        p.classQuery = this.classQuery;\n        return p;\n    };\n    Project.prototype.toTurtle = function (fragmentsById, prefixes) {\n        var _this = this;\n        if (!fragmentsById.has(this.id)) {\n            prefixes['fibra'] = __WEBPACK_IMPORTED_MODULE_6__models_rdf__[\"m\" /* FIBRA */].ns;\n            prefixes['void'] = __WEBPACK_IMPORTED_MODULE_6__models_rdf__[\"o\" /* VOID */].ns;\n            fragmentsById.set(this.id, \"<\" + this.id + \"> a fibra:Project ;\");\n            _super.prototype.toTurtle.call(this, fragmentsById, prefixes);\n            var f_1 = fragmentsById.get(this.id);\n            if (this.schemas.length > 0) {\n                f_1 = f_1 + \"\\nfibra:schema \";\n                this.schemas.forEach(function (ae) {\n                    f_1 = f_1 + (\"<\" + ae.id + \">, \");\n                });\n                f_1 = f_1.substring(0, f_1.length - 2) + ' ;';\n                this.schemas.filter(function (ae) {\n                    return ae.source.sparqlEndpoint !== _this.source.sparqlEndpoint || _this.source.graph !== ae.source.graph;\n                }).forEach(function (ae) {\n                    f_1 = f_1 + (\"\\nfibra:schemaReference [\\n  rdf:value <\" + ae.id + \"> ;\\n  void:sparqlEndpoint <\" + ae.source.sparqlEndpoint + \"> ;\");\n                    if (ae.source.graph) f_1 = f_1 + (\"\\n  fibra:graph <\" + ae.source.graph + \">\");\n                    f_1 = f_1 + \"\\n] ;\";\n                });\n            }\n            if (this.authorityEndpoints.length > 0) {\n                f_1 = f_1 + \"\\nfibra:authorityEndpoint \";\n                this.authorityEndpoints.forEach(function (ae) {\n                    f_1 = f_1 + (\"<\" + ae.id + \">, \");\n                });\n                f_1 = f_1.substring(0, f_1.length - 2) + ' ;';\n                this.authorityEndpoints.filter(function (ae) {\n                    return ae.source.sparqlEndpoint !== _this.source.sparqlEndpoint || _this.source.graph !== ae.source.graph;\n                }).forEach(function (ae) {\n                    f_1 = f_1 + (\"\\nfibra:authorityEndpointReference [\\n  rdf:value <\" + ae.id + \"> ;\\n  void:sparqlEndpoint <\" + ae.source.sparqlEndpoint + \"> ;\");\n                    if (ae.source.graph) f_1 = f_1 + (\"\\n  fibra:graph <\" + ae.source.graph + \">\");\n                    f_1 = f_1 + \"\\n] ;\";\n                });\n            }\n            if (this.archiveEndpoints.length > 0) {\n                f_1 = f_1 + \"\\nfibra:archiveEndpoint \";\n                this.archiveEndpoints.forEach(function (ae) {\n                    f_1 = f_1 + (\"<\" + ae.id + \">, \");\n                });\n                f_1 = f_1.substring(0, f_1.length - 2) + ' ;';\n                this.archiveEndpoints.filter(function (ae) {\n                    return ae.source.sparqlEndpoint !== _this.source.sparqlEndpoint || _this.source.graph !== ae.source.graph;\n                }).forEach(function (ae) {\n                    f_1 = f_1 + (\"\\nfibra:archiveEndpointReference [\\n  rdf:value <\" + ae.id + \"> ;\\n  void:sparqlEndpoint <\" + ae.source.sparqlEndpoint + \"> ;\");\n                    if (ae.source.graph) f_1 = f_1 + (\"\\n  fibra:graph <\" + ae.source.graph + \">\");\n                    f_1 = f_1 + \"\\n] ;\";\n                });\n            }\n            if (this.graph) f_1 = f_1 + (\"\\nfibra:graph <\" + this.graph + \"> ;\");\n            f_1 = f_1 + (\"\\nfibra:autocompletionQuery \" + s.stringToSPARQLString(this.autocompletionQuery) + \" ;\\nfibra:treeQuery \" + s.stringToSPARQLString(this.treeQuery) + \" ;\\nfibra:itemQuery \" + s.stringToSPARQLString(this.itemQuery) + \" ;\\nfibra:deleteItemQuery \" + s.stringToSPARQLString(this.deleteItemQuery) + \" ;\\nfibra:classQuery \" + s.stringToSPARQLString(this.classQuery) + \" ;\\nfibra:propertyQuery \" + s.stringToSPARQLString(this.propertyQuery) + \" ;\\nvoid:sparqlEndpoint <\" + this.endpoint + \"> ;\\nfibra:updateEndpoint <\" + this.updateEndpoint + \"> ;\\nfibra:graphStoreEndpoint <\" + this.graphStoreEndpoint + \"> ;\\nfibra:schemaNS \" + s.stringToSPARQLString(this.schemaNS) + \" ;\\nfibra:instanceNS \" + s.stringToSPARQLString(this.instanceNS) + \" .\");\n            fragmentsById.set(this.id, f_1);\n        }\n    };\n    return Project;\n}(__WEBPACK_IMPORTED_MODULE_0__models_citable__[\"b\" /* Citable */]);\n\nProject.listProjectsQuery = \"PREFIX fibra: <http://hdlab.stanford.edu/fibra/ontology#>\\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\\nPREFIX dcterms: <http://purl.org/dc/terms/>\\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\\nPREFIX void: <http://rdfs.org/ns/void#>\\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\\nSELECT ?id ?labels ?descriptions ?url ?rightsHolders ?rightsHolders_labels ?rightsHolders_descriptions ?rightsHolder_surl ?rightsHolders_order ?instanceNS ?schemaNS ?endpoint ?graphStoreEndpoint ?updateEndpoint ?graph ?autocompletionQuery ?treeQuery ?itemQuery ?deleteItemQuery ?authorityEndpoints ?authorityEndpoints_source_graph ?authorityEndpoints_source_sparqlEndpoint ?archiveEndpoints ?archiveEndpoints_source_graph ?archiveEndpoints_source_sparqlEndpoint ?schemas ?schemas_source_graph ?schemas_source_sparqlEndpoint {\\n# STARTGRAPH\\n  ?id a fibra:Project .\\n  {\\n    ?id skos:prefLabel ?labels\\n  } UNION {\\n    ?id fibra:instanceNS ?instanceNS .\\n    ?id fibra:schemaNS ?schemaNS .\\n    ?id void:sparqlEndpoint ?endpoint .\\n    ?id fibra:updateEndpoint ?updateEndpoint .\\n    ?id fibra:graphStoreEndpoint ?graphStoreEndpoint .\\n    ?id fibra:autocompletionQuery ?autocompletionQuery .\\n    ?id fibra:treeQuery ?treeQuery .\\n    ?id fibra:itemQuery ?itemQuery .\\n    ?id fibra:deleteItemQuery ?deleteItemQuery .\\n    OPTIONAL { ?id fibra:graph ?graph }\\n  } UNION {\\n    ?id foaf:homepage ?url .\\n  } UNION {\\n    ?id fibra:schema ?schemas\\n  } UNION {\\n    ?id fibra:schemaReference ?ar .\\n    ?ar rdf:value ?schemas .\\n    ?ar void:sparqlEndpoint ?schemas_source_sparqlEndpoint .\\n    OPTIONAL { ?ar fibra:graph ?schemas_source_graph }\\n  } UNION {\\n    ?id fibra:authorityEndpoint ?authorityEndpoints\\n  } UNION {\\n    ?id fibra:authorityEndpointReference ?ar .\\n    ?ar rdf:value ?authorityEndpoints .\\n    ?ar void:sparqlEndpoint ?authorityEndpoints_source_sparqlEndpoint .\\n    OPTIONAL { ?ar fibra:graph ?authorityEndpoints_source_graph }\\n  } UNION {\\n    ?id fibra:archiveEndpoint ?archiveEndpoints\\n  } UNION {\\n    ?id fibra:archiveEndpointReference ?ar .\\n    ?ar rdf:value ?archiveEndpoints .\\n    ?ar void:sparqlEndpoint ?archiveEndpoints_source_sparqlEndpoint .\\n    OPTIONAL { ?ar fibra:graph ?archiveEndpoints_source_graph }\\n  } UNION {\\n    ?id dcterms:description ?descriptions\\n  } UNION {\\n    {\\n      ?id dcterms:rightsHolder ?rightsHolders\\n    } UNION {\\n      ?id fibra:qualifiedAssertion ?qa .\\n      ?qa rdf:predicate dcterms:rightsHolder .\\n      ?qa rdf:object ?rightsHolders .\\n      OPTIONAL { ?qa fibra:order ?rightsHolders_order }\\n    }\\n    {\\n      ?rightsHolders skos:prefLabel ?rightsHolders_labels\\n    } UNION {\\n      ?rightsHolders foaf:homepage ?rightsHolders_url\\n    } UNION {\\n      ?rightsHolders dcterms:description ?rightsHolders_descriptions\\n    }\\n  }\\n# ENDGRAPH\\n}\";\nProject.projectQuery = \"PREFIX fibra: <http://hdlab.stanford.edu/fibra/ontology#>\\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\\nPREFIX dcterms: <http://purl.org/dc/terms/>\\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\\nPREFIX void: <http://rdfs.org/ns/void#>\\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\\nSELECT ?labels ?descriptions ?url ?rightsHolders ?rightsHolders_labels ?rightsHolders_descriptions ?rightsHolder_surl ?rightsHolders_order ?instanceNS ?schemaNS ?endpoint ?graphStoreEndpoint ?updateEndpoint ?graph ?autocompletionQuery ?treeQuery ?itemQuery ?deleteItemQuery ?authorityEndpoints ?authorityEndpoints_source_graph ?authorityEndpoints_source_sparqlEndpoint ?archiveEndpoints ?archiveEndpoints_source_graph ?archiveEndpoints_source_sparqlEndpoint ?schemas ?schemas_source_graph ?schemas_source_sparqlEndpoint {\\n# STARTGRAPH\\n  {\\n    <ID> skos:prefLabel ?labels\\n  } UNION {\\n    <ID> fibra:instanceNS ?instanceNS .\\n    <ID> fibra:schemaNS ?schemaNS .\\n    <ID> void:sparqlEndpoint ?endpoint .\\n    <ID> fibra:updateEndpoint ?updateEndpoint .\\n    <ID> fibra:graphStoreEndpoint ?graphStoreEndpoint .\\n    <ID> fibra:autocompletionQuery ?autocompletionQuery .\\n    <ID> fibra:treeQuery ?treeQuery .\\n    <ID> fibra:itemQuery ?itemQuery .\\n    <ID> fibra:deleteItemQuery ?deleteItemQuery .\\n    OPTIONAL { <ID> fibra:graph ?graph }\\n  } UNION {\\n    <ID> foaf:homepage ?url .\\n  } UNION {\\n    <ID> fibra:schema ?schemas\\n  } UNION {\\n    <ID> fibra:schemaReference ?ar .\\n    ?ar rdf:value ?schemas .\\n    ?ar void:sparqlEndpoint ?schemas_source_sparqlEndpoint .\\n    OPTIONAL { ?ar fibra:graph ?schemas_source_graph }\\n  } UNION {\\n    <ID> fibra:authorityEndpoint ?authorityEndpoints\\n  } UNION {\\n    <ID> fibra:authorityEndpointReference ?ar .\\n    ?ar rdf:value ?authorityEndpoints .\\n    ?ar void:sparqlEndpoint ?authorityEndpoints_source_sparqlEndpoint .\\n    OPTIONAL { ?ar fibra:graph ?authorityEndpoints_source_graph }\\n  } UNION {\\n    <ID> fibra:archiveEndpoint ?archiveEndpoints\\n  } UNION {\\n    <ID> fibra:archiveEndpointReference ?ar .\\n    ?ar rdf:value ?archiveEndpoints .\\n    ?ar void:sparqlEndpoint ?archiveEndpoints_source_sparqlEndpoint .\\n    OPTIONAL { ?ar fibra:graph ?archiveEndpoints_source_graph }\\n  } UNION {\\n    <ID> dcterms:description ?descriptions\\n  } UNION {\\n    {\\n      <ID> dcterms:rightsHolder ?rightsHolders\\n    } UNION {\\n      <ID> fibra:qualifiedAssertion ?qa .\\n      ?qa rdf:predicate dcterms:rightsHolder .\\n      ?qa rdf:object ?rightsHolders .\\n      OPTIONAL { ?qa fibra:order ?rightsHolders_order }\\n    }\\n    {\\n      ?rightsHolders skos:prefLabel ?rightsHolders_labels\\n    } UNION {\\n      ?rightsHolders foaf:homepage ?rightsHolders_url\\n    } UNION {\\n      ?rightsHolders dcterms:description ?rightsHolders_descriptions\\n    }\\n  }\\n# ENDGRAPH\\n}\";//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcHAvc2VydmljZXMvcHJvamVjdC1zZXJ2aWNlL3Byb2plY3QudHM/N2Q1NiJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmltcG9ydCB7IENpdGFibGUgfSBmcm9tICcuLi8uLi9tb2RlbHMvY2l0YWJsZSc7XG5pbXBvcnQgeyBEYXRhTW9kZWwgfSBmcm9tICcuL2RhdGEtbW9kZWwnO1xuaW1wb3J0IHsgU3BhcnFsQXV0b2NvbXBsZXRlU2VydmljZSB9IGZyb20gJy4uL3NwYXJxbC1hdXRvY29tcGxldGUtc2VydmljZSc7XG5pbXBvcnQgeyBTcGFycWxUcmVlU2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL3NwYXJxbC10cmVlLXNlcnZpY2UnO1xuaW1wb3J0IHsgU3BhcnFsSXRlbVNlcnZpY2UgfSBmcm9tICcuLi9zcGFycWwtaXRlbS1zZXJ2aWNlJztcbmltcG9ydCB7IFByaW1hcnlFbmRwb2ludENvbmZpZ3VyYXRpb24gfSBmcm9tICcuL3ByaW1hcnktZW5kcG9pbnQtY29uZmlndXJhdGlvbic7XG5pbXBvcnQgeyBGSUJSQSwgVk9JRCB9IGZyb20gJy4uLy4uL21vZGVscy9yZGYnO1xudmFyIHMgPSBmaS5zZWNvLnNwYXJxbC5TcGFycWxTZXJ2aWNlO1xudmFyIFByb2plY3QgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhQcm9qZWN0LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFByb2plY3QoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5pbnN0YW5jZU5TID0gJ2h0dHA6Ly9sZGYuZmkvZmlicmEvJztcbiAgICAgICAgX3RoaXMuc2NoZW1hTlMgPSAnaHR0cDovL2xkZi5maS9maWJyYS9zY2hlbWEjJztcbiAgICAgICAgX3RoaXMuZGF0YU1vZGVsID0gbmV3IERhdGFNb2RlbCgpO1xuICAgICAgICBfdGhpcy5hdXRvY29tcGxldGlvblF1ZXJ5ID0gU3BhcnFsQXV0b2NvbXBsZXRlU2VydmljZS5kZWZhdWx0TWF0Y2hRdWVyeTtcbiAgICAgICAgLy8gVE9ETzogcmVtb3ZlXG4gICAgICAgIF90aGlzLnRyZWVRdWVyeSA9IFNwYXJxbFRyZWVTZXJ2aWNlLmdldENsYXNzVHJlZVF1ZXJ5O1xuICAgICAgICBfdGhpcy5pdGVtUXVlcnkgPSBTcGFycWxJdGVtU2VydmljZS5nZXRMb2NhbEl0ZW1Qcm9wZXJ0aWVzUXVlcnk7XG4gICAgICAgIF90aGlzLmRlbGV0ZUl0ZW1RdWVyeSA9IFNwYXJxbEl0ZW1TZXJ2aWNlLmRlbGV0ZUl0ZW1RdWVyeTtcbiAgICAgICAgX3RoaXMuY2xhc3NRdWVyeSA9IERhdGFNb2RlbC5jbGFzc1F1ZXJ5O1xuICAgICAgICBfdGhpcy5wcm9wZXJ0eVF1ZXJ5ID0gRGF0YU1vZGVsLnByb3BlcnR5UXVlcnk7XG4gICAgICAgIF90aGlzLmF1dGhvcml0eUVuZHBvaW50cyA9IFtdO1xuICAgICAgICBfdGhpcy5hcmNoaXZlRW5kcG9pbnRzID0gW107XG4gICAgICAgIF90aGlzLnNjaGVtYXMgPSBbXTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBQcm9qZWN0LnByb3RvdHlwZS5yZW1vdGVFbmRwb2ludHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFyY2hpdmVFbmRwb2ludHMuY29uY2F0KHRoaXMuYXV0aG9yaXR5RW5kcG9pbnRzKTtcbiAgICB9O1xuICAgIFByb2plY3QucHJvdG90eXBlLmFzVGVtcGxhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBwID0gbmV3IFByaW1hcnlFbmRwb2ludENvbmZpZ3VyYXRpb24oKTtcbiAgICAgICAgcC5hdXRvY29tcGxldGlvblF1ZXJ5ID0gdGhpcy5hdXRvY29tcGxldGlvblF1ZXJ5O1xuICAgICAgICBwLml0ZW1RdWVyeSA9IHRoaXMuaXRlbVF1ZXJ5O1xuICAgICAgICBwLmRlbGV0ZUl0ZW1RdWVyeSA9IHRoaXMuZGVsZXRlSXRlbVF1ZXJ5O1xuICAgICAgICBwLnRyZWVRdWVyeSA9IHRoaXMudHJlZVF1ZXJ5O1xuICAgICAgICBwLnByb3BlcnR5UXVlcnkgPSB0aGlzLnByb3BlcnR5UXVlcnk7XG4gICAgICAgIHAuY2xhc3NRdWVyeSA9IHRoaXMuY2xhc3NRdWVyeTtcbiAgICAgICAgcmV0dXJuIHA7XG4gICAgfTtcbiAgICBQcm9qZWN0LnByb3RvdHlwZS50b1R1cnRsZSA9IGZ1bmN0aW9uIChmcmFnbWVudHNCeUlkLCBwcmVmaXhlcykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoIWZyYWdtZW50c0J5SWQuaGFzKHRoaXMuaWQpKSB7XG4gICAgICAgICAgICBwcmVmaXhlc1snZmlicmEnXSA9IEZJQlJBLm5zO1xuICAgICAgICAgICAgcHJlZml4ZXNbJ3ZvaWQnXSA9IFZPSUQubnM7XG4gICAgICAgICAgICBmcmFnbWVudHNCeUlkLnNldCh0aGlzLmlkLCBcIjxcIiArIHRoaXMuaWQgKyBcIj4gYSBmaWJyYTpQcm9qZWN0IDtcIik7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLnRvVHVydGxlLmNhbGwodGhpcywgZnJhZ21lbnRzQnlJZCwgcHJlZml4ZXMpO1xuICAgICAgICAgICAgdmFyIGZfMSA9IGZyYWdtZW50c0J5SWQuZ2V0KHRoaXMuaWQpO1xuICAgICAgICAgICAgaWYgKHRoaXMuc2NoZW1hcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgZl8xID0gZl8xICsgXCJcXG5maWJyYTpzY2hlbWEgXCI7XG4gICAgICAgICAgICAgICAgdGhpcy5zY2hlbWFzLmZvckVhY2goZnVuY3Rpb24gKGFlKSB7XG4gICAgICAgICAgICAgICAgICAgIGZfMSA9IGZfMSArIChcIjxcIiArIGFlLmlkICsgXCI+LCBcIik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZl8xID0gZl8xLnN1YnN0cmluZygwLCBmXzEubGVuZ3RoIC0gMikgKyAnIDsnO1xuICAgICAgICAgICAgICAgIHRoaXMuc2NoZW1hc1xuICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChhZSkgeyByZXR1cm4gYWUuc291cmNlLnNwYXJxbEVuZHBvaW50ICE9PSBfdGhpcy5zb3VyY2Uuc3BhcnFsRW5kcG9pbnQgfHwgX3RoaXMuc291cmNlLmdyYXBoICE9PSBhZS5zb3VyY2UuZ3JhcGg7IH0pXG4gICAgICAgICAgICAgICAgICAgIC5mb3JFYWNoKGZ1bmN0aW9uIChhZSkge1xuICAgICAgICAgICAgICAgICAgICBmXzEgPSBmXzEgKyAoXCJcXG5maWJyYTpzY2hlbWFSZWZlcmVuY2UgW1xcbiAgcmRmOnZhbHVlIDxcIiArIGFlLmlkICsgXCI+IDtcXG4gIHZvaWQ6c3BhcnFsRW5kcG9pbnQgPFwiICsgYWUuc291cmNlLnNwYXJxbEVuZHBvaW50ICsgXCI+IDtcIik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhZS5zb3VyY2UuZ3JhcGgpXG4gICAgICAgICAgICAgICAgICAgICAgICBmXzEgPSBmXzEgKyAoXCJcXG4gIGZpYnJhOmdyYXBoIDxcIiArIGFlLnNvdXJjZS5ncmFwaCArIFwiPlwiKTtcbiAgICAgICAgICAgICAgICAgICAgZl8xID0gZl8xICsgXCJcXG5dIDtcIjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmF1dGhvcml0eUVuZHBvaW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgZl8xID0gZl8xICsgXCJcXG5maWJyYTphdXRob3JpdHlFbmRwb2ludCBcIjtcbiAgICAgICAgICAgICAgICB0aGlzLmF1dGhvcml0eUVuZHBvaW50cy5mb3JFYWNoKGZ1bmN0aW9uIChhZSkge1xuICAgICAgICAgICAgICAgICAgICBmXzEgPSBmXzEgKyAoXCI8XCIgKyBhZS5pZCArIFwiPiwgXCIpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGZfMSA9IGZfMS5zdWJzdHJpbmcoMCwgZl8xLmxlbmd0aCAtIDIpICsgJyA7JztcbiAgICAgICAgICAgICAgICB0aGlzLmF1dGhvcml0eUVuZHBvaW50c1xuICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChhZSkgeyByZXR1cm4gYWUuc291cmNlLnNwYXJxbEVuZHBvaW50ICE9PSBfdGhpcy5zb3VyY2Uuc3BhcnFsRW5kcG9pbnQgfHwgX3RoaXMuc291cmNlLmdyYXBoICE9PSBhZS5zb3VyY2UuZ3JhcGg7IH0pXG4gICAgICAgICAgICAgICAgICAgIC5mb3JFYWNoKGZ1bmN0aW9uIChhZSkge1xuICAgICAgICAgICAgICAgICAgICBmXzEgPSBmXzEgKyAoXCJcXG5maWJyYTphdXRob3JpdHlFbmRwb2ludFJlZmVyZW5jZSBbXFxuICByZGY6dmFsdWUgPFwiICsgYWUuaWQgKyBcIj4gO1xcbiAgdm9pZDpzcGFycWxFbmRwb2ludCA8XCIgKyBhZS5zb3VyY2Uuc3BhcnFsRW5kcG9pbnQgKyBcIj4gO1wiKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFlLnNvdXJjZS5ncmFwaClcbiAgICAgICAgICAgICAgICAgICAgICAgIGZfMSA9IGZfMSArIChcIlxcbiAgZmlicmE6Z3JhcGggPFwiICsgYWUuc291cmNlLmdyYXBoICsgXCI+XCIpO1xuICAgICAgICAgICAgICAgICAgICBmXzEgPSBmXzEgKyBcIlxcbl0gO1wiO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuYXJjaGl2ZUVuZHBvaW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgZl8xID0gZl8xICsgXCJcXG5maWJyYTphcmNoaXZlRW5kcG9pbnQgXCI7XG4gICAgICAgICAgICAgICAgdGhpcy5hcmNoaXZlRW5kcG9pbnRzLmZvckVhY2goZnVuY3Rpb24gKGFlKSB7XG4gICAgICAgICAgICAgICAgICAgIGZfMSA9IGZfMSArIChcIjxcIiArIGFlLmlkICsgXCI+LCBcIik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZl8xID0gZl8xLnN1YnN0cmluZygwLCBmXzEubGVuZ3RoIC0gMikgKyAnIDsnO1xuICAgICAgICAgICAgICAgIHRoaXMuYXJjaGl2ZUVuZHBvaW50c1xuICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChhZSkgeyByZXR1cm4gYWUuc291cmNlLnNwYXJxbEVuZHBvaW50ICE9PSBfdGhpcy5zb3VyY2Uuc3BhcnFsRW5kcG9pbnQgfHwgX3RoaXMuc291cmNlLmdyYXBoICE9PSBhZS5zb3VyY2UuZ3JhcGg7IH0pXG4gICAgICAgICAgICAgICAgICAgIC5mb3JFYWNoKGZ1bmN0aW9uIChhZSkge1xuICAgICAgICAgICAgICAgICAgICBmXzEgPSBmXzEgKyAoXCJcXG5maWJyYTphcmNoaXZlRW5kcG9pbnRSZWZlcmVuY2UgW1xcbiAgcmRmOnZhbHVlIDxcIiArIGFlLmlkICsgXCI+IDtcXG4gIHZvaWQ6c3BhcnFsRW5kcG9pbnQgPFwiICsgYWUuc291cmNlLnNwYXJxbEVuZHBvaW50ICsgXCI+IDtcIik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhZS5zb3VyY2UuZ3JhcGgpXG4gICAgICAgICAgICAgICAgICAgICAgICBmXzEgPSBmXzEgKyAoXCJcXG4gIGZpYnJhOmdyYXBoIDxcIiArIGFlLnNvdXJjZS5ncmFwaCArIFwiPlwiKTtcbiAgICAgICAgICAgICAgICAgICAgZl8xID0gZl8xICsgXCJcXG5dIDtcIjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmdyYXBoKVxuICAgICAgICAgICAgICAgIGZfMSA9IGZfMSArIChcIlxcbmZpYnJhOmdyYXBoIDxcIiArIHRoaXMuZ3JhcGggKyBcIj4gO1wiKTtcbiAgICAgICAgICAgIGZfMSA9IGZfMSArIChcIlxcbmZpYnJhOmF1dG9jb21wbGV0aW9uUXVlcnkgXCIgKyBzLnN0cmluZ1RvU1BBUlFMU3RyaW5nKHRoaXMuYXV0b2NvbXBsZXRpb25RdWVyeSkgKyBcIiA7XFxuZmlicmE6dHJlZVF1ZXJ5IFwiICsgcy5zdHJpbmdUb1NQQVJRTFN0cmluZyh0aGlzLnRyZWVRdWVyeSkgKyBcIiA7XFxuZmlicmE6aXRlbVF1ZXJ5IFwiICsgcy5zdHJpbmdUb1NQQVJRTFN0cmluZyh0aGlzLml0ZW1RdWVyeSkgKyBcIiA7XFxuZmlicmE6ZGVsZXRlSXRlbVF1ZXJ5IFwiICsgcy5zdHJpbmdUb1NQQVJRTFN0cmluZyh0aGlzLmRlbGV0ZUl0ZW1RdWVyeSkgKyBcIiA7XFxuZmlicmE6Y2xhc3NRdWVyeSBcIiArIHMuc3RyaW5nVG9TUEFSUUxTdHJpbmcodGhpcy5jbGFzc1F1ZXJ5KSArIFwiIDtcXG5maWJyYTpwcm9wZXJ0eVF1ZXJ5IFwiICsgcy5zdHJpbmdUb1NQQVJRTFN0cmluZyh0aGlzLnByb3BlcnR5UXVlcnkpICsgXCIgO1xcbnZvaWQ6c3BhcnFsRW5kcG9pbnQgPFwiICsgdGhpcy5lbmRwb2ludCArIFwiPiA7XFxuZmlicmE6dXBkYXRlRW5kcG9pbnQgPFwiICsgdGhpcy51cGRhdGVFbmRwb2ludCArIFwiPiA7XFxuZmlicmE6Z3JhcGhTdG9yZUVuZHBvaW50IDxcIiArIHRoaXMuZ3JhcGhTdG9yZUVuZHBvaW50ICsgXCI+IDtcXG5maWJyYTpzY2hlbWFOUyBcIiArIHMuc3RyaW5nVG9TUEFSUUxTdHJpbmcodGhpcy5zY2hlbWFOUykgKyBcIiA7XFxuZmlicmE6aW5zdGFuY2VOUyBcIiArIHMuc3RyaW5nVG9TUEFSUUxTdHJpbmcodGhpcy5pbnN0YW5jZU5TKSArIFwiIC5cIik7XG4gICAgICAgICAgICBmcmFnbWVudHNCeUlkLnNldCh0aGlzLmlkLCBmXzEpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gUHJvamVjdDtcbn0oQ2l0YWJsZSkpO1xuZXhwb3J0IHsgUHJvamVjdCB9O1xuUHJvamVjdC5saXN0UHJvamVjdHNRdWVyeSA9IFwiUFJFRklYIGZpYnJhOiA8aHR0cDovL2hkbGFiLnN0YW5mb3JkLmVkdS9maWJyYS9vbnRvbG9neSM+XFxuUFJFRklYIHNrb3M6IDxodHRwOi8vd3d3LnczLm9yZy8yMDA0LzAyL3Nrb3MvY29yZSM+XFxuUFJFRklYIGRjdGVybXM6IDxodHRwOi8vcHVybC5vcmcvZGMvdGVybXMvPlxcblBSRUZJWCBmb2FmOiA8aHR0cDovL3htbG5zLmNvbS9mb2FmLzAuMS8+XFxuUFJFRklYIHZvaWQ6IDxodHRwOi8vcmRmcy5vcmcvbnMvdm9pZCM+XFxuUFJFRklYIHJkZjogPGh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyM+XFxuU0VMRUNUID9pZCA/bGFiZWxzID9kZXNjcmlwdGlvbnMgP3VybCA/cmlnaHRzSG9sZGVycyA/cmlnaHRzSG9sZGVyc19sYWJlbHMgP3JpZ2h0c0hvbGRlcnNfZGVzY3JpcHRpb25zID9yaWdodHNIb2xkZXJfc3VybCA/cmlnaHRzSG9sZGVyc19vcmRlciA/aW5zdGFuY2VOUyA/c2NoZW1hTlMgP2VuZHBvaW50ID9ncmFwaFN0b3JlRW5kcG9pbnQgP3VwZGF0ZUVuZHBvaW50ID9ncmFwaCA/YXV0b2NvbXBsZXRpb25RdWVyeSA/dHJlZVF1ZXJ5ID9pdGVtUXVlcnkgP2RlbGV0ZUl0ZW1RdWVyeSA/YXV0aG9yaXR5RW5kcG9pbnRzID9hdXRob3JpdHlFbmRwb2ludHNfc291cmNlX2dyYXBoID9hdXRob3JpdHlFbmRwb2ludHNfc291cmNlX3NwYXJxbEVuZHBvaW50ID9hcmNoaXZlRW5kcG9pbnRzID9hcmNoaXZlRW5kcG9pbnRzX3NvdXJjZV9ncmFwaCA/YXJjaGl2ZUVuZHBvaW50c19zb3VyY2Vfc3BhcnFsRW5kcG9pbnQgP3NjaGVtYXMgP3NjaGVtYXNfc291cmNlX2dyYXBoID9zY2hlbWFzX3NvdXJjZV9zcGFycWxFbmRwb2ludCB7XFxuIyBTVEFSVEdSQVBIXFxuICA/aWQgYSBmaWJyYTpQcm9qZWN0IC5cXG4gIHtcXG4gICAgP2lkIHNrb3M6cHJlZkxhYmVsID9sYWJlbHNcXG4gIH0gVU5JT04ge1xcbiAgICA/aWQgZmlicmE6aW5zdGFuY2VOUyA/aW5zdGFuY2VOUyAuXFxuICAgID9pZCBmaWJyYTpzY2hlbWFOUyA/c2NoZW1hTlMgLlxcbiAgICA/aWQgdm9pZDpzcGFycWxFbmRwb2ludCA/ZW5kcG9pbnQgLlxcbiAgICA/aWQgZmlicmE6dXBkYXRlRW5kcG9pbnQgP3VwZGF0ZUVuZHBvaW50IC5cXG4gICAgP2lkIGZpYnJhOmdyYXBoU3RvcmVFbmRwb2ludCA/Z3JhcGhTdG9yZUVuZHBvaW50IC5cXG4gICAgP2lkIGZpYnJhOmF1dG9jb21wbGV0aW9uUXVlcnkgP2F1dG9jb21wbGV0aW9uUXVlcnkgLlxcbiAgICA/aWQgZmlicmE6dHJlZVF1ZXJ5ID90cmVlUXVlcnkgLlxcbiAgICA/aWQgZmlicmE6aXRlbVF1ZXJ5ID9pdGVtUXVlcnkgLlxcbiAgICA/aWQgZmlicmE6ZGVsZXRlSXRlbVF1ZXJ5ID9kZWxldGVJdGVtUXVlcnkgLlxcbiAgICBPUFRJT05BTCB7ID9pZCBmaWJyYTpncmFwaCA/Z3JhcGggfVxcbiAgfSBVTklPTiB7XFxuICAgID9pZCBmb2FmOmhvbWVwYWdlID91cmwgLlxcbiAgfSBVTklPTiB7XFxuICAgID9pZCBmaWJyYTpzY2hlbWEgP3NjaGVtYXNcXG4gIH0gVU5JT04ge1xcbiAgICA/aWQgZmlicmE6c2NoZW1hUmVmZXJlbmNlID9hciAuXFxuICAgID9hciByZGY6dmFsdWUgP3NjaGVtYXMgLlxcbiAgICA/YXIgdm9pZDpzcGFycWxFbmRwb2ludCA/c2NoZW1hc19zb3VyY2Vfc3BhcnFsRW5kcG9pbnQgLlxcbiAgICBPUFRJT05BTCB7ID9hciBmaWJyYTpncmFwaCA/c2NoZW1hc19zb3VyY2VfZ3JhcGggfVxcbiAgfSBVTklPTiB7XFxuICAgID9pZCBmaWJyYTphdXRob3JpdHlFbmRwb2ludCA/YXV0aG9yaXR5RW5kcG9pbnRzXFxuICB9IFVOSU9OIHtcXG4gICAgP2lkIGZpYnJhOmF1dGhvcml0eUVuZHBvaW50UmVmZXJlbmNlID9hciAuXFxuICAgID9hciByZGY6dmFsdWUgP2F1dGhvcml0eUVuZHBvaW50cyAuXFxuICAgID9hciB2b2lkOnNwYXJxbEVuZHBvaW50ID9hdXRob3JpdHlFbmRwb2ludHNfc291cmNlX3NwYXJxbEVuZHBvaW50IC5cXG4gICAgT1BUSU9OQUwgeyA/YXIgZmlicmE6Z3JhcGggP2F1dGhvcml0eUVuZHBvaW50c19zb3VyY2VfZ3JhcGggfVxcbiAgfSBVTklPTiB7XFxuICAgID9pZCBmaWJyYTphcmNoaXZlRW5kcG9pbnQgP2FyY2hpdmVFbmRwb2ludHNcXG4gIH0gVU5JT04ge1xcbiAgICA/aWQgZmlicmE6YXJjaGl2ZUVuZHBvaW50UmVmZXJlbmNlID9hciAuXFxuICAgID9hciByZGY6dmFsdWUgP2FyY2hpdmVFbmRwb2ludHMgLlxcbiAgICA/YXIgdm9pZDpzcGFycWxFbmRwb2ludCA/YXJjaGl2ZUVuZHBvaW50c19zb3VyY2Vfc3BhcnFsRW5kcG9pbnQgLlxcbiAgICBPUFRJT05BTCB7ID9hciBmaWJyYTpncmFwaCA/YXJjaGl2ZUVuZHBvaW50c19zb3VyY2VfZ3JhcGggfVxcbiAgfSBVTklPTiB7XFxuICAgID9pZCBkY3Rlcm1zOmRlc2NyaXB0aW9uID9kZXNjcmlwdGlvbnNcXG4gIH0gVU5JT04ge1xcbiAgICB7XFxuICAgICAgP2lkIGRjdGVybXM6cmlnaHRzSG9sZGVyID9yaWdodHNIb2xkZXJzXFxuICAgIH0gVU5JT04ge1xcbiAgICAgID9pZCBmaWJyYTpxdWFsaWZpZWRBc3NlcnRpb24gP3FhIC5cXG4gICAgICA/cWEgcmRmOnByZWRpY2F0ZSBkY3Rlcm1zOnJpZ2h0c0hvbGRlciAuXFxuICAgICAgP3FhIHJkZjpvYmplY3QgP3JpZ2h0c0hvbGRlcnMgLlxcbiAgICAgIE9QVElPTkFMIHsgP3FhIGZpYnJhOm9yZGVyID9yaWdodHNIb2xkZXJzX29yZGVyIH1cXG4gICAgfVxcbiAgICB7XFxuICAgICAgP3JpZ2h0c0hvbGRlcnMgc2tvczpwcmVmTGFiZWwgP3JpZ2h0c0hvbGRlcnNfbGFiZWxzXFxuICAgIH0gVU5JT04ge1xcbiAgICAgID9yaWdodHNIb2xkZXJzIGZvYWY6aG9tZXBhZ2UgP3JpZ2h0c0hvbGRlcnNfdXJsXFxuICAgIH0gVU5JT04ge1xcbiAgICAgID9yaWdodHNIb2xkZXJzIGRjdGVybXM6ZGVzY3JpcHRpb24gP3JpZ2h0c0hvbGRlcnNfZGVzY3JpcHRpb25zXFxuICAgIH1cXG4gIH1cXG4jIEVOREdSQVBIXFxufVwiO1xuUHJvamVjdC5wcm9qZWN0UXVlcnkgPSBcIlBSRUZJWCBmaWJyYTogPGh0dHA6Ly9oZGxhYi5zdGFuZm9yZC5lZHUvZmlicmEvb250b2xvZ3kjPlxcblBSRUZJWCBza29zOiA8aHR0cDovL3d3dy53My5vcmcvMjAwNC8wMi9za29zL2NvcmUjPlxcblBSRUZJWCBkY3Rlcm1zOiA8aHR0cDovL3B1cmwub3JnL2RjL3Rlcm1zLz5cXG5QUkVGSVggZm9hZjogPGh0dHA6Ly94bWxucy5jb20vZm9hZi8wLjEvPlxcblBSRUZJWCB2b2lkOiA8aHR0cDovL3JkZnMub3JnL25zL3ZvaWQjPlxcblBSRUZJWCByZGY6IDxodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjPlxcblNFTEVDVCA/bGFiZWxzID9kZXNjcmlwdGlvbnMgP3VybCA/cmlnaHRzSG9sZGVycyA/cmlnaHRzSG9sZGVyc19sYWJlbHMgP3JpZ2h0c0hvbGRlcnNfZGVzY3JpcHRpb25zID9yaWdodHNIb2xkZXJfc3VybCA/cmlnaHRzSG9sZGVyc19vcmRlciA/aW5zdGFuY2VOUyA/c2NoZW1hTlMgP2VuZHBvaW50ID9ncmFwaFN0b3JlRW5kcG9pbnQgP3VwZGF0ZUVuZHBvaW50ID9ncmFwaCA/YXV0b2NvbXBsZXRpb25RdWVyeSA/dHJlZVF1ZXJ5ID9pdGVtUXVlcnkgP2RlbGV0ZUl0ZW1RdWVyeSA/YXV0aG9yaXR5RW5kcG9pbnRzID9hdXRob3JpdHlFbmRwb2ludHNfc291cmNlX2dyYXBoID9hdXRob3JpdHlFbmRwb2ludHNfc291cmNlX3NwYXJxbEVuZHBvaW50ID9hcmNoaXZlRW5kcG9pbnRzID9hcmNoaXZlRW5kcG9pbnRzX3NvdXJjZV9ncmFwaCA/YXJjaGl2ZUVuZHBvaW50c19zb3VyY2Vfc3BhcnFsRW5kcG9pbnQgP3NjaGVtYXMgP3NjaGVtYXNfc291cmNlX2dyYXBoID9zY2hlbWFzX3NvdXJjZV9zcGFycWxFbmRwb2ludCB7XFxuIyBTVEFSVEdSQVBIXFxuICB7XFxuICAgIDxJRD4gc2tvczpwcmVmTGFiZWwgP2xhYmVsc1xcbiAgfSBVTklPTiB7XFxuICAgIDxJRD4gZmlicmE6aW5zdGFuY2VOUyA/aW5zdGFuY2VOUyAuXFxuICAgIDxJRD4gZmlicmE6c2NoZW1hTlMgP3NjaGVtYU5TIC5cXG4gICAgPElEPiB2b2lkOnNwYXJxbEVuZHBvaW50ID9lbmRwb2ludCAuXFxuICAgIDxJRD4gZmlicmE6dXBkYXRlRW5kcG9pbnQgP3VwZGF0ZUVuZHBvaW50IC5cXG4gICAgPElEPiBmaWJyYTpncmFwaFN0b3JlRW5kcG9pbnQgP2dyYXBoU3RvcmVFbmRwb2ludCAuXFxuICAgIDxJRD4gZmlicmE6YXV0b2NvbXBsZXRpb25RdWVyeSA/YXV0b2NvbXBsZXRpb25RdWVyeSAuXFxuICAgIDxJRD4gZmlicmE6dHJlZVF1ZXJ5ID90cmVlUXVlcnkgLlxcbiAgICA8SUQ+IGZpYnJhOml0ZW1RdWVyeSA/aXRlbVF1ZXJ5IC5cXG4gICAgPElEPiBmaWJyYTpkZWxldGVJdGVtUXVlcnkgP2RlbGV0ZUl0ZW1RdWVyeSAuXFxuICAgIE9QVElPTkFMIHsgPElEPiBmaWJyYTpncmFwaCA/Z3JhcGggfVxcbiAgfSBVTklPTiB7XFxuICAgIDxJRD4gZm9hZjpob21lcGFnZSA/dXJsIC5cXG4gIH0gVU5JT04ge1xcbiAgICA8SUQ+IGZpYnJhOnNjaGVtYSA/c2NoZW1hc1xcbiAgfSBVTklPTiB7XFxuICAgIDxJRD4gZmlicmE6c2NoZW1hUmVmZXJlbmNlID9hciAuXFxuICAgID9hciByZGY6dmFsdWUgP3NjaGVtYXMgLlxcbiAgICA/YXIgdm9pZDpzcGFycWxFbmRwb2ludCA/c2NoZW1hc19zb3VyY2Vfc3BhcnFsRW5kcG9pbnQgLlxcbiAgICBPUFRJT05BTCB7ID9hciBmaWJyYTpncmFwaCA/c2NoZW1hc19zb3VyY2VfZ3JhcGggfVxcbiAgfSBVTklPTiB7XFxuICAgIDxJRD4gZmlicmE6YXV0aG9yaXR5RW5kcG9pbnQgP2F1dGhvcml0eUVuZHBvaW50c1xcbiAgfSBVTklPTiB7XFxuICAgIDxJRD4gZmlicmE6YXV0aG9yaXR5RW5kcG9pbnRSZWZlcmVuY2UgP2FyIC5cXG4gICAgP2FyIHJkZjp2YWx1ZSA/YXV0aG9yaXR5RW5kcG9pbnRzIC5cXG4gICAgP2FyIHZvaWQ6c3BhcnFsRW5kcG9pbnQgP2F1dGhvcml0eUVuZHBvaW50c19zb3VyY2Vfc3BhcnFsRW5kcG9pbnQgLlxcbiAgICBPUFRJT05BTCB7ID9hciBmaWJyYTpncmFwaCA/YXV0aG9yaXR5RW5kcG9pbnRzX3NvdXJjZV9ncmFwaCB9XFxuICB9IFVOSU9OIHtcXG4gICAgPElEPiBmaWJyYTphcmNoaXZlRW5kcG9pbnQgP2FyY2hpdmVFbmRwb2ludHNcXG4gIH0gVU5JT04ge1xcbiAgICA8SUQ+IGZpYnJhOmFyY2hpdmVFbmRwb2ludFJlZmVyZW5jZSA/YXIgLlxcbiAgICA/YXIgcmRmOnZhbHVlID9hcmNoaXZlRW5kcG9pbnRzIC5cXG4gICAgP2FyIHZvaWQ6c3BhcnFsRW5kcG9pbnQgP2FyY2hpdmVFbmRwb2ludHNfc291cmNlX3NwYXJxbEVuZHBvaW50IC5cXG4gICAgT1BUSU9OQUwgeyA/YXIgZmlicmE6Z3JhcGggP2FyY2hpdmVFbmRwb2ludHNfc291cmNlX2dyYXBoIH1cXG4gIH0gVU5JT04ge1xcbiAgICA8SUQ+IGRjdGVybXM6ZGVzY3JpcHRpb24gP2Rlc2NyaXB0aW9uc1xcbiAgfSBVTklPTiB7XFxuICAgIHtcXG4gICAgICA8SUQ+IGRjdGVybXM6cmlnaHRzSG9sZGVyID9yaWdodHNIb2xkZXJzXFxuICAgIH0gVU5JT04ge1xcbiAgICAgIDxJRD4gZmlicmE6cXVhbGlmaWVkQXNzZXJ0aW9uID9xYSAuXFxuICAgICAgP3FhIHJkZjpwcmVkaWNhdGUgZGN0ZXJtczpyaWdodHNIb2xkZXIgLlxcbiAgICAgID9xYSByZGY6b2JqZWN0ID9yaWdodHNIb2xkZXJzIC5cXG4gICAgICBPUFRJT05BTCB7ID9xYSBmaWJyYTpvcmRlciA/cmlnaHRzSG9sZGVyc19vcmRlciB9XFxuICAgIH1cXG4gICAge1xcbiAgICAgID9yaWdodHNIb2xkZXJzIHNrb3M6cHJlZkxhYmVsID9yaWdodHNIb2xkZXJzX2xhYmVsc1xcbiAgICB9IFVOSU9OIHtcXG4gICAgICA/cmlnaHRzSG9sZGVycyBmb2FmOmhvbWVwYWdlID9yaWdodHNIb2xkZXJzX3VybFxcbiAgICB9IFVOSU9OIHtcXG4gICAgICA/cmlnaHRzSG9sZGVycyBkY3Rlcm1zOmRlc2NyaXB0aW9uID9yaWdodHNIb2xkZXJzX2Rlc2NyaXB0aW9uc1xcbiAgICB9XFxuICB9XFxuIyBFTkRHUkFQSFxcbn1cIjtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2FwcC9zZXJ2aWNlcy9wcm9qZWN0LXNlcnZpY2UvcHJvamVjdC50cyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),
/* 27 */,
/* 28 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__components_collection_utils__ = __webpack_require__(6);\n/* unused harmony export SparqlServiceDefinition */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return FibraSparqlService; });\n/* unused harmony export RDFStoreInternalSparqlService */\n\n\n\n\nvar SparqlServiceDefinition = function () {\n    function SparqlServiceDefinition(type, id) {\n        this.type = type;\n        this.id = id;\n    }\n    return SparqlServiceDefinition;\n}();\n\nvar FibraSparqlService = function () {\n    function FibraSparqlService(sparqlService, $q) {\n        var _this = this;\n        this.sparqlService = sparqlService;\n        this.$q = $q;\n        this.services = new __WEBPACK_IMPORTED_MODULE_1__components_collection_utils__[\"a\" /* EMap */](function (id) {\n            if (id.indexOf('local:') === 0) {\n                var r_1 = _this.$q.defer();\n                new rdfstore.Store({ name: id, persistent: true }, function (err, rdfStore) {\n                    if (err) r_1.reject(err);else r_1.resolve(new RDFStoreInternalSparqlService(rdfStore, _this.$q));\n                });\n                return r_1.promise;\n            } else return _this.$q.resolve(new RemoteInternalSparqlService(_this.sparqlService, id));\n        });\n    }\n    FibraSparqlService.prototype.query = function (id, query, params) {\n        return this.services.goc(id).then(function (s) {\n            return s.query(query, params);\n        });\n    };\n    FibraSparqlService.prototype.update = function (id, query, params) {\n        return this.services.goc(id).then(function (s) {\n            return s.update(query, params);\n        });\n    };\n    FibraSparqlService.prototype.get = function (id, graphIRI, params) {\n        return this.services.goc(id).then(function (s) {\n            return s.get(graphIRI, params);\n        });\n    };\n    FibraSparqlService.prototype.put = function (id, data, graphIRI, params) {\n        return this.services.goc(id).then(function (s) {\n            return s.put(data, graphIRI, params);\n        });\n    };\n    FibraSparqlService.prototype.post = function (id, data, graphIRI, params) {\n        return this.services.goc(id).then(function (s) {\n            return s.post(data, graphIRI, params);\n        });\n    };\n    return FibraSparqlService;\n}();\n\nvar RemoteInternalSparqlService = function () {\n    function RemoteInternalSparqlService(s, endpoint) {\n        this.s = s;\n        this.endpoint = endpoint;\n    }\n    RemoteInternalSparqlService.prototype.query = function (query, params) {\n        return this.s.query(this.endpoint, query, params).then(function (s) {\n            return s.data;\n        });\n    };\n    RemoteInternalSparqlService.prototype.update = function (query, params) {\n        return this.s.update(this.endpoint, query, params).then(function (s) {\n            return s.data;\n        });\n    };\n    RemoteInternalSparqlService.prototype.get = function (graphIRI, params) {\n        return this.s.get(this.endpoint, graphIRI, params).then(function (s) {\n            return s.data;\n        });\n    };\n    RemoteInternalSparqlService.prototype.post = function (data, graphIRI, params) {\n        return this.s.post(this.endpoint, data, graphIRI, params).then(function (s) {\n            return s.data;\n        });\n    };\n    RemoteInternalSparqlService.prototype.put = function (data, graphIRI, params) {\n        return this.s.put(this.endpoint, data, graphIRI, params).then(function (s) {\n            return s.data;\n        });\n    };\n    return RemoteInternalSparqlService;\n}();\nvar RDFStoreInternalSparqlService = function () {\n    function RDFStoreInternalSparqlService(s, $q) {\n        this.s = s;\n        this.$q = $q;\n    }\n    RDFStoreInternalSparqlService.convertBinding = function (binding) {\n        switch (binding.token) {\n            case 'uri':\n                return {\n                    type: 'uri',\n                    value: binding.value\n                };\n            case 'blank':\n                return {\n                    type: 'bnode',\n                    value: binding.value\n                };\n            case 'literal':\n                return {\n                    type: 'literal',\n                    value: binding.value,\n                    'xml:lang': binding.lang,\n                    datatype: binding.type\n                };\n            default:\n                throw 'Unknown binding type ' + binding.token;\n        }\n    };\n    RDFStoreInternalSparqlService.prototype.query = function (query, params) {\n        var _this = this;\n        var deferred = this.$q.defer();\n        try {\n            this.s.execute(query, function (err, results) {\n                if (err) {\n                    console.log('Error executing', _this.s, query, err);\n                    deferred.reject(err);\n                } else {\n                    var ret = {\n                        head: {\n                            vars: []\n                        },\n                        results: {\n                            bindings: []\n                        }\n                    };\n                    var vars_1 = new __WEBPACK_IMPORTED_MODULE_1__components_collection_utils__[\"b\" /* StringSet */]();\n                    ret.results.bindings = results.map(function (binding) {\n                        var tb = {};\n                        for (var v in binding) {\n                            vars_1.add(v);\n                            if (binding[v] !== null) tb[v] = RDFStoreInternalSparqlService.convertBinding(binding[v]);\n                        }\n                        return tb;\n                    });\n                    ret.head.vars = vars_1.values();\n                    deferred.resolve(ret);\n                }\n            });\n        } catch (err) {\n            console.log('Exception executing', this.s, query, err);\n            throw err;\n        }\n        return deferred.promise;\n    };\n    RDFStoreInternalSparqlService.prototype.update = function (query, params) {\n        var deferred = this.$q.defer();\n        this.s.execute(query, function (err, results) {\n            if (err) deferred.reject(err);else deferred.resolve(results);\n        });\n        return deferred.promise;\n    };\n    RDFStoreInternalSparqlService.prototype.get = function (graphIRI, params) {\n        var deferred = this.$q.defer();\n        this.s.graph(graphIRI, function (err, graph) {\n            if (err) deferred.reject(err);else deferred.resolve(graph.toNT());\n        });\n        return deferred.promise;\n    };\n    RDFStoreInternalSparqlService.prototype.post = function (data, graphIRI, params) {\n        var deferred = this.$q.defer();\n        var handler = function (err, graph) {\n            if (err) deferred.reject(err);else deferred.resolve();\n        };\n        if (graphIRI) this.s.load('text/turtle', data, graphIRI, handler);else this.s.load('text/turtle', data, handler);\n        return deferred.promise;\n    };\n    RDFStoreInternalSparqlService.prototype.put = function (data, graphIRI, params) {\n        var _this = this;\n        var deferred = this.$q.defer();\n        var handler = function (err) {\n            if (err) deferred.reject(err);\n            var handler2 = function (err2, graph) {\n                if (err2) deferred.reject(err2);else deferred.resolve();\n            };\n            if (graphIRI) _this.s.load('text/turtle', data, graphIRI, handler2);else _this.s.load('text/turtle', data, handler2);\n        };\n        if (graphIRI) this.s.clear(graphIRI, handler);else this.s.clear(handler);\n        return deferred.promise;\n    };\n    return RDFStoreInternalSparqlService;\n}();\n\n__WEBPACK_IMPORTED_MODULE_0_angular__[\"module\"]('fibra.services.fibra-sparql-service', []).config(function ($provide) {\n    $provide.service('fibraSparqlService', FibraSparqlService);\n});//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcHAvc2VydmljZXMvZmlicmEtc3BhcnFsLXNlcnZpY2UudHM/NDhmYyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5pbXBvcnQgKiBhcyBhbmd1bGFyIGZyb20gJ2FuZ3VsYXInO1xuaW1wb3J0IHsgRU1hcCwgU3RyaW5nU2V0IH0gZnJvbSAnLi4vY29tcG9uZW50cy9jb2xsZWN0aW9uLXV0aWxzJztcbnZhciBTcGFycWxTZXJ2aWNlRGVmaW5pdGlvbiA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU3BhcnFsU2VydmljZURlZmluaXRpb24odHlwZSwgaWQpIHtcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgIH1cbiAgICByZXR1cm4gU3BhcnFsU2VydmljZURlZmluaXRpb247XG59KCkpO1xuZXhwb3J0IHsgU3BhcnFsU2VydmljZURlZmluaXRpb24gfTtcbnZhciBGaWJyYVNwYXJxbFNlcnZpY2UgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEZpYnJhU3BhcnFsU2VydmljZShzcGFycWxTZXJ2aWNlLCAkcSkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLnNwYXJxbFNlcnZpY2UgPSBzcGFycWxTZXJ2aWNlO1xuICAgICAgICB0aGlzLiRxID0gJHE7XG4gICAgICAgIHRoaXMuc2VydmljZXMgPSBuZXcgRU1hcChmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgICAgIGlmIChpZC5pbmRleE9mKCdsb2NhbDonKSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHZhciByXzEgPSBfdGhpcy4kcS5kZWZlcigpO1xuICAgICAgICAgICAgICAgIG5ldyByZGZzdG9yZS5TdG9yZSh7IG5hbWU6IGlkLCBwZXJzaXN0ZW50OiB0cnVlIH0sIGZ1bmN0aW9uIChlcnIsIHJkZlN0b3JlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnIpXG4gICAgICAgICAgICAgICAgICAgICAgICByXzEucmVqZWN0KGVycik7XG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIHJfMS5yZXNvbHZlKG5ldyBSREZTdG9yZUludGVybmFsU3BhcnFsU2VydmljZShyZGZTdG9yZSwgX3RoaXMuJHEpKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcl8xLnByb21pc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLiRxLnJlc29sdmUobmV3IFJlbW90ZUludGVybmFsU3BhcnFsU2VydmljZShfdGhpcy5zcGFycWxTZXJ2aWNlLCBpZCkpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgRmlicmFTcGFycWxTZXJ2aWNlLnByb3RvdHlwZS5xdWVyeSA9IGZ1bmN0aW9uIChpZCwgcXVlcnksIHBhcmFtcykge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXJ2aWNlcy5nb2MoaWQpLnRoZW4oZnVuY3Rpb24gKHMpIHsgcmV0dXJuIHMucXVlcnkocXVlcnksIHBhcmFtcyk7IH0pO1xuICAgIH07XG4gICAgRmlicmFTcGFycWxTZXJ2aWNlLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoaWQsIHF1ZXJ5LCBwYXJhbXMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VydmljZXMuZ29jKGlkKS50aGVuKGZ1bmN0aW9uIChzKSB7IHJldHVybiBzLnVwZGF0ZShxdWVyeSwgcGFyYW1zKTsgfSk7XG4gICAgfTtcbiAgICBGaWJyYVNwYXJxbFNlcnZpY2UucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChpZCwgZ3JhcGhJUkksIHBhcmFtcykge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXJ2aWNlcy5nb2MoaWQpLnRoZW4oZnVuY3Rpb24gKHMpIHsgcmV0dXJuIHMuZ2V0KGdyYXBoSVJJLCBwYXJhbXMpOyB9KTtcbiAgICB9O1xuICAgIEZpYnJhU3BhcnFsU2VydmljZS5wcm90b3R5cGUucHV0ID0gZnVuY3Rpb24gKGlkLCBkYXRhLCBncmFwaElSSSwgcGFyYW1zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlcnZpY2VzLmdvYyhpZCkudGhlbihmdW5jdGlvbiAocykgeyByZXR1cm4gcy5wdXQoZGF0YSwgZ3JhcGhJUkksIHBhcmFtcyk7IH0pO1xuICAgIH07XG4gICAgRmlicmFTcGFycWxTZXJ2aWNlLnByb3RvdHlwZS5wb3N0ID0gZnVuY3Rpb24gKGlkLCBkYXRhLCBncmFwaElSSSwgcGFyYW1zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlcnZpY2VzLmdvYyhpZCkudGhlbihmdW5jdGlvbiAocykgeyByZXR1cm4gcy5wb3N0KGRhdGEsIGdyYXBoSVJJLCBwYXJhbXMpOyB9KTtcbiAgICB9O1xuICAgIHJldHVybiBGaWJyYVNwYXJxbFNlcnZpY2U7XG59KCkpO1xuZXhwb3J0IHsgRmlicmFTcGFycWxTZXJ2aWNlIH07XG52YXIgUmVtb3RlSW50ZXJuYWxTcGFycWxTZXJ2aWNlID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBSZW1vdGVJbnRlcm5hbFNwYXJxbFNlcnZpY2UocywgZW5kcG9pbnQpIHtcbiAgICAgICAgdGhpcy5zID0gcztcbiAgICAgICAgdGhpcy5lbmRwb2ludCA9IGVuZHBvaW50O1xuICAgIH1cbiAgICBSZW1vdGVJbnRlcm5hbFNwYXJxbFNlcnZpY2UucHJvdG90eXBlLnF1ZXJ5ID0gZnVuY3Rpb24gKHF1ZXJ5LCBwYXJhbXMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucy5xdWVyeSh0aGlzLmVuZHBvaW50LCBxdWVyeSwgcGFyYW1zKS50aGVuKGZ1bmN0aW9uIChzKSB7IHJldHVybiBzLmRhdGE7IH0pO1xuICAgIH07XG4gICAgUmVtb3RlSW50ZXJuYWxTcGFycWxTZXJ2aWNlLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAocXVlcnksIHBhcmFtcykge1xuICAgICAgICByZXR1cm4gdGhpcy5zLnVwZGF0ZSh0aGlzLmVuZHBvaW50LCBxdWVyeSwgcGFyYW1zKS50aGVuKGZ1bmN0aW9uIChzKSB7IHJldHVybiBzLmRhdGE7IH0pO1xuICAgIH07XG4gICAgUmVtb3RlSW50ZXJuYWxTcGFycWxTZXJ2aWNlLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoZ3JhcGhJUkksIHBhcmFtcykge1xuICAgICAgICByZXR1cm4gdGhpcy5zLmdldCh0aGlzLmVuZHBvaW50LCBncmFwaElSSSwgcGFyYW1zKS50aGVuKGZ1bmN0aW9uIChzKSB7IHJldHVybiBzLmRhdGE7IH0pO1xuICAgIH07XG4gICAgUmVtb3RlSW50ZXJuYWxTcGFycWxTZXJ2aWNlLnByb3RvdHlwZS5wb3N0ID0gZnVuY3Rpb24gKGRhdGEsIGdyYXBoSVJJLCBwYXJhbXMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucy5wb3N0KHRoaXMuZW5kcG9pbnQsIGRhdGEsIGdyYXBoSVJJLCBwYXJhbXMpLnRoZW4oZnVuY3Rpb24gKHMpIHsgcmV0dXJuIHMuZGF0YTsgfSk7XG4gICAgfTtcbiAgICBSZW1vdGVJbnRlcm5hbFNwYXJxbFNlcnZpY2UucHJvdG90eXBlLnB1dCA9IGZ1bmN0aW9uIChkYXRhLCBncmFwaElSSSwgcGFyYW1zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnMucHV0KHRoaXMuZW5kcG9pbnQsIGRhdGEsIGdyYXBoSVJJLCBwYXJhbXMpLnRoZW4oZnVuY3Rpb24gKHMpIHsgcmV0dXJuIHMuZGF0YTsgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gUmVtb3RlSW50ZXJuYWxTcGFycWxTZXJ2aWNlO1xufSgpKTtcbnZhciBSREZTdG9yZUludGVybmFsU3BhcnFsU2VydmljZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUkRGU3RvcmVJbnRlcm5hbFNwYXJxbFNlcnZpY2UocywgJHEpIHtcbiAgICAgICAgdGhpcy5zID0gcztcbiAgICAgICAgdGhpcy4kcSA9ICRxO1xuICAgIH1cbiAgICBSREZTdG9yZUludGVybmFsU3BhcnFsU2VydmljZS5jb252ZXJ0QmluZGluZyA9IGZ1bmN0aW9uIChiaW5kaW5nKSB7XG4gICAgICAgIHN3aXRjaCAoYmluZGluZy50b2tlbikge1xuICAgICAgICAgICAgY2FzZSAndXJpJzogcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAndXJpJyxcbiAgICAgICAgICAgICAgICB2YWx1ZTogYmluZGluZy52YWx1ZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNhc2UgJ2JsYW5rJzogcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnYm5vZGUnLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBiaW5kaW5nLnZhbHVlXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY2FzZSAnbGl0ZXJhbCc6IHJldHVybiB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2xpdGVyYWwnLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBiaW5kaW5nLnZhbHVlLFxuICAgICAgICAgICAgICAgICd4bWw6bGFuZyc6IGJpbmRpbmcubGFuZyxcbiAgICAgICAgICAgICAgICBkYXRhdHlwZTogYmluZGluZy50eXBlXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZGVmYXVsdDogdGhyb3cgJ1Vua25vd24gYmluZGluZyB0eXBlICcgKyBiaW5kaW5nLnRva2VuO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBSREZTdG9yZUludGVybmFsU3BhcnFsU2VydmljZS5wcm90b3R5cGUucXVlcnkgPSBmdW5jdGlvbiAocXVlcnksIHBhcmFtcykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgZGVmZXJyZWQgPSB0aGlzLiRxLmRlZmVyKCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLnMuZXhlY3V0ZShxdWVyeSwgZnVuY3Rpb24gKGVyciwgcmVzdWx0cykge1xuICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yIGV4ZWN1dGluZycsIF90aGlzLnMsIHF1ZXJ5LCBlcnIpO1xuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyczogW11cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmluZGluZ3M6IFtdXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHZhciB2YXJzXzEgPSBuZXcgU3RyaW5nU2V0KCk7XG4gICAgICAgICAgICAgICAgICAgIHJldC5yZXN1bHRzLmJpbmRpbmdzID0gcmVzdWx0cy5tYXAoZnVuY3Rpb24gKGJpbmRpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YiA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdiBpbiBiaW5kaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyc18xLmFkZCh2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYmluZGluZ1t2XSAhPT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGJbdl0gPSBSREZTdG9yZUludGVybmFsU3BhcnFsU2VydmljZS5jb252ZXJ0QmluZGluZyhiaW5kaW5nW3ZdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0YjtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldC5oZWFkLnZhcnMgPSB2YXJzXzEudmFsdWVzKCk7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUocmV0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnRXhjZXB0aW9uIGV4ZWN1dGluZycsIHRoaXMucywgcXVlcnksIGVycik7XG4gICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgfTtcbiAgICBSREZTdG9yZUludGVybmFsU3BhcnFsU2VydmljZS5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKHF1ZXJ5LCBwYXJhbXMpIHtcbiAgICAgICAgdmFyIGRlZmVycmVkID0gdGhpcy4kcS5kZWZlcigpO1xuICAgICAgICB0aGlzLnMuZXhlY3V0ZShxdWVyeSwgZnVuY3Rpb24gKGVyciwgcmVzdWx0cykge1xuICAgICAgICAgICAgaWYgKGVycilcbiAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoZXJyKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdHMpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgfTtcbiAgICBSREZTdG9yZUludGVybmFsU3BhcnFsU2VydmljZS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGdyYXBoSVJJLCBwYXJhbXMpIHtcbiAgICAgICAgdmFyIGRlZmVycmVkID0gdGhpcy4kcS5kZWZlcigpO1xuICAgICAgICB0aGlzLnMuZ3JhcGgoZ3JhcGhJUkksIGZ1bmN0aW9uIChlcnIsIGdyYXBoKSB7XG4gICAgICAgICAgICBpZiAoZXJyKVxuICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChlcnIpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoZ3JhcGgudG9OVCgpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgIH07XG4gICAgUkRGU3RvcmVJbnRlcm5hbFNwYXJxbFNlcnZpY2UucHJvdG90eXBlLnBvc3QgPSBmdW5jdGlvbiAoZGF0YSwgZ3JhcGhJUkksIHBhcmFtcykge1xuICAgICAgICB2YXIgZGVmZXJyZWQgPSB0aGlzLiRxLmRlZmVyKCk7XG4gICAgICAgIHZhciBoYW5kbGVyID0gZnVuY3Rpb24gKGVyciwgZ3JhcGgpIHtcbiAgICAgICAgICAgIGlmIChlcnIpXG4gICAgICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KGVycik7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgICAgICB9O1xuICAgICAgICBpZiAoZ3JhcGhJUkkpXG4gICAgICAgICAgICB0aGlzLnMubG9hZCgndGV4dC90dXJ0bGUnLCBkYXRhLCBncmFwaElSSSwgaGFuZGxlcik7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHRoaXMucy5sb2FkKCd0ZXh0L3R1cnRsZScsIGRhdGEsIGhhbmRsZXIpO1xuICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICB9O1xuICAgIFJERlN0b3JlSW50ZXJuYWxTcGFycWxTZXJ2aWNlLnByb3RvdHlwZS5wdXQgPSBmdW5jdGlvbiAoZGF0YSwgZ3JhcGhJUkksIHBhcmFtcykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgZGVmZXJyZWQgPSB0aGlzLiRxLmRlZmVyKCk7XG4gICAgICAgIHZhciBoYW5kbGVyID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgaWYgKGVycilcbiAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoZXJyKTtcbiAgICAgICAgICAgIHZhciBoYW5kbGVyMiA9IGZ1bmN0aW9uIChlcnIyLCBncmFwaCkge1xuICAgICAgICAgICAgICAgIGlmIChlcnIyKVxuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoZXJyMik7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKGdyYXBoSVJJKVxuICAgICAgICAgICAgICAgIF90aGlzLnMubG9hZCgndGV4dC90dXJ0bGUnLCBkYXRhLCBncmFwaElSSSwgaGFuZGxlcjIpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIF90aGlzLnMubG9hZCgndGV4dC90dXJ0bGUnLCBkYXRhLCBoYW5kbGVyMik7XG4gICAgICAgIH07XG4gICAgICAgIGlmIChncmFwaElSSSlcbiAgICAgICAgICAgIHRoaXMucy5jbGVhcihncmFwaElSSSwgaGFuZGxlcik7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHRoaXMucy5jbGVhcihoYW5kbGVyKTtcbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgfTtcbiAgICByZXR1cm4gUkRGU3RvcmVJbnRlcm5hbFNwYXJxbFNlcnZpY2U7XG59KCkpO1xuZXhwb3J0IHsgUkRGU3RvcmVJbnRlcm5hbFNwYXJxbFNlcnZpY2UgfTtcbmFuZ3VsYXIubW9kdWxlKCdmaWJyYS5zZXJ2aWNlcy5maWJyYS1zcGFycWwtc2VydmljZScsIFtdKVxuICAgIC5jb25maWcoZnVuY3Rpb24gKCRwcm92aWRlKSB7XG4gICAgJHByb3ZpZGUuc2VydmljZSgnZmlicmFTcGFycWxTZXJ2aWNlJywgRmlicmFTcGFycWxTZXJ2aWNlKTtcbn0pO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vYXBwL3NlcnZpY2VzL2ZpYnJhLXNwYXJxbC1zZXJ2aWNlLnRzIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUFBO0FBZkE7QUFpQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFEQTtBQUpBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBSUE7QUFDQTtBQUlBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9");

/***/ }),
/* 29 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__models_citable__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__project__ = __webpack_require__(26);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__primary_endpoint_configuration__ = __webpack_require__(25);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__remote_endpoint_configuration__ = __webpack_require__(39);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__schema__ = __webpack_require__(40);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__components_collection_utils__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__components_misc_utils__ = __webpack_require__(20);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__models_rdf__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__data_model__ = __webpack_require__(13);\n/* unused harmony export ProjectService */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return ProjectWorkerService; });\n\n\n\n\n\n\n\n\n\n\n\n\nvar s = fi.seco.sparql;\nvar ProjectService = function () {\n    function ProjectService(workerService, fibraService, fibraSparqlService, $localStorage) {\n        this.workerService = workerService;\n        this.fibraService = fibraService;\n        this.fibraSparqlService = fibraSparqlService;\n        this.$localStorage = $localStorage;\n        if (!$localStorage.projectSources) $localStorage.projectSources = [];else $localStorage.projectSources.forEach(function (ps) {\n            if (!ps.sparqlEndpoint) {\n                ps.sparqlEndpoint = ps['endpoint'];\n                ps.updateEndpoint = ps['endpoint'];\n                ps.graphStoreEndpoint = ps['endpoint'];\n            }\n        });\n    }\n    ProjectService.orderCitables = function (citables) {\n        citables.sort(function (a, b) {\n            return (a['order'] ? a['order'] : Number.MAX_VALUE) - (b['order'] ? b['order'] : Number.MAX_VALUE);\n        });\n        citables.forEach(function (rh) {\n            return delete rh['order'];\n        });\n    };\n    ProjectService.prototype.getCurrentProject = function () {\n        return this.fibraService.getState().project;\n    };\n    ProjectService.prototype.setCurrentProject = function (project) {\n        return this.fibraService.dispatchAction(this.fibraService.setProject(project));\n    };\n    ProjectService.prototype.getProjectSources = function () {\n        return this.$localStorage.projectSources;\n    };\n    ProjectService.prototype.listPrimaryEndpointConfigurations = function (source) {\n        return this.workerService.call('projectWorkerService', 'listPrimaryEndpointConfigurations', [source]);\n    };\n    ProjectService.prototype.loadPrimaryEndpointConfiguration = function (source, templateId) {\n        return this.workerService.call('projectWorkerService', 'loadPrimaryEndpointConfiguration', [source, templateId]);\n    };\n    ProjectService.prototype.listArchiveEndpointConfigurations = function (source) {\n        return this.workerService.call('projectWorkerService', 'listArchiveEndpointConfigurations', [source]);\n    };\n    ProjectService.prototype.listAuthorityEndpointConfigurations = function (source) {\n        return this.workerService.call('projectWorkerService', 'listAuthorityEndpointConfigurations', [source]);\n    };\n    ProjectService.prototype.loadRemoteEndpointConfiguration = function (source, templateId) {\n        return this.workerService.call('projectWorkerService', 'loadRemoteEndpointConfiguration', [source, templateId]);\n    };\n    ProjectService.prototype.listSchemas = function (source) {\n        return this.workerService.call('projectWorkerService', 'listSchemas', [source]);\n    };\n    ProjectService.prototype.loadSchema = function (source, id) {\n        return this.workerService.call('projectWorkerService', 'loadSchema', [source, id]);\n    };\n    ProjectService.prototype.listProjects = function (source) {\n        return this.workerService.call('projectWorkerService', 'listProjects', [source]);\n    };\n    ProjectService.prototype.loadProject = function (source, projectId, loadFull) {\n        return this.workerService.call('projectWorkerService', 'loadProject', [source, projectId, loadFull]);\n    };\n    ProjectService.prototype.deleteCitable = function (updateEndpoint, citable) {\n        return this.deleteObject(updateEndpoint, citable.id, citable.source.graph);\n    };\n    ProjectService.prototype.deleteObjects = function (updateEndpoint, ids, graph) {\n        var dq = graph ? ProjectService.deleteQuery.replace(/# STARTGRAPH/g, 'GRAPH <' + graph + '> {').replace(/# ENDGRAPH/g, '}') : ProjectService.deleteQuery.replace(/.*# STARTGRAPH\\n/g, '').replace(/.*# ENDGRAPH\\n/g, '');\n        dq = dq.replace(/# PATTERNS/g, ids.reduce(function (acc, id, index) {\n            return acc + ' <' + id + '> ?p' + index + ' ?o' + index + ' .';\n        }, ''));\n        return this.fibraSparqlService.update(updateEndpoint, dq);\n    };\n    ProjectService.prototype.deleteObject = function (updateEndpoint, id, graph) {\n        return this.deleteObjects(updateEndpoint, [id], graph);\n    };\n    ProjectService.prototype.saveCitable = function (updateEndpoint, graphStoreEndpoint, ps) {\n        var _this = this;\n        var m = new __WEBPACK_IMPORTED_MODULE_6__components_collection_utils__[\"d\" /* Map */]();\n        var prefixes = {};\n        ps.toTurtle(m, prefixes);\n        return this.deleteObjects(updateEndpoint, m.keys(), ps.source.graph).then(function () {\n            return _this.fibraSparqlService.post(graphStoreEndpoint, __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_7__components_misc_utils__[\"c\" /* toTurtle */])(prefixes, m), ps.source.graph);\n        });\n    };\n    return ProjectService;\n}();\n\nProjectService.deleteQuery = \"DELETE {\\n# STARTGRAPH\\n  # PATTERNS\\n# ENDGRAPH\\n}\\nWHERE {\\n# STARTGRAPH\\n  # PATTERNS\\n# ENDGRAPH\\n}\";\nvar ProjectWorkerService = function () {\n    function ProjectWorkerService(fibraSparqlService, $q) {\n        this.fibraSparqlService = fibraSparqlService;\n        this.$q = $q;\n    }\n    ProjectWorkerService.prototype.loadPrimaryEndpointConfiguration = function (source, templateId) {\n        return this.runSingleQuery(source, __WEBPACK_IMPORTED_MODULE_3__primary_endpoint_configuration__[\"a\" /* PrimaryEndpointConfiguration */].primaryEndpointConfigurationQuery, templateId, new __WEBPACK_IMPORTED_MODULE_3__primary_endpoint_configuration__[\"a\" /* PrimaryEndpointConfiguration */](templateId, source));\n    };\n    ProjectWorkerService.prototype.listPrimaryEndpointConfigurations = function (source) {\n        return this.runListQuery(source, __WEBPACK_IMPORTED_MODULE_3__primary_endpoint_configuration__[\"a\" /* PrimaryEndpointConfiguration */].listPrimaryEndpointConfigurationsQuery, function (id) {\n            return new __WEBPACK_IMPORTED_MODULE_3__primary_endpoint_configuration__[\"a\" /* PrimaryEndpointConfiguration */](id, source);\n        });\n    };\n    ProjectWorkerService.prototype.loadRemoteEndpointConfiguration = function (source, templateId) {\n        return this.runSingleQuery(source, __WEBPACK_IMPORTED_MODULE_4__remote_endpoint_configuration__[\"a\" /* RemoteEndpointConfiguration */].remoteEndpointConfigurationQuery, templateId, new __WEBPACK_IMPORTED_MODULE_4__remote_endpoint_configuration__[\"a\" /* RemoteEndpointConfiguration */](templateId, source));\n    };\n    ProjectWorkerService.prototype.listArchiveEndpointConfigurations = function (source) {\n        return this.runListQuery(source, __WEBPACK_IMPORTED_MODULE_4__remote_endpoint_configuration__[\"a\" /* RemoteEndpointConfiguration */].listArchiveEndpointConfigurationsQuery, function (id) {\n            return new __WEBPACK_IMPORTED_MODULE_4__remote_endpoint_configuration__[\"a\" /* RemoteEndpointConfiguration */](id, source);\n        });\n    };\n    ProjectWorkerService.prototype.listAuthorityEndpointConfigurations = function (source) {\n        return this.runListQuery(source, __WEBPACK_IMPORTED_MODULE_4__remote_endpoint_configuration__[\"a\" /* RemoteEndpointConfiguration */].listAuthorityEndpointConfigurationsQuery, function (id) {\n            return new __WEBPACK_IMPORTED_MODULE_4__remote_endpoint_configuration__[\"a\" /* RemoteEndpointConfiguration */](id, source);\n        });\n    };\n    ProjectWorkerService.prototype.listProjects = function (source) {\n        return this.runListQuery(source, __WEBPACK_IMPORTED_MODULE_2__project__[\"a\" /* Project */].listProjectsQuery, function (id) {\n            return new __WEBPACK_IMPORTED_MODULE_2__project__[\"a\" /* Project */](id, source);\n        });\n    };\n    ProjectWorkerService.prototype.listSchemas = function (source) {\n        return this.runListQuery(source, __WEBPACK_IMPORTED_MODULE_5__schema__[\"a\" /* Schema */].listSchemasQuery, function (id) {\n            return new __WEBPACK_IMPORTED_MODULE_5__schema__[\"a\" /* Schema */](id, source);\n        });\n    };\n    ProjectWorkerService.prototype.loadSchema = function (source, id) {\n        return this.runSingleQuery(source, __WEBPACK_IMPORTED_MODULE_5__schema__[\"a\" /* Schema */].schemaQuery, id, new __WEBPACK_IMPORTED_MODULE_5__schema__[\"a\" /* Schema */](id, source));\n    };\n    ProjectWorkerService.prototype.loadDataModel = function (schemas) {\n        var _this = this;\n        var dataModel = new __WEBPACK_IMPORTED_MODULE_9__data_model__[\"a\" /* DataModel */]();\n        var classes = new __WEBPACK_IMPORTED_MODULE_6__components_collection_utils__[\"a\" /* EMap */](function (id) {\n            var cl = new __WEBPACK_IMPORTED_MODULE_9__data_model__[\"b\" /* Class */](__WEBPACK_IMPORTED_MODULE_8__models_rdf__[\"b\" /* DataFactory */].namedNode(id));\n            dataModel.classMap.set(id, cl);\n            return cl;\n        });\n        var properties = new __WEBPACK_IMPORTED_MODULE_6__components_collection_utils__[\"a\" /* EMap */](function (id) {\n            var pr = new __WEBPACK_IMPORTED_MODULE_9__data_model__[\"c\" /* Property */](__WEBPACK_IMPORTED_MODULE_8__models_rdf__[\"b\" /* DataFactory */].namedNode(id));\n            dataModel.propertyMap.set(id, pr);\n            return pr;\n        });\n        var promises = [];\n        schemas.forEach(function (schema) {\n            promises.push(_this.fibraSparqlService.query(schema.endpoint, schema.classQuery).then(function (response) {\n                var conf = {\n                    bindingTypes: { types: 'uniqueArray' },\n                    bindingConverters: {\n                        superClasses: function (binding) {\n                            return classes.goc(binding.value);\n                        },\n                        subClasses: function (binding) {\n                            return classes.goc(binding.value);\n                        },\n                        types: function (binding) {\n                            return classes.goc(binding.value);\n                        },\n                        labels: function (binding) {\n                            return __WEBPACK_IMPORTED_MODULE_8__models_rdf__[\"b\" /* DataFactory */].nodeFromBinding(binding);\n                        },\n                        descriptions: function (binding) {\n                            return __WEBPACK_IMPORTED_MODULE_8__models_rdf__[\"b\" /* DataFactory */].nodeFromBinding(binding);\n                        }\n                    }\n                };\n                var tracker = new s.UniqueObjectTracker();\n                response.results.bindings.forEach(function (binding) {\n                    return s.SparqlService.bindingsToObject(binding, classes.goc(binding['id'].value), conf, tracker);\n                });\n            }));\n            promises.push(_this.fibraSparqlService.query(schema.endpoint, schema.propertyQuery).then(function (response) {\n                var conf = {\n                    bindingTypes: { types: 'uniqueArray' },\n                    bindingConverters: {\n                        superProperties: function (binding) {\n                            return properties.goc(binding.value);\n                        },\n                        subProperties: function (binding) {\n                            return properties.goc(binding.value);\n                        },\n                        inverseProperty: function (binding) {\n                            return properties.goc(binding.value);\n                        },\n                        types: function (binding) {\n                            return classes.goc(binding.value);\n                        },\n                        domains: function (binding) {\n                            return classes.goc(binding.value);\n                        },\n                        ranges: function (binding) {\n                            return classes.goc(binding.value);\n                        },\n                        labels: function (binding) {\n                            return __WEBPACK_IMPORTED_MODULE_8__models_rdf__[\"b\" /* DataFactory */].nodeFromBinding(binding);\n                        },\n                        descriptions: function (binding) {\n                            return __WEBPACK_IMPORTED_MODULE_8__models_rdf__[\"b\" /* DataFactory */].nodeFromBinding(binding);\n                        }\n                    }\n                };\n                var tracker = new s.UniqueObjectTracker();\n                response.results.bindings.forEach(function (binding) {\n                    return s.SparqlService.bindingsToObject(binding, properties.goc(binding['id'].value), conf, tracker);\n                });\n            }));\n        });\n        return this.$q.all(promises).then(function () {\n            classes.values().forEach(function (cl) {\n                cl.buildAsNodes();\n                cl.superClasses.filter(function (spr) {\n                    return !spr.subClasses.find(function (opr) {\n                        return opr === cl;\n                    });\n                }).forEach(function (spr) {\n                    return spr.subClasses.push(cl);\n                });\n                cl.subClasses.filter(function (spr) {\n                    return !spr.superClasses.find(function (opr) {\n                        return opr === cl;\n                    });\n                }).forEach(function (spr) {\n                    return spr.superClasses.push(cl);\n                });\n            });\n            classes.values().forEach(function (cl) {\n                if (cl.superClasses.length === 0) dataModel.rootClasses.push(cl);\n            });\n            properties.values().forEach(function (pr) {\n                pr.buildAsNodes();\n                if (pr.inverseProperty) pr.inverseProperty.inverseProperty = pr;\n                pr.superProperties.filter(function (spr) {\n                    return !spr.subProperties.find(function (opr) {\n                        return opr === pr;\n                    });\n                }).forEach(function (spr) {\n                    return spr.subProperties.push(pr);\n                });\n                pr.subProperties.filter(function (spr) {\n                    return !spr.superProperties.find(function (opr) {\n                        return opr === pr;\n                    });\n                }).forEach(function (spr) {\n                    return spr.superProperties.push(pr);\n                });\n                pr.domains.forEach(function (dc) {\n                    return dc.properties.push(pr);\n                });\n                pr.ranges.forEach(function (rc) {\n                    return rc.inverseProperties.push(pr);\n                });\n            });\n            properties.values().forEach(function (pr) {\n                if (pr.superProperties.length === 0) dataModel.rootProperties.push(pr);\n            });\n            return dataModel;\n        });\n    };\n    ProjectWorkerService.prototype.loadProject = function (source, id, loadFull) {\n        var _this = this;\n        var q = this.runSingleQuery(source, __WEBPACK_IMPORTED_MODULE_2__project__[\"a\" /* Project */].projectQuery, id, new __WEBPACK_IMPORTED_MODULE_2__project__[\"a\" /* Project */](id, source));\n        if (!loadFull) return q;else return q.then(function (p) {\n            var promises = [];\n            promises.push(_this.$q.all(p.schemas.map(function (schema) {\n                return _this.loadSchema(schema.source, schema.id);\n            })).then(function (schemas) {\n                p.schemas = schemas;\n                return _this.loadDataModel(schemas).then(function (dm) {\n                    return p.dataModel = dm;\n                });\n            }));\n            var narche = [];\n            var nauthe = [];\n            p.archiveEndpoints.forEach(function (ae) {\n                return promises.push(_this.loadRemoteEndpointConfiguration(ae.source, ae.id).then(function (ae2) {\n                    return narche.push(ae2);\n                }));\n            });\n            p.authorityEndpoints.forEach(function (ae) {\n                return promises.push(_this.loadRemoteEndpointConfiguration(ae.source, ae.id).then(function (ae2) {\n                    return nauthe.push(ae2);\n                }));\n            });\n            return _this.$q.all(promises).then(function () {\n                p.archiveEndpoints = narche;\n                p.authorityEndpoints = nauthe;\n                return p;\n            });\n        });\n    };\n    ProjectWorkerService.prototype.runSingleQuery = function (source, tq, id, ps) {\n        tq = source.graph ? tq.replace(/# STARTGRAPH/g, 'GRAPH <' + source.graph + '> {').replace(/# ENDGRAPH/g, '}') : tq.replace(/.*# STARTGRAPH\\n/g, '').replace(/.*# ENDGRAPH\\n/g, '');\n        tq = tq.replace(/<ID>/g, '<' + id + '>');\n        var deferred = this.$q.defer();\n        this.fibraSparqlService.query(source.sparqlEndpoint, tq).then(function (response) {\n            var conf = {\n                bindingTypes: { rightsHolders: 'uniqueArray', schemas: 'uniqueArray', authorityEndpoints: 'uniqueArray', archiveEndpoints: 'uniqueArray' },\n                bindingConverters: {\n                    types: function (binding) {\n                        return __WEBPACK_IMPORTED_MODULE_8__models_rdf__[\"b\" /* DataFactory */].nodeFromBinding(binding);\n                    },\n                    labels: function (binding) {\n                        return __WEBPACK_IMPORTED_MODULE_8__models_rdf__[\"b\" /* DataFactory */].nodeFromBinding(binding);\n                    },\n                    descriptions: function (binding) {\n                        return __WEBPACK_IMPORTED_MODULE_8__models_rdf__[\"b\" /* DataFactory */].nodeFromBinding(binding);\n                    },\n                    schemas: function (binding) {\n                        return new __WEBPACK_IMPORTED_MODULE_5__schema__[\"a\" /* Schema */](binding.value, __WEBPACK_IMPORTED_MODULE_1__models_citable__[\"a\" /* CitableSource */].clone(source));\n                    },\n                    authorityEndpoints: function (binding) {\n                        return new __WEBPACK_IMPORTED_MODULE_4__remote_endpoint_configuration__[\"a\" /* RemoteEndpointConfiguration */](binding.value, __WEBPACK_IMPORTED_MODULE_1__models_citable__[\"a\" /* CitableSource */].clone(source));\n                    },\n                    archiveEndpoints: function (binding) {\n                        return new __WEBPACK_IMPORTED_MODULE_4__remote_endpoint_configuration__[\"a\" /* RemoteEndpointConfiguration */](binding.value, __WEBPACK_IMPORTED_MODULE_1__models_citable__[\"a\" /* CitableSource */].clone(source));\n                    },\n                    rightsHolders_labels: function (binding) {\n                        return __WEBPACK_IMPORTED_MODULE_8__models_rdf__[\"b\" /* DataFactory */].nodeFromBinding(binding);\n                    },\n                    rightsHolders_descriptions: function (binding) {\n                        return __WEBPACK_IMPORTED_MODULE_8__models_rdf__[\"b\" /* DataFactory */].nodeFromBinding(binding);\n                    },\n                    rightsHolders: function (binding) {\n                        return new __WEBPACK_IMPORTED_MODULE_1__models_citable__[\"b\" /* Citable */](binding.value, source);\n                    }\n                }\n            };\n            var tracker = new s.UniqueObjectTracker();\n            response.results.bindings.forEach(function (b) {\n                return s.SparqlService.bindingsToObject(b, ps, conf, tracker);\n            });\n            ProjectService.orderCitables(ps.rightsHolders);\n            deferred.resolve(ps);\n        });\n        return deferred.promise;\n    };\n    ProjectWorkerService.prototype.runListQuery = function (source, lq, oc) {\n        lq = source.graph ? lq.replace(/# STARTGRAPH/g, 'GRAPH <' + source.graph + '> {').replace(/# ENDGRAPH/g, '}') : lq.replace(/.*# STARTGRAPH\\n/g, '').replace(/.*# ENDGRAPH\\n/g, '');\n        return this.fibraSparqlService.query(source.sparqlEndpoint, lq).then(function (response) {\n            var projects = new __WEBPACK_IMPORTED_MODULE_6__components_collection_utils__[\"a\" /* EMap */](oc);\n            var conf = {\n                bindingTypes: { rightsHolders: 'uniqueArray', schemas: 'uniqueArray', authorityEndpoints: 'uniqueArray', archiveEndpoints: 'uniqueArray' },\n                bindingConverters: {\n                    types: function (binding) {\n                        return __WEBPACK_IMPORTED_MODULE_8__models_rdf__[\"b\" /* DataFactory */].nodeFromBinding(binding);\n                    },\n                    labels: function (binding) {\n                        return __WEBPACK_IMPORTED_MODULE_8__models_rdf__[\"b\" /* DataFactory */].nodeFromBinding(binding);\n                    },\n                    descriptions: function (binding) {\n                        return __WEBPACK_IMPORTED_MODULE_8__models_rdf__[\"b\" /* DataFactory */].nodeFromBinding(binding);\n                    },\n                    schemas: function (binding) {\n                        return new __WEBPACK_IMPORTED_MODULE_5__schema__[\"a\" /* Schema */](binding.value, __WEBPACK_IMPORTED_MODULE_1__models_citable__[\"a\" /* CitableSource */].clone(source));\n                    },\n                    authorityEndpoints: function (binding) {\n                        return new __WEBPACK_IMPORTED_MODULE_4__remote_endpoint_configuration__[\"a\" /* RemoteEndpointConfiguration */](binding.value, __WEBPACK_IMPORTED_MODULE_1__models_citable__[\"a\" /* CitableSource */].clone(source));\n                    },\n                    archiveEndpoints: function (binding) {\n                        return new __WEBPACK_IMPORTED_MODULE_4__remote_endpoint_configuration__[\"a\" /* RemoteEndpointConfiguration */](binding.value, __WEBPACK_IMPORTED_MODULE_1__models_citable__[\"a\" /* CitableSource */].clone(source));\n                    },\n                    rightsHolders_labels: function (binding) {\n                        return __WEBPACK_IMPORTED_MODULE_8__models_rdf__[\"b\" /* DataFactory */].nodeFromBinding(binding);\n                    },\n                    rightsHolders_descriptions: function (binding) {\n                        return __WEBPACK_IMPORTED_MODULE_8__models_rdf__[\"b\" /* DataFactory */].nodeFromBinding(binding);\n                    },\n                    rightsHolders: function (binding) {\n                        return new __WEBPACK_IMPORTED_MODULE_1__models_citable__[\"b\" /* Citable */](binding.value, source);\n                    }\n                }\n            };\n            var tracker = new s.UniqueObjectTracker();\n            response.results.bindings.forEach(function (binding) {\n                return s.SparqlService.bindingsToObject(binding, projects.goc(binding['id'].value), conf, tracker);\n            });\n            projects.values().forEach(function (p) {\n                return ProjectService.orderCitables(p.rightsHolders);\n            });\n            return projects.values();\n        });\n    };\n    return ProjectWorkerService;\n}();\n\n__WEBPACK_IMPORTED_MODULE_0_angular__[\"module\"]('fibra.services.project-service', ['fibra.services.fibra-service', 'fibra.services.fibra-sparql-service']).config(function ($provide) {\n    $provide.service('projectService', ProjectService);\n    $provide.service('projectWorkerService', ProjectWorkerService);\n});//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcHAvc2VydmljZXMvcHJvamVjdC1zZXJ2aWNlL3Byb2plY3Qtc2VydmljZS50cz8wMmI5Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcbmltcG9ydCAqIGFzIGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG5pbXBvcnQgeyBDaXRhYmxlU291cmNlLCBDaXRhYmxlIH0gZnJvbSAnLi4vLi4vbW9kZWxzL2NpdGFibGUnO1xuaW1wb3J0IHsgUHJvamVjdCB9IGZyb20gJy4vcHJvamVjdCc7XG5pbXBvcnQgeyBQcmltYXJ5RW5kcG9pbnRDb25maWd1cmF0aW9uIH0gZnJvbSAnLi9wcmltYXJ5LWVuZHBvaW50LWNvbmZpZ3VyYXRpb24nO1xuaW1wb3J0IHsgUmVtb3RlRW5kcG9pbnRDb25maWd1cmF0aW9uIH0gZnJvbSAnLi9yZW1vdGUtZW5kcG9pbnQtY29uZmlndXJhdGlvbic7XG5pbXBvcnQgeyBTY2hlbWEgfSBmcm9tICcuL3NjaGVtYSc7XG5pbXBvcnQgeyBNYXAsIEVNYXAgfSBmcm9tICcuLi8uLi9jb21wb25lbnRzL2NvbGxlY3Rpb24tdXRpbHMnO1xuaW1wb3J0IHsgdG9UdXJ0bGUgfSBmcm9tICcuLi8uLi9jb21wb25lbnRzL21pc2MtdXRpbHMnO1xuaW1wb3J0IHsgRGF0YUZhY3RvcnkgfSBmcm9tICcuLi8uLi9tb2RlbHMvcmRmJztcbmltcG9ydCB7IERhdGFNb2RlbCwgQ2xhc3MsIFByb3BlcnR5IH0gZnJvbSAnLi9kYXRhLW1vZGVsJztcbnZhciBzID0gZmkuc2Vjby5zcGFycWw7XG52YXIgUHJvamVjdFNlcnZpY2UgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFByb2plY3RTZXJ2aWNlKHdvcmtlclNlcnZpY2UsIGZpYnJhU2VydmljZSwgZmlicmFTcGFycWxTZXJ2aWNlLCAkbG9jYWxTdG9yYWdlKSB7XG4gICAgICAgIHRoaXMud29ya2VyU2VydmljZSA9IHdvcmtlclNlcnZpY2U7XG4gICAgICAgIHRoaXMuZmlicmFTZXJ2aWNlID0gZmlicmFTZXJ2aWNlO1xuICAgICAgICB0aGlzLmZpYnJhU3BhcnFsU2VydmljZSA9IGZpYnJhU3BhcnFsU2VydmljZTtcbiAgICAgICAgdGhpcy4kbG9jYWxTdG9yYWdlID0gJGxvY2FsU3RvcmFnZTtcbiAgICAgICAgaWYgKCEkbG9jYWxTdG9yYWdlLnByb2plY3RTb3VyY2VzKVxuICAgICAgICAgICAgJGxvY2FsU3RvcmFnZS5wcm9qZWN0U291cmNlcyA9IFtdO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICAkbG9jYWxTdG9yYWdlLnByb2plY3RTb3VyY2VzLmZvckVhY2goZnVuY3Rpb24gKHBzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFwcy5zcGFycWxFbmRwb2ludCkge1xuICAgICAgICAgICAgICAgICAgICBwcy5zcGFycWxFbmRwb2ludCA9IHBzWydlbmRwb2ludCddO1xuICAgICAgICAgICAgICAgICAgICBwcy51cGRhdGVFbmRwb2ludCA9IHBzWydlbmRwb2ludCddO1xuICAgICAgICAgICAgICAgICAgICBwcy5ncmFwaFN0b3JlRW5kcG9pbnQgPSBwc1snZW5kcG9pbnQnXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICB9XG4gICAgUHJvamVjdFNlcnZpY2Uub3JkZXJDaXRhYmxlcyA9IGZ1bmN0aW9uIChjaXRhYmxlcykge1xuICAgICAgICBjaXRhYmxlcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiAoYVsnb3JkZXInXSA/IGFbJ29yZGVyJ10gOiBOdW1iZXIuTUFYX1ZBTFVFKSAtIChiWydvcmRlciddID8gYlsnb3JkZXInXSA6IE51bWJlci5NQVhfVkFMVUUpOyB9KTtcbiAgICAgICAgY2l0YWJsZXMuZm9yRWFjaChmdW5jdGlvbiAocmgpIHsgcmV0dXJuIGRlbGV0ZSByaFsnb3JkZXInXTsgfSk7XG4gICAgfTtcbiAgICBQcm9qZWN0U2VydmljZS5wcm90b3R5cGUuZ2V0Q3VycmVudFByb2plY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZpYnJhU2VydmljZS5nZXRTdGF0ZSgpLnByb2plY3Q7XG4gICAgfTtcbiAgICBQcm9qZWN0U2VydmljZS5wcm90b3R5cGUuc2V0Q3VycmVudFByb2plY3QgPSBmdW5jdGlvbiAocHJvamVjdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5maWJyYVNlcnZpY2UuZGlzcGF0Y2hBY3Rpb24odGhpcy5maWJyYVNlcnZpY2Uuc2V0UHJvamVjdChwcm9qZWN0KSk7XG4gICAgfTtcbiAgICBQcm9qZWN0U2VydmljZS5wcm90b3R5cGUuZ2V0UHJvamVjdFNvdXJjZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiRsb2NhbFN0b3JhZ2UucHJvamVjdFNvdXJjZXM7XG4gICAgfTtcbiAgICBQcm9qZWN0U2VydmljZS5wcm90b3R5cGUubGlzdFByaW1hcnlFbmRwb2ludENvbmZpZ3VyYXRpb25zID0gZnVuY3Rpb24gKHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gdGhpcy53b3JrZXJTZXJ2aWNlLmNhbGwoJ3Byb2plY3RXb3JrZXJTZXJ2aWNlJywgJ2xpc3RQcmltYXJ5RW5kcG9pbnRDb25maWd1cmF0aW9ucycsIFtzb3VyY2VdKTtcbiAgICB9O1xuICAgIFByb2plY3RTZXJ2aWNlLnByb3RvdHlwZS5sb2FkUHJpbWFyeUVuZHBvaW50Q29uZmlndXJhdGlvbiA9IGZ1bmN0aW9uIChzb3VyY2UsIHRlbXBsYXRlSWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud29ya2VyU2VydmljZS5jYWxsKCdwcm9qZWN0V29ya2VyU2VydmljZScsICdsb2FkUHJpbWFyeUVuZHBvaW50Q29uZmlndXJhdGlvbicsIFtzb3VyY2UsIHRlbXBsYXRlSWRdKTtcbiAgICB9O1xuICAgIFByb2plY3RTZXJ2aWNlLnByb3RvdHlwZS5saXN0QXJjaGl2ZUVuZHBvaW50Q29uZmlndXJhdGlvbnMgPSBmdW5jdGlvbiAoc291cmNlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLndvcmtlclNlcnZpY2UuY2FsbCgncHJvamVjdFdvcmtlclNlcnZpY2UnLCAnbGlzdEFyY2hpdmVFbmRwb2ludENvbmZpZ3VyYXRpb25zJywgW3NvdXJjZV0pO1xuICAgIH07XG4gICAgUHJvamVjdFNlcnZpY2UucHJvdG90eXBlLmxpc3RBdXRob3JpdHlFbmRwb2ludENvbmZpZ3VyYXRpb25zID0gZnVuY3Rpb24gKHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gdGhpcy53b3JrZXJTZXJ2aWNlLmNhbGwoJ3Byb2plY3RXb3JrZXJTZXJ2aWNlJywgJ2xpc3RBdXRob3JpdHlFbmRwb2ludENvbmZpZ3VyYXRpb25zJywgW3NvdXJjZV0pO1xuICAgIH07XG4gICAgUHJvamVjdFNlcnZpY2UucHJvdG90eXBlLmxvYWRSZW1vdGVFbmRwb2ludENvbmZpZ3VyYXRpb24gPSBmdW5jdGlvbiAoc291cmNlLCB0ZW1wbGF0ZUlkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLndvcmtlclNlcnZpY2UuY2FsbCgncHJvamVjdFdvcmtlclNlcnZpY2UnLCAnbG9hZFJlbW90ZUVuZHBvaW50Q29uZmlndXJhdGlvbicsIFtzb3VyY2UsIHRlbXBsYXRlSWRdKTtcbiAgICB9O1xuICAgIFByb2plY3RTZXJ2aWNlLnByb3RvdHlwZS5saXN0U2NoZW1hcyA9IGZ1bmN0aW9uIChzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud29ya2VyU2VydmljZS5jYWxsKCdwcm9qZWN0V29ya2VyU2VydmljZScsICdsaXN0U2NoZW1hcycsIFtzb3VyY2VdKTtcbiAgICB9O1xuICAgIFByb2plY3RTZXJ2aWNlLnByb3RvdHlwZS5sb2FkU2NoZW1hID0gZnVuY3Rpb24gKHNvdXJjZSwgaWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud29ya2VyU2VydmljZS5jYWxsKCdwcm9qZWN0V29ya2VyU2VydmljZScsICdsb2FkU2NoZW1hJywgW3NvdXJjZSwgaWRdKTtcbiAgICB9O1xuICAgIFByb2plY3RTZXJ2aWNlLnByb3RvdHlwZS5saXN0UHJvamVjdHMgPSBmdW5jdGlvbiAoc291cmNlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLndvcmtlclNlcnZpY2UuY2FsbCgncHJvamVjdFdvcmtlclNlcnZpY2UnLCAnbGlzdFByb2plY3RzJywgW3NvdXJjZV0pO1xuICAgIH07XG4gICAgUHJvamVjdFNlcnZpY2UucHJvdG90eXBlLmxvYWRQcm9qZWN0ID0gZnVuY3Rpb24gKHNvdXJjZSwgcHJvamVjdElkLCBsb2FkRnVsbCkge1xuICAgICAgICByZXR1cm4gdGhpcy53b3JrZXJTZXJ2aWNlLmNhbGwoJ3Byb2plY3RXb3JrZXJTZXJ2aWNlJywgJ2xvYWRQcm9qZWN0JywgW3NvdXJjZSwgcHJvamVjdElkLCBsb2FkRnVsbF0pO1xuICAgIH07XG4gICAgUHJvamVjdFNlcnZpY2UucHJvdG90eXBlLmRlbGV0ZUNpdGFibGUgPSBmdW5jdGlvbiAodXBkYXRlRW5kcG9pbnQsIGNpdGFibGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVsZXRlT2JqZWN0KHVwZGF0ZUVuZHBvaW50LCBjaXRhYmxlLmlkLCBjaXRhYmxlLnNvdXJjZS5ncmFwaCk7XG4gICAgfTtcbiAgICBQcm9qZWN0U2VydmljZS5wcm90b3R5cGUuZGVsZXRlT2JqZWN0cyA9IGZ1bmN0aW9uICh1cGRhdGVFbmRwb2ludCwgaWRzLCBncmFwaCkge1xuICAgICAgICB2YXIgZHEgPSBncmFwaCA/IFByb2plY3RTZXJ2aWNlLmRlbGV0ZVF1ZXJ5LnJlcGxhY2UoLyMgU1RBUlRHUkFQSC9nLCAnR1JBUEggPCcgKyBncmFwaCArICc+IHsnKS5yZXBsYWNlKC8jIEVOREdSQVBIL2csICd9JykgOiBQcm9qZWN0U2VydmljZS5kZWxldGVRdWVyeS5yZXBsYWNlKC8uKiMgU1RBUlRHUkFQSFxcbi9nLCAnJykucmVwbGFjZSgvLiojIEVOREdSQVBIXFxuL2csICcnKTtcbiAgICAgICAgZHEgPSBkcS5yZXBsYWNlKC8jIFBBVFRFUk5TL2csIGlkcy5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgaWQsIGluZGV4KSB7IHJldHVybiBhY2MgKyAnIDwnICsgaWQgKyAnPiA/cCcgKyBpbmRleCArICcgP28nICsgaW5kZXggKyAnIC4nOyB9LCAnJykpO1xuICAgICAgICByZXR1cm4gdGhpcy5maWJyYVNwYXJxbFNlcnZpY2UudXBkYXRlKHVwZGF0ZUVuZHBvaW50LCBkcSk7XG4gICAgfTtcbiAgICBQcm9qZWN0U2VydmljZS5wcm90b3R5cGUuZGVsZXRlT2JqZWN0ID0gZnVuY3Rpb24gKHVwZGF0ZUVuZHBvaW50LCBpZCwgZ3JhcGgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVsZXRlT2JqZWN0cyh1cGRhdGVFbmRwb2ludCwgW2lkXSwgZ3JhcGgpO1xuICAgIH07XG4gICAgUHJvamVjdFNlcnZpY2UucHJvdG90eXBlLnNhdmVDaXRhYmxlID0gZnVuY3Rpb24gKHVwZGF0ZUVuZHBvaW50LCBncmFwaFN0b3JlRW5kcG9pbnQsIHBzKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBtID0gbmV3IE1hcCgpO1xuICAgICAgICB2YXIgcHJlZml4ZXMgPSB7fTtcbiAgICAgICAgcHMudG9UdXJ0bGUobSwgcHJlZml4ZXMpO1xuICAgICAgICByZXR1cm4gdGhpcy5kZWxldGVPYmplY3RzKHVwZGF0ZUVuZHBvaW50LCBtLmtleXMoKSwgcHMuc291cmNlLmdyYXBoKS50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLmZpYnJhU3BhcnFsU2VydmljZS5wb3N0KGdyYXBoU3RvcmVFbmRwb2ludCwgdG9UdXJ0bGUocHJlZml4ZXMsIG0pLCBwcy5zb3VyY2UuZ3JhcGgpOyB9KTtcbiAgICB9O1xuICAgIHJldHVybiBQcm9qZWN0U2VydmljZTtcbn0oKSk7XG5leHBvcnQgeyBQcm9qZWN0U2VydmljZSB9O1xuUHJvamVjdFNlcnZpY2UuZGVsZXRlUXVlcnkgPSBcIkRFTEVURSB7XFxuIyBTVEFSVEdSQVBIXFxuICAjIFBBVFRFUk5TXFxuIyBFTkRHUkFQSFxcbn1cXG5XSEVSRSB7XFxuIyBTVEFSVEdSQVBIXFxuICAjIFBBVFRFUk5TXFxuIyBFTkRHUkFQSFxcbn1cIjtcbnZhciBQcm9qZWN0V29ya2VyU2VydmljZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUHJvamVjdFdvcmtlclNlcnZpY2UoZmlicmFTcGFycWxTZXJ2aWNlLCAkcSkge1xuICAgICAgICB0aGlzLmZpYnJhU3BhcnFsU2VydmljZSA9IGZpYnJhU3BhcnFsU2VydmljZTtcbiAgICAgICAgdGhpcy4kcSA9ICRxO1xuICAgIH1cbiAgICBQcm9qZWN0V29ya2VyU2VydmljZS5wcm90b3R5cGUubG9hZFByaW1hcnlFbmRwb2ludENvbmZpZ3VyYXRpb24gPSBmdW5jdGlvbiAoc291cmNlLCB0ZW1wbGF0ZUlkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJ1blNpbmdsZVF1ZXJ5KHNvdXJjZSwgUHJpbWFyeUVuZHBvaW50Q29uZmlndXJhdGlvbi5wcmltYXJ5RW5kcG9pbnRDb25maWd1cmF0aW9uUXVlcnksIHRlbXBsYXRlSWQsIG5ldyBQcmltYXJ5RW5kcG9pbnRDb25maWd1cmF0aW9uKHRlbXBsYXRlSWQsIHNvdXJjZSkpO1xuICAgIH07XG4gICAgUHJvamVjdFdvcmtlclNlcnZpY2UucHJvdG90eXBlLmxpc3RQcmltYXJ5RW5kcG9pbnRDb25maWd1cmF0aW9ucyA9IGZ1bmN0aW9uIChzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucnVuTGlzdFF1ZXJ5KHNvdXJjZSwgUHJpbWFyeUVuZHBvaW50Q29uZmlndXJhdGlvbi5saXN0UHJpbWFyeUVuZHBvaW50Q29uZmlndXJhdGlvbnNRdWVyeSwgZnVuY3Rpb24gKGlkKSB7IHJldHVybiBuZXcgUHJpbWFyeUVuZHBvaW50Q29uZmlndXJhdGlvbihpZCwgc291cmNlKTsgfSk7XG4gICAgfTtcbiAgICBQcm9qZWN0V29ya2VyU2VydmljZS5wcm90b3R5cGUubG9hZFJlbW90ZUVuZHBvaW50Q29uZmlndXJhdGlvbiA9IGZ1bmN0aW9uIChzb3VyY2UsIHRlbXBsYXRlSWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucnVuU2luZ2xlUXVlcnkoc291cmNlLCBSZW1vdGVFbmRwb2ludENvbmZpZ3VyYXRpb24ucmVtb3RlRW5kcG9pbnRDb25maWd1cmF0aW9uUXVlcnksIHRlbXBsYXRlSWQsIG5ldyBSZW1vdGVFbmRwb2ludENvbmZpZ3VyYXRpb24odGVtcGxhdGVJZCwgc291cmNlKSk7XG4gICAgfTtcbiAgICBQcm9qZWN0V29ya2VyU2VydmljZS5wcm90b3R5cGUubGlzdEFyY2hpdmVFbmRwb2ludENvbmZpZ3VyYXRpb25zID0gZnVuY3Rpb24gKHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5ydW5MaXN0UXVlcnkoc291cmNlLCBSZW1vdGVFbmRwb2ludENvbmZpZ3VyYXRpb24ubGlzdEFyY2hpdmVFbmRwb2ludENvbmZpZ3VyYXRpb25zUXVlcnksIGZ1bmN0aW9uIChpZCkgeyByZXR1cm4gbmV3IFJlbW90ZUVuZHBvaW50Q29uZmlndXJhdGlvbihpZCwgc291cmNlKTsgfSk7XG4gICAgfTtcbiAgICBQcm9qZWN0V29ya2VyU2VydmljZS5wcm90b3R5cGUubGlzdEF1dGhvcml0eUVuZHBvaW50Q29uZmlndXJhdGlvbnMgPSBmdW5jdGlvbiAoc291cmNlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJ1bkxpc3RRdWVyeShzb3VyY2UsIFJlbW90ZUVuZHBvaW50Q29uZmlndXJhdGlvbi5saXN0QXV0aG9yaXR5RW5kcG9pbnRDb25maWd1cmF0aW9uc1F1ZXJ5LCBmdW5jdGlvbiAoaWQpIHsgcmV0dXJuIG5ldyBSZW1vdGVFbmRwb2ludENvbmZpZ3VyYXRpb24oaWQsIHNvdXJjZSk7IH0pO1xuICAgIH07XG4gICAgUHJvamVjdFdvcmtlclNlcnZpY2UucHJvdG90eXBlLmxpc3RQcm9qZWN0cyA9IGZ1bmN0aW9uIChzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucnVuTGlzdFF1ZXJ5KHNvdXJjZSwgUHJvamVjdC5saXN0UHJvamVjdHNRdWVyeSwgZnVuY3Rpb24gKGlkKSB7IHJldHVybiBuZXcgUHJvamVjdChpZCwgc291cmNlKTsgfSk7XG4gICAgfTtcbiAgICBQcm9qZWN0V29ya2VyU2VydmljZS5wcm90b3R5cGUubGlzdFNjaGVtYXMgPSBmdW5jdGlvbiAoc291cmNlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJ1bkxpc3RRdWVyeShzb3VyY2UsIFNjaGVtYS5saXN0U2NoZW1hc1F1ZXJ5LCBmdW5jdGlvbiAoaWQpIHsgcmV0dXJuIG5ldyBTY2hlbWEoaWQsIHNvdXJjZSk7IH0pO1xuICAgIH07XG4gICAgUHJvamVjdFdvcmtlclNlcnZpY2UucHJvdG90eXBlLmxvYWRTY2hlbWEgPSBmdW5jdGlvbiAoc291cmNlLCBpZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ydW5TaW5nbGVRdWVyeShzb3VyY2UsIFNjaGVtYS5zY2hlbWFRdWVyeSwgaWQsIG5ldyBTY2hlbWEoaWQsIHNvdXJjZSkpO1xuICAgIH07XG4gICAgUHJvamVjdFdvcmtlclNlcnZpY2UucHJvdG90eXBlLmxvYWREYXRhTW9kZWwgPSBmdW5jdGlvbiAoc2NoZW1hcykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgZGF0YU1vZGVsID0gbmV3IERhdGFNb2RlbCgpO1xuICAgICAgICB2YXIgY2xhc3NlcyA9IG5ldyBFTWFwKGZ1bmN0aW9uIChpZCkge1xuICAgICAgICAgICAgdmFyIGNsID0gbmV3IENsYXNzKERhdGFGYWN0b3J5Lm5hbWVkTm9kZShpZCkpO1xuICAgICAgICAgICAgZGF0YU1vZGVsLmNsYXNzTWFwLnNldChpZCwgY2wpO1xuICAgICAgICAgICAgcmV0dXJuIGNsO1xuICAgICAgICB9KTtcbiAgICAgICAgdmFyIHByb3BlcnRpZXMgPSBuZXcgRU1hcChmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgICAgIHZhciBwciA9IG5ldyBQcm9wZXJ0eShEYXRhRmFjdG9yeS5uYW1lZE5vZGUoaWQpKTtcbiAgICAgICAgICAgIGRhdGFNb2RlbC5wcm9wZXJ0eU1hcC5zZXQoaWQsIHByKTtcbiAgICAgICAgICAgIHJldHVybiBwcjtcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBwcm9taXNlcyA9IFtdO1xuICAgICAgICBzY2hlbWFzLmZvckVhY2goZnVuY3Rpb24gKHNjaGVtYSkge1xuICAgICAgICAgICAgcHJvbWlzZXMucHVzaChfdGhpcy5maWJyYVNwYXJxbFNlcnZpY2UucXVlcnkoc2NoZW1hLmVuZHBvaW50LCBzY2hlbWEuY2xhc3NRdWVyeSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICB2YXIgY29uZiA9IHtcbiAgICAgICAgICAgICAgICAgICAgYmluZGluZ1R5cGVzOiB7IHR5cGVzOiAndW5pcXVlQXJyYXknIH0sXG4gICAgICAgICAgICAgICAgICAgIGJpbmRpbmdDb252ZXJ0ZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdXBlckNsYXNzZXM6IGZ1bmN0aW9uIChiaW5kaW5nKSB7IHJldHVybiBjbGFzc2VzLmdvYyhiaW5kaW5nLnZhbHVlKTsgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YkNsYXNzZXM6IGZ1bmN0aW9uIChiaW5kaW5nKSB7IHJldHVybiBjbGFzc2VzLmdvYyhiaW5kaW5nLnZhbHVlKTsgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVzOiBmdW5jdGlvbiAoYmluZGluZykgeyByZXR1cm4gY2xhc3Nlcy5nb2MoYmluZGluZy52YWx1ZSk7IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbHM6IGZ1bmN0aW9uIChiaW5kaW5nKSB7IHJldHVybiBEYXRhRmFjdG9yeS5ub2RlRnJvbUJpbmRpbmcoYmluZGluZyk7IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbnM6IGZ1bmN0aW9uIChiaW5kaW5nKSB7IHJldHVybiBEYXRhRmFjdG9yeS5ub2RlRnJvbUJpbmRpbmcoYmluZGluZyk7IH0sXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHZhciB0cmFja2VyID0gbmV3IHMuVW5pcXVlT2JqZWN0VHJhY2tlcigpO1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlLnJlc3VsdHMuYmluZGluZ3MuZm9yRWFjaChmdW5jdGlvbiAoYmluZGluZykgeyByZXR1cm4gcy5TcGFycWxTZXJ2aWNlLmJpbmRpbmdzVG9PYmplY3QoYmluZGluZywgY2xhc3Nlcy5nb2MoYmluZGluZ1snaWQnXS52YWx1ZSksIGNvbmYsIHRyYWNrZXIpOyB9KTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHByb21pc2VzLnB1c2goX3RoaXMuZmlicmFTcGFycWxTZXJ2aWNlLnF1ZXJ5KHNjaGVtYS5lbmRwb2ludCwgc2NoZW1hLnByb3BlcnR5UXVlcnkpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbmYgPSB7XG4gICAgICAgICAgICAgICAgICAgIGJpbmRpbmdUeXBlczogeyB0eXBlczogJ3VuaXF1ZUFycmF5JyB9LFxuICAgICAgICAgICAgICAgICAgICBiaW5kaW5nQ29udmVydGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3VwZXJQcm9wZXJ0aWVzOiBmdW5jdGlvbiAoYmluZGluZykgeyByZXR1cm4gcHJvcGVydGllcy5nb2MoYmluZGluZy52YWx1ZSk7IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJQcm9wZXJ0aWVzOiBmdW5jdGlvbiAoYmluZGluZykgeyByZXR1cm4gcHJvcGVydGllcy5nb2MoYmluZGluZy52YWx1ZSk7IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnZlcnNlUHJvcGVydHk6IGZ1bmN0aW9uIChiaW5kaW5nKSB7IHJldHVybiBwcm9wZXJ0aWVzLmdvYyhiaW5kaW5nLnZhbHVlKTsgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVzOiBmdW5jdGlvbiAoYmluZGluZykgeyByZXR1cm4gY2xhc3Nlcy5nb2MoYmluZGluZy52YWx1ZSk7IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBkb21haW5zOiBmdW5jdGlvbiAoYmluZGluZykgeyByZXR1cm4gY2xhc3Nlcy5nb2MoYmluZGluZy52YWx1ZSk7IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICByYW5nZXM6IGZ1bmN0aW9uIChiaW5kaW5nKSB7IHJldHVybiBjbGFzc2VzLmdvYyhiaW5kaW5nLnZhbHVlKTsgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsczogZnVuY3Rpb24gKGJpbmRpbmcpIHsgcmV0dXJuIERhdGFGYWN0b3J5Lm5vZGVGcm9tQmluZGluZyhiaW5kaW5nKTsgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uczogZnVuY3Rpb24gKGJpbmRpbmcpIHsgcmV0dXJuIERhdGFGYWN0b3J5Lm5vZGVGcm9tQmluZGluZyhiaW5kaW5nKTsgfSxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdmFyIHRyYWNrZXIgPSBuZXcgcy5VbmlxdWVPYmplY3RUcmFja2VyKCk7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2UucmVzdWx0cy5iaW5kaW5ncy5mb3JFYWNoKGZ1bmN0aW9uIChiaW5kaW5nKSB7IHJldHVybiBzLlNwYXJxbFNlcnZpY2UuYmluZGluZ3NUb09iamVjdChiaW5kaW5nLCBwcm9wZXJ0aWVzLmdvYyhiaW5kaW5nWydpZCddLnZhbHVlKSwgY29uZiwgdHJhY2tlcik7IH0pO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuJHEuYWxsKHByb21pc2VzKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNsYXNzZXMudmFsdWVzKCkuZm9yRWFjaChmdW5jdGlvbiAoY2wpIHtcbiAgICAgICAgICAgICAgICBjbC5idWlsZEFzTm9kZXMoKTtcbiAgICAgICAgICAgICAgICBjbC5zdXBlckNsYXNzZXMuZmlsdGVyKGZ1bmN0aW9uIChzcHIpIHsgcmV0dXJuICFzcHIuc3ViQ2xhc3Nlcy5maW5kKGZ1bmN0aW9uIChvcHIpIHsgcmV0dXJuIG9wciA9PT0gY2w7IH0pOyB9KS5mb3JFYWNoKGZ1bmN0aW9uIChzcHIpIHsgcmV0dXJuIHNwci5zdWJDbGFzc2VzLnB1c2goY2wpOyB9KTtcbiAgICAgICAgICAgICAgICBjbC5zdWJDbGFzc2VzLmZpbHRlcihmdW5jdGlvbiAoc3ByKSB7IHJldHVybiAhc3ByLnN1cGVyQ2xhc3Nlcy5maW5kKGZ1bmN0aW9uIChvcHIpIHsgcmV0dXJuIG9wciA9PT0gY2w7IH0pOyB9KS5mb3JFYWNoKGZ1bmN0aW9uIChzcHIpIHsgcmV0dXJuIHNwci5zdXBlckNsYXNzZXMucHVzaChjbCk7IH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjbGFzc2VzLnZhbHVlcygpLmZvckVhY2goZnVuY3Rpb24gKGNsKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNsLnN1cGVyQ2xhc3Nlcy5sZW5ndGggPT09IDApXG4gICAgICAgICAgICAgICAgICAgIGRhdGFNb2RlbC5yb290Q2xhc3Nlcy5wdXNoKGNsKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcHJvcGVydGllcy52YWx1ZXMoKS5mb3JFYWNoKGZ1bmN0aW9uIChwcikge1xuICAgICAgICAgICAgICAgIHByLmJ1aWxkQXNOb2RlcygpO1xuICAgICAgICAgICAgICAgIGlmIChwci5pbnZlcnNlUHJvcGVydHkpXG4gICAgICAgICAgICAgICAgICAgIHByLmludmVyc2VQcm9wZXJ0eS5pbnZlcnNlUHJvcGVydHkgPSBwcjtcbiAgICAgICAgICAgICAgICBwci5zdXBlclByb3BlcnRpZXMuZmlsdGVyKGZ1bmN0aW9uIChzcHIpIHsgcmV0dXJuICFzcHIuc3ViUHJvcGVydGllcy5maW5kKGZ1bmN0aW9uIChvcHIpIHsgcmV0dXJuIG9wciA9PT0gcHI7IH0pOyB9KS5mb3JFYWNoKGZ1bmN0aW9uIChzcHIpIHsgcmV0dXJuIHNwci5zdWJQcm9wZXJ0aWVzLnB1c2gocHIpOyB9KTtcbiAgICAgICAgICAgICAgICBwci5zdWJQcm9wZXJ0aWVzLmZpbHRlcihmdW5jdGlvbiAoc3ByKSB7IHJldHVybiAhc3ByLnN1cGVyUHJvcGVydGllcy5maW5kKGZ1bmN0aW9uIChvcHIpIHsgcmV0dXJuIG9wciA9PT0gcHI7IH0pOyB9KS5mb3JFYWNoKGZ1bmN0aW9uIChzcHIpIHsgcmV0dXJuIHNwci5zdXBlclByb3BlcnRpZXMucHVzaChwcik7IH0pO1xuICAgICAgICAgICAgICAgIHByLmRvbWFpbnMuZm9yRWFjaChmdW5jdGlvbiAoZGMpIHsgcmV0dXJuIGRjLnByb3BlcnRpZXMucHVzaChwcik7IH0pO1xuICAgICAgICAgICAgICAgIHByLnJhbmdlcy5mb3JFYWNoKGZ1bmN0aW9uIChyYykgeyByZXR1cm4gcmMuaW52ZXJzZVByb3BlcnRpZXMucHVzaChwcik7IH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBwcm9wZXJ0aWVzLnZhbHVlcygpLmZvckVhY2goZnVuY3Rpb24gKHByKSB7XG4gICAgICAgICAgICAgICAgaWYgKHByLnN1cGVyUHJvcGVydGllcy5sZW5ndGggPT09IDApXG4gICAgICAgICAgICAgICAgICAgIGRhdGFNb2RlbC5yb290UHJvcGVydGllcy5wdXNoKHByKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGRhdGFNb2RlbDtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBQcm9qZWN0V29ya2VyU2VydmljZS5wcm90b3R5cGUubG9hZFByb2plY3QgPSBmdW5jdGlvbiAoc291cmNlLCBpZCwgbG9hZEZ1bGwpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIHEgPSB0aGlzLnJ1blNpbmdsZVF1ZXJ5KHNvdXJjZSwgUHJvamVjdC5wcm9qZWN0UXVlcnksIGlkLCBuZXcgUHJvamVjdChpZCwgc291cmNlKSk7XG4gICAgICAgIGlmICghbG9hZEZ1bGwpXG4gICAgICAgICAgICByZXR1cm4gcTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgcmV0dXJuIHEudGhlbihmdW5jdGlvbiAocCkge1xuICAgICAgICAgICAgICAgIHZhciBwcm9taXNlcyA9IFtdO1xuICAgICAgICAgICAgICAgIHByb21pc2VzLnB1c2goX3RoaXMuJHEuYWxsKHAuc2NoZW1hcy5tYXAoZnVuY3Rpb24gKHNjaGVtYSkgeyByZXR1cm4gX3RoaXMubG9hZFNjaGVtYShzY2hlbWEuc291cmNlLCBzY2hlbWEuaWQpOyB9KSkudGhlbihmdW5jdGlvbiAoc2NoZW1hcykge1xuICAgICAgICAgICAgICAgICAgICBwLnNjaGVtYXMgPSBzY2hlbWFzO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMubG9hZERhdGFNb2RlbChzY2hlbWFzKS50aGVuKGZ1bmN0aW9uIChkbSkgeyByZXR1cm4gcC5kYXRhTW9kZWwgPSBkbTsgfSk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIHZhciBuYXJjaGUgPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgbmF1dGhlID0gW107XG4gICAgICAgICAgICAgICAgcC5hcmNoaXZlRW5kcG9pbnRzLmZvckVhY2goZnVuY3Rpb24gKGFlKSB7IHJldHVybiBwcm9taXNlcy5wdXNoKF90aGlzLmxvYWRSZW1vdGVFbmRwb2ludENvbmZpZ3VyYXRpb24oYWUuc291cmNlLCBhZS5pZCkudGhlbihmdW5jdGlvbiAoYWUyKSB7IHJldHVybiBuYXJjaGUucHVzaChhZTIpOyB9KSk7IH0pO1xuICAgICAgICAgICAgICAgIHAuYXV0aG9yaXR5RW5kcG9pbnRzLmZvckVhY2goZnVuY3Rpb24gKGFlKSB7IHJldHVybiBwcm9taXNlcy5wdXNoKF90aGlzLmxvYWRSZW1vdGVFbmRwb2ludENvbmZpZ3VyYXRpb24oYWUuc291cmNlLCBhZS5pZCkudGhlbihmdW5jdGlvbiAoYWUyKSB7IHJldHVybiBuYXV0aGUucHVzaChhZTIpOyB9KSk7IH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy4kcS5hbGwocHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBwLmFyY2hpdmVFbmRwb2ludHMgPSBuYXJjaGU7XG4gICAgICAgICAgICAgICAgICAgIHAuYXV0aG9yaXR5RW5kcG9pbnRzID0gbmF1dGhlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcDtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgIH07XG4gICAgUHJvamVjdFdvcmtlclNlcnZpY2UucHJvdG90eXBlLnJ1blNpbmdsZVF1ZXJ5ID0gZnVuY3Rpb24gKHNvdXJjZSwgdHEsIGlkLCBwcykge1xuICAgICAgICB0cSA9IHNvdXJjZS5ncmFwaCA/IHRxLnJlcGxhY2UoLyMgU1RBUlRHUkFQSC9nLCAnR1JBUEggPCcgKyBzb3VyY2UuZ3JhcGggKyAnPiB7JykucmVwbGFjZSgvIyBFTkRHUkFQSC9nLCAnfScpIDogdHEucmVwbGFjZSgvLiojIFNUQVJUR1JBUEhcXG4vZywgJycpLnJlcGxhY2UoLy4qIyBFTkRHUkFQSFxcbi9nLCAnJyk7XG4gICAgICAgIHRxID0gdHEucmVwbGFjZSgvPElEPi9nLCAnPCcgKyBpZCArICc+Jyk7XG4gICAgICAgIHZhciBkZWZlcnJlZCA9IHRoaXMuJHEuZGVmZXIoKTtcbiAgICAgICAgdGhpcy5maWJyYVNwYXJxbFNlcnZpY2UucXVlcnkoc291cmNlLnNwYXJxbEVuZHBvaW50LCB0cSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHZhciBjb25mID0ge1xuICAgICAgICAgICAgICAgIGJpbmRpbmdUeXBlczogeyByaWdodHNIb2xkZXJzOiAndW5pcXVlQXJyYXknLCBzY2hlbWFzOiAndW5pcXVlQXJyYXknLCBhdXRob3JpdHlFbmRwb2ludHM6ICd1bmlxdWVBcnJheScsIGFyY2hpdmVFbmRwb2ludHM6ICd1bmlxdWVBcnJheScgfSxcbiAgICAgICAgICAgICAgICBiaW5kaW5nQ29udmVydGVyczoge1xuICAgICAgICAgICAgICAgICAgICB0eXBlczogZnVuY3Rpb24gKGJpbmRpbmcpIHsgcmV0dXJuIERhdGFGYWN0b3J5Lm5vZGVGcm9tQmluZGluZyhiaW5kaW5nKTsgfSxcbiAgICAgICAgICAgICAgICAgICAgbGFiZWxzOiBmdW5jdGlvbiAoYmluZGluZykgeyByZXR1cm4gRGF0YUZhY3Rvcnkubm9kZUZyb21CaW5kaW5nKGJpbmRpbmcpOyB9LFxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbnM6IGZ1bmN0aW9uIChiaW5kaW5nKSB7IHJldHVybiBEYXRhRmFjdG9yeS5ub2RlRnJvbUJpbmRpbmcoYmluZGluZyk7IH0sXG4gICAgICAgICAgICAgICAgICAgIHNjaGVtYXM6IGZ1bmN0aW9uIChiaW5kaW5nKSB7IHJldHVybiBuZXcgU2NoZW1hKGJpbmRpbmcudmFsdWUsIENpdGFibGVTb3VyY2UuY2xvbmUoc291cmNlKSk7IH0sXG4gICAgICAgICAgICAgICAgICAgIGF1dGhvcml0eUVuZHBvaW50czogZnVuY3Rpb24gKGJpbmRpbmcpIHsgcmV0dXJuIG5ldyBSZW1vdGVFbmRwb2ludENvbmZpZ3VyYXRpb24oYmluZGluZy52YWx1ZSwgQ2l0YWJsZVNvdXJjZS5jbG9uZShzb3VyY2UpKTsgfSxcbiAgICAgICAgICAgICAgICAgICAgYXJjaGl2ZUVuZHBvaW50czogZnVuY3Rpb24gKGJpbmRpbmcpIHsgcmV0dXJuIG5ldyBSZW1vdGVFbmRwb2ludENvbmZpZ3VyYXRpb24oYmluZGluZy52YWx1ZSwgQ2l0YWJsZVNvdXJjZS5jbG9uZShzb3VyY2UpKTsgfSxcbiAgICAgICAgICAgICAgICAgICAgcmlnaHRzSG9sZGVyc19sYWJlbHM6IGZ1bmN0aW9uIChiaW5kaW5nKSB7IHJldHVybiBEYXRhRmFjdG9yeS5ub2RlRnJvbUJpbmRpbmcoYmluZGluZyk7IH0sXG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0c0hvbGRlcnNfZGVzY3JpcHRpb25zOiBmdW5jdGlvbiAoYmluZGluZykgeyByZXR1cm4gRGF0YUZhY3Rvcnkubm9kZUZyb21CaW5kaW5nKGJpbmRpbmcpOyB9LFxuICAgICAgICAgICAgICAgICAgICByaWdodHNIb2xkZXJzOiBmdW5jdGlvbiAoYmluZGluZykgeyByZXR1cm4gbmV3IENpdGFibGUoYmluZGluZy52YWx1ZSwgc291cmNlKTsgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgdHJhY2tlciA9IG5ldyBzLlVuaXF1ZU9iamVjdFRyYWNrZXIoKTtcbiAgICAgICAgICAgIHJlc3BvbnNlLnJlc3VsdHMuYmluZGluZ3MuZm9yRWFjaChmdW5jdGlvbiAoYikgeyByZXR1cm4gcy5TcGFycWxTZXJ2aWNlLmJpbmRpbmdzVG9PYmplY3QoYiwgcHMsIGNvbmYsIHRyYWNrZXIpOyB9KTtcbiAgICAgICAgICAgIFByb2plY3RTZXJ2aWNlLm9yZGVyQ2l0YWJsZXMocHMucmlnaHRzSG9sZGVycyk7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHBzKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgIH07XG4gICAgUHJvamVjdFdvcmtlclNlcnZpY2UucHJvdG90eXBlLnJ1bkxpc3RRdWVyeSA9IGZ1bmN0aW9uIChzb3VyY2UsIGxxLCBvYykge1xuICAgICAgICBscSA9IHNvdXJjZS5ncmFwaCA/IGxxLnJlcGxhY2UoLyMgU1RBUlRHUkFQSC9nLCAnR1JBUEggPCcgKyBzb3VyY2UuZ3JhcGggKyAnPiB7JykucmVwbGFjZSgvIyBFTkRHUkFQSC9nLCAnfScpIDogbHEucmVwbGFjZSgvLiojIFNUQVJUR1JBUEhcXG4vZywgJycpLnJlcGxhY2UoLy4qIyBFTkRHUkFQSFxcbi9nLCAnJyk7XG4gICAgICAgIHJldHVybiB0aGlzLmZpYnJhU3BhcnFsU2VydmljZS5xdWVyeShzb3VyY2Uuc3BhcnFsRW5kcG9pbnQsIGxxKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgdmFyIHByb2plY3RzID0gbmV3IEVNYXAob2MpO1xuICAgICAgICAgICAgdmFyIGNvbmYgPSB7XG4gICAgICAgICAgICAgICAgYmluZGluZ1R5cGVzOiB7IHJpZ2h0c0hvbGRlcnM6ICd1bmlxdWVBcnJheScsIHNjaGVtYXM6ICd1bmlxdWVBcnJheScsIGF1dGhvcml0eUVuZHBvaW50czogJ3VuaXF1ZUFycmF5JywgYXJjaGl2ZUVuZHBvaW50czogJ3VuaXF1ZUFycmF5JyB9LFxuICAgICAgICAgICAgICAgIGJpbmRpbmdDb252ZXJ0ZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGVzOiBmdW5jdGlvbiAoYmluZGluZykgeyByZXR1cm4gRGF0YUZhY3Rvcnkubm9kZUZyb21CaW5kaW5nKGJpbmRpbmcpOyB9LFxuICAgICAgICAgICAgICAgICAgICBsYWJlbHM6IGZ1bmN0aW9uIChiaW5kaW5nKSB7IHJldHVybiBEYXRhRmFjdG9yeS5ub2RlRnJvbUJpbmRpbmcoYmluZGluZyk7IH0sXG4gICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uczogZnVuY3Rpb24gKGJpbmRpbmcpIHsgcmV0dXJuIERhdGFGYWN0b3J5Lm5vZGVGcm9tQmluZGluZyhiaW5kaW5nKTsgfSxcbiAgICAgICAgICAgICAgICAgICAgc2NoZW1hczogZnVuY3Rpb24gKGJpbmRpbmcpIHsgcmV0dXJuIG5ldyBTY2hlbWEoYmluZGluZy52YWx1ZSwgQ2l0YWJsZVNvdXJjZS5jbG9uZShzb3VyY2UpKTsgfSxcbiAgICAgICAgICAgICAgICAgICAgYXV0aG9yaXR5RW5kcG9pbnRzOiBmdW5jdGlvbiAoYmluZGluZykgeyByZXR1cm4gbmV3IFJlbW90ZUVuZHBvaW50Q29uZmlndXJhdGlvbihiaW5kaW5nLnZhbHVlLCBDaXRhYmxlU291cmNlLmNsb25lKHNvdXJjZSkpOyB9LFxuICAgICAgICAgICAgICAgICAgICBhcmNoaXZlRW5kcG9pbnRzOiBmdW5jdGlvbiAoYmluZGluZykgeyByZXR1cm4gbmV3IFJlbW90ZUVuZHBvaW50Q29uZmlndXJhdGlvbihiaW5kaW5nLnZhbHVlLCBDaXRhYmxlU291cmNlLmNsb25lKHNvdXJjZSkpOyB9LFxuICAgICAgICAgICAgICAgICAgICByaWdodHNIb2xkZXJzX2xhYmVsczogZnVuY3Rpb24gKGJpbmRpbmcpIHsgcmV0dXJuIERhdGFGYWN0b3J5Lm5vZGVGcm9tQmluZGluZyhiaW5kaW5nKTsgfSxcbiAgICAgICAgICAgICAgICAgICAgcmlnaHRzSG9sZGVyc19kZXNjcmlwdGlvbnM6IGZ1bmN0aW9uIChiaW5kaW5nKSB7IHJldHVybiBEYXRhRmFjdG9yeS5ub2RlRnJvbUJpbmRpbmcoYmluZGluZyk7IH0sXG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0c0hvbGRlcnM6IGZ1bmN0aW9uIChiaW5kaW5nKSB7IHJldHVybiBuZXcgQ2l0YWJsZShiaW5kaW5nLnZhbHVlLCBzb3VyY2UpOyB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciB0cmFja2VyID0gbmV3IHMuVW5pcXVlT2JqZWN0VHJhY2tlcigpO1xuICAgICAgICAgICAgcmVzcG9uc2UucmVzdWx0cy5iaW5kaW5ncy5mb3JFYWNoKGZ1bmN0aW9uIChiaW5kaW5nKSB7IHJldHVybiBzLlNwYXJxbFNlcnZpY2UuYmluZGluZ3NUb09iamVjdChiaW5kaW5nLCBwcm9qZWN0cy5nb2MoYmluZGluZ1snaWQnXS52YWx1ZSksIGNvbmYsIHRyYWNrZXIpOyB9KTtcbiAgICAgICAgICAgIHByb2plY3RzLnZhbHVlcygpLmZvckVhY2goZnVuY3Rpb24gKHApIHsgcmV0dXJuIFByb2plY3RTZXJ2aWNlLm9yZGVyQ2l0YWJsZXMocC5yaWdodHNIb2xkZXJzKTsgfSk7XG4gICAgICAgICAgICByZXR1cm4gcHJvamVjdHMudmFsdWVzKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgcmV0dXJuIFByb2plY3RXb3JrZXJTZXJ2aWNlO1xufSgpKTtcbmV4cG9ydCB7IFByb2plY3RXb3JrZXJTZXJ2aWNlIH07XG5hbmd1bGFyLm1vZHVsZSgnZmlicmEuc2VydmljZXMucHJvamVjdC1zZXJ2aWNlJywgW1xuICAgICdmaWJyYS5zZXJ2aWNlcy5maWJyYS1zZXJ2aWNlJyxcbiAgICAnZmlicmEuc2VydmljZXMuZmlicmEtc3BhcnFsLXNlcnZpY2UnXG5dKVxuICAgIC5jb25maWcoZnVuY3Rpb24gKCRwcm92aWRlKSB7XG4gICAgJHByb3ZpZGUuc2VydmljZSgncHJvamVjdFNlcnZpY2UnLCBQcm9qZWN0U2VydmljZSk7XG4gICAgJHByb3ZpZGUuc2VydmljZSgncHJvamVjdFdvcmtlclNlcnZpY2UnLCBQcm9qZWN0V29ya2VyU2VydmljZSk7XG59KTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2FwcC9zZXJ2aWNlcy9wcm9qZWN0LXNlcnZpY2UvcHJvamVjdC1zZXJ2aWNlLnRzIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFMQTtBQUZBO0FBVUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBUkE7QUFGQTtBQWFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBVEE7QUFGQTtBQWNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBVEE7QUFGQTtBQWNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),
/* 30 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__project_service_project__ = __webpack_require__(26);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__project_service_data_model__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__models_rdf__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__models_citable__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__components_collection_utils__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__components_tree_tree_component__ = __webpack_require__(23);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__sparql_item_service__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_angular__);\n\n\n\n\n\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_7_angular__[\"module\"]('fibra.services.worker-service-prototype-mapping-configuration', []).config(function ($provide) {\n    $provide.service('workerServicePrototypeMappingConfiguration', function () {\n        var mappings = {\n            'Object': Object.prototype\n        };\n        var fibra = {\n            'Project': __WEBPACK_IMPORTED_MODULE_0__project_service_project__[\"a\" /* Project */],\n            'Node': __WEBPACK_IMPORTED_MODULE_2__models_rdf__[\"p\" /* Node */],\n            'Citable': __WEBPACK_IMPORTED_MODULE_3__models_citable__[\"b\" /* Citable */],\n            'Map': __WEBPACK_IMPORTED_MODULE_4__components_collection_utils__[\"d\" /* Map */],\n            'Class': __WEBPACK_IMPORTED_MODULE_1__project_service_data_model__[\"b\" /* Class */],\n            'Property': __WEBPACK_IMPORTED_MODULE_1__project_service_data_model__[\"c\" /* Property */],\n            'TreeNode': __WEBPACK_IMPORTED_MODULE_5__components_tree_tree_component__[\"a\" /* TreeNode */],\n            'PropertyAndValue': __WEBPACK_IMPORTED_MODULE_6__sparql_item_service__[\"c\" /* PropertyAndValue */]\n        }; // List out classes here\n        for (var _i = 0, _a = Object.getOwnPropertyNames(fibra); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            mappings[prop] = fibra[prop].prototype;\n            fibra[prop].__name = prop;\n        }\n        return mappings;\n    });\n});//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcHAvc2VydmljZXMvd29ya2VyLXNlcnZpY2UvcHJvdG90eXBlLW1hcHBpbmctY29uZmlndXJhdGlvbi50cz82N2UzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcbmltcG9ydCB7IFByb2plY3QgfSBmcm9tICcuLi9wcm9qZWN0LXNlcnZpY2UvcHJvamVjdCc7XG5pbXBvcnQgeyBDbGFzcywgUHJvcGVydHkgfSBmcm9tICcuLi9wcm9qZWN0LXNlcnZpY2UvZGF0YS1tb2RlbCc7XG5pbXBvcnQgeyBOb2RlIH0gZnJvbSAnLi4vLi4vbW9kZWxzL3JkZic7XG5pbXBvcnQgeyBDaXRhYmxlIH0gZnJvbSAnLi4vLi4vbW9kZWxzL2NpdGFibGUnO1xuaW1wb3J0IHsgTWFwIH0gZnJvbSAnLi4vLi4vY29tcG9uZW50cy9jb2xsZWN0aW9uLXV0aWxzJztcbmltcG9ydCB7IFRyZWVOb2RlIH0gZnJvbSAnLi4vLi4vY29tcG9uZW50cy90cmVlL3RyZWUtY29tcG9uZW50JztcbmltcG9ydCB7IFByb3BlcnR5QW5kVmFsdWUgfSBmcm9tICcuLi9zcGFycWwtaXRlbS1zZXJ2aWNlJztcbmltcG9ydCAqIGFzIGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG5hbmd1bGFyLm1vZHVsZSgnZmlicmEuc2VydmljZXMud29ya2VyLXNlcnZpY2UtcHJvdG90eXBlLW1hcHBpbmctY29uZmlndXJhdGlvbicsIFtdKVxuICAgIC5jb25maWcoZnVuY3Rpb24gKCRwcm92aWRlKSB7XG4gICAgJHByb3ZpZGUuc2VydmljZSgnd29ya2VyU2VydmljZVByb3RvdHlwZU1hcHBpbmdDb25maWd1cmF0aW9uJywgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbWFwcGluZ3MgPSB7XG4gICAgICAgICAgICAnT2JqZWN0JzogT2JqZWN0LnByb3RvdHlwZSxcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGZpYnJhID0ge1xuICAgICAgICAgICAgJ1Byb2plY3QnOiBQcm9qZWN0LFxuICAgICAgICAgICAgJ05vZGUnOiBOb2RlLFxuICAgICAgICAgICAgJ0NpdGFibGUnOiBDaXRhYmxlLFxuICAgICAgICAgICAgJ01hcCc6IE1hcCxcbiAgICAgICAgICAgICdDbGFzcyc6IENsYXNzLFxuICAgICAgICAgICAgJ1Byb3BlcnR5JzogUHJvcGVydHksXG4gICAgICAgICAgICAnVHJlZU5vZGUnOiBUcmVlTm9kZSxcbiAgICAgICAgICAgICdQcm9wZXJ0eUFuZFZhbHVlJzogUHJvcGVydHlBbmRWYWx1ZVxuICAgICAgICB9OyAvLyBMaXN0IG91dCBjbGFzc2VzIGhlcmVcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGZpYnJhKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIHZhciBwcm9wID0gX2FbX2ldO1xuICAgICAgICAgICAgbWFwcGluZ3NbcHJvcF0gPSBmaWJyYVtwcm9wXS5wcm90b3R5cGU7XG4gICAgICAgICAgICBmaWJyYVtwcm9wXS5fX25hbWUgPSBwcm9wO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXBwaW5ncztcbiAgICB9KTtcbn0pO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vYXBwL3NlcnZpY2VzL3dvcmtlci1zZXJ2aWNlL3Byb3RvdHlwZS1tYXBwaW5nLWNvbmZpZ3VyYXRpb24udHMiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVJBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),
/* 31 */,
/* 32 */,
/* 33 */,
/* 34 */,
/* 35 */,
/* 36 */,
/* 37 */,
/* 38 */,
/* 39 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__models_citable__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__models_rdf__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__sparql_autocomplete_service__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__data_model__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__sparql_item_service__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__services_sparql_tree_service__ = __webpack_require__(10);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return RemoteEndpointConfiguration; });\n\n\nvar __extends = this && this.__extends || function () {\n    var extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (d, b) {\n        d.__proto__ = b;\n    } || function (d, b) {\n        for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() {\n            this.constructor = d;\n        }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n}();\n\n\n\n\n\n\nvar s = fi.seco.sparql.SparqlService;\nvar RemoteEndpointConfiguration = function (_super) {\n    __extends(RemoteEndpointConfiguration, _super);\n    function RemoteEndpointConfiguration() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.types = [];\n        _this.autocompletionQuery = __WEBPACK_IMPORTED_MODULE_2__sparql_autocomplete_service__[\"b\" /* SparqlAutocompleteService */].defaultMatchQuery;\n        _this.propertyQuery = __WEBPACK_IMPORTED_MODULE_3__data_model__[\"a\" /* DataModel */].propertyQuery;\n        _this.classQuery = __WEBPACK_IMPORTED_MODULE_3__data_model__[\"a\" /* DataModel */].classQuery;\n        _this.itemQuery = __WEBPACK_IMPORTED_MODULE_4__sparql_item_service__[\"b\" /* SparqlItemService */].getRemoteItemPropertiesQuery;\n        // TODO remove\n        _this.treeQuery = __WEBPACK_IMPORTED_MODULE_5__services_sparql_tree_service__[\"b\" /* SparqlTreeService */].getClassTreeQuery;\n        return _this;\n    }\n    RemoteEndpointConfiguration.prototype.toTurtle = function (fragmentsById, prefixes) {\n        if (!fragmentsById.has(this.id)) {\n            prefixes['fibra'] = __WEBPACK_IMPORTED_MODULE_1__models_rdf__[\"m\" /* FIBRA */].ns;\n            prefixes['void'] = __WEBPACK_IMPORTED_MODULE_1__models_rdf__[\"o\" /* VOID */].ns;\n            prefixes['rdf'] = __WEBPACK_IMPORTED_MODULE_1__models_rdf__[\"n\" /* RDF */].ns;\n            var f_1 = \"<\" + this.id + \"> a \";\n            this.types.forEach(function (type) {\n                return f_1 = f_1 + (type.toCanonical() + \" ,\");\n            });\n            f_1 = f_1.substring(0, f_1.length - 2) + ' ;';\n            fragmentsById.set(this.id, f_1);\n            _super.prototype.toTurtle.call(this, fragmentsById, prefixes);\n            f_1 = fragmentsById.get(this.id);\n            f_1 = f_1 + (\"\\nvoid:sparqlEndpoint <\" + this.endpoint + \"> ;\\nfibra:autocompletionQuery \" + s.stringToSPARQLString(this.autocompletionQuery) + \" ;\\nfibra:itemQuery \" + s.stringToSPARQLString(this.itemQuery) + \" ;\\nfibra:treeQuery \" + s.stringToSPARQLString(this.treeQuery) + \" ;\\nfibra:propertyQuery \" + s.stringToSPARQLString(this.propertyQuery) + \" ;\\nfibra:classQuery \" + s.stringToSPARQLString(this.classQuery) + \" .\");\n            fragmentsById.set(this.id, f_1);\n        }\n    };\n    return RemoteEndpointConfiguration;\n}(__WEBPACK_IMPORTED_MODULE_0__models_citable__[\"b\" /* Citable */]);\n\nRemoteEndpointConfiguration.listAuthorityEndpointConfigurationsQuery = \"PREFIX fibra: <http://hdlab.stanford.edu/fibra/ontology#>\\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\\nPREFIX dcterms: <http://purl.org/dc/terms/>\\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\\nPREFIX void: <http://rdfs.org/ns/void#>\\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\\nSELECT ?id ?types ?labels ?descriptions ?rightsHolders ?rightsHolders_labels ?rightsHolders_descriptions ?rightsHolders_url ?rightsHolders_order ?url ?endpoint ?autocompletionQuery ?itemQuery ?treeQuery ?propertyQuery ?classQuery {\\n# STARTGRAPH\\n  ?id a fibra:AuthorityEndpointConfiguration .\\n  ?id a ?types .\\n  { ?id skos:prefLabel ?labels }\\n  UNION\\n  { ?id dcterms:description ?descriptions }\\n  UNION\\n  {\\n    ?id void:sparqlEndpoint ?endpoint .\\n    ?id fibra:autocompletionQuery ?autocompletionQuery .\\n    ?id fibra:itemQuery ?itemQuery .\\n    ?id fibra:treeQuery ?treeQuery .\\n    ?id fibra:propertyQuery ?propertyQuery .\\n    ?id fibra:classQuery ?classQuery .\\n    OPTIONAL { ?id foaf:homepage ?url }\\n  } UNION {\\n    {\\n      ?id dcterms:rightsHolder ?rightsHolders\\n    } UNION {\\n      ?id fibra:qualifiedAssertion ?qa .\\n      ?qa rdf:predicate dcterms:rightsHolder .\\n      ?qa rdf:object ?rightsHolders .\\n      OPTIONAL { ?qa fibra:order ?rightsHolders_order }\\n    }\\n    {\\n      ?rightsHolders skos:prefLabel ?rightsHolders_labels\\n    } UNION {\\n      ?rightsHolders foaf:homepage ?rightsHolders_url\\n    } UNION {\\n      ?rightsHolders dcterms:description ?rightsHolders_descriptions\\n    }\\n  }\\n# ENDGRAPH\\n}\";\nRemoteEndpointConfiguration.listArchiveEndpointConfigurationsQuery = RemoteEndpointConfiguration.listAuthorityEndpointConfigurationsQuery.replace(/fibra:AuthorityEndpointConfiguration/, 'fibra:ArchiveEndpointConfiguration');\nRemoteEndpointConfiguration.remoteEndpointConfigurationQuery = \"PREFIX fibra: <http://hdlab.stanford.edu/fibra/ontology#>\\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\\nPREFIX dcterms: <http://purl.org/dc/terms/>\\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\\nPREFIX void: <http://rdfs.org/ns/void#>\\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\\nSELECT ?types ?labels ?descriptions ?rightsHolders ?rightsHolders_labels ?rightsHolders_descriptions ?rightsHolders_url ?rightsHolders_order ?url ?endpoint ?autocompletionQuery ?itemQuery ?treeQuery ?propertyQuery ?classQuery {\\n# STARTGRAPH\\n  { <ID> skos:prefLabel ?labels }\\n  UNION\\n  { <ID> dcterms:description ?descriptions }\\n  UNION\\n  {\\n    <ID> a ?types .\\n    <ID> void:sparqlEndpoint ?endpoint .\\n    <ID> fibra:autocompletionQuery ?autocompletionQuery .\\n    <ID> fibra:itemQuery ?itemQuery .\\n    <ID> fibra:treeQuery ?treeQuery .\\n    <ID> fibra:propertyQuery ?propertyQuery .\\n    <ID> fibra:classQuery ?classQuery .\\n    OPTIONAL { <ID> foaf:homepage ?url }\\n  } UNION {\\n    {\\n      <ID> dcterms:rightsHolder ?rightsHolders\\n    } UNION {\\n      <ID> fibra:qualifiedAssertion ?qa .\\n      ?qa rdf:predicate dcterms:rightsHolder .\\n      ?qa rdf:object ?rightsHolders .\\n      OPTIONAL { ?qa fibra:order ?rightsHolders_order }\\n    }\\n    {\\n      ?rightsHolders skos:prefLabel ?rightsHolders_labels\\n    } UNION {\\n      ?rightsHolders foaf:homepage ?rightsHolders_url\\n    } UNION {\\n      ?rightsHolders dcterms:description ?rightsHolders_descriptions\\n    }\\n  }\\n# ENDGRAPH\\n}\";//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcHAvc2VydmljZXMvcHJvamVjdC1zZXJ2aWNlL3JlbW90ZS1lbmRwb2ludC1jb25maWd1cmF0aW9uLnRzP2IwZjQiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5pbXBvcnQgeyBDaXRhYmxlIH0gZnJvbSAnLi4vLi4vbW9kZWxzL2NpdGFibGUnO1xuaW1wb3J0IHsgRklCUkEsIFZPSUQsIFJERiB9IGZyb20gJy4uLy4uL21vZGVscy9yZGYnO1xuaW1wb3J0IHsgU3BhcnFsQXV0b2NvbXBsZXRlU2VydmljZSB9IGZyb20gJy4uL3NwYXJxbC1hdXRvY29tcGxldGUtc2VydmljZSc7XG5pbXBvcnQgeyBEYXRhTW9kZWwgfSBmcm9tICcuL2RhdGEtbW9kZWwnO1xuaW1wb3J0IHsgU3BhcnFsSXRlbVNlcnZpY2UgfSBmcm9tICcuLi9zcGFycWwtaXRlbS1zZXJ2aWNlJztcbmltcG9ydCB7IFNwYXJxbFRyZWVTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvc3BhcnFsLXRyZWUtc2VydmljZSc7XG52YXIgcyA9IGZpLnNlY28uc3BhcnFsLlNwYXJxbFNlcnZpY2U7XG52YXIgUmVtb3RlRW5kcG9pbnRDb25maWd1cmF0aW9uID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUmVtb3RlRW5kcG9pbnRDb25maWd1cmF0aW9uLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFJlbW90ZUVuZHBvaW50Q29uZmlndXJhdGlvbigpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnR5cGVzID0gW107XG4gICAgICAgIF90aGlzLmF1dG9jb21wbGV0aW9uUXVlcnkgPSBTcGFycWxBdXRvY29tcGxldGVTZXJ2aWNlLmRlZmF1bHRNYXRjaFF1ZXJ5O1xuICAgICAgICBfdGhpcy5wcm9wZXJ0eVF1ZXJ5ID0gRGF0YU1vZGVsLnByb3BlcnR5UXVlcnk7XG4gICAgICAgIF90aGlzLmNsYXNzUXVlcnkgPSBEYXRhTW9kZWwuY2xhc3NRdWVyeTtcbiAgICAgICAgX3RoaXMuaXRlbVF1ZXJ5ID0gU3BhcnFsSXRlbVNlcnZpY2UuZ2V0UmVtb3RlSXRlbVByb3BlcnRpZXNRdWVyeTtcbiAgICAgICAgLy8gVE9ETyByZW1vdmVcbiAgICAgICAgX3RoaXMudHJlZVF1ZXJ5ID0gU3BhcnFsVHJlZVNlcnZpY2UuZ2V0Q2xhc3NUcmVlUXVlcnk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgUmVtb3RlRW5kcG9pbnRDb25maWd1cmF0aW9uLnByb3RvdHlwZS50b1R1cnRsZSA9IGZ1bmN0aW9uIChmcmFnbWVudHNCeUlkLCBwcmVmaXhlcykge1xuICAgICAgICBpZiAoIWZyYWdtZW50c0J5SWQuaGFzKHRoaXMuaWQpKSB7XG4gICAgICAgICAgICBwcmVmaXhlc1snZmlicmEnXSA9IEZJQlJBLm5zO1xuICAgICAgICAgICAgcHJlZml4ZXNbJ3ZvaWQnXSA9IFZPSUQubnM7XG4gICAgICAgICAgICBwcmVmaXhlc1sncmRmJ10gPSBSREYubnM7XG4gICAgICAgICAgICB2YXIgZl8xID0gXCI8XCIgKyB0aGlzLmlkICsgXCI+IGEgXCI7XG4gICAgICAgICAgICB0aGlzLnR5cGVzLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHsgcmV0dXJuIGZfMSA9IGZfMSArICh0eXBlLnRvQ2Fub25pY2FsKCkgKyBcIiAsXCIpOyB9KTtcbiAgICAgICAgICAgIGZfMSA9IGZfMS5zdWJzdHJpbmcoMCwgZl8xLmxlbmd0aCAtIDIpICsgJyA7JztcbiAgICAgICAgICAgIGZyYWdtZW50c0J5SWQuc2V0KHRoaXMuaWQsIGZfMSk7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLnRvVHVydGxlLmNhbGwodGhpcywgZnJhZ21lbnRzQnlJZCwgcHJlZml4ZXMpO1xuICAgICAgICAgICAgZl8xID0gZnJhZ21lbnRzQnlJZC5nZXQodGhpcy5pZCk7XG4gICAgICAgICAgICBmXzEgPSBmXzEgKyAoXCJcXG52b2lkOnNwYXJxbEVuZHBvaW50IDxcIiArIHRoaXMuZW5kcG9pbnQgKyBcIj4gO1xcbmZpYnJhOmF1dG9jb21wbGV0aW9uUXVlcnkgXCIgKyBzLnN0cmluZ1RvU1BBUlFMU3RyaW5nKHRoaXMuYXV0b2NvbXBsZXRpb25RdWVyeSkgKyBcIiA7XFxuZmlicmE6aXRlbVF1ZXJ5IFwiICsgcy5zdHJpbmdUb1NQQVJRTFN0cmluZyh0aGlzLml0ZW1RdWVyeSkgKyBcIiA7XFxuZmlicmE6dHJlZVF1ZXJ5IFwiICsgcy5zdHJpbmdUb1NQQVJRTFN0cmluZyh0aGlzLnRyZWVRdWVyeSkgKyBcIiA7XFxuZmlicmE6cHJvcGVydHlRdWVyeSBcIiArIHMuc3RyaW5nVG9TUEFSUUxTdHJpbmcodGhpcy5wcm9wZXJ0eVF1ZXJ5KSArIFwiIDtcXG5maWJyYTpjbGFzc1F1ZXJ5IFwiICsgcy5zdHJpbmdUb1NQQVJRTFN0cmluZyh0aGlzLmNsYXNzUXVlcnkpICsgXCIgLlwiKTtcbiAgICAgICAgICAgIGZyYWdtZW50c0J5SWQuc2V0KHRoaXMuaWQsIGZfMSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBSZW1vdGVFbmRwb2ludENvbmZpZ3VyYXRpb247XG59KENpdGFibGUpKTtcbmV4cG9ydCB7IFJlbW90ZUVuZHBvaW50Q29uZmlndXJhdGlvbiB9O1xuUmVtb3RlRW5kcG9pbnRDb25maWd1cmF0aW9uLmxpc3RBdXRob3JpdHlFbmRwb2ludENvbmZpZ3VyYXRpb25zUXVlcnkgPSBcIlBSRUZJWCBmaWJyYTogPGh0dHA6Ly9oZGxhYi5zdGFuZm9yZC5lZHUvZmlicmEvb250b2xvZ3kjPlxcblBSRUZJWCBza29zOiA8aHR0cDovL3d3dy53My5vcmcvMjAwNC8wMi9za29zL2NvcmUjPlxcblBSRUZJWCBkY3Rlcm1zOiA8aHR0cDovL3B1cmwub3JnL2RjL3Rlcm1zLz5cXG5QUkVGSVggZm9hZjogPGh0dHA6Ly94bWxucy5jb20vZm9hZi8wLjEvPlxcblBSRUZJWCB2b2lkOiA8aHR0cDovL3JkZnMub3JnL25zL3ZvaWQjPlxcblBSRUZJWCByZGY6IDxodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjPlxcblNFTEVDVCA/aWQgP3R5cGVzID9sYWJlbHMgP2Rlc2NyaXB0aW9ucyA/cmlnaHRzSG9sZGVycyA/cmlnaHRzSG9sZGVyc19sYWJlbHMgP3JpZ2h0c0hvbGRlcnNfZGVzY3JpcHRpb25zID9yaWdodHNIb2xkZXJzX3VybCA/cmlnaHRzSG9sZGVyc19vcmRlciA/dXJsID9lbmRwb2ludCA/YXV0b2NvbXBsZXRpb25RdWVyeSA/aXRlbVF1ZXJ5ID90cmVlUXVlcnkgP3Byb3BlcnR5UXVlcnkgP2NsYXNzUXVlcnkge1xcbiMgU1RBUlRHUkFQSFxcbiAgP2lkIGEgZmlicmE6QXV0aG9yaXR5RW5kcG9pbnRDb25maWd1cmF0aW9uIC5cXG4gID9pZCBhID90eXBlcyAuXFxuICB7ID9pZCBza29zOnByZWZMYWJlbCA/bGFiZWxzIH1cXG4gIFVOSU9OXFxuICB7ID9pZCBkY3Rlcm1zOmRlc2NyaXB0aW9uID9kZXNjcmlwdGlvbnMgfVxcbiAgVU5JT05cXG4gIHtcXG4gICAgP2lkIHZvaWQ6c3BhcnFsRW5kcG9pbnQgP2VuZHBvaW50IC5cXG4gICAgP2lkIGZpYnJhOmF1dG9jb21wbGV0aW9uUXVlcnkgP2F1dG9jb21wbGV0aW9uUXVlcnkgLlxcbiAgICA/aWQgZmlicmE6aXRlbVF1ZXJ5ID9pdGVtUXVlcnkgLlxcbiAgICA/aWQgZmlicmE6dHJlZVF1ZXJ5ID90cmVlUXVlcnkgLlxcbiAgICA/aWQgZmlicmE6cHJvcGVydHlRdWVyeSA/cHJvcGVydHlRdWVyeSAuXFxuICAgID9pZCBmaWJyYTpjbGFzc1F1ZXJ5ID9jbGFzc1F1ZXJ5IC5cXG4gICAgT1BUSU9OQUwgeyA/aWQgZm9hZjpob21lcGFnZSA/dXJsIH1cXG4gIH0gVU5JT04ge1xcbiAgICB7XFxuICAgICAgP2lkIGRjdGVybXM6cmlnaHRzSG9sZGVyID9yaWdodHNIb2xkZXJzXFxuICAgIH0gVU5JT04ge1xcbiAgICAgID9pZCBmaWJyYTpxdWFsaWZpZWRBc3NlcnRpb24gP3FhIC5cXG4gICAgICA/cWEgcmRmOnByZWRpY2F0ZSBkY3Rlcm1zOnJpZ2h0c0hvbGRlciAuXFxuICAgICAgP3FhIHJkZjpvYmplY3QgP3JpZ2h0c0hvbGRlcnMgLlxcbiAgICAgIE9QVElPTkFMIHsgP3FhIGZpYnJhOm9yZGVyID9yaWdodHNIb2xkZXJzX29yZGVyIH1cXG4gICAgfVxcbiAgICB7XFxuICAgICAgP3JpZ2h0c0hvbGRlcnMgc2tvczpwcmVmTGFiZWwgP3JpZ2h0c0hvbGRlcnNfbGFiZWxzXFxuICAgIH0gVU5JT04ge1xcbiAgICAgID9yaWdodHNIb2xkZXJzIGZvYWY6aG9tZXBhZ2UgP3JpZ2h0c0hvbGRlcnNfdXJsXFxuICAgIH0gVU5JT04ge1xcbiAgICAgID9yaWdodHNIb2xkZXJzIGRjdGVybXM6ZGVzY3JpcHRpb24gP3JpZ2h0c0hvbGRlcnNfZGVzY3JpcHRpb25zXFxuICAgIH1cXG4gIH1cXG4jIEVOREdSQVBIXFxufVwiO1xuUmVtb3RlRW5kcG9pbnRDb25maWd1cmF0aW9uLmxpc3RBcmNoaXZlRW5kcG9pbnRDb25maWd1cmF0aW9uc1F1ZXJ5ID0gUmVtb3RlRW5kcG9pbnRDb25maWd1cmF0aW9uLmxpc3RBdXRob3JpdHlFbmRwb2ludENvbmZpZ3VyYXRpb25zUXVlcnkucmVwbGFjZSgvZmlicmE6QXV0aG9yaXR5RW5kcG9pbnRDb25maWd1cmF0aW9uLywgJ2ZpYnJhOkFyY2hpdmVFbmRwb2ludENvbmZpZ3VyYXRpb24nKTtcblJlbW90ZUVuZHBvaW50Q29uZmlndXJhdGlvbi5yZW1vdGVFbmRwb2ludENvbmZpZ3VyYXRpb25RdWVyeSA9IFwiUFJFRklYIGZpYnJhOiA8aHR0cDovL2hkbGFiLnN0YW5mb3JkLmVkdS9maWJyYS9vbnRvbG9neSM+XFxuUFJFRklYIHNrb3M6IDxodHRwOi8vd3d3LnczLm9yZy8yMDA0LzAyL3Nrb3MvY29yZSM+XFxuUFJFRklYIGRjdGVybXM6IDxodHRwOi8vcHVybC5vcmcvZGMvdGVybXMvPlxcblBSRUZJWCBmb2FmOiA8aHR0cDovL3htbG5zLmNvbS9mb2FmLzAuMS8+XFxuUFJFRklYIHZvaWQ6IDxodHRwOi8vcmRmcy5vcmcvbnMvdm9pZCM+XFxuUFJFRklYIHJkZjogPGh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyM+XFxuU0VMRUNUID90eXBlcyA/bGFiZWxzID9kZXNjcmlwdGlvbnMgP3JpZ2h0c0hvbGRlcnMgP3JpZ2h0c0hvbGRlcnNfbGFiZWxzID9yaWdodHNIb2xkZXJzX2Rlc2NyaXB0aW9ucyA/cmlnaHRzSG9sZGVyc191cmwgP3JpZ2h0c0hvbGRlcnNfb3JkZXIgP3VybCA/ZW5kcG9pbnQgP2F1dG9jb21wbGV0aW9uUXVlcnkgP2l0ZW1RdWVyeSA/dHJlZVF1ZXJ5ID9wcm9wZXJ0eVF1ZXJ5ID9jbGFzc1F1ZXJ5IHtcXG4jIFNUQVJUR1JBUEhcXG4gIHsgPElEPiBza29zOnByZWZMYWJlbCA/bGFiZWxzIH1cXG4gIFVOSU9OXFxuICB7IDxJRD4gZGN0ZXJtczpkZXNjcmlwdGlvbiA/ZGVzY3JpcHRpb25zIH1cXG4gIFVOSU9OXFxuICB7XFxuICAgIDxJRD4gYSA/dHlwZXMgLlxcbiAgICA8SUQ+IHZvaWQ6c3BhcnFsRW5kcG9pbnQgP2VuZHBvaW50IC5cXG4gICAgPElEPiBmaWJyYTphdXRvY29tcGxldGlvblF1ZXJ5ID9hdXRvY29tcGxldGlvblF1ZXJ5IC5cXG4gICAgPElEPiBmaWJyYTppdGVtUXVlcnkgP2l0ZW1RdWVyeSAuXFxuICAgIDxJRD4gZmlicmE6dHJlZVF1ZXJ5ID90cmVlUXVlcnkgLlxcbiAgICA8SUQ+IGZpYnJhOnByb3BlcnR5UXVlcnkgP3Byb3BlcnR5UXVlcnkgLlxcbiAgICA8SUQ+IGZpYnJhOmNsYXNzUXVlcnkgP2NsYXNzUXVlcnkgLlxcbiAgICBPUFRJT05BTCB7IDxJRD4gZm9hZjpob21lcGFnZSA/dXJsIH1cXG4gIH0gVU5JT04ge1xcbiAgICB7XFxuICAgICAgPElEPiBkY3Rlcm1zOnJpZ2h0c0hvbGRlciA/cmlnaHRzSG9sZGVyc1xcbiAgICB9IFVOSU9OIHtcXG4gICAgICA8SUQ+IGZpYnJhOnF1YWxpZmllZEFzc2VydGlvbiA/cWEgLlxcbiAgICAgID9xYSByZGY6cHJlZGljYXRlIGRjdGVybXM6cmlnaHRzSG9sZGVyIC5cXG4gICAgICA/cWEgcmRmOm9iamVjdCA/cmlnaHRzSG9sZGVycyAuXFxuICAgICAgT1BUSU9OQUwgeyA/cWEgZmlicmE6b3JkZXIgP3JpZ2h0c0hvbGRlcnNfb3JkZXIgfVxcbiAgICB9XFxuICAgIHtcXG4gICAgICA/cmlnaHRzSG9sZGVycyBza29zOnByZWZMYWJlbCA/cmlnaHRzSG9sZGVyc19sYWJlbHNcXG4gICAgfSBVTklPTiB7XFxuICAgICAgP3JpZ2h0c0hvbGRlcnMgZm9hZjpob21lcGFnZSA/cmlnaHRzSG9sZGVyc191cmxcXG4gICAgfSBVTklPTiB7XFxuICAgICAgP3JpZ2h0c0hvbGRlcnMgZGN0ZXJtczpkZXNjcmlwdGlvbiA/cmlnaHRzSG9sZGVyc19kZXNjcmlwdGlvbnNcXG4gICAgfVxcbiAgfVxcbiMgRU5ER1JBUEhcXG59XCI7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9hcHAvc2VydmljZXMvcHJvamVjdC1zZXJ2aWNlL3JlbW90ZS1lbmRwb2ludC1jb25maWd1cmF0aW9uLnRzIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),
/* 40 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__models_citable__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__data_model__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__models_rdf__ = __webpack_require__(2);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return Schema; });\n\n\nvar __extends = this && this.__extends || function () {\n    var extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (d, b) {\n        d.__proto__ = b;\n    } || function (d, b) {\n        for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() {\n            this.constructor = d;\n        }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n}();\n\n\n\nvar s = fi.seco.sparql.SparqlService;\nvar Schema = function (_super) {\n    __extends(Schema, _super);\n    function Schema() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.classQuery = __WEBPACK_IMPORTED_MODULE_1__data_model__[\"a\" /* DataModel */].classQuery;\n        _this.propertyQuery = __WEBPACK_IMPORTED_MODULE_1__data_model__[\"a\" /* DataModel */].propertyQuery;\n        return _this;\n    }\n    Schema.prototype.toTurtle = function (fragmentsById, prefixes) {\n        if (!fragmentsById.has(this.id)) {\n            prefixes['fibra'] = __WEBPACK_IMPORTED_MODULE_2__models_rdf__[\"m\" /* FIBRA */].ns;\n            prefixes['void'] = __WEBPACK_IMPORTED_MODULE_2__models_rdf__[\"o\" /* VOID */].ns;\n            fragmentsById.set(this.id, \"<\" + this.id + \"> a fibra:Schema ;\");\n            _super.prototype.toTurtle.call(this, fragmentsById, prefixes);\n            var f = fragmentsById.get(this.id);\n            f = f + (\"\\nvoid:sparqlEndpoint <\" + this.endpoint + \"> ;\\nfibra:classQuery \" + s.stringToSPARQLString(this.classQuery) + \" ;\\nfibra:propertyQuery \" + s.stringToSPARQLString(this.propertyQuery) + \" .\");\n            fragmentsById.set(this.id, f);\n        }\n    };\n    return Schema;\n}(__WEBPACK_IMPORTED_MODULE_0__models_citable__[\"b\" /* Citable */]);\n\nSchema.listSchemasQuery = \"PREFIX fibra: <http://hdlab.stanford.edu/fibra/ontology#>\\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\\nPREFIX dcterms: <http://purl.org/dc/terms/>\\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\\nPREFIX void: <http://rdfs.org/ns/void#>\\nSELECT ?id ?labels ?descriptions ?rightsHolders ?rightsHolders_labels ?rightsHolders_descriptions ?rightsHolders_url ?rightsHolders_order ?url ?endpoint ?classQuery ?propertyQuery {\\n# STARTGRAPH\\n  ?id a fibra:Schema .\\n  { ?id skos:prefLabel ?labels }\\n  UNION\\n  { ?id dcterms:description ?descriptions }\\n  UNION\\n  { ?id foaf:homepage ?url }\\n  UNION\\n  {\\n    ?id void:sparqlEndpoint ?endpoint .\\n    ?id fibra:classQuery ?classQuery .\\n    ?id fibra:propertyQuery ?propertyQuery .\\n  } UNION {\\n    {\\n      ?id dcterms:rightsHolder ?rightsHolders\\n    } UNION {\\n      ?id fibra:qualifiedAssertion ?qa .\\n      ?qa rdf:predicate dcterms:rightsHolder .\\n      ?qa rdf:object ?rightsHolders .\\n      OPTIONAL { ?qa fibra:order ?rightsHolders_order }\\n    }\\n    {\\n      ?rightsHolders skos:prefLabel ?rightsHolders_labels\\n    } UNION {\\n      ?rightsHolders foaf:homepage ?rightsHolders_url\\n    } UNION {\\n      ?rightsHolders dcterms:description ?rightsHolders_descriptions\\n    }\\n  }\\n# ENDGRAPH\\n}\";\nSchema.schemaQuery = \"PREFIX fibra: <http://hdlab.stanford.edu/fibra/ontology#>\\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\\nPREFIX dcterms: <http://purl.org/dc/terms/>\\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\\nPREFIX void: <http://rdfs.org/ns/void#>\\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\\nSELECT ?labels ?descriptions ?rightsHolders ?rightsHolders_labels ?rightsHolders_descriptions ?rightsHolders_url ?rightsHolders_order ?url ?endpoint ?classQuery ?propertyQuery {\\n# STARTGRAPH\\n  { <ID> skos:prefLabel ?labels }\\n  UNION\\n  { <ID> dcterms:description ?descriptions }\\n  UNION\\n  {\\n    <ID> void:sparqlEndpoint ?endpoint .\\n    <ID> fibra:classQuery ?classQuery .\\n    <ID> fibra:propertyQuery ?propertyQuery .\\n  } UNION {\\n    {\\n      <ID> dcterms:rightsHolder ?rightsHolders\\n    } UNION {\\n      <ID> fibra:qualifiedAssertion ?qa .\\n      ?qa rdf:predicate dcterms:rightsHolder .\\n      ?qa rdf:object ?rightsHolders .\\n      OPTIONAL { ?qa fibra:order ?rightsHolders_order }\\n    }\\n    {\\n      ?rightsHolders skos:prefLabel ?rightsHolders_labels\\n    } UNION {\\n      ?rightsHolders foaf:homepage ?rightsHolders_url\\n    } UNION {\\n      ?rightsHolders dcterms:description ?rightsHolders_descriptions\\n    }\\n  }\\n# ENDGRAPH\\n}\\n\";//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcHAvc2VydmljZXMvcHJvamVjdC1zZXJ2aWNlL3NjaGVtYS50cz8xMDQ3Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuaW1wb3J0IHsgQ2l0YWJsZSB9IGZyb20gJy4uLy4uL21vZGVscy9jaXRhYmxlJztcbmltcG9ydCB7IERhdGFNb2RlbCB9IGZyb20gJy4vZGF0YS1tb2RlbCc7XG5pbXBvcnQgeyBGSUJSQSwgVk9JRCB9IGZyb20gJy4uLy4uL21vZGVscy9yZGYnO1xudmFyIHMgPSBmaS5zZWNvLnNwYXJxbC5TcGFycWxTZXJ2aWNlO1xudmFyIFNjaGVtYSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFNjaGVtYSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTY2hlbWEoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5jbGFzc1F1ZXJ5ID0gRGF0YU1vZGVsLmNsYXNzUXVlcnk7XG4gICAgICAgIF90aGlzLnByb3BlcnR5UXVlcnkgPSBEYXRhTW9kZWwucHJvcGVydHlRdWVyeTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBTY2hlbWEucHJvdG90eXBlLnRvVHVydGxlID0gZnVuY3Rpb24gKGZyYWdtZW50c0J5SWQsIHByZWZpeGVzKSB7XG4gICAgICAgIGlmICghZnJhZ21lbnRzQnlJZC5oYXModGhpcy5pZCkpIHtcbiAgICAgICAgICAgIHByZWZpeGVzWydmaWJyYSddID0gRklCUkEubnM7XG4gICAgICAgICAgICBwcmVmaXhlc1sndm9pZCddID0gVk9JRC5ucztcbiAgICAgICAgICAgIGZyYWdtZW50c0J5SWQuc2V0KHRoaXMuaWQsIFwiPFwiICsgdGhpcy5pZCArIFwiPiBhIGZpYnJhOlNjaGVtYSA7XCIpO1xuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS50b1R1cnRsZS5jYWxsKHRoaXMsIGZyYWdtZW50c0J5SWQsIHByZWZpeGVzKTtcbiAgICAgICAgICAgIHZhciBmID0gZnJhZ21lbnRzQnlJZC5nZXQodGhpcy5pZCk7XG4gICAgICAgICAgICBmID0gZiArIChcIlxcbnZvaWQ6c3BhcnFsRW5kcG9pbnQgPFwiICsgdGhpcy5lbmRwb2ludCArIFwiPiA7XFxuZmlicmE6Y2xhc3NRdWVyeSBcIiArIHMuc3RyaW5nVG9TUEFSUUxTdHJpbmcodGhpcy5jbGFzc1F1ZXJ5KSArIFwiIDtcXG5maWJyYTpwcm9wZXJ0eVF1ZXJ5IFwiICsgcy5zdHJpbmdUb1NQQVJRTFN0cmluZyh0aGlzLnByb3BlcnR5UXVlcnkpICsgXCIgLlwiKTtcbiAgICAgICAgICAgIGZyYWdtZW50c0J5SWQuc2V0KHRoaXMuaWQsIGYpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gU2NoZW1hO1xufShDaXRhYmxlKSk7XG5leHBvcnQgeyBTY2hlbWEgfTtcblNjaGVtYS5saXN0U2NoZW1hc1F1ZXJ5ID0gXCJQUkVGSVggZmlicmE6IDxodHRwOi8vaGRsYWIuc3RhbmZvcmQuZWR1L2ZpYnJhL29udG9sb2d5Iz5cXG5QUkVGSVggc2tvczogPGh0dHA6Ly93d3cudzMub3JnLzIwMDQvMDIvc2tvcy9jb3JlIz5cXG5QUkVGSVggZGN0ZXJtczogPGh0dHA6Ly9wdXJsLm9yZy9kYy90ZXJtcy8+XFxuUFJFRklYIGZvYWY6IDxodHRwOi8veG1sbnMuY29tL2ZvYWYvMC4xLz5cXG5QUkVGSVggcmRmOiA8aHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIz5cXG5QUkVGSVggdm9pZDogPGh0dHA6Ly9yZGZzLm9yZy9ucy92b2lkIz5cXG5TRUxFQ1QgP2lkID9sYWJlbHMgP2Rlc2NyaXB0aW9ucyA/cmlnaHRzSG9sZGVycyA/cmlnaHRzSG9sZGVyc19sYWJlbHMgP3JpZ2h0c0hvbGRlcnNfZGVzY3JpcHRpb25zID9yaWdodHNIb2xkZXJzX3VybCA/cmlnaHRzSG9sZGVyc19vcmRlciA/dXJsID9lbmRwb2ludCA/Y2xhc3NRdWVyeSA/cHJvcGVydHlRdWVyeSB7XFxuIyBTVEFSVEdSQVBIXFxuICA/aWQgYSBmaWJyYTpTY2hlbWEgLlxcbiAgeyA/aWQgc2tvczpwcmVmTGFiZWwgP2xhYmVscyB9XFxuICBVTklPTlxcbiAgeyA/aWQgZGN0ZXJtczpkZXNjcmlwdGlvbiA/ZGVzY3JpcHRpb25zIH1cXG4gIFVOSU9OXFxuICB7ID9pZCBmb2FmOmhvbWVwYWdlID91cmwgfVxcbiAgVU5JT05cXG4gIHtcXG4gICAgP2lkIHZvaWQ6c3BhcnFsRW5kcG9pbnQgP2VuZHBvaW50IC5cXG4gICAgP2lkIGZpYnJhOmNsYXNzUXVlcnkgP2NsYXNzUXVlcnkgLlxcbiAgICA/aWQgZmlicmE6cHJvcGVydHlRdWVyeSA/cHJvcGVydHlRdWVyeSAuXFxuICB9IFVOSU9OIHtcXG4gICAge1xcbiAgICAgID9pZCBkY3Rlcm1zOnJpZ2h0c0hvbGRlciA/cmlnaHRzSG9sZGVyc1xcbiAgICB9IFVOSU9OIHtcXG4gICAgICA/aWQgZmlicmE6cXVhbGlmaWVkQXNzZXJ0aW9uID9xYSAuXFxuICAgICAgP3FhIHJkZjpwcmVkaWNhdGUgZGN0ZXJtczpyaWdodHNIb2xkZXIgLlxcbiAgICAgID9xYSByZGY6b2JqZWN0ID9yaWdodHNIb2xkZXJzIC5cXG4gICAgICBPUFRJT05BTCB7ID9xYSBmaWJyYTpvcmRlciA/cmlnaHRzSG9sZGVyc19vcmRlciB9XFxuICAgIH1cXG4gICAge1xcbiAgICAgID9yaWdodHNIb2xkZXJzIHNrb3M6cHJlZkxhYmVsID9yaWdodHNIb2xkZXJzX2xhYmVsc1xcbiAgICB9IFVOSU9OIHtcXG4gICAgICA/cmlnaHRzSG9sZGVycyBmb2FmOmhvbWVwYWdlID9yaWdodHNIb2xkZXJzX3VybFxcbiAgICB9IFVOSU9OIHtcXG4gICAgICA/cmlnaHRzSG9sZGVycyBkY3Rlcm1zOmRlc2NyaXB0aW9uID9yaWdodHNIb2xkZXJzX2Rlc2NyaXB0aW9uc1xcbiAgICB9XFxuICB9XFxuIyBFTkRHUkFQSFxcbn1cIjtcblNjaGVtYS5zY2hlbWFRdWVyeSA9IFwiUFJFRklYIGZpYnJhOiA8aHR0cDovL2hkbGFiLnN0YW5mb3JkLmVkdS9maWJyYS9vbnRvbG9neSM+XFxuUFJFRklYIHNrb3M6IDxodHRwOi8vd3d3LnczLm9yZy8yMDA0LzAyL3Nrb3MvY29yZSM+XFxuUFJFRklYIGRjdGVybXM6IDxodHRwOi8vcHVybC5vcmcvZGMvdGVybXMvPlxcblBSRUZJWCBmb2FmOiA8aHR0cDovL3htbG5zLmNvbS9mb2FmLzAuMS8+XFxuUFJFRklYIHZvaWQ6IDxodHRwOi8vcmRmcy5vcmcvbnMvdm9pZCM+XFxuUFJFRklYIHJkZjogPGh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyM+XFxuU0VMRUNUID9sYWJlbHMgP2Rlc2NyaXB0aW9ucyA/cmlnaHRzSG9sZGVycyA/cmlnaHRzSG9sZGVyc19sYWJlbHMgP3JpZ2h0c0hvbGRlcnNfZGVzY3JpcHRpb25zID9yaWdodHNIb2xkZXJzX3VybCA/cmlnaHRzSG9sZGVyc19vcmRlciA/dXJsID9lbmRwb2ludCA/Y2xhc3NRdWVyeSA/cHJvcGVydHlRdWVyeSB7XFxuIyBTVEFSVEdSQVBIXFxuICB7IDxJRD4gc2tvczpwcmVmTGFiZWwgP2xhYmVscyB9XFxuICBVTklPTlxcbiAgeyA8SUQ+IGRjdGVybXM6ZGVzY3JpcHRpb24gP2Rlc2NyaXB0aW9ucyB9XFxuICBVTklPTlxcbiAge1xcbiAgICA8SUQ+IHZvaWQ6c3BhcnFsRW5kcG9pbnQgP2VuZHBvaW50IC5cXG4gICAgPElEPiBmaWJyYTpjbGFzc1F1ZXJ5ID9jbGFzc1F1ZXJ5IC5cXG4gICAgPElEPiBmaWJyYTpwcm9wZXJ0eVF1ZXJ5ID9wcm9wZXJ0eVF1ZXJ5IC5cXG4gIH0gVU5JT04ge1xcbiAgICB7XFxuICAgICAgPElEPiBkY3Rlcm1zOnJpZ2h0c0hvbGRlciA/cmlnaHRzSG9sZGVyc1xcbiAgICB9IFVOSU9OIHtcXG4gICAgICA8SUQ+IGZpYnJhOnF1YWxpZmllZEFzc2VydGlvbiA/cWEgLlxcbiAgICAgID9xYSByZGY6cHJlZGljYXRlIGRjdGVybXM6cmlnaHRzSG9sZGVyIC5cXG4gICAgICA/cWEgcmRmOm9iamVjdCA/cmlnaHRzSG9sZGVycyAuXFxuICAgICAgT1BUSU9OQUwgeyA/cWEgZmlicmE6b3JkZXIgP3JpZ2h0c0hvbGRlcnNfb3JkZXIgfVxcbiAgICB9XFxuICAgIHtcXG4gICAgICA/cmlnaHRzSG9sZGVycyBza29zOnByZWZMYWJlbCA/cmlnaHRzSG9sZGVyc19sYWJlbHNcXG4gICAgfSBVTklPTiB7XFxuICAgICAgP3JpZ2h0c0hvbGRlcnMgZm9hZjpob21lcGFnZSA/cmlnaHRzSG9sZGVyc191cmxcXG4gICAgfSBVTklPTiB7XFxuICAgICAgP3JpZ2h0c0hvbGRlcnMgZGN0ZXJtczpkZXNjcmlwdGlvbiA/cmlnaHRzSG9sZGVyc19kZXNjcmlwdGlvbnNcXG4gICAgfVxcbiAgfVxcbiMgRU5ER1JBUEhcXG59XFxuXCI7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9hcHAvc2VydmljZXMvcHJvamVjdC1zZXJ2aWNlL3NjaGVtYS50cyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9");

/***/ })
/******/ ]);