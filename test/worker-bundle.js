!function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=136)}([function(module,exports,__webpack_require__){(function(process){var slowNextTick=function(){return void 0!==process&&process.nextTick?process.nextTick:"undefined"!=typeof window&&window.setImmediate?window.setImmediate:function(e){setTimeout(e,0)}}(),spin=0,yieldFrequency=100,nextTick=function(e){spin++,spin<yieldFrequency?e():(spin=0,slowNextTick(e))},hashTerm=function(e){try{if(null==e)return"";if("uri"===e.token)return"u"+e.value;if("blank"===e.token)return"b"+e.value;if("literal"===e.token){var t="l"+e.value;return t+=e.type||"",t+=e.lang||""}}catch(t){if("object"==typeof e){var r="";for(p in e)r=r+p+e[p];return r}return e}},lexicalFormBaseUri=function(e,t){var r=null;if(t=t||{},null==e.value){var n=e.prefix,i=e.suffix,o=t.namespaces[n];r=null!=o?o+i:n+":"+i}else r=e.value;return null===r?null:(-1==r.indexOf(":")&&(r=(t.base||"")+r),r)};parseISO8601=function(e){return Date.parse(e)},Date.prototype.toISOString||function(){function e(e){return e<10?"0"+e:e}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"."+(this.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}}(),iso8601=function(e){return e.toISOString()},compareDateComponents=function(e,t){var r=parseISO8601(e),n=parseISO8601(t);return r==n?0:r<n?-1:1},lexicalFormLiteral=function(e,t){var r=e.value,n=e.lang,i=e.type,o=null;if(null!=r&&null!=i&&"string"!=typeof i){var a=i.value;if(null==a){var s=i.prefix,u=i.suffix,l=t.namespaces[s];e.type=l+u,a=l+u}o=-1!=a.indexOf("hexBinary")?'"'+e.value.toLowerCase()+'"^^<'+a+">":'"'+e.value+'"^^<'+a+">"}else o=null==n&&null==i?'"'+r+'"':null==i?'"'+r+'"@'+n:-1!=i.indexOf("hexBinary")?'"'+e.value.toLowerCase()+'"^^<'+i+">":'"'+e.value+'"^^<'+i+">";return o},normalizeUnicodeLiterals=function(string){for(var escapedUnicode=string.match(/\\u[0-9abcdefABCDEF]{4,4}/g)||[],dups={},i=0;i<escapedUnicode.length;i++)null==dups[escapedUnicode[i]]&&(dups[escapedUnicode[i]]=!0,string=string.replace(new RegExp("\\"+escapedUnicode[i],"g"),eval("'"+escapedUnicode[i]+"'")));return string},registerIndexedDB=function(e){if("undefined"==typeof window&&void 0!==process&&!1===process.browser){var t=_dereq_("sqlite3"),r=_dereq_("indexeddb-js"),n=new t.Database(":memory:"),i=r.makeScope("sqlite3",n);e.indexedDB=i.indexedDB,e.IDBKeyRange=i.IDBKeyRange}else{var o;o="undefined"==typeof window?self:window,o.indexedDB=o.indexedDB||o.mozIndexedDB||o.webkitIndexedDB||o.msIndexedDB,o.IDBKeyRange=o.IDBKeyRange||o.webkitIDBKeyRange||o.msIDBKeyRange,o.indexedDB?(e.indexedDB=o.indexedDB,e.IDBKeyRange=o.IDBKeyRange):console.log("The browser does not support IndexDB.")}},guid=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},hashTerm=function(e){try{if(null==e)return"";if("uri"===e.token)return"u"+e.value;if("blank"===e.token)return"b"+e.value;if("literal"===e.token){var t="l"+e.value;return t+=e.type||"",t+=e.lang||""}}catch(t){if("object"==typeof e){var r="";for(p in e)r=r+p+e[p];return r}return e}};var reject=function(e,t){for(var r=[],n=0;n<e.length;n++)t(e[n])&&r.push(e[n]);return r},include=function(e,t){for(var r=0;r<e.length;r++)if(e[r]===t)return!0;return!1},each=function(e,t){if(e.forEach)e.forEach(t);else for(var r=0;r<e.length;r++)t(e[r])},map=function(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r[n]=t(e[n]);return r},keys=function(e){var t=[];for(var r in e)t.push(r);return t},values=function(e){var t=[];for(var r in e)t.push(e[r]);return t},size=function(e){if(e.length)return e.length;var t=0;for(var r in e)t++;return t};clone=function(e){return JSON.parse(JSON.stringify(e))};var isObject=function(e){var t=typeof e;return"function"==t||e&&"object"==t||!1},create=function(){function e(){}return function(t){if(isObject(t)){e.prototype=t;var r=new e;e.prototype=null}return r||void 0}}(),whilst=function(e,t,r){e()?t(function(n){if(n)return r(n);whilst(e,t,r)}):r()},eachSeries=function(e,t,r){if(r=r||function(){},!e.length)return r();var n=0,i=function(){t(e[n],function(t){t?(r(t),r=function(){}):(n+=1,n>=e.length?r():nextTick(i))})};i()},eachParallel=function(e,t,r){if(r=r||function(){},!e.length)return r();for(var n=!1,i=0,o=function(t){if(t)throw n=!0,new Error(t);n||++i===e.length&&r()},a=0;a<e.length;a++)!function(e,t,r,n){nextTick(function(){try{n(e[t],function(){r()})}catch(e){r(e)}})}(e,a,o,t)},reduce=function(e,t,r,n){eachSeries(e,function(e,n){r(t,e,function(e,r){t=r,n(e)})},function(e){n(e,t)})},seq=function(){var e=arguments;return function(){var t=this,r=Array.prototype.slice.call(arguments),n=r.pop();reduce(e,r,function(e,r,n){r.apply(t,e.concat([function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);n(e,t)}]))},function(e,r){n.apply(t,[e].concat(r))})}},isWorker=function(){return(void 0===process||!0===process.browser)&&"undefined"==typeof window};module.exports={isWorker:isWorker,nextTick:nextTick,hasTerm:hashTerm,lexicalFormBaseUri:lexicalFormBaseUri,parseISO8601:parseISO8601,compareDateComponents:compareDateComponents,iso8601:iso8601,normalizeUnicodeLiterals:normalizeUnicodeLiterals,lexicalFormLiteral:lexicalFormLiteral,registerIndexedDB:registerIndexedDB,guid:guid,hashTerm:hashTerm,keys:keys,values:values,size:size,map:map,each:each,forEach:each,include:include,reject:reject,remove:reject,clone:clone,create:create,whilst:whilst,eachSeries:eachSeries,eachParallel:eachParallel,seq:seq,yieldFrequency:function(e){yieldFrequency=e}}}).call(exports,__webpack_require__(12))},function(e,t,r){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){var r=e.exports={version:"2.5.1"};"number"==typeof __e&&(__e=r)},function(e,t,r){"use strict";t.__esModule=!0;var n=r(98),i=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,i.default)(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}()},function(e,t){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(e,t,r){var n=r(58)("wks"),i=r(41),o=r(4).Symbol,a="function"==typeof o;(e.exports=function(e){return n[e]||(n[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=n},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ONodeSet=t.NodeSet=t.EONodeMap=t.ENodeMap=t.GEOVOCAB=t.MADS=t.GETTY=t.CIDOC=t.XMLSchema=t.RDF=t.OWL=t.FOAF=t.DCTerms=t.VOID=t.SKOS=t.SD=t.FIBRA=t.DataFactory=t.Graph=t.Triple=t.Quad=t.Literal=t.BlankNode=t.NamedNode=t.Variable=t.UNDEF=t.DefaultGraph=t.NodeFromNode=t.CNode=void 0;var i=r(8),o=n(i),a=r(13),s=n(a),u=r(14),l=n(u),c=r(1),f=n(c),p=r(3),d=n(p),h=r(23),v=r(17),y=t.CNode=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;(0,f.default)(this,e),this.value=t,this.termType=r,this.language=n,this.datatype=i}return(0,d.default)(e,[{key:"toCanonical",value:function(){switch(this.termType){case"NamedNode":return"<"+this.value+">";case"BlankNode":return"_:"+this.value;case"Literal":return h.SparqlService.stringToSPARQLString(this.value)+(this.language?"@"+this.language:!this.datatype||P.langString.equals(this.datatype)||N.string.equals(this.datatype)?"":"^^"+this.datatype.toCanonical());case"Variable":return"?"+this.value;case"DefaultGraph":return"";case"UNDEF":return"UNDEF";default:throw"Unknown term type "+this}}},{key:"equals",value:function(e){return this.termType===e.termType&&this.value===e.value&&("Literal"!==this.termType||this.language===e.language&&this.datatype===e.datatype)}}]),e}(),g=(t.NodeFromNode=function(e){function t(e){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e.value,e.termType,e.language,e.datatype))}return(0,l.default)(t,e),t}(y),t.DefaultGraph=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"","DefaultGraph"))}return(0,l.default)(t,e),(0,d.default)(t,[{key:"toCanonical",value:function(){return""}},{key:"equals",value:function(e){return"DefaultGraph"===e.termType}}]),t}(y));g.instance=new g;var b=t.UNDEF=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"","UNDEF"))}return(0,l.default)(t,e),(0,d.default)(t,[{key:"toCanonical",value:function(){return""}},{key:"equals",value:function(e){return"UNDEF"===e.termType}}]),t}(y);b.instance=new b;var m=t.Variable=function(e){function t(e){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,"Variable"))}return(0,l.default)(t,e),(0,d.default)(t,[{key:"toCanonical",value:function(){return"?"+this.value}}]),t}(y),_=t.NamedNode=function(e){function t(e){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,"NamedNode"))}return(0,l.default)(t,e),(0,d.default)(t,[{key:"toCanonical",value:function(){return"<"+this.value+">"}}]),t}(y),E=t.BlankNode=function(e){function t(e){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,"BlankNode"))}return(0,l.default)(t,e),(0,d.default)(t,[{key:"toCanonical",value:function(){return"?"+this.value}}]),t}(y),k=t.Literal=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments[2];return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,"Literal",r,n||(r?P.langString:N.string)))}return(0,l.default)(t,e),t}(y),w=t.Quad=function(){function e(t,r,n,i){(0,f.default)(this,e),this.subject=t,this.predicate=r,this.object=n,this.graph=i}return(0,d.default)(e,[{key:"toCanonical",value:function(){return this.subject.toCanonical()+" "+this.predicate.toCanonical()+" "+this.object.toCanonical()+("DefaultGraph"===this.graph.termType?"":" "+this.graph.toCanonical())}},{key:"equals",value:function(e){return this.subject.equals(e.subject)&&this.predicate.equals(e.predicate)&&this.object.equals(e.object)&&this.graph.equals(e.graph)}}]),e}(),x=t.Triple=function(){function e(t,r,n){(0,f.default)(this,e),this.subject=t,this.predicate=r,this.object=n,this.graph=g.instance}return(0,d.default)(e,[{key:"toCanonical",value:function(){return this.subject.toCanonical()+" "+this.predicate.toCanonical()+" "+this.object.toCanonical()}},{key:"equals",value:function(e){return this.subject.equals(e.subject)&&this.predicate.equals(e.predicate)&&this.object.equals(e.object)&&this.graph.equals(e.graph)}}]),e}(),S=(t.Graph=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];(0,f.default)(this,e),this.graph=t,this.triples=r},t.DataFactory=function(){function e(){(0,f.default)(this,e),this.nextBlankNodeId=0}return(0,d.default)(e,[{key:"nodeFromBinding",value:function(e){var t=new y(e.value,"literal"===e.type?"Literal":"uri"===e.type?"NamedNode":"BlankNode");return"literal"===e.type&&(t.language=e["xml:lang"]?e["xml:lang"]:"",t.datatype=e.datatype?new _(e.datatype):""!==t.language?P.langString:N.string),t}},{key:"nodeFromNode",value:function(e){return"Literal"===e.termType?new k(e.value,e.language,e.datatype):new y(e.value,e.termType)}},{key:"nodeFromCanonicalRepresentation",value:function(e){if(0===e.indexOf("<"))return new _(e.substring(1,e.length-1));if(0===e.indexOf("_:"))return new E(e.substring(2));var t=e.substring(1,e.lastIndexOf('"'));return e.lastIndexOf("@")===e.lastIndexOf('"')+1?new k(t,e.substring(e.lastIndexOf("@"))):e.lastIndexOf("^^<")===e.lastIndexOf('"')+1?new k(t,"",new _(e.substring(e.lastIndexOf("^^<"),e.length-1))):new k(t)}},{key:"namedNode",value:function(e){return new _(e)}},{key:"blankNode",value:function(e){return new E(e||"b"+ ++this.nextBlankNodeId)}},{key:"literal",value:function(e,t){return"string"==typeof t?new k(e,t):new k(e,void 0,t)}},{key:"variable",value:function(e){return new m(e)}},{key:"defaultGraph",value:function(){return g.instance}},{key:"triple",value:function(e,t,r){return new x(e,t,r)}},{key:"quad",value:function(e,t,r,n){return new w(e,t,r,n||g.instance)}}],[{key:"nodeFromBinding",value:function(t){return e.instance.nodeFromBinding(t)}},{key:"nodeFromNode",value:function(t){return e.instance.nodeFromNode(t)}},{key:"nodeFromCanonicalRepresentation",value:function(t){return e.instance.nodeFromCanonicalRepresentation(t)}},{key:"namedNode",value:function(t){return e.instance.namedNode(t)}},{key:"blankNode",value:function(t){return e.instance.blankNode(t)}},{key:"literal",value:function(t,r){return e.instance.literal(t,r)}},{key:"variable",value:function(t){return e.instance.variable(t)}},{key:"defaultGraph",value:function(){return e.instance.defaultGraph()}},{key:"triple",value:function(t,r,n){return e.instance.triple(t,r,n)}},{key:"quad",value:function(t,r,n,i){return e.instance.quad(t,r,n,i)}}]),e}());S.instance=new S;var T=t.FIBRA=function e(){(0,f.default)(this,e)};T.ns="http://hdlab.stanford.edu/fibra/ontology#",T.Project=new _(T.ns+"Project"),T.graph=new _(T.ns+"graph"),T.qualifiedAssertion=new _(T.ns+"qualifiedAssertion"),T.order=new _(T.ns+"order"),T.schemaNS=new _(T.ns+"schemaNS"),T.instanceNS=new _(T.ns+"instanceNS"),T.updateEndpoint=new _(T.ns+"updateEndpoint"),T.configuration=new _(T.ns+"configuration"),T.configurationReference=new _(T.ns+"configurationReference"),T.schema=new _(T.ns+"schema"),T.schemaReference=new _(T.ns+"schemaReference"),T.autocompletionQuery=new _(T.ns+"autocompletionQuery"),T.propertyQuery=new _(T.ns+"propertyQuery"),T.classQuery=new _(T.ns+"classQuery"),T.itemQuery=new _(T.ns+"itemQuery"),T.deleteItemQuery=new _(T.ns+"deleteItemQuery"),T.RemoteEndpointConfiguration=new _(T.ns+"RemoteEndpointConfiguration"),T.PrimaryEndpointConfiguration=new _(T.ns+"PrimaryEndpointConfiguration"),T.AuthorityEndpointConfiguration=new _(T.ns+"AuthorityEndpointConfiguration"),T.ArchiveEndpointConfiguration=new _(T.ns+"ArchiveEndpointConfiguration"),T.Schema=new _(T.ns+"Schema");var A=t.SD=function e(){(0,f.default)(this,e)};A.ns="http://www.w3.org/ns/sparql-service-description#",A._name=new _(A.ns+"name");var I=t.SKOS=function e(){(0,f.default)(this,e)};I.ns="http://www.w3.org/2004/02/skos/core#",I.prefLabel=new _(I.ns+"prefLabel"),I.altLabel=new _(I.ns+"altLabel"),I.related=new _(I.ns+"related");var C=t.VOID=function e(){(0,f.default)(this,e)};C.ns="http://rdfs.org/ns/void#",C.sparqlEndpoint=new _(C.ns+"sparqlEndpoint");var R=t.DCTerms=function e(){(0,f.default)(this,e)};R.ns="http://purl.org/dc/terms/",R.rightsHolder=new _(R.ns+"rightsHolder"),R.description=new _(R.ns+"description");var F=t.FOAF=function e(){(0,f.default)(this,e)};F.ns="http://xmlns.com/foaf/0.1/",F.homepage=new _(F.ns+"homepage");var j=t.OWL=function e(){(0,f.default)(this,e)};j.ns="http://www.w3.org/2002/07/owl#",j.sameAs=new _(j.ns+"sameAs"),j.Thing=new _(j.ns+"Thing"),j.Class=new _(j.ns+"Class");var P=t.RDF=function e(){(0,f.default)(this,e)};P.ns="http://www.w3.org/1999/02/22-rdf-syntax-ns#",P.type=new _(P.ns+"type"),P.langString=new _(P.ns+"langString"),P.Triple=new _(P.ns+"Triple"),P.subject=new _(P.ns+"subject"),P.predicate=new _(P.ns+"predicate"),P.object=new _(P.ns+"object"),P.value=new _(P.ns+"value");var N=t.XMLSchema=function e(){(0,f.default)(this,e)};N.ns="http://www.w3.org/2001/XMLSchema#",N.string=new _(N.ns+"string"),N.dateTime=new _(N.ns+"dateTime");var L=t.CIDOC=function e(){(0,f.default)(this,e)};L.ns="http://www.cidoc-crm.org/cidoc-crm/",L.Person=new _(L.ns+"E21_Person"),L.Place=new _(L.ns+"E53_Place"),L.Group=new _(L.ns+"E74_Group");var O=t.GETTY=function e(){(0,f.default)(this,e)};O.ns="http://vocab.getty.edu/ontology#",O.AdminPlaceConcept=new _(O.ns+"AdminPlaceConcept"),O.PhysicalPlaceConcept=new _(O.ns+"PhysicalPlaceConcept"),O.PhysAdminPlaceConcept=new _(O.ns+"PhysAdminPlaceConcept"),O.PersonConcept=new _(O.ns+"PersonConcept"),O.GroupConcept=new _(O.ns+"GroupConcept");var Q=t.MADS=function e(){(0,f.default)(this,e)};Q.ns="http://www.loc.gov/mads/rdf/v1#",Q.CorporateName=new _(Q.ns+"CorporateName"),Q.PersonalName=new _(Q.ns+"PersonalName"),Q.NameTitle=new _(Q.ns+"NameTitle"),Q.Geographic=new _(Q.ns+"Geographic");var D=t.GEOVOCAB=function e(){(0,f.default)(this,e)};D.ns="http://geovocab.org/spatial#",D.Feature=new _(D.ns+"Feature");var M=t.ENodeMap=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return{}},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new v.EMap;(0,f.default)(this,e),this.create=t,this.map=r}return(0,d.default)(e,[{key:"goc",value:function(e,t){return this.has(e)||this.set(e,t?t(e):this.create(e)),this.get(e)}},{key:"get",value:function(e){return this.map.get(e.toCanonical())}},{key:"remove",value:function(e){return this.map.remove(e.toCanonical())}},{key:"each",value:function(e){var t=this;this.map.each(function(r,n,i){return e(r,S.instance.nodeFromCanonicalRepresentation(n),t)})}},{key:"has",value:function(e){return this.map.has(e.toCanonical())}},{key:"set",value:function(e,t){return this.map.set(e.toCanonical(),t),this}},{key:"values",value:function(){return this.map.values()}},{key:"keys",value:function(){return this.map.keys().map(function(e){return S.instance.nodeFromCanonicalRepresentation(e)})}},{key:"entries",value:function(){return this.map.entries().map(function(e){return{key:S.instance.nodeFromCanonicalRepresentation(e.key),value:e.value}})}},{key:"clear",value:function(){return this.map.clear(),this}},{key:"size",get:function(){return this.map.size()}}]),e}(),B=(t.EONodeMap=function(e){function t(e){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,new v.EOMap))}return(0,l.default)(t,e),t}(M),t.NodeSet=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new v.EMap;(0,f.default)(this,e),this.m=new M(void 0,t)}return(0,d.default)(e,[{key:"add",value:function(e){return this.m.set(e,e),this}},{key:"adda",value:function(e){var t=this;return e.forEach(function(e){return t.add(e)}),this}},{key:"adds",value:function(e){var t=this;return e.each(function(e){return t.add(e)}),this}},{key:"has",value:function(e){return this.m.has(e)}},{key:"get",value:function(e){return this.m.get(e)}},{key:"clear",value:function(){return this.m.clear(),this}},{key:"remove",value:function(e){return this.m.remove(e)}},{key:"values",value:function(){return this.m.values()}},{key:"each",value:function(e){var t=this;this.m.each(function(r,n,i){return e(r,r,t)})}},{key:"size",get:function(){return this.m.size}}]),e}());t.ONodeSet=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,new v.EOMap))}return(0,l.default)(t,e),t}(B)},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){e.exports={default:r(150),__esModule:!0}},function(e,t){e.exports=angular},function(e,t,r){var n=r(4),i=r(2),o=r(32),a=r(19),s=function(e,t,r){var u,l,c,f=e&s.F,p=e&s.G,d=e&s.S,h=e&s.P,v=e&s.B,y=e&s.W,g=p?i:i[t]||(i[t]={}),b=g.prototype,m=p?n:d?n[t]:(n[t]||{}).prototype;p&&(r=t);for(u in r)(l=!f&&m&&void 0!==m[u])&&u in g||(c=l?m[u]:r[u],g[u]=p&&"function"!=typeof m[u]?r[u]:v&&l?o(c,n):y&&m[u]==c?function(e){var t=function(t,r,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,n)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(c):h&&"function"==typeof c?o(Function.call,c):c,h&&((g.virtual||(g.virtual={}))[u]=c,e&s.R&&b&&!b[u]&&a(b,u,c)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,t,r){var n=r(20);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function i(e){if(c===setTimeout)return setTimeout(e,0);if((c===r||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function o(e){if(f===clearTimeout)return clearTimeout(e);if((f===n||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function a(){v&&d&&(v=!1,d.length?h=d.concat(h):y=-1,h.length&&s())}function s(){if(!v){var e=i(a);v=!0;for(var t=h.length;t;){for(d=h,h=[];++y<t;)d&&d[y].run();y=-1,t=h.length}d=null,v=!1,o(e)}}function u(e,t){this.fun=e,this.array=t}function l(){}var c,f,p=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:r}catch(e){c=r}try{f="function"==typeof clearTimeout?clearTimeout:n}catch(e){f=n}}();var d,h=[],v=!1,y=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];h.push(new u(e,t)),1!==h.length||v||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=l,p.addListener=l,p.once=l,p.off=l,p.removeListener=l,p.removeAllListeners=l,p.emit=l,p.prependListener=l,p.prependOnceListener=l,p.listeners=function(e){return[]},p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(e,t,r){"use strict";t.__esModule=!0;var n=r(64),i=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,i.default)(t))&&"function"!=typeof t?e:t}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=r(167),o=n(i),a=r(171),s=n(a),u=r(64),l=n(u);t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,l.default)(t)));e.prototype=(0,s.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(o.default?(0,o.default)(e,t):e.__proto__=t)}},function(e,t,r){var n=r(11),i=r(85),o=r(54),a=Object.defineProperty;t.f=r(16)?Object.defineProperty:function(e,t,r){if(n(e),t=o(t,!0),n(r),i)try{return a(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},function(e,t,r){e.exports=!r(27)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r){return void 0===e[t]&&(e[t]=r?r(t):{}),e[t]}function o(e,t,r,n){return void 0===e[t]&&(e[t]=n?n(t):{},r.push(e[t])),e[t]}function a(e,t,r,n){void 0===t[r]&&(t[r]=n,e.push(n))}function s(e,t,r){for(var n in r)a(e,t,n,r[n])}Object.defineProperty(t,"__esModule",{value:!0}),t.OStringSet=t.EOMap=t.OMap=t.StringSet=t.IdentitySet=t.EMap=t.FMap=void 0;var u=r(36),l=n(u),c=r(34),f=n(c),p=r(8),d=n(p),h=r(13),v=n(h),y=r(14),g=n(y),b=r(1),m=n(b),_=r(3),E=n(_);t.goc=i,t.ogoc=o,t.cpush=a,t.cpushs=s;var k=t.FMap=function(){function e(){(0,m.default)(this,e),this.s={}}return(0,E.default)(e,[{key:"has",value:function(e){return void 0!==this.s[e]}},{key:"set",value:function(e,t){return this.s[e]=t,this}},{key:"get",value:function(e){return this.s[e]}},{key:"remove",value:function(e){var t=this.has(e);return delete this.s[e],t}},{key:"sets",value:function(e){for(var t in e)this.set(t,e[t]);return this}},{key:"setm",value:function(e){for(var t in e)this.set(t,e[t]);return this}},{key:"clear",value:function(){return this.s={},this}},{key:"keys",value:function(){var e=[];for(var t in this.s)e.push(t);return e}},{key:"values",value:function(){var e=[];for(var t in this.s)e.push(this.s[t]);return e}},{key:"entries",value:function(){var e=[];for(var t in this.s)e.push({key:t,value:this.s[t]});return e}},{key:"each",value:function(e){for(var t in this.s)e(this.s[t],t,this)}},{key:"size",value:function(){var e=0;for(var t in this.s)e++;return e}},{key:"empty",value:function(){return 0===this.size()}}]),e}(),w=(t.EMap=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return{}};(0,m.default)(this,t);var r=(0,v.default)(this,(t.__proto__||(0,d.default)(t)).call(this));return r.create=e,r}return(0,g.default)(t,e),(0,E.default)(t,[{key:"goc",value:function(e,t){return this.has(e)||this.set(e,t?t(e):this.create(e)),this.get(e)}}]),t}(k),t.IdentitySet=function(){function e(){(0,m.default)(this,e),this.a=[]}return(0,E.default)(e,[{key:"clear",value:function(){return this.a=[],this}},{key:"has",value:function(e){return-1!==this.a.indexOf(e)}},{key:"add",value:function(e){return this.has(e)?this:(this.a.push(e),this)}},{key:"adda",value:function(e){var t=this;return e.forEach(function(e){return t.add(e)}),this}},{key:"adds",value:function(e){var t=this;return e.each(function(e){return t.add(e)}),this}},{key:"remove",value:function(e){var t=this.a.indexOf(e);return-1!==t&&(this.a.splice(t,1),!0)}},{key:"each",value:function(e){var t=!0,r=!1,n=void 0;try{for(var i,o=(0,f.default)(this.a);!(t=(i=o.next()).done);t=!0){var a=i.value;e(a,a,this)}}catch(e){r=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw n}}}},{key:"size",value:function(){return this.a.length}},{key:"empty",value:function(){return 0===this.size()}},{key:"values",value:function(){return this.a}}]),e}(),t.StringSet=function(){function e(){(0,m.default)(this,e),this.s={}}return(0,E.default)(e,[{key:"clear",value:function(){return this.s={},this}},{key:"has",value:function(e){return void 0!==this.s[e]}},{key:"add",value:function(e){return this.s[e]="",this}},{key:"adda",value:function(e){var t=this;return e.forEach(function(e){return t.add(e)}),this}},{key:"adds",value:function(e){var t=this;return e.each(function(e){return t.add(e)}),this}},{key:"remove",value:function(e){var t=this.has(e);return delete this.s[e],t}},{key:"each",value:function(e){for(var t in this.s)e(t,t,this)}},{key:"size",value:function(){var e=0;for(var t in this.s)e++;return e}},{key:"empty",value:function(){return 0===this.size()}},{key:"values",value:function(){var e=[];for(var t in this.s)e.push(t);return e}}]),e}()),x=t.OMap=function(e){function t(){(0,m.default)(this,t);var e=(0,v.default)(this,(t.__proto__||(0,d.default)(t)).apply(this,arguments));return e.a=[],e}return(0,g.default)(t,e),(0,E.default)(t,[{key:"set",value:function(e,r){return this.has(e)||((0,l.default)(t.prototype.__proto__||(0,d.default)(t.prototype),"set",this).call(this,e,r),this.a.push(r)),this}},{key:"remove",value:function(e){var r=this.get(e);return void 0!==r&&((0,l.default)(t.prototype.__proto__||(0,d.default)(t.prototype),"remove",this).call(this,e),this.a.splice(this.a.indexOf(r),1)),void 0!==r}},{key:"size",value:function(){return this.a.length}},{key:"values",value:function(){return this.a}},{key:"clear",value:function(){return(0,l.default)(t.prototype.__proto__||(0,d.default)(t.prototype),"clear",this).call(this),this.a=[],this}}]),t}(k);t.EOMap=function(e){function t(e){(0,m.default)(this,t);var r=(0,v.default)(this,(t.__proto__||(0,d.default)(t)).call(this));return r.create=e,r}return(0,g.default)(t,e),(0,E.default)(t,[{key:"goc",value:function(e,t){return this.has(e)||this.set(e,t?t(e):this.create(e)),this.get(e)}}]),t}(x),t.OStringSet=function(e){function t(){(0,m.default)(this,t);var e=(0,v.default)(this,(t.__proto__||(0,d.default)(t)).apply(this,arguments));return e.a=[],e}return(0,g.default)(t,e),(0,E.default)(t,[{key:"add",value:function(e){return this.has(e)||((0,l.default)(t.prototype.__proto__||(0,d.default)(t.prototype),"add",this).call(this,e),this.a.push(e)),this}},{key:"remove",value:function(e){var r=(0,l.default)(t.prototype.__proto__||(0,d.default)(t.prototype),"remove",this).call(this,e);return r&&this.a.splice(this.a.indexOf(e),1),r}},{key:"size",value:function(){return this.a.length}},{key:"values",value:function(){return this.a}},{key:"clear",value:function(){return(0,l.default)(t.prototype.__proto__||(0,d.default)(t.prototype),"clear",this).call(this),this.a=[],this}}]),t}(w)},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t,r){var n=r(15),i=r(40);e.exports=r(16)?function(e,t,r){return n.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,r){var n=r(87),i=r(55);e.exports=function(e){return n(i(e))}},function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},function(e,t,r){!function(t,n){e.exports=n(r(9))}(0,function(e){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(t,r){t.exports=e},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=function(){function e(){this.objectsById={},this.assignmentsById={}}return e}();t.UniqueObjectTracker=i;var o=function(){function e(e,t){this.$http=e,this.$q=t}return e.$inject=["$http","$q"],e.stringToSPARQLString=function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/\f/g,"\\f")+'"'},e.bindingsToObject=function(t,r,n,i){void 0===r&&(r={});for(var o in t){var a=o,s=r,u=a.indexOf("_"),l=-1,c=void 0;for(i&&(c=i.assignmentsById);-1!==u;){a=o.substring(l+1,u);var f=o.substring(0,u);if(n&&n.bindingTypes&&n.bindingTypes[f]&&"uniqueArray"===n.bindingTypes[f]){s[a]||(s[a]=[]),i.objectsById[f]||(i.objectsById[f]={});var p=void 0;i.objectsById[f][t[f].value]?p=i.objectsById[f][t[f].value]:(p=n.bindingConverters[f](t[f],t),i.objectsById[f][t[f].value]=p),c[f]||(c[f]={}),c[f][t[f].value]||(s[f].push(p),c[f][t[f].value]={}),c=c[f][t[f].value],s=p}else n&&n.bindingTypes&&n.bindingTypes[f]&&"single"===n.bindingTypes[f]?(i.objectsById[f]||(i.objectsById[f]={}),i.objectsById[f][t[f].value]||(s[a]=n.bindingConverters[f](t[f],t),i.objectsById[f][t[f].value]=s[a])):s[a]||(s[a]=n.bindingConverters[f](t[f],t)),s=s[a];l=u,u=o.indexOf("_",u+1)}a=o.substring(l+1);var d=void 0;if(i&&n&&n.bindingTypes&&("single"===n.bindingTypes[o]||"uniqueArray"===n.bindingTypes[o])?(i.objectsById[o]||(i.objectsById[o]={}),i.objectsById[o][t[o].value]?d=i.objectsById[o][t[o].value]:(d=n&&n.bindingConverters&&n.bindingConverters[o]?n.bindingConverters[o](t[o],t):e.bindingToValue(t[o]),i.objectsById[o][t[o].value]=d)):n&&n.bindingConverters&&n.bindingConverters[o]?d=n.bindingConverters[o](t[o],t):n&&n.bindingTypes&&n.bindingTypes[o]&&("hash"===n.bindingTypes[o]||"ignore"===n.bindingTypes[o])||(d=e.bindingToValue(t[o])),n&&n.bindingTypes&&n.bindingTypes[o])switch(n.bindingTypes[o]){case"ignore":break;case"single":s[a]=d;break;case"array":Array.isArray(s[a])||(s[a]=[]),s[a].push(d);break;case"hash":if(s[a]||(s[a]={}),d)s[a][t[o].value]=d;else if("literal"===t[o].type){var h=t[o].datatype;h||(h=t[o]["xml:lang"])||(h=""),s[a][h]=t[o].value}else s[a][t[o].value]=t[o].value;break;default:s[a]||(s[a]=[]),c[o]||(c[o]={}),c[o][t[o].value]||(c[o][t[o].value]=d,s[a].push(d))}else if(Array.isArray(s[a]))s[a].push(d);else if(null!==s[a]&&"object"==typeof s[a]&&t[o])if("literal"===t[o].type){var h=t[o].datatype;h||(h=t[o]["xml:lang"])||(h=""),n&&n.bindingConverters&&n.bindingConverters[o]?s[a][h]=n.bindingConverters[o](t[o],t):s[a][h]=t[o].value}else n&&n.bindingConverters&&n.bindingConverters[o]?s[a][t[o].value]=n.bindingConverters[o](t[o],t):s[a][t[o].value]=t[o].value;else s[a]=d}return r},e.bindingToValue=function(e){if(e){if("uri"===e.type)return e.value;if("bnode"===e.type)return e.value;if(e.datatype)switch(e.datatype){case"http://www.w3.org/2001/XMLSchema#integer":case"http://www.w3.org/2001/XMLSchema#decimal":return parseInt(e.value,10);case"http://www.w3.org/2001/XMLSchema#float":case"http://www.w3.org/2001/XMLSchema#double":return parseFloat(e.value);case"http://www.w3.org/2001/XMLSchema#boolean":return!!e.value}return e.value}},e.bindingToString=function(e){if(!e)return"UNDEF";var t=e.value.replace(/\\/g,"\\\\").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\"/g,'\\"').replace(/\'/g,"\\'");if("uri"===e.type)return"<"+t+">";if("bnode"===e.type)return"_:"+t;if(!e.datatype)return e["xml:lang"]?'"'+t+'"@'+e["xml:lang"]:'"'+t+'"';switch(e.datatype){case"http://www.w3.org/2001/XMLSchema#integer":case"http://www.w3.org/2001/XMLSchema#decimal":case"http://www.w3.org/2001/XMLSchema#double":case"http://www.w3.org/2001/XMLSchema#boolean":return t;case"http://www.w3.org/2001/XMLSchema#string":return'"'+t+'"';default:return'"'+t+'"^^<'+e.datatype+">"}},e.prototype.check=function(e,t){var r=this.$q.defer();return this.$http(n.extend({method:"GET",url:e,params:{query:"ASK {}"},headers:{Accept:"application/sparql-results+json"}},t)).then(function(e){return r.resolve(!0===e.data.boolean)},function(e){return r.resolve(!1)}),r.promise},e.prototype.checkUpdate=function(e,t){var r=this.$q.defer();return this.$http(n.extend({method:"POST",url:e,headers:{"Content-Type":"application/sparql-update"},data:"INSERT DATA {}"},t)).then(function(e){return r.resolve(204===e.status)},function(e){return r.resolve(!1)}),r.promise},e.prototype.checkRest=function(e,t){var r=this.$q.defer();return this.$http(n.extend({method:"POST",url:e+"?default",data:"",headers:{"Content-Type":"text/turtle"}},t)).then(function(e){return r.resolve(204===e.status)},function(e){return r.resolve(!1)}),r.promise},e.prototype.get=function(e,t,r){return this.$http(n.extend({method:"GET",url:e,params:t?{graph:t}:{default:""},headers:{Accept:"text/turtle"}},r))},e.prototype.post=function(e,t,r,i){return this.$http(n.extend({method:"POST",url:e,params:r?{graph:r}:{default:""},data:t,headers:{"Content-Type":"text/turtle"}},i))},e.prototype.put=function(e,t,r,i){return this.$http(n.extend({method:"PUT",url:e,params:r?{graph:r}:{default:""},data:t,headers:{"Content-Type":"text/turtle"}},i))},e.prototype.delete=function(e,t,r){return this.$http(n.extend({method:"DELETE",url:e,params:t?{graph:t}:{default:""}},r))},e.prototype.query=function(e,t,r){return t.length<=2048?this.$http(n.extend({method:"GET",url:e,params:{query:t},headers:{Accept:"application/sparql-results+json"}},r)):this.$http(n.extend({method:"POST",url:e,data:"query="+encodeURIComponent(t),headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/sparql-results+json"}},r))},e.prototype.construct=function(e,t,r){return t.length<=2048?this.$http(n.extend({method:"GET",url:e,params:{query:t},headers:{Accept:"text/turtle"}},r)):this.$http(n.extend({method:"POST",url:e,data:t,headers:{"Content-Type":"application/sparql-query",Accept:"text/turtle"}},r))},e.prototype.update=function(e,t,r){return this.$http(n.extend({method:"POST",url:e,headers:{"Content-Type":"application/sparql-update"},data:t},r))},e}();t.SparqlService=o,n.module("fi.seco.sparql",[]).service("sparqlService",o)}])})},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SparqlItemWorkerService=t.SparqlItemService=t.SimpleConstraint=t.Item=t.PropertyToValues=t.RichPropertyValue=t.PropertyAndValue=void 0;var i=r(34),o=n(i),a=r(8),s=n(a),u=r(13),l=n(u),c=r(14),f=n(c),p=r(1),d=n(p),h=r(3),v=n(h),y=r(9),g=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(y),b=r(69),m=r(6),_=r(51),E=r(17),k=r(101),w=t.PropertyAndValue=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];(0,d.default)(this,e),this.property=t,this.object=r,this.properties=n}return(0,v.default)(e,[{key:"pruned",value:function(){return new e(new b.PrunedRichNodeFromNode(this.property),new b.PrunedRichNodeFromNode(this.object),this.properties.map(function(e){return e.pruned()}))}}]),e}(),x=t.RichPropertyValue=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];(0,d.default)(this,e),this.value=t,this.properties=r},S=t.PropertyToValues=function(e){function t(e){(0,d.default)(this,t);var r=(0,l.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return r.values=[],r}return(0,f.default)(t,e),(0,v.default)(t,[{key:"toPropertyAndValues",value:function(e){return t.toPropertyAndValues(this,e)}}],[{key:"toPropertyAndValues",value:function(e,t){return e.values.map(function(t){return new w(e,t.value,(0,k.flatten)(t.properties.map(function(e){return e.values.map(function(t){return new w(e,t.value)})})))})}}]),t}(b.RichNodeFromRichNode),T=t.Item=function(e){function t(){(0,d.default)(this,t);var e=(0,l.default)(this,(t.__proto__||(0,s.default)(t)).apply(this,arguments));return e.localProperties=[],e.remoteProperties=[],e.localInverseProperties=[],e.remoteInverseProperties=[],e}return(0,f.default)(t,e),t}(b.FullRichNodeFromNode),A=(t.SimpleConstraint=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,d.default)(this,e),this.constraintString=t,this.priority=r},t.SparqlItemService=function(){function e(t){(0,d.default)(this,e),this.workerService=t}return e.$inject=["workerService"],(0,v.default)(e,[{key:"getItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments[2];return this.workerService.call("sparqlItemWorkerService","getItems",[[e.toCanonical()],t],r).then(function(e){return e[0]},null,function(e){return{endpointType:e.endpointType,endpoint:e.endpoint,item:e.items[0]}})}},{key:"getItems",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments[2];return this.workerService.call("sparqlItemWorkerService","getItems",[e.map(function(e){return e.toCanonical()}),t],r)}},{key:"getAllItems",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments[1];return this.workerService.call("sparqlItemWorkerService","getItems",[!1,e],t)}},{key:"createNewItem",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.workerService.call("sparqlItemWorkerService","createNewItem",[e.map(function(e){return e.pruned()})])}},{key:"alterItem",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.workerService.call("sparqlItemWorkerService","alterItem",[e,t.map(function(e){return e.pruned()}),r.map(function(e){return e.pruned()})])}},{key:"deleteItem",value:function(e){return this.workerService.call("sparqlItemWorkerService","deleteItem",[e])}}]),e}());A.naiveGetLocalItemPropertiesQuery='PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX mads: <http://www.loc.gov/mads/rdf/v1#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\nSELECT ?id ?itemLabel ?property ?propertyLabel ?object ?objectLabel {\n# STARTGRAPH\n  VALUES ?id { <IDS> }\n  ?id skos:prefLabel|mads:authoritativeLabel|rdfs:label ?itemLabel .\n  FILTER(LANG(?itemLabel)=\'\' || LANG(?itemLabel)=\'<PREFLANG>\')\n  ?id ?property ?object .\n  OPTIONAL {\n    ?property skos:prefLabel|rdfs:label ?propertyLabelP .\n    FILTER(LANG(?propertyLabelP)=\'\' || LANG(?propertyLabelP)=\'<PREFLANG>\')\n  }\n  BIND(COALESCE(?propertyLabelP,REPLACE(REPLACE(REPLACE(REPLACE(STR(?property),".*/",""),".*#",""),"_"," "),"([A-ZÅÄÖ])"," $1")) AS ?propertyLabel)\n  OPTIONAL {\n    ?object skos:prefLabel|rdfs:label ?objectLabelP .\n    FILTER(LANG(?objectLabelP)=\'\' || LANG(?objectLabelP)=\'<PREFLANG>\')\n  }\n  BIND (IF(ISIRI(?object),COALESCE(?objectLabelP,REPLACE(REPLACE(REPLACE(REPLACE(STR(?object),".*/",""),".*#",""),"_"," "),"([A-ZÅÄÖ])"," $1")),?object) AS ?objectLabel)\n# ENDGRAPH\n}',A.getLocalItemPropertiesQuery='PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX mads: <http://www.loc.gov/mads/rdf/v1#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\nPREFIX sf: <http://ldf.fi/functions#>\nSELECT ?id ?itemLabel ?property ?propertyLabel ?object ?objectLabel {\n# STARTGRAPH\n  VALUES ?id { <IDS> }\n  { ?id ?property ?object . }\n  UNION\n  { ?object ?property ?id . }\n  ?id sf:preferredLanguageLiteral (skos:prefLabel mads:authoritativeLabel rdfs:label skos:altLabel mads:variantLabel \'<PREFLANG>\' \'\' ?itemLabel) .\n  OPTIONAL {\n    ?property sf:preferredLanguageLiteral (skos:prefLabel mads:authoritativeLabel rdfs:label skos:altLabel mads:variantLabel \'<PREFLANG>\' \'\' ?propertyLabelP)\n  }\n  BIND(COALESCE(?propertyLabelP,REPLACE(REPLACE(REPLACE(REPLACE(STR(?property),".*/",""),".*#",""),"_"," "),"([A-ZÅÄÖ])"," $1")) AS ?propertyLabel)\n  OPTIONAL {\n    ?object sf:preferredLanguageLiteral (skos:prefLabel mads:authoritativeLabel rdfs:label skos:altLabel mads:variantLabel \'<PREFLANG>\' \'\' ?objectLabelP) .\n  }\n  BIND (IF(ISIRI(?object),COALESCE(?objectLabelP,REPLACE(REPLACE(REPLACE(REPLACE(STR(?object),".*/",""),".*#",""),"_"," "),"([A-ZÅÄÖ])"," $1")),?object) AS ?objectLabel)\n# ENDGRAPH\n}',A.getRemoteItemPropertiesQuery='PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX mads: <http://www.loc.gov/mads/rdf/v1#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\nPREFIX sf: <http://ldf.fi/functions#>\nSELECT ?id ?property ?propertyLabel ?object ?objectLabel {\nVALUES (?id ?oid) { <IDPAIRS> }\n?oid ?property ?object .\nOPTIONAL {\n  ?property sf:preferredLanguageLiteral (skos:prefLabel mads:authoritativeLabel rdfs:label skos:altLabel mads:variantLabel \'<PREFLANG>\' \'\' ?propertyLabelP)\n}\nBIND(COALESCE(?propertyLabelP,REPLACE(REPLACE(REPLACE(REPLACE(STR(?property),".*/",""),".*#",""),"_"," "),"([A-ZÅÄÖ])"," $1")) AS ?propertyLabel)\nOPTIONAL {\n  ?object sf:preferredLanguageLiteral (skos:prefLabel mads:authoritativeLabel rdfs:label skos:altLabel mads:variantLabel \'<PREFLANG>\' \'\' ?objectLabelP) .\n}\nBIND (IF(ISIRI(?object),COALESCE(?objectLabelP,REPLACE(REPLACE(REPLACE(REPLACE(STR(?object),".*/",""),".*#",""),"_"," "),"([A-ZÅÄÖ])"," $1")),?object) AS ?objectLabel)\n}\n',A.deleteItemQuery="DELETE {\n# STARTGRAPH\n  <ID> ?p ?o .\n  ?s ?p <ID> .\n# ENDGRAPH\n}\nWHERE {\n# STARTGRAPH\n  { <ID> ?p ?o } UNION { ?s ?p <ID> }\n# ENDGRAPH\n}\n";t.SparqlItemWorkerService=function(){function e(t,r,n,i){(0,d.default)(this,e),this.fibraSparqlService=t,this.$q=r,this.sparqlUpdateWorkerService=n,this.stateWorkerService=i}return e.$inject=["fibraSparqlService","$q","sparqlUpdateWorkerService","stateWorkerService"],(0,v.default)(e,[{key:"getItems",value:function(t){var r=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments[2],a=this.stateWorkerService.state.project.itemQuery;a=t?a.replace(/<IDS>/g,t.join("")):a.replace(/VALUES \?id { <IDS> }/g,""),a=a.replace(/<PREFLANG>/g,this.stateWorkerService.state.language);var s=new E.EMap(function(e){return new T(m.DataFactory.instance.namedNode(e))}),u=this.$q.defer();return this.fibraSparqlService.query(this.stateWorkerService.state.project.endpoint,a,{timeout:i}).then(function(a){var l=new E.EMap(function(){return new E.EMap}),c=new E.EMap(function(){return new E.EMap(function(){return new E.EMap})}),f=new m.ENodeMap(function(){return[]}),p=!0,d=!1,h=void 0;try{for(var v,y=(0,o.default)(a.results.bindings);!(p=(v=y.next()).done);p=!0){var g=v.value,b=s.goc(g.id.value);g.itemLabel&&(b.label=g.itemLabel.value),e.processItemResult(b.localProperties,l.goc(g.id.value),c.goc(g.id.value),f.goc(b),r.stateWorkerService.state.project.endpoint,g)}}catch(e){d=!0,h=e}finally{try{!p&&y.return&&y.return()}finally{if(d)throw h}}if(n){u.notify({endpointType:"primary",endpoint:r.stateWorkerService.state.project.endpoint,items:s.values()});var k="",w=new E.StringSet,x=!0,S=!1,T=void 0;try{for(var A,I=(0,o.default)(s.values());!(x=(A=I.next()).done);x=!0){var b=A.value;k+="("+b.toCanonical()+b.toCanonical()+")",w.add(b.toCanonical());var C=!0,R=!1,F=void 0;try{for(var j,P=(0,o.default)(f.get(b));!(C=(j=P.next()).done);C=!0){var N=j.value;k+="("+b.toCanonical()+N.toCanonical()+")",w.add(N.toCanonical())}}catch(e){R=!0,F=e}finally{try{!C&&P.return&&P.return()}finally{if(R)throw F}}}}catch(e){S=!0,T=e}finally{try{!x&&I.return&&I.return()}finally{if(S)throw T}}if(t){var L=!0,O=!1,Q=void 0;try{for(var D,M=(0,o.default)(t);!(L=(D=M.next()).done);L=!0){var B=D.value;w.has(B)||(k+="("+B+" "+B+")")}}catch(e){O=!0,Q=e}finally{try{!L&&M.return&&M.return()}finally{if(O)throw Q}}}r.$q.all(r.stateWorkerService.state.project.remoteEndpoints().map(function(t){var n=t.itemQuery;return n=n.replace(/<IDPAIRS>/g,k),n=n.replace(/<PREFLANG>/g,r.stateWorkerService.state.language),r.fibraSparqlService.query(t.endpoint,n,{timeout:i}).then(function(r){if(0!==r.results.bindings.length){var n=!0,i=!1,a=void 0;try{for(var p,d=(0,o.default)(r.results.bindings);!(n=(p=d.next()).done);n=!0){var h=p.value,v=s.goc(h.id.value);e.processItemResult(v.remoteProperties,l.goc(h.id.value),c.goc(h.id.value),f.goc(v),t.id,h)}}catch(e){i=!0,a=e}finally{try{!n&&d.return&&d.return()}finally{if(i)throw a}}u.notify({endpointType:"remote",endpoint:t.id,items:s.values()})}},function(e){return u.notify({endpointType:"remote",endpoint:t.id,error:_.WorkerWorkerService.stripFunctions(e)})})})).then(function(){return u.resolve(s.values())})}else u.resolve(s.values())}),u.promise}},{key:"deleteItem",value:function(e){return this.fibraSparqlService.update(this.stateWorkerService.state.project.updateEndpoint,this.stateWorkerService.state.project.deleteItemQuery.replace(/<ID>/g,e.toCanonical())).then(function(e){return!0},function(e){return!1})}},{key:"alterItem",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=[],i=[];return t.forEach(function(t){return n.push(new m.Triple(e,t.property,t.object))}),r.forEach(function(t){return i.push(new m.Triple(e,t.property,t.object))}),this.sparqlUpdateWorkerService.updateGraphs(this.stateWorkerService.state.project.updateEndpoint,[new m.Graph(this.stateWorkerService.state.project.graph?m.DataFactory.namedNode(this.stateWorkerService.state.project.graph):m.DefaultGraph.instance,n)],[new m.Graph(this.stateWorkerService.state.project.graph?m.DataFactory.namedNode(this.stateWorkerService.state.project.graph):m.DefaultGraph.instance,i)])}},{key:"createNewItem",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.$q.defer(),r=new m.NamedNode(this.stateWorkerService.state.project.instanceNS+(0,k.UUID)());t.notify(r);var n=[];return e.forEach(function(e){return n.push(new m.Triple(r,e.property,e.object))}),this.sparqlUpdateWorkerService.updateGraphs(this.stateWorkerService.state.project.updateEndpoint,[new m.Graph(this.stateWorkerService.state.project.graph?m.DataFactory.namedNode(this.stateWorkerService.state.project.graph):m.DefaultGraph.instance,n)]).then(function(){return t.resolve(r)},t.reject,t.notify),t.promise}}],[{key:"processItemResult",value:function(e,t,r,n,i,o){if(o.property){var a=r.goc(o.property.value).goc(o.object.value,function(){var r=t.goc(o.property.value,function(){var t=new S(m.DataFactory.instance.nodeFromBinding(o.property));return o.propertyLabel&&(t.label=o.propertyLabel.value),e.push(t),t}),i=new b.FullRichNodeFromNode(m.DataFactory.instance.nodeFromBinding(o.object));return i.sourceEndpoints=[],r.values.push(new x(i)),m.OWL.sameAs.equals(r)&&n.push(i),i});a.sourceEndpoints.push(i),o.objectLabel&&!a.label&&(a.label=o.objectLabel.value)}}}]),e}();g.module("fibra.services.sparql-item-service",[]).config(["$provide",function(e){e.service("sparqlItemService",A)}])},function(e,t,r){"use strict";function n(e){if(!(this instanceof n))return new n(e);l.call(this,e),c.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",i)}function i(){this.allowHalfOpen||this._writableState.ended||a(o,this)}function o(e){e.end()}var a=r(49),s=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=n;var u=r(38);u.inherits=r(18);var l=r(123),c=r(80);u.inherits(n,l);for(var f=s(c.prototype),p=0;p<f.length;p++){var d=f[p];n.prototype[d]||(n.prototype[d]=c.prototype[d])}Object.defineProperty(n.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),n.prototype._destroy=function(e,t){this.push(null),this.end(),a(t,e)}},function(e,t){},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Citable=t.CitableSource=void 0;var i=r(1),o=n(i),a=r(3),s=n(a),u=r(6);t.CitableSource=function(){function e(t,r){(0,o.default)(this,e),this.sparqlEndpoint=t,this.graph=r}return(0,s.default)(e,null,[{key:"clone",value:function(t){return new e(t.sparqlEndpoint,t.graph)}}]),e}(),t.Citable=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:new Date;(0,o.default)(this,e),this.labels=n,this.url=i,this.descriptions=a,this.rightsHolders=s,this.dateCreated=u,this.source={sparqlEndpoint:null},this.id=t,this.source=r}return(0,s.default)(e,[{key:"toTurtle",value:function(t,r){e.toTurtle(this,t,r)}}],[{key:"toTurtle",value:function(e,t,r){r.skos=u.SKOS.ns,r.dcterms=u.DCTerms.ns,r.foaf=u.FOAF.ns,r.fibra=u.FIBRA.ns,r.rdf=u.RDF.ns,r.xsd=u.XMLSchema.ns;var n=t.get(e.id);e.labels.forEach(function(e){e.value&&(n=n+"\nskos:prefLabel "+e.toCanonical()+" ;")}),n=n+'\ndcterms:created "'+e.dateCreated.toISOString()+'"^^xsd:dateTime ;',e.descriptions.forEach(function(e){e.value&&(n=n+"\ndcterms:description "+e.toCanonical()+" ;")}),e.url&&(n=n+"\nfoaf:homepage <"+e.url+"> ;"),e.rightsHolders.length>0&&(n+="\ndcterms:rightsHolder ",e.rightsHolders.forEach(function(e){n=n+"<"+e.id+">, ",t.has(e.id)||(t.set(e.id,"<"+e.id+"> a foaf:Agent ;"),e.toTurtle(t,r))}),n=n.substring(0,n.length-2)+" ;",e.rightsHolders.length>1&&e.rightsHolders.forEach(function(e,t){n=n+"\nfibra:qualifiedAssertion [\n  rdf:predicate dcterms:rightsHolder ;\n  rdf:object <"+e.id+"> ;\n  fibra:order "+t+" ;\n] ;"})),t.set(e.id,n)}}]),e}()},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.DataModel=t.Property=t.Class=void 0;var i=r(8),o=n(i),a=r(13),s=n(a),u=r(14),l=n(u),c=r(1),f=n(c),p=r(3),d=n(p),h=r(69),v=r(17),y=function(){function e(t){(0,f.default)(this,e),this.id=t,this.labels=[],this.descriptions=[],this.types=[]}return(0,d.default)(e,[{key:"getLabel",value:function(e){return this.asNode(e).label}},{key:"asNode",value:function(e){var t=this.asNodes[e];if(t)return t;if(t=this.asNodes[""])return t;for(var r in this.asNodes)return this.asNodes[r]}},{key:"buildAsNodes",value:function(){var e=this;if(!this.asNodes){this.asNodes={};var t=new v.StringSet,r=new v.FMap,n=new v.FMap,i=new v.FMap;this.labels.forEach(function(e){r.set(e.language,e.value),r.has("")||r.set("",e.value),t.add(e.language)}),this.descriptions.forEach(function(e){n.set(e.language,e.value),n.has("")||n.set("",e.value),t.add(e.language)}),this.types.forEach(function(e){e.buildAsNodes();var r=new v.FMap;i.set(e.id.value,r),e.labels.forEach(function(e){r.set(e.language,e.value),r.has("")||r.set("",e.value),t.add(e.language)})}),t.each(function(t){var i=new h.FullRichNodeFromNode(e.id);i.label=r.get(t),i.label||(i.label=r.get("")),i.description=n.get(t),i.description||(i.description=n.get("")),i.types=e.types.map(function(r){return r.id===e.id?i:r.asNode(t)}),e.asNodes[t]=i})}}}]),e}(),g=(t.Class=function(e){function t(e){(0,f.default)(this,t);var r=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return r.superClasses=[],r.subClasses=[],r.properties=[],r.inverseProperties=[],r}return(0,l.default)(t,e),t}(y),t.Property=function(e){function t(e){(0,f.default)(this,t);var r=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return r.domains=[],r.ranges=[],r.superProperties=[],r.subProperties=[],r}return(0,l.default)(t,e),t}(y),t.DataModel=function(){function e(){(0,f.default)(this,e),this.classMap=new v.FMap,this.propertyMap=new v.FMap,this.rootClasses=[],this.rootProperties=[]}return(0,d.default)(e,null,[{key:"getFilter",value:function(e){return 0===e.length?"":"FILTER (?groupId IN ("+e.map(function(e){return e.toCanonical()}).join(", ")+"))"}}]),e}());g.propertyQuery="PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\nPREFIX sf: <http://ldf.fi/functions#>\nPREFIX dcterms: <http://purl.org/dc/terms/>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nSELECT ?id ?domains ?ranges ?labels ?descriptions ?types ?inverseProperty ?superProperties ?subProperties {\n# STARTGRAPH\n  {\n    ?types rdfs:subClassOf* rdf:Property .\n    ?id a ?types .\n  }\n    {\n    ?id skos:prefLabel|rdfs:label ?labels .\n  } UNION {\n    ?id rdfs:comment|dcterms:description ?descriptions .\n  } UNION {\n    ?id owl:inverseOf ?inverseProperty .\n  } UNION {\n    ?id rdfs:domain ?domains .\n  } UNION {\n    ?id rdfs:range ?ranges .\n  } UNION {\n    ?id rdfs:subPropertyOf ?superProperties .\n  } UNION {\n    ?subProperties rdfs:subPropertyOf ?id .\n  }\n# ENDGRAPH\n}",g.classQuery="PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\nPREFIX sf: <http://ldf.fi/functions#>\nPREFIX dcterms: <http://purl.org/dc/terms/>\nSELECT ?id ?types ?labels ?descriptions ?superClasses ?subClasses {\n# STARTGRAPH\n  {\n    ?types rdfs:subClassOf* rdfs:Class .\n    ?id a ?types .\n  }\n  {\n    ?id skos:prefLabel|rdfs:label ?labels .\n  } UNION {\n    ?id rdfs:comment|dcterms:description ?descriptions .\n  } UNION {\n    ?id rdfs:subClassOf ?superClasses .\n  } UNION {\n    ?subClasses rdfs:subClassOf ?id .\n  }\n# ENDGRAPH\n}"},function(e,t,r){e.exports={default:r(192),__esModule:!0}},function(e,t,r){"use strict";(function(e){function n(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(e,t){if(n()<t)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=o.prototype):(null===e&&(e=new o(t)),e.length=t),e}function o(e,t,r){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return l(this,e)}return a(this,e,t,r)}function a(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?p(e,t,r,n):"string"==typeof t?c(e,t,r):d(e,t)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function u(e,t,r,n){return s(t),t<=0?i(e,t):void 0!==r?"string"==typeof n?i(e,t).fill(r,n):i(e,t).fill(r):i(e,t)}function l(e,t){if(s(t),e=i(e,t<0?0:0|h(t)),!o.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function c(e,t,r){if("string"==typeof r&&""!==r||(r="utf8"),!o.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|y(t,r);e=i(e,n);var a=e.write(t,r);return a!==n&&(e=e.slice(0,a)),e}function f(e,t){var r=t.length<0?0:0|h(t.length);e=i(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function p(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n),o.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=o.prototype):e=f(e,t),e}function d(e,t){if(o.isBuffer(t)){var r=0|h(t.length);return e=i(e,r),0===e.length?e:(t.copy(e,0,0,r),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||$(t.length)?i(e,0):f(e,t);if("Buffer"===t.type&&K(t.data))return f(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function h(e){if(e>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|e}function v(e){return+e!=e&&(e=0),o.alloc(+e)}function y(e,t){if(o.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return H(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return W(e).length;default:if(n)return H(e).length;t=(""+t).toLowerCase(),n=!0}}function g(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,t>>>=0,r<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return j(this,t,r);case"utf8":case"utf-8":return I(this,t,r);case"ascii":return R(this,t,r);case"latin1":case"binary":return F(this,t,r);case"base64":return A(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function b(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function m(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=o.from(t,n)),o.isBuffer(t))return 0===t.length?-1:_(e,t,r,n,i);if("number"==typeof t)return t&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):_(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function _(e,t,r,n,i){function o(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var a=1,s=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,r/=2}var l;if(i){var c=-1;for(l=r;l<s;l++)if(o(e,l)===o(t,-1===c?0:l-c)){if(-1===c&&(c=l),l-c+1===u)return c*a}else-1!==c&&(l-=l-c),c=-1}else for(r+u>s&&(r=s-u),l=r;l>=0;l--){for(var f=!0,p=0;p<u;p++)if(o(e,l+p)!==o(t,p)){f=!1;break}if(f)return l}return-1}function E(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[r+a]=s}return a}function k(e,t,r,n){return z(H(t,e.length-r),e,r,n)}function w(e,t,r,n){return z(V(t),e,r,n)}function x(e,t,r,n){return w(e,t,r,n)}function S(e,t,r,n){return z(W(t),e,r,n)}function T(e,t,r,n){return z(X(t,e.length-r),e,r,n)}function A(e,t,r){return 0===t&&r===e.length?Y.fromByteArray(e):Y.fromByteArray(e.slice(t,r))}function I(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o=e[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=r){var u,l,c,f;switch(s){case 1:o<128&&(a=o);break;case 2:u=e[i+1],128==(192&u)&&(f=(31&o)<<6|63&u)>127&&(a=f);break;case 3:u=e[i+1],l=e[i+2],128==(192&u)&&128==(192&l)&&(f=(15&o)<<12|(63&u)<<6|63&l)>2047&&(f<55296||f>57343)&&(a=f);break;case 4:u=e[i+1],l=e[i+2],c=e[i+3],128==(192&u)&&128==(192&l)&&128==(192&c)&&(f=(15&o)<<18|(63&u)<<12|(63&l)<<6|63&c)>65535&&f<1114112&&(a=f)}}null===a?(a=65533,s=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=s}return C(n)}function C(e){var t=e.length;if(t<=Z)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=Z));return r}function R(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function F(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function j(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=G(e[o]);return i}function P(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function N(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function L(e,t,r,n,i,a){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function O(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-r,2);i<o;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function Q(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-r,4);i<o;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function D(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function M(e,t,r,n,i){return i||D(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38),J.write(e,t,r,n,23,4),r+4}function B(e,t,r,n,i){return i||D(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308),J.write(e,t,r,n,52,8),r+8}function U(e){if(e=q(e).replace(ee,""),e.length<2)return"";for(;e.length%4!=0;)e+="=";return e}function q(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function G(e){return e<16?"0"+e.toString(16):e.toString(16)}function H(e,t){t=t||1/0;for(var r,n=e.length,i=null,o=[],a=0;a<n;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function V(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function X(e,t){for(var r,n,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=e.charCodeAt(a),n=r>>8,i=r%256,o.push(i),o.push(n);return o}function W(e){return Y.toByteArray(U(e))}function z(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function $(e){return e!==e}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var Y=r(226),J=r(227),K=r(121);t.Buffer=o,t.SlowBuffer=v,t.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=n(),o.poolSize=8192,o._augment=function(e){return e.__proto__=o.prototype,e},o.from=function(e,t,r){return a(null,e,t,r)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(e,t,r){return u(null,e,t,r)},o.allocUnsafe=function(e){return l(null,e)},o.allocUnsafeSlow=function(e){return l(null,e)},o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,a=Math.min(r,n);i<a;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!K(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=o.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var a=e[r];if(!o.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,i),i+=a.length}return n},o.byteLength=y,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)b(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)b(this,t,t+3),b(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)b(this,t,t+7),b(this,t+1,t+6),b(this,t+2,t+5),b(this,t+3,t+4);return this},o.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?I(this,0,e):g.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e,t,r,n,i){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;for(var a=i-n,s=r-t,u=Math.min(a,s),l=this.slice(n,i),c=e.slice(t,r),f=0;f<u;++f)if(l[f]!==c[f]){a=l[f],s=c[f];break}return a<s?-1:s<a?1:0},o.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},o.prototype.indexOf=function(e,t,r){return m(this,e,t,r,!0)},o.prototype.lastIndexOf=function(e,t,r){return m(this,e,t,r,!1)},o.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return E(this,e,t,r);case"utf8":case"utf-8":return k(this,e,t,r);case"ascii":return w(this,e,t,r);case"latin1":case"binary":return x(this,e,t,r);case"base64":return S(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Z=4096;o.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n;if(o.TYPED_ARRAY_SUPPORT)n=this.subarray(e,t),n.__proto__=o.prototype;else{var i=t-e;n=new o(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+e]}return n},o.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||N(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},o.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||N(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},o.prototype.readUInt8=function(e,t){return t||N(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return t||N(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return t||N(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return t||N(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return t||N(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||N(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},o.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||N(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return t||N(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){t||N(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt16BE=function(e,t){t||N(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt32LE=function(e,t){return t||N(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return t||N(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return t||N(e,4,this.length),J.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return t||N(e,4,this.length),J.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return t||N(e,8,this.length),J.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return t||N(e,8,this.length),J.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t|=0,r|=0,!n){L(this,e,t,r,Math.pow(2,8*r)-1,0)}var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},o.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t|=0,r|=0,!n){L(this,e,t,r,Math.pow(2,8*r)-1,0)}var i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},o.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):O(this,e,t,!0),t+2},o.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):O(this,e,t,!1),t+2},o.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):Q(this,e,t,!0),t+4},o.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):Q(this,e,t,!1),t+4},o.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);L(this,e,t,r,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<r&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},o.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);L(this,e,t,r,i-1,-i)}var o=r-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},o.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):O(this,e,t,!0),t+2},o.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):O(this,e,t,!1),t+2},o.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):Q(this,e,t,!0),t+4},o.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):Q(this,e,t,!1),t+4},o.prototype.writeFloatLE=function(e,t,r){return M(this,e,t,!0,r)},o.prototype.writeFloatBE=function(e,t,r){return M(this,e,t,!1,r)},o.prototype.writeDoubleLE=function(e,t,r){return B(this,e,t,!0,r)},o.prototype.writeDoubleBE=function(e,t,r){return B(this,e,t,!1,r)},o.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,a=n-r;if(this===e&&r<t&&t<n)for(i=a-1;i>=0;--i)e[i+t]=this[i+r];else if(a<1e3||!o.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+a),t);return a},o.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!o.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0);var a;if("number"==typeof e)for(a=t;a<r;++a)this[a]=e;else{var s=o.isBuffer(e)?e:H(new o(e,n).toString()),u=s.length;for(a=0;a<r-t;++a)this[a+t]=s[a%u]}return this};var ee=/[^+\/0-9A-Za-z-_]/g}).call(t,r(7))},function(e,t,r){var n=r(39);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},function(e,t,r){e.exports={default:r(142),__esModule:!0}},function(e,t){e.exports={}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=r(8),o=n(i),a=r(164),s=n(a);t.default=function e(t,r,n){null===t&&(t=Function.prototype);var i=(0,s.default)(t,r);if(void 0===i){var a=(0,o.default)(t);return null===a?void 0:e(a,r,n)}if("value"in i)return i.value;var u=i.get;if(void 0!==u)return u.call(n)}},function(e,t,r){t=e.exports=r(123),t.Stream=t,t.Readable=t,t.Writable=r(80),t.Duplex=r(25),t.Transform=r(127),t.PassThrough=r(233)},function(e,t,r){(function(e){function r(e){return Array.isArray?Array.isArray(e):"[object Array]"===y(e)}function n(e){return"boolean"==typeof e}function i(e){return null===e}function o(e){return null==e}function a(e){return"number"==typeof e}function s(e){return"string"==typeof e}function u(e){return"symbol"==typeof e}function l(e){return void 0===e}function c(e){return"[object RegExp]"===y(e)}function f(e){return"object"==typeof e&&null!==e}function p(e){return"[object Date]"===y(e)}function d(e){return"[object Error]"===y(e)||e instanceof Error}function h(e){return"function"==typeof e}function v(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function y(e){return Object.prototype.toString.call(e)}t.isArray=r,t.isBoolean=n,t.isNull=i,t.isNullOrUndefined=o,t.isNumber=a,t.isString=s,t.isSymbol=u,t.isUndefined=l,t.isRegExp=c,t.isObject=f,t.isDate=p,t.isError=d,t.isFunction=h,t.isPrimitive=v,t.isBuffer=e.isBuffer}).call(t,r(31).Buffer)},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var r=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+n).toString(36))}},function(e,t){e.exports=!0},function(e,t,r){var n=r(89),i=r(59);e.exports=Object.keys||function(e){return n(e,i)}},function(e,t,r){var n=r(15).f,i=r(22),o=r(5)("toStringTag");e.exports=function(e,t,r){e&&!i(e=r?e:e.prototype,o)&&n(e,o,{configurable:!0,value:t})}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SparqlAutocompleteWorkerService=t.SparqlAutocompleteService=t.Result=t.ResultGroup=t.AutocompletionResults=void 0;var i=r(34),o=n(i),a=r(3),s=n(a),u=r(1),l=n(u),c=r(6),f=r(51),p=r(17),d=r(23),h=r(9),v=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(h),y=t.AutocompletionResults=function e(){(0,l.default)(this,e),this.localMatchingResults=[],this.localNonMatchingResults=[],this.remoteResults=[]},g=t.ResultGroup=function e(t){(0,l.default)(this,e),this.label=t,this.results=[]},b=t.Result=function e(t,r,n,i){(0,l.default)(this,e),this.ids=t,this.datasources=r,this.matchedLabel=n,this.prefLabel=i,this.additionalInformation={}},m=t.SparqlAutocompleteService=function(){function e(t){(0,l.default)(this,e),this.workerService=t}return e.$inject=["workerService"],(0,s.default)(e,[{key:"autocomplete",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments[4];return this.workerService.call("sparqlAutocompleteWorkerService","autocomplete",[e,t,r,n],i)}}]),e}();m.defaultMatchQuery='\nPREFIX text: <http://jena.apache.org/text#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX mads: <http://www.loc.gov/mads/rdf/v1#>\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\nPREFIX sf: <http://ldf.fi/functions#>\nPREFIX fibra: <http://ldf.fi/fibra/schema#>\nPREFIX dcterms: <http://purl.org/dc/terms/>\nSELECT ?groupId ?id ?prefLabel ?matchedLabel ?sameAs ?altLabel { # ADDITIONALVARIABLES\n# STARTGRAPH\n  {\n    SELECT ?groupId ?id (SUM(?sc) AS ?score) {\n      {\n        SELECT ?groupId ?id ?sc {\n          BIND(CONCAT("\\"",REPLACE(<QUERY>,"([\\\\+\\\\-\\\\&\\\\|\\\\!\\\\(\\\\)\\\\{\\\\}\\\\[\\\\]\\\\^\\\\\\"\\\\~\\\\*\\\\?\\\\:\\\\/\\\\\\\\])","\\\\$1"),"\\"") AS ?query)\n          (?id ?sc) text:query ?query .\n          ?id skos:prefLabel|rdfs:label|skos:altLabel|mads:authoritativeLabel|mads:variantLabel ?matchedLabel\n          FILTER (LCASE(?matchedLabel)=LCASE(<QUERY>))\n          ?id a ?groupIdLocal .\n          BIND(?groupIdLocal AS ?groupId)\n          # CONSTRAINTS\n        }\n        GROUP BY ?groupId ?id ?sc\n        LIMIT <LIMIT>\n      } UNION {\n        SELECT ?groupId ?id ?sc {\n          BIND(CONCAT(REPLACE(<QUERY>,"([\\\\+\\\\-\\\\&\\\\|\\\\!\\\\(\\\\)\\\\{\\\\}\\\\[\\\\]\\\\^\\\\\\"\\\\~\\\\*\\\\?\\\\:\\\\/\\\\\\\\])","\\\\$1"),"*") AS ?query)\n          (?id ?sc) text:query ?query .\n          ?id a ?groupIdLocal .\n          BIND(?groupIdLocal AS ?groupId)\n          # CONSTRAINTS\n        }\n        GROUP BY ?groupId ?id ?sc\n        LIMIT <LIMIT>\n      }\n    }\n    GROUP BY ?groupId ?id\n    HAVING(BOUND(?id))\n    LIMIT <LIMIT>\n  }\n  ?id skos:prefLabel|rdfs:label|skos:altLabel|mads:authoritativeLabel|mads:variantLabel ?matchedLabel\n  FILTER (REGEX(LCASE(?matchedLabel),CONCAT("\\\\b",LCASE(<QUERY>))))\n  {\n    ?id sf:preferredLanguageLiteral (skos:prefLabel mads:authoritativeLabel rdfs:label skos:altLabel mads:variantLabel \'<PREFLANG>\' \'\' ?prefLabel) .\n  } UNION {\n    ?id owl:sameAs ?sameAs .\n  } UNION {\n    ?id skos:altLabel|mads:variantLabel ?altLabel .\n  }\n  # ADDITIONALSELECT\n# ENDGRAPH\n}\n';var _=function e(){(0,l.default)(this,e),this.idToIdSet=new p.EMap(function(){return new p.StringSet}),this.idToGroupIdSet=new p.EMap(function(){return new p.StringSet}),this.ifpVarPlusValueToIdSet=new p.EMap(function(){return new p.EMap(function(){return new p.StringSet})}),this.idToPrefLabelSet=new p.EMap(function(){return new c.ONodeSet}),this.idToMatchedLabelSet=new p.EMap(function(){return new c.ONodeSet}),this.idToAltLabelSet=new p.EMap(function(){return new c.ONodeSet}),this.idToDatasourceSet=new p.EMap(function(){return new p.StringSet}),this.seen=new p.StringSet};t.SparqlAutocompleteWorkerService=function(){function e(t,r,n){(0,l.default)(this,e),this.$q=t,this.fibraSparqlService=r,this.stateWorkerService=n}return e.$inject=["$q","fibraSparqlService","stateWorkerService"],(0,s.default)(e,[{key:"autocomplete",value:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=arguments[4],s=this.$q.defer(),u=new y,l=this.stateWorkerService.state.project.autocompletionQuery;l=l.replace(/<QUERY>/g,d.SparqlService.stringToSPARQLString(t)),l=l.replace(/<LIMIT>/g,""+r),l=l.replace(/# CONSTRAINTS/g,o),l=l.replace(/<PREFLANG>/g,this.stateWorkerService.state.language);var c=new _,h=this.fibraSparqlService.query(this.stateWorkerService.state.project.endpoint,l,{timeout:a}).then(function(t){e.processBindings(c,i.stateWorkerService.state.project.endpoint,t),u.localMatchingResults=e.buildResults(c,new p.EMap,i.stateWorkerService.state.project.dataModel,i.stateWorkerService.state.language),n?s.notify({endpointType:"primary",endpoint:i.stateWorkerService.state.project.id,results:u}):s.resolve(u)});if(n){var v=new p.EMap;this.$q.all(this.stateWorkerService.state.project.remoteEndpoints().map(function(n){return l=n.autocompletionQuery,l=l.replace(/<QUERY>/g,d.SparqlService.stringToSPARQLString(t)),l=l.replace(/<LIMIT>/g,""+r),l=l.replace(/<PREFLANG>/g,i.stateWorkerService.state.language),i.fibraSparqlService.query(n.endpoint,l,{timeout:a}).then(function(t){0!==t.results.bindings.length&&h.then(function(){e.processBindings(c,n.id,t),e.unifyResults(c),u.remoteResults=u.remoteResults.concat(e.buildResults(c,v,i.stateWorkerService.state.project.dataModel,i.stateWorkerService.state.language)),s.notify({endpointType:"remote",endpoint:n.id,results:u})})},function(e){return s.notify({endpointType:"remote",endpoint:n.id,error:f.WorkerWorkerService.stripFunctions(e)})})})).then(function(){return s.resolve(u)})}return s.promise}}],[{key:"processBindings",value:function(e,t,r){r.results.bindings.forEach(function(n){var i=n.id.value;e.idToIdSet.goc(i).add(i),e.idToDatasourceSet.goc(i).add(t),n.prefLabel&&e.idToPrefLabelSet.goc(i).add(c.DataFactory.instance.nodeFromBinding(n.prefLabel)),n.altLabel&&e.idToAltLabelSet.goc(i).add(c.DataFactory.instance.nodeFromBinding(n.altLabel)),n.matchedLabel&&e.idToMatchedLabelSet.goc(i).add(c.DataFactory.instance.nodeFromBinding(n.matchedLabel)),n.groupId&&(e.idToGroupIdSet.goc(i).add(n.groupId.value),n.groupLabel&&e.idToPrefLabelSet.goc(n.groupId.value).add(c.DataFactory.instance.nodeFromBinding(n.groupLabel))),n.sameAs&&(e.idToIdSet.get(i).add(n.sameAs.value),e.idToIdSet.goc(n.sameAs.value).add(i));var a=!0,s=!1,u=void 0;try{for(var l,f=(0,o.default)(r.head.vars);!(a=(l=f.next()).done);a=!0){var p=l.value;0===p.indexOf("ifp")&&n[p]&&e.ifpVarPlusValueToIdSet.goc(p.substring(3)).goc(n[p].value).add(i)}}catch(e){s=!0,u=e}finally{try{!a&&f.return&&f.return()}finally{if(s)throw u}}})}},{key:"buildResults",value:function(e,t,r,n){var i=[];return e.idToIdSet.each(function(o,a){if(!e.seen.has(a)&&!o.values().some(function(t){return e.seen.has(t)})){e.seen.adds(o);var s=new b(o.values().map(function(e){return c.DataFactory.instance.namedNode(e)}),e.idToDatasourceSet.get(a).values(),e.idToMatchedLabelSet.get(a).values()[0],e.idToPrefLabelSet.has(a)?e.idToPrefLabelSet.get(a).values()[0]:null);e.idToAltLabelSet.has(a)&&(s.additionalInformation.altLabel=e.idToAltLabelSet.get(a).values()),s.additionalInformation.type=e.idToGroupIdSet.get(a).values().map(function(e){return c.DataFactory.instance.namedNode(e)}),s.additionalInformation.typeLabel=e.idToGroupIdSet.get(a).values().map(function(t){return e.idToPrefLabelSet.has(a)?e.idToPrefLabelSet.get(a).values()[0]:null}),e.idToGroupIdSet.get(a).each(function(o){return t.goc(o,function(){var t=r.classMap.has(o)?r.classMap.get(o).getLabel(n):e.idToPrefLabelSet.has(o)?e.idToPrefLabelSet.get(o).values()[0].value:o,a=new g(t);return i.push(a),a}).results.push(s)})}}),i}},{key:"unifyResults",value:function(e){e.ifpVarPlusValueToIdSet.each(function(t){return t.each(function(t){return t.each(function(r){return e.idToIdSet.goc(r).adds(t)})})}),e.idToIdSet.each(function(t,r){return t.each(function(n){var i=e.idToIdSet.get(n);if(t!==i){e.idToIdSet.set(n,t),t.adds(i);var o=e.idToDatasourceSet.get(r),a=e.idToDatasourceSet.get(n);o?(a&&o.adds(a),e.idToDatasourceSet.set(n,o)):a&&e.idToDatasourceSet.set(r,a);var s=e.idToGroupIdSet.get(r),u=e.idToGroupIdSet.get(n);s?(u&&s.adds(u),e.idToGroupIdSet.set(n,s)):u&&e.idToGroupIdSet.set(r,u);var l=e.idToPrefLabelSet.get(r),c=e.idToPrefLabelSet.get(n);l?(c&&l.adds(c),e.idToPrefLabelSet.set(n,l)):c&&e.idToPrefLabelSet.set(r,c),l=e.idToMatchedLabelSet.get(r),c=e.idToMatchedLabelSet.get(n),l?(c&&l.adds(c),e.idToMatchedLabelSet.set(n,l)):c&&e.idToMatchedLabelSet.set(r,c),l=e.idToAltLabelSet.get(r),c=e.idToAltLabelSet.get(n),l?(c&&l.adds(c),e.idToAltLabelSet.set(n,l)):c&&e.idToAltLabelSet.set(r,c)}})})}}]),e}();v.module("fibra.services.sparql-autocomplete-service",[]).config(["$provide",function(e){e.service("sparqlAutocompleteService",m)}])},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SparqlTreeWorkerService=t.SparqlTreeService=void 0;var i=r(1),o=n(i),a=r(3),s=n(a),u=r(9),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(u),c=r(70),f=t.SparqlTreeService=function(){function e(t){(0,o.default)(this,e),this.workerService=t}return e.$inject=["workerService"],(0,s.default)(e,[{key:"getTree",value:function(e,t,r){return this.workerService.call("sparqlTreeWorkerService","getTree",[e,t],r)}}]),e}();f.getClassTreeQuery='PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX sf: <http://ldf.fi/functions#>\nSELECT ?subClass ?superClass ?class ?classLabel ?instances {\n# STARTGRAPH\n  {\n    ?groupId rdfs:subClassOf ?class .\n    FILTER EXISTS {\n      ?id a ?groupId .\n      # CONSTRAINTS\n    }\n    BIND(?groupId AS ?subClass)\n  } UNION {\n    {\n      SELECT ?groupId (COUNT(*) AS ?instances) {\n        ?id a ?groupId .\n      }\n      GROUP BY ?groupId\n    }\n    # CONSTRAINTS\n    BIND (?groupId AS ?class)\n  }\n  OPTIONAL {\n    ?class sf:preferredLanguageLiteral (skos:prefLabel rdfs:label skos:altLabel \'en\' \'\' ?classLabelP) .\n  }\n  FILTER(ISIRI(?class))\n  BIND(COALESCE(?classLabelP,REPLACE(REPLACE(REPLACE(REPLACE(STR(?class),".*/",""),".*#",""),"_"," "),"([A-ZÅÄÖ])"," $1")) AS ?classLabel)\n# ENDGRAPH\n}\n';t.SparqlTreeWorkerService=function(){function e(t){(0,o.default)(this,e),this.fibraSparqlService=t}return e.$inject=["fibraSparqlService"],(0,s.default)(e,[{key:"getTree",value:function(e,t,r){return this.fibraSparqlService.query(e,t,{timeout:r}).then(function(e){var t={},r={};e.results.bindings.forEach(function(e){if(e.classLabel&&(r[e.class.value]=new c.TreeNode(e.class.value,e.classLabel.value)),e.instances&&(r[e.class.value].instances=parseInt(e.instances.value,10)),e.subClass){var n=e.subClass.value;t[n]||(t[n]={}),t[n][e.class.value]=!0}if(e.superClass){var i=e.class.value;t[i]||(t[i]={}),t[i][e.superClass.value]=!0}});var n=[];for(var i in r)if(t[i])for(var o in t[i])r[o].children.push(r[i]);else n.push(r[i]);return n})}}]),e}();l.module("fibra.services.sparql-tree-service",[]).config(["$provide",function(e){e.service("sparqlTreeService",f)}])},function(e,t,r){var n=r(76).Tree,i=r(0),o=r(0);NodeKey=function(e,t){this.subject=e.subject,this.predicate=e.predicate,this.object=e.object,this.graph=e.graph,this.order=t},NodeKey.prototype.comparator=function(e){for(var t=0;t<this.order.length;t++){var r=this.order[t];if(null==e[r])return 0;if(this[r]<e[r])return-1;if(this[r]>e[r])return 1}return 0},Pattern=function(e){this.subject=e.subject,this.predicate=e.predicate,this.object=e.object,this.graph=e.graph,this.indexKey=[],this.keyComponents={};var t=[],r=[],n=this;i.forEach(["subject","predicate","object","graph"],function(e){"string"==typeof n[e]?(r.push(e),n.keyComponents[e]=null):(t.push(e),n.keyComponents[e]=n[e],n.indexKey.push(e))}),this.order=t.concat(r),this.key=new NodeKey(this.keyComponents,this.order)},QuadIndex=function(e,t){0!=arguments&&(this.componentOrder=e.componentOrder,n.call(this,e.order,function(e){e.comparator=function(t,r){for(var n=0;n<e.componentOrder.length;n++){var i=e.componentOrder[n],o=t[i],a=r[i];if(o<a)return-1;if(o>a)return 1}return 0},e.rangeComparator=function(t,r){for(var n=0;n<e.componentOrder.length;n++){var i=e.componentOrder[n];if(null==r[i]||null==t[i])return 0;if(t[i]<r[i])return-1;if(t[i]>r[i])return 1}return 0},t(e)}))},QuadIndex.prototype=i.create(n.prototype,{constructor:n}),QuadIndex.prototype.insert=function(e,t){n.prototype.insert.call(this,e,null,function(e){t(e)})},QuadIndex.prototype.search=function(e,t){n.prototype.search.call(this,e,function(e){t(e)},!0)},QuadIndex.prototype.range=function(e,t){this._rangeTraverse(this,this.root,e,t)},QuadIndex.prototype._rangeTraverse=function(e,t,r,n){var i=r.key,a=[],s=[t];o.whilst(function(){return s.length>0},function(t){for(var r=s.shift(),n=0;n<r.numberActives&&-1===e.rangeComparator(r.keys[n].key,i);)n++;if(!0===r.isLeaf){for(var u=n;u<r.numberActives&&0===e.rangeComparator(r.keys[u].key,i);)a.push(r.keys[u].key),u++;t()}else e._diskRead(r.children[n],function(u){s.push(u);var l=n;o.whilst(function(){return l<r.numberActives&&0===e.rangeComparator(r.keys[l].key,i)},function(t){a.push(r.keys[l].key),l++,e._diskRead(r.children[l],function(e){s.push(e),t()})},function(){t()})})},function(){n(a)})},e.exports={QuadIndex:QuadIndex,Pattern:Pattern,NodeKey:NodeKey}},function(e,t,r){"use strict";(function(t){function r(e,r,n,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick(function(){e.call(null,r)});case 3:return t.nextTick(function(){e.call(null,r,n)});case 4:return t.nextTick(function(){e.call(null,r,n,i)});default:for(o=new Array(s-1),a=0;a<o.length;)o[a++]=arguments[a];return t.nextTick(function(){e.apply(null,o)})}}!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports=r:e.exports=t.nextTick}).call(t,r(12))},function(e,t,r){function n(e,t){this._id=e,this._clearFn=t}var i=Function.prototype.apply;t.setTimeout=function(){return new n(i.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new n(i.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},r(231),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.StateWorkerService=t.WorkerWorkerService=t.WorkerService=t.WorkerServiceConfiguration=void 0;var i=r(137),o=n(i),a=r(34),s=n(a),u=r(8),l=n(u),c=r(64),f=n(c),p=r(3),d=n(p),h=r(1),v=n(h),y=r(9),g=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(y);r(99);var b=r(174),m=(t.WorkerServiceConfiguration=function e(t,r,n){(0,v.default)(this,e),this.appName=t,this.workerThreads=r,this.importScripts=n},t.WorkerService=function(){function e(t,r,n,i,o,a){var s=this;(0,v.default)(this,e),this.workerServicePrototypeMappingConfiguration=r,this.$q=o,this.$ngRedux=a,this.currentWorker=0,this.deferreds=[],this.oldState=new b.BackendRootState,a.subscribe(function(){var t=(0,b.convertToBackendState)(s.$ngRedux.getState(),s.oldState);null!==t&&(s.oldState=t,e.savePrototypes(t),s.callAll("stateWorkerService","setState",[t]))});var u=i.location.protocol+"//"+i.location.host,l=t.importScripts.map(function(e){return 0!==e.indexOf("http")?u+(0!==e.indexOf("/")?i.location.pathname:"")+e:e}),c=i.URL.createObjectURL(new Blob([e.workerTemplate.replace(/<APP_NAME>/g,t.appName).replace(/<IMPORT_SCRIPTS>/g,l.join("','"))],{type:"application/javascript"}));this.workers=[];for(var f=0;f<t.workerThreads;f++)this.workers.push(new Worker(c)),this.workers[f].addEventListener("message",function(e){var t=e.data.event;if("broadcast"===t)n.$broadcast(e.data.name,s.restorePrototypes(e.data.args)),n.$apply();else{var r=s.deferreds[e.data.id];r&&("success"===t?(delete s.deferreds[e.data.id],r.resolve(s.restorePrototypes(e.data.data))):"failure"===t?(delete s.deferreds[e.data.id],r.reject(s.restorePrototypes(e.data.data))):r.notify(s.restorePrototypes(e.data.data)))}})}return e.$inject=["workerServiceConfiguration","workerServicePrototypeMappingConfiguration","$rootScope","$window","$q","$ngRedux"],(0,d.default)(e,[{key:"$broadcast",value:function(t,r){this.workers.forEach(function(n){return n.postMessage({name:t,args:e.savePrototypes(r)})})}},{key:"callAll",value:function(t,r){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments[3],a=this.$q.defer();this.deferreds.push(a);var s=this.deferreds.length-1,u={id:s,service:t,method:r,args:e.savePrototypes(i)};return o&&o.then(function(){n.workers.forEach(function(e){return e.postMessage({id:s,cancel:!0})}),delete n.deferreds[s]}),this.workers.forEach(function(e){return e.postMessage(u)}),a.promise}},{key:"call",value:function(t,r){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments[3],a=this.$q.defer();this.deferreds.push(a);var s=this.deferreds.length-1,u=this.workers[this.currentWorker];return this.currentWorker=(this.currentWorker+1)%this.workers.length,o&&o.then(function(){u.postMessage({id:s,cancel:!0}),delete n.deferreds[s]}),u.postMessage({id:s,service:t,method:r,args:e.savePrototypes(i)}),a.promise}},{key:"restorePrototypes",value:function(t){return this.restorePrototypesInternal(t),e.stripMarks(t),t}},{key:"restorePrototypesInternal",value:function(e){var t=this;if(e&&!e.__mark&&"object"===(void 0===e?"undefined":(0,f.default)(e)))if(e.__mark=!0,e instanceof Array)e.forEach(function(e){return t.restorePrototypesInternal(e)});else{if(e.__className){var r=this.workerServicePrototypeMappingConfiguration[e.__className];if(!r)throw"Unknown prototype "+e.__className;e.__proto__=r,delete e.__className}for(var n in e)e.hasOwnProperty(n)&&this.restorePrototypesInternal(e[n])}}}],[{key:"stripMarks",value:function(t){if(t&&t.__mark&&"object"===(void 0===t?"undefined":(0,f.default)(t)))if(delete t.__mark,t instanceof Array)t.forEach(function(t){return e.stripMarks(t)});else for(var r in t)t.hasOwnProperty(r)&&e.stripMarks(t[r])}},{key:"stripPrototypes",value:function(t){if(t&&t.__className&&"object"===(void 0===t?"undefined":(0,f.default)(t)))if(delete t.__className,t instanceof Array)t.forEach(function(t){return e.stripPrototypes(t)});else for(var r in t)t.hasOwnProperty(r)&&e.stripPrototypes(t[r])}},{key:"savePrototypes",value:function(t){return e.stripPrototypes(t),this.savePrototypesInternal(t),t}},{key:"savePrototypesInternal",value:function(t){if(t&&!t.__className&&"object"===(void 0===t?"undefined":(0,f.default)(t)))if(t instanceof Array)t.forEach(function(t){return e.savePrototypesInternal(t)});else{if(t.constructor.__name||"Object"!==t.constructor.name){var r=(0,l.default)(t);e:for(;r!==Object.prototype;){var n=!0,i=!1,a=void 0;try{for(var u,c=(0,s.default)((0,o.default)(r));!(n=(u=c.next()).done);n=!0){var p=u.value;if("constructor"!==p&&"function"==typeof t.__proto__[p]){t.__className=t.constructor.__name?t.constructor.__name:t.constructor.name;break e}}}catch(e){i=!0,a=e}finally{try{!n&&c.return&&c.return()}finally{if(i)throw a}}r=(0,l.default)(r)}t.__className||(t.__className="Object")}for(var d in t)t.hasOwnProperty(d)&&e.savePrototypesInternal(t[d])}}}]),e}());m.workerTemplate="\n    var window = self\n    window.history = {}\n    window.Node = function () {}\n    //self.setImmediate = function(fn) { return window.setTimeout(fn, 0) }\n    window.document = {\n      readyState: 'complete',\n      cookie: '',\n      querySelector: function (selector) {\n        if (selector=='html') return { innerHTML: '', getAttribute: function() {}} // angular-hot-loader patch\n      },\n      addEventListener: function() {},\n      createElement: function() {\n        return {\n          pathname: '',\n          setAttribute: function(key, value) {}\n        };\n      },\n    };\n    importScripts('<IMPORT_SCRIPTS>')\n    window.angular.module('<APP_NAME>').run(['workerWorkerService', function(workerWorkerService) {\n      self.addEventListener('message', function(e) { workerWorkerService.onMessage(e.data) })\n    }])\n    window.angular.bootstrap(null, ['<APP_NAME>'])\n    window = undefined\n    self.history = undefined\n    self.Node = undefined\n    setTimeout(function() { // angular init needs this\n      self.document = undefined\n    }, 0)\n  ";var _=t.WorkerWorkerService=function(){function e(t,r,n,i){(0,v.default)(this,e),this.workerServicePrototypeMappingConfiguration=t,this.$injector=r,this.$q=n,this.$rootScope=i,this.cancellers=[]}return e.$inject=["workerServicePrototypeMappingConfiguration","$injector","$q","$rootScope"],(0,d.default)(e,[{key:"$broadcast",value:function(e,t){try{self.postMessage({event:"broadcast",name:e,args:m.savePrototypes(t)})}catch(e){throw console.log(t,e),e}}},{key:"onMessage",value:function(t){var r=this;if(void 0===t.id)this.$rootScope.$broadcast(t.name,this.restorePrototypes(t.args)),this.$rootScope.$apply();else if(t.cancel){var n=this.cancellers[t.id];delete this.cancellers[t.id],n&&n.resolve()}else{var i=this.$injector.get(t.service),o=this.$q.defer();this.cancellers[t.id]=o;var a=i[t.method].apply(i,this.restorePrototypes(t.args).concat(o.promise));if(!a||!a.then){var s=this.$q.defer();s.resolve(a),a=s.promise}a.then(function(e){delete r.cancellers[t.id],self.postMessage({event:"success",id:t.id,data:m.savePrototypes(e)})},function(n){if(delete r.cancellers[t.id],n instanceof Error)throw self.postMessage({event:"failure",id:t.id,data:{name:n.name,message:n.message,stack:n.stack}}),n;self.postMessage({event:"failure",id:t.id,data:m.savePrototypes(e.stripFunctions(n))})},function(e){return self.postMessage({event:"update",id:t.id,data:m.savePrototypes(e)})})}}},{key:"restorePrototypes",value:function(e){return this.restorePrototypesInternal(e),m.stripMarks(e),e}},{key:"restorePrototypesInternal",value:function(e){var t=this;if(e&&!e.__mark&&"object"===(void 0===e?"undefined":(0,f.default)(e)))if(e.__mark=!0,e instanceof Array)e.forEach(function(e){return t.restorePrototypesInternal(e)});else{if(e.__className){var r=this.workerServicePrototypeMappingConfiguration[e.__className];if(!r)throw"Unknown prototype "+e.__className;e.__proto__=r,delete e.__className}for(var n in e)e.hasOwnProperty(n)&&this.restorePrototypesInternal(e[n])}}}],[{key:"stripFunctions",value:function(t){var r={};for(var n in t)"object"===(0,f.default)(t[n])?r[n]=e.stripFunctions(t[n]):"function"!=typeof t[n]&&(r[n]=t[n]);return r}}]),e}(),E=t.StateWorkerService=function(){function e(){(0,v.default)(this,e)}return(0,d.default)(e,[{key:"setState",value:function(e){this.state=e}}]),e}();g.module("fibra.services.worker-service",["fibra.services.worker-service-prototype-mapping-configuration"]).config(["$provide",function(e){e.service("stateWorkerService",E),e.service("workerService",m),e.service("workerWorkerService",_)}])},function(e,t,r){var n=r(10),i=r(2),o=r(27);e.exports=function(e,t){var r=(i.Object||{})[e]||Object[e],a={};a[e]=t(r),n(n.S+n.F*o(function(){r(1)}),"Object",a)}},function(e,t,r){var n=r(20),i=r(4).document,o=n(i)&&n(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,r){var n=r(20);e.exports=function(e,t){if(!n(e))return e;var r,i;if(t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;if("function"==typeof(r=e.valueOf)&&!n(i=r.call(e)))return i;if(!t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){var r=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:r)(e)}},function(e,t,r){var n=r(58)("keys"),i=r(41);e.exports=function(e){return n[e]||(n[e]=i(e))}},function(e,t,r){var n=r(4),i=n["__core-js_shared__"]||(n["__core-js_shared__"]={});e.exports=function(e){return i[e]||(i[e]={})}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,r){r(143);for(var n=r(4),i=r(19),o=r(35),a=r(5)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<s.length;u++){var l=s[u],c=n[l],f=c&&c.prototype;f&&!f[a]&&i(f,a,l),o[l]=o.Array}},function(e,t,r){var n=r(11),i=r(147),o=r(59),a=r(57)("IE_PROTO"),s=function(){},u=function(){var e,t=r(53)("iframe"),n=o.length;for(t.style.display="none",r(93).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;n--;)delete u.prototype[o[n]];return u()};e.exports=Object.create||function(e,t){var r;return null!==e?(s.prototype=n(e),r=new s,s.prototype=null,r[a]=e):r=u(),void 0===t?r:i(r,t)}},function(e,t,r){var n=r(55);e.exports=function(e){return Object(n(e))}},function(e,t,r){"use strict";var n=r(148)(!0);r(91)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})})},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=r(152),o=n(i),a=r(154),s=n(a),u="function"==typeof s.default&&"symbol"==typeof o.default?function(e){return typeof e}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":typeof e};t.default="function"==typeof s.default&&"symbol"===u(o.default)?function(e){return void 0===e?"undefined":u(e)}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":void 0===e?"undefined":u(e)}},function(e,t,r){t.f=r(5)},function(e,t,r){var n=r(4),i=r(2),o=r(42),a=r(65),s=r(15).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,r){var n=r(45),i=r(40),o=r(21),a=r(54),s=r(22),u=r(85),l=Object.getOwnPropertyDescriptor;t.f=r(16)?l:function(e,t){if(e=o(e),t=a(t,!0),u)try{return l(e,t)}catch(e){}if(s(e,t))return i(!n.f.call(e,t),e[t])}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.PrunedRichNodeFromNode=t.RichNodeFromRichNode=t.FullRichNodeFromNode=void 0;var i=r(8),o=n(i),a=r(1),s=n(a),u=r(13),l=n(u),c=r(14),f=n(c),p=r(6);t.FullRichNodeFromNode=function(e){function t(e,r,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];(0,s.default)(this,t);var u=(0,l.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return u.label=r,u.description=n,u.types=i,u.sourceEndpoints=a,u}return(0,f.default)(t,e),t}(p.NodeFromNode),t.RichNodeFromRichNode=function(e){function t(e){(0,s.default)(this,t);var r=(0,l.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return r.label=e.label,r.description=e.description,r.types=e.types,r.sourceEndpoints=e.sourceEndpoints,r}return(0,f.default)(t,e),t}(p.NodeFromNode),t.PrunedRichNodeFromNode=function(e){function t(e){return(0,s.default)(this,t),(0,l.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e))}return(0,f.default)(t,e),t}(p.NodeFromNode)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.TreeComponent=t.TreeNode=void 0;var i=r(34),o=n(i),a=r(1),s=n(a),u=r(3),l=n(u);t.TreeNode=function(){function e(t,r){(0,s.default)(this,e),this.id=t,this.label=r,this.children=[],this.selected=!0,this.open=!0}return(0,l.default)(e,[{key:"cloneWithoutChildren",value:function(){var t=new e(this.id,this.label);return t.instances=this.instances,t.matchingInstances=this.matchingInstances,t.selected=this.selected,t.open=this.open,t}}],[{key:"recursivelyProcess",value:function(t,r){r(t),t.children.forEach(function(t){return e.recursivelyProcess(t,r)})}},{key:"filter",value:function(e,t){var r=e.cloneWithoutChildren(),n=!0,i=!1,a=void 0;try{for(var s,u=(0,o.default)(e.children);!(n=(s=u.next()).done);n=!0){var l=s.value;t(l)&&r.children.push(l)}}catch(e){i=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw a}}return r}},{key:"recursivelyMap",value:function(t,r){var n=[],i=!0,a=!1,s=void 0;try{for(var u,l=(0,o.default)(t.children);!(i=(u=l.next()).done);i=!0){var c=u.value;n=n.concat(e.recursivelyMap(c,r))}}catch(e){a=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(a)throw s}}return r(t,n)}}]),e}(),t.TreeComponent=function e(){(0,s.default)(this,e),this.bindings={tree:"<",onSelect:"&"},this.templateUrl="components/tree/tree.html"}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.PrimaryEndpointConfiguration=void 0;var i=r(8),o=n(i),a=r(1),s=n(a),u=r(3),l=n(u),c=r(13),f=n(c),p=r(36),d=n(p),h=r(14),v=n(h),y=r(28),g=r(46),b=r(24),m=r(47),_=r(29),E=r(6),k=r(23),w=t.PrimaryEndpointConfiguration=function(e){function t(){(0,s.default)(this,t);var e=(0,f.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments));return e.compatibleEndpoints=[],e.autocompletionQuery=g.SparqlAutocompleteService.defaultMatchQuery,e.itemQuery=b.SparqlItemService.getLocalItemPropertiesQuery,e.deleteItemQuery=b.SparqlItemService.deleteItemQuery,e.treeQuery=m.SparqlTreeService.getClassTreeQuery,e.classQuery=_.DataModel.classQuery,e.propertyQuery=_.DataModel.propertyQuery,e}return(0,v.default)(t,e),(0,l.default)(t,[{key:"toTurtle",value:function(e,r){if(!e.has(this.id)){r.fibra=E.FIBRA.ns,e.set(this.id,"<"+this.id+"> a fibra:PrimaryEndpointConfiguration ;"),(0,d.default)(t.prototype.__proto__||(0,o.default)(t.prototype),"toTurtle",this).call(this,e,r);var n=e.get(this.id),i=this.compatibleEndpoints.filter(function(e){return e});0!==i.length&&(n+="\nfibra:compatibleEndpoint ",i.forEach(function(e){return n=n+"<"+e+">, "}),n=n.substring(0,n.length-2)+" ;"),n=n+"\nfibra:autocompletionQuery "+k.SparqlService.stringToSPARQLString(this.autocompletionQuery)+" ;\nfibra:treeQuery "+k.SparqlService.stringToSPARQLString(this.treeQuery)+" ;\nfibra:propertyQuery "+k.SparqlService.stringToSPARQLString(this.propertyQuery)+" ;\nfibra:classQuery "+k.SparqlService.stringToSPARQLString(this.classQuery)+" ;\nfibra:itemQuery "+k.SparqlService.stringToSPARQLString(this.itemQuery)+" ;\nfibra:deleteItemQuery "+k.SparqlService.stringToSPARQLString(this.deleteItemQuery)+" .",e.set(this.id,n)}}},{key:"copyToProject",value:function(e){var t=this.autocompletionQuery;t=e.graph?t.replace(/# STARTGRAPH/g,"GRAPH <"+e.graph+"> {").replace(/# ENDGRAPH/g,"}"):t.replace(/.*# STARTGRAPH\n/g,"").replace(/.*# ENDGRAPH\n/g,""),e.autocompletionQuery=t,t=this.itemQuery,t=e.graph?t.replace(/# STARTGRAPH/g,"GRAPH <"+e.graph+"> {").replace(/# ENDGRAPH/g,"}"):t.replace(/.*# STARTGRAPH\n/g,"").replace(/.*# ENDGRAPH\n/g,""),e.itemQuery=t,t=this.deleteItemQuery,t=e.graph?t.replace(/# STARTGRAPH/g,"GRAPH <"+e.graph+"> {").replace(/# ENDGRAPH/g,"}"):t.replace(/.*# STARTGRAPH\n/g,"").replace(/.*# ENDGRAPH\n/g,""),e.deleteItemQuery=t,t=this.treeQuery,t=e.graph?t.replace(/# STARTGRAPH/g,"GRAPH <"+e.graph+"> {").replace(/# ENDGRAPH/g,"}"):t.replace(/.*# STARTGRAPH\n/g,"").replace(/.*# ENDGRAPH\n/g,""),e.treeQuery=t,t=this.propertyQuery,t=e.graph?t.replace(/# STARTGRAPH/g,"GRAPH <"+e.graph+"> {").replace(/# ENDGRAPH/g,"}"):t.replace(/.*# STARTGRAPH\n/g,"").replace(/.*# ENDGRAPH\n/g,""),e.propertyQuery=t,t=this.classQuery,t=e.graph?t.replace(/# STARTGRAPH/g,"GRAPH <"+e.graph+"> {").replace(/# ENDGRAPH/g,"}"):t.replace(/.*# STARTGRAPH\n/g,"").replace(/.*# ENDGRAPH\n/g,""),e.classQuery=t}}]),t}(y.Citable);w.listPrimaryEndpointConfigurationsQuery="PREFIX fibra: <http://hdlab.stanford.edu/fibra/ontology#>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX dcterms: <http://purl.org/dc/terms/>\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nSELECT ?id ?labels ?descriptions ?compatibleEndpoints ?rightsHolders ?rightsHolders_labels ?rightsHolders_descriptions ?rightsHolders_url ?rightsHolders_order ?url ?autocompletionQuery ?itemQuery ?deleteItemQuery ?treeQuery ?properyQuery ?classQuery {\n# STARTGRAPH\n  ?id a fibra:PrimaryEndpointConfiguration .\n  { ?id skos:prefLabel ?labels }\n  UNION\n  { ?id dcterms:description ?descriptions }\n  UNION\n  { ?id fibra:compatibleEndpoint ?compatibleEndpoints }\n  UNION\n  {\n    ?id fibra:autocompletionQuery ?autocompletionQuery .\n    ?id fibra:itemQuery ?itemQuery .\n    ?id fibra:deleteItemQuery ?deleteItemQuery .\n    ?id fibra:treeQuery ?treeQuery .\n    ?id fibra:propertyQuery ?propertyQuery .\n    ?id fibra:classQuery ?classQuery .\n    OPTIONAL { ?id foaf:homepage ?url }\n  } UNION {\n    {\n      ?id dcterms:rightsHolder ?rightsHolders\n    } UNION {\n      ?id fibra:qualifiedAssertion ?qa .\n      ?qa rdf:predicate dcterms:rightsHolder .\n      ?qa rdf:object ?rightsHolders .\n      OPTIONAL { ?qa fibra:order ?rightsHolders_order }\n    }\n    {\n      ?rightsHolders skos:prefLabel ?rightsHolders_labels\n    } UNION {\n      ?rightsHolders foaf:homepage ?rightsHolders_url\n    } UNION {\n      ?rightsHolders dcterms:description ?rightsHolders_descriptions\n    }\n  }\n# ENDGRAPH\n}",w.primaryEndpointConfigurationQuery="PREFIX fibra: <http://hdlab.stanford.edu/fibra/ontology#>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX dcterms: <http://purl.org/dc/terms/>\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nSELECT ?labels ?descriptions ?compatibleEndpoints ?rightsHolders ?rightsHolders_labels ?rightsHolders_descriptions ?rightsHolders_url ?rightsHolders_order ?url ?autocompletionQuery ?itemQuery ?deleteItemQuery ?treeQuery ?properyQuery ?classQuery {\n# STARTGRAPH\n  { <ID> skos:prefLabel ?labels }\n  UNION\n  { <ID> dcterms:description ?descriptions }\n  UNION\n  { <ID> fibra:compatibleEndpoint ?compatibleEndpoints }\n  UNION\n  {\n    <ID> fibra:autocompletionQuery ?autocompletionQuery .\n    <ID> fibra:itemQuery ?itemQuery .\n    <ID> fibra:deleteItemQuery ?deleteItemQuery .\n    <ID> fibra:treeQuery ?treeQuery .\n    <ID> fibra:propertyQuery ?propertyQuery .\n    <ID> fibra:classQuery ?classQuery .\n    OPTIONAL { <ID> foaf:homepage ?url }\n  } UNION {\n    {\n      <ID> dcterms:rightsHolder ?rightsHolders\n    } UNION {\n      <ID> fibra:qualifiedAssertion ?qa .\n      <ID> rdf:predicate dcterms:rightsHolder .\n      <ID> rdf:object ?rightsHolders .\n      OPTIONAL { <ID> fibra:order ?rightsHolders_order }\n    }\n    {\n      ?rightsHolders skos:prefLabel ?rightsHolders_labels\n    } UNION {\n      ?rightsHolders foaf:homepage ?rightsHolders_url\n    } UNION {\n      ?rightsHolders dcterms:description ?rightsHolders_descriptions\n    }\n  }\n# ENDGRAPH\n}"},function(e,t,r){e.exports={default:r(202),__esModule:!0}},function(e,t,r){"use strict";function n(e){var t,r;this.promise=new e(function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n}),this.resolve=i(t),this.reject=i(r)}var i=r(39);e.exports.f=function(e){return new n(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ADD_ITEM_TO_ITEM_STATE=t.CLEAR_ACTIVE_STATE=t.SET_ACTIVE_DIVIDER_PERCENTAGE=t.ADD_ITEM_TO_CURRENT_LAYOUT=void 0;var n=r(72),i=function(e){return e&&e.__esModule?e:{default:e}}(n),o=t.ADD_ITEM_TO_CURRENT_LAYOUT="ADD_ITEM_TO_CURRENT_LAYOUT",a=t.SET_ACTIVE_DIVIDER_PERCENTAGE="SET_ACTIVE_DIVIDER_PERCENTAGE",s=(t.CLEAR_ACTIVE_STATE="CLEAR_ACTIVE_STATE",t.ADD_ITEM_TO_ITEM_STATE="ADD_ITEM_TO_ITEM_STATE");t.default={addItemToCurrentLayout:function(e,t){return function(r){return t.getItem(e.ids[0],!0).then(function(t){r({type:s,payload:{itemState:e,fullItem:t}})}),i.default.resolve(r({type:o,payload:e}))}},setActiveDividerPercentage:function(e){return function(t){return i.default.resolve(t({type:a,payload:e}))}}}},function(e,t,r){function n(e,t){this.name="NonSupportedSparqlFeatureError",this.feature=e,this.message=t||"SPARQL feature "+e+" non supported"}function i(e){this.name=ParserError,this.message=e||"Error parsing SPARQL query"}var o=r(221),a=r(0),s=a;n.prototype=new Error,n.constructor=n,i.prototype=new Error,i.constructor=i,AbstractQueryTree=function(){},AbstractQueryTree.prototype.parseQueryString=function(e){return o.parse(e)},AbstractQueryTree.prototype.parseExecutableUnit=function(e){if("select"===e.kind)return this.parseSelect(e);if("ask"===e.kind)return this.parseSelect(e);if("modify"===e.kind)return this.parseSelect(e);if("construct"===e.kind)return this.parseSelect(e);if("insertdata"===e.kind)return this.parseInsertData(e);if("deletedata"===e.kind)return this.parseInsertData(e);if("load"===e.kind)return e;if("clear"===e.kind)return e;if("drop"===e.kind)return e;if("create"===e.kind)return e;throw new Error("unknown executable unit: "+e.kind)},AbstractQueryTree.prototype.parseSelect=function(e){if(null==e)return console.log("error parsing query"),null;var t={freshCounter:0};return e.pattern=this.build(e.pattern,t),e},AbstractQueryTree.prototype.parseInsertData=function(e){return null==e?(console.log("error parsing query"),null):e},AbstractQueryTree.prototype.build=function(e,t){if("groupgraphpattern"===e.token)return this._buildGroupGraphPattern(e,t);if("basicgraphpattern"===e.token){var r={kind:"BGP",value:e.triplesContext};return r=AbstractQueryTree.translatePathExpressionsInBGP(r,t)}if("graphunionpattern"===e.token){return{kind:"UNION",value:[this.build(e.value[0],t),this.build(e.value[1],t)]}}if("graphgraphpattern"===e.token){return{kind:"GRAPH",value:this.build(e.value,t),graph:e.graph}}throw null!=e.token?new n(e.token,"Non implemented SPARQL graph pattern: '"+e.token+"'"):new i("Error parsing graph pattern: '"+JSON.stringify(e)+"'")},AbstractQueryTree.translatePathExpressionsInBGP=function(e,t){for(var r,n,i,o=[],a=0;a<e.value.length;a++)if(e.value[a].predicate&&"path"===e.value[a].predicate.token){r=e.value[a],n=e.value.slice(a+1);var u=AbstractQueryTree.translatePathExpression(r,t),l=null;if("BGP"!==u.kind){if("ZERO_OR_MORE_PATH"===u.kind||"ONE_OR_MORE_PATH"===u.kind){if(i=o.length>0?{kind:"JOIN",lvalue:{kind:"BGP",value:o},rvalue:u}:u,"ZERO_OR_MORE_PATH"===u.kind)if("var"===u.y.token&&0===u.y.value.indexOf("fresh:")&&"var"===u.x.token&&0===u.x.value.indexOf("fresh:"))for(var c=0;c<e.value.length;c++)e.value[c].object&&"var"===e.value[c].object.token&&e.value[c].object.value===u.x.value&&(l=s.clone(e.value[c],!0),l.object=u.y);else if("var"===u.y.token&&0===u.y.value.indexOf("fresh:"))for(var c=0;c<e.value.length;c++)e.value[c].subject&&"var"===e.value[c].subject.token&&e.value[c].subject.value===u.y.value&&(l=s.clone(e.value[c],!0),l.subject=u.x);if(n.length>0){var f=AbstractQueryTree.translatePathExpressionsInBGP({kind:"BGP",value:n},t);if(null!=l){var p=o.concat([l]).concat(n);return{kind:"UNION",value:[{kind:"JOIN",lvalue:i,rvalue:f},{kind:"BGP",value:p}]}}return{kind:"JOIN",lvalue:i,rvalue:f}}return i}return u}o=o.concat(u.value)}else o.push(e.value[a]);return e.value=o,e},AbstractQueryTree.translatePathExpression=function(e,t){if("element"===e.predicate.kind){if("+"===e.predicate.modifier){e.predicate.modifier=null;var r=AbstractQueryTree.translatePathExpression(e,t);return{kind:"ONE_OR_MORE_PATH",path:r,x:e.subject,y:e.object}}if("*"===e.predicate.modifier){e.predicate.modifier=null;var r=AbstractQueryTree.translatePathExpression(e,t);return{kind:"ZERO_OR_MORE_PATH",path:r,x:e.subject,y:e.object}}return e.predicate=e.predicate.value,{kind:"BGP",value:[e]}}if("sequence"===e.predicate.kind){for(var i,o,a=e.subject,u=e.object,l=e.graph,c=[],f=0;f<e.predicate.value.length;f++)f!=e.predicate.value.length-1?(i={token:"var",value:"fresh:"+t.freshCounter},t.freshCounter++):i=u,o={subject:a,predicate:e.predicate.value[f],object:i},null!=l&&(o.graph=s.clone(l,!0)),c.push(o),f!=e.predicate.value.length-1&&(a=s.clone(i,!0));var p={kind:"BGP",value:c};return AbstractQueryTree.translatePathExpressionsInBGP(p,t)}throw new n("Non supported path expression "+e.predicate.kind)},AbstractQueryTree.prototype._buildGroupGraphPattern=function(e,t){for(var r=e.filters||[],n=e.binds||[],i={kind:"EMPTY_PATTERN"},o=0;o<e.patterns.length;o++){var a=e.patterns[o];if("optionalgraphpattern"===a.token){var s=this.build(a.value,t);i="FILTER"===s.kind?{kind:"LEFT_JOIN",lvalue:i,rvalue:s.value,filter:s.filter}:{kind:"LEFT_JOIN",lvalue:i,rvalue:s,filter:!0}}else{var s=this.build(a,t);i="EMPTY_PATTERN"==i.kind?s:{kind:"JOIN",lvalue:i,rvalue:s}}}if(i.binds=n,0!=r.length){if("EMPTY_PATTERN"===i.kind)return{kind:"FILTER",filter:r,value:i};if("LEFT_JOIN"===i.kind&&!0===i.filter)return{kind:"FILTER",filter:r,value:i};if("LEFT_JOIN"===i.kind)return{kind:"FILTER",filter:r,value:i};if("JOIN"===i.kind)return{kind:"FILTER",filter:r,value:i};if("UNION"===i.kind)return{kind:"FILTER",filter:r,value:i};if("GRAPH"===i.kind)return{kind:"FILTER",filter:r,value:i};if("BGP"===i.kind)return{kind:"FILTER",filter:r,value:i};throw new Error("Unknow kind of algebra expression: "+i.kind)}return i},AbstractQueryTree.prototype.collectBasicTriples=function(e,t){if(null==t&&(t=[]),"select"===e.kind)t=this.collectBasicTriples(e.pattern,t);else if("BGP"===e.kind)t=t.concat(e.value);else if("ZERO_OR_MORE_PATH"===e.kind)t=this.collectBasicTriples(e.path);else if("UNION"===e.kind)t=this.collectBasicTriples(e.value[0],t),t=this.collectBasicTriples(e.value[1],t);else if("GRAPH"===e.kind)t=this.collectBasicTriples(e.value,t);else if("LEFT_JOIN"===e.kind||"JOIN"===e.kind)t=this.collectBasicTriples(e.lvalue,t),t=this.collectBasicTriples(e.rvalue,t);else if("FILTER"===e.kind)t=this.collectBasicTriples(e.value,t);else if("construct"===e.kind)t=this.collectBasicTriples(e.pattern,t);else if("EMPTY_PATTERN"!==e.kind)throw"Unknown pattern: "+e.kind;return t},AbstractQueryTree.prototype.bind=function(e,t){if(null!=e.graph&&e.graph.token&&"var"===e.graph.token&&null!=t[e.graph.value]&&(e.graph=t[e.graph.value]),null!=e.filter){for(var r=[],n=0;n<e.filter.length;n++)e.filter[n].value=this._bindFilter(e.filter[n].value,t),r.push(e.filter[n]);e.filter=r}if("select"===e.kind)e.pattern=this.bind(e.pattern,t);else if("BGP"===e.kind)e.value=this._bindTripleContext(e.value,t);else if("ZERO_OR_MORE_PATH"===e.kind)e.path=this._bindTripleContext(e.path,t),e.x&&"var"===e.x.token&&null!=t[e.x.value]&&(e.x=t[e.x.value]),e.y&&"var"===e.y.token&&null!=t[e.y.value]&&(e.y=t[e.y.value]);else if("UNION"===e.kind)e.value[0]=this.bind(e.value[0],t),e.value[1]=this.bind(e.value[1],t);else if("GRAPH"===e.kind)e.value=this.bind(e.value,t);else if("LEFT_JOIN"===e.kind||"JOIN"===e.kind)e.lvalue=this.bind(e.lvalue,t),e.rvalue=this.bind(e.rvalue,t);else if("FILTER"===e.kind){var i=this;e.value=this.bind(e.value,t),e.filter=e.filter.map(function(e){return{token:"filter",value:i._bindFilter(e.value,t)}})}else if("EMPTY_PATTERN"!==e.kind)throw"Unknown pattern: "+e.kind;return e},AbstractQueryTree.prototype._bindTripleContext=function(e,t){for(var r=0;r<e.length;r++){delete e[r].graph,delete e[r].variables;for(var n in e[r]){var i=e[r][n];"var"===i.token&&null!=t[i.value]&&(e[r][n]=t[i.value])}}return e},AbstractQueryTree.prototype._bindFilter=function(e,t){if(null!=e.expressionType){var r=e.expressionType;if("relationalexpression"==r)e.op1=this._bindFilter(e.op1,t),e.op2=this._bindFilter(e.op2,t);else if("conditionalor"==r||"conditionaland"==r)for(var n=0;n<e.operands.length;n++)e.operands[n]=this._bindFilter(e.operands[n],t);else if("additiveexpression"==r){e.summand=this._bindFilter(e.summand,t);for(var n=0;n<e.summands.length;n++)e.summands[n].expression=this._bindFilter(e.summands[n].expression,t)}else if("builtincall"==r)for(var n=0;n<e.args.length;n++)e.args[n]=this._bindFilter(e.args[n],t);else if("multiplicativeexpression"==r){e.factor=this._bindFilter(e.factor,t);for(var n=0;n<e.factors.length;n++)e.factors[n].expression=this._bindFilter(e.factors[n].expression,t)}else if("unaryexpression"==r)e.expression=this._bindFilter(e.expression,t);else if("irireforfunction"==r)for(var n=0;n<e.factors.args;n++)e.args[n]=this._bindFilter(e.args[n],t);else if("atomic"==r&&"var"==e.primaryexpression&&null!=t[e.value.value]){var i=t[e.value.value];"uri"===i.token?e.primaryexpression="iri":e.primaryexpression="literal",e.value=i}}return e},AbstractQueryTree.prototype.replace=function(e,t,r,n){if(null!=e.graph&&e.graph.token&&e.graph.token===t.token&&e.graph.value==t.value&&(e.graph=s.clone(r,!0)),null!=e.filter){for(var i=[],o=0;o<e.filter.length;o++)e.filter[o].value=this._replaceFilter(e.filter[o].value,t,r,n),i.push(e.filter[o]);e.filter=i}if("select"===e.kind)e.pattern=this.replace(e.pattern,t,r,n);else if("BGP"===e.kind)e.value=this._replaceTripleContext(e.value,t,r,n);else if("ZERO_OR_MORE_PATH"===e.kind)e.path=this._replaceTripleContext(e.path,t,r,n),e.x&&e.x.token===t.token&&e.value===t.value&&(e.x=s.clone(r,!0)),e.y&&e.y.token===t.token&&e.value===t.value&&(e.y=s.clone(r,!0));else if("UNION"===e.kind)e.value[0]=this.replace(e.value[0],t,r,n),e.value[1]=this.replace(e.value[1],t,r,n);else if("GRAPH"===e.kind)e.value=this.replace(e.value,t,r);else if("LEFT_JOIN"===e.kind||"JOIN"===e.kind)e.lvalue=this.replace(e.lvalue,t,r,n),e.rvalue=this.replace(e.rvalue,t,r,n);else if("FILTER"===e.kind)e.value=this._replaceFilter(e.value,t,r,n);else if("EMPTY_PATTERN"!==e.kind)throw"Unknown pattern: "+e.kind;return e},AbstractQueryTree.prototype._replaceTripleContext=function(e,t,r,n){for(var i=0;i<e.length;i++)for(var o in e[i]){var s=e[i][o];"var"===s.token&&"var"===t.token&&s.value===t.value?e[i][o]=r:"blank"===s.token&&"blank"===t.token&&s.value===t.value?e[i][o]=r:"literal"!==s.token&&"uri"!==s.token||"literal"!==t.token&&"uri"!==t.token||s.token!==t.token||a.lexicalFormTerm(s,n)[s.token]!==a.lexicalFormTerm(t,n)[s.token]||(e[i][o]=r)}return e},AbstractQueryTree.prototype._replaceFilter=function(e,t,r,n){if(null!=e.expressionType){var i=e.expressionType;if("relationalexpression"==i)e.op1=this._replaceFilter(e.op1,t,r,n),e.op2=this._replaceFilter(e.op2,t,r,n);else if("conditionalor"==i||"conditionaland"==i)for(var o=0;o<e.operands.length;o++)e.operands[o]=this._replaceFilter(e.operands[o],t,r,n);else if("additiveexpression"==i){e.summand=this._replaceFilter(e.summand,t,r,n);for(var o=0;o<e.summands.length;o++)e.summands[o].expression=this._replaceFilter(e.summands[o].expression,t,r,n)}else if("builtincall"==i)for(var o=0;o<e.args.length;o++)e.args[o]=this._replaceFilter(e.args[o],t,r,n);else if("multiplicativeexpression"==i){e.factor=this._replaceFilter(e.factor,t,r,n);for(var o=0;o<e.factors.length;o++)e.factors[o].expression=this._replaceFilter(e.factors[o].expression,t,r,n)}else if("unaryexpression"==i)e.expression=this._replaceFilter(e.expression,t,r,n);else if("irireforfunction"==i)for(var o=0;o<e.factors.args;o++)e.args[o]=this._replaceFilter(e.args[o],t,r,n);else if("atomic"==i){var a=null;e.primaryexpression==t.token&&e.value==t.value?a=r.value:"iri"==e.primaryexpression&&"uri"==t.token&&e.value==t.value&&(a=r.value),null!=a&&("uri"===r.token?e.primaryexpression="iri":e.primaryexpression=r.token,e.value=a)}}return e},AbstractQueryTree.prototype.treeWithUnion=function(e){if(null==e)return!1;if(null==e.kind)return!1;if("select"===e.kind)return this.treeWithUnion(e.pattern);if("BGP"===e.kind)return this.treeWithUnion(e.value);if("ZERO_OR_MORE_PATH"===e.kind)return!1;if("UNION"===e.kind){if(null==e.value[0].value||null==e.value[0].value.variables||null==e.value[1].value||null==e.value[1].value.variables)return!0;if(e.value[0].variables.join("/")===e.values[1].variables.join("/"))return!!this.treeWithUnion(e.value[0])||this.treeWithUnion(e.value[1])}else{if("GRAPH"===e.kind)return!1;if("LEFT_JOIN"!==e.kind&&"JOIN"!==e.kind)return"FILTER"!==e.kind&&(e.kind,!1);if(this.treeWithUnion(e.lvalue))return!0;this.treeWithUnion(e.rvalue)}},e.exports={AbstractQueryTree:AbstractQueryTree,NonSupportedSparqlFeatureError:n,SparqlParserError:i}},function(e,t,r){"use strict";var n=r(0),i=n,o=n.nextTick,a=function(e,t){if(0!=arguments.length){this.order=e,this.root=this._allocateNode(),this.root.isLeaf=!0,this.root.level=0;var r=this;this._diskWrite(this.root,function(e){r.root=e,r._updateRootNode(r.root,function(e){r.comparator=function(e,t){return e<t?-1:e>t?1:0},r.merger=null,null!=t&&t(r)})})}};a.prototype._allocateNode=function(){return new s},a.prototype._diskWrite=function(e,t){o(function(){t(e)})},a.prototype._diskRead=function(e,t){o(function(){t(e)})},a.prototype._diskDelete=function(e,t){o(function(){t()})},a.prototype._updateRootNode=function(e,t){t(e)},a.prototype.search=function(e,t,r){var n=this.root,i=this;i.__search(i,e,n,t,r)},a.prototype.__search=function(e,t,r,n,i){for(var o=0;o<r.numberActives&&1===e.comparator(t,r.keys[o].key);)o++;o<r.numberActives&&0===e.comparator(r.keys[o].key,t)?n(null!=i&&1==i?!0:r.keys[o].data):!0===r.isLeaf?n(null):e._diskRead(r.children[o],function(r){e.__search(e,t,r,n,i)})},a.prototype.walk=function(e,t){this.__walk(this,this.root,e,t)},a.prototype.__walk=function(e,t,r,n){var o=t.numberActives,a=0;if(t.isLeaf){for(a=0;a<t.numberActives;a++)r(t.keys[a]);return n()}i.whilst(function(){return a<o},function(n){e._diskRead(t.children[a],function(i){e.__walk(e,i,r,function(){e._diskRead(t.keys[a],function(e){r(e),a++,n()})})})},function(){e._diskRead(t.children[o],function(t){e.__walk(e,t,r,function(){n()})})})},a.prototype.walkNodes=function(e){this.__walkNodes(this,root,e,function(){})},a.prototype.__walkNodes=function(e,t,r,n){if(t.isLeaf)return r(t),n();r(t);var o=t.numberActives,a=0;i.whilst(function(){return a<o},function(n){e._diskRead(t.children[a],function(t){e.__walkNodes(e,t,r,function(){a++,n()})})},function(){e._diskRead(t.children[o],function(t){e.__walkNodes(e,t,r,function(){})})})},a.prototype._splitChild=function(e,t,r,n){var i=this._allocateNode();i.isLeaf=r.isLeaf,i.level=r.level,i.numberActives=this.order-1;var o=r.keys[this.order-1];r.keys[this.order-1]=null;for(var a=0;a<this.order-1;a++)i.keys[a]=r.keys[a+this.order],r.keys[a+this.order]=null,r.isLeaf||(i.children[a]=r.children[a+this.order],r.children[a+this.order]=null);for(r.isLeaf||(i.children[a]=r.children[a+this.order],r.children[a+this.order]=null),r.numberActives=this.order-1,a=e.numberActives+1;a>t+1;a--)e.children[a]=e.children[a-1];for(e.children[t+1]=i,a=e.numberActives;a>t;a--)e.keys[a]=e.keys[a-1];e.keys[t]=o,e.numberActives++;var s=this;this._diskWrite(i,function(i){s._diskWrite(e,function(e){e.children[t+1]=i,s._diskWrite(r,function(t){return n(e)})})})},a.prototype.insert=function(e,t,r){if(this.root.numberActives===2*this.order-1){var n=this._allocateNode();n.isLeaf=!1,n.level=this.root.level+1,n.numberActives=0,n.children[0]=this.root;var i=this;this._splitChild(n,0,this.root,function(o){n=o,i.root=n,i._updateRootNode(n,function(n){i._insertNonFull(n,e,t,r)})})}else this._insertNonFull(this.root,e,t,r)},a.prototype._insertNonFull=function(e,t,r,n){var i=e.numberActives-1;this.__insertNonFull(this,e,i,t,r,n)},a.prototype.__insertNonFull=function(e,t,r,n,i,o){if(t.isLeaf){for(;r>=0&&-1===e.comparator(n,t.keys[r].key);)t.keys[r+1]=t.keys[r],r--;r>=0&&0===e.comparator(n,t.keys[r].key)?t.keys[r]={key:n,data:i}:(t.keys[r+1]={key:n,data:i},t.numberActives++),e._diskWrite(t,function(e){return o(e)})}else{for(;r>=0&&-1===e.comparator(n,t.keys[r].key);)r--;r++;var a=e;e._diskRead(t.children[r],function(s){s.numberActives===2*a.order-1?a._splitChild(t,r,s,function(){1===a.comparator(n,t.keys[r].key)&&r++,a._diskRead(t.children[r],function(t){r=t.numberActives-1,a.__insertNonFull(e,t,r,n,i,o)})}):a._diskRead(t.children[r],function(t){r=t.numberActives-1,a.__insertNonFull(e,t,r,n,i,o)})})}},a.prototype.delete=function(e,t){var r=this.root;a.prototype.__deleteSearchNode(this,e,r,t)},a.prototype.__deleteSearchNode=function(e,t,r,n){var i=0;if(0===r.numberActives)return n(!1);for(;i<r.numberActives&&1===e.comparator(t,r.keys[i].key);)i++;var o=i;if(i<r.numberActives&&0===e.comparator(t,r.keys[i].key))return e.__deleteNodeFound(e,o,t,r,n);if(!0===r.isLeaf)return n(!1);var a=r;e._diskRead(r.children[i],function(r){if(null===r)return n(!1);var s=!1,u=!1,l=null,c=null;o===a.numberActives?(u=!0,c=a.children[o-1],l=a.children[o-1]):0===o?(s=!0,l=a.children[1],c=a.children[1]):(c=a.children[o-1],l=a.children[o+1]),e._diskRead(c,function(o){e._diskRead(l,function(l){!0===u&&(l=null),!0===s&&(o=null),r.numberActives===e.order-1&&null!=a?null!=l&&l.numberActives>e.order-1?e._moveKey(a,i,-1,function(i){e.__deleteSearchNode(e,t,r,n)}):null!=o&&o.numberActives>e.order-1?e._moveKey(a,i,1,function(i){e.__deleteSearchNode(e,t,r,n)}):null!=o&&o.numberActives===e.order-1?e._mergeSiblings(a,i,-1,function(r){e.__deleteSearchNode(e,t,r,n)}):null!=l&&l.numberActives===e.order-1&&e._mergeSiblings(a,i,1,function(r){e.__deleteSearchNode(e,t,r,n)}):e.__deleteSearchNode(e,t,r,n)})})})},a.prototype.__deleteNodeFound=function(e,t,r,n,i){return n.isLeaf&&n.numberActives>e.order-1?(e._deleteKeyFromNode(n,t,function(){i(!0)}),!0):n.isLeaf&&n===e.root?(e._deleteKeyFromNode(n,t,function(){i(!0)}),!0):(!1===n.isLeaf&&e._diskRead(n.children[t],function(o){o.numberActives>e.order-1?e._getMaxKeyPos(e,o,function(a){r=a.node.keys[a.index],n.keys[t]=r,e._diskWrite(n,function(t){t=o,r=r.key,e.__deleteSearchNode(e,r,t,i)})}):e._diskRead(n.children[t+1],function(a){a.numberActives>e.order-1?e._getMinKeyPos(e,a,function(o){r=o.node.keys[o.index],n.keys[t]=r,e._diskWrite(n,function(t){t=a,r=r.key,e.__deleteSearchNode(e,r,t,i)})}):o.numberActives===e.order-1&&a.numberActives===e.order-1&&e._mergeNodes(o,n.keys[t],a,function(o){n.children[t]=o,t++;for(var a=t;a<n.numberActives;a++)n.children[a]=n.children[a+1],n.keys[a-1]=n.keys[a];n.children[a]=null,n.keys[a-1]=null,n.numberActives--,0===n.numberActives&&e.root===n&&(e.root=o),e._diskWrite(n,function(t){e.__deleteSearchNode(e,r,o,i)})})})}),void(n.isLeaf&&n.numberActives>e.order-1&&e._deleteKeyFromNode(n,t,function(t){e.__deleteSearchNode(e,r,t,i)})))},a.prototype._moveKey=function(e,t,r,n){1===r&&t--;var i=this;i._diskRead(e.children[t],function(o){i._diskRead(e.children[t+1],function(a){if(-1==r){o.keys[o.numberActives]=e.keys[t],o.children[o.numberActives+1]=a.children[0],a.children[0]=null,o.numberActives++,e.keys[t]=a.keys[0];for(var s=1;s<a.numberActives;s++)a.keys[s-1]=a.keys[s],a.children[s-1]=a.children[s];a.children[a.numberActives-1]=a.children[a.numberActives],a.numberActives--}else{a.children[a.numberActives+1]=a.children[a.numberActives];for(var s=a.numberActives;s>0;s--)a.children[s]=a.children[s-1],a.keys[s]=a.keys[s-1];a.keys[0]=null,a.children[0]=null,a.children[0]=o.children[o.numberActives],a.keys[0]=e.keys[t],a.numberActives++,o.children[o.numberActives]=null,e.keys[t]=o.keys[o.numberActives-1],o.keys[o.numberActives-1]=null,o.numberActives--}i._diskWrite(o,function(t){i._diskWrite(a,function(t){i._diskWrite(e,function(e){return n(e)})})})})})},a.prototype._mergeSiblings=function(e,t,r,n){var i,o,a,s;t===e.numberActives?(t--,a=e.children[e.numberActives-1],s=e.children[e.numberActives]):(a=e.children[t],s=e.children[t+1]);var u=this;u._diskRead(a,function(r){u._diskRead(s,function(a){var s=u._allocateNode();for(s.isLeaf=r.isLeaf,s.level=r.level,o=0;o<u.order-1;o++)s.keys[o]=r.keys[o],s.children[o]=r.children[o];for(s.keys[u.order-1]=e.keys[t],s.children[u.order-1]=r.children[u.order-1],o=0;o<u.order-1;o++)s.keys[o+u.order]=a.keys[o],s.children[o+u.order]=a.children[o];for(s.children[2*u.order-1]=a.children[u.order-1],e.children[t]=s,o=t;o<e.numberActives;o++)e.keys[o]=e.keys[o+1],e.children[o+1]=e.children[o+2];for(s.numberActives=r.numberActives+a.numberActives+1,e.numberActives--,i=e.numberActives;i<2*u.order-1;i++)e.keys[i]=null;0===e.numberActives&&u.root===e&&(u.root=s,s.level?s.isLeaf=!1:s.isLeaf=!0),u._diskWrite(s,function(t){u._diskWrite(e,function(e){u._diskDelete(r,function(){u._diskDelete(a,function(){if(u.root!==t)return n(t);u._updateRootNode(u.root,function(){return n(t)})})})})})})})},a.prototype._deleteKeyFromNode=function(e,t,r){var n=2*this.order-1;e.numberActives<n&&(n=e.numberActives);var i;if(!1===e.isLeaf)return!1;e.keys[t];for(i=t;i<n-1;i++)e.keys[i]=e.keys[i+1];e.keys.pop(),e.numberActives--,this._diskWrite(e,function(e){return r(e)})},a.prototype._mergeNodes=function(e,t,r,n){var i,o;for(i=this._allocateNode(),i.isLeaf=!0,o=0;o<e.numberActives;o++)i.keys[o]=e.keys[o],i.children[o]=e.children[o];for(i.children[e.numberActives]=e.children[e.numberActives],i.keys[e.numberActives]=t,o=0;o<r.numberActives;o++)i.keys[o+e.numberActives+1]=r.keys[o],i.children[o+e.numberActives+1]=r.children[o];i.children[2*this.order-1]=r.children[r.numberActives],i.numberActives=e.numberActives+r.numberActives+1,i.isLeaf=e.isLeaf,i.level=e.level;var a=this;this._diskWrite(i,function(t){a._diskDelete(e,function(){a._diskDelete(r,function(){return n(t)})})})},a.prototype.audit=function(e){var t=[],r=[],n=this,i=function(i){for(var o=0;o<r.length;o++)if(0===n.comparator(r[o],i)){var a=" !!! duplicated key "+i;!0===e&&console.log(a),t.push(a)}},o=null,n=this;return this.walkNodes(function(a){!0===e&&(console.log("--- Node at "+a.level+" level"),console.log(" - leaf? "+a.isLeaf),console.log(" - num actives? "+a.numberActives),console.log(" - keys: "));for(var s=a.numberActives;s<a.keys.length;s++)null!=a.keys[s]&&!0===e&&(console.log(" * warning : redundant key data"),t.push(" * warning : redundant key data"));for(var s=a.numberActives+1;s<a.children.length;s++)null!=a.children[s]&&!0===e&&(console.log(" * warning : redundant children data"),t.push(" * warning : redundant key data"));if(!1===a.isLeaf)for(var s=0;s<a.numberActives;s++){var u=this._diskRead(a.children[s]).keys[this._diskRead(a.children[s]).numberActives-1].key,l=this._diskRead(a.children[s+1]).keys[0].key;if(!0===e&&console.log("   "+a.keys[s].key+"("+u+","+l+")"),-1===n.comparator(a.keys[s].key,u)){var c=" !!! value max left "+u+" > key "+a.keys[s].key;!0===e&&console.log(c),t.push(c)}if(1===n.comparator(a.keys[s].key,l)){var c=" !!! value min right "+l+" < key "+a.keys[s].key;!0===e&&console.log(c),t.push(c)}i(a.keys[s].key),r.push(a.keys[s].key)}else{if(null===o)o=a.level;else if(o!=a.level){var c=" !!! Leaf node with wrong level value";!0===e&&console.log(c),t.push(c)}for(var s=0;s<a.numberActives;s++)!0===e&&console.log(" "+a.keys[s].key),i(a.keys[s].key),r.push(a.keys[s].key)}if(a!=n.root){if(a.numberActives>2*n.order-1){if(!0===e)var c=" !!!! MAX num keys restriction violated ";console.log(c),t.push(c)}if(a.numberActives<n.order-1){if(!0===e)var c=" !!!! MIN num keys restriction violated ";console.log(c),t.push(c)}}}),t},a.prototype._getMaxKeyPos=function(e,t,r){var n={};return null===t?r(null):!0===t.isLeaf?(n.node=t,n.index=t.numberActives-1,r(n)):(n.node=t,n.index=t.numberActives-1,e._diskRead(t.children[t.numberActives],function(t){return e._getMaxKeyPos(e,t,r)}),void 0)},a.prototype._getMinKeyPos=function(e,t,r){var n={};if(null===t&&r(null),!0===t.isLeaf)return n.node=t,n.index=0,r(n);n.node=t,n.index=0,e._diskRead(t.children[0],function(t){return e._getMinKeyPos(e,t,r)})};var s=function(){this.numberActives=0,this.isLeaf=null,this.keys=[],this.children=[],this.level=0};e.exports={Tree:a,Node:s}},function(e,t,r){var n=r(0),i=r(119).QueryFilters;RDFModel={},RDFModel.defaultContext={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",owl:"http://www.w3.org/2002/07/owl#",xsd:"http://www.w3.org/2001/XMLSchema#",dcterms:"http://purl.org/dc/terms/",foaf:"http://xmlns.com/foaf/0.1/",cal:"http://www.w3.org/2002/12/cal/ical#",vcard:"http://www.w3.org/2006/vcard/ns# ",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",cc:"http://creativecommons.org/ns#",sioc:"http://rdfs.org/sioc/ns#",doap:"http://usefulinc.com/ns/doap#",com:"http://purl.org/commerce#",ps:"http://purl.org/payswarm#",gr:"http://purl.org/goodrelations/v1#",sig:"http://purl.org/signature#",ccard:"http://purl.org/commerce/creditcard#",ldp:"http://www.w3.org/ns/ldp#"},RDFModel.UrisMap=function(){this.defaultNs="",this.interfaceProperties=["get","remove","set","setDefault","addAll","resolve","shrink"]},RDFModel.UrisMap.prototype.values=function(){var e={};for(var t in this)n.include(this.interfaceProperties,t)||"function"==typeof this[t]||"defaultNs"===t||"interfaceProperties"===t||(e[t]=this[t]);return e},RDFModel.UrisMap.prototype.get=function(e){if(-1!=e.indexOf(" "))throw"Prefix must not contain any whitespaces";return this[e]},RDFModel.UrisMap.prototype.remove=function(e){if(-1!=e.indexOf(" "))throw"Prefix must not contain any whitespaces";return delete this[e],null},RDFModel.UrisMap.prototype.set=function(e,t){if(-1!=e.indexOf(" "))throw"Prefix must not contain any whitespaces";this[e]=t},RDFModel.UrisMap.prototype.setDefault=function(e){this.defaultNs=e},RDFModel.UrisMap.prototype.addAll=function(e,t){for(var r in e)n.include(this.interfaceProperties,r)||(null!=this[r]?!0===t&&(this[r]=e[r]):this[r]=e[r]);return this},RDFModel.UrisMap.prototype.resolve=function(e){var t=e.split(":"),r=t[0],n=t[1];return""===r?null==this.defaultNs?null:this.defaultNs+n:null!=this[r]?this[r]+n:null},RDFModel.UrisMap.prototype.shrink=function(e){for(var t in this){var r=this[t];if(0===e.indexOf(r)&&""!==r&&"defaultNs"!=t){return t+":"+e.split(r)[1]}}return e},RDFModel.Profile=function(){this.prefixes=new RDFModel.UrisMap,this.terms=new RDFModel.UrisMap},RDFModel.Profile.prototype.importProfile=function(e,t){this.prefixes.addAll(e.prefixes,t),this.terms.addAll(e.terms,t)},RDFModel.Profile.prototype.resolve=function(e){return-1!=e.indexOf(":")?this.prefixes.resolve(e):null!=this.terms[e]?this.terms.resolve(e):null},RDFModel.Profile.prototype.setDefaultPrefix=function(e){this.prefixes.setDefault(e)},RDFModel.Profile.prototype.setDefaultVocabulary=function(e){this.terms.setDefault(e)},RDFModel.Profile.prototype.setPrefix=function(e,t){this.prefixes.set(e,t)},RDFModel.Profile.prototype.setTerm=function(e,t){this.terms.set(e,t)},RDFModel.RDFEnvironment=function(){RDFModel.Profile.call(this),this.blankNodeCounter=0;var e=this;this.filters={s:function(e){return function(t){return t.subject.equals(e)}},p:function(e){return function(t){return t.predicate.equals(e)}},o:function(e){return function(t){return t.object.equals(e)}},sp:function(e,t){return function(r){return r.subject.equals(e)&&r.predicate.equals(t)}},so:function(e,t){return function(r){return r.subject.equals(e)&&r.object.equals(t)}},po:function(e,t){return function(r){return r.predicate.equals(e)&&r.object.equals(t)}},spo:function(e,t,r){return function(n){return n.subject.equals(e)&&n.predicate.equals(t)&&n.object.equals(r)}},describes:function(e){return function(t){return t.subject.equals(e)||t.object.equals(e)}},type:function(t){var r=e.resolve("rdf:type");return function(e){return e.predicate.equals(r)&&e.object.equals(t)}}};for(var t in RDFModel.defaultContext)this.prefixes.set(t,RDFModel.defaultContext[t])},RDFModel.RDFEnvironment.prototype=n.create(RDFModel.Profile.prototype,{constructor:RDFModel.RDFEnvironment}),RDFModel.RDFEnvironment.prototype.createBlankNode=function(){var e=new RDFModel.BlankNode(this.blankNodeCounter);return this.blankNodeCounter++,e},RDFModel.RDFEnvironment.prototype.createNamedNode=function(e){var t=this.resolve(e);return null!=t?new RDFModel.NamedNode(t):new RDFModel.NamedNode(e)},RDFModel.RDFEnvironment.prototype.createLiteral=function(e,t,r){return null!=r?new RDFModel.Literal(e,t,r.toString()):new RDFModel.Literal(e,t,r)},RDFModel.RDFEnvironment.prototype.createTriple=function(e,t,r){return new RDFModel.Triple(e,t,r)},RDFModel.RDFEnvironment.prototype.createGraph=function(e){var t=new RDFModel.Graph;if(null!=e)for(var r=0;r<e.length;r++)t.add(e[r]);return t},RDFModel.RDFEnvironment.prototype.createAction=function(e,t){return function(r){return e(r)?t(r):r}},RDFModel.RDFEnvironment.prototype.createProfile=function(e){if(!0===e)return new RDFModel.RDFEnvironment.Profile;var t=new RDFModel.RDFEnvironment.Profile;return t.importProfile(this),t},RDFModel.RDFEnvironment.prototype.createTermMap=function(e){if(!0===e)return new RDFModel.UrisMap;var t=this.terms.values(),r=new RDFModel.UrisMap;for(var n in t)r[n]=t[n];return r},RDFModel.RDFEnvironment.prototype.createPrefixMap=function(e){if(!0===e)return new RDFModel.UrisMap;var t=this.prefixes.values(),r=new RDFModel.UrisMap;for(var n in t)r[n]=t[n];return r},RDFModel.RDFNode=function(e){this.interfaceName=e,this.attributes=["interfaceName","nominalValue"]},RDFModel.RDFNode.prototype.equals=function(e){if(null==e.interfaceName)return this.valueOf()==e;for(var t in this.attributes){var r=this.attributes[t];if(this[r]!=e[r])return!1}return!0},RDFModel.BlankNode=function(e){RDFModel.RDFNode.call(this,"BlankNode"),this.nominalValue="_:"+e,this.bnodeId=e},RDFModel.BlankNode.prototype=n.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.BlankNode}),RDFModel.BlankNode.prototype.toString=function(){return this.nominalValue},RDFModel.BlankNode.prototype.toNT=function(){return this.nominalValue},RDFModel.BlankNode.prototype.valueOf=function(){return this.nominalValue},RDFModel.Literal=function(e,t,r){RDFModel.RDFNode.call(this,"Literal"),this.nominalValue=e,null!=t?this.language=t:null!=r&&(this.datatype=r)},RDFModel.Literal.prototype=n.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.Literal}),RDFModel.Literal.prototype.toString=function(){var e='"'+this.nominalValue+'"';return null!=this.language?e=e+"@"+this.language:(null!=this.datatype||this.type)&&(e=e+"^^<"+(this.datatype||this.type)+">"),e},RDFModel.Literal.prototype.toNT=function(){return this.toString()},RDFModel.Literal.prototype.valueOf=function(){return i.effectiveTypeValue({token:"literal",type:this.type||this.datatype,value:this.nominalValue,language:this.language})},RDFModel.NamedNode=function(e){RDFModel.RDFNode.call(this,"NamedNode"),null!=e.value?this.nominalValue=e.value:this.nominalValue=e},RDFModel.NamedNode.prototype=n.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.NamedNode}),RDFModel.NamedNode.prototype.toString=function(){return this.nominalValue},RDFModel.NamedNode.prototype.toNT=function(){return"<"+this.toString()+">"},RDFModel.NamedNode.prototype.valueOf=function(){return this.nominalValue},RDFModel.Triple=function(e,t,r){this.subject=e,this.predicate=t,this.object=r},RDFModel.Triple.prototype.equals=function(e){return this.subject.equals(e.subject)&&this.predicate.equals(e.predicate)&&this.object.equals(e.object)},RDFModel.Triple.prototype.toString=function(){return this.subject.toNT()+" "+this.predicate.toNT()+" "+this.object.toNT()+" . \r\n"},RDFModel.Graph=function(){this.triples=[],this.duplicates={},this.actions=[],this.length=0},RDFModel.Graph.prototype.add=function(e){for(var t=0;t<this.actions.length;t++)e=this.actions[t](e);var r=e.subject.toString()+e.predicate.toString()+e.object.toString();return this.duplicates[r]||(this.duplicates[r]=!0,this.triples.push(e)),this.length=this.triples.length,this},RDFModel.Graph.prototype.addAction=function(e,t){if(this.actions.push(e),1==t)for(var r=0;r<this.triples.length;r++)this.triples[r]=e(this.triples[r]);return this},RDFModel.Graph.prototype.addAll=function(e){for(var t=e.toArray(),r=0;r<t.length;r++)this.add(t[r]);return this.length=this.triples.length,this},RDFModel.Graph.prototype.remove=function(e){for(var t=null,r=0;r<this.triples.length;r++)if(this.triples[r].equals(e)){var n=e.subject.toString()+e.predicate.toString()+e.object.toString();delete this.duplicates[n],t=r;break}return null!=t&&this.triples.splice(t,1),this.length=this.triples.length,this},RDFModel.Graph.prototype.toArray=function(){return this.triples},RDFModel.Graph.prototype.some=function(e){for(var t=0;t<this.triples.length;t++)if(!0===e(this.triples[t],this))return!0;return!1},RDFModel.Graph.prototype.every=function(e){for(var t=0;t<this.triples.length;t++)if(!1===e(this.triples[t],this))return!1;return!0},RDFModel.Graph.prototype.filter=function(e){for(var t=new RDFModel.Graph,r=0;r<this.triples.length;r++)!0===e(this.triples[r],this)&&t.add(this.triples[r]);return t},RDFModel.Graph.prototype.forEach=function(e){for(var t=0;t<this.triples.length;t++)e(this.triples[t],this)},RDFModel.Graph.prototype.merge=function(e){for(var t=new RDFModel.Graph,r=0;r<this.triples.length;r++)t.add(this.triples[r]);return t},RDFModel.Graph.prototype.match=function(e,t,r,n){for(var i=new RDFModel.Graph,o=0,a=0;a<this.triples.length;a++){var s=this.triples[a];if((null==e||s.subject.equals(e))&&(null==t||s.predicate.equals(t))&&(null==r||s.object.equals(r))){if(!(null==n||o<n))return i;o++,i.add(s)}}return i},RDFModel.Graph.prototype.removeMatches=function(e,t,r){for(var n=[],i=0;i<this.triples.length;i++){var o=this.triples[i];(null==e||o.subject.equals(e))&&(null==t||o.predicate.equals(t))&&(null==r||o.object.equals(r))&&n.push(o)}for(var i=0;i<n.length;i++)this.remove(n[i]);return this},RDFModel.Graph.prototype.toNT=function(){var e="";return this.forEach(function(t){e+=t.toString()}),e},RDFModel.buildRDFResource=function(e,t,r,n){if("blank"===e.token)return RDFModel.buildBlankNode(e,t,r,n);if("literal"===e.token)return RDFModel.buildLiteral(e,t,r,n);if("uri"===e.token)return RDFModel.buildNamedNode(e,t,r,n);if("var"===e.token){var i=t[e.value];return null!=i?RDFModel.buildRDFResource(i,t,r,n):null}return null},RDFModel.buildBlankNode=function(e,t,r,n){return null!=e.valuetmp&&(e.value=e.valuetmp),0===e.value.indexOf("_:")&&(e.value=e.value.split("_:")[1]),new RDFModel.BlankNode(e.value)},RDFModel.buildLiteral=function(e,t,r,n){return new RDFModel.Literal(e.value,e.lang,e.type)},RDFModel.buildNamedNode=function(e,t,r,n){if(null!=e.value)return new RDFModel.NamedNode(e);if(null!=e.prefix){var i=r.resolveNsInEnvironment(e.prefix,n);return e.value=i+e.suffix,new RDFModel.NamedNode(e)}return new RDFModel.NamedNode(e)},RDFModel.rdf=new RDFModel.RDFEnvironment,e.exports=RDFModel},function(e,t){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function i(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!i(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,r,i,s,u,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(r=this._events[e],a(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),r.apply(this,s)}else if(o(r))for(s=Array.prototype.slice.call(arguments,1),l=r.slice(),i=l.length,u=0;u<i;u++)l[u].apply(this,s);return!0},r.prototype.addListener=function(e,t){var i;if(!n(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(i=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function r(){this.removeListener(e,r),i||(i=!0,t.apply(this,arguments))}if(!n(t))throw TypeError("listener must be a function");var i=!1;return r.listener=t,this.on(e,r),this},r.prototype.removeListener=function(e,t){var r,i,a,s;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],a=r.length,i=-1,r===t||n(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(r)){for(s=a;s-- >0;)if(r[s]===t||r[s].listener&&r[s].listener===t){i=s;break}if(i<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],n(r))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){return this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,r){function n(e,t){for(var r in e)t[r]=e[r]}function i(e,t,r){return a(e,t,r)}var o=r(31),a=o.Buffer;a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?e.exports=o:(n(o,t),t.Buffer=i),n(a,i),i.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return a(e,t,r)},i.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=a(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},i.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return a(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o.SlowBuffer(e)}},function(e,t,r){"use strict";(function(t,n){function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){T(t,e)}}function o(e){return P.from(e)}function a(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)||P.isBuffer(e)}function s(){}function u(e,t){I=I||r(25),e=e||{},this.objectMode=!!e.objectMode,t instanceof I&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var n=e.highWaterMark,o=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:o,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===e.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){g(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function l(e){if(I=I||r(25),!(L.call(l,this)||this instanceof I))return new l(e);this._writableState=new u(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),j.call(this)}function c(e,t){var r=new Error("write after end");e.emit("error",r),A(t,r)}function f(e,t,r,n){var i=!0,o=!1;return null===r?o=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),A(n,o),i=!1),i}function p(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=P.from(t,r)),t}function d(e,t,r,n,i,o){if(!r){var a=p(t,n,i);n!==a&&(r=!0,i="buffer",n=a)}var s=t.objectMode?1:n.length;t.length+=s;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else h(e,t,!1,s,n,i,o);return u}function h(e,t,r,n,i,o,a){t.writelen=n,t.writecb=a,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function v(e,t,r,n,i){--t.pendingcb,r?(A(i,n),A(x,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(i(n),e._writableState.errorEmitted=!0,e.emit("error",n),x(e,t))}function y(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function g(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(y(r),t)v(e,r,n,t,i);else{var o=E(r);o||r.corked||r.bufferProcessing||!r.bufferedRequest||_(e,r),n?C(b,e,r,o,i):b(e,r,o,i)}}function b(e,t,r,n){r||m(e,t),t.pendingcb--,n(),x(e,t)}function m(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function _(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,o=new Array(n),a=t.corkedRequestsFree;a.entry=r;for(var s=0,u=!0;r;)o[s]=r,r.isBuf||(u=!1),r=r.next,s+=1;o.allBuffers=u,h(e,t,!0,t.length,o,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new i(t)}else{for(;r;){var l=r.chunk,c=r.encoding,f=r.callback;if(h(e,t,!1,t.objectMode?1:l.length,l,c,f),r=r.next,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=r,t.bufferProcessing=!1}function E(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function k(e,t){e._final(function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),x(e,t)})}function w(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,A(k,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function x(e,t){var r=E(t);return r&&(w(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}function S(e,t,r){t.ending=!0,x(e,t),r&&(t.finished?A(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function T(e,t,r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}var A=r(49);e.exports=l;var I,C=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?n:A;l.WritableState=u;var R=r(38);R.inherits=r(18);var F={deprecate:r(232)},j=r(124),P=r(79).Buffer,N=r(125);R.inherits(l,j),u.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(u.prototype,"buffer",{get:F.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}();var L;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(L=Function.prototype[Symbol.hasInstance],Object.defineProperty(l,Symbol.hasInstance,{value:function(e){return!!L.call(this,e)||e&&e._writableState instanceof u}})):L=function(e){return e instanceof this},l.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},l.prototype.write=function(e,t,r){var n=this._writableState,i=!1,u=a(e)&&!n.objectMode;return u&&!P.isBuffer(e)&&(e=o(e)),"function"==typeof t&&(r=t,t=null),u?t="buffer":t||(t=n.defaultEncoding),"function"!=typeof r&&(r=s),n.ended?c(this,r):(u||f(this,n,e,r))&&(n.pendingcb++,i=d(this,n,u,e,t,r)),i},l.prototype.cork=function(){this._writableState.corked++},l.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||_(this,e))},l.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},l.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},l.prototype._writev=null,l.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!==e&&void 0!==e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||S(this,n,r)},Object.defineProperty(l.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),l.prototype.destroy=N.destroy,l.prototype._undestroy=N.undestroy,l.prototype._destroy=function(e,t){this.end(),t(e)}}).call(t,r(12),r(50).setImmediate)},function(e,t,r){(function(t){function r(e){if(!(this instanceof r))return new r(e);if(e&&e.lineMode){this._tripleQuotedString=this._number=this._boolean=/$0^/;var t=this;this._tokenize=this.tokenize,this.tokenize=function(e,r){this._tokenize(e,function(e,n){!e&&/^(?:IRI|prefixed|literal|langcode|type|\.|eof)$/.test(n.type)?r&&r(e,n):r&&r(e||t._syntaxError(n.type,r=null))})}}}var n=String.fromCharCode,i="function"==typeof t?t:function(e){setTimeout(e,0)},o=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\[uU]|\\(.)/g,a={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},s=/[\x00-\x20<>\\"\{\}\|\^\`]/;r.prototype={_iri:/^<((?:[^>\\]|\\[uU])+)>/,_unescapedIri:/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>/,_unescapedString:/^"[^"\\]+"(?=[^"\\])/,_singleQuotedString:/^"[^"\\]*(?:\\.[^"\\]*)*"(?=[^"\\])|^'[^'\\]*(?:\\.[^'\\]*)*'(?=[^'\\])/,_tripleQuotedString:/^""("[^"\\]*(?:(?:\\.|"(?!""))[^"\\]*)*")""|^''('[^'\\]*(?:(?:\\.|'(?!''))[^'\\]*)*')''/,_langcode:/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,_prefix:/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,_prefixed:/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?=\.?[,;\s#()\[\]\{\}"'<])/,_blank:/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=\.?[,;:\s#()\[\]\{\}"'<])/,_number:/^[\-+]?(?:\d+\.?\d*([eE](?:[\-\+])?\d+)|\d*\.?\d+)(?=[.,;:\s#()\[\]\{\}"'<])/,_boolean:/^(?:true|false)(?=[.,;:\s#()\[\]\{\}"'<])/,_keyword:/^@[a-z]+(?=[\s#<:])/,_sparqlKeyword:/^(?:PREFIX|BASE|GRAPH)(?=[\s#<:])/i,_shortPredicates:/^a(?=\s+|<)/,_newline:/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,_whitespace:/^[ \t]+/,_endOfFile:/^(?:#[^\n\r]*)?$/,_tokenizeToEnd:function(e,t){function r(t){e(t._syntaxError(/^\S*/.exec(n)[0]))}for(var n=this._input;;){for(var i;i=this._newline.exec(n);)n=n.substr(i[0].length,n.length),this._line++;if((i=this._whitespace.exec(n))&&(n=n.substr(i[0].length,n.length)),this._endOfFile.test(n))return t&&e(n=null,{line:this._line,type:"eof",value:"",prefix:""}),this._input=n;var o,a=this._line,u="",l="",c="",f=n[0],p=null,d=0,h=!1;switch(f){case"^":if(1===n.length)break;if("^"!==n[1])return r(this);if(this._prevTokenType="^",n=n.substr(2),"<"!==n[0]){h=!0;break}case"<":if(p=this._unescapedIri.exec(n))u="IRI",l=p[1];else if(p=this._iri.exec(n)){if(null===(o=this._unescape(p[1]))||s.test(o))return r(this);u="IRI",l=o}break;case"_":((p=this._blank.exec(n))||t&&(p=this._blank.exec(n+" ")))&&(u="prefixed",c="_",l=p[1]);break;case'"':case"'":if(p=this._unescapedString.exec(n))u="literal",l=p[0];else if(p=this._singleQuotedString.exec(n)){if(null===(o=this._unescape(p[0])))return r(this);u="literal",l=o.replace(/^'|'$/g,'"')}else if(p=this._tripleQuotedString.exec(n)){if(o=p[1]||p[2],this._line+=o.split(/\r\n|\r|\n/).length-1,null===(o=this._unescape(o)))return r(this);u="literal",l=o.replace(/^'|'$/g,'"')}break;case"@":"literal"===this._prevTokenType&&(p=this._langcode.exec(n))?(u="langcode",l=p[1]):(p=this._keyword.exec(n))&&(u=p[0]);break;case".":if(1===n.length?t:n[1]<"0"||n[1]>"9"){u=".",d=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(p=this._number.exec(n))&&(u="literal",l='"'+p[0]+'"^^http://www.w3.org/2001/XMLSchema#'+(p[1]?"double":/^[+\-]?\d+$/.test(p[0])?"integer":"decimal"));break;case"B":case"b":case"p":case"P":case"G":case"g":(p=this._sparqlKeyword.exec(n))?u=p[0].toUpperCase():h=!0;break;case"f":case"t":(p=this._boolean.exec(n))?(u="literal",l='"'+p[0]+'"^^http://www.w3.org/2001/XMLSchema#boolean'):h=!0;break;case"a":(p=this._shortPredicates.exec(n))?(u="abbreviation",l="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"):h=!0;break;case",":case";":case"[":case"]":case"(":case")":case"{":case"}":d=1,u=f;break;default:h=!0}if(h&&("@prefix"!==this._prevTokenType&&"PREFIX"!==this._prevTokenType||!(p=this._prefix.exec(n))?((p=this._prefixed.exec(n))||t&&(p=this._prefixed.exec(n+" ")))&&(u="prefixed",c=p[1]||"",l=this._unescape(p[2])):(u="prefix",l=p[1]||"")),"^"===this._prevTokenType&&(u="IRI"===u||"prefixed"===u?"type":""),!u)return t||!/^'''|^"""/.test(n)&&/\n|\r/.test(n)?r(this):this._input=n;e(null,{line:a,type:u,value:l,prefix:c}),this._prevTokenType=u,n=n.substr(d||p[0].length,n.length)}},_unescape:function(e){try{return e.replace(o,function(e,t,r,i){var o;if(t){if(o=parseInt(t,16),isNaN(o))throw new Error;return n(o)}if(r){if(o=parseInt(r,16),isNaN(o))throw new Error;return o<=65535?n(o):n(55296+(o-=65536)/1024,56320+(1023&o))}var s=a[i];if(!s)throw new Error;return s})}catch(e){return null}},_syntaxError:function(e){return this._input=null,new Error('Syntax error: unexpected "'+e+'" on line '+this._line+".")},tokenize:function(e,t){function r(e){null!==o._input&&(o._input+=e,o._tokenizeToEnd(t,!1))}function n(){null!==o._input&&o._tokenizeToEnd(t,!0)}var o=this;this._line=1,"string"==typeof e?(this._input=e,i(function(){o._tokenizeToEnd(t,!0)})):(this._input="",e&&"function"!=typeof e?("function"==typeof e.setEncoding&&e.setEncoding("utf8"),e.on("data",r),e.on("end",n)):(this.addChunk=r,this.end=n,t||(t=e)))}},e.exports=r}).call(t,r(50).setImmediate)},function(e,t,r){function n(e){if(!(this instanceof n))return new n(e);this._tripleStack=[],this._graph=null,e=e||{},this._setBase(e.documentIRI);var t="string"==typeof e.format&&e.format.match(/\w*$/)[0].toLowerCase(),r="turtle"===t,a="trig"===t,s=/triple/.test(t),u=/quad/.test(t),l=s||u;(this._supportsNamedGraphs=!r)||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(r||a||s),l&&(this._base="",this._resolveIRI=function(e){return this._error("Disallowed relative IRI",e),this._callback=i,this._subject=null}),this._blankNodePrefix="string"!=typeof e.blankNodePrefix?"":"_:"+e.blankNodePrefix.replace(/^_:/,""),this._lexer=e.lexer||new o({lineMode:l})}function i(){}var o=r(81),a="http://www.w3.org/1999/02/22-rdf-syntax-ns#",s=a+"nil",u=a+"first",l=/^[a-z][a-z0-9+.-]*:/i,c=/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i,f=/(?:^|\/)\.\.?(?:$|[\/#?])/,p=0,d=0;n._resetBlankNodeIds=function(){p=d=0},n.prototype={_setBase:function(e){if(e){if(e.indexOf("#")>=0)throw new Error("Invalid base IRI "+e)}else e=null;(this._base=e)&&(this._basePath=e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(c),this._baseRoot=e[0],this._baseScheme=e[1])},_readInTopContext:function(e){switch(e.type){case"eof":return null!==this._graph?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"@prefix":return this._sparqlStyle=!1,this._readPrefix;case"PREFIX":return this._sparqlStyle=!0,this._readPrefix;case"@base":return this._sparqlStyle=!1,this._readBaseIRI;case"BASE":return this._sparqlStyle=!0,this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}},_readSubject:function(e){switch(this._predicate=null,e.type){case"IRI":null===this._base||l.test(e.value)?this._subject=e.value:this._subject=this._resolveIRI(e);break;case"prefixed":var t=this._prefixes[e.prefix];if(void 0===t)return this._error('Undefined prefix "'+e.prefix+':"',e);this._subject=t+e.value;break;case"[":return this._subject="_:b"+d++,this._tripleStack.push({subject:this._subject,predicate:null,object:null,type:"blank"}),this._readBlankNodeHead;case"(":return this._tripleStack.push({subject:s,predicate:null,object:null,type:"list"}),this._subject=null,this._readListItem;case"}":return this._readPunctuation(e);default:return this._error("Expected subject but got "+e.type,e)}return this._readPredicateOrNamedGraph},_readPredicate:function(e){var t=e.type;switch(t){case"IRI":case"abbreviation":null===this._base||l.test(e.value)?this._predicate=e.value:this._predicate=this._resolveIRI(e);break;case"prefixed":if("_"===e.prefix)return this._error("Disallowed blank node as predicate",e);var r=this._prefixes[e.prefix];if(void 0===r)return this._error('Undefined prefix "'+e.prefix+':"',e);this._predicate=r+e.value;break;case".":case"]":case"}":return null===this._predicate?this._error("Unexpected "+t,e):(this._subject=null,"]"===t?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return this._readPredicate;default:return this._error('Expected predicate to follow "'+this._subject+'"',e)}return this._readObject},_readObject:function(e){switch(e.type){case"IRI":null===this._base||l.test(e.value)?this._object=e.value:this._object=this._resolveIRI(e);break;case"prefixed":var t=this._prefixes[e.prefix];if(void 0===t)return this._error('Undefined prefix "'+e.prefix+':"',e);this._object=t+e.value;break;case"literal":return this._object=e.value,this._readDataTypeOrLang;case"[":var r="_:b"+d++;return this._tripleStack.push({subject:this._subject,predicate:this._predicate,object:r,type:"blank"}),this._subject=r,this._readBlankNodeHead;case"(":return this._tripleStack.push({subject:this._subject,predicate:this._predicate,object:s,type:"list"}),this._subject=null,this._readListItem;default:return this._error('Expected object to follow "'+this._predicate+'"',e)}return this._getTripleEndReader()},_readPredicateOrNamedGraph:function(e){return"{"===e.type?this._readGraph(e):this._readPredicate(e)},_readGraph:function(e){return"{"!==e.type?this._error("Expected graph but got "+e.type,e):(this._graph=this._subject,this._subject=null,this._readSubject)},_readBlankNodeHead:function(e){return"]"===e.type?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))},_readBlankNodeTail:function(e){if("]"!==e.type)return this._readBlankNodePunctuation(e);null!==this._subject&&this._callback(null,{subject:this._subject,predicate:this._predicate,object:this._object,graph:this._graph||""});var t=this._tripleStack.pop();return this._subject=t.subject,null!==t.object?(this._predicate=t.predicate,this._object=t.object,this._getTripleEndReader()):null!==this._predicate?this._readPredicate:this._readPredicateOrNamedGraph},_readDataTypeOrLang:function(e){switch(e.type){case"type":var t;if(""===e.prefix)t=null===this._base||l.test(e.value)?e.value:this._resolveIRI(e);else{var r=this._prefixes[e.prefix];if(void 0===r)return this._error('Undefined prefix "'+e.prefix+':"',e);t=r+e.value}return this._object+="^^"+t,this._getTripleEndReader();case"langcode":return this._object+="@"+e.value.toLowerCase(),this._getTripleEndReader();default:return this._getTripleEndReader().call(this,e)}},_readListItem:function(e){var t=null,r=null,n=this._subject,i=this._tripleStack,o=i[i.length-1],a=this._readListItem;switch(e.type){case"IRI":t=null===this._base||l.test(e.value)?e.value:this._resolveIRI(e);break;case"prefixed":var c=this._prefixes[e.prefix];if(void 0===c)return this._error('Undefined prefix "'+e.prefix+':"',e);t=c+e.value;break;case"literal":t=e.value,a=this._readDataTypeOrLang;break;case"[":r="_:b"+d++,t="_:b"+d++,i.push({subject:r,predicate:u,object:t,type:"blank"}),this._subject=t,a=this._readBlankNodeHead;break;case"(":r="_:b"+d++,i.push({subject:r,predicate:u,object:s,type:"list"}),this._subject=null,a=this._readListItem;break;case")":if(i.pop(),0!==i.length&&"list"===i[i.length-1].type&&this._callback(null,{subject:o.subject,predicate:o.predicate,object:o.object,graph:this._graph||""}),this._subject=o.subject,null===o.predicate){if(a=this._readPredicate,o.subject===s)return a}else if(this._predicate=o.predicate,this._object=o.object,a=this._getTripleEndReader(),o.object===s)return a;r=s;break;default:return this._error('Expected list item instead of "'+e.type+'"',e)}return null===r&&(this._subject=r="_:b"+d++),null===n?o.object===s?o.object=r:o.subject=r:this._callback(null,{subject:n,predicate:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest",object:r,graph:this._graph||""}),null!==t&&this._callback(null,{subject:r,predicate:u,object:t,graph:this._graph||""}),a},_readPunctuation:function(e){var t,r=this._subject,n=this._graph;switch(e.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",e);this._graph=null;case".":this._subject=null,t=this._readInTopContext;break;case";":t=this._readPredicate;break;case",":t=this._readObject;break;case"IRI":if(this._supportsQuads&&null===this._graph){n=null===this._base||l.test(e.value)?e.value:this._resolveIRI(e),r=this._subject,t=this._readQuadPunctuation;break}case"prefixed":if(this._supportsQuads&&null===this._graph){var i=this._prefixes[e.prefix];if(void 0===i)return this._error('Undefined prefix "'+e.prefix+':"',e);n=i+e.value,t=this._readQuadPunctuation;break}default:return this._error('Expected punctuation to follow "'+this._object+'"',e)}return null!==r&&this._callback(null,{subject:r,predicate:this._predicate,object:this._object,graph:n||""}),t},_readBlankNodePunctuation:function(e){var t;switch(e.type){case";":t=this._readPredicate;break;case",":t=this._readObject;break;default:return this._error('Expected punctuation to follow "'+this._object+'"',e)}return this._callback(null,{subject:this._subject,predicate:this._predicate,object:this._object,graph:this._graph||""}),t},_readQuadPunctuation:function(e){return"."!==e.type?this._error("Expected dot to follow quad",e):this._readInTopContext},_readPrefix:function(e){return"prefix"!==e.type?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)},_readPrefixIRI:function(e){if("IRI"!==e.type)return this._error('Expected IRI to follow prefix "'+this._prefix+':"',e);var t;return t=null===this._base||l.test(e.value)?e.value:this._resolveIRI(e),this._prefixes[this._prefix]=t,this._prefixCallback(this._prefix,t),this._readDeclarationPunctuation},_readBaseIRI:function(e){if("IRI"!==e.type)return this._error("Expected IRI to follow base declaration",e);try{this._setBase(null===this._base||l.test(e.value)?e.value:this._resolveIRI(e))}catch(t){this._error(t.message,e)}return this._readDeclarationPunctuation},_readNamedGraphLabel:function(e){switch(e.type){case"IRI":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}},_readNamedGraphBlankLabel:function(e){return"]"!==e.type?this._error("Invalid graph label",e):(this._subject="_:b"+d++,this._readGraph)},_readDeclarationPunctuation:function(e){return this._sparqlStyle?this._readInTopContext(e):"."!==e.type?this._error("Expected declaration to end with a dot",e):this._readInTopContext},_getTripleEndReader:function(){var e=this._tripleStack;if(0===e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem}},_error:function(e,t){this._callback(new Error(e+" at line "+t.line+"."))},_resolveIRI:function(e){var t=e.value;switch(t[0]){case void 0:return this._base;case"#":return this._base+t;case"?":return this._base.replace(/(?:\?.*)?$/,t);case"/":return("/"===t[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(t);default:return this._removeDotSegments(this._basePath+t)}},_removeDotSegments:function(e){if(!f.test(e))return e;for(var t="",r=e.length,n=-1,i=-1,o=0,a="/";n<r;){switch(a){case":":if(i<0&&"/"===e[++n]&&"/"===e[++n])for(;(i=n+1)<r&&"/"!==e[i];)n=i;break;case"?":case"#":n=r;break;case"/":if("."===e[n+1])switch(a=e[++n+1]){case"/":t+=e.substring(o,n-1),o=n+1;break;case void 0:case"?":case"#":return t+e.substring(o,n)+e.substr(n+1);case".":if(void 0===(a=e[++n+1])||"/"===a||"?"===a||"#"===a){if(t+=e.substring(o,n-2),(o=t.lastIndexOf("/"))>=i&&(t=t.substr(0,o)),"/"!==a)return t+"/"+e.substr(n+1);o=n+1}}}a=e[++n]}return t+e.substring(o)},parse:function(e,t,r){this._readCallback=this._readInTopContext,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix||"_:b"+p+++"_","function"==typeof e&&(r=t,t=e,e=null),this._callback=t||i,this._prefixCallback=r||i;var n=this;this._lexer.tokenize(e,function(e,t){null!==e?(n._callback(e),n._callback=i):void 0!==n._readCallback&&(n._readCallback=n._readCallback(t))}),e||(this.addChunk=this._lexer.addChunk,this.end=this._lexer.end)}},e.exports=n},function(e,t){function r(e,t){for(var r in i)t?e.prototype[r]=n(i[r]):e[r]=i[r];return e}function n(e){return function(t){return e(this,t)}}var i={isIRI:function(e){if(!e)return e;var t=e[0];return'"'!==t&&"_"!==t},isLiteral:function(e){return e&&'"'===e[0]},isBlank:function(e){return e&&"_:"===e.substr(0,2)},getLiteralValue:function(e){var t=/^"([^]*)"/.exec(e);if(!t)throw new Error(e+" is not a literal");return t[1]},getLiteralType:function(e){var t=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(e);if(!t)throw new Error(e+" is not a literal");return t[1]||(t[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")},getLiteralLanguage:function(e){var t=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(e);if(!t)throw new Error(e+" is not a literal");return t[1]?t[1].toLowerCase():""},isPrefixedName:function(e){return e&&/^[^:\/"']*:[^:\/"']+$/.test(e)},expandPrefixedName:function(e,t){var r,n,i,o=/(?:^|"\^\^)([^:\/#"'\^_]*):[^\/]*$/.exec(e);return o&&(r=o[1],n=t[r],i=o.index),void 0===n?e:0===i?n+e.substr(r.length+1):e.substr(0,i+3)+n+e.substr(i+r.length+4)},createIRI:function(e){return e&&'"'===e[0]?i.getLiteralValue(e):e},createLiteral:function(e,t){if(!t)switch(typeof e){case"boolean":t="http://www.w3.org/2001/XMLSchema#boolean";break;case"number":if(isFinite(e)){t=e%1==0?"http://www.w3.org/2001/XMLSchema#integer":"http://www.w3.org/2001/XMLSchema#decimal";break}default:return'"'+e+'"'}return'"'+e+(/^[a-z]+(-[a-z0-9]+)*$/i.test(t)?'"@'+t.toLowerCase():'"^^'+t)},prefix:function(e){return i.prefixes({"":e})("")},prefixes:function(e){function t(e,t){if(t||!(e in r)){var n=Object.create(null);t=t||"",r[e]=function(e){return n[e]||(n[e]=t+e)}}return r[e]}var r=Object.create(null);for(var n in e)t(n,e[n]);return t}};e.exports=r(r)},function(e,t){function r(e,t){if(!(this instanceof r))return new r(e,t);if(e&&"function"!=typeof e.write&&(t=e,e=null),t=t||{},e)this._outputStream=e,this._endStream=void 0===t.end||!!t.end;else{var n="";this._outputStream={write:function(e,t,r){n+=e,r&&r()},end:function(e){e&&e(null,n)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(t.format)?this._writeTriple=this._writeTripleLine:(this._graph="",this._prefixIRIs=Object.create(null),t.prefixes&&this.addPrefixes(t.prefixes))}function n(e){var t=s[e];return void 0===t&&(1===e.length?(t=e.charCodeAt(0).toString(16),t="\\u0000".substr(0,6-t.length)+t):(t=(1024*(e.charCodeAt(0)-55296)+e.charCodeAt(1)+9216).toString(16),t="\\U00000000".substr(0,10-t.length)+t)),t}var i=/^"([^]*)"(?:\^\^(.+)|@([\-a-z]+))?$/i,o=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,a=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,s={"\\":"\\\\",'"':'\\"',"\t":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};r.prototype={_write:function(e,t){this._outputStream.write(e,"utf8",t)},_writeTriple:function(e,t,r,n,i){try{this._graph!==n&&(this._write((null===this._subject?"":this._graph?"\n}\n":".\n")+(n?this._encodeIriOrBlankNode(n)+" {\n":"")),this._subject=null,this._graph="["!==n[0]?n:"]"),this._subject===e?this._predicate===t?this._write(", "+this._encodeObject(r),i):this._write(";\n    "+this._encodePredicate(this._predicate=t)+" "+this._encodeObject(r),i):this._write((null===this._subject?"":".\n")+this._encodeSubject(this._subject=e)+" "+this._encodePredicate(this._predicate=t)+" "+this._encodeObject(r),i)}catch(e){i&&i(e)}},_writeTripleLine:function(e,t,r,n,i){delete this._prefixMatch;try{this._write(this._encodeIriOrBlankNode(e)+" "+this._encodeIriOrBlankNode(t)+" "+this._encodeObject(r)+(n?" "+this._encodeIriOrBlankNode(n)+".\n":".\n"),i)}catch(e){i&&i(e)}},_encodeIriOrBlankNode:function(e){var t=e[0];if("["===t||"("===t||"_"===t&&":"===e[1])return e;o.test(e)&&(e=e.replace(a,n));var r=this._prefixRegex.exec(e);return r?r[1]?this._prefixIRIs[r[1]]+r[2]:e:"<"+e+">"},_encodeLiteral:function(e,t,r){return o.test(e)&&(e=e.replace(a,n)),r?'"'+e+'"@'+r:t?'"'+e+'"^^'+this._encodeIriOrBlankNode(t):'"'+e+'"'},_encodeSubject:function(e){if('"'===e[0])throw new Error("A literal as subject is not allowed: "+e);return"["===e[0]&&(this._subject="]"),this._encodeIriOrBlankNode(e)},_encodePredicate:function(e){if('"'===e[0])throw new Error("A literal as predicate is not allowed: "+e);return"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"===e?"a":this._encodeIriOrBlankNode(e)},_encodeObject:function(e){if('"'!==e[0])return this._encodeIriOrBlankNode(e);var t=i.exec(e);if(!t)throw new Error("Invalid literal: "+e);return this._encodeLiteral(t[1],t[2],t[3])},_blockedWrite:function(){throw new Error("Cannot write because the writer has been closed.")},addTriple:function(e,t,r,n,i){void 0===r?this._writeTriple(e.subject,e.predicate,e.object,e.graph||"",t):"string"!=typeof n?this._writeTriple(e,t,r,"",n):this._writeTriple(e,t,r,n,i)},addTriples:function(e){for(var t=0;t<e.length;t++)this.addTriple(e[t])},addPrefix:function(e,t,r){var n={};n[e]=t,this.addPrefixes(n,r)},addPrefixes:function(e,t){var r=this._prefixIRIs,n=!1;for(var i in e){var o=e[i];/[#\/]$/.test(o)&&r[o]!==(i+=":")&&(n=!0,r[o]=i,null!==this._subject&&(this._write(this._graph?"\n}\n":".\n"),this._subject=null,this._graph=""),this._write("@prefix "+i+" <"+o+">.\n"))}if(n){var a="",s="";for(var u in r)a+=a?"|"+u:u,s+=(s?"|":"")+r[u];a=a.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&"),this._prefixRegex=new RegExp("^(?:"+s+")[^/]*$|^("+a+")([a-zA-Z][\\-_a-zA-Z0-9]*)$")}this._write(n?"\n":"",t)},blank:function(e,t){var r,n,i=e;switch(void 0===e?i=[]:"string"==typeof e?i=[{predicate:e,object:t}]:"length"in e||(i=[e]),n=i.length){case 0:return"[]";case 1:if(r=i[0],"["!==r.object[0])return"[ "+this._encodePredicate(r.predicate)+" "+this._encodeObject(r.object)+" ]";default:for(var o="[",a=0;a<n;a++)r=i[a],r.predicate===e?o+=", "+this._encodeObject(r.object):(o+=(a?";\n  ":"\n  ")+this._encodePredicate(r.predicate)+" "+this._encodeObject(r.object),e=r.predicate);return o+"\n]"}},list:function(e){for(var t=e&&e.length||0,r=new Array(t),n=0;n<t;n++)r[n]=this._encodeObject(e[n]);return"("+r.join(" ")+")"},_prefixRegex:/$0^/,end:function(e){null!==this._subject&&(this._write(this._graph?"\n}\n":".\n"),this._subject=null),this._write=this._blockedWrite;var t=e&&function(r,n){t=null,e(r,n)};if(this._endStream)try{return this._outputStream.end(t)}catch(e){}t&&t()}},e.exports=r},function(e,t,r){e.exports=!r(16)&&!r(27)(function(){return 7!=Object.defineProperty(r(53)("div"),"a",{get:function(){return 7}}).a})},function(e,t,r){var n=r(21),i=r(88).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return i(e)}catch(e){return a.slice()}};e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?s(e):i(n(e))}},function(e,t,r){var n=r(33);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},function(e,t,r){var n=r(89),i=r(59).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},function(e,t,r){var n=r(22),i=r(21),o=r(140)(!1),a=r(57)("IE_PROTO");e.exports=function(e,t){var r,s=i(e),u=0,l=[];for(r in s)r!=a&&n(s,r)&&l.push(r);for(;t.length>u;)n(s,r=t[u++])&&(~o(l,r)||l.push(r));return l}},function(e,t,r){var n=r(56),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},function(e,t,r){"use strict";var n=r(42),i=r(10),o=r(92),a=r(19),s=r(22),u=r(35),l=r(146),c=r(44),f=r(94),p=r(5)("iterator"),d=!([].keys&&"next"in[].keys()),h=function(){return this};e.exports=function(e,t,r,v,y,g,b){l(r,t,v);var m,_,E,k=function(e){if(!d&&e in T)return T[e];switch(e){case"keys":case"values":return function(){return new r(this,e)}}return function(){return new r(this,e)}},w=t+" Iterator",x="values"==y,S=!1,T=e.prototype,A=T[p]||T["@@iterator"]||y&&T[y],I=A||k(y),C=y?x?k("entries"):I:void 0,R="Array"==t?T.entries||A:A;if(R&&(E=f(R.call(new e)))!==Object.prototype&&E.next&&(c(E,w,!0),n||s(E,p)||a(E,p,h)),x&&A&&"values"!==A.name&&(S=!0,I=function(){return A.call(this)}),n&&!b||!d&&!S&&T[p]||a(T,p,I),u[t]=I,u[w]=h,y)if(m={values:x?I:k("values"),keys:g?I:k("keys"),entries:C},b)for(_ in m)_ in T||o(T,_,m[_]);else i(i.P+i.F*(d||S),t,m);return m}},function(e,t,r){e.exports=r(19)},function(e,t,r){var n=r(4).document;e.exports=n&&n.documentElement},function(e,t,r){var n=r(22),i=r(62),o=r(57)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),n(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,r){var n=r(96),i=r(5)("iterator"),o=r(35);e.exports=r(2).getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[n(e)]}},function(e,t,r){var n=r(33),i=r(5)("toStringTag"),o="Arguments"==n(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,r,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=a(t=Object(e),i))?r:o?n(t):"Object"==(s=n(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t){},function(e,t,r){e.exports={default:r(162),__esModule:!0}},function(e,t,r){"use strict";var n=r(100),i=r(71),o=r(102),a=r(103),s=r(29),u=r(6),l=r(28),c=r(17),f=r(70),p=r(24),d=r(69),h=r(9);(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t})(h).module("fibra.services.worker-service-prototype-mapping-configuration",[]).config(["$provide",function(e){e.service("workerServicePrototypeMappingConfiguration",function(){var e={Project:n.Project,CNode:u.CNode,NamedNode:u.NamedNode,Citable:l.Citable,FMap:c.FMap,Class:s.Class,Property:s.Property,TreeNode:f.TreeNode,PrimaryEndpointConfiguration:i.PrimaryEndpointConfiguration,RemoteEndpointConfiguration:o.RemoteEndpointConfiguration,Schema:a.Schema,PropertyAndValue:p.PropertyAndValue,Item:p.Item,PropertyToValues:p.PropertyToValues,FullRichNodeFromNode:d.FullRichNodeFromNode};for(var t in e)e[t].__name=t;e.Object=Object;var r={};for(var h in e)r[h]=e[h].prototype;return r})}])},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Project=void 0;var i=r(8),o=n(i),a=r(1),s=n(a),u=r(3),l=n(u),c=r(13),f=n(c),p=r(36),d=n(p),h=r(14),v=n(h),y=r(28),g=r(29),b=r(23),m=r(46),_=r(47),E=r(24),k=r(71),w=r(6),x=t.Project=function(e){function t(){(0,s.default)(this,t);var e=(0,f.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments));return e.instanceNS="http://ldf.fi/fibra/",e.schemaNS="http://ldf.fi/fibra/schema#",e.dataModel=new g.DataModel,e.autocompletionQuery=m.SparqlAutocompleteService.defaultMatchQuery,e.treeQuery=_.SparqlTreeService.getClassTreeQuery,e.itemQuery=E.SparqlItemService.getLocalItemPropertiesQuery,e.deleteItemQuery=E.SparqlItemService.deleteItemQuery,e.classQuery=g.DataModel.classQuery,e.propertyQuery=g.DataModel.propertyQuery,e.authorityEndpoints=[],e.archiveEndpoints=[],e.schemas=[],e}return(0,v.default)(t,e),(0,l.default)(t,[{key:"remoteEndpoints",value:function(){return this.archiveEndpoints.concat(this.authorityEndpoints)}},{key:"asTemplate",value:function(){var e=new k.PrimaryEndpointConfiguration;return e.autocompletionQuery=this.autocompletionQuery,e.itemQuery=this.itemQuery,e.deleteItemQuery=this.deleteItemQuery,e.treeQuery=this.treeQuery,e.propertyQuery=this.propertyQuery,e.classQuery=this.classQuery,e}},{key:"toTurtle",value:function(e,r){var n=this;if(!e.has(this.id)){r.fibra=w.FIBRA.ns,r.void=w.VOID.ns,e.set(this.id,"<"+this.id+"> a fibra:Project ;"),(0,d.default)(t.prototype.__proto__||(0,o.default)(t.prototype),"toTurtle",this).call(this,e,r);var i=e.get(this.id);this.schemas.length>0&&(i+="\nfibra:schema ",this.schemas.forEach(function(e){i=i+"<"+e.id+">, "}),i=i.substring(0,i.length-2)+" ;",this.schemas.filter(function(e){return e.source.sparqlEndpoint!==n.source.sparqlEndpoint||n.source.graph!==e.source.graph}).forEach(function(e){i=i+"\nfibra:schemaReference [\n  rdf:value <"+e.id+"> ;\n  void:sparqlEndpoint <"+e.source.sparqlEndpoint+"> ;",e.source.graph&&(i=i+"\n  fibra:graph <"+e.source.graph+">"),i+="\n] ;"})),this.authorityEndpoints.length>0&&(i+="\nfibra:authorityEndpoint ",this.authorityEndpoints.forEach(function(e){i=i+"<"+e.id+">, "}),i=i.substring(0,i.length-2)+" ;",this.authorityEndpoints.filter(function(e){return e.source.sparqlEndpoint!==n.source.sparqlEndpoint||n.source.graph!==e.source.graph}).forEach(function(e){i=i+"\nfibra:authorityEndpointReference [\n  rdf:value <"+e.id+"> ;\n  void:sparqlEndpoint <"+e.source.sparqlEndpoint+"> ;",e.source.graph&&(i=i+"\n  fibra:graph <"+e.source.graph+">"),i+="\n] ;"})),this.archiveEndpoints.length>0&&(i+="\nfibra:archiveEndpoint ",this.archiveEndpoints.forEach(function(e){i=i+"<"+e.id+">, "}),i=i.substring(0,i.length-2)+" ;",this.archiveEndpoints.filter(function(e){return e.source.sparqlEndpoint!==n.source.sparqlEndpoint||n.source.graph!==e.source.graph}).forEach(function(e){i=i+"\nfibra:archiveEndpointReference [\n  rdf:value <"+e.id+"> ;\n  void:sparqlEndpoint <"+e.source.sparqlEndpoint+"> ;",e.source.graph&&(i=i+"\n  fibra:graph <"+e.source.graph+">"),i+="\n] ;"})),this.graph&&(i=i+"\nfibra:graph <"+this.graph+"> ;"),i=i+"\nfibra:autocompletionQuery "+b.SparqlService.stringToSPARQLString(this.autocompletionQuery)+" ;\nfibra:treeQuery "+b.SparqlService.stringToSPARQLString(this.treeQuery)+" ;\nfibra:itemQuery "+b.SparqlService.stringToSPARQLString(this.itemQuery)+" ;\nfibra:deleteItemQuery "+b.SparqlService.stringToSPARQLString(this.deleteItemQuery)+" ;\nfibra:classQuery "+b.SparqlService.stringToSPARQLString(this.classQuery)+" ;\nfibra:propertyQuery "+b.SparqlService.stringToSPARQLString(this.propertyQuery)+" ;\nvoid:sparqlEndpoint <"+this.endpoint+"> ;\nfibra:updateEndpoint <"+this.updateEndpoint+"> ;\nfibra:graphStoreEndpoint <"+this.graphStoreEndpoint+"> ;\nfibra:schemaNS "+b.SparqlService.stringToSPARQLString(this.schemaNS)+" ;\nfibra:instanceNS "+b.SparqlService.stringToSPARQLString(this.instanceNS)+" .",e.set(this.id,i)}}}]),t}(y.Citable);x.listProjectsQuery="PREFIX fibra: <http://hdlab.stanford.edu/fibra/ontology#>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX dcterms: <http://purl.org/dc/terms/>\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\nPREFIX void: <http://rdfs.org/ns/void#>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nSELECT ?id ?labels ?descriptions ?url ?dateCreated ?rightsHolders ?rightsHolders_labels ?rightsHolders_descriptions ?rightsHolder_surl ?rightsHolders_order ?instanceNS ?schemaNS ?endpoint ?graphStoreEndpoint ?updateEndpoint ?graph ?autocompletionQuery ?treeQuery ?itemQuery ?deleteItemQuery ?authorityEndpoints ?authorityEndpoints_source_graph ?authorityEndpoints_source_sparqlEndpoint ?archiveEndpoints ?archiveEndpoints_source_graph ?archiveEndpoints_source_sparqlEndpoint ?schemas ?schemas_source_graph ?schemas_source_sparqlEndpoint {\n# STARTGRAPH\n  ?id a fibra:Project .\n  {\n    ?id skos:prefLabel ?labels\n  } UNION {\n    ?id fibra:instanceNS ?instanceNS .\n    ?id fibra:schemaNS ?schemaNS .\n    ?id void:sparqlEndpoint ?endpoint .\n    ?id fibra:updateEndpoint ?updateEndpoint .\n    ?id fibra:graphStoreEndpoint ?graphStoreEndpoint .\n    ?id fibra:autocompletionQuery ?autocompletionQuery .\n    ?id fibra:treeQuery ?treeQuery .\n    ?id fibra:itemQuery ?itemQuery .\n    ?id fibra:deleteItemQuery ?deleteItemQuery .\n    OPTIONAL { ?id fibra:graph ?graph }\n    OPTIONAL { ?id dcterms:created ?dateCreated }\n    OPTIONAL { ?id foaf:homepage ?url }\n  } UNION {\n    ?id fibra:schema ?schemas\n  } UNION {\n    ?id fibra:schemaReference ?ar .\n    ?ar rdf:value ?schemas .\n    ?ar void:sparqlEndpoint ?schemas_source_sparqlEndpoint .\n    OPTIONAL { ?ar fibra:graph ?schemas_source_graph }\n  } UNION {\n    ?id fibra:authorityEndpoint ?authorityEndpoints\n  } UNION {\n    ?id fibra:authorityEndpointReference ?ar .\n    ?ar rdf:value ?authorityEndpoints .\n    ?ar void:sparqlEndpoint ?authorityEndpoints_source_sparqlEndpoint .\n    OPTIONAL { ?ar fibra:graph ?authorityEndpoints_source_graph }\n  } UNION {\n    ?id fibra:archiveEndpoint ?archiveEndpoints\n  } UNION {\n    ?id fibra:archiveEndpointReference ?ar .\n    ?ar rdf:value ?archiveEndpoints .\n    ?ar void:sparqlEndpoint ?archiveEndpoints_source_sparqlEndpoint .\n    OPTIONAL { ?ar fibra:graph ?archiveEndpoints_source_graph }\n  } UNION {\n    ?id dcterms:description ?descriptions\n  } UNION {\n    {\n      ?id dcterms:rightsHolder ?rightsHolders\n    } UNION {\n      ?id fibra:qualifiedAssertion ?qa .\n      ?qa rdf:predicate dcterms:rightsHolder .\n      ?qa rdf:object ?rightsHolders .\n      OPTIONAL { ?qa fibra:order ?rightsHolders_order }\n    }\n    {\n      ?rightsHolders skos:prefLabel ?rightsHolders_labels\n    } UNION {\n      ?rightsHolders foaf:homepage ?rightsHolders_url\n    } UNION {\n      ?rightsHolders dcterms:description ?rightsHolders_descriptions\n    }\n  }\n# ENDGRAPH\n}",x.projectQuery="PREFIX fibra: <http://hdlab.stanford.edu/fibra/ontology#>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX dcterms: <http://purl.org/dc/terms/>\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\nPREFIX void: <http://rdfs.org/ns/void#>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nSELECT ?labels ?descriptions ?url ?dateCreated ?rightsHolders ?rightsHolders_labels ?rightsHolders_descriptions ?rightsHolder_surl ?rightsHolders_order ?instanceNS ?schemaNS ?endpoint ?graphStoreEndpoint ?updateEndpoint ?graph ?autocompletionQuery ?treeQuery ?itemQuery ?deleteItemQuery ?authorityEndpoints ?authorityEndpoints_source_graph ?authorityEndpoints_source_sparqlEndpoint ?archiveEndpoints ?archiveEndpoints_source_graph ?archiveEndpoints_source_sparqlEndpoint ?schemas ?schemas_source_graph ?schemas_source_sparqlEndpoint {\n# STARTGRAPH\n  {\n    <ID> skos:prefLabel ?labels\n  } UNION {\n    <ID> fibra:instanceNS ?instanceNS .\n    <ID> fibra:schemaNS ?schemaNS .\n    <ID> void:sparqlEndpoint ?endpoint .\n    <ID> fibra:updateEndpoint ?updateEndpoint .\n    <ID> fibra:graphStoreEndpoint ?graphStoreEndpoint .\n    <ID> fibra:autocompletionQuery ?autocompletionQuery .\n    <ID> fibra:treeQuery ?treeQuery .\n    <ID> fibra:itemQuery ?itemQuery .\n    <ID> fibra:deleteItemQuery ?deleteItemQuery .\n    OPTIONAL { <ID> fibra:graph ?graph }\n    OPTIONAL { <ID> foaf:homepage ?url }\n    OPTIONAL { <ID> dcterms:created ?dateCreated }\n  } UNION {\n    <ID> fibra:schema ?schemas\n  } UNION {\n    <ID> fibra:schemaReference ?ar .\n    ?ar rdf:value ?schemas .\n    ?ar void:sparqlEndpoint ?schemas_source_sparqlEndpoint .\n    OPTIONAL { ?ar fibra:graph ?schemas_source_graph }\n  } UNION {\n    <ID> fibra:authorityEndpoint ?authorityEndpoints\n  } UNION {\n    <ID> fibra:authorityEndpointReference ?ar .\n    ?ar rdf:value ?authorityEndpoints .\n    ?ar void:sparqlEndpoint ?authorityEndpoints_source_sparqlEndpoint .\n    OPTIONAL { ?ar fibra:graph ?authorityEndpoints_source_graph }\n  } UNION {\n    <ID> fibra:archiveEndpoint ?archiveEndpoints\n  } UNION {\n    <ID> fibra:archiveEndpointReference ?ar .\n    ?ar rdf:value ?archiveEndpoints .\n    ?ar void:sparqlEndpoint ?archiveEndpoints_source_sparqlEndpoint .\n    OPTIONAL { ?ar fibra:graph ?archiveEndpoints_source_graph }\n  } UNION {\n    <ID> dcterms:description ?descriptions\n  } UNION {\n    {\n      <ID> dcterms:rightsHolder ?rightsHolders\n    } UNION {\n      <ID> fibra:qualifiedAssertion ?qa .\n      ?qa rdf:predicate dcterms:rightsHolder .\n      ?qa rdf:object ?rightsHolders .\n      OPTIONAL { ?qa fibra:order ?rightsHolders_order }\n    }\n    {\n      ?rightsHolders skos:prefLabel ?rightsHolders_labels\n    } UNION {\n      ?rightsHolders foaf:homepage ?rightsHolders_url\n    } UNION {\n      ?rightsHolders dcterms:description ?rightsHolders_descriptions\n    }\n  }\n# ENDGRAPH\n}"},function(e,t,r){"use strict";function n(e,t){var r="";for(var n in e)r=r+"@prefix "+n+": <"+e[n]+"> .\n";return t.values().forEach(function(e){return r=r+e.substring(0,e.length-2)+" .\n\n"}),r}function i(e){var t={},r=new s.FMap;return e.toTurtle(r,t),n(t,r)}function o(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,r=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return u[255&e]+u[e>>8&255]+u[e>>16&255]+u[e>>24&255]+"-"+u[255&t]+u[t>>8&255]+"-"+u[t>>16&15|64]+u[t>>24&255]+"-"+u[63&r|128]+u[r>>8&255]+"-"+u[r>>16&255]+u[r>>24&255]+u[255&n]+u[n>>8&255]+u[n>>16&255]+u[n>>24&255]}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.reduce(function(e,t){return e.concat(Array.isArray(t)?a(t):t)},t)}Object.defineProperty(t,"__esModule",{value:!0}),t.toTurtle=n,t.citableToTurtle=i,t.UUID=o,t.flatten=a;for(var s=r(17),u=[],l=0;l<256;l++)u[l]=(l<16?"0":"")+l.toString(16)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteEndpointConfiguration=void 0;var i=r(8),o=n(i),a=r(1),s=n(a),u=r(3),l=n(u),c=r(13),f=n(c),p=r(36),d=n(p),h=r(14),v=n(h),y=r(28),g=r(6),b=r(46),m=r(29),_=r(24),E=r(47),k=r(23),w=t.RemoteEndpointConfiguration=function(e){function t(){(0,s.default)(this,t);var e=(0,f.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments));return e.types=[],e.autocompletionQuery=b.SparqlAutocompleteService.defaultMatchQuery,e.propertyQuery=m.DataModel.propertyQuery,e.classQuery=m.DataModel.classQuery,e.itemQuery=_.SparqlItemService.getRemoteItemPropertiesQuery,e.treeQuery=E.SparqlTreeService.getClassTreeQuery,e}return(0,v.default)(t,e),(0,l.default)(t,[{key:"toTurtle",value:function(e,r){if(console.log(e),!e.has(this.id)){r.fibra=g.FIBRA.ns,r.void=g.VOID.ns,r.rdf=g.RDF.ns;var n="<"+this.id+"> a ";this.types.forEach(function(e){return n+=e.toCanonical()+" ,"}),n=n.substring(0,n.length-2)+" ;",e.set(this.id,n),(0,d.default)(t.prototype.__proto__||(0,o.default)(t.prototype),"toTurtle",this).call(this,e,r),n=e.get(this.id),n=n+"\nvoid:sparqlEndpoint <"+this.endpoint+"> ;\nfibra:autocompletionQuery "+k.SparqlService.stringToSPARQLString(this.autocompletionQuery)+" ;\nfibra:itemQuery "+k.SparqlService.stringToSPARQLString(this.itemQuery)+" ;\nfibra:treeQuery "+k.SparqlService.stringToSPARQLString(this.treeQuery)+" ;\nfibra:propertyQuery "+k.SparqlService.stringToSPARQLString(this.propertyQuery)+" ;\nfibra:classQuery "+k.SparqlService.stringToSPARQLString(this.classQuery)+" .",e.set(this.id,n)}}}]),t}(y.Citable);w.listAuthorityEndpointConfigurationsQuery="PREFIX fibra: <http://hdlab.stanford.edu/fibra/ontology#>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX dcterms: <http://purl.org/dc/terms/>\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\nPREFIX void: <http://rdfs.org/ns/void#>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nSELECT ?id ?types ?labels ?descriptions ?rightsHolders ?rightsHolders_labels ?rightsHolders_descriptions ?rightsHolders_url ?rightsHolders_order ?url ?endpoint ?autocompletionQuery ?itemQuery ?treeQuery ?propertyQuery ?classQuery {\n# STARTGRAPH\n  ?id a fibra:AuthorityEndpointConfiguration .\n  ?id a ?types .\n  { ?id skos:prefLabel ?labels }\n  UNION\n  { ?id dcterms:description ?descriptions }\n  UNION\n  {\n    ?id void:sparqlEndpoint ?endpoint .\n    ?id fibra:autocompletionQuery ?autocompletionQuery .\n    ?id fibra:itemQuery ?itemQuery .\n    ?id fibra:treeQuery ?treeQuery .\n    ?id fibra:propertyQuery ?propertyQuery .\n    ?id fibra:classQuery ?classQuery .\n    OPTIONAL { ?id foaf:homepage ?url }\n  } UNION {\n    {\n      ?id dcterms:rightsHolder ?rightsHolders\n    } UNION {\n      ?id fibra:qualifiedAssertion ?qa .\n      ?qa rdf:predicate dcterms:rightsHolder .\n      ?qa rdf:object ?rightsHolders .\n      OPTIONAL { ?qa fibra:order ?rightsHolders_order }\n    }\n    {\n      ?rightsHolders skos:prefLabel ?rightsHolders_labels\n    } UNION {\n      ?rightsHolders foaf:homepage ?rightsHolders_url\n    } UNION {\n      ?rightsHolders dcterms:description ?rightsHolders_descriptions\n    }\n  }\n# ENDGRAPH\n}",w.listArchiveEndpointConfigurationsQuery=w.listAuthorityEndpointConfigurationsQuery.replace(/fibra:AuthorityEndpointConfiguration/,"fibra:ArchiveEndpointConfiguration"),w.remoteEndpointConfigurationQuery="PREFIX fibra: <http://hdlab.stanford.edu/fibra/ontology#>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX dcterms: <http://purl.org/dc/terms/>\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\nPREFIX void: <http://rdfs.org/ns/void#>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nSELECT ?types ?labels ?descriptions ?rightsHolders ?rightsHolders_labels ?rightsHolders_descriptions ?rightsHolders_url ?rightsHolders_order ?url ?endpoint ?autocompletionQuery ?itemQuery ?treeQuery ?propertyQuery ?classQuery {\n# STARTGRAPH\n  { <ID> skos:prefLabel ?labels }\n  UNION\n  { <ID> dcterms:description ?descriptions }\n  UNION\n  {\n    <ID> a ?types .\n    <ID> void:sparqlEndpoint ?endpoint .\n    <ID> fibra:autocompletionQuery ?autocompletionQuery .\n    <ID> fibra:itemQuery ?itemQuery .\n    <ID> fibra:treeQuery ?treeQuery .\n    <ID> fibra:propertyQuery ?propertyQuery .\n    <ID> fibra:classQuery ?classQuery .\n    OPTIONAL { <ID> foaf:homepage ?url }\n  } UNION {\n    {\n      <ID> dcterms:rightsHolder ?rightsHolders\n    } UNION {\n      <ID> fibra:qualifiedAssertion ?qa .\n      ?qa rdf:predicate dcterms:rightsHolder .\n      ?qa rdf:object ?rightsHolders .\n      OPTIONAL { ?qa fibra:order ?rightsHolders_order }\n    }\n    {\n      ?rightsHolders skos:prefLabel ?rightsHolders_labels\n    } UNION {\n      ?rightsHolders foaf:homepage ?rightsHolders_url\n    } UNION {\n      ?rightsHolders dcterms:description ?rightsHolders_descriptions\n    }\n  }\n# ENDGRAPH\n}"},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Schema=void 0;var i=r(8),o=n(i),a=r(1),s=n(a),u=r(3),l=n(u),c=r(13),f=n(c),p=r(36),d=n(p),h=r(14),v=n(h),y=r(28),g=r(29),b=r(6),m=r(23),_=t.Schema=function(e){function t(){(0,s.default)(this,t);var e=(0,f.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments));return e.classQuery=g.DataModel.classQuery,e.propertyQuery=g.DataModel.propertyQuery,e}return(0,v.default)(t,e),(0,l.default)(t,[{key:"toTurtle",value:function(e,r){if(!e.has(this.id)){r.fibra=b.FIBRA.ns,r.void=b.VOID.ns,e.set(this.id,"<"+this.id+"> a fibra:Schema ;"),(0,d.default)(t.prototype.__proto__||(0,o.default)(t.prototype),"toTurtle",this).call(this,e,r);var n=e.get(this.id);n=n+"\nvoid:sparqlEndpoint <"+this.endpoint+"> ;\nfibra:classQuery "+m.SparqlService.stringToSPARQLString(this.classQuery)+" ;\nfibra:propertyQuery "+m.SparqlService.stringToSPARQLString(this.propertyQuery)+" .",e.set(this.id,n)}}}]),t}(y.Citable);_.listSchemasQuery="PREFIX fibra: <http://hdlab.stanford.edu/fibra/ontology#>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX dcterms: <http://purl.org/dc/terms/>\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nPREFIX void: <http://rdfs.org/ns/void#>\nSELECT ?id ?labels ?descriptions ?rightsHolders ?rightsHolders_labels ?rightsHolders_descriptions ?rightsHolders_url ?rightsHolders_order ?url ?endpoint ?classQuery ?propertyQuery {\n# STARTGRAPH\n  ?id a fibra:Schema .\n  { ?id skos:prefLabel ?labels }\n  UNION\n  { ?id dcterms:description ?descriptions }\n  UNION\n  { ?id foaf:homepage ?url }\n  UNION\n  {\n    ?id void:sparqlEndpoint ?endpoint .\n    ?id fibra:classQuery ?classQuery .\n    ?id fibra:propertyQuery ?propertyQuery .\n  } UNION {\n    {\n      ?id dcterms:rightsHolder ?rightsHolders\n    } UNION {\n      ?id fibra:qualifiedAssertion ?qa .\n      ?qa rdf:predicate dcterms:rightsHolder .\n      ?qa rdf:object ?rightsHolders .\n      OPTIONAL { ?qa fibra:order ?rightsHolders_order }\n    }\n    {\n      ?rightsHolders skos:prefLabel ?rightsHolders_labels\n    } UNION {\n      ?rightsHolders foaf:homepage ?rightsHolders_url\n    } UNION {\n      ?rightsHolders dcterms:description ?rightsHolders_descriptions\n    }\n  }\n# ENDGRAPH\n}",_.schemaQuery="PREFIX fibra: <http://hdlab.stanford.edu/fibra/ontology#>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX dcterms: <http://purl.org/dc/terms/>\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\nPREFIX void: <http://rdfs.org/ns/void#>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nSELECT ?labels ?descriptions ?rightsHolders ?rightsHolders_labels ?rightsHolders_descriptions ?rightsHolders_url ?rightsHolders_order ?url ?endpoint ?classQuery ?propertyQuery {\n# STARTGRAPH\n  { <ID> skos:prefLabel ?labels }\n  UNION\n  { <ID> dcterms:description ?descriptions }\n  UNION\n  {\n    <ID> void:sparqlEndpoint ?endpoint .\n    <ID> fibra:classQuery ?classQuery .\n    <ID> fibra:propertyQuery ?propertyQuery .\n  } UNION {\n    {\n      <ID> dcterms:rightsHolder ?rightsHolders\n    } UNION {\n      <ID> fibra:qualifiedAssertion ?qa .\n      ?qa rdf:predicate dcterms:rightsHolder .\n      ?qa rdf:object ?rightsHolders .\n      OPTIONAL { ?qa fibra:order ?rightsHolders_order }\n    }\n    {\n      ?rightsHolders skos:prefLabel ?rightsHolders_labels\n    } UNION {\n      ?rightsHolders foaf:homepage ?rightsHolders_url\n    } UNION {\n      ?rightsHolders dcterms:description ?rightsHolders_descriptions\n    }\n  }\n# ENDGRAPH\n}\n"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(105),i=r(186),o=r(187),a=r(188),s=r(110);r(109);r.d(t,"createStore",function(){return n.b}),r.d(t,"combineReducers",function(){return i.a}),r.d(t,"bindActionCreators",function(){return o.a}),r.d(t,"applyMiddleware",function(){return a.a}),r.d(t,"compose",function(){return s.a})},function(e,t,r){"use strict";function n(e,t,r){function o(){g===y&&(g=y.slice())}function u(){return v}function l(e){if("function"!=typeof e)throw new Error("Expected listener to be a function.");var t=!0;return o(),g.push(e),function(){if(t){t=!1,o();var r=g.indexOf(e);g.splice(r,1)}}}function c(e){if(!Object(i.a)(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(b)throw new Error("Reducers may not dispatch actions.");try{b=!0,v=h(v,e)}finally{b=!1}for(var t=y=g,r=0;r<t.length;r++){(0,t[r])()}return e}function f(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");h=e,c({type:s.INIT})}function p(){var e,t=l;return e={subscribe:function(e){function r(){e.next&&e.next(u())}if("object"!=typeof e)throw new TypeError("Expected the observer to be an object.");return r(),{unsubscribe:t(r)}}},e[a.a]=function(){return this},e}var d;if("function"==typeof t&&void 0===r&&(r=t,t=void 0),void 0!==r){if("function"!=typeof r)throw new Error("Expected the enhancer to be a function.");return r(n)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var h=e,v=t,y=[],g=y,b=!1;return c({type:s.INIT}),d={dispatch:c,subscribe:l,getState:u,replaceReducer:f},d[a.a]=p,d}r.d(t,"a",function(){return s}),t.b=n;var i=r(106),o=r(183),a=r.n(o),s={INIT:"@@redux/INIT"}},function(e,t,r){"use strict";function n(e){if(!Object(a.a)(e)||Object(i.a)(e)!=s)return!1;var t=Object(o.a)(e);if(null===t)return!0;var r=f.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&c.call(r)==p}var i=r(175),o=r(180),a=r(182),s="[object Object]",u=Function.prototype,l=Object.prototype,c=u.toString,f=l.hasOwnProperty,p=c.call(Object);t.a=n},function(e,t,r){"use strict";var n=r(176),i=n.a.Symbol;t.a=i},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){"use strict"},function(e,t,r){"use strict";function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}t.a=n},function(e,t,r){"use strict";function n(e){return function(t){return u.default.resolve(t({type:l,payload:e}))}}function i(e,t){return function(r){return u.default.resolve(r({type:c,payload:{clss:e,property:t}}))}}function o(e,t){return function(r){return u.default.resolve(r({type:p,payload:{clss:e,property:t}}))}}function a(e,t,r){return function(n){return u.default.resolve(n({type:f,payload:{clss:e,property:t,selection:r}}))}}Object.defineProperty(t,"__esModule",{value:!0}),t.CLEAR_FILTER_STATE=t.REMOVE_FILTER=t.SET_FILTER_SELECTION=t.SET_FILTER_FOR_CLASS_AND_PROP=t.SET_FILTER_DIVIDER_PERCENTAGE=void 0;var s=r(72),u=function(e){return e&&e.__esModule?e:{default:e}}(s);t.setFilterDividerPercentage=n,t.setFilter=i,t.removeFilter=o,t.setFilterSelection=a;var l=t.SET_FILTER_DIVIDER_PERCENTAGE="SET_FILTER_DIVIDER_PERCENTAGE",c=t.SET_FILTER_FOR_CLASS_AND_PROP="SET_FILTER_FOR_CLASS_AND_PROP",f=t.SET_FILTER_SELECTION="SET_FILTER_SELECTION",p=t.REMOVE_FILTER="REMOVE_FILTER";t.CLEAR_FILTER_STATE="CLEAR_FILTER_STATE"},function(e,t,r){var n=r(11),i=r(39),o=r(5)("species");e.exports=function(e,t){var r,a=n(e).constructor;return void 0===a||void 0==(r=n(a)[o])?t:i(r)}},function(e,t,r){var n,i,o,a=r(32),s=r(208),u=r(93),l=r(53),c=r(4),f=c.process,p=c.setImmediate,d=c.clearImmediate,h=c.MessageChannel,v=c.Dispatch,y=0,g={},b=function(){var e=+this;if(g.hasOwnProperty(e)){var t=g[e];delete g[e],t()}},m=function(e){b.call(e.data)};p&&d||(p=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return g[++y]=function(){s("function"==typeof e?e:Function(e),t)},n(y),y},d=function(e){delete g[e]},"process"==r(33)(f)?n=function(e){f.nextTick(a(b,e,1))}:v&&v.now?n=function(e){v.now(a(b,e,1))}:h?(i=new h,o=i.port2,i.port1.onmessage=m,n=a(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(n=function(e){c.postMessage(e+"","*")},c.addEventListener("message",m,!1)):n="onreadystatechange"in l("script")?function(e){u.appendChild(l("script")).onreadystatechange=function(){u.removeChild(this),b.call(e)}}:function(e){setTimeout(a(b,e,1),0)}),e.exports={set:p,clear:d}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,r){var n=r(11),i=r(20),o=r(73);e.exports=function(e,t){if(n(e),i(t)&&t.constructor===e)return t;var r=o.f(e);return(0,r.resolve)(t),r.promise}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CLEAR_SOURCES_STATE=t.ADD_SOURCE=t.SET_SOURCE_CLASS_ACTIVE=void 0;var n=r(72),i=function(e){return e&&e.__esModule?e:{default:e}}(n),o=t.SET_SOURCE_CLASS_ACTIVE="SET_SOURCE_CLASS_ACTIVE",a=t.ADD_SOURCE="ADD_SOURCE";t.CLEAR_SOURCES_STATE="CLEAR_SOURCES_STATE";t.default={setSourceClassActive:function(e,t,r){return function(n){return i.default.resolve(n({type:o,payload:{source:e,clss:t,status:r}}))}},addSource:function(e){return function(t){return i.default.resolve(t({type:a,payload:e}))}}}},function(e,t,r){"use strict";t.__esModule=!0;var n=r(98),i=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(e,t,r){return t in e?(0,i.default)(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},function(e,t,r){var n=r(220).QueryEngine,i=r(258).QuadBackend,o=r(259).PersistentQuadBackend,a=r(135).Lexicon,s=r(260).PersistentLexicon,u=r(77),l=r(0);Store=function(e,t){var r=null,u=null;if(0==arguments.length)u={};else if(1==arguments.length)u={},r=e;else{if(!(arguments.length>1))throw"An optional argument map and a callback must be provided";u=e,r=t}null==u.treeOrder&&(u.treeOrder=15);var l=a,c=i;!0===u.persistent&&(l=s,c=o),this.functionMap={};var f=this;this.customFns={},new l(function(e){var t=function(){new c(u,function(t){var i=function(){u.backend=t,u.lexicon=e,f.engine=new n(u),r(null,f)};u.overwrite?t.clear(i):i()})};!0===u.overwrite?e.clear(t):t()},u.name)},Store.prototype.rdf=u.rdf,Store.prototype.rdf.api=u,Store.prototype.registerCustomFunction=function(e,t){this.customFns[e]=t,this.engine.setCustomFunctions(this.customFns)},Store.prototype.execute=function(){if(3===arguments.length)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2]);else if(4===arguments.length)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2],arguments[3]);else{var e,t;if(1===arguments.length){e=arguments[0];var t=function(){}}else 2===arguments.length&&(e=arguments[0],t=arguments[1]);this.engine.execute(e,t)}},Store.prototype.executeWithEnvironment=function(){var e,t,r;if(3===arguments.length){e=arguments[0];var n=function(){};t=arguments[1],r=arguments[2]}else if(4===arguments.length){e=arguments[0];var n=arguments[3];t=arguments[1],r=arguments[2]}t=l.map(t,function(e){return{token:"uri",value:e}}),r=l.map(r,function(e){return{token:"uri",value:e}}),this.engine.execute(e,n,t,r)},Store.prototype.graph=function(){var e=null,t=null;if(1===arguments.length)t=arguments[0]||function(){},e=this.engine.lexicon.defaultGraphUri;else{if(2!==arguments.length)throw"An optional graph URI and a callback function must be provided";t=arguments[1]||function(){},e=arguments[0]}null!=this.rdf.resolve(e)&&(e=this.rdf.resolve(e)),this.engine.execute("CONSTRUCT { ?s ?p ?o } WHERE { GRAPH <"+e+"> { ?s ?p ?o } }",t)},Store.prototype.node=function(){var e=null,t=null,r=null;if(2===arguments.length)r=arguments[0],t=arguments[1]||function(){},e=this.engine.lexicon.defaultGraphUri;else{if(3!==arguments.length)throw"An optional graph URI, node URI and a callback function must be provided";r=arguments[0],e=arguments[1],t=arguments[2]||function(){}}null!=this.rdf.resolve(e)&&(e=this.rdf.resolve(e)),null!=this.rdf.resolve(r)&&(r=this.rdf.resolve(r)),this.engine.execute("CONSTRUCT { <"+r+"> ?p ?o } WHERE { GRAPH <"+e+"> { <"+r+"> ?p ?o } }",t)},Store.prototype.startObservingNode=function(){var e,t,r;2===arguments.length?(e=arguments[0],r=arguments[1],this.engine.callbacksBackend.observeNode(e,r,function(){})):3===arguments.length&&(e=arguments[0],t=arguments[1],r=arguments[2],this.engine.callbacksBackend.observeNode(e,t,r,function(){}))},Store.prototype.stopObservingNode=function(e){this.engine.callbacksBackend.stopObservingNode(e)},Store.prototype.startObservingQuery=function(){var e=arguments[0],t=arguments[1],r=arguments[2];null!=r?this.engine.callbacksBackend.observeQuery(e,t,r):this.engine.callbacksBackend.observeQuery(e,t,function(){})},Store.prototype.stopObservingQuery=function(e){this.engine.callbacksBackend.stopObservingQuery(e)},Store.prototype.subscribe=function(e,t,r,n,i){var o=this,a=function(e,t){var r=[],n={blanks:{},outCache:{}},a=[];l.each(t,function(e){var t=u.buildRDFResource(e.subject,a,o.engine,n),i=u.buildRDFResource(e.predicate,a,o.engine,n),s=u.buildRDFResource(e.object,a,o.engine,n);null!=t&&null!=i&&null!=s&&(e=new u.Triple(t,i,s),r.push(e))}),i(e,r)};this.functionMap[i]=a,this.engine.callbacksBackend.subscribe(e,t,r,n,a,function(){})},Store.prototype.unsubscribe=function(e){var t=this.functionMap[e];this.engine.callbacksBackend.unsubscribe(t),delete this.functionMap[e]},Store.prototype.setPrefix=function(e,t){this.rdf.setPrefix(e,t)},Store.prototype.setDefaultPrefix=function(e){this.rdf.setDefaultPrefix(e)},Store.prototype.insert=function(){var e,t,r;if(1===arguments.length)t=arguments[0],r=function(){};else if(2===arguments.length)t=arguments[0],r=arguments[1]||function(){};else{if(3!==arguments.length)throw"The triples to insert, an optional graph and callback must be provided";t=arguments[0],e=this.rdf.createNamedNode(arguments[1]),r=arguments[2]||function(){}}var n="",i=this;t.forEach(function(e){n=n+i._nodeToQuery(e.subject)+i._nodeToQuery(e.predicate)+i._nodeToQuery(e.object)+"."}),n=null!=e?"INSERT DATA { GRAPH "+this._nodeToQuery(e)+" { "+n+" } }":"INSERT DATA { "+n+" }",this.engine.execute(n,r)},Store.prototype._nodeToQuery=function(e){if("NamedNode"===e.interfaceName){var t=this.rdf.resolve(e.valueOf());return null!=t?"<"+t+">":"<"+e.valueOf()+">"}return e.toString()},Store.prototype.delete=function(){var e,t,r;if(1===arguments.length)t=arguments[0],r=function(){};else if(2===arguments.length)t=arguments[0],r=arguments[1]||function(){};else{if(3!==arguments.length)throw"The triples to delete, an optional graph and callback must be provided";t=arguments[0],e=this.rdf.createNamedNode(arguments[1]),r=arguments[2]||function(){}}var n="",i=this;t.forEach(function(e){n=n+i._nodeToQuery(e.subject)+i._nodeToQuery(e.predicate)+i._nodeToQuery(e.object)+"."}),n=null!=e?"DELETE DATA { GRAPH "+this._nodeToQuery(e)+" { "+n+" } }":"DELETE DATA { "+n+" }",this.engine.execute(n,r)},Store.prototype.clear=function(){var e,t;if(0===arguments.length){e=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri);var t=function(){}}else if(1===arguments.length)e=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),t=arguments[0]||function(){};else{if(2!==arguments.length)throw"The optional graph and a callback must be provided";e=this.rdf.createNamedNode(arguments[0]),t=arguments[1]||function(){}}var r="CLEAR GRAPH "+this._nodeToQuery(e);this.engine.execute(r,t)},Store.prototype.setBatchLoadEvents=function(e){this.engine.eventsOnBatchLoad=e},Store.prototype.registerDefaultNamespace=function(e,t){this.rdf.prefixes.set(e,t),this.engine.registerDefaultNamespace(e,t)},Store.prototype.registerDefaultProfileNamespaces=function(){var e=this.rdf.prefixes.values();for(var t in e)this.registerDefaultNamespace(t,e[t])},Store.prototype.load=function(){var e,t,r,n,i={};if(3===arguments.length)r=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),e=arguments[0],t=arguments[1],n=arguments[2]||function(){};else if(4===arguments.length)e=arguments[0],t=arguments[1],i=arguments[2],"string"==typeof i?(r=this.rdf.createNamedNode(i),i={}):(r=this.rdf.createNamedNode(i.graph||this.engine.lexicon.defaultGraphUri),delete i.graph),n=arguments[3]||function(){};else if(2===arguments.length)throw"The mediaType of the parser, the data a callback and an optional graph must be provided";if("remote"===e){t=this.rdf.createNamedNode(t);var o="LOAD <"+t.valueOf()+"> INTO GRAPH <"+r.valueOf()+">";this.engine.execute(o,n)}else{var a=this,s=this.engine.rdfLoader.parsers[e];if(!s)return n(new Error("Cannot find parser for the provided media type:"+e));var u=function(e,t){e?n(e,t):a.engine.batchLoad(t,function(e){null!=e?n(null,e):n(new Error("Erro batch-loading triples."))})},l=[s,{token:"uri",value:r.valueOf()},t,i,u];t&&"string"==typeof t&&0===t.indexOf("file://")?this.engine.rdfLoader.loadFromFile.apply(null,l):this.engine.rdfLoader.tryToParse.apply(null,l)}},Store.prototype.registerParser=function(e,t){this.engine.rdfLoader.registerParser(e,t)},Store.prototype.registeredGraphs=function(e){this.engine.lexicon.registeredGraphs(!0,function(t){var r=l.map(t,function(e){return new u.NamedNode(e)});e(null,r)})},Store.prototype.getNetworkTransport=function(){return NetworkTransport},Store.prototype.setNetworkTransport=function(e){NetworkTransport=e},Store.prototype.close=function(e){null==e&&(e=function(){}),this.engine.close?this.engine.close(e):e()},Store.VERSION="0.9.17";var c=function(){var e;(e=1==arguments.length?arguments[0]:2==arguments.length?arguments[1]:arguments[2])(new Error("Store#connect is not supported in the 0.9.X series of the library"))},f=function(){return 1==arguments.length?new Store(arguments[0]):2==arguments.length?new Store(arguments[0],arguments[1]):new Store};Store.yieldFrequency=function(e){l.yieldFrequency(e)},e.exports.Store=Store,e.exports.create=f,e.exports.connect=c},function(e,t,r){var n=r(0),i=n,o=r(0);QueryFilters={};var a="http://www.w3.org/2001/XMLSchema#";QueryFilters.checkFilters=function(e,t,r,n,i,a,s){var u=[];e.filter&&"function"!=typeof e.filter&&(u=e.filter);var l=[];if(null==u||0===u.length||null!=e.length)return s(t);QueryFilters.preprocessExistentialFilters(u,t,a,n,i,function(e){o.eachSeries(e,function(e,o){QueryFilters.run(e.value,t,r,n,i,a,function(e){for(var r=[],n=0;n<e.length;n++){var i=e[n];null!=i.__nullify__?l.push(i):r.push(i)}t=r,o()})},function(){s(t.concat(l))})})},QueryFilters.preprocessExistentialFilters=function(e,t,r,n,a,s){var u=[];o.eachSeries(e,function(e,s){if("builtincall"!==e.value.expressionType||"exists"!==e.value.builtincall&&"notexists"!==e.value.builtincall)if("conditionalor"===e.value.expressionType||"conditionaland"===e.value.expressionType){var l=i.map(e.value.operands,function(e){return{value:e}});QueryFilters.preprocessExistentialFilters(l,t,r,n,a,function(t){e.value.operands=t.map(function(e){return e.value}),u.push(e),s()})}else if("multiplicativeexpression"===e.value.expressionType){var l=i.map(e.value.factors,function(e){return{value:e}});QueryFilters.preprocessExistentialFilters(l,t,r,n,a,function(t){e.value.factors=t.map(function(e){return e.value}),u.push(e),s()})}else if("additiveexpression"===e.value.expressionType){var l=i.map(e.value.summands,function(e){return{value:e}});QueryFilters.preprocessExistentialFilters(l,t,r,n,a,function(t){e.value.summands=t.map(function(e){return e.value}),u.push(e),s()})}else if("relationalexpression"===e.value.expressionType){var l=[{value:e.value.op1},{value:e.value.op2}];QueryFilters.preprocessExistentialFilters(l,t,r,n,a,function(t){e.value.op1=t[0].value,e.value.op2=t[1].value,u.push(e),s()})}else if("irireforfunction"===e.value.expressionType||"custom"===e.value.expressionType)if(null!=e.value.args){var l=i.map(e.value.args,function(e){return{value:e}});QueryFilters.preprocessExistentialFilters(l,t,r,n,a,function(t){e.value.args=t.map(function(e){return e.value}),u.push(e),s()})}else u.push(e),s();else u.push(e),s();else{var c=e.value.builtincall,f=e.value.args,p={};r.copyDenormalizedBindings(t,a.outCache,function(t){o.eachSeries(t,function(e,t){var o=i.clone(f[0],!0),s=r.abstractQueryTree.parseSelect({pattern:o},e);s=r.abstractQueryTree.bind(s.pattern,e),r.executeSelectUnit([{kind:"*"}],n,s,a,function(r){var n=null;n="exists"===c?QueryFilters.ebvBoolean(0!==r.length):QueryFilters.ebvBoolean(0===r.length);var i=[];for(var o in e)i.push(JSON.stringify(e[o]));i=i.sort().join(""),p[i]=n,t()})},function(){e.value.origArgs=e.value.args,e.value.args=p,u.push(e),s()})})}},function(){s(u)})},QueryFilters.boundVars=function(e){if(null==e.expressionType)throw"Cannot find bound expressions in a no expression token";var t=e.expressionType;if("relationalexpression"==t){var r=e.op1,n=e.op2;return QueryFilters.boundVars(r)+QueryFilters.boundVars(n)}if("conditionalor"==t||"conditionaland"==t){for(var i=[],o=0;o<e.operands;o++)i=i.concat(QueryFilters.boundVars(e.operands[o]));return i}if("builtincall"==t){if(null==e.args)return[];for(var a=[],o=0;o<e.args.length;o++)a=a.concat(QueryFilters.boundVars(e.args[o]));return a}if("multiplicativeexpression"==t){for(var a=QueryFilters.boundVars(e.factor),o=0;o<e.factors.length;o++)a=a.concat(QueryFilters.boundVars(e.factors[o].expression));return a}if("additiveexpression"==t){for(var a=QueryFilters.boundVars(e.summand),o=0;o<e.summands.length;o++)a=a.concat(QueryFilters.boundVars(e.summands[o].expression));return a}if("regex"==t){var a=QueryFilters.boundVars(e.expression1);return a.concat(QueryFilters.boundVars(e.expression2))}return"unaryexpression"==t?QueryFilters.boundVars(e.expression):"atomic"==t?"var"==e.primaryexpression?[e.value]:[]:void 0},QueryFilters.run=function(e,t,r,n,i,o,a){o.copyDenormalizedBindings(t,i.outCache,function(s){for(var u=[],l=0;l<t.length;l++){var c=s[l],f=QueryFilters.runFilter(e,c,o,n,i),f=QueryFilters.ebv(f);if(QueryFilters.isEbvError(f)){if(r){var p={__nullify__:!0,bindings:t[l]};u.push(p)}}else if(!0===f)u.push(t[l]);else if(r){var p={__nullify__:!0,bindings:t[l]};u.push(p)}}a(u)})},QueryFilters.collect=function(e,t,r,n,i,o){i.copyDenormalizedBindings(t,n.outCache,function(a){for(var s=[],u=0;u<a.length;u++){var l=a[u],c=QueryFilters.runFilter(e,l,i,r,n);s.push({binding:t[u],value:c})}return o(s)})},QueryFilters.runDistinct=function(e,t){},QueryFilters.runAggregator=function(e,t,r,i,o){if(null==t||0===t.length)return QueryFilters.ebvError();if("variable"===e.token&&"var"==e.kind)return t[0][e.value.value];if("variable"===e.token&&"aliased"===e.kind){if("atomic"===e.expression.expressionType&&"var"===e.expression.primaryexpression)return t[0][e.expression.value.value];if("aggregate"===e.expression.expressionType){if("max"===e.expression.aggregateType){for(var s=null,u=0;u<t.length;u++){var l=t[u],c=QueryFilters.runFilter(e.expression.expression,l,r,i,o);QueryFilters.isEbvError(c)||(null===s?s=c:!0===QueryFilters.runLtFunction(s,c).value&&(s=c))}return null===s?QueryFilters.ebvError():s}if("min"===e.expression.aggregateType){for(var f=null,u=0;u<t.length;u++){var l=t[u],c=QueryFilters.runFilter(e.expression.expression,l,r,i,o);QueryFilters.isEbvError(c)||(null===f?f=c:!0===QueryFilters.runGtFunction(f,c).value&&(f=c))}return null===f?QueryFilters.ebvError():f}if("count"===e.expression.aggregateType){var p={},d=0;if("*"===e.expression.expression)if(null!=e.expression.distinct&&""!=e.expression.distinct)for(var u=0;u<t.length;u++){var l=t[u],h=n.hashTerm(l);null==p[h]&&(p[h]=!0,d++)}else d=t.length;else for(var u=0;u<t.length;u++){var l=t[u],c=QueryFilters.runFilter(e.expression.expression,l,r,i,o);if(!QueryFilters.isEbvError(c))if(null!=e.expression.distinct&&""!=e.expression.distinct){var h=n.hashTerm(c);null==p[h]&&(p[h]=!0,d++)}else d++}return{token:"literal",type:a+"integer",value:""+d}}if("avg"===e.expression.aggregateType){for(var p={},v={token:"literal",type:a+"integer",value:"0"},d=0,u=0;u<t.length;u++){var l=t[u],c=QueryFilters.runFilter(e.expression.expression,l,r,i,o);if(!QueryFilters.isEbvError(c))if(null!=e.expression.distinct&&""!=e.expression.distinct){var h=n.hashTerm(c);null==p[h]&&(p[h]=!0,QueryFilters.isNumeric(c)&&(v=QueryFilters.runSumFunction(v,c),d++))}else QueryFilters.isNumeric(c)&&(v=QueryFilters.runSumFunction(v,c),d++)}var y=QueryFilters.runDivFunction(v,{token:"literal",type:a+"integer",value:""+d});return y.value=""+y.value,y}if("sum"===e.expression.aggregateType){for(var p={},v={token:"literal",type:a+"integer",value:"0"},u=0;u<t.length;u++){var l=t[u],c=QueryFilters.runFilter(e.expression.expression,l,r,i,o);if(!QueryFilters.isEbvError(c))if(null!=e.expression.distinct&&""!=e.expression.distinct){var h=n.hashTerm(c);null==p[h]&&(p[h]=!0,QueryFilters.isNumeric(c)&&(v=QueryFilters.runSumFunction(v,c)))}else QueryFilters.isNumeric(c)&&(v=QueryFilters.runSumFunction(v,c))}return v.value=""+v.value,v}var c=QueryFilters.runFilter(aggregate.expression,t[0],i,{blanks:{},outCache:{}});return c}}},QueryFilters.runFilter=function(e,t,r,i,o){if(null!=e.expressionType){var a=e.expressionType;if("relationalexpression"==a){var s=QueryFilters.runFilter(e.op1,t,r,i,o),u=QueryFilters.runFilter(e.op2,t,r,i,o);return QueryFilters.runRelationalFilter(e,s,u,t,r,i,o)}if("conditionalor"==a)return QueryFilters.runOrFunction(e,t,r,i,o);if("conditionaland"==a)return QueryFilters.runAndFunction(e,t,r,i,o);if("additiveexpression"==a)return QueryFilters.runAddition(e.summand,e.summands,t,r,i,o);if("builtincall"==a)return QueryFilters.runBuiltInCall(e.builtincall,e.args,t,r,i,o);if("multiplicativeexpression"==a)return QueryFilters.runMultiplication(e.factor,e.factors,t,r,i,o);if("unaryexpression"==a)return QueryFilters.runUnaryExpression(e.unaryexpression,e.expression,t,r,i,o);if("irireforfunction"==a)return QueryFilters.runIriRefOrFunction(e.iriref,e.args,t,r,i,o);if("regex"==a)return QueryFilters.runRegex(e.text,e.pattern,e.flags,t,r,i,o);if("custom"==a)return QueryFilters.runBuiltInCall(e.name,e.args,t,r,i,o);if("atomic"==a)return"var"==e.primaryexpression?t[e.value.value]:"object"!=typeof e.value?e.value:null==e.value.type||"object"!=typeof e.value.type?e.value:(e.value.type=n.lexicalFormBaseUri(e.value.type,o),e.value);throw"Unknown filter expression type"}throw"Cannot find bound expressions in a no expression token"},QueryFilters.isRDFTerm=function(e){return null!=e&&!!(e.token&&"literal"==e.token||e.token&&"uri"==e.token||e.token&&"blank"==e.token)},QueryFilters.RDFTermEquality=function(e,t,r,i){return"literal"===e.token&&"literal"===t.token?e.lang==t.lang&&e.type==t.type&&e.value==t.value||(null!=e.type&&null!=t.type?QueryFilters.ebvError():QueryFilters.isSimpleLiteral(e)&&null!=t.type?QueryFilters.ebvError():!(!QueryFilters.isSimpleLiteral(t)||null==e.type)&&QueryFilters.ebvError()):"uri"===e.token&&"uri"===t.token?n.lexicalFormBaseUri(e,i)==n.lexicalFormBaseUri(t,i):"blank"===e.token&&"blank"===t.token&&e.value==t.value},QueryFilters.isInteger=function(e){return null!=e&&("literal"===e.token&&(e.type==a+"integer"||e.type==a+"decimal"||e.type==a+"double"||e.type==a+"nonPositiveInteger"||e.type==a+"negativeInteger"||e.type==a+"long"||e.type==a+"int"||e.type==a+"short"||e.type==a+"byte"||e.type==a+"nonNegativeInteger"||e.type==a+"unsignedLong"||e.type==a+"unsignedInt"||e.type==a+"unsignedShort"||e.type==a+"unsignedByte"||e.type==a+"positiveInteger"))},QueryFilters.isFloat=function(e){return null!=e&&("literal"===e.token&&e.type==a+"float")},QueryFilters.isDecimal=function(e){return null!=e&&("literal"===e.token&&e.type==a+"decimal")},QueryFilters.isDouble=function(e){return null!=e&&("literal"===e.token&&e.type==a+"double")},QueryFilters.isNumeric=function(e){return null!=e&&("literal"===e.token&&(e.type==a+"integer"||e.type==a+"decimal"||e.type==a+"float"||e.type==a+"double"||e.type==a+"nonPositiveInteger"||e.type==a+"negativeInteger"||e.type==a+"long"||e.type==a+"int"||e.type==a+"short"||e.type==a+"byte"||e.type==a+"nonNegativeInteger"||e.type==a+"unsignedLong"||e.type==a+"unsignedInt"||e.type==a+"unsignedShort"||e.type==a+"unsignedByte"||e.type==a+"positiveInteger"))},QueryFilters.isSimpleLiteral=function(e){return!(!e||"literal"!=e.token)&&(null==e.type&&null==e.lang)},QueryFilters.isXsdType=function(e,t){return!(!t||"literal"!=t.token)&&t.type==a+""+e},QueryFilters.ebv=function(e){if(null==e||QueryFilters.isEbvError(e))return QueryFilters.ebvError();if(e.token&&"literal"===e.token){if(e.type==a+"integer"||e.type==a+"decimal"||e.type==a+"double"||e.type==a+"nonPositiveInteger"||e.type==a+"negativeInteger"||e.type==a+"long"||e.type==a+"int"||e.type==a+"short"||e.type==a+"byte"||e.type==a+"nonNegativeInteger"||e.type==a+"unsignedLong"||e.type==a+"unsignedInt"||e.type==a+"unsignedShort"||e.type==a+"unsignedByte"||e.type==a+"positiveInteger"){var t=parseFloat(e.value);return!isNaN(t)&&0!=parseFloat(e.value)}return e.type===a+"boolean"?"true"===e.value||!0===e.value||"True"===e.value:e.type===a+"string"?""!=e.value:e.type===a+"dateTime"?null!=new Date(e.value):QueryFilters.isEbvError(e)?e:null==e.type?""!=e.value:QueryFilters.ebvError()}return!0===e.value},QueryFilters.effectiveBooleanValue=QueryFilters.ebv,QueryFilters.ebvTrue=function(){return{token:"literal",type:a+"boolean",value:!0}},QueryFilters.ebvFalse=function(){return{token:"literal",type:a+"boolean",value:!1}},QueryFilters.ebvError=function(){return{token:"literal",type:"https://github.com/antoniogarrote/js-tools/types#error",value:null}},QueryFilters.isEbvError=function(e){return"object"==typeof e&&null!=e&&"https://github.com/antoniogarrote/js-tools/types#error"===e.type},QueryFilters.ebvBoolean=function(e){return QueryFilters.isEbvError(e)?e:!0===e?QueryFilters.ebvTrue():QueryFilters.ebvFalse()},QueryFilters.runRelationalFilter=function(e,t,r,n,i,o,a){var s=e.operator;if("="===s)return QueryFilters.runEqualityFunction(t,r,n,i,o,a);if("!="===s){var u=QueryFilters.runEqualityFunction(t,r,n,i,o,a);return QueryFilters.isEbvError(u)?u:(u.value=!u.value,u)}if("<"===s)return QueryFilters.runLtFunction(t,r,n);if(">"===s)return QueryFilters.runGtFunction(t,r,n);if("<="===s)return QueryFilters.runLtEqFunction(t,r,n);if(">="===s)return QueryFilters.runGtEqFunction(t,r,n);throw"Error applying relational filter, unknown operator"},QueryFilters.effectiveTypeValue=function(e){if("literal"!=e.token)throw console.log("not implemented yet"),console.log(e),"value not supported in operations yet";if(e.type==a+"integer"){var t=parseInt(e.value);return t}if(e.type==a+"decimal"){var t=parseFloat(e.value);return t}if(e.type==a+"float"){var t=parseFloat(e.value);return t}if(e.type==a+"double"){var t=parseFloat(e.value);return t}if(e.type==a+"nonPositiveInteger"){var t=parseFloat(e.value);return t}if(e.type==a+"negativeInteger"){var t=parseInt(e.value);return t}if(e.type==a+"long"){var t=parseInt(e.value);return t}if(e.type==a+"int"){var t=parseInt(e.value);return t}if(e.type==a+"short"){var t=parseInt(e.value);return t}if(e.type==a+"byte"){var t=parseInt(e.value);return t}if(e.type==a+"nonNegativeInteger"){var t=parseInt(e.value);return t}if(e.type==a+"unsignedLong"){var t=parseInt(e.value);return t}if(e.type==a+"unsignedInt"){var t=parseInt(e.value);return t}if(e.type==a+"unsignedShort"){var t=parseInt(e.value);return t}if(e.type==a+"unsignedByte"){var t=parseInt(e.value);return t}if(e.type==a+"positiveInteger"){var t=parseInt(e.value);return t}if(e.type!=a+"date"&&e.type!=a+"dateTime")return e.type==a+"boolean"?!0===e.value||"true"===e.value||"1"===e.value||1===e.value||!0===e.value||!1!==e.value&&"false"!==e.value&&"0"!==e.value&&0!==e.value&&!1!==e.value&&void 0:e.type==a+"string"?null===e.value||void 0===e.value?void 0:""+e.value:(e.type,e.value);try{return n.parseISO8601(e.value)}catch(e){return null}},QueryFilters.runOrFunction=function(e,t,r,n,i){for(var o=null,a=0;a<e.operands.length;a++){var s=QueryFilters.runFilter(e.operands[a],t,r,n,i);0==QueryFilters.isEbvError(s)&&(s=QueryFilters.ebv(s)),null==o?o=s:QueryFilters.isEbvError(s)?o=QueryFilters.isEbvError(o)?QueryFilters.ebvError():!0===o||QueryFilters.ebvError():!0===s?o=!0:QueryFilters.isEbvError(o)&&(o=QueryFilters.ebvError())}return QueryFilters.ebvBoolean(o)},QueryFilters.runAndFunction=function(e,t,r,n,i){for(var o=null,a=0;a<e.operands.length;a++){var s=QueryFilters.runFilter(e.operands[a],t,r,n,i);0==QueryFilters.isEbvError(s)&&(s=QueryFilters.ebv(s)),null==o?o=s:QueryFilters.isEbvError(s)?o=QueryFilters.isEbvError(o)?QueryFilters.ebvError():!0===o&&QueryFilters.ebvError():!0===s?QueryFilters.isEbvError(o)&&(o=QueryFilters.ebvError()):o=!1}return QueryFilters.ebvBoolean(o)},QueryFilters.runEqualityFunction=function(e,t,r,i,o,a){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(t)){var s=QueryFilters.effectiveTypeValue(e),u=QueryFilters.effectiveTypeValue(t);return isNaN(s)||isNaN(u)?QueryFilters.ebvBoolean(QueryFilters.RDFTermEquality(e,t,i,a)):QueryFilters.ebvBoolean(s==u)}if((QueryFilters.isSimpleLiteral(e)||QueryFilters.isXsdType("string",e))&&(QueryFilters.isSimpleLiteral(t)||QueryFilters.isXsdType("string",t)))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)==QueryFilters.effectiveTypeValue(t));if(QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)==QueryFilters.effectiveTypeValue(t));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",t)||QueryFilters.isXsdType("date",t))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",t))return QueryFilters.ebvFalse();if(QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",t))return QueryFilters.ebvFalse();var l=n.compareDateComponents(e.value,t.value);return null!=l?0==l?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.isRDFTerm(e)&&QueryFilters.isRDFTerm(t)?QueryFilters.ebvBoolean(QueryFilters.RDFTermEquality(e,t,i,a)):QueryFilters.ebvFalse()},QueryFilters.runGtFunction=function(e,t,r){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>QueryFilters.effectiveTypeValue(t));if(QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>QueryFilters.effectiveTypeValue(t));if(QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>QueryFilters.effectiveTypeValue(t));if(QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>QueryFilters.effectiveTypeValue(t));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",t)||QueryFilters.isXsdType("date",t))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",t))return QueryFilters.ebvFalse();if(QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",t))return QueryFilters.ebvFalse();var i=n.compareDateComponents(e.value,t.value);return null!=i?1==i?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runTotalGtFunction=function(e,t){return QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t)?QueryFilters.ebvError():QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(t)||QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(t)||QueryFilters.isXsdType("string",e)&&QueryFilters.isSimpleLiteral("string",t)||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isSimpleLiteral("boolean",t)||QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isSimpleLiteral("dateTime",t)?QueryFilters.runGtFunction(e,t,[]):e.token&&"uri"===e.token&&t.token&&"uri"===t.token?QueryFilters.ebvBoolean(e.value>t.value):e.token&&"literal"===e.token&&t.token&&"literal"===t.token?QueryFilters.ebvBoolean(""+e.value+e.type+e.lang>""+t.value+t.type+t.lang):e.token&&"blank"===e.token&&t.token&&"blank"===t.token?QueryFilters.ebvBoolean(e.value>t.value):e.value&&t.value?QueryFilters.ebvBoolean(e.value>t.value):QueryFilters.ebvTrue()},QueryFilters.runLtFunction=function(e,t,r){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<QueryFilters.effectiveTypeValue(t));if(QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<QueryFilters.effectiveTypeValue(t));if(QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<QueryFilters.effectiveTypeValue(t));if(QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<QueryFilters.effectiveTypeValue(t));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",t)||QueryFilters.isXsdType("date",t))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",t))return QueryFilters.ebvFalse();if(QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",t))return QueryFilters.ebvFalse();var i=n.compareDateComponents(e.value,t.value);return null!=i?-1==i?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runGtEqFunction=function(e,t,r){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>=QueryFilters.effectiveTypeValue(t));if(QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>=QueryFilters.effectiveTypeValue(t));if(QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>=QueryFilters.effectiveTypeValue(t));if(QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>=QueryFilters.effectiveTypeValue(t));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",t)||QueryFilters.isXsdType("date",t))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",t))return QueryFilters.ebvFalse();if(QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",t))return QueryFilters.ebvFalse();var i=n.compareDateComponents(e.value,t.value);return null!=i?-1!=i?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runLtEqFunction=function(e,t,r){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<=QueryFilters.effectiveTypeValue(t));if(QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<=QueryFilters.effectiveTypeValue(t));if(QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<=QueryFilters.effectiveTypeValue(t));if(QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<=QueryFilters.effectiveTypeValue(t));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",t)||QueryFilters.isXsdType("date",t))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",t))return QueryFilters.ebvFalse();if(QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",t))return QueryFilters.ebvFalse();var i=n.compareDateComponents(e.value,t.value);return null!=i?1!=i?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runAddition=function(e,t,r,n,i,o){var a=QueryFilters.runFilter(e,r,n,i,o);if(QueryFilters.isEbvError(a))return QueryFilters.ebvError();var s=a;if(QueryFilters.isNumeric(a)){for(var u=0;u<t.length;u++){var l=QueryFilters.runFilter(t[u].expression,r,n,i,o);if(!QueryFilters.isNumeric(l))return QueryFilters.ebvFalse();"+"===t[u].operator?s=QueryFilters.runSumFunction(s,l):"-"===t[u].operator&&(s=QueryFilters.runSubFunction(s,l))}return s}return QueryFilters.ebvFalse()},QueryFilters.runSumFunction=function(e,t){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t))return QueryFilters.ebvError();var r=QueryFilters.effectiveTypeValue(e)+QueryFilters.effectiveTypeValue(t);return QueryFilters.isDouble(e)||QueryFilters.isDouble(t)?{token:"literal",type:a+"double",value:r}:QueryFilters.isFloat(e)||QueryFilters.isFloat(t)?{token:"literal",type:a+"float",value:r}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(t)?{token:"literal",type:a+"decimal",value:r}:{token:"literal",type:a+"integer",value:r}},QueryFilters.runSubFunction=function(e,t){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t))return QueryFilters.ebvError();var r=QueryFilters.effectiveTypeValue(e)-QueryFilters.effectiveTypeValue(t);return QueryFilters.isDouble(e)||QueryFilters.isDouble(t)?{token:"literal",type:a+"double",value:r}:QueryFilters.isFloat(e)||QueryFilters.isFloat(t)?{token:"literal",type:a+"float",value:r}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(t)?{token:"literal",type:a+"decimal",value:r}:{token:"literal",type:a+"integer",value:r}},QueryFilters.runMultiplication=function(e,t,r,n,i,o){var a=QueryFilters.runFilter(e,r,n,i,o);if(QueryFilters.isEbvError(a))return a;var s=a;if(QueryFilters.isNumeric(a)){for(var u=0;u<t.length;u++){var l=QueryFilters.runFilter(t[u].expression,r,n,i,o);if(QueryFilters.isEbvError(l))return a;if(!QueryFilters.isNumeric(l))return QueryFilters.ebvFalse();"*"===t[u].operator?s=QueryFilters.runMulFunction(s,l):"/"===t[u].operator&&(s=QueryFilters.runDivFunction(s,l))}return s}return QueryFilters.ebvFalse()},QueryFilters.runMulFunction=function(e,t){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t))return QueryFilters.ebvError();var r=QueryFilters.effectiveTypeValue(e)*QueryFilters.effectiveTypeValue(t);return QueryFilters.isDouble(e)||QueryFilters.isDouble(t)?{token:"literal",type:a+"double",value:r}:QueryFilters.isFloat(e)||QueryFilters.isFloat(t)?{token:"literal",type:a+"float",value:r}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(t)?{token:"literal",type:a+"decimal",value:r}:{token:"literal",type:a+"integer",value:r}},QueryFilters.runDivFunction=function(e,t){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t))return QueryFilters.ebvError();var r=QueryFilters.effectiveTypeValue(e)/QueryFilters.effectiveTypeValue(t);return QueryFilters.isDouble(e)||QueryFilters.isDouble(t)?{token:"literal",type:a+"double",value:r}:QueryFilters.isFloat(e)||QueryFilters.isFloat(t)?{token:"literal",type:a+"float",value:r}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(t)?{token:"literal",type:a+"decimal",value:r}:{token:"literal",type:a+"integer",value:r}},QueryFilters.runBuiltInCall=function(e,t,r,n,i,o){if("notexists"===e||"exists"===e){var a=[];for(var s in r)a.push(JSON.stringify(r[s]));return a=a.sort().join(""),t[a]}for(var u=[],l=0;l<t.length;l++)if("var"===t[l].token)u.push(t[l]);else{var c=QueryFilters.runFilter(t[l],r,n,i,o);if(QueryFilters.isEbvError(c))return c;u.push(c)}if("str"===e)return"literal"===u[0].token?{token:"literal",type:null,value:""+u[0].value}:"uri"===u[0].token?{token:"literal",type:null,value:u[0].value}:QueryFilters.ebvFalse();if("lang"===e)return"literal"===u[0].token?null!=u[0].lang?{token:"literal",value:""+u[0].lang}:{token:"literal",value:""}:QueryFilters.ebvError();if("datatype"===e){if("literal"===u[0].token){var f=u[0];return null!=f.type?"string"==typeof f.type?{token:"uri",value:f.type,prefix:null,suffix:null}:f.type:null==f.lang?{token:"uri",value:"http://www.w3.org/2001/XMLSchema#string",prefix:null,suffix:null}:QueryFilters.ebvError()}return QueryFilters.ebvError()}if("isliteral"===e)return"literal"===u[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("isblank"===e)return"blank"===u[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("isuri"===e||"isiri"===e)return"uri"===u[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("sameterm"===e){var p=u[0],d=u[1],h=QueryFilters.RDFTermEquality(p,d,n,o);return QueryFilters.isEbvError(h)&&(h=!1),QueryFilters.ebvBoolean(h)}if("langmatches"===e){var v=u[0],y=u[1];return"literal"===v.token&&"literal"===y.token?"*"===y.value&&""!=v.value?QueryFilters.ebvTrue():QueryFilters.ebvBoolean(0===v.value.toLowerCase().indexOf(y.value.toLowerCase())):QueryFilters.ebvError()}if("bound"===e){var g=u[0].value;return null==g?QueryFilters.ebvError():null!=r[g]?QueryFilters.ebvTrue():QueryFilters.ebvFalse()}if(null!=n.customFns[e])return n.customFns[e](QueryFilters,u);throw"Builtin call "+e+" not implemented yet"},QueryFilters.runUnaryExpression=function(e,t,r,n,i,o){var a=QueryFilters.runFilter(t,r,n,i,o);if(QueryFilters.isEbvError(a))return a;if("!"===e){var s=QueryFilters.ebv(a);return QueryFilters.isEbvError(s)?QueryFilters.ebvFalse():(s=!s,QueryFilters.ebvBoolean(s))}if("+"===e)return QueryFilters.isNumeric(a)?a:QueryFilters.ebvError();if("-"===e){if(QueryFilters.isNumeric(a)){var u={};for(var l in a)u[l]=a[l];return u.value=-u.value,u}return QueryFilters.ebvError()}},QueryFilters.runRegex=function(e,t,r,n,i,o,a){if(null==e)return QueryFilters.ebvError();if(e=QueryFilters.runFilter(e,n,i,o,a),null==t)return QueryFilters.ebvError();if(t=QueryFilters.runFilter(t,n,i,o,a),null!=r&&(r=QueryFilters.runFilter(r,n,i,o,a)),null==t||"literal"!==t.token||null!=r&&"literal"!==r.token)return QueryFilters.ebvError();if(t=t.value,r=null==r?null:r.value,null!=e&&"var"==e.token){if(null==n[e.value])return QueryFilters.ebvError();e=n[e.value]}else{if(null==e||"literal"!==e.token)return QueryFilters.ebvError();if(null!=e.type&&!QueryFilters.isXsdType("string",e))return QueryFilters.ebvError();e=e.value}var s;return s=null==r?new RegExp(t):new RegExp(t,r.toLowerCase()),s.exec(e)?QueryFilters.ebvTrue():QueryFilters.ebvFalse()},QueryFilters.normalizeLiteralDatatype=function(e,t,r){return null==e.value.type||"object"!=typeof e.value.type?e:(e.value.type=n.lexicalFormBaseUri(e.value.type,r),e)},QueryFilters.runIriRefOrFunction=function(e,t,r,i,o,s){if(null==t)return e;for(var u=[],l=0;l<t.length;l++)u.push(QueryFilters.runFilter(t[l],r,i,o,s));var c=n.lexicalFormBaseUri(e,s);if(c==a+"integer"||c==a+"decimal"||c==a+"double"||c==a+"nonPositiveInteger"||c==a+"negativeInteger"||c==a+"long"||c==a+"int"||c==a+"short"||c==a+"byte"||c==a+"nonNegativeInteger"||c==a+"unsignedLong"||c==a+"unsignedInt"||c==a+"unsignedShort"||c==a+"unsignedByte"||c==a+"positiveInteger"){var f=u[0];if("literal"!==f.token)return QueryFilters.ebvError();if(f=QueryFilters.normalizeLiteralDatatype(f,i,s),f.type==a+"integer"||f.type==a+"decimal"||f.type==a+"double"||f.type==a+"nonPositiveInteger"||f.type==a+"negativeInteger"||f.type==a+"long"||f.type==a+"int"||f.type==a+"short"||f.type==a+"byte"||f.type==a+"nonNegativeInteger"||f.type==a+"unsignedLong"||f.type==a+"unsignedInt"||f.type==a+"unsignedShort"||f.type==a+"unsignedByte"||f.type==a+"positiveInteger")return f.type=c,f;if("http://www.w3.org/2001/XMLSchema#boolean"==f.type)return 1==QueryFilters.ebv(f)?(f.type=c,f.value=1):(f.type=c,f.value=0),f;if("http://www.w3.org/2001/XMLSchema#float"==f.type||"http://www.w3.org/2001/XMLSchema#double"==f.type)return f.type=c,f.value=parseInt(f.value),f;if("http://www.w3.org/2001/XMLSchema#string"!=f.type&&null!=f.type)return QueryFilters.ebvError();if(f.value.split(".").length>2)return QueryFilters.ebvError();if(f.value.split("-").length>2)return QueryFilters.ebvError();if(f.value.split("/").length>2)return QueryFilters.ebvError();if(f.value.split("+").length>2)return QueryFilters.ebvError();if(c==a+"decimal"&&(-1!=f.value.indexOf("e")||-1!=f.value.indexOf("E")))return QueryFilters.ebvError();if(!(c!=a+"int"&&c!=a+"integer"||-1==f.value.indexOf("e")&&-1==f.value.indexOf("E")&&-1==f.value.indexOf(".")))return QueryFilters.ebvError();try{return f.value=parseInt(parseFloat(f.value)),isNaN(f.value)?QueryFilters.ebvError():(f.type=c,f)}catch(e){return QueryFilters.ebvError()}}else{if(c==a+"boolean"){var f=u[0];return"literal"===f.token&&null==f.type?"true"===f.value||"1"===f.value?QueryFilters.ebvTrue():"false"===f.value||"0"===f.value?QueryFilters.ebvFalse():QueryFilters.ebvError():"literal"===f.token?QueryFilters.isEbvError(f)?f:QueryFilters.ebvBoolean(f):QueryFilters.ebvError()}if(c==a+"string"){var f=u[0];return"literal"===f.token?(f=QueryFilters.normalizeLiteralDatatype(f,i,s),f.type==a+"integer"||f.type==a+"decimal"||f.type==a+"double"||f.type==a+"nonPositiveInteger"||f.type==a+"negativeInteger"||f.type==a+"long"||f.type==a+"int"||f.type==a+"short"||f.type==a+"byte"||f.type==a+"nonNegativeInteger"||f.type==a+"unsignedLong"||f.type==a+"unsignedInt"||f.type==a+"unsignedShort"||f.type==a+"unsignedByte"||f.type==a+"positiveInteger"||f.type==a+"float"?(f.type=c,f.value=""+f.value,f):f.type==a+"string"?f:f.type==a+"boolean"?(QueryFilters.ebv(f)?(f.type=c,f.value="true"):(f.type=c,f.value="false"),f):f.type==a+"dateTime"||f.type==a+"date"?(f.type=c,"string"!=typeof f.value&&(f.value=n.iso8601(f.value)),f):null==f.type?(f.value=""+f.value,f.type=c,f):QueryFilters.ebvError()):"uri"===f.token?{token:"literal",value:n.lexicalFormBaseUri(f,s),type:c,lang:null}:QueryFilters.ebvError()}if(c==a+"dateTime"||c==a+"date"){if(f=u[0],f.type==a+"dateTime"||f.type==a+"date")return f;if(f.type!=a+"string"&&null!=f.type)return QueryFilters.ebvError();try{return f.value=n.iso8601(n.parseISO8601(f.value)),f.type=c,f}catch(e){return QueryFilters.ebvError()}}else{if(c!=a+"float")return null!=i.customFns[c]?i.customFns[c](QueryFilters,u):QueryFilters.ebvError();var f=u[0];if("literal"!==f.token)return QueryFilters.ebvError();if(f=QueryFilters.normalizeLiteralDatatype(f,i,s),"http://www.w3.org/2001/XMLSchema#decimal"==f.type||"http://www.w3.org/2001/XMLSchema#int"==f.type)return f.type=c,f.value=parseFloat(f.value),f;if("http://www.w3.org/2001/XMLSchema#boolean"==f.type)return 1==QueryFilters.ebv(f)?(f.type=c,f.value=1):(f.type=c,f.value=0),f;if("http://www.w3.org/2001/XMLSchema#float"==f.type||"http://www.w3.org/2001/XMLSchema#double"==f.type)return f.type=c,f.value=parseFloat(f.value),f;if("http://www.w3.org/2001/XMLSchema#string"==f.type)try{return f.value=parseFloat(f.value),isNaN(f.value)?QueryFilters.ebvError():(f.type=c,f)}catch(e){return QueryFilters.ebvError()}else{if(null!=f.type)return QueryFilters.ebvError();if(f.value.split(".").length>2)return QueryFilters.ebvError();if(f.value.split("-").length>2)return QueryFilters.ebvError();if(f.value.split("/").length>2)return QueryFilters.ebvError();if(f.value.split("+").length>2)return QueryFilters.ebvError();try{return f.value=parseFloat(f.value),isNaN(f.value)?QueryFilters.ebvError():(f.type=c,f)}catch(e){return QueryFilters.ebvError()}}}}},e.exports={QueryFilters:QueryFilters}},function(e,t,r){(function(e){var n=r(225),i=r(235),o=r(236),a=r(128),s=t;s.request=function(t,r){t="string"==typeof t?a.parse(t):i(t);var o=-1===e.location.protocol.search(/^https?:$/)?"http:":"",s=t.protocol||o,u=t.hostname||t.host,l=t.port,c=t.path||"/";u&&-1!==u.indexOf(":")&&(u="["+u+"]"),t.url=(u?s+"//"+u:"")+(l?":"+l:"")+c,t.method=(t.method||"GET").toUpperCase(),t.headers=t.headers||{};var f=new n(t);return r&&f.on("response",r),f},s.get=function(e,t){var r=s.request(e,t);return r.end(),r},s.Agent=function(){},s.Agent.defaultMaxSockets=4,s.STATUS_CODES=o,s.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(t,r(7))},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){(function(e){function r(){if(void 0!==o)return o;if(e.XMLHttpRequest){o=new e.XMLHttpRequest;try{o.open("GET",e.XDomainRequest?"/":"https://example.com")}catch(e){o=null}}else o=null;return o}function n(e){var t=r();if(!t)return!1;try{return t.responseType=e,t.responseType===e}catch(e){}return!1}function i(e){return"function"==typeof e}t.fetch=i(e.fetch)&&i(e.ReadableStream),t.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),t.blobConstructor=!0}catch(e){}var o,a=void 0!==e.ArrayBuffer,s=a&&i(e.ArrayBuffer.prototype.slice);t.arraybuffer=t.fetch||a&&n("arraybuffer"),t.msstream=!t.fetch&&s&&n("ms-stream"),t.mozchunkedarraybuffer=!t.fetch&&a&&n("moz-chunked-arraybuffer"),t.overrideMimeType=t.fetch||!!r()&&i(r().overrideMimeType),t.vbArray=i(e.VBArray),o=null}).call(t,r(7))},function(e,t,r){"use strict";(function(t){function n(e){return O.from(e)}function i(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)||O.isBuffer(e)}function o(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?P(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}function a(e,t){j=j||r(25),e=e||{},this.objectMode=!!e.objectMode,t instanceof j&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new U,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(B||(B=r(126).StringDecoder),this.decoder=new B(e.encoding),this.encoding=e.encoding)}function s(e){if(j=j||r(25),!(this instanceof s))return new s(e);this._readableState=new a(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),L.call(this)}function u(e,t,r,i,o){var a=e._readableState;if(null===t)a.reading=!1,h(e,a);else{var s;o||(s=c(a,t)),s?e.emit("error",s):a.objectMode||t&&t.length>0?("string"==typeof t||Object.getPrototypeOf(t)===O.prototype||a.objectMode||(t=n(t)),i?a.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):l(e,a,t,!0):a.ended?e.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!r?(t=a.decoder.write(t),a.objectMode||0!==t.length?l(e,a,t,!1):g(e,a)):l(e,a,t,!1))):i||(a.reading=!1)}return f(a)}function l(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&v(e)),g(e,t)}function c(e,t){var r;return i(t)||"string"==typeof t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}function f(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function p(e){return e>=H?e=H:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function d(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=p(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function h(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,v(e)}}function v(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(M("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?F(y,e):y(e))}function y(e){M("emit readable"),e.emit("readable"),w(e)}function g(e,t){t.readingMore||(t.readingMore=!0,F(b,e,t))}function b(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(M("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function m(e){return function(){var t=e._readableState;M("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&N(e,"data")&&(t.flowing=!0,w(e))}}function _(e){M("readable nexttick read 0"),e.read(0)}function E(e,t){t.resumeScheduled||(t.resumeScheduled=!0,F(k,e,t))}function k(e,t){t.reading||(M("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),w(e),t.flowing&&!t.reading&&e.read(0)}function w(e){var t=e._readableState;for(M("flow",t.flowing);t.flowing&&null!==e.read(););}function x(e,t){if(0===t.length)return null;var r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=S(e,t.buffer,t.decoder),r}function S(e,t,r){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?T(e,t):A(e,t),n}function T(e,t){var r=t.head,n=1,i=r.data;for(e-=i.length;r=r.next;){var o=r.data,a=e>o.length?o.length:e;if(a===o.length?i+=o:i+=o.slice(0,e),0===(e-=a)){a===o.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(a));break}++n}return t.length-=n,i}function A(e,t){var r=O.allocUnsafe(e),n=t.head,i=1;for(n.data.copy(r),e-=n.data.length;n=n.next;){var o=n.data,a=e>o.length?o.length:e;if(o.copy(r,r.length-e,0,a),0===(e-=a)){a===o.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(a));break}++i}return t.length-=i,r}function I(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,F(C,t,e))}function C(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function R(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}var F=r(49);e.exports=s;var j,P=r(121);s.ReadableState=a;var N=(r(78).EventEmitter,function(e,t){return e.listeners(t).length}),L=r(124),O=r(79).Buffer,Q=r(38);Q.inherits=r(18);var D=r(229),M=void 0;M=D&&D.debuglog?D.debuglog("stream"):function(){};var B,U=r(230),q=r(125);Q.inherits(s,L);var G=["error","close","destroy","pause","resume"];Object.defineProperty(s.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),s.prototype.destroy=q.destroy,s.prototype._undestroy=q.undestroy,s.prototype._destroy=function(e,t){this.push(null),t(e)},s.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&(t=t||n.defaultEncoding,t!==n.encoding&&(e=O.from(e,t),t=""),r=!0),u(this,e,t,!1,r)},s.prototype.unshift=function(e){return u(this,e,null,!0,!1)},s.prototype.isPaused=function(){return!1===this._readableState.flowing},s.prototype.setEncoding=function(e){return B||(B=r(126).StringDecoder),this._readableState.decoder=new B(e),this._readableState.encoding=e,this};var H=8388608;s.prototype.read=function(e){M("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return M("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?I(this):v(this),null;if(0===(e=d(e,t))&&t.ended)return 0===t.length&&I(this),null;var n=t.needReadable;M("need readable",n),(0===t.length||t.length-e<t.highWaterMark)&&(n=!0,M("length less than watermark",n)),t.ended||t.reading?(n=!1,M("reading or ended",n)):n&&(M("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=d(r,t)));var i;return i=e>0?x(e,t):null,null===i?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&I(this)),null!==i&&this.emit("data",i),i},s.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},s.prototype.pipe=function(e,r){function n(e,t){M("onunpipe"),e===p&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,a())}function i(){M("onend"),e.end()}function a(){M("cleanup"),e.removeListener("close",l),e.removeListener("finish",c),e.removeListener("drain",y),e.removeListener("error",u),e.removeListener("unpipe",n),p.removeListener("end",i),p.removeListener("end",f),p.removeListener("data",s),g=!0,!d.awaitDrain||e._writableState&&!e._writableState.needDrain||y()}function s(t){M("ondata"),b=!1,!1!==e.write(t)||b||((1===d.pipesCount&&d.pipes===e||d.pipesCount>1&&-1!==R(d.pipes,e))&&!g&&(M("false write response, pause",p._readableState.awaitDrain),p._readableState.awaitDrain++,b=!0),p.pause())}function u(t){M("onerror",t),f(),e.removeListener("error",u),0===N(e,"error")&&e.emit("error",t)}function l(){e.removeListener("finish",c),f()}function c(){M("onfinish"),e.removeListener("close",l),f()}function f(){M("unpipe"),p.unpipe(e)}var p=this,d=this._readableState;switch(d.pipesCount){case 0:d.pipes=e;break;case 1:d.pipes=[d.pipes,e];break;default:d.pipes.push(e)}d.pipesCount+=1,M("pipe count=%d opts=%j",d.pipesCount,r);var h=(!r||!1!==r.end)&&e!==t.stdout&&e!==t.stderr,v=h?i:f;d.endEmitted?F(v):p.once("end",v),e.on("unpipe",n);var y=m(p);e.on("drain",y);var g=!1,b=!1;return p.on("data",s),o(e,"error",u),e.once("close",l),e.once("finish",c),e.emit("pipe",p),d.flowing||(M("pipe resume"),p.resume()),e},s.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r),this);if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,r);return this}var a=R(t.pipes,e);return-1===a?this:(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r),this)},s.prototype.on=function(e,t){var r=L.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&v(this):F(_,this))}return r},s.prototype.addListener=s.prototype.on,s.prototype.resume=function(){var e=this._readableState;return e.flowing||(M("resume"),e.flowing=!0,E(this,e)),this},s.prototype.pause=function(){return M("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(M("pause"),this._readableState.flowing=!1,this.emit("pause")),this},s.prototype.wrap=function(e){var t=this._readableState,r=!1,n=this;e.on("end",function(){if(M("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&n.push(e)}n.push(null)}),e.on("data",function(i){if(M("wrapped data"),t.decoder&&(i=t.decoder.write(i)),(!t.objectMode||null!==i&&void 0!==i)&&(t.objectMode||i&&i.length)){n.push(i)||(r=!0,e.pause())}});for(var i in e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<G.length;o++)e.on(G[o],n.emit.bind(n,G[o]));return n._read=function(t){M("wrapped _read",t),r&&(r=!1,e.resume())},n},s._fromList=x}).call(t,r(12))},function(e,t,r){e.exports=r(78).EventEmitter},function(e,t,r){"use strict";function n(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;if(n||i)return void(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||a(o,this,e));this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(a(o,r,e),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(e)})}function i(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function o(e,t){e.emit("error",t)}var a=r(49);e.exports={destroy:n,undestroy:i}},function(e,t,r){function n(e){if(e&&!u(e))throw new Error("Unknown encoding: "+e)}function i(e){return e.toString(this.encoding)}function o(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function a(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var s=r(31).Buffer,u=s.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},l=t.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),n(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=a;break;default:return void(this.write=i)}this.charBuffer=new s(6),this.charReceived=0,this.charLength=0};l.prototype.write=function(e){for(var t="";this.charLength;){var r=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";e=e.slice(r,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var n=t.charCodeAt(t.length-1);if(!(n>=55296&&n<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var i=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,i),i-=this.charReceived),t+=e.toString(this.encoding,0,i);var i=t.length-1,n=t.charCodeAt(i);if(n>=55296&&n<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),e.copy(this.charBuffer,0,0,o),t.substring(0,i)}return t},l.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var r=e[e.length-t];if(1==t&&r>>5==6){this.charLength=2;break}if(t<=2&&r>>4==14){this.charLength=3;break}if(t<=3&&r>>3==30){this.charLength=4;break}}this.charReceived=t},l.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var r=this.charReceived,n=this.charBuffer,i=this.encoding;t+=n.slice(0,r).toString(i)}return t}},function(e,t,r){"use strict";function n(e){this.afterTransform=function(t,r){return i(e,t,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function i(e,t,r){var n=e._transformState;n.transforming=!1;var i=n.writecb;if(!i)return e.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!==r&&void 0!==r&&e.push(r),i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);s.call(this,e),this._transformState=new n(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e,r){a(t,e,r)}):a(t)})}function a(e,t,r){if(t)return e.emit("error",t);null!==r&&void 0!==r&&e.push(r);var n=e._writableState,i=e._transformState;if(n.length)throw new Error("Calling transform done when ws.length != 0");if(i.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}e.exports=o;var s=r(25),u=r(38);u.inherits=r(18),u.inherits(o,s),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")},o.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},o.prototype._destroy=function(e,t){var r=this;s.prototype._destroy.call(this,e,function(e){t(e),r.emit("close")})}},function(e,t,r){"use strict";function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(e,t,r){if(e&&l.isObject(e)&&e instanceof n)return e;var i=new n;return i.parse(e,t,r),i}function o(e){return l.isString(e)&&(e=i(e)),e instanceof n?e.format():n.prototype.format.call(e)}function a(e,t){return i(e,!1,!0).resolve(t)}function s(e,t){return e?i(e,!1,!0).resolveObject(t):t}var u=r(237),l=r(238);t.parse=i,t.resolve=a,t.resolveObject=s,t.format=o,t.Url=n;var c=/^([a-z0-9.+-]+:)/i,f=/:[0-9]*$/,p=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,d=["<",">",'"',"`"," ","\r","\n","\t"],h=["{","}","|","\\","^","`"].concat(d),v=["'"].concat(h),y=["%","/","?",";","#"].concat(v),g=["/","?","#"],b=/^[+a-z0-9A-Z_-]{0,63}$/,m=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,_={javascript:!0,"javascript:":!0},E={javascript:!0,"javascript:":!0},k={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},w=r(239);n.prototype.parse=function(e,t,r){if(!l.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),i=-1!==n&&n<e.indexOf("#")?"?":"#",o=e.split(i),a=/\\/g;o[0]=o[0].replace(a,"/"),e=o.join(i);var s=e;if(s=s.trim(),!r&&1===e.split("#").length){var f=p.exec(s);if(f)return this.path=s,this.href=s,this.pathname=f[1],f[2]?(this.search=f[2],this.query=t?w.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var d=c.exec(s);if(d){d=d[0];var h=d.toLowerCase();this.protocol=h,s=s.substr(d.length)}if(r||d||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var x="//"===s.substr(0,2);!x||d&&E[d]||(s=s.substr(2),this.slashes=!0)}if(!E[d]&&(x||d&&!k[d])){for(var S=-1,T=0;T<g.length;T++){var A=s.indexOf(g[T]);-1!==A&&(-1===S||A<S)&&(S=A)}var I,C;C=-1===S?s.lastIndexOf("@"):s.lastIndexOf("@",S),-1!==C&&(I=s.slice(0,C),s=s.slice(C+1),this.auth=decodeURIComponent(I)),S=-1;for(var T=0;T<y.length;T++){var A=s.indexOf(y[T]);-1!==A&&(-1===S||A<S)&&(S=A)}-1===S&&(S=s.length),this.host=s.slice(0,S),s=s.slice(S),this.parseHost(),this.hostname=this.hostname||"";var R="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!R)for(var F=this.hostname.split(/\./),T=0,j=F.length;T<j;T++){var P=F[T];if(P&&!P.match(b)){for(var N="",L=0,O=P.length;L<O;L++)P.charCodeAt(L)>127?N+="x":N+=P[L];if(!N.match(b)){var Q=F.slice(0,T),D=F.slice(T+1),M=P.match(m);M&&(Q.push(M[1]),D.unshift(M[2])),D.length&&(s="/"+D.join(".")+s),this.hostname=Q.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),R||(this.hostname=u.toASCII(this.hostname));var B=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+B,this.href+=this.host,R&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!_[h])for(var T=0,j=v.length;T<j;T++){var q=v[T];if(-1!==s.indexOf(q)){var G=encodeURIComponent(q);G===q&&(G=escape(q)),s=s.split(q).join(G)}}var H=s.indexOf("#");-1!==H&&(this.hash=s.substr(H),s=s.slice(0,H));var V=s.indexOf("?");if(-1!==V?(this.search=s.substr(V),this.query=s.substr(V+1),t&&(this.query=w.parse(this.query)),s=s.slice(0,V)):t&&(this.search="",this.query={}),s&&(this.pathname=s),k[h]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var B=this.pathname||"",X=this.search||"";this.path=B+X}return this.href=this.format(),this},n.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&l.isObject(this.query)&&Object.keys(this.query).length&&(o=w.stringify(this.query));var a=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||k[t])&&!1!==i?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),a=a.replace("#","%23"),t+i+r+a+n},n.prototype.resolve=function(e){return this.resolveObject(i(e,!1,!0)).format()},n.prototype.resolveObject=function(e){if(l.isString(e)){var t=new n;t.parse(e,!1,!0),e=t}for(var r=new n,i=Object.keys(this),o=0;o<i.length;o++){var a=i[o];r[a]=this[a]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),u=0;u<s.length;u++){var c=s[u];"protocol"!==c&&(r[c]=e[c])}return k[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!k[e.protocol]){for(var f=Object.keys(e),p=0;p<f.length;p++){var d=f[p];r[d]=e[d]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||E[e.protocol])r.pathname=e.pathname;else{for(var h=(e.pathname||"").split("/");h.length&&!(e.host=h.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==h[0]&&h.unshift(""),h.length<2&&h.unshift(""),r.pathname=h.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var v=r.pathname||"",y=r.search||"";r.path=v+y}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var g=r.pathname&&"/"===r.pathname.charAt(0),b=e.host||e.pathname&&"/"===e.pathname.charAt(0),m=b||g||r.host&&e.pathname,_=m,w=r.pathname&&r.pathname.split("/")||[],h=e.pathname&&e.pathname.split("/")||[],x=r.protocol&&!k[r.protocol];if(x&&(r.hostname="",r.port=null,r.host&&(""===w[0]?w[0]=r.host:w.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===h[0]?h[0]=e.host:h.unshift(e.host)),e.host=null),m=m&&(""===h[0]||""===w[0])),b)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,w=h;else if(h.length)w||(w=[]),w.pop(),w=w.concat(h),r.search=e.search,r.query=e.query;else if(!l.isNullOrUndefined(e.search)){if(x){r.hostname=r.host=w.shift();var S=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");S&&(r.auth=S.shift(),r.host=r.hostname=S.shift())}return r.search=e.search,r.query=e.query,l.isNull(r.pathname)&&l.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!w.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var T=w.slice(-1)[0],A=(r.host||e.host||w.length>1)&&("."===T||".."===T)||""===T,I=0,C=w.length;C>=0;C--)T=w[C],"."===T?w.splice(C,1):".."===T?(w.splice(C,1),I++):I&&(w.splice(C,1),I--);if(!m&&!_)for(;I--;I)w.unshift("..");!m||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),A&&"/"!==w.join("/").substr(-1)&&w.push("");var R=""===w[0]||w[0]&&"/"===w[0].charAt(0);if(x){r.hostname=r.host=R?"":w.length?w.shift():"";var S=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");S&&(r.auth=S.shift(),r.host=r.hostname=S.shift())}return m=m||r.host&&w.length,m&&!R&&w.unshift(""),w.length?r.pathname=w.join("/"):(r.pathname=null,r.path=null),l.isNull(r.pathname)&&l.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},n.prototype.parseHost=function(){var e=this.host,t=f.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,r){function n(e,t){if(!(this instanceof n))return new n(e,t);this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._ids["><"]=0,this._entities=Object.create(null),this._blankNodeIndex=0,t||!e||e[0]||(t=e,e=null),t=t||{},this._prefixes=Object.create(null),t.prefixes&&this.addPrefixes(t.prefixes),this.defaultGraph=t.defaultGraph||"http://example.org/#defaultGraph",e&&this.addTriples(e)}var i=r(83).expandPrefixedName;n.prototype={get size(){var e=this._size;if(null!==e)return e;var t,r,n=this._graphs;for(var i in n)for(var o in t=n[i].subjects)for(var a in r=t[o])e+=Object.keys(r[a]).length;return this._size=e},_addToIndex:function(e,t,r,n){var i=e[t]||(e[t]={}),o=i[r]||(i[r]={}),a=n in o;return a||(o[n]=null),!a},_removeFromIndex:function(e,t,r,n){var i,o=e[t],a=o[r];delete a[n];for(i in a)return;delete o[r];for(i in o)return;delete e[t]},_findInIndex:function(e,t,r,n,i,o,a,s){var u,l,c,f=[],p=!t+!r+!n,d=p>1?Object.keys(this._ids):this._entities;t&&((u=e,e={})[t]=u[t]);for(var h in e){var v=d[h];if(l=e[h]){r&&((u=l,l={})[r]=u[r]);for(var y in l){var g=d[y];if(c=l[y])for(var b=(n?n in c?[n]:[]:Object.keys(c)),m=b.length-1;m>=0;m--){var _={subject:"",predicate:"",object:"",graph:s};_[i]=v,_[o]=g,_[a]=d[b[m]],f.push(_)}}}}return f},_countInIndex:function(e,t,r,n){var i,o,a,s=0;t&&((i=e,e={})[t]=i[t]);for(var u in e)if(o=e[u]){r&&((i=o,o={})[r]=i[r]);for(var l in o)(a=o[l])&&(n?n in a&&s++:s+=Object.keys(a).length)}return s},addTriple:function(e,t,r,n){t||(n=e.graph,r=e.object,t=e.predicate,e=e.subject),n=n||this.defaultGraph;var i=this._graphs[n];i||(i=this._graphs[n]={subjects:{},predicates:{},objects:{}},Object.freeze(i));var o=this._ids,a=this._entities;e=o[e]||(o[a[++this._id]=e]=this._id),t=o[t]||(o[a[++this._id]=t]=this._id),r=o[r]||(o[a[++this._id]=r]=this._id);var s=this._addToIndex(i.subjects,e,t,r);return this._addToIndex(i.predicates,t,r,e),this._addToIndex(i.objects,r,e,t),this._size=null,s},addTriples:function(e){for(var t=e.length-1;t>=0;t--)this.addTriple(e[t])},addPrefix:function(e,t){this._prefixes[e]=t},addPrefixes:function(e){for(var t in e)this.addPrefix(t,e[t])},removeTriple:function(e,t,r,n){t||(n=e.graph,r=e.object,t=e.predicate,e=e.subject),n=n||this.defaultGraph;var i,o=this._ids,a=this._graphs;if(!(e=o[e]))return!1;if(!(t=o[t]))return!1;if(!(r=o[r]))return!1;if(!(i=a[n]))return!1;var s,u;if(!(s=i.subjects[e]))return!1;if(!(u=s[t]))return!1;if(!(r in u))return!1;this._removeFromIndex(i.subjects,e,t,r),this._removeFromIndex(i.predicates,t,r,e),this._removeFromIndex(i.objects,r,e,t),null!==this._size&&this._size--;for(e in i.subjects)return!0;return delete a[n],!0},removeTriples:function(e){for(var t=e.length-1;t>=0;t--)this.removeTriple(e[t])},find:function(e,t,r,n){var o=this._prefixes;return this.findByIRI(i(e,o),i(t,o),i(r,o),i(n,o))},findByIRI:function(e,t,r,n){var i,o,a,s,u=[],l={},c=this._ids;n?l[n]=this._graphs[n]:l=this._graphs;for(var f in l)if(i=l[f]){if(e&&!(o=c[e]))return u;if(t&&!(a=c[t]))return u;if(r&&!(s=c[r]))return u;o?s?u.push(this._findInIndex(i.objects,s,o,a,"object","subject","predicate",f)):u.push(this._findInIndex(i.subjects,o,a,null,"subject","predicate","object",f)):a?u.push(this._findInIndex(i.predicates,a,s,null,"predicate","object","subject",f)):s?u.push(this._findInIndex(i.objects,s,null,null,"object","subject","predicate",f)):u.push(this._findInIndex(i.subjects,null,null,null,"subject","predicate","object",f))}return 1===u.length?u[0]:u.concat.apply([],u)},count:function(e,t,r,n){var o=this._prefixes;return this.countByIRI(i(e,o),i(t,o),i(r,o),i(n,o))},countByIRI:function(e,t,r,n){n=n||this.defaultGraph;var i=this._graphs[n],o=this._ids;return i?e&&!(e=o[e])?0:t&&!(t=o[t])?0:r&&!(r=o[r])?0:e?r?this._countInIndex(i.objects,r,e,t):this._countInIndex(i.subjects,e,t,r):t?this._countInIndex(i.predicates,t,r,e):this._countInIndex(i.objects,r,e,t):0},createBlankNode:function(e){var t,r;if(e)for(t=e="_:"+e,r=1;this._ids[t];)t=e+r++;else do{t="_:b"+this._blankNodeIndex++}while(this._ids[t]);return this._ids[t]=++this._id,t}},e.exports=n},function(e,t,r){function n(e){if(!(this instanceof n))return new n(e);i.call(this,{decodeStrings:!0}),this._readableState.objectMode=!0;var t=this,r=new a(e);r.parse(function(e,r){r&&t.push(r)||e&&t.emit("error",e)},this.emit.bind(this,"prefix")),this._transform=function(e,t,n){r.addChunk(e),n()},this._flush=function(e){r.end(),e()}}var i=r(131).Transform,o=r(132),a=r(82);o.inherits(n,i),e.exports=n},function(e,t,r){function n(){i.call(this)}e.exports=n;var i=r(78).EventEmitter;r(18)(n,i),n.Readable=r(37),n.Writable=r(246),n.Duplex=r(247),n.Transform=r(248),n.PassThrough=r(249),n.Stream=n,n.prototype.pipe=function(e,t){function r(t){e.writable&&!1===e.write(t)&&l.pause&&l.pause()}function n(){l.readable&&l.resume&&l.resume()}function o(){c||(c=!0,e.end())}function a(){c||(c=!0,"function"==typeof e.destroy&&e.destroy())}function s(e){if(u(),0===i.listenerCount(this,"error"))throw e}function u(){l.removeListener("data",r),e.removeListener("drain",n),l.removeListener("end",o),l.removeListener("close",a),l.removeListener("error",s),e.removeListener("error",s),l.removeListener("end",u),l.removeListener("close",u),e.removeListener("close",u)}var l=this;l.on("data",r),e.on("drain",n),e._isStdio||t&&!1===t.end||(l.on("end",o),l.on("close",a));var c=!1;return l.on("error",s),e.on("error",s),l.on("end",u),l.on("close",u),e.on("close",u),e.emit("pipe",l),e}},function(e,t,r){(function(e,n){function i(e,r){var n={seen:[],stylize:a};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),v(r)?n.showHidden=r:r&&t._extend(n,r),E(n.showHidden)&&(n.showHidden=!1),E(n.depth)&&(n.depth=2),E(n.colors)&&(n.colors=!1),E(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=o),u(n,e,n.depth)}function o(e,t){var r=i.styles[t];return r?"["+i.colors[r][0]+"m"+e+"["+i.colors[r][1]+"m":e}function a(e,t){return e}function s(e){var t={};return e.forEach(function(e,r){t[e]=!0}),t}function u(e,r,n){if(e.customInspect&&r&&T(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var i=r.inspect(n,e);return m(i)||(i=u(e,i,n)),i}var o=l(e,r);if(o)return o;var a=Object.keys(r),v=s(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(r)),S(r)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return c(r);if(0===a.length){if(T(r)){var y=r.name?": "+r.name:"";return e.stylize("[Function"+y+"]","special")}if(k(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(x(r))return e.stylize(Date.prototype.toString.call(r),"date");if(S(r))return c(r)}var g="",b=!1,_=["{","}"];if(h(r)&&(b=!0,_=["[","]"]),T(r)){g=" [Function"+(r.name?": "+r.name:"")+"]"}if(k(r)&&(g=" "+RegExp.prototype.toString.call(r)),x(r)&&(g=" "+Date.prototype.toUTCString.call(r)),S(r)&&(g=" "+c(r)),0===a.length&&(!b||0==r.length))return _[0]+g+_[1];if(n<0)return k(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special");e.seen.push(r);var E;return E=b?f(e,r,n,v,a):a.map(function(t){return p(e,r,n,v,t,b)}),e.seen.pop(),d(E,g,_)}function l(e,t){if(E(t))return e.stylize("undefined","undefined");if(m(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return b(t)?e.stylize(""+t,"number"):v(t)?e.stylize(""+t,"boolean"):y(t)?e.stylize("null","null"):void 0}function c(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,r,n,i){for(var o=[],a=0,s=t.length;a<s;++a)F(t,String(a))?o.push(p(e,t,r,n,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(p(e,t,r,n,i,!0))}),o}function p(e,t,r,n,i,o){var a,s,l;if(l=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},l.get?s=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(s=e.stylize("[Setter]","special")),F(n,i)||(a="["+i+"]"),s||(e.seen.indexOf(l.value)<0?(s=y(r)?u(e,l.value,null):u(e,l.value,r-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n"))):s=e.stylize("[Circular]","special")),E(a)){if(o&&i.match(/^\d+$/))return s;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function d(e,t,r){var n=0;return e.reduce(function(e,t){return n++,t.indexOf("\n")>=0&&n++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function h(e){return Array.isArray(e)}function v(e){return"boolean"==typeof e}function y(e){return null===e}function g(e){return null==e}function b(e){return"number"==typeof e}function m(e){return"string"==typeof e}function _(e){return"symbol"==typeof e}function E(e){return void 0===e}function k(e){return w(e)&&"[object RegExp]"===I(e)}function w(e){return"object"==typeof e&&null!==e}function x(e){return w(e)&&"[object Date]"===I(e)}function S(e){return w(e)&&("[object Error]"===I(e)||e instanceof Error)}function T(e){return"function"==typeof e}function A(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function I(e){return Object.prototype.toString.call(e)}function C(e){return e<10?"0"+e.toString(10):e.toString(10)}function R(){var e=new Date,t=[C(e.getHours()),C(e.getMinutes()),C(e.getSeconds())].join(":");return[e.getDate(),L[e.getMonth()],t].join(" ")}function F(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var j=/%[sdj%]/g;t.format=function(e){if(!m(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(i(arguments[r]));return t.join(" ")}for(var r=1,n=arguments,o=n.length,a=String(e).replace(j,function(e){if("%%"===e)return"%";if(r>=o)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}}),s=n[r];r<o;s=n[++r])y(s)||!w(s)?a+=" "+s:a+=" "+i(s);return a},t.deprecate=function(r,i){function o(){if(!a){if(n.throwDeprecation)throw new Error(i);n.traceDeprecation?console.trace(i):console.error(i),a=!0}return r.apply(this,arguments)}if(E(e.process))return function(){return t.deprecate(r,i).apply(this,arguments)};if(!0===n.noDeprecation)return r;var a=!1;return o};var P,N={};t.debuglog=function(e){if(E(P)&&(P=n.env.NODE_DEBUG||""),e=e.toUpperCase(),!N[e])if(new RegExp("\\b"+e+"\\b","i").test(P)){var r=n.pid;N[e]=function(){var n=t.format.apply(t,arguments);console.error("%s %d: %s",e,r,n)}}else N[e]=function(){};return N[e]},t.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=h,t.isBoolean=v,t.isNull=y,t.isNullOrUndefined=g,t.isNumber=b,t.isString=m,t.isSymbol=_,t.isUndefined=E,t.isRegExp=k,t.isObject=w,t.isDate=x,t.isError=S,t.isFunction=T,t.isPrimitive=A,t.isBuffer=r(250);var L=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.log=function(){console.log("%s - %s",R(),t.format.apply(t,arguments))},t.inherits=r(251),t._extend=function(e,t){if(!t||!w(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}}).call(t,r(7),r(12))},function(e,t,r){function n(e){if(!(this instanceof n))return new n(e);i.call(this,{encoding:"utf8"}),this._writableState.objectMode=!0;var t=this,r=new a({write:function(e,r,n){t.push(e),n&&n()},end:function(e){t.push(null),e&&e()}},e);this._transform=function(e,t,n){r.addTriple(e,n)},this._flush=function(e){r.end(e)}}var i=r(131).Transform,o=r(132),a=r(84);o.inherits(n,i),e.exports=n},function(e,t,r){(function(n,i,o){var a;/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE
 * @version   2.3.0
 */
(function(){"use strict";function s(e){return"function"==typeof e||"object"==typeof e&&null!==e}function u(e){return"function"==typeof e}function l(e){return"object"==typeof e&&null!==e}function c(e){H=e}function f(e){z=e}function p(){return function(){G(h)}}function d(){return function(){setTimeout(h,1)}}function h(){for(var e=0;e<W;e+=2){(0,ee[e])(ee[e+1]),ee[e]=void 0,ee[e+1]=void 0}W=0}function v(){}function y(){return new TypeError("You cannot resolve a promise with itself")}function g(){return new TypeError("A promises callback cannot return that same promise.")}function b(e){try{return e.then}catch(e){return ie.error=e,ie}}function m(e,t,r,n){try{e.call(t,r,n)}catch(e){return e}}function _(e,t,r){z(function(e){var n=!1,i=m(r,t,function(r){n||(n=!0,t!==r?w(e,r):S(e,r))},function(t){n||(n=!0,T(e,t))},"Settle: "+(e._label||" unknown promise"));!n&&i&&(n=!0,T(e,i))},e)}function E(e,t){t._state===re?S(e,t._result):t._state===ne?T(e,t._result):A(t,void 0,function(t){w(e,t)},function(t){T(e,t)})}function k(e,t){if(t.constructor===e.constructor)E(e,t);else{var r=b(t);r===ie?T(e,ie.error):void 0===r?S(e,t):u(r)?_(e,t,r):S(e,t)}}function w(e,t){e===t?T(e,y()):s(t)?k(e,t):S(e,t)}function x(e){e._onerror&&e._onerror(e._result),I(e)}function S(e,t){e._state===te&&(e._result=t,e._state=re,0!==e._subscribers.length&&z(I,e))}function T(e,t){e._state===te&&(e._state=ne,e._result=t,z(x,e))}function A(e,t,r,n){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+re]=r,i[o+ne]=n,0===o&&e._state&&z(I,e)}function I(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var n,i,o=e._result,a=0;a<t.length;a+=3)n=t[a],i=t[a+r],n?F(r,n,i,o):i(o);e._subscribers.length=0}}function C(){this.error=null}function R(e,t){try{return e(t)}catch(e){return oe.error=e,oe}}function F(e,t,r,n){var i,o,a,s,l=u(r);if(l){if(i=R(r,n),i===oe?(s=!0,o=i.error,i=null):a=!0,t===i)return void T(t,g())}else i=n,a=!0;t._state!==te||(l&&a?w(t,i):s?T(t,o):e===re?S(t,i):e===ne&&T(t,i))}function j(e,t){try{t(function(t){w(e,t)},function(t){T(e,t)})}catch(t){T(e,t)}}function P(e,t){var r=this;r._instanceConstructor=e,r.promise=new e(v),r._validateInput(t)?(r._input=t,r.length=t.length,r._remaining=t.length,r._init(),0===r.length?S(r.promise,r._result):(r.length=r.length||0,r._enumerate(),0===r._remaining&&S(r.promise,r._result))):T(r.promise,r._validationError())}function N(e){return new ae(this,e).promise}function L(e){function t(e){w(i,e)}function r(e){T(i,e)}var n=this,i=new n(v);if(!X(e))return T(i,new TypeError("You must pass an array to race.")),i;for(var o=e.length,a=0;i._state===te&&a<o;a++)A(n.resolve(e[a]),void 0,t,r);return i}function O(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var r=new t(v);return w(r,e),r}function Q(e){var t=this,r=new t(v);return T(r,e),r}function D(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function M(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function B(e){this._id=fe++,this._state=void 0,this._result=void 0,this._subscribers=[],v!==e&&(u(e)||D(),this instanceof B||M(),j(this,e))}function U(){var e;if(void 0!==o)e=o;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;t&&"[object Promise]"===Object.prototype.toString.call(t.resolve())&&!t.cast||(e.Promise=pe)}var q;q=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var G,H,V,X=q,W=0,z=function(e,t){ee[W]=e,ee[W+1]=t,2===(W+=2)&&(H?H(h):V())},$="undefined"!=typeof window?window:void 0,Y=$||{},J=Y.MutationObserver||Y.WebKitMutationObserver,K=void 0!==n&&"[object process]"==={}.toString.call(n),Z="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,ee=new Array(1e3);V=K?function(){var e=n.nextTick,t=n.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);return Array.isArray(t)&&"0"===t[1]&&"10"===t[2]&&(e=i),function(){e(h)}}():J?function(){var e=0,t=new J(h),r=document.createTextNode("");return t.observe(r,{characterData:!0}),function(){r.data=e=++e%2}}():Z?function(){var e=new MessageChannel;return e.port1.onmessage=h,function(){e.port2.postMessage(0)}}():void 0===$?function(){try{var e=r(254);return G=e.runOnLoop||e.runOnContext,p()}catch(e){return d()}}():d();var te=void 0,re=1,ne=2,ie=new C,oe=new C;P.prototype._validateInput=function(e){return X(e)},P.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},P.prototype._init=function(){this._result=new Array(this.length)};var ae=P;P.prototype._enumerate=function(){for(var e=this,t=e.length,r=e.promise,n=e._input,i=0;r._state===te&&i<t;i++)e._eachEntry(n[i],i)},P.prototype._eachEntry=function(e,t){var r=this,n=r._instanceConstructor;l(e)?e.constructor===n&&e._state!==te?(e._onerror=null,r._settledAt(e._state,t,e._result)):r._willSettleAt(n.resolve(e),t):(r._remaining--,r._result[t]=e)},P.prototype._settledAt=function(e,t,r){var n=this,i=n.promise;i._state===te&&(n._remaining--,e===ne?T(i,r):n._result[t]=r),0===n._remaining&&S(i,n._result)},P.prototype._willSettleAt=function(e,t){var r=this;A(e,void 0,function(e){r._settledAt(re,t,e)},function(e){r._settledAt(ne,t,e)})};var se=N,ue=L,le=O,ce=Q,fe=0,pe=B;B.all=se,B.race=ue,B.resolve=le,B.reject=ce,B._setScheduler=c,B._setAsap=f,B._asap=z,B.prototype={constructor:B,then:function(e,t){var r=this,n=r._state;if(n===re&&!e||n===ne&&!t)return this;var i=new this.constructor(v),o=r._result;if(n){var a=arguments[n-1];z(function(){F(n,i,a,o)})}else A(r,i,e,t);return i},catch:function(e){return this.then(null,e)}};var de=U,he={Promise:pe,polyfill:de};void 0!==(a=function(){return he}.call(t,r,t,e))&&(e.exports=a),de()}).call(this)}).call(t,r(12),r(50).setImmediate,r(7))},function(e,t,r){var n=r(0),i=r(76).Tree;Lexicon=function(e){var t=this;this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri},this.oidCounter=1,n.seq(function(e){new i(2,function(r){t.uris=r,e()})},function(e){new i(2,function(r){t.literals=r,e()})},function(e){new i(2,function(r){t.knownGraphs=r,e()})},function(e){new i(2,function(r){t.oidUris=r,e()})},function(e){new i(2,function(r){t.oidLiterals=r,e()})},function(e){new i(2,function(r){t.oidBlanks=r,e()})})(function(){null!=e&&e(t)})},Lexicon.prototype.registerGraph=function(e,t,r){e!=this.defaultGraphOid?this.knownGraphs.insert(e,t,function(){r()}):r()},Lexicon.prototype.registeredGraphs=function(e,t){var r=[];this.knownGraphs.walk(function(t){!0===e?r.push(t.data):r.push(t.key)},function(){t(r)})},Lexicon.prototype.registerUri=function(e,t){var r=this;e===this.defaultGraphUri?t(this.defaultGraphOid):this.uris.search(e,function(i){if(null==i){var o=r.oidCounter,a="u"+o;r.oidCounter++,n.seq(function(t){r.uris.insert(e,[o,0],function(){t()})},function(t){r.oidUris.insert(a,e,function(){t()})})(function(){t(o)})}else o=i[0],i[1]=i[1]+1,t(o)})},Lexicon.prototype.resolveUri=function(e,t){e===this.defaultGraphUri?t(this.defaultGraphOid):this.uris.search(e,function(e){t(null!=e?e[0]:-1)})},Lexicon.prototype.resolveUriCost=function(e,t){e===this.defaultGraphUri?t(0):this.uris.search(e,function(e){t(null!=e?e[1]:-1)})},Lexicon.prototype.registerBlank=function(e){var t=this.oidCounter;this.oidCounter++;var r=""+t;this.oidBlanks.insert(r,r,function(){e(t)})},Lexicon.prototype.resolveBlank=function(e,t){var r=this;this.oidBlanks.search(e,function(e){if(null!=e)t(e);else{var n=r.oidCounter;this.oidCounter++,t(""+n)}})},Lexicon.prototype.resolveBlankCost=function(e,t){t(0)},Lexicon.prototype.registerLiteral=function(e,t){var r=this;this.literals.search(e,function(i){if(null==i){var o=r.oidCounter,a="l"+o;r.oidCounter++,n.seq(function(t){r.literals.insert(e,[o,0],function(){t()})},function(t){r.oidLiterals.insert(a,e,function(){t()})})(function(){t(o)})}else{var o=i[0];i[1]=i[1]+1,t(o)}})},Lexicon.prototype.resolveLiteral=function(e,t){this.literals.search(e,function(e){t(null!=e?e[0]:-1)})},Lexicon.prototype.resolveLiteralCost=function(e,t){this.literals.search(e,function(e){t(null!=e?e[1]:-1)})},Lexicon.prototype.parseLiteral=function(e){var t=e.lastIndexOf("@");if(-1!=t&&'"'===e[t-1]&&null!=e.substring(t,e.length).match(/^@[a-zA-Z\-]+$/g)){var r=e.substring(1,t-1);return{token:"literal",value:r,lang:e.substring(t+1,e.length)}}var t=e.lastIndexOf("^^");if(-1!=t&&'"'===e[t-1]&&"<"===e[t+2]&&">"===e[e.length-1]){var r=e.substring(1,t-1);return{token:"literal",value:r,type:e.substring(t+3,e.length-1)}}var r=e.substring(1,e.length-1);return{token:"literal",value:r}},Lexicon.prototype.parseUri=function(e){return{token:"uri",value:e}},Lexicon.prototype.retrieve=function(e,t){var r=this;e===this.defaultGraphOid?t({token:"uri",value:this.defaultGraphUri,prefix:null,suffix:null,defaultGraph:!0}):n.seq(function(t,n){r.oidUris.search("u"+e,function(e){null!=e?n(null,r.parseUri(e)):n(null,null)})},function(t,n){null==t?r.oidLiterals.search("l"+e,function(e){null!=e?n(null,r.parseLiteral(e)):n(null,null)}):n(null,t)},function(t,n){null==t?r.oidBlanks.search(""+e,function(t){null!=t?n(null,{token:"blank",value:"_:"+e}):n(null,null)}):n(null,t)})(null,function(e,r){t(r)})},Lexicon.prototype.clear=function(e){var t=this;this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri},this.oidCounter=1,n.seq(function(e){new i(2,function(r){t.uris=r,e()})},function(e){new i(2,function(r){t.literals=r,e()})},function(e){new i(2,function(r){t.knownGraphs=r,e()})},function(e){new i(2,function(r){t.oidUris=r,e()})},function(e){new i(2,function(r){t.oidLiterals=r,e()})},function(e){new i(2,function(r){t.oidBlanks=r,e()})})(function(){null!=e&&e()})},Lexicon.prototype.unregister=function(e,t,r){var i=this;n.seq(function(r){i._unregisterTerm(e.subject.token,t.subject,r)},function(r){i._unregisterTerm(e.predicate.token,t.predicate,r)},function(r){i._unregisterTerm(e.object.token,t.object,r)},function(r){null!=e.graph?i._unregisterTerm(e.graph.token,t.graph,r):r()})(function(){r(!0)})},Lexicon.prototype._unregisterTerm=function(e,t,r){var i=this;if("uri"===e)if(t!=this.defaultGraphOid){var o="u"+t;i.oidUris.search(o,function(e){i.uris.search(e,function(a){var s=a[1];""+a[0]==""+t?0===s?n.seq(function(e){i.oidUris.delete(o,function(){e()})},function(t){i.uris.delete(e,function(){t()})},function(e){i.knownGraphs.delete(t,function(){e()})})(function(){r()}):i.uris.insert(e,[t,s-1],function(){r()}):r()})})}else r();else if("literal"===e){this.oidCounter++;var o="l"+t;i.oidLiterals.search(o,function(e){i.literals.search(e,function(a){var s=a[1];""+a[0]==""+t?0===s?n.seq(function(e){i.oidLiterals.delete(o,function(){e()})},function(t){i.literals.delete(e,function(){t()})})(function(){r()}):i.literals.insert(e,[t,s-1],function(){r()}):r()})})}else"blank"===e?i.oidBlanks.delete(""+t,function(){r()}):r()},e.exports={Lexicon:Lexicon}},function(e,t,r){"use strict";var n=r(9),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(n),o=r(51),a=r(218),s=r(219),u=r(47),l=r(24),c=r(261),f=r(46);r(99),r(262),r(118);var p=i.module("fibra",["fi.seco.sparql","http-auth-interceptor","fibra.services.worker-service-prototype-mapping-configuration"]);p.config(["$provide",function(e){e.service("fibraSparqlService",s.FibraSparqlService),e.service("projectWorkerService",a.ProjectWorkerService),e.service("stateWorkerService",o.StateWorkerService),e.service("workerWorkerService",o.WorkerWorkerService),e.service("sparqlTreeWorkerService",u.SparqlTreeWorkerService),e.service("sparqlItemWorkerService",l.SparqlItemWorkerService),e.service("sparqlUpdateWorkerService",c.SparqlUpdateWorkerService),e.service("sparqlAutocompleteWorkerService",f.SparqlAutocompleteWorkerService)}]),p.run(["$rootScope","workerWorkerService",function(e,t){e.$on("event:auth-loginRequired",function(){return t.$broadcast("event:auth-loginRequired")})}]),p.run(["$rootScope","authService","$http",function(e,t,r){e.$on("main:auth-loginAuthInfo",function(e,n){r.defaults.headers.common.Authorization=n,t.loginConfirmed()})}])},function(e,t,r){e.exports={default:r(138),__esModule:!0}},function(e,t,r){r(139);var n=r(2).Object;e.exports=function(e){return n.getOwnPropertyNames(e)}},function(e,t,r){r(52)("getOwnPropertyNames",function(){return r(86).f})},function(e,t,r){var n=r(21),i=r(90),o=r(141);e.exports=function(e){return function(t,r,a){var s,u=n(t),l=i(u.length),c=o(a,l);if(e&&r!=r){for(;l>c;)if((s=u[c++])!=s)return!0}else for(;l>c;c++)if((e||c in u)&&u[c]===r)return e||c||0;return!e&&-1}}},function(e,t,r){var n=r(56),i=Math.max,o=Math.min;e.exports=function(e,t){return e=n(e),e<0?i(e+t,0):o(e,t)}},function(e,t,r){r(60),r(63),e.exports=r(149)},function(e,t,r){"use strict";var n=r(144),i=r(145),o=r(35),a=r(21);e.exports=r(91)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,i(1)):"keys"==t?i(0,r):"values"==t?i(0,e[r]):i(0,[r,e[r]])},"values"),o.Arguments=o.Array,n("keys"),n("values"),n("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,r){"use strict";var n=r(61),i=r(40),o=r(44),a={};r(19)(a,r(5)("iterator"),function(){return this}),e.exports=function(e,t,r){e.prototype=n(a,{next:i(1,r)}),o(e,t+" Iterator")}},function(e,t,r){var n=r(15),i=r(11),o=r(43);e.exports=r(16)?Object.defineProperties:function(e,t){i(e);for(var r,a=o(t),s=a.length,u=0;s>u;)n.f(e,r=a[u++],t[r]);return e}},function(e,t,r){var n=r(56),i=r(55);e.exports=function(e){return function(t,r){var o,a,s=String(i(t)),u=n(r),l=s.length;return u<0||u>=l?e?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===l||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):o:e?s.slice(u,u+2):a-56320+(o-55296<<10)+65536)}}},function(e,t,r){var n=r(11),i=r(95);e.exports=r(2).getIterator=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return n(t.call(e))}},function(e,t,r){r(151),e.exports=r(2).Object.getPrototypeOf},function(e,t,r){var n=r(62),i=r(94);r(52)("getPrototypeOf",function(){return function(e){return i(n(e))}})},function(e,t,r){e.exports={default:r(153),__esModule:!0}},function(e,t,r){r(63),r(60),e.exports=r(65).f("iterator")},function(e,t,r){e.exports={default:r(155),__esModule:!0}},function(e,t,r){r(156),r(97),r(160),r(161),e.exports=r(2).Symbol},function(e,t,r){"use strict";var n=r(4),i=r(22),o=r(16),a=r(10),s=r(92),u=r(157).KEY,l=r(27),c=r(58),f=r(44),p=r(41),d=r(5),h=r(65),v=r(66),y=r(158),g=r(159),b=r(11),m=r(21),_=r(54),E=r(40),k=r(61),w=r(86),x=r(68),S=r(15),T=r(43),A=x.f,I=S.f,C=w.f,R=n.Symbol,F=n.JSON,j=F&&F.stringify,P=d("_hidden"),N=d("toPrimitive"),L={}.propertyIsEnumerable,O=c("symbol-registry"),Q=c("symbols"),D=c("op-symbols"),M=Object.prototype,B="function"==typeof R,U=n.QObject,q=!U||!U.prototype||!U.prototype.findChild,G=o&&l(function(){return 7!=k(I({},"a",{get:function(){return I(this,"a",{value:7}).a}})).a})?function(e,t,r){var n=A(M,t);n&&delete M[t],I(e,t,r),n&&e!==M&&I(M,t,n)}:I,H=function(e){var t=Q[e]=k(R.prototype);return t._k=e,t},V=B&&"symbol"==typeof R.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof R},X=function(e,t,r){return e===M&&X(D,t,r),b(e),t=_(t,!0),b(r),i(Q,t)?(r.enumerable?(i(e,P)&&e[P][t]&&(e[P][t]=!1),r=k(r,{enumerable:E(0,!1)})):(i(e,P)||I(e,P,E(1,{})),e[P][t]=!0),G(e,t,r)):I(e,t,r)},W=function(e,t){b(e);for(var r,n=y(t=m(t)),i=0,o=n.length;o>i;)X(e,r=n[i++],t[r]);return e},z=function(e,t){return void 0===t?k(e):W(k(e),t)},$=function(e){var t=L.call(this,e=_(e,!0));return!(this===M&&i(Q,e)&&!i(D,e))&&(!(t||!i(this,e)||!i(Q,e)||i(this,P)&&this[P][e])||t)},Y=function(e,t){if(e=m(e),t=_(t,!0),e!==M||!i(Q,t)||i(D,t)){var r=A(e,t);return!r||!i(Q,t)||i(e,P)&&e[P][t]||(r.enumerable=!0),r}},J=function(e){for(var t,r=C(m(e)),n=[],o=0;r.length>o;)i(Q,t=r[o++])||t==P||t==u||n.push(t);return n},K=function(e){for(var t,r=e===M,n=C(r?D:m(e)),o=[],a=0;n.length>a;)!i(Q,t=n[a++])||r&&!i(M,t)||o.push(Q[t]);return o};B||(R=function(){if(this instanceof R)throw TypeError("Symbol is not a constructor!");var e=p(arguments.length>0?arguments[0]:void 0),t=function(r){this===M&&t.call(D,r),i(this,P)&&i(this[P],e)&&(this[P][e]=!1),G(this,e,E(1,r))};return o&&q&&G(M,e,{configurable:!0,set:t}),H(e)},s(R.prototype,"toString",function(){return this._k}),x.f=Y,S.f=X,r(88).f=w.f=J,r(45).f=$,r(67).f=K,o&&!r(42)&&s(M,"propertyIsEnumerable",$,!0),h.f=function(e){return H(d(e))}),a(a.G+a.W+a.F*!B,{Symbol:R});for(var Z="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ee=0;Z.length>ee;)d(Z[ee++]);for(var te=T(d.store),re=0;te.length>re;)v(te[re++]);a(a.S+a.F*!B,"Symbol",{for:function(e){return i(O,e+="")?O[e]:O[e]=R(e)},keyFor:function(e){if(!V(e))throw TypeError(e+" is not a symbol!");for(var t in O)if(O[t]===e)return t},useSetter:function(){q=!0},useSimple:function(){q=!1}}),a(a.S+a.F*!B,"Object",{create:z,defineProperty:X,defineProperties:W,getOwnPropertyDescriptor:Y,getOwnPropertyNames:J,getOwnPropertySymbols:K}),F&&a(a.S+a.F*(!B||l(function(){var e=R();return"[null]"!=j([e])||"{}"!=j({a:e})||"{}"!=j(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!V(e)){for(var t,r,n=[e],i=1;arguments.length>i;)n.push(arguments[i++]);return t=n[1],"function"==typeof t&&(r=t),!r&&g(t)||(t=function(e,t){if(r&&(t=r.call(this,e,t)),!V(t))return t}),n[1]=t,j.apply(F,n)}}}),R.prototype[N]||r(19)(R.prototype,N,R.prototype.valueOf),f(R,"Symbol"),f(Math,"Math",!0),f(n.JSON,"JSON",!0)},function(e,t,r){var n=r(41)("meta"),i=r(20),o=r(22),a=r(15).f,s=0,u=Object.isExtensible||function(){return!0},l=!r(27)(function(){return u(Object.preventExtensions({}))}),c=function(e){a(e,n,{value:{i:"O"+ ++s,w:{}}})},f=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,n)){if(!u(e))return"F";if(!t)return"E";c(e)}return e[n].i},p=function(e,t){if(!o(e,n)){if(!u(e))return!0;if(!t)return!1;c(e)}return e[n].w},d=function(e){return l&&h.NEED&&u(e)&&!o(e,n)&&c(e),e},h=e.exports={KEY:n,NEED:!1,fastKey:f,getWeak:p,onFreeze:d}},function(e,t,r){var n=r(43),i=r(67),o=r(45);e.exports=function(e){var t=n(e),r=i.f;if(r)for(var a,s=r(e),u=o.f,l=0;s.length>l;)u.call(e,a=s[l++])&&t.push(a);return t}},function(e,t,r){var n=r(33);e.exports=Array.isArray||function(e){return"Array"==n(e)}},function(e,t,r){r(66)("asyncIterator")},function(e,t,r){r(66)("observable")},function(e,t,r){r(163);var n=r(2).Object;e.exports=function(e,t,r){return n.defineProperty(e,t,r)}},function(e,t,r){var n=r(10);n(n.S+n.F*!r(16),"Object",{defineProperty:r(15).f})},function(e,t,r){e.exports={default:r(165),__esModule:!0}},function(e,t,r){r(166);var n=r(2).Object;e.exports=function(e,t){return n.getOwnPropertyDescriptor(e,t)}},function(e,t,r){var n=r(21),i=r(68).f;r(52)("getOwnPropertyDescriptor",function(){return function(e,t){return i(n(e),t)}})},function(e,t,r){e.exports={default:r(168),__esModule:!0}},function(e,t,r){r(169),e.exports=r(2).Object.setPrototypeOf},function(e,t,r){var n=r(10);n(n.S,"Object",{setPrototypeOf:r(170).set})},function(e,t,r){var n=r(20),i=r(11),o=function(e,t){if(i(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{n=r(32)(Function.call,r(68).f(Object.prototype,"__proto__").set,2),n(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,r){return o(e,r),t?e.__proto__=r:n(e,r),e}}({},!1):void 0),check:o}},function(e,t,r){e.exports={default:r(172),__esModule:!0}},function(e,t,r){r(173);var n=r(2).Object;e.exports=function(e,t){return n.create(e,t)}},function(e,t,r){var n=r(10);n(n.S,"Object",{create:r(61)})},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return t.project===e.frontend.project.project?null:new b(e.frontend.project.project)}Object.defineProperty(t,"__esModule",{value:!0}),t.BackendRootState=void 0;var o=r(1),a=n(o);t.convertToBackendState=i;var s=r(104),u=r(189),l=n(u),c=r(191),f=n(c),p=r(196),d=n(p),h=r(198),v=n(h),y=r(199),g=n(y),b=t.BackendRootState=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en";(0,a.default)(this,e),this.project=t,this.language=r};t.default=(0,s.combineReducers)({verify:l.default,types:f.default,items:d.default,models:v.default,frontend:g.default})},function(e,t,r){"use strict";function n(e){return null==e?void 0===e?u:s:l&&l in Object(e)?Object(o.a)(e):Object(a.a)(e)}var i=r(107),o=r(178),a=r(179),s="[object Null]",u="[object Undefined]",l=i.a?i.a.toStringTag:void 0;t.a=n},function(e,t,r){"use strict";var n=r(177),i="object"==typeof self&&self&&self.Object===Object&&self,o=n.a||i||Function("return this")();t.a=o},function(e,t,r){"use strict";(function(e){var r="object"==typeof e&&e&&e.Object===Object&&e;t.a=r}).call(t,r(7))},function(e,t,r){"use strict";function n(e){var t=a.call(e,u),r=e[u];try{e[u]=void 0;var n=!0}catch(e){}var i=s.call(e);return n&&(t?e[u]=r:delete e[u]),i}var i=r(107),o=Object.prototype,a=o.hasOwnProperty,s=o.toString,u=i.a?i.a.toStringTag:void 0;t.a=n},function(e,t,r){"use strict";function n(e){return o.call(e)}var i=Object.prototype,o=i.toString;t.a=n},function(e,t,r){"use strict";var n=r(181),i=Object(n.a)(Object.getPrototypeOf,Object);t.a=i},function(e,t,r){"use strict";function n(e,t){return function(r){return e(t(r))}}t.a=n},function(e,t,r){"use strict";function n(e){return null!=e&&"object"==typeof e}t.a=n},function(e,t,r){e.exports=r(184)},function(e,t,r){"use strict";(function(e,n){Object.defineProperty(t,"__esModule",{value:!0});var i,o=r(185),a=function(e){return e&&e.__esModule?e:{default:e}}(o);i="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:n;var s=(0,a.default)(i);t.default=s}).call(t,r(7),r(108)(e))},function(e,t,r){"use strict";function n(e){var t,r=e.Symbol;return"function"==typeof r?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,r){"use strict";function n(e,t){var r=t&&t.type;return"Given action "+(r&&'"'+r.toString()+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function i(e){Object.keys(e).forEach(function(t){var r=e[t];if(void 0===r(void 0,{type:a.a.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===r(void 0,{type:"@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".")}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+a.a.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}function o(e){for(var t=Object.keys(e),r={},o=0;o<t.length;o++){var a=t[o];"function"==typeof e[a]&&(r[a]=e[a])}var s=Object.keys(r),u=void 0;try{i(r)}catch(e){u=e}return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];if(u)throw u;for(var i=!1,o={},a=0;a<s.length;a++){var l=s[a],c=r[l],f=e[l],p=c(f,t);if(void 0===p){var d=n(l,t);throw new Error(d)}o[l]=p,i=i||p!==f}return i?o:e}}t.a=o;var a=r(105);r(106),r(109)},function(e,t,r){"use strict";function n(e,t){return function(){return t(e.apply(void 0,arguments))}}function i(e,t){if("function"==typeof e)return n(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var r=Object.keys(e),i={},o=0;o<r.length;o++){var a=r[o],s=e[a];"function"==typeof s&&(i[a]=n(s,t))}return i}t.a=i},function(e,t,r){"use strict";function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return function(r,n,a){var s=e(r,n,a),u=s.dispatch,l=[],c={getState:s.getState,dispatch:function(e){return u(e)}};return l=t.map(function(e){return e(c)}),u=i.a.apply(void 0,l)(s.dispatch),o({},s,{dispatch:u})}}}t.a=n;var i=r(110),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}},function(e,t,r){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments[1];switch(t.type){case i.VERIFY_ITEM:return t.payload;default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var i=r(190)},function(e,t,r){"use strict";function n(e){return{type:i,payload:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.verifyItem=n;var i=t.VERIFY_ITEM="VERIFY_ITEM"},function(e,t,r){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{userTypes:[],types:[],displayTypes:[]},t=arguments[1];switch(t.type){case a.ADD_TYPE:var r=e.userTypes.filter(function(e){return e.id===t.payload.id})[0],n=e.userTypes.slice(0);r&&n.splice(e.userTypes.indexOf(r),1);var i=e.types.slice(0);return i.push(t.payload),(0,o.default)({},e,{types:i,userTypes:n});case a.CLEAR_TYPES:return(0,o.default)({},e,{types:[]});case a.SET_ORDERED_TYPES:return(0,o.default)({},e,{displayTypes:t.payload});case a.TYPE_CREATED:var u=new s.TreeNode(t.payload.node.value,t.payload.label),l=e.userTypes.slice(0);return l.push(u),(0,o.default)({},e,{userTypes:l});default:return e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(30),o=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=n;var a=r(195),s=r(70)},function(e,t,r){r(193),e.exports=r(2).Object.assign},function(e,t,r){var n=r(10);n(n.S+n.F,"Object",{assign:r(194)})},function(e,t,r){"use strict";var n=r(43),i=r(67),o=r(45),a=r(62),s=r(87),u=Object.assign;e.exports=!u||r(27)(function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(e){t[e]=e}),7!=u({},e)[r]||Object.keys(u({},t)).join("")!=n})?function(e,t){for(var r=a(e),u=arguments.length,l=1,c=i.f,f=o.f;u>l;)for(var p,d=s(arguments[l++]),h=c?n(d).concat(c(d)):n(d),v=h.length,y=0;v>y;)f.call(d,p=h[y++])&&(r[p]=d[p]);return r}:u},function(e,t,r){"use strict";function n(e){return{type:f,payload:e}}function i(){return{type:p,payload:void 0}}function o(e){return{type:d,payload:e}}function a(e,t){return function(r){return t.createNewItem([new u.PropertyAndValue(l.SKOS.prefLabel,l.DataFactory.instance.literal(e)),new u.PropertyAndValue(l.RDF.type,l.OWL.Class)]).then(function(t){r(s(t,e))})}}function s(e,t){return{type:c,payload:{node:e,label:t}}}Object.defineProperty(t,"__esModule",{value:!0}),t.SET_ORDERED_TYPES=t.CLEAR_TYPES=t.ADD_TYPE=t.TYPE_CREATED=t.CREATE_TYPE=void 0,t.addType=n,t.clearTypes=i,t.setOrderedTypes=o,t.createType=a,t.typeCreated=s;var u=r(24),l=r(6),c=(t.CREATE_TYPE="CREATE_TYPE",t.TYPE_CREATED="TYPE_CREATED"),f=t.ADD_TYPE="ADD_TYPE",p=t.CLEAR_TYPES="CLEAR_TYPES",d=t.SET_ORDERED_TYPES="SET_ORDERED_TYPES"},function(e,t,r){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{items:[],itemIndex:{},localItems:[],allItems:[]},t=arguments[1];switch(t.type){case a.ITEM_PROPERTIES:return e;case a.DISPLAY_ITEMS:var r=e.items.slice(0),n=(0,o.default)({},e.itemIndex);return t.payload.items.forEach(function(e,i){n[e.value]||(r.push(e),n[e.value]=e,t.payload.coordinates&&t.payload.coordinates[i]&&t.payload.coordinates[i][0]&&t.payload.coordinates[i][1]&&(n[e.value].x=t.payload.coordinates[i][0],n[e.value].y=t.payload.coordinates[i][1]))}),(0,o.default)({},e,{items:r,itemIndex:n});case a.ALL_ITEMS_LOADED:return(0,o.default)({},e,{allItems:t.payload.items});case a.ITEMS_CREATED:case a.ITEMS_DELETED:return e;case a.HIDE_ITEM:var i=e.itemIndex[t.payload.value],s=e.items.slice(0),u=(0,o.default)({},e.itemIndex);return i&&(s.splice(s.indexOf(i),1),delete u[t.payload.value]),(0,o.default)({},e,{items:s,itemIndex:u});default:return e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(30),o=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=n;var a=r(197)},function(e,t,r){"use strict";function n(e){return function(t){return e.getAllItems().then(function(e){t(i(e))})}}function i(e){return{type:T,payload:{items:e}}}function o(e,t){return{type:w,payload:{items:e?[e]:[],coordinates:[t]}}}function a(e,t){return{type:w,payload:{items:e,coordinates:t}}}function s(e,t,r,n){return function(i){return e.alterItem(t,r,n).then(function(e){i(u())})}}function u(){return{type:S,payload:{}}}function l(e,t,r,n){return function(i){i(c(e,t,r?[r]:[],n))}}function c(e,t,r,n){return function(i){return b(e,t,r,n).then(function(e){i(f(e))})}}function f(e){return{type:E,payload:{items:e}}}function p(e,t,r,n){return function(i){return b(e,t,r?[r]:[],n).then(function(e){return i(a(e))})}}function d(e,t,r,n){return function(i){return b(e,t,r,n).then(function(e){return i(a(e))})}}function h(e,t,r){return function(n){return n(v(e,t,r?[r]:[]))}}function v(e,t,r){return function(n){return e.all(r.map(function(e){return t.deleteItem(e)})).then(function(){return n(y(r))})}}function y(e){return{type:k,payload:{items:e}}}function g(e){return{type:x,payload:e}}function b(e,t,r,n){var i=n?m.DataFactory.instance.namedNode(n):m.OWL.Thing;if(r[0]){var o=r.map(function(e){return e.value?t.createNewItem([new _.PropertyAndValue(m.SKOS.prefLabel,m.DataFactory.instance.literal(e.value)),new _.PropertyAndValue(m.RDF.type,i)]):t.createNewItem([new _.PropertyAndValue(m.RDF.type,i)])});return e.all(o)}return t.createNewItem([new _.PropertyAndValue(m.RDF.type,i),new _.PropertyAndValue(m.SKOS.prefLabel,m.DataFactory.instance.literal(""))]).then(function(e){return[e]})}Object.defineProperty(t,"__esModule",{value:!0}),t.ALL_ITEMS_LOADED=t.LOAD_ALL_ITEMS=t.SET_ORDERED_TYPES=t.ITEM_PROPERTIES=t.CREATE_LOCAL_ITEM=t.HIDE_ITEM=t.DISPLAY_ITEMS=t.CLEAR_TYPES=t.ITEMS_DELETED=t.CREATE_DISPLAY_ITEMS=t.ITEMS_CREATED=t.CREATE_TYPE=void 0,t.loadAllItems=n,t.allItemsLoaded=i,t.displayItem=o,t.displayItems=a,t.itemProperty=s,t.itemPropertyUpdated=u,t.createItem=l,t.createItems=c,t.itemsCreated=f,t.createDisplayItem=p,t.createDisplayItems=d,t.deleteItem=h,t.deleteItems=v,t.itemsDeleted=y,t.hideItem=g;var m=r(6),_=r(24),E=(t.CREATE_TYPE="CREATE_TYPE",t.ITEMS_CREATED="ITEMS_CREATED"),k=(t.CREATE_DISPLAY_ITEMS="CREATE_DISPLAY_ITEMS",t.ITEMS_DELETED="ITEMS_DELETED"),w=(t.CLEAR_TYPES="CLEAR_TYPES",t.DISPLAY_ITEMS="DISPLAY_ITEMS"),x=t.HIDE_ITEM="HIDE_ITEM",S=(t.CREATE_LOCAL_ITEM="CREATE_LOCAL_ITEM",t.ITEM_PROPERTIES="ITEM_PROPERTIES"),T=(t.SET_ORDERED_TYPES="SET_ORDERED_TYPES",t.LOAD_ALL_ITEMS="LOAD_ALL_ITEMS",t.ALL_ITEMS_LOADED="ALL_ITEMS_LOADED")},function(e,t,r){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return arguments[1].type,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(104),o=r(200),a=n(o),s=r(215),u=n(s),l=r(216),c=n(l),f=r(217),p=n(f);t.default=(0,i.combineReducers)({project:a.default,filter:u.default,active:c.default,sources:p.default})},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments[1];switch(t.type){case l.SET_PROJECT:var r=t.payload,n=r.archiveEndpoints.concat(r.authorityEndpoints).map(function(e,t){return{id:e.id,description:e.labels.filter(function(e){return"en"===e.language})[0].value,classList:[{description:"Concept"},{description:"Document"},{description:"Person"},{description:"Organization"},{description:"CorporateBody"},{description:"Place"}]}});return(0,a.default)({},e,{project:r,id:t.payload.id,sources:n,description:t.payload.labels[0].value});case l.SET_ALL_ITEM_COUNT:return(0,a.default)({},e,{allItemsCount:t.payload});case l.SET_FILTERED_ITEM_COUNT:return(0,a.default)({},e,{filteredItemsCount:t.payload});case l.SET_ACTIVE_ITEM_COUNT:return(0,a.default)({},e,{activeItemsCount:t.payload});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectState=void 0;var o=r(30),a=n(o),s=r(1),u=n(s);t.default=i;var l=r(201),c=t.ProjectState=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;(0,u.default)(this,e),this.project=t,this.id=r,this.sources=n,this.description=i,this.allItemsCount=o,this.filteredItemsCount=a,this.activeItemsCount=s},f=new c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectActionService=t.SET_ACTIVE_ITEM_COUNT=t.SET_FILTERED_ITEM_COUNT=t.SET_ALL_ITEM_COUNT=t.SET_PROJECT=void 0;var i=r(1),o=n(i),a=r(3),s=n(a),u=r(111),l=r(74),c=r(116),f=r(9),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(f),d=t.SET_PROJECT="SET_PROJECT",h=t.SET_ALL_ITEM_COUNT="SET_ALL_ITEM_COUNT",v=t.SET_FILTERED_ITEM_COUNT="SET_FILTERED_ITEM_COUNT",y=t.SET_ACTIVE_ITEM_COUNT="SET_ACTIVE_ITEM_COUNT",g=t.ProjectActionService=function(){function e(t,r){(0,o.default)(this,e),this.$ngRedux=t,this.projectService=r}return e.$inject=["$ngRedux","projectService"],(0,s.default)(e,[{key:"setProject",value:function(e,t,r){var n=this;return this.$ngRedux.dispatch({type:l.CLEAR_ACTIVE_STATE}),this.$ngRedux.dispatch({type:u.CLEAR_FILTER_STATE}),this.$ngRedux.dispatch({type:c.CLEAR_SOURCES_STATE}),this.projectService.loadProject({sparqlEndpoint:t,graph:r},e,!0).then(function(e){return e.archiveEndpoints.forEach(function(t){n.$ngRedux.dispatch({type:c.ADD_SOURCE,payload:{id:t.id,labels:t.labels,classes:e.dataModel.classMap.values()}})}),e.authorityEndpoints.forEach(function(t){n.$ngRedux.dispatch({type:c.ADD_SOURCE,payload:{id:t.id,labels:t.labels,classes:e.dataModel.classMap.values()}})}),n.$ngRedux.dispatch({type:d,payload:e})})}},{key:"setAllItemCount",value:function(e){return this.$ngRedux.dispatch({type:h,payload:e})}},{key:"setFilteredItemCount",value:function(e){return this.$ngRedux.dispatch({type:v,payload:e})}},{key:"setActiveItemCount",value:function(e){return this.$ngRedux.dispatch({type:y,payload:e})}}]),e}();p.module("fibra.actions.project",[]).config(["$provide",function(e){e.service("projectActionService",g)}])},function(e,t,r){r(97),r(63),r(60),r(203),r(213),r(214),e.exports=r(2).Promise},function(e,t,r){"use strict";var n,i,o,a,s=r(42),u=r(4),l=r(32),c=r(96),f=r(10),p=r(20),d=r(39),h=r(204),v=r(205),y=r(112),g=r(113).set,b=r(209)(),m=r(73),_=r(114),E=r(115),k=u.TypeError,w=u.process,x=u.Promise,S="process"==c(w),T=function(){},A=i=m.f,I=!!function(){try{var e=x.resolve(1),t=(e.constructor={})[r(5)("species")]=function(e){e(T,T)};return(S||"function"==typeof PromiseRejectionEvent)&&e.then(T)instanceof t}catch(e){}}(),C=function(e){var t;return!(!p(e)||"function"!=typeof(t=e.then))&&t},R=function(e,t){if(!e._n){e._n=!0;var r=e._c;b(function(){for(var n=e._v,i=1==e._s,o=0;r.length>o;)!function(t){var r,o,a=i?t.ok:t.fail,s=t.resolve,u=t.reject,l=t.domain;try{a?(i||(2==e._h&&P(e),e._h=1),!0===a?r=n:(l&&l.enter(),r=a(n),l&&l.exit()),r===t.promise?u(k("Promise-chain cycle")):(o=C(r))?o.call(r,s,u):s(r)):u(n)}catch(e){u(e)}}(r[o++]);e._c=[],e._n=!1,t&&!e._h&&F(e)})}},F=function(e){g.call(u,function(){var t,r,n,i=e._v,o=j(e);if(o&&(t=_(function(){S?w.emit("unhandledRejection",i,e):(r=u.onunhandledrejection)?r({promise:e,reason:i}):(n=u.console)&&n.error&&n.error("Unhandled promise rejection",i)}),e._h=S||j(e)?2:1),e._a=void 0,o&&t.e)throw t.v})},j=function(e){if(1==e._h)return!1;for(var t,r=e._a||e._c,n=0;r.length>n;)if(t=r[n++],t.fail||!j(t.promise))return!1;return!0},P=function(e){g.call(u,function(){var t;S?w.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})})},N=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),R(t,!0))},L=function(e){var t,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw k("Promise can't be resolved itself");(t=C(e))?b(function(){var n={_w:r,_d:!1};try{t.call(e,l(L,n,1),l(N,n,1))}catch(e){N.call(n,e)}}):(r._v=e,r._s=1,R(r,!1))}catch(e){N.call({_w:r,_d:!1},e)}}};I||(x=function(e){h(this,x,"Promise","_h"),d(e),n.call(this);try{e(l(L,this,1),l(N,this,1))}catch(e){N.call(this,e)}},n=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},n.prototype=r(210)(x.prototype,{then:function(e,t){var r=A(y(this,x));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=S?w.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&R(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new n;this.promise=e,this.resolve=l(L,e,1),this.reject=l(N,e,1)},m.f=A=function(e){return e===x||e===a?new o(e):i(e)}),f(f.G+f.W+f.F*!I,{Promise:x}),r(44)(x,"Promise"),r(211)("Promise"),a=r(2).Promise,f(f.S+f.F*!I,"Promise",{reject:function(e){var t=A(this);return(0,t.reject)(e),t.promise}}),f(f.S+f.F*(s||!I),"Promise",{resolve:function(e){return E(s&&this===a?x:this,e)}}),f(f.S+f.F*!(I&&r(212)(function(e){x.all(e).catch(T)})),"Promise",{all:function(e){var t=this,r=A(t),n=r.resolve,i=r.reject,o=_(function(){var r=[],o=0,a=1;v(e,!1,function(e){var s=o++,u=!1;r.push(void 0),a++,t.resolve(e).then(function(e){u||(u=!0,r[s]=e,--a||n(r))},i)}),--a||n(r)});return o.e&&i(o.v),r.promise},race:function(e){var t=this,r=A(t),n=r.reject,i=_(function(){v(e,!1,function(e){t.resolve(e).then(r.resolve,n)})});return i.e&&n(i.v),r.promise}})},function(e,t){e.exports=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e}},function(e,t,r){var n=r(32),i=r(206),o=r(207),a=r(11),s=r(90),u=r(95),l={},c={},t=e.exports=function(e,t,r,f,p){var d,h,v,y,g=p?function(){return e}:u(e),b=n(r,f,t?2:1),m=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(o(g)){for(d=s(e.length);d>m;m++)if((y=t?b(a(h=e[m])[0],h[1]):b(e[m]))===l||y===c)return y}else for(v=g.call(e);!(h=v.next()).done;)if((y=i(v,b,h.value,t))===l||y===c)return y};t.BREAK=l,t.RETURN=c},function(e,t,r){var n=r(11);e.exports=function(e,t,r,i){try{return i?t(n(r)[0],r[1]):t(r)}catch(t){var o=e.return;throw void 0!==o&&n(o.call(e)),t}}},function(e,t,r){var n=r(35),i=r(5)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||o[i]===e)}},function(e,t){e.exports=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},function(e,t,r){var n=r(4),i=r(113).set,o=n.MutationObserver||n.WebKitMutationObserver,a=n.process,s=n.Promise,u="process"==r(33)(a);e.exports=function(){var e,t,r,l=function(){var n,i;for(u&&(n=a.domain)&&n.exit();e;){i=e.fn,e=e.next;try{i()}catch(n){throw e?r():t=void 0,n}}t=void 0,n&&n.enter()};if(u)r=function(){a.nextTick(l)};else if(o){var c=!0,f=document.createTextNode("");new o(l).observe(f,{characterData:!0}),r=function(){f.data=c=!c}}else if(s&&s.resolve){var p=s.resolve();r=function(){p.then(l)}}else r=function(){i.call(n,l)};return function(n){var i={fn:n,next:void 0};t&&(t.next=i),e||(e=i,r()),t=i}}},function(e,t,r){var n=r(19);e.exports=function(e,t,r){for(var i in t)r&&e[i]?e[i]=t[i]:n(e,i,t[i]);return e}},function(e,t,r){"use strict";var n=r(4),i=r(2),o=r(15),a=r(16),s=r(5)("species");e.exports=function(e){var t="function"==typeof i[e]?i[e]:n[e];a&&t&&!t[s]&&o.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,r){var n=r(5)("iterator"),i=!1;try{var o=[7][n]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var r=!1;try{var o=[7],a=o[n]();a.next=function(){return{done:r=!0}},o[n]=function(){return a},e(o)}catch(e){}return r}},function(e,t,r){"use strict";var n=r(10),i=r(2),o=r(4),a=r(112),s=r(115);n(n.P+n.R,"Promise",{finally:function(e){var t=a(this,i.Promise||o.Promise),r="function"==typeof e;return this.then(r?function(r){return s(t,e()).then(function(){return r})}:e,r?function(r){return s(t,e()).then(function(){throw r})}:e)}})},function(e,t,r){"use strict";var n=r(10),i=r(73),o=r(114);n(n.S,"Promise",{try:function(e){var t=i.f(this),r=o(e);return(r.e?t.reject:t.resolve)(r.v),t.promise}})},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments[1];switch(t.type){case l.CLEAR_FILTER_STATE:return c;case l.SET_FILTER_DIVIDER_PERCENTAGE:return(0,u.default)({},e,{dividerPercent:t.payload});case l.SET_FILTER_FOR_CLASS_AND_PROP:return(0,u.default)({},e,{filtersByClass:(0,u.default)({},e.filtersByClass,(0,a.default)({},t.payload.clss.id.value,(0,u.default)({},e.filtersByClass[t.payload.clss.id.value],(0,a.default)({},t.payload.property.id.value,{type:"TIMELINE",description:"Timeline",domain:[0,2500],selection:[0,2500],clss:t.payload.clss,prop:t.payload.property}))))});case l.SET_FILTER_SELECTION:return(0,u.default)({},e,{filtersByClass:(0,u.default)({},e.filtersByClass,(0,a.default)({},t.payload.clss.id.value,(0,u.default)({},e.filtersByClass[t.payload.clss.id.value],(0,a.default)({},t.payload.property.id.value,(0,u.default)({},e.filtersByClass[t.payload.clss.id.value][t.payload.property.id.value],{selection:t.payload.selection})))))});case l.REMOVE_FILTER:var r=(0,u.default)({},e.filtersByClass[t.payload.clss.id.value],(0,a.default)({},t.payload.property.id.value,null));return delete r[t.payload.property.id.value],(0,u.default)({},e,{filtersByClass:(0,u.default)({},e.filtersByClass,(0,a.default)({},t.payload.clss.id.value,r))});default:return e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(117),a=n(o),s=r(30),u=n(s);t.default=i;var l=r(111),c={dividerPercent:0,filtersByClass:{}}},function(e,t,r){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments[1];switch(t.type){case s.CLEAR_ACTIVE_STATE:return u;case s.ADD_ITEM_TO_CURRENT_LAYOUT:var r=e.activeLayout.items.slice(0);return r.push(t.payload),(0,o.default)({},e,{activeLayout:(0,o.default)({},e.activeLayout,{items:r})});case a.ADD_ITEM_TO_ITEM_STATE:var n=e.activeLayout.items.slice(0),i=t.payload.itemState;return n.splice(n.indexOf(i),1),n.push((0,o.default)({},i,{item:t.payload.fullItem})),(0,o.default)({},e,{activeLayout:(0,o.default)({},e.activeLayout,{items:n})});case s.SET_ACTIVE_DIVIDER_PERCENTAGE:return(0,o.default)({},e,{dividerPercent:t.payload});default:return e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(30),o=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=n;var a=r(74),s=r(74),u={activeLayout:{items:[]},dividerPercent:0}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments[1];switch(t.type){case l.CLEAR_SOURCES_STATE:return c;case l.SET_SOURCE_CLASS_ACTIVE:return(0,u.default)({},e,{sourceClassToggle:(0,u.default)({},e.sourceClassToggle,(0,a.default)({},t.payload.source,(0,u.default)({},e.sourceClassToggle[t.payload.source],(0,a.default)({},t.payload.clss,t.payload.status))))});case l.ADD_SOURCE:var r=e.sources.slice();return r.push(t.payload),(0,u.default)({},e,{sources:r});default:return e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(117),a=n(o),s=r(30),u=n(s);t.default=i;var l=r(116),c={sources:[],sourceClassToggle:{"http://ldf.fi/fibra/viafCidocLiteEndpointConfiguration":{"http://www.cidoc-crm.org/cidoc-crm/E21_Person":!0,"http://www.cidoc-crm.org/cidoc-crm/E53_Place":!0},"http://ldf.fi/fibra/geonamesCidocLiteEndpointConfiguration":{"http://www.cidoc-crm.org/cidoc-crm/E21_Person":!0,"http://www.cidoc-crm.org/cidoc-crm/E53_Place":!0}}}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectWorkerService=t.ProjectService=void 0;var i=r(1),o=n(i),a=r(3),s=n(a),u=r(9),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(u),c=r(28),f=r(100),p=r(23),d=r(71),h=r(102),v=r(103),y=r(17),g=r(101),b=r(6),m=r(29),_=t.ProjectService=function(){function e(t,r,n,i){(0,o.default)(this,e),this.workerService=t,this.fibraService=r,this.fibraSparqlService=n,this.$localStorage=i,i.projectSources?i.projectSources.forEach(function(e){e.sparqlEndpoint||(e.sparqlEndpoint=e.endpoint,e.updateEndpoint=e.endpoint,e.graphStoreEndpoint=e.endpoint)}):i.projectSources=[]}return e.$inject=["workerService","fibraService","fibraSparqlService","$localStorage"],(0,s.default)(e,[{key:"getCurrentProject",value:function(){return this.fibraService.getState().project}},{key:"setCurrentProject",value:function(e){return this.fibraService.dispatchAction(this.fibraService.setProject(e))}},{key:"getProjectSources",value:function(){return this.$localStorage.projectSources}},{key:"listPrimaryEndpointConfigurations",value:function(e){return this.workerService.call("projectWorkerService","listPrimaryEndpointConfigurations",[e])}},{key:"loadPrimaryEndpointConfiguration",value:function(e,t){return this.workerService.call("projectWorkerService","loadPrimaryEndpointConfiguration",[e,t])}},{key:"listArchiveEndpointConfigurations",value:function(e){return this.workerService.call("projectWorkerService","listArchiveEndpointConfigurations",[e])}},{key:"listAuthorityEndpointConfigurations",value:function(e){return this.workerService.call("projectWorkerService","listAuthorityEndpointConfigurations",[e])}},{key:"loadRemoteEndpointConfiguration",value:function(e,t){return this.workerService.call("projectWorkerService","loadRemoteEndpointConfiguration",[e,t])}},{key:"listSchemas",value:function(e){return this.workerService.call("projectWorkerService","listSchemas",[e])}},{key:"loadSchema",value:function(e,t){return this.workerService.call("projectWorkerService","loadSchema",[e,t])}},{key:"listProjects",value:function(e){return this.workerService.call("projectWorkerService","listProjects",[e])}},{key:"loadProject",value:function(e,t,r){return this.workerService.call("projectWorkerService","loadProject",[e,t,r])}},{key:"deleteCitable",value:function(e,t){return this.deleteObject(e,t.id,t.source.graph)}},{key:"deleteObjects",value:function(t,r,n){var i=n?e.deleteQuery.replace(/# STARTGRAPH/g,"GRAPH <"+n+"> {").replace(/# ENDGRAPH/g,"}"):e.deleteQuery.replace(/.*# STARTGRAPH\n/g,"").replace(/.*# ENDGRAPH\n/g,"");return i=i.replace(/# PATTERNS/g,r.reduce(function(e,t,r){return e+" <"+t+"> ?p"+r+" ?o"+r+" ."},"")),this.fibraSparqlService.update(t,i)}},{key:"deleteObject",value:function(e,t,r){return this.deleteObjects(e,[t],r)}},{key:"saveCitable",value:function(e,t,r){var n=this,i=new y.FMap,o={};return r.toTurtle(i,o),console.log(r,i,o),this.deleteObjects(e,i.keys(),r.source.graph).then(function(){return n.fibraSparqlService.post(t,(0,g.toTurtle)(o,i),r.source.graph)})}}],[{key:"orderCitables",value:function(e){e.sort(function(e,t){return(e.order?e.order:Number.MAX_VALUE)-(t.order?t.order:Number.MAX_VALUE)}),e.forEach(function(e){return delete e.order})}}]),e}();_.deleteQuery="DELETE {\n# STARTGRAPH\n  # PATTERNS\n# ENDGRAPH\n}\nWHERE {\n# STARTGRAPH\n  # PATTERNS\n# ENDGRAPH\n}";var E=t.ProjectWorkerService=function(){function e(t,r){(0,o.default)(this,e),this.fibraSparqlService=t,this.$q=r}return e.$inject=["fibraSparqlService","$q"],(0,s.default)(e,[{key:"loadPrimaryEndpointConfiguration",value:function(e,t){return this.runSingleQuery(e,d.PrimaryEndpointConfiguration.primaryEndpointConfigurationQuery,t,new d.PrimaryEndpointConfiguration(t,e))}},{key:"listPrimaryEndpointConfigurations",value:function(e){return this.runListQuery(e,d.PrimaryEndpointConfiguration.listPrimaryEndpointConfigurationsQuery,function(t){return new d.PrimaryEndpointConfiguration(t,e)})}},{key:"loadRemoteEndpointConfiguration",value:function(e,t){return this.runSingleQuery(e,h.RemoteEndpointConfiguration.remoteEndpointConfigurationQuery,t,new h.RemoteEndpointConfiguration(t,e))}},{key:"listArchiveEndpointConfigurations",value:function(e){return this.runListQuery(e,h.RemoteEndpointConfiguration.listArchiveEndpointConfigurationsQuery,function(t){return new h.RemoteEndpointConfiguration(t,e)})}},{key:"listAuthorityEndpointConfigurations",value:function(e){return this.runListQuery(e,h.RemoteEndpointConfiguration.listAuthorityEndpointConfigurationsQuery,function(t){return new h.RemoteEndpointConfiguration(t,e)})}},{key:"listProjects",value:function(e){return this.runListQuery(e,f.Project.listProjectsQuery,function(t){return new f.Project(t,e)})}},{key:"listSchemas",value:function(e){return this.runListQuery(e,v.Schema.listSchemasQuery,function(t){return new v.Schema(t,e)})}},{key:"loadSchema",value:function(e,t){return this.runSingleQuery(e,v.Schema.schemaQuery,t,new v.Schema(t,e))}},{key:"loadDataModel",value:function(e){var t=this,r=new m.DataModel,n=new y.EMap(function(e){var t=new m.Class(b.DataFactory.namedNode(e));return r.classMap.set(e,t),t}),i=new y.EMap(function(e){var t=new m.Property(b.DataFactory.namedNode(e));return r.propertyMap.set(e,t),t}),o=[];return e.forEach(function(e){o.push(t.fibraSparqlService.query(e.endpoint,e.classQuery).then(function(e){var t={bindingTypes:{types:"uniqueArray"},bindingConverters:{superClasses:function(e){return n.goc(e.value)},subClasses:function(e){return n.goc(e.value)},types:function(e){return n.goc(e.value)},labels:function(e){return b.DataFactory.nodeFromBinding(e)},descriptions:function(e){return b.DataFactory.nodeFromBinding(e)}}},r=new p.UniqueObjectTracker;e.results.bindings.forEach(function(e){return p.SparqlService.bindingsToObject(e,n.goc(e.id.value),t,r)})})),o.push(t.fibraSparqlService.query(e.endpoint,e.propertyQuery).then(function(e){var t={bindingTypes:{types:"uniqueArray"},bindingConverters:{superProperties:function(e){return i.goc(e.value)},subProperties:function(e){return i.goc(e.value)},inverseProperty:function(e){return i.goc(e.value)},types:function(e){return n.goc(e.value)},domains:function(e){return n.goc(e.value)},ranges:function(e){return n.goc(e.value)},labels:function(e){return b.DataFactory.nodeFromBinding(e)},descriptions:function(e){return b.DataFactory.nodeFromBinding(e)}}},r=new p.UniqueObjectTracker;e.results.bindings.forEach(function(e){return p.SparqlService.bindingsToObject(e,i.goc(e.id.value),t,r)})}))}),this.$q.all(o).then(function(){return n.values().forEach(function(e){e.buildAsNodes(),e.superClasses.filter(function(t){return!t.subClasses.find(function(t){return t===e})}).forEach(function(t){return t.subClasses.push(e)}),e.subClasses.filter(function(t){return!t.superClasses.find(function(t){return t===e})}).forEach(function(t){return t.superClasses.push(e)})}),n.values().forEach(function(e){0===e.superClasses.length&&r.rootClasses.push(e)}),i.values().forEach(function(e){e.buildAsNodes(),e.inverseProperty&&(e.inverseProperty.inverseProperty=e),e.superProperties.filter(function(t){return!t.subProperties.find(function(t){return t===e})}).forEach(function(t){return t.subProperties.push(e)}),e.subProperties.filter(function(t){return!t.superProperties.find(function(t){return t===e})}).forEach(function(t){return t.superProperties.push(e)}),e.domains.forEach(function(t){return t.properties.push(e)}),e.ranges.forEach(function(t){return t.inverseProperties.push(e)})}),i.values().forEach(function(e){0===e.superProperties.length&&r.rootProperties.push(e)}),r})}},{key:"loadProject",value:function(e,t,r){var n=this,i=this.runSingleQuery(e,f.Project.projectQuery,t,new f.Project(t,e));return r?i.then(function(e){var t=[];t.push(n.$q.all(e.schemas.map(function(e){return n.loadSchema(e.source,e.id)})).then(function(t){return e.schemas=t,n.loadDataModel(t).then(function(t){return e.dataModel=t})}));var r=[],i=[];return e.archiveEndpoints.forEach(function(e){return t.push(n.loadRemoteEndpointConfiguration(e.source,e.id).then(function(e){return r.push(e)}))}),e.authorityEndpoints.forEach(function(e){return t.push(n.loadRemoteEndpointConfiguration(e.source,e.id).then(function(e){return i.push(e)}))}),n.$q.all(t).then(function(){return e.archiveEndpoints=r,e.authorityEndpoints=i,e})}):i}},{key:"runSingleQuery",value:function(e,t,r,n){t=e.graph?t.replace(/# STARTGRAPH/g,"GRAPH <"+e.graph+"> {").replace(/# ENDGRAPH/g,"}"):t.replace(/.*# STARTGRAPH\n/g,"").replace(/.*# ENDGRAPH\n/g,""),t=t.replace(/<ID>/g,"<"+r+">");var i=this.$q.defer();return this.fibraSparqlService.query(e.sparqlEndpoint,t).then(function(t){var r={bindingTypes:{rightsHolders:"uniqueArray",schemas:"uniqueArray",authorityEndpoints:"uniqueArray",archiveEndpoints:"uniqueArray"},bindingConverters:{dateCreated:function(e){return new Date(e.value)},types:function(e){return b.DataFactory.nodeFromBinding(e)},labels:function(e){return b.DataFactory.nodeFromBinding(e)},descriptions:function(e){return b.DataFactory.nodeFromBinding(e)},schemas:function(t){return new v.Schema(t.value,c.CitableSource.clone(e))},authorityEndpoints:function(t){return new h.RemoteEndpointConfiguration(t.value,c.CitableSource.clone(e))},archiveEndpoints:function(t){return new h.RemoteEndpointConfiguration(t.value,c.CitableSource.clone(e))},rightsHolders_labels:function(e){return b.DataFactory.nodeFromBinding(e)},rightsHolders_descriptions:function(e){return b.DataFactory.nodeFromBinding(e)},rightsHolders:function(t){return new c.Citable(t.value,e)}}},o=new p.UniqueObjectTracker;t.results.bindings.forEach(function(e){return p.SparqlService.bindingsToObject(e,n,r,o)}),_.orderCitables(n.rightsHolders),i.resolve(n)}),i.promise}},{key:"runListQuery",value:function(e,t,r){return t=e.graph?t.replace(/# STARTGRAPH/g,"GRAPH <"+e.graph+"> {").replace(/# ENDGRAPH/g,"}"):t.replace(/.*# STARTGRAPH\n/g,"").replace(/.*# ENDGRAPH\n/g,""),this.fibraSparqlService.query(e.sparqlEndpoint,t).then(function(t){var n=new y.EMap(r),i={bindingTypes:{rightsHolders:"uniqueArray",schemas:"uniqueArray",authorityEndpoints:"uniqueArray",archiveEndpoints:"uniqueArray"},bindingConverters:{dateCreated:function(e){return new Date(e.value)},types:function(e){return b.DataFactory.nodeFromBinding(e)},labels:function(e){return b.DataFactory.nodeFromBinding(e)},descriptions:function(e){return b.DataFactory.nodeFromBinding(e)},schemas:function(t){return new v.Schema(t.value,c.CitableSource.clone(e))},authorityEndpoints:function(t){return new h.RemoteEndpointConfiguration(t.value,c.CitableSource.clone(e))},archiveEndpoints:function(t){return new h.RemoteEndpointConfiguration(t.value,c.CitableSource.clone(e))},rightsHolders_labels:function(e){return b.DataFactory.nodeFromBinding(e)},rightsHolders_descriptions:function(e){return b.DataFactory.nodeFromBinding(e)},rightsHolders:function(t){return new c.Citable(t.value,e)}}},o=new p.UniqueObjectTracker;return t.results.bindings.forEach(function(e){return p.SparqlService.bindingsToObject(e,n.goc(e.id.value),i,o)}),n.values().forEach(function(e){return _.orderCitables(e.rightsHolders)}),n.values()})}}]),e}();l.module("fibra.services.project-service",["fibra.services.fibra-service","fibra.services.fibra-sparql-service"]).config(["$provide",function(e){e.service("projectService",_),e.service("projectWorkerService",E)}])},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.RDFStoreInternalSparqlService=t.FibraSparqlService=t.SparqlServiceDefinition=void 0;var i=r(3),o=n(i),a=r(1),s=n(a),u=r(9),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(u),c=r(118),f=r(17),p=(t.SparqlServiceDefinition=function e(t,r){(0,s.default)(this,e),this.type=t,this.id=r},function(){function e(t,r){var n=this;(0,s.default)(this,e),this.sparqlService=t,this.$q=r,this.services=new f.EMap(function(e){if(0===e.indexOf("local:")){var t=n.$q.defer();return new c.Store({name:e,persistent:!0},function(e,r){e?t.reject(e):t.resolve(new h(r,n.$q))}),t.promise}return n.$q.resolve(new d(n.sparqlService,e))})}return e.$inject=["sparqlService","$q"],(0,o.default)(e,[{key:"query",value:function(e,t,r){return this.services.goc(e).then(function(e){return e.query(t,r)})}},{key:"update",value:function(e,t,r){return this.services.goc(e).then(function(e){return e.update(t,r)})}},{key:"get",value:function(e,t,r){return this.services.goc(e).then(function(e){return e.get(t,r)})}},{key:"put",value:function(e,t,r,n){return this.services.goc(e).then(function(e){return e.put(t,r,n)})}},{key:"post",value:function(e,t,r,n){return this.services.goc(e).then(function(e){return e.post(t,r,n)})}}]),e}());t.FibraSparqlService=p;var d=function(){function e(t,r){(0,s.default)(this,e),this.s=t,this.endpoint=r}return(0,o.default)(e,[{key:"query",value:function(e,t){return this.s.query(this.endpoint,e,t).then(function(e){return e.data})}},{key:"update",value:function(e,t){return this.s.update(this.endpoint,e,t).then(function(e){return e.data})}},{key:"get",value:function(e,t){return this.s.get(this.endpoint,e,t).then(function(e){return e.data})}},{key:"post",value:function(e,t,r){return this.s.post(this.endpoint,e,t,r).then(function(e){return e.data})}},{key:"put",value:function(e,t,r){return this.s.put(this.endpoint,e,t,r).then(function(e){return e.data})}}]),e}(),h=function(){function e(t,r){(0,s.default)(this,e),this.s=t,this.$q=r}return(0,o.default)(e,[{key:"query",value:function(t,r){var n=this,i=this.$q.defer();try{this.s.execute(t,function(r,o){if(r)console.log("Error executing",n.s,t,r),i.reject(r);else{var a={head:{vars:[]},results:{bindings:[]}},s=new f.StringSet;a.results.bindings=o.map(function(t){var r={};for(var n in t)s.add(n),null!==t[n]&&(r[n]=e.convertBinding(t[n]));return r}),a.head.vars=s.values(),i.resolve(a)}})}catch(e){throw console.log("Exception executing",this.s,t,e),e}return i.promise}},{key:"update",value:function(e,t){var r=this.$q.defer();return this.s.execute(e,function(e,t){e?r.reject(e):r.resolve(t)}),r.promise}},{key:"get",value:function(e,t){var r=this.$q.defer();return this.s.graph(e,function(e,t){e?r.reject(e):r.resolve(t.toNT())}),r.promise}},{key:"post",value:function(e,t,r){var n=this.$q.defer(),i=function(e,t){e?n.reject(e):n.resolve()};return t?this.s.load("text/turtle",e,t,i):this.s.load("text/turtle",e,i),n.promise}},{key:"put",value:function(e,t,r){var n=this,i=this.$q.defer(),o=function(r){r&&i.reject(r);var o=function(e,t){e?i.reject(e):i.resolve()};t?n.s.load("text/turtle",e,t,o):n.s.load("text/turtle",e,o)};return t?this.s.clear(t,o):this.s.clear(o),i.promise}}],[{key:"convertBinding",value:function(e){switch(e.token){case"uri":return{type:"uri",value:e.value};case"blank":return{type:"bnode",value:e.value};case"literal":return{type:"literal",value:e.value,"xml:lang":e.lang,datatype:e.type};default:throw"Unknown binding type "+e.token}}}]),e}();t.RDFStoreInternalSparqlService=h,l.module("fibra.services.fibra-sparql-service",[]).config(["$provide",function(e){e.service("fibraSparqlService",p)}])},function(e,t,r){function n(e,t,r){this.name="BindExpressionError",this.bind=t,this.error=r,this.message=e}var i=r(75).AbstractQueryTree,o=r(75).NonSupportedSparqlFeatureError,a=r(0),s=r(48),u=r(222).QueryPlan,l=r(119).QueryFilters,c=r(77),f=r(223).RDFLoader,p=r(257).CallbacksBackend,d=r(0),h=r(0);n.prototype=new Error,n.constructor=n,QueryEngine=function(e){0!=arguments.length&&(this.backend=e.backend,this.lexicon=e.lexicon,this.eventsOnBatchLoad=e.eventsOnBatchLoad||!1,this.defaultPrefixes={},this.abstractQueryTree=new i,this.rdfLoader=new f(e.communication),this.callbacksBackend=new p(this),this.customFns=e.customFns||{})},QueryEngine.prototype.setCustomFunctions=function(e){this.customFns=e},QueryEngine.prototype.registerNsInEnvironment=function(e,t){var r=[];null!=e&&null!=e.prefixes&&(r=e.prefixes);var n={};for(var i in this.defaultPrefixes)n[i]=this.defaultPrefixes[i];for(var o=0;o<r.length;o++){var a=r[o];"prefix"===a.token&&(n[a.prefix]=a.local)}t.namespaces=n,null!=e&&e.base&&"object"==typeof e.base?t.base=e.base.value:t.base=null},QueryEngine.prototype.applyModifier=function(e,t){if("DISTINCT"==e){for(var r={},n=[],i=0;i<t.length;i++){var o=t[i],a="";for(var s in o){var u=o[s];null==u?a=a+s+"null":"literal"==u.token?(null!=u.value&&(a+=u.value),null!=u.lang&&(a+=u.lang),null!=u.type&&(a+=u.type)):a=u.value?a+s+u.value:a+s+u}null==r[a]&&(n.push(o),r[a]=!0)}return n}return t},QueryEngine.prototype.applyLimitOffset=function(e,t,r){return null==t&&null==e?r:(null==e&&(e=0),t=null==t?r.length:e+t,r.slice(e,t))},QueryEngine.prototype.applySingleOrderBy=function(e,t,r,n,i){var o=[],a=this;d.eachSeries(e,function(e,i){l.collect(e.expression,[t],r,n,a,function(e){o.push(e[0].value),i()})},function(){i({binding:t,value:o})})},QueryEngine.prototype.applyOrderBy=function(e,t,r,n,i){var o=this,a=[];null!=e&&e.length>0?d.eachSeries(t,function(t,i){o.applySingleOrderBy(e,t,r,n,function(e){a.push(e),i()})},function(){a.sort(function(t,r){return o.compareFilteredBindings(t,r,e,n)});for(var t=[],r=0;r<a.length;r++)t.push(a[r].binding);i(t)}):i(t)},QueryEngine.prototype.compareFilteredBindings=function(e,t,r,n){for(var i=0;;){if(i==e.value.length)return 0;var o,a=r[i].direction;if(null!=e.value[i]||null!=t.value[i]){if(null==e.value[i])o={value:!1};else if(null==t.value[i])o={value:!0};else{if("blank"===e.value[i].token&&"blank"===t.value[i].token){i++;continue}if("blank"===e.value[i].token)o={value:!1};else if("blank"===t.value[i].token)o={value:!0};else if("uri"===e.value[i].token&&"uri"===t.value[i].token){if(1==l.runEqualityFunction(e.value[i],t.value[i],[],this,n).value){i++;continue}o=l.runTotalGtFunction(e.value[i],t.value[i],[])}else if("uri"===e.value[i].token)o={value:!1};else if("uri"===t.value[i].token)o={value:!0};else if("literal"===e.value[i].token&&"literal"===t.value[i].token&&null==e.value[i].type&&null==t.value[i].type){if(1==l.runEqualityFunction(e.value[i],t.value[i],[],this,n).value){i++;continue}o=l.runTotalGtFunction(e.value[i],t.value[i],[])}else if("literal"===e.value[i].token&&null==e.value[i].type)o={value:!1};else if("literal"===t.value[i].token&&null==t.value[i].type)o={value:!0};else{if(1==l.runEqualityFunction(e.value[i],t.value[i],[],this,n).value){i++;continue}o=l.runTotalGtFunction(e.value[i],t.value[i],[])}}return 1==o.value?"ASC"===a?1:-1:"ASC"===a?-1:1}i++}},QueryEngine.prototype.removeDefaultGraphBindings=function(e,t){for(var r=[],n={},i=0;i<t.named.length;i++)n[t.named[i].oid]=!0;for(i=0;i<t.implicit.length;i++)null==n[t.implicit[i].oid]&&r.push(t.implicit[i].oid);var o=[];for(i=0;i<e.length;i++){var a=e[i],s=!1;for(var u in a){for(var l=0;l<n.length;l++)if(a[u]===n[l]){s=!0;break}if(s)break}s||o.push(a)}return o},QueryEngine.prototype.aggregateBindings=function(e,t,r,n,i){this.copyDenormalizedBindings(t,n.outCache,function(t){for(var o={},a=0;a<e.length;a++){var s=l.runAggregator(e[a],t,this,r,n);e[a].alias?o[e[a].alias.value]=s:o[e[a].value.value]=s}i(o)})},QueryEngine.prototype.projectBindings=function(e,t,r){if("*"===e[0].kind)return t;for(var n=[],i=0;i<t.length;i++){for(var o=t[i],a={},s=!0,u=0;u<e.length;u++)if("variable"==e[u].token&&"aliased"!=e[u].kind)a[e[u].value.value]=o[e[u].value.value];else if("variable"==e[u].token&&"aliased"==e[u].kind){var c=l.runFilter(e[u].expression,o,this,r,{blanks:{},outCache:{}});if(l.isEbvError(c)){s=!1;break}a[e[u].alias.value]=c}!0===s&&n.push(a)}return n},QueryEngine.prototype.resolveNsInEnvironment=function(e,t){return t.namespaces[e]},QueryEngine.prototype.normalizeTerm=function(e,t,r,n){if("uri"===e.token){var i=a.lexicalFormBaseUri(e,t);null==i?n(null):r?this.lexicon.registerUri(i,n):this.lexicon.resolveUri(i,n)}else if("literal"===e.token){var o=a.lexicalFormLiteral(e,t);r?this.lexicon.registerLiteral(o,n):this.lexicon.resolveLiteral(o,n)}else if("blank"===e.token){var s=e.value,u=t.blanks[s];null!=u?n(u):r?this.lexicon.registerBlank(function(e){t.blanks[s]=e,n(e)}):this.lexicon.resolveBlank(function(e){t.blanks[s]=e,n(e)})}else n("var"===e.token?e.value:null)},QueryEngine.prototype.normalizeDatasets=function(e,t,r){var n=this;d.eachSeries(e,function(e,r){e.value===n.lexicon.defaultGraphUri?(e.oid=n.lexicon.defaultGraphOid,r()):n.normalizeTerm(e,t,!1,function(t){null!=t&&(e.oid=t),r()})},function(){r(!0)})},QueryEngine.prototype.normalizeQuad=function(e,t,r,n){var i=null,o=null,s=null,u=null,l=this,c=!1;d.seq(function(n){if(null==e.graph||e.graph.value===l.lexicon.defaultGraphUri)u=0,n();else{var i=a.lexicalFormBaseUri(e.graph,t);l.normalizeTerm(e.graph,t,r,function(t){null!=t?(u=t,!0===r&&"var"!=e.graph.token?l.lexicon.registerGraph(t,i,function(){n()}):n()):(c=!0,n())})}},function(n){!1===c?l.normalizeTerm(e.subject,t,r,function(e){null!=e?(i=e,n()):(c=!0,n())}):n()},function(n){!1===c?l.normalizeTerm(e.predicate,t,r,function(e){null!=e?(o=e,n()):(c=!0,n())}):n()},function(n){!1===c?l.normalizeTerm(e.object,t,r,function(e){null!=e?(s=e,n()):(c=!0,n())}):n()})(function(){n(!0===c?null:{subject:i,predicate:o,object:s,graph:u})})},QueryEngine.prototype.denormalizeBindingsList=function(e,t,r){var n=this,i=[];d.eachSeries(e,function(e,r){n.denormalizeBindings(e,t,function(e){i.push(e),r()})},function(){r(i)})},QueryEngine.prototype.copyDenormalizedBindings=function(e,t,r){var n=this,i=[];d.eachSeries(e,function(e,r){var o={},a=h.keys(e);d.eachSeries(a,function(r,i){var a=e[r];if(null==a)o[r]=null,i();else if("object"==typeof a)o[r]=a,i();else{var s=t[a];null!=s?(o[r]=s,i()):n.lexicon.retrieve(a,function(e){t[a]=e,o[r]=e,i()})}},function(){i.push(o),r()})},function(){r(i)})},QueryEngine.prototype.denormalizeBindings=function(e,t,r){var n=h.keys(e),i=t.outCache,o=this;d.eachSeries(n,function(r,n){var a=e[r];null==a?(e[r]=null,n()):"object"==typeof a?n():null!=i[a]?(e[r]=i[a],n()):o.lexicon.retrieve(a,function(i){e[r]=i,"blank"===i.token&&(t.blanks[i.value]=a),n()})},function(){r(e)})},QueryEngine.prototype.execute=function(e,t,r,n){e=a.normalizeUnicodeLiterals(e);var i=this.abstractQueryTree.parseQueryString(e);if(null==i)t(!1,"Error parsing query string");else if("query"===i.token&&"update"==i.kind){this.callbacksBackend.startGraphModification();var o=this;this.executeUpdate(i,function(e,r){o.lexicon.updateAfterWrite&&o.lexicon.updateAfterWrite(),e?(o.callbacksBackend.cancelGraphModification(),t(e,r)):o.callbacksBackend.endGraphModification(function(){t(e,r)})})}else"query"===i.token&&"query"==i.kind&&this.executeQuery(i,t,r,n)},QueryEngine.prototype.executeQuery=function(e,t,r,n){var i=e.prologue,o=e.units,a=this,s={blanks:{},outCache:{}};this.registerNsInEnvironment(i,s);var u=a.abstractQueryTree.parseExecutableUnit(o[0]);"select"===u.kind?this.executeSelect(u,s,r,n,function(e,r){null==e?"object"==typeof r&&!0===r.denorm?t(null,r.bindings):a.denormalizeBindingsList(r,s,function(e){t(null,e)}):t(e)}):"ask"===u.kind?(u.projection=[{token:"variable",kind:"*"}],this.executeSelect(u,s,r,n,function(e,r){null==e?r.length>0?t(null,!0):t(null,!1):t(e)})):"construct"===u.kind&&(u.projection=[{token:"variable",kind:"*"}],a=this,this.executeSelect(u,s,r,n,function(e,r){null==e?a.denormalizeBindingsList(r,s,function(e){if(null!=e){var r=new c.Graph;null==u.template&&(u.template={triplesContext:u.pattern});for(var n=1,i=[],o=0;o<e.length;o++){for(var l=e[o],f=0;f<i.length;f++)delete i[f].valuetmp;for(var f=0;f<u.template.triplesContext.length;f++){for(var p=["subject","predicate","object"],d=u.template.triplesContext[f],h=0;h<p.length;h++){var v=p[h];if("blank"===d[v].token)if(d[v].valuetmp&&null!=d[v].valuetmp);else{var y="_:b"+n;n++,d[v].valuetmp=y,i.push(d[v])}}var g=c.buildRDFResource(d.subject,l,a,s),h=c.buildRDFResource(d.predicate,l,a,s),b=c.buildRDFResource(d.object,l,a,s);if(null!=g&&null!=h&&null!=b){var m=new c.Triple(g,h,b);r.add(m)}}}t(null,r)}else t(new Error("Error denormalizing bindings."))}):t(e)}))},QueryEngine.prototype.executeSelect=function(e,t,r,n,i){if("select"===e.kind||"ask"===e.kind||"construct"===e.kind||"modify"===e.kind){var o=e.projection,a=e.dataset,s=e.modifier,u=e.limit,l=e.offset,c=e.order,f=this;null==r&&null==n||(a.implicit=r||[],a.named=n||[]),null!=a.implicit&&0===a.implicit.length&&null!=a.named&&0===a.named.length&&a.implicit.push(this.lexicon.defaultGraphUriTerm),f.normalizeDatasets(a.implicit.concat(a.named),t,function(){try{f.executeSelectUnit(o,a,e.pattern,t,function(r){if(null!=r){if(null!=e.group&&""===e.group){for(var n=!1,p=0;p<e.projection.length;p++)if(null!=e.projection[p].expression&&"aggregate"===e.projection[p].expression.expressionType){n=!0;break}!0===n&&(e.group="singleGroup")}e.group&&""!=e.group?f.checkGroupSemantics(e.group,o)?f.groupSolution(r,e.group,a,t,function(e){var r=[];d.eachSeries(e,function(e,n){f.aggregateBindings(o,e,a,t,function(e){r.push(e),n()})},function(){i(null,{bindings:r,denorm:!0})})}):i(new Error("Incompatible Group and Projection variables")):f.applyOrderBy(c,r,a,t,function(e){var t=f.projectBindings(o,e,a),r=f.applyModifier(s,t),n=f.applyLimitOffset(l,u,r),c=f.removeDefaultGraphBindings(n,a);i(null,c)})}else i(new Error("Error executing SELECT query."))})}catch(e){i(e)}})}else i(new Error("Cannot execute "+e.kind+" query as a select query"))},QueryEngine.prototype.groupSolution=function(e,t,r,n,i){var o=[],a=[],s=!1,u=this;"singleGroup"===t?i([e]):d.eachSeries(e,function(e,i){var c=!0;d.eachSeries(t,function(t,i){var a=null;if("var"===t.token)a=t.value,0==s&&o.push(a),i();else if("aliased_expression"===t.token){if(a=t.alias.value,0==s&&o.push(a),"var"===t.expression.primaryexpression)e[t.alias.value]=e[t.expression.value.value];else{var f=u.copyDenormalizedBindings([e],n.outCache),p=l.runFilter(t.expression,f[0],u,r,n);l.isEbvError(p)?c=!1:(null!=p.value&&(p.value=""+p.value),e[t.alias.value]=p)}i()}else u.copyDenormalizedBindings([e],n.outCache,function(r){var f=l.runFilter(t,r[0],u,n);l.isEbvError(f)?c=!1:(e["groupCondition"+env._i]=f,a="groupCondition"+env._i,0==s&&o.push(a)),i()})},function(){0==s&&(s=!0),!0===c&&a.push(e),i()})},function(){for(var e={},t={},r=0;r<a.length;r++){for(var n=a[r],s="",u=0;u<o.length;u++){var l=n[o[u]];s+="object"==typeof l?l.value:l}null==e[s]?(t[s]=0,e[s]=[n]):e[s].push(n)}var c=[];for(var f in e)c.push(e[f]);i(c)})},QueryEngine.prototype.executeSelectUnit=function(e,t,r,n,i){if("BGP"===r.kind)this.executeAndBGP(e,t,r,n,i);else if("UNION"===r.kind)this.executeUNION(e,t,r.value,n,i);else if("JOIN"===r.kind)this.executeJOIN(e,t,r,n,i);else if("LEFT_JOIN"===r.kind)this.executeLEFT_JOIN(e,t,r,n,i);else if("FILTER"===r.kind){var a=this;this.executeSelectUnit(e,t,r.value,n,function(e){null!=e?l.checkFilters(r,e,!1,t,n,a,i):i([])})}else{if("EMPTY_PATTERN"!==r.kind)throw new o(r.kind);i([])}},QueryEngine.prototype.executeUNION=function(e,t,r,i,o){var a,s,c=r[0],f=r[1],p=null;if(2!=r.length)throw"SPARQL algebra UNION with more than two components";var h=this;d.seq(function(r){try{h.executeSelectUnit(e,t,c,i,function(e){a=e,r()})}catch(e){p=e,r()}},function(r){if(null==p)try{h.executeSelectUnit(e,t,f,i,function(e){s=e,r()})}catch(e){p=e,r()}else r()})(function(){if(null!=p)o(p);else{var e=u.unionBindings(a,s);h.runBinds(r.binds,e,t,i,function(e,a){if(null!=e)throw new n("Error processing bind expressions",r.binds,e);l.checkFilters(r,a,!1,t,i,h,o)})}})},QueryEngine.prototype.executeAndBGP=function(e,t,r,i,o){var a=this;u.executeAndBGPsDPSize(r.value,t,this,i,function(e){null!=e?a.runBinds(r.binds,e,t,i,function(e,s){if(null!=e)throw new n("Error processing bind expressions",r.binds,e);l.checkFilters(r,s,!1,t,i,a,o)}):o(null)})},QueryEngine.prototype.executeLEFT_JOIN=function(e,t,r,i,o){var a=r.lvalue,s=r.rvalue;if("EMPTY_PATTERN"===a.kind)this.executeSelectUnit(e,t,s,i,o);else{var c,f,p=null,h=null,v=null,y=this;d.seq(function(r){try{y.executeSelectUnit(e,t,a,i,function(e){p=e,r()})}catch(e){v=e,r()}},function(r){if(null!=v)r();else try{y.executeSelectUnit(e,t,s,i,function(e){h=e,r()})}catch(e){v=e,r()}})(function(){if(null!=v)o(v);else{var e=u.leftOuterJoinBindings(p,h);y.runBinds(r.binds,e,t,i,function(a,s){if(null!=a)throw new n("Error processing bind expressions",r.binds,a);l.checkFilters(r,e,!0,t,i,y,function(e){if(p.length>1&&h.length>1){var t=[],r={};for(var n in p[0])r[n]=!0;for(n in h[0])1!=r[n]&&t.push(n);c=[],f={};for(var i=0;i<e.length;i++)if(!0===e[i].__nullify__){for(var a=0;a<t.length;a++)e[i].bindings[t[a]]=null;var s=[],u=[];for(var n in e[i].bindings)null!=e[i].bindings[n]&&(s.push(n+e[i].bindings[n]),s.sort(),u.push(s.join("")));if(null==f[s.join("")]){for(a=0;a<u.length;a++)f[u[a]]=!0;c.push(e[i].bindings)}}else{c.push(e[i]);var s=[],u=[];for(var n in e[i])s.push(n+e[i][n]),s.sort(),f[s.join("")]=!0}o(c)}else o(e)})})}})}},QueryEngine.prototype.executeJOIN=function(e,t,r,i,o){var a=r.lvalue,s=r.rvalue,c=null,f=null,p=null,h=this;d.seq(function(r){try{h.executeSelectUnit(e,t,a,i,function(e){c=e,r()})}catch(e){p=e,r()}},function(r){if(null!=p)r();else try{h.executeSelectUnit(e,t,s,i,function(e){f=e,r()})}catch(e){p=e,r()}})(function(){var e=null;if(null!=p)o(p);else if(0===c.length||0===f.length)o([]);else{var d={},v=[];for(var y in c[0])d[y]=!1;for(var y in f[0])!1===d[y]&&v.push(y);e=0==v.length?u.joinBindings(c,f):h.abstractQueryTree.treeWithUnion(a)||h.abstractQueryTree.treeWithUnion(s)?u.joinBindings(c,f):u.joinBindings2(v,c,f),h.runBinds(r.binds,e,t,i,function(e,a){if(null!=e)throw new n("Error processing bind expressions",r.binds,e);l.checkFilters(r,a,!1,t,i,h,o)})}})},QueryEngine.prototype.rangeQuery=function(e,t,r){var n=this;n.normalizeQuad(e,t,!1,function(e){null!=e?n.backend.range(new s.Pattern(e),function(e){r(null==e||0==e.length?[]:e)}):r(null)})},QueryEngine.prototype.executeUpdate=function(e,t){var r=e.prologue,n=e.units,i=this,o={blanks:{},outCache:{}};this.registerNsInEnvironment(r,o);for(var s=0;s<n.length;s++){var u=i.abstractQueryTree.parseExecutableUnit(n[s]);if("insertdata"===u.kind){var l=null;d.eachSeries(u.quads,function(e,t){null===l?i._executeQuadInsert(e,o,function(e){null!=e&&(l=e),t()}):t()},function(){null===l?t(null,!0):t(l)})}else if("deletedata"===u.kind){var l=null;d.eachSeries(u.quads,function(e,t){null===l?i._executeQuadDelete(e,o,function(e){null!=e&&(l=e),t()}):t()},function(){null===l?t(null,!0):t(l)})}else if("modify"===u.kind)this._executeModifyQuery(u,o,t);else if("create"===u.kind)t(!0);else if("load"===u.kind){var c={uri:a.lexicalFormBaseUri(u.sourceGraph,o)};null!=u.destinyGraph&&(c={uri:a.lexicalFormBaseUri(u.destinyGraph,o)});var i=this;this.rdfLoader.load(u.sourceGraph.value,c,function(e,r){e?t(new Error("error batch loading quads")):i.batchLoad(r,function(e){null!==e?t(null,e):t(new Error("Error batch loading quads"))})})}else if("drop"===u.kind)this._executeClearGraph(u.destinyGraph,o,t);else{if("clear"!==u.kind)throw new Error("not supported execution unit");this._executeClearGraph(u.destinyGraph,o,t)}}},QueryEngine.prototype.batchLoad=function(e,t){var r=0,n={},i=this;this.eventsOnBatchLoad&&this.callbacksBackend.startGraphModification();var o=function(e,t,r,o){var a,e;if(e[t].uri||"uri"===e[t].token){var s=e[t].uri||e[t].value;i.lexicon.registerUri(s,function(n){var a=function(){null!=e[t].uri&&(e[t]={token:"uri",value:e[t].uri},delete e[t].uri),r[t]=n,o()};"graph"===t?i.lexicon.registerGraph(n,s,function(){a()}):a()})}else e[t].literal||"literal"===e[t].token?i.lexicon.registerLiteral(e[t].literal||e[t].value,function(n){null!=e[t].literal&&(e[t]=i.lexicon.parseLiteral(e[t].literal),delete e[t].literal),r[t]=n,o()}):(a=n[e[t].blank||e[t].value],null==a?i.lexicon.registerBlank(function(i){n[e[t].blank||e[t].value]=i,null==e[t].token&&(e[t].token="blank",e[t].value=e[t].blank,delete e[t].blank),r[t]=i,o()}):(null==e[t].token&&(e[t].token="blank",e[t].value=e[t].blank,delete e[t].blank),r[t]=a,o()))};d.eachSeries(e,function(e,t){var n={};d.eachSeries(["subject","predicate","object","graph"],function(t,r){o(e,t,n,r)},function(){var o=e;e=n;var a=new s.NodeKey(e);i.backend.search(a,function(n){n?t():i.backend.index(a,function(n){n&&(i.eventsOnBatchLoad&&i.callbacksBackend.nextGraphModification(p.added,[o,e]),r+=1),t()})})})},function(){null!=i.lexicon.updateAfterWrite&&i.lexicon.updateAfterWrite();var e=function(){t(r)};i.eventsOnBatchLoad?i.callbacksBackend.endGraphModification(e()):e()})},QueryEngine.prototype._executeModifyQuery=function(e,t,r){var n=this,i=!0,o=new Error("Error executing modify query"),a=null,s=["subject","predicate","object","graph"];e.insert=null==e.insert?[]:e.insert,e.delete=null==e.delete?[]:e.delete,d.seq(function(r){var s=[],u=[];if(null!=e.with&&s.push(e.with),null!=e.using){u=[];for(var l=0;l<e.using.length;l++){var c=e.using[l];"named"===c.kind?u.push(c.uri):s.push(c.uri)}}e.dataset={},e.projection=[{token:"variable",kind:"*"}],n.executeSelect(e,t,s,u,function(e,s){if(e)return o=e,i=!1,r();n.denormalizeBindingsList(s,t,function(e){null!=e?a=e:(o=new Error("Error denormalizing bindings list"),i=!1),r()})})},function(r){var o=e.with;if(i){for(var u=[],l=0;l<e.delete.length;l++)for(var c=e.delete[l],f=0;f<a.length;f++){for(var p={},h=a[f],v=0;v<s.length;v++){var y=s[v];"graph"==y&&null==c[y]?p.graph=o:"var"===c[y].token?p[y]=h[c[y].value]:p[y]=c[y]}u.push(p)}d.eachSeries(u,function(e,r){n._executeQuadDelete(e,t,function(){r()})},function(){r()})}else r()},function(r){var o=e.with;if(i){for(var u=[],l=0;l<e.insert.length;l++)for(var c=e.insert[l],f=0;f<a.length;f++){for(var p={},h=a[f],v=0;v<s.length;v++){var y=s[v];"graph"==y&&null==c[y]?p.graph=o:"var"===c[y].token?p[y]=h[c[y].value]:p[y]=c[y]}u.push(p)}d.eachSeries(u,function(e,r){n._executeQuadInsert(e,t,function(){r()})},function(){r()})}else r()})(function(){r(i?null:o)})},QueryEngine.prototype._executeQuadInsert=function(e,t,r){var n,i=this,o=!1,a=null;d.seq(function(r){i.normalizeQuad(e,t,!0,function(e){null!=e?n=e:(o=!0,a="Error normalizing quad."),r()})},function(t){if(!1===o){var r=new s.NodeKey(n);i.backend.search(r,function(o){!0===o?t():i.backend.index(r,function(){i.callbacksBackend.nextGraphModification(p.added,[e,n]),t()})})}else t()})(function(){o?r(new Error(a)):r(null,!0)})},QueryEngine.prototype._executeQuadDelete=function(e,t,r){var n,i,o,a=this,u=!1;d.seq(function(r){a.normalizeQuad(e,t,!0,function(e){null!=e?n=e:(u=!0,i="Error normalizing quad."),r()})},function(e){!1===u?(o=new s.NodeKey(n),a.backend.delete(o,function(){e()})):e()},function(t){!1===u?a.lexicon.unregister(e,o,function(){a.callbacksBackend.nextGraphModification(p.deleted,[e,n]),t()}):t()})(function(){u?r(new Error(i)):r(null,!0)})},QueryEngine.prototype._executeClearGraph=function(e,t,r){var n=this;if("default"===e)this.execute("DELETE { ?s ?p ?o } WHERE { ?s ?p ?o }",r);else if("named"===e)n.lexicon.registeredGraphs(!0,function(e){if(null!=e){var t=!1;d.eachSeries(e,function(e,r){t?r():n.execute("DELETE { GRAPH <"+e+"> { ?s ?p ?o } } WHERE { GRAPH <"+e+"> { ?s ?p ?o } }",function(i,o){i?(t=i,r()):n.lexicon.resolveUri(e,function(i){-1!=i?n.lexicon.knownGraphs.delete(i,function(){r()}):(t="Cannot find graph "+e+" to clear it",r())})})},function(){r(!t)})}else r(!1,"Error deleting named graphs")});else if("all"===e){var n=this;this.execute("CLEAR DEFAULT",function(e,t){e?r(!1,t):n.execute("CLEAR NAMED",r)})}else if("uri"==e.token){var i=a.lexicalFormBaseUri(e,t);null!=i?(this.callbacksBackend.ongoingModification=!0,this.execute("DELETE { GRAPH <"+i+"> { ?s ?p ?o } } WHERE { GRAPH <"+i+"> { ?s ?p ?o } }",function(e){n.callbacksBackend.ongoingModification=!1,r(e)})):r(!1,"wrong graph URI")}else r(!1,"wrong graph URI")},QueryEngine.prototype.checkGroupSemantics=function(e,t){if("singleGroup"===e)return!0;for(var r={},n=0;n<e.length;n++){var i=e[n];"var"===i.token?r[i.value]=!0:"aliased_expression"===i.token&&(r[i.alias.value]=!0)}for(n=0;n<t.length;n++){var o=t[n];if("var"===o.kind){if(null==r[o.value.value])return!1}else if("aliased"===o.kind&&o.expression&&"var"===o.expression.primaryexpression&&null==r[o.expression.value.value])return!1}return!0},QueryEngine.prototype.runBinds=function(e,t,r,n,i){var o=this,a=t;null!=e&&e.length>0?o.copyDenormalizedBindings(t,n.outCache,function(s){for(var u=0;u<t.length;u++)for(var c=0;c<e.length;c++){var f=e[c],p=s[u],d=l.runFilter(f.expression,p,o,r,n);l.isEbvError(d)?i(d):a[u][f.as.value]=d}i(null,t)}):i(null,t)},QueryEngine.prototype.computeCosts=function(e,t,r){for(var n=0;n<e.length;n++)e[n]._cost=this.quadCost(e[n],t);r(e)},QueryEngine.prototype.quadCost=function(e,t){return 1},QueryEngine.prototype.registerDefaultNamespace=function(e,t){this.defaultPrefixes[e]=t},e.exports={QueryEngine:QueryEngine}},function(e,t){e.exports=function(){"use strict";function e(t,r,n,i){this.message=t,this.expected=r,this.found=n,this.location=i,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}function t(t,r){function n(e,t){return{type:"literal",text:e,ignoreCase:t}}function i(e,t,r){return{type:"class",parts:e,inverted:t,ignoreCase:r}}function o(e){return{type:"other",description:e}}function a(e){var r,n=Jy[e];if(n)return n;for(r=e-1;!Jy[r];)r--;for(n=Jy[r],n={line:n.line,column:n.column};r<e;)10===t.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return Jy[e]=n,n}function s(e,t){var r=a(e),n=a(t);return{start:{offset:e,line:r.line,column:r.column},end:{offset:t,line:n.line,column:n.column}}}function u(e){$y<Ky||($y>Ky&&(Ky=$y,Zy=[]),Zy.push(e))}function l(t,r,n){return new e(e.buildMessage(t,r),t,r,n)}function c(){return f()}function f(){var e;return e=p(),e===kr&&(e=U()),e}function p(){var e;return eg++,e=d(),eg--,e===kr&&(kr,0===eg&&u(Sr)),e}function d(){var e,t,r,n;return eg++,e=$y,t=h(),t!==kr?(r=g(),r===kr&&(r=_())===kr&&(r=E())===kr&&(r=k()),r!==kr?(n=B(),n!==kr?(Yy=e,t=Ar(t,r,n),e=t):($y=e,e=kr)):($y=e,e=kr)):($y=e,e=kr),eg--,e===kr&&(t=kr,0===eg&&u(Tr)),e}function h(){var e,t,r,n,i;if(eg++,e=$y,t=v(),t===kr&&(t=null),t!==kr){for(r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr){for(n=[],i=y();i!==kr;)n.push(i),i=y();n!==kr?(Yy=e,t=Cr(t,n),e=t):($y=e,e=kr)}else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(t=kr,0===eg&&u(Ir)),e}function v(){var e,r,n,i,o;for(eg++,e=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if(t.substr($y,4)===Fr?(n=Fr,$y+=4):(n=kr,0===eg&&u(jr)),n===kr&&(t.substr($y,4)===Pr?(n=Pr,$y+=4):(n=kr,0===eg&&u(Nr))),n!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();i!==kr?(o=Mt(),o!==kr?(Yy=e,r=Lr(o),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Rr)),e}function y(){var e,r,n,i,o,a,s;for(eg++,e=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if(t.substr($y,6)===Qr?(n=Qr,$y+=6):(n=kr,0===eg&&u(Dr)),n===kr&&(t.substr($y,6)===Mr?(n=Mr,$y+=6):(n=kr,0===eg&&u(Br))),n!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();if(i!==kr)if((o=Bt())!==kr){for(a=[],s=ur();s!==kr;)a.push(s),s=ur();a!==kr?(s=Mt(),s!==kr?(Yy=e,r=Ur(o,s),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Or)),e}function g(){var e,t,r,n,i,o,a,s,l,c;if(eg++,e=$y,(t=m())!==kr){for(r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr){for(n=[],i=w();i!==kr;)n.push(i),i=w();if(n!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();if(i!==kr)if((o=A())!==kr){for(a=[],s=ur();s!==kr;)a.push(s),s=ur();if(a!==kr)if((s=I())!==kr){for(l=[],c=ur();c!==kr;)l.push(c),c=ur();l!==kr?(c=D(),c!==kr?(Yy=e,t=Gr(t,n,o,s),e=t):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr}else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(t=kr,0===eg&&u(qr)),e}function b(){var e,t,r,n;return eg++,e=$y,t=m(),t!==kr?(r=A(),r!==kr?(n=I(),n!==kr?(Yy=e,t=Vr(t,r,n),e=t):($y=e,e=kr)):($y=e,e=kr)):($y=e,e=kr),eg--,e===kr&&(t=kr,0===eg&&u(Hr)),e}function m(){var e,r,n,i,o,a,s,l,c,f,p,d,h,v,y,g,b,m,_,E;for(eg++,e=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if(t.substr($y,6)===Wr?(n=Wr,$y+=6):(n=kr,0===eg&&u(zr)),n===kr&&(t.substr($y,6)===$r?(n=$r,$y+=6):(n=kr,0===eg&&u(Yr))),n!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();if(i!==kr)if(t.substr($y,8)===Jr?(o=Jr,$y+=8):(o=kr,0===eg&&u(Kr)),o===kr&&(t.substr($y,8)===Zr?(o=Zr,$y+=8):(o=kr,0===eg&&u(en))),o===kr&&(t.substr($y,7)===tn?(o=tn,$y+=7):(o=kr,0===eg&&u(rn)),o===kr&&(t.substr($y,7)===nn?(o=nn,$y+=7):(o=kr,0===eg&&u(on)))),o===kr&&(o=null),o!==kr){for(a=[],s=ur();s!==kr;)a.push(s),s=ur();if(a!==kr){for(s=[],l=$y,c=[],f=ur();f!==kr;)c.push(f),f=ur();if(c!==kr)if((f=ct())!==kr){for(p=[],d=ur();d!==kr;)p.push(d),d=ur();p!==kr?(c=[c,f,p],l=c):($y=l,l=kr)}else $y=l,l=kr;else $y=l,l=kr;if(l===kr){for(l=$y,c=[],f=ur();f!==kr;)c.push(f),f=ur();if(c!==kr)if(40===t.charCodeAt($y)?(f=an,$y++):(f=kr,0===eg&&u(sn)),f!==kr){for(p=[],d=ur();d!==kr;)p.push(d),d=ur();if(p!==kr)if((d=pt())!==kr){for(h=[],v=ur();v!==kr;)h.push(v),v=ur();if(h!==kr)if(t.substr($y,2)===un?(v=un,$y+=2):(v=kr,0===eg&&u(ln)),v===kr&&(t.substr($y,2)===cn?(v=cn,$y+=2):(v=kr,0===eg&&u(fn))),v!==kr){for(y=[],g=ur();g!==kr;)y.push(g),g=ur();if(y!==kr)if((g=ct())!==kr){for(b=[],m=ur();m!==kr;)b.push(m),m=ur();if(b!==kr)if(41===t.charCodeAt($y)?(m=pn,$y++):(m=kr,0===eg&&u(dn)),m!==kr){for(_=[],E=ur();E!==kr;)_.push(E),E=ur();_!==kr?(c=[c,f,p,d,h,v,y,g,b,m,_],l=c):($y=l,l=kr)}else $y=l,l=kr;else $y=l,l=kr}else $y=l,l=kr;else $y=l,l=kr}else $y=l,l=kr;else $y=l,l=kr}else $y=l,l=kr;else $y=l,l=kr}else $y=l,l=kr;else $y=l,l=kr}if(l!==kr)for(;l!==kr;){for(s.push(l),l=$y,c=[],f=ur();f!==kr;)c.push(f),f=ur();if(c!==kr)if((f=ct())!==kr){for(p=[],d=ur();d!==kr;)p.push(d),d=ur();p!==kr?(c=[c,f,p],l=c):($y=l,l=kr)}else $y=l,l=kr;else $y=l,l=kr;if(l===kr){for(l=$y,c=[],f=ur();f!==kr;)c.push(f),f=ur();if(c!==kr)if(40===t.charCodeAt($y)?(f=an,$y++):(f=kr,0===eg&&u(sn)),f!==kr){for(p=[],d=ur();d!==kr;)p.push(d),d=ur();if(p!==kr)if((d=pt())!==kr){for(h=[],v=ur();v!==kr;)h.push(v),v=ur();if(h!==kr)if(t.substr($y,2)===un?(v=un,$y+=2):(v=kr,0===eg&&u(ln)),v===kr&&(t.substr($y,2)===cn?(v=cn,$y+=2):(v=kr,0===eg&&u(fn))),v!==kr){for(y=[],g=ur();g!==kr;)y.push(g),g=ur();if(y!==kr)if((g=ct())!==kr){for(b=[],m=ur();m!==kr;)b.push(m),m=ur();if(b!==kr)if(41===t.charCodeAt($y)?(m=pn,$y++):(m=kr,0===eg&&u(dn)),m!==kr){for(_=[],E=ur();E!==kr;)_.push(E),E=ur();_!==kr?(c=[c,f,p,d,h,v,y,g,b,m,_],l=c):($y=l,l=kr)}else $y=l,l=kr;else $y=l,l=kr}else $y=l,l=kr;else $y=l,l=kr}else $y=l,l=kr;else $y=l,l=kr}else $y=l,l=kr;else $y=l,l=kr}else $y=l,l=kr;else $y=l,l=kr}}else s=kr;if(s===kr){for(s=$y,l=[],c=ur();c!==kr;)l.push(c),c=ur();if(l!==kr)if(42===t.charCodeAt($y)?(c=hn,$y++):(c=kr,0===eg&&u(vn)),c!==kr){for(f=[],p=ur();p!==kr;)f.push(p),p=ur();f!==kr?(l=[l,c,f],s=l):($y=s,s=kr)}else $y=s,s=kr;else $y=s,s=kr}s!==kr?(Yy=e,r=yn(o,s),e=r):($y=e,e=kr)}else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Xr)),e}function _(){var e,r,n,i,o,a,s,l,c,f,p,d,h,v,y;for(eg++,e=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if(t.substr($y,9)===bn?(n=bn,$y+=9):(n=kr,0===eg&&u(mn)),n===kr&&(t.substr($y,9)===_n?(n=_n,$y+=9):(n=kr,0===eg&&u(En))),n!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();if(i!==kr)if((o=Ie())!==kr){for(a=[],s=ur();s!==kr;)a.push(s),s=ur();if(a!==kr){for(s=[],l=w();l!==kr;)s.push(l),l=w();if(s!==kr){for(l=[],c=ur();c!==kr;)l.push(c),c=ur();if(l!==kr)if((c=A())!==kr){for(f=[],p=ur();p!==kr;)f.push(p),p=ur();f!==kr?(p=I(),p!==kr?(Yy=e,r=kn(o,s,c,p),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr}else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr;if(e===kr){for(e=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if(t.substr($y,9)===bn?(n=bn,$y+=9):(n=kr,0===eg&&u(mn)),n===kr&&(t.substr($y,9)===_n?(n=_n,$y+=9):(n=kr,0===eg&&u(En))),n!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();if(i!==kr){for(o=[],a=w();a!==kr;)o.push(a),a=w();if(o!==kr){for(a=[],s=ur();s!==kr;)a.push(s),s=ur();if(a!==kr)if(t.substr($y,5)===wn?(s=wn,$y+=5):(s=kr,0===eg&&u(xn)),s===kr&&(t.substr($y,5)===Sn?(s=Sn,$y+=5):(s=kr,0===eg&&u(Tn))),s!==kr){for(l=[],c=ur();c!==kr;)l.push(c),c=ur();if(l!==kr)if(123===t.charCodeAt($y)?(c=An,$y++):(c=kr,0===eg&&u(In)),c!==kr){for(f=[],p=ur();p!==kr;)f.push(p),p=ur();if(f!==kr)if(p=se(),p===kr&&(p=null),p!==kr){for(d=[],h=ur();h!==kr;)d.push(h),h=ur();if(d!==kr)if(125===t.charCodeAt($y)?(h=Cn,$y++):(h=kr,0===eg&&u(Rn)),h!==kr){for(v=[],y=ur();y!==kr;)v.push(y),y=ur();v!==kr?(y=I(),y!==kr?(Yy=e,r=Fn(o,p,y),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr}else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}return eg--,e===kr&&(r=kr,0===eg&&u(gn)),e}function E(){var e,r,n,i,o,a;if(eg++,e=$y,t.substr($y,8)===Pn?(r=Pn,$y+=8):(r=kr,0===eg&&u(Nn)),r!==kr){if(n=[],(i=lt())!==kr)for(;i!==kr;)n.push(i),i=lt();else n=kr;if(n===kr&&(42===t.charCodeAt($y)?(n=hn,$y++):(n=kr,0===eg&&u(vn))),n!==kr){for(i=[],o=w();o!==kr;)i.push(o),o=w();i!==kr?(o=A(),o===kr&&(o=null),o!==kr?(a=I(),a!==kr?(r=[r,n,i,o,a],e=r):($y=e,e=kr)):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(jn)),e}function k(){var e,r,n,i,o,a,s;for(eg++,e=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if(t.substr($y,3)===On?(n=On,$y+=3):(n=kr,0===eg&&u(Qn)),n===kr&&(t.substr($y,3)===Dn?(n=Dn,$y+=3):(n=kr,0===eg&&u(Mn))),n!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();if(i!==kr){for(o=[],a=w();a!==kr;)o.push(a),a=w();if(o!==kr){for(a=[],s=ur();s!==kr;)a.push(s),s=ur();a!==kr?(s=A(),s!==kr?(Yy=e,r=Bn(o,s),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr}else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Ln)),e}function w(){var e,r,n,i,o,a;if(eg++,e=$y,t.substr($y,4)===qn?(r=qn,$y+=4):(r=kr,0===eg&&u(Gn)),r===kr&&(t.substr($y,4)===Hn?(r=Hn,$y+=4):(r=kr,0===eg&&u(Vn))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(i=x(),i===kr&&(i=S()),i!==kr){for(o=[],a=ur();a!==kr;)o.push(a),a=ur();o!==kr?(Yy=e,r=Xn(i),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Un)),e}function x(){var e,t,r;for(eg++,e=$y,t=[],r=ur();r!==kr;)t.push(r),r=ur();return t!==kr?(r=T(),r!==kr?(Yy=e,t=zn(r),e=t):($y=e,e=kr)):($y=e,e=kr),eg--,e===kr&&(t=kr,0===eg&&u(Wn)),e}function S(){var e,r,n,i;if(eg++,e=$y,t.substr($y,5)===Yn?(r=Yn,$y+=5):(r=kr,0===eg&&u(Jn)),r===kr&&(t.substr($y,5)===Kn?(r=Kn,$y+=5):(r=kr,0===eg&&u(Zn))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();n!==kr?(i=T(),i!==kr?(Yy=e,r=ei(i),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u($n)),e}function T(){var e;return eg++,e=Ot(),eg--,e===kr&&(kr,0===eg&&u(ti)),e}function A(){var e,r,n,i,o,a;if(eg++,e=$y,t.substr($y,5)===wn?(r=wn,$y+=5):(r=kr,0===eg&&u(xn)),r===kr&&(t.substr($y,5)===Sn?(r=Sn,$y+=5):(r=kr,0===eg&&u(Tn))),r===kr&&(r=null),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if((i=ue())!==kr){for(o=[],a=ur();a!==kr;)o.push(a),a=ur();o!==kr?(Yy=e,r=ni(i),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(ri)),e}function I(){var e,t,r,n,i;return eg++,e=$y,t=C(),t===kr&&(t=null),t!==kr?(r=F(),r===kr&&(r=null),r!==kr?(n=P(),n===kr&&(n=null),n!==kr?(i=L(),i===kr&&(i=null),i!==kr?(Yy=e,t=oi(t,n,i),e=t):($y=e,e=kr)):($y=e,e=kr)):($y=e,e=kr)):($y=e,e=kr),eg--,e===kr&&(t=kr,0===eg&&u(ii)),e}function C(){var e,r,n,i,o,a,s;if(eg++,e=$y,t.substr($y,5)===si?(r=si,$y+=5):(r=kr,0===eg&&u(ui)),r===kr&&(t.substr($y,5)===li?(r=li,$y+=5):(r=kr,0===eg&&u(ci))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(t.substr($y,2)===fi?(i=fi,$y+=2):(i=kr,0===eg&&u(pi)),i===kr&&(t.substr($y,2)===di?(i=di,$y+=2):(i=kr,0===eg&&u(hi))),i!==kr){for(o=[],a=ur();a!==kr;)o.push(a),a=ur();if(o!==kr){if(a=[],(s=R())!==kr)for(;s!==kr;)a.push(s),s=R();else a=kr;a!==kr?(Yy=e,r=vi(a),e=r):($y=e,e=kr)}else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(ai)),e}function R(){var e,r,n,i,o,a,s,l,c,f,p;for(eg++,e=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if((n=wt())!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();i!==kr?(Yy=e,r=gi(n),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr;if(e===kr){for(e=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if((n=Se())!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();i!==kr?(Yy=e,r=bi(n),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr;if(e===kr){for(e=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if(40===t.charCodeAt($y)?(n=an,$y++):(n=kr,0===eg&&u(sn)),n!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();if(i!==kr)if((o=pt())!==kr){for(a=[],s=ur();s!==kr;)a.push(s),s=ur();if(a!==kr){if(s=$y,t.substr($y,2)===un?(l=un,$y+=2):(l=kr,0===eg&&u(ln)),l===kr&&(t.substr($y,2)===cn?(l=cn,$y+=2):(l=kr,0===eg&&u(fn))),l!==kr){for(c=[],f=ur();f!==kr;)c.push(f),f=ur();c!==kr?(f=ct(),f!==kr?(l=[l,c,f],s=l):($y=s,s=kr)):($y=s,s=kr)}else $y=s,s=kr;if(s===kr&&(s=null),s!==kr){for(l=[],c=ur();c!==kr;)l.push(c),c=ur();if(l!==kr)if(41===t.charCodeAt($y)?(c=pn,$y++):(c=kr,0===eg&&u(dn)),c!==kr){for(f=[],p=ur();p!==kr;)f.push(p),p=ur();f!==kr?(Yy=e,r=mi(o,s),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr}else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr;if(e===kr){for(e=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if((n=ct())!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();i!==kr?(Yy=e,r=_i(n),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}}}return eg--,e===kr&&(r=kr,0===eg&&u(yi)),e}function F(){var e,r,n,i;if(eg++,e=$y,t.substr($y,6)===ki?(r=ki,$y+=6):(r=kr,0===eg&&u(wi)),r!==kr){if(n=[],(i=j())!==kr)for(;i!==kr;)n.push(i),i=j();else n=kr;n!==kr?(r=[r,n],e=r):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Ei)),e}function j(){var e;return eg++,e=me(),eg--,e===kr&&(kr,0===eg&&u(xi)),e}function P(){var e,r,n,i,o,a,s,l;if(eg++,e=$y,t.substr($y,5)===Ti?(r=Ti,$y+=5):(r=kr,0===eg&&u(Ai)),r===kr&&(t.substr($y,5)===Ii?(r=Ii,$y+=5):(r=kr,0===eg&&u(Ci))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(t.substr($y,2)===fi?(i=fi,$y+=2):(i=kr,0===eg&&u(pi)),i===kr&&(t.substr($y,2)===di?(i=di,$y+=2):(i=kr,0===eg&&u(hi))),i!==kr){for(o=[],a=ur();a!==kr;)o.push(a),a=ur();if(o!==kr){if(a=[],(s=N())!==kr)for(;s!==kr;)a.push(s),s=N();else a=kr;if(a!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();s!==kr?(Yy=e,r=Ri(a),e=r):($y=e,e=kr)}else $y=e,e=kr}else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Si)),e}function N(){var e,r,n,i,o,a;if(eg++,e=$y,t.substr($y,3)===ji?(r=ji,$y+=3):(r=kr,0===eg&&u(Pi)),r===kr&&(t.substr($y,3)===Ni?(r=Ni,$y+=3):(r=kr,0===eg&&u(Li)),r===kr&&(t.substr($y,4)===Oi?(r=Oi,$y+=4):(r=kr,0===eg&&u(Qi)),r===kr&&(t.substr($y,4)===Di?(r=Di,$y+=4):(r=kr,0===eg&&u(Mi))))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if((i=kt())!==kr){for(o=[],a=ur();a!==kr;)o.push(a),a=ur();o!==kr?(Yy=e,r=Bi(r,i),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;if(e===kr)if(e=$y,r=me(),r===kr&&(r=ct()),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();n!==kr?(Yy=e,r=Ui(r),e=r):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Fi)),e}function L(){var e,t,r,n;return eg++,e=$y,t=$y,r=O(),r!==kr?(n=Q(),n===kr&&(n=null),n!==kr?(r=[r,n],t=r):($y=t,t=kr)):($y=t,t=kr),t===kr&&(t=$y,r=Q(),r!==kr?(n=O(),n===kr&&(n=null),n!==kr?(r=[r,n],t=r):($y=t,t=kr)):($y=t,t=kr)),t!==kr&&(Yy=e,t=Gi(t)),e=t,eg--,e===kr&&(t=kr,0===eg&&u(qi)),e}function O(){var e,r,n,i,o,a;if(eg++,e=$y,t.substr($y,5)===Vi?(r=Vi,$y+=5):(r=kr,0===eg&&u(Xi)),r===kr&&(t.substr($y,5)===Wi?(r=Wi,$y+=5):(r=kr,0===eg&&u(zi))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if((i=Xt())!==kr){for(o=[],a=ur();a!==kr;)o.push(a),a=ur();o!==kr?(Yy=e,r=$i(i),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Hi)),e}function Q(){var e,r,n,i,o,a;if(eg++,e=$y,t.substr($y,6)===Ji?(r=Ji,$y+=6):(r=kr,0===eg&&u(Ki)),r===kr&&(t.substr($y,6)===Zi?(r=Zi,$y+=6):(r=kr,0===eg&&u(eo))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if((i=Xt())!==kr){for(o=[],a=ur();a!==kr;)o.push(a),a=ur();o!==kr?(Yy=e,r=to(i),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Yi)),e}function D(){var e,r,n,i,o,a,s,l,c;if(eg++,e=$y,t.substr($y,8)===no?(r=no,$y+=8):(r=kr,0===eg&&u(io)),r!==kr){for(n=[],i=ct();i!==kr;)n.push(i),i=ct();if(n!==kr)if(123===t.charCodeAt($y)?(i=An,$y++):(i=kr,0===eg&&u(In)),i!==kr){if(o=[],a=$y,40===t.charCodeAt($y)?(s=an,$y++):(s=kr,0===eg&&u(sn)),s!==kr){if(l=[],(c=M())!==kr)for(;c!==kr;)l.push(c),c=M();else l=kr;l!==kr?(41===t.charCodeAt($y)?(c=pn,$y++):(c=kr,0===eg&&u(dn)),c!==kr?(s=[s,l,c],a=s):($y=a,a=kr)):($y=a,a=kr)}else $y=a,a=kr;for(a===kr&&(a=sr());a!==kr;){if(o.push(a),a=$y,40===t.charCodeAt($y)?(s=an,$y++):(s=kr,0===eg&&u(sn)),s!==kr){if(l=[],(c=M())!==kr)for(;c!==kr;)l.push(c),c=M();else l=kr;l!==kr?(41===t.charCodeAt($y)?(c=pn,$y++):(c=kr,0===eg&&u(dn)),c!==kr?(s=[s,l,c],a=s):($y=a,a=kr)):($y=a,a=kr)}else $y=a,a=kr;a===kr&&(a=sr())}o!==kr?(125===t.charCodeAt($y)?(a=Cn,$y++):(a=kr,0===eg&&u(Rn)),a!==kr?(r=[r,n,i,o,a],e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;return e===kr&&(e=null),eg--,e===kr&&(r=kr,0===eg&&u(ro)),e}function M(){var e;return eg++,e=Ot(),e===kr&&(e=Ct())===kr&&(e=Rt())===kr&&(e=Nt())===kr&&(t.substr($y,5)===ao?(e=ao,$y+=5):(e=kr,0===eg&&u(so))),eg--,e===kr&&(kr,0===eg&&u(oo)),e}function B(){var e,r,n,i;return eg++,e=$y,r=$y,t.substr($y,6)===lo?(n=lo,$y+=6):(n=kr,0===eg&&u(co)),n===kr&&(t.substr($y,6)===fo?(n=fo,$y+=6):(n=kr,0===eg&&u(po))),n!==kr?(i=Ee(),i!==kr?(n=[n,i],r=n):($y=r,r=kr)):($y=r,r=kr),r===kr&&(r=null),r!==kr&&(Yy=e,r=ho(r)),e=r,eg--,e===kr&&(r=kr,0===eg&&u(uo)),e}function U(){var e;return eg++,e=q(),eg--,e===kr&&(kr,0===eg&&u(vo)),e}function q(){var e,r,n,i,o,a,s,l,c;if(eg++,e=$y,(r=h())!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if((i=G())!==kr){for(o=$y,a=[],s=ur();s!==kr;)a.push(s),s=ur();if(a!==kr)if(59===t.charCodeAt($y)?(s=go,$y++):(s=kr,0===eg&&u(bo)),s!==kr){for(l=[],c=ur();c!==kr;)l.push(c),c=ur();l!==kr?(c=q(),c===kr&&(c=null),c!==kr?(a=[a,s,l,c],o=a):($y=o,o=kr)):($y=o,o=kr)}else $y=o,o=kr;else $y=o,o=kr;o===kr&&(o=null),o!==kr?(Yy=e,r=mo(r,i,o),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(yo)),e}function G(){var e;return eg++,e=H(),e===kr&&(e=V())===kr&&(e=X())===kr&&(e=W())===kr&&(e=z())===kr&&(e=$())===kr&&(e=Y())===kr&&(e=J()),eg--,e===kr&&(kr,0===eg&&u(_o)),e}function H(){var e,r,n,i,o,a,s,l,c;if(eg++,e=$y,t.substr($y,4)===ko?(r=ko,$y+=4):(r=kr,0===eg&&u(wo)),r===kr&&(t.substr($y,4)===xo?(r=xo,$y+=4):(r=kr,0===eg&&u(So))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if((i=Ot())!==kr){for(o=[],a=ur();a!==kr;)o.push(a),a=ur();if(o!==kr){if(a=$y,t.substr($y,4)===To?(s=To,$y+=4):(s=kr,0===eg&&u(Ao)),s===kr&&(t.substr($y,4)===Io?(s=Io,$y+=4):(s=kr,0===eg&&u(Co))),s!==kr){for(l=[],c=ur();c!==kr;)l.push(c),c=ur();l!==kr?(c=te(),c!==kr?(s=[s,l,c],a=s):($y=a,a=kr)):($y=a,a=kr)}else $y=a,a=kr;a===kr&&(a=null),a!==kr?(Yy=e,r=Ro(i,a),e=r):($y=e,e=kr)}else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Eo)),e}function V(){var e,r,n,i,o,a;if(eg++,e=$y,t.substr($y,5)===jo?(r=jo,$y+=5):(r=kr,0===eg&&u(Po)),r===kr&&(t.substr($y,5)===No?(r=No,$y+=5):(r=kr,0===eg&&u(Lo))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(t.substr($y,6)===Oo?(i=Oo,$y+=6):(i=kr,0===eg&&u(Qo)),i===kr&&(t.substr($y,6)===Do?(i=Do,$y+=6):(i=kr,0===eg&&u(Mo))),i===kr&&(i=null),i!==kr){for(o=[],a=ur();a!==kr;)o.push(a),a=ur();o!==kr?(a=re(),a!==kr?(Yy=e,r=Bo(a),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Fo)),e}function X(){var e,r,n,i,o,a;if(eg++,e=$y,t.substr($y,4)===qo?(r=qo,$y+=4):(r=kr,0===eg&&u(Go)),r===kr&&(t.substr($y,4)===Ho?(r=Ho,$y+=4):(r=kr,0===eg&&u(Vo))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(t.substr($y,6)===Oo?(i=Oo,$y+=6):(i=kr,0===eg&&u(Qo)),i===kr&&(t.substr($y,6)===Do?(i=Do,$y+=6):(i=kr,0===eg&&u(Mo))),i===kr&&(i=null),i!==kr){for(o=[],a=ur();a!==kr;)o.push(a),a=ur();o!==kr?(a=re(),a!==kr?(Yy=e,r=Xo(a),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Uo)),e}function W(){var e,r,n,i,o,a;if(eg++,e=$y,t.substr($y,6)===zo?(r=zo,$y+=6):(r=kr,0===eg&&u($o)),r===kr&&(t.substr($y,6)===Yo?(r=Yo,$y+=6):(r=kr,0===eg&&u(Jo))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(t.substr($y,6)===Oo?(i=Oo,$y+=6):(i=kr,0===eg&&u(Qo)),i===kr&&(t.substr($y,6)===Do?(i=Do,$y+=6):(i=kr,0===eg&&u(Mo))),i===kr&&(i=null),i!==kr){for(o=[],a=ur();a!==kr;)o.push(a),a=ur();o!==kr?(a=te(),a!==kr?(Yy=e,r=Ko(a),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Wo)),e}function z(){var e,r,n,i,o,a;if(eg++,e=$y,t.substr($y,6)===ea?(r=ea,$y+=6):(r=kr,0===eg&&u(ta)),r===kr&&(t.substr($y,6)===ra?(r=ra,$y+=6):(r=kr,0===eg&&u(na))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(t.substr($y,4)===ia?(i=ia,$y+=4):(i=kr,0===eg&&u(oa)),i===kr&&(t.substr($y,4)===aa?(i=aa,$y+=4):(i=kr,0===eg&&u(sa))),i!==kr){for(o=[],a=ur();a!==kr;)o.push(a),a=ur();o!==kr?(a=ie(),a!==kr?(Yy=e,r=ua(a),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Zo)),e}function $(){var e,r,n,i,o;if(eg++,e=$y,t.substr($y,6)===ca?(r=ca,$y+=6):(r=kr,0===eg&&u(fa)),r===kr&&(t.substr($y,6)===pa?(r=pa,$y+=6):(r=kr,0===eg&&u(da))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();n!==kr?(t.substr($y,4)===ia?(i=ia,$y+=4):(i=kr,0===eg&&u(oa)),i===kr&&(t.substr($y,4)===aa?(i=aa,$y+=4):(i=kr,0===eg&&u(sa))),i!==kr?(o=ie(),o!==kr?(Yy=e,r=ha(o),e=r):($y=e,e=kr)):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(la)),e}function Y(){var e,r,n,i,o,a;if(eg++,e=$y,t.substr($y,6)===ca?(r=ca,$y+=6):(r=kr,0===eg&&u(fa)),r===kr&&(t.substr($y,6)===pa?(r=pa,$y+=6):(r=kr,0===eg&&u(da))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(t.substr($y,5)===wn?(i=wn,$y+=5):(i=kr,0===eg&&u(xn)),i===kr&&(t.substr($y,5)===Sn?(i=Sn,$y+=5):(i=kr,0===eg&&u(Tn))),i!==kr){for(o=[],a=ur();a!==kr;)o.push(a),a=ur();o!==kr?(a=ue(),a!==kr?(Yy=e,r=ya(a),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(va)),e}function J(){var e,r,n,i,o,a,s,l,c,f,p,d;if(eg++,e=$y,r=$y,t.substr($y,4)===ba?(n=ba,$y+=4):(n=kr,0===eg&&u(ma)),n===kr&&(t.substr($y,4)===_a?(n=_a,$y+=4):(n=kr,0===eg&&u(Ea))),n!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();i!==kr?(o=Ot(),o!==kr?(n=[n,i,o],r=n):($y=r,r=kr)):($y=r,r=kr)}else $y=r,r=kr;if(r===kr&&(r=null),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr){if(i=$y,(o=K())!==kr){for(a=[],s=ur();s!==kr;)a.push(s),s=ur();a!==kr?(s=Z(),s===kr&&(s=null),s!==kr?(o=[o,a,s],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;if(i===kr&&(i=Z()),i!==kr){for(o=[],a=ur();a!==kr;)o.push(a),a=ur();if(o!==kr){for(a=[],s=ee();s!==kr;)a.push(s),s=ee();if(a!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();if(s!==kr)if(t.substr($y,5)===wn?(l=wn,$y+=5):(l=kr,0===eg&&u(xn)),l===kr&&(t.substr($y,5)===Sn?(l=Sn,$y+=5):(l=kr,0===eg&&u(Tn))),l!==kr){for(c=[],f=ur();f!==kr;)c.push(f),f=ur();if(c!==kr)if((f=ue())!==kr){for(p=[],d=ur();d!==kr;)p.push(d),d=ur();p!==kr?(Yy=e,r=ka(r,i,a,f),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr}else $y=e,e=kr}else $y=e,e=kr}else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(ga)),e}function K(){var e,r,n;return eg++,e=$y,t.substr($y,6)===ca?(r=ca,$y+=6):(r=kr,0===eg&&u(fa)),r===kr&&(t.substr($y,6)===pa?(r=pa,$y+=6):(r=kr,0===eg&&u(da))),r!==kr?(n=ne(),n!==kr?(Yy=e,r=xa(n),e=r):($y=e,e=kr)):($y=e,e=kr),eg--,e===kr&&(r=kr,0===eg&&u(wa)),e}function Z(){var e,r,n;return eg++,e=$y,t.substr($y,6)===ea?(r=ea,$y+=6):(r=kr,0===eg&&u(ta)),r===kr&&(t.substr($y,6)===ra?(r=ra,$y+=6):(r=kr,0===eg&&u(na))),r!==kr?(n=ne(),n!==kr?(Yy=e,r=xa(n),e=r):($y=e,e=kr)):($y=e,e=kr),eg--,e===kr&&(r=kr,0===eg&&u(Sa)),e}function ee(){var e,r,n,i,o,a,s,l;for(eg++,e=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if(t.substr($y,5)===Aa?(n=Aa,$y+=5):(n=kr,0===eg&&u(Ia)),n===kr&&(t.substr($y,5)===Ca?(n=Ca,$y+=5):(n=kr,0===eg&&u(Ra))),n!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();if(i!==kr){if((o=Ot())===kr)if(o=$y,t.substr($y,5)===Yn?(a=Yn,$y+=5):(a=kr,0===eg&&u(Jn)),a===kr&&(t.substr($y,5)===Kn?(a=Kn,$y+=5):(a=kr,0===eg&&u(Zn))),a!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();s!==kr?(l=Ot(),l!==kr?(a=[a,s,l],o=a):($y=o,o=kr)):($y=o,o=kr)}else $y=o,o=kr;o!==kr?(Yy=e,r=Fa(o),e=r):($y=e,e=kr)}else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Ta)),e}function te(){var e,r,n,i;if(eg++,e=$y,t.substr($y,5)===Pa?(r=Pa,$y+=5):(r=kr,0===eg&&u(Na)),r===kr&&(t.substr($y,5)===La?(r=La,$y+=5):(r=kr,0===eg&&u(Oa))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();n!==kr?(i=Ot(),i!==kr?(Yy=e,r=Qa(i),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(ja)),e}function re(){var e,r;return eg++,e=$y,r=te(),r!==kr&&(Yy=e,r=ni(r)),e=r,e===kr&&(e=$y,t.substr($y,7)===Ma?(r=Ma,$y+=7):(r=kr,0===eg&&u(Ba)),r===kr&&(t.substr($y,7)===Ua?(r=Ua,$y+=7):(r=kr,0===eg&&u(qa))),r!==kr&&(Yy=e,r=Ga()),(e=r)===kr&&(e=$y,t.substr($y,5)===Yn?(r=Yn,$y+=5):(r=kr,0===eg&&u(Jn)),r===kr&&(t.substr($y,5)===Kn?(r=Kn,$y+=5):(r=kr,0===eg&&u(Zn))),r!==kr&&(Yy=e,r=Ha()),(e=r)===kr&&(e=$y,t.substr($y,3)===Va?(r=Va,$y+=3):(r=kr,0===eg&&u(Xa)),r===kr&&(t.substr($y,3)===Wa?(r=Wa,$y+=3):(r=kr,0===eg&&u(za))),r!==kr&&(Yy=e,r=$a()),e=r))),eg--,e===kr&&(r=kr,0===eg&&u(Da)),e}function ne(){var e,r,n,i,o,a,s,l,c;for(eg++,e=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if(123===t.charCodeAt($y)?(n=An,$y++):(n=kr,0===eg&&u(In)),n!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();if(i!==kr)if((o=oe())!==kr){for(a=[],s=ur();s!==kr;)a.push(s),s=ur();if(a!==kr)if(125===t.charCodeAt($y)?(s=Cn,$y++):(s=kr,0===eg&&u(Rn)),s!==kr){for(l=[],c=ur();c!==kr;)l.push(c),c=ur();l!==kr?(Yy=e,r=Ja(o),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Ya)),e}function ie(){var e,r,n,i,o,a,s,l,c;for(eg++,e=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if(123===t.charCodeAt($y)?(n=An,$y++):(n=kr,0===eg&&u(In)),n!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();if(i!==kr)if((o=oe())!==kr){for(a=[],s=ur();s!==kr;)a.push(s),s=ur();if(a!==kr)if(125===t.charCodeAt($y)?(s=Cn,$y++):(s=kr,0===eg&&u(Rn)),s!==kr){for(l=[],c=ur();c!==kr;)l.push(c),c=ur();l!==kr?(Yy=e,r=Ja(o),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Ka)),e}function oe(){var e,r,n,i,o,a,s;if(eg++,e=$y,r=se(),r===kr&&(r=null),r!==kr){for(n=[],i=$y,o=ae(),o!==kr?(46===t.charCodeAt($y)?(a=es,$y++):(a=kr,0===eg&&u(ts)),a===kr&&(a=null),a!==kr?(s=se(),s===kr&&(s=null),s!==kr?(o=[o,a,s],i=o):($y=i,i=kr)):($y=i,i=kr)):($y=i,i=kr);i!==kr;)n.push(i),i=$y,o=ae(),o!==kr?(46===t.charCodeAt($y)?(a=es,$y++):(a=kr,0===eg&&u(ts)),a===kr&&(a=null),a!==kr?(s=se(),s===kr&&(s=null),s!==kr?(o=[o,a,s],i=o):($y=i,i=kr)):($y=i,i=kr)):($y=i,i=kr);n!==kr?(Yy=e,r=rs(r,n),e=r):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Za)),e}function ae(){var e,r,n,i,o,a,s,l,c,f,p,d,h;for(eg++,e=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if(t.substr($y,5)===Pa?(n=Pa,$y+=5):(n=kr,0===eg&&u(Na)),n===kr&&(t.substr($y,5)===La?(n=La,$y+=5):(n=kr,0===eg&&u(Oa))),n!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();if(i!==kr)if((o=lt())!==kr){for(a=[],s=ur();s!==kr;)a.push(s),s=ur();if(a!==kr)if(123===t.charCodeAt($y)?(s=An,$y++):(s=kr,0===eg&&u(In)),s!==kr){for(l=[],c=ur();c!==kr;)l.push(c),c=ur();if(l!==kr)if(c=se(),c===kr&&(c=null),c!==kr){for(f=[],p=ur();p!==kr;)f.push(p),p=ur();if(f!==kr)if(125===t.charCodeAt($y)?(p=Cn,$y++):(p=kr,0===eg&&u(Rn)),p!==kr){for(d=[],h=ur();h!==kr;)d.push(h),h=ur();d!==kr?(Yy=e,r=is(o,c),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(ns)),e}function se(){var e,r,n,i,o,a,s;if(eg++,e=$y,(r=Re())!==kr){for(n=$y,i=[],o=ur();o!==kr;)i.push(o),o=ur();if(i!==kr)if(46===t.charCodeAt($y)?(o=es,$y++):(o=kr,0===eg&&u(ts)),o!==kr){for(a=[],s=ur();s!==kr;)a.push(s),s=ur();a!==kr?(s=se(),s===kr&&(s=null),s!==kr?(i=[i,o,a,s],n=i):($y=n,n=kr)):($y=n,n=kr)}else $y=n,n=kr;else $y=n,n=kr;n===kr&&(n=null),n!==kr?(Yy=e,r=as(r,n),e=r):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(os)),e}function ue(){var e,r,n,i,o,a;if(eg++,e=$y,123===t.charCodeAt($y)?(r=An,$y++):(r=kr,0===eg&&u(In)),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if((i=b())!==kr){for(o=[],a=ur();a!==kr;)o.push(a),a=ur();o!==kr?(125===t.charCodeAt($y)?(a=Cn,$y++):(a=kr,0===eg&&u(Rn)),a!==kr?(Yy=e,r=us(i),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;if(e===kr)if(e=$y,123===t.charCodeAt($y)?(r=An,$y++):(r=kr,0===eg&&u(In)),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if((i=le())!==kr){for(o=[],a=ur();a!==kr;)o.push(a),a=ur();o!==kr?(125===t.charCodeAt($y)?(a=Cn,$y++):(a=kr,0===eg&&u(Rn)),a!==kr?(Yy=e,r=us(i),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(ss)),e}function le(){var e,r,n,i,o,a,s,l,c,f;if(eg++,e=$y,r=ce(),r===kr&&(r=null),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr){if(i=[],o=$y,(a=fe())!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();if(s!==kr)if(46===t.charCodeAt($y)?(l=es,$y++):(l=kr,0===eg&&u(ts)),l===kr&&(l=null),l!==kr){for(c=[],f=ur();f!==kr;)c.push(f),f=ur();c!==kr?(f=ce(),f===kr&&(f=null),f!==kr?(a=[a,s,l,c,f],o=a):($y=o,o=kr)):($y=o,o=kr)}else $y=o,o=kr;else $y=o,o=kr}else $y=o,o=kr;for(;o!==kr;)if(i.push(o),o=$y,(a=fe())!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();if(s!==kr)if(46===t.charCodeAt($y)?(l=es,$y++):(l=kr,0===eg&&u(ts)),l===kr&&(l=null),l!==kr){for(c=[],f=ur();f!==kr;)c.push(f),f=ur();c!==kr?(f=ce(),f===kr&&(f=null),f!==kr?(a=[a,s,l,c,f],o=a):($y=o,o=kr)):($y=o,o=kr)}else $y=o,o=kr;else $y=o,o=kr}else $y=o,o=kr;i!==kr?(Yy=e,r=cs(r,i),e=r):($y=e,e=kr)}else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(ls)),e}function ce(){var e,r,n,i,o,a;if(eg++,e=$y,(r=Me())!==kr){for(n=$y,i=[],o=ur();o!==kr;)i.push(o),o=ur();i!==kr?(46===t.charCodeAt($y)?(o=es,$y++):(o=kr,0===eg&&u(ts)),o!==kr?(a=ce(),a===kr&&(a=null),a!==kr?(i=[i,o,a],n=i):($y=n,n=kr)):($y=n,n=kr)):($y=n,n=kr),n===kr&&(n=null),n!==kr?(Yy=e,r=ps(r,n),e=r):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(fs)),e}function fe(){var e;return eg++,e=ye(),e===kr&&(e=pe())===kr&&(e=ve())===kr&&(e=de())===kr&&(e=he())===kr&&(e=ge())===kr&&(e=be())===kr&&(e=_e()),eg--,e===kr&&(kr,0===eg&&u(ds)),e}function pe(){var e,r,n,i,o;for(eg++,e=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if(t.substr($y,8)===vs?(n=vs,$y+=8):(n=kr,0===eg&&u(ys)),n===kr&&(t.substr($y,8)===gs?(n=gs,$y+=8):(n=kr,0===eg&&u(bs))),n!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();i!==kr?(o=ue(),o!==kr?(Yy=e,r=ms(o),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(hs)),e}function de(){var e,r,n,i,o,a,s;for(eg++,e=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if(t.substr($y,5)===Pa?(n=Pa,$y+=5):(n=kr,0===eg&&u(Na)),n===kr&&(t.substr($y,5)===La?(n=La,$y+=5):(n=kr,0===eg&&u(Oa))),n!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();if(i!==kr)if((o=lt())!==kr){for(a=[],s=ur();s!==kr;)a.push(s),s=ur();a!==kr?(s=ue(),s!==kr?(Yy=e,r=Es(o,s),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(_s)),e}function he(){var e,r,n,i;return eg++,e=$y,t.substr($y,7)===ws?(r=ws,$y+=7):(r=kr,0===eg&&u(xs)),r!==kr?(n=lt(),n!==kr?(i=ue(),i!==kr?(Yy=e,r=Ss(n,i),e=r):($y=e,e=kr)):($y=e,e=kr)):($y=e,e=kr),eg--,e===kr&&(r=kr,0===eg&&u(ks)),e}function ve(){var e,r,n,i;if(eg++,e=$y,t.substr($y,5)===As?(r=As,$y+=5):(r=kr,0===eg&&u(Is)),r===kr&&(t.substr($y,5)===Cs?(r=Cs,$y+=5):(r=kr,0===eg&&u(Rs))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();n!==kr?(i=ue(),i!==kr?(Yy=e,r=Fs(i),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Ts)),e}function ye(){var e,r,n,i,o,a,s,l;if(eg++,e=$y,(r=ue())!==kr){for(n=[],i=$y,o=[],a=ur();a!==kr;)o.push(a),a=ur();if(o!==kr)if(t.substr($y,5)===Ps?(a=Ps,$y+=5):(a=kr,0===eg&&u(Ns)),a===kr&&(t.substr($y,5)===Ls?(a=Ls,$y+=5):(a=kr,0===eg&&u(Os))),a!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();s!==kr?(l=ue(),l!==kr?(o=[o,a,s,l],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr;for(;i!==kr;){for(n.push(i),i=$y,o=[],a=ur();a!==kr;)o.push(a),a=ur();if(o!==kr)if(t.substr($y,5)===Ps?(a=Ps,$y+=5):(a=kr,0===eg&&u(Ns)),a===kr&&(t.substr($y,5)===Ls?(a=Ls,$y+=5):(a=kr,0===eg&&u(Os))),a!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();s!==kr?(l=ue(),l!==kr?(o=[o,a,s,l],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr}n!==kr?(Yy=e,r=Qs(r,n),e=r):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(js)),e}function ge(){var e,r,n,i,o;for(eg++,e=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if(t.substr($y,6)===Ms?(n=Ms,$y+=6):(n=kr,0===eg&&u(Bs)),n===kr&&(t.substr($y,6)===Us?(n=Us,$y+=6):(n=kr,0===eg&&u(qs))),n!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();i!==kr?(o=me(),o!==kr?(Yy=e,r=Gs(o),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Ds)),e}function be(){var e,r,n,i,o,a,s,l,c,f,p,d,h;for(eg++,e=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if(t.substr($y,4)===Vs?(n=Vs,$y+=4):(n=kr,0===eg&&u(Xs)),n===kr&&(t.substr($y,4)===Ws?(n=Ws,$y+=4):(n=kr,0===eg&&u(zs))),n!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();if(i!==kr)if(40===t.charCodeAt($y)?(o=an,$y++):(o=kr,0===eg&&u(sn)),o!==kr){for(a=[],s=ur();s!==kr;)a.push(s),s=ur();if(a!==kr)if((s=pt())!==kr){for(l=[],c=ur();c!==kr;)l.push(c),c=ur();if(l!==kr)if(t.substr($y,2)===cn?(c=cn,$y+=2):(c=kr,0===eg&&u(fn)),c===kr&&(t.substr($y,2)===un?(c=un,$y+=2):(c=kr,0===eg&&u(ln))),c!==kr){for(f=[],p=ur();p!==kr;)f.push(p),p=ur();if(f!==kr)if((p=ct())!==kr){for(d=[],h=ur();h!==kr;)d.push(h),h=ur();d!==kr?(41===t.charCodeAt($y)?(h=pn,$y++):(h=kr,0===eg&&u(dn)),h!==kr?(Yy=e,r=$s(s,p),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Hs)),e}function me(){var e;return eg++,e=kt(),e===kr&&(e=wt())===kr&&(e=Se()),eg--,e===kr&&(kr,0===eg&&u(Ys)),e}function _e(){var e,r,n,i,o;for(eg++,e=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if(t.substr($y,6)===lo?(n=lo,$y+=6):(n=kr,0===eg&&u(co)),n===kr&&(t.substr($y,6)===fo?(n=fo,$y+=6):(n=kr,0===eg&&u(po))),n!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();i!==kr?(o=Ee(),o!==kr?(Yy=e,r=Ks(o),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Js)),e}function Ee(){var e;return eg++,e=ke(),e===kr&&(e=we()),eg--,e===kr&&(kr,0===eg&&u(Zs)),e}function ke(){var e,r,n,i,o,a,s,l;for(eg++,e=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if((n=ct())!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();if(i!==kr)if(123===t.charCodeAt($y)?(o=An,$y++):(o=kr,0===eg&&u(In)),o!==kr){for(a=[],s=ur();s!==kr;)a.push(s),s=ur();if(a!==kr){for(s=[],l=xe();l!==kr;)s.push(l),l=xe();s!==kr?(125===t.charCodeAt($y)?(l=Cn,$y++):(l=kr,0===eg&&u(Rn)),l!==kr?(Yy=e,r=tu(n,s),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(eu)),e}function we(){var e,r,n,i,o,a,s,l,c,f,p,d,h,v,y,g;for(eg++,e=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr){if((n=sr())===kr)if(n=$y,40===t.charCodeAt($y)?(i=an,$y++):(i=kr,0===eg&&u(sn)),i!==kr){for(o=[],a=ur();a!==kr;)o.push(a),a=ur();if(o!==kr){for(a=[],s=ct();s!==kr;)a.push(s),s=ct();if(a!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();s!==kr?(41===t.charCodeAt($y)?(l=pn,$y++):(l=kr,0===eg&&u(dn)),l!==kr?(i=[i,o,a,s,l],n=i):($y=n,n=kr)):($y=n,n=kr)}else $y=n,n=kr}else $y=n,n=kr}else $y=n,n=kr;if(n!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();if(i!==kr)if(123===t.charCodeAt($y)?(o=An,$y++):(o=kr,0===eg&&u(In)),o!==kr){for(a=[],s=ur();s!==kr;)a.push(s),s=ur();if(a!==kr){for(s=[],l=$y,c=[],f=ur();f!==kr;)c.push(f),f=ur();if(c!==kr)if(40===t.charCodeAt($y)?(f=an,$y++):(f=kr,0===eg&&u(sn)),f!==kr){for(p=[],d=ur();d!==kr;)p.push(d),d=ur();if(p!==kr){for(d=[],h=xe();h!==kr;)d.push(h),h=xe();if(d!==kr){for(h=[],v=ur();v!==kr;)h.push(v),v=ur();if(h!==kr)if(41===t.charCodeAt($y)?(v=pn,$y++):(v=kr,0===eg&&u(dn)),v!==kr){for(y=[],g=ur();g!==kr;)y.push(g),g=ur();y!==kr?(c=[c,f,p,d,h,v,y],l=c):($y=l,l=kr)}else $y=l,l=kr;else $y=l,l=kr}else $y=l,l=kr}else $y=l,l=kr}else $y=l,l=kr;else $y=l,l=kr;for(l===kr&&(l=sr());l!==kr;){for(s.push(l),l=$y,c=[],f=ur();f!==kr;)c.push(f),f=ur();if(c!==kr)if(40===t.charCodeAt($y)?(f=an,$y++):(f=kr,0===eg&&u(sn)),f!==kr){for(p=[],d=ur();d!==kr;)p.push(d),d=ur();if(p!==kr){for(d=[],h=xe();h!==kr;)d.push(h),h=xe();if(d!==kr){for(h=[],v=ur();v!==kr;)h.push(v),v=ur();if(h!==kr)if(41===t.charCodeAt($y)?(v=pn,$y++):(v=kr,0===eg&&u(dn)),v!==kr){for(y=[],g=ur();g!==kr;)y.push(g),g=ur();y!==kr?(c=[c,f,p,d,h,v,y],l=c):($y=l,l=kr)}else $y=l,l=kr;else $y=l,l=kr}else $y=l,l=kr}else $y=l,l=kr}else $y=l,l=kr;else $y=l,l=kr;l===kr&&(l=sr())}if(s!==kr){for(l=[],c=ur();c!==kr;)l.push(c),c=ur();l!==kr?(125===t.charCodeAt($y)?(c=Cn,$y++):(c=kr,0===eg&&u(Rn)),c!==kr?(Yy=e,r=nu(n,s),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr}else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(ru)),e}function xe(){var e,r,n,i,o;for(eg++,e=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if(n=Mt(),n===kr&&(n=Ct())===kr&&(n=Rt())===kr&&(n=Nt())===kr&&(t.substr($y,5)===ao?(n=ao,$y+=5):(n=kr,0===eg&&u(so))),n!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();i!==kr?(Yy=e,r=_i(n),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(iu)),e}function Se(){var e,t,r,n;if(eg++,e=$y,(t=Ot())!==kr){for(r=[],n=ur();n!==kr;)r.push(n),n=ur();r!==kr?(n=Te(),n!==kr?(Yy=e,t=au(t,n),e=t):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(t=kr,0===eg&&u(ou)),e}function Te(){var e,r,n,i,o,a,s,l,c,f,p,d;if(eg++,e=$y,r=sr(),r!==kr&&(Yy=e,r=uu()),(e=r)===kr)if(e=$y,40===t.charCodeAt($y)?(r=an,$y++):(r=kr,0===eg&&u(sn)),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(t.substr($y,8)===Jr?(i=Jr,$y+=8):(i=kr,0===eg&&u(Kr)),i===kr&&(t.substr($y,8)===Zr?(i=Zr,$y+=8):(i=kr,0===eg&&u(en))),i===kr&&(i=null),i!==kr){for(o=[],a=ur();a!==kr;)o.push(a),a=ur();if(o!==kr)if((a=pt())!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();if(s!==kr){if(l=[],c=$y,44===t.charCodeAt($y)?(f=lu,$y++):(f=kr,0===eg&&u(cu)),f!==kr){for(p=[],d=ur();d!==kr;)p.push(d),d=ur();p!==kr?(d=pt(),d!==kr?(f=[f,p,d],c=f):($y=c,c=kr)):($y=c,c=kr)}else $y=c,c=kr;for(;c!==kr;)if(l.push(c),c=$y,44===t.charCodeAt($y)?(f=lu,$y++):(f=kr,0===eg&&u(cu)),f!==kr){for(p=[],d=ur();d!==kr;)p.push(d),d=ur();p!==kr?(d=pt(),d!==kr?(f=[f,p,d],c=f):($y=c,c=kr)):($y=c,c=kr)}else $y=c,c=kr;l!==kr?(41===t.charCodeAt($y)?(c=pn,$y++):(c=kr,0===eg&&u(dn)),c!==kr?(Yy=e,r=fu(i,a,l),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(su)),e}function Ae(){var e,r,n,i,o,a,s,l,c,f;if(eg++,e=$y,r=sr(),r!==kr&&(Yy=e,r=uu()),(e=r)===kr)if(e=$y,40===t.charCodeAt($y)?(r=an,$y++):(r=kr,0===eg&&u(sn)),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(i=Ot(),i===kr&&(i=pt()),i!==kr){for(o=[],a=ur();a!==kr;)o.push(a),a=ur();if(o!==kr){if(a=[],s=$y,44===t.charCodeAt($y)?(l=lu,$y++):(l=kr,0===eg&&u(cu)),l!==kr){for(c=[],f=ur();f!==kr;)c.push(f),f=ur();c!==kr?(f=Ot(),f===kr&&(f=pt()),f!==kr?(l=[l,c,f],s=l):($y=s,s=kr)):($y=s,s=kr)}else $y=s,s=kr;for(;s!==kr;)if(a.push(s),s=$y,44===t.charCodeAt($y)?(l=lu,$y++):(l=kr,0===eg&&u(cu)),l!==kr){for(c=[],f=ur();f!==kr;)c.push(f),f=ur();c!==kr?(f=Ot(),f===kr&&(f=pt()),f!==kr?(l=[l,c,f],s=l):($y=s,s=kr)):($y=s,s=kr)}else $y=s,s=kr;a!==kr?(41===t.charCodeAt($y)?(s=pn,$y++):(s=kr,0===eg&&u(dn)),s!==kr?(Yy=e,r=du(i,a),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(pu)),e}function Ie(){var e,r,n,i,o,a;if(eg++,e=$y,123===t.charCodeAt($y)?(r=An,$y++):(r=kr,0===eg&&u(In)),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(i=Ce(),i===kr&&(i=null),i!==kr){for(o=[],a=ur();a!==kr;)o.push(a),a=ur();o!==kr?(125===t.charCodeAt($y)?(a=Cn,$y++):(a=kr,0===eg&&u(Rn)),a!==kr?(Yy=e,r=vu(i),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(hu)),e}function Ce(){var e,r,n,i,o,a,s;if(eg++,e=$y,(r=Re())!==kr){for(n=$y,i=[],o=ur();o!==kr;)i.push(o),o=ur();if(i!==kr)if(46===t.charCodeAt($y)?(o=es,$y++):(o=kr,0===eg&&u(ts)),o!==kr){for(a=[],s=ur();s!==kr;)a.push(s),s=ur();a!==kr?(s=Ce(),s===kr&&(s=null),s!==kr?(i=[i,o,a,s],n=i):($y=n,n=kr)):($y=n,n=kr)}else $y=n,n=kr;else $y=n,n=kr;n===kr&&(n=null),n!==kr?(Yy=e,r=gu(r,n),e=r):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(yu)),e}function Re(){var e,t,r,n,i;for(eg++,e=$y,t=[],r=ur();r!==kr;)t.push(r),r=ur();if(t!==kr)if((r=ut())!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();n!==kr?(i=je(),i!==kr?(Yy=e,t=mu(r,i),e=t):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr;if(e===kr){for(e=$y,t=[],r=ur();r!==kr;)t.push(r),r=ur();if(t!==kr)if((r=tt())!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();n!==kr?(i=Pe(),i!==kr?(Yy=e,t=_u(r,i),e=t):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}return eg--,e===kr&&(t=kr,0===eg&&u(bu)),e}function Fe(){var e,r,n,i,o,a,s,l,c,f,p,d,h;if(eg++,e=$y,r=qe(),r===kr&&(r=Ge()),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if((i=Ne())!==kr){for(o=[],a=$y,s=[],l=ur();l!==kr;)s.push(l),l=ur();if(s!==kr)if(59===t.charCodeAt($y)?(l=go,$y++):(l=kr,0===eg&&u(bo)),l!==kr){for(c=[],f=ur();f!==kr;)c.push(f),f=ur();if(c!==kr){if(f=$y,p=qe(),p===kr&&(p=Ge()),p!==kr){for(d=[],h=ur();h!==kr;)d.push(h),h=ur();d!==kr?(h=Le(),h!==kr?(p=[p,d,h],f=p):($y=f,f=kr)):($y=f,f=kr)}else $y=f,f=kr;f===kr&&(f=null),f!==kr?(s=[s,l,c,f],a=s):($y=a,a=kr)}else $y=a,a=kr}else $y=a,a=kr;else $y=a,a=kr;for(;a!==kr;){for(o.push(a),a=$y,s=[],l=ur();l!==kr;)s.push(l),l=ur();if(s!==kr)if(59===t.charCodeAt($y)?(l=go,$y++):(l=kr,0===eg&&u(bo)),l!==kr){for(c=[],f=ur();f!==kr;)c.push(f),f=ur();if(c!==kr){if(f=$y,p=qe(),p===kr&&(p=Ge()),p!==kr){for(d=[],h=ur();h!==kr;)d.push(h),h=ur();d!==kr?(h=Le(),h!==kr?(p=[p,d,h],f=p):($y=f,f=kr)):($y=f,f=kr)}else $y=f,f=kr;f===kr&&(f=null),f!==kr?(s=[s,l,c,f],a=s):($y=a,a=kr)}else $y=a,a=kr}else $y=a,a=kr;else $y=a,a=kr}o!==kr?(Yy=e,r=ku(r,i,o),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Eu)),e}function je(){var e,r,n,i,o,a,s,l,c,f,p,d,h;if(eg++,e=$y,(r=De())!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if((i=Le())!==kr){for(o=[],a=$y,s=[],l=ur();l!==kr;)s.push(l),l=ur();if(s!==kr)if(59===t.charCodeAt($y)?(l=go,$y++):(l=kr,0===eg&&u(bo)),l!==kr){for(c=[],f=ur();f!==kr;)c.push(f),f=ur();if(c!==kr){if(f=$y,(p=De())!==kr){for(d=[],h=ur();h!==kr;)d.push(h),h=ur();d!==kr?(h=Le(),h!==kr?(p=[p,d,h],f=p):($y=f,f=kr)):($y=f,f=kr)}else $y=f,f=kr;f===kr&&(f=null),f!==kr?(s=[s,l,c,f],a=s):($y=a,a=kr)}else $y=a,a=kr}else $y=a,a=kr;else $y=a,a=kr;for(;a!==kr;){for(o.push(a),a=$y,s=[],l=ur();l!==kr;)s.push(l),l=ur();if(s!==kr)if(59===t.charCodeAt($y)?(l=go,$y++):(l=kr,0===eg&&u(bo)),l!==kr){for(c=[],f=ur();f!==kr;)c.push(f),f=ur();if(c!==kr){if(f=$y,(p=De())!==kr){for(d=[],h=ur();h!==kr;)d.push(h),h=ur();d!==kr?(h=Le(),h!==kr?(p=[p,d,h],f=p):($y=f,f=kr)):($y=f,f=kr)}else $y=f,f=kr;f===kr&&(f=null),f!==kr?(s=[s,l,c,f],a=s):($y=a,a=kr)}else $y=a,a=kr}else $y=a,a=kr;else $y=a,a=kr}o!==kr?(Yy=e,r=xu(r,i,o),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(wu)),e}function Pe(){var e;return eg++,e=je(),e===kr&&(e=null),eg--,e===kr&&(kr,0===eg&&u(Su)),e}function Ne(){var e,r,n,i,o,a,s,l;if(eg++,e=$y,(r=Oe())!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr){if(i=[],o=$y,44===t.charCodeAt($y)?(a=lu,$y++):(a=kr,0===eg&&u(cu)),a!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();s!==kr?(l=Oe(),l!==kr?(a=[a,s,l],o=a):($y=o,o=kr)):($y=o,o=kr)}else $y=o,o=kr;for(;o!==kr;)if(i.push(o),o=$y,44===t.charCodeAt($y)?(a=lu,$y++):(a=kr,0===eg&&u(cu)),a!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();s!==kr?(l=Oe(),l!==kr?(a=[a,s,l],o=a):($y=o,o=kr)):($y=o,o=kr)}else $y=o,o=kr;i!==kr?(Yy=e,r=Au(r,i),e=r):($y=e,e=kr)}else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Tu)),e}function Le(){var e,r,n,i,o,a,s,l;if(eg++,e=$y,(r=Qe())!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr){if(i=[],o=$y,44===t.charCodeAt($y)?(a=lu,$y++):(a=kr,0===eg&&u(cu)),a!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();s!==kr?(l=Qe(),l!==kr?(a=[a,s,l],o=a):($y=o,o=kr)):($y=o,o=kr)}else $y=o,o=kr;for(;o!==kr;)if(i.push(o),o=$y,44===t.charCodeAt($y)?(a=lu,$y++):(a=kr,0===eg&&u(cu)),a!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();s!==kr?(l=Qe(),l!==kr?(a=[a,s,l],o=a):($y=o,o=kr)):($y=o,o=kr)}else $y=o,o=kr;i!==kr?(Yy=e,r=Cu(r,i),e=r):($y=e,e=kr)}else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Iu)),e}function Oe(){var e;return eg++,e=at(),eg--,e===kr&&(kr,0===eg&&u(Ru)),e}function Qe(){var e;return eg++,e=st(),eg--,e===kr&&(kr,0===eg&&u(Fu)),e}function De(){var e,r;return eg++,e=lt(),e===kr&&(e=$y,97===t.charCodeAt($y)?(r=Pu,$y++):(r=kr,0===eg&&u(Nu)),r!==kr&&(Yy=e,r=Lu()),e=r),eg--,e===kr&&(r=kr,0===eg&&u(ju)),e}function Me(){var e,t,r,n,i;for(eg++,e=$y,t=[],r=ur();r!==kr;)t.push(r),r=ur();if(t!==kr)if((r=ut())!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();n!==kr?(i=Be(),i!==kr?(Yy=e,t=Qu(r,i),e=t):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr;if(e===kr){for(e=$y,t=[],r=ur();r!==kr;)t.push(r),r=ur();if(t!==kr)if((r=et())!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();n!==kr?(i=Ue(),i!==kr?(Yy=e,t=Du(r,i),e=t):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}return eg--,e===kr&&(t=kr,0===eg&&u(Ou)),e}function Be(){var e,r,n,i,o,a,s,l,c,f,p,d;if(eg++,e=$y,r=qe(),r===kr&&(r=Ge()),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if((i=Ne())!==kr){for(o=[],a=$y,s=[],l=ur();l!==kr;)s.push(l),l=ur();if(s!==kr)if(59===t.charCodeAt($y)?(l=go,$y++):(l=kr,0===eg&&u(bo)),l!==kr){for(c=[],f=ur();f!==kr;)c.push(f),f=ur();c!==kr?(f=$y,p=qe(),p===kr&&(p=Ge()),p!==kr?(d=Le(),d!==kr?(p=[p,d],f=p):($y=f,f=kr)):($y=f,f=kr),f===kr&&(f=null),f!==kr?(s=[s,l,c,f],a=s):($y=a,a=kr)):($y=a,a=kr)}else $y=a,a=kr;else $y=a,a=kr;for(;a!==kr;){for(o.push(a),a=$y,s=[],l=ur();l!==kr;)s.push(l),l=ur();if(s!==kr)if(59===t.charCodeAt($y)?(l=go,$y++):(l=kr,0===eg&&u(bo)),l!==kr){for(c=[],f=ur();f!==kr;)c.push(f),f=ur();c!==kr?(f=$y,p=qe(),p===kr&&(p=Ge()),p!==kr?(d=Le(),d!==kr?(p=[p,d],f=p):($y=f,f=kr)):($y=f,f=kr),f===kr&&(f=null),f!==kr?(s=[s,l,c,f],a=s):($y=a,a=kr)):($y=a,a=kr)}else $y=a,a=kr;else $y=a,a=kr}o!==kr?(Yy=e,r=Bu(r,i,o),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Mu)),e}function Ue(){var e;return eg++,e=Fe(),e===kr&&(e=null),eg--,e===kr&&(kr,0===eg&&u(Uu)),e}function qe(){var e,t;return eg++,e=$y,t=He(),t!==kr&&(Yy=e,t=Gu(t)),e=t,eg--,e===kr&&(t=kr,0===eg&&u(qu)),e}function Ge(){var e;return eg++,e=ct(),eg--,e===kr&&(kr,0===eg&&u(Hu)),e}function He(){var e;return eg++,e=Ve(),eg--,e===kr&&(kr,0===eg&&u(Vu)),e}function Ve(){var e,r,n,i,o,a;if(eg++,e=$y,(r=Xe())!==kr){for(n=[],i=$y,124===t.charCodeAt($y)?(o=Wu,$y++):(o=kr,0===eg&&u(zu)),o!==kr?(a=Xe(),a!==kr?(o=[o,a],i=o):($y=i,i=kr)):($y=i,i=kr);i!==kr;)n.push(i),i=$y,124===t.charCodeAt($y)?(o=Wu,$y++):(o=kr,0===eg&&u(zu)),o!==kr?(a=Xe(),a!==kr?(o=[o,a],i=o):($y=i,i=kr)):($y=i,i=kr);n!==kr?(Yy=e,r=$u(r,n),e=r):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Xu)),e}function Xe(){var e,r,n,i,o,a;if(eg++,e=$y,(r=ze())!==kr){for(n=[],i=$y,47===t.charCodeAt($y)?(o=Ju,$y++):(o=kr,0===eg&&u(Ku)),o!==kr?(a=ze(),a!==kr?(o=[o,a],i=o):($y=i,i=kr)):($y=i,i=kr);i!==kr;)n.push(i),i=$y,47===t.charCodeAt($y)?(o=Ju,$y++):(o=kr,0===eg&&u(Ku)),o!==kr?(a=ze(),a!==kr?(o=[o,a],i=o):($y=i,i=kr)):($y=i,i=kr);n!==kr?(Yy=e,r=Zu(r,n),e=r):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Yu)),e}function We(){var e,t,r;return eg++,e=$y,t=Ye(),t!==kr?(r=$e(),r===kr&&(r=null),r!==kr?(Yy=e,t=tl(t,r),e=t):($y=e,e=kr)):($y=e,e=kr),eg--,e===kr&&(t=kr,0===eg&&u(el)),e}function ze(){var e,r,n;return eg++,e=We(),e===kr&&(e=$y,94===t.charCodeAt($y)?(r=nl,$y++):(r=kr,0===eg&&u(il)),r!==kr?(n=We(),n!==kr?(Yy=e,r=ol(n),e=r):($y=e,e=kr)):($y=e,e=kr)),eg--,e===kr&&(r=kr,0===eg&&u(rl)),e}function $e(){var e,r,n,i,o,a,s,l,c;return eg++,42===t.charCodeAt($y)?(e=hn,$y++):(e=kr,0===eg&&u(vn)),e===kr&&(63===t.charCodeAt($y)?(e=sl,$y++):(e=kr,0===eg&&u(ul)),e===kr&&(43===t.charCodeAt($y)?(e=ll,$y++):(e=kr,0===eg&&u(cl)),e===kr&&(e=$y,123===t.charCodeAt($y)?(r=An,$y++):(r=kr,0===eg&&u(In)),r!==kr?(n=$y,i=Ze(),i!==kr?(o=$y,44===t.charCodeAt($y)?(a=lu,$y++):(a=kr,0===eg&&u(cu)),a!==kr?(125===t.charCodeAt($y)?(s=Cn,$y++):(s=kr,0===eg&&u(Rn)),s===kr&&(s=$y,l=Ze(),l!==kr?(125===t.charCodeAt($y)?(c=Cn,$y++):(c=kr,0===eg&&u(Rn)),c!==kr?(l=[l,c],s=l):($y=s,s=kr)):($y=s,s=kr)),s!==kr?(a=[a,s],o=a):($y=o,o=kr)):($y=o,o=kr),o===kr&&(125===t.charCodeAt($y)?(o=Cn,$y++):(o=kr,0===eg&&u(Rn))),o!==kr?(i=[i,o],n=i):($y=n,n=kr)):($y=n,n=kr),n===kr&&(n=$y,44===t.charCodeAt($y)?(i=lu,$y++):(i=kr,0===eg&&u(cu)),i!==kr?(o=Ze(),o!==kr?(125===t.charCodeAt($y)?(a=Cn,$y++):(a=kr,0===eg&&u(Rn)),a!==kr?(i=[i,o,a],n=i):($y=n,n=kr)):($y=n,n=kr)):($y=n,n=kr)),n!==kr?(r=[r,n],e=r):($y=e,e=kr)):($y=e,e=kr)))),eg--,e===kr&&(r=kr,0===eg&&u(al)),e}function Ye(){var e,r,n,i;return eg++,e=Ot(),e===kr&&(e=$y,97===t.charCodeAt($y)?(r=Pu,$y++):(r=kr,0===eg&&u(Nu)),r!==kr&&(Yy=e,r=Lu()),(e=r)===kr&&(e=$y,33===t.charCodeAt($y)?(r=pl,$y++):(r=kr,0===eg&&u(dl)),r!==kr?(n=Je(),n!==kr?(r=[r,n],e=r):($y=e,e=kr)):($y=e,e=kr),e===kr&&(e=$y,40===t.charCodeAt($y)?(r=an,$y++):(r=kr,0===eg&&u(sn)),r!==kr?(n=He(),n!==kr?(41===t.charCodeAt($y)?(i=pn,$y++):(i=kr,0===eg&&u(dn)),i!==kr?(Yy=e,r=us(n),e=r):($y=e,e=kr)):($y=e,e=kr)):($y=e,e=kr)))),eg--,e===kr&&(r=kr,0===eg&&u(fl)),e}function Je(){var e,r,n,i,o,a,s,l;if((e=Ke())===kr)if(e=$y,40===t.charCodeAt($y)?(r=an,$y++):(r=kr,0===eg&&u(sn)),r!==kr){if(n=$y,(i=Ke())!==kr){for(o=[],a=$y,124===t.charCodeAt($y)?(s=Wu,$y++):(s=kr,0===eg&&u(zu)),s!==kr?(l=Ke(),l!==kr?(s=[s,l],a=s):($y=a,a=kr)):($y=a,a=kr);a!==kr;)o.push(a),a=$y,124===t.charCodeAt($y)?(s=Wu,$y++):(s=kr,0===eg&&u(zu)),s!==kr?(l=Ke(),l!==kr?(s=[s,l],a=s):($y=a,a=kr)):($y=a,a=kr);o!==kr?(i=[i,o],n=i):($y=n,n=kr)}else $y=n,n=kr;n===kr&&(n=null),n!==kr?(41===t.charCodeAt($y)?(i=pn,$y++):(i=kr,0===eg&&u(dn)),i!==kr?(r=[r,n,i],e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;return e}function Ke(){var e,r,n;return eg++,e=Ot(),e===kr&&(97===t.charCodeAt($y)?(e=Pu,$y++):(e=kr,0===eg&&u(Nu)),e===kr&&(e=$y,94===t.charCodeAt($y)?(r=nl,$y++):(r=kr,0===eg&&u(il)),r!==kr?(n=Ot(),n===kr&&(97===t.charCodeAt($y)?(n=Pu,$y++):(n=kr,0===eg&&u(Nu))),n!==kr?(r=[r,n],e=r):($y=e,e=kr)):($y=e,e=kr))),eg--,e===kr&&(r=kr,0===eg&&u(hl)),e}function Ze(){var e;return eg++,e=Xt(),eg--,e===kr&&(kr,0===eg&&u(vl)),e}function et(){var e,t;return eg++,e=$y,t=it(),t!==kr&&(Yy=e,t=gl(t)),e=t,e===kr&&(e=rt()),eg--,e===kr&&(t=kr,0===eg&&u(yl)),e}function tt(){var e,t;return eg++,e=$y,t=ot(),t!==kr&&(Yy=e,t=ml(t)),e=t,e===kr&&(e=nt()),eg--,e===kr&&(t=kr,0===eg&&u(bl)),e}function rt(){var e,r,n,i,o,a,s,l;for(eg++,e=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if(91===t.charCodeAt($y)?(n=El,$y++):(n=kr,0===eg&&u(kl)),n!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();if(i!==kr)if((o=Be())!==kr)if(93===t.charCodeAt($y)?(a=wl,$y++):(a=kr,0===eg&&u(xl)),a!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();s!==kr?(Yy=e,r=Sl(o),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(_l)),e}function nt(){var e,r,n,i,o,a,s,l,c;for(eg++,e=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if(91===t.charCodeAt($y)?(n=El,$y++):(n=kr,0===eg&&u(kl)),n!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();if(i!==kr)if((o=je())!==kr){for(a=[],s=ur();s!==kr;)a.push(s),s=ur();if(a!==kr)if(93===t.charCodeAt($y)?(s=wl,$y++):(s=kr,0===eg&&u(xl)),s!==kr){for(l=[],c=ur();c!==kr;)l.push(c),c=ur();l!==kr?(Yy=e,r=Al(o),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Tl)),e}function it(){var e,r,n,i,o,a,s,l,c;for(eg++,e=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if(40===t.charCodeAt($y)?(n=an,$y++):(n=kr,0===eg&&u(sn)),n!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();if(i!==kr){if(o=[],(a=at())!==kr)for(;a!==kr;)o.push(a),a=at();else o=kr;if(o!==kr){for(a=[],s=ur();s!==kr;)a.push(s),s=ur();if(a!==kr)if(41===t.charCodeAt($y)?(s=pn,$y++):(s=kr,0===eg&&u(dn)),s!==kr){for(l=[],c=ur();c!==kr;)l.push(c),c=ur();l!==kr?(Yy=e,r=Cl(o),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr}else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Il)),e}function ot(){var e,r,n,i,o,a,s,l,c;for(eg++,e=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if(40===t.charCodeAt($y)?(n=an,$y++):(n=kr,0===eg&&u(sn)),n!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();if(i!==kr){if(o=[],(a=st())!==kr)for(;a!==kr;)o.push(a),a=st();else o=kr;if(o!==kr){for(a=[],s=ur();s!==kr;)a.push(s),s=ur();if(a!==kr)if(41===t.charCodeAt($y)?(s=pn,$y++):(s=kr,0===eg&&u(dn)),s!==kr){for(l=[],c=ur();c!==kr;)l.push(c),c=ur();l!==kr?(Yy=e,r=Cl(o),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr}else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Rl)),e}function at(){var e,t,r,n,i,o;for(eg++,e=$y,t=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if((n=ut())!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();i!==kr?(r=[r,n,i],t=r):($y=t,t=kr)}else $y=t,t=kr;else $y=t,t=kr;if(t===kr){for(t=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if((n=et())!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();i!==kr?(r=[r,n,i],t=r):($y=t,t=kr)}else $y=t,t=kr;else $y=t,t=kr}return t!==kr&&(Yy=e,t=jl(t)),e=t,eg--,e===kr&&(t=kr,0===eg&&u(Fl)),e}function st(){var e,t,r,n,i,o;for(eg++,e=$y,t=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if((n=ut())!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();i!==kr?(r=[r,n,i],t=r):($y=t,t=kr)}else $y=t,t=kr;else $y=t,t=kr;if(t===kr){for(t=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if((n=tt())!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();i!==kr?(r=[r,n,i],t=r):($y=t,t=kr)}else $y=t,t=kr;else $y=t,t=kr}return t!==kr&&(Yy=e,t=jl(t)),e=t,eg--,e===kr&&(t=kr,0===eg&&u(Pl)),e}function ut(){var e;return eg++,e=ct(),e===kr&&(e=ft()),eg--,e===kr&&(kr,0===eg&&u(Nl)),e}function lt(){var e;return eg++,e=ct(),e===kr&&(e=Ot()),eg--,e===kr&&(kr,0===eg&&u(Ll)),e}function ct(){var e,t,r,n,i;for(eg++,e=$y,t=[],r=ur();r!==kr;)t.push(r),r=ur();if(t!==kr)if(r=Gt(),r===kr&&(r=Ht()),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();n!==kr?(Yy=e,t=Ql(r),e=t):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr;return eg--,e===kr&&(t=kr,0===eg&&u(Ol)),e}function ft(){var e;return eg++,e=Ot(),e===kr&&(e=Ct())===kr&&(e=Rt())===kr&&(e=Nt())===kr&&(e=Dt())===kr&&(e=sr()),eg--,e===kr&&(kr,0===eg&&u(Dl)),e}function pt(){var e;return eg++,e=dt(),eg--,e===kr&&(kr,0===eg&&u(Ml)),e}function dt(){var e,r,n,i,o,a,s,l;if(eg++,e=$y,(r=ht())!==kr){for(n=[],i=$y,o=[],a=ur();a!==kr;)o.push(a),a=ur();if(o!==kr)if(t.substr($y,2)===Ul?(a=Ul,$y+=2):(a=kr,0===eg&&u(ql)),a!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();s!==kr?(l=ht(),l!==kr?(o=[o,a,s,l],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr;for(;i!==kr;){for(n.push(i),i=$y,o=[],a=ur();a!==kr;)o.push(a),a=ur();if(o!==kr)if(t.substr($y,2)===Ul?(a=Ul,$y+=2):(a=kr,0===eg&&u(ql)),a!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();s!==kr?(l=ht(),l!==kr?(o=[o,a,s,l],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr}n!==kr?(Yy=e,r=Gl(r,n),e=r):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Bl)),e}function ht(){var e,r,n,i,o,a,s,l;if(eg++,e=$y,(r=vt())!==kr){for(n=[],i=$y,o=[],a=ur();a!==kr;)o.push(a),a=ur();if(o!==kr)if(t.substr($y,2)===Vl?(a=Vl,$y+=2):(a=kr,0===eg&&u(Xl)),a!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();s!==kr?(l=vt(),l!==kr?(o=[o,a,s,l],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr;for(;i!==kr;){for(n.push(i),i=$y,o=[],a=ur();a!==kr;)o.push(a),a=ur();if(o!==kr)if(t.substr($y,2)===Vl?(a=Vl,$y+=2):(a=kr,0===eg&&u(Xl)),a!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();s!==kr?(l=vt(),l!==kr?(o=[o,a,s,l],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr}n!==kr?(Yy=e,r=Wl(r,n),e=r):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Hl)),e}function vt(){var e;return eg++,e=yt(),eg--,e===kr&&(kr,0===eg&&u(zl)),e}function yt(){var e,r,n,i,o,a,s,l,c,f,p,d,h;if(eg++,e=$y,(r=gt())!==kr){for(n=[],i=$y,o=[],a=ur();a!==kr;)o.push(a),a=ur();if(o!==kr)if(61===t.charCodeAt($y)?(a=Yl,$y++):(a=kr,0===eg&&u(Jl)),a!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();s!==kr?(l=gt(),l!==kr?(o=[o,a,s,l],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr;if(i===kr){for(i=$y,o=[],a=ur();a!==kr;)o.push(a),a=ur();if(o!==kr)if(t.substr($y,2)===Kl?(a=Kl,$y+=2):(a=kr,0===eg&&u(Zl)),a!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();s!==kr?(l=gt(),l!==kr?(o=[o,a,s,l],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr;if(i===kr){for(i=$y,o=[],a=ur();a!==kr;)o.push(a),a=ur();if(o!==kr)if(60===t.charCodeAt($y)?(a=ec,$y++):(a=kr,0===eg&&u(tc)),a!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();s!==kr?(l=gt(),l!==kr?(o=[o,a,s,l],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr;if(i===kr){for(i=$y,o=[],a=ur();a!==kr;)o.push(a),a=ur();if(o!==kr)if(62===t.charCodeAt($y)?(a=rc,$y++):(a=kr,0===eg&&u(nc)),a!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();s!==kr?(l=gt(),l!==kr?(o=[o,a,s,l],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr;if(i===kr){for(i=$y,o=[],a=ur();a!==kr;)o.push(a),a=ur();if(o!==kr)if(t.substr($y,2)===ic?(a=ic,$y+=2):(a=kr,0===eg&&u(oc)),a!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();s!==kr?(l=gt(),l!==kr?(o=[o,a,s,l],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr;if(i===kr){for(i=$y,o=[],a=ur();a!==kr;)o.push(a),a=ur();if(o!==kr)if(t.substr($y,2)===ac?(a=ac,$y+=2):(a=kr,0===eg&&u(sc)),a!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();s!==kr?(l=gt(),l!==kr?(o=[o,a,s,l],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr;if(i===kr){for(i=$y,o=[],a=ur();a!==kr;)o.push(a),a=ur();if(o!==kr)if(73===t.charCodeAt($y)?(a=uc,$y++):(a=kr,0===eg&&u(lc)),a===kr&&(105===t.charCodeAt($y)?(a=cc,$y++):(a=kr,0===eg&&u(fc))),a!==kr)if(78===t.charCodeAt($y)?(s=pc,$y++):(s=kr,0===eg&&u(dc)),s===kr&&(110===t.charCodeAt($y)?(s=hc,$y++):(s=kr,0===eg&&u(vc))),s!==kr){for(l=[],c=ur();c!==kr;)l.push(c),c=ur();l!==kr?(c=Ae(),c!==kr?(o=[o,a,s,l,c],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr;else $y=i,i=kr;if(i===kr){for(i=$y,o=[],a=ur();a!==kr;)o.push(a),a=ur();if(o!==kr)if(78===t.charCodeAt($y)?(a=pc,$y++):(a=kr,0===eg&&u(dc)),a===kr&&(110===t.charCodeAt($y)?(a=hc,$y++):(a=kr,0===eg&&u(vc))),a!==kr)if(79===t.charCodeAt($y)?(s=yc,$y++):(s=kr,0===eg&&u(gc)),s===kr&&(111===t.charCodeAt($y)?(s=bc,$y++):(s=kr,0===eg&&u(mc))),s!==kr)if(84===t.charCodeAt($y)?(l=_c,$y++):(l=kr,0===eg&&u(Ec)),l===kr&&(116===t.charCodeAt($y)?(l=kc,$y++):(l=kr,0===eg&&u(wc))),l!==kr){for(c=[],f=ur();f!==kr;)c.push(f),f=ur();if(c!==kr)if(73===t.charCodeAt($y)?(f=uc,$y++):(f=kr,0===eg&&u(lc)),f===kr&&(105===t.charCodeAt($y)?(f=cc,$y++):(f=kr,0===eg&&u(fc))),f!==kr)if(78===t.charCodeAt($y)?(p=pc,$y++):(p=kr,0===eg&&u(dc)),p===kr&&(110===t.charCodeAt($y)?(p=hc,$y++):(p=kr,0===eg&&u(vc))),p!==kr){for(d=[],h=ur();h!==kr;)d.push(h),h=ur();d!==kr?(h=Ae(),h!==kr?(o=[o,a,s,l,c,f,p,d,h],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr;else $y=i,i=kr}else $y=i,i=kr;else $y=i,i=kr;else $y=i,i=kr;else $y=i,i=kr}}}}}}}for(;i!==kr;){for(n.push(i),i=$y,o=[],a=ur();a!==kr;)o.push(a),a=ur();if(o!==kr)if(61===t.charCodeAt($y)?(a=Yl,$y++):(a=kr,0===eg&&u(Jl)),a!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();s!==kr?(l=gt(),l!==kr?(o=[o,a,s,l],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr;if(i===kr){for(i=$y,o=[],a=ur();a!==kr;)o.push(a),a=ur();if(o!==kr)if(t.substr($y,2)===Kl?(a=Kl,$y+=2):(a=kr,0===eg&&u(Zl)),a!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();s!==kr?(l=gt(),l!==kr?(o=[o,a,s,l],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr;if(i===kr){for(i=$y,o=[],a=ur();a!==kr;)o.push(a),a=ur();if(o!==kr)if(60===t.charCodeAt($y)?(a=ec,$y++):(a=kr,0===eg&&u(tc)),a!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();s!==kr?(l=gt(),l!==kr?(o=[o,a,s,l],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr;if(i===kr){for(i=$y,o=[],a=ur();a!==kr;)o.push(a),a=ur();if(o!==kr)if(62===t.charCodeAt($y)?(a=rc,$y++):(a=kr,0===eg&&u(nc)),a!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();s!==kr?(l=gt(),l!==kr?(o=[o,a,s,l],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr;if(i===kr){for(i=$y,o=[],a=ur();a!==kr;)o.push(a),a=ur();if(o!==kr)if(t.substr($y,2)===ic?(a=ic,$y+=2):(a=kr,0===eg&&u(oc)),a!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();s!==kr?(l=gt(),l!==kr?(o=[o,a,s,l],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr;if(i===kr){for(i=$y,o=[],a=ur();a!==kr;)o.push(a),a=ur();if(o!==kr)if(t.substr($y,2)===ac?(a=ac,$y+=2):(a=kr,0===eg&&u(sc)),a!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();s!==kr?(l=gt(),l!==kr?(o=[o,a,s,l],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr;if(i===kr){for(i=$y,o=[],a=ur();a!==kr;)o.push(a),a=ur();if(o!==kr)if(73===t.charCodeAt($y)?(a=uc,$y++):(a=kr,0===eg&&u(lc)),a===kr&&(105===t.charCodeAt($y)?(a=cc,$y++):(a=kr,0===eg&&u(fc))),a!==kr)if(78===t.charCodeAt($y)?(s=pc,$y++):(s=kr,0===eg&&u(dc)),s===kr&&(110===t.charCodeAt($y)?(s=hc,$y++):(s=kr,0===eg&&u(vc))),s!==kr){for(l=[],c=ur();c!==kr;)l.push(c),c=ur();l!==kr?(c=Ae(),c!==kr?(o=[o,a,s,l,c],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr;else $y=i,i=kr;if(i===kr){for(i=$y,o=[],a=ur();a!==kr;)o.push(a),a=ur();if(o!==kr)if(78===t.charCodeAt($y)?(a=pc,$y++):(a=kr,0===eg&&u(dc)),a===kr&&(110===t.charCodeAt($y)?(a=hc,$y++):(a=kr,0===eg&&u(vc))),a!==kr)if(79===t.charCodeAt($y)?(s=yc,$y++):(s=kr,0===eg&&u(gc)),s===kr&&(111===t.charCodeAt($y)?(s=bc,$y++):(s=kr,0===eg&&u(mc))),s!==kr)if(84===t.charCodeAt($y)?(l=_c,$y++):(l=kr,0===eg&&u(Ec)),l===kr&&(116===t.charCodeAt($y)?(l=kc,$y++):(l=kr,0===eg&&u(wc))),l!==kr){for(c=[],f=ur();f!==kr;)c.push(f),f=ur();if(c!==kr)if(73===t.charCodeAt($y)?(f=uc,$y++):(f=kr,0===eg&&u(lc)),f===kr&&(105===t.charCodeAt($y)?(f=cc,$y++):(f=kr,0===eg&&u(fc))),f!==kr)if(78===t.charCodeAt($y)?(p=pc,$y++):(p=kr,0===eg&&u(dc)),p===kr&&(110===t.charCodeAt($y)?(p=hc,$y++):(p=kr,0===eg&&u(vc))),p!==kr){for(d=[],h=ur();h!==kr;)d.push(h),h=ur();d!==kr?(h=Ae(),h!==kr?(o=[o,a,s,l,c,f,p,d,h],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr;else $y=i,i=kr}else $y=i,i=kr;else $y=i,i=kr;else $y=i,i=kr;else $y=i,i=kr}}}}}}}}n!==kr?(Yy=e,r=xc(r,n),e=r):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u($l)),e}function gt(){var e;return eg++,e=bt(),eg--,e===kr&&(kr,0===eg&&u(Sc)),e}function bt(){var e,r,n,i,o,a,s,l,c,f;if(eg++,e=$y,(r=mt())!==kr){for(n=[],i=$y,o=[],a=ur();a!==kr;)o.push(a),a=ur();if(o!==kr)if(43===t.charCodeAt($y)?(a=ll,$y++):(a=kr,0===eg&&u(cl)),a!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();s!==kr?(l=mt(),l!==kr?(o=[o,a,s,l],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr;if(i===kr){for(i=$y,o=[],a=ur();a!==kr;)o.push(a),a=ur();if(o!==kr)if(45===t.charCodeAt($y)?(a=Ac,$y++):(a=kr,0===eg&&u(Ic)),a!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();s!==kr?(l=mt(),l!==kr?(o=[o,a,s,l],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr;if(i===kr)if(i=$y,o=Pt(),o===kr&&(o=Pt()),o!==kr){for(a=$y,s=[],l=ur();l!==kr;)s.push(l),l=ur();if(s!==kr)if(42===t.charCodeAt($y)?(l=hn,$y++):(l=kr,0===eg&&u(vn)),l!==kr){for(c=[],f=ur();f!==kr;)c.push(f),f=ur();c!==kr?(f=_t(),f!==kr?(s=[s,l,c,f],a=s):($y=a,a=kr)):($y=a,a=kr)}else $y=a,a=kr;else $y=a,a=kr;if(a===kr){for(a=$y,s=[],l=ur();l!==kr;)s.push(l),l=ur();if(s!==kr)if(47===t.charCodeAt($y)?(l=Ju,$y++):(l=kr,0===eg&&u(Ku)),l!==kr){for(c=[],f=ur();f!==kr;)c.push(f),f=ur();c!==kr?(f=_t(),f!==kr?(s=[s,l,c,f],a=s):($y=a,a=kr)):($y=a,a=kr)}else $y=a,a=kr;else $y=a,a=kr}a===kr&&(a=null),a!==kr?(o=[o,a],i=o):($y=i,i=kr)}else $y=i,i=kr}for(;i!==kr;){for(n.push(i),i=$y,o=[],a=ur();a!==kr;)o.push(a),a=ur();if(o!==kr)if(43===t.charCodeAt($y)?(a=ll,$y++):(a=kr,0===eg&&u(cl)),a!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();s!==kr?(l=mt(),l!==kr?(o=[o,a,s,l],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr;if(i===kr){for(i=$y,o=[],a=ur();a!==kr;)o.push(a),a=ur();if(o!==kr)if(45===t.charCodeAt($y)?(a=Ac,$y++):(a=kr,0===eg&&u(Ic)),a!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();s!==kr?(l=mt(),l!==kr?(o=[o,a,s,l],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr;if(i===kr)if(i=$y,o=Pt(),o===kr&&(o=Pt()),o!==kr){for(a=$y,s=[],l=ur();l!==kr;)s.push(l),l=ur();if(s!==kr)if(42===t.charCodeAt($y)?(l=hn,$y++):(l=kr,0===eg&&u(vn)),l!==kr){for(c=[],f=ur();f!==kr;)c.push(f),f=ur();c!==kr?(f=_t(),f!==kr?(s=[s,l,c,f],a=s):($y=a,a=kr)):($y=a,a=kr)}else $y=a,a=kr;else $y=a,a=kr;if(a===kr){for(a=$y,s=[],l=ur();l!==kr;)s.push(l),l=ur();if(s!==kr)if(47===t.charCodeAt($y)?(l=Ju,$y++):(l=kr,0===eg&&u(Ku)),l!==kr){for(c=[],f=ur();f!==kr;)c.push(f),f=ur();c!==kr?(f=_t(),f!==kr?(s=[s,l,c,f],a=s):($y=a,a=kr)):($y=a,a=kr)}else $y=a,a=kr;else $y=a,a=kr}a===kr&&(a=null),a!==kr?(o=[o,a],i=o):($y=i,i=kr)}else $y=i,i=kr}}n!==kr?(Yy=e,r=Cc(r,n),e=r):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Tc)),e}function mt(){var e,r,n,i,o,a,s,l;if(eg++,e=$y,(r=_t())!==kr){for(n=[],i=$y,o=[],a=ur();a!==kr;)o.push(a),a=ur();if(o!==kr)if(42===t.charCodeAt($y)?(a=hn,$y++):(a=kr,0===eg&&u(vn)),a!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();s!==kr?(l=_t(),l!==kr?(o=[o,a,s,l],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr;if(i===kr){for(i=$y,o=[],a=ur();a!==kr;)o.push(a),a=ur();if(o!==kr)if(47===t.charCodeAt($y)?(a=Ju,$y++):(a=kr,0===eg&&u(Ku)),a!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();s!==kr?(l=_t(),l!==kr?(o=[o,a,s,l],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr}for(;i!==kr;){for(n.push(i),i=$y,o=[],a=ur();a!==kr;)o.push(a),a=ur();if(o!==kr)if(42===t.charCodeAt($y)?(a=hn,$y++):(a=kr,0===eg&&u(vn)),a!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();s!==kr?(l=_t(),l!==kr?(o=[o,a,s,l],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr;if(i===kr){for(i=$y,o=[],a=ur();a!==kr;)o.push(a),a=ur();if(o!==kr)if(47===t.charCodeAt($y)?(a=Ju,$y++):(a=kr,0===eg&&u(Ku)),a!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();s!==kr?(l=_t(),l!==kr?(o=[o,a,s,l],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr}}n!==kr?(Yy=e,r=Fc(r,n),e=r):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Rc)),e}function _t(){var e,r,n,i;if(eg++,e=$y,33===t.charCodeAt($y)?(r=pl,$y++):(r=kr,0===eg&&u(dl)),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();n!==kr?(i=Et(),i!==kr?(Yy=e,r=Pc(i),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;if(e===kr){if(e=$y,43===t.charCodeAt($y)?(r=ll,$y++):(r=kr,0===eg&&u(cl)),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();n!==kr?(i=Et(),i!==kr?(Yy=e,r=Nc(i),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;if(e===kr){if(e=$y,45===t.charCodeAt($y)?(r=Ac,$y++):(r=kr,0===eg&&u(Ic)),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();n!==kr?(i=Et(),i!==kr?(Yy=e,r=Lc(i),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;e===kr&&(e=Et())}}return eg--,e===kr&&(r=kr,0===eg&&u(jc)),e}function Et(){var e,t;return eg++,e=kt(),e===kr&&(e=wt())===kr&&(e=It())===kr&&(e=$y,t=Ct(),t!==kr&&(Yy=e,t=Qc(t)),(e=t)===kr&&(e=$y,t=Rt(),t!==kr&&(Yy=e,t=Dc(t)),(e=t)===kr&&(e=$y,t=Nt(),t!==kr&&(Yy=e,t=Mc(t)),(e=t)===kr&&(e=At())===kr&&(e=$y,t=ct(),t!==kr&&(Yy=e,t=Bc(t)),e=t)))),eg--,e===kr&&(t=kr,0===eg&&u(Oc)),e}function kt(){var e,r,n,i,o,a;if(eg++,e=$y,40===t.charCodeAt($y)?(r=an,$y++):(r=kr,0===eg&&u(sn)),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if((i=pt())!==kr){for(o=[],a=ur();a!==kr;)o.push(a),a=ur();o!==kr?(41===t.charCodeAt($y)?(a=pn,$y++):(a=kr,0===eg&&u(dn)),a!==kr?(Yy=e,r=qc(i),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Uc)),e}function wt(){var e,r,n,i,o,a,s,l,c,f,p,d,h,v,y,g;if(eg++,e=$y,t.substr($y,3)===Hc?(r=Hc,$y+=3):(r=kr,0===eg&&u(Vc)),r===kr&&(t.substr($y,3)===Xc?(r=Xc,$y+=3):(r=kr,0===eg&&u(Wc))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(40===t.charCodeAt($y)?(i=an,$y++):(i=kr,0===eg&&u(sn)),i!==kr){for(o=[],a=ur();a!==kr;)o.push(a),a=ur();if(o!==kr)if((a=pt())!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();s!==kr?(41===t.charCodeAt($y)?(l=pn,$y++):(l=kr,0===eg&&u(dn)),l!==kr?(Yy=e,r=zc(a),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;if(e===kr){if(e=$y,t.substr($y,4)===$c?(r=$c,$y+=4):(r=kr,0===eg&&u(Yc)),r===kr&&(t.substr($y,4)===Jc?(r=Jc,$y+=4):(r=kr,0===eg&&u(Kc))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(40===t.charCodeAt($y)?(i=an,$y++):(i=kr,0===eg&&u(sn)),i!==kr){for(o=[],a=ur();a!==kr;)o.push(a),a=ur();if(o!==kr)if((a=pt())!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();s!==kr?(41===t.charCodeAt($y)?(l=pn,$y++):(l=kr,0===eg&&u(dn)),l!==kr?(Yy=e,r=Zc(a),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;if(e===kr){if(e=$y,t.substr($y,11)===ef?(r=ef,$y+=11):(r=kr,0===eg&&u(tf)),r===kr&&(t.substr($y,11)===rf?(r=rf,$y+=11):(r=kr,0===eg&&u(nf))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(40===t.charCodeAt($y)?(i=an,$y++):(i=kr,0===eg&&u(sn)),i!==kr){for(o=[],a=ur();a!==kr;)o.push(a),a=ur();if(o!==kr)if((a=pt())!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();if(s!==kr)if(44===t.charCodeAt($y)?(l=lu,$y++):(l=kr,0===eg&&u(cu)),l!==kr){for(c=[],f=ur();f!==kr;)c.push(f),f=ur();if(c!==kr)if((f=pt())!==kr){for(p=[],d=ur();d!==kr;)p.push(d),d=ur();p!==kr?(41===t.charCodeAt($y)?(d=pn,$y++):(d=kr,0===eg&&u(dn)),d!==kr?(Yy=e,r=of(a,f),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;if(e===kr){if(e=$y,t.substr($y,8)===af?(r=af,$y+=8):(r=kr,0===eg&&u(sf)),r===kr&&(t.substr($y,8)===uf?(r=uf,$y+=8):(r=kr,0===eg&&u(lf))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(40===t.charCodeAt($y)?(i=an,$y++):(i=kr,0===eg&&u(sn)),i!==kr){for(o=[],a=ur();a!==kr;)o.push(a),a=ur();if(o!==kr)if((a=pt())!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();s!==kr?(41===t.charCodeAt($y)?(l=pn,$y++):(l=kr,0===eg&&u(dn)),l!==kr?(Yy=e,r=cf(a),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;if(e===kr){if(e=$y,t.substr($y,5)===ff?(r=ff,$y+=5):(r=kr,0===eg&&u(pf)),r===kr&&(t.substr($y,5)===df?(r=df,$y+=5):(r=kr,0===eg&&u(hf))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(40===t.charCodeAt($y)?(i=an,$y++):(i=kr,0===eg&&u(sn)),i!==kr){for(o=[],a=ur();a!==kr;)o.push(a),a=ur();if(o!==kr)if((a=ct())!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();s!==kr?(41===t.charCodeAt($y)?(l=pn,$y++):(l=kr,0===eg&&u(dn)),l!==kr?(Yy=e,r=vf(a),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;if(e===kr){if(e=$y,t.substr($y,3)===yf?(r=yf,$y+=3):(r=kr,0===eg&&u(gf)),r===kr&&(t.substr($y,3)===bf?(r=bf,$y+=3):(r=kr,0===eg&&u(mf))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(40===t.charCodeAt($y)?(i=an,$y++):(i=kr,0===eg&&u(sn)),i!==kr){for(o=[],a=ur();a!==kr;)o.push(a),a=ur();if(o!==kr)if((a=pt())!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();s!==kr?(41===t.charCodeAt($y)?(l=pn,$y++):(l=kr,0===eg&&u(dn)),l!==kr?(Yy=e,r=_f(a),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;if(e===kr){if(e=$y,t.substr($y,3)===Ef?(r=Ef,$y+=3):(r=kr,0===eg&&u(kf)),r===kr&&(t.substr($y,3)===wf?(r=wf,$y+=3):(r=kr,0===eg&&u(xf))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(40===t.charCodeAt($y)?(i=an,$y++):(i=kr,0===eg&&u(sn)),i!==kr){for(o=[],a=ur();a!==kr;)o.push(a),a=ur();if(o!==kr)if((a=pt())!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();s!==kr?(41===t.charCodeAt($y)?(l=pn,$y++):(l=kr,0===eg&&u(dn)),l!==kr?(Yy=e,r=Sf(a),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;if(e===kr){if(e=$y,t.substr($y,5)===Tf?(r=Tf,$y+=5):(r=kr,0===eg&&u(Af)),r===kr&&(t.substr($y,5)===If?(r=If,$y+=5):(r=kr,0===eg&&u(Cf))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr){if(i=$y,40===t.charCodeAt($y)?(o=an,$y++):(o=kr,0===eg&&u(sn)),o!==kr){for(a=[],s=ur();s!==kr;)a.push(s),s=ur();if(a!==kr)if((s=pt())!==kr){for(l=[],c=ur();c!==kr;)l.push(c),c=ur();l!==kr?(41===t.charCodeAt($y)?(c=pn,$y++):(c=kr,0===eg&&u(dn)),c!==kr?(o=[o,a,s,l,c],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr}else $y=i,i=kr;i===kr&&(i=sr()),i!==kr?(Yy=e,r=Rf(i),e=r):($y=e,e=kr)}else $y=e,e=kr}else $y=e,e=kr;if(e===kr){if(e=$y,t.substr($y,8)===Ff?(r=Ff,$y+=8):(r=kr,0===eg&&u(jf)),r===kr&&(t.substr($y,8)===Pf?(r=Pf,$y+=8):(r=kr,0===eg&&u(Nf))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();n!==kr?(i=Ae(),i!==kr?(Yy=e,r=Lf(i),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;if(e===kr){if(e=$y,t.substr($y,2)===Of?(r=Of,$y+=2):(r=kr,0===eg&&u(Qf)),r===kr&&(t.substr($y,2)===Df?(r=Df,$y+=2):(r=kr,0===eg&&u(Mf))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(40===t.charCodeAt($y)?(i=an,$y++):(i=kr,0===eg&&u(sn)),i!==kr){for(o=[],a=ur();a!==kr;)o.push(a),a=ur();if(o!==kr)if((a=pt())!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();if(s!==kr)if(44===t.charCodeAt($y)?(l=lu,$y++):(l=kr,0===eg&&u(cu)),l!==kr){for(c=[],f=ur();f!==kr;)c.push(f),f=ur();if(c!==kr)if((f=pt())!==kr){for(p=[],d=ur();d!==kr;)p.push(d),d=ur();if(p!==kr)if(44===t.charCodeAt($y)?(d=lu,$y++):(d=kr,0===eg&&u(cu)),d!==kr){for(h=[],v=ur();v!==kr;)h.push(v),v=ur();if(h!==kr)if((v=pt())!==kr){for(y=[],g=ur();g!==kr;)y.push(g),g=ur();y!==kr?(41===t.charCodeAt($y)?(g=pn,$y++):(g=kr,0===eg&&u(dn)),g!==kr?(Yy=e,r=Bf(a,f,v),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;if(e===kr){if(e=$y,t.substr($y,9)===Uf?(r=Uf,$y+=9):(r=kr,0===eg&&u(qf)),r===kr&&(t.substr($y,9)===Gf?(r=Gf,$y+=9):(r=kr,0===eg&&u(Hf)),r===kr&&(t.substr($y,9)===Vf?(r=Vf,$y+=9):(r=kr,0===eg&&u(Xf)))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(40===t.charCodeAt($y)?(i=an,$y++):(i=kr,0===eg&&u(sn)),i!==kr){for(o=[],a=ur();a!==kr;)o.push(a),a=ur();if(o!==kr)if((a=pt())!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();s!==kr?(41===t.charCodeAt($y)?(l=pn,$y++):(l=kr,0===eg&&u(dn)),l!==kr?(Yy=e,r=Wf(a),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;if(e===kr){if(e=$y,t.substr($y,7)===zf?(r=zf,$y+=7):(r=kr,0===eg&&u($f)),r===kr&&(t.substr($y,7)===Yf?(r=Yf,$y+=7):(r=kr,0===eg&&u(Jf)),r===kr&&(t.substr($y,7)===Kf?(r=Kf,$y+=7):(r=kr,0===eg&&u(Zf)))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(40===t.charCodeAt($y)?(i=an,$y++):(i=kr,0===eg&&u(sn)),i!==kr){for(o=[],a=ur();a!==kr;)o.push(a),a=ur();if(o!==kr)if((a=pt())!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();s!==kr?(41===t.charCodeAt($y)?(l=pn,$y++):(l=kr,0===eg&&u(dn)),l!==kr?(Yy=e,r=ep(a),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;if(e===kr){if(e=$y,t.substr($y,8)===tp?(r=tp,$y+=8):(r=kr,0===eg&&u(rp)),r===kr&&(t.substr($y,8)===np?(r=np,$y+=8):(r=kr,0===eg&&u(ip))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(40===t.charCodeAt($y)?(i=an,$y++):(i=kr,0===eg&&u(sn)),i!==kr){for(o=[],a=ur();a!==kr;)o.push(a),a=ur();if(o!==kr)if((a=pt())!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();if(s!==kr)if(44===t.charCodeAt($y)?(l=lu,$y++):(l=kr,0===eg&&u(cu)),l!==kr){for(c=[],f=ur();f!==kr;)c.push(f),f=ur();if(c!==kr)if((f=pt())!==kr){for(p=[],d=ur();d!==kr;)p.push(d),d=ur();p!==kr?(41===t.charCodeAt($y)?(d=pn,$y++):(d=kr,0===eg&&u(dn)),d!==kr?(Yy=e,r=op(a,f),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;if(e===kr){if(e=$y,t.substr($y,5)===ap?(r=ap,$y+=5):(r=kr,0===eg&&u(sp)),r===kr&&(t.substr($y,5)===up?(r=up,$y+=5):(r=kr,0===eg&&u(lp)),r===kr&&(t.substr($y,5)===cp?(r=cp,$y+=5):(r=kr,0===eg&&u(fp)),r===kr&&(t.substr($y,5)===pp?(r=pp,$y+=5):(r=kr,0===eg&&u(dp)),r===kr&&(t.substr($y,5)===hp?(r=hp,$y+=5):(r=kr,0===eg&&u(vp)),r===kr&&(t.substr($y,5)===yp?(r=yp,$y+=5):(r=kr,0===eg&&u(gp))))))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(40===t.charCodeAt($y)?(i=an,$y++):(i=kr,0===eg&&u(sn)),i!==kr){for(o=[],a=ur();a!==kr;)o.push(a),a=ur();if(o!==kr)if((a=pt())!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();s!==kr?(41===t.charCodeAt($y)?(l=pn,$y++):(l=kr,0===eg&&u(dn)),l!==kr?(Yy=e,r=bp(a),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;if(e===kr){if(e=$y,t.substr($y,7)===mp?(r=mp,$y+=7):(r=kr,0===eg&&u(_p)),r===kr&&(t.substr($y,7)===Ep?(r=Ep,$y+=7):(r=kr,0===eg&&u(kp))),r!==kr){if(n=[],wp.test(t.charAt($y))?(i=t.charAt($y),$y++):(i=kr,0===eg&&u(xp)),i!==kr)for(;i!==kr;)n.push(i),wp.test(t.charAt($y))?(i=t.charAt($y),$y++):(i=kr,0===eg&&u(xp));else n=kr;if(n!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();if(i!==kr)if(40===t.charCodeAt($y)?(o=an,$y++):(o=kr,0===eg&&u(sn)),o!==kr){for(a=[],s=$y,l=[],c=ur();c!==kr;)l.push(c),c=ur();for(l!==kr?(c=pt(),c!==kr?(44===t.charCodeAt($y)?(f=lu,$y++):(f=kr,0===eg&&u(cu)),f!==kr?(l=[l,c,f],s=l):($y=s,s=kr)):($y=s,s=kr)):($y=s,s=kr);s!==kr;){for(a.push(s),s=$y,l=[],c=ur();c!==kr;)l.push(c),c=ur();l!==kr?(c=pt(),c!==kr?(44===t.charCodeAt($y)?(f=lu,$y++):(f=kr,0===eg&&u(cu)),f!==kr?(l=[l,c,f],s=l):($y=s,s=kr)):($y=s,s=kr)):($y=s,s=kr)}if(a!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();if(s!==kr)if((l=pt())!==kr){for(c=[],f=ur();f!==kr;)c.push(f),f=ur();c!==kr?(41===t.charCodeAt($y)?(f=pn,$y++):(f=kr,0===eg&&u(dn)),f!==kr?(Yy=e,r=Sp(n,a,l),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr}else $y=e,e=kr;e===kr&&(e=xt())===kr&&(e=St())===kr&&(e=Tt())}}}}}}}}}}}}}}return eg--,e===kr&&(r=kr,0===eg&&u(Gc)),e}function xt(){var e,r,n,i,o,a,s,l,c,f,p,d,h,v,y;if(eg++,e=$y,t.substr($y,5)===Ap?(r=Ap,$y+=5):(r=kr,0===eg&&u(Ip)),r===kr&&(t.substr($y,5)===Cp?(r=Cp,$y+=5):(r=kr,0===eg&&u(Rp))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(40===t.charCodeAt($y)?(i=an,$y++):(i=kr,0===eg&&u(sn)),i!==kr){for(o=[],a=ur();a!==kr;)o.push(a),a=ur();if(o!==kr)if((a=pt())!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();if(s!==kr)if(44===t.charCodeAt($y)?(l=lu,$y++):(l=kr,0===eg&&u(cu)),l!==kr){for(c=[],f=ur();f!==kr;)c.push(f),f=ur();if(c!==kr)if((f=pt())!==kr){for(p=[],d=ur();d!==kr;)p.push(d),d=ur();if(p!==kr){if(d=$y,44===t.charCodeAt($y)?(h=lu,$y++):(h=kr,0===eg&&u(cu)),h!==kr){for(v=[],y=ur();y!==kr;)v.push(y),y=ur();v!==kr?(y=pt(),y!==kr?(h=[h,v,y],d=h):($y=d,d=kr)):($y=d,d=kr)}else $y=d,d=kr;if(d===kr&&(d=null),d!==kr){for(h=[],v=ur();v!==kr;)h.push(v),v=ur();h!==kr?(41===t.charCodeAt($y)?(v=pn,$y++):(v=kr,0===eg&&u(dn)),v!==kr?(Yy=e,r=Fp(a,f,d),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr}else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Tp)),e}function St(){var e,r,n,i;if(eg++,e=$y,t.substr($y,6)===Pp?(r=Pp,$y+=6):(r=kr,0===eg&&u(Np)),r===kr&&(t.substr($y,6)===Lp?(r=Lp,$y+=6):(r=kr,0===eg&&u(Op))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();n!==kr?(i=ue(),i!==kr?(Yy=e,r=Qp(i),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(jp)),e}function Tt(){var e,r,n,i,o,a;if(eg++,e=$y,t.substr($y,3)===Mp?(r=Mp,$y+=3):(r=kr,0===eg&&u(Bp)),r===kr&&(t.substr($y,3)===Up?(r=Up,$y+=3):(r=kr,0===eg&&u(qp))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(t.substr($y,6)===Pp?(i=Pp,$y+=6):(i=kr,0===eg&&u(Np)),i===kr&&(t.substr($y,6)===Lp?(i=Lp,$y+=6):(i=kr,0===eg&&u(Op))),i!==kr){for(o=[],a=ur();a!==kr;)o.push(a),a=ur();o!==kr?(a=ue(),a!==kr?(Yy=e,r=Gp(a),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Dp)),e}function At(){var e,r,n,i,o,a,s,l,c,f,p,d,h,v,y,g,b,m;if(eg++,e=$y,t.substr($y,5)===Vp?(r=Vp,$y+=5):(r=kr,0===eg&&u(Xp)),r===kr&&(t.substr($y,5)===Wp?(r=Wp,$y+=5):(r=kr,0===eg&&u(zp))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(40===t.charCodeAt($y)?(i=an,$y++):(i=kr,0===eg&&u(sn)),i!==kr){for(o=[],a=ur();a!==kr;)o.push(a),a=ur();if(o!==kr)if(t.substr($y,8)===Jr?(a=Jr,$y+=8):(a=kr,0===eg&&u(Kr)),a===kr&&(t.substr($y,8)===Zr?(a=Zr,$y+=8):(a=kr,0===eg&&u(en))),a===kr&&(a=null),a!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();if(s!==kr)if(42===t.charCodeAt($y)?(l=hn,$y++):(l=kr,0===eg&&u(vn)),l===kr&&(l=pt()),l!==kr){for(c=[],f=ur();f!==kr;)c.push(f),f=ur();if(c!==kr)if(41===t.charCodeAt($y)?(f=pn,$y++):(f=kr,0===eg&&u(dn)),f!==kr){for(p=[],d=ur();d!==kr;)p.push(d),d=ur();p!==kr?(Yy=e,r=$p(a,l),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;if(e===kr){if(e=$y,t.substr($y,12)===Yp?(r=Yp,$y+=12):(r=kr,0===eg&&u(Jp)),r===kr&&(t.substr($y,12)===Kp?(r=Kp,$y+=12):(r=kr,0===eg&&u(Zp))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(40===t.charCodeAt($y)?(i=an,$y++):(i=kr,0===eg&&u(sn)),i!==kr){for(o=[],a=ur();a!==kr;)o.push(a),a=ur();if(o!==kr)if(t.substr($y,8)===Jr?(a=Jr,$y+=8):(a=kr,0===eg&&u(Kr)),a===kr&&(t.substr($y,8)===Zr?(a=Zr,$y+=8):(a=kr,0===eg&&u(en))),a===kr&&(a=null),a!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();if(s!==kr)if((l=pt())!==kr){if(c=$y,59===t.charCodeAt($y)?(f=go,$y++):(f=kr,0===eg&&u(bo)),f!==kr){for(p=[],d=ur();d!==kr;)p.push(d),d=ur();if(p!==kr)if(t.substr($y,9)===ed?(d=ed,$y+=9):(d=kr,0===eg&&u(td)),d!==kr){for(h=[],v=ur();v!==kr;)h.push(v),v=ur();if(h!==kr)if(61===t.charCodeAt($y)?(v=Yl,$y++):(v=kr,0===eg&&u(Jl)),v!==kr){for(y=[],g=ur();g!==kr;)y.push(g),g=ur();if(y!==kr)if((g=Lt())!==kr){for(b=[],m=ur();m!==kr;)b.push(m),m=ur();b!==kr?(f=[f,p,d,h,v,y,g,b],c=f):($y=c,c=kr)}else $y=c,c=kr;else $y=c,c=kr}else $y=c,c=kr;else $y=c,c=kr}else $y=c,c=kr;else $y=c,c=kr}else $y=c,c=kr;if(c===kr&&(c=null),c!==kr)if(41===t.charCodeAt($y)?(f=pn,$y++):(f=kr,0===eg&&u(dn)),f!==kr){for(p=[],d=ur();d!==kr;)p.push(d),d=ur();p!==kr?(Yy=e,r=rd(a,l,c),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;if(e===kr){if(e=$y,t.substr($y,3)===nd?(r=nd,$y+=3):(r=kr,0===eg&&u(id)),r===kr&&(t.substr($y,3)===od?(r=od,$y+=3):(r=kr,0===eg&&u(ad))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(40===t.charCodeAt($y)?(i=an,$y++):(i=kr,0===eg&&u(sn)),i!==kr){for(o=[],a=ur();a!==kr;)o.push(a),a=ur();if(o!==kr)if(t.substr($y,8)===Jr?(a=Jr,$y+=8):(a=kr,0===eg&&u(Kr)),a===kr&&(t.substr($y,8)===Zr?(a=Zr,$y+=8):(a=kr,0===eg&&u(en))),a===kr&&(a=null),a!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();if(s!==kr)if((l=pt())!==kr){for(c=[],f=ur();f!==kr;)c.push(f),f=ur();if(c!==kr)if(41===t.charCodeAt($y)?(f=pn,$y++):(f=kr,0===eg&&u(dn)),f!==kr){for(p=[],d=ur();d!==kr;)p.push(d),d=ur();p!==kr?(Yy=e,r=sd(a,l),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;if(e===kr){if(e=$y,t.substr($y,3)===ud?(r=ud,$y+=3):(r=kr,0===eg&&u(ld)),r===kr&&(t.substr($y,3)===cd?(r=cd,$y+=3):(r=kr,0===eg&&u(fd))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(40===t.charCodeAt($y)?(i=an,$y++):(i=kr,0===eg&&u(sn)),i!==kr){for(o=[],a=ur();a!==kr;)o.push(a),a=ur();if(o!==kr)if(t.substr($y,8)===Jr?(a=Jr,$y+=8):(a=kr,0===eg&&u(Kr)),a===kr&&(t.substr($y,8)===Zr?(a=Zr,$y+=8):(a=kr,0===eg&&u(en))),a===kr&&(a=null),a!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();if(s!==kr)if((l=pt())!==kr){for(c=[],f=ur();f!==kr;)c.push(f),f=ur();if(c!==kr)if(41===t.charCodeAt($y)?(f=pn,$y++):(f=kr,0===eg&&u(dn)),f!==kr){for(p=[],d=ur();d!==kr;)p.push(d),d=ur();p!==kr?(Yy=e,r=pd(a,l),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;if(e===kr){if(e=$y,t.substr($y,3)===dd?(r=dd,$y+=3):(r=kr,0===eg&&u(hd)),r===kr&&(t.substr($y,3)===vd?(r=vd,$y+=3):(r=kr,0===eg&&u(yd))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(40===t.charCodeAt($y)?(i=an,$y++):(i=kr,0===eg&&u(sn)),i!==kr){for(o=[],a=ur();a!==kr;)o.push(a),a=ur();if(o!==kr)if(t.substr($y,8)===Jr?(a=Jr,$y+=8):(a=kr,0===eg&&u(Kr)),a===kr&&(t.substr($y,8)===Zr?(a=Zr,$y+=8):(a=kr,0===eg&&u(en))),a===kr&&(a=null),a!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();if(s!==kr)if((l=pt())!==kr){for(c=[],f=ur();f!==kr;)c.push(f),f=ur();if(c!==kr)if(41===t.charCodeAt($y)?(f=pn,$y++):(f=kr,0===eg&&u(dn)),f!==kr){for(p=[],d=ur();d!==kr;)p.push(d),d=ur();p!==kr?(Yy=e,r=gd(a,l),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;if(e===kr)if(e=$y,t.substr($y,3)===bd?(r=bd,$y+=3):(r=kr,0===eg&&u(md)),r===kr&&(t.substr($y,3)===_d?(r=_d,$y+=3):(r=kr,0===eg&&u(Ed))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(40===t.charCodeAt($y)?(i=an,$y++):(i=kr,0===eg&&u(sn)),i!==kr){for(o=[],a=ur();a!==kr;)o.push(a),a=ur();if(o!==kr)if(t.substr($y,8)===Jr?(a=Jr,$y+=8):(a=kr,0===eg&&u(Kr)),a===kr&&(t.substr($y,8)===Zr?(a=Zr,$y+=8):(a=kr,0===eg&&u(en))),a===kr&&(a=null),a!==kr){for(s=[],l=ur();l!==kr;)s.push(l),l=ur();if(s!==kr)if((l=pt())!==kr){for(c=[],f=ur();f!==kr;)c.push(f),f=ur();if(c!==kr)if(41===t.charCodeAt($y)?(f=pn,$y++):(f=kr,0===eg&&u(dn)),f!==kr){for(p=[],d=ur();d!==kr;)p.push(d),d=ur();p!==kr?(Yy=e,r=kd(a,l),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr}}}}return eg--,e===kr&&(r=kr,0===eg&&u(Hp)),e}function It(){var e,t,r,n;if(eg++,e=$y,(t=Ot())!==kr){for(r=[],n=ur();n!==kr;)r.push(n),n=ur();r!==kr?(n=Te(),n===kr&&(n=null),n!==kr?(Yy=e,t=xd(t,n),e=t):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(t=kr,0===eg&&u(wd)),e}function Ct(){var e,r,n,i,o;return eg++,e=$y,r=Lt(),r!==kr?(n=Vt(),n===kr&&(n=$y,t.substr($y,2)===Td?(i=Td,$y+=2):(i=kr,0===eg&&u(Ad)),i!==kr?(o=Ot(),o!==kr?(i=[i,o],n=i):($y=n,n=kr)):($y=n,n=kr)),n===kr&&(n=null),n!==kr?(Yy=e,r=Id(r,n),e=r):($y=e,e=kr)):($y=e,e=kr),eg--,e===kr&&(r=kr,0===eg&&u(Sd)),e}function Rt(){var e;return eg++,e=Ft(),e===kr&&(e=jt())===kr&&(e=Pt()),eg--,e===kr&&(kr,0===eg&&u(Cd)),e}function Ft(){var e;return eg++,e=zt(),e===kr&&(e=Wt())===kr&&(e=Xt()),eg--,e===kr&&(kr,0===eg&&u(Rd)),e}function jt(){var e;return eg++,e=Jt(),e===kr&&(e=Yt())===kr&&(e=$t()),eg--,e===kr&&(kr,0===eg&&u(Fd)),e}function Pt(){var e;return eg++,e=er(),e===kr&&(e=Zt())===kr&&(e=Kt()),eg--,e===kr&&(kr,0===eg&&u(jd)),e}function Nt(){var e,r;return eg++,e=$y,t.substr($y,4)===Nd?(r=Nd,$y+=4):(r=kr,0===eg&&u(Ld)),r===kr&&(t.substr($y,4)===Od?(r=Od,$y+=4):(r=kr,0===eg&&u(Qd))),r!==kr&&(Yy=e,r=Dd()),e=r,e===kr&&(e=$y,t.substr($y,5)===Md?(r=Md,$y+=5):(r=kr,0===eg&&u(Bd)),r===kr&&(t.substr($y,5)===Ud?(r=Ud,$y+=5):(r=kr,0===eg&&u(qd))),r!==kr&&(Yy=e,r=Gd()),e=r),eg--,e===kr&&(r=kr,0===eg&&u(Pd)),e}function Lt(){var e,t;return eg++,e=$y,t=ir(),t!==kr&&(Yy=e,t=Vd(t)),e=t,e===kr&&(e=$y,t=or(),t!==kr&&(Yy=e,t=Vd(t)),(e=t)===kr&&(e=$y,t=rr(),t!==kr&&(Yy=e,t=Vd(t)),(e=t)===kr&&(e=$y,t=nr(),t!==kr&&(Yy=e,t=Vd(t)),e=t))),eg--,e===kr&&(t=kr,0===eg&&u(Hd)),e}function Ot(){var e,t;return eg++,e=$y,t=Mt(),t!==kr&&(Yy=e,t=Wd(t)),e=t,e===kr&&(e=$y,t=Qt(),t!==kr&&(Yy=e,t=zd(t)),e=t),eg--,e===kr&&(t=kr,0===eg&&u(Xd)),e}function Qt(){var e,t;return eg++,e=$y,t=Ut(),t!==kr&&(Yy=e,t=Yd(t)),e=t,e===kr&&(e=$y,t=Bt(),t!==kr&&(Yy=e,t=Jd(t)),e=t),eg--,e===kr&&(t=kr,0===eg&&u($d)),e}function Dt(){var e,t;return eg++,e=$y,t=qt(),t!==kr&&(Yy=e,t=Zd(t)),e=t,e===kr&&(e=$y,t=cr(),t!==kr&&(Yy=e,t=eh()),e=t),eg--,e===kr&&(t=kr,0===eg&&u(Kd)),e}function Mt(){var e,r,n,i;if(eg++,e=$y,60===t.charCodeAt($y)?(r=ec,$y++):(r=kr,0===eg&&u(tc)),r!==kr){for(n=[],rh.test(t.charAt($y))?(i=t.charAt($y),$y++):(i=kr,0===eg&&u(nh));i!==kr;)n.push(i),rh.test(t.charAt($y))?(i=t.charAt($y),$y++):(i=kr,0===eg&&u(nh));n!==kr?(62===t.charCodeAt($y)?(i=rc,$y++):(i=kr,0===eg&&u(nc)),i!==kr?(Yy=e,r=ih(n),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(th)),e}function Bt(){var e,r,n;return eg++,e=$y,r=vr(),r===kr&&(r=null),r!==kr?(58===t.charCodeAt($y)?(n=ah,$y++):(n=kr,0===eg&&u(sh)),n!==kr?(Yy=e,r=zd(r),e=r):($y=e,e=kr)):($y=e,e=kr),eg--,e===kr&&(r=kr,0===eg&&u(oh)),e}function Ut(){var e,t,r;return eg++,e=$y,t=Bt(),t!==kr?(r=yr(),r!==kr?(Yy=e,t=lh(t,r),e=t):($y=e,e=kr)):($y=e,e=kr),eg--,e===kr&&(t=kr,0===eg&&u(uh)),e}function qt(){var e,r,n;return eg++,e=$y,t.substr($y,2)===fh?(r=fh,$y+=2):(r=kr,0===eg&&u(ph)),r!==kr?(n=yr(),n!==kr?(Yy=e,r=dh(n),e=r):($y=e,e=kr)):($y=e,e=kr),eg--,e===kr&&(r=kr,0===eg&&u(ch)),e}function Gt(){var e,r,n;return eg++,e=$y,63===t.charCodeAt($y)?(r=sl,$y++):(r=kr,0===eg&&u(ul)),r!==kr?(n=dr(),n!==kr?(Yy=e,r=vh(n),e=r):($y=e,e=kr)):($y=e,e=kr),eg--,e===kr&&(r=kr,0===eg&&u(hh)),e}function Ht(){var e,r,n;return eg++,e=$y,36===t.charCodeAt($y)?(r=gh,$y++):(r=kr,0===eg&&u(bh)),r!==kr?(n=dr(),n!==kr?(Yy=e,r=vh(n),e=r):($y=e,e=kr)):($y=e,e=kr),eg--,e===kr&&(r=kr,0===eg&&u(yh)),e}function Vt(){var e,r,n,i,o,a,s,l;if(eg++,e=$y,64===t.charCodeAt($y)?(r=_h,$y++):(r=kr,0===eg&&u(Eh)),r!==kr){if(n=[],kh.test(t.charAt($y))?(i=t.charAt($y),$y++):(i=kr,0===eg&&u(wh)),i!==kr)for(;i!==kr;)n.push(i),kh.test(t.charAt($y))?(i=t.charAt($y),$y++):(i=kr,0===eg&&u(wh));else n=kr;if(n!==kr){if(i=[],o=$y,45===t.charCodeAt($y)?(a=Ac,$y++):(a=kr,0===eg&&u(Ic)),a!==kr){if(s=[],xh.test(t.charAt($y))?(l=t.charAt($y),$y++):(l=kr,0===eg&&u(Sh)),l!==kr)for(;l!==kr;)s.push(l),xh.test(t.charAt($y))?(l=t.charAt($y),$y++):(l=kr,0===eg&&u(Sh));else s=kr;s!==kr?(a=[a,s],o=a):($y=o,o=kr)}else $y=o,o=kr;for(;o!==kr;)if(i.push(o),o=$y,45===t.charCodeAt($y)?(a=Ac,$y++):(a=kr,0===eg&&u(Ic)),a!==kr){if(s=[],xh.test(t.charAt($y))?(l=t.charAt($y),$y++):(l=kr,0===eg&&u(Sh)),l!==kr)for(;l!==kr;)s.push(l),xh.test(t.charAt($y))?(l=t.charAt($y),$y++):(l=kr,0===eg&&u(Sh));else s=kr;s!==kr?(a=[a,s],o=a):($y=o,o=kr)}else $y=o,o=kr;i!==kr?(Yy=e,r=Th(n,i),e=r):($y=e,e=kr)}else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(mh)),e}function Xt(){var e,r,n;if(eg++,e=$y,r=[],Ih.test(t.charAt($y))?(n=t.charAt($y),$y++):(n=kr,0===eg&&u(Ch)),n!==kr)for(;n!==kr;)r.push(n),Ih.test(t.charAt($y))?(n=t.charAt($y),$y++):(n=kr,0===eg&&u(Ch));else r=kr;return r!==kr&&(Yy=e,r=Rh(r)),e=r,eg--,e===kr&&(r=kr,0===eg&&u(Ah)),e}function Wt(){var e,r,n,i,o;if(eg++,e=$y,r=[],Ih.test(t.charAt($y))?(n=t.charAt($y),$y++):(n=kr,0===eg&&u(Ch)),n!==kr)for(;n!==kr;)r.push(n),Ih.test(t.charAt($y))?(n=t.charAt($y),$y++):(n=kr,0===eg&&u(Ch));else r=kr;if(r!==kr)if(46===t.charCodeAt($y)?(n=es,$y++):(n=kr,0===eg&&u(ts)),n!==kr){for(i=[],Ih.test(t.charAt($y))?(o=t.charAt($y),$y++):(o=kr,0===eg&&u(Ch));o!==kr;)i.push(o),Ih.test(t.charAt($y))?(o=t.charAt($y),$y++):(o=kr,0===eg&&u(Ch));i!==kr?(Yy=e,r=jh(r,n,i),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr;if(e===kr)if(e=$y,46===t.charCodeAt($y)?(r=es,$y++):(r=kr,0===eg&&u(ts)),r!==kr){if(n=[],Ih.test(t.charAt($y))?(i=t.charAt($y),$y++):(i=kr,0===eg&&u(Ch)),i!==kr)for(;i!==kr;)n.push(i),Ih.test(t.charAt($y))?(i=t.charAt($y),$y++):(i=kr,0===eg&&u(Ch));else n=kr;n!==kr?(Yy=e,r=Ph(r,n),e=r):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Fh)),e}function zt(){var e,r,n,i,o;if(eg++,e=$y,r=[],Ih.test(t.charAt($y))?(n=t.charAt($y),$y++):(n=kr,0===eg&&u(Ch)),n!==kr)for(;n!==kr;)r.push(n),Ih.test(t.charAt($y))?(n=t.charAt($y),$y++):(n=kr,0===eg&&u(Ch));else r=kr;if(r!==kr)if(46===t.charCodeAt($y)?(n=es,$y++):(n=kr,0===eg&&u(ts)),n!==kr){for(i=[],Ih.test(t.charAt($y))?(o=t.charAt($y),$y++):(o=kr,0===eg&&u(Ch));o!==kr;)i.push(o),Ih.test(t.charAt($y))?(o=t.charAt($y),$y++):(o=kr,0===eg&&u(Ch));i!==kr?(o=tr(),o!==kr?(Yy=e,r=Lh(r,n,i,o),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr;if(e===kr){if(e=$y,46===t.charCodeAt($y)?(r=es,$y++):(r=kr,0===eg&&u(ts)),r!==kr){if(n=[],Ih.test(t.charAt($y))?(i=t.charAt($y),$y++):(i=kr,0===eg&&u(Ch)),i!==kr)for(;i!==kr;)n.push(i),Ih.test(t.charAt($y))?(i=t.charAt($y),$y++):(i=kr,0===eg&&u(Ch));else n=kr;n!==kr?(i=tr(),i!==kr?(Yy=e,r=Oh(r,n,i),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;if(e===kr){if(e=$y,r=[],Ih.test(t.charAt($y))?(n=t.charAt($y),$y++):(n=kr,0===eg&&u(Ch)),n!==kr)for(;n!==kr;)r.push(n),Ih.test(t.charAt($y))?(n=t.charAt($y),$y++):(n=kr,0===eg&&u(Ch));else r=kr;r!==kr?(n=tr(),n!==kr?(Yy=e,r=Qh(r,n),e=r):($y=e,e=kr)):($y=e,e=kr)}}return eg--,e===kr&&(r=kr,0===eg&&u(Nh)),e}function $t(){var e,r,n;return eg++,e=$y,43===t.charCodeAt($y)?(r=ll,$y++):(r=kr,0===eg&&u(cl)),r!==kr?(n=Xt(),n!==kr?(Yy=e,r=Mh(n),e=r):($y=e,e=kr)):($y=e,e=kr),eg--,e===kr&&(r=kr,0===eg&&u(Dh)),e}function Yt(){var e,r,n;return eg++,e=$y,43===t.charCodeAt($y)?(r=ll,$y++):(r=kr,0===eg&&u(cl)),r!==kr?(n=Wt(),n!==kr?(Yy=e,r=Uh(n),e=r):($y=e,e=kr)):($y=e,e=kr),eg--,e===kr&&(r=kr,0===eg&&u(Bh)),e}function Jt(){var e,r,n;return eg++,e=$y,43===t.charCodeAt($y)?(r=ll,$y++):(r=kr,0===eg&&u(cl)),r!==kr?(n=zt(),n!==kr?(Yy=e,r=Uh(n),e=r):($y=e,e=kr)):($y=e,e=kr),eg--,e===kr&&(r=kr,0===eg&&u(qh)),e}function Kt(){var e,r,n;return eg++,e=$y,45===t.charCodeAt($y)?(r=Ac,$y++):(r=kr,0===eg&&u(Ic)),r!==kr?(n=Xt(),n!==kr?(Yy=e,r=Hh(n),e=r):($y=e,e=kr)):($y=e,e=kr),eg--,e===kr&&(r=kr,0===eg&&u(Gh)),e}function Zt(){var e,r,n;return eg++,e=$y,45===t.charCodeAt($y)?(r=Ac,$y++):(r=kr,0===eg&&u(Ic)),r!==kr?(n=Wt(),n!==kr?(Yy=e,r=Hh(n),e=r):($y=e,e=kr)):($y=e,e=kr),eg--,e===kr&&(r=kr,0===eg&&u(Vh)),e}function er(){var e,r,n;return eg++,e=$y,45===t.charCodeAt($y)?(r=Ac,$y++):(r=kr,0===eg&&u(Ic)),r!==kr?(n=zt(),n!==kr?(Yy=e,r=Hh(n),e=r):($y=e,e=kr)):($y=e,e=kr),eg--,e===kr&&(r=kr,0===eg&&u(Xh)),e}function tr(){var e,r,n,i,o;if(eg++,e=$y,zh.test(t.charAt($y))?(r=t.charAt($y),$y++):(r=kr,0===eg&&u($h)),r!==kr)if(Yh.test(t.charAt($y))?(n=t.charAt($y),$y++):(n=kr,0===eg&&u(Jh)),n===kr&&(n=null),n!==kr){if(i=[],Ih.test(t.charAt($y))?(o=t.charAt($y),$y++):(o=kr,0===eg&&u(Ch)),o!==kr)for(;o!==kr;)i.push(o),Ih.test(t.charAt($y))?(o=t.charAt($y),$y++):(o=kr,0===eg&&u(Ch));else i=kr;i!==kr?(Yy=e,r=Kh(r,n,i),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Wh)),e}function rr(){var e,r,n,i;if(eg++,e=$y,39===t.charCodeAt($y)?(r=ev,$y++):(r=kr,0===eg&&u(tv)),r!==kr){for(n=[],rv.test(t.charAt($y))?(i=t.charAt($y),$y++):(i=kr,0===eg&&u(nv)),i===kr&&(i=ar());i!==kr;)n.push(i),rv.test(t.charAt($y))?(i=t.charAt($y),$y++):(i=kr,0===eg&&u(nv)),i===kr&&(i=ar());n!==kr?(39===t.charCodeAt($y)?(i=ev,$y++):(i=kr,0===eg&&u(tv)),i!==kr?(Yy=e,r=iv(n),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Zh)),e}function nr(){var e,r,n,i;if(eg++,e=$y,34===t.charCodeAt($y)?(r=av,$y++):(r=kr,0===eg&&u(sv)),r!==kr){for(n=[],uv.test(t.charAt($y))?(i=t.charAt($y),$y++):(i=kr,0===eg&&u(lv)),i===kr&&(i=ar());i!==kr;)n.push(i),uv.test(t.charAt($y))?(i=t.charAt($y),$y++):(i=kr,0===eg&&u(lv)),i===kr&&(i=ar());n!==kr?(34===t.charCodeAt($y)?(i=av,$y++):(i=kr,0===eg&&u(sv)),i!==kr?(Yy=e,r=iv(n),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(ov)),e}function ir(){var e,r,n,i;if(eg++,e=$y,t.substr($y,3)===fv?(r=fv,$y+=3):(r=kr,0===eg&&u(pv)),r!==kr){for(n=[],dv.test(t.charAt($y))?(i=t.charAt($y),$y++):(i=kr,0===eg&&u(hv)),i===kr&&(i=ar());i!==kr;)n.push(i),dv.test(t.charAt($y))?(i=t.charAt($y),$y++):(i=kr,0===eg&&u(hv)),i===kr&&(i=ar());n!==kr?(t.substr($y,3)===fv?(i=fv,$y+=3):(i=kr,0===eg&&u(pv)),i!==kr?(Yy=e,r=iv(n),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(cv)),e}function or(){var e,r,n,i;if(eg++,e=$y,t.substr($y,3)===yv?(r=yv,$y+=3):(r=kr,0===eg&&u(gv)),r!==kr){for(n=[],bv.test(t.charAt($y))?(i=t.charAt($y),$y++):(i=kr,0===eg&&u(mv)),i===kr&&(i=ar());i!==kr;)n.push(i),bv.test(t.charAt($y))?(i=t.charAt($y),$y++):(i=kr,0===eg&&u(mv)),i===kr&&(i=ar());n!==kr?(t.substr($y,3)===yv?(i=yv,$y+=3):(i=kr,0===eg&&u(gv)),i!==kr?(Yy=e,r=iv(n),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(vv)),e}function ar(){var e,r,n;return eg++,e=$y,92===t.charCodeAt($y)?(r=Ev,$y++):(r=kr,0===eg&&u(kv)),r!==kr?(wv.test(t.charAt($y))?(n=t.charAt($y),$y++):(n=kr,0===eg&&u(xv)),n!==kr?(r=[r,n],e=r):($y=e,e=kr)):($y=e,e=kr),eg--,e===kr&&(r=kr,0===eg&&u(_v)),e}function sr(){var e,r,n,i;if(eg++,e=$y,40===t.charCodeAt($y)?(r=an,$y++):(r=kr,0===eg&&u(sn)),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();n!==kr?(41===t.charCodeAt($y)?(i=pn,$y++):(i=kr,0===eg&&u(dn)),i!==kr?(Yy=e,r=Tv(),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Sv)),e}function ur(){var e;return eg++,Iv.test(t.charAt($y))?(e=t.charAt($y),$y++):(e=kr,0===eg&&u(Cv)),e===kr&&(Rv.test(t.charAt($y))?(e=t.charAt($y),$y++):(e=kr,0===eg&&u(Fv)),e===kr&&(jv.test(t.charAt($y))?(e=t.charAt($y),$y++):(e=kr,0===eg&&u(Pv)),e===kr&&(Nv.test(t.charAt($y))?(e=t.charAt($y),$y++):(e=kr,0===eg&&u(Lv)),e===kr&&(e=lr())))),eg--,e===kr&&(kr,0===eg&&u(Av)),e}function lr(){var e,r,n,i;if(eg++,e=$y,35===t.charCodeAt($y)?(r=Qv,$y++):(r=kr,0===eg&&u(Dv)),r!==kr){for(n=[],Mv.test(t.charAt($y))?(i=t.charAt($y),$y++):(i=kr,0===eg&&u(Bv));i!==kr;)n.push(i),Mv.test(t.charAt($y))?(i=t.charAt($y),$y++):(i=kr,0===eg&&u(Bv));n!==kr?(r=[r,n],e=r):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Ov)),e}function cr(){var e,r,n,i;if(eg++,e=$y,91===t.charCodeAt($y)?(r=El,$y++):(r=kr,0===eg&&u(kl)),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();n!==kr?(93===t.charCodeAt($y)?(i=wl,$y++):(i=kr,0===eg&&u(xl)),i!==kr?(r=[r,n,i],e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Uv)),e}function fr(){var e;return eg++,Gv.test(t.charAt($y))?(e=t.charAt($y),$y++):(e=kr,0===eg&&u(Hv)),e===kr&&(Vv.test(t.charAt($y))?(e=t.charAt($y),$y++):(e=kr,0===eg&&u(Xv)),e===kr&&(Wv.test(t.charAt($y))?(e=t.charAt($y),$y++):(e=kr,0===eg&&u(zv)),e===kr&&($v.test(t.charAt($y))?(e=t.charAt($y),$y++):(e=kr,0===eg&&u(Yv)),e===kr&&(Jv.test(t.charAt($y))?(e=t.charAt($y),$y++):(e=kr,0===eg&&u(Kv)),e===kr&&(Zv.test(t.charAt($y))?(e=t.charAt($y),$y++):(e=kr,0===eg&&u(ey)),e===kr&&(ty.test(t.charAt($y))?(e=t.charAt($y),$y++):(e=kr,0===eg&&u(ry)),e===kr&&(ny.test(t.charAt($y))?(e=t.charAt($y),$y++):(e=kr,0===eg&&u(iy)),e===kr&&(oy.test(t.charAt($y))?(e=t.charAt($y),$y++):(e=kr,0===eg&&u(ay)),e===kr&&(sy.test(t.charAt($y))?(e=t.charAt($y),$y++):(e=kr,0===eg&&u(uy)),e===kr&&(ly.test(t.charAt($y))?(e=t.charAt($y),$y++):(e=kr,0===eg&&u(cy)),e===kr&&(fy.test(t.charAt($y))?(e=t.charAt($y),$y++):(e=kr,0===eg&&u(py)),e===kr&&(dy.test(t.charAt($y))?(e=t.charAt($y),$y++):(e=kr,0===eg&&u(hy)),e===kr&&(vy.test(t.charAt($y))?(e=t.charAt($y),$y++):(e=kr,0===eg&&u(yy))))))))))))))),eg--,e===kr&&(kr,0===eg&&u(qv)),e}function pr(){var e;return eg++,e=fr(),e===kr&&(95===t.charCodeAt($y)?(e=by,$y++):(e=kr,0===eg&&u(my))),eg--,e===kr&&(kr,0===eg&&u(gy)),e}function dr(){var e,r,n,i;if(eg++,e=$y,r=pr(),r===kr&&(Ih.test(t.charAt($y))?(r=t.charAt($y),$y++):(r=kr,0===eg&&u(Ch))),r!==kr){for(n=[],i=pr(),i===kr&&(Ih.test(t.charAt($y))?(i=t.charAt($y),$y++):(i=kr,0===eg&&u(Ch)),i===kr&&(Ey.test(t.charAt($y))?(i=t.charAt($y),$y++):(i=kr,0===eg&&u(ky)),i===kr&&(wy.test(t.charAt($y))?(i=t.charAt($y),$y++):(i=kr,0===eg&&u(xy)),i===kr&&(Sy.test(t.charAt($y))?(i=t.charAt($y),$y++):(i=kr,0===eg&&u(Ty))))));i!==kr;)n.push(i),(i=pr())===kr&&(Ih.test(t.charAt($y))?(i=t.charAt($y),$y++):(i=kr,0===eg&&u(Ch)),i===kr&&(Ey.test(t.charAt($y))?(i=t.charAt($y),$y++):(i=kr,0===eg&&u(ky)),i===kr&&(wy.test(t.charAt($y))?(i=t.charAt($y),$y++):(i=kr,0===eg&&u(xy)),i===kr&&(Sy.test(t.charAt($y))?(i=t.charAt($y),$y++):(i=kr,0===eg&&u(Ty))))));n!==kr?(Yy=e,r=Ay(r,n),e=r):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(_y)),e}function hr(){var e;return eg++,e=pr(),e===kr&&(45===t.charCodeAt($y)?(e=Ac,$y++):(e=kr,0===eg&&u(Ic)),e===kr&&(Ih.test(t.charAt($y))?(e=t.charAt($y),$y++):(e=kr,0===eg&&u(Ch)),e===kr&&(Ey.test(t.charAt($y))?(e=t.charAt($y),$y++):(e=kr,0===eg&&u(ky)),e===kr&&(wy.test(t.charAt($y))?(e=t.charAt($y),$y++):(e=kr,0===eg&&u(xy)),e===kr&&(Sy.test(t.charAt($y))?(e=t.charAt($y),$y++):(e=kr,0===eg&&u(Ty))))))),eg--,e===kr&&(kr,0===eg&&u(Iy)),e}function vr(){var e,r,n,i;if(eg++,e=$y,(r=fr())!==kr){for(n=[],i=hr(),i===kr&&(46===t.charCodeAt($y)?(i=es,$y++):(i=kr,0===eg&&u(ts)));i!==kr;)n.push(i),(i=hr())===kr&&(46===t.charCodeAt($y)?(i=es,$y++):(i=kr,0===eg&&u(ts)));n!==kr?(Yy=e,r=Ry(r,n),e=r):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Cy)),e}function yr(){var e,r,n,i;if(eg++,e=$y,r=pr(),r===kr&&(Ih.test(t.charAt($y))?(r=t.charAt($y),$y++):(r=kr,0===eg&&u(Ch)),r===kr&&(58===t.charCodeAt($y)?(r=ah,$y++):(r=kr,0===eg&&u(sh)),r===kr&&(r=gr()))),r!==kr){for(n=[],i=hr(),i===kr&&(46===t.charCodeAt($y)?(i=es,$y++):(i=kr,0===eg&&u(ts)),i===kr&&(58===t.charCodeAt($y)?(i=ah,$y++):(i=kr,0===eg&&u(sh)),i===kr&&(i=gr())));i!==kr;)n.push(i),(i=hr())===kr&&(46===t.charCodeAt($y)?(i=es,$y++):(i=kr,0===eg&&u(ts)),i===kr&&(58===t.charCodeAt($y)?(i=ah,$y++):(i=kr,0===eg&&u(sh)),i===kr&&(i=gr())));n!==kr?(Yy=e,r=jy(r,n),e=r):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Fy)),e}function gr(){var e;return eg++,e=br(),e===kr&&(e=_r()),eg--,e===kr&&(kr,0===eg&&u(Py)),e}function br(){var e,r,n,i,o;return eg++,e=$y,r=$y,37===t.charCodeAt($y)?(n=Ly,$y++):(n=kr,0===eg&&u(Oy)),n!==kr?(i=mr(),i!==kr?(o=mr(),o!==kr?(n=[n,i,o],r=n):($y=r,r=kr)):($y=r,r=kr)):($y=r,r=kr),r!==kr&&(Yy=e,r=Qy(r)),e=r,eg--,e===kr&&(r=kr,0===eg&&u(Ny)),e}function mr(){var e;return eg++,Ih.test(t.charAt($y))?(e=t.charAt($y),$y++):(e=kr,0===eg&&u(Ch)),e===kr&&(My.test(t.charAt($y))?(e=t.charAt($y),$y++):(e=kr,0===eg&&u(By)),e===kr&&(Uy.test(t.charAt($y))?(e=t.charAt($y),$y++):(e=kr,0===eg&&u(qy)))),eg--,e===kr&&(kr,0===eg&&u(Dy)),e}function _r(){var e,r,n;return eg++,e=$y,92===t.charCodeAt($y)?(r=Ev,$y++):(r=kr,0===eg&&u(kv)),r!==kr?(95===t.charCodeAt($y)?(n=by,$y++):(n=kr,0===eg&&u(my)),n===kr&&(126===t.charCodeAt($y)?(n=Hy,$y++):(n=kr,0===eg&&u(Vy)),n===kr&&(46===t.charCodeAt($y)?(n=es,$y++):(n=kr,0===eg&&u(ts)),n===kr&&(45===t.charCodeAt($y)?(n=Ac,$y++):(n=kr,0===eg&&u(Ic)),n===kr&&(33===t.charCodeAt($y)?(n=pl,$y++):(n=kr,0===eg&&u(dl)),n===kr&&(36===t.charCodeAt($y)?(n=gh,$y++):(n=kr,0===eg&&u(bh)),n===kr&&(38===t.charCodeAt($y)?(n=Xy,$y++):(n=kr,0===eg&&u(Wy)),n===kr&&(39===t.charCodeAt($y)?(n=ev,$y++):(n=kr,0===eg&&u(tv)),n===kr&&(40===t.charCodeAt($y)?(n=an,$y++):(n=kr,0===eg&&u(sn)),n===kr&&(41===t.charCodeAt($y)?(n=pn,$y++):(n=kr,0===eg&&u(dn)),n===kr&&(42===t.charCodeAt($y)?(n=hn,$y++):(n=kr,0===eg&&u(vn)),n===kr&&(43===t.charCodeAt($y)?(n=ll,$y++):(n=kr,0===eg&&u(cl)),n===kr&&(44===t.charCodeAt($y)?(n=lu,$y++):(n=kr,0===eg&&u(cu)),n===kr&&(59===t.charCodeAt($y)?(n=go,$y++):(n=kr,0===eg&&u(bo)),n===kr&&(58===t.charCodeAt($y)?(n=ah,$y++):(n=kr,0===eg&&u(sh)),n===kr&&(61===t.charCodeAt($y)?(n=Yl,$y++):(n=kr,0===eg&&u(Jl)),n===kr&&(47===t.charCodeAt($y)?(n=Ju,$y++):(n=kr,0===eg&&u(Ku)),n===kr&&(63===t.charCodeAt($y)?(n=sl,$y++):(n=kr,0===eg&&u(ul)),n===kr&&(35===t.charCodeAt($y)?(n=Qv,$y++):(n=kr,0===eg&&u(Dv)),n===kr&&(64===t.charCodeAt($y)?(n=_h,$y++):(n=kr,0===eg&&u(Eh)),n===kr&&(37===t.charCodeAt($y)?(n=Ly,$y++):(n=kr,0===eg&&u(Oy)))))))))))))))))))))),n!==kr?(Yy=e,r=zy(n),e=r):($y=e,e=kr)):($y=e,e=kr),eg--,e===kr&&(r=kr,0===eg&&u(Gy)),e}r=void 0!==r?r:{};var Er,kr={},wr={DOCUMENT:c},xr=c,Sr=o("[1] QueryUnit"),Tr=o("[2] Query"),Ar=function(e,t,r){return{token:"query",kind:"query",prologue:e,units:[t],inlineData:r}},Ir=o("[3] Prologue"),Cr=function(e,t){return{token:"prologue",base:e,prefixes:t}},Rr=o("[4] BaseDecl"),Fr="BASE",jr=n("BASE",!1),Pr="base",Nr=n("base",!1),Lr=function(e){og(e);var t={};return t.token="base",t.value=e,t},Or=o("[5] PrefixDecl"),Qr="PREFIX",Dr=n("PREFIX",!1),Mr="prefix",Br=n("prefix",!1),Ur=function(e,t){ig(e,t);var r={};return r.token="prefix",r.prefix=e,r.local=t,r},qr=o("[6] SelectQuery"),Gr=function(e,t,r,n){for(var i={named:[],implicit:[]},o=0;o<t.length;o++){var a=t[o];"default"===a.kind?i.implicit.push(a.graph):i.named.push(a.graph)}0===i.named.length&&0===i.implicit.length&&i.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var s={};return s.kind="select",s.token="executableunit",s.dataset=i,s.projection=e.vars,s.modifier=e.modifier,s.pattern=r,null!=n&&null!=n.limit&&(s.limit=n.limit),null!=n&&null!=n.offset&&(s.offset=n.offset),null!=n&&null!=n.order&&""!=n.order&&(s.order=n.order),null!=n&&null!=n.group&&(s.group=n.group),s},Hr=o("[7] SubSelect"),Vr=function(e,t,r){var n={};return n.kind="select",n.token="subselect",n.projection=e.vars,n.modifier=e.modifier,n.pattern=t,null!=r&&null!=r.limit&&(n.limit=r.limit),null!=r&&null!=r.offset&&(n.offset=r.offset),null!=r&&null!=r.order&&""!=r.order&&(n.order=r.order),null!=r&&null!=r.group&&(n.group=r.group),n},Xr=o("[8] SelectClause"),Wr="SELECT",zr=n("SELECT",!1),$r="select",Yr=n("select",!1),Jr="DISTINCT",Kr=n("DISTINCT",!1),Zr="distinct",en=n("distinct",!1),tn="REDUCED",rn=n("REDUCED",!1),nn="reduced",on=n("reduced",!1),an="(",sn=n("(",!1),un="AS",ln=n("AS",!1),cn="as",fn=n("as",!1),pn=")",dn=n(")",!1),hn="*",vn=n("*",!1),yn=function(e,t){var r=[];if(3===t.length&&"*"===t[1])return{vars:[{token:"variable",kind:"*"}],modifier:ag(e)};for(var n=0;n<t.length;n++){var i=t[n];3===i.length?r.push({token:"variable",kind:"var",value:i[1]}):r.push({token:"variable",kind:"aliased",expression:i[3],alias:i[7]})}return{vars:r,modifier:ag(e)}},gn=o("[9] ConstructQuery"),bn="CONSTRUCT",mn=n("CONSTRUCT",!1),_n="construct",En=n("construct",!1),kn=function(e,t,r,n){for(var i={named:[],implicit:[]},o=0;o<t.length;o++){var a=t[o];"default"===a.kind?i.implicit.push(a.graph):i.named.push(a.graph)}0===i.named.length&&0===i.implicit.length&&i.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var s={};return s.kind="construct",s.token="executableunit",s.dataset=i,s.template=e,s.pattern=r,null!=n&&null!=n.limit&&(s.limit=n.limit),null!=n&&null!=n.offset&&(s.offset=n.offset),null!=n&&null!=n.order&&""!=n.order&&(s.order=n.order),s},wn="WHERE",xn=n("WHERE",!1),Sn="where",Tn=n("where",!1),An="{",In=n("{",!1),Cn="}",Rn=n("}",!1),Fn=function(e,t,r){for(var n={named:[],implicit:[]},i=0;i<e.length;i++){var o=e[i];"default"===o.kind?n.implicit.push(o.graph):n.named.push(o.graph)}0===n.named.length&&0===n.implicit.length&&n.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var a={};return a.kind="construct",a.token="executableunit",a.dataset=n,a.template=t,a.pattern={token:"basicgraphpattern",triplesContext:t.triplesContext},null!=r&&null!=r.limit&&(a.limit=r.limit),null!=r&&null!=r.offset&&(a.offset=r.offset),null!=r&&null!=r.order&&""!=r.order&&(a.order=r.order),a},jn=o("[10] DescribeQuery"),Pn="DESCRIBE",Nn=n("DESCRIBE",!1),Ln=o("[11] AskQuery"),On="ASK",Qn=n("ASK",!1),Dn="ask",Mn=n("ask",!1),Bn=function(e,t){for(var r={named:[],implicit:[]},n=0;n<e.length;n++){var i=e[n];"implicit"===i.kind?r.implicit.push(i.graph):r.named.push(i.graph)}0===r.named.length&&0===r.implicit.length&&r.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var o={};return o.kind="ask",o.token="executableunit",o.dataset=r,o.pattern=t,o},Un=o("[12] DatasetClause"),qn="FROM",Gn=n("FROM",!1),Hn="from",Vn=n("from",!1),Xn=function(e){return e},Wn=o("[13] DefaultGraphClause"),zn=function(e){return{graph:e,kind:"default",token:"graphClause"}},$n=o("[14] NamedGraphClause"),Yn="NAMED",Jn=n("NAMED",!1),Kn="named",Zn=n("named",!1),ei=function(e){return{graph:e,kind:"named",token:"graphCluase"}},ti=o("[15] SourceSelector"),ri=o("[16] WhereClause"),ni=function(e){return e},ii=o("[17] SolutionModifier"),oi=function(e,t,r){var n={};return null!=r&&(null!=r.limit&&(n.limit=r.limit),null!=r.offset&&(n.offset=r.offset)),null!=e&&(n.group=e),n.order=t,n},ai=o("[18] GroupClause"),si="GROUP",ui=n("GROUP",!1),li="group",ci=n("group",!1),fi="BY",pi=n("BY",!1),di="by",hi=n("by",!1),vi=function(e){return e},yi=o("[19] GroupCondition"),gi=function(e){return e},bi=function(e){return e},mi=function(e,t){return 0!=t.length?{token:"aliased_expression",expression:e,alias:t[2]}:e},_i=function(e){return e},Ei=o("[20] HavingClause"),ki="HAVING",wi=n("HAVING",!1),xi=o("[21] HavingCondition"),Si=o("[22] OrderClause"),Ti="ORDER",Ai=n("ORDER",!1),Ii="order",Ci=n("order",!1),Ri=function(e){return e},Fi=o("[23] OrderCondition"),ji="ASC",Pi=n("ASC",!1),Ni="asc",Li=n("asc",!1),Oi="DESC",Qi=n("DESC",!1),Di="desc",Mi=n("desc",!1),Bi=function(e,t){return{direction:e.toUpperCase(),expression:t}},Ui=function(e){if("var"===e.token)var e={token:"expression",expressionType:"atomic",primaryexpression:"var",value:e};return{direction:"ASC",expression:e}},qi=o("[24] LimitOffsetClauses"),Gi=function(e){for(var t={},r=0;r<e.length;r++){var n=e[r];null!=n&&null!=n.limit?t.limit=n.limit:null!=n&&null!=n.offset&&(t.offset=n.offset)}return t},Hi=o("[25] LimitClause"),Vi="LIMIT",Xi=n("LIMIT",!1),Wi="limit",zi=n("limit",!1),$i=function(e){return{limit:parseInt(e.value)}},Yi=o("[26] OffsetClause"),Ji="OFFSET",Ki=n("OFFSET",!1),Zi="offset",eo=n("offset",!1),to=function(e){return{offset:parseInt(e.value)}},ro=o("[27] BindingsClause"),no="BINDINGS",io=n("BINDINGS",!1),oo=o("[28] BindingValue"),ao="UNDEF",so=n("UNDEF",!1),uo=o("[28]\tValuesClause\t  ::=\t( 'VALUES' DataBlock )?"),lo="VALUES",co=n("VALUES",!1),fo="values",po=n("values",!1),ho=function(e){return null!=e?e[1]:null},vo=o("[29] UpdateUnit"),yo=o("[30] Update"),go=";",bo=n(";",!1),mo=function(e,t,r){var n={};n.token="query",n.kind="update",n.prologue=e;var i=[t];return null!=r&&null!=r.length&&null!=r[3]&&null!=r[3].units&&(i=i.concat(r[3].units)),n.units=i,n},_o=o("[31] Update1"),Eo=o("[32] Load"),ko="LOAD",wo=n("LOAD",!1),xo="load",So=n("load",!1),To="INTO",Ao=n("INTO",!1),Io="into",Co=n("into",!1),Ro=function(e,t){var r={};return r.kind="load",r.token="executableunit",r.sourceGraph=e,null!=t&&(r.destinyGraph=t[2]),r},Fo=o("[33] Clear"),jo="CLEAR",Po=n("CLEAR",!1),No="clear",Lo=n("clear",!1),Oo="SILENT",Qo=n("SILENT",!1),Do="silent",Mo=n("silent",!1),Bo=function(e){var t={};return t.kind="clear",t.token="executableunit",t.destinyGraph=e,t},Uo=o("[34] Drop"),qo="DROP",Go=n("DROP",!1),Ho="drop",Vo=n("drop",!1),Xo=function(e){var t={};return t.kind="drop",t.token="executableunit",t.destinyGraph=e,t},Wo=o("[35] Create"),zo="CREATE",$o=n("CREATE",!1),Yo="create",Jo=n("create",!1),Ko=function(e){var t={};return t.kind="create",t.token="executableunit",t.destinyGraph=e,t},Zo=o("[36] InsertData"),ea="INSERT",ta=n("INSERT",!1),ra="insert",na=n("insert",!1),ia="DATA",oa=n("DATA",!1),aa="data",sa=n("data",!1),ua=function(e){var t={};return t.kind="insertdata",t.token="executableunit",t.quads=e,t},la=o("[37] DeleteData"),ca="DELETE",fa=n("DELETE",!1),pa="delete",da=n("delete",!1),ha=function(e){var t={};return t.kind="deletedata",t.token="executableunit",t.quads=e,t},va=o("[38] DeleteWhere"),ya=function(e){var t={};t.kind="modify",t.pattern=e,t.with=null,t.using=null;var r=[],n=e.patterns[0];n=null==n.triplesContext&&null!=n.patterns?n.patterns[0].triplesContext:n.triplesContext;for(var i=0;i<n.length;i++){var o={},a=n[i];o.subject=a.subject,o.predicate=a.predicate,o.object=a.object,o.graph=a.graph,r.push(o)}return t.delete=r,t},ga=o("[39] Modify"),ba="WITH",ma=n("WITH",!1),_a="with",Ea=n("with",!1),ka=function(e,t,r,n){var i={};return i.kind="modify",i.with=""!=e&&null!=e?e[2]:null,3!==t.length||""!==t[2]&&null!=t[2]?3===t.length&&null!=t[0].length&&null!=t[1].length&&null!=t[2].length?(i.delete=t[0],i.insert=t[2]):(i.insert=t,i.delete=null):(i.delete=t[0],i.insert=null),""!=r&&(i.using=r),i.pattern=n,i},wa=o("[40] DeleteClause"),xa=function(e){return e},Sa=o("[41] InsertClause"),Ta=o("[42] UsingClause"),Aa="USING",Ia=n("USING",!1),Ca="using",Ra=n("using",!1),Fa=function(e){return null!=e.length?{kind:"named",uri:e[2]}:{kind:"default",uri:e}},ja=o("[43] GraphRef"),Pa="GRAPH",Na=n("GRAPH",!1),La="graph",Oa=n("graph",!1),Qa=function(e){return e},Da=o("[44] GraphRefAll"),Ma="DEFAULT",Ba=n("DEFAULT",!1),Ua="default",qa=n("default",!1),Ga=function(){return"default"},Ha=function(){return"named"},Va="ALL",Xa=n("ALL",!1),Wa="all",za=n("all",!1),$a=function(){return"all"},Ya=o("[45] QuadPattern"),Ja=function(e){return e.quadsContext},Ka=o("[46] QuadData"),Za=o("[47] Quads"),es=".",ts=n(".",!1),rs=function(e,t){var r=[];if(null!=e&&null!=e.triplesContext)for(var n=0;n<e.triplesContext.length;n++){var i=e.triplesContext[n];i.graph=null,r.push(i)}if(t&&t.length>0&&t[0].length>0&&(r=r.concat(t[0][0].quadsContext),null!=t[0][2]&&null!=t[0][2].triplesContext))for(var n=0;n<t[0][2].triplesContext.length;n++){var i=t[0][2].triplesContext[n];i.graph=null,r.push(i)}return{token:"quads",quadsContext:r}},ns=o("[48] QuadsNotTriples"),is=function(e,t){var r=[];if(null!=t)for(var n=0;n<t.triplesContext.length;n++){var i=t.triplesContext[n];i.graph=e,r.push(i)}return{token:"quadsnottriples",quadsContext:r}},os=o("[49] TriplesTemplate"),as=function(e,t){var r=e.triplesContext;return null!=t&&"object"==typeof t&&null!=t.length&&null!=t[3]&&null!=t[3].triplesContext&&(r=r.concat(t[3].triplesContext)),{token:"triplestemplate",triplesContext:r}},ss=o("[50] GroupGraphPattern"),us=function(e){return e},ls=o("[51] GroupGraphPatternSub"),cs=function(e,t){var r=[];null!=e&&e!=[]&&r.push(e);for(var n=0;n<t.length;n++)for(var i=0;i<t[n].length;i++)null!=t[n][i]&&null!=t[n][i].token&&r.push(t[n][i]);for(var o=[],a=[],s=[],u=[],n=0;n<r.length;n++)if("triplespattern"!==r[n].token&&"filter"!==r[n].token&&"bind"!==r[n].token){if(0!=a.length||0!=s.length){for(var l=[],i=0;i<a.length;i++)l=l.concat(a[i].triplesContext);l.length>0&&o.push({token:"basicgraphpattern",triplesContext:l}),a=[]}o.push(r[n])}else"triplespattern"===r[n].token?a.push(r[n]):"bind"===r[n].token?u.push(r[n]):s.push(r[n]);if(0!=a.length||0!=s.length){for(var l=[],i=0;i<a.length;i++)l=l.concat(a[i].triplesContext);l.length>0&&o.push({token:"basicgraphpattern",triplesContext:l})}return{token:"groupgraphpattern",patterns:o,filters:s,binds:u}},fs=o("[54] TriplesBlock"),ps=function(e,t){var r=e.triplesContext;return null!=t&&"object"==typeof t&&null!=t&&null!=t.length&&null!=t[2]&&null!=t[2].triplesContext&&(r=r.concat(t[2].triplesContext)),{token:"triplespattern",triplesContext:r}},ds=o("[53] GraphPatternNotTriples"),hs=o("[54] OptionalGraphPattern"),vs="OPTIONAL",ys=n("OPTIONAL",!1),gs="optional",bs=n("optional",!1),ms=function(e){return{token:"optionalgraphpattern",value:e}},_s=o("[55] GraphGraphPattern"),Es=function(e,t){for(var r=0;r<t.patterns.length;r++)for(var n=t.patterns[r],i=0;i<n.triplesContext.length;i++){var o=n.triplesContext[i];o.graph=e}return t.token="groupgraphpattern",t},ks=o("[56] ServiceGraphPattern"),ws="SERVICE",xs=n("SERVICE",!1),Ss=function(e,t){return{token:"servicegraphpattern",status:"todo",value:[e,t]}},Ts=o("[57] MinusGraphPattern"),As="MINUS",Is=n("MINUS",!1),Cs="minus",Rs=n("minus",!1),Fs=function(e){return{token:"minusgraphpattern",status:"todo",value:e}},js=o("[58] GroupOrUnionGraphPattern"),Ps="UNION",Ns=n("UNION",!1),Ls="union",Os=n("union",!1),Qs=function(e,t){if(0===t.length)return e;for(var r={token:"graphunionpattern",value:[e]},n=0;n<t.length;n++)if(n==t.length-1)r.value.push(t[n][3]);else{r.value.push(t[n][3]);var i={token:"graphunionpattern",value:[r]};r=i}return r},Ds=o("[59] Filter"),Ms="FILTER",Bs=n("FILTER",!1),Us="filter",qs=n("filter",!1),Gs=function(e){return{token:"filter",value:e}},Hs=o("[60] Bind"),Vs="BIND",Xs=n("BIND",!1),Ws="bind",zs=n("bind",!1),$s=function(e,t){return{token:"bind",expression:e,as:t}},Ys=o("[60] Constraint"),Js=o("[61] InlineData"),Ks=function(e){return e},Zs=o("[62] DataBlock"),eu=o("[63] InlineDataOneVar"),tu=function(e,t){return{token:"inlineData",values:[{var:e,value:t}]}},ru=o("[64] InlineDataFull"),nu=function(e,t){return{token:"inlineData",values:[],todo:!0}},iu=o("[65] DataBlockValue"),ou=o("[61] FunctionCall"),au=function(e,t){var r={};return r.token="expression",r.expressionType="irireforfunction",r.iriref=e,r.args=t.value,r},su=o("[62] ArgList"),uu=function(){var e={};return e.token="args",e.value=[],e},lu=",",cu=n(",",!1),fu=function(e,t,r){for(var n=[],i=0;i<r.length;i++)n.push(r[i][2]);var o={};return o.token="args",o.value=[t].concat(n),null!=e&&"DISTINCT"===e.toUpperCase()?o.distinct=!0:o.distinct=!1,o},pu=o("[63] ExpressionList"),du=function(e,t){for(var r=[],n=0;n<t.length;n++)r.push(t[n][2]);var i={};return i.token="args",i.value=[e].concat(r),i},hu=o("[64] ConstructTemplate"),vu=function(e){return e},yu=o("[65] ConstructTriples"),gu=function(e,t){var r=e.triplesContext;return null!=t&&"object"==typeof t&&null!=t.length&&null!=t[3]&&null!=t[3].triplesContext&&(r=r.concat(t[3].triplesContext)),{token:"triplestemplate",triplesContext:r}},bu=o("[66] TriplesSameSubject"),mu=function(e,t){var r=t.triplesContext,n=e;if(t.pairs)for(var i=0;i<t.pairs.length;i++){var o=t.pairs[i],a=null;null!=o[1].length&&(o[1]=o[1][0]),n.token&&"triplesnodecollection"===n.token?(a={subject:n.chainSubject[0],predicate:o[0],object:o[1]},r.push(a),r=r.concat(n.triplesContext)):(a={subject:n,predicate:o[0],object:o[1]},r.push(a))}var s={};return s.token="triplessamesubject",s.triplesContext=r,s.chainSubject=n,s},_u=function(e,t){var r=e.triplesContext,n=e.chainSubject;if(t.pairs)for(var i=0;i<t.pairs.length;i++){var o=t.pairs[i];if(null!=o[1].length&&(o[1]=o[1][0]),"triplesnodecollection"===e.token)for(var a=0;a<n.length;a++){var s=n[a];if(null!=s.triplesContext){var u={subject:s.chainSubject,predicate:o[0],object:o[1]};r.concat(s.triplesContext)}else{var u={subject:n[a],predicate:o[0],object:o[1]};r.push(u)}}else{var u={subject:n,predicate:o[0],object:o[1]};r.push(u)}}var l={};return l.token="triplessamesubject",l.triplesContext=r,l.chainSubject=n,l},Eu=o("[83] PropertyListPathNotEmpty"),ku=function(e,t,r){var n={};n.token="propertylist";for(var i=[],o=[],a=0;a<t.length;a++)null!=t[a].triplesContext?(i=i.concat(t[a].triplesContext),"triplesnodecollection"===t[a].token&&null!=t[a].chainSubject.length?o.push([e,t[a].chainSubject[0]]):o.push([e,t[a].chainSubject])):o.push([e,t[a]]);for(var a=0;a<r.length;a++)for(var s=r[a][3],u=s[0],l=s[2]||[],c=0;c<l.length;c++)null!=l[c].triplesContext?(i=i.concat(l[c].triplesContext),o.push([u,l[c].chainSubject])):o.push([u,l[c]]);return n.pairs=o,n.triplesContext=i,n},wu=o("[67] PropertyListNotEmpty"),xu=function(e,t,r){var n={};n.token="propertylist";for(var i=[],o=[],a=0;a<t.length;a++)null!=t[a].triplesContext?(i=i.concat(t[a].triplesContext),"triplesnodecollection"===t[a].token&&null!=t[a].chainSubject.length?o.push([e,t[a].chainSubject[0]]):o.push([e,t[a].chainSubject])):o.push([e,t[a]]);for(var a=0;a<r.length;a++)for(var s=r[a][3],u=s[0],l=s[2]||[],c=0;c<l.length;c++)null!=l[c].triplesContext?(i=i.concat(l[c].triplesContext),o.push([u,l[c].chainSubject])):o.push([u,l[c]]);return n.pairs=o,n.triplesContext=i,n},Su=o("[68] PropertyList"),Tu=o("[86] ObjectListPath"),Au=function(e,t){var r=[];r.push(e);for(var n=0;n<t.length;n++)for(var i=0;i<t[n].length;i++)"object"==typeof t[n][i]&&null!=t[n][i].token&&r.push(t[n][i]);return r},Iu=o("[69] ObjectList"),Cu=function(e,t){var r=[];r.push(e);for(var n=0;n<t.length;n++)for(var i=0;i<t[n].length;i++)"object"==typeof t[n][i]&&null!=t[n][i].token&&r.push(t[n][i]);return r},Ru=o("[87] ObjectPath"),Fu=o("[70] Object"),ju=o("[71] Verb"),Pu="a",Nu=n("a",!1),Lu=function(){return{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"}},Ou=o("[72] TriplesSameSubjectPath"),Qu=function(e,t){var r=t.triplesContext,n=e;if(t.pairs)for(var i=0;i<t.pairs.length;i++){var o=t.pairs[i],a=null;null!=o[1].length&&(o[1]=o[1][0]),n.token&&"triplesnodecollection"===n.token?(a={subject:n.chainSubject[0],predicate:o[0],object:o[1]},"path"===a.predicate.token&&"element"===a.predicate.kind&&(a.predicate=a.predicate.value),r.push(a),r=r.concat(n.triplesContext)):(a={subject:n,predicate:o[0],object:o[1]},"path"===a.predicate.token&&"element"===a.predicate.kind&&(a.predicate=a.predicate.value),r.push(a))}var s={};return s.token="triplessamesubject",s.triplesContext=r,s.chainSubject=n,s},Du=function(e,t){var r=e.triplesContext,n=e.chainSubject;if(null!=t&&null!=t.pairs)for(var i=0;i<t.pairs.length;i++){var o=t.pairs[i];if(null!=o[1].length&&(o[1]=o[1][0]),"triplesnodecollection"===e.token)for(var a=0;a<n.length;a++){var s=n[a];if(null!=s.triplesContext){var u={subject:s.chainSubject,predicate:o[0],object:o[1]};r.concat(s.triplesContext)}else{var u={subject:n[a],predicate:o[0],object:o[1]};r.push(u)}}else{var u={subject:n,predicate:o[0],object:o[1]};r.push(u)}}var l={};return l.token="triplessamesubject",l.triplesContext=r,l.chainSubject=n,l},Mu=o("[73] PropertyListNotEmptyPath"),Bu=function(e,t,r){var n={};n.token="propertylist";for(var i=[],o=[],a=0;a<t.length;a++)null!=t[a].triplesContext?(i=i.concat(t[a].triplesContext),"triplesnodecollection"===t[a].token&&null!=t[a].chainSubject.length?o.push([e,t[a].chainSubject[0]]):o.push([e,t[a].chainSubject])):o.push([e,t[a]]);for(var a=0;a<r.length;a++)for(var s=r[a][3],u=s[0],l=s[1]||[],c=0;c<l.length;c++)null!=l[c].triplesContext?(i=i.concat(l[c].triplesContext),o.push([u,l[c].chainSubject])):o.push([u,l[c]]);return n.pairs=o,n.triplesContext=i,n},Uu=o("[74] PropertyListPath"),qu=o("[75]"),Gu=function(e){var t={};return t.token="path",t.kind="element",t.value=e,e},Hu=o("[76] VerbSimple"),Vu=o("[77] Path"),Xu=o("[78] PathAlternative"),Wu="|",zu=n("|",!1),$u=function(e,t){if(null==t||0===t.length)return e;for(var r=[],n=0;n<t.length;n++)r.push(t[1]);var i={};return i.token="path",i.kind="alternative",i.value=r,i},Yu=o("[79] PathSequence"),Ju="/",Ku=n("/",!1),Zu=function(e,t){if(null==t||0===t.length)return e;for(var r=[e],n=0;n<t.length;n++)r.push(t[n][1]);var i={};return i.token="path",i.kind="sequence",i.value=r,i},el=o("[88] PathElt"),tl=function(e,t){if(e.token&&"path"!=e.token&&""==t)return e;if(e.token&&e.token!=r&&""!=t){var r={};return r.token="path",r.kind="element",r.value=e,r.modifier=t,r}return e.modifier=t,e},rl=o("[81] PathEltOrInverse"),nl="^",il=n("^",!1),ol=function(e){var t={};return t.token="path",t.kind="inversePath",t.value=e,t},al=o("[82] PathMod"),sl="?",ul=n("?",!1),ll="+",cl=n("+",!1),fl=o("[83] PathPrimary"),pl="!",dl=n("!",!1),hl=o("[85] PathOneInPropertySet"),vl=o("[86] Integer"),yl=o("[100] TriplesNodePath"),gl=function(e){for(var t=[],r=[],n=null,i=0;i<e.length;i++){rg++;var o=null;null==e[i].chainSubject&&null==e[i].triplesContext?o=e[i]:(o=e[i].chainSubject,t=t.concat(e[i].triplesContext)),n={subject:{token:"blank",value:"_:"+rg},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first"},object:o},0==i&&r.push(n.subject),t.push(n),n=i===e.length-1?{subject:{token:"blank",value:"_:"+rg},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}:{subject:{token:"blank",value:"_:"+rg},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"blank",value:"_:"+(rg+1)}},t.push(n)}return{token:"triplesnodecollection",triplesContext:t,chainSubject:r}},bl=o("[87] TriplesNode"),ml=function(e){for(var t=[],r=[],n=null,i=0;i<e.length;i++){rg++;var o=null;null==e[i].chainSubject&&null==e[i].triplesContext?o=e[i]:(o=e[i].chainSubject,t=t.concat(o.triplesContext)),n={subject:{token:"blank",value:"_:"+rg},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first"},object:o},0==i&&r.push(n.subject),t.push(n),n=i===e.length-1?{subject:{token:"blank",value:"_:"+rg},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}:{subject:{token:"blank",value:"_:"+rg},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"blank",value:"_:"+(rg+1)}},t.push(n)}return{token:"triplesnodecollection",triplesContext:t,chainSubject:r}},_l=o("[101] BlankNodePropertyListPath"),El="[",kl=n("[",!1),wl="]",xl=n("]",!1),Sl=function(e){rg++;for(var t={token:"blank",value:"_:"+rg},r=[],n=0;n<e.pairs.length;n++){var i=e.pairs[n],o={};o.subject=t,o.predicate=i[0],null!=i[1].length&&(i[1]=i[1][0]),o.object=i[1],r.push(o)}return{token:"triplesnode",kind:"blanknodepropertylist",triplesContext:e.triplesContext.concat(r),chainSubject:t}},Tl=o("[88] BlankNodePropertyList"),Al=function(e){rg++;for(var t={token:"blank",value:"_:"+rg},r=[],n=0;n<e.pairs.length;n++){var i=e.pairs[n],o={};o.subject=t,o.predicate=i[0],null!=i[1].length&&(i[1]=i[1][0]),o.object=i[1],r.push(o)}return{token:"triplesnode",kind:"blanknodepropertylist",triplesContext:e.triplesContext.concat(r),chainSubject:t}},Il=o("[103] CollectionPath"),Cl=function(e){return e},Rl=o("[89] Collection"),Fl=o("[105] GraphNodePath"),jl=function(e){return e[1]},Pl=o("[90] GraphNode"),Nl=o("[91] VarOrTerm"),Ll=o("[92] VarOrIRIref"),Ol=o("[93] Var"),Ql=function(e){var t={};return t.token="var",t.value=e,t},Dl=o("[94] GraphTerm"),Ml=o("[95] Expression"),Bl=o("[96] ConditionalOrExpression"),Ul="||",ql=n("||",!1),Gl=function(e,t){if(0===t.length)return e;var r={};r.token="expression",r.expressionType="conditionalor";for(var n=[e],i=0;i<t.length;i++)n.push(t[i][3]);return r.operands=n,r},Hl=o("[97] ConditionalAndExpression"),Vl="&&",Xl=n("&&",!1),Wl=function(e,t){if(0===t.length)return e;var r={};r.token="expression",r.expressionType="conditionaland";for(var n=[e],i=0;i<t.length;i++)n.push(t[i][3]);return r.operands=n,r},zl=o("[98] ValueLogical"),$l=o("[99] RelationalExpression"),Yl="=",Jl=n("=",!1),Kl="!=",Zl=n("!=",!1),ec="<",tc=n("<",!1),rc=">",nc=n(">",!1),ic="<=",oc=n("<=",!1),ac=">=",sc=n(">=",!1),uc="I",lc=n("I",!1),cc="i",fc=n("i",!1),pc="N",dc=n("N",!1),hc="n",vc=n("n",!1),yc="O",gc=n("O",!1),bc="o",mc=n("o",!1),_c="T",Ec=n("T",!1),kc="t",wc=n("t",!1),xc=function(e,t){if(0===t.length)return e;if("i"===t[0][1]||"I"===t[0][1]||"n"===t[0][1]||"N"===t[0][1]){var r={};if("i"===t[0][1]||"I"===t[0][1]){var n="=";r.expressionType="conditionalor"}else{var n="!=";r.expressionType="conditionaland"}for(var i=e,o=[],a=0;a<t[0].length;a++)if("args"===t[0][a].token){o=t[0][a].value;break}r.token="expression",r.operands=[];for(var s=0;s<o.length;s++){var u={};u.token="expression",u.expressionType="relationalexpression",u.operator=n,u.op1=i,u.op2=o[s],r.operands.push(u)}return r}var r={};return r.expressionType="relationalexpression",r.operator=t[0][1],r.op1=e,r.op2=t[0][3],r.token="expression",r},Sc=o("[100] NumericExpression"),Tc=o("[101] AdditiveExpression"),Ac="-",Ic=n("-",!1),Cc=function(e,t){if(0===t.length)return e;var r={};r.token="expression",r.expressionType="additiveexpression",r.summand=e,r.summands=[];for(var n=0;n<t.length;n++){var i=t[n],o={};if(4==i.length&&"string"==typeof i[1])o.operator=i[1],o.expression=i[3];else{var a={},s=o[0],u=(o[1][1],o[1][3]);s.value<0?(o.operator="-",s.value=-s.value):o.operator="+",a.token="expression",a.expressionType="multiplicativeexpression",a.operator=s,a.factors=[{operator:null,expression:u}],o.expression=a}r.summands.push(o)}return r},Rc=o("[102] MultiplicativeExpression"),Fc=function(e,t){if(0===t.length)return e;var r={};r.token="expression",r.expressionType="multiplicativeexpression",r.factor=e,r.factors=[];for(var n=0;n<t.length;n++){var i=t[n],o={};o.operator=i[1],o.expression=i[3],r.factors.push(o)}return r},jc=o("[103] UnaryExpression"),Pc=function(e){var t={};return t.token="expression",t.expressionType="unaryexpression",t.unaryexpression="!",t.expression=e,t},Nc=function(e){var t={};return t.token="expression",t.expressionType="unaryexpression",t.unaryexpression="+",t.expression=e,t},Lc=function(e){var t={};return t.token="expression",t.expressionType="unaryexpression",t.unaryexpression="-",t.expression=e,t},Oc=o("[104] PrimaryExpression"),Qc=function(e){var t={};return t.token="expression",t.expressionType="atomic",t.primaryexpression="rdfliteral",t.value=e,t},Dc=function(e){var t={};return t.token="expression",t.expressionType="atomic",t.primaryexpression="numericliteral",t.value=e,t},Mc=function(e){var t={};return t.token="expression",t.expressionType="atomic",t.primaryexpression="booleanliteral",t.value=e,t},Bc=function(e){var t={};return t.token="expression",t.expressionType="atomic",t.primaryexpression="var",t.value=e,t},Uc=o("[105] BrackettedExpression"),qc=function(e){return e},Gc=o("[106] BuiltInCall"),Hc="STR",Vc=n("STR",!1),Xc="str",Wc=n("str",!1),zc=function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="str",t.args=[e],t},$c="LANG",Yc=n("LANG",!1),Jc="lang",Kc=n("lang",!1),Zc=function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="lang",t.args=[e],t},ef="LANGMATCHES",tf=n("LANGMATCHES",!1),rf="langmatches",nf=n("langmatches",!1),of=function(e,t){var r={};return r.token="expression",r.expressionType="builtincall",r.builtincall="langmatches",r.args=[e,t],r},af="DATATYPE",sf=n("DATATYPE",!1),uf="datatype",lf=n("datatype",!1),cf=function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="datatype",t.args=[e],t},ff="BOUND",pf=n("BOUND",!1),df="bound",hf=n("bound",!1),vf=function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="bound",t.args=[e],t},yf="IRI",gf=n("IRI",!1),bf="iri",mf=n("iri",!1),_f=function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="iri",t.args=[e],t},Ef="URI",kf=n("URI",!1),wf="uri",xf=n("uri",!1),Sf=function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="uri",t.args=[e],t},Tf="BNODE",Af=n("BNODE",!1),If="bnode",Cf=n("bnode",!1),Rf=function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="bnode",5===e.length?t.args=[e[2]]:t.args=null,t},Ff="COALESCE",jf=n("COALESCE",!1),Pf="coalesce",Nf=n("coalesce",!1),Lf=function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="coalesce",t.args=e,t},Of="IF",Qf=n("IF",!1),Df="if",Mf=n("if",!1),Bf=function(e,t,r){var n={};return n.token="expression",n.expressionType="builtincall",n.builtincall="if",n.args=[e,t,r],n},Uf="ISLITERAL",qf=n("ISLITERAL",!1),Gf="isliteral",Hf=n("isliteral",!1),Vf="isLITERAL",Xf=n("isLITERAL",!1),Wf=function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="isliteral",t.args=[e],t},zf="ISBLANK",$f=n("ISBLANK",!1),Yf="isblank",Jf=n("isblank",!1),Kf="isBLANK",Zf=n("isBLANK",!1),ep=function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="isblank",t.args=[e],t},tp="SAMETERM",rp=n("SAMETERM",!1),np="sameterm",ip=n("sameterm",!1),op=function(e,t){var r={};return r.token="expression",r.expressionType="builtincall",r.builtincall="sameterm",r.args=[e,t],r},ap="ISURI",sp=n("ISURI",!1),up="isuri",lp=n("isuri",!1),cp="isURI",fp=n("isURI",!1),pp="ISIRI",dp=n("ISIRI",!1),hp="isiri",vp=n("isiri",!1),yp="isIRI",gp=n("isIRI",!1),bp=function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="isuri",t.args=[e],t},mp="custom:",_p=n("custom:",!1),Ep="CUSTOM:",kp=n("CUSTOM:",!1),wp=/^[a-zA-Z0-9_]/,xp=i([["a","z"],["A","Z"],["0","9"],"_"],!1,!1),Sp=function(e,t,r){var n={};n.token="expression",n.expressionType="custom",n.name=e.join("");for(var i=[],o=0;o<t.length;o++)i.push(t[o][1]);return i.push(r),n.args=i,n},Tp=o("[107] RegexExpression"),Ap="REGEX",Ip=n("REGEX",!1),Cp="regex",Rp=n("regex",!1),Fp=function(e,t,r){var n={};return n.token="expression",n.expressionType="regex",n.text=e,n.pattern=t,null!=r&&(n.flags=r[2]),n},jp=o("[108] ExistsFunc"),Pp="EXISTS",Np=n("EXISTS",!1),Lp="exists",Op=n("exists",!1),Qp=function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="exists",t.args=[e],t},Dp=o("[109] NotExistsFunc"),Mp="NOT",Bp=n("NOT",!1),Up="not",qp=n("not",!1),Gp=function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="notexists",t.args=[e],t},Hp=o("[110] Aggregate"),Vp="COUNT",Xp=n("COUNT",!1),Wp="count",zp=n("count",!1),$p=function(e,t){var r={};return r.token="expression",r.expressionType="aggregate",r.aggregateType="count",r.distinct=""!=e&&null!=e?"DISTINCT":e,r.expression=t,r},Yp="GROUP_CONCAT",Jp=n("GROUP_CONCAT",!1),Kp="group_concat",Zp=n("group_concat",!1),ed="SEPARATOR",td=n("SEPARATOR",!1),rd=function(e,t,r){var n={};return n.token="expression",n.expressionType="aggregate",n.aggregateType="group_concat",n.distinct=""!=e&&null!=e?"DISTINCT":e,n.expression=t,n.separator=r,n},nd="SUM",id=n("SUM",!1),od="sum",ad=n("sum",!1),sd=function(e,t){var r={};return r.token="expression",r.expressionType="aggregate",r.aggregateType="sum",r.distinct=""!=e&&null!=e?"DISTINCT":e,r.expression=t,r},ud="MIN",ld=n("MIN",!1),cd="min",fd=n("min",!1),pd=function(e,t){var r={};return r.token="expression",r.expressionType="aggregate",r.aggregateType="min",r.distinct=""!=e&&null!=e?"DISTINCT":e,r.expression=t,r},dd="MAX",hd=n("MAX",!1),vd="max",yd=n("max",!1),gd=function(e,t){var r={};return r.token="expression",r.expressionType="aggregate",r.aggregateType="max",r.distinct=""!=e&&null!=e?"DISTINCT":e,r.expression=t,r},bd="AVG",md=n("AVG",!1),_d="avg",Ed=n("avg",!1),kd=function(e,t){var r={};return r.token="expression",r.expressionType="aggregate",r.aggregateType="avg",r.distinct=""!=e&&null!=e?"DISTINCT":e,r.expression=t,r},wd=o("[117] IRIrefOrFunction"),xd=function(e,t){var r={};return r.token="expression",r.expressionType="irireforfunction",r.iriref=e,r.args=null!=t?t.value:t,r},Sd=o("[112] RDFLiteral"),Td="^^",Ad=n("^^",!1),Id=function(e,t){return"string"==typeof t&&t.length>0?{token:"literal",value:e.value,lang:t.slice(1),type:null}:null!=t&&"object"==typeof t?(t.shift(),{token:"literal",value:e.value,lang:null,type:t[0]}):{token:"literal",value:e.value,lang:null,type:null}},Cd=o("[113] NumericLiteral"),Rd=o("[114] NumericLiteralUnsigned"),Fd=o("[115] NumericLiteralPositive"),jd=o("[116] NumericLiteralNegative"),Pd=o("[117] BooleanLiteral"),Nd="TRUE",Ld=n("TRUE",!1),Od="true",Qd=n("true",!1),Dd=function(){var e={};return e.token="literal",e.lang=null,e.type="http://www.w3.org/2001/XMLSchema#boolean",e.value=!0,e},Md="FALSE",Bd=n("FALSE",!1),Ud="false",qd=n("false",!1),Gd=function(){var e={};return e.token="literal",e.lang=null,e.type="http://www.w3.org/2001/XMLSchema#boolean",e.value=!1,e},Hd=o("[118] String"),Vd=function(e){return{token:"string",value:e}},Xd=o("[119] IRIref"),Wd=function(e){return{token:"uri",prefix:null,suffix:null,value:e}},zd=function(e){return e},$d=o("[120] PrefixedName"),Yd=function(e){return{token:"uri",prefix:e[0],suffix:e[1],value:null}},Jd=function(e){return{token:"uri",prefix:e,suffix:"",value:null}},Kd=o("[121] BlankNode"),Zd=function(e){return{token:"blank",value:e}},eh=function(){return rg++,{token:"blank",value:"_:"+rg}},th=o("[122] IRI_REF"),rh=/^[^<>"{}|\^`\\]/,nh=i(["<",">",'"',"{","}","|","^","`","\\"],!0,!1),ih=function(e){return e.join("")},oh=o("[123] PNAME_NS"),ah=":",sh=n(":",!1),uh=o("[124] PNAME_LN"),lh=function(e,t){return[e,t]},ch=o("[125] BLANK_NODE_LABEL"),fh="_:",ph=n("_:",!1),dh=function(e){return e},hh=o("[126] VAR1"),vh=function(e){return e},yh=o("[127] VAR2"),gh="$",bh=n("$",!1),mh=o("[128] LANGTAG"),_h="@",Eh=n("@",!1),kh=/^[a-zA-Z]/,wh=i([["a","z"],["A","Z"]],!1,!1),xh=/^[a-zA-Z0-9]/,Sh=i([["a","z"],["A","Z"],["0","9"]],!1,!1),Th=function(e,t){return 0===t.length?("@"+e.join("")).toLowerCase():("@"+e.join("")+"-"+t[0][1].join("")).toLowerCase()},Ah=o("[129] INTEGER"),Ih=/^[0-9]/,Ch=i([["0","9"]],!1,!1),Rh=function(e){var t={};return t.token="literal",t.lang=null,t.type="http://www.w3.org/2001/XMLSchema#integer",t.value=tg(e),t},Fh=o("[130] DECIMAL"),jh=function(e,t,r){var n={};return n.token="literal",n.lang=null,n.type="http://www.w3.org/2001/XMLSchema#decimal",n.value=tg([e,t,r]),n},Ph=function(e,t){var r={};return r.token="literal",r.lang=null,r.type="http://www.w3.org/2001/XMLSchema#decimal",r.value=tg([e,t]),r},Nh=o("[131] DOUBLE"),Lh=function(e,t,r,n){var i={};return i.token="literal",i.lang=null,i.type="http://www.w3.org/2001/XMLSchema#double",i.value=tg([e,t,r,n]),i},Oh=function(e,t,r){var n={};return n.token="literal",n.lang=null,n.type="http://www.w3.org/2001/XMLSchema#double",n.value=tg([e,t,r]),n},Qh=function(e,t){var r={};return r.token="literal",r.lang=null,r.type="http://www.w3.org/2001/XMLSchema#double",r.value=tg([e,t]),r},Dh=o("[132] INTEGER_POSITIVE"),Mh=function(e){return e.value="+"+e.value,e},Bh=o("[133] DECIMAL_POSITIVE"),Uh=function(e){return e.value="+"+e.value,e},qh=o("[134] DOUBLE_POSITIVE"),Gh=o("[135] INTEGER_NEGATIVE"),Hh=function(e){return e.value="-"+e.value,e},Vh=o("[136] DECIMAL_NEGATIVE"),Xh=o("[137] DOUBLE_NEGATIVE"),Wh=o("[138] EXPONENT"),zh=/^[eE]/,$h=i(["e","E"],!1,!1),Yh=/^[+\-]/,Jh=i(["+","-"],!1,!1),Kh=function(e,t,r){return tg([e,t,r])},Zh=o("[139] STRING_LITERAL1"),ev="'",tv=n("'",!1),rv=/^[^'\\\n\r]/,nv=i(["'","\\","\n","\r"],!0,!1),iv=function(e){return tg(e)},ov=o("[140] STRING_LITERAL2"),av='"',sv=n('"',!1),uv=/^[^"\\\n\r]/,lv=i(['"',"\\","\n","\r"],!0,!1),cv=o("[141] STRING_LITERAL_LONG1"),fv="'''",pv=n("'''",!1),dv=/^[^'\\]/,hv=i(["'","\\"],!0,!1),vv=o("[142] STRING_LITERAL_LONG2"),yv='"""',gv=n('"""',!1),bv=/^[^"\\]/,mv=i(['"',"\\"],!0,!1),_v=o("[143] ECHAR"),Ev="\\",kv=n("\\",!1),wv=/^[tbnrf"']/,xv=i(["t","b","n","r","f",'"',"'"],!1,!1),Sv=o("[144] NIL"),Tv=function(){return{token:"triplesnodecollection",triplesContext:[],chainSubject:[{token:"uri",value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}]}},Av=o("[145] WS"),Iv=/^[ ]/,Cv=i([" "],!1,!1),Rv=/^[\t]/,Fv=i(["\t"],!1,!1),jv=/^[\r]/,Pv=i(["\r"],!1,!1),Nv=/^[\n]/,Lv=i(["\n"],!1,!1),Ov=o(" COMMENT"),Qv="#",Dv=n("#",!1),Mv=/^[^\n\r]/,Bv=i(["\n","\r"],!0,!1),Uv=o("[146] ANON"),qv=o("[147] PN_CHARS_BASE"),Gv=/^[A-Z]/,Hv=i([["A","Z"]],!1,!1),Vv=/^[a-z]/,Xv=i([["a","z"]],!1,!1),Wv=/^[\xC0-\xD6]/,zv=i([["À","Ö"]],!1,!1),$v=/^[\xD8-\xF6]/,Yv=i([["Ø","ö"]],!1,!1),Jv=/^[\xF8-\u02FF]/,Kv=i([["ø","˿"]],!1,!1),Zv=/^[\u0370-\u037D]/,ey=i([["Ͱ","ͽ"]],!1,!1),ty=/^[\u037F-\u1FFF]/,ry=i([["Ϳ","῿"]],!1,!1),ny=/^[\u200C-\u200D]/,iy=i([["‌","‍"]],!1,!1),oy=/^[\u2070-\u218F]/,ay=i([["⁰","↏"]],!1,!1),sy=/^[\u2C00-\u2FEF]/,uy=i([["Ⰰ","⿯"]],!1,!1),ly=/^[\u3001-\uD7FF]/,cy=i([["、","퟿"]],!1,!1),fy=/^[\uF900-\uFDCF]/,py=i([["豈","﷏"]],!1,!1),dy=/^[\uFDF0-\uFFFD]/,hy=i([["ﷰ","�"]],!1,!1),vy=/^[\u1000-\uEFFF]/,yy=i([["က",""]],!1,!1),gy=o("[148] PN_CHARS_U"),by="_",my=n("_",!1),_y=o("[149] VARNAME"),Ey=/^[\xB7]/,ky=i(["·"],!1,!1),wy=/^[\u0300-\u036F]/,xy=i([["̀","ͯ"]],!1,!1),Sy=/^[\u203F-\u2040]/,Ty=i([["‿","⁀"]],!1,!1),Ay=function(e,t){return e+t.join("")},Iy=o("[150] PN_CHARS"),Cy=o("[151] PN_PREFIX"),Ry=function(e,t){if("."==t[t.length-1])throw new Error("Wrong PN_PREFIX, cannot finish with '.'");return e+t.join("")},Fy=o("[152] PN_LOCAL"),jy=function(e,t){return e+(t||[]).join("")},Py=o("[170] PLX"),Ny=o("[171] PERCENT"),Ly="%",Oy=n("%",!1),Qy=function(e){return e.join("")},Dy=o("[172] HEX"),My=/^[A-F]/,By=i([["A","F"]],!1,!1),Uy=/^[a-f]/,qy=i([["a","f"]],!1,!1),Gy=o("[173] PN_LOCAL_ESC"),Hy="~",Vy=n("~",!1),Xy="&",Wy=n("&",!1),zy=function(e){return"\\"+e},$y=0,Yy=0,Jy=[{line:1,column:1}],Ky=0,Zy=[],eg=0;if("startRule"in r){if(!(r.startRule in wr))throw new Error("Can't start parsing from rule \""+r.startRule+'".');xr=wr[r.startRule]}var tg=function(e){for(var t="",r=0;r<e.length;r++)"string"==typeof e[r]?t+=e[r]:t+=e[r].join("");return t},rg=0,ng={},ig=function(e,t){ng[e]=t},og=function(e){ng[null]=e},ag=function(e){var t="";if(null==e)return null;for(var r=0;r<e.length;r++)t+=e[r];return t.toUpperCase()};if((Er=xr())!==kr&&$y===t.length)return Er;throw Er!==kr&&$y<t.length&&u(function(){return{type:"end"}}()),l(Zy,Ky<t.length?t.charAt(Ky):null,Ky<t.length?s(Ky,Ky+1):s(Ky,Ky))}return function(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}(e,Error),e.buildMessage=function(e,t){function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}function n(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}function i(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}function o(e){return a[e.type](e)}var a={literal:function(e){return'"'+n(e.text)+'"'},class:function(e){var t,r="";for(t=0;t<e.parts.length;t++)r+=e.parts[t]instanceof Array?i(e.parts[t][0])+"-"+i(e.parts[t][1]):i(e.parts[t]);return"["+(e.inverted?"^":"")+r+"]"},any:function(e){return"any character"},end:function(e){return"end of input"},other:function(e){return e.description}};return"Expected "+function(e){var t,r,n=new Array(e.length);for(t=0;t<e.length;t++)n[t]=o(e[t]);if(n.sort(),n.length>0){for(t=1,r=1;t<n.length;t++)n[t-1]!==n[t]&&(n[r]=n[t],r++);n.length=r}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}(e)+" but "+function(e){return e?'"'+n(e)+'"':"end of input"}(t)+" found."},{SyntaxError:e,parse:t}}()},function(e,t,r){var n=r(0),i=r(0),o={};o.variablesInBGP=function(e){var t=e.variables;if(t)return t;var r=e.value||e;t=[];for(var n in r)r[n]&&"var"===r[n].token?t.push(r[n].value):r[n]&&"blank"===r[n].token&&t.push("blank:"+r[n].value);return e.variables=t,t},o.connected=function(e,t){for(var r="/"+e.vars.join("/")+"/",n=0;n<t.vars.length;n++)if(-1!=r.indexOf("/"+t.vars[n]+"/"))return!0;return!1};var a=function(e,t){for(var r={},n=0;n<e.lenght;n++)r[e[n]]=1;for(n=0;n<t.length;n++){var i=r[t[n]]||0;i++,r[t[n]]=i}var o=[];for(var a in r)2==r[a]&&o.push(r[a]);return o};o.variablesIntersectionBGP=function(e,t){return a(o.variablesInBGP(e),o.variablesInBGP(t))},o.executeAndBGPsGroups=function(e){for(var t={},r={},i=0,a=0;a<e.length;a++){var s=e[a],u={},l={},c=o.variablesInBGP(s),f={};for(var p in r)!function(e,t){for(var r=0;r<e.length;r++){var n="/"+e[r]+"/";if(-1!=t.indexOf(n))return!0}return!1}(c,r[p])?(u[p]=t[p],l[p]=r[p]):f[p]=!0;0===n.size(f)?(u["g"+i]=[s],l["g"+i]="/"+c.join("/")+"/",i++):function(e,n,i,o){var a=[],s="",u="";for(var l in n)s+=l,a=a.concat(t[l]),u+=r[l];u=u+c.join("/")+"/",a.push(e),i[s]=a,o[s]=u}(s,f,u,l),t=u,r=l}return n.values(t)},o.intersectionSize=function(e,t){for(var r=t.i.split("_"),n=0;n<r.length;n++)if(""!=r[n]&&-1!=e.i.indexOf("_"+r[n]+"_"))return 1;return 0},o.createJoinTree=function(e,t){for(var r="/"+e.vars.join("/")+"/",i=e.vars.concat([]),o=[],a=0;a<t.vars.length;a++)-1!=r.indexOf("/"+t.vars[a]+"/")?0==t.vars[a].indexOf("_:")?o.push("blank:"+t.vars[a]):o.push(t.vars[a]):i.push(t.vars[a]);for(var s=t.i.split("_"),u=e.i.split("_"),l={},a=0;a<s.length;a++)""!=s[a]&&(l[s[a]]=!0);for(var a=0;a<u.length;a++)""!=u[a]&&(l[u[a]]=!0);var c=n.keys(l);return{left:e,right:t,cost:e.cost+t.cost,i:"_"+c.sort().join("_")+"_",vars:i,join:o}},o.executeBushyTree=function(e,t,r,n,i){null==e.left?o.executeEmptyJoinBGP(e.right,t,r,n,i):null==e.right?o.executeEmptyJoinBGP(e.left,t,r,n,i):o.executeBushyTree(e.left,t,r,n,function(a){null!=a?o.executeBushyTree(e.right,t,r,n,function(t){i(null!=t?o.joinBindings2(e.join,a,t):null)}):i(null)})},o.executeAndBGPsDPSize=function(e,t,r,n,a){var s=o.executeAndBGPsGroups(e),u=[];i.eachSeries(s,function(e,t){r.computeCosts(e,n,function(e){var r={},n={},i={},a=1,s=null,l={};i[1]=[];for(var c=0;c<e.length;c++){var f=[];delete e[c].variables;for(var p in e[c])"_cost"!=p&&("var"===e[c][p].token?f.push(e[c][p].value):"blank"===e[c][p].token&&f.push(e[c][p].value));n["_"+c+"_"]={left:e[c],right:null,cost:e[c]._cost,i:"_"+c+"_",vars:f};var d={left:e[c],right:null,cost:e[c]._cost,i:"_"+c+"_",vars:f};r["_"+c+"_"]=d,delete e[c]._cost,l["_"+c+"_"]=!0,i[1].push("_"+c+"_"),(null==s||s.cost>d.cost)&&(s=d)}for(var h=2;h<=e.length;h++)for(var v=1;v<h;v++)for(var y=h-v,g=i[""+v]||[],b=i[""+y]||[],c=0;c<g.length;c++)for(var m=0;m<b.length;m++)if(g[c]!==b[m]){var _=n[g[c]],E=n[b[m]];if(0==o.intersectionSize(_,E)&&o.connected(_,E)){a=h;var k=r[_.i],w=r[E.i],x=o.createJoinTree(k,w);if(!l[x.i]){l[x.i]=!0;var S=x.cost+1;null!=r[x.i]&&(S=r[x.i].cost);var T=i[h]||[];T.push(x.i),n[x.i]=x,i[h]=T,S>x.cost&&(a===h&&(s=x),r[x.i]=x)}}}u.push(s),t()})},function(){var e=null;i.eachSeries(u,function(i,a){o.executeBushyTree(i,t,r,n,function(t){t?null==e?(e=t,a()):(e=o.crossProductBindings(e,t),a()):a("Error executing bushy tree")})},function(t){t?a(null,t):a(e)})})},o.executeEmptyJoinBGP=function(e,t,r,n,i){return o.executeBGPDatasets(e,t,r,n,i)},o.executeBGPDatasets=function(e,t,r,n,a){var s={};if(null==e.graph){var u=[];i.eachSeries(t.implicit,function(t,i){null==s[t.oid]?(s[t.oid]=!0,e.graph=t,r.rangeQuery(e,n,function(t){t=o.buildBindingsFromRange(t,e),u.push(t),i()})):i()},function(){var e=o.unionManyBindings(u);a(e)})}else if("var"===e.graph.token){var l=e.graph.value,u=[];i.eachSeries(t.named,function(t,i){null==s[t.oid]?(s[t.oid]=!0,e.graph=t,null!=u?r.rangeQuery(e,n,function(r){if(null!=r){r=o.buildBindingsFromRange(r,e);for(var n=0;n<r.length;n++)r[n][l]=t.oid;u.push(r)}else u=null;i()}):i()):i()},function(){if(null==u)a(null);else{var e=o.unionManyBindings(u);a(e)}})}else r.rangeQuery(e,n,function(t){null!=t?(t=o.buildBindingsFromRange(t,e),a(t)):a(null)})},o.buildBindingsFromRange=function(e,t){o.variablesInBGP(t);var r=t.value||t,n={};for(c in r)r[c]&&"var"===r[c].token?n[c]=r[c].value:r[c]&&"blank"===r[c].token&&(n[c]="blank:"+r[c].value);var i=[];if(null!=e)for(var a=0;a<e.length;a++){var s={},u=e[a],l=!1;for(var c in n){var f=u[c];if(null!=s[n[c]]&&s[n[c]]!==f){l=!0;break}s[n[c]]=f}l||i.push(s)}return i},o.areCompatibleBindings=function(e,t){for(var r in e)if(null!=t[r]&&t[r]!=e[r])return!1;return!0},o.mergeBindings=function(e,t){var r={};for(var n in e)r[n]=e[n];for(var n in t)r[n]=t[n];return r},o.joinBindings2=function(e,t,r){for(var n,i,a,s,u,l={},c=[],f=0;f<t.length;f++){n=t[f],u=l;for(var p=0;p<e.length;p++)i=e[p],a=n[i],p==e.length-1?(s=u[a]||[],s.push(n),u[a]=s):(s=u[a]||{},u[a]=s,u=s)}for(var f=0;f<r.length;f++){n=r[f],u=l;for(var p=0;p<e.length;p++)if(i=e[p],a=n[i],null!=u[a])if(p==e.length-1)for(var d=0;d<u[a].length;d++)c.push(o.mergeBindings(u[a][d],n));else u=u[a]}return c},o.joinBindings=function(e,t){for(var r=[],n=0;n<e.length;n++)for(var i=e[n],a=0;a<t.length;a++){var s=t[a];o.areCompatibleBindings(i,s)&&r.push(o.mergeBindings(i,s))}return r},o.augmentMissingBindings=function(e,t){for(var r in t)null==e[r]&&(e[r]=null);return e},o.leftOuterJoinBindings=function(e,t){for(var r=[],n=0;n<e.length;n++){for(var i=e[n],a=!1,s=0;s<t.length;s++){var u=t[s];o.areCompatibleBindings(i,u)&&(a=!0,r.push(o.mergeBindings(i,u)))}!1===a&&(o.augmentMissingBindings(i,u),r.push(i))}return r},o.crossProductBindings=function(e,t){for(var r=[],n=0;n<e.length;n++)for(var i=e[n],a=0;a<t.length;a++){var s=t[a];r.push(o.mergeBindings(i,s))}return r},o.unionBindings=function(e,t){return e.concat(t)},o.unionManyBindings=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];t=o.unionBindings(t,n)}return t},e.exports={QueryPlan:o}},function(e,t,r){var n=r(224).NetworkTransport,i=r(243).RVN3Parser,o=r(252).JSONLDParser,a=r(0),s=function(e){if(this.precedences=["text/turtle","text/n3","application/ld+json","application/json"],this.parsers={"text/turtle":i.parser,"text/n3":i.parser,"application/ld+json":o.parser,"application/json":o.parser},"undefined"!=typeof RDFXMLParser&&(this.precedences.push("application/rdf+xml"),this.parsers["application/rdf+xml"]=RDFXMLParser.parser),null!=e)for(var t in e.parsers)this.parsers[t]=e.parsers[t];if(e&&null!=e.precedences){this.precedences=e.precedences;for(var t in e.parsers)a.include(this.precedences,t)||this.precedences.push(t)}this.acceptHeaderValue="";for(var r=0;r<this.precedences.length;r++)this.acceptHeaderValue=0!=r?this.acceptHeaderValue+","+this.precedences[r]:this.acceptHeaderValue+this.precedences[r]};s.prototype.registerParser=function(e,t){this.parsers[e]=t,this.precedences.push(e)},s.prototype.unregisterParser=function(e){delete this.parsers[e];for(var t=[],r=0;r<this.precedences.length;r++)this.precedences[r]!=e&&t.push(this.precedences[r]);this.precedences=t},s.prototype.setAcceptHeaderPrecedence=function(e){this.precedences=e},s.prototype.load=function(e,t,r){var i=this;n.load(e,this.acceptHeaderValue,function(n,o){if(n)r(n);else{var a=o.headers["Content-Type"]||o.headers["content-type"],s=o.data;if(null!=a){a=a.split(";")[0];for(var u in i.parsers)if(-1!=u.indexOf("/")){var l=u.split("/");if("*"===l[1]){if(-1!=a.indexOf(l[0]))return i.tryToParse(i.parsers[u],t,s,{documentURI:e},r)}else{if(-1!=a.indexOf(u))return i.tryToParse(i.parsers[u],t,s,{documentURI:e},r);if(-1!=a.indexOf(l[1]))return i.tryToParse(i.parsers[u],t,s,{documentURI:e},r)}}else if(-1!=a.indexOf(u))return i.tryToParse(i.parsers[u],t,s,{documentURI:e},r);r(new Error("Unknown media type : "+a))}else r(new Error("Uknown media type"))}})},s.prototype.loadFromFile=function(e,t,n,i){try{var o=this;r(256).readFile(n.split("file:/")[1],function(r,a){if(r)i(r);else{var a=a.toString("utf8");o.tryToParse(e,t,a,{documentURI:n},i)}})}catch(e){i(e)}},s.prototype.tryToParse=function(e,t,r,n,i){try{"string"==typeof r&&(r=a.normalizeUnicodeLiterals(r)),e.parse(r,t,n,i)}catch(e){console.log(e.message),console.log(e.stack),i(e)}},e.exports={RDFLoader:s}},function(e,t,r){if(!r(0).isWorker()){var n=r(120),i=r(242),o=r(128);NetworkTransport={load:function(e,t,r,a){var s=null==a?3:a,u=o.parse(e,!0,!0),l={host:u.host,hostname:u.hostname,method:"GET",path:u.path,headers:{host:u.hostname,Accept:t}},c=null;"http:"===u.protocol?(l.port=u.port||80,c=n):"https:"===u.protocol&&(l.port=u.port||443,c=i);var f=c.request(l,function(e){var n=e.headers,i="";if("2"==(""+e.statusCode)[0])e.on("end",function(){r(null,{headers:n,data:i})}),e.on("data",function(e){i+=e});else if("3"==(""+e.statusCode)[0])if(0==s)r(new Error("Too many redirections"));else{var o=n.Location||n.location;null!=o?NetworkTransport.load(o,t,r,s-1):r(new Error("Redirection without location header"))}else r(new Error("HTTP error: "+e.statusCode))});f.on("error",r),f.end()}},e.exports={NetworkTransport:NetworkTransport}}},function(e,t,r){(function(t,n,i){function o(e,t){return s.fetch&&t?"fetch":s.mozchunkedarraybuffer?"moz-chunked-arraybuffer":s.msstream?"ms-stream":s.arraybuffer&&e?"arraybuffer":s.vbArray&&e?"text:vbarray":"text"}function a(e){try{var t=e.status;return null!==t&&0!==t}catch(e){return!1}}var s=r(122),u=r(18),l=r(228),c=r(37),f=r(234),p=l.IncomingMessage,d=l.readyStates,h=e.exports=function(e){var r=this;c.Writable.call(r),r._opts=e,r._body=[],r._headers={},e.auth&&r.setHeader("Authorization","Basic "+new t(e.auth).toString("base64")),Object.keys(e.headers).forEach(function(t){r.setHeader(t,e.headers[t])});var n,i=!0;if("disable-fetch"===e.mode||"timeout"in e)i=!1,n=!0;else if("prefer-streaming"===e.mode)n=!1;else if("allow-wrong-content-type"===e.mode)n=!s.overrideMimeType;else{if(e.mode&&"default"!==e.mode&&"prefer-fast"!==e.mode)throw new Error("Invalid value for opts.mode");n=!0}r._mode=o(n,i),r.on("finish",function(){r._onFinish()})};u(h,c.Writable),h.prototype.setHeader=function(e,t){var r=this,n=e.toLowerCase();-1===v.indexOf(n)&&(r._headers[n]={name:e,value:t})},h.prototype.getHeader=function(e){var t=this._headers[e.toLowerCase()];return t?t.value:null},h.prototype.removeHeader=function(e){delete this._headers[e.toLowerCase()]},h.prototype._onFinish=function(){var e=this;if(!e._destroyed){var r=e._opts,o=e._headers,a=null;"GET"!==r.method&&"HEAD"!==r.method&&(a=s.blobConstructor?new n.Blob(e._body.map(function(e){return f(e)}),{type:(o["content-type"]||{}).value||""}):t.concat(e._body).toString());var u=[];if(Object.keys(o).forEach(function(e){var t=o[e].name,r=o[e].value;Array.isArray(r)?r.forEach(function(e){u.push([t,e])}):u.push([t,r])}),"fetch"===e._mode)n.fetch(e._opts.url,{method:e._opts.method,headers:u,body:a||void 0,mode:"cors",credentials:r.withCredentials?"include":"same-origin"}).then(function(t){e._fetchResponse=t,e._connect()},function(t){e.emit("error",t)});else{var l=e._xhr=new n.XMLHttpRequest;try{l.open(e._opts.method,e._opts.url,!0)}catch(t){return void i.nextTick(function(){e.emit("error",t)})}"responseType"in l&&(l.responseType=e._mode.split(":")[0]),"withCredentials"in l&&(l.withCredentials=!!r.withCredentials),"text"===e._mode&&"overrideMimeType"in l&&l.overrideMimeType("text/plain; charset=x-user-defined"),"timeout"in r&&(l.timeout=r.timeout,l.ontimeout=function(){e.emit("timeout")}),u.forEach(function(e){l.setRequestHeader(e[0],e[1])}),e._response=null,l.onreadystatechange=function(){switch(l.readyState){case d.LOADING:case d.DONE:e._onXHRProgress()}},"moz-chunked-arraybuffer"===e._mode&&(l.onprogress=function(){e._onXHRProgress()}),l.onerror=function(){e._destroyed||e.emit("error",new Error("XHR error"))};try{l.send(a)}catch(t){return void i.nextTick(function(){e.emit("error",t)})}}}},h.prototype._onXHRProgress=function(){var e=this;a(e._xhr)&&!e._destroyed&&(e._response||e._connect(),e._response._onXHRProgress())},h.prototype._connect=function(){var e=this;e._destroyed||(e._response=new p(e._xhr,e._fetchResponse,e._mode),e._response.on("error",function(t){e.emit("error",t)}),e.emit("response",e._response))},h.prototype._write=function(e,t,r){this._body.push(e),r()},h.prototype.abort=h.prototype.destroy=function(){var e=this;e._destroyed=!0,e._response&&(e._response._destroyed=!0),e._xhr&&e._xhr.abort()},h.prototype.end=function(e,t,r){var n=this;"function"==typeof e&&(r=e,e=void 0),c.Writable.prototype.end.call(n,e,t,r)},h.prototype.flushHeaders=function(){},h.prototype.setTimeout=function(){},h.prototype.setNoDelay=function(){},h.prototype.setSocketKeepAlive=function(){};var v=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"]}).call(t,r(31).Buffer,r(7),r(12))},function(e,t,r){"use strict";function n(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function i(e){return 3*e.length/4-n(e)}function o(e){var t,r,i,o,a,s=e.length;o=n(e),a=new f(3*s/4-o),r=o>0?s-4:s;var u=0;for(t=0;t<r;t+=4)i=c[e.charCodeAt(t)]<<18|c[e.charCodeAt(t+1)]<<12|c[e.charCodeAt(t+2)]<<6|c[e.charCodeAt(t+3)],a[u++]=i>>16&255,a[u++]=i>>8&255,a[u++]=255&i;return 2===o?(i=c[e.charCodeAt(t)]<<2|c[e.charCodeAt(t+1)]>>4,a[u++]=255&i):1===o&&(i=c[e.charCodeAt(t)]<<10|c[e.charCodeAt(t+1)]<<4|c[e.charCodeAt(t+2)]>>2,a[u++]=i>>8&255,a[u++]=255&i),a}function a(e){return l[e>>18&63]+l[e>>12&63]+l[e>>6&63]+l[63&e]}function s(e,t,r){for(var n,i=[],o=t;o<r;o+=3)n=(e[o]<<16)+(e[o+1]<<8)+e[o+2],i.push(a(n));return i.join("")}function u(e){for(var t,r=e.length,n=r%3,i="",o=[],a=0,u=r-n;a<u;a+=16383)o.push(s(e,a,a+16383>u?u:a+16383));return 1===n?(t=e[r-1],i+=l[t>>2],i+=l[t<<4&63],i+="=="):2===n&&(t=(e[r-2]<<8)+e[r-1],i+=l[t>>10],i+=l[t>>4&63],i+=l[t<<2&63],i+="="),o.push(i),o.join("")}t.byteLength=i,t.toByteArray=o,t.fromByteArray=u;for(var l=[],c=[],f="undefined"!=typeof Uint8Array?Uint8Array:Array,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,h=p.length;d<h;++d)l[d]=p[d],c[p.charCodeAt(d)]=d;c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,r,n,i){var o,a,s=8*i-n-1,u=(1<<s)-1,l=u>>1,c=-7,f=r?i-1:0,p=r?-1:1,d=e[t+f];for(f+=p,o=d&(1<<-c)-1,d>>=-c,c+=s;c>0;o=256*o+e[t+f],f+=p,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=n;c>0;a=256*a+e[t+f],f+=p,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,n),o-=l}return(d?-1:1)*a*Math.pow(2,o-n)},t.write=function(e,t,r,n,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,f=c>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,h=n?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),t+=a+f>=1?p/u:p*Math.pow(2,1-f),t*u>=2&&(a++,u/=2),a+f>=c?(s=0,a=c):a+f>=1?(s=(t*u-1)*Math.pow(2,i),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[r+d]=255&s,d+=h,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;e[r+d]=255&a,d+=h,a/=256,l-=8);e[r+d-h]|=128*v}},function(e,t,r){(function(e,n,i){var o=r(122),a=r(18),s=r(37),u=t.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},l=t.IncomingMessage=function(t,r,i){function a(){l.read().then(function(e){if(!u._destroyed){if(e.done)return void u.push(null);u.push(new n(e.value)),a()}}).catch(function(e){u.emit("error",e)})}var u=this;if(s.Readable.call(u),u._mode=i,u.headers={},u.rawHeaders=[],u.trailers={},u.rawTrailers=[],u.on("end",function(){e.nextTick(function(){u.emit("close")})}),"fetch"===i){u._fetchResponse=r,u.url=r.url,u.statusCode=r.status,u.statusMessage=r.statusText,r.headers.forEach(function(e,t){u.headers[t.toLowerCase()]=e,u.rawHeaders.push(t,e)});var l=r.body.getReader();a()}else{u._xhr=t,u._pos=0,u.url=t.responseURL,u.statusCode=t.status,u.statusMessage=t.statusText;if(t.getAllResponseHeaders().split(/\r?\n/).forEach(function(e){var t=e.match(/^([^:]+):\s*(.*)/);if(t){var r=t[1].toLowerCase();"set-cookie"===r?(void 0===u.headers[r]&&(u.headers[r]=[]),u.headers[r].push(t[2])):void 0!==u.headers[r]?u.headers[r]+=", "+t[2]:u.headers[r]=t[2],u.rawHeaders.push(t[1],t[2])}}),u._charset="x-user-defined",!o.overrideMimeType){var c=u.rawHeaders["mime-type"];if(c){var f=c.match(/;\s*charset=([^;])(;|$)/);f&&(u._charset=f[1].toLowerCase())}u._charset||(u._charset="utf-8")}}};a(l,s.Readable),l.prototype._read=function(){},l.prototype._onXHRProgress=function(){var e=this,t=e._xhr,r=null;switch(e._mode){case"text:vbarray":if(t.readyState!==u.DONE)break;try{r=new i.VBArray(t.responseBody).toArray()}catch(e){}if(null!==r){e.push(new n(r));break}case"text":try{r=t.responseText}catch(t){e._mode="text:vbarray";break}if(r.length>e._pos){var o=r.substr(e._pos);if("x-user-defined"===e._charset){for(var a=new n(o.length),s=0;s<o.length;s++)a[s]=255&o.charCodeAt(s);e.push(a)}else e.push(o,e._charset);e._pos=r.length}break;case"arraybuffer":if(t.readyState!==u.DONE||!t.response)break;r=t.response,e.push(new n(new Uint8Array(r)));break;case"moz-chunked-arraybuffer":if(r=t.response,t.readyState!==u.LOADING||!r)break;e.push(new n(new Uint8Array(r)));break;case"ms-stream":if(r=t.response,t.readyState!==u.LOADING)break;var l=new i.MSStreamReader;l.onprogress=function(){l.result.byteLength>e._pos&&(e.push(new n(new Uint8Array(l.result.slice(e._pos)))),e._pos=l.result.byteLength)},l.onload=function(){e.push(null)},l.readAsArrayBuffer(r)}e._xhr.readyState===u.DONE&&"ms-stream"!==e._mode&&e.push(null)}}).call(t,r(12),r(31).Buffer,r(7))},function(e,t){},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,r){e.copy(t,r)}var o=r(79).Buffer;e.exports=function(){function e(){n(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},e.prototype.concat=function(e){if(0===this.length)return o.alloc(0);if(1===this.length)return this.head.data;for(var t=o.allocUnsafe(e>>>0),r=this.head,n=0;r;)i(r.data,t,n),n+=r.data.length,r=r.next;return t},e}()},function(e,t,r){(function(e,t){!function(e,r){"use strict";function n(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var n={callback:e,args:t};return l[u]=n,s(u),u++}function i(e){delete l[e]}function o(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(r,n)}}function a(e){if(c)setTimeout(a,0,e);else{var t=l[e];if(t){c=!0;try{o(t)}finally{i(e),c=!1}}}}if(!e.setImmediate){var s,u=1,l={},c=!1,f=e.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(e);p=p&&p.setTimeout?p:e,"[object process]"==={}.toString.call(e.process)?function(){s=function(e){t.nextTick(function(){a(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?function(){var t="setImmediate$"+Math.random()+"$",r=function(r){r.source===e&&"string"==typeof r.data&&0===r.data.indexOf(t)&&a(+r.data.slice(t.length))};e.addEventListener?e.addEventListener("message",r,!1):e.attachEvent("onmessage",r),s=function(r){e.postMessage(t+r,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){a(e.data)},s=function(t){e.port2.postMessage(t)}}():f&&"onreadystatechange"in f.createElement("script")?function(){var e=f.documentElement;s=function(t){var r=f.createElement("script");r.onreadystatechange=function(){a(t),r.onreadystatechange=null,e.removeChild(r),r=null},e.appendChild(r)}}():function(){s=function(e){setTimeout(a,0,e)}}(),p.setImmediate=n,p.clearImmediate=i}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,r(7),r(12))},function(e,t,r){(function(t){function r(e,t){function r(){if(!i){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),i=!0}return e.apply(this,arguments)}if(n("noDeprecation"))return e;var i=!1;return r}function n(e){try{if(!t.localStorage)return!1}catch(e){return!1}var r=t.localStorage[e];return null!=r&&"true"===String(r).toLowerCase()}e.exports=r}).call(t,r(7))},function(e,t,r){"use strict";function n(e){if(!(this instanceof n))return new n(e);i.call(this,e)}e.exports=n;var i=r(127),o=r(38);o.inherits=r(18),o.inherits(n,i),n.prototype._transform=function(e,t,r){r(null,e)}},function(e,t,r){var n=r(31).Buffer;e.exports=function(e){if(e instanceof Uint8Array){if(0===e.byteOffset&&e.byteLength===e.buffer.byteLength)return e.buffer;if("function"==typeof e.buffer.slice)return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}if(n.isBuffer(e)){for(var t=new Uint8Array(e.length),r=e.length,i=0;i<r;i++)t[i]=e[i];return t.buffer}throw new Error("Argument must be a Buffer")}},function(e,t){function r(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var i in r)n.call(r,i)&&(e[i]=r[i])}return e}e.exports=r;var n=Object.prototype.hasOwnProperty},function(e,t){e.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},function(e,t,r){(function(e,n){var i;!function(o){function a(e){throw new RangeError(j[e])}function s(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function u(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),e=e.replace(F,"."),n+s(e.split("."),t).join(".")}function l(e){for(var t,r,n=[],i=0,o=e.length;i<o;)t=e.charCodeAt(i++),t>=55296&&t<=56319&&i<o?(r=e.charCodeAt(i++),56320==(64512&r)?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--)):n.push(t);return n}function c(e){return s(e,function(e){var t="";return e>65535&&(e-=65536,t+=L(e>>>10&1023|55296),e=56320|1023&e),t+=L(e)}).join("")}function f(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:E}function p(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function d(e,t,r){var n=0;for(e=r?N(e/S):e>>1,e+=N(e/t);e>P*w>>1;n+=E)e=N(e/P);return N(n+(P+1)*e/(e+x))}function h(e){var t,r,n,i,o,s,u,l,p,h,v=[],y=e.length,g=0,b=A,m=T;for(r=e.lastIndexOf(I),r<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&a("not-basic"),v.push(e.charCodeAt(n));for(i=r>0?r+1:0;i<y;){for(o=g,s=1,u=E;i>=y&&a("invalid-input"),l=f(e.charCodeAt(i++)),(l>=E||l>N((_-g)/s))&&a("overflow"),g+=l*s,p=u<=m?k:u>=m+w?w:u-m,!(l<p);u+=E)h=E-p,s>N(_/h)&&a("overflow"),s*=h;t=v.length+1,m=d(g-o,t,0==o),N(g/t)>_-b&&a("overflow"),b+=N(g/t),g%=t,v.splice(g++,0,b)}return c(v)}function v(e){var t,r,n,i,o,s,u,c,f,h,v,y,g,b,m,x=[];for(e=l(e),y=e.length,t=A,r=0,o=T,s=0;s<y;++s)(v=e[s])<128&&x.push(L(v));for(n=i=x.length,i&&x.push(I);n<y;){for(u=_,s=0;s<y;++s)(v=e[s])>=t&&v<u&&(u=v);for(g=n+1,u-t>N((_-r)/g)&&a("overflow"),r+=(u-t)*g,t=u,s=0;s<y;++s)if(v=e[s],v<t&&++r>_&&a("overflow"),v==t){for(c=r,f=E;h=f<=o?k:f>=o+w?w:f-o,!(c<h);f+=E)m=c-h,b=E-h,x.push(L(p(h+m%b,0))),c=N(m/b);x.push(L(p(c,0))),o=d(r,g,n==i),r=0,++n}++r,++t}return x.join("")}function y(e){return u(e,function(e){return C.test(e)?h(e.slice(4).toLowerCase()):e})}function g(e){return u(e,function(e){return R.test(e)?"xn--"+v(e):e})}var b=("object"==typeof t&&t&&t.nodeType,"object"==typeof e&&e&&e.nodeType,"object"==typeof n&&n);var m,_=2147483647,E=36,k=1,w=26,x=38,S=700,T=72,A=128,I="-",C=/^xn--/,R=/[^\x20-\x7E]/,F=/[\x2E\u3002\uFF0E\uFF61]/g,j={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},P=E-k,N=Math.floor,L=String.fromCharCode;m={version:"1.4.1",ucs2:{decode:l,encode:c},decode:h,encode:v,toASCII:g,toUnicode:y},void 0!==(i=function(){return m}.call(t,r,t,e))&&(e.exports=i)}()}).call(t,r(108)(e),r(7))},function(e,t,r){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,r){"use strict";t.decode=t.parse=r(240),t.encode=t.stringify=r(241)},function(e,t,r){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,r,o){t=t||"&",r=r||"=";var a={};if("string"!=typeof e||0===e.length)return a;var s=/\+/g;e=e.split(t);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var l=e.length;u>0&&l>u&&(l=u);for(var c=0;c<l;++c){var f,p,d,h,v=e[c].replace(s,"%20"),y=v.indexOf(r);y>=0?(f=v.substr(0,y),p=v.substr(y+1)):(f=v,p=""),d=decodeURIComponent(f),h=decodeURIComponent(p),n(a,d)?i(a[d])?a[d].push(h):a[d]=[a[d],h]:a[d]=h}return a};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,r){"use strict";function n(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,r,s){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?n(a(e),function(a){var s=encodeURIComponent(i(a))+r;return o(e[a])?n(e[a],function(e){return s+encodeURIComponent(i(e))}).join(t):s+encodeURIComponent(i(e[a]))}).join(t):s?encodeURIComponent(i(s))+r+encodeURIComponent(i(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},function(e,t,r){var n=r(120),i=e.exports;for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o]);i.request=function(e,t){return e||(e={}),e.scheme="https",e.protocol="https:",n.request.call(this,e,t)}},function(e,t,r){function n(e){switch(e[0]){case'"':if(e.indexOf("^^")>0){var t=e.split("^^");return{literal:t[0]+"^^<"+t[1]+">"}}return{literal:e};case"_":return{blank:e.replace("b","")};default:return{token:"uri",value:e,prefix:null,suffix:null}}}var i=r(244).Parser,o={};o.parser={async:!0,parse:function(e,t,r,o){o||(o=r,r=t,t=null),t&&"string"==typeof t&&(t={token:"uri",value:t,prefix:null,suffix:null}),r&&r.baseURI&&(r.documentIRI=r.baseURI);var a=[];new i(r).parse(e,function(e,r){e?o(e):r?a.push({subject:n(r.subject),predicate:n(r.predicate),object:n(r.object),graph:t}):o(!1,a)})},resetBlankNodeIds:function(){i._resetBlankNodeIds()}},e.exports={RVN3Parser:o}},function(e,t,r){var n,n;n=function(){};var t=e.exports={Lexer:n("./lib/N3Lexer"),Parser:n("./lib/N3Parser"),Writer:n("./lib/N3Writer"),Store:n("./lib/N3Store"),StreamParser:n("./lib/N3StreamParser"),StreamWriter:n("./lib/N3StreamWriter"),Util:n("./lib/N3Util")};Object.keys(t).forEach(function(e){Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return delete t[e],t[e]=r(245)("./N3"+e)}})})},function(e,t,r){function n(e){return r(i(e))}function i(e){var t=o[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var o={"./N3Lexer":81,"./N3Lexer.js":81,"./N3Parser":82,"./N3Parser.js":82,"./N3Store":129,"./N3Store.js":129,"./N3StreamParser":130,"./N3StreamParser.js":130,"./N3StreamWriter":133,"./N3StreamWriter.js":133,"./N3Util":83,"./N3Util.js":83,"./N3Writer":84,"./N3Writer.js":84};n.keys=function(){return Object.keys(o)},n.resolve=i,e.exports=n,n.id=245},function(e,t,r){e.exports=r(80)},function(e,t,r){e.exports=r(25)},function(e,t,r){e.exports=r(37).Transform},function(e,t,r){e.exports=r(37).PassThrough},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t,r){var n=r(253),i=function(e,t,r){var i=null;n.normalize(e,{},function(e,n){if(e)r(e);else{var o=function(e){return"blank node"===e.type?{blank:e.value}:"IRI"===e.type?{token:"uri",value:e.value}:"literal"===e.type?null!=e.language?{literal:'"'+e.value+'"@'+e.language}:null!==e.datatype?{literal:'"'+e.value+'"^^<'+e.datatype+">"}:{literal:'"'+e.value+'"'}:void 0};i=[];for(var a in n)for(var s=n[a],u=0;u<s.length;u++){var l=s[u];!function(e,r,n){i.push({subject:o(e),predicate:o(r),object:o(n),graph:t})}(l.subject,l.predicate,l.object)}r(null,i)}})};t.JSONLDParser={};var o=t.JSONLDParser;o.parser={async:!0,parse:function(e,t,r,n){try{"string"==typeof e&&(e=JSON.parse(e)),i(e,t,n)}catch(e){n(e)}}},e.exports={JSONLDParser:o}},function(e,t,r){(function(n,i,o,a){var s,u;/**
 * A JavaScript implementation of the JSON-LD API.
 *
 * @author Dave Longley
 *
 * @license BSD 3-Clause License
 * Copyright (c) 2011-2015 Digital Bazaar, Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * Redistributions of source code must retain the above copyright notice,
 * this list of conditions and the following disclaimer.
 *
 * Redistributions in binary form must reproduce the above copyright
 * notice, this list of conditions and the following disclaimer in the
 * documentation and/or other materials provided with the distribution.
 *
 * Neither the name of the Digital Bazaar, Inc. nor the names of its
 * contributors may be used to endorse or promote products derived from
 * this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
 * IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED
 * TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A
 * PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
 * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
!function(){var l=void 0!==n&&n.versions&&n.versions.node,c=!l&&("undefined"!=typeof window||"undefined"!=typeof self);c&&void 0===i&&("undefined"!=typeof window?i=window:"undefined"!=typeof self?i=self:"undefined"!=typeof $&&(i=$));var f=function(e){function t(){}function s(e){for(var t=[],r=Object.keys(e).sort(),n=0;n<r.length;++n){var i=r[n],o=e[i];U(o)||(o=[o]);for(var a=0;a<o.length;++a){var s=o[a];if(null!==s){if(!G(s))throw new Fe("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:e});t.push({"@value":s,"@language":i.toLowerCase()})}}}return t}function u(e,t){if(U(t))for(var r=0;r<t.length;++r)t[r]=u(e,t[r]);else if(K(t))t["@list"]=u(e,t["@list"]);else if(M(t)){Z(t)&&(t["@id"]=e.getId(t["@id"]));for(var n=Object.keys(t).sort(),i=0;i<n.length;++i){var o=n[i];"@id"!==o&&(t[o]=u(e,t[o]))}}return t}function f(t,r,n){if(null===n||void 0===n)return null;var i=N(t,r,{vocab:!0});if("@id"===i)return N(t,n,{base:!0});if("@type"===i)return N(t,n,{vocab:!0,base:!0});var o=e.getContextValue(t,r,"@type");if("@id"===o||"@graph"===i&&G(n))return{"@id":N(t,n,{base:!0})};if("@vocab"===o)return{"@id":N(t,n,{vocab:!0,base:!0})};if(D(i))return n;var a={};if(null!==o)a["@type"]=o;else if(G(n)){var s=e.getContextValue(t,r,"@language");null!==s&&(a["@language"]=s)}return-1===["boolean","number","string"].indexOf(typeof n)&&(n=n.toString()),a["@value"]=n,a}function p(e,t,r){for(var n=[],i=Object.keys(e).sort(),o=0;o<i.length;++o)for(var a=i[o],s=e[a],u=Object.keys(s).sort(),l=0;l<u.length;++l){var c=u[l],f=s[c];if("@type"===c)c=xe;else if(D(c))continue;for(var p=0;p<f.length;++p){var v=f[p],y={};if(y.type=0===a.indexOf("_:")?"blank node":"IRI",y.value=a,ee(a)){var g={};if(g.type=0===c.indexOf("_:")?"blank node":"IRI",g.value=c,ee(c)&&("blank node"!==g.type||r.produceGeneralizedRdf))if(K(v))d(v["@list"],t,y,g,n);else{var b=h(v);b&&n.push({subject:y,predicate:g,object:b})}}}}return n}function d(e,t,r,n,i){for(var o={type:"IRI",value:Ee},a={type:"IRI",value:ke},s={type:"IRI",value:we},u=0;u<e.length;++u){var l=e[u],c={type:"blank node",value:t.getId()};i.push({subject:r,predicate:n,object:c}),r=c,n=o;var f=h(l);f&&i.push({subject:r,predicate:n,object:f}),n=a}i.push({subject:r,predicate:n,object:s})}function h(e){var t={};if(J(e)){t.type="literal";var r=e["@value"],n=e["@type"]||null;W(r)?(t.value=r.toString(),t.datatype=n||ye):V(r)||n===ge?(V(r)||(r=parseFloat(r)),t.value=r.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),t.datatype=n||ge):H(r)?(t.value=r.toFixed(0),t.datatype=n||be):"@language"in e?(t.value=r,t.datatype=n||Ie,t.language=e["@language"]):(t.value=r,t.datatype=n||me)}else{var i=M(e)?e["@id"]:e;t.type=0===i.indexOf("_:")?"blank node":"IRI",t.value=i}return"IRI"!==t.type||ee(t.value)?t:null}function v(e,t){if("IRI"===e.type||"blank node"===e.type)return{"@id":e.value};var r={"@value":e.value};if(e.language)r["@language"]=e.language;else{var n=e.datatype;if(n||(n=me),t){if(n===ye)"true"===r["@value"]?r["@value"]=!0:"false"===r["@value"]&&(r["@value"]=!1);else if(X(r["@value"]))if(n===be){var i=parseInt(r["@value"],10);i.toFixed(0)===r["@value"]&&(r["@value"]=i)}else n===ge&&(r["@value"]=parseFloat(r["@value"]));-1===[ye,be,ge,me].indexOf(n)&&(r["@type"]=n)}else n!==me&&(r["@type"]=n)}return r}function y(e,t){for(var r=["subject","predicate","object"],n=0;n<r.length;++n){var i=r[n];if(e[i].type!==t[i].type||e[i].value!==t[i].value)return!1}return e.object.language===t.object.language&&e.object.datatype===t.object.datatype}function g(t,r,n,i,o,a){if(U(t))for(var s=0;s<t.length;++s)g(t[s],r,n,i,void 0,a);else{if(!M(t))return void(a&&a.push(t));if(J(t)){if("@type"in t){var u=t["@type"];0===u.indexOf("_:")&&(t["@type"]=u=i.getId(u))}return void(a&&a.push(t))}if("@type"in t)for(var l=t["@type"],s=0;s<l.length;++s){var u=l[s];0===u.indexOf("_:")&&i.getId(u)}z(o)&&(o=Z(t)?i.getId(t["@id"]):t["@id"]),a&&a.push({"@id":o});var c=r[n],f=c[o]=c[o]||{};f["@id"]=o;for(var p=Object.keys(t).sort(),d=0;d<p.length;++d){var h=p[d];if("@id"!==h)if("@reverse"!==h)if("@graph"!==h)if("@type"!==h&&D(h)){if("@index"===h&&h in f&&(t[h]!==f[h]||t[h]["@id"]!==f[h]["@id"]))throw new Fe("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:f});f[h]=t[h]}else{var v=t[h];if(0===h.indexOf("_:")&&(h=i.getId(h)),0!==v.length)for(var y=0;y<v.length;++y){var b=v[y];if("@type"===h&&(b=0===b.indexOf("_:")?i.getId(b):b),$(b)||Y(b)){var m=Z(b)?i.getId(b["@id"]):b["@id"];e.addValue(f,h,{"@id":m},{propertyIsArray:!0,allowDuplicate:!1}),g(b,r,n,i,m)}else if(K(b)){var _=[];g(b["@list"],r,n,i,o,_),b={"@list":_},e.addValue(f,h,b,{propertyIsArray:!0,allowDuplicate:!1})}else g(b,r,n,i,o),e.addValue(f,h,b,{propertyIsArray:!0,allowDuplicate:!1})}else e.addValue(f,h,[],{propertyIsArray:!0})}else{o in r||(r[o]={});var E="@merged"===n?n:o;g(t[h],r,E,i)}else{var k={"@id":o},w=t["@reverse"];for(var x in w)for(var S=w[x],T=0;T<S.length;++T){var A=S[T],I=A["@id"];Z(A)&&(I=i.getId(I)),g(A,r,n,i,I),e.addValue(c[I],x,k,{propertyIsArray:!0,allowDuplicate:!1})}}}}}function b(e){for(var t=e["@default"],r=Object.keys(e).sort(),n=0;n<r.length;++n){var i=r[n];if("@default"!==i){var o=e[i],a=t[i];a?"@graph"in a||(a["@graph"]=[]):t[i]=a={"@id":i,"@graph":[]};for(var s=a["@graph"],u=Object.keys(o).sort(),l=0;l<u.length;++l){var c=o[u[l]];Y(c)||s.push(c)}}}return t}function m(e,t,r,n,i){w(r),r=r[0];for(var o=e.options,a={embed:k(r,o,"embed"),explicit:k(r,o,"explicit"),requireAll:k(r,o,"requireAll")},s=x(e,t,r,a),u=Object.keys(s).sort(),l=0;l<u.length;++l){var c=u[l],f=s[c];if("@link"===a.embed&&c in e.link)A(n,i,e.link[c]);else{null===i&&(e.uniqueEmbeds={});var p={};if(p["@id"]=c,e.link[c]=p,"@never"===a.embed||E(f,e.subjectStack))A(n,i,p);else{"@last"===a.embed&&(c in e.uniqueEmbeds&&T(e,c),e.uniqueEmbeds[c]={parent:n,property:i}),e.subjectStack.push(f);for(var d=Object.keys(f).sort(),h=0;h<d.length;h++){var v=d[h];if(D(v))p[v]=te(f[v]);else if(!a.explicit||v in r)for(var y=f[v],g=0;g<y.length;++g){var b=y[g];if(K(b)){var S={"@list":[]};A(p,v,S);var I=b["@list"];for(var C in I)if(b=I[C],Y(b)){var R=v in r?r[v][0]["@list"]:_(a);m(e,[b["@id"]],R,S,"@list")}else A(S,"@list",te(b))}else if(Y(b)){var R=v in r?r[v]:_(a);m(e,[b["@id"]],R,p,v)}else A(p,v,te(b))}}for(var d=Object.keys(r).sort(),h=0;h<d.length;++h){var v=d[h];if(!D(v)){var F=r[v][0];if(!(k(F,o,"omitDefault")||v in p)){var j="@null";"@default"in F&&(j=te(F["@default"])),U(j)||(j=[j]),p[v]=[{"@preserve":j}]}}}A(n,i,p),e.subjectStack.pop()}}}}function _(e){var t={};for(var r in e)void 0!==e[r]&&(t["@"+r]=[e[r]]);return[t]}function E(e,t){for(var r=t.length-1;r>=0;--r)if(t[r]["@id"]===e["@id"])return!0;return!1}function k(e,t,r){var n="@"+r,i=n in e?e[n][0]:t[r];return"embed"===r&&(!0===i?i="@last":!1===i?i="@never":"@always"!==i&&"@never"!==i&&"@link"!==i&&(i="@last")),i}function w(e){if(!U(e)||1!==e.length||!M(e[0]))throw new Fe("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:e})}function x(e,t,r,n){for(var i={},o=0;o<t.length;++o){var a=t[o],s=e.subjects[a];S(s,r,n)&&(i[a]=s)}return i}function S(t,r,n){if("@type"in r&&(1!==r["@type"].length||!M(r["@type"][0]))){for(var i=r["@type"],o=0;o<i.length;++o)if(e.hasValue(t,"@type",i[o]))return!0;return!1}var a=!0,s=!1;for(var u in r){if(D(u)){if("@id"!==u&&"@type"!==u)continue;if(a=!1,"@id"===u&&G(r[u])){if(t[u]!==r[u])return!1;s=!0;continue}}if(a=!1,u in t){if(U(r[u])&&0===r[u].length&&void 0!==t[u])return!1;s=!0}else{var l=U(r[u])&&M(r[u][0])&&"@default"in r[u][0];if(n.requireAll&&!l)return!1}}return a||s}function T(t,r){var n=t.uniqueEmbeds,i=n[r],o=i.parent,a=i.property,s={"@id":r};if(U(o)){for(var u=0;u<o.length;++u)if(e.compareValues(o[u],s)){o[u]=s;break}}else{var l=U(o[a]);e.removeValue(o,a,s,{propertyIsArray:l}),e.addValue(o,a,s,{propertyIsArray:l})}var c=function(e){for(var t=Object.keys(n),r=0;r<t.length;++r){var i=t[r];i in n&&M(n[i].parent)&&n[i].parent["@id"]===e&&(delete n[i],c(i))}};c(r)}function A(t,r,n){M(t)?e.addValue(t,r,n,{propertyIsArray:!0}):t.push(n)}/**
 * Removes the @preserve keywords as the last step of the framing algorithm.
 *
 * @param ctx the active context used to compact the input.
 * @param input the framed, compacted output.
 * @param options the compaction options used.
 *
 * @return the resulting output.
 */
function I(t,r,n){if(U(r)){for(var i=[],o=0;o<r.length;++o){var a=I(t,r[o],n);null!==a&&i.push(a)}r=i}else if(M(r)){
// remove @preserve
if("@preserve"in r)return"@null"===r["@preserve"]?null:r["@preserve"];if(J(r))return r;if(K(r))return r["@list"]=I(t,r["@list"],n),r;var s=F(t,"@id");if(s in r){var u=r[s];if(u in n.link){var l=n.link[u].indexOf(r);if(-1!==l)return n.link[u][l];n.link[u].push(r)}else n.link[u]=[r]}for(var c in r){var a=I(t,r[c],n),f=e.getContextValue(t,c,"@container");n.compactArrays&&U(a)&&1===a.length&&null===f&&(a=a[0]),r[c]=a}}return r}function C(e,t){return e.length<t.length?-1:t.length<e.length?1:e===t?0:e<t?-1:1}function R(e,t,r,n,i,o){null===o&&(o="@null");var a=[];if("@id"!==o&&"@reverse"!==o||!Y(r))a.push(o);else{"@reverse"===o&&a.push("@reverse");var s=F(e,r["@id"],null,{vocab:!0});s in e.mappings&&e.mappings[s]&&e.mappings[s]["@id"]===r["@id"]?a.push.apply(a,["@vocab","@id"]):a.push.apply(a,["@id","@vocab"])}a.push("@none");for(var u=e.inverse[t],l=0;l<n.length;++l){var c=n[l];if(c in u)for(var f=u[c][i],p=0;p<a.length;++p){var d=a[p];if(d in f)return f[d]}}return null}function F(e,t,r,n,i){if(null===t)return t;z(r)&&(r=null),z(i)&&(i=!1),n=n||{};var o=e.getInverse();if(D(t))return t in o?o[t]["@none"]["@type"]["@none"]:t;if(n.vocab&&t in o){var a=e["@language"]||"@none",s=[];M(r)&&"@index"in r&&s.push("@index");var u="@language",l="@null";if(i)u="@type",l="@reverse",s.push("@set");else if(K(r)){"@index"in r||s.push("@list");for(var c=r["@list"],f=0===c.length?a:null,p=null,d=0;d<c.length;++d){var h=c[d],v="@none",y="@none";if(J(h)?"@language"in h?v=h["@language"]:"@type"in h?y=h["@type"]:v="@null":y="@id",null===f?f=v:v!==f&&J(h)&&(f="@none"),null===p?p=y:y!==p&&(p="@none"),"@none"===f&&"@none"===p)break}f=f||"@none",p=p||"@none","@none"!==p?(u="@type",l=p):l=f}else J(r)?"@language"in r&&!("@index"in r)?(s.push("@language"),l=r["@language"]):"@type"in r&&(u="@type",l=r["@type"]):(u="@type",l="@id"),s.push("@set");s.push("@none");var g=R(e,t,r,s,u,l);if(null!==g)return g}if(n.vocab&&"@vocab"in e){var b=e["@vocab"];if(0===t.indexOf(b)&&t!==b){var m=t.substr(b.length);if(!(m in e.mappings))return m}}for(var _=null,E=0,k=[],w=e.fastCurieMap,x=t.length-1;E<x&&t[E]in w;++E)""in(w=w[t[E]])&&k.push(w[""][0]);for(var d=k.length-1;d>=0;--d)for(var S=k[d],T=S.terms,A=0;A<T.length;++A){var I=T[A]+":"+t.substr(S.iri.length),F=!(I in e.mappings)||null===r&&e.mappings[I]["@id"]===t;F&&(null===_||C(I,_)<0)&&(_=I)}return null!==_?_:n.vocab?t:O(e["@base"],t)}function j(t,r,n){if(J(n)){var i=e.getContextValue(t,r,"@type"),o=e.getContextValue(t,r,"@language"),a=e.getContextValue(t,r,"@container"),s="@index"in n&&"@index"!==a;if(!s&&(n["@type"]===i||n["@language"]===o))return n["@value"];var u=Object.keys(n).length,l=1===u||2===u&&"@index"in n&&!s,c="@language"in t,f=G(n["@value"]),p=t.mappings[r]&&null===t.mappings[r]["@language"];if(l&&(!c||!f||p))return n["@value"];var d={};return s&&(d[F(t,"@index")]=n["@index"]),"@type"in n?d[F(t,"@type")]=F(t,n["@type"],null,{vocab:!0}):"@language"in n&&(d[F(t,"@language")]=n["@language"]),d[F(t,"@value")]=n["@value"],d}var h=N(t,r,{vocab:!0}),i=e.getContextValue(t,r,"@type"),v=F(t,n["@id"],null,{vocab:"@vocab"===i});if("@id"===i||"@vocab"===i||"@graph"===h)return v;var d={};return d[F(t,"@id")]=v,d}function P(e,t,r,n){if(r in n){if(n[r])return;throw new Fe("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:t,term:r})}if(n[r]=!1,D(r))throw new Fe("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:t,term:r});if(""===r)throw new Fe("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:t});e.mappings[r]&&delete e.mappings[r];var i=t[r];if(null===i||M(i)&&null===i["@id"])return e.mappings[r]=null,void(n[r]=!0);if(G(i)&&(i={"@id":i}),!M(i))throw new Fe("Invalid JSON-LD syntax; @context property values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:t});var o=e.mappings[r]={};if(o.reverse=!1,"@reverse"in i){if("@id"in i)throw new Fe("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});var a=i["@reverse"];if(!G(a))throw new Fe("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});var s=N(e,a,{vocab:!0,base:!1},t,n);if(!ee(s))throw new Fe("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});o["@id"]=s,o.reverse=!0}else if("@id"in i){var s=i["@id"];if(!G(s))throw new Fe("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});if(s!==r){if(s=N(e,s,{vocab:!0,base:!1},t,n),!ee(s)&&!D(s))throw new Fe("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});o["@id"]=s}}var u=r.indexOf(":");if(o._termHasColon=-1!==u,!("@id"in o))if(o._termHasColon){var l=r.substr(0,u);if(l in t&&P(e,t,l,n),e.mappings[l]){var c=r.substr(u+1);o["@id"]=e.mappings[l]["@id"]+c}else o["@id"]=r}else{if(!("@vocab"in e))throw new Fe("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t,term:r});o["@id"]=e["@vocab"]+r}if(n[r]=!0,"@type"in i){var f=i["@type"];if(!G(f))throw new Fe("Invalid JSON-LD syntax; an @context @type values must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:t});if("@id"!==f&&"@vocab"!==f){if(f=N(e,f,{vocab:!0,base:!1},t,n),!ee(f))throw new Fe("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:t});if(0===f.indexOf("_:"))throw new Fe("Invalid JSON-LD syntax; an @context @type values must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:t})}o["@type"]=f}if("@container"in i){var p=i["@container"];if("@list"!==p&&"@set"!==p&&"@index"!==p&&"@language"!==p)throw new Fe("Invalid JSON-LD syntax; @context @container value must be one of the following: @list, @set, @index, or @language.","jsonld.SyntaxError",{code:"invalid container mapping",context:t});if(o.reverse&&"@index"!==p&&"@set"!==p&&null!==p)throw new Fe("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});o["@container"]=p}if("@language"in i&&!("@type"in i)){var d=i["@language"];if(null!==d&&!G(d))throw new Fe("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:t});null!==d&&(d=d.toLowerCase()),o["@language"]=d}
// disallow aliasing @context and @preserve
var s=o["@id"];if("@context"===s||"@preserve"===s)throw new Fe("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:t})}function N(t,r,n,i,o){if(null===r||D(r))return r;if(r=String(r),i&&r in i&&!0!==o[r]&&P(t,i,r,o),n=n||{},n.vocab){var a=t.mappings[r];if(null===a)return null;if(a)return a["@id"]}var s=r.indexOf(":");if(-1!==s){var u=r.substr(0,s),l=r.substr(s+1);if("_"===u||0===l.indexOf("//"))return r;i&&u in i&&P(t,i,u,o);var a=t.mappings[u];return a?a["@id"]+l:r}if(n.vocab&&"@vocab"in t)return t["@vocab"]+r;var c=r;return n.base&&(c=e.prependBase(t["@base"],c)),c}function L(t,r){if(null===t)return r;if(-1!==r.indexOf(":"))return r;G(t)&&(t=e.url.parse(t||""));var n=e.url.parse(r),i={protocol:t.protocol||""};if(null!==n.authority)i.authority=n.authority,i.path=n.path,i.query=n.query;else if(i.authority=t.authority,""===n.path)i.path=t.path,null!==n.query?i.query=n.query:i.query=t.query;else{if(0===n.path.indexOf("/"))i.path=n.path;else{var o=t.path;""!==n.path&&(o=o.substr(0,o.lastIndexOf("/")+1),o.length>0&&"/"!==o.substr(-1)&&(o+="/"),o+=n.path),i.path=o}i.query=n.query}i.path=le(i.path,!!i.authority);var a=i.protocol;return null!==i.authority&&(a+="//"+i.authority),a+=i.path,null!==i.query&&(a+="?"+i.query),null!==n.fragment&&(a+="#"+n.fragment),""===a&&(a="./"),a}function O(t,r){if(null===t)return r;G(t)&&(t=e.url.parse(t||""));var n="";if(""!==t.href?n+=(t.protocol||"")+"//"+(t.authority||""):r.indexOf("//")&&(n+="//"),0!==r.indexOf(n))return r;for(var i=e.url.parse(r.substr(n.length)),o=t.normalizedPath.split("/"),a=i.normalizedPath.split("/"),s=i.fragment||i.query?0:1;o.length>0&&a.length>s&&o[0]===a[0];)o.shift(),a.shift();var u="";if(o.length>0){o.pop();for(var l=0;l<o.length;++l)u+="../"}return u+=a.join("/"),null!==i.query&&(u+="?"+i.query),null!==i.fragment&&(u+="#"+i.fragment),""===u&&(u="./"),u}function Q(t){function r(){var e=this;if(e.inverse)return e.inverse;for(var t=e.inverse={},r=e.fastCurieMap={},o={},a=e["@language"]||"@none",s=e.mappings,u=Object.keys(s).sort(C),l=0;l<u.length;++l){var c=u[l],f=s[c];if(null!==f){var p=f["@container"]||"@none",d=f["@id"];U(d)||(d=[d]);for(var h=0;h<d.length;++h){var v=d[h],y=t[v],g=D(v);if(y)g||f._termHasColon||o[v].push(c);else if(t[v]=y={},!g&&!f._termHasColon){o[v]=[c];var b={iri:v,terms:o[v]};v[0]in r?r[v[0]].push(b):r[v[0]]=[b]}if(y[p]||(y[p]={"@language":{},"@type":{}}),y=y[p],f.reverse)i(f,c,y["@type"],"@reverse");else if("@type"in f)i(f,c,y["@type"],f["@type"]);else if("@language"in f){var m=f["@language"]||"@null";i(f,c,y["@language"],m)}else i(f,c,y["@language"],a),i(f,c,y["@type"],"@none"),i(f,c,y["@language"],"@none")}}}for(var _ in r)n(r,_,1);return t}function n(e,t,r){for(var i,o,a=e[t],s=e[t]={},u=0;u<a.length;++u)i=a[u].iri,o=r>=i.length?"":i[r],o in s?s[o].push(a[u]):s[o]=[a[u]];for(var t in s)""!==t&&n(s,t,r+1)}function i(e,t,r,n){n in r||(r[n]=t)}function o(){var e={};return e["@base"]=this["@base"],e.mappings=te(this.mappings),e.clone=this.clone,e.inverse=null,e.getInverse=this.getInverse,"@language"in this&&(e["@language"]=this["@language"]),"@vocab"in this&&(e["@vocab"]=this["@vocab"]),e}return{"@base":e.url.parse(t.base||""),mappings:{},inverse:null,getInverse:r,clone:o}}function D(e){if(!G(e))return!1;switch(e){case"@base":case"@context":case"@container":case"@default":case"@embed":case"@explicit":case"@graph":case"@id":case"@index":case"@language":case"@list":case"@omitDefault":case"@preserve":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@vocab":return!0}return!1}function M(e){return"[object Object]"===Object.prototype.toString.call(e)}function B(e){return M(e)&&0===Object.keys(e).length}function U(e){return Array.isArray(e)}function q(e){if(!G(e)&&!B(e)){var t=!1;if(U(e)){t=!0;for(var r=0;r<e.length;++r)if(!G(e[r])){t=!1;break}}if(!t)throw new Fe('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, or an empty object.',"jsonld.SyntaxError",{code:"invalid type value",value:e})}}function G(e){return"string"==typeof e||"[object String]"===Object.prototype.toString.call(e)}function H(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function V(e){return H(e)&&-1!==String(e).indexOf(".")}function X(e){return!isNaN(parseFloat(e))&&isFinite(e)}function W(e){return"boolean"==typeof e||"[object Boolean]"===Object.prototype.toString.call(e)}function z(e){return void 0===e}function $(e){var t=!1;if(M(e)&&!("@value"in e||"@set"in e||"@list"in e)){t=Object.keys(e).length>1||!("@id"in e)}return t}function Y(e){return M(e)&&1===Object.keys(e).length&&"@id"in e}function J(e){return M(e)&&"@value"in e}function K(e){return M(e)&&"@list"in e}function Z(e){var t=!1;return M(e)&&(t="@id"in e?0===e["@id"].indexOf("_:"):0===Object.keys(e).length||!("@value"in e||"@set"in e||"@list"in e)),t}function ee(e){return G(e)&&-1!==e.indexOf(":")}function te(e){if(e&&"object"==typeof e){var t;if(U(e)){t=[];for(var r=0;r<e.length;++r)t[r]=te(e[r])}else if(M(e)){t={};for(var n in e)t[n]=te(e[n])}else t=e.toString();return t}return e}function re(t,r,n,i){var o=Object.keys(r).length;if(U(t)){for(var a=0;a<t.length;++a)re(t[a],r,n,i);return o<Object.keys(r).length}if(M(t)){for(var s in t)if("@context"===s){var u=t[s];if(U(u))for(var l=u.length,a=0;a<l;++a){var c=u[a];G(c)&&(c=e.prependBase(i,c),n?(c=r[c],U(c)?(Array.prototype.splice.apply(u,[a,1].concat(c)),a+=c.length-1,l=u.length):u[a]=c):c in r||(r[c]=!1))}else G(u)&&(u=e.prependBase(i,u),n?t[s]=r[u]:u in r||(r[u]=!1))}else re(t[s],r,n,i);return o<Object.keys(r).length}return!1}function ne(e,t,r){var n=null,i=t.documentLoader,o=function(e,t,r,i,a){if(Object.keys(t).length>Re)return n=new Fe("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"loading remote context failed",max:Re}),a(n);var s={},u=function(){re(e,s,!0,i),a(null,e)};if(!re(e,s,!1,i))return u();var l=[];for(var c in s)!1===s[c]&&l.push(c);for(var f=l.length,p=0;p<l.length;++p)!function(e){if(e in t)return n=new Fe("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"recursive context inclusion",url:e}),a(n);var i=te(t);i[e]=!0;var l=function(t,l){if(!n){var c=l?l.document:null;if(!t&&G(c))try{c=JSON.parse(c)}catch(e){t=e}if(t?t=new Fe("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:e,cause:t}):M(c)||(t=new Fe("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:e,cause:t})),t)return n=t,a(n);c="@context"in c?{"@context":c["@context"]}:{"@context":{}},l.contextUrl&&(U(c["@context"])||(c["@context"]=[c["@context"]]),c["@context"].push(l.contextUrl)),o(c,i,r,e,function(t,r){if(t)return a(t);s[e]=r["@context"],0===(f-=1)&&u()})}},c=r(e,l);c&&"then"in c&&c.then(l.bind(null,null),l)}(l[p])};o(e,{},i,t.base,r)}function ie(e){for(var t=/(?:\r\n)|(?:\n)|(?:\r)/g,r=new RegExp("^[ \\t]*(?:#.*)?$"),n=new RegExp('^[ \\t]*(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z0-9]+)))[ \\t]+(?:<([^:]+:[^>]*)>)[ \\t]+(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z0-9]+))|(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"(?:(?:\\^\\^(?:<([^:]+:[^>]*)>))|(?:@([a-z]+(?:-[a-z0-9]+)*)))?))[ \\t]*(?:\\.|(?:(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z0-9]+)))[ \\t]*\\.))[ \\t]*(?:#.*)?$'),i={},o=e.split(t),a=0,s=0;s<o.length;++s){var u=o[s];if(a++,!r.test(u)){var l=u.match(n);if(null===l)throw new Fe("Error while parsing N-Quads; invalid quad.","jsonld.ParseError",{line:a});var c={};if(z(l[1])?c.subject={type:"blank node",value:l[2]}:c.subject={type:"IRI",value:l[1]},c.predicate={type:"IRI",value:l[3]},z(l[4]))if(z(l[5])){c.object={type:"literal"},z(l[7])?z(l[8])?c.object.datatype=me:(c.object.datatype=Ie,c.object.language=l[8]):c.object.datatype=l[7];var f=l[6].replace(/\\"/g,'"').replace(/\\t/g,"\t").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\\\/g,"\\");c.object.value=f}else c.object={type:"blank node",value:l[5]};else c.object={type:"IRI",value:l[4]};var p="@default";if(z(l[9])?z(l[10])||(p=l[10]):p=l[9],p in i){for(var d=!0,h=i[p],v=0;d&&v<h.length;++v)y(h[v],c)&&(d=!1);d&&h.push(c)}else i[p]=[c]}}return i}function oe(e){var t=[];for(var r in e)for(var n=e[r],i=0;i<n.length;++i){var o=n[i];"@default"===r&&(r=null),t.push(ae(o,r))}return t.sort().join("")}function ae(e,t){var r=e.subject,n=e.predicate,i=e.object,o=t||null;"name"in e&&e.name&&(o=e.name.value);var a="";if("IRI"===r.type?a+="<"+r.value+">":a+=r.value,a+=" ","IRI"===n.type?a+="<"+n.value+">":a+=n.value,a+=" ","IRI"===i.type)a+="<"+i.value+">";else if("blank node"===i.type)a+=i.value;else{var s=i.value.replace(/\\/g,"\\\\").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\"/g,'\\"');a+='"'+s+'"',i.datatype===Ie?i.language&&(a+="@"+i.language):i.datatype!==me&&(a+="^^<"+i.datatype+">")}return null!==o&&void 0!==o&&(0!==o.indexOf("_:")?a+=" <"+o+">":a+=" "+o),a+=" .\n"}function se(e){var t={};t["@default"]=[];for(var r=e.getSubjects(),n=0;n<r.length;++n){var i=r[n];if(null!==i){var o=e.getSubjectTriples(i);if(null!==o){var a=o.predicates;for(var s in a)for(var u=a[s].objects,l=0;l<u.length;++l){var c=u[l],f={};0===i.indexOf("_:")?f.subject={type:"blank node",value:i}:f.subject={type:"IRI",value:i},0===s.indexOf("_:")?f.predicate={type:"blank node",value:s}:f.predicate={type:"IRI",value:s};var p=c.value;if(c.type===Te){he||Qe();var d=new he;p="";for(var h=0;h<c.value.length;h++)c.value[h].nodeType===ve.ELEMENT_NODE?p+=d.serializeToString(c.value[h]):c.value[h].nodeType===ve.TEXT_NODE&&(p+=c.value[h].nodeValue)}f.object={},c.type===Ae?0===c.value.indexOf("_:")?f.object.type="blank node":f.object.type="IRI":(f.object.type="literal",c.type===Se?c.language?(f.object.datatype=Ie,f.object.language=c.language):f.object.datatype=me:f.object.datatype=c.type),f.object.value=p,t["@default"].push(f)}}}}return t}function ue(e){this.prefix=e,this.counter=0,this.existing={}}function le(e,t){var r="";0===e.indexOf("/")&&(r="/");for(var n=e.split("/"),i=[];n.length>0;)"."===n[0]||""===n[0]&&n.length>1?n.shift():".."!==n[0]?i.push(n.shift()):(n.shift(),t||i.length>0&&".."!==i[i.length-1]?i.pop():i.push(".."));return r+i.join("/")}e.compact=function(t,r,n,i){function o(e,t,n,o){if(e)return i(e);o.compactArrays&&!o.graph&&U(t)?1===t.length?t=t[0]:0===t.length&&(t={}):o.graph&&M(t)&&(t=[t]),M(r)&&"@context"in r&&(r=r["@context"]),r=te(r),U(r)||(r=[r]);var a=r;r=[];for(var s=0;s<a.length;++s)(!M(a[s])||Object.keys(a[s]).length>0)&&r.push(a[s]);var u=r.length>0;if(1===r.length&&(r=r[0]),U(t)){var l=F(n,"@graph"),c=t;t={},u&&(t["@context"]=r),t[l]=c}else if(M(t)&&u){var c=t;t={"@context":r};for(var f in c)t[f]=c[f]}i(null,t,n)}if(arguments.length<2)return e.nextTick(function(){i(new TypeError("Could not compact, too few arguments."))});if("function"==typeof n&&(i=n,n={}),n=n||{},null===r)return e.nextTick(function(){i(new Fe("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"}))});if(null===t)return e.nextTick(function(){i(null,null)});"base"in n||(n.base="string"==typeof t?t:""),"compactArrays"in n||(n.compactArrays=!0),"graph"in n||(n.graph=!1),"skipExpansion"in n||(n.skipExpansion=!1),"documentLoader"in n||(n.documentLoader=e.loadDocument),"link"in n||(n.link=!1),n.link&&(n.skipExpansion=!0);!function(t,r,n){if(r.skipExpansion)return e.nextTick(function(){n(null,t)});e.expand(t,r,n)}(t,n,function(t,a){if(t)return i(new Fe("Could not expand input before compaction.","jsonld.CompactError",{cause:t}));var s=Q(n);e.processContext(s,r,n,function(e,t){if(e)return i(new Fe("Could not process context before compaction.","jsonld.CompactError",{cause:e}));var r;try{r=(new je).compact(t,null,a,n)}catch(e){return i(e)}o(null,r,t,n)})})},e.expand=function(t,r,n){function i(e){"base"in r||(r.base=e.documentUrl||"");var t={document:te(e.document),remoteContext:{"@context":e.contextUrl}};if("expandContext"in r){var i=te(r.expandContext);t.expandContext="object"==typeof i&&"@context"in i?i:{"@context":i}}ne(t,r,function(e,t){if(e)return n(e);var i;try{var o=new je,a=Q(r),s=t.document,u=t.remoteContext["@context"];t.expandContext&&(a=o.processContext(a,t.expandContext["@context"],r)),u&&(a=o.processContext(a,u,r)),i=o.expand(a,null,s,r,!1),M(i)&&"@graph"in i&&1===Object.keys(i).length?i=i["@graph"]:null===i&&(i=[]),U(i)||(i=[i])}catch(e){return n(e)}n(null,i)})}if(arguments.length<1)return e.nextTick(function(){n(new TypeError("Could not expand, too few arguments."))});"function"==typeof r&&(n=r,r={}),r=r||{},"documentLoader"in r||(r.documentLoader=e.loadDocument),"keepFreeFloatingNodes"in r||(r.keepFreeFloatingNodes=!1),e.nextTick(function(){if("string"==typeof t){var e=function(e,t){if(e)return n(e);try{if(!t.document)throw new Fe("No remote document found at the given URL.","jsonld.NullRemoteDocument");"string"==typeof t.document&&(t.document=JSON.parse(t.document))}catch(e){return n(new Fe("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",cause:e,remoteDoc:t}))}i(t)},o=r.documentLoader(t,e);return void(o&&"then"in o&&o.then(e.bind(null,null),e))}i({contextUrl:null,documentUrl:null,document:t})})},e.flatten=function(t,r,n,i){if(arguments.length<1)return e.nextTick(function(){i(new TypeError("Could not flatten, too few arguments."))});"function"==typeof n?(i=n,n={}):"function"==typeof r&&(i=r,r=null,n={}),n=n||{},"base"in n||(n.base="string"==typeof t?t:""),"documentLoader"in n||(n.documentLoader=e.loadDocument),e.expand(t,n,function(t,o){if(t)return i(new Fe("Could not expand input before flattening.","jsonld.FlattenError",{cause:t}));var a;try{a=(new je).flatten(o)}catch(e){return i(e)}if(null===r)return i(null,a);n.graph=!0,n.skipExpansion=!0,e.compact(a,r,n,function(e,t){if(e)return i(new Fe("Could not compact flattened output.","jsonld.FlattenError",{cause:e}));i(null,t)})})},e.frame=function(t,r,n,i){function o(r){var o,a=r.document;a?(o=a["@context"],r.contextUrl?(o?U(o)?o.push(r.contextUrl):o=[o,r.contextUrl]:o=r.contextUrl,a["@context"]=o):o=o||{}):o={},e.expand(t,n,function(t,r){if(t)return i(new Fe("Could not expand input before framing.","jsonld.FrameError",{cause:t}));var s=te(n);s.isFrame=!0,s.keepFreeFloatingNodes=!0,e.expand(a,s,function(t,n){if(t)return i(new Fe("Could not expand frame before framing.","jsonld.FrameError",{cause:t}));var a;try{a=(new je).frame(r,n,s)}catch(e){return i(e)}s.graph=!0,s.skipExpansion=!0,s.link={},e.compact(a,o,s,function(e,t,r){if(e)return i(new Fe("Could not compact framed output.","jsonld.FrameError",{cause:e}));var n=F(r,"@graph");
// remove @preserve from results
s.link={},t[n]=I(r,t[n],s),i(null,t)})})})}if(arguments.length<2)return e.nextTick(function(){i(new TypeError("Could not frame, too few arguments."))});"function"==typeof n&&(i=n,n={}),n=n||{},"base"in n||(n.base="string"==typeof t?t:""),"documentLoader"in n||(n.documentLoader=e.loadDocument),"embed"in n||(n.embed="@last"),n.explicit=n.explicit||!1,"requireAll"in n||(n.requireAll=!0),n.omitDefault=n.omitDefault||!1,e.nextTick(function(){if("string"==typeof r){var e=function(e,t){if(e)return i(e);try{if(!t.document)throw new Fe("No remote document found at the given URL.","jsonld.NullRemoteDocument");"string"==typeof t.document&&(t.document=JSON.parse(t.document))}catch(e){return i(new Fe("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",cause:e,remoteDoc:t}))}o(t)},t=n.documentLoader(r,e);return void(t&&"then"in t&&t.then(e.bind(null,null),e))}o({contextUrl:null,documentUrl:null,document:r})})},e.link=function(t,r,n,i){var o={};r&&(o["@context"]=r),o["@embed"]="@link",e.frame(t,o,n,i)},e.objectify=function(t,r,n,i){"function"==typeof n&&(i=n,n={}),n=n||{},"base"in n||(n.base="string"==typeof t?t:""),"documentLoader"in n||(n.documentLoader=e.loadDocument),e.expand(t,n,function(t,o){if(t)return i(new Fe("Could not expand input before linking.","jsonld.LinkError",{cause:t}));var a;try{a=(new je).flatten(o)}catch(e){return i(e)}n.graph=!0,n.skipExpansion=!0,e.compact(a,r,n,function(t,r,n){if(t)return i(new Fe("Could not compact flattened output before linking.","jsonld.LinkError",{cause:t}));var o=F(n,"@graph"),a=r[o][0],s=function(t){if(M(t)||U(t)){if(M(t)){if(s.visited[t["@id"]])return;s.visited[t["@id"]]=!0}for(var r in t){var i=t[r],o="@id"===e.getContextValue(n,r,"@type");if(U(i)||M(i)||o)if(G(i)&&o)t[r]=i=a[i],s(i);else if(U(i))for(var u=0;u<i.length;++u)G(i[u])&&o?i[u]=a[i[u]]:M(i[u])&&"@id"in i[u]&&(i[u]=a[i[u]["@id"]]),s(i[u]);else if(M(i)){var l=i["@id"];t[r]=i=a[l],s(i)}}}};s.visited={},s(a),r.of_type={};for(var u in a)if("@type"in a[u]){var l=a[u]["@type"];U(l)||(l=[l]);for(var c=0;c<l.length;++c)l[c]in r.of_type||(r.of_type[l[c]]=[]),r.of_type[l[c]].push(a[u])}i(null,r)})})},e.normalize=function(t,r,n){if(arguments.length<1)return e.nextTick(function(){n(new TypeError("Could not normalize, too few arguments."))});if("function"==typeof r&&(n=r,r={}),r=r||{},"algorithm"in r||(r.algorithm="URGNA2012"),"base"in r||(r.base="string"==typeof t?t:""),"documentLoader"in r||(r.documentLoader=e.loadDocument),"inputFormat"in r){if("application/nquads"!==r.inputFormat)return n(new Fe("Unknown normalization input format.","jsonld.NormalizeError"));var i=ie(t);(new je).normalize(i,r,n)}else{var o=te(r);delete o.format,o.produceGeneralizedRdf=!1,e.toRDF(t,o,function(e,t){if(e)return n(new Fe("Could not convert input to RDF dataset before normalization.","jsonld.NormalizeError",{cause:e}));(new je).normalize(t,r,n)})}},e.fromRDF=function(t,r,n){if(arguments.length<1)return e.nextTick(function(){n(new TypeError("Could not convert from RDF, too few arguments."))});"function"==typeof r&&(n=r,r={}),r=r||{},"useRdfType"in r||(r.useRdfType=!1),"useNativeTypes"in r||(r.useNativeTypes=!1),"format"in r||!G(t)||"format"in r||(r.format="application/nquads"),e.nextTick(function(){function e(e,t,r){(new je).fromRDF(e,t,r)}var i;if(r.format){if(!(i=r.rdfParser||de[r.format]))return n(new Fe("Unknown input format.","jsonld.UnknownFormat",{format:r.format}))}else i=function(){return t};var o=!1;try{t=i(t,function(t,i){if(o=!0,t)return n(t);e(i,r,n)})}catch(e){if(!o)return n(e);throw e}if(t){if("then"in t)return t.then(function(t){e(t,r,n)},n);e(t,r,n)}})},e.toRDF=function(t,r,n){if(arguments.length<1)return e.nextTick(function(){n(new TypeError("Could not convert to RDF, too few arguments."))});"function"==typeof r&&(n=r,r={}),r=r||{},"base"in r||(r.base="string"==typeof t?t:""),"documentLoader"in r||(r.documentLoader=e.loadDocument),e.expand(t,r,function(e,t){if(e)return n(new Fe("Could not expand input before serialization to RDF.","jsonld.RdfError",{cause:e}));var i;try{if(i=je.prototype.toRDF(t,r),r.format){if("application/nquads"===r.format)return n(null,oe(i));throw new Fe("Unknown output format.","jsonld.UnknownFormat",{format:r.format})}}catch(e){return n(e)}n(null,i)})},e.createNodeMap=function(t,r,n){if(arguments.length<1)return e.nextTick(function(){n(new TypeError("Could not create node map, too few arguments."))});"function"==typeof r&&(n=r,r={}),r=r||{},"base"in r||(r.base="string"==typeof t?t:""),"documentLoader"in r||(r.documentLoader=e.loadDocument),e.expand(t,r,function(e,t){if(e)return n(new Fe("Could not expand input before creating node map.","jsonld.CreateNodeMapError",{cause:e}));var i;try{i=(new je).createNodeMap(t,r)}catch(e){return n(e)}n(null,i)})},e.merge=function(t,r,n,i){function o(e,t){if(!u){if(e)return u=e,i(new Fe("Could not expand input before flattening.","jsonld.FlattenError",{cause:e}));s.push(t),0==--l&&a(s)}}function a(t){var o=!0;"mergeNodes"in n&&(o=n.mergeNodes);var a,s=n.namer||n.issuer||new ue("_:b"),u={"@default":{}};try{for(var l=0;l<t.length;++l){var c=t[l];c=e.relabelBlankNodes(c,{issuer:new ue("_:b"+l+"-")});var f=o||0===l?u:{"@default":{}};if(g(c,f,"@default",s),f!==u)for(var p in f){var d=f[p];if(p in u){var h=u[p];for(var v in d)v in h||(h[v]=d[v])}else u[p]=d}}a=b(u)}catch(e){return i(e)}for(var y=[],m=Object.keys(a).sort(),_=0;_<m.length;++_){var E=a[m[_]];Y(E)||y.push(E)}if(null===r)return i(null,y);n.graph=!0,n.skipExpansion=!0,e.compact(y,r,n,function(e,t){if(e)return i(new Fe("Could not compact merged output.","jsonld.MergeError",{cause:e}));i(null,t)})}if(arguments.length<1)return e.nextTick(function(){i(new TypeError("Could not merge, too few arguments."))});if(!U(t))return e.nextTick(function(){i(new TypeError('Could not merge, "docs" must be an array.'))});"function"==typeof n?(i=n,n={}):"function"==typeof r&&(i=r,r=null,n={}),n=n||{};for(var s=[],u=null,l=t.length,c=0;c<t.length;++c){var f={};for(var p in n)f[p]=n[p];e.expand(t[c],f,o)}},e.relabelBlankNodes=function(e,t){return t=t||{},u(t.namer||t.issuer||new ue("_:b"),e)},e.prependBase=function(e,t){return L(e,t)},e.documentLoader=function(t,r){var n=new Fe("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed"});return l?r(n,{contextUrl:null,documentUrl:t,document:null}):e.promisify(function(e){e(n)})},e.loadDocument=function(t,r){var n=e.documentLoader(t,r);n&&"then"in n&&n.then(r.bind(null,null),r)},e.promises=function(t){t=t||{};var n=Array.prototype.slice,o=e.promisify,a=t.api||{},s=t.version||"jsonld.js";"string"==typeof t.api&&(t.version||(s=t.api),a={}),a.expand=function(t){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");return o.apply(null,[e.expand].concat(n.call(arguments)))},a.compact=function(t,r){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");var i=function(t,r,n,i){"function"==typeof n&&(i=n,n={}),n=n||{},e.compact(t,r,n,function(e,t){i(e,t)})};return o.apply(null,[i].concat(n.call(arguments)))},a.flatten=function(t){if(arguments.length<1)throw new TypeError("Could not flatten, too few arguments.");return o.apply(null,[e.flatten].concat(n.call(arguments)))},a.frame=function(t,r){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");return o.apply(null,[e.frame].concat(n.call(arguments)))},a.fromRDF=function(t){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");return o.apply(null,[e.fromRDF].concat(n.call(arguments)))},a.toRDF=function(t){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");return o.apply(null,[e.toRDF].concat(n.call(arguments)))},a.normalize=function(t){if(arguments.length<1)throw new TypeError("Could not normalize, too few arguments.");return o.apply(null,[e.normalize].concat(n.call(arguments)))},"jsonld.js"===s&&(a.link=function(t,r){if(arguments.length<2)throw new TypeError("Could not link, too few arguments.");return o.apply(null,[e.link].concat(n.call(arguments)))},a.objectify=function(t){return o.apply(null,[e.objectify].concat(n.call(arguments)))},a.createNodeMap=function(t){return o.apply(null,[e.createNodeMap].concat(n.call(arguments)))},a.merge=function(t){return o.apply(null,[e.merge].concat(n.call(arguments)))});try{e.Promise=i.Promise||r(134).Promise}catch(e){var u=function(){throw new Error("Unable to find a Promise implementation.")};for(var l in a)a[l]=u}return a},e.promisify=function(t){if(!e.Promise)try{e.Promise=i.Promise||r(134).Promise}catch(e){throw new Error("Unable to find a Promise implementation.")}var n=Array.prototype.slice.call(arguments,1);return new e.Promise(function(e,r){t.apply(null,n.concat(function(t,n){t?r(t):e(n)}))})},e.promises({api:e.promises}),t.prototype=e.promises({version:"json-ld-1.0"}),t.prototype.toString=function(){return this instanceof t?"[object JsonLdProcessor]":"[object JsonLdProcessorPrototype]"},e.JsonLdProcessor=t;var ce=!!Object.defineProperty;if(ce)try{Object.defineProperty({},"x",{})}catch(e){ce=!1}ce&&(Object.defineProperty(t,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(t.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:t})),c&&void 0===i.JsonLdProcessor&&(ce?Object.defineProperty(i,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:t}):i.JsonLdProcessor=t);var fe="function"==typeof o&&o,pe=fe?function(e){fe(e)}:function(e){setTimeout(e,0)};"object"==typeof n&&"function"==typeof n.nextTick?e.nextTick=n.nextTick:e.nextTick=pe,e.setImmediate=fe?pe:e.nextTick,e.parseLinkHeader=function(e){for(var t={},r=e.match(/(?:<[^>]*?>|"[^"]*?"|[^,])+/g),n=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,i=0;i<r.length;++i){var o=r[i].match(n);if(o){for(var a={target:o[1]},s=o[2],u=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g;o=u.exec(s);)a[o[1]]=void 0===o[2]?o[3]:o[2];var l=a.rel||"";U(t[l])?t[l].push(a):t[l]=l in t?[t[l],a]:a}}return t},e.RequestQueue=function(){this._requests={}},e.RequestQueue.prototype.wrapLoader=function(e){return this._loader=e,this._usePromise=1===e.length,this.add.bind(this)},e.RequestQueue.prototype.add=function(t,r){var n=this;if(!r&&!n._usePromise)throw new Error("callback must be specified.");if(n._usePromise)return new e.Promise(function(e,r){var i=n._requests[t];i||(i=n._requests[t]=n._loader(t).then(function(e){return delete n._requests[t],e}).catch(function(e){throw delete n._requests[t],e})),i.then(function(t){e(t)}).catch(function(e){r(e)})});t in n._requests?n._requests[t].push(r):(n._requests[t]=[r],n._loader(t,function(e,r){var i=n._requests[t];delete n._requests[t];for(var o=0;o<i.length;++o)i[o](e,r)}))},e.DocumentCache=function(e){this.order=[],this.cache={},this.size=e||50,this.expires=3e4},e.DocumentCache.prototype.get=function(e){if(e in this.cache){var t=this.cache[e];if(t.expires>=+new Date)return t.ctx;delete this.cache[e],this.order.splice(this.order.indexOf(e),1)}return null},e.DocumentCache.prototype.set=function(e,t){this.order.length===this.size&&delete this.cache[this.order.shift()],this.order.push(e),this.cache[e]={ctx:t,expires:+new Date+this.expires}},e.ActiveContextCache=function(e){this.order=[],this.cache={},this.size=e||100},e.ActiveContextCache.prototype.get=function(e,t){var r=JSON.stringify(e),n=JSON.stringify(t),i=this.cache[r];return i&&n in i?i[n]:null},e.ActiveContextCache.prototype.set=function(e,t,r){if(this.order.length===this.size){var n=this.order.shift();delete this.cache[n.activeCtx][n.localCtx]}var i=JSON.stringify(e),o=JSON.stringify(t);this.order.push({activeCtx:i,localCtx:o}),i in this.cache||(this.cache[i]={}),this.cache[i][o]=te(r)},e.cache={activeCtx:new e.ActiveContextCache},e.documentLoaders={},e.documentLoaders.jquery=function(t,r){function n(n,i){return 0!==n.indexOf("http:")&&0!==n.indexOf("https:")?i(new Fe('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:n}),{contextUrl:null,documentUrl:n,document:null}):r.secure&&0!==n.indexOf("https")?i(new Fe('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:n}),{contextUrl:null,documentUrl:n,document:null}):void t.ajax({url:n,accepts:{json:"application/ld+json, application/json"},headers:{Accept:"application/ld+json, application/json"},dataType:"json",crossDomain:!0,success:function(t,r,o){var a={contextUrl:null,documentUrl:n,document:t},s=o.getResponseHeader("Content-Type"),u=o.getResponseHeader("Link");if(u&&"application/ld+json"!==s){if(u=e.parseLinkHeader(u)[Ce],U(u))return i(new Fe("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:n}),a);u&&(a.contextUrl=u.target)}i(null,a)},error:function(e,t,r){i(new Fe("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:n,cause:r}),{contextUrl:null,documentUrl:n,document:null})}})}r=r||{};var i=new e.RequestQueue;return("usePromise"in r?r.usePromise:"undefined"!=typeof Promise)?i.wrapLoader(function(t){return e.promisify(n,t)}):i.wrapLoader(n)},e.documentLoaders.node=function(t){function n(r,l,c){function f(t,i,a){if(p={contextUrl:null,documentUrl:r,document:a||null},t)return c(new Fe("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:r,cause:t}),p);var s=u.STATUS_CODES[i.statusCode];if(i.statusCode>=400)return c(new Fe("URL could not be dereferenced: "+s,"jsonld.InvalidUrl",{code:"loading document failed",url:r,httpStatusCode:i.statusCode}),p);if(i.headers.link&&"application/ld+json"!==i.headers["content-type"]){var f=e.parseLinkHeader(i.headers.link)[Ce];if(U(f))return c(new Fe("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:r}),p);f&&(p.contextUrl=f.target)}if(i.statusCode>=300&&i.statusCode<400&&i.headers.location)return l.length===o?c(new Fe("URL could not be dereferenced; there were too many redirects.","jsonld.TooManyRedirects",{code:"loading document failed",url:r,httpStatusCode:i.statusCode,redirects:l}),p):-1!==l.indexOf(r)?c(new Fe("URL could not be dereferenced; infinite redirection was detected.","jsonld.InfiniteRedirectDetected",{code:"recursive context inclusion",url:r,httpStatusCode:i.statusCode,redirects:l}),p):(l.push(r),n(i.headers.location,l,c));l.push(r),c(t,p)}if(0!==r.indexOf("http:")&&0!==r.indexOf("https:"))return c(new Fe('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:r}),{contextUrl:null,documentUrl:r,document:null});if(t.secure&&0!==r.indexOf("https"))return c(new Fe('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:r}),{contextUrl:null,documentUrl:r,document:null});var p=null;if(null!==p)return c(null,p);var d={Accept:s};for(var h in t.headers)d[h]=t.headers[h];a({url:r,headers:d,strictSSL:i,followRedirect:!1},f)}t=t||{};var i=!("strictSSL"in t)||t.strictSSL,o="maxRedirects"in t?t.maxRedirects:-1,a="request"in t?t.request:r(26),s="application/ld+json, application/json",u=r(26),l=new e.RequestQueue;if(t.usePromise)return l.wrapLoader(function(t){return e.promisify(n,t,[])});var c=t.headers||{};if("Accept"in c||"accept"in c)throw new RangeError('Accept header may not be specified as an option; only "'+s+'" is supported.');return l.wrapLoader(function(e,t){n(e,[],t)})},e.documentLoaders.xhr=function(t){function r(r,i){if(0!==r.indexOf("http:")&&0!==r.indexOf("https:"))return i(new Fe('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:r}),{contextUrl:null,documentUrl:r,document:null});if(t.secure&&0!==r.indexOf("https"))return i(new Fe('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:r}),{contextUrl:null,documentUrl:r,document:null});var o=t.xhr||XMLHttpRequest,a=new o;a.onload=function(){if(a.status>=400)return i(new Fe("URL could not be dereferenced: "+a.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:r,httpStatusCode:a.status}),{contextUrl:null,documentUrl:r,document:null});var t,o={contextUrl:null,documentUrl:r,document:a.response},s=a.getResponseHeader("Content-Type");if(n.test(a.getAllResponseHeaders())&&(t=a.getResponseHeader("Link")),t&&"application/ld+json"!==s){if(t=e.parseLinkHeader(t)[Ce],U(t))return i(new Fe("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:r}),o);t&&(o.contextUrl=t.target)}i(null,o)},a.onerror=function(){i(new Fe("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:r}),{contextUrl:null,documentUrl:r,document:null})},a.open("GET",r,!0),a.setRequestHeader("Accept","application/ld+json, application/json"),a.send()}t=t||{};var n=/(^|(\r\n))link:/i,i=new e.RequestQueue;return("usePromise"in t?t.usePromise:"undefined"!=typeof Promise)?i.wrapLoader(function(t){return e.promisify(r,t)}):i.wrapLoader(r)},e.useDocumentLoader=function(t){if(!(t in e.documentLoaders))throw new Fe('Unknown document loader type: "'+t+'"',"jsonld.UnknownDocumentLoader",{type:t});e.documentLoader=e.documentLoaders[t].apply(e,Array.prototype.slice.call(arguments,1))},e.processContext=function(t,r){var n={},i=2;arguments.length>3&&(n=arguments[2]||{},i+=1);var o=arguments[i];if("base"in n||(n.base=""),"documentLoader"in n||(n.documentLoader=e.loadDocument),null===r)return o(null,Q(n));r=te(r),M(r)&&"@context"in r||(r={"@context":r}),ne(r,n,function(e,r){if(e)return o(e);try{r=(new je).processContext(t,r,n)}catch(e){return o(e)}o(null,r)})},e.hasProperty=function(e,t){var r=!1;if(t in e){var n=e[t];r=!U(n)||n.length>0}return r},e.hasValue=function(t,r,n){var i=!1;if(e.hasProperty(t,r)){var o=t[r],a=K(o);if(U(o)||a){a&&(o=o["@list"]);for(var s=0;s<o.length;++s)if(e.compareValues(n,o[s])){i=!0;break}}else U(n)||(i=e.compareValues(n,o))}return i},e.addValue=function(t,r,n,i){if(i=i||{},"propertyIsArray"in i||(i.propertyIsArray=!1),"allowDuplicate"in i||(i.allowDuplicate=!0),U(n)){0!==n.length||!i.propertyIsArray||r in t||(t[r]=[]);for(var o=0;o<n.length;++o)e.addValue(t,r,n[o],i)}else if(r in t){var a=!i.allowDuplicate&&e.hasValue(t,r,n);U(t[r])||a&&!i.propertyIsArray||(t[r]=[t[r]]),a||t[r].push(n)}else t[r]=i.propertyIsArray?[n]:n},e.getValues=function(e,t){var r=e[t]||[];return U(r)||(r=[r]),r},e.removeProperty=function(e,t){delete e[t]},e.removeValue=function(t,r,n,i){"propertyIsArray"in(i=i||{})||(i.propertyIsArray=!1);var o=e.getValues(t,r).filter(function(t){return!e.compareValues(t,n)});0===o.length?e.removeProperty(t,r):1!==o.length||i.propertyIsArray?t[r]=o:t[r]=o[0]},e.compareValues=function(e,t){return e===t||(!(!J(e)||!J(t)||e["@value"]!==t["@value"]||e["@type"]!==t["@type"]||e["@language"]!==t["@language"]||e["@index"]!==t["@index"])||!!(M(e)&&"@id"in e&&M(t)&&"@id"in t)&&e["@id"]===t["@id"])},e.getContextValue=function(e,t,r){var n=null;if(null===t)return n;if("@language"===r&&r in e&&(n=e[r]),e.mappings[t]){var i=e.mappings[t];z(r)?n=i:r in i&&(n=i[r])}return n};var de={};if(e.registerRDFParser=function(e,t){de[e]=t},e.unregisterRDFParser=function(e){delete de[e]},l){if(void 0===he)var he=null;if(void 0===ve)var ve={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12}}var ye="http://www.w3.org/2001/XMLSchema#boolean",ge="http://www.w3.org/2001/XMLSchema#double",be="http://www.w3.org/2001/XMLSchema#integer",me="http://www.w3.org/2001/XMLSchema#string",_e="http://www.w3.org/1999/02/22-rdf-syntax-ns#",Ee=_e+"first",ke=_e+"rest",we=_e+"nil",xe=_e+"type",Se=_e+"PlainLiteral",Te=_e+"XMLLiteral",Ae=_e+"object",Ie=_e+"langString",Ce="http://www.w3.org/ns/json-ld#context",Re=10,Fe=function(e,t,r){l?(Error.call(this),Error.captureStackTrace(this,this.constructor)):"undefined"!=typeof Error&&(this.stack=(new Error).stack),this.name=t||"jsonld.Error",this.message=e||"An unspecified JSON-LD error occurred.",this.details=r||{}};l?r(26).inherits(Fe,Error):"undefined"!=typeof Error&&(Fe.prototype=new Error);var je=function(){};je.prototype.compact=function(t,r,n,i){if(U(n)){for(var o=[],a=0;a<n.length;++a){var s=this.compact(t,r,n[a],i);null!==s&&o.push(s)}if(i.compactArrays&&1===o.length){var u=e.getContextValue(t,r,"@container");null===u&&(o=o[0])}return o}if(M(n)){if(i.link&&"@id"in n&&n["@id"]in i.link)for(var l=i.link[n["@id"]],a=0;a<l.length;++a)if(l[a].expanded===n)return l[a].compacted;if(J(n)||Y(n)){var o=j(t,r,n);return i.link&&Y(n)&&(n["@id"]in i.link||(i.link[n["@id"]]=[]),i.link[n["@id"]].push({expanded:n,compacted:o})),o}var c="@reverse"===r,o={};i.link&&"@id"in n&&(n["@id"]in i.link||(i.link[n["@id"]]=[]),i.link[n["@id"]].push({expanded:n,compacted:o}));for(var f=Object.keys(n).sort(),p=0;p<f.length;++p){var d=f[p],h=n[d];if("@id"!==d&&"@type"!==d)if("@reverse"!==d)if("@index"!==d)if("@graph"!==d&&"@list"!==d&&D(d)){var v=F(t,d);e.addValue(o,v,h)}else{if(0===h.length){var y=F(t,d,h,{vocab:!0},c);e.addValue(o,y,h,{propertyIsArray:!0})}for(var g=0;g<h.length;++g){var b=h[g],y=F(t,d,b,{vocab:!0},c),u=e.getContextValue(t,y,"@container"),m=K(b),_=null;m&&(_=b["@list"]);var E=this.compact(t,y,m?_:b,i);if(m)if(U(E)||(E=[E]),"@list"!==u){var k={};k[F(t,"@list")]=E,E=k,"@index"in b&&(E[F(t,"@index")]=b["@index"])}else if(y in o)throw new Fe('JSON-LD compact error; property has a "@list" @container rule but there is more than a single @list that matches the compacted term in the document. Compaction might mix unwanted items into the list.',"jsonld.SyntaxError",{code:"compaction to list of lists"});if("@language"===u||"@index"===u){var w;y in o?w=o[y]:o[y]=w={},"@language"===u&&J(E)&&(E=E["@value"]),e.addValue(w,b[u],E)}else{var x=!i.compactArrays||"@set"===u||"@list"===u||U(E)&&0===E.length||"@list"===d||"@graph"===d;e.addValue(o,y,E,{propertyIsArray:x})}}}else{var u=e.getContextValue(t,r,"@container");if("@index"===u)continue;var v=F(t,d);e.addValue(o,v,h)}else{var S=this.compact(t,"@reverse",h,i);for(var T in S)if(t.mappings[T]&&t.mappings[T].reverse){var A=S[T],u=e.getContextValue(t,T,"@container"),I="@set"===u||!i.compactArrays;e.addValue(o,T,A,{propertyIsArray:I}),delete S[T]}if(Object.keys(S).length>0){var v=F(t,d);e.addValue(o,v,S)}}else{var S;if(G(h))S=F(t,h,null,{vocab:"@type"===d});else{S=[];for(var g=0;g<h.length;++g)S.push(F(t,h[g],null,{vocab:!0}))}var v=F(t,d),x=U(S)&&0===h.length;e.addValue(o,v,S,{propertyIsArray:x})}}return o}return n},je.prototype.expand=function(t,r,n,i,o){var a=this;if(null===n||void 0===n)return null;if(!U(n)&&!M(n))return o||null!==r&&"@graph"!==N(t,r,{vocab:!0})?f(t,r,n):null;if(U(n)){var u=[],l=e.getContextValue(t,r,"@container");o=o||"@list"===l;for(var c=0;c<n.length;++c){var p=a.expand(t,r,n[c],i);if(o&&(U(p)||K(p)))throw new Fe("Invalid JSON-LD syntax; lists of lists are not permitted.","jsonld.SyntaxError",{code:"list of lists"});null!==p&&(U(p)?u=u.concat(p):u.push(p))}return u}"@context"in n&&(t=a.processContext(t,n["@context"],i));for(var d=N(t,r,{vocab:!0}),u={},h=Object.keys(n).sort(),v=0;v<h.length;++v){var y,g=h[v],b=n[g];if("@context"!==g){var m=N(t,g,{vocab:!0});if(null!==m&&(ee(m)||D(m))){if(D(m)){if("@reverse"===d)throw new Fe("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:b});if(m in u)throw new Fe("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:m})}if("@id"===m&&!G(b)){if(!i.isFrame)throw new Fe('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:b});if(!M(b))throw new Fe('Invalid JSON-LD syntax; "@id" value must be a string or an object.',"jsonld.SyntaxError",{code:"invalid @id value",value:b})}if("@type"===m&&q(b),"@graph"===m&&!M(b)&&!U(b))throw new Fe('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:b});if("@value"===m&&(M(b)||U(b)))throw new Fe('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:b});if("@language"===m){if(null===b)continue;if(!G(b))throw new Fe('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:b});b=b.toLowerCase()}if("@index"===m&&!G(b))throw new Fe('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:b});if("@reverse"!==m){var l=e.getContextValue(t,g,"@container");if("@language"===l&&M(b))y=s(b);else if("@index"===l&&M(b))y=function(e){for(var r=[],n=Object.keys(b).sort(),o=0;o<n.length;++o){var s=n[o],u=b[s];U(u)||(u=[u]),u=a.expand(t,e,u,i,!1);for(var l=0;l<u.length;++l){var c=u[l];"@index"in c||(c["@index"]=s),r.push(c)}}return r}(g);else{var _="@list"===m;if(_||"@set"===m){var E=r;if(_&&"@graph"===d&&(E=null),y=a.expand(t,E,b,i,_),_&&K(y))throw new Fe("Invalid JSON-LD syntax; lists of lists are not permitted.","jsonld.SyntaxError",{code:"list of lists"})}else y=a.expand(t,g,b,i,!1)}if(null!==y||"@value"===m)if("@list"===m||K(y)||"@list"!==l||(y=U(y)?y:[y],y={"@list":y}),t.mappings[g]&&t.mappings[g].reverse){var k=u["@reverse"]=u["@reverse"]||{};U(y)||(y=[y]);for(var w=0;w<y.length;++w){var x=y[w];if(J(x)||K(x))throw new Fe('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:y});e.addValue(k,m,x,{propertyIsArray:!0})}}else{var S=-1===["@index","@id","@type","@value","@language"].indexOf(m);e.addValue(u,m,y,{propertyIsArray:S})}}else{if(!M(b))throw new Fe('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:b});if("@reverse"in(y=a.expand(t,"@reverse",b,i)))for(var T in y["@reverse"])e.addValue(u,T,y["@reverse"][T],{propertyIsArray:!0});var k=u["@reverse"]||null;for(var T in y)if("@reverse"!==T){null===k&&(k=u["@reverse"]={}),e.addValue(k,T,[],{propertyIsArray:!0});for(var A=y[T],w=0;w<A.length;++w){var x=A[w];if(J(x)||K(x))throw new Fe('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:y});e.addValue(k,T,x,{propertyIsArray:!0})}}}}}}h=Object.keys(u);var I=h.length;if("@value"in u){if("@type"in u&&"@language"in u)throw new Fe('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and "@language".',"jsonld.SyntaxError",{code:"invalid value object",element:u});var C=I-1;if("@type"in u&&(C-=1),"@index"in u&&(C-=1),"@language"in u&&(C-=1),0!==C)throw new Fe('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and at most one other property which can be "@type" or "@language".',"jsonld.SyntaxError",{code:"invalid value object",element:u});if(null===u["@value"])u=null;else{if("@language"in u&&!G(u["@value"]))throw new Fe("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:u});if("@type"in u&&(!ee(u["@type"])||0===u["@type"].indexOf("_:")))throw new Fe('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:u})}}else if("@type"in u&&!U(u["@type"]))u["@type"]=[u["@type"]];else if("@set"in u||"@list"in u){if(I>1&&!(2===I&&"@index"in u))throw new Fe('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:u});"@set"in u&&(u=u["@set"],h=Object.keys(u),I=h.length)}else 1===I&&"@language"in u&&(u=null);return!M(u)||i.keepFreeFloatingNodes||o||null!==r&&"@graph"!==d||(0===I||"@value"in u||"@list"in u||1===I&&"@id"in u)&&(u=null),u},je.prototype.createNodeMap=function(e,t){t=t||{};var r=t.namer||t.issuer||new ue("_:b"),n={"@default":{}};return g(e,n,"@default",r),b(n)},je.prototype.flatten=function(e){for(var t=this.createNodeMap(e),r=[],n=Object.keys(t).sort(),i=0;i<n.length;++i){var o=t[n[i]];Y(o)||r.push(o)}return r},je.prototype.frame=function(e,t,r){var n={options:r,graphs:{"@default":{},"@merged":{}},subjectStack:[],link:{}},i=new ue("_:b");g(e,n.graphs,"@merged",i),n.subjects=n.graphs["@merged"];var o=[];return m(n,Object.keys(n.subjects).sort(),t,o,null),o},je.prototype.normalize=function(e,t,r){return"URDNA2015"===t.algorithm?new Pe(t).main(e,r):"URGNA2012"===t.algorithm?new Ne(t).main(e,r):void r(new Error("Invalid RDF Dataset Normalization algorithm: "+t.algorithm))},je.prototype.fromRDF=function(t,r,n){var i={},o={"@default":i},a={};for(var s in t){var u=t[s];s in o||(o[s]={}),"@default"===s||s in i||(i[s]={"@id":s});for(var l=o[s],c=0;c<u.length;++c){var f=u[c],p=f.subject.value,d=f.predicate.value,h=f.object;p in l||(l[p]={"@id":p});var y=l[p],g="IRI"===h.type||"blank node"===h.type;if(!g||h.value in l||(l[h.value]={"@id":h.value}),d!==xe||r.useRdfType||!g){var b=v(h,r.useNativeTypes);if(e.addValue(y,d,b,{propertyIsArray:!0}),g)if(h.value===we){var m=l[h.value];"usages"in m||(m.usages=[]),m.usages.push({node:y,property:d,value:b})}else h.value in a?a[h.value]=!1:a[h.value]={node:y,property:d,value:b}}else e.addValue(y,"@type",h.value,{propertyIsArray:!0})}}for(var s in o){var _=o[s];if(we in _){for(var E=_[we],k=0;k<E.usages.length;++k){for(var w=E.usages[k],y=w.node,x=w.property,S=w.value,T=[],A=[],I=Object.keys(y).length;x===ke&&M(a[y["@id"]])&&U(y[Ee])&&1===y[Ee].length&&U(y[ke])&&1===y[ke].length&&(3===I||4===I&&U(y["@type"])&&1===y["@type"].length&&"http://www.w3.org/1999/02/22-rdf-syntax-ns#List"===y["@type"][0])&&(T.push(y[Ee][0]),A.push(y["@id"]),w=a[y["@id"]],y=w.node,x=w.property,S=w.value,I=Object.keys(y).length,0===y["@id"].indexOf("_:")););if(x===Ee){if(y["@id"]===we)continue;S=_[S["@id"]][ke][0],T.pop(),A.pop()}delete S["@id"],S["@list"]=T.reverse();for(var C=0;C<A.length;++C)delete _[A[C]]}delete E.usages}}for(var R=[],F=Object.keys(i).sort(),k=0;k<F.length;++k){var j=F[k],y=i[j];if(j in o)for(var u=y["@graph"]=[],_=o[j],P=Object.keys(_).sort(),N=0;N<P.length;++N){var L=_[P[N]];Y(L)||u.push(L)}Y(y)||R.push(y)}n(null,R)},je.prototype.toRDF=function(e,t){var r=new ue("_:b"),n={"@default":{}};g(e,n,"@default",r);for(var i={},o=Object.keys(n).sort(),a=0;a<o.length;++a){var s=o[a];("@default"===s||ee(s))&&(i[s]=p(n[s],r,t))}return i},je.prototype.processContext=function(t,r,n){M(r)&&"@context"in r&&U(r["@context"])&&(r=r["@context"]);var i=U(r)?r:[r];if(0===i.length)return t.clone();for(var o=t,a=0;a<i.length;++a){var s=i[a];if(null!==s){if(M(s)&&"@context"in s&&(s=s["@context"]),!M(s))throw new Fe("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:s});if(e.cache.activeCtx){var u=e.cache.activeCtx.get(t,s);if(u){o=t=u;continue}}t=o,o=o.clone();var l={};if("@base"in s){var c=s["@base"];if(null===c)c=null;else{if(!G(c))throw new Fe('Invalid JSON-LD syntax; the value of "@base" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:s});if(""!==c&&!ee(c))throw new Fe('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI or the empty string.',"jsonld.SyntaxError",{code:"invalid base IRI",context:s})}null!==c&&(c=e.url.parse(c||"")),o["@base"]=c,l["@base"]=!0}if("@vocab"in s){var f=s["@vocab"];if(null===f)delete o["@vocab"];else{if(!G(f))throw new Fe('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:s});if(!ee(f))throw new Fe('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:s});o["@vocab"]=f}l["@vocab"]=!0}if("@language"in s){var f=s["@language"];if(null===f)delete o["@language"];else{if(!G(f))throw new Fe('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:s});o["@language"]=f.toLowerCase()}l["@language"]=!0}for(var p in s)P(o,s,p,l);e.cache.activeCtx&&e.cache.activeCtx.set(t,s,o)}else o=t=Q(n)}return o};var Pe=function(){var t={subject:"s",object:"o",name:"g"},r=function(e){e=e||{},this.name="URDNA2015",this.options=e,this.blankNodeInfo={},this.hashToBlankNodes={},this.canonicalIssuer=new ue("_:c14n"),this.quads=[],this.schedule={},this.schedule.MAX_DEPTH="maxCallStackDepth"in e?e.maxCallStackDepth:500,this.schedule.MAX_TOTAL_DEPTH="maxTotalCallStackDepth"in e?e.maxCallStackDepth:4294967295,this.schedule.depth=0,this.schedule.totalDepth=0,this.schedule.timeSlice="timeSlice"in e?e.timeSlice:10};return r.prototype.doWork=function(t,r){var n=this.schedule;if(n.totalDepth>=n.MAX_TOTAL_DEPTH)return r(new Error("Maximum total call stack depth exceeded; normalization aborting."));!function i(){if(n.depth===n.MAX_DEPTH)return n.depth=0,n.running=!1,e.nextTick(i);var o=(new Date).getTime();if(n.running||(n.start=(new Date).getTime(),n.deadline=n.start+n.timeSlice),o<n.deadline)return n.running=!0,n.depth++,n.totalDepth++,t(function(e,t){n.depth--,n.totalDepth--,r(e,t)});n.depth=0,n.running=!1,e.setImmediate(i)}()},r.prototype.forEach=function(e,t,r){var n,i,o=this,a=0;if(U(e))i=e.length,n=function(){return a!==i&&(n.value=e[a++],n.key=a,!0)};else{var s=Object.keys(e);i=s.length,n=function(){return a!==i&&(n.key=s[a++],n.value=e[n.key],!0)}}!function e(i,a){return i?r(i):n()?o.doWork(function(){t(n.value,n.key,e)}):void r()}()},r.prototype.waterfall=function(e,t){var r=this;r.forEach(e,function(e,t,n){r.doWork(e,n)},t)},r.prototype.whilst=function(e,t,r){var n=this;!function i(o){return o?r(o):e()?void n.doWork(t,i):r()}()},r.prototype.main=function(e,t){var r=this;r.schedule.start=(new Date).getTime();var n;if(r.options.format&&"application/nquads"!==r.options.format)return t(new Fe("Unknown output format.","jsonld.UnknownFormat",{format:r.options.format}));var i={};r.waterfall([function(t){r.forEach(e,function(e,t,n){"@default"===t&&(t=null),r.forEach(e,function(e,n,o){null!==t&&(0===t.indexOf("_:")?e.name={type:"blank node",value:t}:e.name={type:"IRI",value:t}),r.quads.push(e),r.forEachComponent(e,function(t){if("blank node"===t.type){var n=t.value;n in r.blankNodeInfo?r.blankNodeInfo[n].quads.push(e):(i[n]=!0,r.blankNodeInfo[n]={quads:[e]})}}),o()},n)},t)},function(e){var t=!0;r.whilst(function(){return t},function(e){t=!1,r.hashToBlankNodes={},r.waterfall([function(e){r.forEach(i,function(e,t,n){r.hashFirstDegreeQuads(t,function(e,i){if(e)return n(e);i in r.hashToBlankNodes?r.hashToBlankNodes[i].push(t):r.hashToBlankNodes[i]=[t],n()})},e)},function(e){var n=Object.keys(r.hashToBlankNodes).sort();r.forEach(n,function(e,n,o){var a=r.hashToBlankNodes[e];if(a.length>1)return o();var s=a[0];r.canonicalIssuer.getId(s),delete i[s],delete r.hashToBlankNodes[e],t=!0,o()},e)}],e)},e)},function(e){var t=Object.keys(r.hashToBlankNodes).sort();r.forEach(t,function(e,t,n){var i=[],o=r.hashToBlankNodes[e];r.waterfall([function(e){r.forEach(o,function(e,t,n){if(r.canonicalIssuer.hasId(e))return n();var o=new ue("_:b");o.getId(e),r.hashNDegreeQuads(e,o,function(e,t){if(e)return n(e);i.push(t),n()})},e)},function(e){i.sort(function(e,t){return e.hash<t.hash?-1:e.hash>t.hash?1:0}),r.forEach(i,function(e,t,n){for(var i in e.issuer.existing)r.canonicalIssuer.getId(i);n()},e)}],n)},e)},function(e){var t=[];r.waterfall([function(e){r.forEach(r.quads,function(e,n,i){r.forEachComponent(e,function(e){"blank node"===e.type&&0!==e.value.indexOf(r.canonicalIssuer.prefix)&&(e.value=r.canonicalIssuer.getId(e.value))}),t.push(ae(e)),i()},e)},function(e){if(t.sort(),"application/nquads"===r.options.format)return n=t.join(""),e();n=ie(t.join("")),e()}],e)}],function(e){t(e,n)})},r.prototype.hashFirstDegreeQuads=function(e,t){var r=this,n=r.blankNodeInfo[e];if("hash"in n)return t(null,n.hash);var i=[],o=n.quads;r.forEach(o,function(t,n,o){var a={predicate:t.predicate};r.forEachComponent(t,function(t,n){a[n]=r.modifyFirstDegreeComponent(e,t,n)}),i.push(ae(a)),o()},function(e){if(e)return t(e);i.sort(),n.hash=Oe.hashNQuads(r.name,i),t(null,n.hash)})},r.prototype.modifyFirstDegreeComponent=function(e,t){return"blank node"!==t.type?t:(t=te(t),t.value=t.value===e?"_:a":"_:z",t)},r.prototype.hashRelatedBlankNode=function(e,t,r,n,i){var o,a=this;a.waterfall([function(t){return a.canonicalIssuer.hasId(e)?(o=a.canonicalIssuer.getId(e),t()):r.hasId(e)?(o=r.getId(e),t()):void a.hashFirstDegreeQuads(e,function(e,r){if(e)return t(e);o=r,t()})}],function(e){if(e)return i(e);var r=new Oe(a.name);return r.update(n),"g"!==n&&r.update(a.getRelatedPredicate(t)),r.update(o),i(null,r.digest())})},r.prototype.getRelatedPredicate=function(e){return"<"+e.predicate.value+">"},r.prototype.hashNDegreeQuads=function(e,t,r){var n,i=this,o=new Oe(i.name);i.waterfall([function(r){i.createHashToRelated(e,t,function(e,t){if(e)return r(e);n=t,r()})},function(e){var r=Object.keys(n).sort();i.forEach(r,function(e,r,a){o.update(e);var s,u="",l=new Le(n[e]);i.whilst(function(){return l.hasNext()},function(e){var r=l.next(),n=t.clone(),o="",a=[];i.waterfall([function(t){i.forEach(r,function(t,r,s){if(i.canonicalIssuer.hasId(t)?o+=i.canonicalIssuer.getId(t):(n.hasId(t)||a.push(t),o+=n.getId(t)),0!==u.length&&o.length>=u.length&&o>u)return e();s()},t)},function(t){i.forEach(a,function(t,r,a){i.hashNDegreeQuads(t,n,function(r,i){return r?a(r):(o+=n.getId(t),o+="<"+i.hash+">",n=i.issuer,0!==u.length&&o.length>=u.length&&o>u?e():void a())})},t)},function(e){(0===u.length||o<u)&&(u=o,s=n),e()}],e)},function(e){if(e)return a(e);o.update(u),t=s,a()})},e)}],function(e){r(e,{hash:o.digest(),issuer:t})})},r.prototype.createHashToRelated=function(e,r,n){var i=this,o={},a=i.blankNodeInfo[e].quads;i.forEach(a,function(n,a,s){i.forEach(n,function(a,s,u){if("predicate"===s||"blank node"!==a.type||a.value===e)return u();var l=a.value,c=t[s];i.hashRelatedBlankNode(l,n,r,c,function(e,t){if(e)return u(e);t in o?o[t].push(l):o[t]=[l],u()})},s)},function(e){n(e,o)})},r.prototype.forEachComponent=function(e,t){for(var r in e)"predicate"!==r&&t(e[r],r,e)},r}(),Ne=function(){var e=function(e){Pe.call(this,e),this.name="URGNA2012"};return e.prototype=new Pe,e.prototype.modifyFirstDegreeComponent=function(e,t,r){return"blank node"!==t.type?t:(t=te(t),t.value="name"===r?"_:g":t.value===e?"_:a":"_:z",t)},e.prototype.getRelatedPredicate=function(e){return e.predicate.value},e.prototype.createHashToRelated=function(e,t,r){var n=this,i={},o=n.blankNodeInfo[e].quads;n.forEach(o,function(r,o,a){var s,u;if("blank node"===r.subject.type&&r.subject.value!==e)u=r.subject.value,s="p";else{if("blank node"!==r.object.type||r.object.value===e)return a();u=r.object.value,s="r"}n.hashRelatedBlankNode(u,r,t,s,function(e,t){t in i?i[t].push(u):i[t]=[u],a()})},function(e){r(e,i)})},e}();Object.keys||(Object.keys=function(e){if(e!==Object(e))throw new TypeError("Object.keys called on non-object");var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}),e.registerRDFParser("application/nquads",ie),e.registerRDFParser("rdfa-api",se),e.IdentifierIssuer=ue,e.UniqueNamer=ue,ue.prototype.clone=function(){var e=new ue(this.prefix);return e.counter=this.counter,e.existing=te(this.existing),e},ue.prototype.getId=function(e){if(e&&e in this.existing)return this.existing[e];var t=this.prefix+this.counter;return this.counter+=1,e&&(this.existing[e]=t),t},ue.prototype.getName=ue.prototype.getName,ue.prototype.hasId=function(e){return e in this.existing},ue.prototype.isNamed=ue.prototype.hasId;var Le=function(e){this.list=e.sort(),this.done=!1,this.left={};for(var t=0;t<e.length;++t)this.left[e[t]]=!0};Le.prototype.hasNext=function(){return!this.done},Le.prototype.next=function(){for(var e=this.list.slice(),t=null,r=0,n=this.list.length,i=0;i<n;++i){var o=this.list[i],a=this.left[o];(null===t||o>t)&&(a&&i>0&&o>this.list[i-1]||!a&&i<n-1&&o>this.list[i+1])&&(t=o,r=i)}if(null===t)this.done=!0;else{var s=this.left[t]?r-1:r+1;this.list[r]=this.list[s],this.list[s]=t;for(var i=0;i<n;++i)this.list[i]>t&&(this.left[this.list[i]]=!this.left[this.list[i]])}return e};var Oe=function(e){if(!(this instanceof Oe))return new Oe(e);if(-1===["URDNA2015","URGNA2012"].indexOf(e))throw new Error("Invalid RDF Dataset Normalization algorithm: "+e);Oe._init.call(this,e)};if(Oe.hashNQuads=function(e,t){for(var r=new Oe(e),n=0;n<t.length;++n)r.update(t[n]);return r.digest()},function(e){if(e){var t=r(26);return Oe._init=function(e){e="URDNA2015"===e?"sha256":"sha1",this.md=t.createHash(e)},Oe.prototype.update=function(e){return this.md.update(e,"utf8")},void(Oe.prototype.digest=function(){return this.md.digest("hex")})}Oe._init=function(e){e="URDNA2015"===e?new o.Algorithm:new i.Algorithm,this.md=new n(e)},Oe.prototype.update=function(e){return this.md.update(e)},Oe.prototype.digest=function(){return this.md.digest().toHex()};var n=function(e){if(!(this instanceof n))return new n(e);if(this._algorithm=e,!n._padding||n._padding.length<this._algorithm.blockSize){n._padding=String.fromCharCode(128);for(var t=String.fromCharCode(0),r=64;r>0;)1&r&&(n._padding+=t),(r>>>=1)>0&&(t+=t)}this.start()};n.prototype.start=function(){this.messageLength=0,this.fullMessageLength=[];for(var e=this._algorithm.messageLengthSize/4,t=0;t<e;++t)this.fullMessageLength.push(0);return this._input=new n.ByteBuffer,this.state=this._algorithm.start(),this},n.prototype.update=function(e){e=new n.ByteBuffer(unescape(encodeURIComponent(e))),this.messageLength+=e.length();var t=e.length();t=[t/4294967296>>>0,t>>>0];for(var r=this.fullMessageLength.length-1;r>=0;--r)this.fullMessageLength[r]+=t[1],t[1]=t[0]+(this.fullMessageLength[r]/4294967296>>>0),this.fullMessageLength[r]=this.fullMessageLength[r]>>>0,t[0]=t[1]/4294967296>>>0;for(this._input.putBytes(e.bytes());this._input.length()>=this._algorithm.blockSize;)this.state=this._algorithm.digest(this.state,this._input);return(this._input.read>2048||0===this._input.length())&&this._input.compact(),this},n.prototype.digest=function(){var e=new n.ByteBuffer;e.putBytes(this._input.bytes());var t=this.fullMessageLength[this.fullMessageLength.length-1]+this._algorithm.messageLengthSize,r=t&this._algorithm.blockSize-1;e.putBytes(n._padding.substr(0,this._algorithm.blockSize-r));for(var i=new n.ByteBuffer,o=0;o<this.fullMessageLength.length;++o)i.putInt32(this.fullMessageLength[o]<<3|this.fullMessageLength[o+1]>>>28);this._algorithm.writeMessageLength(e,i);var a=this._algorithm.digest(this.state.copy(),e),s=new n.ByteBuffer;return a.write(s),s},n.ByteBuffer=function(e){this.data="string"==typeof e?e:"",this.read=0},n.ByteBuffer.prototype.putInt32=function(e){this.data+=String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e)},n.ByteBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e},n.ByteBuffer.prototype.putBytes=function(e){this.data+=e},n.ByteBuffer.prototype.bytes=function(){return this.data.slice(this.read)},n.ByteBuffer.prototype.length=function(){return this.data.length-this.read},n.ByteBuffer.prototype.compact=function(){this.data=this.data.slice(this.read),this.read=0},n.ByteBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var r=this.data.charCodeAt(t);r<16&&(e+="0"),e+=r.toString(16)}return e};var i={_w:null};i.Algorithm=function(){this.name="sha1",this.blockSize=64,this.digestLength=20,this.messageLengthSize=8},i.Algorithm.prototype.start=function(){return i._w||(i._w=new Array(80)),i._createState()},i.Algorithm.prototype.writeMessageLength=function(e,t){e.putBytes(t.bytes())},i.Algorithm.prototype.digest=function(e,t){for(var r,n,o,a,s,u,l,c,f=t.length(),p=i._w;f>=64;){for(n=e.h0,o=e.h1,a=e.h2,s=e.h3,u=e.h4,c=0;c<16;++c)r=t.getInt32(),p[c]=r,l=s^o&(a^s),r=(n<<5|n>>>27)+l+u+1518500249+r,u=s,s=a,a=o<<30|o>>>2,o=n,n=r;for(;c<20;++c)r=p[c-3]^p[c-8]^p[c-14]^p[c-16],r=r<<1|r>>>31,p[c]=r,l=s^o&(a^s),r=(n<<5|n>>>27)+l+u+1518500249+r,u=s,s=a,a=o<<30|o>>>2,o=n,n=r;for(;c<32;++c)r=p[c-3]^p[c-8]^p[c-14]^p[c-16],r=r<<1|r>>>31,p[c]=r,l=o^a^s,r=(n<<5|n>>>27)+l+u+1859775393+r,u=s,s=a,a=o<<30|o>>>2,o=n,n=r;for(;c<40;++c)r=p[c-6]^p[c-16]^p[c-28]^p[c-32],r=r<<2|r>>>30,p[c]=r,l=o^a^s,r=(n<<5|n>>>27)+l+u+1859775393+r,u=s,s=a,a=o<<30|o>>>2,o=n,n=r;for(;c<60;++c)r=p[c-6]^p[c-16]^p[c-28]^p[c-32],r=r<<2|r>>>30,p[c]=r,l=o&a|s&(o^a),r=(n<<5|n>>>27)+l+u+2400959708+r,u=s,s=a,a=o<<30|o>>>2,o=n,n=r;for(;c<80;++c)r=p[c-6]^p[c-16]^p[c-28]^p[c-32],r=r<<2|r>>>30,p[c]=r,l=o^a^s,r=(n<<5|n>>>27)+l+u+3395469782+r,u=s,s=a,a=o<<30|o>>>2,o=n,n=r;e.h0=e.h0+n|0,e.h1=e.h1+o|0,e.h2=e.h2+a|0,e.h3=e.h3+s|0,e.h4=e.h4+u|0,f-=64}return e},i._createState=function(){var e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520};return e.copy=function(){var t=i._createState();return t.h0=e.h0,t.h1=e.h1,t.h2=e.h2,t.h3=e.h3,t.h4=e.h4,t},e.write=function(t){t.putInt32(e.h0),t.putInt32(e.h1),t.putInt32(e.h2),t.putInt32(e.h3),t.putInt32(e.h4)},e};var o={_k:null,_w:null};o.Algorithm=function(){this.name="sha256",this.blockSize=64,this.digestLength=32,this.messageLengthSize=8},o.Algorithm.prototype.start=function(){return o._k||o._init(),o._createState()},o.Algorithm.prototype.writeMessageLength=function(e,t){e.putBytes(t.bytes())},o.Algorithm.prototype.digest=function(e,t){for(var r,n,i,a,s,u,l,c,f,p,d,h,v,y,g,b=t.length(),m=o._k,_=o._w;b>=64;){for(l=0;l<16;++l)_[l]=t.getInt32();for(;l<64;++l)r=_[l-2],r=(r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10,n=_[l-15],n=(n>>>7|n<<25)^(n>>>18|n<<14)^n>>>3,_[l]=r+_[l-7]+n+_[l-16]|0;for(c=e.h0,f=e.h1,p=e.h2,d=e.h3,h=e.h4,v=e.h5,y=e.h6,g=e.h7,l=0;l<64;++l)a=(h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7),s=y^h&(v^y),i=(c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),u=c&f|p&(c^f),r=g+a+s+m[l]+_[l],n=i+u,g=y,y=v,v=h,h=d+r|0,d=p,p=f,f=c,c=r+n|0;e.h0=e.h0+c|0,e.h1=e.h1+f|0,e.h2=e.h2+p|0,e.h3=e.h3+d|0,e.h4=e.h4+h|0,e.h5=e.h5+v|0,e.h6=e.h6+y|0,e.h7=e.h7+g|0,b-=64}return e},o._createState=function(){var e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225};return e.copy=function(){var t=o._createState();return t.h0=e.h0,t.h1=e.h1,t.h2=e.h2,t.h3=e.h3,t.h4=e.h4,t.h5=e.h5,t.h6=e.h6,t.h7=e.h7,t},e.write=function(t){t.putInt32(e.h0),t.putInt32(e.h1),t.putInt32(e.h2),t.putInt32(e.h3),t.putInt32(e.h4),t.putInt32(e.h5),t.putInt32(e.h6),t.putInt32(e.h7)},e},o._init=function(){o._k=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],o._w=new Array(64)}}(l),!he)var Qe=function(){he=r(26).XMLSerializer};if(e.url={},e.url.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},e.url.parse=function(t,r){for(var n={},i=e.url.parsers[r||"full"],o=i.regex.exec(t),a=i.keys.length;a--;)n[i.keys[a]]=void 0===o[a]?null:o[a];return n.normalizedPath=le(n.path,!!n.authority),n},l?e.useDocumentLoader("node"):"undefined"!=typeof XMLHttpRequest&&e.useDocumentLoader("xhr"),l){e.use=function(t){switch(t){case"request":e.request=r(26);break;default:throw new Fe("Unknown extension.","jsonld.UnknownExtension",{extension:t})}};var De={exports:{},filename:a};r(26)(De,"version"),e.version=De.exports.version}return e},p=function(){return f(function(){return p()})};!l&&r(255)?(s=[],void 0!==(u=function(){return f(p),p}.apply(t,s))&&(e.exports=u)):(f(p),void 0!==e&&e.exports&&(e.exports=p),c&&("undefined"==typeof jsonld?jsonld=jsonldjs=p:jsonldjs=p))}()}).call(t,r(12),r(7),r(50).setImmediate,"/")},function(e,t){},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t){},function(e,t,r){var n=r(0),i=r(0),o=(r(48).QuadIndex,r(48).Pattern),a=r(77),s=r(75).AbstractQueryTree;Callbacks={},Callbacks.ANYTHING={token:"var",value:"_"},Callbacks.added="added",Callbacks.deleted="deleted",Callbacks.eventsFlushed="eventsFlushed",Callbacks.CallbacksBackend=function(){this.aqt=new s,this.engine=arguments[0],this.indexMap={},this.observersMap={},this.queriesIndexMap={},this.emptyNotificationsMap={},this.queriesList=[],this.pendingQueries=[],this.matchedQueries=[],this.updateInProgress=null,this.indices=["SPOG","GP","OGS","POG","GSP","OS"],this.componentOrders={SPOG:["subject","predicate","object","graph"],GP:["graph","predicate","subject","object"],OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate","object"],OS:["object","subject","predicate","graph"]},this.callbackCounter=0,this.callbacksMap={},this.callbacksInverseMap={},this.queryCounter=0,this.queriesMap={},this.queriesCallbacksMap={},this.queriesInverseMap={};for(var e=0;e<this.indices.length;e++){var t=this.indices[e];this.indexMap[t]={},this.queriesIndexMap[t]={}}},Callbacks.CallbacksBackend.prototype.startGraphModification=function(){!0!==this.ongoingModification&&(this.pendingQueries=[].concat(this.queriesList),this.matchedQueries=[],null==this.updateInProgress&&(this.updateInProgress={},this.updateInProgress[Callbacks.added]=[],this.updateInProgress[Callbacks.deleted]=[]))},Callbacks.CallbacksBackend.prototype.nextGraphModification=function(e,t){this.updateInProgress[e].push(t)},Callbacks.CallbacksBackend.prototype.endGraphModification=function(e){if(!0!==this.ongoingModification){var t=this;if(null!=this.updateInProgress){var r=t.updateInProgress;t.updateInProgress=null,this.sendNotification(Callbacks.deleted,r[Callbacks.deleted],function(){t.sendNotification(Callbacks.added,r[Callbacks.added],function(){t.sendEmptyNotification(Callbacks.eventsFlushed,null,function(){t.dispatchQueries(function(){e(!0)})})})})}else e(!0)}else e(!0)},Callbacks.CallbacksBackend.prototype.cancelGraphModification=function(){!0!==this.ongoingModification&&(this.updateInProgress=null)},Callbacks.CallbacksBackend.prototype.sendNotification=function(e,t,r){for(var n={},i=0;i<t.length;i++){var o=t[i];for(var a in this.indexMap){var s=this.indexMap[a],u=this.componentOrders[a];this._searchCallbacksInIndex(s,u,e,o,n),0!=this.pendingQueries.length&&(s=this.queriesIndexMap[a],this._searchQueriesInIndex(s,u,o))}}this.dispatchNotifications(n),null!=r&&r(!0)},Callbacks.CallbacksBackend.prototype.sendEmptyNotification=function(e,t,r){for(var n=this.emptyNotificationsMap[e]||[],i=0;i<n.length;i++)n[i](e,t);r()},Callbacks.CallbacksBackend.prototype.dispatchNotifications=function(e){for(var t in e){var r=this.callbacksMap[t],n=e[t][Callbacks.deleted];if(null!=n)try{r(Callbacks.deleted,n)}catch(e){}for(var i in e[t])if(i!=Callbacks.deleted)try{r(i,e[t][i])}catch(e){}}},Callbacks.CallbacksBackend.prototype._searchCallbacksInIndex=function(e,t,r,n,i){for(var o=n[1],n=n[0],a=0;a<t.length+1;a++){for(var s=e._||[],u=[],l=0;l<s.length;l++){var c=s[l];null!=this.callbacksMap[c]&&(i[c]=i[c]||{},i[c][r]=i[c][r]||[],i[c][r].push(n),u.push(c))}e._=u;var f=t[a];if(null==e[""+o[f]])break;e=e[""+o[f]]}},Callbacks.CallbacksBackend.prototype.subscribeEmpty=function(e,t){var r=this.emptyNotificationsMap[e]||[];r.push(t),this.emptyNotificationsMap[e]=r},Callbacks.CallbacksBackend.prototype.unsubscribeEmpty=function(e,t){var r=this.emptyNotificationsMap[e];null!=r&&(r=n.reject(r,function(e){return e===t})),this.emptyNotificationsMap[e]=r},Callbacks.CallbacksBackend.prototype.subscribe=function(e,t,r,n,i,a){var s=this._tokenizeComponents(e,t,r,n),u={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,u);var l=this;this.engine.normalizeQuad(s,u,!0,function(e){for(var t=new o(e),r=l._indexForPattern(t),n=l.componentOrders[r],s=l.indexMap[r],u=0;u<n.length;u++){var c=n[u],f=e[c];if("_"===f){null==s._&&(s._=[]),l.callbackCounter++,s._.push(l.callbackCounter),l.callbacksMap[l.callbackCounter]=i,l.callbacksInverseMap[i]=l.callbackCounter;break}u===n.length-1?(s[f]=s[f]||{_:[]},l.callbackCounter++,s[f]._.push(l.callbackCounter),l.callbacksMap[l.callbackCounter]=i,l.callbacksInverseMap[i]=l.callbackCounter):(s[f]=s[f]||{},s=s[f])}null!=a&&a(!0)})},Callbacks.CallbacksBackend.prototype.unsubscribe=function(e){var t=this.callbacksInverseMap[e];null!=t&&(delete this.callbacksInverseMap[e],delete this.callbacksMap[t])},Callbacks.CallbacksBackend.prototype._tokenizeComponents=function(e,t,r,n){var i={};return null==e?i.subject=Callbacks.ANYTHING:0==e.indexOf("_:")?i.subject={token:"blank",value:e}:i.subject={token:"uri",value:e},i.predicate=null==t?Callbacks.ANYTHING:{token:"uri",value:t},i.object=null==r?Callbacks.ANYTHING:{token:"uri",value:r},i.graph=null==n?Callbacks.ANYTHING:{token:"uri",value:n},i},Callbacks.CallbacksBackend.prototype._indexForPattern=function(e){for(var t=e.indexKey,r=this.indices,i=0;i<r.length;i++)for(var o=r[i],a=this.componentOrders[o],s=0;s<a.length&&!1!==n.include(t,a[s]);s++)if(s==t.length-1)return o;return"SPOG"},Callbacks.CallbacksBackend.prototype.observeNode=function(){var e,t,r,n;4===arguments.length?(e=arguments[0],t=arguments[1],r=arguments[2],n=arguments[3]):(e=arguments[0],t=this.engine.lexicon.defaultGraphUri,r=arguments[1],n=arguments[2]);var i="CONSTRUCT { <"+e+"> ?p ?o } WHERE { GRAPH <"+t+"> { <"+e+"> ?p ?o } }",o=this,s={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,s);var u=[];this.engine.execute(i,function(t,i){if(t)n&&n(!1);else{var l=i,c=!1,f=function(e,t){if("eventsFlushed"===e&&c){c=!1;try{r(l)}catch(e){}}else if("eventsFlushed"!==e){c=!0;for(var n=0;n<t.length;n++){var i=t[n],f=a.buildRDFResource(i.subject,u,o.engine,s),p=a.buildRDFResource(i.predicate,u,o.engine,s),d=a.buildRDFResource(i.object,u,o.engine,s);null!=f&&null!=p&&null!=d&&(i=new a.Triple(f,p,d),e===Callbacks.added?l.add(i):e===Callbacks.deleted&&l.remove(i))}}};o.observersMap[r]=f,o.subscribeEmpty(Callbacks.eventsFlushed,f),o.subscribe(e,null,null,null,f,function(){try{r(l)}catch(e){}n&&n(!0)})}})},Callbacks.CallbacksBackend.prototype.stopObservingNode=function(e){var t=this.observersMap[e];return!!t&&(this.unsubscribe(t),this.unsubscribeEmpty(Callbacks.eventsFlushed,t),!0)},Callbacks.CallbacksBackend.prototype.observeQuery=function(e,t,r){var n=this.aqt.parseQueryString(e),a=this.aqt.parseSelect(n.units[0]),s=this.aqt.collectBasicTriples(a),u=this,l={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,l);var c=this.queryCounter;this.queryCounter++,this.queriesMap[c]=e,this.queriesInverseMap[e]=c,this.queriesList.push(c),this.queriesCallbacksMap[c]=t,i.eachSeries(s,function(e,t){null==e.graph&&(e.graph=u.engine.lexicon.defaultGraphUriTerm),u.engine.normalizeQuad(e,l,!0,function(e){for(var r=new o(e),n=u._indexForPattern(r),i=u.componentOrders[n],a=u.queriesIndexMap[n],s=0;s<i.length;s++){var l=i[s],f=e[l];if("string"==typeof f){null==a._&&(a._=[]),a._.push(c);break}s===i.length-1?(a[f]=a[f]||{_:[]},a[f]._.push(c)):(a[f]=a[f]||{},a=a[f])}t()})},function(){u.engine.execute(e,function(e,r){e?console.log("ERROR in query callback "+r):t(r)}),null!=r&&r()})},Callbacks.CallbacksBackend.prototype.stopObservingQuery=function(e){var t=this.queriesInverseMap[e];null!=t&&(delete this.queriesInverseMap[e],delete this.queriesMap[t],this.queriesList=n.reject(this.queriesList,function(e){return e===t}))},Callbacks.CallbacksBackend.prototype._searchQueriesInIndex=function(e,t,r){for(var i=r[1],r=r[0],o=0;o<t.length+1;o++){for(var a=e._||[],s=[],u=0;u<a.length;u++){var l=a[u];n.include(this.pendingQueries,l)&&(n.remove(this.pendingQueries,function(e){return e===l}),this.matchedQueries.push(l)),null!=this.queriesMap[l]&&s.push(l)}e._=s;var c=t[o];if(null==e[""+i[c]])break;e=e[""+i[c]]}},Callbacks.CallbacksBackend.prototype.dispatchQueries=function(e){var t,r,n=this,o={};i.eachSeries(this.matchedQueries,function(e,i){null==o[e]?(o[e]=!0,t=n.queriesMap[e],r=n.queriesCallbacksMap[e],n.engine.execute(t,function(e,t){if(!e)try{r(t)}catch(e){}i()})):i()},function(){e()})},Callbacks.CallbacksBackend.added=Callbacks.added,Callbacks.CallbacksBackend.deleted=Callbacks.deleted,Callbacks.CallbacksBackend.eventsFlushed=Callbacks.eventsFlushed,e.exports=Callbacks},function(e,t,r){var n=r(48).QuadIndex,i=r(0);QuadBackend=function(e,t){this.indexMap={},this.treeOrder=e.treeOrder,this.indices=e.index||QuadBackend.allIndices,this.componentOrders=QuadBackend.componentOrders;var r=this;i.eachSeries(this.indices,function(e,t){new n({order:r.treeOrder,componentOrder:r.componentOrders[e]},function(n){r.indexMap[e]=n,t()})},function(){t(r)})},QuadBackend.allIndices=["SPOG","GP","OGS","POG","GSP","OS"],QuadBackend.componentOrders={SPOG:["subject","predicate","object","graph"],GP:["graph","predicate","subject","object"],OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate","object"],OS:["object","subject","predicate","graph"]},QuadBackend.prototype._indexForPattern=function(e){for(var t=e.indexKey,r=0;r<QuadBackend.allIndices.length;r++)for(var n=QuadBackend.allIndices[r],o=QuadBackend.componentOrders[n],a=0;a<o.length&&!1!==i.include(t,o[a]);a++)if(a==t.length-1)return n;return"SPOG"},QuadBackend.prototype.index=function(e,t){var r=this;i.eachSeries(this.indices,function(t,n){r.indexMap[t].insert(e,function(){n()})},function(){t(!0)})},QuadBackend.prototype.range=function(e,t){var r=this._indexForPattern(e),n=this.indexMap[r];null!=n&&n.range(e,function(e){t(e)})},QuadBackend.prototype.search=function(e,t){var r=this.indexMap.SPOG;null!=r&&r.search(e,function(e){t(null!=e)})},QuadBackend.prototype.delete=function(e,t){var r=this;i.eachSeries(this.indices,function(t,n){r.indexMap[t].delete(e,function(){n()})},function(){t(!0)})},QuadBackend.prototype.clear=function(e){var t=this;i.eachSeries(this.indices,function(e,r){new n({order:t.treeOrder,componentOrder:t.componentOrders[e]},function(n){t.indexMap[e]=n,r()})},function(){e(!0)})},e.exports.QuadBackend=QuadBackend},function(e,t,r){var n=r(0);PersistentQuadBackend=function(e,t){var r=this;if(0!==arguments){n.registerIndexedDB(r),this.indexMap={},this.indices=["S","P","O","G","SP","SO","SG","PO","PG","OG","SPO","SPG","SOG","POG","SPOG"],this.componentOrders={S:["subject","predicate","object","graph"],P:["predicate","subject","object","graph"],O:["object","subject","predicate","graph"],G:["graph","subject","predicate","object"],SP:["subject","predicate","object","graph"],SO:["subject","object","predicate","graph"],SG:["subject","graph","predicate","object"],PO:["predicate","object","subject","graph"],PG:["predicate","graph","subject","object"],OG:["object","graph","subject","predicate"],SPO:["subject","predicate","object","graph"],SPG:["subject","predicate","graph","object"],SOG:["subject","object","graph","predicate"],POG:["predicate","object","graph","subject"],SPOG:["subject","predicate","object","graph"]},this.componentOrdersMap={};for(var i in this.componentOrders){var o=this.componentOrders[i],a=o.slice(0,i.length).sort().join(".");this.componentOrdersMap[a]=i}r.dbName=e.name||"rdfstorejs";var s=r.indexedDB.open(this.dbName+"_db",1);s.onerror=function(e){t(null,new Error("Error opening IndexedDB: "+e.target.errorCode))},s.onsuccess=function(e){r.db=e.target.result,t(r)},s.onupgradeneeded=function(e){var t=e.target.result,i=t.createObjectStore(r.dbName,{keyPath:"SPOG"});n.each(r.indices,function(e){"SPOG"!==e&&i.createIndex(e,e,{unique:!1})})}}},PersistentQuadBackend.prototype.index=function(e,t){var r=this;n.each(this.indices,function(t){e[t]=r._genMinIndexKey(e,t)});var i=r.db.transaction([r.dbName],"readwrite");i.oncomplete=function(e){},i.onerror=function(e){t(null,new Error(e.target.statusCode))},i.objectStore(r.dbName).add(e).onsuccess=function(e){t(!0)}},PersistentQuadBackend.prototype.range=function(e,t){var r,n=this,i=n.db.transaction([n.dbName]).objectStore(n.dbName),o=this._indexForPattern(e),a=this._genMinIndexKey(e,o),s=this._genMaxIndexKey(e,o),u=n.IDBKeyRange.bound(a,s,!1,!1),l=[];r="SPOG"===o?i:i.index(o),r.openCursor(u).onsuccess=function(e){var r=e.target.result;r?(l.push(r.value),r.continue()):t(l)}},PersistentQuadBackend.prototype.search=function(e,t){var r=this,n=r.db.transaction([r.dbName]).objectStore(r.dbName),i=this._genMinIndexKey(e,"SPOG"),o=n.get(i);o.onerror=function(e){t(null,new Error(e.target.statusCode))},o.onsuccess=function(e){t(null!=e.target.result)}},PersistentQuadBackend.prototype.delete=function(e,t){var r=this,n=r._genMinIndexKey(e,"SPOG"),i=r.db.transaction([r.dbName],"readwrite").objectStore(r.dbName).delete(n);i.onsuccess=function(){t(!0)},i.onerror=function(e){t(null,new Error(e.target.statusCode))}},PersistentQuadBackend.prototype._genMinIndexKey=function(e,t){var r=this.componentOrders[t];return n.map(r,function(t){return"string"==typeof e[t]||null==e[t]?"0":e[t]}).join(".")},PersistentQuadBackend.prototype._genMaxIndexKey=function(e,t){for(var r=this.componentOrders[t],i=[],o=0;o<r.length;o++){var a=r[o],s=e[a];i[o]="string"==typeof s?"z":s}return n.map(i,function(e){return""+e}).join(".")},PersistentQuadBackend.prototype._indexForPattern=function(e){var t=this,r=e.indexKey,n=r.sort().join("."),i=t.componentOrdersMap[n];if(null==i)throw new Error("Error, cannot find index for indexKey "+n);return i},PersistentQuadBackend.prototype.clear=function(e){var t,r=this,n=r.db.transaction([r.dbName],"readwrite");t=n.objectStore(r.dbName).clear(),t.onsuccess=function(){e()},t.onerror=function(){e()}},e.exports.PersistentQuadBackend=PersistentQuadBackend},function(e,t,r){var n=(r(76).Tree,r(0)),i=n,o=r(135).Lexicon;PersistentLexicon=function(e,t){var r=this;n.registerIndexedDB(r),this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri},this.oidCounter=1,r.dbName=t||"rdfstorejs";var i=r.indexedDB.open(this.dbName+"_lexicon",1);i.onerror=function(t){e(null,new Error("Error opening IndexedDB: "+t.target.errorCode))},i.onsuccess=function(t){r.db=t.target.result,e(r)},i.onupgradeneeded=function(e){r.db=e.target.result,r.db.createObjectStore("knownGraphs",{keyPath:"oid"}).createIndex("uriToken","uriToken",{unique:!0}),r.db.createObjectStore("components",{keyPath:"id",autoIncrement:!0}).createIndex("value","value",{unique:!0})}},PersistentLexicon.prototype.registerGraph=function(e,t,r){if(e!=this.defaultGraphOid){var n=this.db.transaction(["knownGraphs"],"readwrite");n.onerror=function(e){r(null,new Error(e.target.statusCode))};var i=n.objectStore("knownGraphs");i.get(t).onsuccess=function(n){n.target.result?r(!0):i.add({oid:e,uriToken:t}).onsuccess=function(e){r(!0)}}}else r()},PersistentLexicon.prototype.registeredGraphs=function(e,t){var r=[],n=this.db.transaction(["knownGraphs"],"readwrite").objectStore("knownGraphs"),i=n.openCursor();i.onsuccess=function(n){var i=n.target.result;i?(!0===e?r.push(i.value.uriToken):r.push(i.value.oid),i.continue()):t(r)},i.onerror=function(e){t(null,new Error("Error retrieving data from the cursor: "+e.target.errorCode))}},PersistentLexicon.prototype.registerUri=function(e,t){var r=this;if(e===this.defaultGraphUri)t(this.defaultGraphOid);else{var n=r.db.transaction(["components"],"readwrite").objectStore("components"),i=n.index("value").get("_u:"+e);i.onsuccess=function(r){var i=r.target.result;if(i){i.counter++;var o=i.id,a=n.put(i);a.onsuccess=function(e){t(o)},a.onerror=function(e){t(null,new Error("Error updating the URI data"+e.target.errorCode))}}else{var s=n.add({value:"_u:"+e,counter:0,uri:!0});s.onsuccess=function(e){t(e.target.result)},s.onerror=function(e){t(null,new Error("Error inserting the URI data"+e.target.errorCode))}}},i.onerror=function(e){t(null,new Error("Error retrieving the URI data"+e.target.errorCode))}}},PersistentLexicon.prototype.resolveUri=function(e,t){if(e===this.defaultGraphUri)t(this.defaultGraphOid);else{var r=this.db.transaction(["components"]).objectStore("components"),n=r.index("value").get("_u:"+e);n.onsuccess=function(e){t(null!=e.target.result?e.target.result.id:-1)},n.onerror=function(e){t(null,new Error("Error retrieving uri data "+e.target.errorCode))}}},PersistentLexicon.prototype.resolveUriCost=function(e,t){if(e===this.defaultGraphUri)t(0);else{var r=that.db.transaction(["components"]).objectStore("components"),n=r.index("value").get("_u:"+e);n.onsuccess=function(e){t(null!=e.target.result?e.target.result.cost:-1)},n.onerror=function(e){t(null,new Error("Error retrieving uri data "+e.target.errorCode))}}},PersistentLexicon.prototype.registerBlank=function(e){var t=guid(),r=this,n=r.db.transaction(["components"],"readwrite").objectStore("components"),i=n.add({value:"_b:"+t,counter:0,label:!0});i.onsuccess=function(t){e(t.target.result)},i.onerror=function(t){e(null,new Error("Error inserting the URI data"+t.target.errorCode))}},PersistentLexicon.prototype.resolveBlankCost=function(e,t){t(0)},PersistentLexicon.prototype.registerLiteral=function(e,t){var r=this,n=r.db.transaction(["components"],"readwrite").objectStore("components"),i=n.index("value").get("_l:"+e);i.onsuccess=function(r){var i=r.target.result;if(i){i.counter++;var o=i.id,a=n.put(i);a.onsuccess=function(e){t(o)},a.onerror=function(e){t(null,new Error("Error updating the literal data"+e.target.errorCode))}}else{var s=n.add({value:"_l:"+e,counter:0,literal:!0});s.onsuccess=function(e){t(e.target.result)},s.onerror=function(e){t(null,new Error("Error inserting the literal data"+e.target.errorCode))}}},i.onerror=function(e){t(null,new Error("Error retrieving the literal data"+e.target.errorCode))}},PersistentLexicon.prototype.resolveLiteral=function(e,t){var r=that.db.transaction(["components"]).objectStore("components"),n=r.index("value").get("_l:"+e);n.onsuccess=function(e){t(null!=e.target.result?e.target.result.id:-1)},n.onerror=function(e){t(null,new Error("Error retrieving literal data "+e.target.errorCode))}},PersistentLexicon.prototype.resolveLiteralCost=function(e,t){var r=that.db.transaction(["components"]).objectStore("components"),n=r.index("components").get(e);n.onsuccess=function(e){t(null!=e.target.result?e.target.result.cost:-1)},n.onerror=function(e){t(null,new Error("Error retrieving literal data "+e.target.errorCode))}},PersistentLexicon.prototype.parseLiteral=function(e){return o.prototype.parseLiteral(e)},PersistentLexicon.prototype.parseUri=function(e){return o.prototype.parseUri(e)},PersistentLexicon.prototype.retrieve=function(e,t){var r,n,i=this;e===this.defaultGraphOid?t({token:"uri",value:this.defaultGraphUri,prefix:null,suffix:null,defaultGraph:!0}):(r=i.db.transaction(["components"]),n=r.objectStore("components").get(e),n.onsuccess=function(e){if(null!=e.target.result)if(null!=e.target.result.label){var r="_:"+e.target.result.id;t({token:"blank",value:r})}else null!=e.target.result.uri?t(i.parseUri(e.target.result.value.slice(3,e.target.result.value.length))):null!=e.target.result.literal?t(i.parseLiteral(e.target.result.value.slice(3,e.target.result.value.length))):(console.log(e.target.result),t(null,new Error("Unknown type of component "+e.target.result)));else t(null,null)},n.onerror=function(e){t(null,new Error("Error searching in blanks data "+e.target.errorCode))})},PersistentLexicon.prototype.clear=function(e){var t=this;this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri};var r,n=t.db.transaction(["components"],"readwrite"),i=n.objectStore("components"),o=function(){null!=e&&e()};r=i.clear(),r.onsuccess=o,r.onerror=o},PersistentLexicon.prototype.unregister=function(e,t,r){var n=this;i.seq(function(r){n._unregisterTerm(e.subject.token,t.subject,r)},function(r){n._unregisterTerm(e.predicate.token,t.predicate,r)},function(r){n._unregisterTerm(e.object.token,t.object,r)},function(r){null!=e.graph?n._unregisterTerm(e.graph.token,t.graph,r):r()})(function(){r(!0)})},PersistentLexicon.prototype._unregisterTerm=function(e,t,r){var n,i=this,o=i.db.transaction(["components","knownGraphs"],"readwrite");if("uri"===e)if(t!=this.defaultGraphOid){n=o.objectStore("components").delete(t),n.onsuccess=function(){o.objectStore("knownGraphs").delete(t).onsuccess=function(){r()}}()}else r();else n=o.objectStore("components").delete(t),n.onsuccess=function(){r()}},e.exports={PersistentLexicon:PersistentLexicon}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SparqlUpdateWorkerService=t.SparqlUpdateService=void 0;var i=r(1),o=n(i),a=r(3),s=n(a),u=r(6);t.SparqlUpdateService=function(){function e(t){(0,o.default)(this,e),this.workerService=t}return e.$inject=["workerService"],(0,s.default)(e,[{key:"updateQuads",value:function(e,t,r){return this.workerService.call("sparqlUpdateWorkerService","updateQuads",[e,t,r])}},{key:"updateGraphs",value:function(e,t,r){return this.workerService.call("sparqlUpdateWorkerService","updateGraphs",[e,t,r])}}]),e}();(t.SparqlUpdateWorkerService=function(){function e(t){(0,o.default)(this,e),this.fibraSparqlService=t}return e.$inject=["fibraSparqlService"],(0,s.default)(e,[{key:"updateQuads",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n={},i={},o=[],a=[];return t.forEach(function(e){var t=n[e.graph.value];t||(t=new u.Graph(e.graph),n[e.graph.value]=t,o.push(t)),t.triples.push(u.DataFactory.triple(e.subject,e.predicate,e.object))}),r.forEach(function(e){var t=i[e.graph.value];t||(t=new u.Graph(e.graph),i[e.graph.value]=t,a.push(t)),t.triples.push(u.DataFactory.triple(e.subject,e.predicate,e.object))}),this.updateGraphs(e,o,a)}},{key:"updateGraphs",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=r.map(function(e){return(u.DefaultGraph.instance.equals(e.graph)?"":"GRAPH"+e.graph.toCanonical())+"{"+e.triples.map(function(e){return e.toCanonical()}).join(" . ")+"}"}).join(""),o=n.map(function(e){return(u.DefaultGraph.instance.equals(e.graph)?"":"GRAPH"+e.graph.toCanonical())+"{"+e.triples.map(function(e){return e.toCanonical()}).join(" . ")+"}"}).join("");return this.fibraSparqlService.update(t,e.queryTemplate.replace(/<DELETE>/g,o).replace(/<INSERT>/g,i)).then(function(e){return!0},function(e){return!1})}}]),e}()).queryTemplate="DELETE{<DELETE>}INSERT{<INSERT>}WHERE {}"},function(e,t){/**
 * @license HTTP Auth Interceptor Module for AngularJS
 * (c) 2012 Witold Szczerba
 * License: MIT
 */
!function(){"use strict";angular.module("http-auth-interceptor",["http-auth-interceptor-buffer"]).factory("authService",["$rootScope","httpBuffer",function(e,t){return{loginConfirmed:function(r,n){var i=n||function(e){return e};e.$broadcast("event:auth-loginConfirmed",r),t.retryAll(i)},loginCancelled:function(r,n){t.rejectAll(n),e.$broadcast("event:auth-loginCancelled",r)}}}]).config(["$httpProvider",function(e){e.interceptors.push(["$rootScope","$q","httpBuffer",function(e,t,r){return{responseError:function(n){var i=n.config||{};if(!i.ignoreAuthModule)switch(n.status){case 401:var o=t.defer();return 1===r.append(i,o)&&e.$broadcast("event:auth-loginRequired",n),o.promise;case 403:e.$broadcast("event:auth-forbidden",n)}return t.reject(n)}}}])}]),angular.module("http-auth-interceptor-buffer",[]).factory("httpBuffer",["$injector",function(e){function t(t,n){function i(e){n.resolve(e)}function o(e){n.reject(e)}r=r||e.get("$http"),r(t).then(i,o)}var r,n=[];return{append:function(e,t){return n.push({config:e,deferred:t})},rejectAll:function(e){if(e)for(var t=0;t<n.length;++t)n[t].deferred.reject(e);n=[]},retryAll:function(e){for(var r=0;r<n.length;++r){var i=e(n[r].config);!1!==i&&t(i,n[r].deferred)}n=[]}}}])}(),void 0!==e&&void 0!==t&&e.exports===t&&(e.exports="http-auth-interceptor")}]);