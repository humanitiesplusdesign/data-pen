!function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=111)}([function(module,exports,__webpack_require__){(function(process){var slowNextTick=function(){return void 0!==process&&process.nextTick?process.nextTick:"undefined"!=typeof window&&window.setImmediate?window.setImmediate:function(e){setTimeout(e,0)}}(),spin=0,yieldFrequency=100,nextTick=function(e){spin++,spin<yieldFrequency?e():(spin=0,slowNextTick(e))},hashTerm=function(e){try{if(null==e)return"";if("uri"===e.token)return"u"+e.value;if("blank"===e.token)return"b"+e.value;if("literal"===e.token){var t="l"+e.value;return t+=e.type||"",t+=e.lang||""}}catch(t){if("object"==typeof e){var r="";for(p in e)r=r+p+e[p];return r}return e}},lexicalFormBaseUri=function(e,t){var r=null;if(t=t||{},null==e.value){var n=e.prefix,i=e.suffix,o=t.namespaces[n];r=null!=o?o+i:n+":"+i}else r=e.value;return null===r?null:(-1==r.indexOf(":")&&(r=(t.base||"")+r),r)};parseISO8601=function(e){return Date.parse(e)},Date.prototype.toISOString||function(){function e(e){return e<10?"0"+e:e}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"."+(this.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}}(),iso8601=function(e){return e.toISOString()},compareDateComponents=function(e,t){var r=parseISO8601(e),n=parseISO8601(t);return r==n?0:r<n?-1:1},lexicalFormLiteral=function(e,t){var r=e.value,n=e.lang,i=e.type,o=null;if(null!=r&&null!=i&&"string"!=typeof i){var s=i.value;if(null==s){var a=i.prefix,u=i.suffix,l=t.namespaces[a];e.type=l+u,s=l+u}o=-1!=s.indexOf("hexBinary")?'"'+e.value.toLowerCase()+'"^^<'+s+">":'"'+e.value+'"^^<'+s+">"}else o=null==n&&null==i?'"'+r+'"':null==i?'"'+r+'"@'+n:-1!=i.indexOf("hexBinary")?'"'+e.value.toLowerCase()+'"^^<'+i+">":'"'+e.value+'"^^<'+i+">";return o},normalizeUnicodeLiterals=function(string){for(var escapedUnicode=string.match(/\\u[0-9abcdefABCDEF]{4,4}/g)||[],dups={},i=0;i<escapedUnicode.length;i++)null==dups[escapedUnicode[i]]&&(dups[escapedUnicode[i]]=!0,string=string.replace(new RegExp("\\"+escapedUnicode[i],"g"),eval("'"+escapedUnicode[i]+"'")));return string},registerIndexedDB=function(e){if("undefined"==typeof window&&void 0!==process&&!1===process.browser){var t=_dereq_("sqlite3"),r=_dereq_("indexeddb-js"),n=new t.Database(":memory:"),i=r.makeScope("sqlite3",n);e.indexedDB=i.indexedDB,e.IDBKeyRange=i.IDBKeyRange}else{var o;o="undefined"==typeof window?self:window,o.indexedDB=o.indexedDB||o.mozIndexedDB||o.webkitIndexedDB||o.msIndexedDB,o.IDBKeyRange=o.IDBKeyRange||o.webkitIDBKeyRange||o.msIDBKeyRange,o.indexedDB?(e.indexedDB=o.indexedDB,e.IDBKeyRange=o.IDBKeyRange):console.log("The browser does not support IndexDB.")}},guid=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},hashTerm=function(e){try{if(null==e)return"";if("uri"===e.token)return"u"+e.value;if("blank"===e.token)return"b"+e.value;if("literal"===e.token){var t="l"+e.value;return t+=e.type||"",t+=e.lang||""}}catch(t){if("object"==typeof e){var r="";for(p in e)r=r+p+e[p];return r}return e}};var reject=function(e,t){for(var r=[],n=0;n<e.length;n++)t(e[n])&&r.push(e[n]);return r},include=function(e,t){for(var r=0;r<e.length;r++)if(e[r]===t)return!0;return!1},each=function(e,t){if(e.forEach)e.forEach(t);else for(var r=0;r<e.length;r++)t(e[r])},map=function(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r[n]=t(e[n]);return r},keys=function(e){var t=[];for(var r in e)t.push(r);return t},values=function(e){var t=[];for(var r in e)t.push(e[r]);return t},size=function(e){if(e.length)return e.length;var t=0;for(var r in e)t++;return t};clone=function(e){return JSON.parse(JSON.stringify(e))};var isObject=function(e){var t=typeof e;return"function"==t||e&&"object"==t||!1},create=function(){function e(){}return function(t){if(isObject(t)){e.prototype=t;var r=new e;e.prototype=null}return r||void 0}}(),whilst=function(e,t,r){e()?t(function(n){if(n)return r(n);whilst(e,t,r)}):r()},eachSeries=function(e,t,r){if(r=r||function(){},!e.length)return r();var n=0,i=function(){t(e[n],function(t){t?(r(t),r=function(){}):(n+=1,n>=e.length?r():nextTick(i))})};i()},eachParallel=function(e,t,r){if(r=r||function(){},!e.length)return r();for(var n=!1,i=0,o=function(t){if(t)throw n=!0,new Error(t);n||++i===e.length&&r()},s=0;s<e.length;s++)!function(e,t,r,n){nextTick(function(){try{n(e[t],function(){r()})}catch(e){r(e)}})}(e,s,o,t)},reduce=function(e,t,r,n){eachSeries(e,function(e,n){r(t,e,function(e,r){t=r,n(e)})},function(e){n(e,t)})},seq=function(){var e=arguments;return function(){var t=this,r=Array.prototype.slice.call(arguments),n=r.pop();reduce(e,r,function(e,r,n){r.apply(t,e.concat([function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);n(e,t)}]))},function(e,r){n.apply(t,[e].concat(r))})}},isWorker=function(){return(void 0===process||!0===process.browser)&&"undefined"==typeof window};module.exports={isWorker:isWorker,nextTick:nextTick,hasTerm:hashTerm,lexicalFormBaseUri:lexicalFormBaseUri,parseISO8601:parseISO8601,compareDateComponents:compareDateComponents,iso8601:iso8601,normalizeUnicodeLiterals:normalizeUnicodeLiterals,lexicalFormLiteral:lexicalFormLiteral,registerIndexedDB:registerIndexedDB,guid:guid,hashTerm:hashTerm,keys:keys,values:values,size:size,map:map,each:each,forEach:each,include:include,reject:reject,remove:reject,clone:clone,create:create,whilst:whilst,eachSeries:eachSeries,eachParallel:eachParallel,seq:seq,yieldFrequency:function(e){yieldFrequency=e}}}).call(exports,__webpack_require__(5))},function(e,t,r){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,r){"use strict";r.d(t,"p",function(){return h}),r.d(t,"i",function(){return d}),r.d(t,"d",function(){return v}),r.d(t,"h",function(){return b}),r.d(t,"g",function(){return k}),r.d(t,"c",function(){return E}),r.d(t,"b",function(){return _}),r.d(t,"m",function(){return A}),r.d(t,"j",function(){return I}),r.d(t,"o",function(){return T}),r.d(t,"k",function(){return C}),r.d(t,"l",function(){return F}),r.d(t,"e",function(){return R}),r.d(t,"n",function(){return j}),r.d(t,"f",function(){return D}),r.d(t,"a",function(){return M});var n=r(118),i=r.n(n),o=r(8),s=r.n(o),a=r(7),u=r.n(a),l=r(1),c=r.n(l),f=r(13),p=(r.n(f),r(9)),h=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;c()(this,e),this.value=t,this.termType=r,this.language=n,this.datatype=i}return e.prototype.toCanonical=function(){switch(this.termType){case"NamedNode":return"<"+this.value+">";case"BlankNode":return"_:"+this.value;case"Literal":return f.SparqlService.stringToSPARQLString(this.value)+(this.language?"@"+this.language:!this.datatype||j.langString.equals(this.datatype)||N.string.equals(this.datatype)?"":"^^"+this.datatype.toCanonical());case"Variable":return"?"+this.value;case"DefaultGraph":return"";case"UNDEF":return"UNDEF";default:throw"Unknown term type "+this}},e.prototype.equals=function(e){return this.termType===e.termType&&this.value===e.value&&("Literal"!==this.termType||this.language===e.language&&this.datatype===e.datatype)},e}(),d=function(e){function t(r){return c()(this,t),s()(this,e.call(this,r.value,r.termType,r.language,r.datatype))}return u()(t,e),t}(h),v=function(e){function t(){return c()(this,t),s()(this,e.call(this,"","DefaultGraph"))}return u()(t,e),t.prototype.toCanonical=function(){return""},t.prototype.equals=function(e){return"DefaultGraph"===e.termType},t}(h);v.instance=new v;var y=function(e){function t(){return c()(this,t),s()(this,e.call(this,"","UNDEF"))}return u()(t,e),t.prototype.toCanonical=function(){return""},t.prototype.equals=function(e){return"UNDEF"===e.termType},t}(h);y.instance=new y;var g=function(e){function t(r){return c()(this,t),s()(this,e.call(this,r,"Variable"))}return u()(t,e),t.prototype.toCanonical=function(){return"?"+this.value},t}(h),b=function(e){function t(r){return c()(this,t),s()(this,e.call(this,r,"NamedNode"))}return u()(t,e),t.prototype.toCanonical=function(){return"<"+this.value+">"},t}(h),m=function(e){function t(r){return c()(this,t),s()(this,e.call(this,r,"BlankNode"))}return u()(t,e),t.prototype.toCanonical=function(){return"?"+this.value},t}(h),w=function(e){function t(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments[2];return c()(this,t),s()(this,e.call(this,r,"Literal",n,i||(n?j.langString:N.string)))}return u()(t,e),t}(h),x=function(){function e(t,r,n,i){c()(this,e),this.subject=t,this.predicate=r,this.object=n,this.graph=i}return e.prototype.toCanonical=function(){return this.subject.toCanonical()+" "+this.predicate.toCanonical()+" "+this.object.toCanonical()+("DefaultGraph"===this.graph.termType?"":" "+this.graph.toCanonical())},e.prototype.equals=function(e){return this.subject.equals(e.subject)&&this.predicate.equals(e.predicate)&&this.object.equals(e.object)&&this.graph.equals(e.graph)},e}(),k=function(){function e(t,r,n){c()(this,e),this.subject=t,this.predicate=r,this.object=n,this.graph=v.instance}return e.prototype.toCanonical=function(){return this.subject.toCanonical()+" "+this.predicate.toCanonical()+" "+this.object.toCanonical()},e.prototype.equals=function(e){return this.subject.equals(e.subject)&&this.predicate.equals(e.predicate)&&this.object.equals(e.object)&&this.graph.equals(e.graph)},e}(),E=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];c()(this,e),this.graph=t,this.triples=r},_=function(){function e(){c()(this,e),this.nextBlankNodeId=0}return e.nodeFromBinding=function(t){return e.instance.nodeFromBinding(t)},e.nodeFromNode=function(t){return e.instance.nodeFromNode(t)},e.nodeFromCanonicalRepresentation=function(t){return e.instance.nodeFromCanonicalRepresentation(t)},e.namedNode=function(t){return e.instance.namedNode(t)},e.blankNode=function(t){return e.instance.blankNode(t)},e.literal=function(t,r){return e.instance.literal(t,r)},e.variable=function(t){return e.instance.variable(t)},e.defaultGraph=function(){return e.instance.defaultGraph()},e.triple=function(t,r,n){return e.instance.triple(t,r,n)},e.quad=function(t,r,n,i){return e.instance.quad(t,r,n,i)},e.prototype.nodeFromBinding=function(e){var t=new h(e.value,"literal"===e.type?"Literal":"uri"===e.type?"NamedNode":"BlankNode");return"literal"===e.type&&(t.language=e["xml:lang"]?e["xml:lang"]:"",t.datatype=e.datatype?new b(e.datatype):""!==t.language?j.langString:N.string),t},e.prototype.nodeFromNode=function(e){return"Literal"===e.termType?new w(e.value,e.language,e.datatype):new h(e.value,e.termType)},e.prototype.nodeFromCanonicalRepresentation=function(e){if(0===e.indexOf("<"))return new b(e.substring(1,e.length-1));if(0===e.indexOf("_:"))return new m(e.substring(2));var t=e.substring(1,e.lastIndexOf('"'));return e.lastIndexOf("@")===e.lastIndexOf('"')+1?new w(t,e.substring(e.lastIndexOf("@"))):e.lastIndexOf("^^<")===e.lastIndexOf('"')+1?new w(t,"",new b(e.substring(e.lastIndexOf("^^<"),e.length-1))):new w(t)},e.prototype.namedNode=function(e){return new b(e)},e.prototype.blankNode=function(e){return new m(e||"b"+ ++this.nextBlankNodeId)},e.prototype.literal=function(e,t){return"string"==typeof t?new w(e,t):new w(e,void 0,t)},e.prototype.variable=function(e){return new g(e)},e.prototype.defaultGraph=function(){return v.instance},e.prototype.triple=function(e,t,r){return new k(e,t,r)},e.prototype.quad=function(e,t,r,n){return new x(e,t,r,n||v.instance)},e}();_.instance=new _;var A=function e(){c()(this,e)};A.ns="http://hdlab.stanford.edu/fibra/ontology#",A.Project=new b(A.ns+"Project"),A.graph=new b(A.ns+"graph"),A.qualifiedAssertion=new b(A.ns+"qualifiedAssertion"),A.order=new b(A.ns+"order"),A.schemaNS=new b(A.ns+"schemaNS"),A.instanceNS=new b(A.ns+"instanceNS"),A.updateEndpoint=new b(A.ns+"updateEndpoint"),A.configuration=new b(A.ns+"configuration"),A.configurationReference=new b(A.ns+"configurationReference"),A.schema=new b(A.ns+"schema"),A.schemaReference=new b(A.ns+"schemaReference"),A.autocompletionQuery=new b(A.ns+"autocompletionQuery"),A.propertyQuery=new b(A.ns+"propertyQuery"),A.classQuery=new b(A.ns+"classQuery"),A.itemQuery=new b(A.ns+"itemQuery"),A.deleteItemQuery=new b(A.ns+"deleteItemQuery"),A.RemoteEndpointConfiguration=new b(A.ns+"RemoteEndpointConfiguration"),A.PrimaryEndpointConfiguration=new b(A.ns+"PrimaryEndpointConfiguration"),A.AuthorityEndpointConfiguration=new b(A.ns+"AuthorityEndpointConfiguration"),A.ArchiveEndpointConfiguration=new b(A.ns+"ArchiveEndpointConfiguration"),A.Schema=new b(A.ns+"Schema");var S=function e(){c()(this,e)};S.ns="http://www.w3.org/ns/sparql-service-description#",S._name=new b(S.ns+"name");var I=function e(){c()(this,e)};I.ns="http://www.w3.org/2004/02/skos/core#",I.prefLabel=new b(I.ns+"prefLabel"),I.altLabel=new b(I.ns+"altLabel"),I.related=new b(I.ns+"related");var T=function e(){c()(this,e)};T.ns="http://rdfs.org/ns/void#",T.sparqlEndpoint=new b(T.ns+"sparqlEndpoint");var C=function e(){c()(this,e)};C.ns="http://purl.org/dc/terms/",C.rightsHolder=new b(C.ns+"rightsHolder"),C.description=new b(C.ns+"description");var F=function e(){c()(this,e)};F.ns="http://xmlns.com/foaf/0.1/",F.homepage=new b(F.ns+"homepage");var R=function e(){c()(this,e)};R.ns="http://www.w3.org/2002/07/owl#",R.sameAs=new b(R.ns+"sameAs"),R.Thing=new b(R.ns+"Thing"),R.Class=new b(R.ns+"Class");var j=function e(){c()(this,e)};j.ns="http://www.w3.org/1999/02/22-rdf-syntax-ns#",j.type=new b(j.ns+"type"),j.langString=new b(j.ns+"langString"),j.Triple=new b(j.ns+"Triple"),j.subject=new b(j.ns+"subject"),j.predicate=new b(j.ns+"predicate"),j.object=new b(j.ns+"object"),j.value=new b(j.ns+"value");var N=function e(){c()(this,e)};N.ns="http://www.w3.org/2001/XMLSchema#",N.string=new b(N.ns+"string");var L=function e(){c()(this,e)};L.ns="http://www.cidoc-crm.org/cidoc-crm/",L.Person=new b(L.ns+"E21_Person"),L.Place=new b(L.ns+"E53_Place"),L.Group=new b(L.ns+"E74_Group");var P=function e(){c()(this,e)};P.ns="http://vocab.getty.edu/ontology#",P.AdminPlaceConcept=new b(P.ns+"AdminPlaceConcept"),P.PhysicalPlaceConcept=new b(P.ns+"PhysicalPlaceConcept"),P.PhysAdminPlaceConcept=new b(P.ns+"PhysAdminPlaceConcept"),P.PersonConcept=new b(P.ns+"PersonConcept"),P.GroupConcept=new b(P.ns+"GroupConcept");var O=function e(){c()(this,e)};O.ns="http://www.loc.gov/mads/rdf/v1#",O.CorporateName=new b(O.ns+"CorporateName"),O.PersonalName=new b(O.ns+"PersonalName"),O.NameTitle=new b(O.ns+"NameTitle"),O.Geographic=new b(O.ns+"Geographic");var Q=function e(){c()(this,e)};Q.ns="http://geovocab.org/spatial#",Q.Feature=new b(Q.ns+"Feature");var D=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return{}},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new p.a;c()(this,e),this.create=t,this.map=r}return e.prototype.goc=function(e,t){return this.has(e)||this.set(e,t?t(e):this.create(e)),this.get(e)},e.prototype.get=function(e){return this.map.get(e.toCanonical())},e.prototype.remove=function(e){return this.map.remove(e.toCanonical())},e.prototype.each=function(e){var t=this;this.map.each(function(r,n,i){return e(r,_.instance.nodeFromCanonicalRepresentation(n),t)})},e.prototype.has=function(e){return this.map.has(e.toCanonical())},e.prototype.set=function(e,t){return this.map.set(e.toCanonical(),t),this},e.prototype.values=function(){return this.map.values()},e.prototype.keys=function(){return this.map.keys().map(function(e){return _.instance.nodeFromCanonicalRepresentation(e)})},e.prototype.entries=function(){return this.map.entries().map(function(e){return{key:_.instance.nodeFromCanonicalRepresentation(e.key),value:e.value}})},e.prototype.clear=function(){return this.map.clear(),this},i()(e,[{key:"size",get:function(){return this.map.size()}}]),e}(),B=(function(e){function t(r){return c()(this,t),s()(this,e.call(this,r,new p.c))}u()(t,e)}(D),function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new p.a;c()(this,e),this.m=new D(void 0,t)}return e.prototype.add=function(e){return this.m.set(e,e),this},e.prototype.adda=function(e){var t=this;return e.forEach(function(e){return t.add(e)}),this},e.prototype.adds=function(e){var t=this;return e.each(function(e){return t.add(e)}),this},e.prototype.has=function(e){return this.m.has(e)},e.prototype.get=function(e){return this.m.get(e)},e.prototype.clear=function(){return this.m.clear(),this},e.prototype.remove=function(e){return this.m.remove(e)},e.prototype.values=function(){return this.m.values()},e.prototype.each=function(e){var t=this;this.m.each(function(r,n,i){return e(r,r,t)})},i()(e,[{key:"size",get:function(){return this.m.size}}]),e}()),M=function(e){function t(){return c()(this,t),s()(this,e.call(this,new p.c))}return u()(t,e),t}(B)},function(e,t){var r=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=r)},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function i(e){if(c===setTimeout)return setTimeout(e,0);if((c===r||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function o(e){if(f===clearTimeout)return clearTimeout(e);if((f===n||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function s(){v&&h&&(v=!1,h.length?d=h.concat(d):y=-1,d.length&&a())}function a(){if(!v){var e=i(s);v=!0;for(var t=d.length;t;){for(h=d,d=[];++y<t;)h&&h[y].run();y=-1,t=d.length}h=null,v=!1,o(e)}}function u(e,t){this.fun=e,this.array=t}function l(){}var c,f,p=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:r}catch(e){c=r}try{f="function"==typeof clearTimeout?clearTimeout:n}catch(e){f=n}}();var h,d=[],v=!1,y=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];d.push(new u(e,t)),1!==d.length||v||i(a)},u.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=l,p.addListener=l,p.once=l,p.off=l,p.removeListener=l,p.removeAllListeners=l,p.emit=l,p.prependListener=l,p.prependOnceListener=l,p.listeners=function(e){return[]},p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(e,t){e.exports=angular},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=r(115),o=n(i),s=r(112),a=n(s),u=r(42),l=n(u);t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,l.default)(t)));e.prototype=(0,a.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(o.default?(0,o.default)(e,t):e.__proto__=t)}},function(e,t,r){"use strict";t.__esModule=!0;var n=r(42),i=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,i.default)(t))&&"function"!=typeof t?e:t}},function(e,t,r){"use strict";r.d(t,"d",function(){return f}),r.d(t,"a",function(){return p}),r.d(t,"b",function(){return h}),r.d(t,"c",function(){return v});var n=r(22),i=r.n(n),o=r(8),s=r.n(o),a=r(7),u=r.n(a),l=r(1),c=r.n(l),f=function(){function e(){c()(this,e),this.s={}}return e.prototype.has=function(e){return void 0!==this.s[e]},e.prototype.set=function(e,t){return this.s[e]=t,this},e.prototype.get=function(e){return this.s[e]},e.prototype.remove=function(e){var t=this.has(e);return delete this.s[e],t},e.prototype.sets=function(e){for(var t in e)this.set(t,e[t]);return this},e.prototype.setm=function(e){for(var t in e)this.set(t,e[t]);return this},e.prototype.clear=function(){return this.s={},this},e.prototype.keys=function(){var e=[];for(var t in this.s)e.push(t);return e},e.prototype.values=function(){var e=[];for(var t in this.s)e.push(this.s[t]);return e},e.prototype.entries=function(){var e=[];for(var t in this.s)e.push({key:t,value:this.s[t]});return e},e.prototype.each=function(e){for(var t in this.s)e(this.s[t],t,this)},e.prototype.size=function(){var e=0;for(var t in this.s)e++;return e},e.prototype.empty=function(){return 0===this.size()},e}(),p=function(e){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return{}};c()(this,t);var n=s()(this,e.call(this));return n.create=r,n}return u()(t,e),t.prototype.goc=function(e,t){return this.has(e)||this.set(e,t?t(e):this.create(e)),this.get(e)},t}(f),h=(function(){function e(){c()(this,e),this.a=[]}e.prototype.clear=function(){return this.a=[],this},e.prototype.has=function(e){return-1!==this.a.indexOf(e)},e.prototype.add=function(e){return this.has(e)?this:(this.a.push(e),this)},e.prototype.adda=function(e){var t=this;return e.forEach(function(e){return t.add(e)}),this},e.prototype.adds=function(e){var t=this;return e.each(function(e){return t.add(e)}),this},e.prototype.remove=function(e){var t=this.a.indexOf(e);return-1!==t&&(this.a.splice(t,1),!0)},e.prototype.each=function(e){for(var t=this.a,r=Array.isArray(t),n=0,t=r?t:i()(t);;){var o;if(r){if(n>=t.length)break;o=t[n++]}else{if(n=t.next(),n.done)break;o=n.value}var s=o;e(s,s,this)}},e.prototype.size=function(){return this.a.length},e.prototype.empty=function(){return 0===this.size()},e.prototype.values=function(){return this.a}}(),function(){function e(){c()(this,e),this.s={}}return e.prototype.clear=function(){return this.s={},this},e.prototype.has=function(e){return void 0!==this.s[e]},e.prototype.add=function(e){return this.s[e]="",this},e.prototype.adda=function(e){var t=this;return e.forEach(function(e){return t.add(e)}),this},e.prototype.adds=function(e){var t=this;return e.each(function(e){return t.add(e)}),this},e.prototype.remove=function(e){var t=this.has(e);return delete this.s[e],t},e.prototype.each=function(e){for(var t in this.s)e(t,t,this)},e.prototype.size=function(){var e=0;for(var t in this.s)e++;return e},e.prototype.empty=function(){return 0===this.size()},e.prototype.values=function(){var e=[];for(var t in this.s)e.push(t);return e},e}()),d=function(e){function t(){c()(this,t);var r=s()(this,e.apply(this,arguments));return r.a=[],r}return u()(t,e),t.prototype.set=function(t,r){return this.has(t)||(e.prototype.set.call(this,t,r),this.a.push(r)),this},t.prototype.remove=function(t){var r=this.get(t);return void 0!==r&&(e.prototype.remove.call(this,t),this.a.splice(this.a.indexOf(r),1)),void 0!==r},t.prototype.size=function(){return this.a.length},t.prototype.values=function(){return this.a},t.prototype.clear=function(){return e.prototype.clear.call(this),this.a=[],this},t}(f),v=function(e){function t(r){c()(this,t);var n=s()(this,e.call(this));return n.create=r,n}return u()(t,e),t.prototype.goc=function(e,t){return this.has(e)||this.set(e,t?t(e):this.create(e)),this.get(e)},t}(d);!function(e){function t(){c()(this,t);var r=s()(this,e.apply(this,arguments));return r.a=[],r}u()(t,e),t.prototype.add=function(t){return this.has(t)||(e.prototype.add.call(this,t),this.a.push(t)),this},t.prototype.remove=function(t){var r=e.prototype.remove.call(this,t);return r&&this.a.splice(this.a.indexOf(t),1),r},t.prototype.size=function(){return this.a.length},t.prototype.values=function(){return this.a},t.prototype.clear=function(){return e.prototype.clear.call(this),this.a=[],this}}(h)},function(e,t){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(e,t,r){var n=r(51)("wks"),i=r(37),o=r(10).Symbol,s="function"==typeof o;(e.exports=function(e){return n[e]||(n[e]=s&&o[e]||(s?o:i)("Symbol."+e))}).store=n},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t,r){!function(t,n){e.exports=n(r(6))}(0,function(e){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(t,r){t.exports=e},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=function(){function e(){this.objectsById={},this.assignmentsById={}}return e}();t.UniqueObjectTracker=i;var o=function(){function e(e,t){this.$http=e,this.$q=t}return e.$inject=["$http","$q"],e.stringToSPARQLString=function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/\f/g,"\\f")+'"'},e.bindingsToObject=function(t,r,n,i){void 0===r&&(r={});for(var o in t){var s=o,a=r,u=s.indexOf("_"),l=-1,c=void 0;for(i&&(c=i.assignmentsById);-1!==u;){s=o.substring(l+1,u);var f=o.substring(0,u);if(n&&n.bindingTypes&&n.bindingTypes[f]&&"uniqueArray"===n.bindingTypes[f]){a[s]||(a[s]=[]),i.objectsById[f]||(i.objectsById[f]={});var p=void 0;i.objectsById[f][t[f].value]?p=i.objectsById[f][t[f].value]:(p=n.bindingConverters[f](t[f],t),i.objectsById[f][t[f].value]=p),c[f]||(c[f]={}),c[f][t[f].value]||(a[f].push(p),c[f][t[f].value]={}),c=c[f][t[f].value],a=p}else n&&n.bindingTypes&&n.bindingTypes[f]&&"single"===n.bindingTypes[f]?(i.objectsById[f]||(i.objectsById[f]={}),i.objectsById[f][t[f].value]||(a[s]=n.bindingConverters[f](t[f],t),i.objectsById[f][t[f].value]=a[s])):a[s]||(a[s]=n.bindingConverters[f](t[f],t)),a=a[s];l=u,u=o.indexOf("_",u+1)}s=o.substring(l+1);var h=void 0;if(i&&n&&n.bindingTypes&&("single"===n.bindingTypes[o]||"uniqueArray"===n.bindingTypes[o])?(i.objectsById[o]||(i.objectsById[o]={}),i.objectsById[o][t[o].value]?h=i.objectsById[o][t[o].value]:(h=n&&n.bindingConverters&&n.bindingConverters[o]?n.bindingConverters[o](t[o],t):e.bindingToValue(t[o]),i.objectsById[o][t[o].value]=h)):n&&n.bindingConverters&&n.bindingConverters[o]?h=n.bindingConverters[o](t[o],t):n&&n.bindingTypes&&n.bindingTypes[o]&&("hash"===n.bindingTypes[o]||"ignore"===n.bindingTypes[o])||(h=e.bindingToValue(t[o])),n&&n.bindingTypes&&n.bindingTypes[o])switch(n.bindingTypes[o]){case"ignore":break;case"single":a[s]=h;break;case"array":Array.isArray(a[s])||(a[s]=[]),a[s].push(h);break;case"hash":if(a[s]||(a[s]={}),h)a[s][t[o].value]=h;else if("literal"===t[o].type){var d=t[o].datatype;d||(d=t[o]["xml:lang"])||(d=""),a[s][d]=t[o].value}else a[s][t[o].value]=t[o].value;break;default:a[s]||(a[s]=[]),c[o]||(c[o]={}),c[o][t[o].value]||(c[o][t[o].value]=h,a[s].push(h))}else if(Array.isArray(a[s]))a[s].push(h);else if(null!==a[s]&&"object"==typeof a[s]&&t[o])if("literal"===t[o].type){var d=t[o].datatype;d||(d=t[o]["xml:lang"])||(d=""),n&&n.bindingConverters&&n.bindingConverters[o]?a[s][d]=n.bindingConverters[o](t[o],t):a[s][d]=t[o].value}else n&&n.bindingConverters&&n.bindingConverters[o]?a[s][t[o].value]=n.bindingConverters[o](t[o],t):a[s][t[o].value]=t[o].value;else a[s]=h}return r},e.bindingToValue=function(e){if(e){if("uri"===e.type)return e.value;if("bnode"===e.type)return e.value;if(e.datatype)switch(e.datatype){case"http://www.w3.org/2001/XMLSchema#integer":case"http://www.w3.org/2001/XMLSchema#decimal":return parseInt(e.value,10);case"http://www.w3.org/2001/XMLSchema#float":case"http://www.w3.org/2001/XMLSchema#double":return parseFloat(e.value);case"http://www.w3.org/2001/XMLSchema#boolean":return!!e.value}return e.value}},e.bindingToString=function(e){if(!e)return"UNDEF";var t=e.value.replace(/\\/g,"\\\\").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\"/g,'\\"').replace(/\'/g,"\\'");if("uri"===e.type)return"<"+t+">";if("bnode"===e.type)return"_:"+t;if(!e.datatype)return e["xml:lang"]?'"'+t+'"@'+e["xml:lang"]:'"'+t+'"';switch(e.datatype){case"http://www.w3.org/2001/XMLSchema#integer":case"http://www.w3.org/2001/XMLSchema#decimal":case"http://www.w3.org/2001/XMLSchema#double":case"http://www.w3.org/2001/XMLSchema#boolean":return t;case"http://www.w3.org/2001/XMLSchema#string":return'"'+t+'"';default:return'"'+t+'"^^<'+e.datatype+">"}},e.prototype.check=function(e,t){var r=this.$q.defer();return this.$http(n.extend({method:"GET",url:e,params:{query:"ASK {}"},headers:{Accept:"application/sparql-results+json"}},t)).then(function(e){return r.resolve(!0===e.data.boolean)},function(e){return r.resolve(!1)}),r.promise},e.prototype.checkUpdate=function(e,t){var r=this.$q.defer();return this.$http(n.extend({method:"POST",url:e,headers:{"Content-Type":"application/sparql-update"},data:"INSERT DATA {}"},t)).then(function(e){return r.resolve(204===e.status)},function(e){return r.resolve(!1)}),r.promise},e.prototype.checkRest=function(e,t){var r=this.$q.defer();return this.$http(n.extend({method:"POST",url:e+"?default",data:"",headers:{"Content-Type":"text/turtle"}},t)).then(function(e){return r.resolve(204===e.status)},function(e){return r.resolve(!1)}),r.promise},e.prototype.get=function(e,t,r){return this.$http(n.extend({method:"GET",url:e,params:t?{graph:t}:{default:""},headers:{Accept:"text/turtle"}},r))},e.prototype.post=function(e,t,r,i){return this.$http(n.extend({method:"POST",url:e,params:r?{graph:r}:{default:""},data:t,headers:{"Content-Type":"text/turtle"}},i))},e.prototype.put=function(e,t,r,i){return this.$http(n.extend({method:"PUT",url:e,params:r?{graph:r}:{default:""},data:t,headers:{"Content-Type":"text/turtle"}},i))},e.prototype.delete=function(e,t,r){return this.$http(n.extend({method:"DELETE",url:e,params:t?{graph:t}:{default:""}},r))},e.prototype.query=function(e,t,r){return t.length<=2048?this.$http(n.extend({method:"GET",url:e,params:{query:t},headers:{Accept:"application/sparql-results+json"}},r)):this.$http(n.extend({method:"POST",url:e,data:"query="+encodeURIComponent(t),headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/sparql-results+json"}},r))},e.prototype.construct=function(e,t,r){return t.length<=2048?this.$http(n.extend({method:"GET",url:e,params:{query:t},headers:{Accept:"text/turtle"}},r)):this.$http(n.extend({method:"POST",url:e,data:t,headers:{"Content-Type":"application/sparql-query",Accept:"text/turtle"}},r))},e.prototype.update=function(e,t,r){return this.$http(n.extend({method:"POST",url:e,headers:{"Content-Type":"application/sparql-update"},data:t},r))},e}();t.SparqlService=o,n.module("fi.seco.sparql",[]).service("sparqlService",o)}])})},function(e,t,r){e.exports=!r(28)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},function(e,t,r){var n=r(24),i=r(76),o=r(53),s=Object.defineProperty;t.f=r(14)?Object.defineProperty:function(e,t,r){if(n(e),t=o(t,!0),n(r),i)try{return s(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},function(e,t,r){var n=r(135),i=r(44);e.exports=function(e){return n(i(e))}},function(e,t){},function(e,t,r){"use strict";function n(e){if(!(this instanceof n))return new n(e);l.call(this,e),c.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",i)}function i(){this.allowHalfOpen||this._writableState.ended||a(o,this)}function o(e){e.end()}var s=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=n;var a=r(61),u=r(30);u.inherits=r(12);var l=r(97),c=r(65);u.inherits(n,l);for(var f=s(c.prototype),p=0;p<f.length;p++){var h=f[p];n.prototype[h]||(n.prototype[h]=c.prototype[h])}},function(e,t,r){"use strict";r.d(t,"a",function(){return s}),r.d(t,"b",function(){return a});var n=r(1),i=r.n(n),o=r(2),s=function(){function e(t,r){i()(this,e),this.sparqlEndpoint=t,this.graph=r}return e.clone=function(t){return new e(t.sparqlEndpoint,t.graph)},e}(),a=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];i()(this,e),this.labels=n,this.url=o,this.descriptions=s,this.rightsHolders=a,this.source={sparqlEndpoint:null},this.id=t,this.source=r}return e.toTurtle=function(e,t,r){r.skos=o.j.ns,r.dcterms=o.k.ns,r.foaf=o.l.ns,r.fibra=o.m.ns,r.rdf=o.n.ns;var n=t.get(e.id);e.labels.forEach(function(e){e.value&&(n=n+"\nskos:prefLabel "+e.toCanonical()+" ;")}),e.descriptions.forEach(function(e){e.value&&(n=n+"\ndcterms:description "+e.toCanonical()+" ;")}),e.url&&(n=n+"\nfoaf:homepage <"+e.url+"> ;"),e.rightsHolders.length>0&&(n+="\ndcterms:rightsHolder ",e.rightsHolders.forEach(function(e){n=n+"<"+e.id+">, ",t.has(e.id)||(t.set(e.id,"<"+e.id+"> a foaf:Agent ;"),e.toTurtle(t,r))}),n=n.substring(0,n.length-2)+" ;",e.rightsHolders.length>1&&e.rightsHolders.forEach(function(e,t){n=n+"\nfibra:qualifiedAssertion [\n  rdf:predicate dcterms:rightsHolder ;\n  rdf:object <"+e.id+"> ;\n  fibra:order "+t+" ;\n] ;"})),t.set(e.id,n)},e.prototype.toTurtle=function(t,r){e.toTurtle(this,t,r)},e}()},function(e,t,r){"use strict";r.d(t,"b",function(){return p}),r.d(t,"c",function(){return h}),r.d(t,"a",function(){return d});var n=r(8),i=r.n(n),o=r(7),s=r.n(o),a=r(1),u=r.n(a),l=r(71),c=r(9),f=function(){function e(t){u()(this,e),this.id=t,this.labels=[],this.descriptions=[],this.types=[]}return e.prototype.getLabel=function(e){return this.asNode(e).label},e.prototype.asNode=function(e){var t=this.asNodes[e];if(t)return t;if(t=this.asNodes[""])return t;for(var r in this.asNodes)return this.asNodes[r]},e.prototype.buildAsNodes=function(){var e=this;if(!this.asNodes){this.asNodes={};var t=new c.b,r=new c.d,n=new c.d,i=new c.d;this.labels.forEach(function(e){r.set(e.language,e.value),r.has("")||r.set("",e.value),t.add(e.language)}),this.descriptions.forEach(function(e){n.set(e.language,e.value),n.has("")||n.set("",e.value),t.add(e.language)}),this.types.forEach(function(e){e.buildAsNodes();var r=new c.d;i.set(e.id.value,r),e.labels.forEach(function(e){r.set(e.language,e.value),r.has("")||r.set("",e.value),t.add(e.language)})}),t.each(function(t){var i=new l.c(e.id);i.label=r.get(t),i.label||(i.label=r.get("")),i.description=n.get(t),i.description||(i.description=n.get("")),i.types=e.types.map(function(r){return r.id===e.id?i:r.asNode(t)}),e.asNodes[t]=i})}},e}(),p=function(e){function t(r){u()(this,t);var n=i()(this,e.call(this,r));return n.superClasses=[],n.subClasses=[],n.properties=[],n.inverseProperties=[],n}return s()(t,e),t}(f),h=function(e){function t(r){u()(this,t);var n=i()(this,e.call(this,r));return n.domains=[],n.ranges=[],n.superProperties=[],n.subProperties=[],n}return s()(t,e),t}(f),d=function(){function e(){u()(this,e),this.classMap=new c.d,this.propertyMap=new c.d,this.rootClasses=[],this.rootProperties=[]}return e.getFilter=function(e){return 0===e.length?"":"FILTER (?groupId IN ("+e.map(function(e){return e.toCanonical()}).join(", ")+"))"},e}();d.propertyQuery="PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\nPREFIX sf: <http://ldf.fi/functions#>\nPREFIX dcterms: <http://purl.org/dc/terms/>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nSELECT ?id ?domains ?ranges ?labels ?descriptions ?types ?inverseProperty ?superProperties ?subProperties {\n# STARTGRAPH\n  {\n    ?types rdfs:subClassOf* rdf:Property .\n    ?id a ?types .\n  }\n    {\n    ?id skos:prefLabel|rdfs:label ?labels .\n  } UNION {\n    ?id rdfs:comment|dcterms:description ?descriptions .\n  } UNION {\n    ?id owl:inverseOf ?inverseProperty .\n  } UNION {\n    ?id rdfs:domain ?domains .\n  } UNION {\n    ?id rdfs:range ?ranges .\n  } UNION {\n    ?id rdfs:subPropertyOf ?superProperties .\n  } UNION {\n    ?subProperties rdfs:subPropertyOf ?id .\n  }\n# ENDGRAPH\n}",d.classQuery="PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\nPREFIX sf: <http://ldf.fi/functions#>\nPREFIX dcterms: <http://purl.org/dc/terms/>\nSELECT ?id ?types ?labels ?descriptions ?superClasses ?subClasses {\n# STARTGRAPH\n  {\n    ?types rdfs:subClassOf* rdfs:Class .\n    ?id a ?types .\n  }\n  {\n    ?id skos:prefLabel|rdfs:label ?labels .\n  } UNION {\n    ?id rdfs:comment|dcterms:description ?descriptions .\n  } UNION {\n    ?id rdfs:subClassOf ?superClasses .\n  } UNION {\n    ?subClasses rdfs:subClassOf ?id .\n  }\n# ENDGRAPH\n}"},function(e,t,r){e.exports={default:r(121),__esModule:!0}},function(e,t,r){"use strict";(function(e){function n(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(e,t){if(n()<t)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=o.prototype):(null===e&&(e=new o(t)),e.length=t),e}function o(e,t,r){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return l(this,e)}return s(this,e,t,r)}function s(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?p(e,t,r,n):"string"==typeof t?c(e,t,r):h(e,t)}function a(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function u(e,t,r,n){return a(t),t<=0?i(e,t):void 0!==r?"string"==typeof n?i(e,t).fill(r,n):i(e,t).fill(r):i(e,t)}function l(e,t){if(a(t),e=i(e,t<0?0:0|d(t)),!o.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function c(e,t,r){if("string"==typeof r&&""!==r||(r="utf8"),!o.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|y(t,r);e=i(e,n);var s=e.write(t,r);return s!==n&&(e=e.slice(0,s)),e}function f(e,t){var r=t.length<0?0:0|d(t.length);e=i(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function p(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n),o.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=o.prototype):e=f(e,t),e}function h(e,t){if(o.isBuffer(t)){var r=0|d(t.length);return e=i(e,r),0===e.length?e:(t.copy(e,0,0,r),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||$(t.length)?i(e,0):f(e,t);if("Buffer"===t.type&&K(t.data))return f(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function d(e){if(e>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|e}function v(e){return+e!=e&&(e=0),o.alloc(+e)}function y(e,t){if(o.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return H(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return V(e).length;default:if(n)return H(e).length;t=(""+t).toLowerCase(),n=!0}}function g(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,t>>>=0,r<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return j(this,t,r);case"utf8":case"utf-8":return T(this,t,r);case"ascii":return F(this,t,r);case"latin1":case"binary":return R(this,t,r);case"base64":return I(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function b(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function m(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=o.from(t,n)),o.isBuffer(t))return 0===t.length?-1:w(e,t,r,n,i);if("number"==typeof t)return t&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):w(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function w(e,t,r,n,i){function o(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}var s=1,a=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,a/=2,u/=2,r/=2}var l;if(i){var c=-1;for(l=r;l<a;l++)if(o(e,l)===o(t,-1===c?0:l-c)){if(-1===c&&(c=l),l-c+1===u)return c*s}else-1!==c&&(l-=l-c),c=-1}else for(r+u>a&&(r=a-u),l=r;l>=0;l--){for(var f=!0,p=0;p<u;p++)if(o(e,l+p)!==o(t,p)){f=!1;break}if(f)return l}return-1}function x(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[r+s]=a}return s}function k(e,t,r,n){return W(H(t,e.length-r),e,r,n)}function E(e,t,r,n){return W(X(t),e,r,n)}function _(e,t,r,n){return E(e,t,r,n)}function A(e,t,r,n){return W(V(t),e,r,n)}function S(e,t,r,n){return W(z(t,e.length-r),e,r,n)}function I(e,t,r){return 0===t&&r===e.length?J.fromByteArray(e):J.fromByteArray(e.slice(t,r))}function T(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o=e[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a<=r){var u,l,c,f;switch(a){case 1:o<128&&(s=o);break;case 2:u=e[i+1],128==(192&u)&&(f=(31&o)<<6|63&u)>127&&(s=f);break;case 3:u=e[i+1],l=e[i+2],128==(192&u)&&128==(192&l)&&(f=(15&o)<<12|(63&u)<<6|63&l)>2047&&(f<55296||f>57343)&&(s=f);break;case 4:u=e[i+1],l=e[i+2],c=e[i+3],128==(192&u)&&128==(192&l)&&128==(192&c)&&(f=(15&o)<<18|(63&u)<<12|(63&l)<<6|63&c)>65535&&f<1114112&&(s=f)}}null===s?(s=65533,a=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),i+=a}return C(n)}function C(e){var t=e.length;if(t<=Z)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=Z));return r}function F(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function R(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function j(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=G(e[o]);return i}function N(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function L(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function P(e,t,r,n,i,s){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function O(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-r,2);i<o;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function Q(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-r,4);i<o;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function D(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function B(e,t,r,n,i){return i||D(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38),Y.write(e,t,r,n,23,4),r+4}function M(e,t,r,n,i){return i||D(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308),Y.write(e,t,r,n,52,8),r+8}function U(e){if(e=q(e).replace(ee,""),e.length<2)return"";for(;e.length%4!=0;)e+="=";return e}function q(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function G(e){return e<16?"0"+e.toString(16):e.toString(16)}function H(e,t){t=t||1/0;for(var r,n=e.length,i=null,o=[],s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function X(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function z(e,t){for(var r,n,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}function V(e){return J.toByteArray(U(e))}function W(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function $(e){return e!==e}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var J=r(119),Y=r(159),K=r(90);t.Buffer=o,t.SlowBuffer=v,t.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=n(),o.poolSize=8192,o._augment=function(e){return e.__proto__=o.prototype,e},o.from=function(e,t,r){return s(null,e,t,r)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(e,t,r){return u(null,e,t,r)},o.allocUnsafe=function(e){return l(null,e)},o.allocUnsafeSlow=function(e){return l(null,e)},o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,s=Math.min(r,n);i<s;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!K(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=o.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var s=e[r];if(!o.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,i),i+=s.length}return n},o.byteLength=y,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)b(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)b(this,t,t+3),b(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)b(this,t,t+7),b(this,t+1,t+6),b(this,t+2,t+5),b(this,t+3,t+4);return this},o.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?T(this,0,e):g.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e,t,r,n,i){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;for(var s=i-n,a=r-t,u=Math.min(s,a),l=this.slice(n,i),c=e.slice(t,r),f=0;f<u;++f)if(l[f]!==c[f]){s=l[f],a=c[f];break}return s<a?-1:a<s?1:0},o.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},o.prototype.indexOf=function(e,t,r){return m(this,e,t,r,!0)},o.prototype.lastIndexOf=function(e,t,r){return m(this,e,t,r,!1)},o.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return x(this,e,t,r);case"utf8":case"utf-8":return k(this,e,t,r);case"ascii":return E(this,e,t,r);case"latin1":case"binary":return _(this,e,t,r);case"base64":return A(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Z=4096;o.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n;if(o.TYPED_ARRAY_SUPPORT)n=this.subarray(e,t),n.__proto__=o.prototype;else{var i=t-e;n=new o(i,void 0);for(var s=0;s<i;++s)n[s]=this[s+e]}return n},o.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||L(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},o.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||L(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},o.prototype.readUInt8=function(e,t){return t||L(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return t||L(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return t||L(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return t||L(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return t||L(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||L(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},o.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||L(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return t||L(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){t||L(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt16BE=function(e,t){t||L(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt32LE=function(e,t){return t||L(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return t||L(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return t||L(e,4,this.length),Y.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return t||L(e,4,this.length),Y.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return t||L(e,8,this.length),Y.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return t||L(e,8,this.length),Y.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t|=0,r|=0,!n){P(this,e,t,r,Math.pow(2,8*r)-1,0)}var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},o.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t|=0,r|=0,!n){P(this,e,t,r,Math.pow(2,8*r)-1,0)}var i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},o.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):O(this,e,t,!0),t+2},o.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):O(this,e,t,!1),t+2},o.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):Q(this,e,t,!0),t+4},o.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):Q(this,e,t,!1),t+4},o.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);P(this,e,t,r,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<r&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+r},o.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);P(this,e,t,r,i-1,-i)}var o=r-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+r},o.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):O(this,e,t,!0),t+2},o.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):O(this,e,t,!1),t+2},o.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):Q(this,e,t,!0),t+4},o.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):Q(this,e,t,!1),t+4},o.prototype.writeFloatLE=function(e,t,r){return B(this,e,t,!0,r)},o.prototype.writeFloatBE=function(e,t,r){return B(this,e,t,!1,r)},o.prototype.writeDoubleLE=function(e,t,r){return M(this,e,t,!0,r)},o.prototype.writeDoubleBE=function(e,t,r){return M(this,e,t,!1,r)},o.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,s=n-r;if(this===e&&r<t&&t<n)for(i=s-1;i>=0;--i)e[i+t]=this[i+r];else if(s<1e3||!o.TYPED_ARRAY_SUPPORT)for(i=0;i<s;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+s),t);return s},o.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!o.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0);var s;if("number"==typeof e)for(s=t;s<r;++s)this[s]=e;else{var a=o.isBuffer(e)?e:H(new o(e,n).toString()),u=a.length;for(s=0;s<r-t;++s)this[s+t]=a[s%u]}return this};var ee=/[^+\/0-9A-Za-z-_]/g}).call(t,r(4))},function(e,t,r){var n=r(29);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t,r){var n=r(10),i=r(3),o=r(74),s=r(26),a=function(e,t,r){var u,l,c,f=e&a.F,p=e&a.G,h=e&a.S,d=e&a.P,v=e&a.B,y=e&a.W,g=p?i:i[t]||(i[t]={}),b=g.prototype,m=p?n:h?n[t]:(n[t]||{}).prototype;p&&(r=t);for(u in r)(l=!f&&m&&void 0!==m[u])&&u in g||(c=l?m[u]:r[u],g[u]=p&&"function"!=typeof m[u]?r[u]:v&&l?o(c,n):y&&m[u]==c?function(e){var t=function(t,r,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,n)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(c):d&&"function"==typeof c?o(Function.call,c):c,d&&((g.virtual||(g.virtual={}))[u]=c,e&a.R&&b&&!b[u]&&s(b,u,c)))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,e.exports=a},function(e,t,r){var n=r(16),i=r(36);e.exports=r(14)?function(e,t,r){return n.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},function(e,t,r){"use strict";r.d(t,"c",function(){return g}),r.d(t,"b",function(){return x}),r.d(t,"a",function(){return k});var n=r(22),i=r.n(n),o=r(8),s=r.n(o),a=r(7),u=r.n(a),l=r(1),c=r.n(l),f=r(6),p=(r.n(f),r(71)),h=r(2),d=r(40),v=r(9),y=r(69),g=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];c()(this,e),this.property=t,this.object=r,this.properties=n}return e.prototype.pruned=function(){return new e(new p.a(this.property),new p.a(this.object),this.properties.map(function(e){return e.pruned()}))},e}(),b=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];c()(this,e),this.value=t,this.properties=r},m=function(e){function t(r){c()(this,t);var n=s()(this,e.call(this,r));return n.values=[],n}return u()(t,e),t.toPropertyAndValues=function(e,t){return e.values.map(function(t){return new g(e,t.value,r.i(y.a)(t.properties.map(function(e){return e.values.map(function(t){return new g(e,t.value)})})))})},t.prototype.toPropertyAndValues=function(e){return t.toPropertyAndValues(this,e)},t}(p.b),w=function(e){function t(){c()(this,t);var r=s()(this,e.apply(this,arguments));return r.localProperties=[],r.remoteProperties=[],r.localInverseProperties=[],r.remoteInverseProperties=[],r}return u()(t,e),t}(p.c),x=function(){function e(t){c()(this,e),this.workerService=t}return e.$inject=["workerService"],e.prototype.getItem=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments[2];return this.workerService.call("sparqlItemWorkerService","getItems",[[e.toCanonical()],t],r).then(function(e){return e[0]},null,function(e){return{endpointType:e.endpointType,endpoint:e.endpoint,item:e.items[0]}})},e.prototype.getItems=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments[2];return this.workerService.call("sparqlItemWorkerService","getItems",[e.map(function(e){return e.toCanonical()}),t],r)},e.prototype.getAllItems=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments[1];return this.workerService.call("sparqlItemWorkerService","getItems",[!1,e],t)},e.prototype.createNewItem=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.workerService.call("sparqlItemWorkerService","createNewItem",[e.map(function(e){return e.pruned()})])},e.prototype.alterItem=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.workerService.call("sparqlItemWorkerService","alterItem",[e,t.map(function(e){return e.pruned()}),r.map(function(e){return e.pruned()})])},e.prototype.deleteItem=function(e){return this.workerService.call("sparqlItemWorkerService","deleteItem",[e])},e}();x.naiveGetLocalItemPropertiesQuery='PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX mads: <http://www.loc.gov/mads/rdf/v1#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\nSELECT ?id ?itemLabel ?property ?propertyLabel ?object ?objectLabel {\n# STARTGRAPH\n  VALUES ?id { <IDS> }\n  ?id skos:prefLabel|mads:authoritativeLabel|rdfs:label ?itemLabel .\n  FILTER(LANG(?itemLabel)=\'\' || LANG(?itemLabel)=\'<PREFLANG>\')\n  ?id ?property ?object .\n  OPTIONAL {\n    ?property skos:prefLabel|rdfs:label ?propertyLabelP .\n    FILTER(LANG(?propertyLabelP)=\'\' || LANG(?propertyLabelP)=\'<PREFLANG>\')\n  }\n  BIND(COALESCE(?propertyLabelP,REPLACE(REPLACE(REPLACE(REPLACE(STR(?property),".*/",""),".*#",""),"_"," "),"([A-ZÅÄÖ])"," $1")) AS ?propertyLabel)\n  OPTIONAL {\n    ?object skos:prefLabel|rdfs:label ?objectLabelP .\n    FILTER(LANG(?objectLabelP)=\'\' || LANG(?objectLabelP)=\'<PREFLANG>\')\n  }\n  BIND (IF(ISIRI(?object),COALESCE(?objectLabelP,REPLACE(REPLACE(REPLACE(REPLACE(STR(?object),".*/",""),".*#",""),"_"," "),"([A-ZÅÄÖ])"," $1")),?object) AS ?objectLabel)\n# ENDGRAPH\n}',x.getLocalItemPropertiesQuery='PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX mads: <http://www.loc.gov/mads/rdf/v1#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\nPREFIX sf: <http://ldf.fi/functions#>\nSELECT ?id ?itemLabel ?property ?propertyLabel ?object ?objectLabel {\n# STARTGRAPH\n  VALUES ?id { <IDS> }\n  { ?id ?property ?object . }\n  UNION\n  { ?object ?property ?id . }\n  ?id sf:preferredLanguageLiteral (skos:prefLabel mads:authoritativeLabel rdfs:label skos:altLabel mads:variantLabel \'<PREFLANG>\' \'\' ?itemLabel) .\n  OPTIONAL {\n    ?property sf:preferredLanguageLiteral (skos:prefLabel mads:authoritativeLabel rdfs:label skos:altLabel mads:variantLabel \'<PREFLANG>\' \'\' ?propertyLabelP)\n  }\n  BIND(COALESCE(?propertyLabelP,REPLACE(REPLACE(REPLACE(REPLACE(STR(?property),".*/",""),".*#",""),"_"," "),"([A-ZÅÄÖ])"," $1")) AS ?propertyLabel)\n  OPTIONAL {\n    ?object sf:preferredLanguageLiteral (skos:prefLabel mads:authoritativeLabel rdfs:label skos:altLabel mads:variantLabel \'<PREFLANG>\' \'\' ?objectLabelP) .\n  }\n  BIND (IF(ISIRI(?object),COALESCE(?objectLabelP,REPLACE(REPLACE(REPLACE(REPLACE(STR(?object),".*/",""),".*#",""),"_"," "),"([A-ZÅÄÖ])"," $1")),?object) AS ?objectLabel)\n# ENDGRAPH\n}',x.getRemoteItemPropertiesQuery='PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX mads: <http://www.loc.gov/mads/rdf/v1#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\nPREFIX sf: <http://ldf.fi/functions#>\nSELECT ?id ?property ?propertyLabel ?object ?objectLabel {\nVALUES (?id ?oid) { <IDPAIRS> }\n?oid ?property ?object .\nOPTIONAL {\n  ?property sf:preferredLanguageLiteral (skos:prefLabel mads:authoritativeLabel rdfs:label skos:altLabel mads:variantLabel \'<PREFLANG>\' \'\' ?propertyLabelP)\n}\nBIND(COALESCE(?propertyLabelP,REPLACE(REPLACE(REPLACE(REPLACE(STR(?property),".*/",""),".*#",""),"_"," "),"([A-ZÅÄÖ])"," $1")) AS ?propertyLabel)\nOPTIONAL {\n  ?object sf:preferredLanguageLiteral (skos:prefLabel mads:authoritativeLabel rdfs:label skos:altLabel mads:variantLabel \'<PREFLANG>\' \'\' ?objectLabelP) .\n}\nBIND (IF(ISIRI(?object),COALESCE(?objectLabelP,REPLACE(REPLACE(REPLACE(REPLACE(STR(?object),".*/",""),".*#",""),"_"," "),"([A-ZÅÄÖ])"," $1")),?object) AS ?objectLabel)\n}\n',x.deleteItemQuery="DELETE {\n# STARTGRAPH\n  <ID> ?p ?o .\n  ?s ?p <ID> .\n# ENDGRAPH\n}\nWHERE {\n# STARTGRAPH\n  { <ID> ?p ?o } UNION { ?s ?p <ID> }\n# ENDGRAPH\n}\n";var k=function(){function e(t,r,n,i){c()(this,e),this.fibraSparqlService=t,this.$q=r,this.sparqlUpdateWorkerService=n,this.stateWorkerService=i}return e.$inject=["fibraSparqlService","$q","sparqlUpdateWorkerService","stateWorkerService"],e.processItemResult=function(e,t,r,n,i,o){if(o.property){var s=r.goc(o.property.value).goc(o.object.value,function(){var r=t.goc(o.property.value,function(){var t=new m(h.b.instance.nodeFromBinding(o.property));return o.propertyLabel&&(t.label=o.propertyLabel.value),e.push(t),t}),i=new p.c(h.b.instance.nodeFromBinding(o.object));return i.sourceEndpoints=[],r.values.push(new b(i)),h.e.sameAs.equals(r)&&n.push(i),i});s.sourceEndpoints.push(i),o.objectLabel&&!s.label&&(s.label=o.objectLabel.value)}},e.prototype.getItems=function(t){var r=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments[2],s=this.stateWorkerService.state.project.itemQuery;s=t?s.replace(/<IDS>/g,t.join("")):s.replace(/VALUES \?id { <IDS> }/g,""),s=s.replace(/<PREFLANG>/g,this.stateWorkerService.state.language);var a=new v.a(function(e){return new w(h.b.instance.namedNode(e))}),u=this.$q.defer();return this.fibraSparqlService.query(this.stateWorkerService.state.project.endpoint,s,{timeout:o}).then(function(t){for(var s=new v.a(function(){return new v.a}),l=new v.a(function(){return new v.a(function(){return new v.a})}),c=new h.f(function(){return[]}),f=t.results.bindings,p=Array.isArray(f),y=0,f=p?f:i()(f);;){var g;if(p){if(y>=f.length)break;g=f[y++]}else{if(y=f.next(),y.done)break;g=y.value}var b=g,m=a.goc(b.id.value);b.itemLabel&&(m.label=b.itemLabel.value),e.processItemResult(m.localProperties,s.goc(b.id.value),l.goc(b.id.value),c.goc(m),r.stateWorkerService.state.project.endpoint,b)}if(n){u.notify({endpointType:"primary",endpoint:r.stateWorkerService.state.project.endpoint,items:a.values()});for(var w="",x=a.values(),k=Array.isArray(x),E=0,x=k?x:i()(x);;){var _;if(k){if(E>=x.length)break;_=x[E++]}else{if(E=x.next(),E.done)break;_=E.value}var A=_;w+="("+A.toCanonical()+A.toCanonical()+")";for(var S=c.get(A),I=Array.isArray(S),T=0,S=I?S:i()(S);;){var C;if(I){if(T>=S.length)break;C=S[T++]}else{if(T=S.next(),T.done)break;C=T.value}var F=C;w+="("+A.toCanonical()+F.toCanonical()+")"}}r.$q.all(r.stateWorkerService.state.project.remoteEndpoints().map(function(t){var n=t.itemQuery;return n=n.replace(/<IDPAIRS>/g,w),n=n.replace(/<PREFLANG>/g,r.stateWorkerService.state.language),r.fibraSparqlService.query(t.endpoint,n,{timeout:o}).then(function(r){if(0!==r.results.bindings.length){for(var n=r.results.bindings,o=Array.isArray(n),f=0,n=o?n:i()(n);;){var p;if(o){if(f>=n.length)break;p=n[f++]}else{if(f=n.next(),f.done)break;p=f.value}var h=p,d=a.goc(h.id.value);e.processItemResult(d.remoteProperties,s.goc(h.id.value),l.goc(h.id.value),c.goc(d),t.id,h)}u.notify({endpointType:"remote",endpoint:t.id,items:a.values()})}},function(e){return u.notify({endpointType:"remote",endpoint:t.id,error:d.b.stripFunctions(e)})})})).then(function(){return u.resolve(a.values())})}else u.resolve(a.values())}),u.promise},e.prototype.deleteItem=function(e){return this.fibraSparqlService.update(this.stateWorkerService.state.project.updateEndpoint,this.stateWorkerService.state.project.deleteItemQuery.replace(/<ID>/g,e.toCanonical())).then(function(e){return!0},function(e){return!1})},e.prototype.alterItem=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=[],i=[];return t.forEach(function(t){return n.push(new h.g(e,t.property,t.object))}),r.forEach(function(t){return i.push(new h.g(e,t.property,t.object))}),this.sparqlUpdateWorkerService.updateGraphs(this.stateWorkerService.state.project.updateEndpoint,[new h.c(this.stateWorkerService.state.project.graph?h.b.namedNode(this.stateWorkerService.state.project.graph):h.d.instance,n)],[new h.c(this.stateWorkerService.state.project.graph?h.b.namedNode(this.stateWorkerService.state.project.graph):h.d.instance,i)])},e.prototype.createNewItem=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.$q.defer(),n=new h.h(this.stateWorkerService.state.project.instanceNS+r.i(y.b)());t.notify(n);var i=[];return e.forEach(function(e){return i.push(new h.g(n,e.property,e.object))}),this.sparqlUpdateWorkerService.updateGraphs(this.stateWorkerService.state.project.updateEndpoint,[new h.c(this.stateWorkerService.state.project.graph?h.b.namedNode(this.stateWorkerService.state.project.graph):h.d.instance,i)]).then(function(){return t.resolve(n)},t.reject,t.notify),t.promise},e}();f.module("fibra.services.sparql-item-service",[]).config(["$provide",function(e){e.service("sparqlItemService",x)}])},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,r){(function(e){function r(e){return Array.isArray?Array.isArray(e):"[object Array]"===y(e)}function n(e){return"boolean"==typeof e}function i(e){return null===e}function o(e){return null==e}function s(e){return"number"==typeof e}function a(e){return"string"==typeof e}function u(e){return"symbol"==typeof e}function l(e){return void 0===e}function c(e){return"[object RegExp]"===y(e)}function f(e){return"object"==typeof e&&null!==e}function p(e){return"[object Date]"===y(e)}function h(e){return"[object Error]"===y(e)||e instanceof Error}function d(e){return"function"==typeof e}function v(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function y(e){return Object.prototype.toString.call(e)}t.isArray=r,t.isBoolean=n,t.isNull=i,t.isNullOrUndefined=o,t.isNumber=s,t.isString=a,t.isSymbol=u,t.isUndefined=l,t.isRegExp=c,t.isObject=f,t.isDate=p,t.isError=h,t.isFunction=d,t.isPrimitive=v,t.isBuffer=e.isBuffer}).call(t,r(23).Buffer)},function(e,t,r){t=e.exports=r(97),t.Stream=t,t.Readable=t,t.Writable=r(65),t.Duplex=r(19),t.Transform=r(98),t.PassThrough=r(180)},function(e,t,r){"use strict";r.d(t,"b",function(){return v}),r.d(t,"a",function(){return g});var n=r(22),i=r.n(n),o=r(1),s=r.n(o),a=r(2),u=r(40),l=r(9),c=r(13),f=(r.n(c),r(6)),p=(r.n(f),function e(){s()(this,e),this.localMatchingResults=[],this.localNonMatchingResults=[],this.remoteResults=[]}),h=function e(t){s()(this,e),this.label=t,this.results=[]},d=function e(t,r,n,i){s()(this,e),this.ids=t,this.datasources=r,this.matchedLabel=n,this.prefLabel=i,this.additionalInformation={}},v=function(){function e(t){s()(this,e),this.workerService=t}return e.$inject=["workerService"],e.prototype.autocomplete=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments[4];return this.workerService.call("sparqlAutocompleteWorkerService","autocomplete",[e,t,r,n],i)},e}();v.naiveMatchQueryTemplate='PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX mads: <http://www.loc.gov/mads/rdf/v1#>\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\nPREFIX dcterms: <http://purl.org/dc/terms/>\nSELECT ?groupId ?id ?prefLabel ?matchedLabel ?sameAs ?altLabel { # ADDITIONALVARIABLES\nGRAPH <GRAPH> {\n  {\n    SELECT ?groupId ?id {\n      {\n        ?id skos:prefLabel|rdfs:label|skos:altLabel|mads:authoritativeLabel|mads:variantLabel <QUERY> .\n      } UNION {\n        ?id skos:prefLabel|rdfs:label|skos:altLabel|mads:authoritativeLabel|mads:variantLabel <QUERY>@<PREFLANG> .\n      }\n      ?id a ?groupId .\n    }\n    GROUP BY ?groupId ?id\n    HAVING(BOUND(?id))\n    LIMIT <LIMIT>\n  }\n  ?id skos:prefLabel|rdfs:label|skos:altLabel|mads:authoritativeLabel|mads:variantLabel ?matchedLabel .\n  FILTER (REGEX(LCASE(?matchedLabel),CONCAT("\\\\b",LCASE(<QUERY>))))\n  BIND(COALESCE(?groupLabelP,REPLACE(REPLACE(REPLACE(REPLACE(STR(?groupId),".*/",""),".*#",""),"_"," "),"([A-ZÅÄÖ])"," $1")) AS ?groupLabel)\n  {\n    ?id  rdfs:label|skos:prefLabel|mads:authoritativeLabel ?prefLabel .\n  } UNION {\n    ?id owl:sameAs ?sameAs .\n  } UNION {\n    ?id skos:altLabel|mads:variantLabel ?altLabel .\n  }\n  # ADDITIONALSELECT\n}\n}',v.defaultMatchQuery='\nPREFIX text: <http://jena.apache.org/text#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX mads: <http://www.loc.gov/mads/rdf/v1#>\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\nPREFIX sf: <http://ldf.fi/functions#>\nPREFIX fibra: <http://ldf.fi/fibra/schema#>\nPREFIX dcterms: <http://purl.org/dc/terms/>\nSELECT ?groupId ?id ?prefLabel ?matchedLabel ?sameAs ?altLabel { # ADDITIONALVARIABLES\n# STARTGRAPH\n  {\n    SELECT ?groupId ?id (SUM(?sc) AS ?score) {\n      {\n        SELECT ?groupId ?id ?sc {\n          BIND(CONCAT("\\"",REPLACE(<QUERY>,"([\\\\+\\\\-\\\\&\\\\|\\\\!\\\\(\\\\)\\\\{\\\\}\\\\[\\\\]\\\\^\\\\\\"\\\\~\\\\*\\\\?\\\\:\\\\/\\\\\\\\])","\\\\$1"),"\\"") AS ?query)\n          (?id ?sc) text:query ?query .\n          ?id skos:prefLabel|rdfs:label|skos:altLabel|mads:authoritativeLabel|mads:variantLabel ?matchedLabel\n          FILTER (LCASE(?matchedLabel)=LCASE(<QUERY>))\n          ?id a ?groupIdLocal .\n          BIND(?groupIdLocal AS ?groupId)\n          # CONSTRAINTS\n        }\n        GROUP BY ?groupId ?id ?sc\n        LIMIT <LIMIT>\n      } UNION {\n        SELECT ?groupId ?id ?sc {\n          BIND(CONCAT(REPLACE(<QUERY>,"([\\\\+\\\\-\\\\&\\\\|\\\\!\\\\(\\\\)\\\\{\\\\}\\\\[\\\\]\\\\^\\\\\\"\\\\~\\\\*\\\\?\\\\:\\\\/\\\\\\\\])","\\\\$1"),"*") AS ?query)\n          (?id ?sc) text:query ?query .\n          ?id a ?groupIdLocal .\n          BIND(?groupIdLocal AS ?groupId)\n          # CONSTRAINTS\n        }\n        GROUP BY ?groupId ?id ?sc\n        LIMIT <LIMIT>\n      }\n    }\n    GROUP BY ?groupId ?id\n    HAVING(BOUND(?id))\n    LIMIT <LIMIT>\n  }\n  ?id skos:prefLabel|rdfs:label|skos:altLabel|mads:authoritativeLabel|mads:variantLabel ?matchedLabel\n  FILTER (REGEX(LCASE(?matchedLabel),CONCAT("\\\\b",LCASE(<QUERY>))))\n  {\n    ?id sf:preferredLanguageLiteral (skos:prefLabel mads:authoritativeLabel rdfs:label skos:altLabel mads:variantLabel \'<PREFLANG>\' \'\' ?prefLabel) .\n  } UNION {\n    ?id owl:sameAs ?sameAs .\n  } UNION {\n    ?id skos:altLabel|mads:variantLabel ?altLabel .\n  }\n  # ADDITIONALSELECT\n# ENDGRAPH\n}\n';var y=function e(){s()(this,e),this.idToIdSet=new l.a(function(){return new l.b}),this.idToGroupIdSet=new l.a(function(){return new l.b}),this.ifpVarPlusValueToIdSet=new l.a(function(){return new l.a(function(){return new l.b})}),this.idToPrefLabelSet=new l.a(function(){return new a.a}),this.idToMatchedLabelSet=new l.a(function(){return new a.a}),this.idToAltLabelSet=new l.a(function(){return new a.a}),this.idToDatasourceSet=new l.a(function(){return new l.b}),this.seen=new l.b},g=function(){function e(t,r,n){s()(this,e),this.$q=t,this.fibraSparqlService=r,this.stateWorkerService=n}return e.$inject=["$q","fibraSparqlService","stateWorkerService"],e.processBindings=function(e,t,r){r.results.bindings.forEach(function(n){var o=n.id.value;e.idToIdSet.goc(o).add(o),e.idToDatasourceSet.goc(o).add(t),n.prefLabel&&e.idToPrefLabelSet.goc(o).add(a.b.instance.nodeFromBinding(n.prefLabel)),n.altLabel&&e.idToAltLabelSet.goc(o).add(a.b.instance.nodeFromBinding(n.altLabel)),n.matchedLabel&&e.idToMatchedLabelSet.goc(o).add(a.b.instance.nodeFromBinding(n.matchedLabel)),n.groupId&&(e.idToGroupIdSet.goc(o).add(n.groupId.value),n.groupLabel&&e.idToPrefLabelSet.goc(n.groupId.value).add(a.b.instance.nodeFromBinding(n.groupLabel))),n.sameAs&&(e.idToIdSet.get(o).add(n.sameAs.value),e.idToIdSet.goc(n.sameAs.value).add(o));for(var s=r.head.vars,u=Array.isArray(s),l=0,s=u?s:i()(s);;){var c;if(u){if(l>=s.length)break;c=s[l++]}else{if(l=s.next(),l.done)break;c=l.value}var f=c;0===f.indexOf("ifp")&&n[f]&&e.ifpVarPlusValueToIdSet.goc(f.substring(3)).goc(n[f].value).add(o)}})},e.buildResults=function(e,t,r,n){var i=[];return e.idToIdSet.each(function(o,s){if(!e.seen.has(s)&&!o.values().some(function(t){return e.seen.has(t)})){e.seen.adds(o);var u=new d(o.values().map(function(e){return a.b.instance.namedNode(e)}),e.idToDatasourceSet.get(s).values(),e.idToMatchedLabelSet.get(s).values()[0],e.idToPrefLabelSet.has(s)?e.idToPrefLabelSet.get(s).values()[0]:null);e.idToAltLabelSet.has(s)&&(u.additionalInformation.altLabel=e.idToAltLabelSet.get(s).values()),u.additionalInformation.type=e.idToGroupIdSet.get(s).values().map(function(e){return a.b.instance.namedNode(e)}),u.additionalInformation.typeLabel=e.idToGroupIdSet.get(s).values().map(function(t){return e.idToPrefLabelSet.has(s)?e.idToPrefLabelSet.get(s).values()[0]:null}),e.idToGroupIdSet.get(s).each(function(o){return t.goc(o,function(){var t=r.classMap.has(o)?r.classMap.get(o).getLabel(n):e.idToPrefLabelSet.has(o)?e.idToPrefLabelSet.get(o).values()[0].value:o,s=new h(t);return i.push(s),s}).results.push(u)})}}),i},e.unifyResults=function(e){e.ifpVarPlusValueToIdSet.each(function(t){return t.each(function(t){return t.each(function(r){return e.idToIdSet.goc(r).adds(t)})})}),e.idToIdSet.each(function(t,r){return t.each(function(n){var i=e.idToIdSet.get(n);if(t!==i){e.idToIdSet.set(n,t),t.adds(i);var o=e.idToDatasourceSet.get(r),s=e.idToDatasourceSet.get(n);o?(s&&o.adds(s),e.idToDatasourceSet.set(n,o)):s&&e.idToDatasourceSet.set(r,s);var a=e.idToGroupIdSet.get(r),u=e.idToGroupIdSet.get(n);a?(u&&a.adds(u),e.idToGroupIdSet.set(n,a)):u&&e.idToGroupIdSet.set(r,u);var l=e.idToPrefLabelSet.get(r),c=e.idToPrefLabelSet.get(n);l?(c&&l.adds(c),e.idToPrefLabelSet.set(n,l)):c&&e.idToPrefLabelSet.set(r,c),l=e.idToMatchedLabelSet.get(r),c=e.idToMatchedLabelSet.get(n),l?(c&&l.adds(c),e.idToMatchedLabelSet.set(n,l)):c&&e.idToMatchedLabelSet.set(r,c),l=e.idToAltLabelSet.get(r),c=e.idToAltLabelSet.get(n),l?(c&&l.adds(c),e.idToAltLabelSet.set(n,l)):c&&e.idToAltLabelSet.set(r,c)}})})},e.prototype.autocomplete=function(t,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=arguments[4],a=this.$q.defer(),f=new p,h=this.stateWorkerService.state.project.autocompletionQuery;h=h.replace(/<QUERY>/g,c.SparqlService.stringToSPARQLString(t)),h=h.replace(/<LIMIT>/g,""+r),h=h.replace(/# CONSTRAINTS/g,o),h=h.replace(/<PREFLANG>/g,this.stateWorkerService.state.language);var d=new y,v=this.fibraSparqlService.query(this.stateWorkerService.state.project.endpoint,h,{timeout:s}).then(function(t){e.processBindings(d,i.stateWorkerService.state.project.endpoint,t),f.localMatchingResults=e.buildResults(d,new l.a,i.stateWorkerService.state.project.dataModel,i.stateWorkerService.state.language),n?a.notify({endpointType:"primary",endpoint:i.stateWorkerService.state.project.id,results:f}):a.resolve(f)});if(n){var g=new l.a;this.$q.all(this.stateWorkerService.state.project.remoteEndpoints().map(function(n){return h=n.autocompletionQuery,h=h.replace(/<QUERY>/g,c.SparqlService.stringToSPARQLString(t)),h=h.replace(/<LIMIT>/g,""+r),h=h.replace(/<PREFLANG>/g,i.stateWorkerService.state.language),i.fibraSparqlService.query(n.endpoint,h,{timeout:s}).then(function(t){0!==t.results.bindings.length&&v.then(function(){e.processBindings(d,n.id,t),e.unifyResults(d),f.remoteResults=f.remoteResults.concat(e.buildResults(d,g,i.stateWorkerService.state.project.dataModel,i.stateWorkerService.state.language)),a.notify({endpointType:"remote",endpoint:n.id,results:f})})},function(e){return a.notify({endpointType:"remote",endpoint:n.id,error:u.b.stripFunctions(e)})})})).then(function(){return a.resolve(f)})}return a.promise},e}();f.module("fibra.services.sparql-autocomplete-service",[]).config(["$provide",function(e){e.service("sparqlAutocompleteService",v)}])},function(e,t,r){"use strict";r.d(t,"b",function(){return a}),r.d(t,"a",function(){return u});var n=r(1),i=r.n(n),o=r(6),s=(r.n(o),r(70)),a=function(){function e(t){i()(this,e),this.workerService=t}return e.$inject=["workerService"],e.prototype.getTree=function(e,t,r){return this.workerService.call("sparqlTreeWorkerService","getTree",[e,t],r)},e}();a.getClassTreeQuery='PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX sf: <http://ldf.fi/functions#>\nSELECT ?subClass ?superClass ?class ?classLabel ?instances {\n# STARTGRAPH\n  {\n    ?groupId rdfs:subClassOf ?class .\n    FILTER EXISTS {\n      ?id a ?groupId .\n      # CONSTRAINTS\n    }\n    BIND(?groupId AS ?subClass)\n  } UNION {\n    {\n      SELECT ?groupId (COUNT(*) AS ?instances) {\n        ?id a ?groupId .\n      }\n      GROUP BY ?groupId\n    }\n    # CONSTRAINTS\n    BIND (?groupId AS ?class)\n  }\n  OPTIONAL {\n    ?class sf:preferredLanguageLiteral (skos:prefLabel rdfs:label skos:altLabel \'en\' \'\' ?classLabelP) .\n  }\n  FILTER(ISIRI(?class))\n  BIND(COALESCE(?classLabelP,REPLACE(REPLACE(REPLACE(REPLACE(STR(?class),".*/",""),".*#",""),"_"," "),"([A-ZÅÄÖ])"," $1")) AS ?classLabel)\n# ENDGRAPH\n}\n';var u=function(){function e(t){i()(this,e),this.fibraSparqlService=t}return e.$inject=["fibraSparqlService"],e.prototype.getTree=function(e,t,r){return this.fibraSparqlService.query(e,t,{timeout:r}).then(function(e){var t={},r={};e.results.bindings.forEach(function(e){if(e.classLabel&&(r[e.class.value]=new s.a(e.class.value,e.classLabel.value)),e.instances&&(r[e.class.value].instances=parseInt(e.instances.value,10)),e.subClass){var n=e.subClass.value;t[n]||(t[n]={}),t[n][e.class.value]=!0}if(e.superClass){var i=e.class.value;t[i]||(t[i]={}),t[i][e.superClass.value]=!0}});var n=[];for(var i in r)if(t[i])for(var o in t[i])r[o].children.push(r[i]);else n.push(r[i]);return n})},e}();o.module("fibra.services.sparql-tree-service",[]).config(["$provide",function(e){e.service("sparqlTreeService",a)}])},function(e,t){e.exports={}},function(e,t,r){var n=r(83),i=r(45);e.exports=Object.keys||function(e){return n(e,i)}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var r=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+n).toString(36))}},function(e,t,r){var n=r(63).Tree,i=r(0),o=r(0);NodeKey=function(e,t){this.subject=e.subject,this.predicate=e.predicate,this.object=e.object,this.graph=e.graph,this.order=t},NodeKey.prototype.comparator=function(e){for(var t=0;t<this.order.length;t++){var r=this.order[t];if(null==e[r])return 0;if(this[r]<e[r])return-1;if(this[r]>e[r])return 1}return 0},Pattern=function(e){this.subject=e.subject,this.predicate=e.predicate,this.object=e.object,this.graph=e.graph,this.indexKey=[],this.keyComponents={};var t=[],r=[],n=this;i.forEach(["subject","predicate","object","graph"],function(e){"string"==typeof n[e]?(r.push(e),n.keyComponents[e]=null):(t.push(e),n.keyComponents[e]=n[e],n.indexKey.push(e))}),this.order=t.concat(r),this.key=new NodeKey(this.keyComponents,this.order)},QuadIndex=function(e,t){0!=arguments&&(this.componentOrder=e.componentOrder,n.call(this,e.order,function(e){e.comparator=function(t,r){for(var n=0;n<e.componentOrder.length;n++){var i=e.componentOrder[n],o=t[i],s=r[i];if(o<s)return-1;if(o>s)return 1}return 0},e.rangeComparator=function(t,r){for(var n=0;n<e.componentOrder.length;n++){var i=e.componentOrder[n];if(null==r[i]||null==t[i])return 0;if(t[i]<r[i])return-1;if(t[i]>r[i])return 1}return 0},t(e)}))},QuadIndex.prototype=i.create(n.prototype,{constructor:n}),QuadIndex.prototype.insert=function(e,t){n.prototype.insert.call(this,e,null,function(e){t(e)})},QuadIndex.prototype.search=function(e,t){n.prototype.search.call(this,e,function(e){t(e)},!0)},QuadIndex.prototype.range=function(e,t){this._rangeTraverse(this,this.root,e,t)},QuadIndex.prototype._rangeTraverse=function(e,t,r,n){var i=r.key,s=[],a=[t];o.whilst(function(){return a.length>0},function(t){for(var r=a.shift(),n=0;n<r.numberActives&&-1===e.rangeComparator(r.keys[n].key,i);)n++;if(!0===r.isLeaf){for(var u=n;u<r.numberActives&&0===e.rangeComparator(r.keys[u].key,i);)s.push(r.keys[u].key),u++;t()}else e._diskRead(r.children[n],function(u){a.push(u);var l=n;o.whilst(function(){return l<r.numberActives&&0===e.rangeComparator(r.keys[l].key,i)},function(t){s.push(r.keys[l].key),l++,e._diskRead(r.children[l],function(e){a.push(e),t()})},function(){t()})})},function(){n(s)})},e.exports={QuadIndex:QuadIndex,Pattern:Pattern,NodeKey:NodeKey}},function(e,t,r){function n(e,t){this._id=e,this._clearFn=t}var i=Function.prototype.apply;t.setTimeout=function(){return new n(i.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new n(i.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},r(185),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t,r){"use strict";r.d(t,"b",function(){return v}),r.d(t,"a",function(){return y});var n=r(22),i=r.n(n),o=r(73),s=r.n(o),a=r(114),u=r.n(a),l=r(42),c=r.n(l),f=r(1),p=r.n(f),h=r(6),d=(r.n(h),r(67),function(){function e(t,r,n,i,o){var s=this;p()(this,e),this.workerServicePrototypeMappingConfiguration=r,this.$q=o,this.currentWorker=0,this.deferreds=[];var a=i.location.protocol+"//"+i.location.host,u=t.importScripts.map(function(e){return 0!==e.indexOf("http")?a+(0!==e.indexOf("/")?i.location.pathname:"")+e:e}),l=i.URL.createObjectURL(new Blob([e.workerTemplate.replace(/<APP_NAME>/g,t.appName).replace(/<IMPORT_SCRIPTS>/g,u.join("','"))],{type:"application/javascript"}));this.workers=[];for(var c=0;c<t.workerThreads;c++)this.workers.push(new Worker(l)),this.workers[c].addEventListener("message",function(e){var t=e.data.event;if("broadcast"===t)n.$broadcast(e.data.name,s.restorePrototypes(e.data.args)),n.$apply();else{var r=s.deferreds[e.data.id];r&&("success"===t?(delete s.deferreds[e.data.id],r.resolve(s.restorePrototypes(e.data.data))):"failure"===t?(delete s.deferreds[e.data.id],r.reject(s.restorePrototypes(e.data.data))):r.notify(s.restorePrototypes(e.data.data)))}})}return e.$inject=["workerServiceConfiguration","workerServicePrototypeMappingConfiguration","$rootScope","$window","$q"],e.stripMarks=function(t){if(t&&t.__mark&&"object"===(void 0===t?"undefined":c()(t)))if(delete t.__mark,t instanceof Array)t.forEach(function(t){return e.stripMarks(t)});else for(var r in t)t.hasOwnProperty(r)&&e.stripMarks(t[r])},e.stripPrototypes=function(t){if(t&&t.__className&&"object"===(void 0===t?"undefined":c()(t)))if(delete t.__className,t instanceof Array)t.forEach(function(t){return e.stripPrototypes(t)});else for(var r in t)t.hasOwnProperty(r)&&e.stripPrototypes(t[r])},e.savePrototypes=function(t){return e.stripPrototypes(t),this.savePrototypesInternal(t),t},e.savePrototypesInternal=function(t){if(t&&!t.__className&&"object"===(void 0===t?"undefined":c()(t)))if(t instanceof Array)t.forEach(function(t){return e.savePrototypesInternal(t)});else{if(t.constructor.__name||"Object"!==t.constructor.name){var r=u()(t);e:for(;r!==Object.prototype;){for(var n=s()(r),o=Array.isArray(n),a=0,n=o?n:i()(n);;){var l;if(o){if(a>=n.length)break;l=n[a++]}else{if(a=n.next(),a.done)break;l=a.value}var f=l;if("constructor"!==f&&"function"==typeof t.__proto__[f]){t.__className=t.constructor.__name?t.constructor.__name:t.constructor.name;break e}}r=u()(r)}t.__className||(t.__className="Object")}for(var p in t)t.hasOwnProperty(p)&&e.savePrototypesInternal(t[p])}},e.prototype.$broadcast=function(t,r){this.workers.forEach(function(n){return n.postMessage({name:t,args:e.savePrototypes(r)})})},e.prototype.callAll=function(t,r){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments[3],s=this.$q.defer();this.deferreds.push(s);var a=this.deferreds.length-1,u={id:a,service:t,method:r,args:e.savePrototypes(i)};return o&&o.then(function(){n.workers.forEach(function(e){return e.postMessage({id:a,cancel:!0})}),delete n.deferreds[a]}),this.workers.forEach(function(e){return e.postMessage(u)}),s.promise},e.prototype.call=function(t,r){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments[3],s=this.$q.defer();this.deferreds.push(s);var a=this.deferreds.length-1,u=this.workers[this.currentWorker];return this.currentWorker=(this.currentWorker+1)%this.workers.length,o&&o.then(function(){u.postMessage({id:a,cancel:!0}),delete n.deferreds[a]}),u.postMessage({id:a,service:t,method:r,args:e.savePrototypes(i)}),s.promise},e.prototype.restorePrototypes=function(t){return this.restorePrototypesInternal(t),e.stripMarks(t),t},e.prototype.restorePrototypesInternal=function(e){var t=this;if(e&&!e.__mark&&"object"===(void 0===e?"undefined":c()(e)))if(e.__mark=!0,e instanceof Array)e.forEach(function(e){return t.restorePrototypesInternal(e)});else{if(e.__className){var r=this.workerServicePrototypeMappingConfiguration[e.__className];if(!r)throw"Unknown prototype "+e.__className;e.__proto__=r,delete e.__className}for(var n in e)e.hasOwnProperty(n)&&this.restorePrototypesInternal(e[n])}},e}());d.workerTemplate="\n    var window = self\n    window.history = {}\n    window.Node = function () {}\n    //self.setImmediate = function(fn) { return window.setTimeout(fn, 0) }\n    window.document = {\n      readyState: 'complete',\n      cookie: '',\n      querySelector: function (selector) {\n        if (selector=='html') return { innerHTML: '', getAttribute: function() {}} // angular-hot-loader patch\n      },\n      addEventListener: function() {},\n      createElement: function() {\n        return {\n          pathname: '',\n          setAttribute: function(key, value) {}\n        };\n      },\n    };\n    importScripts('<IMPORT_SCRIPTS>')\n    window.angular.module('<APP_NAME>').run(['workerWorkerService', function(workerWorkerService) {\n      self.addEventListener('message', function(e) { workerWorkerService.onMessage(e.data) })\n    }])\n    window.angular.bootstrap(null, ['<APP_NAME>'])\n    window = undefined\n    self.history = undefined\n    self.Node = undefined\n    setTimeout(function() { // angular init needs this\n      self.document = undefined\n    }, 0)\n  ";var v=function(){function e(t,r,n,i){p()(this,e),this.workerServicePrototypeMappingConfiguration=t,this.$injector=r,this.$q=n,this.$rootScope=i,this.cancellers=[]}return e.$inject=["workerServicePrototypeMappingConfiguration","$injector","$q","$rootScope"],e.stripFunctions=function(t){var r={};for(var n in t)"object"===c()(t[n])?r[n]=e.stripFunctions(t[n]):"function"!=typeof t[n]&&(r[n]=t[n]);return r},e.prototype.$broadcast=function(e,t){try{self.postMessage({event:"broadcast",name:e,args:d.savePrototypes(t)})}catch(e){throw console.log(t,e),e}},e.prototype.onMessage=function(t){var r=this;if(void 0===t.id)this.$rootScope.$broadcast(t.name,this.restorePrototypes(t.args)),this.$rootScope.$apply();else if(t.cancel){var n=this.cancellers[t.id];delete this.cancellers[t.id],n&&n.resolve()}else{var i=this.$injector.get(t.service),o=this.$q.defer();this.cancellers[t.id]=o;var s=i[t.method].apply(i,this.restorePrototypes(t.args).concat(o.promise));if(!s||!s.then){var a=this.$q.defer();a.resolve(s),s=a.promise}s.then(function(e){delete r.cancellers[t.id],self.postMessage({event:"success",id:t.id,data:d.savePrototypes(e)})},function(n){if(delete r.cancellers[t.id],n instanceof Error)throw self.postMessage({event:"failure",id:t.id,data:{name:n.name,message:n.message,stack:n.stack}}),n;self.postMessage({event:"failure",id:t.id,data:d.savePrototypes(e.stripFunctions(n))})},function(e){return self.postMessage({event:"update",id:t.id,data:d.savePrototypes(e)})})}},e.prototype.restorePrototypes=function(e){return this.restorePrototypesInternal(e),d.stripMarks(e),e},e.prototype.restorePrototypesInternal=function(e){var t=this;if(e&&!e.__mark&&"object"===(void 0===e?"undefined":c()(e)))if(e.__mark=!0,e instanceof Array)e.forEach(function(e){return t.restorePrototypesInternal(e)});else{if(e.__className){var r=this.workerServicePrototypeMappingConfiguration[e.__className];if(!r)throw"Unknown prototype "+e.__className;e.__proto__=r,delete e.__className}for(var n in e)e.hasOwnProperty(n)&&this.restorePrototypesInternal(e[n])}},e}(),y=function(){function e(){p()(this,e)}return e.prototype.setState=function(e){this.state=e},e}();h.module("fibra.services.worker-service",["fibra.services.worker-service-prototype-mapping-configuration"]).config(["$provide",function(e){e.service("stateWorkerService",y),e.service("workerService",d),e.service("workerWorkerService",v)}])},function(e,t,r){"use strict";r.d(t,"a",function(){return y});var n=r(1),i=r.n(n),o=r(8),s=r.n(o),a=r(7),u=r.n(a),l=r(20),c=r(32),f=r(27),p=r(33),h=r(21),d=r(2),v=r(13),y=(r.n(v),function(e){function t(){i()(this,t);var r=s()(this,e.apply(this,arguments));return r.compatibleEndpoints=[],r.autocompletionQuery=c.b.defaultMatchQuery,r.itemQuery=f.b.getLocalItemPropertiesQuery,r.deleteItemQuery=f.b.deleteItemQuery,r.treeQuery=p.b.getClassTreeQuery,r.classQuery=h.a.classQuery,r.propertyQuery=h.a.propertyQuery,r}return u()(t,e),t.prototype.toTurtle=function(t,r){if(!t.has(this.id)){r.fibra=d.m.ns,t.set(this.id,"<"+this.id+"> a fibra:PrimaryEndpointConfiguration ;"),e.prototype.toTurtle.call(this,t,r);var n=t.get(this.id),i=this.compatibleEndpoints.filter(function(e){return e});0!==i.length&&(n+="\nfibra:compatibleEndpoint ",i.forEach(function(e){return n=n+"<"+e+">, "}),n=n.substring(0,n.length-2)+" ;"),n=n+"\nfibra:autocompletionQuery "+v.SparqlService.stringToSPARQLString(this.autocompletionQuery)+" ;\nfibra:treeQuery "+v.SparqlService.stringToSPARQLString(this.treeQuery)+" ;\nfibra:propertyQuery "+v.SparqlService.stringToSPARQLString(this.propertyQuery)+" ;\nfibra:classQuery "+v.SparqlService.stringToSPARQLString(this.classQuery)+" ;\nfibra:itemQuery "+v.SparqlService.stringToSPARQLString(this.itemQuery)+" ;\nfibra:deleteItemQuery "+v.SparqlService.stringToSPARQLString(this.deleteItemQuery)+" .",t.set(this.id,n)}},t.prototype.copyToProject=function(e){var t=this.autocompletionQuery;t=e.graph?t.replace(/# STARTGRAPH/g,"GRAPH <"+e.graph+"> {").replace(/# ENDGRAPH/g,"}"):t.replace(/.*# STARTGRAPH\n/g,"").replace(/.*# ENDGRAPH\n/g,""),e.autocompletionQuery=t,t=this.itemQuery,t=e.graph?t.replace(/# STARTGRAPH/g,"GRAPH <"+e.graph+"> {").replace(/# ENDGRAPH/g,"}"):t.replace(/.*# STARTGRAPH\n/g,"").replace(/.*# ENDGRAPH\n/g,""),e.itemQuery=t,t=this.deleteItemQuery,t=e.graph?t.replace(/# STARTGRAPH/g,"GRAPH <"+e.graph+"> {").replace(/# ENDGRAPH/g,"}"):t.replace(/.*# STARTGRAPH\n/g,"").replace(/.*# ENDGRAPH\n/g,""),e.deleteItemQuery=t,t=this.treeQuery,t=e.graph?t.replace(/# STARTGRAPH/g,"GRAPH <"+e.graph+"> {").replace(/# ENDGRAPH/g,"}"):t.replace(/.*# STARTGRAPH\n/g,"").replace(/.*# ENDGRAPH\n/g,""),e.treeQuery=t,t=this.propertyQuery,t=e.graph?t.replace(/# STARTGRAPH/g,"GRAPH <"+e.graph+"> {").replace(/# ENDGRAPH/g,"}"):t.replace(/.*# STARTGRAPH\n/g,"").replace(/.*# ENDGRAPH\n/g,""),e.propertyQuery=t,t=this.classQuery,t=e.graph?t.replace(/# STARTGRAPH/g,"GRAPH <"+e.graph+"> {").replace(/# ENDGRAPH/g,"}"):t.replace(/.*# STARTGRAPH\n/g,"").replace(/.*# ENDGRAPH\n/g,""),e.classQuery=t},t}(l.b));y.listPrimaryEndpointConfigurationsQuery="PREFIX fibra: <http://hdlab.stanford.edu/fibra/ontology#>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX dcterms: <http://purl.org/dc/terms/>\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nSELECT ?id ?labels ?descriptions ?compatibleEndpoints ?rightsHolders ?rightsHolders_labels ?rightsHolders_descriptions ?rightsHolders_url ?rightsHolders_order ?url ?autocompletionQuery ?itemQuery ?deleteItemQuery ?treeQuery ?properyQuery ?classQuery {\n# STARTGRAPH\n  ?id a fibra:PrimaryEndpointConfiguration .\n  { ?id skos:prefLabel ?labels }\n  UNION\n  { ?id dcterms:description ?descriptions }\n  UNION\n  { ?id fibra:compatibleEndpoint ?compatibleEndpoints }\n  UNION\n  {\n    ?id fibra:autocompletionQuery ?autocompletionQuery .\n    ?id fibra:itemQuery ?itemQuery .\n    ?id fibra:deleteItemQuery ?deleteItemQuery .\n    ?id fibra:treeQuery ?treeQuery .\n    ?id fibra:propertyQuery ?propertyQuery .\n    ?id fibra:classQuery ?classQuery .\n    OPTIONAL { ?id foaf:homepage ?url }\n  } UNION {\n    {\n      ?id dcterms:rightsHolder ?rightsHolders\n    } UNION {\n      ?id fibra:qualifiedAssertion ?qa .\n      ?qa rdf:predicate dcterms:rightsHolder .\n      ?qa rdf:object ?rightsHolders .\n      OPTIONAL { ?qa fibra:order ?rightsHolders_order }\n    }\n    {\n      ?rightsHolders skos:prefLabel ?rightsHolders_labels\n    } UNION {\n      ?rightsHolders foaf:homepage ?rightsHolders_url\n    } UNION {\n      ?rightsHolders dcterms:description ?rightsHolders_descriptions\n    }\n  }\n# ENDGRAPH\n}",y.primaryEndpointConfigurationQuery="PREFIX fibra: <http://hdlab.stanford.edu/fibra/ontology#>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX dcterms: <http://purl.org/dc/terms/>\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nSELECT ?labels ?descriptions ?compatibleEndpoints ?rightsHolders ?rightsHolders_labels ?rightsHolders_descriptions ?rightsHolders_url ?rightsHolders_order ?url ?autocompletionQuery ?itemQuery ?deleteItemQuery ?treeQuery ?properyQuery ?classQuery {\n# STARTGRAPH\n  { <ID> skos:prefLabel ?labels }\n  UNION\n  { <ID> dcterms:description ?descriptions }\n  UNION\n  { <ID> fibra:compatibleEndpoint ?compatibleEndpoints }\n  UNION\n  {\n    <ID> fibra:autocompletionQuery ?autocompletionQuery .\n    <ID> fibra:itemQuery ?itemQuery .\n    <ID> fibra:deleteItemQuery ?deleteItemQuery .\n    <ID> fibra:treeQuery ?treeQuery .\n    <ID> fibra:propertyQuery ?propertyQuery .\n    <ID> fibra:classQuery ?classQuery .\n    OPTIONAL { <ID> foaf:homepage ?url }\n  } UNION {\n    {\n      <ID> dcterms:rightsHolder ?rightsHolders\n    } UNION {\n      <ID> fibra:qualifiedAssertion ?qa .\n      <ID> rdf:predicate dcterms:rightsHolder .\n      <ID> rdf:object ?rightsHolders .\n      OPTIONAL { <ID> fibra:order ?rightsHolders_order }\n    }\n    {\n      ?rightsHolders skos:prefLabel ?rightsHolders_labels\n    } UNION {\n      ?rightsHolders foaf:homepage ?rightsHolders_url\n    } UNION {\n      ?rightsHolders dcterms:description ?rightsHolders_descriptions\n    }\n  }\n# ENDGRAPH\n}"},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=r(117),o=n(i),s=r(116),a=n(s),u="function"==typeof a.default&&"symbol"==typeof o.default?function(e){return typeof e}:function(e){return e&&"function"==typeof a.default&&e.constructor===a.default&&e!==a.default.prototype?"symbol":typeof e};t.default="function"==typeof a.default&&"symbol"===u(o.default)?function(e){return void 0===e?"undefined":u(e)}:function(e){return e&&"function"==typeof a.default&&e.constructor===a.default&&e!==a.default.prototype?"symbol":void 0===e?"undefined":u(e)}},function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t){e.exports=!0},function(e,t,r){var n=r(24),i=r(141),o=r(45),s=r(50)("IE_PROTO"),a=function(){},u=function(){var e,t=r(75)("iframe"),n=o.length;for(t.style.display="none",r(134).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;n--;)delete u.prototype[o[n]];return u()};e.exports=Object.create||function(e,t){var r;return null!==e?(a.prototype=n(e),r=new a,a.prototype=null,r[s]=e):r=u(),void 0===t?r:i(r,t)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,r){var n=r(16).f,i=r(15),o=r(11)("toStringTag");e.exports=function(e,t,r){e&&!i(e=r?e:e.prototype,o)&&n(e,o,{configurable:!0,value:t})}},function(e,t,r){var n=r(51)("keys"),i=r(37);e.exports=function(e){return n[e]||(n[e]=i(e))}},function(e,t,r){var n=r(10),i=n["__core-js_shared__"]||(n["__core-js_shared__"]={});e.exports=function(e){return i[e]||(i[e]={})}},function(e,t){var r=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:r)(e)}},function(e,t,r){var n=r(29);e.exports=function(e,t){if(!n(e))return e;var r,i;if(t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;if("function"==typeof(r=e.valueOf)&&!n(i=r.call(e)))return i;if(!t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,r){var n=r(10),i=r(3),o=r(46),s=r(55),a=r(16).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||a(t,e,{value:s.f(e)})}},function(e,t,r){t.f=r(11)},function(e,t){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function i(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!i(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,r,i,a,u,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(r=this._events[e],s(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),r.apply(this,a)}else if(o(r))for(a=Array.prototype.slice.call(arguments,1),l=r.slice(),i=l.length,u=0;u<i;u++)l[u].apply(this,a);return!0},r.prototype.addListener=function(e,t){var i;if(!n(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(i=s(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function r(){this.removeListener(e,r),i||(i=!0,t.apply(this,arguments))}if(!n(t))throw TypeError("listener must be a function");var i=!1;return r.listener=t,this.on(e,r),this},r.prototype.removeListener=function(e,t){var r,i,s,a;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],s=r.length,i=-1,r===t||n(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(r)){for(a=s;a-- >0;)if(r[a]===t||r[a].listener&&r[a].listener===t){i=a;break}if(i<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],n(r))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){return this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,r){(function(t){function r(e){if(!(this instanceof r))return new r(e);if(e&&e.lineMode){this._tripleQuotedString=this._number=this._boolean=/$0^/;var t=this;this._tokenize=this.tokenize,this.tokenize=function(e,r){this._tokenize(e,function(e,n){!e&&/^(?:IRI|prefixed|literal|langcode|type|\.|eof)$/.test(n.type)?r&&r(e,n):r&&r(e||t._syntaxError(n.type,r=null))})}}}var n=String.fromCharCode,i="function"==typeof t?t:function(e){setTimeout(e,0)},o=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\[uU]|\\(.)/g,s={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},a=/[\x00-\x20<>\\"\{\}\|\^\`]/;r.prototype={_iri:/^<((?:[^>\\]|\\[uU])+)>/,_unescapedIri:/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>/,_unescapedString:/^"[^"\\]+"(?=[^"\\])/,_singleQuotedString:/^"[^"\\]*(?:\\.[^"\\]*)*"(?=[^"\\])|^'[^'\\]*(?:\\.[^'\\]*)*'(?=[^'\\])/,_tripleQuotedString:/^""("[^"\\]*(?:(?:\\.|"(?!""))[^"\\]*)*")""|^''('[^'\\]*(?:(?:\\.|'(?!''))[^'\\]*)*')''/,_langcode:/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,_prefix:/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,_prefixed:/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?=\.?[,;\s#()\[\]\{\}"'<])/,_blank:/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=\.?[,;:\s#()\[\]\{\}"'<])/,_number:/^[\-+]?(?:\d+\.?\d*([eE](?:[\-\+])?\d+)|\d*\.?\d+)(?=[.,;:\s#()\[\]\{\}"'<])/,_boolean:/^(?:true|false)(?=[.,;:\s#()\[\]\{\}"'<])/,_keyword:/^@[a-z]+(?=[\s#<:])/,_sparqlKeyword:/^(?:PREFIX|BASE|GRAPH)(?=[\s#<:])/i,_shortPredicates:/^a(?=\s+|<)/,_newline:/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,_whitespace:/^[ \t]+/,_endOfFile:/^(?:#[^\n\r]*)?$/,_tokenizeToEnd:function(e,t){function r(t){e(t._syntaxError(/^\S*/.exec(n)[0]))}for(var n=this._input;;){for(var i;i=this._newline.exec(n);)n=n.substr(i[0].length,n.length),this._line++;if((i=this._whitespace.exec(n))&&(n=n.substr(i[0].length,n.length)),this._endOfFile.test(n))return t&&e(n=null,{line:this._line,type:"eof",value:"",prefix:""}),this._input=n;var o,s=this._line,u="",l="",c="",f=n[0],p=null,h=0,d=!1;switch(f){case"^":if(1===n.length)break;if("^"!==n[1])return r(this);if(this._prevTokenType="^",n=n.substr(2),"<"!==n[0]){d=!0;break}case"<":if(p=this._unescapedIri.exec(n))u="IRI",l=p[1];else if(p=this._iri.exec(n)){if(null===(o=this._unescape(p[1]))||a.test(o))return r(this);u="IRI",l=o}break;case"_":((p=this._blank.exec(n))||t&&(p=this._blank.exec(n+" ")))&&(u="prefixed",c="_",l=p[1]);break;case'"':case"'":if(p=this._unescapedString.exec(n))u="literal",l=p[0];else if(p=this._singleQuotedString.exec(n)){if(null===(o=this._unescape(p[0])))return r(this);u="literal",l=o.replace(/^'|'$/g,'"')}else if(p=this._tripleQuotedString.exec(n)){if(o=p[1]||p[2],this._line+=o.split(/\r\n|\r|\n/).length-1,null===(o=this._unescape(o)))return r(this);u="literal",l=o.replace(/^'|'$/g,'"')}break;case"@":"literal"===this._prevTokenType&&(p=this._langcode.exec(n))?(u="langcode",l=p[1]):(p=this._keyword.exec(n))&&(u=p[0]);break;case".":if(1===n.length?t:n[1]<"0"||n[1]>"9"){u=".",h=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(p=this._number.exec(n))&&(u="literal",l='"'+p[0]+'"^^http://www.w3.org/2001/XMLSchema#'+(p[1]?"double":/^[+\-]?\d+$/.test(p[0])?"integer":"decimal"));break;case"B":case"b":case"p":case"P":case"G":case"g":(p=this._sparqlKeyword.exec(n))?u=p[0].toUpperCase():d=!0;break;case"f":case"t":(p=this._boolean.exec(n))?(u="literal",l='"'+p[0]+'"^^http://www.w3.org/2001/XMLSchema#boolean'):d=!0;break;case"a":(p=this._shortPredicates.exec(n))?(u="abbreviation",l="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"):d=!0;break;case",":case";":case"[":case"]":case"(":case")":case"{":case"}":h=1,u=f;break;default:d=!0}if(d&&("@prefix"!==this._prevTokenType&&"PREFIX"!==this._prevTokenType||!(p=this._prefix.exec(n))?((p=this._prefixed.exec(n))||t&&(p=this._prefixed.exec(n+" ")))&&(u="prefixed",c=p[1]||"",l=this._unescape(p[2])):(u="prefix",l=p[1]||"")),"^"===this._prevTokenType&&(u="IRI"===u||"prefixed"===u?"type":""),!u)return t||!/^'''|^"""/.test(n)&&/\n|\r/.test(n)?r(this):this._input=n;e(null,{line:s,type:u,value:l,prefix:c}),this._prevTokenType=u,n=n.substr(h||p[0].length,n.length)}},_unescape:function(e){try{return e.replace(o,function(e,t,r,i){var o;if(t){if(o=parseInt(t,16),isNaN(o))throw new Error;return n(o)}if(r){if(o=parseInt(r,16),isNaN(o))throw new Error;return o<=65535?n(o):n(55296+(o-=65536)/1024,56320+(1023&o))}var a=s[i];if(!a)throw new Error;return a})}catch(e){return null}},_syntaxError:function(e){return this._input=null,new Error('Syntax error: unexpected "'+e+'" on line '+this._line+".")},tokenize:function(e,t){function r(e){null!==o._input&&(o._input+=e,o._tokenizeToEnd(t,!1))}function n(){null!==o._input&&o._tokenizeToEnd(t,!0)}var o=this;this._line=1,"string"==typeof e?(this._input=e,i(function(){o._tokenizeToEnd(t,!0)})):(this._input="",e&&"function"!=typeof e?("function"==typeof e.setEncoding&&e.setEncoding("utf8"),e.on("data",r),e.on("end",n)):(this.addChunk=r,this.end=n,t||(t=e)))}},e.exports=r}).call(t,r(39).setImmediate)},function(e,t,r){function n(e){if(!(this instanceof n))return new n(e);this._tripleStack=[],this._graph=null,e=e||{},this._setBase(e.documentIRI);var t="string"==typeof e.format&&e.format.match(/\w*$/)[0].toLowerCase(),r="turtle"===t,s="trig"===t,a=/triple/.test(t),u=/quad/.test(t),l=a||u;(this._supportsNamedGraphs=!r)||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(r||s||a),l&&(this._base="",this._resolveIRI=function(e){return this._error("Disallowed relative IRI",e),this._callback=i,this._subject=null}),this._blankNodePrefix="string"!=typeof e.blankNodePrefix?"":"_:"+e.blankNodePrefix.replace(/^_:/,""),this._lexer=e.lexer||new o({lineMode:l})}function i(){}var o=r(57),s="http://www.w3.org/1999/02/22-rdf-syntax-ns#",a=s+"nil",u=s+"first",l=/^[a-z][a-z0-9+.-]*:/i,c=/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i,f=/(?:^|\/)\.\.?(?:$|[\/#?])/,p=0,h=0;n._resetBlankNodeIds=function(){p=h=0},n.prototype={_setBase:function(e){if(e){if(e.indexOf("#")>=0)throw new Error("Invalid base IRI "+e)}else e=null;(this._base=e)&&(this._basePath=e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(c),this._baseRoot=e[0],this._baseScheme=e[1])},_readInTopContext:function(e){switch(e.type){case"eof":return null!==this._graph?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"@prefix":return this._sparqlStyle=!1,this._readPrefix;case"PREFIX":return this._sparqlStyle=!0,this._readPrefix;case"@base":return this._sparqlStyle=!1,this._readBaseIRI;case"BASE":return this._sparqlStyle=!0,this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}},_readSubject:function(e){switch(this._predicate=null,e.type){case"IRI":null===this._base||l.test(e.value)?this._subject=e.value:this._subject=this._resolveIRI(e);break;case"prefixed":var t=this._prefixes[e.prefix];if(void 0===t)return this._error('Undefined prefix "'+e.prefix+':"',e);this._subject=t+e.value;break;case"[":return this._subject="_:b"+h++,this._tripleStack.push({subject:this._subject,predicate:null,object:null,type:"blank"}),this._readBlankNodeHead;case"(":return this._tripleStack.push({subject:a,predicate:null,object:null,type:"list"}),this._subject=null,this._readListItem;case"}":return this._readPunctuation(e);default:return this._error("Expected subject but got "+e.type,e)}return this._readPredicateOrNamedGraph},_readPredicate:function(e){var t=e.type;switch(t){case"IRI":case"abbreviation":null===this._base||l.test(e.value)?this._predicate=e.value:this._predicate=this._resolveIRI(e);break;case"prefixed":if("_"===e.prefix)return this._error("Disallowed blank node as predicate",e);var r=this._prefixes[e.prefix];if(void 0===r)return this._error('Undefined prefix "'+e.prefix+':"',e);this._predicate=r+e.value;break;case".":case"]":case"}":return null===this._predicate?this._error("Unexpected "+t,e):(this._subject=null,"]"===t?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return this._readPredicate;default:return this._error('Expected predicate to follow "'+this._subject+'"',e)}return this._readObject},_readObject:function(e){switch(e.type){case"IRI":null===this._base||l.test(e.value)?this._object=e.value:this._object=this._resolveIRI(e);break;case"prefixed":var t=this._prefixes[e.prefix];if(void 0===t)return this._error('Undefined prefix "'+e.prefix+':"',e);this._object=t+e.value;break;case"literal":return this._object=e.value,this._readDataTypeOrLang;case"[":var r="_:b"+h++;return this._tripleStack.push({subject:this._subject,predicate:this._predicate,object:r,type:"blank"}),this._subject=r,this._readBlankNodeHead;case"(":return this._tripleStack.push({subject:this._subject,predicate:this._predicate,object:a,type:"list"}),this._subject=null,this._readListItem;default:return this._error('Expected object to follow "'+this._predicate+'"',e)}return this._getTripleEndReader()},_readPredicateOrNamedGraph:function(e){return"{"===e.type?this._readGraph(e):this._readPredicate(e)},_readGraph:function(e){return"{"!==e.type?this._error("Expected graph but got "+e.type,e):(this._graph=this._subject,this._subject=null,this._readSubject)},_readBlankNodeHead:function(e){return"]"===e.type?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))},_readBlankNodeTail:function(e){if("]"!==e.type)return this._readBlankNodePunctuation(e);null!==this._subject&&this._callback(null,{subject:this._subject,predicate:this._predicate,object:this._object,graph:this._graph||""});var t=this._tripleStack.pop();return this._subject=t.subject,null!==t.object?(this._predicate=t.predicate,this._object=t.object,this._getTripleEndReader()):null!==this._predicate?this._readPredicate:this._readPredicateOrNamedGraph},_readDataTypeOrLang:function(e){switch(e.type){case"type":var t;if(""===e.prefix)t=null===this._base||l.test(e.value)?e.value:this._resolveIRI(e);else{var r=this._prefixes[e.prefix];if(void 0===r)return this._error('Undefined prefix "'+e.prefix+':"',e);t=r+e.value}return this._object+="^^"+t,this._getTripleEndReader();case"langcode":return this._object+="@"+e.value.toLowerCase(),this._getTripleEndReader();default:return this._getTripleEndReader().call(this,e)}},_readListItem:function(e){var t=null,r=null,n=this._subject,i=this._tripleStack,o=i[i.length-1],s=this._readListItem;switch(e.type){case"IRI":t=null===this._base||l.test(e.value)?e.value:this._resolveIRI(e);break;case"prefixed":var c=this._prefixes[e.prefix];if(void 0===c)return this._error('Undefined prefix "'+e.prefix+':"',e);t=c+e.value;break;case"literal":t=e.value,s=this._readDataTypeOrLang;break;case"[":r="_:b"+h++,t="_:b"+h++,i.push({subject:r,predicate:u,object:t,type:"blank"}),this._subject=t,s=this._readBlankNodeHead;break;case"(":r="_:b"+h++,i.push({subject:r,predicate:u,object:a,type:"list"}),this._subject=null,s=this._readListItem;break;case")":if(i.pop(),0!==i.length&&"list"===i[i.length-1].type&&this._callback(null,{subject:o.subject,predicate:o.predicate,object:o.object,graph:this._graph||""}),this._subject=o.subject,null===o.predicate){if(s=this._readPredicate,o.subject===a)return s}else if(this._predicate=o.predicate,this._object=o.object,s=this._getTripleEndReader(),o.object===a)return s;r=a;break;default:return this._error('Expected list item instead of "'+e.type+'"',e)}return null===r&&(this._subject=r="_:b"+h++),null===n?o.object===a?o.object=r:o.subject=r:this._callback(null,{subject:n,predicate:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest",object:r,graph:this._graph||""}),null!==t&&this._callback(null,{subject:r,predicate:u,object:t,graph:this._graph||""}),s},_readPunctuation:function(e){var t,r=this._subject,n=this._graph;switch(e.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",e);this._graph=null;case".":this._subject=null,t=this._readInTopContext;break;case";":t=this._readPredicate;break;case",":t=this._readObject;break;case"IRI":if(this._supportsQuads&&null===this._graph){n=null===this._base||l.test(e.value)?e.value:this._resolveIRI(e),r=this._subject,t=this._readQuadPunctuation;break}case"prefixed":if(this._supportsQuads&&null===this._graph){var i=this._prefixes[e.prefix];if(void 0===i)return this._error('Undefined prefix "'+e.prefix+':"',e);n=i+e.value,t=this._readQuadPunctuation;break}default:return this._error('Expected punctuation to follow "'+this._object+'"',e)}return null!==r&&this._callback(null,{subject:r,predicate:this._predicate,object:this._object,graph:n||""}),t},_readBlankNodePunctuation:function(e){var t;switch(e.type){case";":t=this._readPredicate;break;case",":t=this._readObject;break;default:return this._error('Expected punctuation to follow "'+this._object+'"',e)}return this._callback(null,{subject:this._subject,predicate:this._predicate,object:this._object,graph:this._graph||""}),t},_readQuadPunctuation:function(e){return"."!==e.type?this._error("Expected dot to follow quad",e):this._readInTopContext},_readPrefix:function(e){return"prefix"!==e.type?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)},_readPrefixIRI:function(e){if("IRI"!==e.type)return this._error('Expected IRI to follow prefix "'+this._prefix+':"',e);var t;return t=null===this._base||l.test(e.value)?e.value:this._resolveIRI(e),this._prefixes[this._prefix]=t,this._prefixCallback(this._prefix,t),this._readDeclarationPunctuation},_readBaseIRI:function(e){if("IRI"!==e.type)return this._error("Expected IRI to follow base declaration",e);try{this._setBase(null===this._base||l.test(e.value)?e.value:this._resolveIRI(e))}catch(t){this._error(t.message,e)}return this._readDeclarationPunctuation},_readNamedGraphLabel:function(e){switch(e.type){case"IRI":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}},_readNamedGraphBlankLabel:function(e){return"]"!==e.type?this._error("Invalid graph label",e):(this._subject="_:b"+h++,this._readGraph)},_readDeclarationPunctuation:function(e){return this._sparqlStyle?this._readInTopContext(e):"."!==e.type?this._error("Expected declaration to end with a dot",e):this._readInTopContext},_getTripleEndReader:function(){var e=this._tripleStack;if(0===e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem}},_error:function(e,t){this._callback(new Error(e+" at line "+t.line+"."))},_resolveIRI:function(e){var t=e.value;switch(t[0]){case void 0:return this._base;case"#":return this._base+t;case"?":return this._base.replace(/(?:\?.*)?$/,t);case"/":return("/"===t[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(t);default:return this._removeDotSegments(this._basePath+t)}},_removeDotSegments:function(e){if(!f.test(e))return e;for(var t="",r=e.length,n=-1,i=-1,o=0,s="/";n<r;){switch(s){case":":if(i<0&&"/"===e[++n]&&"/"===e[++n])for(;(i=n+1)<r&&"/"!==e[i];)n=i;break;case"?":case"#":n=r;break;case"/":if("."===e[n+1])switch(s=e[++n+1]){case"/":t+=e.substring(o,n-1),o=n+1;break;case void 0:case"?":case"#":return t+e.substring(o,n)+e.substr(n+1);case".":if(void 0===(s=e[++n+1])||"/"===s||"?"===s||"#"===s){if(t+=e.substring(o,n-2),(o=t.lastIndexOf("/"))>=i&&(t=t.substr(0,o)),"/"!==s)return t+"/"+e.substr(n+1);o=n+1}}}s=e[++n]}return t+e.substring(o)},parse:function(e,t,r){this._readCallback=this._readInTopContext,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix||"_:b"+p+++"_","function"==typeof e&&(r=t,t=e,e=null),this._callback=t||i,this._prefixCallback=r||i;var n=this;this._lexer.tokenize(e,function(e,t){null!==e?(n._callback(e),n._callback=i):void 0!==n._readCallback&&(n._readCallback=n._readCallback(t))}),e||(this.addChunk=this._lexer.addChunk,this.end=this._lexer.end)}},e.exports=n},function(e,t){function r(e,t){for(var r in i)t?e.prototype[r]=n(i[r]):e[r]=i[r];return e}function n(e){return function(t){return e(this,t)}}var i={isIRI:function(e){if(!e)return e;var t=e[0];return'"'!==t&&"_"!==t},isLiteral:function(e){return e&&'"'===e[0]},isBlank:function(e){return e&&"_:"===e.substr(0,2)},getLiteralValue:function(e){var t=/^"([^]*)"/.exec(e);if(!t)throw new Error(e+" is not a literal");return t[1]},getLiteralType:function(e){var t=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(e);if(!t)throw new Error(e+" is not a literal");return t[1]||(t[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")},getLiteralLanguage:function(e){var t=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(e);if(!t)throw new Error(e+" is not a literal");return t[1]?t[1].toLowerCase():""},isPrefixedName:function(e){return e&&/^[^:\/"']*:[^:\/"']+$/.test(e)},expandPrefixedName:function(e,t){var r,n,i,o=/(?:^|"\^\^)([^:\/#"'\^_]*):[^\/]*$/.exec(e);return o&&(r=o[1],n=t[r],i=o.index),void 0===n?e:0===i?n+e.substr(r.length+1):e.substr(0,i+3)+n+e.substr(i+r.length+4)},createIRI:function(e){return e&&'"'===e[0]?i.getLiteralValue(e):e},createLiteral:function(e,t){if(!t)switch(typeof e){case"boolean":t="http://www.w3.org/2001/XMLSchema#boolean";break;case"number":if(isFinite(e)){t=e%1==0?"http://www.w3.org/2001/XMLSchema#integer":"http://www.w3.org/2001/XMLSchema#decimal";break}default:return'"'+e+'"'}return'"'+e+(/^[a-z]+(-[a-z0-9]+)*$/i.test(t)?'"@'+t.toLowerCase():'"^^'+t)},prefix:function(e){return i.prefixes({"":e})("")},prefixes:function(e){function t(e,t){if(t||!(e in r)){var n=Object.create(null);t=t||"",r[e]=function(e){return n[e]||(n[e]=t+e)}}return r[e]}var r=Object.create(null);for(var n in e)t(n,e[n]);return t}};e.exports=r(r)},function(e,t){function r(e,t){if(!(this instanceof r))return new r(e,t);if(e&&"function"!=typeof e.write&&(t=e,e=null),t=t||{},e)this._outputStream=e,this._endStream=void 0===t.end||!!t.end;else{var n="";this._outputStream={write:function(e,t,r){n+=e,r&&r()},end:function(e){e&&e(null,n)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(t.format)?this._writeTriple=this._writeTripleLine:(this._graph="",this._prefixIRIs=Object.create(null),t.prefixes&&this.addPrefixes(t.prefixes))}function n(e){var t=a[e];return void 0===t&&(1===e.length?(t=e.charCodeAt(0).toString(16),t="\\u0000".substr(0,6-t.length)+t):(t=(1024*(e.charCodeAt(0)-55296)+e.charCodeAt(1)+9216).toString(16),t="\\U00000000".substr(0,10-t.length)+t)),t}var i=/^"([^]*)"(?:\^\^(.+)|@([\-a-z]+))?$/i,o=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,s=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,a={"\\":"\\\\",'"':'\\"',"\t":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};r.prototype={_write:function(e,t){this._outputStream.write(e,"utf8",t)},_writeTriple:function(e,t,r,n,i){try{this._graph!==n&&(this._write((null===this._subject?"":this._graph?"\n}\n":".\n")+(n?this._encodeIriOrBlankNode(n)+" {\n":"")),this._subject=null,this._graph="["!==n[0]?n:"]"),this._subject===e?this._predicate===t?this._write(", "+this._encodeObject(r),i):this._write(";\n    "+this._encodePredicate(this._predicate=t)+" "+this._encodeObject(r),i):this._write((null===this._subject?"":".\n")+this._encodeSubject(this._subject=e)+" "+this._encodePredicate(this._predicate=t)+" "+this._encodeObject(r),i)}catch(e){i&&i(e)}},_writeTripleLine:function(e,t,r,n,i){delete this._prefixMatch;try{this._write(this._encodeIriOrBlankNode(e)+" "+this._encodeIriOrBlankNode(t)+" "+this._encodeObject(r)+(n?" "+this._encodeIriOrBlankNode(n)+".\n":".\n"),i)}catch(e){i&&i(e)}},_encodeIriOrBlankNode:function(e){var t=e[0];if("["===t||"("===t||"_"===t&&":"===e[1])return e;o.test(e)&&(e=e.replace(s,n));var r=this._prefixRegex.exec(e);return r?r[1]?this._prefixIRIs[r[1]]+r[2]:e:"<"+e+">"},_encodeLiteral:function(e,t,r){return o.test(e)&&(e=e.replace(s,n)),r?'"'+e+'"@'+r:t?'"'+e+'"^^'+this._encodeIriOrBlankNode(t):'"'+e+'"'},_encodeSubject:function(e){if('"'===e[0])throw new Error("A literal as subject is not allowed: "+e);return"["===e[0]&&(this._subject="]"),this._encodeIriOrBlankNode(e)},_encodePredicate:function(e){if('"'===e[0])throw new Error("A literal as predicate is not allowed: "+e);return"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"===e?"a":this._encodeIriOrBlankNode(e)},_encodeObject:function(e){if('"'!==e[0])return this._encodeIriOrBlankNode(e);var t=i.exec(e);if(!t)throw new Error("Invalid literal: "+e);return this._encodeLiteral(t[1],t[2],t[3])},_blockedWrite:function(){throw new Error("Cannot write because the writer has been closed.")},addTriple:function(e,t,r,n,i){void 0===r?this._writeTriple(e.subject,e.predicate,e.object,e.graph||"",t):"string"!=typeof n?this._writeTriple(e,t,r,"",n):this._writeTriple(e,t,r,n,i)},addTriples:function(e){for(var t=0;t<e.length;t++)this.addTriple(e[t])},addPrefix:function(e,t,r){var n={};n[e]=t,this.addPrefixes(n,r)},addPrefixes:function(e,t){var r=this._prefixIRIs,n=!1;for(var i in e){var o=e[i];/[#\/]$/.test(o)&&r[o]!==(i+=":")&&(n=!0,r[o]=i,null!==this._subject&&(this._write(this._graph?"\n}\n":".\n"),this._subject=null,this._graph=""),this._write("@prefix "+i+" <"+o+">.\n"))}if(n){var s="",a="";for(var u in r)s+=s?"|"+u:u,a+=(a?"|":"")+r[u];s=s.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&"),this._prefixRegex=new RegExp("^(?:"+a+")[^/]*$|^("+s+")([a-zA-Z][\\-_a-zA-Z0-9]*)$")}this._write(n?"\n":"",t)},blank:function(e,t){var r,n,i=e;switch(void 0===e?i=[]:"string"==typeof e?i=[{predicate:e,object:t}]:"length"in e||(i=[e]),n=i.length){case 0:return"[]";case 1:if(r=i[0],"["!==r.object[0])return"[ "+this._encodePredicate(r.predicate)+" "+this._encodeObject(r.object)+" ]";default:for(var o="[",s=0;s<n;s++)r=i[s],r.predicate===e?o+=", "+this._encodeObject(r.object):(o+=(s?";\n  ":"\n  ")+this._encodePredicate(r.predicate)+" "+this._encodeObject(r.object),e=r.predicate);return o+"\n]"}},list:function(e){for(var t=e&&e.length||0,r=new Array(t),n=0;n<t;n++)r[n]=this._encodeObject(e[n]);return"("+r.join(" ")+")"},_prefixRegex:/$0^/,end:function(e){null!==this._subject&&(this._write(this._graph?"\n}\n":".\n"),this._subject=null),this._write=this._blockedWrite;var t=e&&function(r,n){t=null,e(r,n)};if(this._endStream)try{return this._outputStream.end(t)}catch(e){}t&&t()}},e.exports=r},function(e,t,r){"use strict";(function(t){function r(e,r,n,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var o,s,a=arguments.length;switch(a){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick(function(){e.call(null,r)});case 3:return t.nextTick(function(){e.call(null,r,n)});case 4:return t.nextTick(function(){e.call(null,r,n,i)});default:for(o=new Array(a-1),s=0;s<o.length;)o[s++]=arguments[s];return t.nextTick(function(){e.apply(null,o)})}}!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports=r:e.exports=t.nextTick}).call(t,r(5))},function(e,t,r){function n(e,t){this.name="NonSupportedSparqlFeatureError",this.feature=e,this.message=t||"SPARQL feature "+e+" non supported"}function i(e){this.name=ParserError,this.message=e||"Error parsing SPARQL query"}var o=r(171),s=r(0),a=s;n.prototype=new Error,n.constructor=n,i.prototype=new Error,i.constructor=i,AbstractQueryTree=function(){},AbstractQueryTree.prototype.parseQueryString=function(e){return o.parse(e)},AbstractQueryTree.prototype.parseExecutableUnit=function(e){if("select"===e.kind)return this.parseSelect(e);if("ask"===e.kind)return this.parseSelect(e);if("modify"===e.kind)return this.parseSelect(e);if("construct"===e.kind)return this.parseSelect(e);if("insertdata"===e.kind)return this.parseInsertData(e);if("deletedata"===e.kind)return this.parseInsertData(e);if("load"===e.kind)return e;if("clear"===e.kind)return e;if("drop"===e.kind)return e;if("create"===e.kind)return e;throw new Error("unknown executable unit: "+e.kind)},AbstractQueryTree.prototype.parseSelect=function(e){if(null==e)return console.log("error parsing query"),null;var t={freshCounter:0};return e.pattern=this.build(e.pattern,t),e},AbstractQueryTree.prototype.parseInsertData=function(e){return null==e?(console.log("error parsing query"),null):e},AbstractQueryTree.prototype.build=function(e,t){if("groupgraphpattern"===e.token)return this._buildGroupGraphPattern(e,t);if("basicgraphpattern"===e.token){var r={kind:"BGP",value:e.triplesContext};return r=AbstractQueryTree.translatePathExpressionsInBGP(r,t)}if("graphunionpattern"===e.token){return{kind:"UNION",value:[this.build(e.value[0],t),this.build(e.value[1],t)]}}if("graphgraphpattern"===e.token){return{kind:"GRAPH",value:this.build(e.value,t),graph:e.graph}}throw null!=e.token?new n(e.token,"Non implemented SPARQL graph pattern: '"+e.token+"'"):new i("Error parsing graph pattern: '"+JSON.stringify(e)+"'")},AbstractQueryTree.translatePathExpressionsInBGP=function(e,t){for(var r,n,i,o=[],s=0;s<e.value.length;s++)if(e.value[s].predicate&&"path"===e.value[s].predicate.token){r=e.value[s],n=e.value.slice(s+1);var u=AbstractQueryTree.translatePathExpression(r,t),l=null;if("BGP"!==u.kind){if("ZERO_OR_MORE_PATH"===u.kind||"ONE_OR_MORE_PATH"===u.kind){if(i=o.length>0?{kind:"JOIN",lvalue:{kind:"BGP",value:o},rvalue:u}:u,"ZERO_OR_MORE_PATH"===u.kind)if("var"===u.y.token&&0===u.y.value.indexOf("fresh:")&&"var"===u.x.token&&0===u.x.value.indexOf("fresh:"))for(var c=0;c<e.value.length;c++)e.value[c].object&&"var"===e.value[c].object.token&&e.value[c].object.value===u.x.value&&(l=a.clone(e.value[c],!0),l.object=u.y);else if("var"===u.y.token&&0===u.y.value.indexOf("fresh:"))for(var c=0;c<e.value.length;c++)e.value[c].subject&&"var"===e.value[c].subject.token&&e.value[c].subject.value===u.y.value&&(l=a.clone(e.value[c],!0),l.subject=u.x);if(n.length>0){var f=AbstractQueryTree.translatePathExpressionsInBGP({kind:"BGP",value:n},t);if(null!=l){var p=o.concat([l]).concat(n);return{kind:"UNION",value:[{kind:"JOIN",lvalue:i,rvalue:f},{kind:"BGP",value:p}]}}return{kind:"JOIN",lvalue:i,rvalue:f}}return i}return u}o=o.concat(u.value)}else o.push(e.value[s]);return e.value=o,e},AbstractQueryTree.translatePathExpression=function(e,t){if("element"===e.predicate.kind){if("+"===e.predicate.modifier){e.predicate.modifier=null;var r=AbstractQueryTree.translatePathExpression(e,t);return{kind:"ONE_OR_MORE_PATH",path:r,x:e.subject,y:e.object}}if("*"===e.predicate.modifier){e.predicate.modifier=null;var r=AbstractQueryTree.translatePathExpression(e,t);return{kind:"ZERO_OR_MORE_PATH",path:r,x:e.subject,y:e.object}}return e.predicate=e.predicate.value,{kind:"BGP",value:[e]}}if("sequence"===e.predicate.kind){for(var i,o,s=e.subject,u=e.object,l=e.graph,c=[],f=0;f<e.predicate.value.length;f++)f!=e.predicate.value.length-1?(i={token:"var",value:"fresh:"+t.freshCounter},t.freshCounter++):i=u,o={subject:s,predicate:e.predicate.value[f],object:i},null!=l&&(o.graph=a.clone(l,!0)),c.push(o),f!=e.predicate.value.length-1&&(s=a.clone(i,!0));var p={kind:"BGP",value:c};return AbstractQueryTree.translatePathExpressionsInBGP(p,t)}throw new n("Non supported path expression "+e.predicate.kind)},AbstractQueryTree.prototype._buildGroupGraphPattern=function(e,t){for(var r=e.filters||[],n=e.binds||[],i={kind:"EMPTY_PATTERN"},o=0;o<e.patterns.length;o++){var s=e.patterns[o];if("optionalgraphpattern"===s.token){var a=this.build(s.value,t);i="FILTER"===a.kind?{kind:"LEFT_JOIN",lvalue:i,rvalue:a.value,filter:a.filter}:{kind:"LEFT_JOIN",lvalue:i,rvalue:a,filter:!0}}else{var a=this.build(s,t);i="EMPTY_PATTERN"==i.kind?a:{kind:"JOIN",lvalue:i,rvalue:a}}}if(i.binds=n,0!=r.length){if("EMPTY_PATTERN"===i.kind)return{kind:"FILTER",filter:r,value:i};if("LEFT_JOIN"===i.kind&&!0===i.filter)return{kind:"FILTER",filter:r,value:i};if("LEFT_JOIN"===i.kind)return{kind:"FILTER",filter:r,value:i};if("JOIN"===i.kind)return{kind:"FILTER",filter:r,value:i};if("UNION"===i.kind)return{kind:"FILTER",filter:r,value:i};if("GRAPH"===i.kind)return{kind:"FILTER",filter:r,value:i};if("BGP"===i.kind)return{kind:"FILTER",filter:r,value:i};throw new Error("Unknow kind of algebra expression: "+i.kind)}return i},AbstractQueryTree.prototype.collectBasicTriples=function(e,t){if(null==t&&(t=[]),"select"===e.kind)t=this.collectBasicTriples(e.pattern,t);else if("BGP"===e.kind)t=t.concat(e.value);else if("ZERO_OR_MORE_PATH"===e.kind)t=this.collectBasicTriples(e.path);else if("UNION"===e.kind)t=this.collectBasicTriples(e.value[0],t),t=this.collectBasicTriples(e.value[1],t);else if("GRAPH"===e.kind)t=this.collectBasicTriples(e.value,t);else if("LEFT_JOIN"===e.kind||"JOIN"===e.kind)t=this.collectBasicTriples(e.lvalue,t),t=this.collectBasicTriples(e.rvalue,t);else if("FILTER"===e.kind)t=this.collectBasicTriples(e.value,t);else if("construct"===e.kind)t=this.collectBasicTriples(e.pattern,t);else if("EMPTY_PATTERN"!==e.kind)throw"Unknown pattern: "+e.kind;return t},AbstractQueryTree.prototype.bind=function(e,t){if(null!=e.graph&&e.graph.token&&"var"===e.graph.token&&null!=t[e.graph.value]&&(e.graph=t[e.graph.value]),null!=e.filter){for(var r=[],n=0;n<e.filter.length;n++)e.filter[n].value=this._bindFilter(e.filter[n].value,t),r.push(e.filter[n]);e.filter=r}if("select"===e.kind)e.pattern=this.bind(e.pattern,t);else if("BGP"===e.kind)e.value=this._bindTripleContext(e.value,t);else if("ZERO_OR_MORE_PATH"===e.kind)e.path=this._bindTripleContext(e.path,t),e.x&&"var"===e.x.token&&null!=t[e.x.value]&&(e.x=t[e.x.value]),e.y&&"var"===e.y.token&&null!=t[e.y.value]&&(e.y=t[e.y.value]);else if("UNION"===e.kind)e.value[0]=this.bind(e.value[0],t),e.value[1]=this.bind(e.value[1],t);else if("GRAPH"===e.kind)e.value=this.bind(e.value,t);else if("LEFT_JOIN"===e.kind||"JOIN"===e.kind)e.lvalue=this.bind(e.lvalue,t),e.rvalue=this.bind(e.rvalue,t);else if("FILTER"===e.kind){var i=this;e.value=this.bind(e.value,t),e.filter=e.filter.map(function(e){return{token:"filter",value:i._bindFilter(e.value,t)}})}else if("EMPTY_PATTERN"!==e.kind)throw"Unknown pattern: "+e.kind;return e},AbstractQueryTree.prototype._bindTripleContext=function(e,t){for(var r=0;r<e.length;r++){delete e[r].graph,delete e[r].variables;for(var n in e[r]){var i=e[r][n];"var"===i.token&&null!=t[i.value]&&(e[r][n]=t[i.value])}}return e},AbstractQueryTree.prototype._bindFilter=function(e,t){if(null!=e.expressionType){var r=e.expressionType;if("relationalexpression"==r)e.op1=this._bindFilter(e.op1,t),e.op2=this._bindFilter(e.op2,t);else if("conditionalor"==r||"conditionaland"==r)for(var n=0;n<e.operands.length;n++)e.operands[n]=this._bindFilter(e.operands[n],t);else if("additiveexpression"==r){e.summand=this._bindFilter(e.summand,t);for(var n=0;n<e.summands.length;n++)e.summands[n].expression=this._bindFilter(e.summands[n].expression,t)}else if("builtincall"==r)for(var n=0;n<e.args.length;n++)e.args[n]=this._bindFilter(e.args[n],t);else if("multiplicativeexpression"==r){e.factor=this._bindFilter(e.factor,t);for(var n=0;n<e.factors.length;n++)e.factors[n].expression=this._bindFilter(e.factors[n].expression,t)}else if("unaryexpression"==r)e.expression=this._bindFilter(e.expression,t);else if("irireforfunction"==r)for(var n=0;n<e.factors.args;n++)e.args[n]=this._bindFilter(e.args[n],t);else if("atomic"==r&&"var"==e.primaryexpression&&null!=t[e.value.value]){var i=t[e.value.value];"uri"===i.token?e.primaryexpression="iri":e.primaryexpression="literal",e.value=i}}return e},AbstractQueryTree.prototype.replace=function(e,t,r,n){if(null!=e.graph&&e.graph.token&&e.graph.token===t.token&&e.graph.value==t.value&&(e.graph=a.clone(r,!0)),null!=e.filter){for(var i=[],o=0;o<e.filter.length;o++)e.filter[o].value=this._replaceFilter(e.filter[o].value,t,r,n),i.push(e.filter[o]);e.filter=i}if("select"===e.kind)e.pattern=this.replace(e.pattern,t,r,n);else if("BGP"===e.kind)e.value=this._replaceTripleContext(e.value,t,r,n);else if("ZERO_OR_MORE_PATH"===e.kind)e.path=this._replaceTripleContext(e.path,t,r,n),e.x&&e.x.token===t.token&&e.value===t.value&&(e.x=a.clone(r,!0)),e.y&&e.y.token===t.token&&e.value===t.value&&(e.y=a.clone(r,!0));else if("UNION"===e.kind)e.value[0]=this.replace(e.value[0],t,r,n),e.value[1]=this.replace(e.value[1],t,r,n);else if("GRAPH"===e.kind)e.value=this.replace(e.value,t,r);else if("LEFT_JOIN"===e.kind||"JOIN"===e.kind)e.lvalue=this.replace(e.lvalue,t,r,n),e.rvalue=this.replace(e.rvalue,t,r,n);else if("FILTER"===e.kind)e.value=this._replaceFilter(e.value,t,r,n);else if("EMPTY_PATTERN"!==e.kind)throw"Unknown pattern: "+e.kind;return e},AbstractQueryTree.prototype._replaceTripleContext=function(e,t,r,n){for(var i=0;i<e.length;i++)for(var o in e[i]){var a=e[i][o];"var"===a.token&&"var"===t.token&&a.value===t.value?e[i][o]=r:"blank"===a.token&&"blank"===t.token&&a.value===t.value?e[i][o]=r:"literal"!==a.token&&"uri"!==a.token||"literal"!==t.token&&"uri"!==t.token||a.token!==t.token||s.lexicalFormTerm(a,n)[a.token]!==s.lexicalFormTerm(t,n)[a.token]||(e[i][o]=r)}return e},AbstractQueryTree.prototype._replaceFilter=function(e,t,r,n){if(null!=e.expressionType){var i=e.expressionType;if("relationalexpression"==i)e.op1=this._replaceFilter(e.op1,t,r,n),e.op2=this._replaceFilter(e.op2,t,r,n);else if("conditionalor"==i||"conditionaland"==i)for(var o=0;o<e.operands.length;o++)e.operands[o]=this._replaceFilter(e.operands[o],t,r,n);else if("additiveexpression"==i){e.summand=this._replaceFilter(e.summand,t,r,n);for(var o=0;o<e.summands.length;o++)e.summands[o].expression=this._replaceFilter(e.summands[o].expression,t,r,n)}else if("builtincall"==i)for(var o=0;o<e.args.length;o++)e.args[o]=this._replaceFilter(e.args[o],t,r,n);else if("multiplicativeexpression"==i){e.factor=this._replaceFilter(e.factor,t,r,n);for(var o=0;o<e.factors.length;o++)e.factors[o].expression=this._replaceFilter(e.factors[o].expression,t,r,n)}else if("unaryexpression"==i)e.expression=this._replaceFilter(e.expression,t,r,n);else if("irireforfunction"==i)for(var o=0;o<e.factors.args;o++)e.args[o]=this._replaceFilter(e.args[o],t,r,n);else if("atomic"==i){var s=null;e.primaryexpression==t.token&&e.value==t.value?s=r.value:"iri"==e.primaryexpression&&"uri"==t.token&&e.value==t.value&&(s=r.value),null!=s&&("uri"===r.token?e.primaryexpression="iri":e.primaryexpression=r.token,e.value=s)}}return e},AbstractQueryTree.prototype.treeWithUnion=function(e){if(null==e)return!1;if(null==e.kind)return!1;if("select"===e.kind)return this.treeWithUnion(e.pattern);if("BGP"===e.kind)return this.treeWithUnion(e.value);if("ZERO_OR_MORE_PATH"===e.kind)return!1;if("UNION"===e.kind){if(null==e.value[0].value||null==e.value[0].value.variables||null==e.value[1].value||null==e.value[1].value.variables)return!0;if(e.value[0].variables.join("/")===e.values[1].variables.join("/"))return!!this.treeWithUnion(e.value[0])||this.treeWithUnion(e.value[1])}else{if("GRAPH"===e.kind)return!1;if("LEFT_JOIN"!==e.kind&&"JOIN"!==e.kind)return"FILTER"!==e.kind&&(e.kind,!1);if(this.treeWithUnion(e.lvalue))return!0;this.treeWithUnion(e.rvalue)}},e.exports={AbstractQueryTree:AbstractQueryTree,NonSupportedSparqlFeatureError:n,SparqlParserError:i}},function(e,t,r){"use strict";var n=r(0),i=n,o=n.nextTick,s=function(e,t){if(0!=arguments.length){this.order=e,this.root=this._allocateNode(),this.root.isLeaf=!0,this.root.level=0;var r=this;this._diskWrite(this.root,function(e){r.root=e,r._updateRootNode(r.root,function(e){r.comparator=function(e,t){return e<t?-1:e>t?1:0},r.merger=null,null!=t&&t(r)})})}};s.prototype._allocateNode=function(){return new a},s.prototype._diskWrite=function(e,t){o(function(){t(e)})},s.prototype._diskRead=function(e,t){o(function(){t(e)})},s.prototype._diskDelete=function(e,t){o(function(){t()})},s.prototype._updateRootNode=function(e,t){t(e)},s.prototype.search=function(e,t,r){var n=this.root,i=this;i.__search(i,e,n,t,r)},s.prototype.__search=function(e,t,r,n,i){for(var o=0;o<r.numberActives&&1===e.comparator(t,r.keys[o].key);)o++;o<r.numberActives&&0===e.comparator(r.keys[o].key,t)?n(null!=i&&1==i?!0:r.keys[o].data):!0===r.isLeaf?n(null):e._diskRead(r.children[o],function(r){e.__search(e,t,r,n,i)})},s.prototype.walk=function(e,t){this.__walk(this,this.root,e,t)},s.prototype.__walk=function(e,t,r,n){var o=t.numberActives,s=0;if(t.isLeaf){for(s=0;s<t.numberActives;s++)r(t.keys[s]);return n()}i.whilst(function(){return s<o},function(n){e._diskRead(t.children[s],function(i){e.__walk(e,i,r,function(){e._diskRead(t.keys[s],function(e){r(e),s++,n()})})})},function(){e._diskRead(t.children[o],function(t){e.__walk(e,t,r,function(){n()})})})},s.prototype.walkNodes=function(e){this.__walkNodes(this,root,e,function(){})},s.prototype.__walkNodes=function(e,t,r,n){if(t.isLeaf)return r(t),n();r(t);var o=t.numberActives,s=0;i.whilst(function(){return s<o},function(n){e._diskRead(t.children[s],function(t){e.__walkNodes(e,t,r,function(){s++,n()})})},function(){e._diskRead(t.children[o],function(t){e.__walkNodes(e,t,r,function(){})})})},s.prototype._splitChild=function(e,t,r,n){var i=this._allocateNode();i.isLeaf=r.isLeaf,i.level=r.level,i.numberActives=this.order-1;var o=r.keys[this.order-1];r.keys[this.order-1]=null;for(var s=0;s<this.order-1;s++)i.keys[s]=r.keys[s+this.order],r.keys[s+this.order]=null,r.isLeaf||(i.children[s]=r.children[s+this.order],r.children[s+this.order]=null);for(r.isLeaf||(i.children[s]=r.children[s+this.order],r.children[s+this.order]=null),r.numberActives=this.order-1,s=e.numberActives+1;s>t+1;s--)e.children[s]=e.children[s-1];for(e.children[t+1]=i,s=e.numberActives;s>t;s--)e.keys[s]=e.keys[s-1];e.keys[t]=o,e.numberActives++;var a=this;this._diskWrite(i,function(i){a._diskWrite(e,function(e){e.children[t+1]=i,a._diskWrite(r,function(t){return n(e)})})})},s.prototype.insert=function(e,t,r){if(this.root.numberActives===2*this.order-1){var n=this._allocateNode();n.isLeaf=!1,n.level=this.root.level+1,n.numberActives=0,n.children[0]=this.root;var i=this;this._splitChild(n,0,this.root,function(o){n=o,i.root=n,i._updateRootNode(n,function(n){i._insertNonFull(n,e,t,r)})})}else this._insertNonFull(this.root,e,t,r)},s.prototype._insertNonFull=function(e,t,r,n){var i=e.numberActives-1;this.__insertNonFull(this,e,i,t,r,n)},s.prototype.__insertNonFull=function(e,t,r,n,i,o){if(t.isLeaf){for(;r>=0&&-1===e.comparator(n,t.keys[r].key);)t.keys[r+1]=t.keys[r],r--;r>=0&&0===e.comparator(n,t.keys[r].key)?t.keys[r]={key:n,data:i}:(t.keys[r+1]={key:n,data:i},t.numberActives++),e._diskWrite(t,function(e){return o(e)})}else{for(;r>=0&&-1===e.comparator(n,t.keys[r].key);)r--;r++;var s=e;e._diskRead(t.children[r],function(a){a.numberActives===2*s.order-1?s._splitChild(t,r,a,function(){1===s.comparator(n,t.keys[r].key)&&r++,s._diskRead(t.children[r],function(t){r=t.numberActives-1,s.__insertNonFull(e,t,r,n,i,o)})}):s._diskRead(t.children[r],function(t){r=t.numberActives-1,s.__insertNonFull(e,t,r,n,i,o)})})}},s.prototype.delete=function(e,t){var r=this.root;s.prototype.__deleteSearchNode(this,e,r,t)},s.prototype.__deleteSearchNode=function(e,t,r,n){var i=0;if(0===r.numberActives)return n(!1);for(;i<r.numberActives&&1===e.comparator(t,r.keys[i].key);)i++;var o=i;if(i<r.numberActives&&0===e.comparator(t,r.keys[i].key))return e.__deleteNodeFound(e,o,t,r,n);if(!0===r.isLeaf)return n(!1);var s=r;e._diskRead(r.children[i],function(r){if(null===r)return n(!1);var a=!1,u=!1,l=null,c=null;o===s.numberActives?(u=!0,c=s.children[o-1],l=s.children[o-1]):0===o?(a=!0,l=s.children[1],c=s.children[1]):(c=s.children[o-1],l=s.children[o+1]),e._diskRead(c,function(o){e._diskRead(l,function(l){!0===u&&(l=null),!0===a&&(o=null),r.numberActives===e.order-1&&null!=s?null!=l&&l.numberActives>e.order-1?e._moveKey(s,i,-1,function(i){e.__deleteSearchNode(e,t,r,n)}):null!=o&&o.numberActives>e.order-1?e._moveKey(s,i,1,function(i){e.__deleteSearchNode(e,t,r,n)}):null!=o&&o.numberActives===e.order-1?e._mergeSiblings(s,i,-1,function(r){e.__deleteSearchNode(e,t,r,n)}):null!=l&&l.numberActives===e.order-1&&e._mergeSiblings(s,i,1,function(r){e.__deleteSearchNode(e,t,r,n)}):e.__deleteSearchNode(e,t,r,n)})})})},s.prototype.__deleteNodeFound=function(e,t,r,n,i){return n.isLeaf&&n.numberActives>e.order-1?(e._deleteKeyFromNode(n,t,function(){i(!0)}),!0):n.isLeaf&&n===e.root?(e._deleteKeyFromNode(n,t,function(){i(!0)}),!0):(!1===n.isLeaf&&e._diskRead(n.children[t],function(o){o.numberActives>e.order-1?e._getMaxKeyPos(e,o,function(s){r=s.node.keys[s.index],n.keys[t]=r,e._diskWrite(n,function(t){t=o,r=r.key,e.__deleteSearchNode(e,r,t,i)})}):e._diskRead(n.children[t+1],function(s){s.numberActives>e.order-1?e._getMinKeyPos(e,s,function(o){r=o.node.keys[o.index],n.keys[t]=r,e._diskWrite(n,function(t){t=s,r=r.key,e.__deleteSearchNode(e,r,t,i)})}):o.numberActives===e.order-1&&s.numberActives===e.order-1&&e._mergeNodes(o,n.keys[t],s,function(o){n.children[t]=o,t++;for(var s=t;s<n.numberActives;s++)n.children[s]=n.children[s+1],n.keys[s-1]=n.keys[s];n.children[s]=null,n.keys[s-1]=null,n.numberActives--,0===n.numberActives&&e.root===n&&(e.root=o),e._diskWrite(n,function(t){e.__deleteSearchNode(e,r,o,i)})})})}),void(n.isLeaf&&n.numberActives>e.order-1&&e._deleteKeyFromNode(n,t,function(t){e.__deleteSearchNode(e,r,t,i)})))},s.prototype._moveKey=function(e,t,r,n){1===r&&t--;var i=this;i._diskRead(e.children[t],function(o){i._diskRead(e.children[t+1],function(s){if(-1==r){o.keys[o.numberActives]=e.keys[t],o.children[o.numberActives+1]=s.children[0],s.children[0]=null,o.numberActives++,e.keys[t]=s.keys[0];for(var a=1;a<s.numberActives;a++)s.keys[a-1]=s.keys[a],s.children[a-1]=s.children[a];s.children[s.numberActives-1]=s.children[s.numberActives],s.numberActives--}else{s.children[s.numberActives+1]=s.children[s.numberActives];for(var a=s.numberActives;a>0;a--)s.children[a]=s.children[a-1],s.keys[a]=s.keys[a-1];s.keys[0]=null,s.children[0]=null,s.children[0]=o.children[o.numberActives],s.keys[0]=e.keys[t],s.numberActives++,o.children[o.numberActives]=null,e.keys[t]=o.keys[o.numberActives-1],o.keys[o.numberActives-1]=null,o.numberActives--}i._diskWrite(o,function(t){i._diskWrite(s,function(t){i._diskWrite(e,function(e){return n(e)})})})})})},s.prototype._mergeSiblings=function(e,t,r,n){var i,o,s,a;t===e.numberActives?(t--,s=e.children[e.numberActives-1],a=e.children[e.numberActives]):(s=e.children[t],a=e.children[t+1]);var u=this;u._diskRead(s,function(r){u._diskRead(a,function(s){var a=u._allocateNode();for(a.isLeaf=r.isLeaf,a.level=r.level,o=0;o<u.order-1;o++)a.keys[o]=r.keys[o],a.children[o]=r.children[o];for(a.keys[u.order-1]=e.keys[t],a.children[u.order-1]=r.children[u.order-1],o=0;o<u.order-1;o++)a.keys[o+u.order]=s.keys[o],a.children[o+u.order]=s.children[o];for(a.children[2*u.order-1]=s.children[u.order-1],e.children[t]=a,o=t;o<e.numberActives;o++)e.keys[o]=e.keys[o+1],e.children[o+1]=e.children[o+2];for(a.numberActives=r.numberActives+s.numberActives+1,e.numberActives--,i=e.numberActives;i<2*u.order-1;i++)e.keys[i]=null;0===e.numberActives&&u.root===e&&(u.root=a,a.level?a.isLeaf=!1:a.isLeaf=!0),u._diskWrite(a,function(t){u._diskWrite(e,function(e){u._diskDelete(r,function(){u._diskDelete(s,function(){if(u.root!==t)return n(t);u._updateRootNode(u.root,function(){return n(t)})})})})})})})},s.prototype._deleteKeyFromNode=function(e,t,r){var n=2*this.order-1;e.numberActives<n&&(n=e.numberActives);var i;if(!1===e.isLeaf)return!1;e.keys[t];for(i=t;i<n-1;i++)e.keys[i]=e.keys[i+1];e.keys.pop(),e.numberActives--,this._diskWrite(e,function(e){return r(e)})},s.prototype._mergeNodes=function(e,t,r,n){var i,o;for(i=this._allocateNode(),i.isLeaf=!0,o=0;o<e.numberActives;o++)i.keys[o]=e.keys[o],i.children[o]=e.children[o];for(i.children[e.numberActives]=e.children[e.numberActives],i.keys[e.numberActives]=t,o=0;o<r.numberActives;o++)i.keys[o+e.numberActives+1]=r.keys[o],i.children[o+e.numberActives+1]=r.children[o];i.children[2*this.order-1]=r.children[r.numberActives],i.numberActives=e.numberActives+r.numberActives+1,i.isLeaf=e.isLeaf,i.level=e.level;var s=this;this._diskWrite(i,function(t){s._diskDelete(e,function(){s._diskDelete(r,function(){return n(t)})})})},s.prototype.audit=function(e){var t=[],r=[],n=this,i=function(i){for(var o=0;o<r.length;o++)if(0===n.comparator(r[o],i)){var s=" !!! duplicated key "+i;!0===e&&console.log(s),t.push(s)}},o=null,n=this;return this.walkNodes(function(s){!0===e&&(console.log("--- Node at "+s.level+" level"),console.log(" - leaf? "+s.isLeaf),console.log(" - num actives? "+s.numberActives),console.log(" - keys: "));for(var a=s.numberActives;a<s.keys.length;a++)null!=s.keys[a]&&!0===e&&(console.log(" * warning : redundant key data"),t.push(" * warning : redundant key data"));for(var a=s.numberActives+1;a<s.children.length;a++)null!=s.children[a]&&!0===e&&(console.log(" * warning : redundant children data"),t.push(" * warning : redundant key data"));if(!1===s.isLeaf)for(var a=0;a<s.numberActives;a++){var u=this._diskRead(s.children[a]).keys[this._diskRead(s.children[a]).numberActives-1].key,l=this._diskRead(s.children[a+1]).keys[0].key;if(!0===e&&console.log("   "+s.keys[a].key+"("+u+","+l+")"),-1===n.comparator(s.keys[a].key,u)){var c=" !!! value max left "+u+" > key "+s.keys[a].key;!0===e&&console.log(c),t.push(c)}if(1===n.comparator(s.keys[a].key,l)){var c=" !!! value min right "+l+" < key "+s.keys[a].key;!0===e&&console.log(c),t.push(c)}i(s.keys[a].key),r.push(s.keys[a].key)}else{if(null===o)o=s.level;else if(o!=s.level){var c=" !!! Leaf node with wrong level value";!0===e&&console.log(c),t.push(c)}for(var a=0;a<s.numberActives;a++)!0===e&&console.log(" "+s.keys[a].key),i(s.keys[a].key),r.push(s.keys[a].key)}if(s!=n.root){if(s.numberActives>2*n.order-1){if(!0===e)var c=" !!!! MAX num keys restriction violated ";console.log(c),t.push(c)}if(s.numberActives<n.order-1){if(!0===e)var c=" !!!! MIN num keys restriction violated ";console.log(c),t.push(c)}}}),t},s.prototype._getMaxKeyPos=function(e,t,r){var n={};return null===t?r(null):!0===t.isLeaf?(n.node=t,n.index=t.numberActives-1,r(n)):(n.node=t,n.index=t.numberActives-1,e._diskRead(t.children[t.numberActives],function(t){return e._getMaxKeyPos(e,t,r)}),void 0)},s.prototype._getMinKeyPos=function(e,t,r){var n={};if(null===t&&r(null),!0===t.isLeaf)return n.node=t,n.index=0,r(n);n.node=t,n.index=0,e._diskRead(t.children[0],function(t){return e._getMinKeyPos(e,t,r)})};var a=function(){this.numberActives=0,this.isLeaf=null,this.keys=[],this.children=[],this.level=0};e.exports={Tree:s,Node:a}},function(e,t,r){var n=r(0),i=r(96).QueryFilters;RDFModel={},RDFModel.defaultContext={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",owl:"http://www.w3.org/2002/07/owl#",xsd:"http://www.w3.org/2001/XMLSchema#",dcterms:"http://purl.org/dc/terms/",foaf:"http://xmlns.com/foaf/0.1/",cal:"http://www.w3.org/2002/12/cal/ical#",vcard:"http://www.w3.org/2006/vcard/ns# ",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",cc:"http://creativecommons.org/ns#",sioc:"http://rdfs.org/sioc/ns#",doap:"http://usefulinc.com/ns/doap#",com:"http://purl.org/commerce#",ps:"http://purl.org/payswarm#",gr:"http://purl.org/goodrelations/v1#",sig:"http://purl.org/signature#",ccard:"http://purl.org/commerce/creditcard#",ldp:"http://www.w3.org/ns/ldp#"},RDFModel.UrisMap=function(){this.defaultNs="",this.interfaceProperties=["get","remove","set","setDefault","addAll","resolve","shrink"]},RDFModel.UrisMap.prototype.values=function(){var e={};for(var t in this)n.include(this.interfaceProperties,t)||"function"==typeof this[t]||"defaultNs"===t||"interfaceProperties"===t||(e[t]=this[t]);return e},RDFModel.UrisMap.prototype.get=function(e){if(-1!=e.indexOf(" "))throw"Prefix must not contain any whitespaces";return this[e]},RDFModel.UrisMap.prototype.remove=function(e){if(-1!=e.indexOf(" "))throw"Prefix must not contain any whitespaces";return delete this[e],null},RDFModel.UrisMap.prototype.set=function(e,t){if(-1!=e.indexOf(" "))throw"Prefix must not contain any whitespaces";this[e]=t},RDFModel.UrisMap.prototype.setDefault=function(e){this.defaultNs=e},RDFModel.UrisMap.prototype.addAll=function(e,t){for(var r in e)n.include(this.interfaceProperties,r)||(null!=this[r]?!0===t&&(this[r]=e[r]):this[r]=e[r]);return this},RDFModel.UrisMap.prototype.resolve=function(e){var t=e.split(":"),r=t[0],n=t[1];return""===r?null==this.defaultNs?null:this.defaultNs+n:null!=this[r]?this[r]+n:null},RDFModel.UrisMap.prototype.shrink=function(e){for(var t in this){var r=this[t];if(0===e.indexOf(r)&&""!==r&&"defaultNs"!=t){return t+":"+e.split(r)[1]}}return e},RDFModel.Profile=function(){this.prefixes=new RDFModel.UrisMap,this.terms=new RDFModel.UrisMap},RDFModel.Profile.prototype.importProfile=function(e,t){this.prefixes.addAll(e.prefixes,t),this.terms.addAll(e.terms,t)},RDFModel.Profile.prototype.resolve=function(e){return-1!=e.indexOf(":")?this.prefixes.resolve(e):null!=this.terms[e]?this.terms.resolve(e):null},RDFModel.Profile.prototype.setDefaultPrefix=function(e){this.prefixes.setDefault(e)},RDFModel.Profile.prototype.setDefaultVocabulary=function(e){this.terms.setDefault(e)},RDFModel.Profile.prototype.setPrefix=function(e,t){this.prefixes.set(e,t)},RDFModel.Profile.prototype.setTerm=function(e,t){this.terms.set(e,t)},RDFModel.RDFEnvironment=function(){RDFModel.Profile.call(this),this.blankNodeCounter=0;var e=this;this.filters={s:function(e){return function(t){return t.subject.equals(e)}},p:function(e){return function(t){return t.predicate.equals(e)}},o:function(e){return function(t){return t.object.equals(e)}},sp:function(e,t){return function(r){return r.subject.equals(e)&&r.predicate.equals(t)}},so:function(e,t){return function(r){return r.subject.equals(e)&&r.object.equals(t)}},po:function(e,t){return function(r){return r.predicate.equals(e)&&r.object.equals(t)}},spo:function(e,t,r){return function(n){return n.subject.equals(e)&&n.predicate.equals(t)&&n.object.equals(r)}},describes:function(e){return function(t){return t.subject.equals(e)||t.object.equals(e)}},type:function(t){var r=e.resolve("rdf:type");return function(e){return e.predicate.equals(r)&&e.object.equals(t)}}};for(var t in RDFModel.defaultContext)this.prefixes.set(t,RDFModel.defaultContext[t])},RDFModel.RDFEnvironment.prototype=n.create(RDFModel.Profile.prototype,{constructor:RDFModel.RDFEnvironment}),RDFModel.RDFEnvironment.prototype.createBlankNode=function(){var e=new RDFModel.BlankNode(this.blankNodeCounter);return this.blankNodeCounter++,e},RDFModel.RDFEnvironment.prototype.createNamedNode=function(e){var t=this.resolve(e);return null!=t?new RDFModel.NamedNode(t):new RDFModel.NamedNode(e)},RDFModel.RDFEnvironment.prototype.createLiteral=function(e,t,r){return null!=r?new RDFModel.Literal(e,t,r.toString()):new RDFModel.Literal(e,t,r)},RDFModel.RDFEnvironment.prototype.createTriple=function(e,t,r){return new RDFModel.Triple(e,t,r)},RDFModel.RDFEnvironment.prototype.createGraph=function(e){var t=new RDFModel.Graph;if(null!=e)for(var r=0;r<e.length;r++)t.add(e[r]);return t},RDFModel.RDFEnvironment.prototype.createAction=function(e,t){return function(r){return e(r)?t(r):r}},RDFModel.RDFEnvironment.prototype.createProfile=function(e){if(!0===e)return new RDFModel.RDFEnvironment.Profile;var t=new RDFModel.RDFEnvironment.Profile;return t.importProfile(this),t},RDFModel.RDFEnvironment.prototype.createTermMap=function(e){if(!0===e)return new RDFModel.UrisMap;var t=this.terms.values(),r=new RDFModel.UrisMap;for(var n in t)r[n]=t[n];return r},RDFModel.RDFEnvironment.prototype.createPrefixMap=function(e){if(!0===e)return new RDFModel.UrisMap;var t=this.prefixes.values(),r=new RDFModel.UrisMap;for(var n in t)r[n]=t[n];return r},RDFModel.RDFNode=function(e){this.interfaceName=e,this.attributes=["interfaceName","nominalValue"]},RDFModel.RDFNode.prototype.equals=function(e){if(null==e.interfaceName)return this.valueOf()==e;for(var t in this.attributes){var r=this.attributes[t];if(this[r]!=e[r])return!1}return!0},RDFModel.BlankNode=function(e){RDFModel.RDFNode.call(this,"BlankNode"),this.nominalValue="_:"+e,this.bnodeId=e},RDFModel.BlankNode.prototype=n.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.BlankNode}),RDFModel.BlankNode.prototype.toString=function(){return this.nominalValue},RDFModel.BlankNode.prototype.toNT=function(){return this.nominalValue},RDFModel.BlankNode.prototype.valueOf=function(){return this.nominalValue},RDFModel.Literal=function(e,t,r){RDFModel.RDFNode.call(this,"Literal"),this.nominalValue=e,null!=t?this.language=t:null!=r&&(this.datatype=r)},RDFModel.Literal.prototype=n.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.Literal}),RDFModel.Literal.prototype.toString=function(){var e='"'+this.nominalValue+'"';return null!=this.language?e=e+"@"+this.language:(null!=this.datatype||this.type)&&(e=e+"^^<"+(this.datatype||this.type)+">"),e},RDFModel.Literal.prototype.toNT=function(){return this.toString()},RDFModel.Literal.prototype.valueOf=function(){return i.effectiveTypeValue({token:"literal",type:this.type||this.datatype,value:this.nominalValue,language:this.language})},RDFModel.NamedNode=function(e){RDFModel.RDFNode.call(this,"NamedNode"),null!=e.value?this.nominalValue=e.value:this.nominalValue=e},RDFModel.NamedNode.prototype=n.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.NamedNode}),RDFModel.NamedNode.prototype.toString=function(){return this.nominalValue},RDFModel.NamedNode.prototype.toNT=function(){return"<"+this.toString()+">"},RDFModel.NamedNode.prototype.valueOf=function(){return this.nominalValue},RDFModel.Triple=function(e,t,r){this.subject=e,this.predicate=t,this.object=r},RDFModel.Triple.prototype.equals=function(e){return this.subject.equals(e.subject)&&this.predicate.equals(e.predicate)&&this.object.equals(e.object)},RDFModel.Triple.prototype.toString=function(){return this.subject.toNT()+" "+this.predicate.toNT()+" "+this.object.toNT()+" . \r\n"},RDFModel.Graph=function(){this.triples=[],this.duplicates={},this.actions=[],this.length=0},RDFModel.Graph.prototype.add=function(e){for(var t=0;t<this.actions.length;t++)e=this.actions[t](e);var r=e.subject.toString()+e.predicate.toString()+e.object.toString();return this.duplicates[r]||(this.duplicates[r]=!0,this.triples.push(e)),this.length=this.triples.length,this},RDFModel.Graph.prototype.addAction=function(e,t){if(this.actions.push(e),1==t)for(var r=0;r<this.triples.length;r++)this.triples[r]=e(this.triples[r]);return this},RDFModel.Graph.prototype.addAll=function(e){for(var t=e.toArray(),r=0;r<t.length;r++)this.add(t[r]);return this.length=this.triples.length,this},RDFModel.Graph.prototype.remove=function(e){for(var t=null,r=0;r<this.triples.length;r++)if(this.triples[r].equals(e)){var n=e.subject.toString()+e.predicate.toString()+e.object.toString();delete this.duplicates[n],t=r;break}return null!=t&&this.triples.splice(t,1),this.length=this.triples.length,this},RDFModel.Graph.prototype.toArray=function(){return this.triples},RDFModel.Graph.prototype.some=function(e){for(var t=0;t<this.triples.length;t++)if(!0===e(this.triples[t],this))return!0;return!1},RDFModel.Graph.prototype.every=function(e){for(var t=0;t<this.triples.length;t++)if(!1===e(this.triples[t],this))return!1;return!0},RDFModel.Graph.prototype.filter=function(e){for(var t=new RDFModel.Graph,r=0;r<this.triples.length;r++)!0===e(this.triples[r],this)&&t.add(this.triples[r]);return t},RDFModel.Graph.prototype.forEach=function(e){for(var t=0;t<this.triples.length;t++)e(this.triples[t],this)},RDFModel.Graph.prototype.merge=function(e){for(var t=new RDFModel.Graph,r=0;r<this.triples.length;r++)t.add(this.triples[r]);return t},RDFModel.Graph.prototype.match=function(e,t,r,n){for(var i=new RDFModel.Graph,o=0,s=0;s<this.triples.length;s++){var a=this.triples[s];if((null==e||a.subject.equals(e))&&(null==t||a.predicate.equals(t))&&(null==r||a.object.equals(r))){if(!(null==n||o<n))return i;o++,i.add(a)}}return i},RDFModel.Graph.prototype.removeMatches=function(e,t,r){for(var n=[],i=0;i<this.triples.length;i++){var o=this.triples[i];(null==e||o.subject.equals(e))&&(null==t||o.predicate.equals(t))&&(null==r||o.object.equals(r))&&n.push(o)}for(var i=0;i<n.length;i++)this.remove(n[i]);return this},RDFModel.Graph.prototype.toNT=function(){var e="";return this.forEach(function(t){e+=t.toString()}),e},RDFModel.buildRDFResource=function(e,t,r,n){if("blank"===e.token)return RDFModel.buildBlankNode(e,t,r,n);if("literal"===e.token)return RDFModel.buildLiteral(e,t,r,n);if("uri"===e.token)return RDFModel.buildNamedNode(e,t,r,n);if("var"===e.token){var i=t[e.value];return null!=i?RDFModel.buildRDFResource(i,t,r,n):null}return null},RDFModel.buildBlankNode=function(e,t,r,n){return null!=e.valuetmp&&(e.value=e.valuetmp),0===e.value.indexOf("_:")&&(e.value=e.value.split("_:")[1]),new RDFModel.BlankNode(e.value)},RDFModel.buildLiteral=function(e,t,r,n){return new RDFModel.Literal(e.value,e.lang,e.type)},RDFModel.buildNamedNode=function(e,t,r,n){if(null!=e.value)return new RDFModel.NamedNode(e);if(null!=e.prefix){var i=r.resolveNsInEnvironment(e.prefix,n);return e.value=i+e.suffix,new RDFModel.NamedNode(e)}return new RDFModel.NamedNode(e)},RDFModel.rdf=new RDFModel.RDFEnvironment,e.exports=RDFModel},function(e,t,r){"use strict";(function(t,n){function i(){}function o(e,t,r){this.chunk=e,this.encoding=t,this.callback=r,this.next=null}function s(e,t){_=_||r(19),e=e||{},this.objectMode=!!e.objectMode,t instanceof _&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var n=e.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var o=!1===e.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){v(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new E(this)}function a(e){if(_=_||r(19),!(R.call(a,this)||this instanceof _))return new a(e);this._writableState=new s(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev)),C.call(this)}function u(e,t){var r=new Error("write after end");e.emit("error",r),A(t,r)}function l(e,t,r,n){var i=!0,o=!1;return null===r?o=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),A(n,o),i=!1),i}function c(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=F.from(t,r)),t}function f(e,t,r,n,i,s){r||(n=c(t,n,i),F.isBuffer(n)&&(i="buffer"));var a=t.objectMode?1:n.length;t.length+=a;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest=new o(n,i,s),l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else p(e,t,!1,a,n,i,s);return u}function p(e,t,r,n,i,o,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function h(e,t,r,n,i){--t.pendingcb,r?A(i,n):i(n),e._writableState.errorEmitted=!0,e.emit("error",n)}function d(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function v(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(d(r),t)h(e,r,n,t,i);else{var o=m(r);o||r.corked||r.bufferProcessing||!r.bufferedRequest||b(e,r),n?S(y,e,r,o,i):y(e,r,o,i)}}function y(e,t,r,n){r||g(e,t),t.pendingcb--,n(),x(e,t)}function g(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function b(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),o=t.corkedRequestsFree;o.entry=r;for(var s=0;r;)i[s]=r,r=r.next,s+=1;p(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new E(t)}else{for(;r;){var a=r.chunk,u=r.encoding,l=r.callback;if(p(e,t,!1,t.objectMode?1:a.length,a,u,l),r=r.next,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=r,t.bufferProcessing=!1}function m(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function w(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function x(e,t){var r=m(t);return r&&(0===t.pendingcb?(w(e,t),t.finished=!0,e.emit("finish")):w(e,t)),r}function k(e,t,r){t.ending=!0,x(e,t),r&&(t.finished?A(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function E(e){var t=this;this.next=null,this.entry=null,this.finish=function(r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}e.exports=a;var _,A=r(61),S=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?n:A;a.WritableState=s;var I=r(30);I.inherits=r(12);var T={deprecate:r(190)},C=r(99),F=r(66).Buffer;I.inherits(a,C),s.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(s.prototype,"buffer",{get:T.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(e){}}();var R;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(R=Function.prototype[Symbol.hasInstance],Object.defineProperty(a,Symbol.hasInstance,{value:function(e){return!!R.call(this,e)||e&&e._writableState instanceof s}})):R=function(e){return e instanceof this},a.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},a.prototype.write=function(e,t,r){var n=this._writableState,o=!1,s=F.isBuffer(e);return"function"==typeof t&&(r=t,t=null),s?t="buffer":t||(t=n.defaultEncoding),"function"!=typeof r&&(r=i),n.ended?u(this,r):(s||l(this,n,e,r))&&(n.pendingcb++,o=f(this,n,s,e,t,r)),o},a.prototype.cork=function(){this._writableState.corked++},a.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||b(this,e))},a.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},a.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},a.prototype._writev=null,a.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!==e&&void 0!==e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||k(this,n,r)}}).call(t,r(5),r(39).setImmediate)},function(e,t,r){e.exports=r(23)},function(e,t,r){"use strict";var n=r(22),i=r.n(n),o=r(73),s=r.n(o),a=r(72),u=r(41),l=r(21),c=r(2),f=r(20),p=r(9),h=r(70),d=r(27),v=r(6);r.n(v);v.module("fibra.services.worker-service-prototype-mapping-configuration",[]).config(["$provide",function(e){e.service("workerServicePrototypeMappingConfiguration",function(){for(var e={Object:Object.prototype},t={Project:a.a,Node:c.p,Citable:f.b,Map:p.d,Class:l.b,Property:l.c,TreeNode:h.a,PrimaryEndpointConfiguration:u.a,PropertyAndValue:d.c},r=s()(t),n=Array.isArray(r),o=0,r=n?r:i()(r);;){var v;if(n){if(o>=r.length)break;v=r[o++]}else{if(o=r.next(),o.done)break;v=o.value}var y=v;e[y]=t[y].prototype,t[y].__name=y}return e})}])},function(e,t,r){var n=r(175).QueryEngine,i=r(174).QuadBackend,o=r(173).PersistentQuadBackend,s=r(95).Lexicon,a=r(172).PersistentLexicon,u=r(64),l=r(0);Store=function(e,t){var r=null,u=null;if(0==arguments.length)u={};else if(1==arguments.length)u={},r=e;else{if(!(arguments.length>1))throw"An optional argument map and a callback must be provided";u=e,r=t}null==u.treeOrder&&(u.treeOrder=15);var l=s,c=i;!0===u.persistent&&(l=a,c=o),this.functionMap={};var f=this;this.customFns={},new l(function(e){var t=function(){new c(u,function(t){var i=function(){u.backend=t,u.lexicon=e,f.engine=new n(u),r(null,f)};u.overwrite?t.clear(i):i()})};!0===u.overwrite?e.clear(t):t()},u.name)},Store.prototype.rdf=u.rdf,Store.prototype.rdf.api=u,Store.prototype.registerCustomFunction=function(e,t){this.customFns[e]=t,this.engine.setCustomFunctions(this.customFns)},Store.prototype.execute=function(){if(3===arguments.length)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2]);else if(4===arguments.length)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2],arguments[3]);else{var e,t;if(1===arguments.length){e=arguments[0];var t=function(){}}else 2===arguments.length&&(e=arguments[0],t=arguments[1]);this.engine.execute(e,t)}},Store.prototype.executeWithEnvironment=function(){var e,t,r;if(3===arguments.length){e=arguments[0];var n=function(){};t=arguments[1],r=arguments[2]}else if(4===arguments.length){e=arguments[0];var n=arguments[3];t=arguments[1],r=arguments[2]}t=l.map(t,function(e){return{token:"uri",value:e}}),r=l.map(r,function(e){return{token:"uri",value:e}}),this.engine.execute(e,n,t,r)},Store.prototype.graph=function(){var e=null,t=null;if(1===arguments.length)t=arguments[0]||function(){},e=this.engine.lexicon.defaultGraphUri;else{if(2!==arguments.length)throw"An optional graph URI and a callback function must be provided";t=arguments[1]||function(){},e=arguments[0]}null!=this.rdf.resolve(e)&&(e=this.rdf.resolve(e)),this.engine.execute("CONSTRUCT { ?s ?p ?o } WHERE { GRAPH <"+e+"> { ?s ?p ?o } }",t)},Store.prototype.node=function(){var e=null,t=null,r=null;if(2===arguments.length)r=arguments[0],t=arguments[1]||function(){},e=this.engine.lexicon.defaultGraphUri;else{if(3!==arguments.length)throw"An optional graph URI, node URI and a callback function must be provided";r=arguments[0],e=arguments[1],t=arguments[2]||function(){}}null!=this.rdf.resolve(e)&&(e=this.rdf.resolve(e)),null!=this.rdf.resolve(r)&&(r=this.rdf.resolve(r)),this.engine.execute("CONSTRUCT { <"+r+"> ?p ?o } WHERE { GRAPH <"+e+"> { <"+r+"> ?p ?o } }",t)},Store.prototype.startObservingNode=function(){var e,t,r;2===arguments.length?(e=arguments[0],r=arguments[1],this.engine.callbacksBackend.observeNode(e,r,function(){})):3===arguments.length&&(e=arguments[0],t=arguments[1],r=arguments[2],this.engine.callbacksBackend.observeNode(e,t,r,function(){}))},Store.prototype.stopObservingNode=function(e){this.engine.callbacksBackend.stopObservingNode(e)},Store.prototype.startObservingQuery=function(){var e=arguments[0],t=arguments[1],r=arguments[2];null!=r?this.engine.callbacksBackend.observeQuery(e,t,r):this.engine.callbacksBackend.observeQuery(e,t,function(){})},Store.prototype.stopObservingQuery=function(e){this.engine.callbacksBackend.stopObservingQuery(e)},Store.prototype.subscribe=function(e,t,r,n,i){var o=this,s=function(e,t){var r=[],n={blanks:{},outCache:{}},s=[];l.each(t,function(e){var t=u.buildRDFResource(e.subject,s,o.engine,n),i=u.buildRDFResource(e.predicate,s,o.engine,n),a=u.buildRDFResource(e.object,s,o.engine,n);null!=t&&null!=i&&null!=a&&(e=new u.Triple(t,i,a),r.push(e))}),i(e,r)};this.functionMap[i]=s,this.engine.callbacksBackend.subscribe(e,t,r,n,s,function(){})},Store.prototype.unsubscribe=function(e){var t=this.functionMap[e];this.engine.callbacksBackend.unsubscribe(t),delete this.functionMap[e]},Store.prototype.setPrefix=function(e,t){this.rdf.setPrefix(e,t)},Store.prototype.setDefaultPrefix=function(e){this.rdf.setDefaultPrefix(e)},Store.prototype.insert=function(){var e,t,r;if(1===arguments.length)t=arguments[0],r=function(){};else if(2===arguments.length)t=arguments[0],r=arguments[1]||function(){};else{if(3!==arguments.length)throw"The triples to insert, an optional graph and callback must be provided";t=arguments[0],e=this.rdf.createNamedNode(arguments[1]),r=arguments[2]||function(){}}var n="",i=this;t.forEach(function(e){n=n+i._nodeToQuery(e.subject)+i._nodeToQuery(e.predicate)+i._nodeToQuery(e.object)+"."}),n=null!=e?"INSERT DATA { GRAPH "+this._nodeToQuery(e)+" { "+n+" } }":"INSERT DATA { "+n+" }",this.engine.execute(n,r)},Store.prototype._nodeToQuery=function(e){if("NamedNode"===e.interfaceName){var t=this.rdf.resolve(e.valueOf());return null!=t?"<"+t+">":"<"+e.valueOf()+">"}return e.toString()},Store.prototype.delete=function(){var e,t,r;if(1===arguments.length)t=arguments[0],r=function(){};else if(2===arguments.length)t=arguments[0],r=arguments[1]||function(){};else{if(3!==arguments.length)throw"The triples to delete, an optional graph and callback must be provided";t=arguments[0],e=this.rdf.createNamedNode(arguments[1]),r=arguments[2]||function(){}}var n="",i=this;t.forEach(function(e){n=n+i._nodeToQuery(e.subject)+i._nodeToQuery(e.predicate)+i._nodeToQuery(e.object)+"."}),n=null!=e?"DELETE DATA { GRAPH "+this._nodeToQuery(e)+" { "+n+" } }":"DELETE DATA { "+n+" }",this.engine.execute(n,r)},Store.prototype.clear=function(){var e,t;if(0===arguments.length){e=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri);var t=function(){}}else if(1===arguments.length)e=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),t=arguments[0]||function(){};else{if(2!==arguments.length)throw"The optional graph and a callback must be provided";e=this.rdf.createNamedNode(arguments[0]),t=arguments[1]||function(){}}var r="CLEAR GRAPH "+this._nodeToQuery(e);this.engine.execute(r,t)},Store.prototype.setBatchLoadEvents=function(e){this.engine.eventsOnBatchLoad=e},Store.prototype.registerDefaultNamespace=function(e,t){this.rdf.prefixes.set(e,t),this.engine.registerDefaultNamespace(e,t)},Store.prototype.registerDefaultProfileNamespaces=function(){var e=this.rdf.prefixes.values();for(var t in e)this.registerDefaultNamespace(t,e[t])},Store.prototype.load=function(){var e,t,r,n,i={};if(3===arguments.length)r=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),e=arguments[0],t=arguments[1],n=arguments[2]||function(){};else if(4===arguments.length)e=arguments[0],t=arguments[1],i=arguments[2],"string"==typeof i?(r=this.rdf.createNamedNode(i),i={}):(r=this.rdf.createNamedNode(i.graph||this.engine.lexicon.defaultGraphUri),delete i.graph),n=arguments[3]||function(){};else if(2===arguments.length)throw"The mediaType of the parser, the data a callback and an optional graph must be provided";if("remote"===e){t=this.rdf.createNamedNode(t);var o="LOAD <"+t.valueOf()+"> INTO GRAPH <"+r.valueOf()+">";this.engine.execute(o,n)}else{var s=this,a=this.engine.rdfLoader.parsers[e];if(!a)return n(new Error("Cannot find parser for the provided media type:"+e));var u=function(e,t){e?n(e,t):s.engine.batchLoad(t,function(e){null!=e?n(null,e):n(new Error("Erro batch-loading triples."))})},l=[a,{token:"uri",value:r.valueOf()},t,i,u];t&&"string"==typeof t&&0===t.indexOf("file://")?this.engine.rdfLoader.loadFromFile.apply(null,l):this.engine.rdfLoader.tryToParse.apply(null,l)}},Store.prototype.registerParser=function(e,t){this.engine.rdfLoader.registerParser(e,t)},Store.prototype.registeredGraphs=function(e){this.engine.lexicon.registeredGraphs(!0,function(t){var r=l.map(t,function(e){return new u.NamedNode(e)});e(null,r)})},Store.prototype.getNetworkTransport=function(){return NetworkTransport},Store.prototype.setNetworkTransport=function(e){NetworkTransport=e},Store.prototype.close=function(e){null==e&&(e=function(){}),this.engine.close?this.engine.close(e):e()},Store.VERSION="0.9.17";var c=function(){var e;(e=1==arguments.length?arguments[0]:2==arguments.length?arguments[1]:arguments[2])(new Error("Store#connect is not supported in the 0.9.X series of the library"))},f=function(){return 1==arguments.length?new Store(arguments[0]):2==arguments.length?new Store(arguments[0],arguments[1]):new Store};Store.yieldFrequency=function(e){l.yieldFrequency(e)},e.exports.Store=Store,e.exports.create=f,e.exports.connect=c},function(e,t,r){"use strict";function n(e,t){var r="";for(var n in e)r=r+"@prefix "+n+": <"+e[n]+"> .\n";return t.values().forEach(function(e){return r=r+e.substring(0,e.length-2)+" .\n\n"}),r}function i(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,r=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return s[255&e]+s[e>>8&255]+s[e>>16&255]+s[e>>24&255]+"-"+s[255&t]+s[t>>8&255]+"-"+s[t>>16&15|64]+s[t>>24&255]+"-"+s[63&r|128]+s[r>>8&255]+"-"+s[r>>16&255]+s[r>>24&255]+s[255&n]+s[n>>8&255]+s[n>>16&255]+s[n>>24&255]}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.reduce(function(e,t){return e.concat(Array.isArray(t)?o(t):t)},t)}t.c=n,t.b=i,t.a=o;for(var s=(r(9),[]),a=0;a<256;a++)s[a]=(a<16?"0":"")+a.toString(16)},function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r(22),i=r.n(n),o=r(1),s=r.n(o),a=function(){function e(t,r){s()(this,e),this.id=t,this.label=r,this.children=[],this.selected=!0,this.open=!0}return e.recursivelyProcess=function(t,r){r(t),t.children.forEach(function(t){return e.recursivelyProcess(t,r)})},e.filter=function(e,t){for(var r=e.cloneWithoutChildren(),n=e.children,o=Array.isArray(n),s=0,n=o?n:i()(n);;){var a;if(o){if(s>=n.length)break;a=n[s++]}else{if(s=n.next(),s.done)break;a=s.value}var u=a;t(u)&&r.children.push(u)}return r},e.recursivelyMap=function(t,r){for(var n=[],o=t.children,s=Array.isArray(o),a=0,o=s?o:i()(o);;){var u;if(s){if(a>=o.length)break;u=o[a++]}else{if(a=o.next(),a.done)break;u=a.value}var l=u;n=n.concat(e.recursivelyMap(l,r))}return r(t,n)},e.prototype.cloneWithoutChildren=function(){var t=new e(this.id,this.label);return t.instances=this.instances,t.matchingInstances=this.matchingInstances,t.selected=this.selected,t.open=this.open,t},e}()},function(e,t,r){"use strict";r.d(t,"c",function(){return c}),r.d(t,"b",function(){return f}),r.d(t,"a",function(){return p});var n=r(1),i=r.n(n),o=r(8),s=r.n(o),a=r(7),u=r.n(a),l=r(2),c=function(e){function t(r,n,o){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];i()(this,t);var l=s()(this,e.call(this,r));return l.label=n,l.description=o,l.types=a,l.sourceEndpoints=u,l}return u()(t,e),t}(l.i),f=function(e){function t(r){i()(this,t);var n=s()(this,e.call(this,r));return n.label=r.label,n.description=r.description,n.types=r.types,n.sourceEndpoints=r.sourceEndpoints,n}return u()(t,e),t}(l.i),p=function(e){function t(r){return i()(this,t),s()(this,e.call(this,r))}return u()(t,e),t}(l.i)},function(e,t,r){"use strict";r.d(t,"a",function(){return g});var n=r(1),i=r.n(n),o=r(8),s=r.n(o),a=r(7),u=r.n(a),l=r(20),c=r(21),f=r(13),p=(r.n(f),r(32)),h=r(33),d=r(27),v=r(41),y=r(2),g=function(e){function t(){i()(this,t);var r=s()(this,e.apply(this,arguments));return r.instanceNS="http://ldf.fi/fibra/",r.schemaNS="http://ldf.fi/fibra/schema#",r.dataModel=new c.a,r.autocompletionQuery=p.b.defaultMatchQuery,r.treeQuery=h.b.getClassTreeQuery,r.itemQuery=d.b.getLocalItemPropertiesQuery,r.deleteItemQuery=d.b.deleteItemQuery,r.classQuery=c.a.classQuery,r.propertyQuery=c.a.propertyQuery,r.authorityEndpoints=[],r.archiveEndpoints=[],r.schemas=[],r}return u()(t,e),t.prototype.remoteEndpoints=function(){return this.archiveEndpoints.concat(this.authorityEndpoints)},t.prototype.asTemplate=function(){var e=new v.a;return e.autocompletionQuery=this.autocompletionQuery,e.itemQuery=this.itemQuery,e.deleteItemQuery=this.deleteItemQuery,e.treeQuery=this.treeQuery,e.propertyQuery=this.propertyQuery,e.classQuery=this.classQuery,e},t.prototype.toTurtle=function(t,r){var n=this;if(!t.has(this.id)){r.fibra=y.m.ns,r.void=y.o.ns,t.set(this.id,"<"+this.id+"> a fibra:Project ;"),e.prototype.toTurtle.call(this,t,r);var i=t.get(this.id);this.schemas.length>0&&(i+="\nfibra:schema ",this.schemas.forEach(function(e){i=i+"<"+e.id+">, "}),i=i.substring(0,i.length-2)+" ;",this.schemas.filter(function(e){return e.source.sparqlEndpoint!==n.source.sparqlEndpoint||n.source.graph!==e.source.graph}).forEach(function(e){i=i+"\nfibra:schemaReference [\n  rdf:value <"+e.id+"> ;\n  void:sparqlEndpoint <"+e.source.sparqlEndpoint+"> ;",e.source.graph&&(i=i+"\n  fibra:graph <"+e.source.graph+">"),i+="\n] ;"})),this.authorityEndpoints.length>0&&(i+="\nfibra:authorityEndpoint ",this.authorityEndpoints.forEach(function(e){i=i+"<"+e.id+">, "}),i=i.substring(0,i.length-2)+" ;",this.authorityEndpoints.filter(function(e){return e.source.sparqlEndpoint!==n.source.sparqlEndpoint||n.source.graph!==e.source.graph}).forEach(function(e){i=i+"\nfibra:authorityEndpointReference [\n  rdf:value <"+e.id+"> ;\n  void:sparqlEndpoint <"+e.source.sparqlEndpoint+"> ;",e.source.graph&&(i=i+"\n  fibra:graph <"+e.source.graph+">"),i+="\n] ;"})),this.archiveEndpoints.length>0&&(i+="\nfibra:archiveEndpoint ",this.archiveEndpoints.forEach(function(e){i=i+"<"+e.id+">, "}),i=i.substring(0,i.length-2)+" ;",this.archiveEndpoints.filter(function(e){return e.source.sparqlEndpoint!==n.source.sparqlEndpoint||n.source.graph!==e.source.graph}).forEach(function(e){i=i+"\nfibra:archiveEndpointReference [\n  rdf:value <"+e.id+"> ;\n  void:sparqlEndpoint <"+e.source.sparqlEndpoint+"> ;",e.source.graph&&(i=i+"\n  fibra:graph <"+e.source.graph+">"),i+="\n] ;"})),this.graph&&(i=i+"\nfibra:graph <"+this.graph+"> ;"),i=i+"\nfibra:autocompletionQuery "+f.SparqlService.stringToSPARQLString(this.autocompletionQuery)+" ;\nfibra:treeQuery "+f.SparqlService.stringToSPARQLString(this.treeQuery)+" ;\nfibra:itemQuery "+f.SparqlService.stringToSPARQLString(this.itemQuery)+" ;\nfibra:deleteItemQuery "+f.SparqlService.stringToSPARQLString(this.deleteItemQuery)+" ;\nfibra:classQuery "+f.SparqlService.stringToSPARQLString(this.classQuery)+" ;\nfibra:propertyQuery "+f.SparqlService.stringToSPARQLString(this.propertyQuery)+" ;\nvoid:sparqlEndpoint <"+this.endpoint+"> ;\nfibra:updateEndpoint <"+this.updateEndpoint+"> ;\nfibra:graphStoreEndpoint <"+this.graphStoreEndpoint+"> ;\nfibra:schemaNS "+f.SparqlService.stringToSPARQLString(this.schemaNS)+" ;\nfibra:instanceNS "+f.SparqlService.stringToSPARQLString(this.instanceNS)+" .",t.set(this.id,i)}},t}(l.b);g.listProjectsQuery="PREFIX fibra: <http://hdlab.stanford.edu/fibra/ontology#>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX dcterms: <http://purl.org/dc/terms/>\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\nPREFIX void: <http://rdfs.org/ns/void#>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nSELECT ?id ?labels ?descriptions ?url ?rightsHolders ?rightsHolders_labels ?rightsHolders_descriptions ?rightsHolder_surl ?rightsHolders_order ?instanceNS ?schemaNS ?endpoint ?graphStoreEndpoint ?updateEndpoint ?graph ?autocompletionQuery ?treeQuery ?itemQuery ?deleteItemQuery ?authorityEndpoints ?authorityEndpoints_source_graph ?authorityEndpoints_source_sparqlEndpoint ?archiveEndpoints ?archiveEndpoints_source_graph ?archiveEndpoints_source_sparqlEndpoint ?schemas ?schemas_source_graph ?schemas_source_sparqlEndpoint {\n# STARTGRAPH\n  ?id a fibra:Project .\n  {\n    ?id skos:prefLabel ?labels\n  } UNION {\n    ?id fibra:instanceNS ?instanceNS .\n    ?id fibra:schemaNS ?schemaNS .\n    ?id void:sparqlEndpoint ?endpoint .\n    ?id fibra:updateEndpoint ?updateEndpoint .\n    ?id fibra:graphStoreEndpoint ?graphStoreEndpoint .\n    ?id fibra:autocompletionQuery ?autocompletionQuery .\n    ?id fibra:treeQuery ?treeQuery .\n    ?id fibra:itemQuery ?itemQuery .\n    ?id fibra:deleteItemQuery ?deleteItemQuery .\n    OPTIONAL { ?id fibra:graph ?graph }\n  } UNION {\n    ?id foaf:homepage ?url .\n  } UNION {\n    ?id fibra:schema ?schemas\n  } UNION {\n    ?id fibra:schemaReference ?ar .\n    ?ar rdf:value ?schemas .\n    ?ar void:sparqlEndpoint ?schemas_source_sparqlEndpoint .\n    OPTIONAL { ?ar fibra:graph ?schemas_source_graph }\n  } UNION {\n    ?id fibra:authorityEndpoint ?authorityEndpoints\n  } UNION {\n    ?id fibra:authorityEndpointReference ?ar .\n    ?ar rdf:value ?authorityEndpoints .\n    ?ar void:sparqlEndpoint ?authorityEndpoints_source_sparqlEndpoint .\n    OPTIONAL { ?ar fibra:graph ?authorityEndpoints_source_graph }\n  } UNION {\n    ?id fibra:archiveEndpoint ?archiveEndpoints\n  } UNION {\n    ?id fibra:archiveEndpointReference ?ar .\n    ?ar rdf:value ?archiveEndpoints .\n    ?ar void:sparqlEndpoint ?archiveEndpoints_source_sparqlEndpoint .\n    OPTIONAL { ?ar fibra:graph ?archiveEndpoints_source_graph }\n  } UNION {\n    ?id dcterms:description ?descriptions\n  } UNION {\n    {\n      ?id dcterms:rightsHolder ?rightsHolders\n    } UNION {\n      ?id fibra:qualifiedAssertion ?qa .\n      ?qa rdf:predicate dcterms:rightsHolder .\n      ?qa rdf:object ?rightsHolders .\n      OPTIONAL { ?qa fibra:order ?rightsHolders_order }\n    }\n    {\n      ?rightsHolders skos:prefLabel ?rightsHolders_labels\n    } UNION {\n      ?rightsHolders foaf:homepage ?rightsHolders_url\n    } UNION {\n      ?rightsHolders dcterms:description ?rightsHolders_descriptions\n    }\n  }\n# ENDGRAPH\n}",g.projectQuery="PREFIX fibra: <http://hdlab.stanford.edu/fibra/ontology#>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX dcterms: <http://purl.org/dc/terms/>\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\nPREFIX void: <http://rdfs.org/ns/void#>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nSELECT ?labels ?descriptions ?url ?rightsHolders ?rightsHolders_labels ?rightsHolders_descriptions ?rightsHolder_surl ?rightsHolders_order ?instanceNS ?schemaNS ?endpoint ?graphStoreEndpoint ?updateEndpoint ?graph ?autocompletionQuery ?treeQuery ?itemQuery ?deleteItemQuery ?authorityEndpoints ?authorityEndpoints_source_graph ?authorityEndpoints_source_sparqlEndpoint ?archiveEndpoints ?archiveEndpoints_source_graph ?archiveEndpoints_source_sparqlEndpoint ?schemas ?schemas_source_graph ?schemas_source_sparqlEndpoint {\n# STARTGRAPH\n  {\n    <ID> skos:prefLabel ?labels\n  } UNION {\n    <ID> fibra:instanceNS ?instanceNS .\n    <ID> fibra:schemaNS ?schemaNS .\n    <ID> void:sparqlEndpoint ?endpoint .\n    <ID> fibra:updateEndpoint ?updateEndpoint .\n    <ID> fibra:graphStoreEndpoint ?graphStoreEndpoint .\n    <ID> fibra:autocompletionQuery ?autocompletionQuery .\n    <ID> fibra:treeQuery ?treeQuery .\n    <ID> fibra:itemQuery ?itemQuery .\n    <ID> fibra:deleteItemQuery ?deleteItemQuery .\n    OPTIONAL { <ID> fibra:graph ?graph }\n  } UNION {\n    <ID> foaf:homepage ?url .\n  } UNION {\n    <ID> fibra:schema ?schemas\n  } UNION {\n    <ID> fibra:schemaReference ?ar .\n    ?ar rdf:value ?schemas .\n    ?ar void:sparqlEndpoint ?schemas_source_sparqlEndpoint .\n    OPTIONAL { ?ar fibra:graph ?schemas_source_graph }\n  } UNION {\n    <ID> fibra:authorityEndpoint ?authorityEndpoints\n  } UNION {\n    <ID> fibra:authorityEndpointReference ?ar .\n    ?ar rdf:value ?authorityEndpoints .\n    ?ar void:sparqlEndpoint ?authorityEndpoints_source_sparqlEndpoint .\n    OPTIONAL { ?ar fibra:graph ?authorityEndpoints_source_graph }\n  } UNION {\n    <ID> fibra:archiveEndpoint ?archiveEndpoints\n  } UNION {\n    <ID> fibra:archiveEndpointReference ?ar .\n    ?ar rdf:value ?archiveEndpoints .\n    ?ar void:sparqlEndpoint ?archiveEndpoints_source_sparqlEndpoint .\n    OPTIONAL { ?ar fibra:graph ?archiveEndpoints_source_graph }\n  } UNION {\n    <ID> dcterms:description ?descriptions\n  } UNION {\n    {\n      <ID> dcterms:rightsHolder ?rightsHolders\n    } UNION {\n      <ID> fibra:qualifiedAssertion ?qa .\n      ?qa rdf:predicate dcterms:rightsHolder .\n      ?qa rdf:object ?rightsHolders .\n      OPTIONAL { ?qa fibra:order ?rightsHolders_order }\n    }\n    {\n      ?rightsHolders skos:prefLabel ?rightsHolders_labels\n    } UNION {\n      ?rightsHolders foaf:homepage ?rightsHolders_url\n    } UNION {\n      ?rightsHolders dcterms:description ?rightsHolders_descriptions\n    }\n  }\n# ENDGRAPH\n}"},function(e,t,r){e.exports={default:r(124),__esModule:!0}},function(e,t,r){var n=r(129);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},function(e,t,r){var n=r(29),i=r(10).document,o=n(i)&&n(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,r){e.exports=!r(14)&&!r(28)(function(){return 7!=Object.defineProperty(r(75)("div"),"a",{get:function(){return 7}}).a})},function(e,t,r){"use strict";var n=r(46),i=r(25),o=r(85),s=r(26),a=r(15),u=r(34),l=r(137),c=r(49),f=r(82),p=r(11)("iterator"),h=!([].keys&&"next"in[].keys()),d=function(){return this};e.exports=function(e,t,r,v,y,g,b){l(r,t,v);var m,w,x,k=function(e){if(!h&&e in S)return S[e];switch(e){case"keys":case"values":return function(){return new r(this,e)}}return function(){return new r(this,e)}},E=t+" Iterator",_="values"==y,A=!1,S=e.prototype,I=S[p]||S["@@iterator"]||y&&S[y],T=I||k(y),C=y?_?k("entries"):T:void 0,F="Array"==t?S.entries||I:I;if(F&&(x=f(F.call(new e)))!==Object.prototype&&(c(x,E,!0),n||a(x,p)||s(x,p,d)),_&&I&&"values"!==I.name&&(A=!0,T=function(){return I.call(this)}),n&&!b||!h&&!A&&S[p]||s(S,p,T),u[t]=T,u[E]=d,y)if(m={values:_?T:k("values"),keys:g?T:k("keys"),entries:C},b)for(w in m)w in S||o(S,w,m[w]);else i(i.P+i.F*(h||A),t,m);return m}},function(e,t,r){var n=r(48),i=r(36),o=r(17),s=r(53),a=r(15),u=r(76),l=Object.getOwnPropertyDescriptor;t.f=r(14)?l:function(e,t){if(e=o(e),t=s(t,!0),u)try{return l(e,t)}catch(e){}if(a(e,t))return i(!n.f.call(e,t),e[t])}},function(e,t,r){var n=r(17),i=r(80).f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(e){try{return i(e)}catch(e){return s.slice()}};e.exports.f=function(e){return s&&"[object Window]"==o.call(e)?a(e):i(n(e))}},function(e,t,r){var n=r(83),i=r(45).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,r){var n=r(15),i=r(86),o=r(50)("IE_PROTO"),s=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),n(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},function(e,t,r){var n=r(15),i=r(17),o=r(131)(!1),s=r(50)("IE_PROTO");e.exports=function(e,t){var r,a=i(e),u=0,l=[];for(r in a)r!=s&&n(a,r)&&l.push(r);for(;t.length>u;)n(a,r=t[u++])&&(~o(l,r)||l.push(r));return l}},function(e,t,r){var n=r(25),i=r(3),o=r(28);e.exports=function(e,t){var r=(i.Object||{})[e]||Object[e],s={};s[e]=t(r),n(n.S+n.F*o(function(){r(1)}),"Object",s)}},function(e,t,r){e.exports=r(26)},function(e,t,r){var n=r(44);e.exports=function(e){return Object(n(e))}},function(e,t,r){"use strict";var n=r(143)(!0);r(77)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})})},function(e,t,r){r(148);for(var n=r(10),i=r(26),o=r(34),s=r(11)("toStringTag"),a=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],u=0;u<5;u++){var l=a[u],c=n[l],f=c&&c.prototype;f&&!f[s]&&i(f,s,l),o[l]=o.Array}},function(e,t,r){(function(n,i,o){var s;/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE
 * @version   2.3.0
 */
(function(){"use strict";function a(e){return"function"==typeof e||"object"==typeof e&&null!==e}function u(e){return"function"==typeof e}function l(e){return"object"==typeof e&&null!==e}function c(e){H=e}function f(e){W=e}function p(){return function(){G(d)}}function h(){return function(){setTimeout(d,1)}}function d(){for(var e=0;e<V;e+=2){(0,ee[e])(ee[e+1]),ee[e]=void 0,ee[e+1]=void 0}V=0}function v(){}function y(){return new TypeError("You cannot resolve a promise with itself")}function g(){return new TypeError("A promises callback cannot return that same promise.")}function b(e){try{return e.then}catch(e){return ie.error=e,ie}}function m(e,t,r,n){try{e.call(t,r,n)}catch(e){return e}}function w(e,t,r){W(function(e){var n=!1,i=m(r,t,function(r){n||(n=!0,t!==r?E(e,r):A(e,r))},function(t){n||(n=!0,S(e,t))},"Settle: "+(e._label||" unknown promise"));!n&&i&&(n=!0,S(e,i))},e)}function x(e,t){t._state===re?A(e,t._result):t._state===ne?S(e,t._result):I(t,void 0,function(t){E(e,t)},function(t){S(e,t)})}function k(e,t){if(t.constructor===e.constructor)x(e,t);else{var r=b(t);r===ie?S(e,ie.error):void 0===r?A(e,t):u(r)?w(e,t,r):A(e,t)}}function E(e,t){e===t?S(e,y()):a(t)?k(e,t):A(e,t)}function _(e){e._onerror&&e._onerror(e._result),T(e)}function A(e,t){e._state===te&&(e._result=t,e._state=re,0!==e._subscribers.length&&W(T,e))}function S(e,t){e._state===te&&(e._state=ne,e._result=t,W(_,e))}function I(e,t,r,n){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+re]=r,i[o+ne]=n,0===o&&e._state&&W(T,e)}function T(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var n,i,o=e._result,s=0;s<t.length;s+=3)n=t[s],i=t[s+r],n?R(r,n,i,o):i(o);e._subscribers.length=0}}function C(){this.error=null}function F(e,t){try{return e(t)}catch(e){return oe.error=e,oe}}function R(e,t,r,n){var i,o,s,a,l=u(r);if(l){if(i=F(r,n),i===oe?(a=!0,o=i.error,i=null):s=!0,t===i)return void S(t,g())}else i=n,s=!0;t._state!==te||(l&&s?E(t,i):a?S(t,o):e===re?A(t,i):e===ne&&S(t,i))}function j(e,t){try{t(function(t){E(e,t)},function(t){S(e,t)})}catch(t){S(e,t)}}function N(e,t){var r=this;r._instanceConstructor=e,r.promise=new e(v),r._validateInput(t)?(r._input=t,r.length=t.length,r._remaining=t.length,r._init(),0===r.length?A(r.promise,r._result):(r.length=r.length||0,r._enumerate(),0===r._remaining&&A(r.promise,r._result))):S(r.promise,r._validationError())}function L(e){return new se(this,e).promise}function P(e){function t(e){E(i,e)}function r(e){S(i,e)}var n=this,i=new n(v);if(!z(e))return S(i,new TypeError("You must pass an array to race.")),i;for(var o=e.length,s=0;i._state===te&&s<o;s++)I(n.resolve(e[s]),void 0,t,r);return i}function O(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var r=new t(v);return E(r,e),r}function Q(e){var t=this,r=new t(v);return S(r,e),r}function D(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function B(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function M(e){this._id=fe++,this._state=void 0,this._result=void 0,this._subscribers=[],v!==e&&(u(e)||D(),this instanceof M||B(),j(this,e))}function U(){var e;if(void 0!==o)e=o;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;t&&"[object Promise]"===Object.prototype.toString.call(t.resolve())&&!t.cast||(e.Promise=pe)}var q;q=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var G,H,X,z=q,V=0,W=function(e,t){ee[V]=e,ee[V+1]=t,2===(V+=2)&&(H?H(d):X())},$="undefined"!=typeof window?window:void 0,J=$||{},Y=J.MutationObserver||J.WebKitMutationObserver,K=void 0!==n&&"[object process]"==={}.toString.call(n),Z="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,ee=new Array(1e3);X=K?function(){var e=n.nextTick,t=n.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);return Array.isArray(t)&&"0"===t[1]&&"10"===t[2]&&(e=i),function(){e(d)}}():Y?function(){var e=0,t=new Y(d),r=document.createTextNode("");return t.observe(r,{characterData:!0}),function(){r.data=e=++e%2}}():Z?function(){var e=new MessageChannel;return e.port1.onmessage=d,function(){e.port2.postMessage(0)}}():void 0===$?function(){try{var e=r(196);return G=e.runOnLoop||e.runOnContext,p()}catch(e){return h()}}():h();var te=void 0,re=1,ne=2,ie=new C,oe=new C;N.prototype._validateInput=function(e){return z(e)},N.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},N.prototype._init=function(){this._result=new Array(this.length)};var se=N;N.prototype._enumerate=function(){for(var e=this,t=e.length,r=e.promise,n=e._input,i=0;r._state===te&&i<t;i++)e._eachEntry(n[i],i)},N.prototype._eachEntry=function(e,t){var r=this,n=r._instanceConstructor;l(e)?e.constructor===n&&e._state!==te?(e._onerror=null,r._settledAt(e._state,t,e._result)):r._willSettleAt(n.resolve(e),t):(r._remaining--,r._result[t]=e)},N.prototype._settledAt=function(e,t,r){var n=this,i=n.promise;i._state===te&&(n._remaining--,e===ne?S(i,r):n._result[t]=r),0===n._remaining&&A(i,n._result)},N.prototype._willSettleAt=function(e,t){var r=this;I(e,void 0,function(e){r._settledAt(re,t,e)},function(e){r._settledAt(ne,t,e)})};var ae=L,ue=P,le=O,ce=Q,fe=0,pe=M;M.all=ae,M.race=ue,M.resolve=le,M.reject=ce,M._setScheduler=c,M._setAsap=f,M._asap=W,M.prototype={constructor:M,then:function(e,t){var r=this,n=r._state;if(n===re&&!e||n===ne&&!t)return this;var i=new this.constructor(v),o=r._result;if(n){var s=arguments[n-1];W(function(){R(n,i,s,o)})}else I(r,i,e,t);return i},catch:function(e){return this.then(null,e)}};var he=U,de={Promise:pe,polyfill:he};void 0!==(s=function(){return de}.call(t,r,t,e))&&(e.exports=s),he()}).call(this)}).call(t,r(5),r(39).setImmediate,r(4))},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){function n(e,t){if(!(this instanceof n))return new n(e,t);this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._ids["><"]=0,this._entities=Object.create(null),this._blankNodeIndex=0,t||!e||e[0]||(t=e,e=null),t=t||{},this._prefixes=Object.create(null),t.prefixes&&this.addPrefixes(t.prefixes),this.defaultGraph=t.defaultGraph||"http://example.org/#defaultGraph",e&&this.addTriples(e)}var i=r(59).expandPrefixedName;n.prototype={get size(){var e=this._size;if(null!==e)return e;var t,r,n=this._graphs;for(var i in n)for(var o in t=n[i].subjects)for(var s in r=t[o])e+=Object.keys(r[s]).length;return this._size=e},_addToIndex:function(e,t,r,n){var i=e[t]||(e[t]={}),o=i[r]||(i[r]={}),s=n in o;return s||(o[n]=null),!s},_removeFromIndex:function(e,t,r,n){var i,o=e[t],s=o[r];delete s[n];for(i in s)return;delete o[r];for(i in o)return;delete e[t]},_findInIndex:function(e,t,r,n,i,o,s,a){var u,l,c,f=[],p=!t+!r+!n,h=p>1?Object.keys(this._ids):this._entities;t&&((u=e,e={})[t]=u[t]);for(var d in e){var v=h[d];if(l=e[d]){r&&((u=l,l={})[r]=u[r]);for(var y in l){var g=h[y];if(c=l[y])for(var b=(n?n in c?[n]:[]:Object.keys(c)),m=b.length-1;m>=0;m--){var w={subject:"",predicate:"",object:"",graph:a};w[i]=v,w[o]=g,w[s]=h[b[m]],f.push(w)}}}}return f},_countInIndex:function(e,t,r,n){var i,o,s,a=0;t&&((i=e,e={})[t]=i[t]);for(var u in e)if(o=e[u]){r&&((i=o,o={})[r]=i[r]);for(var l in o)(s=o[l])&&(n?n in s&&a++:a+=Object.keys(s).length)}return a},addTriple:function(e,t,r,n){t||(n=e.graph,r=e.object,t=e.predicate,e=e.subject),n=n||this.defaultGraph;var i=this._graphs[n];i||(i=this._graphs[n]={subjects:{},predicates:{},objects:{}},Object.freeze(i));var o=this._ids,s=this._entities;e=o[e]||(o[s[++this._id]=e]=this._id),t=o[t]||(o[s[++this._id]=t]=this._id),r=o[r]||(o[s[++this._id]=r]=this._id);var a=this._addToIndex(i.subjects,e,t,r);return this._addToIndex(i.predicates,t,r,e),this._addToIndex(i.objects,r,e,t),this._size=null,a},addTriples:function(e){for(var t=e.length-1;t>=0;t--)this.addTriple(e[t])},addPrefix:function(e,t){this._prefixes[e]=t},addPrefixes:function(e){for(var t in e)this.addPrefix(t,e[t])},removeTriple:function(e,t,r,n){t||(n=e.graph,r=e.object,t=e.predicate,e=e.subject),n=n||this.defaultGraph;var i,o=this._ids,s=this._graphs;if(!(e=o[e]))return!1;if(!(t=o[t]))return!1;if(!(r=o[r]))return!1;if(!(i=s[n]))return!1;var a,u;if(!(a=i.subjects[e]))return!1;if(!(u=a[t]))return!1;if(!(r in u))return!1;this._removeFromIndex(i.subjects,e,t,r),this._removeFromIndex(i.predicates,t,r,e),this._removeFromIndex(i.objects,r,e,t),null!==this._size&&this._size--;for(e in i.subjects)return!0;return delete s[n],!0},removeTriples:function(e){for(var t=e.length-1;t>=0;t--)this.removeTriple(e[t])},find:function(e,t,r,n){var o=this._prefixes;return this.findByIRI(i(e,o),i(t,o),i(r,o),i(n,o))},findByIRI:function(e,t,r,n){var i,o,s,a,u=[],l={},c=this._ids;n?l[n]=this._graphs[n]:l=this._graphs;for(var f in l)if(i=l[f]){if(e&&!(o=c[e]))return u;if(t&&!(s=c[t]))return u;if(r&&!(a=c[r]))return u;o?a?u.push(this._findInIndex(i.objects,a,o,s,"object","subject","predicate",f)):u.push(this._findInIndex(i.subjects,o,s,null,"subject","predicate","object",f)):s?u.push(this._findInIndex(i.predicates,s,a,null,"predicate","object","subject",f)):a?u.push(this._findInIndex(i.objects,a,null,null,"object","subject","predicate",f)):u.push(this._findInIndex(i.subjects,null,null,null,"subject","predicate","object",f))}return 1===u.length?u[0]:u.concat.apply([],u)},count:function(e,t,r,n){var o=this._prefixes;return this.countByIRI(i(e,o),i(t,o),i(r,o),i(n,o))},countByIRI:function(e,t,r,n){n=n||this.defaultGraph;var i=this._graphs[n],o=this._ids;return i?e&&!(e=o[e])?0:t&&!(t=o[t])?0:r&&!(r=o[r])?0:e?r?this._countInIndex(i.objects,r,e,t):this._countInIndex(i.subjects,e,t,r):t?this._countInIndex(i.predicates,t,r,e):this._countInIndex(i.objects,r,e,t):0},createBlankNode:function(e){var t,r;if(e)for(t=e="_:"+e,r=1;this._ids[t];)t=e+r++;else do{t="_:b"+this._blankNodeIndex++}while(this._ids[t]);return this._ids[t]=++this._id,t}},e.exports=n},function(e,t,r){function n(e){if(!(this instanceof n))return new n(e);i.call(this,{decodeStrings:!0}),this._readableState.objectMode=!0;var t=this,r=new s(e);r.parse(function(e,r){r&&t.push(r)||e&&t.emit("error",e)},this.emit.bind(this,"prefix")),this._transform=function(e,t,n){r.addChunk(e),n()},this._flush=function(e){r.end(),e()}}var i=r(100).Transform,o=r(104),s=r(58);o.inherits(n,i),e.exports=n},function(e,t,r){function n(e){if(!(this instanceof n))return new n(e);i.call(this,{encoding:"utf8"}),this._writableState.objectMode=!0;var t=this,r=new s({write:function(e,r,n){t.push(e),n&&n()},end:function(e){t.push(null),e&&e()}},e);this._transform=function(e,t,n){r.addTriple(e,n)},this._flush=function(e){r.end(e)}}var i=r(100).Transform,o=r(104),s=r(60);o.inherits(n,i),e.exports=n},function(e,t,r){function n(e){if(e&&!u(e))throw new Error("Unknown encoding: "+e)}function i(e){return e.toString(this.encoding)}function o(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function s(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var a=r(23).Buffer,u=a.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},l=t.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),n(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=s;break;default:return void(this.write=i)}this.charBuffer=new a(6),this.charReceived=0,this.charLength=0};l.prototype.write=function(e){for(var t="";this.charLength;){var r=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";e=e.slice(r,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var n=t.charCodeAt(t.length-1);if(!(n>=55296&&n<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var i=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,i),i-=this.charReceived),t+=e.toString(this.encoding,0,i);var i=t.length-1,n=t.charCodeAt(i);if(n>=55296&&n<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),e.copy(this.charBuffer,0,0,o),t.substring(0,i)}return t},l.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var r=e[e.length-t];if(1==t&&r>>5==6){this.charLength=2;break}if(t<=2&&r>>4==14){this.charLength=3;break}if(t<=3&&r>>3==30){this.charLength=4;break}}this.charReceived=t},l.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var r=this.charReceived,n=this.charBuffer,i=this.encoding;t+=n.slice(0,r).toString(i)}return t}},function(e,t,r){var n=r(0),i=r(63).Tree;Lexicon=function(e){var t=this;this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri},this.oidCounter=1,n.seq(function(e){new i(2,function(r){t.uris=r,e()})},function(e){new i(2,function(r){t.literals=r,e()})},function(e){new i(2,function(r){t.knownGraphs=r,e()})},function(e){new i(2,function(r){t.oidUris=r,e()})},function(e){new i(2,function(r){t.oidLiterals=r,e()})},function(e){new i(2,function(r){t.oidBlanks=r,e()})})(function(){null!=e&&e(t)})},Lexicon.prototype.registerGraph=function(e,t,r){e!=this.defaultGraphOid?this.knownGraphs.insert(e,t,function(){r()}):r()},Lexicon.prototype.registeredGraphs=function(e,t){var r=[];this.knownGraphs.walk(function(t){!0===e?r.push(t.data):r.push(t.key)},function(){t(r)})},Lexicon.prototype.registerUri=function(e,t){var r=this;e===this.defaultGraphUri?t(this.defaultGraphOid):this.uris.search(e,function(i){if(null==i){var o=r.oidCounter,s="u"+o;r.oidCounter++,n.seq(function(t){r.uris.insert(e,[o,0],function(){t()})},function(t){r.oidUris.insert(s,e,function(){t()})})(function(){t(o)})}else o=i[0],i[1]=i[1]+1,t(o)})},Lexicon.prototype.resolveUri=function(e,t){e===this.defaultGraphUri?t(this.defaultGraphOid):this.uris.search(e,function(e){t(null!=e?e[0]:-1)})},Lexicon.prototype.resolveUriCost=function(e,t){e===this.defaultGraphUri?t(0):this.uris.search(e,function(e){t(null!=e?e[1]:-1)})},Lexicon.prototype.registerBlank=function(e){var t=this.oidCounter;this.oidCounter++;var r=""+t;this.oidBlanks.insert(r,r,function(){e(t)})},Lexicon.prototype.resolveBlank=function(e,t){var r=this;this.oidBlanks.search(e,function(e){if(null!=e)t(e);else{var n=r.oidCounter;this.oidCounter++,t(""+n)}})},Lexicon.prototype.resolveBlankCost=function(e,t){t(0)},Lexicon.prototype.registerLiteral=function(e,t){var r=this;this.literals.search(e,function(i){if(null==i){var o=r.oidCounter,s="l"+o;r.oidCounter++,n.seq(function(t){r.literals.insert(e,[o,0],function(){t()})},function(t){r.oidLiterals.insert(s,e,function(){t()})})(function(){t(o)})}else{var o=i[0];i[1]=i[1]+1,t(o)}})},Lexicon.prototype.resolveLiteral=function(e,t){this.literals.search(e,function(e){t(null!=e?e[0]:-1)})},Lexicon.prototype.resolveLiteralCost=function(e,t){this.literals.search(e,function(e){t(null!=e?e[1]:-1)})},Lexicon.prototype.parseLiteral=function(e){var t=e.lastIndexOf("@");if(-1!=t&&'"'===e[t-1]&&null!=e.substring(t,e.length).match(/^@[a-zA-Z\-]+$/g)){var r=e.substring(1,t-1);return{token:"literal",value:r,lang:e.substring(t+1,e.length)}}var t=e.lastIndexOf("^^");if(-1!=t&&'"'===e[t-1]&&"<"===e[t+2]&&">"===e[e.length-1]){var r=e.substring(1,t-1);return{token:"literal",value:r,type:e.substring(t+3,e.length-1)}}var r=e.substring(1,e.length-1);return{token:"literal",value:r}},Lexicon.prototype.parseUri=function(e){return{token:"uri",value:e}},Lexicon.prototype.retrieve=function(e,t){var r=this;e===this.defaultGraphOid?t({token:"uri",value:this.defaultGraphUri,prefix:null,suffix:null,defaultGraph:!0}):n.seq(function(t,n){r.oidUris.search("u"+e,function(e){null!=e?n(null,r.parseUri(e)):n(null,null)})},function(t,n){null==t?r.oidLiterals.search("l"+e,function(e){null!=e?n(null,r.parseLiteral(e)):n(null,null)}):n(null,t)},function(t,n){null==t?r.oidBlanks.search(""+e,function(t){null!=t?n(null,{token:"blank",value:"_:"+e}):n(null,null)}):n(null,t)})(null,function(e,r){t(r)})},Lexicon.prototype.clear=function(e){var t=this;this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri},this.oidCounter=1,n.seq(function(e){new i(2,function(r){t.uris=r,e()})},function(e){new i(2,function(r){t.literals=r,e()})},function(e){new i(2,function(r){t.knownGraphs=r,e()})},function(e){new i(2,function(r){t.oidUris=r,e()})},function(e){new i(2,function(r){t.oidLiterals=r,e()})},function(e){new i(2,function(r){t.oidBlanks=r,e()})})(function(){null!=e&&e()})},Lexicon.prototype.unregister=function(e,t,r){var i=this;n.seq(function(r){i._unregisterTerm(e.subject.token,t.subject,r)},function(r){i._unregisterTerm(e.predicate.token,t.predicate,r)},function(r){i._unregisterTerm(e.object.token,t.object,r)},function(r){null!=e.graph?i._unregisterTerm(e.graph.token,t.graph,r):r()})(function(){r(!0)})},Lexicon.prototype._unregisterTerm=function(e,t,r){var i=this;if("uri"===e)if(t!=this.defaultGraphOid){var o="u"+t;i.oidUris.search(o,function(e){i.uris.search(e,function(s){var a=s[1];""+s[0]==""+t?0===a?n.seq(function(e){i.oidUris.delete(o,function(){e()})},function(t){i.uris.delete(e,function(){t()})},function(e){i.knownGraphs.delete(t,function(){e()})})(function(){r()}):i.uris.insert(e,[t,a-1],function(){r()}):r()})})}else r();else if("literal"===e){this.oidCounter++;var o="l"+t;i.oidLiterals.search(o,function(e){i.literals.search(e,function(s){var a=s[1];""+s[0]==""+t?0===a?n.seq(function(e){i.oidLiterals.delete(o,function(){e()})},function(t){i.literals.delete(e,function(){t()})})(function(){r()}):i.literals.insert(e,[t,a-1],function(){r()}):r()})})}else"blank"===e?i.oidBlanks.delete(""+t,function(){r()}):r()},e.exports={Lexicon:Lexicon}},function(e,t,r){var n=r(0),i=n,o=r(0);QueryFilters={};var s="http://www.w3.org/2001/XMLSchema#";QueryFilters.checkFilters=function(e,t,r,n,i,s,a){var u=[];e.filter&&"function"!=typeof e.filter&&(u=e.filter);var l=[];if(null==u||0===u.length||null!=e.length)return a(t);QueryFilters.preprocessExistentialFilters(u,t,s,n,i,function(e){o.eachSeries(e,function(e,o){QueryFilters.run(e.value,t,r,n,i,s,function(e){for(var r=[],n=0;n<e.length;n++){var i=e[n];null!=i.__nullify__?l.push(i):r.push(i)}t=r,o()})},function(){a(t.concat(l))})})},QueryFilters.preprocessExistentialFilters=function(e,t,r,n,s,a){var u=[];o.eachSeries(e,function(e,a){if("builtincall"!==e.value.expressionType||"exists"!==e.value.builtincall&&"notexists"!==e.value.builtincall)if("conditionalor"===e.value.expressionType||"conditionaland"===e.value.expressionType){var l=i.map(e.value.operands,function(e){return{value:e}});QueryFilters.preprocessExistentialFilters(l,t,r,n,s,function(t){e.value.operands=t.map(function(e){return e.value}),u.push(e),a()})}else if("multiplicativeexpression"===e.value.expressionType){var l=i.map(e.value.factors,function(e){return{value:e}});QueryFilters.preprocessExistentialFilters(l,t,r,n,s,function(t){e.value.factors=t.map(function(e){return e.value}),u.push(e),a()})}else if("additiveexpression"===e.value.expressionType){var l=i.map(e.value.summands,function(e){return{value:e}});QueryFilters.preprocessExistentialFilters(l,t,r,n,s,function(t){e.value.summands=t.map(function(e){return e.value}),u.push(e),a()})}else if("relationalexpression"===e.value.expressionType){var l=[{value:e.value.op1},{value:e.value.op2}];QueryFilters.preprocessExistentialFilters(l,t,r,n,s,function(t){e.value.op1=t[0].value,e.value.op2=t[1].value,u.push(e),a()})}else if("irireforfunction"===e.value.expressionType||"custom"===e.value.expressionType)if(null!=e.value.args){var l=i.map(e.value.args,function(e){return{value:e}});QueryFilters.preprocessExistentialFilters(l,t,r,n,s,function(t){e.value.args=t.map(function(e){return e.value}),u.push(e),a()})}else u.push(e),a();else u.push(e),a();else{var c=e.value.builtincall,f=e.value.args,p={};r.copyDenormalizedBindings(t,s.outCache,function(t){o.eachSeries(t,function(e,t){var o=i.clone(f[0],!0),a=r.abstractQueryTree.parseSelect({pattern:o},e);a=r.abstractQueryTree.bind(a.pattern,e),r.executeSelectUnit([{kind:"*"}],n,a,s,function(r){var n=null;n="exists"===c?QueryFilters.ebvBoolean(0!==r.length):QueryFilters.ebvBoolean(0===r.length);var i=[];for(var o in e)i.push(JSON.stringify(e[o]));i=i.sort().join(""),p[i]=n,t()})},function(){e.value.origArgs=e.value.args,e.value.args=p,u.push(e),a()})})}},function(){a(u)})},QueryFilters.boundVars=function(e){if(null==e.expressionType)throw"Cannot find bound expressions in a no expression token";var t=e.expressionType;if("relationalexpression"==t){var r=e.op1,n=e.op2;return QueryFilters.boundVars(r)+QueryFilters.boundVars(n)}if("conditionalor"==t||"conditionaland"==t){for(var i=[],o=0;o<e.operands;o++)i=i.concat(QueryFilters.boundVars(e.operands[o]));return i}if("builtincall"==t){if(null==e.args)return[];for(var s=[],o=0;o<e.args.length;o++)s=s.concat(QueryFilters.boundVars(e.args[o]));return s}if("multiplicativeexpression"==t){for(var s=QueryFilters.boundVars(e.factor),o=0;o<e.factors.length;o++)s=s.concat(QueryFilters.boundVars(e.factors[o].expression));return s}if("additiveexpression"==t){for(var s=QueryFilters.boundVars(e.summand),o=0;o<e.summands.length;o++)s=s.concat(QueryFilters.boundVars(e.summands[o].expression));return s}if("regex"==t){var s=QueryFilters.boundVars(e.expression1);return s.concat(QueryFilters.boundVars(e.expression2))}return"unaryexpression"==t?QueryFilters.boundVars(e.expression):"atomic"==t?"var"==e.primaryexpression?[e.value]:[]:void 0},QueryFilters.run=function(e,t,r,n,i,o,s){o.copyDenormalizedBindings(t,i.outCache,function(a){for(var u=[],l=0;l<t.length;l++){var c=a[l],f=QueryFilters.runFilter(e,c,o,n,i),f=QueryFilters.ebv(f);if(QueryFilters.isEbvError(f)){if(r){var p={__nullify__:!0,bindings:t[l]};u.push(p)}}else if(!0===f)u.push(t[l]);else if(r){var p={__nullify__:!0,bindings:t[l]};u.push(p)}}s(u)})},QueryFilters.collect=function(e,t,r,n,i,o){i.copyDenormalizedBindings(t,n.outCache,function(s){for(var a=[],u=0;u<s.length;u++){var l=s[u],c=QueryFilters.runFilter(e,l,i,r,n);a.push({binding:t[u],value:c})}return o(a)})},QueryFilters.runDistinct=function(e,t){},QueryFilters.runAggregator=function(e,t,r,i,o){if(null==t||0===t.length)return QueryFilters.ebvError();if("variable"===e.token&&"var"==e.kind)return t[0][e.value.value];if("variable"===e.token&&"aliased"===e.kind){if("atomic"===e.expression.expressionType&&"var"===e.expression.primaryexpression)return t[0][e.expression.value.value];if("aggregate"===e.expression.expressionType){if("max"===e.expression.aggregateType){for(var a=null,u=0;u<t.length;u++){var l=t[u],c=QueryFilters.runFilter(e.expression.expression,l,r,i,o);QueryFilters.isEbvError(c)||(null===a?a=c:!0===QueryFilters.runLtFunction(a,c).value&&(a=c))}return null===a?QueryFilters.ebvError():a}if("min"===e.expression.aggregateType){for(var f=null,u=0;u<t.length;u++){var l=t[u],c=QueryFilters.runFilter(e.expression.expression,l,r,i,o);QueryFilters.isEbvError(c)||(null===f?f=c:!0===QueryFilters.runGtFunction(f,c).value&&(f=c))}return null===f?QueryFilters.ebvError():f}if("count"===e.expression.aggregateType){var p={},h=0;if("*"===e.expression.expression)if(null!=e.expression.distinct&&""!=e.expression.distinct)for(var u=0;u<t.length;u++){var l=t[u],d=n.hashTerm(l);null==p[d]&&(p[d]=!0,h++)}else h=t.length;else for(var u=0;u<t.length;u++){var l=t[u],c=QueryFilters.runFilter(e.expression.expression,l,r,i,o);if(!QueryFilters.isEbvError(c))if(null!=e.expression.distinct&&""!=e.expression.distinct){var d=n.hashTerm(c);null==p[d]&&(p[d]=!0,h++)}else h++}return{token:"literal",type:s+"integer",value:""+h}}if("avg"===e.expression.aggregateType){for(var p={},v={token:"literal",type:s+"integer",value:"0"},h=0,u=0;u<t.length;u++){var l=t[u],c=QueryFilters.runFilter(e.expression.expression,l,r,i,o);if(!QueryFilters.isEbvError(c))if(null!=e.expression.distinct&&""!=e.expression.distinct){var d=n.hashTerm(c);null==p[d]&&(p[d]=!0,QueryFilters.isNumeric(c)&&(v=QueryFilters.runSumFunction(v,c),h++))}else QueryFilters.isNumeric(c)&&(v=QueryFilters.runSumFunction(v,c),h++)}var y=QueryFilters.runDivFunction(v,{token:"literal",type:s+"integer",value:""+h});return y.value=""+y.value,y}if("sum"===e.expression.aggregateType){for(var p={},v={token:"literal",type:s+"integer",value:"0"},u=0;u<t.length;u++){var l=t[u],c=QueryFilters.runFilter(e.expression.expression,l,r,i,o);if(!QueryFilters.isEbvError(c))if(null!=e.expression.distinct&&""!=e.expression.distinct){var d=n.hashTerm(c);null==p[d]&&(p[d]=!0,QueryFilters.isNumeric(c)&&(v=QueryFilters.runSumFunction(v,c)))}else QueryFilters.isNumeric(c)&&(v=QueryFilters.runSumFunction(v,c))}return v.value=""+v.value,v}var c=QueryFilters.runFilter(aggregate.expression,t[0],i,{blanks:{},outCache:{}});return c}}},QueryFilters.runFilter=function(e,t,r,i,o){if(null!=e.expressionType){var s=e.expressionType;if("relationalexpression"==s){var a=QueryFilters.runFilter(e.op1,t,r,i,o),u=QueryFilters.runFilter(e.op2,t,r,i,o);return QueryFilters.runRelationalFilter(e,a,u,t,r,i,o)}if("conditionalor"==s)return QueryFilters.runOrFunction(e,t,r,i,o);if("conditionaland"==s)return QueryFilters.runAndFunction(e,t,r,i,o);if("additiveexpression"==s)return QueryFilters.runAddition(e.summand,e.summands,t,r,i,o);if("builtincall"==s)return QueryFilters.runBuiltInCall(e.builtincall,e.args,t,r,i,o);if("multiplicativeexpression"==s)return QueryFilters.runMultiplication(e.factor,e.factors,t,r,i,o);if("unaryexpression"==s)return QueryFilters.runUnaryExpression(e.unaryexpression,e.expression,t,r,i,o);if("irireforfunction"==s)return QueryFilters.runIriRefOrFunction(e.iriref,e.args,t,r,i,o);if("regex"==s)return QueryFilters.runRegex(e.text,e.pattern,e.flags,t,r,i,o);if("custom"==s)return QueryFilters.runBuiltInCall(e.name,e.args,t,r,i,o);if("atomic"==s)return"var"==e.primaryexpression?t[e.value.value]:"object"!=typeof e.value?e.value:null==e.value.type||"object"!=typeof e.value.type?e.value:(e.value.type=n.lexicalFormBaseUri(e.value.type,o),e.value);throw"Unknown filter expression type"}throw"Cannot find bound expressions in a no expression token"},QueryFilters.isRDFTerm=function(e){return null!=e&&!!(e.token&&"literal"==e.token||e.token&&"uri"==e.token||e.token&&"blank"==e.token)},QueryFilters.RDFTermEquality=function(e,t,r,i){return"literal"===e.token&&"literal"===t.token?e.lang==t.lang&&e.type==t.type&&e.value==t.value||(null!=e.type&&null!=t.type?QueryFilters.ebvError():QueryFilters.isSimpleLiteral(e)&&null!=t.type?QueryFilters.ebvError():!(!QueryFilters.isSimpleLiteral(t)||null==e.type)&&QueryFilters.ebvError()):"uri"===e.token&&"uri"===t.token?n.lexicalFormBaseUri(e,i)==n.lexicalFormBaseUri(t,i):"blank"===e.token&&"blank"===t.token&&e.value==t.value},QueryFilters.isInteger=function(e){return null!=e&&("literal"===e.token&&(e.type==s+"integer"||e.type==s+"decimal"||e.type==s+"double"||e.type==s+"nonPositiveInteger"||e.type==s+"negativeInteger"||e.type==s+"long"||e.type==s+"int"||e.type==s+"short"||e.type==s+"byte"||e.type==s+"nonNegativeInteger"||e.type==s+"unsignedLong"||e.type==s+"unsignedInt"||e.type==s+"unsignedShort"||e.type==s+"unsignedByte"||e.type==s+"positiveInteger"))},QueryFilters.isFloat=function(e){return null!=e&&("literal"===e.token&&e.type==s+"float")},QueryFilters.isDecimal=function(e){return null!=e&&("literal"===e.token&&e.type==s+"decimal")},QueryFilters.isDouble=function(e){return null!=e&&("literal"===e.token&&e.type==s+"double")},QueryFilters.isNumeric=function(e){return null!=e&&("literal"===e.token&&(e.type==s+"integer"||e.type==s+"decimal"||e.type==s+"float"||e.type==s+"double"||e.type==s+"nonPositiveInteger"||e.type==s+"negativeInteger"||e.type==s+"long"||e.type==s+"int"||e.type==s+"short"||e.type==s+"byte"||e.type==s+"nonNegativeInteger"||e.type==s+"unsignedLong"||e.type==s+"unsignedInt"||e.type==s+"unsignedShort"||e.type==s+"unsignedByte"||e.type==s+"positiveInteger"))},QueryFilters.isSimpleLiteral=function(e){return!(!e||"literal"!=e.token)&&(null==e.type&&null==e.lang)},QueryFilters.isXsdType=function(e,t){return!(!t||"literal"!=t.token)&&t.type==s+""+e},QueryFilters.ebv=function(e){if(null==e||QueryFilters.isEbvError(e))return QueryFilters.ebvError();if(e.token&&"literal"===e.token){if(e.type==s+"integer"||e.type==s+"decimal"||e.type==s+"double"||e.type==s+"nonPositiveInteger"||e.type==s+"negativeInteger"||e.type==s+"long"||e.type==s+"int"||e.type==s+"short"||e.type==s+"byte"||e.type==s+"nonNegativeInteger"||e.type==s+"unsignedLong"||e.type==s+"unsignedInt"||e.type==s+"unsignedShort"||e.type==s+"unsignedByte"||e.type==s+"positiveInteger"){var t=parseFloat(e.value);return!isNaN(t)&&0!=parseFloat(e.value)}return e.type===s+"boolean"?"true"===e.value||!0===e.value||"True"===e.value:e.type===s+"string"?""!=e.value:e.type===s+"dateTime"?null!=new Date(e.value):QueryFilters.isEbvError(e)?e:null==e.type?""!=e.value:QueryFilters.ebvError()}return!0===e.value},QueryFilters.effectiveBooleanValue=QueryFilters.ebv,QueryFilters.ebvTrue=function(){return{token:"literal",type:s+"boolean",value:!0}},QueryFilters.ebvFalse=function(){return{token:"literal",type:s+"boolean",value:!1}},QueryFilters.ebvError=function(){return{token:"literal",type:"https://github.com/antoniogarrote/js-tools/types#error",value:null}},QueryFilters.isEbvError=function(e){return"object"==typeof e&&null!=e&&"https://github.com/antoniogarrote/js-tools/types#error"===e.type},QueryFilters.ebvBoolean=function(e){return QueryFilters.isEbvError(e)?e:!0===e?QueryFilters.ebvTrue():QueryFilters.ebvFalse()},QueryFilters.runRelationalFilter=function(e,t,r,n,i,o,s){var a=e.operator;if("="===a)return QueryFilters.runEqualityFunction(t,r,n,i,o,s);if("!="===a){var u=QueryFilters.runEqualityFunction(t,r,n,i,o,s);return QueryFilters.isEbvError(u)?u:(u.value=!u.value,u)}if("<"===a)return QueryFilters.runLtFunction(t,r,n);if(">"===a)return QueryFilters.runGtFunction(t,r,n);if("<="===a)return QueryFilters.runLtEqFunction(t,r,n);if(">="===a)return QueryFilters.runGtEqFunction(t,r,n);throw"Error applying relational filter, unknown operator"},QueryFilters.effectiveTypeValue=function(e){if("literal"!=e.token)throw console.log("not implemented yet"),console.log(e),"value not supported in operations yet";if(e.type==s+"integer"){var t=parseInt(e.value);return t}if(e.type==s+"decimal"){var t=parseFloat(e.value);return t}if(e.type==s+"float"){var t=parseFloat(e.value);return t}if(e.type==s+"double"){var t=parseFloat(e.value);return t}if(e.type==s+"nonPositiveInteger"){var t=parseFloat(e.value);return t}if(e.type==s+"negativeInteger"){var t=parseInt(e.value);return t}if(e.type==s+"long"){var t=parseInt(e.value);return t}if(e.type==s+"int"){var t=parseInt(e.value);return t}if(e.type==s+"short"){var t=parseInt(e.value);return t}if(e.type==s+"byte"){var t=parseInt(e.value);return t}if(e.type==s+"nonNegativeInteger"){var t=parseInt(e.value);return t}if(e.type==s+"unsignedLong"){var t=parseInt(e.value);return t}if(e.type==s+"unsignedInt"){var t=parseInt(e.value);return t}if(e.type==s+"unsignedShort"){var t=parseInt(e.value);return t}if(e.type==s+"unsignedByte"){var t=parseInt(e.value);return t}if(e.type==s+"positiveInteger"){var t=parseInt(e.value);return t}if(e.type!=s+"date"&&e.type!=s+"dateTime")return e.type==s+"boolean"?!0===e.value||"true"===e.value||"1"===e.value||1===e.value||!0===e.value||!1!==e.value&&"false"!==e.value&&"0"!==e.value&&0!==e.value&&!1!==e.value&&void 0:e.type==s+"string"?null===e.value||void 0===e.value?void 0:""+e.value:(e.type,e.value);try{return n.parseISO8601(e.value)}catch(e){return null}},QueryFilters.runOrFunction=function(e,t,r,n,i){for(var o=null,s=0;s<e.operands.length;s++){var a=QueryFilters.runFilter(e.operands[s],t,r,n,i);0==QueryFilters.isEbvError(a)&&(a=QueryFilters.ebv(a)),null==o?o=a:QueryFilters.isEbvError(a)?o=QueryFilters.isEbvError(o)?QueryFilters.ebvError():!0===o||QueryFilters.ebvError():!0===a?o=!0:QueryFilters.isEbvError(o)&&(o=QueryFilters.ebvError())}return QueryFilters.ebvBoolean(o)},QueryFilters.runAndFunction=function(e,t,r,n,i){for(var o=null,s=0;s<e.operands.length;s++){var a=QueryFilters.runFilter(e.operands[s],t,r,n,i);0==QueryFilters.isEbvError(a)&&(a=QueryFilters.ebv(a)),null==o?o=a:QueryFilters.isEbvError(a)?o=QueryFilters.isEbvError(o)?QueryFilters.ebvError():!0===o&&QueryFilters.ebvError():!0===a?QueryFilters.isEbvError(o)&&(o=QueryFilters.ebvError()):o=!1}return QueryFilters.ebvBoolean(o)},QueryFilters.runEqualityFunction=function(e,t,r,i,o,s){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(t)){var a=QueryFilters.effectiveTypeValue(e),u=QueryFilters.effectiveTypeValue(t);return isNaN(a)||isNaN(u)?QueryFilters.ebvBoolean(QueryFilters.RDFTermEquality(e,t,i,s)):QueryFilters.ebvBoolean(a==u)}if((QueryFilters.isSimpleLiteral(e)||QueryFilters.isXsdType("string",e))&&(QueryFilters.isSimpleLiteral(t)||QueryFilters.isXsdType("string",t)))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)==QueryFilters.effectiveTypeValue(t));if(QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)==QueryFilters.effectiveTypeValue(t));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",t)||QueryFilters.isXsdType("date",t))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",t))return QueryFilters.ebvFalse();if(QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",t))return QueryFilters.ebvFalse();var l=n.compareDateComponents(e.value,t.value);return null!=l?0==l?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.isRDFTerm(e)&&QueryFilters.isRDFTerm(t)?QueryFilters.ebvBoolean(QueryFilters.RDFTermEquality(e,t,i,s)):QueryFilters.ebvFalse()},QueryFilters.runGtFunction=function(e,t,r){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>QueryFilters.effectiveTypeValue(t));if(QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>QueryFilters.effectiveTypeValue(t));if(QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>QueryFilters.effectiveTypeValue(t));if(QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>QueryFilters.effectiveTypeValue(t));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",t)||QueryFilters.isXsdType("date",t))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",t))return QueryFilters.ebvFalse();if(QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",t))return QueryFilters.ebvFalse();var i=n.compareDateComponents(e.value,t.value);return null!=i?1==i?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runTotalGtFunction=function(e,t){return QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t)?QueryFilters.ebvError():QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(t)||QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(t)||QueryFilters.isXsdType("string",e)&&QueryFilters.isSimpleLiteral("string",t)||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isSimpleLiteral("boolean",t)||QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isSimpleLiteral("dateTime",t)?QueryFilters.runGtFunction(e,t,[]):e.token&&"uri"===e.token&&t.token&&"uri"===t.token?QueryFilters.ebvBoolean(e.value>t.value):e.token&&"literal"===e.token&&t.token&&"literal"===t.token?QueryFilters.ebvBoolean(""+e.value+e.type+e.lang>""+t.value+t.type+t.lang):e.token&&"blank"===e.token&&t.token&&"blank"===t.token?QueryFilters.ebvBoolean(e.value>t.value):e.value&&t.value?QueryFilters.ebvBoolean(e.value>t.value):QueryFilters.ebvTrue()},QueryFilters.runLtFunction=function(e,t,r){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<QueryFilters.effectiveTypeValue(t));if(QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<QueryFilters.effectiveTypeValue(t));if(QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<QueryFilters.effectiveTypeValue(t));if(QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<QueryFilters.effectiveTypeValue(t));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",t)||QueryFilters.isXsdType("date",t))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",t))return QueryFilters.ebvFalse();if(QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",t))return QueryFilters.ebvFalse();var i=n.compareDateComponents(e.value,t.value);return null!=i?-1==i?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runGtEqFunction=function(e,t,r){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>=QueryFilters.effectiveTypeValue(t));if(QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>=QueryFilters.effectiveTypeValue(t));if(QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>=QueryFilters.effectiveTypeValue(t));if(QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>=QueryFilters.effectiveTypeValue(t));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",t)||QueryFilters.isXsdType("date",t))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",t))return QueryFilters.ebvFalse();if(QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",t))return QueryFilters.ebvFalse();var i=n.compareDateComponents(e.value,t.value);return null!=i?-1!=i?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runLtEqFunction=function(e,t,r){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<=QueryFilters.effectiveTypeValue(t));if(QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<=QueryFilters.effectiveTypeValue(t));if(QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<=QueryFilters.effectiveTypeValue(t));if(QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<=QueryFilters.effectiveTypeValue(t));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",t)||QueryFilters.isXsdType("date",t))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",t))return QueryFilters.ebvFalse();if(QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",t))return QueryFilters.ebvFalse();var i=n.compareDateComponents(e.value,t.value);return null!=i?1!=i?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runAddition=function(e,t,r,n,i,o){var s=QueryFilters.runFilter(e,r,n,i,o);if(QueryFilters.isEbvError(s))return QueryFilters.ebvError();var a=s;if(QueryFilters.isNumeric(s)){for(var u=0;u<t.length;u++){var l=QueryFilters.runFilter(t[u].expression,r,n,i,o);if(!QueryFilters.isNumeric(l))return QueryFilters.ebvFalse();"+"===t[u].operator?a=QueryFilters.runSumFunction(a,l):"-"===t[u].operator&&(a=QueryFilters.runSubFunction(a,l))}return a}return QueryFilters.ebvFalse()},QueryFilters.runSumFunction=function(e,t){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t))return QueryFilters.ebvError();var r=QueryFilters.effectiveTypeValue(e)+QueryFilters.effectiveTypeValue(t);return QueryFilters.isDouble(e)||QueryFilters.isDouble(t)?{token:"literal",type:s+"double",value:r}:QueryFilters.isFloat(e)||QueryFilters.isFloat(t)?{token:"literal",type:s+"float",value:r}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(t)?{token:"literal",type:s+"decimal",value:r}:{token:"literal",type:s+"integer",value:r}},QueryFilters.runSubFunction=function(e,t){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t))return QueryFilters.ebvError();var r=QueryFilters.effectiveTypeValue(e)-QueryFilters.effectiveTypeValue(t);return QueryFilters.isDouble(e)||QueryFilters.isDouble(t)?{token:"literal",type:s+"double",value:r}:QueryFilters.isFloat(e)||QueryFilters.isFloat(t)?{token:"literal",type:s+"float",value:r}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(t)?{token:"literal",type:s+"decimal",value:r}:{token:"literal",type:s+"integer",value:r}},QueryFilters.runMultiplication=function(e,t,r,n,i,o){var s=QueryFilters.runFilter(e,r,n,i,o);if(QueryFilters.isEbvError(s))return s;var a=s;if(QueryFilters.isNumeric(s)){for(var u=0;u<t.length;u++){var l=QueryFilters.runFilter(t[u].expression,r,n,i,o);if(QueryFilters.isEbvError(l))return s;if(!QueryFilters.isNumeric(l))return QueryFilters.ebvFalse();"*"===t[u].operator?a=QueryFilters.runMulFunction(a,l):"/"===t[u].operator&&(a=QueryFilters.runDivFunction(a,l))}return a}return QueryFilters.ebvFalse()},QueryFilters.runMulFunction=function(e,t){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t))return QueryFilters.ebvError();var r=QueryFilters.effectiveTypeValue(e)*QueryFilters.effectiveTypeValue(t);return QueryFilters.isDouble(e)||QueryFilters.isDouble(t)?{token:"literal",type:s+"double",value:r}:QueryFilters.isFloat(e)||QueryFilters.isFloat(t)?{token:"literal",type:s+"float",value:r}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(t)?{token:"literal",type:s+"decimal",value:r}:{token:"literal",type:s+"integer",value:r}},QueryFilters.runDivFunction=function(e,t){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t))return QueryFilters.ebvError();var r=QueryFilters.effectiveTypeValue(e)/QueryFilters.effectiveTypeValue(t);return QueryFilters.isDouble(e)||QueryFilters.isDouble(t)?{token:"literal",type:s+"double",value:r}:QueryFilters.isFloat(e)||QueryFilters.isFloat(t)?{token:"literal",type:s+"float",value:r}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(t)?{token:"literal",type:s+"decimal",value:r}:{token:"literal",type:s+"integer",value:r}},QueryFilters.runBuiltInCall=function(e,t,r,n,i,o){if("notexists"===e||"exists"===e){var s=[];for(var a in r)s.push(JSON.stringify(r[a]));return s=s.sort().join(""),t[s]}for(var u=[],l=0;l<t.length;l++)if("var"===t[l].token)u.push(t[l]);else{var c=QueryFilters.runFilter(t[l],r,n,i,o);if(QueryFilters.isEbvError(c))return c;u.push(c)}if("str"===e)return"literal"===u[0].token?{token:"literal",type:null,value:""+u[0].value}:"uri"===u[0].token?{token:"literal",type:null,value:u[0].value}:QueryFilters.ebvFalse();if("lang"===e)return"literal"===u[0].token?null!=u[0].lang?{token:"literal",value:""+u[0].lang}:{token:"literal",value:""}:QueryFilters.ebvError();if("datatype"===e){if("literal"===u[0].token){var f=u[0];return null!=f.type?"string"==typeof f.type?{token:"uri",value:f.type,prefix:null,suffix:null}:f.type:null==f.lang?{token:"uri",value:"http://www.w3.org/2001/XMLSchema#string",prefix:null,suffix:null}:QueryFilters.ebvError()}return QueryFilters.ebvError()}if("isliteral"===e)return"literal"===u[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("isblank"===e)return"blank"===u[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("isuri"===e||"isiri"===e)return"uri"===u[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("sameterm"===e){var p=u[0],h=u[1],d=QueryFilters.RDFTermEquality(p,h,n,o);return QueryFilters.isEbvError(d)&&(d=!1),QueryFilters.ebvBoolean(d)}if("langmatches"===e){var v=u[0],y=u[1];return"literal"===v.token&&"literal"===y.token?"*"===y.value&&""!=v.value?QueryFilters.ebvTrue():QueryFilters.ebvBoolean(0===v.value.toLowerCase().indexOf(y.value.toLowerCase())):QueryFilters.ebvError()}if("bound"===e){var g=u[0].value;return null==g?QueryFilters.ebvError():null!=r[g]?QueryFilters.ebvTrue():QueryFilters.ebvFalse()}if(null!=n.customFns[e])return n.customFns[e](QueryFilters,u);throw"Builtin call "+e+" not implemented yet"},QueryFilters.runUnaryExpression=function(e,t,r,n,i,o){var s=QueryFilters.runFilter(t,r,n,i,o);if(QueryFilters.isEbvError(s))return s;if("!"===e){var a=QueryFilters.ebv(s);return QueryFilters.isEbvError(a)?QueryFilters.ebvFalse():(a=!a,QueryFilters.ebvBoolean(a))}if("+"===e)return QueryFilters.isNumeric(s)?s:QueryFilters.ebvError();if("-"===e){if(QueryFilters.isNumeric(s)){var u={};for(var l in s)u[l]=s[l];return u.value=-u.value,u}return QueryFilters.ebvError()}},QueryFilters.runRegex=function(e,t,r,n,i,o,s){if(null==e)return QueryFilters.ebvError();if(e=QueryFilters.runFilter(e,n,i,o,s),null==t)return QueryFilters.ebvError();if(t=QueryFilters.runFilter(t,n,i,o,s),null!=r&&(r=QueryFilters.runFilter(r,n,i,o,s)),null==t||"literal"!==t.token||null!=r&&"literal"!==r.token)return QueryFilters.ebvError();if(t=t.value,r=null==r?null:r.value,null!=e&&"var"==e.token){if(null==n[e.value])return QueryFilters.ebvError();e=n[e.value]}else{if(null==e||"literal"!==e.token)return QueryFilters.ebvError();if(null!=e.type&&!QueryFilters.isXsdType("string",e))return QueryFilters.ebvError();e=e.value}var a;return a=null==r?new RegExp(t):new RegExp(t,r.toLowerCase()),a.exec(e)?QueryFilters.ebvTrue():QueryFilters.ebvFalse()},QueryFilters.normalizeLiteralDatatype=function(e,t,r){return null==e.value.type||"object"!=typeof e.value.type?e:(e.value.type=n.lexicalFormBaseUri(e.value.type,r),e)},QueryFilters.runIriRefOrFunction=function(e,t,r,i,o,a){if(null==t)return e;for(var u=[],l=0;l<t.length;l++)u.push(QueryFilters.runFilter(t[l],r,i,o,a));var c=n.lexicalFormBaseUri(e,a);if(c==s+"integer"||c==s+"decimal"||c==s+"double"||c==s+"nonPositiveInteger"||c==s+"negativeInteger"||c==s+"long"||c==s+"int"||c==s+"short"||c==s+"byte"||c==s+"nonNegativeInteger"||c==s+"unsignedLong"||c==s+"unsignedInt"||c==s+"unsignedShort"||c==s+"unsignedByte"||c==s+"positiveInteger"){var f=u[0];if("literal"!==f.token)return QueryFilters.ebvError();if(f=QueryFilters.normalizeLiteralDatatype(f,i,a),f.type==s+"integer"||f.type==s+"decimal"||f.type==s+"double"||f.type==s+"nonPositiveInteger"||f.type==s+"negativeInteger"||f.type==s+"long"||f.type==s+"int"||f.type==s+"short"||f.type==s+"byte"||f.type==s+"nonNegativeInteger"||f.type==s+"unsignedLong"||f.type==s+"unsignedInt"||f.type==s+"unsignedShort"||f.type==s+"unsignedByte"||f.type==s+"positiveInteger")return f.type=c,f;if("http://www.w3.org/2001/XMLSchema#boolean"==f.type)return 1==QueryFilters.ebv(f)?(f.type=c,f.value=1):(f.type=c,f.value=0),f;if("http://www.w3.org/2001/XMLSchema#float"==f.type||"http://www.w3.org/2001/XMLSchema#double"==f.type)return f.type=c,f.value=parseInt(f.value),f;if("http://www.w3.org/2001/XMLSchema#string"!=f.type&&null!=f.type)return QueryFilters.ebvError();if(f.value.split(".").length>2)return QueryFilters.ebvError();if(f.value.split("-").length>2)return QueryFilters.ebvError();if(f.value.split("/").length>2)return QueryFilters.ebvError();if(f.value.split("+").length>2)return QueryFilters.ebvError();if(c==s+"decimal"&&(-1!=f.value.indexOf("e")||-1!=f.value.indexOf("E")))return QueryFilters.ebvError();if(!(c!=s+"int"&&c!=s+"integer"||-1==f.value.indexOf("e")&&-1==f.value.indexOf("E")&&-1==f.value.indexOf(".")))return QueryFilters.ebvError();try{return f.value=parseInt(parseFloat(f.value)),isNaN(f.value)?QueryFilters.ebvError():(f.type=c,f)}catch(e){return QueryFilters.ebvError()}}else{if(c==s+"boolean"){var f=u[0];return"literal"===f.token&&null==f.type?"true"===f.value||"1"===f.value?QueryFilters.ebvTrue():"false"===f.value||"0"===f.value?QueryFilters.ebvFalse():QueryFilters.ebvError():"literal"===f.token?QueryFilters.isEbvError(f)?f:QueryFilters.ebvBoolean(f):QueryFilters.ebvError()}if(c==s+"string"){var f=u[0];return"literal"===f.token?(f=QueryFilters.normalizeLiteralDatatype(f,i,a),f.type==s+"integer"||f.type==s+"decimal"||f.type==s+"double"||f.type==s+"nonPositiveInteger"||f.type==s+"negativeInteger"||f.type==s+"long"||f.type==s+"int"||f.type==s+"short"||f.type==s+"byte"||f.type==s+"nonNegativeInteger"||f.type==s+"unsignedLong"||f.type==s+"unsignedInt"||f.type==s+"unsignedShort"||f.type==s+"unsignedByte"||f.type==s+"positiveInteger"||f.type==s+"float"?(f.type=c,f.value=""+f.value,f):f.type==s+"string"?f:f.type==s+"boolean"?(QueryFilters.ebv(f)?(f.type=c,f.value="true"):(f.type=c,f.value="false"),f):f.type==s+"dateTime"||f.type==s+"date"?(f.type=c,"string"!=typeof f.value&&(f.value=n.iso8601(f.value)),f):null==f.type?(f.value=""+f.value,f.type=c,f):QueryFilters.ebvError()):"uri"===f.token?{token:"literal",value:n.lexicalFormBaseUri(f,a),type:c,lang:null}:QueryFilters.ebvError()}if(c==s+"dateTime"||c==s+"date"){if(f=u[0],f.type==s+"dateTime"||f.type==s+"date")return f;if(f.type!=s+"string"&&null!=f.type)return QueryFilters.ebvError();try{return f.value=n.iso8601(n.parseISO8601(f.value)),f.type=c,f}catch(e){return QueryFilters.ebvError()}}else{if(c!=s+"float")return null!=i.customFns[c]?i.customFns[c](QueryFilters,u):QueryFilters.ebvError();var f=u[0];if("literal"!==f.token)return QueryFilters.ebvError();if(f=QueryFilters.normalizeLiteralDatatype(f,i,a),"http://www.w3.org/2001/XMLSchema#decimal"==f.type||"http://www.w3.org/2001/XMLSchema#int"==f.type)return f.type=c,f.value=parseFloat(f.value),f;if("http://www.w3.org/2001/XMLSchema#boolean"==f.type)return 1==QueryFilters.ebv(f)?(f.type=c,f.value=1):(f.type=c,f.value=0),f;if("http://www.w3.org/2001/XMLSchema#float"==f.type||"http://www.w3.org/2001/XMLSchema#double"==f.type)return f.type=c,f.value=parseFloat(f.value),f;if("http://www.w3.org/2001/XMLSchema#string"==f.type)try{return f.value=parseFloat(f.value),isNaN(f.value)?QueryFilters.ebvError():(f.type=c,f)}catch(e){return QueryFilters.ebvError()}else{if(null!=f.type)return QueryFilters.ebvError();if(f.value.split(".").length>2)return QueryFilters.ebvError();if(f.value.split("-").length>2)return QueryFilters.ebvError();if(f.value.split("/").length>2)return QueryFilters.ebvError();if(f.value.split("+").length>2)return QueryFilters.ebvError();try{return f.value=parseFloat(f.value),isNaN(f.value)?QueryFilters.ebvError():(f.type=c,f)}catch(e){return QueryFilters.ebvError()}}}}},e.exports={QueryFilters:QueryFilters}},function(e,t,r){"use strict";(function(t){function n(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?F(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}function i(e,t){T=T||r(19),e=e||{},this.objectMode=!!e.objectMode,t instanceof T&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i,this.highWaterMark=~~this.highWaterMark,this.buffer=new D,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(Q||(Q=r(94).StringDecoder),this.decoder=new Q(e.encoding),this.encoding=e.encoding)}function o(e){if(T=T||r(19),!(this instanceof o))return new o(e);this._readableState=new i(e,this),this.readable=!0,e&&"function"==typeof e.read&&(this._read=e.read),j.call(this)}function s(e,t,r,n,i){var o=c(t,r);if(o)e.emit("error",o);else if(null===r)t.reading=!1,f(e,t);else if(t.objectMode||r&&r.length>0)if(t.ended&&!i){var s=new Error("stream.push() after EOF");e.emit("error",s)}else if(t.endEmitted&&i){var u=new Error("stream.unshift() after end event");e.emit("error",u)}else{var l;!t.decoder||i||n||(r=t.decoder.write(r),l=!t.objectMode&&0===r.length),i||(t.reading=!1),l||(t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&p(e))),d(e,t)}else i||(t.reading=!1);return a(t)}function a(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function u(e){return e>=M?e=M:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function l(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=u(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function c(e,t){var r=null;return N.isBuffer(t)||"string"==typeof t||null===t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}function f(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,p(e)}}function p(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(O("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?C(h,e):h(e))}function h(e){O("emit readable"),e.emit("readable"),w(e)}function d(e,t){t.readingMore||(t.readingMore=!0,C(v,e,t))}function v(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(O("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function y(e){return function(){var t=e._readableState;O("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&R(e,"data")&&(t.flowing=!0,w(e))}}function g(e){O("readable nexttick read 0"),e.read(0)}function b(e,t){t.resumeScheduled||(t.resumeScheduled=!0,C(m,e,t))}function m(e,t){t.reading||(O("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),w(e),t.flowing&&!t.reading&&e.read(0)}function w(e){var t=e._readableState;for(O("flow",t.flowing);t.flowing&&null!==e.read(););}function x(e,t){if(0===t.length)return null;var r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=k(e,t.buffer,t.decoder),r}function k(e,t,r){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?E(e,t):_(e,t),n}function E(e,t){var r=t.head,n=1,i=r.data;for(e-=i.length;r=r.next;){var o=r.data,s=e>o.length?o.length:e;if(s===o.length?i+=o:i+=o.slice(0,e),0===(e-=s)){s===o.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(s));break}++n}return t.length-=n,i}function _(e,t){var r=N.allocUnsafe(e),n=t.head,i=1;for(n.data.copy(r),e-=n.data.length;n=n.next;){var o=n.data,s=e>o.length?o.length:e;if(o.copy(r,r.length-e,0,s),0===(e-=s)){s===o.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(s));break}++i}return t.length-=i,r}function A(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,C(S,t,e))}function S(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function I(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}e.exports=o;var T,C=r(61),F=r(90);o.ReadableState=i;var R=(r(56).EventEmitter,function(e,t){return e.listeners(t).length}),j=r(99),N=r(66).Buffer,L=r(30);L.inherits=r(12);var P=r(197),O=void 0;O=P&&P.debuglog?P.debuglog("stream"):function(){};var Q,D=r(181);L.inherits(o,j);var B=["error","close","destroy","pause","resume"];o.prototype.push=function(e,t){var r=this._readableState;return r.objectMode||"string"!=typeof e||(t=t||r.defaultEncoding)!==r.encoding&&(e=N.from(e,t),t=""),s(this,r,e,t,!1)},o.prototype.unshift=function(e){return s(this,this._readableState,e,"",!0)},o.prototype.isPaused=function(){return!1===this._readableState.flowing},o.prototype.setEncoding=function(e){return Q||(Q=r(94).StringDecoder),this._readableState.decoder=new Q(e),this._readableState.encoding=e,this};var M=8388608;o.prototype.read=function(e){O("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return O("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?A(this):p(this),null;if(0===(e=l(e,t))&&t.ended)return 0===t.length&&A(this),null;var n=t.needReadable;O("need readable",n),(0===t.length||t.length-e<t.highWaterMark)&&(n=!0,O("length less than watermark",n)),t.ended||t.reading?(n=!1,O("reading or ended",n)):n&&(O("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=l(r,t)));var i;return i=e>0?x(e,t):null,null===i?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&A(this)),null!==i&&this.emit("data",i),i},o.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},o.prototype.pipe=function(e,r){function i(e){O("onunpipe"),e===p&&s()}function o(){O("onend"),e.end()}function s(){O("cleanup"),e.removeListener("close",l),e.removeListener("finish",c),e.removeListener("drain",g),e.removeListener("error",u),e.removeListener("unpipe",i),p.removeListener("end",o),p.removeListener("end",f),p.removeListener("data",a),b=!0,!h.awaitDrain||e._writableState&&!e._writableState.needDrain||g()}function a(t){O("ondata"),m=!1,!1!==e.write(t)||m||((1===h.pipesCount&&h.pipes===e||h.pipesCount>1&&-1!==I(h.pipes,e))&&!b&&(O("false write response, pause",p._readableState.awaitDrain),p._readableState.awaitDrain++,m=!0),p.pause())}function u(t){O("onerror",t),f(),e.removeListener("error",u),0===R(e,"error")&&e.emit("error",t)}function l(){e.removeListener("finish",c),f()}function c(){O("onfinish"),e.removeListener("close",l),f()}function f(){O("unpipe"),p.unpipe(e)}var p=this,h=this._readableState;switch(h.pipesCount){case 0:h.pipes=e;break;case 1:h.pipes=[h.pipes,e];break;default:h.pipes.push(e)}h.pipesCount+=1,O("pipe count=%d opts=%j",h.pipesCount,r);var d=(!r||!1!==r.end)&&e!==t.stdout&&e!==t.stderr,v=d?o:f;h.endEmitted?C(v):p.once("end",v),e.on("unpipe",i);var g=y(p);e.on("drain",g);var b=!1,m=!1;return p.on("data",a),n(e,"error",u),e.once("close",l),e.once("finish",c),e.emit("pipe",p),h.flowing||(O("pipe resume"),p.resume()),e},o.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var r=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<n;i++)r[i].emit("unpipe",this);return this}var o=I(t.pipes,e);return-1===o?this:(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},o.prototype.on=function(e,t){var r=j.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&p(this):C(g,this))}return r},o.prototype.addListener=o.prototype.on,o.prototype.resume=function(){var e=this._readableState;return e.flowing||(O("resume"),e.flowing=!0,b(this,e)),this},o.prototype.pause=function(){return O("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(O("pause"),this._readableState.flowing=!1,this.emit("pause")),this},o.prototype.wrap=function(e){var t=this._readableState,r=!1,n=this;e.on("end",function(){if(O("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&n.push(e)}n.push(null)}),e.on("data",function(i){if(O("wrapped data"),t.decoder&&(i=t.decoder.write(i)),(!t.objectMode||null!==i&&void 0!==i)&&(t.objectMode||i&&i.length)){n.push(i)||(r=!0,e.pause())}});for(var i in e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<B.length;o++)e.on(B[o],n.emit.bind(n,B[o]));return n._read=function(t){O("wrapped _read",t),r&&(r=!1,e.resume())},n},o._fromList=x}).call(t,r(5))},function(e,t,r){"use strict";function n(e){this.afterTransform=function(t,r){return i(e,t,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function i(e,t,r){var n=e._transformState;n.transforming=!1;var i=n.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,null!==r&&void 0!==r&&e.push(r),i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);a.call(this,e),this._transformState=new n(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e,r){s(t,e,r)}):s(t)})}function s(e,t,r){if(t)return e.emit("error",t);null!==r&&void 0!==r&&e.push(r);var n=e._writableState,i=e._transformState;if(n.length)throw new Error("Calling transform done when ws.length != 0");if(i.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}e.exports=o;var a=r(19),u=r(30);u.inherits=r(12),u.inherits(o,a),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,a.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")},o.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0}},function(e,t,r){e.exports=r(56).EventEmitter},function(e,t,r){function n(){i.call(this)}e.exports=n;var i=r(56).EventEmitter;r(12)(n,i),n.Readable=r(31),n.Writable=r(184),n.Duplex=r(179),n.Transform=r(183),n.PassThrough=r(182),n.Stream=n,n.prototype.pipe=function(e,t){function r(t){e.writable&&!1===e.write(t)&&l.pause&&l.pause()}function n(){l.readable&&l.resume&&l.resume()}function o(){c||(c=!0,e.end())}function s(){c||(c=!0,"function"==typeof e.destroy&&e.destroy())}function a(e){if(u(),0===i.listenerCount(this,"error"))throw e}function u(){l.removeListener("data",r),e.removeListener("drain",n),l.removeListener("end",o),l.removeListener("close",s),l.removeListener("error",a),e.removeListener("error",a),l.removeListener("end",u),l.removeListener("close",u),e.removeListener("close",u)}var l=this;l.on("data",r),e.on("drain",n),e._isStdio||t&&!1===t.end||(l.on("end",o),l.on("close",s));var c=!1;return l.on("error",a),e.on("error",a),l.on("end",u),l.on("close",u),e.on("close",u),e.emit("pipe",l),e}},function(e,t,r){(function(e){var n=r(186),i=r(195),o=r(120),s=r(103),a=t;a.request=function(t,r){t="string"==typeof t?s.parse(t):i(t);var o=-1===e.location.protocol.search(/^https?:$/)?"http:":"",a=t.protocol||o,u=t.hostname||t.host,l=t.port,c=t.path||"/";u&&-1!==u.indexOf(":")&&(u="["+u+"]"),t.url=(u?a+"//"+u:"")+(l?":"+l:"")+c,t.method=(t.method||"GET").toUpperCase(),t.headers=t.headers||{};var f=new n(t);return r&&f.on("response",r),f},a.get=function(e,t){var r=a.request(e,t);return r.end(),r},a.Agent=function(){},a.Agent.defaultMaxSockets=4,a.STATUS_CODES=o,a.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(t,r(4))},function(e,t,r){(function(e){function r(){if(void 0!==o)return o;if(e.XMLHttpRequest){o=new e.XMLHttpRequest;try{o.open("GET",e.XDomainRequest?"/":"https://example.com")}catch(e){o=null}}else o=null;return o}function n(e){var t=r();if(!t)return!1;try{return t.responseType=e,t.responseType===e}catch(e){}return!1}function i(e){return"function"==typeof e}t.fetch=i(e.fetch)&&i(e.ReadableStream),t.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),t.blobConstructor=!0}catch(e){}var o,s=void 0!==e.ArrayBuffer,a=s&&i(e.ArrayBuffer.prototype.slice);t.arraybuffer=t.fetch||s&&n("arraybuffer"),t.msstream=!t.fetch&&a&&n("ms-stream"),t.mozchunkedarraybuffer=!t.fetch&&s&&n("moz-chunked-arraybuffer"),t.overrideMimeType=t.fetch||!!r()&&i(r().overrideMimeType),t.vbArray=i(e.VBArray),o=null}).call(t,r(4))},function(e,t,r){"use strict";function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(e,t,r){if(e&&l.isObject(e)&&e instanceof n)return e;var i=new n;return i.parse(e,t,r),i}function o(e){return l.isString(e)&&(e=i(e)),e instanceof n?e.format():n.prototype.format.call(e)}function s(e,t){return i(e,!1,!0).resolve(t)}function a(e,t){return e?i(e,!1,!0).resolveObject(t):t}var u=r(164),l=r(189);t.parse=i,t.resolve=s,t.resolveObject=a,t.format=o,t.Url=n;var c=/^([a-z0-9.+-]+:)/i,f=/:[0-9]*$/,p=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,h=["<",">",'"',"`"," ","\r","\n","\t"],d=["{","}","|","\\","^","`"].concat(h),v=["'"].concat(d),y=["%","/","?",";","#"].concat(v),g=["/","?","#"],b=/^[+a-z0-9A-Z_-]{0,63}$/,m=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,w={javascript:!0,"javascript:":!0},x={javascript:!0,"javascript:":!0},k={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},E=r(167);n.prototype.parse=function(e,t,r){if(!l.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),i=-1!==n&&n<e.indexOf("#")?"?":"#",o=e.split(i),s=/\\/g;o[0]=o[0].replace(s,"/"),e=o.join(i);var a=e;if(a=a.trim(),!r&&1===e.split("#").length){var f=p.exec(a);if(f)return this.path=a,this.href=a,this.pathname=f[1],f[2]?(this.search=f[2],this.query=t?E.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var h=c.exec(a);if(h){h=h[0];var d=h.toLowerCase();this.protocol=d,a=a.substr(h.length)}if(r||h||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var _="//"===a.substr(0,2);!_||h&&x[h]||(a=a.substr(2),this.slashes=!0)}if(!x[h]&&(_||h&&!k[h])){for(var A=-1,S=0;S<g.length;S++){var I=a.indexOf(g[S]);-1!==I&&(-1===A||I<A)&&(A=I)}var T,C;C=-1===A?a.lastIndexOf("@"):a.lastIndexOf("@",A),-1!==C&&(T=a.slice(0,C),a=a.slice(C+1),this.auth=decodeURIComponent(T)),A=-1;for(var S=0;S<y.length;S++){var I=a.indexOf(y[S]);-1!==I&&(-1===A||I<A)&&(A=I)}-1===A&&(A=a.length),this.host=a.slice(0,A),a=a.slice(A),this.parseHost(),this.hostname=this.hostname||"";var F="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!F)for(var R=this.hostname.split(/\./),S=0,j=R.length;S<j;S++){var N=R[S];if(N&&!N.match(b)){for(var L="",P=0,O=N.length;P<O;P++)N.charCodeAt(P)>127?L+="x":L+=N[P];if(!L.match(b)){var Q=R.slice(0,S),D=R.slice(S+1),B=N.match(m);B&&(Q.push(B[1]),D.unshift(B[2])),D.length&&(a="/"+D.join(".")+a),this.hostname=Q.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),F||(this.hostname=u.toASCII(this.hostname));var M=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+M,this.href+=this.host,F&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!w[d])for(var S=0,j=v.length;S<j;S++){var q=v[S];if(-1!==a.indexOf(q)){var G=encodeURIComponent(q);G===q&&(G=escape(q)),a=a.split(q).join(G)}}var H=a.indexOf("#");-1!==H&&(this.hash=a.substr(H),a=a.slice(0,H));var X=a.indexOf("?");if(-1!==X?(this.search=a.substr(X),this.query=a.substr(X+1),t&&(this.query=E.parse(this.query)),a=a.slice(0,X)):t&&(this.search="",this.query={}),a&&(this.pathname=a),k[d]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var M=this.pathname||"",z=this.search||"";this.path=M+z}return this.href=this.format(),this},n.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&l.isObject(this.query)&&Object.keys(this.query).length&&(o=E.stringify(this.query));var s=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||k[t])&&!1!==i?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),s=s.replace("#","%23"),t+i+r+s+n},n.prototype.resolve=function(e){return this.resolveObject(i(e,!1,!0)).format()},n.prototype.resolveObject=function(e){if(l.isString(e)){var t=new n;t.parse(e,!1,!0),e=t}for(var r=new n,i=Object.keys(this),o=0;o<i.length;o++){var s=i[o];r[s]=this[s]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var a=Object.keys(e),u=0;u<a.length;u++){var c=a[u];"protocol"!==c&&(r[c]=e[c])}return k[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!k[e.protocol]){for(var f=Object.keys(e),p=0;p<f.length;p++){var h=f[p];r[h]=e[h]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||x[e.protocol])r.pathname=e.pathname;else{for(var d=(e.pathname||"").split("/");d.length&&!(e.host=d.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),r.pathname=d.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var v=r.pathname||"",y=r.search||"";r.path=v+y}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var g=r.pathname&&"/"===r.pathname.charAt(0),b=e.host||e.pathname&&"/"===e.pathname.charAt(0),m=b||g||r.host&&e.pathname,w=m,E=r.pathname&&r.pathname.split("/")||[],d=e.pathname&&e.pathname.split("/")||[],_=r.protocol&&!k[r.protocol];if(_&&(r.hostname="",r.port=null,r.host&&(""===E[0]?E[0]=r.host:E.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===d[0]?d[0]=e.host:d.unshift(e.host)),e.host=null),m=m&&(""===d[0]||""===E[0])),b)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,E=d;else if(d.length)E||(E=[]),E.pop(),E=E.concat(d),r.search=e.search,r.query=e.query;else if(!l.isNullOrUndefined(e.search)){if(_){r.hostname=r.host=E.shift();var A=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");A&&(r.auth=A.shift(),r.host=r.hostname=A.shift())}return r.search=e.search,r.query=e.query,l.isNull(r.pathname)&&l.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!E.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var S=E.slice(-1)[0],I=(r.host||e.host||E.length>1)&&("."===S||".."===S)||""===S,T=0,C=E.length;C>=0;C--)S=E[C],"."===S?E.splice(C,1):".."===S?(E.splice(C,1),T++):T&&(E.splice(C,1),T--);if(!m&&!w)for(;T--;T)E.unshift("..");!m||""===E[0]||E[0]&&"/"===E[0].charAt(0)||E.unshift(""),I&&"/"!==E.join("/").substr(-1)&&E.push("");var F=""===E[0]||E[0]&&"/"===E[0].charAt(0);if(_){r.hostname=r.host=F?"":E.length?E.shift():"";var A=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");A&&(r.auth=A.shift(),r.host=r.hostname=A.shift())}return m=m||r.host&&E.length,m&&!F&&E.unshift(""),E.length?r.pathname=E.join("/"):(r.pathname=null,r.path=null),l.isNull(r.pathname)&&l.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},n.prototype.parseHost=function(){var e=this.host,t=f.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,r){(function(e,n){function i(e,r){var n={seen:[],stylize:s};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),v(r)?n.showHidden=r:r&&t._extend(n,r),x(n.showHidden)&&(n.showHidden=!1),x(n.depth)&&(n.depth=2),x(n.colors)&&(n.colors=!1),x(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=o),u(n,e,n.depth)}function o(e,t){var r=i.styles[t];return r?"["+i.colors[r][0]+"m"+e+"["+i.colors[r][1]+"m":e}function s(e,t){return e}function a(e){var t={};return e.forEach(function(e,r){t[e]=!0}),t}function u(e,r,n){if(e.customInspect&&r&&S(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var i=r.inspect(n,e);return m(i)||(i=u(e,i,n)),i}var o=l(e,r);if(o)return o;var s=Object.keys(r),v=a(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(r)),A(r)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return c(r);if(0===s.length){if(S(r)){var y=r.name?": "+r.name:"";return e.stylize("[Function"+y+"]","special")}if(k(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(_(r))return e.stylize(Date.prototype.toString.call(r),"date");if(A(r))return c(r)}var g="",b=!1,w=["{","}"];if(d(r)&&(b=!0,w=["[","]"]),S(r)){g=" [Function"+(r.name?": "+r.name:"")+"]"}if(k(r)&&(g=" "+RegExp.prototype.toString.call(r)),_(r)&&(g=" "+Date.prototype.toUTCString.call(r)),A(r)&&(g=" "+c(r)),0===s.length&&(!b||0==r.length))return w[0]+g+w[1];if(n<0)return k(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special");e.seen.push(r);var x;return x=b?f(e,r,n,v,s):s.map(function(t){return p(e,r,n,v,t,b)}),e.seen.pop(),h(x,g,w)}function l(e,t){if(x(t))return e.stylize("undefined","undefined");if(m(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return b(t)?e.stylize(""+t,"number"):v(t)?e.stylize(""+t,"boolean"):y(t)?e.stylize("null","null"):void 0}function c(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,r,n,i){for(var o=[],s=0,a=t.length;s<a;++s)R(t,String(s))?o.push(p(e,t,r,n,String(s),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(p(e,t,r,n,i,!0))}),o}function p(e,t,r,n,i,o){var s,a,l;if(l=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},l.get?a=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(a=e.stylize("[Setter]","special")),R(n,i)||(s="["+i+"]"),a||(e.seen.indexOf(l.value)<0?(a=y(r)?u(e,l.value,null):u(e,l.value,r-1),a.indexOf("\n")>-1&&(a=o?a.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n"))):a=e.stylize("[Circular]","special")),x(s)){if(o&&i.match(/^\d+$/))return a;s=JSON.stringify(""+i),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function h(e,t,r){var n=0;return e.reduce(function(e,t){return n++,t.indexOf("\n")>=0&&n++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function d(e){return Array.isArray(e)}function v(e){return"boolean"==typeof e}function y(e){return null===e}function g(e){return null==e}function b(e){return"number"==typeof e}function m(e){return"string"==typeof e}function w(e){return"symbol"==typeof e}function x(e){return void 0===e}function k(e){return E(e)&&"[object RegExp]"===T(e)}function E(e){return"object"==typeof e&&null!==e}function _(e){return E(e)&&"[object Date]"===T(e)}function A(e){return E(e)&&("[object Error]"===T(e)||e instanceof Error)}function S(e){return"function"==typeof e}function I(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function T(e){return Object.prototype.toString.call(e)}function C(e){return e<10?"0"+e.toString(10):e.toString(10)}function F(){var e=new Date,t=[C(e.getHours()),C(e.getMinutes()),C(e.getSeconds())].join(":");return[e.getDate(),P[e.getMonth()],t].join(" ")}function R(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var j=/%[sdj%]/g;t.format=function(e){if(!m(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(i(arguments[r]));return t.join(" ")}for(var r=1,n=arguments,o=n.length,s=String(e).replace(j,function(e){if("%%"===e)return"%";if(r>=o)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}}),a=n[r];r<o;a=n[++r])y(a)||!E(a)?s+=" "+a:s+=" "+i(a);return s},t.deprecate=function(r,i){function o(){if(!s){if(n.throwDeprecation)throw new Error(i);n.traceDeprecation?console.trace(i):console.error(i),s=!0}return r.apply(this,arguments)}if(x(e.process))return function(){return t.deprecate(r,i).apply(this,arguments)};if(!0===n.noDeprecation)return r;var s=!1;return o};var N,L={};t.debuglog=function(e){if(x(N)&&(N=n.env.NODE_DEBUG||""),e=e.toUpperCase(),!L[e])if(new RegExp("\\b"+e+"\\b","i").test(N)){var r=n.pid;L[e]=function(){var n=t.format.apply(t,arguments);console.error("%s %d: %s",e,r,n)}}else L[e]=function(){};return L[e]},t.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=d,t.isBoolean=v,t.isNull=y,t.isNullOrUndefined=g,t.isNumber=b,t.isString=m,t.isSymbol=w,t.isUndefined=x,t.isRegExp=k,t.isObject=E,t.isDate=_,t.isError=A,t.isFunction=S,t.isPrimitive=I,t.isBuffer=r(192);var P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.log=function(){console.log("%s - %s",F(),t.format.apply(t,arguments))},t.inherits=r(191),t._extend=function(e,t){if(!t||!E(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}}).call(t,r(4),r(5))},function(e,t){/**
 * @license HTTP Auth Interceptor Module for AngularJS
 * (c) 2012 Witold Szczerba
 * License: MIT
 */
!function(){"use strict";angular.module("http-auth-interceptor",["http-auth-interceptor-buffer"]).factory("authService",["$rootScope","httpBuffer",function(e,t){return{loginConfirmed:function(r,n){var i=n||function(e){return e};e.$broadcast("event:auth-loginConfirmed",r),t.retryAll(i)},loginCancelled:function(r,n){t.rejectAll(n),e.$broadcast("event:auth-loginCancelled",r)}}}]).config(["$httpProvider",function(e){e.interceptors.push(["$rootScope","$q","httpBuffer",function(e,t,r){return{responseError:function(n){var i=n.config||{};if(!i.ignoreAuthModule)switch(n.status){case 401:var o=t.defer();return 1===r.append(i,o)&&e.$broadcast("event:auth-loginRequired",n),o.promise;case 403:e.$broadcast("event:auth-forbidden",n)}return t.reject(n)}}}])}]),angular.module("http-auth-interceptor-buffer",[]).factory("httpBuffer",["$injector",function(e){function t(t,n){function i(e){n.resolve(e)}function o(e){n.reject(e)}r=r||e.get("$http"),r(t).then(i,o)}var r,n=[];return{append:function(e,t){return n.push({config:e,deferred:t})},rejectAll:function(e){if(e)for(var t=0;t<n.length;++t)n[t].deferred.reject(e);n=[]},retryAll:function(e){for(var r=0;r<n.length;++r){var i=e(n[r].config);!1!==i&&t(i,n[r].deferred)}n=[]}}}])}(),void 0!==e&&void 0!==t&&e.exports===t&&(e.exports="http-auth-interceptor")},function(e,t,r){"use strict";r.d(t,"a",function(){return u});var n=r(1),i=r.n(n),o=r(6),s=(r.n(o),r(68)),a=(r.n(s),r(9)),u=function(){function e(t,r){var n=this;i()(this,e),this.sparqlService=t,this.$q=r,this.services=new a.a(function(e){if(0===e.indexOf("local:")){var t=n.$q.defer();return new s.Store({name:e,persistent:!0},function(e,r){e?t.reject(e):t.resolve(new c(r,n.$q))}),t.promise}return n.$q.resolve(new l(n.sparqlService,e))})}return e.$inject=["sparqlService","$q"],e.prototype.query=function(e,t,r){return this.services.goc(e).then(function(e){return e.query(t,r)})},e.prototype.update=function(e,t,r){return this.services.goc(e).then(function(e){return e.update(t,r)})},e.prototype.get=function(e,t,r){return this.services.goc(e).then(function(e){return e.get(t,r)})},e.prototype.put=function(e,t,r,n){return this.services.goc(e).then(function(e){return e.put(t,r,n)})},e.prototype.post=function(e,t,r,n){return this.services.goc(e).then(function(e){return e.post(t,r,n)})},e}(),l=function(){function e(t,r){i()(this,e),this.s=t,this.endpoint=r}return e.prototype.query=function(e,t){return this.s.query(this.endpoint,e,t).then(function(e){return e.data})},e.prototype.update=function(e,t){return this.s.update(this.endpoint,e,t).then(function(e){return e.data})},e.prototype.get=function(e,t){return this.s.get(this.endpoint,e,t).then(function(e){return e.data})},e.prototype.post=function(e,t,r){return this.s.post(this.endpoint,e,t,r).then(function(e){return e.data})},e.prototype.put=function(e,t,r){return this.s.put(this.endpoint,e,t,r).then(function(e){return e.data})},e}(),c=function(){function e(t,r){i()(this,e),this.s=t,this.$q=r}return e.convertBinding=function(e){switch(e.token){case"uri":return{type:"uri",value:e.value};case"blank":return{type:"bnode",value:e.value};case"literal":return{type:"literal",value:e.value,"xml:lang":e.lang,datatype:e.type};default:throw"Unknown binding type "+e.token}},e.prototype.query=function(t,r){var n=this,i=this.$q.defer();try{this.s.execute(t,function(r,o){if(r)console.log("Error executing",n.s,t,r),i.reject(r);else{var s={head:{vars:[]},results:{bindings:[]}},u=new a.b;s.results.bindings=o.map(function(t){var r={};for(var n in t)u.add(n),null!==t[n]&&(r[n]=e.convertBinding(t[n]));return r}),s.head.vars=u.values(),i.resolve(s)}})}catch(e){throw console.log("Exception executing",this.s,t,e),e}return i.promise},e.prototype.update=function(e,t){var r=this.$q.defer();return this.s.execute(e,function(e,t){e?r.reject(e):r.resolve(t)}),r.promise},e.prototype.get=function(e,t){var r=this.$q.defer();return this.s.graph(e,function(e,t){e?r.reject(e):r.resolve(t.toNT())}),r.promise},e.prototype.post=function(e,t,r){var n=this.$q.defer(),i=function(e,t){e?n.reject(e):n.resolve()};return t?this.s.load("text/turtle",e,t,i):this.s.load("text/turtle",e,i),n.promise},e.prototype.put=function(e,t,r){var n=this,i=this.$q.defer(),o=function(r){r&&i.reject(r);var o=function(e,t){e?i.reject(e):i.resolve()};t?n.s.load("text/turtle",e,t,o):n.s.load("text/turtle",e,o)};return t?this.s.clear(t,o):this.s.clear(o),i.promise},e}();o.module("fibra.services.fibra-sparql-service",[]).config(["$provide",function(e){e.service("fibraSparqlService",u)}])},function(e,t,r){"use strict";r.d(t,"a",function(){return g});var n=r(1),i=r.n(n),o=r(6),s=(r.n(o),r(20)),a=r(72),u=r(13),l=(r.n(u),r(41)),c=r(109),f=r(110),p=r(9),h=r(69),d=r(2),v=r(21),y=function(){function e(t,r,n,o){i()(this,e),this.workerService=t,this.fibraService=r,this.fibraSparqlService=n,this.$localStorage=o,o.projectSources?o.projectSources.forEach(function(e){e.sparqlEndpoint||(e.sparqlEndpoint=e.endpoint,e.updateEndpoint=e.endpoint,e.graphStoreEndpoint=e.endpoint)}):o.projectSources=[]}return e.$inject=["workerService","fibraService","fibraSparqlService","$localStorage"],e.orderCitables=function(e){e.sort(function(e,t){return(e.order?e.order:Number.MAX_VALUE)-(t.order?t.order:Number.MAX_VALUE)}),e.forEach(function(e){return delete e.order})},e.prototype.getCurrentProject=function(){return this.fibraService.getState().project},e.prototype.setCurrentProject=function(e){return this.fibraService.dispatchAction(this.fibraService.setProject(e))},e.prototype.getProjectSources=function(){return this.$localStorage.projectSources},e.prototype.listPrimaryEndpointConfigurations=function(e){return this.workerService.call("projectWorkerService","listPrimaryEndpointConfigurations",[e])},e.prototype.loadPrimaryEndpointConfiguration=function(e,t){return this.workerService.call("projectWorkerService","loadPrimaryEndpointConfiguration",[e,t])},e.prototype.listArchiveEndpointConfigurations=function(e){return this.workerService.call("projectWorkerService","listArchiveEndpointConfigurations",[e])},e.prototype.listAuthorityEndpointConfigurations=function(e){return this.workerService.call("projectWorkerService","listAuthorityEndpointConfigurations",[e])},e.prototype.loadRemoteEndpointConfiguration=function(e,t){return this.workerService.call("projectWorkerService","loadRemoteEndpointConfiguration",[e,t])},e.prototype.listSchemas=function(e){return this.workerService.call("projectWorkerService","listSchemas",[e])},e.prototype.loadSchema=function(e,t){return this.workerService.call("projectWorkerService","loadSchema",[e,t])},e.prototype.listProjects=function(e){return this.workerService.call("projectWorkerService","listProjects",[e])},e.prototype.loadProject=function(e,t,r){return this.workerService.call("projectWorkerService","loadProject",[e,t,r])},e.prototype.deleteCitable=function(e,t){return this.deleteObject(e,t.id,t.source.graph)},e.prototype.deleteObjects=function(t,r,n){var i=n?e.deleteQuery.replace(/# STARTGRAPH/g,"GRAPH <"+n+"> {").replace(/# ENDGRAPH/g,"}"):e.deleteQuery.replace(/.*# STARTGRAPH\n/g,"").replace(/.*# ENDGRAPH\n/g,"");return i=i.replace(/# PATTERNS/g,r.reduce(function(e,t,r){return e+" <"+t+"> ?p"+r+" ?o"+r+" ."},"")),this.fibraSparqlService.update(t,i)},e.prototype.deleteObject=function(e,t,r){return this.deleteObjects(e,[t],r)},e.prototype.saveCitable=function(e,t,n){var i=this,o=new p.d,s={};return n.toTurtle(o,s),this.deleteObjects(e,o.keys(),n.source.graph).then(function(){return i.fibraSparqlService.post(t,r.i(h.c)(s,o),n.source.graph)})},e}();y.deleteQuery="DELETE {\n# STARTGRAPH\n  # PATTERNS\n# ENDGRAPH\n}\nWHERE {\n# STARTGRAPH\n  # PATTERNS\n# ENDGRAPH\n}";var g=function(){function e(t,r){i()(this,e),this.fibraSparqlService=t,this.$q=r}return e.$inject=["fibraSparqlService","$q"],e.prototype.loadPrimaryEndpointConfiguration=function(e,t){return this.runSingleQuery(e,l.a.primaryEndpointConfigurationQuery,t,new l.a(t,e))},e.prototype.listPrimaryEndpointConfigurations=function(e){return this.runListQuery(e,l.a.listPrimaryEndpointConfigurationsQuery,function(t){return new l.a(t,e)})},e.prototype.loadRemoteEndpointConfiguration=function(e,t){return this.runSingleQuery(e,c.a.remoteEndpointConfigurationQuery,t,new c.a(t,e))},e.prototype.listArchiveEndpointConfigurations=function(e){return this.runListQuery(e,c.a.listArchiveEndpointConfigurationsQuery,function(t){return new c.a(t,e)})},e.prototype.listAuthorityEndpointConfigurations=function(e){return this.runListQuery(e,c.a.listAuthorityEndpointConfigurationsQuery,function(t){return new c.a(t,e)})},e.prototype.listProjects=function(e){return this.runListQuery(e,a.a.listProjectsQuery,function(t){return new a.a(t,e)})},e.prototype.listSchemas=function(e){return this.runListQuery(e,f.a.listSchemasQuery,function(t){return new f.a(t,e)})},e.prototype.loadSchema=function(e,t){return this.runSingleQuery(e,f.a.schemaQuery,t,new f.a(t,e))},e.prototype.loadDataModel=function(e){var t=this,r=new v.a,n=new p.a(function(e){var t=new v.b(d.b.namedNode(e));return r.classMap.set(e,t),t}),i=new p.a(function(e){var t=new v.c(d.b.namedNode(e));return r.propertyMap.set(e,t),t}),o=[];return e.forEach(function(e){o.push(t.fibraSparqlService.query(e.endpoint,e.classQuery).then(function(e){var t={bindingTypes:{types:"uniqueArray"},bindingConverters:{superClasses:function(e){return n.goc(e.value)},subClasses:function(e){return n.goc(e.value)},types:function(e){return n.goc(e.value)},labels:function(e){return d.b.nodeFromBinding(e)},descriptions:function(e){return d.b.nodeFromBinding(e)}}},r=new u.UniqueObjectTracker;e.results.bindings.forEach(function(e){return u.SparqlService.bindingsToObject(e,n.goc(e.id.value),t,r)})})),o.push(t.fibraSparqlService.query(e.endpoint,e.propertyQuery).then(function(e){var t={bindingTypes:{types:"uniqueArray"},bindingConverters:{superProperties:function(e){return i.goc(e.value)},subProperties:function(e){return i.goc(e.value)},inverseProperty:function(e){return i.goc(e.value)},types:function(e){return n.goc(e.value)},domains:function(e){return n.goc(e.value)},ranges:function(e){return n.goc(e.value)},labels:function(e){return d.b.nodeFromBinding(e)},descriptions:function(e){return d.b.nodeFromBinding(e)}}},r=new u.UniqueObjectTracker;e.results.bindings.forEach(function(e){return u.SparqlService.bindingsToObject(e,i.goc(e.id.value),t,r)})}))}),this.$q.all(o).then(function(){return n.values().forEach(function(e){e.buildAsNodes(),e.superClasses.filter(function(t){return!t.subClasses.find(function(t){return t===e})}).forEach(function(t){return t.subClasses.push(e)}),e.subClasses.filter(function(t){return!t.superClasses.find(function(t){return t===e})}).forEach(function(t){return t.superClasses.push(e)})}),n.values().forEach(function(e){0===e.superClasses.length&&r.rootClasses.push(e)}),i.values().forEach(function(e){e.buildAsNodes(),e.inverseProperty&&(e.inverseProperty.inverseProperty=e),e.superProperties.filter(function(t){return!t.subProperties.find(function(t){return t===e})}).forEach(function(t){return t.subProperties.push(e)}),e.subProperties.filter(function(t){return!t.superProperties.find(function(t){return t===e})}).forEach(function(t){return t.superProperties.push(e)}),e.domains.forEach(function(t){return t.properties.push(e)}),e.ranges.forEach(function(t){return t.inverseProperties.push(e)})}),i.values().forEach(function(e){0===e.superProperties.length&&r.rootProperties.push(e)}),r})},e.prototype.loadProject=function(e,t,r){var n=this,i=this.runSingleQuery(e,a.a.projectQuery,t,new a.a(t,e));return r?i.then(function(e){var t=[];t.push(n.$q.all(e.schemas.map(function(e){return n.loadSchema(e.source,e.id)})).then(function(t){return e.schemas=t,n.loadDataModel(t).then(function(t){return e.dataModel=t})}));var r=[],i=[];return e.archiveEndpoints.forEach(function(e){return t.push(n.loadRemoteEndpointConfiguration(e.source,e.id).then(function(e){return r.push(e)}))}),e.authorityEndpoints.forEach(function(e){return t.push(n.loadRemoteEndpointConfiguration(e.source,e.id).then(function(e){return i.push(e)}))}),n.$q.all(t).then(function(){return e.archiveEndpoints=r,e.authorityEndpoints=i,e})}):i},e.prototype.runSingleQuery=function(e,t,r,n){t=e.graph?t.replace(/# STARTGRAPH/g,"GRAPH <"+e.graph+"> {").replace(/# ENDGRAPH/g,"}"):t.replace(/.*# STARTGRAPH\n/g,"").replace(/.*# ENDGRAPH\n/g,""),t=t.replace(/<ID>/g,"<"+r+">");var i=this.$q.defer();return this.fibraSparqlService.query(e.sparqlEndpoint,t).then(function(t){var r={bindingTypes:{rightsHolders:"uniqueArray",schemas:"uniqueArray",authorityEndpoints:"uniqueArray",archiveEndpoints:"uniqueArray"},bindingConverters:{types:function(e){return d.b.nodeFromBinding(e)},labels:function(e){return d.b.nodeFromBinding(e)},descriptions:function(e){return d.b.nodeFromBinding(e)},schemas:function(t){return new f.a(t.value,s.a.clone(e))},authorityEndpoints:function(t){return new c.a(t.value,s.a.clone(e))},archiveEndpoints:function(t){return new c.a(t.value,s.a.clone(e))},rightsHolders_labels:function(e){return d.b.nodeFromBinding(e)},rightsHolders_descriptions:function(e){return d.b.nodeFromBinding(e)},rightsHolders:function(t){return new s.b(t.value,e)}}},o=new u.UniqueObjectTracker;t.results.bindings.forEach(function(e){return u.SparqlService.bindingsToObject(e,n,r,o)}),y.orderCitables(n.rightsHolders),i.resolve(n)}),i.promise},e.prototype.runListQuery=function(e,t,r){return t=e.graph?t.replace(/# STARTGRAPH/g,"GRAPH <"+e.graph+"> {").replace(/# ENDGRAPH/g,"}"):t.replace(/.*# STARTGRAPH\n/g,"").replace(/.*# ENDGRAPH\n/g,""),this.fibraSparqlService.query(e.sparqlEndpoint,t).then(function(t){var n=new p.a(r),i={bindingTypes:{rightsHolders:"uniqueArray",schemas:"uniqueArray",authorityEndpoints:"uniqueArray",archiveEndpoints:"uniqueArray"},bindingConverters:{types:function(e){return d.b.nodeFromBinding(e)},labels:function(e){return d.b.nodeFromBinding(e)},descriptions:function(e){return d.b.nodeFromBinding(e)},schemas:function(t){return new f.a(t.value,s.a.clone(e))},authorityEndpoints:function(t){return new c.a(t.value,s.a.clone(e))},archiveEndpoints:function(t){return new c.a(t.value,s.a.clone(e))},rightsHolders_labels:function(e){return d.b.nodeFromBinding(e)},rightsHolders_descriptions:function(e){return d.b.nodeFromBinding(e)},rightsHolders:function(t){return new s.b(t.value,e)}}},o=new u.UniqueObjectTracker;return t.results.bindings.forEach(function(e){return u.SparqlService.bindingsToObject(e,n.goc(e.id.value),i,o)}),n.values().forEach(function(e){return y.orderCitables(e.rightsHolders)}),n.values()})},e}();o.module("fibra.services.project-service",["fibra.services.fibra-service","fibra.services.fibra-sparql-service"]).config(["$provide",function(e){e.service("projectService",y),e.service("projectWorkerService",g)}])},function(e,t,r){"use strict";r.d(t,"a",function(){return s});var n=r(1),i=r.n(n),o=r(2),s=(function(){function e(t){i()(this,e),this.workerService=t}e.$inject=["workerService"],e.prototype.updateQuads=function(e,t,r){return this.workerService.call("sparqlUpdateWorkerService","updateQuads",[e,t,r])},e.prototype.updateGraphs=function(e,t,r){return this.workerService.call("sparqlUpdateWorkerService","updateGraphs",[e,t,r])}}(),function(){function e(t){i()(this,e),this.fibraSparqlService=t}return e.$inject=["fibraSparqlService"],e.prototype.updateQuads=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n={},i={},s=[],a=[];return t.forEach(function(e){var t=n[e.graph.value];t||(t=new o.c(e.graph),n[e.graph.value]=t,s.push(t)),t.triples.push(o.b.triple(e.subject,e.predicate,e.object))}),r.forEach(function(e){var t=i[e.graph.value];t||(t=new o.c(e.graph),i[e.graph.value]=t,a.push(t)),t.triples.push(o.b.triple(e.subject,e.predicate,e.object))}),this.updateGraphs(e,s,a)},e.prototype.updateGraphs=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=r.map(function(e){return(o.d.instance.equals(e.graph)?"":"GRAPH"+e.graph.toCanonical())+"{"+e.triples.map(function(e){return e.toCanonical()}).join(" . ")+"}"}).join(""),s=n.map(function(e){return(o.d.instance.equals(e.graph)?"":"GRAPH"+e.graph.toCanonical())+"{"+e.triples.map(function(e){return e.toCanonical()}).join(" . ")+"}"}).join("");return this.fibraSparqlService.update(t,e.queryTemplate.replace(/<DELETE>/g,s).replace(/<INSERT>/g,i)).then(function(e){return!0},function(e){return!1})},e}());s.queryTemplate="DELETE{<DELETE>}INSERT{<INSERT>}WHERE {}"},function(e,t,r){"use strict";r.d(t,"a",function(){return y});var n=r(1),i=r.n(n),o=r(8),s=r.n(o),a=r(7),u=r.n(a),l=r(20),c=r(2),f=r(32),p=r(21),h=r(27),d=r(33),v=r(13),y=(r.n(v),function(e){function t(){i()(this,t);var r=s()(this,e.apply(this,arguments));return r.types=[],r.autocompletionQuery=f.b.defaultMatchQuery,r.propertyQuery=p.a.propertyQuery,r.classQuery=p.a.classQuery,r.itemQuery=h.b.getRemoteItemPropertiesQuery,r.treeQuery=d.b.getClassTreeQuery,r}return u()(t,e),t.prototype.toTurtle=function(t,r){if(!t.has(this.id)){r.fibra=c.m.ns,r.void=c.o.ns,r.rdf=c.n.ns;var n="<"+this.id+"> a ";this.types.forEach(function(e){return n+=e.toCanonical()+" ,"}),n=n.substring(0,n.length-2)+" ;",t.set(this.id,n),e.prototype.toTurtle.call(this,t,r),n=t.get(this.id),n=n+"\nvoid:sparqlEndpoint <"+this.endpoint+"> ;\nfibra:autocompletionQuery "+v.SparqlService.stringToSPARQLString(this.autocompletionQuery)+" ;\nfibra:itemQuery "+v.SparqlService.stringToSPARQLString(this.itemQuery)+" ;\nfibra:treeQuery "+v.SparqlService.stringToSPARQLString(this.treeQuery)+" ;\nfibra:propertyQuery "+v.SparqlService.stringToSPARQLString(this.propertyQuery)+" ;\nfibra:classQuery "+v.SparqlService.stringToSPARQLString(this.classQuery)+" .",t.set(this.id,n)}},t}(l.b));y.listAuthorityEndpointConfigurationsQuery="PREFIX fibra: <http://hdlab.stanford.edu/fibra/ontology#>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX dcterms: <http://purl.org/dc/terms/>\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\nPREFIX void: <http://rdfs.org/ns/void#>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nSELECT ?id ?types ?labels ?descriptions ?rightsHolders ?rightsHolders_labels ?rightsHolders_descriptions ?rightsHolders_url ?rightsHolders_order ?url ?endpoint ?autocompletionQuery ?itemQuery ?treeQuery ?propertyQuery ?classQuery {\n# STARTGRAPH\n  ?id a fibra:AuthorityEndpointConfiguration .\n  ?id a ?types .\n  { ?id skos:prefLabel ?labels }\n  UNION\n  { ?id dcterms:description ?descriptions }\n  UNION\n  {\n    ?id void:sparqlEndpoint ?endpoint .\n    ?id fibra:autocompletionQuery ?autocompletionQuery .\n    ?id fibra:itemQuery ?itemQuery .\n    ?id fibra:treeQuery ?treeQuery .\n    ?id fibra:propertyQuery ?propertyQuery .\n    ?id fibra:classQuery ?classQuery .\n    OPTIONAL { ?id foaf:homepage ?url }\n  } UNION {\n    {\n      ?id dcterms:rightsHolder ?rightsHolders\n    } UNION {\n      ?id fibra:qualifiedAssertion ?qa .\n      ?qa rdf:predicate dcterms:rightsHolder .\n      ?qa rdf:object ?rightsHolders .\n      OPTIONAL { ?qa fibra:order ?rightsHolders_order }\n    }\n    {\n      ?rightsHolders skos:prefLabel ?rightsHolders_labels\n    } UNION {\n      ?rightsHolders foaf:homepage ?rightsHolders_url\n    } UNION {\n      ?rightsHolders dcterms:description ?rightsHolders_descriptions\n    }\n  }\n# ENDGRAPH\n}",y.listArchiveEndpointConfigurationsQuery=y.listAuthorityEndpointConfigurationsQuery.replace(/fibra:AuthorityEndpointConfiguration/,"fibra:ArchiveEndpointConfiguration"),y.remoteEndpointConfigurationQuery="PREFIX fibra: <http://hdlab.stanford.edu/fibra/ontology#>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX dcterms: <http://purl.org/dc/terms/>\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\nPREFIX void: <http://rdfs.org/ns/void#>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nSELECT ?types ?labels ?descriptions ?rightsHolders ?rightsHolders_labels ?rightsHolders_descriptions ?rightsHolders_url ?rightsHolders_order ?url ?endpoint ?autocompletionQuery ?itemQuery ?treeQuery ?propertyQuery ?classQuery {\n# STARTGRAPH\n  { <ID> skos:prefLabel ?labels }\n  UNION\n  { <ID> dcterms:description ?descriptions }\n  UNION\n  {\n    <ID> a ?types .\n    <ID> void:sparqlEndpoint ?endpoint .\n    <ID> fibra:autocompletionQuery ?autocompletionQuery .\n    <ID> fibra:itemQuery ?itemQuery .\n    <ID> fibra:treeQuery ?treeQuery .\n    <ID> fibra:propertyQuery ?propertyQuery .\n    <ID> fibra:classQuery ?classQuery .\n    OPTIONAL { <ID> foaf:homepage ?url }\n  } UNION {\n    {\n      <ID> dcterms:rightsHolder ?rightsHolders\n    } UNION {\n      <ID> fibra:qualifiedAssertion ?qa .\n      ?qa rdf:predicate dcterms:rightsHolder .\n      ?qa rdf:object ?rightsHolders .\n      OPTIONAL { ?qa fibra:order ?rightsHolders_order }\n    }\n    {\n      ?rightsHolders skos:prefLabel ?rightsHolders_labels\n    } UNION {\n      ?rightsHolders foaf:homepage ?rightsHolders_url\n    } UNION {\n      ?rightsHolders dcterms:description ?rightsHolders_descriptions\n    }\n  }\n# ENDGRAPH\n}"},function(e,t,r){"use strict";r.d(t,"a",function(){return h});var n=r(1),i=r.n(n),o=r(8),s=r.n(o),a=r(7),u=r.n(a),l=r(20),c=r(21),f=r(2),p=r(13),h=(r.n(p),function(e){function t(){i()(this,t);var r=s()(this,e.apply(this,arguments));return r.classQuery=c.a.classQuery,r.propertyQuery=c.a.propertyQuery,r}return u()(t,e),t.prototype.toTurtle=function(t,r){if(!t.has(this.id)){r.fibra=f.m.ns,r.void=f.o.ns,t.set(this.id,"<"+this.id+"> a fibra:Schema ;"),e.prototype.toTurtle.call(this,t,r);var n=t.get(this.id);n=n+"\nvoid:sparqlEndpoint <"+this.endpoint+"> ;\nfibra:classQuery "+p.SparqlService.stringToSPARQLString(this.classQuery)+" ;\nfibra:propertyQuery "+p.SparqlService.stringToSPARQLString(this.propertyQuery)+" .",t.set(this.id,n)}},t}(l.b));h.listSchemasQuery="PREFIX fibra: <http://hdlab.stanford.edu/fibra/ontology#>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX dcterms: <http://purl.org/dc/terms/>\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nPREFIX void: <http://rdfs.org/ns/void#>\nSELECT ?id ?labels ?descriptions ?rightsHolders ?rightsHolders_labels ?rightsHolders_descriptions ?rightsHolders_url ?rightsHolders_order ?url ?endpoint ?classQuery ?propertyQuery {\n# STARTGRAPH\n  ?id a fibra:Schema .\n  { ?id skos:prefLabel ?labels }\n  UNION\n  { ?id dcterms:description ?descriptions }\n  UNION\n  { ?id foaf:homepage ?url }\n  UNION\n  {\n    ?id void:sparqlEndpoint ?endpoint .\n    ?id fibra:classQuery ?classQuery .\n    ?id fibra:propertyQuery ?propertyQuery .\n  } UNION {\n    {\n      ?id dcterms:rightsHolder ?rightsHolders\n    } UNION {\n      ?id fibra:qualifiedAssertion ?qa .\n      ?qa rdf:predicate dcterms:rightsHolder .\n      ?qa rdf:object ?rightsHolders .\n      OPTIONAL { ?qa fibra:order ?rightsHolders_order }\n    }\n    {\n      ?rightsHolders skos:prefLabel ?rightsHolders_labels\n    } UNION {\n      ?rightsHolders foaf:homepage ?rightsHolders_url\n    } UNION {\n      ?rightsHolders dcterms:description ?rightsHolders_descriptions\n    }\n  }\n# ENDGRAPH\n}",h.schemaQuery="PREFIX fibra: <http://hdlab.stanford.edu/fibra/ontology#>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX dcterms: <http://purl.org/dc/terms/>\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\nPREFIX void: <http://rdfs.org/ns/void#>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nSELECT ?labels ?descriptions ?rightsHolders ?rightsHolders_labels ?rightsHolders_descriptions ?rightsHolders_url ?rightsHolders_order ?url ?endpoint ?classQuery ?propertyQuery {\n# STARTGRAPH\n  { <ID> skos:prefLabel ?labels }\n  UNION\n  { <ID> dcterms:description ?descriptions }\n  UNION\n  {\n    <ID> void:sparqlEndpoint ?endpoint .\n    <ID> fibra:classQuery ?classQuery .\n    <ID> fibra:propertyQuery ?propertyQuery .\n  } UNION {\n    {\n      <ID> dcterms:rightsHolder ?rightsHolders\n    } UNION {\n      <ID> fibra:qualifiedAssertion ?qa .\n      ?qa rdf:predicate dcterms:rightsHolder .\n      ?qa rdf:object ?rightsHolders .\n      OPTIONAL { ?qa fibra:order ?rightsHolders_order }\n    }\n    {\n      ?rightsHolders skos:prefLabel ?rightsHolders_labels\n    } UNION {\n      ?rightsHolders foaf:homepage ?rightsHolders_url\n    } UNION {\n      ?rightsHolders dcterms:description ?rightsHolders_descriptions\n    }\n  }\n# ENDGRAPH\n}\n"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6),i=(r.n(n),r(40)),o=r(107),s=r(106),a=r(33),u=r(27),l=r(108),c=r(32),f=(r(67),r(105)),p=(r.n(f),r(68)),h=(r.n(p),n.module("fibra",["fi.seco.sparql","http-auth-interceptor","fibra.services.worker-service-prototype-mapping-configuration"]));h.config(["$provide",function(e){e.service("fibraSparqlService",s.a),e.service("projectWorkerService",o.a),e.service("stateWorkerService",i.a),e.service("workerWorkerService",i.b),e.service("sparqlTreeWorkerService",a.a),e.service("sparqlItemWorkerService",u.a),e.service("sparqlUpdateWorkerService",l.a),e.service("sparqlAutocompleteWorkerService",c.a)}]),h.run(["$rootScope","workerWorkerService",function(e,t){e.$on("event:auth-loginRequired",function(){return t.$broadcast("event:auth-loginRequired")})}]),h.run(["$rootScope","authService","$http",function(e,t,r){e.$on("main:auth-loginAuthInfo",function(e,n){r.defaults.headers.common.Authorization=n,t.loginConfirmed()})}])},function(e,t,r){e.exports={default:r(122),__esModule:!0}},function(e,t,r){e.exports={default:r(123),__esModule:!0}},function(e,t,r){e.exports={default:r(125),__esModule:!0}},function(e,t,r){e.exports={default:r(126),__esModule:!0}},function(e,t,r){e.exports={default:r(127),__esModule:!0}},function(e,t,r){e.exports={default:r(128),__esModule:!0}},function(e,t,r){"use strict";t.__esModule=!0;var n=r(113),i=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,i.default)(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}()},function(e,t,r){"use strict";function n(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function i(e){return 3*e.length/4-n(e)}function o(e){var t,r,i,o,s,a,u=e.length;s=n(e),a=new f(3*u/4-s),i=s>0?u-4:u;var l=0;for(t=0,r=0;t<i;t+=4,r+=3)o=c[e.charCodeAt(t)]<<18|c[e.charCodeAt(t+1)]<<12|c[e.charCodeAt(t+2)]<<6|c[e.charCodeAt(t+3)],a[l++]=o>>16&255,a[l++]=o>>8&255,a[l++]=255&o;return 2===s?(o=c[e.charCodeAt(t)]<<2|c[e.charCodeAt(t+1)]>>4,a[l++]=255&o):1===s&&(o=c[e.charCodeAt(t)]<<10|c[e.charCodeAt(t+1)]<<4|c[e.charCodeAt(t+2)]>>2,a[l++]=o>>8&255,a[l++]=255&o),a}function s(e){return l[e>>18&63]+l[e>>12&63]+l[e>>6&63]+l[63&e]}function a(e,t,r){for(var n,i=[],o=t;o<r;o+=3)n=(e[o]<<16)+(e[o+1]<<8)+e[o+2],i.push(s(n));return i.join("")}function u(e){for(var t,r=e.length,n=r%3,i="",o=[],s=0,u=r-n;s<u;s+=16383)o.push(a(e,s,s+16383>u?u:s+16383));return 1===n?(t=e[r-1],i+=l[t>>2],i+=l[t<<4&63],i+="=="):2===n&&(t=(e[r-2]<<8)+e[r-1],i+=l[t>>10],i+=l[t>>4&63],i+=l[t<<2&63],i+="="),o.push(i),o.join("")}t.byteLength=i,t.toByteArray=o,t.fromByteArray=u;for(var l=[],c=[],f="undefined"!=typeof Uint8Array?Uint8Array:Array,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,d=p.length;h<d;++h)l[h]=p[h],c[p.charCodeAt(h)]=h;c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63},function(e,t){e.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},function(e,t,r){r(88),r(87),e.exports=r(147)},function(e,t,r){r(149);var n=r(3).Object;e.exports=function(e,t){return n.create(e,t)}},function(e,t,r){r(150);var n=r(3).Object;e.exports=function(e,t,r){return n.defineProperty(e,t,r)}},function(e,t,r){r(151);var n=r(3).Object;e.exports=function(e){return n.getOwnPropertyNames(e)}},function(e,t,r){r(152),e.exports=r(3).Object.getPrototypeOf},function(e,t,r){r(153),e.exports=r(3).Object.setPrototypeOf},function(e,t,r){r(155),r(154),r(156),r(157),e.exports=r(3).Symbol},function(e,t,r){r(87),r(88),e.exports=r(55).f("iterator")},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){e.exports=function(){}},function(e,t,r){var n=r(17),i=r(145),o=r(144);e.exports=function(e){return function(t,r,s){var a,u=n(t),l=i(u.length),c=o(s,l);if(e&&r!=r){for(;l>c;)if((a=u[c++])!=a)return!0}else for(;l>c;c++)if((e||c in u)&&u[c]===r)return e||c||0;return!e&&-1}}},function(e,t,r){var n=r(43),i=r(11)("toStringTag"),o="Arguments"==n(function(){return arguments}()),s=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,r,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=s(t=Object(e),i))?r:o?n(t):"Object"==(a=n(t))&&"function"==typeof t.callee?"Arguments":a}},function(e,t,r){var n=r(35),i=r(81),o=r(48);e.exports=function(e){var t=n(e),r=i.f;if(r)for(var s,a=r(e),u=o.f,l=0;a.length>l;)u.call(e,s=a[l++])&&t.push(s);return t}},function(e,t,r){e.exports=r(10).document&&document.documentElement},function(e,t,r){var n=r(43);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},function(e,t,r){var n=r(43);e.exports=Array.isArray||function(e){return"Array"==n(e)}},function(e,t,r){"use strict";var n=r(47),i=r(36),o=r(49),s={};r(26)(s,r(11)("iterator"),function(){return this}),e.exports=function(e,t,r){e.prototype=n(s,{next:i(1,r)}),o(e,t+" Iterator")}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,r){var n=r(35),i=r(17);e.exports=function(e,t){for(var r,o=i(e),s=n(o),a=s.length,u=0;a>u;)if(o[r=s[u++]]===t)return r}},function(e,t,r){var n=r(37)("meta"),i=r(29),o=r(15),s=r(16).f,a=0,u=Object.isExtensible||function(){return!0},l=!r(28)(function(){return u(Object.preventExtensions({}))}),c=function(e){s(e,n,{value:{i:"O"+ ++a,w:{}}})},f=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,n)){if(!u(e))return"F";if(!t)return"E";c(e)}return e[n].i},p=function(e,t){if(!o(e,n)){if(!u(e))return!0;if(!t)return!1;c(e)}return e[n].w},h=function(e){return l&&d.NEED&&u(e)&&!o(e,n)&&c(e),e},d=e.exports={KEY:n,NEED:!1,fastKey:f,getWeak:p,onFreeze:h}},function(e,t,r){var n=r(16),i=r(24),o=r(35);e.exports=r(14)?Object.defineProperties:function(e,t){i(e);for(var r,s=o(t),a=s.length,u=0;a>u;)n.f(e,r=s[u++],t[r]);return e}},function(e,t,r){var n=r(29),i=r(24),o=function(e,t){if(i(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{n=r(74)(Function.call,r(78).f(Object.prototype,"__proto__").set,2),n(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,r){return o(e,r),t?e.__proto__=r:n(e,r),e}}({},!1):void 0),check:o}},function(e,t,r){var n=r(52),i=r(44);e.exports=function(e){return function(t,r){var o,s,a=String(i(t)),u=n(r),l=a.length;return u<0||u>=l?e?"":void 0:(o=a.charCodeAt(u),o<55296||o>56319||u+1===l||(s=a.charCodeAt(u+1))<56320||s>57343?e?a.charAt(u):o:e?a.slice(u,u+2):s-56320+(o-55296<<10)+65536)}}},function(e,t,r){var n=r(52),i=Math.max,o=Math.min;e.exports=function(e,t){return e=n(e),e<0?i(e+t,0):o(e,t)}},function(e,t,r){var n=r(52),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},function(e,t,r){var n=r(132),i=r(11)("iterator"),o=r(34);e.exports=r(3).getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[n(e)]}},function(e,t,r){var n=r(24),i=r(146);e.exports=r(3).getIterator=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return n(t.call(e))}},function(e,t,r){"use strict";var n=r(130),i=r(138),o=r(34),s=r(17);e.exports=r(77)(Array,"Array",function(e,t){this._t=s(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,i(1)):"keys"==t?i(0,r):"values"==t?i(0,e[r]):i(0,[r,e[r]])},"values"),o.Arguments=o.Array,n("keys"),n("values"),n("entries")},function(e,t,r){var n=r(25);n(n.S,"Object",{create:r(47)})},function(e,t,r){var n=r(25);n(n.S+n.F*!r(14),"Object",{defineProperty:r(16).f})},function(e,t,r){r(84)("getOwnPropertyNames",function(){return r(79).f})},function(e,t,r){var n=r(86),i=r(82);r(84)("getPrototypeOf",function(){return function(e){return i(n(e))}})},function(e,t,r){var n=r(25);n(n.S,"Object",{setPrototypeOf:r(142).set})},function(e,t){},function(e,t,r){"use strict";var n=r(10),i=r(15),o=r(14),s=r(25),a=r(85),u=r(140).KEY,l=r(28),c=r(51),f=r(49),p=r(37),h=r(11),d=r(55),v=r(54),y=r(139),g=r(133),b=r(136),m=r(24),w=r(17),x=r(53),k=r(36),E=r(47),_=r(79),A=r(78),S=r(16),I=r(35),T=A.f,C=S.f,F=_.f,R=n.Symbol,j=n.JSON,N=j&&j.stringify,L=h("_hidden"),P=h("toPrimitive"),O={}.propertyIsEnumerable,Q=c("symbol-registry"),D=c("symbols"),B=c("op-symbols"),M=Object.prototype,U="function"==typeof R,q=n.QObject,G=!q||!q.prototype||!q.prototype.findChild,H=o&&l(function(){return 7!=E(C({},"a",{get:function(){return C(this,"a",{value:7}).a}})).a})?function(e,t,r){var n=T(M,t);n&&delete M[t],C(e,t,r),n&&e!==M&&C(M,t,n)}:C,X=function(e){var t=D[e]=E(R.prototype);return t._k=e,t},z=U&&"symbol"==typeof R.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof R},V=function(e,t,r){return e===M&&V(B,t,r),m(e),t=x(t,!0),m(r),i(D,t)?(r.enumerable?(i(e,L)&&e[L][t]&&(e[L][t]=!1),r=E(r,{enumerable:k(0,!1)})):(i(e,L)||C(e,L,k(1,{})),e[L][t]=!0),H(e,t,r)):C(e,t,r)},W=function(e,t){m(e);for(var r,n=g(t=w(t)),i=0,o=n.length;o>i;)V(e,r=n[i++],t[r]);return e},$=function(e,t){return void 0===t?E(e):W(E(e),t)},J=function(e){var t=O.call(this,e=x(e,!0));return!(this===M&&i(D,e)&&!i(B,e))&&(!(t||!i(this,e)||!i(D,e)||i(this,L)&&this[L][e])||t)},Y=function(e,t){if(e=w(e),t=x(t,!0),e!==M||!i(D,t)||i(B,t)){var r=T(e,t);return!r||!i(D,t)||i(e,L)&&e[L][t]||(r.enumerable=!0),r}},K=function(e){for(var t,r=F(w(e)),n=[],o=0;r.length>o;)i(D,t=r[o++])||t==L||t==u||n.push(t);return n},Z=function(e){for(var t,r=e===M,n=F(r?B:w(e)),o=[],s=0;n.length>s;)!i(D,t=n[s++])||r&&!i(M,t)||o.push(D[t]);return o};U||(R=function(){if(this instanceof R)throw TypeError("Symbol is not a constructor!");var e=p(arguments.length>0?arguments[0]:void 0),t=function(r){this===M&&t.call(B,r),i(this,L)&&i(this[L],e)&&(this[L][e]=!1),H(this,e,k(1,r))};return o&&G&&H(M,e,{configurable:!0,set:t}),X(e)},a(R.prototype,"toString",function(){return this._k}),A.f=Y,S.f=V,r(80).f=_.f=K,r(48).f=J,r(81).f=Z,o&&!r(46)&&a(M,"propertyIsEnumerable",J,!0),d.f=function(e){return X(h(e))}),s(s.G+s.W+s.F*!U,{Symbol:R});for(var ee="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),te=0;ee.length>te;)h(ee[te++]);for(var ee=I(h.store),te=0;ee.length>te;)v(ee[te++]);s(s.S+s.F*!U,"Symbol",{for:function(e){return i(Q,e+="")?Q[e]:Q[e]=R(e)},keyFor:function(e){if(z(e))return y(Q,e);throw TypeError(e+" is not a symbol!")},useSetter:function(){G=!0},useSimple:function(){G=!1}}),s(s.S+s.F*!U,"Object",{create:$,defineProperty:V,defineProperties:W,getOwnPropertyDescriptor:Y,getOwnPropertyNames:K,getOwnPropertySymbols:Z}),j&&s(s.S+s.F*(!U||l(function(){var e=R();return"[null]"!=N([e])||"{}"!=N({a:e})||"{}"!=N(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!z(e)){for(var t,r,n=[e],i=1;arguments.length>i;)n.push(arguments[i++]);return t=n[1],"function"==typeof t&&(r=t),!r&&b(t)||(t=function(e,t){if(r&&(t=r.call(this,e,t)),!z(t))return t}),n[1]=t,N.apply(j,n)}}}),R.prototype[P]||r(26)(R.prototype,P,R.prototype.valueOf),f(R,"Symbol"),f(Math,"Math",!0),f(n.JSON,"JSON",!0)},function(e,t,r){r(54)("asyncIterator")},function(e,t,r){r(54)("observable")},function(e,t,r){var n=r(101),i=e.exports;for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o]);i.request=function(e,t){return e||(e={}),e.scheme="https",e.protocol="https:",n.request.call(this,e,t)}},function(e,t){t.read=function(e,t,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,l=u>>1,c=-7,f=r?i-1:0,p=r?-1:1,h=e[t+f];for(f+=p,o=h&(1<<-c)-1,h>>=-c,c+=a;c>0;o=256*o+e[t+f],f+=p,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=n;c>0;s=256*s+e[t+f],f+=p,c-=8);if(0===o)o=1-l;else{if(o===u)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,n),o-=l}return(h?-1:1)*s*Math.pow(2,o-n)},t.write=function(e,t,r,n,i,o){var s,a,u,l=8*o-i-1,c=(1<<l)-1,f=c>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:o-1,d=n?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),t+=s+f>=1?p/u:p*Math.pow(2,1-f),t*u>=2&&(s++,u/=2),s+f>=c?(a=0,s=c):s+f>=1?(a=(t*u-1)*Math.pow(2,i),s+=f):(a=t*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;e[r+h]=255&a,h+=d,a/=256,i-=8);for(s=s<<i|a,l+=i;l>0;e[r+h]=255&s,h+=d,s/=256,l-=8);e[r+h-d]|=128*v}},function(e,t,r){(function(n,i,o,s){var a,u;/**
 * A JavaScript implementation of the JSON-LD API.
 *
 * @author Dave Longley
 *
 * @license BSD 3-Clause License
 * Copyright (c) 2011-2015 Digital Bazaar, Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * Redistributions of source code must retain the above copyright notice,
 * this list of conditions and the following disclaimer.
 *
 * Redistributions in binary form must reproduce the above copyright
 * notice, this list of conditions and the following disclaimer in the
 * documentation and/or other materials provided with the distribution.
 *
 * Neither the name of the Digital Bazaar, Inc. nor the names of its
 * contributors may be used to endorse or promote products derived from
 * this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
 * IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED
 * TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A
 * PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
 * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
!function(){var l=void 0!==n&&n.versions&&n.versions.node,c=!l&&("undefined"!=typeof window||"undefined"!=typeof self);c&&void 0===i&&("undefined"!=typeof window?i=window:"undefined"!=typeof self?i=self:"undefined"!=typeof $&&(i=$));var f=function(e){function t(){}function a(e){for(var t=[],r=Object.keys(e).sort(),n=0;n<r.length;++n){var i=r[n],o=e[i];U(o)||(o=[o]);for(var s=0;s<o.length;++s){var a=o[s];if(null!==a){if(!G(a))throw new Re("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:e});t.push({"@value":a,"@language":i.toLowerCase()})}}}return t}function u(e,t){if(U(t))for(var r=0;r<t.length;++r)t[r]=u(e,t[r]);else if(K(t))t["@list"]=u(e,t["@list"]);else if(B(t)){Z(t)&&(t["@id"]=e.getId(t["@id"]));for(var n=Object.keys(t).sort(),i=0;i<n.length;++i){var o=n[i];"@id"!==o&&(t[o]=u(e,t[o]))}}return t}function f(t,r,n){if(null===n||void 0===n)return null;var i=L(t,r,{vocab:!0});if("@id"===i)return L(t,n,{base:!0});if("@type"===i)return L(t,n,{vocab:!0,base:!0});var o=e.getContextValue(t,r,"@type");if("@id"===o||"@graph"===i&&G(n))return{"@id":L(t,n,{base:!0})};if("@vocab"===o)return{"@id":L(t,n,{vocab:!0,base:!0})};if(D(i))return n;var s={};if(null!==o)s["@type"]=o;else if(G(n)){var a=e.getContextValue(t,r,"@language");null!==a&&(s["@language"]=a)}return-1===["boolean","number","string"].indexOf(typeof n)&&(n=n.toString()),s["@value"]=n,s}function p(e,t,r){for(var n=[],i=Object.keys(e).sort(),o=0;o<i.length;++o)for(var s=i[o],a=e[s],u=Object.keys(a).sort(),l=0;l<u.length;++l){var c=u[l],f=a[c];if("@type"===c)c=_e;else if(D(c))continue;for(var p=0;p<f.length;++p){var v=f[p],y={};if(y.type=0===s.indexOf("_:")?"blank node":"IRI",y.value=s,ee(s)){var g={};if(g.type=0===c.indexOf("_:")?"blank node":"IRI",g.value=c,ee(c)&&("blank node"!==g.type||r.produceGeneralizedRdf))if(K(v))h(v["@list"],t,y,g,n);else{var b=d(v);b&&n.push({subject:y,predicate:g,object:b})}}}}return n}function h(e,t,r,n,i){for(var o={type:"IRI",value:xe},s={type:"IRI",value:ke},a={type:"IRI",value:Ee},u=0;u<e.length;++u){var l=e[u],c={type:"blank node",value:t.getId()};i.push({subject:r,predicate:n,object:c}),r=c,n=o;var f=d(l);f&&i.push({subject:r,predicate:n,object:f}),n=s}i.push({subject:r,predicate:n,object:a})}function d(e){var t={};if(Y(e)){t.type="literal";var r=e["@value"],n=e["@type"]||null;V(r)?(t.value=r.toString(),t.datatype=n||ye):X(r)||n===ge?(X(r)||(r=parseFloat(r)),t.value=r.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),t.datatype=n||ge):H(r)?(t.value=r.toFixed(0),t.datatype=n||be):"@language"in e?(t.value=r,t.datatype=n||Te,t.language=e["@language"]):(t.value=r,t.datatype=n||me)}else{var i=B(e)?e["@id"]:e;t.type=0===i.indexOf("_:")?"blank node":"IRI",t.value=i}return"IRI"!==t.type||ee(t.value)?t:null}function v(e,t){if("IRI"===e.type||"blank node"===e.type)return{"@id":e.value};var r={"@value":e.value};if(e.language)r["@language"]=e.language;else{var n=e.datatype;if(n||(n=me),t){if(n===ye)"true"===r["@value"]?r["@value"]=!0:"false"===r["@value"]&&(r["@value"]=!1);else if(z(r["@value"]))if(n===be){var i=parseInt(r["@value"],10);i.toFixed(0)===r["@value"]&&(r["@value"]=i)}else n===ge&&(r["@value"]=parseFloat(r["@value"]));-1===[ye,be,ge,me].indexOf(n)&&(r["@type"]=n)}else n!==me&&(r["@type"]=n)}return r}function y(e,t){for(var r=["subject","predicate","object"],n=0;n<r.length;++n){var i=r[n];if(e[i].type!==t[i].type||e[i].value!==t[i].value)return!1}return e.object.language===t.object.language&&e.object.datatype===t.object.datatype}function g(t,r,n,i,o,s){if(U(t))for(var a=0;a<t.length;++a)g(t[a],r,n,i,void 0,s);else{if(!B(t))return void(s&&s.push(t));if(Y(t)){if("@type"in t){var u=t["@type"];0===u.indexOf("_:")&&(t["@type"]=u=i.getId(u))}return void(s&&s.push(t))}if("@type"in t)for(var l=t["@type"],a=0;a<l.length;++a){var u=l[a];0===u.indexOf("_:")&&i.getId(u)}W(o)&&(o=Z(t)?i.getId(t["@id"]):t["@id"]),s&&s.push({"@id":o});var c=r[n],f=c[o]=c[o]||{};f["@id"]=o;for(var p=Object.keys(t).sort(),h=0;h<p.length;++h){var d=p[h];if("@id"!==d)if("@reverse"!==d)if("@graph"!==d)if("@type"!==d&&D(d)){if("@index"===d&&d in f&&(t[d]!==f[d]||t[d]["@id"]!==f[d]["@id"]))throw new Re("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:f});f[d]=t[d]}else{var v=t[d];if(0===d.indexOf("_:")&&(d=i.getId(d)),0!==v.length)for(var y=0;y<v.length;++y){var b=v[y];if("@type"===d&&(b=0===b.indexOf("_:")?i.getId(b):b),$(b)||J(b)){var m=Z(b)?i.getId(b["@id"]):b["@id"];e.addValue(f,d,{"@id":m},{propertyIsArray:!0,allowDuplicate:!1}),g(b,r,n,i,m)}else if(K(b)){var w=[];g(b["@list"],r,n,i,o,w),b={"@list":w},e.addValue(f,d,b,{propertyIsArray:!0,allowDuplicate:!1})}else g(b,r,n,i,o),e.addValue(f,d,b,{propertyIsArray:!0,allowDuplicate:!1})}else e.addValue(f,d,[],{propertyIsArray:!0})}else{o in r||(r[o]={});var x="@merged"===n?n:o;g(t[d],r,x,i)}else{var k={"@id":o},E=t["@reverse"];for(var _ in E)for(var A=E[_],S=0;S<A.length;++S){var I=A[S],T=I["@id"];Z(I)&&(T=i.getId(T)),g(I,r,n,i,T),e.addValue(c[T],_,k,{propertyIsArray:!0,allowDuplicate:!1})}}}}}function b(e){for(var t=e["@default"],r=Object.keys(e).sort(),n=0;n<r.length;++n){var i=r[n];if("@default"!==i){var o=e[i],s=t[i];s?"@graph"in s||(s["@graph"]=[]):t[i]=s={"@id":i,"@graph":[]};for(var a=s["@graph"],u=Object.keys(o).sort(),l=0;l<u.length;++l){var c=o[u[l]];J(c)||a.push(c)}}}return t}function m(e,t,r,n,i){E(r),r=r[0];for(var o=e.options,s={embed:k(r,o,"embed"),explicit:k(r,o,"explicit"),requireAll:k(r,o,"requireAll")},a=_(e,t,r,s),u=Object.keys(a).sort(),l=0;l<u.length;++l){var c=u[l],f=a[c];if("@link"===s.embed&&c in e.link)I(n,i,e.link[c]);else{null===i&&(e.uniqueEmbeds={});var p={};if(p["@id"]=c,e.link[c]=p,"@never"===s.embed||x(f,e.subjectStack))I(n,i,p);else{"@last"===s.embed&&(c in e.uniqueEmbeds&&S(e,c),e.uniqueEmbeds[c]={parent:n,property:i}),e.subjectStack.push(f);for(var h=Object.keys(f).sort(),d=0;d<h.length;d++){var v=h[d];if(D(v))p[v]=te(f[v]);else if(!s.explicit||v in r)for(var y=f[v],g=0;g<y.length;++g){var b=y[g];if(K(b)){var A={"@list":[]};I(p,v,A);var T=b["@list"];for(var C in T)if(b=T[C],J(b)){var F=v in r?r[v][0]["@list"]:w(s);m(e,[b["@id"]],F,A,"@list")}else I(A,"@list",te(b))}else if(J(b)){var F=v in r?r[v]:w(s);m(e,[b["@id"]],F,p,v)}else I(p,v,te(b))}}for(var h=Object.keys(r).sort(),d=0;d<h.length;++d){var v=h[d];if(!D(v)){var R=r[v][0];if(!(k(R,o,"omitDefault")||v in p)){var j="@null";"@default"in R&&(j=te(R["@default"])),U(j)||(j=[j]),p[v]=[{"@preserve":j}]}}}I(n,i,p),e.subjectStack.pop()}}}}function w(e){var t={};for(var r in e)void 0!==e[r]&&(t["@"+r]=[e[r]]);return[t]}function x(e,t){for(var r=t.length-1;r>=0;--r)if(t[r]["@id"]===e["@id"])return!0;return!1}function k(e,t,r){var n="@"+r,i=n in e?e[n][0]:t[r];return"embed"===r&&(!0===i?i="@last":!1===i?i="@never":"@always"!==i&&"@never"!==i&&"@link"!==i&&(i="@last")),i}function E(e){if(!U(e)||1!==e.length||!B(e[0]))throw new Re("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:e})}function _(e,t,r,n){for(var i={},o=0;o<t.length;++o){var s=t[o],a=e.subjects[s];A(a,r,n)&&(i[s]=a)}return i}function A(t,r,n){if("@type"in r&&(1!==r["@type"].length||!B(r["@type"][0]))){for(var i=r["@type"],o=0;o<i.length;++o)if(e.hasValue(t,"@type",i[o]))return!0;return!1}var s=!0,a=!1;for(var u in r){if(D(u)){if("@id"!==u&&"@type"!==u)continue;if(s=!1,"@id"===u&&G(r[u])){if(t[u]!==r[u])return!1;a=!0;continue}}if(s=!1,u in t){if(U(r[u])&&0===r[u].length&&void 0!==t[u])return!1;a=!0}else{var l=U(r[u])&&B(r[u][0])&&"@default"in r[u][0];if(n.requireAll&&!l)return!1}}return s||a}function S(t,r){var n=t.uniqueEmbeds,i=n[r],o=i.parent,s=i.property,a={"@id":r};if(U(o)){for(var u=0;u<o.length;++u)if(e.compareValues(o[u],a)){o[u]=a;break}}else{var l=U(o[s]);e.removeValue(o,s,a,{propertyIsArray:l}),e.addValue(o,s,a,{propertyIsArray:l})}var c=function(e){for(var t=Object.keys(n),r=0;r<t.length;++r){var i=t[r];i in n&&B(n[i].parent)&&n[i].parent["@id"]===e&&(delete n[i],c(i))}};c(r)}function I(t,r,n){B(t)?e.addValue(t,r,n,{propertyIsArray:!0}):t.push(n)}/**
 * Removes the @preserve keywords as the last step of the framing algorithm.
 *
 * @param ctx the active context used to compact the input.
 * @param input the framed, compacted output.
 * @param options the compaction options used.
 *
 * @return the resulting output.
 */
function T(t,r,n){if(U(r)){for(var i=[],o=0;o<r.length;++o){var s=T(t,r[o],n);null!==s&&i.push(s)}r=i}else if(B(r)){
// remove @preserve
if("@preserve"in r)return"@null"===r["@preserve"]?null:r["@preserve"];if(Y(r))return r;if(K(r))return r["@list"]=T(t,r["@list"],n),r;var a=R(t,"@id");if(a in r){var u=r[a];if(u in n.link){var l=n.link[u].indexOf(r);if(-1!==l)return n.link[u][l];n.link[u].push(r)}else n.link[u]=[r]}for(var c in r){var s=T(t,r[c],n),f=e.getContextValue(t,c,"@container");n.compactArrays&&U(s)&&1===s.length&&null===f&&(s=s[0]),r[c]=s}}return r}function C(e,t){return e.length<t.length?-1:t.length<e.length?1:e===t?0:e<t?-1:1}function F(e,t,r,n,i,o){null===o&&(o="@null");var s=[];if("@id"!==o&&"@reverse"!==o||!J(r))s.push(o);else{"@reverse"===o&&s.push("@reverse");var a=R(e,r["@id"],null,{vocab:!0});a in e.mappings&&e.mappings[a]&&e.mappings[a]["@id"]===r["@id"]?s.push.apply(s,["@vocab","@id"]):s.push.apply(s,["@id","@vocab"])}s.push("@none");for(var u=e.inverse[t],l=0;l<n.length;++l){var c=n[l];if(c in u)for(var f=u[c][i],p=0;p<s.length;++p){var h=s[p];if(h in f)return f[h]}}return null}function R(e,t,r,n,i){if(null===t)return t;W(r)&&(r=null),W(i)&&(i=!1),n=n||{};var o=e.getInverse();if(D(t))return t in o?o[t]["@none"]["@type"]["@none"]:t;if(n.vocab&&t in o){var s=e["@language"]||"@none",a=[];B(r)&&"@index"in r&&a.push("@index");var u="@language",l="@null";if(i)u="@type",l="@reverse",a.push("@set");else if(K(r)){"@index"in r||a.push("@list");for(var c=r["@list"],f=0===c.length?s:null,p=null,h=0;h<c.length;++h){var d=c[h],v="@none",y="@none";if(Y(d)?"@language"in d?v=d["@language"]:"@type"in d?y=d["@type"]:v="@null":y="@id",null===f?f=v:v!==f&&Y(d)&&(f="@none"),null===p?p=y:y!==p&&(p="@none"),"@none"===f&&"@none"===p)break}f=f||"@none",p=p||"@none","@none"!==p?(u="@type",l=p):l=f}else Y(r)?"@language"in r&&!("@index"in r)?(a.push("@language"),l=r["@language"]):"@type"in r&&(u="@type",l=r["@type"]):(u="@type",l="@id"),a.push("@set");a.push("@none");var g=F(e,t,r,a,u,l);if(null!==g)return g}if(n.vocab&&"@vocab"in e){var b=e["@vocab"];if(0===t.indexOf(b)&&t!==b){var m=t.substr(b.length);if(!(m in e.mappings))return m}}for(var w=null,x=0,k=[],E=e.fastCurieMap,_=t.length-1;x<_&&t[x]in E;++x)""in(E=E[t[x]])&&k.push(E[""][0]);for(var h=k.length-1;h>=0;--h)for(var A=k[h],S=A.terms,I=0;I<S.length;++I){var T=S[I]+":"+t.substr(A.iri.length),R=!(T in e.mappings)||null===r&&e.mappings[T]["@id"]===t;R&&(null===w||C(T,w)<0)&&(w=T)}return null!==w?w:n.vocab?t:O(e["@base"],t)}function j(t,r,n){if(Y(n)){var i=e.getContextValue(t,r,"@type"),o=e.getContextValue(t,r,"@language"),s=e.getContextValue(t,r,"@container"),a="@index"in n&&"@index"!==s;if(!a&&(n["@type"]===i||n["@language"]===o))return n["@value"];var u=Object.keys(n).length,l=1===u||2===u&&"@index"in n&&!a,c="@language"in t,f=G(n["@value"]),p=t.mappings[r]&&null===t.mappings[r]["@language"];if(l&&(!c||!f||p))return n["@value"];var h={};return a&&(h[R(t,"@index")]=n["@index"]),"@type"in n?h[R(t,"@type")]=R(t,n["@type"],null,{vocab:!0}):"@language"in n&&(h[R(t,"@language")]=n["@language"]),h[R(t,"@value")]=n["@value"],h}var d=L(t,r,{vocab:!0}),i=e.getContextValue(t,r,"@type"),v=R(t,n["@id"],null,{vocab:"@vocab"===i});if("@id"===i||"@vocab"===i||"@graph"===d)return v;var h={};return h[R(t,"@id")]=v,h}function N(e,t,r,n){if(r in n){if(n[r])return;throw new Re("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:t,term:r})}if(n[r]=!1,D(r))throw new Re("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:t,term:r});if(""===r)throw new Re("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:t});e.mappings[r]&&delete e.mappings[r];var i=t[r];if(null===i||B(i)&&null===i["@id"])return e.mappings[r]=null,void(n[r]=!0);if(G(i)&&(i={"@id":i}),!B(i))throw new Re("Invalid JSON-LD syntax; @context property values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:t});var o=e.mappings[r]={};if(o.reverse=!1,"@reverse"in i){if("@id"in i)throw new Re("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});var s=i["@reverse"];if(!G(s))throw new Re("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});var a=L(e,s,{vocab:!0,base:!1},t,n);if(!ee(a))throw new Re("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});o["@id"]=a,o.reverse=!0}else if("@id"in i){var a=i["@id"];if(!G(a))throw new Re("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});if(a!==r){if(a=L(e,a,{vocab:!0,base:!1},t,n),!ee(a)&&!D(a))throw new Re("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});o["@id"]=a}}var u=r.indexOf(":");if(o._termHasColon=-1!==u,!("@id"in o))if(o._termHasColon){var l=r.substr(0,u);if(l in t&&N(e,t,l,n),e.mappings[l]){var c=r.substr(u+1);o["@id"]=e.mappings[l]["@id"]+c}else o["@id"]=r}else{if(!("@vocab"in e))throw new Re("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t,term:r});o["@id"]=e["@vocab"]+r}if(n[r]=!0,"@type"in i){var f=i["@type"];if(!G(f))throw new Re("Invalid JSON-LD syntax; an @context @type values must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:t});if("@id"!==f&&"@vocab"!==f){if(f=L(e,f,{vocab:!0,base:!1},t,n),!ee(f))throw new Re("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:t});if(0===f.indexOf("_:"))throw new Re("Invalid JSON-LD syntax; an @context @type values must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:t})}o["@type"]=f}if("@container"in i){var p=i["@container"];if("@list"!==p&&"@set"!==p&&"@index"!==p&&"@language"!==p)throw new Re("Invalid JSON-LD syntax; @context @container value must be one of the following: @list, @set, @index, or @language.","jsonld.SyntaxError",{code:"invalid container mapping",context:t});if(o.reverse&&"@index"!==p&&"@set"!==p&&null!==p)throw new Re("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});o["@container"]=p}if("@language"in i&&!("@type"in i)){var h=i["@language"];if(null!==h&&!G(h))throw new Re("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:t});null!==h&&(h=h.toLowerCase()),o["@language"]=h}
// disallow aliasing @context and @preserve
var a=o["@id"];if("@context"===a||"@preserve"===a)throw new Re("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:t})}function L(t,r,n,i,o){if(null===r||D(r))return r;if(r=String(r),i&&r in i&&!0!==o[r]&&N(t,i,r,o),n=n||{},n.vocab){var s=t.mappings[r];if(null===s)return null;if(s)return s["@id"]}var a=r.indexOf(":");if(-1!==a){var u=r.substr(0,a),l=r.substr(a+1);if("_"===u||0===l.indexOf("//"))return r;i&&u in i&&N(t,i,u,o);var s=t.mappings[u];return s?s["@id"]+l:r}if(n.vocab&&"@vocab"in t)return t["@vocab"]+r;var c=r;return n.base&&(c=e.prependBase(t["@base"],c)),c}function P(t,r){if(null===t)return r;if(-1!==r.indexOf(":"))return r;G(t)&&(t=e.url.parse(t||""));var n=e.url.parse(r),i={protocol:t.protocol||""};if(null!==n.authority)i.authority=n.authority,i.path=n.path,i.query=n.query;else if(i.authority=t.authority,""===n.path)i.path=t.path,null!==n.query?i.query=n.query:i.query=t.query;else{if(0===n.path.indexOf("/"))i.path=n.path;else{var o=t.path;""!==n.path&&(o=o.substr(0,o.lastIndexOf("/")+1),o.length>0&&"/"!==o.substr(-1)&&(o+="/"),o+=n.path),i.path=o}i.query=n.query}i.path=le(i.path,!!i.authority);var s=i.protocol;return null!==i.authority&&(s+="//"+i.authority),s+=i.path,null!==i.query&&(s+="?"+i.query),null!==n.fragment&&(s+="#"+n.fragment),""===s&&(s="./"),s}function O(t,r){if(null===t)return r;G(t)&&(t=e.url.parse(t||""));var n="";if(""!==t.href?n+=(t.protocol||"")+"//"+(t.authority||""):r.indexOf("//")&&(n+="//"),0!==r.indexOf(n))return r;for(var i=e.url.parse(r.substr(n.length)),o=t.normalizedPath.split("/"),s=i.normalizedPath.split("/"),a=i.fragment||i.query?0:1;o.length>0&&s.length>a&&o[0]===s[0];)o.shift(),s.shift();var u="";if(o.length>0){o.pop();for(var l=0;l<o.length;++l)u+="../"}return u+=s.join("/"),null!==i.query&&(u+="?"+i.query),null!==i.fragment&&(u+="#"+i.fragment),""===u&&(u="./"),u}function Q(t){function r(){var e=this;if(e.inverse)return e.inverse;for(var t=e.inverse={},r=e.fastCurieMap={},o={},s=e["@language"]||"@none",a=e.mappings,u=Object.keys(a).sort(C),l=0;l<u.length;++l){var c=u[l],f=a[c];if(null!==f){var p=f["@container"]||"@none",h=f["@id"];U(h)||(h=[h]);for(var d=0;d<h.length;++d){var v=h[d],y=t[v],g=D(v);if(y)g||f._termHasColon||o[v].push(c);else if(t[v]=y={},!g&&!f._termHasColon){o[v]=[c];var b={iri:v,terms:o[v]};v[0]in r?r[v[0]].push(b):r[v[0]]=[b]}if(y[p]||(y[p]={"@language":{},"@type":{}}),y=y[p],f.reverse)i(f,c,y["@type"],"@reverse");else if("@type"in f)i(f,c,y["@type"],f["@type"]);else if("@language"in f){var m=f["@language"]||"@null";i(f,c,y["@language"],m)}else i(f,c,y["@language"],s),i(f,c,y["@type"],"@none"),i(f,c,y["@language"],"@none")}}}for(var w in r)n(r,w,1);return t}function n(e,t,r){for(var i,o,s=e[t],a=e[t]={},u=0;u<s.length;++u)i=s[u].iri,o=r>=i.length?"":i[r],o in a?a[o].push(s[u]):a[o]=[s[u]];for(var t in a)""!==t&&n(a,t,r+1)}function i(e,t,r,n){n in r||(r[n]=t)}function o(){var e={};return e["@base"]=this["@base"],e.mappings=te(this.mappings),e.clone=this.clone,e.inverse=null,e.getInverse=this.getInverse,"@language"in this&&(e["@language"]=this["@language"]),"@vocab"in this&&(e["@vocab"]=this["@vocab"]),e}return{"@base":e.url.parse(t.base||""),mappings:{},inverse:null,getInverse:r,clone:o}}function D(e){if(!G(e))return!1;switch(e){case"@base":case"@context":case"@container":case"@default":case"@embed":case"@explicit":case"@graph":case"@id":case"@index":case"@language":case"@list":case"@omitDefault":case"@preserve":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@vocab":return!0}return!1}function B(e){return"[object Object]"===Object.prototype.toString.call(e)}function M(e){return B(e)&&0===Object.keys(e).length}function U(e){return Array.isArray(e)}function q(e){if(!G(e)&&!M(e)){var t=!1;if(U(e)){t=!0;for(var r=0;r<e.length;++r)if(!G(e[r])){t=!1;break}}if(!t)throw new Re('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, or an empty object.',"jsonld.SyntaxError",{code:"invalid type value",value:e})}}function G(e){return"string"==typeof e||"[object String]"===Object.prototype.toString.call(e)}function H(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function X(e){return H(e)&&-1!==String(e).indexOf(".")}function z(e){return!isNaN(parseFloat(e))&&isFinite(e)}function V(e){return"boolean"==typeof e||"[object Boolean]"===Object.prototype.toString.call(e)}function W(e){return void 0===e}function $(e){var t=!1;if(B(e)&&!("@value"in e||"@set"in e||"@list"in e)){t=Object.keys(e).length>1||!("@id"in e)}return t}function J(e){return B(e)&&1===Object.keys(e).length&&"@id"in e}function Y(e){return B(e)&&"@value"in e}function K(e){return B(e)&&"@list"in e}function Z(e){var t=!1;return B(e)&&(t="@id"in e?0===e["@id"].indexOf("_:"):0===Object.keys(e).length||!("@value"in e||"@set"in e||"@list"in e)),t}function ee(e){return G(e)&&-1!==e.indexOf(":")}function te(e){if(e&&"object"==typeof e){var t;if(U(e)){t=[];for(var r=0;r<e.length;++r)t[r]=te(e[r])}else if(B(e)){t={};for(var n in e)t[n]=te(e[n])}else t=e.toString();return t}return e}function re(t,r,n,i){var o=Object.keys(r).length;if(U(t)){for(var s=0;s<t.length;++s)re(t[s],r,n,i);return o<Object.keys(r).length}if(B(t)){for(var a in t)if("@context"===a){var u=t[a];if(U(u))for(var l=u.length,s=0;s<l;++s){var c=u[s];G(c)&&(c=e.prependBase(i,c),n?(c=r[c],U(c)?(Array.prototype.splice.apply(u,[s,1].concat(c)),s+=c.length-1,l=u.length):u[s]=c):c in r||(r[c]=!1))}else G(u)&&(u=e.prependBase(i,u),n?t[a]=r[u]:u in r||(r[u]=!1))}else re(t[a],r,n,i);return o<Object.keys(r).length}return!1}function ne(e,t,r){var n=null,i=t.documentLoader,o=function(e,t,r,i,s){if(Object.keys(t).length>Fe)return n=new Re("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"loading remote context failed",max:Fe}),s(n);var a={},u=function(){re(e,a,!0,i),s(null,e)};if(!re(e,a,!1,i))return u();var l=[];for(var c in a)!1===a[c]&&l.push(c);for(var f=l.length,p=0;p<l.length;++p)!function(e){if(e in t)return n=new Re("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"recursive context inclusion",url:e}),s(n);var i=te(t);i[e]=!0;var l=function(t,l){if(!n){var c=l?l.document:null;if(!t&&G(c))try{c=JSON.parse(c)}catch(e){t=e}if(t?t=new Re("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:e,cause:t}):B(c)||(t=new Re("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:e,cause:t})),t)return n=t,s(n);c="@context"in c?{"@context":c["@context"]}:{"@context":{}},l.contextUrl&&(U(c["@context"])||(c["@context"]=[c["@context"]]),c["@context"].push(l.contextUrl)),o(c,i,r,e,function(t,r){if(t)return s(t);a[e]=r["@context"],0===(f-=1)&&u()})}},c=r(e,l);c&&"then"in c&&c.then(l.bind(null,null),l)}(l[p])};o(e,{},i,t.base,r)}function ie(e){for(var t=/(?:\r\n)|(?:\n)|(?:\r)/g,r=new RegExp("^[ \\t]*(?:#.*)?$"),n=new RegExp('^[ \\t]*(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z0-9]+)))[ \\t]+(?:<([^:]+:[^>]*)>)[ \\t]+(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z0-9]+))|(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"(?:(?:\\^\\^(?:<([^:]+:[^>]*)>))|(?:@([a-z]+(?:-[a-z0-9]+)*)))?))[ \\t]*(?:\\.|(?:(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z0-9]+)))[ \\t]*\\.))[ \\t]*(?:#.*)?$'),i={},o=e.split(t),s=0,a=0;a<o.length;++a){var u=o[a];if(s++,!r.test(u)){var l=u.match(n);if(null===l)throw new Re("Error while parsing N-Quads; invalid quad.","jsonld.ParseError",{line:s});var c={};if(W(l[1])?c.subject={type:"blank node",value:l[2]}:c.subject={type:"IRI",value:l[1]},c.predicate={type:"IRI",value:l[3]},W(l[4]))if(W(l[5])){c.object={type:"literal"},W(l[7])?W(l[8])?c.object.datatype=me:(c.object.datatype=Te,c.object.language=l[8]):c.object.datatype=l[7];var f=l[6].replace(/\\"/g,'"').replace(/\\t/g,"\t").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\\\/g,"\\");c.object.value=f}else c.object={type:"blank node",value:l[5]};else c.object={type:"IRI",value:l[4]};var p="@default";if(W(l[9])?W(l[10])||(p=l[10]):p=l[9],p in i){for(var h=!0,d=i[p],v=0;h&&v<d.length;++v)y(d[v],c)&&(h=!1);h&&d.push(c)}else i[p]=[c]}}return i}function oe(e){var t=[];for(var r in e)for(var n=e[r],i=0;i<n.length;++i){var o=n[i];"@default"===r&&(r=null),t.push(se(o,r))}return t.sort().join("")}function se(e,t){var r=e.subject,n=e.predicate,i=e.object,o=t||null;"name"in e&&e.name&&(o=e.name.value);var s="";if("IRI"===r.type?s+="<"+r.value+">":s+=r.value,s+=" ","IRI"===n.type?s+="<"+n.value+">":s+=n.value,s+=" ","IRI"===i.type)s+="<"+i.value+">";else if("blank node"===i.type)s+=i.value;else{var a=i.value.replace(/\\/g,"\\\\").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\"/g,'\\"');s+='"'+a+'"',i.datatype===Te?i.language&&(s+="@"+i.language):i.datatype!==me&&(s+="^^<"+i.datatype+">")}return null!==o&&void 0!==o&&(0!==o.indexOf("_:")?s+=" <"+o+">":s+=" "+o),s+=" .\n"}function ae(e){var t={};t["@default"]=[];for(var r=e.getSubjects(),n=0;n<r.length;++n){var i=r[n];if(null!==i){var o=e.getSubjectTriples(i);if(null!==o){var s=o.predicates;for(var a in s)for(var u=s[a].objects,l=0;l<u.length;++l){var c=u[l],f={};0===i.indexOf("_:")?f.subject={type:"blank node",value:i}:f.subject={type:"IRI",value:i},0===a.indexOf("_:")?f.predicate={type:"blank node",value:a}:f.predicate={type:"IRI",value:a};var p=c.value;if(c.type===Se){de||Qe();var h=new de;p="";for(var d=0;d<c.value.length;d++)c.value[d].nodeType===ve.ELEMENT_NODE?p+=h.serializeToString(c.value[d]):c.value[d].nodeType===ve.TEXT_NODE&&(p+=c.value[d].nodeValue)}f.object={},c.type===Ie?0===c.value.indexOf("_:")?f.object.type="blank node":f.object.type="IRI":(f.object.type="literal",c.type===Ae?c.language?(f.object.datatype=Te,f.object.language=c.language):f.object.datatype=me:f.object.datatype=c.type),f.object.value=p,t["@default"].push(f)}}}}return t}function ue(e){this.prefix=e,this.counter=0,this.existing={}}function le(e,t){var r="";0===e.indexOf("/")&&(r="/");for(var n=e.split("/"),i=[];n.length>0;)"."===n[0]||""===n[0]&&n.length>1?n.shift():".."!==n[0]?i.push(n.shift()):(n.shift(),t||i.length>0&&".."!==i[i.length-1]?i.pop():i.push(".."));return r+i.join("/")}e.compact=function(t,r,n,i){function o(e,t,n,o){if(e)return i(e);o.compactArrays&&!o.graph&&U(t)?1===t.length?t=t[0]:0===t.length&&(t={}):o.graph&&B(t)&&(t=[t]),B(r)&&"@context"in r&&(r=r["@context"]),r=te(r),U(r)||(r=[r]);var s=r;r=[];for(var a=0;a<s.length;++a)(!B(s[a])||Object.keys(s[a]).length>0)&&r.push(s[a]);var u=r.length>0;if(1===r.length&&(r=r[0]),U(t)){var l=R(n,"@graph"),c=t;t={},u&&(t["@context"]=r),t[l]=c}else if(B(t)&&u){var c=t;t={"@context":r};for(var f in c)t[f]=c[f]}i(null,t,n)}if(arguments.length<2)return e.nextTick(function(){i(new TypeError("Could not compact, too few arguments."))});if("function"==typeof n&&(i=n,n={}),n=n||{},null===r)return e.nextTick(function(){i(new Re("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"}))});if(null===t)return e.nextTick(function(){i(null,null)});"base"in n||(n.base="string"==typeof t?t:""),"compactArrays"in n||(n.compactArrays=!0),"graph"in n||(n.graph=!1),"skipExpansion"in n||(n.skipExpansion=!1),"documentLoader"in n||(n.documentLoader=e.loadDocument),"link"in n||(n.link=!1),n.link&&(n.skipExpansion=!0);!function(t,r,n){if(r.skipExpansion)return e.nextTick(function(){n(null,t)});e.expand(t,r,n)}(t,n,function(t,s){if(t)return i(new Re("Could not expand input before compaction.","jsonld.CompactError",{cause:t}));var a=Q(n);e.processContext(a,r,n,function(e,t){if(e)return i(new Re("Could not process context before compaction.","jsonld.CompactError",{cause:e}));var r;try{r=(new je).compact(t,null,s,n)}catch(e){return i(e)}o(null,r,t,n)})})},e.expand=function(t,r,n){function i(e){"base"in r||(r.base=e.documentUrl||"");var t={document:te(e.document),remoteContext:{"@context":e.contextUrl}};if("expandContext"in r){var i=te(r.expandContext);t.expandContext="object"==typeof i&&"@context"in i?i:{"@context":i}}ne(t,r,function(e,t){if(e)return n(e);var i;try{var o=new je,s=Q(r),a=t.document,u=t.remoteContext["@context"];t.expandContext&&(s=o.processContext(s,t.expandContext["@context"],r)),u&&(s=o.processContext(s,u,r)),i=o.expand(s,null,a,r,!1),B(i)&&"@graph"in i&&1===Object.keys(i).length?i=i["@graph"]:null===i&&(i=[]),U(i)||(i=[i])}catch(e){return n(e)}n(null,i)})}if(arguments.length<1)return e.nextTick(function(){n(new TypeError("Could not expand, too few arguments."))});"function"==typeof r&&(n=r,r={}),r=r||{},"documentLoader"in r||(r.documentLoader=e.loadDocument),"keepFreeFloatingNodes"in r||(r.keepFreeFloatingNodes=!1),e.nextTick(function(){if("string"==typeof t){var e=function(e,t){if(e)return n(e);try{if(!t.document)throw new Re("No remote document found at the given URL.","jsonld.NullRemoteDocument");"string"==typeof t.document&&(t.document=JSON.parse(t.document))}catch(e){return n(new Re("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",cause:e,remoteDoc:t}))}i(t)},o=r.documentLoader(t,e);return void(o&&"then"in o&&o.then(e.bind(null,null),e))}i({contextUrl:null,documentUrl:null,document:t})})},e.flatten=function(t,r,n,i){if(arguments.length<1)return e.nextTick(function(){i(new TypeError("Could not flatten, too few arguments."))});"function"==typeof n?(i=n,n={}):"function"==typeof r&&(i=r,r=null,n={}),n=n||{},"base"in n||(n.base="string"==typeof t?t:""),"documentLoader"in n||(n.documentLoader=e.loadDocument),e.expand(t,n,function(t,o){if(t)return i(new Re("Could not expand input before flattening.","jsonld.FlattenError",{cause:t}));var s;try{s=(new je).flatten(o)}catch(e){return i(e)}if(null===r)return i(null,s);n.graph=!0,n.skipExpansion=!0,e.compact(s,r,n,function(e,t){if(e)return i(new Re("Could not compact flattened output.","jsonld.FlattenError",{cause:e}));i(null,t)})})},e.frame=function(t,r,n,i){function o(r){var o,s=r.document;s?(o=s["@context"],r.contextUrl?(o?U(o)?o.push(r.contextUrl):o=[o,r.contextUrl]:o=r.contextUrl,s["@context"]=o):o=o||{}):o={},e.expand(t,n,function(t,r){if(t)return i(new Re("Could not expand input before framing.","jsonld.FrameError",{cause:t}));var a=te(n);a.isFrame=!0,a.keepFreeFloatingNodes=!0,e.expand(s,a,function(t,n){if(t)return i(new Re("Could not expand frame before framing.","jsonld.FrameError",{cause:t}));var s;try{s=(new je).frame(r,n,a)}catch(e){return i(e)}a.graph=!0,a.skipExpansion=!0,a.link={},e.compact(s,o,a,function(e,t,r){if(e)return i(new Re("Could not compact framed output.","jsonld.FrameError",{cause:e}));var n=R(r,"@graph");
// remove @preserve from results
a.link={},t[n]=T(r,t[n],a),i(null,t)})})})}if(arguments.length<2)return e.nextTick(function(){i(new TypeError("Could not frame, too few arguments."))});"function"==typeof n&&(i=n,n={}),n=n||{},"base"in n||(n.base="string"==typeof t?t:""),"documentLoader"in n||(n.documentLoader=e.loadDocument),"embed"in n||(n.embed="@last"),n.explicit=n.explicit||!1,"requireAll"in n||(n.requireAll=!0),n.omitDefault=n.omitDefault||!1,e.nextTick(function(){if("string"==typeof r){var e=function(e,t){if(e)return i(e);try{if(!t.document)throw new Re("No remote document found at the given URL.","jsonld.NullRemoteDocument");"string"==typeof t.document&&(t.document=JSON.parse(t.document))}catch(e){return i(new Re("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",cause:e,remoteDoc:t}))}o(t)},t=n.documentLoader(r,e);return void(t&&"then"in t&&t.then(e.bind(null,null),e))}o({contextUrl:null,documentUrl:null,document:r})})},e.link=function(t,r,n,i){var o={};r&&(o["@context"]=r),o["@embed"]="@link",e.frame(t,o,n,i)},e.objectify=function(t,r,n,i){"function"==typeof n&&(i=n,n={}),n=n||{},"base"in n||(n.base="string"==typeof t?t:""),"documentLoader"in n||(n.documentLoader=e.loadDocument),e.expand(t,n,function(t,o){if(t)return i(new Re("Could not expand input before linking.","jsonld.LinkError",{cause:t}));var s;try{s=(new je).flatten(o)}catch(e){return i(e)}n.graph=!0,n.skipExpansion=!0,e.compact(s,r,n,function(t,r,n){if(t)return i(new Re("Could not compact flattened output before linking.","jsonld.LinkError",{cause:t}));var o=R(n,"@graph"),s=r[o][0],a=function(t){if(B(t)||U(t)){if(B(t)){if(a.visited[t["@id"]])return;a.visited[t["@id"]]=!0}for(var r in t){var i=t[r],o="@id"===e.getContextValue(n,r,"@type");if(U(i)||B(i)||o)if(G(i)&&o)t[r]=i=s[i],a(i);else if(U(i))for(var u=0;u<i.length;++u)G(i[u])&&o?i[u]=s[i[u]]:B(i[u])&&"@id"in i[u]&&(i[u]=s[i[u]["@id"]]),a(i[u]);else if(B(i)){var l=i["@id"];t[r]=i=s[l],a(i)}}}};a.visited={},a(s),r.of_type={};for(var u in s)if("@type"in s[u]){var l=s[u]["@type"];U(l)||(l=[l]);for(var c=0;c<l.length;++c)l[c]in r.of_type||(r.of_type[l[c]]=[]),r.of_type[l[c]].push(s[u])}i(null,r)})})},e.normalize=function(t,r,n){if(arguments.length<1)return e.nextTick(function(){n(new TypeError("Could not normalize, too few arguments."))});if("function"==typeof r&&(n=r,r={}),r=r||{},"algorithm"in r||(r.algorithm="URGNA2012"),"base"in r||(r.base="string"==typeof t?t:""),"documentLoader"in r||(r.documentLoader=e.loadDocument),"inputFormat"in r){if("application/nquads"!==r.inputFormat)return n(new Re("Unknown normalization input format.","jsonld.NormalizeError"));var i=ie(t);(new je).normalize(i,r,n)}else{var o=te(r);delete o.format,o.produceGeneralizedRdf=!1,e.toRDF(t,o,function(e,t){if(e)return n(new Re("Could not convert input to RDF dataset before normalization.","jsonld.NormalizeError",{cause:e}));(new je).normalize(t,r,n)})}},e.fromRDF=function(t,r,n){if(arguments.length<1)return e.nextTick(function(){n(new TypeError("Could not convert from RDF, too few arguments."))});"function"==typeof r&&(n=r,r={}),r=r||{},"useRdfType"in r||(r.useRdfType=!1),"useNativeTypes"in r||(r.useNativeTypes=!1),"format"in r||!G(t)||"format"in r||(r.format="application/nquads"),e.nextTick(function(){function e(e,t,r){(new je).fromRDF(e,t,r)}var i;if(r.format){if(!(i=r.rdfParser||he[r.format]))return n(new Re("Unknown input format.","jsonld.UnknownFormat",{format:r.format}))}else i=function(){return t};var o=!1;try{t=i(t,function(t,i){if(o=!0,t)return n(t);e(i,r,n)})}catch(e){if(!o)return n(e);throw e}if(t){if("then"in t)return t.then(function(t){e(t,r,n)},n);e(t,r,n)}})},e.toRDF=function(t,r,n){if(arguments.length<1)return e.nextTick(function(){n(new TypeError("Could not convert to RDF, too few arguments."))});"function"==typeof r&&(n=r,r={}),r=r||{},"base"in r||(r.base="string"==typeof t?t:""),"documentLoader"in r||(r.documentLoader=e.loadDocument),e.expand(t,r,function(e,t){if(e)return n(new Re("Could not expand input before serialization to RDF.","jsonld.RdfError",{cause:e}));var i;try{if(i=je.prototype.toRDF(t,r),r.format){if("application/nquads"===r.format)return n(null,oe(i));throw new Re("Unknown output format.","jsonld.UnknownFormat",{format:r.format})}}catch(e){return n(e)}n(null,i)})},e.createNodeMap=function(t,r,n){if(arguments.length<1)return e.nextTick(function(){n(new TypeError("Could not create node map, too few arguments."))});"function"==typeof r&&(n=r,r={}),r=r||{},"base"in r||(r.base="string"==typeof t?t:""),"documentLoader"in r||(r.documentLoader=e.loadDocument),e.expand(t,r,function(e,t){if(e)return n(new Re("Could not expand input before creating node map.","jsonld.CreateNodeMapError",{cause:e}));var i;try{i=(new je).createNodeMap(t,r)}catch(e){return n(e)}n(null,i)})},e.merge=function(t,r,n,i){function o(e,t){if(!u){if(e)return u=e,i(new Re("Could not expand input before flattening.","jsonld.FlattenError",{cause:e}));a.push(t),0==--l&&s(a)}}function s(t){var o=!0;"mergeNodes"in n&&(o=n.mergeNodes);var s,a=n.namer||n.issuer||new ue("_:b"),u={"@default":{}};try{for(var l=0;l<t.length;++l){var c=t[l];c=e.relabelBlankNodes(c,{issuer:new ue("_:b"+l+"-")});var f=o||0===l?u:{"@default":{}};if(g(c,f,"@default",a),f!==u)for(var p in f){var h=f[p];if(p in u){var d=u[p];for(var v in h)v in d||(d[v]=h[v])}else u[p]=h}}s=b(u)}catch(e){return i(e)}for(var y=[],m=Object.keys(s).sort(),w=0;w<m.length;++w){var x=s[m[w]];J(x)||y.push(x)}if(null===r)return i(null,y);n.graph=!0,n.skipExpansion=!0,e.compact(y,r,n,function(e,t){if(e)return i(new Re("Could not compact merged output.","jsonld.MergeError",{cause:e}));i(null,t)})}if(arguments.length<1)return e.nextTick(function(){i(new TypeError("Could not merge, too few arguments."))});if(!U(t))return e.nextTick(function(){i(new TypeError('Could not merge, "docs" must be an array.'))});"function"==typeof n?(i=n,n={}):"function"==typeof r&&(i=r,r=null,n={}),n=n||{};for(var a=[],u=null,l=t.length,c=0;c<t.length;++c){var f={};for(var p in n)f[p]=n[p];e.expand(t[c],f,o)}},e.relabelBlankNodes=function(e,t){return t=t||{},u(t.namer||t.issuer||new ue("_:b"),e)},e.prependBase=function(e,t){return P(e,t)},e.documentLoader=function(t,r){var n=new Re("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed"});return l?r(n,{contextUrl:null,documentUrl:t,document:null}):e.promisify(function(e){e(n)})},e.loadDocument=function(t,r){var n=e.documentLoader(t,r);n&&"then"in n&&n.then(r.bind(null,null),r)},e.promises=function(t){t=t||{};var n=Array.prototype.slice,o=e.promisify,s=t.api||{},a=t.version||"jsonld.js";"string"==typeof t.api&&(t.version||(a=t.api),s={}),s.expand=function(t){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");return o.apply(null,[e.expand].concat(n.call(arguments)))},s.compact=function(t,r){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");var i=function(t,r,n,i){"function"==typeof n&&(i=n,n={}),n=n||{},e.compact(t,r,n,function(e,t){i(e,t)})};return o.apply(null,[i].concat(n.call(arguments)))},s.flatten=function(t){if(arguments.length<1)throw new TypeError("Could not flatten, too few arguments.");return o.apply(null,[e.flatten].concat(n.call(arguments)))},s.frame=function(t,r){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");return o.apply(null,[e.frame].concat(n.call(arguments)))},s.fromRDF=function(t){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");return o.apply(null,[e.fromRDF].concat(n.call(arguments)))},s.toRDF=function(t){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");return o.apply(null,[e.toRDF].concat(n.call(arguments)))},s.normalize=function(t){if(arguments.length<1)throw new TypeError("Could not normalize, too few arguments.");return o.apply(null,[e.normalize].concat(n.call(arguments)))},"jsonld.js"===a&&(s.link=function(t,r){if(arguments.length<2)throw new TypeError("Could not link, too few arguments.");return o.apply(null,[e.link].concat(n.call(arguments)))},s.objectify=function(t){return o.apply(null,[e.objectify].concat(n.call(arguments)))},s.createNodeMap=function(t){return o.apply(null,[e.createNodeMap].concat(n.call(arguments)))},s.merge=function(t){return o.apply(null,[e.merge].concat(n.call(arguments)))});try{e.Promise=i.Promise||r(89).Promise}catch(e){var u=function(){throw new Error("Unable to find a Promise implementation.")};for(var l in s)s[l]=u}return s},e.promisify=function(t){if(!e.Promise)try{e.Promise=i.Promise||r(89).Promise}catch(e){throw new Error("Unable to find a Promise implementation.")}var n=Array.prototype.slice.call(arguments,1);return new e.Promise(function(e,r){t.apply(null,n.concat(function(t,n){t?r(t):e(n)}))})},e.promises({api:e.promises}),t.prototype=e.promises({version:"json-ld-1.0"}),t.prototype.toString=function(){return this instanceof t?"[object JsonLdProcessor]":"[object JsonLdProcessorPrototype]"},e.JsonLdProcessor=t;var ce=!!Object.defineProperty;if(ce)try{Object.defineProperty({},"x",{})}catch(e){ce=!1}ce&&(Object.defineProperty(t,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(t.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:t})),c&&void 0===i.JsonLdProcessor&&(ce?Object.defineProperty(i,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:t}):i.JsonLdProcessor=t);var fe="function"==typeof o&&o,pe=fe?function(e){fe(e)}:function(e){setTimeout(e,0)};"object"==typeof n&&"function"==typeof n.nextTick?e.nextTick=n.nextTick:e.nextTick=pe,e.setImmediate=fe?pe:e.nextTick,e.parseLinkHeader=function(e){for(var t={},r=e.match(/(?:<[^>]*?>|"[^"]*?"|[^,])+/g),n=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,i=0;i<r.length;++i){var o=r[i].match(n);if(o){for(var s={target:o[1]},a=o[2],u=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g;o=u.exec(a);)s[o[1]]=void 0===o[2]?o[3]:o[2];var l=s.rel||"";U(t[l])?t[l].push(s):t[l]=l in t?[t[l],s]:s}}return t},e.RequestQueue=function(){this._requests={}},e.RequestQueue.prototype.wrapLoader=function(e){return this._loader=e,this._usePromise=1===e.length,this.add.bind(this)},e.RequestQueue.prototype.add=function(t,r){var n=this;if(!r&&!n._usePromise)throw new Error("callback must be specified.");if(n._usePromise)return new e.Promise(function(e,r){var i=n._requests[t];i||(i=n._requests[t]=n._loader(t).then(function(e){return delete n._requests[t],e}).catch(function(e){throw delete n._requests[t],e})),i.then(function(t){e(t)}).catch(function(e){r(e)})});t in n._requests?n._requests[t].push(r):(n._requests[t]=[r],n._loader(t,function(e,r){var i=n._requests[t];delete n._requests[t];for(var o=0;o<i.length;++o)i[o](e,r)}))},e.DocumentCache=function(e){this.order=[],this.cache={},this.size=e||50,this.expires=3e4},e.DocumentCache.prototype.get=function(e){if(e in this.cache){var t=this.cache[e];if(t.expires>=+new Date)return t.ctx;delete this.cache[e],this.order.splice(this.order.indexOf(e),1)}return null},e.DocumentCache.prototype.set=function(e,t){this.order.length===this.size&&delete this.cache[this.order.shift()],this.order.push(e),this.cache[e]={ctx:t,expires:+new Date+this.expires}},e.ActiveContextCache=function(e){this.order=[],this.cache={},this.size=e||100},e.ActiveContextCache.prototype.get=function(e,t){var r=JSON.stringify(e),n=JSON.stringify(t),i=this.cache[r];return i&&n in i?i[n]:null},e.ActiveContextCache.prototype.set=function(e,t,r){if(this.order.length===this.size){var n=this.order.shift();delete this.cache[n.activeCtx][n.localCtx]}var i=JSON.stringify(e),o=JSON.stringify(t);this.order.push({activeCtx:i,localCtx:o}),i in this.cache||(this.cache[i]={}),this.cache[i][o]=te(r)},e.cache={activeCtx:new e.ActiveContextCache},e.documentLoaders={},e.documentLoaders.jquery=function(t,r){function n(n,i){return 0!==n.indexOf("http:")&&0!==n.indexOf("https:")?i(new Re('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:n}),{contextUrl:null,documentUrl:n,document:null}):r.secure&&0!==n.indexOf("https")?i(new Re('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:n}),{contextUrl:null,documentUrl:n,document:null}):void t.ajax({url:n,accepts:{json:"application/ld+json, application/json"},headers:{Accept:"application/ld+json, application/json"},dataType:"json",crossDomain:!0,success:function(t,r,o){var s={contextUrl:null,documentUrl:n,document:t},a=o.getResponseHeader("Content-Type"),u=o.getResponseHeader("Link");if(u&&"application/ld+json"!==a){if(u=e.parseLinkHeader(u)[Ce],U(u))return i(new Re("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:n}),s);u&&(s.contextUrl=u.target)}i(null,s)},error:function(e,t,r){i(new Re("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:n,cause:r}),{contextUrl:null,documentUrl:n,document:null})}})}r=r||{};var i=new e.RequestQueue;return("usePromise"in r?r.usePromise:"undefined"!=typeof Promise)?i.wrapLoader(function(t){return e.promisify(n,t)}):i.wrapLoader(n)},e.documentLoaders.node=function(t){function n(r,l,c){function f(t,i,s){if(p={contextUrl:null,documentUrl:r,document:s||null},t)return c(new Re("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:r,cause:t}),p);var a=u.STATUS_CODES[i.statusCode];if(i.statusCode>=400)return c(new Re("URL could not be dereferenced: "+a,"jsonld.InvalidUrl",{code:"loading document failed",url:r,httpStatusCode:i.statusCode}),p);if(i.headers.link&&"application/ld+json"!==i.headers["content-type"]){var f=e.parseLinkHeader(i.headers.link)[Ce];if(U(f))return c(new Re("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:r}),p);f&&(p.contextUrl=f.target)}if(i.statusCode>=300&&i.statusCode<400&&i.headers.location)return l.length===o?c(new Re("URL could not be dereferenced; there were too many redirects.","jsonld.TooManyRedirects",{code:"loading document failed",url:r,httpStatusCode:i.statusCode,redirects:l}),p):-1!==l.indexOf(r)?c(new Re("URL could not be dereferenced; infinite redirection was detected.","jsonld.InfiniteRedirectDetected",{code:"recursive context inclusion",url:r,httpStatusCode:i.statusCode,redirects:l}),p):(l.push(r),n(i.headers.location,l,c));l.push(r),c(t,p)}if(0!==r.indexOf("http:")&&0!==r.indexOf("https:"))return c(new Re('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:r}),{contextUrl:null,documentUrl:r,document:null});if(t.secure&&0!==r.indexOf("https"))return c(new Re('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:r}),{contextUrl:null,documentUrl:r,document:null});var p=null;if(null!==p)return c(null,p);var h={Accept:a};for(var d in t.headers)h[d]=t.headers[d];s({url:r,headers:h,strictSSL:i,followRedirect:!1},f)}t=t||{};var i=!("strictSSL"in t)||t.strictSSL,o="maxRedirects"in t?t.maxRedirects:-1,s="request"in t?t.request:r(18),a="application/ld+json, application/json",u=r(18),l=new e.RequestQueue;if(t.usePromise)return l.wrapLoader(function(t){return e.promisify(n,t,[])});var c=t.headers||{};if("Accept"in c||"accept"in c)throw new RangeError('Accept header may not be specified as an option; only "'+a+'" is supported.');return l.wrapLoader(function(e,t){n(e,[],t)})},e.documentLoaders.xhr=function(t){function r(r,i){if(0!==r.indexOf("http:")&&0!==r.indexOf("https:"))return i(new Re('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:r}),{contextUrl:null,documentUrl:r,document:null});if(t.secure&&0!==r.indexOf("https"))return i(new Re('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:r}),{contextUrl:null,documentUrl:r,document:null});var o=t.xhr||XMLHttpRequest,s=new o;s.onload=function(){if(s.status>=400)return i(new Re("URL could not be dereferenced: "+s.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:r,httpStatusCode:s.status}),{contextUrl:null,documentUrl:r,document:null});var t,o={contextUrl:null,documentUrl:r,document:s.response},a=s.getResponseHeader("Content-Type");if(n.test(s.getAllResponseHeaders())&&(t=s.getResponseHeader("Link")),t&&"application/ld+json"!==a){if(t=e.parseLinkHeader(t)[Ce],U(t))return i(new Re("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:r}),o);t&&(o.contextUrl=t.target)}i(null,o)},s.onerror=function(){i(new Re("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:r}),{contextUrl:null,documentUrl:r,document:null})},s.open("GET",r,!0),s.setRequestHeader("Accept","application/ld+json, application/json"),s.send()}t=t||{};var n=/(^|(\r\n))link:/i,i=new e.RequestQueue;return("usePromise"in t?t.usePromise:"undefined"!=typeof Promise)?i.wrapLoader(function(t){return e.promisify(r,t)}):i.wrapLoader(r)},e.useDocumentLoader=function(t){if(!(t in e.documentLoaders))throw new Re('Unknown document loader type: "'+t+'"',"jsonld.UnknownDocumentLoader",{type:t});e.documentLoader=e.documentLoaders[t].apply(e,Array.prototype.slice.call(arguments,1))},e.processContext=function(t,r){var n={},i=2;arguments.length>3&&(n=arguments[2]||{},i+=1);var o=arguments[i];if("base"in n||(n.base=""),"documentLoader"in n||(n.documentLoader=e.loadDocument),null===r)return o(null,Q(n));r=te(r),B(r)&&"@context"in r||(r={"@context":r}),ne(r,n,function(e,r){if(e)return o(e);try{r=(new je).processContext(t,r,n)}catch(e){return o(e)}o(null,r)})},e.hasProperty=function(e,t){var r=!1;if(t in e){var n=e[t];r=!U(n)||n.length>0}return r},e.hasValue=function(t,r,n){var i=!1;if(e.hasProperty(t,r)){var o=t[r],s=K(o);if(U(o)||s){s&&(o=o["@list"]);for(var a=0;a<o.length;++a)if(e.compareValues(n,o[a])){i=!0;break}}else U(n)||(i=e.compareValues(n,o))}return i},e.addValue=function(t,r,n,i){if(i=i||{},"propertyIsArray"in i||(i.propertyIsArray=!1),"allowDuplicate"in i||(i.allowDuplicate=!0),U(n)){0!==n.length||!i.propertyIsArray||r in t||(t[r]=[]);for(var o=0;o<n.length;++o)e.addValue(t,r,n[o],i)}else if(r in t){var s=!i.allowDuplicate&&e.hasValue(t,r,n);U(t[r])||s&&!i.propertyIsArray||(t[r]=[t[r]]),s||t[r].push(n)}else t[r]=i.propertyIsArray?[n]:n},e.getValues=function(e,t){var r=e[t]||[];return U(r)||(r=[r]),r},e.removeProperty=function(e,t){delete e[t]},e.removeValue=function(t,r,n,i){"propertyIsArray"in(i=i||{})||(i.propertyIsArray=!1);var o=e.getValues(t,r).filter(function(t){return!e.compareValues(t,n)});0===o.length?e.removeProperty(t,r):1!==o.length||i.propertyIsArray?t[r]=o:t[r]=o[0]},e.compareValues=function(e,t){return e===t||(!(!Y(e)||!Y(t)||e["@value"]!==t["@value"]||e["@type"]!==t["@type"]||e["@language"]!==t["@language"]||e["@index"]!==t["@index"])||!!(B(e)&&"@id"in e&&B(t)&&"@id"in t)&&e["@id"]===t["@id"])},e.getContextValue=function(e,t,r){var n=null;if(null===t)return n;if("@language"===r&&r in e&&(n=e[r]),e.mappings[t]){var i=e.mappings[t];W(r)?n=i:r in i&&(n=i[r])}return n};var he={};if(e.registerRDFParser=function(e,t){he[e]=t},e.unregisterRDFParser=function(e){delete he[e]},l){if(void 0===de)var de=null;if(void 0===ve)var ve={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12}}var ye="http://www.w3.org/2001/XMLSchema#boolean",ge="http://www.w3.org/2001/XMLSchema#double",be="http://www.w3.org/2001/XMLSchema#integer",me="http://www.w3.org/2001/XMLSchema#string",we="http://www.w3.org/1999/02/22-rdf-syntax-ns#",xe=we+"first",ke=we+"rest",Ee=we+"nil",_e=we+"type",Ae=we+"PlainLiteral",Se=we+"XMLLiteral",Ie=we+"object",Te=we+"langString",Ce="http://www.w3.org/ns/json-ld#context",Fe=10,Re=function(e,t,r){l?(Error.call(this),Error.captureStackTrace(this,this.constructor)):"undefined"!=typeof Error&&(this.stack=(new Error).stack),this.name=t||"jsonld.Error",this.message=e||"An unspecified JSON-LD error occurred.",this.details=r||{}};l?r(18).inherits(Re,Error):"undefined"!=typeof Error&&(Re.prototype=new Error);var je=function(){};je.prototype.compact=function(t,r,n,i){if(U(n)){for(var o=[],s=0;s<n.length;++s){var a=this.compact(t,r,n[s],i);null!==a&&o.push(a)}if(i.compactArrays&&1===o.length){var u=e.getContextValue(t,r,"@container");null===u&&(o=o[0])}return o}if(B(n)){if(i.link&&"@id"in n&&n["@id"]in i.link)for(var l=i.link[n["@id"]],s=0;s<l.length;++s)if(l[s].expanded===n)return l[s].compacted;if(Y(n)||J(n)){var o=j(t,r,n);return i.link&&J(n)&&(n["@id"]in i.link||(i.link[n["@id"]]=[]),i.link[n["@id"]].push({expanded:n,compacted:o})),o}var c="@reverse"===r,o={};i.link&&"@id"in n&&(n["@id"]in i.link||(i.link[n["@id"]]=[]),i.link[n["@id"]].push({expanded:n,compacted:o}));for(var f=Object.keys(n).sort(),p=0;p<f.length;++p){var h=f[p],d=n[h];if("@id"!==h&&"@type"!==h)if("@reverse"!==h)if("@index"!==h)if("@graph"!==h&&"@list"!==h&&D(h)){var v=R(t,h);e.addValue(o,v,d)}else{if(0===d.length){var y=R(t,h,d,{vocab:!0},c);e.addValue(o,y,d,{propertyIsArray:!0})}for(var g=0;g<d.length;++g){var b=d[g],y=R(t,h,b,{vocab:!0},c),u=e.getContextValue(t,y,"@container"),m=K(b),w=null;m&&(w=b["@list"]);var x=this.compact(t,y,m?w:b,i);if(m)if(U(x)||(x=[x]),"@list"!==u){var k={};k[R(t,"@list")]=x,x=k,"@index"in b&&(x[R(t,"@index")]=b["@index"])}else if(y in o)throw new Re('JSON-LD compact error; property has a "@list" @container rule but there is more than a single @list that matches the compacted term in the document. Compaction might mix unwanted items into the list.',"jsonld.SyntaxError",{code:"compaction to list of lists"});if("@language"===u||"@index"===u){var E;y in o?E=o[y]:o[y]=E={},"@language"===u&&Y(x)&&(x=x["@value"]),e.addValue(E,b[u],x)}else{var _=!i.compactArrays||"@set"===u||"@list"===u||U(x)&&0===x.length||"@list"===h||"@graph"===h;e.addValue(o,y,x,{propertyIsArray:_})}}}else{var u=e.getContextValue(t,r,"@container");if("@index"===u)continue;var v=R(t,h);e.addValue(o,v,d)}else{var A=this.compact(t,"@reverse",d,i);for(var S in A)if(t.mappings[S]&&t.mappings[S].reverse){var I=A[S],u=e.getContextValue(t,S,"@container"),T="@set"===u||!i.compactArrays;e.addValue(o,S,I,{propertyIsArray:T}),delete A[S]}if(Object.keys(A).length>0){var v=R(t,h);e.addValue(o,v,A)}}else{var A;if(G(d))A=R(t,d,null,{vocab:"@type"===h});else{A=[];for(var g=0;g<d.length;++g)A.push(R(t,d[g],null,{vocab:!0}))}var v=R(t,h),_=U(A)&&0===d.length;e.addValue(o,v,A,{propertyIsArray:_})}}return o}return n},je.prototype.expand=function(t,r,n,i,o){var s=this;if(null===n||void 0===n)return null;if(!U(n)&&!B(n))return o||null!==r&&"@graph"!==L(t,r,{vocab:!0})?f(t,r,n):null;if(U(n)){var u=[],l=e.getContextValue(t,r,"@container");o=o||"@list"===l;for(var c=0;c<n.length;++c){var p=s.expand(t,r,n[c],i);if(o&&(U(p)||K(p)))throw new Re("Invalid JSON-LD syntax; lists of lists are not permitted.","jsonld.SyntaxError",{code:"list of lists"});null!==p&&(U(p)?u=u.concat(p):u.push(p))}return u}"@context"in n&&(t=s.processContext(t,n["@context"],i));for(var h=L(t,r,{vocab:!0}),u={},d=Object.keys(n).sort(),v=0;v<d.length;++v){var y,g=d[v],b=n[g];if("@context"!==g){var m=L(t,g,{vocab:!0});if(null!==m&&(ee(m)||D(m))){if(D(m)){if("@reverse"===h)throw new Re("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:b});if(m in u)throw new Re("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:m})}if("@id"===m&&!G(b)){if(!i.isFrame)throw new Re('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:b});if(!B(b))throw new Re('Invalid JSON-LD syntax; "@id" value must be a string or an object.',"jsonld.SyntaxError",{code:"invalid @id value",value:b})}if("@type"===m&&q(b),"@graph"===m&&!B(b)&&!U(b))throw new Re('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:b});if("@value"===m&&(B(b)||U(b)))throw new Re('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:b});if("@language"===m){if(null===b)continue;if(!G(b))throw new Re('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:b});b=b.toLowerCase()}if("@index"===m&&!G(b))throw new Re('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:b});if("@reverse"!==m){var l=e.getContextValue(t,g,"@container");if("@language"===l&&B(b))y=a(b);else if("@index"===l&&B(b))y=function(e){for(var r=[],n=Object.keys(b).sort(),o=0;o<n.length;++o){var a=n[o],u=b[a];U(u)||(u=[u]),u=s.expand(t,e,u,i,!1);for(var l=0;l<u.length;++l){var c=u[l];"@index"in c||(c["@index"]=a),r.push(c)}}return r}(g);else{var w="@list"===m;if(w||"@set"===m){var x=r;if(w&&"@graph"===h&&(x=null),y=s.expand(t,x,b,i,w),w&&K(y))throw new Re("Invalid JSON-LD syntax; lists of lists are not permitted.","jsonld.SyntaxError",{code:"list of lists"})}else y=s.expand(t,g,b,i,!1)}if(null!==y||"@value"===m)if("@list"===m||K(y)||"@list"!==l||(y=U(y)?y:[y],y={"@list":y}),t.mappings[g]&&t.mappings[g].reverse){var k=u["@reverse"]=u["@reverse"]||{};U(y)||(y=[y]);for(var E=0;E<y.length;++E){var _=y[E];if(Y(_)||K(_))throw new Re('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:y});e.addValue(k,m,_,{propertyIsArray:!0})}}else{var A=-1===["@index","@id","@type","@value","@language"].indexOf(m);e.addValue(u,m,y,{propertyIsArray:A})}}else{if(!B(b))throw new Re('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:b});if("@reverse"in(y=s.expand(t,"@reverse",b,i)))for(var S in y["@reverse"])e.addValue(u,S,y["@reverse"][S],{propertyIsArray:!0});var k=u["@reverse"]||null;for(var S in y)if("@reverse"!==S){null===k&&(k=u["@reverse"]={}),e.addValue(k,S,[],{propertyIsArray:!0});for(var I=y[S],E=0;E<I.length;++E){var _=I[E];if(Y(_)||K(_))throw new Re('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:y});e.addValue(k,S,_,{propertyIsArray:!0})}}}}}}d=Object.keys(u);var T=d.length;if("@value"in u){if("@type"in u&&"@language"in u)throw new Re('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and "@language".',"jsonld.SyntaxError",{code:"invalid value object",element:u});var C=T-1;if("@type"in u&&(C-=1),"@index"in u&&(C-=1),"@language"in u&&(C-=1),0!==C)throw new Re('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and at most one other property which can be "@type" or "@language".',"jsonld.SyntaxError",{code:"invalid value object",element:u});if(null===u["@value"])u=null;else{if("@language"in u&&!G(u["@value"]))throw new Re("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:u});if("@type"in u&&(!ee(u["@type"])||0===u["@type"].indexOf("_:")))throw new Re('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:u})}}else if("@type"in u&&!U(u["@type"]))u["@type"]=[u["@type"]];else if("@set"in u||"@list"in u){if(T>1&&!(2===T&&"@index"in u))throw new Re('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:u});"@set"in u&&(u=u["@set"],d=Object.keys(u),T=d.length)}else 1===T&&"@language"in u&&(u=null);return!B(u)||i.keepFreeFloatingNodes||o||null!==r&&"@graph"!==h||(0===T||"@value"in u||"@list"in u||1===T&&"@id"in u)&&(u=null),u},je.prototype.createNodeMap=function(e,t){t=t||{};var r=t.namer||t.issuer||new ue("_:b"),n={"@default":{}};return g(e,n,"@default",r),b(n)},je.prototype.flatten=function(e){for(var t=this.createNodeMap(e),r=[],n=Object.keys(t).sort(),i=0;i<n.length;++i){var o=t[n[i]];J(o)||r.push(o)}return r},je.prototype.frame=function(e,t,r){var n={options:r,graphs:{"@default":{},"@merged":{}},subjectStack:[],link:{}},i=new ue("_:b");g(e,n.graphs,"@merged",i),n.subjects=n.graphs["@merged"];var o=[];return m(n,Object.keys(n.subjects).sort(),t,o,null),o},je.prototype.normalize=function(e,t,r){return"URDNA2015"===t.algorithm?new Ne(t).main(e,r):"URGNA2012"===t.algorithm?new Le(t).main(e,r):void r(new Error("Invalid RDF Dataset Normalization algorithm: "+t.algorithm))},je.prototype.fromRDF=function(t,r,n){var i={},o={"@default":i},s={};for(var a in t){var u=t[a];a in o||(o[a]={}),"@default"===a||a in i||(i[a]={"@id":a});for(var l=o[a],c=0;c<u.length;++c){var f=u[c],p=f.subject.value,h=f.predicate.value,d=f.object;p in l||(l[p]={"@id":p});var y=l[p],g="IRI"===d.type||"blank node"===d.type;if(!g||d.value in l||(l[d.value]={"@id":d.value}),h!==_e||r.useRdfType||!g){var b=v(d,r.useNativeTypes);if(e.addValue(y,h,b,{propertyIsArray:!0}),g)if(d.value===Ee){var m=l[d.value];"usages"in m||(m.usages=[]),m.usages.push({node:y,property:h,value:b})}else d.value in s?s[d.value]=!1:s[d.value]={node:y,property:h,value:b}}else e.addValue(y,"@type",d.value,{propertyIsArray:!0})}}for(var a in o){var w=o[a];if(Ee in w){for(var x=w[Ee],k=0;k<x.usages.length;++k){for(var E=x.usages[k],y=E.node,_=E.property,A=E.value,S=[],I=[],T=Object.keys(y).length;_===ke&&B(s[y["@id"]])&&U(y[xe])&&1===y[xe].length&&U(y[ke])&&1===y[ke].length&&(3===T||4===T&&U(y["@type"])&&1===y["@type"].length&&"http://www.w3.org/1999/02/22-rdf-syntax-ns#List"===y["@type"][0])&&(S.push(y[xe][0]),I.push(y["@id"]),E=s[y["@id"]],y=E.node,_=E.property,A=E.value,T=Object.keys(y).length,0===y["@id"].indexOf("_:")););if(_===xe){if(y["@id"]===Ee)continue;A=w[A["@id"]][ke][0],S.pop(),I.pop()}delete A["@id"],A["@list"]=S.reverse();for(var C=0;C<I.length;++C)delete w[I[C]]}delete x.usages}}for(var F=[],R=Object.keys(i).sort(),k=0;k<R.length;++k){var j=R[k],y=i[j];if(j in o)for(var u=y["@graph"]=[],w=o[j],N=Object.keys(w).sort(),L=0;L<N.length;++L){var P=w[N[L]];J(P)||u.push(P)}J(y)||F.push(y)}n(null,F)},je.prototype.toRDF=function(e,t){var r=new ue("_:b"),n={"@default":{}};g(e,n,"@default",r);for(var i={},o=Object.keys(n).sort(),s=0;s<o.length;++s){var a=o[s];("@default"===a||ee(a))&&(i[a]=p(n[a],r,t))}return i},je.prototype.processContext=function(t,r,n){B(r)&&"@context"in r&&U(r["@context"])&&(r=r["@context"]);var i=U(r)?r:[r];if(0===i.length)return t.clone();for(var o=t,s=0;s<i.length;++s){var a=i[s];if(null!==a){if(B(a)&&"@context"in a&&(a=a["@context"]),!B(a))throw new Re("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:a});if(e.cache.activeCtx){var u=e.cache.activeCtx.get(t,a);if(u){o=t=u;continue}}t=o,o=o.clone();var l={};if("@base"in a){var c=a["@base"];if(null===c)c=null;else{if(!G(c))throw new Re('Invalid JSON-LD syntax; the value of "@base" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:a});if(""!==c&&!ee(c))throw new Re('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI or the empty string.',"jsonld.SyntaxError",{code:"invalid base IRI",context:a})}null!==c&&(c=e.url.parse(c||"")),o["@base"]=c,l["@base"]=!0}if("@vocab"in a){var f=a["@vocab"];if(null===f)delete o["@vocab"];else{if(!G(f))throw new Re('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:a});if(!ee(f))throw new Re('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:a});o["@vocab"]=f}l["@vocab"]=!0}if("@language"in a){var f=a["@language"];if(null===f)delete o["@language"];else{if(!G(f))throw new Re('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:a});o["@language"]=f.toLowerCase()}l["@language"]=!0}for(var p in a)N(o,a,p,l);e.cache.activeCtx&&e.cache.activeCtx.set(t,a,o)}else o=t=Q(n)}return o};var Ne=function(){var t={subject:"s",object:"o",name:"g"},r=function(e){e=e||{},this.name="URDNA2015",this.options=e,this.blankNodeInfo={},this.hashToBlankNodes={},this.canonicalIssuer=new ue("_:c14n"),this.quads=[],this.schedule={},this.schedule.MAX_DEPTH="maxCallStackDepth"in e?e.maxCallStackDepth:500,this.schedule.MAX_TOTAL_DEPTH="maxTotalCallStackDepth"in e?e.maxCallStackDepth:4294967295,this.schedule.depth=0,this.schedule.totalDepth=0,this.schedule.timeSlice="timeSlice"in e?e.timeSlice:10};return r.prototype.doWork=function(t,r){var n=this.schedule;if(n.totalDepth>=n.MAX_TOTAL_DEPTH)return r(new Error("Maximum total call stack depth exceeded; normalization aborting."));!function i(){if(n.depth===n.MAX_DEPTH)return n.depth=0,n.running=!1,e.nextTick(i);var o=(new Date).getTime();if(n.running||(n.start=(new Date).getTime(),n.deadline=n.start+n.timeSlice),o<n.deadline)return n.running=!0,n.depth++,n.totalDepth++,t(function(e,t){n.depth--,n.totalDepth--,r(e,t)});n.depth=0,n.running=!1,e.setImmediate(i)}()},r.prototype.forEach=function(e,t,r){var n,i,o=this,s=0;if(U(e))i=e.length,n=function(){return s!==i&&(n.value=e[s++],n.key=s,!0)};else{var a=Object.keys(e);i=a.length,n=function(){return s!==i&&(n.key=a[s++],n.value=e[n.key],!0)}}!function e(i,s){return i?r(i):n()?o.doWork(function(){t(n.value,n.key,e)}):void r()}()},r.prototype.waterfall=function(e,t){var r=this;r.forEach(e,function(e,t,n){r.doWork(e,n)},t)},r.prototype.whilst=function(e,t,r){var n=this;!function i(o){return o?r(o):e()?void n.doWork(t,i):r()}()},r.prototype.main=function(e,t){var r=this;r.schedule.start=(new Date).getTime();var n;if(r.options.format&&"application/nquads"!==r.options.format)return t(new Re("Unknown output format.","jsonld.UnknownFormat",{format:r.options.format}));var i={};r.waterfall([function(t){r.forEach(e,function(e,t,n){"@default"===t&&(t=null),r.forEach(e,function(e,n,o){null!==t&&(0===t.indexOf("_:")?e.name={type:"blank node",value:t}:e.name={type:"IRI",value:t}),r.quads.push(e),r.forEachComponent(e,function(t){if("blank node"===t.type){var n=t.value;n in r.blankNodeInfo?r.blankNodeInfo[n].quads.push(e):(i[n]=!0,r.blankNodeInfo[n]={quads:[e]})}}),o()},n)},t)},function(e){var t=!0;r.whilst(function(){return t},function(e){t=!1,r.hashToBlankNodes={},r.waterfall([function(e){r.forEach(i,function(e,t,n){r.hashFirstDegreeQuads(t,function(e,i){if(e)return n(e);i in r.hashToBlankNodes?r.hashToBlankNodes[i].push(t):r.hashToBlankNodes[i]=[t],n()})},e)},function(e){var n=Object.keys(r.hashToBlankNodes).sort();r.forEach(n,function(e,n,o){var s=r.hashToBlankNodes[e];if(s.length>1)return o();var a=s[0];r.canonicalIssuer.getId(a),delete i[a],delete r.hashToBlankNodes[e],t=!0,o()},e)}],e)},e)},function(e){var t=Object.keys(r.hashToBlankNodes).sort();r.forEach(t,function(e,t,n){var i=[],o=r.hashToBlankNodes[e];r.waterfall([function(e){r.forEach(o,function(e,t,n){if(r.canonicalIssuer.hasId(e))return n();var o=new ue("_:b");o.getId(e),r.hashNDegreeQuads(e,o,function(e,t){if(e)return n(e);i.push(t),n()})},e)},function(e){i.sort(function(e,t){return e.hash<t.hash?-1:e.hash>t.hash?1:0}),r.forEach(i,function(e,t,n){for(var i in e.issuer.existing)r.canonicalIssuer.getId(i);n()},e)}],n)},e)},function(e){var t=[];r.waterfall([function(e){r.forEach(r.quads,function(e,n,i){r.forEachComponent(e,function(e){"blank node"===e.type&&0!==e.value.indexOf(r.canonicalIssuer.prefix)&&(e.value=r.canonicalIssuer.getId(e.value))}),t.push(se(e)),i()},e)},function(e){if(t.sort(),"application/nquads"===r.options.format)return n=t.join(""),e();n=ie(t.join("")),e()}],e)}],function(e){t(e,n)})},r.prototype.hashFirstDegreeQuads=function(e,t){var r=this,n=r.blankNodeInfo[e];if("hash"in n)return t(null,n.hash);var i=[],o=n.quads;r.forEach(o,function(t,n,o){var s={predicate:t.predicate};r.forEachComponent(t,function(t,n){s[n]=r.modifyFirstDegreeComponent(e,t,n)}),i.push(se(s)),o()},function(e){if(e)return t(e);i.sort(),n.hash=Oe.hashNQuads(r.name,i),t(null,n.hash)})},r.prototype.modifyFirstDegreeComponent=function(e,t){return"blank node"!==t.type?t:(t=te(t),t.value=t.value===e?"_:a":"_:z",t)},r.prototype.hashRelatedBlankNode=function(e,t,r,n,i){var o,s=this;s.waterfall([function(t){return s.canonicalIssuer.hasId(e)?(o=s.canonicalIssuer.getId(e),t()):r.hasId(e)?(o=r.getId(e),t()):void s.hashFirstDegreeQuads(e,function(e,r){if(e)return t(e);o=r,t()})}],function(e){if(e)return i(e);var r=new Oe(s.name);return r.update(n),"g"!==n&&r.update(s.getRelatedPredicate(t)),r.update(o),i(null,r.digest())})},r.prototype.getRelatedPredicate=function(e){return"<"+e.predicate.value+">"},r.prototype.hashNDegreeQuads=function(e,t,r){var n,i=this,o=new Oe(i.name);i.waterfall([function(r){i.createHashToRelated(e,t,function(e,t){if(e)return r(e);n=t,r()})},function(e){var r=Object.keys(n).sort();i.forEach(r,function(e,r,s){o.update(e);var a,u="",l=new Pe(n[e]);i.whilst(function(){return l.hasNext()},function(e){var r=l.next(),n=t.clone(),o="",s=[];i.waterfall([function(t){i.forEach(r,function(t,r,a){if(i.canonicalIssuer.hasId(t)?o+=i.canonicalIssuer.getId(t):(n.hasId(t)||s.push(t),o+=n.getId(t)),0!==u.length&&o.length>=u.length&&o>u)return e();a()},t)},function(t){i.forEach(s,function(t,r,s){i.hashNDegreeQuads(t,n,function(r,i){return r?s(r):(o+=n.getId(t),o+="<"+i.hash+">",n=i.issuer,0!==u.length&&o.length>=u.length&&o>u?e():void s())})},t)},function(e){(0===u.length||o<u)&&(u=o,a=n),e()}],e)},function(e){if(e)return s(e);o.update(u),t=a,s()})},e)}],function(e){r(e,{hash:o.digest(),issuer:t})})},r.prototype.createHashToRelated=function(e,r,n){var i=this,o={},s=i.blankNodeInfo[e].quads;i.forEach(s,function(n,s,a){i.forEach(n,function(s,a,u){if("predicate"===a||"blank node"!==s.type||s.value===e)return u();var l=s.value,c=t[a];i.hashRelatedBlankNode(l,n,r,c,function(e,t){if(e)return u(e);t in o?o[t].push(l):o[t]=[l],u()})},a)},function(e){n(e,o)})},r.prototype.forEachComponent=function(e,t){for(var r in e)"predicate"!==r&&t(e[r],r,e)},r}(),Le=function(){var e=function(e){Ne.call(this,e),this.name="URGNA2012"};return e.prototype=new Ne,e.prototype.modifyFirstDegreeComponent=function(e,t,r){return"blank node"!==t.type?t:(t=te(t),t.value="name"===r?"_:g":t.value===e?"_:a":"_:z",t)},e.prototype.getRelatedPredicate=function(e){return e.predicate.value},e.prototype.createHashToRelated=function(e,t,r){var n=this,i={},o=n.blankNodeInfo[e].quads;n.forEach(o,function(r,o,s){var a,u;if("blank node"===r.subject.type&&r.subject.value!==e)u=r.subject.value,a="p";else{if("blank node"!==r.object.type||r.object.value===e)return s();u=r.object.value,a="r"}n.hashRelatedBlankNode(u,r,t,a,function(e,t){t in i?i[t].push(u):i[t]=[u],s()})},function(e){r(e,i)})},e}();Object.keys||(Object.keys=function(e){if(e!==Object(e))throw new TypeError("Object.keys called on non-object");var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}),e.registerRDFParser("application/nquads",ie),e.registerRDFParser("rdfa-api",ae),e.IdentifierIssuer=ue,e.UniqueNamer=ue,ue.prototype.clone=function(){var e=new ue(this.prefix);return e.counter=this.counter,e.existing=te(this.existing),e},ue.prototype.getId=function(e){if(e&&e in this.existing)return this.existing[e];var t=this.prefix+this.counter;return this.counter+=1,e&&(this.existing[e]=t),t},ue.prototype.getName=ue.prototype.getName,ue.prototype.hasId=function(e){return e in this.existing},ue.prototype.isNamed=ue.prototype.hasId;var Pe=function(e){this.list=e.sort(),this.done=!1,this.left={};for(var t=0;t<e.length;++t)this.left[e[t]]=!0};Pe.prototype.hasNext=function(){return!this.done},Pe.prototype.next=function(){for(var e=this.list.slice(),t=null,r=0,n=this.list.length,i=0;i<n;++i){var o=this.list[i],s=this.left[o];(null===t||o>t)&&(s&&i>0&&o>this.list[i-1]||!s&&i<n-1&&o>this.list[i+1])&&(t=o,r=i)}if(null===t)this.done=!0;else{var a=this.left[t]?r-1:r+1;this.list[r]=this.list[a],this.list[a]=t;for(var i=0;i<n;++i)this.list[i]>t&&(this.left[this.list[i]]=!this.left[this.list[i]])}return e};var Oe=function(e){if(!(this instanceof Oe))return new Oe(e);if(-1===["URDNA2015","URGNA2012"].indexOf(e))throw new Error("Invalid RDF Dataset Normalization algorithm: "+e);Oe._init.call(this,e)};if(Oe.hashNQuads=function(e,t){for(var r=new Oe(e),n=0;n<t.length;++n)r.update(t[n]);return r.digest()},function(e){if(e){var t=r(18);return Oe._init=function(e){e="URDNA2015"===e?"sha256":"sha1",this.md=t.createHash(e)},Oe.prototype.update=function(e){return this.md.update(e,"utf8")},void(Oe.prototype.digest=function(){return this.md.digest("hex")})}Oe._init=function(e){e="URDNA2015"===e?new o.Algorithm:new i.Algorithm,this.md=new n(e)},Oe.prototype.update=function(e){return this.md.update(e)},Oe.prototype.digest=function(){return this.md.digest().toHex()};var n=function(e){if(!(this instanceof n))return new n(e);if(this._algorithm=e,!n._padding||n._padding.length<this._algorithm.blockSize){n._padding=String.fromCharCode(128);for(var t=String.fromCharCode(0),r=64;r>0;)1&r&&(n._padding+=t),(r>>>=1)>0&&(t+=t)}this.start()};n.prototype.start=function(){this.messageLength=0,this.fullMessageLength=[];for(var e=this._algorithm.messageLengthSize/4,t=0;t<e;++t)this.fullMessageLength.push(0);return this._input=new n.ByteBuffer,this.state=this._algorithm.start(),this},n.prototype.update=function(e){e=new n.ByteBuffer(unescape(encodeURIComponent(e))),this.messageLength+=e.length();var t=e.length();t=[t/4294967296>>>0,t>>>0];for(var r=this.fullMessageLength.length-1;r>=0;--r)this.fullMessageLength[r]+=t[1],t[1]=t[0]+(this.fullMessageLength[r]/4294967296>>>0),this.fullMessageLength[r]=this.fullMessageLength[r]>>>0,t[0]=t[1]/4294967296>>>0;for(this._input.putBytes(e.bytes());this._input.length()>=this._algorithm.blockSize;)this.state=this._algorithm.digest(this.state,this._input);return(this._input.read>2048||0===this._input.length())&&this._input.compact(),this},n.prototype.digest=function(){var e=new n.ByteBuffer;e.putBytes(this._input.bytes());var t=this.fullMessageLength[this.fullMessageLength.length-1]+this._algorithm.messageLengthSize,r=t&this._algorithm.blockSize-1;e.putBytes(n._padding.substr(0,this._algorithm.blockSize-r));for(var i=new n.ByteBuffer,o=0;o<this.fullMessageLength.length;++o)i.putInt32(this.fullMessageLength[o]<<3|this.fullMessageLength[o+1]>>>28);this._algorithm.writeMessageLength(e,i);var s=this._algorithm.digest(this.state.copy(),e),a=new n.ByteBuffer;return s.write(a),a},n.ByteBuffer=function(e){this.data="string"==typeof e?e:"",this.read=0},n.ByteBuffer.prototype.putInt32=function(e){this.data+=String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e)},n.ByteBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e},n.ByteBuffer.prototype.putBytes=function(e){this.data+=e},n.ByteBuffer.prototype.bytes=function(){return this.data.slice(this.read)},n.ByteBuffer.prototype.length=function(){return this.data.length-this.read},n.ByteBuffer.prototype.compact=function(){this.data=this.data.slice(this.read),this.read=0},n.ByteBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var r=this.data.charCodeAt(t);r<16&&(e+="0"),e+=r.toString(16)}return e};var i={_w:null};i.Algorithm=function(){this.name="sha1",this.blockSize=64,this.digestLength=20,this.messageLengthSize=8},i.Algorithm.prototype.start=function(){return i._w||(i._w=new Array(80)),i._createState()},i.Algorithm.prototype.writeMessageLength=function(e,t){e.putBytes(t.bytes())},i.Algorithm.prototype.digest=function(e,t){for(var r,n,o,s,a,u,l,c,f=t.length(),p=i._w;f>=64;){for(n=e.h0,o=e.h1,s=e.h2,a=e.h3,u=e.h4,c=0;c<16;++c)r=t.getInt32(),p[c]=r,l=a^o&(s^a),r=(n<<5|n>>>27)+l+u+1518500249+r,u=a,a=s,s=o<<30|o>>>2,o=n,n=r;for(;c<20;++c)r=p[c-3]^p[c-8]^p[c-14]^p[c-16],r=r<<1|r>>>31,p[c]=r,l=a^o&(s^a),r=(n<<5|n>>>27)+l+u+1518500249+r,u=a,a=s,s=o<<30|o>>>2,o=n,n=r;for(;c<32;++c)r=p[c-3]^p[c-8]^p[c-14]^p[c-16],r=r<<1|r>>>31,p[c]=r,l=o^s^a,r=(n<<5|n>>>27)+l+u+1859775393+r,u=a,a=s,s=o<<30|o>>>2,o=n,n=r;for(;c<40;++c)r=p[c-6]^p[c-16]^p[c-28]^p[c-32],r=r<<2|r>>>30,p[c]=r,l=o^s^a,r=(n<<5|n>>>27)+l+u+1859775393+r,u=a,a=s,s=o<<30|o>>>2,o=n,n=r;for(;c<60;++c)r=p[c-6]^p[c-16]^p[c-28]^p[c-32],r=r<<2|r>>>30,p[c]=r,l=o&s|a&(o^s),r=(n<<5|n>>>27)+l+u+2400959708+r,u=a,a=s,s=o<<30|o>>>2,o=n,n=r;for(;c<80;++c)r=p[c-6]^p[c-16]^p[c-28]^p[c-32],r=r<<2|r>>>30,p[c]=r,l=o^s^a,r=(n<<5|n>>>27)+l+u+3395469782+r,u=a,a=s,s=o<<30|o>>>2,o=n,n=r;e.h0=e.h0+n|0,e.h1=e.h1+o|0,e.h2=e.h2+s|0,e.h3=e.h3+a|0,e.h4=e.h4+u|0,f-=64}return e},i._createState=function(){var e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520};return e.copy=function(){var t=i._createState();return t.h0=e.h0,t.h1=e.h1,t.h2=e.h2,t.h3=e.h3,t.h4=e.h4,t},e.write=function(t){t.putInt32(e.h0),t.putInt32(e.h1),t.putInt32(e.h2),t.putInt32(e.h3),t.putInt32(e.h4)},e};var o={_k:null,_w:null};o.Algorithm=function(){this.name="sha256",this.blockSize=64,this.digestLength=32,this.messageLengthSize=8},o.Algorithm.prototype.start=function(){return o._k||o._init(),o._createState()},o.Algorithm.prototype.writeMessageLength=function(e,t){e.putBytes(t.bytes())},o.Algorithm.prototype.digest=function(e,t){for(var r,n,i,s,a,u,l,c,f,p,h,d,v,y,g,b=t.length(),m=o._k,w=o._w;b>=64;){for(l=0;l<16;++l)w[l]=t.getInt32();for(;l<64;++l)r=w[l-2],r=(r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10,n=w[l-15],n=(n>>>7|n<<25)^(n>>>18|n<<14)^n>>>3,w[l]=r+w[l-7]+n+w[l-16]|0;for(c=e.h0,f=e.h1,p=e.h2,h=e.h3,d=e.h4,v=e.h5,y=e.h6,g=e.h7,l=0;l<64;++l)s=(d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7),a=y^d&(v^y),i=(c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),u=c&f|p&(c^f),r=g+s+a+m[l]+w[l],n=i+u,g=y,y=v,v=d,d=h+r|0,h=p,p=f,f=c,c=r+n|0;e.h0=e.h0+c|0,e.h1=e.h1+f|0,e.h2=e.h2+p|0,e.h3=e.h3+h|0,e.h4=e.h4+d|0,e.h5=e.h5+v|0,e.h6=e.h6+y|0,e.h7=e.h7+g|0,b-=64}return e},o._createState=function(){var e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225};return e.copy=function(){var t=o._createState();return t.h0=e.h0,t.h1=e.h1,t.h2=e.h2,t.h3=e.h3,t.h4=e.h4,t.h5=e.h5,t.h6=e.h6,t.h7=e.h7,t},e.write=function(t){t.putInt32(e.h0),t.putInt32(e.h1),t.putInt32(e.h2),t.putInt32(e.h3),t.putInt32(e.h4),t.putInt32(e.h5),t.putInt32(e.h6),t.putInt32(e.h7)},e},o._init=function(){o._k=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],o._w=new Array(64)}}(l),!de)var Qe=function(){de=r(18).XMLSerializer};if(e.url={},e.url.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},e.url.parse=function(t,r){for(var n={},i=e.url.parsers[r||"full"],o=i.regex.exec(t),s=i.keys.length;s--;)n[i.keys[s]]=void 0===o[s]?null:o[s];return n.normalizedPath=le(n.path,!!n.authority),n},l?e.useDocumentLoader("node"):"undefined"!=typeof XMLHttpRequest&&e.useDocumentLoader("xhr"),l){e.use=function(t){switch(t){case"request":e.request=r(18);break;default:throw new Re("Unknown extension.","jsonld.UnknownExtension",{extension:t})}};var De={exports:{},filename:s};r(18)(De,"version"),e.version=De.exports.version}return e},p=function(){return f(function(){return p()})};!l&&r(193)?(a=[],void 0!==(u=function(){return f(p),p}.apply(t,a))&&(e.exports=u)):(f(p),void 0!==e&&e.exports&&(e.exports=p),c&&("undefined"==typeof jsonld?jsonld=jsonldjs=p:jsonldjs=p))}()}).call(t,r(5),r(4),r(39).setImmediate,"/")},function(e,t,r){var n,n;n=function(){};var t=e.exports={Lexer:n("./lib/N3Lexer"),Parser:n("./lib/N3Parser"),Writer:n("./lib/N3Writer"),Store:n("./lib/N3Store"),StreamParser:n("./lib/N3StreamParser"),StreamWriter:n("./lib/N3StreamWriter"),Util:n("./lib/N3Util")};Object.keys(t).forEach(function(e){Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return delete t[e],t[e]=r(162)("./N3"+e)}})})},function(e,t,r){function n(e){return r(i(e))}function i(e){var t=o[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var o={"./N3Lexer":57,"./N3Lexer.js":57,"./N3Parser":58,"./N3Parser.js":58,"./N3Store":91,"./N3Store.js":91,"./N3StreamParser":92,"./N3StreamParser.js":92,"./N3StreamWriter":93,"./N3StreamWriter.js":93,"./N3Util":59,"./N3Util.js":59,"./N3Writer":60,"./N3Writer.js":60};n.keys=function(){return Object.keys(o)},n.resolve=i,e.exports=n,n.id=162},function(e,t){},function(e,t,r){(function(e,n){var i;!function(o){function s(e){throw new RangeError(j[e])}function a(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function u(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),e=e.replace(R,"."),n+a(e.split("."),t).join(".")}function l(e){for(var t,r,n=[],i=0,o=e.length;i<o;)t=e.charCodeAt(i++),t>=55296&&t<=56319&&i<o?(r=e.charCodeAt(i++),56320==(64512&r)?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--)):n.push(t);return n}function c(e){return a(e,function(e){var t="";return e>65535&&(e-=65536,t+=P(e>>>10&1023|55296),e=56320|1023&e),t+=P(e)}).join("")}function f(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:x}function p(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function h(e,t,r){var n=0;for(e=r?L(e/A):e>>1,e+=L(e/t);e>N*E>>1;n+=x)e=L(e/N);return L(n+(N+1)*e/(e+_))}function d(e){var t,r,n,i,o,a,u,l,p,d,v=[],y=e.length,g=0,b=I,m=S;for(r=e.lastIndexOf(T),r<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&s("not-basic"),v.push(e.charCodeAt(n));for(i=r>0?r+1:0;i<y;){for(o=g,a=1,u=x;i>=y&&s("invalid-input"),l=f(e.charCodeAt(i++)),(l>=x||l>L((w-g)/a))&&s("overflow"),g+=l*a,p=u<=m?k:u>=m+E?E:u-m,!(l<p);u+=x)d=x-p,a>L(w/d)&&s("overflow"),a*=d;t=v.length+1,m=h(g-o,t,0==o),L(g/t)>w-b&&s("overflow"),b+=L(g/t),g%=t,v.splice(g++,0,b)}return c(v)}function v(e){var t,r,n,i,o,a,u,c,f,d,v,y,g,b,m,_=[];for(e=l(e),y=e.length,t=I,r=0,o=S,a=0;a<y;++a)(v=e[a])<128&&_.push(P(v));for(n=i=_.length,i&&_.push(T);n<y;){for(u=w,a=0;a<y;++a)(v=e[a])>=t&&v<u&&(u=v);for(g=n+1,u-t>L((w-r)/g)&&s("overflow"),r+=(u-t)*g,t=u,a=0;a<y;++a)if(v=e[a],v<t&&++r>w&&s("overflow"),v==t){for(c=r,f=x;d=f<=o?k:f>=o+E?E:f-o,!(c<d);f+=x)m=c-d,b=x-d,_.push(P(p(d+m%b,0))),c=L(m/b);_.push(P(p(c,0))),o=h(r,g,n==i),r=0,++n}++r,++t}return _.join("")}function y(e){return u(e,function(e){return C.test(e)?d(e.slice(4).toLowerCase()):e})}function g(e){return u(e,function(e){return F.test(e)?"xn--"+v(e):e})}var b=("object"==typeof t&&t&&t.nodeType,"object"==typeof e&&e&&e.nodeType,"object"==typeof n&&n);var m,w=2147483647,x=36,k=1,E=26,_=38,A=700,S=72,I=128,T="-",C=/^xn--/,F=/[^\x20-\x7E]/,R=/[\x2E\u3002\uFF0E\uFF61]/g,j={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},N=x-k,L=Math.floor,P=String.fromCharCode;m={version:"1.4.1",ucs2:{decode:l,encode:c},decode:d,encode:v,toASCII:g,toUnicode:y},void 0!==(i=function(){return m}.call(t,r,t,e))&&(e.exports=i)}()}).call(t,r(194)(e),r(4))},function(e,t,r){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,r,o){t=t||"&",r=r||"=";var s={};if("string"!=typeof e||0===e.length)return s;var a=/\+/g;e=e.split(t);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var l=e.length;u>0&&l>u&&(l=u);for(var c=0;c<l;++c){var f,p,h,d,v=e[c].replace(a,"%20"),y=v.indexOf(r);y>=0?(f=v.substr(0,y),p=v.substr(y+1)):(f=v,p=""),h=decodeURIComponent(f),d=decodeURIComponent(p),n(s,h)?i(s[h])?s[h].push(d):s[h]=[s[h],d]:s[h]=d}return s};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,r){"use strict";function n(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,r,a){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?n(s(e),function(s){var a=encodeURIComponent(i(s))+r;return o(e[s])?n(e[s],function(e){return a+encodeURIComponent(i(e))}).join(t):a+encodeURIComponent(i(e[s]))}).join(t):a?encodeURIComponent(i(a))+r+encodeURIComponent(i(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},s=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},function(e,t,r){"use strict";t.decode=t.parse=r(165),t.encode=t.stringify=r(166)},function(e,t,r){var n=r(0),i=r(0),o=(r(38).QuadIndex,r(38).Pattern),s=r(64),a=r(62).AbstractQueryTree;Callbacks={},Callbacks.ANYTHING={token:"var",value:"_"},Callbacks.added="added",Callbacks.deleted="deleted",Callbacks.eventsFlushed="eventsFlushed",Callbacks.CallbacksBackend=function(){this.aqt=new a,this.engine=arguments[0],this.indexMap={},this.observersMap={},this.queriesIndexMap={},this.emptyNotificationsMap={},this.queriesList=[],this.pendingQueries=[],this.matchedQueries=[],this.updateInProgress=null,this.indices=["SPOG","GP","OGS","POG","GSP","OS"],this.componentOrders={SPOG:["subject","predicate","object","graph"],GP:["graph","predicate","subject","object"],OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate","object"],OS:["object","subject","predicate","graph"]},this.callbackCounter=0,this.callbacksMap={},this.callbacksInverseMap={},this.queryCounter=0,this.queriesMap={},this.queriesCallbacksMap={},this.queriesInverseMap={};for(var e=0;e<this.indices.length;e++){var t=this.indices[e];this.indexMap[t]={},this.queriesIndexMap[t]={}}},Callbacks.CallbacksBackend.prototype.startGraphModification=function(){!0!==this.ongoingModification&&(this.pendingQueries=[].concat(this.queriesList),this.matchedQueries=[],null==this.updateInProgress&&(this.updateInProgress={},this.updateInProgress[Callbacks.added]=[],this.updateInProgress[Callbacks.deleted]=[]))},Callbacks.CallbacksBackend.prototype.nextGraphModification=function(e,t){this.updateInProgress[e].push(t)},Callbacks.CallbacksBackend.prototype.endGraphModification=function(e){if(!0!==this.ongoingModification){var t=this;if(null!=this.updateInProgress){var r=t.updateInProgress;t.updateInProgress=null,this.sendNotification(Callbacks.deleted,r[Callbacks.deleted],function(){t.sendNotification(Callbacks.added,r[Callbacks.added],function(){t.sendEmptyNotification(Callbacks.eventsFlushed,null,function(){t.dispatchQueries(function(){e(!0)})})})})}else e(!0)}else e(!0)},Callbacks.CallbacksBackend.prototype.cancelGraphModification=function(){!0!==this.ongoingModification&&(this.updateInProgress=null)},Callbacks.CallbacksBackend.prototype.sendNotification=function(e,t,r){for(var n={},i=0;i<t.length;i++){var o=t[i];for(var s in this.indexMap){var a=this.indexMap[s],u=this.componentOrders[s];this._searchCallbacksInIndex(a,u,e,o,n),0!=this.pendingQueries.length&&(a=this.queriesIndexMap[s],this._searchQueriesInIndex(a,u,o))}}this.dispatchNotifications(n),null!=r&&r(!0)},Callbacks.CallbacksBackend.prototype.sendEmptyNotification=function(e,t,r){for(var n=this.emptyNotificationsMap[e]||[],i=0;i<n.length;i++)n[i](e,t);r()},Callbacks.CallbacksBackend.prototype.dispatchNotifications=function(e){for(var t in e){var r=this.callbacksMap[t],n=e[t][Callbacks.deleted];if(null!=n)try{r(Callbacks.deleted,n)}catch(e){}for(var i in e[t])if(i!=Callbacks.deleted)try{r(i,e[t][i])}catch(e){}}},Callbacks.CallbacksBackend.prototype._searchCallbacksInIndex=function(e,t,r,n,i){for(var o=n[1],n=n[0],s=0;s<t.length+1;s++){for(var a=e._||[],u=[],l=0;l<a.length;l++){var c=a[l];null!=this.callbacksMap[c]&&(i[c]=i[c]||{},i[c][r]=i[c][r]||[],i[c][r].push(n),u.push(c))}e._=u;var f=t[s];if(null==e[""+o[f]])break;e=e[""+o[f]]}},Callbacks.CallbacksBackend.prototype.subscribeEmpty=function(e,t){var r=this.emptyNotificationsMap[e]||[];r.push(t),this.emptyNotificationsMap[e]=r},Callbacks.CallbacksBackend.prototype.unsubscribeEmpty=function(e,t){var r=this.emptyNotificationsMap[e];null!=r&&(r=n.reject(r,function(e){return e===t})),this.emptyNotificationsMap[e]=r},Callbacks.CallbacksBackend.prototype.subscribe=function(e,t,r,n,i,s){var a=this._tokenizeComponents(e,t,r,n),u={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,u);var l=this;this.engine.normalizeQuad(a,u,!0,function(e){for(var t=new o(e),r=l._indexForPattern(t),n=l.componentOrders[r],a=l.indexMap[r],u=0;u<n.length;u++){var c=n[u],f=e[c];if("_"===f){null==a._&&(a._=[]),l.callbackCounter++,a._.push(l.callbackCounter),l.callbacksMap[l.callbackCounter]=i,l.callbacksInverseMap[i]=l.callbackCounter;break}u===n.length-1?(a[f]=a[f]||{_:[]},l.callbackCounter++,a[f]._.push(l.callbackCounter),l.callbacksMap[l.callbackCounter]=i,l.callbacksInverseMap[i]=l.callbackCounter):(a[f]=a[f]||{},a=a[f])}null!=s&&s(!0)})},Callbacks.CallbacksBackend.prototype.unsubscribe=function(e){var t=this.callbacksInverseMap[e];null!=t&&(delete this.callbacksInverseMap[e],delete this.callbacksMap[t])},Callbacks.CallbacksBackend.prototype._tokenizeComponents=function(e,t,r,n){var i={};return null==e?i.subject=Callbacks.ANYTHING:0==e.indexOf("_:")?i.subject={token:"blank",value:e}:i.subject={token:"uri",value:e},i.predicate=null==t?Callbacks.ANYTHING:{token:"uri",value:t},i.object=null==r?Callbacks.ANYTHING:{token:"uri",value:r},i.graph=null==n?Callbacks.ANYTHING:{token:"uri",value:n},i},Callbacks.CallbacksBackend.prototype._indexForPattern=function(e){for(var t=e.indexKey,r=this.indices,i=0;i<r.length;i++)for(var o=r[i],s=this.componentOrders[o],a=0;a<s.length&&!1!==n.include(t,s[a]);a++)if(a==t.length-1)return o;return"SPOG"},Callbacks.CallbacksBackend.prototype.observeNode=function(){var e,t,r,n;4===arguments.length?(e=arguments[0],t=arguments[1],r=arguments[2],n=arguments[3]):(e=arguments[0],t=this.engine.lexicon.defaultGraphUri,r=arguments[1],n=arguments[2]);var i="CONSTRUCT { <"+e+"> ?p ?o } WHERE { GRAPH <"+t+"> { <"+e+"> ?p ?o } }",o=this,a={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,a);var u=[];this.engine.execute(i,function(t,i){if(t)n&&n(!1);else{var l=i,c=!1,f=function(e,t){if("eventsFlushed"===e&&c){c=!1;try{r(l)}catch(e){}}else if("eventsFlushed"!==e){c=!0;for(var n=0;n<t.length;n++){var i=t[n],f=s.buildRDFResource(i.subject,u,o.engine,a),p=s.buildRDFResource(i.predicate,u,o.engine,a),h=s.buildRDFResource(i.object,u,o.engine,a);null!=f&&null!=p&&null!=h&&(i=new s.Triple(f,p,h),e===Callbacks.added?l.add(i):e===Callbacks.deleted&&l.remove(i))}}};o.observersMap[r]=f,o.subscribeEmpty(Callbacks.eventsFlushed,f),o.subscribe(e,null,null,null,f,function(){try{r(l)}catch(e){}n&&n(!0)})}})},Callbacks.CallbacksBackend.prototype.stopObservingNode=function(e){var t=this.observersMap[e];return!!t&&(this.unsubscribe(t),this.unsubscribeEmpty(Callbacks.eventsFlushed,t),!0)},Callbacks.CallbacksBackend.prototype.observeQuery=function(e,t,r){var n=this.aqt.parseQueryString(e),s=this.aqt.parseSelect(n.units[0]),a=this.aqt.collectBasicTriples(s),u=this,l={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,l);var c=this.queryCounter;this.queryCounter++,this.queriesMap[c]=e,this.queriesInverseMap[e]=c,this.queriesList.push(c),this.queriesCallbacksMap[c]=t,i.eachSeries(a,function(e,t){null==e.graph&&(e.graph=u.engine.lexicon.defaultGraphUriTerm),u.engine.normalizeQuad(e,l,!0,function(e){for(var r=new o(e),n=u._indexForPattern(r),i=u.componentOrders[n],s=u.queriesIndexMap[n],a=0;a<i.length;a++){var l=i[a],f=e[l];if("string"==typeof f){null==s._&&(s._=[]),s._.push(c);break}a===i.length-1?(s[f]=s[f]||{_:[]},s[f]._.push(c)):(s[f]=s[f]||{},s=s[f])}t()})},function(){u.engine.execute(e,function(e,r){e?console.log("ERROR in query callback "+r):t(r)}),null!=r&&r()})},Callbacks.CallbacksBackend.prototype.stopObservingQuery=function(e){var t=this.queriesInverseMap[e];null!=t&&(delete this.queriesInverseMap[e],delete this.queriesMap[t],this.queriesList=n.reject(this.queriesList,function(e){return e===t}))},Callbacks.CallbacksBackend.prototype._searchQueriesInIndex=function(e,t,r){for(var i=r[1],r=r[0],o=0;o<t.length+1;o++){for(var s=e._||[],a=[],u=0;u<s.length;u++){var l=s[u];n.include(this.pendingQueries,l)&&(n.remove(this.pendingQueries,function(e){return e===l}),this.matchedQueries.push(l)),null!=this.queriesMap[l]&&a.push(l)}e._=a;var c=t[o];if(null==e[""+i[c]])break;e=e[""+i[c]]}},Callbacks.CallbacksBackend.prototype.dispatchQueries=function(e){var t,r,n=this,o={};i.eachSeries(this.matchedQueries,function(e,i){null==o[e]?(o[e]=!0,t=n.queriesMap[e],r=n.queriesCallbacksMap[e],n.engine.execute(t,function(e,t){if(!e)try{r(t)}catch(e){}i()})):i()},function(){e()})},Callbacks.CallbacksBackend.added=Callbacks.added,Callbacks.CallbacksBackend.deleted=Callbacks.deleted,Callbacks.CallbacksBackend.eventsFlushed=Callbacks.eventsFlushed,e.exports=Callbacks},function(e,t,r){var n=r(160),i=function(e,t,r){var i=null;n.normalize(e,{},function(e,n){if(e)r(e);else{var o=function(e){return"blank node"===e.type?{blank:e.value}:"IRI"===e.type?{token:"uri",value:e.value}:"literal"===e.type?null!=e.language?{literal:'"'+e.value+'"@'+e.language}:null!==e.datatype?{literal:'"'+e.value+'"^^<'+e.datatype+">"}:{literal:'"'+e.value+'"'}:void 0};i=[];for(var s in n)for(var a=n[s],u=0;u<a.length;u++){var l=a[u];!function(e,r,n){i.push({subject:o(e),predicate:o(r),object:o(n),graph:t})}(l.subject,l.predicate,l.object)}r(null,i)}})};t.JSONLDParser={};var o=t.JSONLDParser;o.parser={async:!0,parse:function(e,t,r,n){try{"string"==typeof e&&(e=JSON.parse(e)),i(e,t,n)}catch(e){n(e)}}},e.exports={JSONLDParser:o}},function(e,t,r){if(!r(0).isWorker()){var n=r(101),i=r(158),o=r(103);NetworkTransport={load:function(e,t,r,s){var a=null==s?3:s,u=o.parse(e,!0,!0),l={host:u.host,hostname:u.hostname,method:"GET",path:u.path,headers:{host:u.hostname,Accept:t}},c=null;"http:"===u.protocol?(l.port=u.port||80,c=n):"https:"===u.protocol&&(l.port=u.port||443,c=i);var f=c.request(l,function(e){var n=e.headers,i="";if("2"==(""+e.statusCode)[0])e.on("end",function(){r(null,{headers:n,data:i})}),e.on("data",function(e){i+=e});else if("3"==(""+e.statusCode)[0])if(0==a)r(new Error("Too many redirections"));else{var o=n.Location||n.location;null!=o?NetworkTransport.load(o,t,r,a-1):r(new Error("Redirection without location header"))}else r(new Error("HTTP error: "+e.statusCode))});f.on("error",r),f.end()}},e.exports={NetworkTransport:NetworkTransport}}},function(e,t){e.exports=function(){"use strict";function e(t,r,n,i){this.message=t,this.expected=r,this.found=n,this.location=i,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}function t(t,r){function n(e,t){return{type:"literal",text:e,ignoreCase:t}}function i(e,t,r){return{type:"class",parts:e,inverted:t,ignoreCase:r}}function o(e){return{type:"other",description:e}}function s(e){var r,n=Yy[e];if(n)return n;for(r=e-1;!Yy[r];)r--;for(n=Yy[r],n={line:n.line,column:n.column};r<e;)10===t.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return Yy[e]=n,n}function a(e,t){var r=s(e),n=s(t);return{start:{offset:e,line:r.line,column:r.column},end:{offset:t,line:n.line,column:n.column}}}function u(e){$y<Ky||($y>Ky&&(Ky=$y,Zy=[]),Zy.push(e))}function l(t,r,n){return new e(e.buildMessage(t,r),t,r,n)}function c(){return f()}function f(){var e;return e=p(),e===kr&&(e=U()),e}function p(){var e;return eg++,e=h(),eg--,e===kr&&(kr,0===eg&&u(Ar)),e}function h(){var e,t,r,n;return eg++,e=$y,t=d(),t!==kr?(r=g(),r===kr&&(r=w())===kr&&(r=x())===kr&&(r=k()),r!==kr?(n=M(),n!==kr?(Jy=e,t=Ir(t,r,n),e=t):($y=e,e=kr)):($y=e,e=kr)):($y=e,e=kr),eg--,e===kr&&(t=kr,0===eg&&u(Sr)),e}function d(){var e,t,r,n,i;if(eg++,e=$y,t=v(),t===kr&&(t=null),t!==kr){for(r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr){for(n=[],i=y();i!==kr;)n.push(i),i=y();n!==kr?(Jy=e,t=Cr(t,n),e=t):($y=e,e=kr)}else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(t=kr,0===eg&&u(Tr)),e}function v(){var e,r,n,i,o;for(eg++,e=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if(t.substr($y,4)===Rr?(n=Rr,$y+=4):(n=kr,0===eg&&u(jr)),n===kr&&(t.substr($y,4)===Nr?(n=Nr,$y+=4):(n=kr,0===eg&&u(Lr))),n!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();i!==kr?(o=Bt(),o!==kr?(Jy=e,r=Pr(o),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Fr)),e}function y(){var e,r,n,i,o,s,a;for(eg++,e=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if(t.substr($y,6)===Qr?(n=Qr,$y+=6):(n=kr,0===eg&&u(Dr)),n===kr&&(t.substr($y,6)===Br?(n=Br,$y+=6):(n=kr,0===eg&&u(Mr))),n!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();if(i!==kr)if((o=Mt())!==kr){for(s=[],a=ur();a!==kr;)s.push(a),a=ur();s!==kr?(a=Bt(),a!==kr?(Jy=e,r=Ur(o,a),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Or)),e}function g(){var e,t,r,n,i,o,s,a,l,c;if(eg++,e=$y,(t=m())!==kr){for(r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr){for(n=[],i=E();i!==kr;)n.push(i),i=E();if(n!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();if(i!==kr)if((o=I())!==kr){for(s=[],a=ur();a!==kr;)s.push(a),a=ur();if(s!==kr)if((a=T())!==kr){for(l=[],c=ur();c!==kr;)l.push(c),c=ur();l!==kr?(c=D(),c!==kr?(Jy=e,t=Gr(t,n,o,a),e=t):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr}else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(t=kr,0===eg&&u(qr)),e}function b(){var e,t,r,n;return eg++,e=$y,t=m(),t!==kr?(r=I(),r!==kr?(n=T(),n!==kr?(Jy=e,t=Xr(t,r,n),e=t):($y=e,e=kr)):($y=e,e=kr)):($y=e,e=kr),eg--,e===kr&&(t=kr,0===eg&&u(Hr)),e}function m(){var e,r,n,i,o,s,a,l,c,f,p,h,d,v,y,g,b,m,w,x;for(eg++,e=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if(t.substr($y,6)===Vr?(n=Vr,$y+=6):(n=kr,0===eg&&u(Wr)),n===kr&&(t.substr($y,6)===$r?(n=$r,$y+=6):(n=kr,0===eg&&u(Jr))),n!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();if(i!==kr)if(t.substr($y,8)===Yr?(o=Yr,$y+=8):(o=kr,0===eg&&u(Kr)),o===kr&&(t.substr($y,8)===Zr?(o=Zr,$y+=8):(o=kr,0===eg&&u(en))),o===kr&&(t.substr($y,7)===tn?(o=tn,$y+=7):(o=kr,0===eg&&u(rn)),o===kr&&(t.substr($y,7)===nn?(o=nn,$y+=7):(o=kr,0===eg&&u(on)))),o===kr&&(o=null),o!==kr){for(s=[],a=ur();a!==kr;)s.push(a),a=ur();if(s!==kr){for(a=[],l=$y,c=[],f=ur();f!==kr;)c.push(f),f=ur();if(c!==kr)if((f=ct())!==kr){for(p=[],h=ur();h!==kr;)p.push(h),h=ur();p!==kr?(c=[c,f,p],l=c):($y=l,l=kr)}else $y=l,l=kr;else $y=l,l=kr;if(l===kr){for(l=$y,c=[],f=ur();f!==kr;)c.push(f),f=ur();if(c!==kr)if(40===t.charCodeAt($y)?(f=sn,$y++):(f=kr,0===eg&&u(an)),f!==kr){for(p=[],h=ur();h!==kr;)p.push(h),h=ur();if(p!==kr)if((h=pt())!==kr){for(d=[],v=ur();v!==kr;)d.push(v),v=ur();if(d!==kr)if(t.substr($y,2)===un?(v=un,$y+=2):(v=kr,0===eg&&u(ln)),v===kr&&(t.substr($y,2)===cn?(v=cn,$y+=2):(v=kr,0===eg&&u(fn))),v!==kr){for(y=[],g=ur();g!==kr;)y.push(g),g=ur();if(y!==kr)if((g=ct())!==kr){for(b=[],m=ur();m!==kr;)b.push(m),m=ur();if(b!==kr)if(41===t.charCodeAt($y)?(m=pn,$y++):(m=kr,0===eg&&u(hn)),m!==kr){for(w=[],x=ur();x!==kr;)w.push(x),x=ur();w!==kr?(c=[c,f,p,h,d,v,y,g,b,m,w],l=c):($y=l,l=kr)}else $y=l,l=kr;else $y=l,l=kr}else $y=l,l=kr;else $y=l,l=kr}else $y=l,l=kr;else $y=l,l=kr}else $y=l,l=kr;else $y=l,l=kr}else $y=l,l=kr;else $y=l,l=kr}if(l!==kr)for(;l!==kr;){for(a.push(l),l=$y,c=[],f=ur();f!==kr;)c.push(f),f=ur();if(c!==kr)if((f=ct())!==kr){for(p=[],h=ur();h!==kr;)p.push(h),h=ur();p!==kr?(c=[c,f,p],l=c):($y=l,l=kr)}else $y=l,l=kr;else $y=l,l=kr;if(l===kr){for(l=$y,c=[],f=ur();f!==kr;)c.push(f),f=ur();if(c!==kr)if(40===t.charCodeAt($y)?(f=sn,$y++):(f=kr,0===eg&&u(an)),f!==kr){for(p=[],h=ur();h!==kr;)p.push(h),h=ur();if(p!==kr)if((h=pt())!==kr){for(d=[],v=ur();v!==kr;)d.push(v),v=ur();if(d!==kr)if(t.substr($y,2)===un?(v=un,$y+=2):(v=kr,0===eg&&u(ln)),v===kr&&(t.substr($y,2)===cn?(v=cn,$y+=2):(v=kr,0===eg&&u(fn))),v!==kr){for(y=[],g=ur();g!==kr;)y.push(g),g=ur();if(y!==kr)if((g=ct())!==kr){for(b=[],m=ur();m!==kr;)b.push(m),m=ur();if(b!==kr)if(41===t.charCodeAt($y)?(m=pn,$y++):(m=kr,0===eg&&u(hn)),m!==kr){for(w=[],x=ur();x!==kr;)w.push(x),x=ur();w!==kr?(c=[c,f,p,h,d,v,y,g,b,m,w],l=c):($y=l,l=kr)}else $y=l,l=kr;else $y=l,l=kr}else $y=l,l=kr;else $y=l,l=kr}else $y=l,l=kr;else $y=l,l=kr}else $y=l,l=kr;else $y=l,l=kr}else $y=l,l=kr;else $y=l,l=kr}}else a=kr;if(a===kr){for(a=$y,l=[],c=ur();c!==kr;)l.push(c),c=ur();if(l!==kr)if(42===t.charCodeAt($y)?(c=dn,$y++):(c=kr,0===eg&&u(vn)),c!==kr){for(f=[],p=ur();p!==kr;)f.push(p),p=ur();f!==kr?(l=[l,c,f],a=l):($y=a,a=kr)}else $y=a,a=kr;else $y=a,a=kr}a!==kr?(Jy=e,r=yn(o,a),e=r):($y=e,e=kr)}else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(zr)),e}function w(){var e,r,n,i,o,s,a,l,c,f,p,h,d,v,y;for(eg++,e=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if(t.substr($y,9)===bn?(n=bn,$y+=9):(n=kr,0===eg&&u(mn)),n===kr&&(t.substr($y,9)===wn?(n=wn,$y+=9):(n=kr,0===eg&&u(xn))),n!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();if(i!==kr)if((o=Te())!==kr){for(s=[],a=ur();a!==kr;)s.push(a),a=ur();if(s!==kr){for(a=[],l=E();l!==kr;)a.push(l),l=E();if(a!==kr){for(l=[],c=ur();c!==kr;)l.push(c),c=ur();if(l!==kr)if((c=I())!==kr){for(f=[],p=ur();p!==kr;)f.push(p),p=ur();f!==kr?(p=T(),p!==kr?(Jy=e,r=kn(o,a,c,p),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr}else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr;if(e===kr){for(e=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if(t.substr($y,9)===bn?(n=bn,$y+=9):(n=kr,0===eg&&u(mn)),n===kr&&(t.substr($y,9)===wn?(n=wn,$y+=9):(n=kr,0===eg&&u(xn))),n!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();if(i!==kr){for(o=[],s=E();s!==kr;)o.push(s),s=E();if(o!==kr){for(s=[],a=ur();a!==kr;)s.push(a),a=ur();if(s!==kr)if(t.substr($y,5)===En?(a=En,$y+=5):(a=kr,0===eg&&u(_n)),a===kr&&(t.substr($y,5)===An?(a=An,$y+=5):(a=kr,0===eg&&u(Sn))),a!==kr){for(l=[],c=ur();c!==kr;)l.push(c),c=ur();if(l!==kr)if(123===t.charCodeAt($y)?(c=In,$y++):(c=kr,0===eg&&u(Tn)),c!==kr){for(f=[],p=ur();p!==kr;)f.push(p),p=ur();if(f!==kr)if(p=ae(),p===kr&&(p=null),p!==kr){for(h=[],d=ur();d!==kr;)h.push(d),d=ur();if(h!==kr)if(125===t.charCodeAt($y)?(d=Cn,$y++):(d=kr,0===eg&&u(Fn)),d!==kr){for(v=[],y=ur();y!==kr;)v.push(y),y=ur();v!==kr?(y=T(),y!==kr?(Jy=e,r=Rn(o,p,y),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr}else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}return eg--,e===kr&&(r=kr,0===eg&&u(gn)),e}function x(){var e,r,n,i,o,s;if(eg++,e=$y,t.substr($y,8)===Nn?(r=Nn,$y+=8):(r=kr,0===eg&&u(Ln)),r!==kr){if(n=[],(i=lt())!==kr)for(;i!==kr;)n.push(i),i=lt();else n=kr;if(n===kr&&(42===t.charCodeAt($y)?(n=dn,$y++):(n=kr,0===eg&&u(vn))),n!==kr){for(i=[],o=E();o!==kr;)i.push(o),o=E();i!==kr?(o=I(),o===kr&&(o=null),o!==kr?(s=T(),s!==kr?(r=[r,n,i,o,s],e=r):($y=e,e=kr)):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(jn)),e}function k(){var e,r,n,i,o,s,a;for(eg++,e=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if(t.substr($y,3)===On?(n=On,$y+=3):(n=kr,0===eg&&u(Qn)),n===kr&&(t.substr($y,3)===Dn?(n=Dn,$y+=3):(n=kr,0===eg&&u(Bn))),n!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();if(i!==kr){for(o=[],s=E();s!==kr;)o.push(s),s=E();if(o!==kr){for(s=[],a=ur();a!==kr;)s.push(a),a=ur();s!==kr?(a=I(),a!==kr?(Jy=e,r=Mn(o,a),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr}else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Pn)),e}function E(){var e,r,n,i,o,s;if(eg++,e=$y,t.substr($y,4)===qn?(r=qn,$y+=4):(r=kr,0===eg&&u(Gn)),r===kr&&(t.substr($y,4)===Hn?(r=Hn,$y+=4):(r=kr,0===eg&&u(Xn))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(i=_(),i===kr&&(i=A()),i!==kr){for(o=[],s=ur();s!==kr;)o.push(s),s=ur();o!==kr?(Jy=e,r=zn(i),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Un)),e}function _(){var e,t,r;for(eg++,e=$y,t=[],r=ur();r!==kr;)t.push(r),r=ur();return t!==kr?(r=S(),r!==kr?(Jy=e,t=Wn(r),e=t):($y=e,e=kr)):($y=e,e=kr),eg--,e===kr&&(t=kr,0===eg&&u(Vn)),e}function A(){var e,r,n,i;if(eg++,e=$y,t.substr($y,5)===Jn?(r=Jn,$y+=5):(r=kr,0===eg&&u(Yn)),r===kr&&(t.substr($y,5)===Kn?(r=Kn,$y+=5):(r=kr,0===eg&&u(Zn))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();n!==kr?(i=S(),i!==kr?(Jy=e,r=ei(i),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u($n)),e}function S(){var e;return eg++,e=Ot(),eg--,e===kr&&(kr,0===eg&&u(ti)),e}function I(){var e,r,n,i,o,s;if(eg++,e=$y,t.substr($y,5)===En?(r=En,$y+=5):(r=kr,0===eg&&u(_n)),r===kr&&(t.substr($y,5)===An?(r=An,$y+=5):(r=kr,0===eg&&u(Sn))),r===kr&&(r=null),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if((i=ue())!==kr){for(o=[],s=ur();s!==kr;)o.push(s),s=ur();o!==kr?(Jy=e,r=ni(i),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(ri)),e}function T(){var e,t,r,n,i;return eg++,e=$y,t=C(),t===kr&&(t=null),t!==kr?(r=R(),r===kr&&(r=null),r!==kr?(n=N(),n===kr&&(n=null),n!==kr?(i=P(),i===kr&&(i=null),i!==kr?(Jy=e,t=oi(t,n,i),e=t):($y=e,e=kr)):($y=e,e=kr)):($y=e,e=kr)):($y=e,e=kr),eg--,e===kr&&(t=kr,0===eg&&u(ii)),e}function C(){var e,r,n,i,o,s,a;if(eg++,e=$y,t.substr($y,5)===ai?(r=ai,$y+=5):(r=kr,0===eg&&u(ui)),r===kr&&(t.substr($y,5)===li?(r=li,$y+=5):(r=kr,0===eg&&u(ci))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(t.substr($y,2)===fi?(i=fi,$y+=2):(i=kr,0===eg&&u(pi)),i===kr&&(t.substr($y,2)===hi?(i=hi,$y+=2):(i=kr,0===eg&&u(di))),i!==kr){for(o=[],s=ur();s!==kr;)o.push(s),s=ur();if(o!==kr){if(s=[],(a=F())!==kr)for(;a!==kr;)s.push(a),a=F();else s=kr;s!==kr?(Jy=e,r=vi(s),e=r):($y=e,e=kr)}else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(si)),e}function F(){var e,r,n,i,o,s,a,l,c,f,p;for(eg++,e=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if((n=Et())!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();i!==kr?(Jy=e,r=gi(n),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr;if(e===kr){for(e=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if((n=Ae())!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();i!==kr?(Jy=e,r=bi(n),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr;if(e===kr){for(e=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if(40===t.charCodeAt($y)?(n=sn,$y++):(n=kr,0===eg&&u(an)),n!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();if(i!==kr)if((o=pt())!==kr){for(s=[],a=ur();a!==kr;)s.push(a),a=ur();if(s!==kr){if(a=$y,t.substr($y,2)===un?(l=un,$y+=2):(l=kr,0===eg&&u(ln)),l===kr&&(t.substr($y,2)===cn?(l=cn,$y+=2):(l=kr,0===eg&&u(fn))),l!==kr){for(c=[],f=ur();f!==kr;)c.push(f),f=ur();c!==kr?(f=ct(),f!==kr?(l=[l,c,f],a=l):($y=a,a=kr)):($y=a,a=kr)}else $y=a,a=kr;if(a===kr&&(a=null),a!==kr){for(l=[],c=ur();c!==kr;)l.push(c),c=ur();if(l!==kr)if(41===t.charCodeAt($y)?(c=pn,$y++):(c=kr,0===eg&&u(hn)),c!==kr){for(f=[],p=ur();p!==kr;)f.push(p),p=ur();f!==kr?(Jy=e,r=mi(o,a),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr}else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr;if(e===kr){for(e=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if((n=ct())!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();i!==kr?(Jy=e,r=wi(n),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}}}return eg--,e===kr&&(r=kr,0===eg&&u(yi)),e}function R(){var e,r,n,i;if(eg++,e=$y,t.substr($y,6)===ki?(r=ki,$y+=6):(r=kr,0===eg&&u(Ei)),r!==kr){if(n=[],(i=j())!==kr)for(;i!==kr;)n.push(i),i=j();else n=kr;n!==kr?(r=[r,n],e=r):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(xi)),e}function j(){var e;return eg++,e=me(),eg--,e===kr&&(kr,0===eg&&u(_i)),e}function N(){var e,r,n,i,o,s,a,l;if(eg++,e=$y,t.substr($y,5)===Si?(r=Si,$y+=5):(r=kr,0===eg&&u(Ii)),r===kr&&(t.substr($y,5)===Ti?(r=Ti,$y+=5):(r=kr,0===eg&&u(Ci))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(t.substr($y,2)===fi?(i=fi,$y+=2):(i=kr,0===eg&&u(pi)),i===kr&&(t.substr($y,2)===hi?(i=hi,$y+=2):(i=kr,0===eg&&u(di))),i!==kr){for(o=[],s=ur();s!==kr;)o.push(s),s=ur();if(o!==kr){if(s=[],(a=L())!==kr)for(;a!==kr;)s.push(a),a=L();else s=kr;if(s!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();a!==kr?(Jy=e,r=Fi(s),e=r):($y=e,e=kr)}else $y=e,e=kr}else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Ai)),e}function L(){var e,r,n,i,o,s;if(eg++,e=$y,t.substr($y,3)===ji?(r=ji,$y+=3):(r=kr,0===eg&&u(Ni)),r===kr&&(t.substr($y,3)===Li?(r=Li,$y+=3):(r=kr,0===eg&&u(Pi)),r===kr&&(t.substr($y,4)===Oi?(r=Oi,$y+=4):(r=kr,0===eg&&u(Qi)),r===kr&&(t.substr($y,4)===Di?(r=Di,$y+=4):(r=kr,0===eg&&u(Bi))))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if((i=kt())!==kr){for(o=[],s=ur();s!==kr;)o.push(s),s=ur();o!==kr?(Jy=e,r=Mi(r,i),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;if(e===kr)if(e=$y,r=me(),r===kr&&(r=ct()),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();n!==kr?(Jy=e,r=Ui(r),e=r):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Ri)),e}function P(){var e,t,r,n;return eg++,e=$y,t=$y,r=O(),r!==kr?(n=Q(),n===kr&&(n=null),n!==kr?(r=[r,n],t=r):($y=t,t=kr)):($y=t,t=kr),t===kr&&(t=$y,r=Q(),r!==kr?(n=O(),n===kr&&(n=null),n!==kr?(r=[r,n],t=r):($y=t,t=kr)):($y=t,t=kr)),t!==kr&&(Jy=e,t=Gi(t)),e=t,eg--,e===kr&&(t=kr,0===eg&&u(qi)),e}function O(){var e,r,n,i,o,s;if(eg++,e=$y,t.substr($y,5)===Xi?(r=Xi,$y+=5):(r=kr,0===eg&&u(zi)),r===kr&&(t.substr($y,5)===Vi?(r=Vi,$y+=5):(r=kr,0===eg&&u(Wi))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if((i=zt())!==kr){for(o=[],s=ur();s!==kr;)o.push(s),s=ur();o!==kr?(Jy=e,r=$i(i),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Hi)),e}function Q(){var e,r,n,i,o,s;if(eg++,e=$y,t.substr($y,6)===Yi?(r=Yi,$y+=6):(r=kr,0===eg&&u(Ki)),r===kr&&(t.substr($y,6)===Zi?(r=Zi,$y+=6):(r=kr,0===eg&&u(eo))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if((i=zt())!==kr){for(o=[],s=ur();s!==kr;)o.push(s),s=ur();o!==kr?(Jy=e,r=to(i),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Ji)),e}function D(){var e,r,n,i,o,s,a,l,c;if(eg++,e=$y,t.substr($y,8)===no?(r=no,$y+=8):(r=kr,0===eg&&u(io)),r!==kr){for(n=[],i=ct();i!==kr;)n.push(i),i=ct();if(n!==kr)if(123===t.charCodeAt($y)?(i=In,$y++):(i=kr,0===eg&&u(Tn)),i!==kr){if(o=[],s=$y,40===t.charCodeAt($y)?(a=sn,$y++):(a=kr,0===eg&&u(an)),a!==kr){if(l=[],(c=B())!==kr)for(;c!==kr;)l.push(c),c=B();else l=kr;l!==kr?(41===t.charCodeAt($y)?(c=pn,$y++):(c=kr,0===eg&&u(hn)),c!==kr?(a=[a,l,c],s=a):($y=s,s=kr)):($y=s,s=kr)}else $y=s,s=kr;for(s===kr&&(s=ar());s!==kr;){if(o.push(s),s=$y,40===t.charCodeAt($y)?(a=sn,$y++):(a=kr,0===eg&&u(an)),a!==kr){if(l=[],(c=B())!==kr)for(;c!==kr;)l.push(c),c=B();else l=kr;l!==kr?(41===t.charCodeAt($y)?(c=pn,$y++):(c=kr,0===eg&&u(hn)),c!==kr?(a=[a,l,c],s=a):($y=s,s=kr)):($y=s,s=kr)}else $y=s,s=kr;s===kr&&(s=ar())}o!==kr?(125===t.charCodeAt($y)?(s=Cn,$y++):(s=kr,0===eg&&u(Fn)),s!==kr?(r=[r,n,i,o,s],e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;return e===kr&&(e=null),eg--,e===kr&&(r=kr,0===eg&&u(ro)),e}function B(){var e;return eg++,e=Ot(),e===kr&&(e=Ct())===kr&&(e=Ft())===kr&&(e=Lt())===kr&&(t.substr($y,5)===so?(e=so,$y+=5):(e=kr,0===eg&&u(ao))),eg--,e===kr&&(kr,0===eg&&u(oo)),e}function M(){var e,r,n,i;return eg++,e=$y,r=$y,t.substr($y,6)===lo?(n=lo,$y+=6):(n=kr,0===eg&&u(co)),n===kr&&(t.substr($y,6)===fo?(n=fo,$y+=6):(n=kr,0===eg&&u(po))),n!==kr?(i=xe(),i!==kr?(n=[n,i],r=n):($y=r,r=kr)):($y=r,r=kr),r===kr&&(r=null),r!==kr&&(Jy=e,r=ho(r)),e=r,eg--,e===kr&&(r=kr,0===eg&&u(uo)),e}function U(){var e;return eg++,e=q(),eg--,e===kr&&(kr,0===eg&&u(vo)),e}function q(){var e,r,n,i,o,s,a,l,c;if(eg++,e=$y,(r=d())!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if((i=G())!==kr){for(o=$y,s=[],a=ur();a!==kr;)s.push(a),a=ur();if(s!==kr)if(59===t.charCodeAt($y)?(a=go,$y++):(a=kr,0===eg&&u(bo)),a!==kr){for(l=[],c=ur();c!==kr;)l.push(c),c=ur();l!==kr?(c=q(),c===kr&&(c=null),c!==kr?(s=[s,a,l,c],o=s):($y=o,o=kr)):($y=o,o=kr)}else $y=o,o=kr;else $y=o,o=kr;o===kr&&(o=null),o!==kr?(Jy=e,r=mo(r,i,o),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(yo)),e}function G(){var e;return eg++,e=H(),e===kr&&(e=X())===kr&&(e=z())===kr&&(e=V())===kr&&(e=W())===kr&&(e=$())===kr&&(e=J())===kr&&(e=Y()),eg--,e===kr&&(kr,0===eg&&u(wo)),e}function H(){var e,r,n,i,o,s,a,l,c;if(eg++,e=$y,t.substr($y,4)===ko?(r=ko,$y+=4):(r=kr,0===eg&&u(Eo)),r===kr&&(t.substr($y,4)===_o?(r=_o,$y+=4):(r=kr,0===eg&&u(Ao))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if((i=Ot())!==kr){for(o=[],s=ur();s!==kr;)o.push(s),s=ur();if(o!==kr){if(s=$y,t.substr($y,4)===So?(a=So,$y+=4):(a=kr,0===eg&&u(Io)),a===kr&&(t.substr($y,4)===To?(a=To,$y+=4):(a=kr,0===eg&&u(Co))),a!==kr){for(l=[],c=ur();c!==kr;)l.push(c),c=ur();l!==kr?(c=te(),c!==kr?(a=[a,l,c],s=a):($y=s,s=kr)):($y=s,s=kr)}else $y=s,s=kr;s===kr&&(s=null),s!==kr?(Jy=e,r=Fo(i,s),e=r):($y=e,e=kr)}else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(xo)),e}function X(){var e,r,n,i,o,s;if(eg++,e=$y,t.substr($y,5)===jo?(r=jo,$y+=5):(r=kr,0===eg&&u(No)),r===kr&&(t.substr($y,5)===Lo?(r=Lo,$y+=5):(r=kr,0===eg&&u(Po))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(t.substr($y,6)===Oo?(i=Oo,$y+=6):(i=kr,0===eg&&u(Qo)),i===kr&&(t.substr($y,6)===Do?(i=Do,$y+=6):(i=kr,0===eg&&u(Bo))),i===kr&&(i=null),i!==kr){for(o=[],s=ur();s!==kr;)o.push(s),s=ur();o!==kr?(s=re(),s!==kr?(Jy=e,r=Mo(s),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Ro)),e}function z(){var e,r,n,i,o,s;if(eg++,e=$y,t.substr($y,4)===qo?(r=qo,$y+=4):(r=kr,0===eg&&u(Go)),r===kr&&(t.substr($y,4)===Ho?(r=Ho,$y+=4):(r=kr,0===eg&&u(Xo))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(t.substr($y,6)===Oo?(i=Oo,$y+=6):(i=kr,0===eg&&u(Qo)),i===kr&&(t.substr($y,6)===Do?(i=Do,$y+=6):(i=kr,0===eg&&u(Bo))),i===kr&&(i=null),i!==kr){for(o=[],s=ur();s!==kr;)o.push(s),s=ur();o!==kr?(s=re(),s!==kr?(Jy=e,r=zo(s),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Uo)),e}function V(){var e,r,n,i,o,s;if(eg++,e=$y,t.substr($y,6)===Wo?(r=Wo,$y+=6):(r=kr,0===eg&&u($o)),r===kr&&(t.substr($y,6)===Jo?(r=Jo,$y+=6):(r=kr,0===eg&&u(Yo))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(t.substr($y,6)===Oo?(i=Oo,$y+=6):(i=kr,0===eg&&u(Qo)),i===kr&&(t.substr($y,6)===Do?(i=Do,$y+=6):(i=kr,0===eg&&u(Bo))),i===kr&&(i=null),i!==kr){for(o=[],s=ur();s!==kr;)o.push(s),s=ur();o!==kr?(s=te(),s!==kr?(Jy=e,r=Ko(s),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Vo)),e}function W(){var e,r,n,i,o,s;if(eg++,e=$y,t.substr($y,6)===es?(r=es,$y+=6):(r=kr,0===eg&&u(ts)),r===kr&&(t.substr($y,6)===rs?(r=rs,$y+=6):(r=kr,0===eg&&u(ns))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(t.substr($y,4)===is?(i=is,$y+=4):(i=kr,0===eg&&u(os)),i===kr&&(t.substr($y,4)===ss?(i=ss,$y+=4):(i=kr,0===eg&&u(as))),i!==kr){for(o=[],s=ur();s!==kr;)o.push(s),s=ur();o!==kr?(s=ie(),s!==kr?(Jy=e,r=us(s),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Zo)),e}function $(){var e,r,n,i,o;if(eg++,e=$y,t.substr($y,6)===cs?(r=cs,$y+=6):(r=kr,0===eg&&u(fs)),r===kr&&(t.substr($y,6)===ps?(r=ps,$y+=6):(r=kr,0===eg&&u(hs))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();n!==kr?(t.substr($y,4)===is?(i=is,$y+=4):(i=kr,0===eg&&u(os)),i===kr&&(t.substr($y,4)===ss?(i=ss,$y+=4):(i=kr,0===eg&&u(as))),i!==kr?(o=ie(),o!==kr?(Jy=e,r=ds(o),e=r):($y=e,e=kr)):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(ls)),e}function J(){var e,r,n,i,o,s;if(eg++,e=$y,t.substr($y,6)===cs?(r=cs,$y+=6):(r=kr,0===eg&&u(fs)),r===kr&&(t.substr($y,6)===ps?(r=ps,$y+=6):(r=kr,0===eg&&u(hs))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(t.substr($y,5)===En?(i=En,$y+=5):(i=kr,0===eg&&u(_n)),i===kr&&(t.substr($y,5)===An?(i=An,$y+=5):(i=kr,0===eg&&u(Sn))),i!==kr){for(o=[],s=ur();s!==kr;)o.push(s),s=ur();o!==kr?(s=ue(),s!==kr?(Jy=e,r=ys(s),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(vs)),e}function Y(){var e,r,n,i,o,s,a,l,c,f,p,h;if(eg++,e=$y,r=$y,t.substr($y,4)===bs?(n=bs,$y+=4):(n=kr,0===eg&&u(ms)),n===kr&&(t.substr($y,4)===ws?(n=ws,$y+=4):(n=kr,0===eg&&u(xs))),n!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();i!==kr?(o=Ot(),o!==kr?(n=[n,i,o],r=n):($y=r,r=kr)):($y=r,r=kr)}else $y=r,r=kr;if(r===kr&&(r=null),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr){if(i=$y,(o=K())!==kr){for(s=[],a=ur();a!==kr;)s.push(a),a=ur();s!==kr?(a=Z(),a===kr&&(a=null),a!==kr?(o=[o,s,a],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;if(i===kr&&(i=Z()),i!==kr){for(o=[],s=ur();s!==kr;)o.push(s),s=ur();if(o!==kr){for(s=[],a=ee();a!==kr;)s.push(a),a=ee();if(s!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();if(a!==kr)if(t.substr($y,5)===En?(l=En,$y+=5):(l=kr,0===eg&&u(_n)),l===kr&&(t.substr($y,5)===An?(l=An,$y+=5):(l=kr,0===eg&&u(Sn))),l!==kr){for(c=[],f=ur();f!==kr;)c.push(f),f=ur();if(c!==kr)if((f=ue())!==kr){for(p=[],h=ur();h!==kr;)p.push(h),h=ur();p!==kr?(Jy=e,r=ks(r,i,s,f),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr}else $y=e,e=kr}else $y=e,e=kr}else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(gs)),e}function K(){var e,r,n;return eg++,e=$y,t.substr($y,6)===cs?(r=cs,$y+=6):(r=kr,0===eg&&u(fs)),r===kr&&(t.substr($y,6)===ps?(r=ps,$y+=6):(r=kr,0===eg&&u(hs))),r!==kr?(n=ne(),n!==kr?(Jy=e,r=_s(n),e=r):($y=e,e=kr)):($y=e,e=kr),eg--,e===kr&&(r=kr,0===eg&&u(Es)),e}function Z(){var e,r,n;return eg++,e=$y,t.substr($y,6)===es?(r=es,$y+=6):(r=kr,0===eg&&u(ts)),r===kr&&(t.substr($y,6)===rs?(r=rs,$y+=6):(r=kr,0===eg&&u(ns))),r!==kr?(n=ne(),n!==kr?(Jy=e,r=_s(n),e=r):($y=e,e=kr)):($y=e,e=kr),eg--,e===kr&&(r=kr,0===eg&&u(As)),e}function ee(){var e,r,n,i,o,s,a,l;for(eg++,e=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if(t.substr($y,5)===Is?(n=Is,$y+=5):(n=kr,0===eg&&u(Ts)),n===kr&&(t.substr($y,5)===Cs?(n=Cs,$y+=5):(n=kr,0===eg&&u(Fs))),n!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();if(i!==kr){if((o=Ot())===kr)if(o=$y,t.substr($y,5)===Jn?(s=Jn,$y+=5):(s=kr,0===eg&&u(Yn)),s===kr&&(t.substr($y,5)===Kn?(s=Kn,$y+=5):(s=kr,0===eg&&u(Zn))),s!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();a!==kr?(l=Ot(),l!==kr?(s=[s,a,l],o=s):($y=o,o=kr)):($y=o,o=kr)}else $y=o,o=kr;o!==kr?(Jy=e,r=Rs(o),e=r):($y=e,e=kr)}else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Ss)),e}function te(){var e,r,n,i;if(eg++,e=$y,t.substr($y,5)===Ns?(r=Ns,$y+=5):(r=kr,0===eg&&u(Ls)),r===kr&&(t.substr($y,5)===Ps?(r=Ps,$y+=5):(r=kr,0===eg&&u(Os))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();n!==kr?(i=Ot(),i!==kr?(Jy=e,r=Qs(i),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(js)),e}function re(){var e,r;return eg++,e=$y,r=te(),r!==kr&&(Jy=e,r=ni(r)),e=r,e===kr&&(e=$y,t.substr($y,7)===Bs?(r=Bs,$y+=7):(r=kr,0===eg&&u(Ms)),r===kr&&(t.substr($y,7)===Us?(r=Us,$y+=7):(r=kr,0===eg&&u(qs))),r!==kr&&(Jy=e,r=Gs()),(e=r)===kr&&(e=$y,t.substr($y,5)===Jn?(r=Jn,$y+=5):(r=kr,0===eg&&u(Yn)),r===kr&&(t.substr($y,5)===Kn?(r=Kn,$y+=5):(r=kr,0===eg&&u(Zn))),r!==kr&&(Jy=e,r=Hs()),(e=r)===kr&&(e=$y,t.substr($y,3)===Xs?(r=Xs,$y+=3):(r=kr,0===eg&&u(zs)),r===kr&&(t.substr($y,3)===Vs?(r=Vs,$y+=3):(r=kr,0===eg&&u(Ws))),r!==kr&&(Jy=e,r=$s()),e=r))),eg--,e===kr&&(r=kr,0===eg&&u(Ds)),e}function ne(){var e,r,n,i,o,s,a,l,c;for(eg++,e=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if(123===t.charCodeAt($y)?(n=In,$y++):(n=kr,0===eg&&u(Tn)),n!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();if(i!==kr)if((o=oe())!==kr){for(s=[],a=ur();a!==kr;)s.push(a),a=ur();if(s!==kr)if(125===t.charCodeAt($y)?(a=Cn,$y++):(a=kr,0===eg&&u(Fn)),a!==kr){for(l=[],c=ur();c!==kr;)l.push(c),c=ur();l!==kr?(Jy=e,r=Ys(o),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Js)),e}function ie(){var e,r,n,i,o,s,a,l,c;for(eg++,e=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if(123===t.charCodeAt($y)?(n=In,$y++):(n=kr,0===eg&&u(Tn)),n!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();if(i!==kr)if((o=oe())!==kr){for(s=[],a=ur();a!==kr;)s.push(a),a=ur();if(s!==kr)if(125===t.charCodeAt($y)?(a=Cn,$y++):(a=kr,0===eg&&u(Fn)),a!==kr){for(l=[],c=ur();c!==kr;)l.push(c),c=ur();l!==kr?(Jy=e,r=Ys(o),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Ks)),e}function oe(){var e,r,n,i,o,s,a;if(eg++,e=$y,r=ae(),r===kr&&(r=null),r!==kr){for(n=[],i=$y,o=se(),o!==kr?(46===t.charCodeAt($y)?(s=ea,$y++):(s=kr,0===eg&&u(ta)),s===kr&&(s=null),s!==kr?(a=ae(),a===kr&&(a=null),a!==kr?(o=[o,s,a],i=o):($y=i,i=kr)):($y=i,i=kr)):($y=i,i=kr);i!==kr;)n.push(i),i=$y,o=se(),o!==kr?(46===t.charCodeAt($y)?(s=ea,$y++):(s=kr,0===eg&&u(ta)),s===kr&&(s=null),s!==kr?(a=ae(),a===kr&&(a=null),a!==kr?(o=[o,s,a],i=o):($y=i,i=kr)):($y=i,i=kr)):($y=i,i=kr);n!==kr?(Jy=e,r=ra(r,n),e=r):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Zs)),e}function se(){var e,r,n,i,o,s,a,l,c,f,p,h,d;for(eg++,e=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if(t.substr($y,5)===Ns?(n=Ns,$y+=5):(n=kr,0===eg&&u(Ls)),n===kr&&(t.substr($y,5)===Ps?(n=Ps,$y+=5):(n=kr,0===eg&&u(Os))),n!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();if(i!==kr)if((o=lt())!==kr){for(s=[],a=ur();a!==kr;)s.push(a),a=ur();if(s!==kr)if(123===t.charCodeAt($y)?(a=In,$y++):(a=kr,0===eg&&u(Tn)),a!==kr){for(l=[],c=ur();c!==kr;)l.push(c),c=ur();if(l!==kr)if(c=ae(),c===kr&&(c=null),c!==kr){for(f=[],p=ur();p!==kr;)f.push(p),p=ur();if(f!==kr)if(125===t.charCodeAt($y)?(p=Cn,$y++):(p=kr,0===eg&&u(Fn)),p!==kr){for(h=[],d=ur();d!==kr;)h.push(d),d=ur();h!==kr?(Jy=e,r=ia(o,c),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(na)),e}function ae(){var e,r,n,i,o,s,a;if(eg++,e=$y,(r=Fe())!==kr){for(n=$y,i=[],o=ur();o!==kr;)i.push(o),o=ur();if(i!==kr)if(46===t.charCodeAt($y)?(o=ea,$y++):(o=kr,0===eg&&u(ta)),o!==kr){for(s=[],a=ur();a!==kr;)s.push(a),a=ur();s!==kr?(a=ae(),a===kr&&(a=null),a!==kr?(i=[i,o,s,a],n=i):($y=n,n=kr)):($y=n,n=kr)}else $y=n,n=kr;else $y=n,n=kr;n===kr&&(n=null),n!==kr?(Jy=e,r=sa(r,n),e=r):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(oa)),e}function ue(){var e,r,n,i,o,s;if(eg++,e=$y,123===t.charCodeAt($y)?(r=In,$y++):(r=kr,0===eg&&u(Tn)),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if((i=b())!==kr){for(o=[],s=ur();s!==kr;)o.push(s),s=ur();o!==kr?(125===t.charCodeAt($y)?(s=Cn,$y++):(s=kr,0===eg&&u(Fn)),s!==kr?(Jy=e,r=ua(i),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;if(e===kr)if(e=$y,123===t.charCodeAt($y)?(r=In,$y++):(r=kr,0===eg&&u(Tn)),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if((i=le())!==kr){for(o=[],s=ur();s!==kr;)o.push(s),s=ur();o!==kr?(125===t.charCodeAt($y)?(s=Cn,$y++):(s=kr,0===eg&&u(Fn)),s!==kr?(Jy=e,r=ua(i),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(aa)),e}function le(){var e,r,n,i,o,s,a,l,c,f;if(eg++,e=$y,r=ce(),r===kr&&(r=null),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr){if(i=[],o=$y,(s=fe())!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();if(a!==kr)if(46===t.charCodeAt($y)?(l=ea,$y++):(l=kr,0===eg&&u(ta)),l===kr&&(l=null),l!==kr){for(c=[],f=ur();f!==kr;)c.push(f),f=ur();c!==kr?(f=ce(),f===kr&&(f=null),f!==kr?(s=[s,a,l,c,f],o=s):($y=o,o=kr)):($y=o,o=kr)}else $y=o,o=kr;else $y=o,o=kr}else $y=o,o=kr;for(;o!==kr;)if(i.push(o),o=$y,(s=fe())!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();if(a!==kr)if(46===t.charCodeAt($y)?(l=ea,$y++):(l=kr,0===eg&&u(ta)),l===kr&&(l=null),l!==kr){for(c=[],f=ur();f!==kr;)c.push(f),f=ur();c!==kr?(f=ce(),f===kr&&(f=null),f!==kr?(s=[s,a,l,c,f],o=s):($y=o,o=kr)):($y=o,o=kr)}else $y=o,o=kr;else $y=o,o=kr}else $y=o,o=kr;i!==kr?(Jy=e,r=ca(r,i),e=r):($y=e,e=kr)}else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(la)),e}function ce(){var e,r,n,i,o,s;if(eg++,e=$y,(r=Be())!==kr){for(n=$y,i=[],o=ur();o!==kr;)i.push(o),o=ur();i!==kr?(46===t.charCodeAt($y)?(o=ea,$y++):(o=kr,0===eg&&u(ta)),o!==kr?(s=ce(),s===kr&&(s=null),s!==kr?(i=[i,o,s],n=i):($y=n,n=kr)):($y=n,n=kr)):($y=n,n=kr),n===kr&&(n=null),n!==kr?(Jy=e,r=pa(r,n),e=r):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(fa)),e}function fe(){var e;return eg++,e=ye(),e===kr&&(e=pe())===kr&&(e=ve())===kr&&(e=he())===kr&&(e=de())===kr&&(e=ge())===kr&&(e=be())===kr&&(e=we()),eg--,e===kr&&(kr,0===eg&&u(ha)),e}function pe(){var e,r,n,i,o;for(eg++,e=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if(t.substr($y,8)===va?(n=va,$y+=8):(n=kr,0===eg&&u(ya)),n===kr&&(t.substr($y,8)===ga?(n=ga,$y+=8):(n=kr,0===eg&&u(ba))),n!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();i!==kr?(o=ue(),o!==kr?(Jy=e,r=ma(o),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(da)),e}function he(){var e,r,n,i,o,s,a;for(eg++,e=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if(t.substr($y,5)===Ns?(n=Ns,$y+=5):(n=kr,0===eg&&u(Ls)),n===kr&&(t.substr($y,5)===Ps?(n=Ps,$y+=5):(n=kr,0===eg&&u(Os))),n!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();if(i!==kr)if((o=lt())!==kr){for(s=[],a=ur();a!==kr;)s.push(a),a=ur();s!==kr?(a=ue(),a!==kr?(Jy=e,r=xa(o,a),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(wa)),e}function de(){var e,r,n,i;return eg++,e=$y,t.substr($y,7)===Ea?(r=Ea,$y+=7):(r=kr,0===eg&&u(_a)),r!==kr?(n=lt(),n!==kr?(i=ue(),i!==kr?(Jy=e,r=Aa(n,i),e=r):($y=e,e=kr)):($y=e,e=kr)):($y=e,e=kr),eg--,e===kr&&(r=kr,0===eg&&u(ka)),e}function ve(){var e,r,n,i;if(eg++,e=$y,t.substr($y,5)===Ia?(r=Ia,$y+=5):(r=kr,0===eg&&u(Ta)),r===kr&&(t.substr($y,5)===Ca?(r=Ca,$y+=5):(r=kr,0===eg&&u(Fa))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();n!==kr?(i=ue(),i!==kr?(Jy=e,r=Ra(i),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Sa)),e}function ye(){var e,r,n,i,o,s,a,l;if(eg++,e=$y,(r=ue())!==kr){for(n=[],i=$y,o=[],s=ur();s!==kr;)o.push(s),s=ur();if(o!==kr)if(t.substr($y,5)===Na?(s=Na,$y+=5):(s=kr,0===eg&&u(La)),s===kr&&(t.substr($y,5)===Pa?(s=Pa,$y+=5):(s=kr,0===eg&&u(Oa))),s!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();a!==kr?(l=ue(),l!==kr?(o=[o,s,a,l],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr;for(;i!==kr;){for(n.push(i),i=$y,o=[],s=ur();s!==kr;)o.push(s),s=ur();if(o!==kr)if(t.substr($y,5)===Na?(s=Na,$y+=5):(s=kr,0===eg&&u(La)),s===kr&&(t.substr($y,5)===Pa?(s=Pa,$y+=5):(s=kr,0===eg&&u(Oa))),s!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();a!==kr?(l=ue(),l!==kr?(o=[o,s,a,l],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr}n!==kr?(Jy=e,r=Qa(r,n),e=r):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(ja)),e}function ge(){var e,r,n,i,o;for(eg++,e=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if(t.substr($y,6)===Ba?(n=Ba,$y+=6):(n=kr,0===eg&&u(Ma)),n===kr&&(t.substr($y,6)===Ua?(n=Ua,$y+=6):(n=kr,0===eg&&u(qa))),n!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();i!==kr?(o=me(),o!==kr?(Jy=e,r=Ga(o),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Da)),e}function be(){var e,r,n,i,o,s,a,l,c,f,p,h,d;for(eg++,e=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if(t.substr($y,4)===Xa?(n=Xa,$y+=4):(n=kr,0===eg&&u(za)),n===kr&&(t.substr($y,4)===Va?(n=Va,$y+=4):(n=kr,0===eg&&u(Wa))),n!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();if(i!==kr)if(40===t.charCodeAt($y)?(o=sn,$y++):(o=kr,0===eg&&u(an)),o!==kr){for(s=[],a=ur();a!==kr;)s.push(a),a=ur();if(s!==kr)if((a=pt())!==kr){for(l=[],c=ur();c!==kr;)l.push(c),c=ur();if(l!==kr)if(t.substr($y,2)===cn?(c=cn,$y+=2):(c=kr,0===eg&&u(fn)),c===kr&&(t.substr($y,2)===un?(c=un,$y+=2):(c=kr,0===eg&&u(ln))),c!==kr){for(f=[],p=ur();p!==kr;)f.push(p),p=ur();if(f!==kr)if((p=ct())!==kr){for(h=[],d=ur();d!==kr;)h.push(d),d=ur();h!==kr?(41===t.charCodeAt($y)?(d=pn,$y++):(d=kr,0===eg&&u(hn)),d!==kr?(Jy=e,r=$a(a,p),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Ha)),e}function me(){var e;return eg++,e=kt(),e===kr&&(e=Et())===kr&&(e=Ae()),eg--,e===kr&&(kr,0===eg&&u(Ja)),e}function we(){var e,r,n,i,o;for(eg++,e=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if(t.substr($y,6)===lo?(n=lo,$y+=6):(n=kr,0===eg&&u(co)),n===kr&&(t.substr($y,6)===fo?(n=fo,$y+=6):(n=kr,0===eg&&u(po))),n!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();i!==kr?(o=xe(),o!==kr?(Jy=e,r=Ka(o),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Ya)),e}function xe(){var e;return eg++,e=ke(),e===kr&&(e=Ee()),eg--,e===kr&&(kr,0===eg&&u(Za)),e}function ke(){var e,r,n,i,o,s,a,l;for(eg++,e=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if((n=ct())!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();if(i!==kr)if(123===t.charCodeAt($y)?(o=In,$y++):(o=kr,0===eg&&u(Tn)),o!==kr){for(s=[],a=ur();a!==kr;)s.push(a),a=ur();if(s!==kr){for(a=[],l=_e();l!==kr;)a.push(l),l=_e();a!==kr?(125===t.charCodeAt($y)?(l=Cn,$y++):(l=kr,0===eg&&u(Fn)),l!==kr?(Jy=e,r=tu(n,a),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(eu)),e}function Ee(){var e,r,n,i,o,s,a,l,c,f,p,h,d,v,y,g;for(eg++,e=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr){if((n=ar())===kr)if(n=$y,40===t.charCodeAt($y)?(i=sn,$y++):(i=kr,0===eg&&u(an)),i!==kr){for(o=[],s=ur();s!==kr;)o.push(s),s=ur();if(o!==kr){for(s=[],a=ct();a!==kr;)s.push(a),a=ct();if(s!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();a!==kr?(41===t.charCodeAt($y)?(l=pn,$y++):(l=kr,0===eg&&u(hn)),l!==kr?(i=[i,o,s,a,l],n=i):($y=n,n=kr)):($y=n,n=kr)}else $y=n,n=kr}else $y=n,n=kr}else $y=n,n=kr;if(n!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();if(i!==kr)if(123===t.charCodeAt($y)?(o=In,$y++):(o=kr,0===eg&&u(Tn)),o!==kr){for(s=[],a=ur();a!==kr;)s.push(a),a=ur();if(s!==kr){for(a=[],l=$y,c=[],f=ur();f!==kr;)c.push(f),f=ur();if(c!==kr)if(40===t.charCodeAt($y)?(f=sn,$y++):(f=kr,0===eg&&u(an)),f!==kr){for(p=[],h=ur();h!==kr;)p.push(h),h=ur();if(p!==kr){for(h=[],d=_e();d!==kr;)h.push(d),d=_e();if(h!==kr){for(d=[],v=ur();v!==kr;)d.push(v),v=ur();if(d!==kr)if(41===t.charCodeAt($y)?(v=pn,$y++):(v=kr,0===eg&&u(hn)),v!==kr){for(y=[],g=ur();g!==kr;)y.push(g),g=ur();y!==kr?(c=[c,f,p,h,d,v,y],l=c):($y=l,l=kr)}else $y=l,l=kr;else $y=l,l=kr}else $y=l,l=kr}else $y=l,l=kr}else $y=l,l=kr;else $y=l,l=kr;for(l===kr&&(l=ar());l!==kr;){for(a.push(l),l=$y,c=[],f=ur();f!==kr;)c.push(f),f=ur();if(c!==kr)if(40===t.charCodeAt($y)?(f=sn,$y++):(f=kr,0===eg&&u(an)),f!==kr){for(p=[],h=ur();h!==kr;)p.push(h),h=ur();if(p!==kr){for(h=[],d=_e();d!==kr;)h.push(d),d=_e();if(h!==kr){for(d=[],v=ur();v!==kr;)d.push(v),v=ur();if(d!==kr)if(41===t.charCodeAt($y)?(v=pn,$y++):(v=kr,0===eg&&u(hn)),v!==kr){for(y=[],g=ur();g!==kr;)y.push(g),g=ur();y!==kr?(c=[c,f,p,h,d,v,y],l=c):($y=l,l=kr)}else $y=l,l=kr;else $y=l,l=kr}else $y=l,l=kr}else $y=l,l=kr}else $y=l,l=kr;else $y=l,l=kr;l===kr&&(l=ar())}if(a!==kr){for(l=[],c=ur();c!==kr;)l.push(c),c=ur();l!==kr?(125===t.charCodeAt($y)?(c=Cn,$y++):(c=kr,0===eg&&u(Fn)),c!==kr?(Jy=e,r=nu(n,a),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr}else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(ru)),e}function _e(){var e,r,n,i,o;for(eg++,e=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if(n=Bt(),n===kr&&(n=Ct())===kr&&(n=Ft())===kr&&(n=Lt())===kr&&(t.substr($y,5)===so?(n=so,$y+=5):(n=kr,0===eg&&u(ao))),n!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();i!==kr?(Jy=e,r=wi(n),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(iu)),e}function Ae(){var e,t,r,n;if(eg++,e=$y,(t=Ot())!==kr){for(r=[],n=ur();n!==kr;)r.push(n),n=ur();r!==kr?(n=Se(),n!==kr?(Jy=e,t=su(t,n),e=t):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(t=kr,0===eg&&u(ou)),e}function Se(){var e,r,n,i,o,s,a,l,c,f,p,h;if(eg++,e=$y,r=ar(),r!==kr&&(Jy=e,r=uu()),(e=r)===kr)if(e=$y,40===t.charCodeAt($y)?(r=sn,$y++):(r=kr,0===eg&&u(an)),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(t.substr($y,8)===Yr?(i=Yr,$y+=8):(i=kr,0===eg&&u(Kr)),i===kr&&(t.substr($y,8)===Zr?(i=Zr,$y+=8):(i=kr,0===eg&&u(en))),i===kr&&(i=null),i!==kr){for(o=[],s=ur();s!==kr;)o.push(s),s=ur();if(o!==kr)if((s=pt())!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();if(a!==kr){if(l=[],c=$y,44===t.charCodeAt($y)?(f=lu,$y++):(f=kr,0===eg&&u(cu)),f!==kr){for(p=[],h=ur();h!==kr;)p.push(h),h=ur();p!==kr?(h=pt(),h!==kr?(f=[f,p,h],c=f):($y=c,c=kr)):($y=c,c=kr)}else $y=c,c=kr;for(;c!==kr;)if(l.push(c),c=$y,44===t.charCodeAt($y)?(f=lu,$y++):(f=kr,0===eg&&u(cu)),f!==kr){for(p=[],h=ur();h!==kr;)p.push(h),h=ur();p!==kr?(h=pt(),h!==kr?(f=[f,p,h],c=f):($y=c,c=kr)):($y=c,c=kr)}else $y=c,c=kr;l!==kr?(41===t.charCodeAt($y)?(c=pn,$y++):(c=kr,0===eg&&u(hn)),c!==kr?(Jy=e,r=fu(i,s,l),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(au)),e}function Ie(){var e,r,n,i,o,s,a,l,c,f;if(eg++,e=$y,r=ar(),r!==kr&&(Jy=e,r=uu()),(e=r)===kr)if(e=$y,40===t.charCodeAt($y)?(r=sn,$y++):(r=kr,0===eg&&u(an)),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(i=Ot(),i===kr&&(i=pt()),i!==kr){for(o=[],s=ur();s!==kr;)o.push(s),s=ur();if(o!==kr){if(s=[],a=$y,44===t.charCodeAt($y)?(l=lu,$y++):(l=kr,0===eg&&u(cu)),l!==kr){for(c=[],f=ur();f!==kr;)c.push(f),f=ur();c!==kr?(f=Ot(),f===kr&&(f=pt()),f!==kr?(l=[l,c,f],a=l):($y=a,a=kr)):($y=a,a=kr)}else $y=a,a=kr;for(;a!==kr;)if(s.push(a),a=$y,44===t.charCodeAt($y)?(l=lu,$y++):(l=kr,0===eg&&u(cu)),l!==kr){for(c=[],f=ur();f!==kr;)c.push(f),f=ur();c!==kr?(f=Ot(),f===kr&&(f=pt()),f!==kr?(l=[l,c,f],a=l):($y=a,a=kr)):($y=a,a=kr)}else $y=a,a=kr;s!==kr?(41===t.charCodeAt($y)?(a=pn,$y++):(a=kr,0===eg&&u(hn)),a!==kr?(Jy=e,r=hu(i,s),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(pu)),e}function Te(){var e,r,n,i,o,s;if(eg++,e=$y,123===t.charCodeAt($y)?(r=In,$y++):(r=kr,0===eg&&u(Tn)),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(i=Ce(),i===kr&&(i=null),i!==kr){for(o=[],s=ur();s!==kr;)o.push(s),s=ur();o!==kr?(125===t.charCodeAt($y)?(s=Cn,$y++):(s=kr,0===eg&&u(Fn)),s!==kr?(Jy=e,r=vu(i),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(du)),e}function Ce(){var e,r,n,i,o,s,a;if(eg++,e=$y,(r=Fe())!==kr){for(n=$y,i=[],o=ur();o!==kr;)i.push(o),o=ur();if(i!==kr)if(46===t.charCodeAt($y)?(o=ea,$y++):(o=kr,0===eg&&u(ta)),o!==kr){for(s=[],a=ur();a!==kr;)s.push(a),a=ur();s!==kr?(a=Ce(),a===kr&&(a=null),a!==kr?(i=[i,o,s,a],n=i):($y=n,n=kr)):($y=n,n=kr)}else $y=n,n=kr;else $y=n,n=kr;n===kr&&(n=null),n!==kr?(Jy=e,r=gu(r,n),e=r):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(yu)),e}function Fe(){var e,t,r,n,i;for(eg++,e=$y,t=[],r=ur();r!==kr;)t.push(r),r=ur();if(t!==kr)if((r=ut())!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();n!==kr?(i=je(),i!==kr?(Jy=e,t=mu(r,i),e=t):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr;if(e===kr){for(e=$y,t=[],r=ur();r!==kr;)t.push(r),r=ur();if(t!==kr)if((r=tt())!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();n!==kr?(i=Ne(),i!==kr?(Jy=e,t=wu(r,i),e=t):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}return eg--,e===kr&&(t=kr,0===eg&&u(bu)),e}function Re(){var e,r,n,i,o,s,a,l,c,f,p,h,d;if(eg++,e=$y,r=qe(),r===kr&&(r=Ge()),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if((i=Le())!==kr){for(o=[],s=$y,a=[],l=ur();l!==kr;)a.push(l),l=ur();if(a!==kr)if(59===t.charCodeAt($y)?(l=go,$y++):(l=kr,0===eg&&u(bo)),l!==kr){for(c=[],f=ur();f!==kr;)c.push(f),f=ur();if(c!==kr){if(f=$y,p=qe(),p===kr&&(p=Ge()),p!==kr){for(h=[],d=ur();d!==kr;)h.push(d),d=ur();h!==kr?(d=Pe(),d!==kr?(p=[p,h,d],f=p):($y=f,f=kr)):($y=f,f=kr)}else $y=f,f=kr;f===kr&&(f=null),f!==kr?(a=[a,l,c,f],s=a):($y=s,s=kr)}else $y=s,s=kr}else $y=s,s=kr;else $y=s,s=kr;for(;s!==kr;){for(o.push(s),s=$y,a=[],l=ur();l!==kr;)a.push(l),l=ur();if(a!==kr)if(59===t.charCodeAt($y)?(l=go,$y++):(l=kr,0===eg&&u(bo)),l!==kr){for(c=[],f=ur();f!==kr;)c.push(f),f=ur();if(c!==kr){if(f=$y,p=qe(),p===kr&&(p=Ge()),p!==kr){for(h=[],d=ur();d!==kr;)h.push(d),d=ur();h!==kr?(d=Pe(),d!==kr?(p=[p,h,d],f=p):($y=f,f=kr)):($y=f,f=kr)}else $y=f,f=kr;f===kr&&(f=null),f!==kr?(a=[a,l,c,f],s=a):($y=s,s=kr)}else $y=s,s=kr}else $y=s,s=kr;else $y=s,s=kr}o!==kr?(Jy=e,r=ku(r,i,o),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(xu)),e}function je(){var e,r,n,i,o,s,a,l,c,f,p,h,d;if(eg++,e=$y,(r=De())!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if((i=Pe())!==kr){for(o=[],s=$y,a=[],l=ur();l!==kr;)a.push(l),l=ur();if(a!==kr)if(59===t.charCodeAt($y)?(l=go,$y++):(l=kr,0===eg&&u(bo)),l!==kr){for(c=[],f=ur();f!==kr;)c.push(f),f=ur();if(c!==kr){if(f=$y,(p=De())!==kr){for(h=[],d=ur();d!==kr;)h.push(d),d=ur();h!==kr?(d=Pe(),d!==kr?(p=[p,h,d],f=p):($y=f,f=kr)):($y=f,f=kr)}else $y=f,f=kr;f===kr&&(f=null),f!==kr?(a=[a,l,c,f],s=a):($y=s,s=kr)}else $y=s,s=kr}else $y=s,s=kr;else $y=s,s=kr;for(;s!==kr;){for(o.push(s),s=$y,a=[],l=ur();l!==kr;)a.push(l),l=ur();if(a!==kr)if(59===t.charCodeAt($y)?(l=go,$y++):(l=kr,0===eg&&u(bo)),l!==kr){for(c=[],f=ur();f!==kr;)c.push(f),f=ur();if(c!==kr){if(f=$y,(p=De())!==kr){for(h=[],d=ur();d!==kr;)h.push(d),d=ur();h!==kr?(d=Pe(),d!==kr?(p=[p,h,d],f=p):($y=f,f=kr)):($y=f,f=kr)}else $y=f,f=kr;f===kr&&(f=null),f!==kr?(a=[a,l,c,f],s=a):($y=s,s=kr)}else $y=s,s=kr}else $y=s,s=kr;else $y=s,s=kr}o!==kr?(Jy=e,r=_u(r,i,o),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Eu)),e}function Ne(){var e;return eg++,e=je(),e===kr&&(e=null),eg--,e===kr&&(kr,0===eg&&u(Au)),e}function Le(){var e,r,n,i,o,s,a,l;if(eg++,e=$y,(r=Oe())!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr){if(i=[],o=$y,44===t.charCodeAt($y)?(s=lu,$y++):(s=kr,0===eg&&u(cu)),s!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();a!==kr?(l=Oe(),l!==kr?(s=[s,a,l],o=s):($y=o,o=kr)):($y=o,o=kr)}else $y=o,o=kr;for(;o!==kr;)if(i.push(o),o=$y,44===t.charCodeAt($y)?(s=lu,$y++):(s=kr,0===eg&&u(cu)),s!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();a!==kr?(l=Oe(),l!==kr?(s=[s,a,l],o=s):($y=o,o=kr)):($y=o,o=kr)}else $y=o,o=kr;i!==kr?(Jy=e,r=Iu(r,i),e=r):($y=e,e=kr)}else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Su)),e}function Pe(){var e,r,n,i,o,s,a,l;if(eg++,e=$y,(r=Qe())!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr){if(i=[],o=$y,44===t.charCodeAt($y)?(s=lu,$y++):(s=kr,0===eg&&u(cu)),s!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();a!==kr?(l=Qe(),l!==kr?(s=[s,a,l],o=s):($y=o,o=kr)):($y=o,o=kr)}else $y=o,o=kr;for(;o!==kr;)if(i.push(o),o=$y,44===t.charCodeAt($y)?(s=lu,$y++):(s=kr,0===eg&&u(cu)),s!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();a!==kr?(l=Qe(),l!==kr?(s=[s,a,l],o=s):($y=o,o=kr)):($y=o,o=kr)}else $y=o,o=kr;i!==kr?(Jy=e,r=Cu(r,i),e=r):($y=e,e=kr)}else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Tu)),e}function Oe(){var e;return eg++,e=st(),eg--,e===kr&&(kr,0===eg&&u(Fu)),e}function Qe(){var e;return eg++,e=at(),eg--,e===kr&&(kr,0===eg&&u(Ru)),e}function De(){var e,r;return eg++,e=lt(),e===kr&&(e=$y,97===t.charCodeAt($y)?(r=Nu,$y++):(r=kr,0===eg&&u(Lu)),r!==kr&&(Jy=e,r=Pu()),e=r),eg--,e===kr&&(r=kr,0===eg&&u(ju)),e}function Be(){var e,t,r,n,i;for(eg++,e=$y,t=[],r=ur();r!==kr;)t.push(r),r=ur();if(t!==kr)if((r=ut())!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();n!==kr?(i=Me(),i!==kr?(Jy=e,t=Qu(r,i),e=t):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr;if(e===kr){for(e=$y,t=[],r=ur();r!==kr;)t.push(r),r=ur();if(t!==kr)if((r=et())!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();n!==kr?(i=Ue(),i!==kr?(Jy=e,t=Du(r,i),e=t):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}return eg--,e===kr&&(t=kr,0===eg&&u(Ou)),e}function Me(){var e,r,n,i,o,s,a,l,c,f,p,h;if(eg++,e=$y,r=qe(),r===kr&&(r=Ge()),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if((i=Le())!==kr){for(o=[],s=$y,a=[],l=ur();l!==kr;)a.push(l),l=ur();if(a!==kr)if(59===t.charCodeAt($y)?(l=go,$y++):(l=kr,0===eg&&u(bo)),l!==kr){for(c=[],f=ur();f!==kr;)c.push(f),f=ur();c!==kr?(f=$y,p=qe(),p===kr&&(p=Ge()),p!==kr?(h=Pe(),h!==kr?(p=[p,h],f=p):($y=f,f=kr)):($y=f,f=kr),f===kr&&(f=null),f!==kr?(a=[a,l,c,f],s=a):($y=s,s=kr)):($y=s,s=kr)}else $y=s,s=kr;else $y=s,s=kr;for(;s!==kr;){for(o.push(s),s=$y,a=[],l=ur();l!==kr;)a.push(l),l=ur();if(a!==kr)if(59===t.charCodeAt($y)?(l=go,$y++):(l=kr,0===eg&&u(bo)),l!==kr){for(c=[],f=ur();f!==kr;)c.push(f),f=ur();c!==kr?(f=$y,p=qe(),p===kr&&(p=Ge()),p!==kr?(h=Pe(),h!==kr?(p=[p,h],f=p):($y=f,f=kr)):($y=f,f=kr),f===kr&&(f=null),f!==kr?(a=[a,l,c,f],s=a):($y=s,s=kr)):($y=s,s=kr)}else $y=s,s=kr;else $y=s,s=kr}o!==kr?(Jy=e,r=Mu(r,i,o),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Bu)),e}function Ue(){var e;return eg++,e=Re(),e===kr&&(e=null),eg--,e===kr&&(kr,0===eg&&u(Uu)),e}function qe(){var e,t;return eg++,e=$y,t=He(),t!==kr&&(Jy=e,t=Gu(t)),e=t,eg--,e===kr&&(t=kr,0===eg&&u(qu)),e}function Ge(){var e;return eg++,e=ct(),eg--,e===kr&&(kr,0===eg&&u(Hu)),e}function He(){var e;return eg++,e=Xe(),eg--,e===kr&&(kr,0===eg&&u(Xu)),e}function Xe(){var e,r,n,i,o,s;if(eg++,e=$y,(r=ze())!==kr){for(n=[],i=$y,124===t.charCodeAt($y)?(o=Vu,$y++):(o=kr,0===eg&&u(Wu)),o!==kr?(s=ze(),s!==kr?(o=[o,s],i=o):($y=i,i=kr)):($y=i,i=kr);i!==kr;)n.push(i),i=$y,124===t.charCodeAt($y)?(o=Vu,$y++):(o=kr,0===eg&&u(Wu)),o!==kr?(s=ze(),s!==kr?(o=[o,s],i=o):($y=i,i=kr)):($y=i,i=kr);n!==kr?(Jy=e,r=$u(r,n),e=r):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(zu)),e}function ze(){var e,r,n,i,o,s;if(eg++,e=$y,(r=We())!==kr){for(n=[],i=$y,47===t.charCodeAt($y)?(o=Yu,$y++):(o=kr,0===eg&&u(Ku)),o!==kr?(s=We(),s!==kr?(o=[o,s],i=o):($y=i,i=kr)):($y=i,i=kr);i!==kr;)n.push(i),i=$y,47===t.charCodeAt($y)?(o=Yu,$y++):(o=kr,0===eg&&u(Ku)),o!==kr?(s=We(),s!==kr?(o=[o,s],i=o):($y=i,i=kr)):($y=i,i=kr);n!==kr?(Jy=e,r=Zu(r,n),e=r):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Ju)),e}function Ve(){var e,t,r;return eg++,e=$y,t=Je(),t!==kr?(r=$e(),r===kr&&(r=null),r!==kr?(Jy=e,t=tl(t,r),e=t):($y=e,e=kr)):($y=e,e=kr),eg--,e===kr&&(t=kr,0===eg&&u(el)),e}function We(){var e,r,n;return eg++,e=Ve(),e===kr&&(e=$y,94===t.charCodeAt($y)?(r=nl,$y++):(r=kr,0===eg&&u(il)),r!==kr?(n=Ve(),n!==kr?(Jy=e,r=ol(n),e=r):($y=e,e=kr)):($y=e,e=kr)),eg--,e===kr&&(r=kr,0===eg&&u(rl)),e}function $e(){var e,r,n,i,o,s,a,l,c;return eg++,42===t.charCodeAt($y)?(e=dn,$y++):(e=kr,0===eg&&u(vn)),e===kr&&(63===t.charCodeAt($y)?(e=al,$y++):(e=kr,0===eg&&u(ul)),e===kr&&(43===t.charCodeAt($y)?(e=ll,$y++):(e=kr,0===eg&&u(cl)),e===kr&&(e=$y,123===t.charCodeAt($y)?(r=In,$y++):(r=kr,0===eg&&u(Tn)),r!==kr?(n=$y,i=Ze(),i!==kr?(o=$y,44===t.charCodeAt($y)?(s=lu,$y++):(s=kr,0===eg&&u(cu)),s!==kr?(125===t.charCodeAt($y)?(a=Cn,$y++):(a=kr,0===eg&&u(Fn)),a===kr&&(a=$y,l=Ze(),l!==kr?(125===t.charCodeAt($y)?(c=Cn,$y++):(c=kr,0===eg&&u(Fn)),c!==kr?(l=[l,c],a=l):($y=a,a=kr)):($y=a,a=kr)),a!==kr?(s=[s,a],o=s):($y=o,o=kr)):($y=o,o=kr),o===kr&&(125===t.charCodeAt($y)?(o=Cn,$y++):(o=kr,0===eg&&u(Fn))),o!==kr?(i=[i,o],n=i):($y=n,n=kr)):($y=n,n=kr),n===kr&&(n=$y,44===t.charCodeAt($y)?(i=lu,$y++):(i=kr,0===eg&&u(cu)),i!==kr?(o=Ze(),o!==kr?(125===t.charCodeAt($y)?(s=Cn,$y++):(s=kr,0===eg&&u(Fn)),s!==kr?(i=[i,o,s],n=i):($y=n,n=kr)):($y=n,n=kr)):($y=n,n=kr)),n!==kr?(r=[r,n],e=r):($y=e,e=kr)):($y=e,e=kr)))),eg--,e===kr&&(r=kr,0===eg&&u(sl)),e}function Je(){var e,r,n,i;return eg++,e=Ot(),e===kr&&(e=$y,97===t.charCodeAt($y)?(r=Nu,$y++):(r=kr,0===eg&&u(Lu)),r!==kr&&(Jy=e,r=Pu()),(e=r)===kr&&(e=$y,33===t.charCodeAt($y)?(r=pl,$y++):(r=kr,0===eg&&u(hl)),r!==kr?(n=Ye(),n!==kr?(r=[r,n],e=r):($y=e,e=kr)):($y=e,e=kr),e===kr&&(e=$y,40===t.charCodeAt($y)?(r=sn,$y++):(r=kr,0===eg&&u(an)),r!==kr?(n=He(),n!==kr?(41===t.charCodeAt($y)?(i=pn,$y++):(i=kr,0===eg&&u(hn)),i!==kr?(Jy=e,r=ua(n),e=r):($y=e,e=kr)):($y=e,e=kr)):($y=e,e=kr)))),eg--,e===kr&&(r=kr,0===eg&&u(fl)),e}function Ye(){var e,r,n,i,o,s,a,l;if((e=Ke())===kr)if(e=$y,40===t.charCodeAt($y)?(r=sn,$y++):(r=kr,0===eg&&u(an)),r!==kr){if(n=$y,(i=Ke())!==kr){for(o=[],s=$y,124===t.charCodeAt($y)?(a=Vu,$y++):(a=kr,0===eg&&u(Wu)),a!==kr?(l=Ke(),l!==kr?(a=[a,l],s=a):($y=s,s=kr)):($y=s,s=kr);s!==kr;)o.push(s),s=$y,124===t.charCodeAt($y)?(a=Vu,$y++):(a=kr,0===eg&&u(Wu)),a!==kr?(l=Ke(),l!==kr?(a=[a,l],s=a):($y=s,s=kr)):($y=s,s=kr);o!==kr?(i=[i,o],n=i):($y=n,n=kr)}else $y=n,n=kr;n===kr&&(n=null),n!==kr?(41===t.charCodeAt($y)?(i=pn,$y++):(i=kr,0===eg&&u(hn)),i!==kr?(r=[r,n,i],e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;return e}function Ke(){var e,r,n;return eg++,e=Ot(),e===kr&&(97===t.charCodeAt($y)?(e=Nu,$y++):(e=kr,0===eg&&u(Lu)),e===kr&&(e=$y,94===t.charCodeAt($y)?(r=nl,$y++):(r=kr,0===eg&&u(il)),r!==kr?(n=Ot(),n===kr&&(97===t.charCodeAt($y)?(n=Nu,$y++):(n=kr,0===eg&&u(Lu))),n!==kr?(r=[r,n],e=r):($y=e,e=kr)):($y=e,e=kr))),eg--,e===kr&&(r=kr,0===eg&&u(dl)),e}function Ze(){var e;return eg++,e=zt(),eg--,e===kr&&(kr,0===eg&&u(vl)),e}function et(){var e,t;return eg++,e=$y,t=it(),t!==kr&&(Jy=e,t=gl(t)),e=t,e===kr&&(e=rt()),eg--,e===kr&&(t=kr,0===eg&&u(yl)),e}function tt(){var e,t;return eg++,e=$y,t=ot(),t!==kr&&(Jy=e,t=ml(t)),e=t,e===kr&&(e=nt()),eg--,e===kr&&(t=kr,0===eg&&u(bl)),e}function rt(){var e,r,n,i,o,s,a,l;for(eg++,e=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if(91===t.charCodeAt($y)?(n=xl,$y++):(n=kr,0===eg&&u(kl)),n!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();if(i!==kr)if((o=Me())!==kr)if(93===t.charCodeAt($y)?(s=El,$y++):(s=kr,0===eg&&u(_l)),s!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();a!==kr?(Jy=e,r=Al(o),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(wl)),e}function nt(){var e,r,n,i,o,s,a,l,c;for(eg++,e=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if(91===t.charCodeAt($y)?(n=xl,$y++):(n=kr,0===eg&&u(kl)),n!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();if(i!==kr)if((o=je())!==kr){for(s=[],a=ur();a!==kr;)s.push(a),a=ur();if(s!==kr)if(93===t.charCodeAt($y)?(a=El,$y++):(a=kr,0===eg&&u(_l)),a!==kr){for(l=[],c=ur();c!==kr;)l.push(c),c=ur();l!==kr?(Jy=e,r=Il(o),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Sl)),e}function it(){var e,r,n,i,o,s,a,l,c;for(eg++,e=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if(40===t.charCodeAt($y)?(n=sn,$y++):(n=kr,0===eg&&u(an)),n!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();if(i!==kr){if(o=[],(s=st())!==kr)for(;s!==kr;)o.push(s),s=st();else o=kr;if(o!==kr){for(s=[],a=ur();a!==kr;)s.push(a),a=ur();if(s!==kr)if(41===t.charCodeAt($y)?(a=pn,$y++):(a=kr,0===eg&&u(hn)),a!==kr){for(l=[],c=ur();c!==kr;)l.push(c),c=ur();l!==kr?(Jy=e,r=Cl(o),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr}else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Tl)),e}function ot(){var e,r,n,i,o,s,a,l,c;for(eg++,e=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if(40===t.charCodeAt($y)?(n=sn,$y++):(n=kr,0===eg&&u(an)),n!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();if(i!==kr){if(o=[],(s=at())!==kr)for(;s!==kr;)o.push(s),s=at();else o=kr;if(o!==kr){for(s=[],a=ur();a!==kr;)s.push(a),a=ur();if(s!==kr)if(41===t.charCodeAt($y)?(a=pn,$y++):(a=kr,0===eg&&u(hn)),a!==kr){for(l=[],c=ur();c!==kr;)l.push(c),c=ur();l!==kr?(Jy=e,r=Cl(o),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr}else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Fl)),e}function st(){var e,t,r,n,i,o;for(eg++,e=$y,t=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if((n=ut())!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();i!==kr?(r=[r,n,i],t=r):($y=t,t=kr)}else $y=t,t=kr;else $y=t,t=kr;if(t===kr){for(t=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if((n=et())!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();i!==kr?(r=[r,n,i],t=r):($y=t,t=kr)}else $y=t,t=kr;else $y=t,t=kr}return t!==kr&&(Jy=e,t=jl(t)),e=t,eg--,e===kr&&(t=kr,0===eg&&u(Rl)),e}function at(){var e,t,r,n,i,o;for(eg++,e=$y,t=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if((n=ut())!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();i!==kr?(r=[r,n,i],t=r):($y=t,t=kr)}else $y=t,t=kr;else $y=t,t=kr;if(t===kr){for(t=$y,r=[],n=ur();n!==kr;)r.push(n),n=ur();if(r!==kr)if((n=tt())!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();i!==kr?(r=[r,n,i],t=r):($y=t,t=kr)}else $y=t,t=kr;else $y=t,t=kr}return t!==kr&&(Jy=e,t=jl(t)),e=t,eg--,e===kr&&(t=kr,0===eg&&u(Nl)),e}function ut(){var e;return eg++,e=ct(),e===kr&&(e=ft()),eg--,e===kr&&(kr,0===eg&&u(Ll)),e}function lt(){var e;return eg++,e=ct(),e===kr&&(e=Ot()),eg--,e===kr&&(kr,0===eg&&u(Pl)),e}function ct(){var e,t,r,n,i;for(eg++,e=$y,t=[],r=ur();r!==kr;)t.push(r),r=ur();if(t!==kr)if(r=Gt(),r===kr&&(r=Ht()),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();n!==kr?(Jy=e,t=Ql(r),e=t):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr;return eg--,e===kr&&(t=kr,0===eg&&u(Ol)),e}function ft(){var e;return eg++,e=Ot(),e===kr&&(e=Ct())===kr&&(e=Ft())===kr&&(e=Lt())===kr&&(e=Dt())===kr&&(e=ar()),eg--,e===kr&&(kr,0===eg&&u(Dl)),e}function pt(){var e;return eg++,e=ht(),eg--,e===kr&&(kr,0===eg&&u(Bl)),e}function ht(){var e,r,n,i,o,s,a,l;if(eg++,e=$y,(r=dt())!==kr){for(n=[],i=$y,o=[],s=ur();s!==kr;)o.push(s),s=ur();if(o!==kr)if(t.substr($y,2)===Ul?(s=Ul,$y+=2):(s=kr,0===eg&&u(ql)),s!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();a!==kr?(l=dt(),l!==kr?(o=[o,s,a,l],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr;for(;i!==kr;){for(n.push(i),i=$y,o=[],s=ur();s!==kr;)o.push(s),s=ur();if(o!==kr)if(t.substr($y,2)===Ul?(s=Ul,$y+=2):(s=kr,0===eg&&u(ql)),s!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();a!==kr?(l=dt(),l!==kr?(o=[o,s,a,l],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr}n!==kr?(Jy=e,r=Gl(r,n),e=r):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Ml)),e}function dt(){var e,r,n,i,o,s,a,l;if(eg++,e=$y,(r=vt())!==kr){for(n=[],i=$y,o=[],s=ur();s!==kr;)o.push(s),s=ur();if(o!==kr)if(t.substr($y,2)===Xl?(s=Xl,$y+=2):(s=kr,0===eg&&u(zl)),s!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();a!==kr?(l=vt(),l!==kr?(o=[o,s,a,l],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr;for(;i!==kr;){for(n.push(i),i=$y,o=[],s=ur();s!==kr;)o.push(s),s=ur();if(o!==kr)if(t.substr($y,2)===Xl?(s=Xl,$y+=2):(s=kr,0===eg&&u(zl)),s!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();a!==kr?(l=vt(),l!==kr?(o=[o,s,a,l],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr}n!==kr?(Jy=e,r=Vl(r,n),e=r):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Hl)),e}function vt(){var e;return eg++,e=yt(),eg--,e===kr&&(kr,0===eg&&u(Wl)),e}function yt(){var e,r,n,i,o,s,a,l,c,f,p,h,d;if(eg++,e=$y,(r=gt())!==kr){for(n=[],i=$y,o=[],s=ur();s!==kr;)o.push(s),s=ur();if(o!==kr)if(61===t.charCodeAt($y)?(s=Jl,$y++):(s=kr,0===eg&&u(Yl)),s!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();a!==kr?(l=gt(),l!==kr?(o=[o,s,a,l],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr;if(i===kr){for(i=$y,o=[],s=ur();s!==kr;)o.push(s),s=ur();if(o!==kr)if(t.substr($y,2)===Kl?(s=Kl,$y+=2):(s=kr,0===eg&&u(Zl)),s!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();a!==kr?(l=gt(),l!==kr?(o=[o,s,a,l],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr;if(i===kr){for(i=$y,o=[],s=ur();s!==kr;)o.push(s),s=ur();if(o!==kr)if(60===t.charCodeAt($y)?(s=ec,$y++):(s=kr,0===eg&&u(tc)),s!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();a!==kr?(l=gt(),l!==kr?(o=[o,s,a,l],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr;if(i===kr){for(i=$y,o=[],s=ur();s!==kr;)o.push(s),s=ur();if(o!==kr)if(62===t.charCodeAt($y)?(s=rc,$y++):(s=kr,0===eg&&u(nc)),s!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();a!==kr?(l=gt(),l!==kr?(o=[o,s,a,l],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr;if(i===kr){for(i=$y,o=[],s=ur();s!==kr;)o.push(s),s=ur();if(o!==kr)if(t.substr($y,2)===ic?(s=ic,$y+=2):(s=kr,0===eg&&u(oc)),s!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();a!==kr?(l=gt(),l!==kr?(o=[o,s,a,l],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr;if(i===kr){for(i=$y,o=[],s=ur();s!==kr;)o.push(s),s=ur();if(o!==kr)if(t.substr($y,2)===sc?(s=sc,$y+=2):(s=kr,0===eg&&u(ac)),s!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();a!==kr?(l=gt(),l!==kr?(o=[o,s,a,l],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr;if(i===kr){for(i=$y,o=[],s=ur();s!==kr;)o.push(s),s=ur();if(o!==kr)if(73===t.charCodeAt($y)?(s=uc,$y++):(s=kr,0===eg&&u(lc)),s===kr&&(105===t.charCodeAt($y)?(s=cc,$y++):(s=kr,0===eg&&u(fc))),s!==kr)if(78===t.charCodeAt($y)?(a=pc,$y++):(a=kr,0===eg&&u(hc)),a===kr&&(110===t.charCodeAt($y)?(a=dc,$y++):(a=kr,0===eg&&u(vc))),a!==kr){for(l=[],c=ur();c!==kr;)l.push(c),c=ur();l!==kr?(c=Ie(),c!==kr?(o=[o,s,a,l,c],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr;else $y=i,i=kr;if(i===kr){for(i=$y,o=[],s=ur();s!==kr;)o.push(s),s=ur();if(o!==kr)if(78===t.charCodeAt($y)?(s=pc,$y++):(s=kr,0===eg&&u(hc)),s===kr&&(110===t.charCodeAt($y)?(s=dc,$y++):(s=kr,0===eg&&u(vc))),s!==kr)if(79===t.charCodeAt($y)?(a=yc,$y++):(a=kr,0===eg&&u(gc)),a===kr&&(111===t.charCodeAt($y)?(a=bc,$y++):(a=kr,0===eg&&u(mc))),a!==kr)if(84===t.charCodeAt($y)?(l=wc,$y++):(l=kr,0===eg&&u(xc)),l===kr&&(116===t.charCodeAt($y)?(l=kc,$y++):(l=kr,0===eg&&u(Ec))),l!==kr){for(c=[],f=ur();f!==kr;)c.push(f),f=ur();if(c!==kr)if(73===t.charCodeAt($y)?(f=uc,$y++):(f=kr,0===eg&&u(lc)),f===kr&&(105===t.charCodeAt($y)?(f=cc,$y++):(f=kr,0===eg&&u(fc))),f!==kr)if(78===t.charCodeAt($y)?(p=pc,$y++):(p=kr,0===eg&&u(hc)),p===kr&&(110===t.charCodeAt($y)?(p=dc,$y++):(p=kr,0===eg&&u(vc))),p!==kr){for(h=[],d=ur();d!==kr;)h.push(d),d=ur();h!==kr?(d=Ie(),d!==kr?(o=[o,s,a,l,c,f,p,h,d],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr;else $y=i,i=kr}else $y=i,i=kr;else $y=i,i=kr;else $y=i,i=kr;else $y=i,i=kr}}}}}}}for(;i!==kr;){for(n.push(i),i=$y,o=[],s=ur();s!==kr;)o.push(s),s=ur();if(o!==kr)if(61===t.charCodeAt($y)?(s=Jl,$y++):(s=kr,0===eg&&u(Yl)),s!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();a!==kr?(l=gt(),l!==kr?(o=[o,s,a,l],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr;if(i===kr){for(i=$y,o=[],s=ur();s!==kr;)o.push(s),s=ur();if(o!==kr)if(t.substr($y,2)===Kl?(s=Kl,$y+=2):(s=kr,0===eg&&u(Zl)),s!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();a!==kr?(l=gt(),l!==kr?(o=[o,s,a,l],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr;if(i===kr){for(i=$y,o=[],s=ur();s!==kr;)o.push(s),s=ur();if(o!==kr)if(60===t.charCodeAt($y)?(s=ec,$y++):(s=kr,0===eg&&u(tc)),s!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();a!==kr?(l=gt(),l!==kr?(o=[o,s,a,l],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr;if(i===kr){for(i=$y,o=[],s=ur();s!==kr;)o.push(s),s=ur();if(o!==kr)if(62===t.charCodeAt($y)?(s=rc,$y++):(s=kr,0===eg&&u(nc)),s!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();a!==kr?(l=gt(),l!==kr?(o=[o,s,a,l],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr;if(i===kr){for(i=$y,o=[],s=ur();s!==kr;)o.push(s),s=ur();if(o!==kr)if(t.substr($y,2)===ic?(s=ic,$y+=2):(s=kr,0===eg&&u(oc)),s!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();a!==kr?(l=gt(),l!==kr?(o=[o,s,a,l],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr;if(i===kr){for(i=$y,o=[],s=ur();s!==kr;)o.push(s),s=ur();if(o!==kr)if(t.substr($y,2)===sc?(s=sc,$y+=2):(s=kr,0===eg&&u(ac)),s!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();a!==kr?(l=gt(),l!==kr?(o=[o,s,a,l],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr;if(i===kr){for(i=$y,o=[],s=ur();s!==kr;)o.push(s),s=ur();if(o!==kr)if(73===t.charCodeAt($y)?(s=uc,$y++):(s=kr,0===eg&&u(lc)),s===kr&&(105===t.charCodeAt($y)?(s=cc,$y++):(s=kr,0===eg&&u(fc))),s!==kr)if(78===t.charCodeAt($y)?(a=pc,$y++):(a=kr,0===eg&&u(hc)),a===kr&&(110===t.charCodeAt($y)?(a=dc,$y++):(a=kr,0===eg&&u(vc))),a!==kr){for(l=[],c=ur();c!==kr;)l.push(c),c=ur();l!==kr?(c=Ie(),c!==kr?(o=[o,s,a,l,c],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr;else $y=i,i=kr;if(i===kr){for(i=$y,o=[],s=ur();s!==kr;)o.push(s),s=ur();if(o!==kr)if(78===t.charCodeAt($y)?(s=pc,$y++):(s=kr,0===eg&&u(hc)),s===kr&&(110===t.charCodeAt($y)?(s=dc,$y++):(s=kr,0===eg&&u(vc))),s!==kr)if(79===t.charCodeAt($y)?(a=yc,$y++):(a=kr,0===eg&&u(gc)),a===kr&&(111===t.charCodeAt($y)?(a=bc,$y++):(a=kr,0===eg&&u(mc))),a!==kr)if(84===t.charCodeAt($y)?(l=wc,$y++):(l=kr,0===eg&&u(xc)),l===kr&&(116===t.charCodeAt($y)?(l=kc,$y++):(l=kr,0===eg&&u(Ec))),l!==kr){for(c=[],f=ur();f!==kr;)c.push(f),f=ur();if(c!==kr)if(73===t.charCodeAt($y)?(f=uc,$y++):(f=kr,0===eg&&u(lc)),f===kr&&(105===t.charCodeAt($y)?(f=cc,$y++):(f=kr,0===eg&&u(fc))),f!==kr)if(78===t.charCodeAt($y)?(p=pc,$y++):(p=kr,0===eg&&u(hc)),p===kr&&(110===t.charCodeAt($y)?(p=dc,$y++):(p=kr,0===eg&&u(vc))),p!==kr){for(h=[],d=ur();d!==kr;)h.push(d),d=ur();h!==kr?(d=Ie(),d!==kr?(o=[o,s,a,l,c,f,p,h,d],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr;else $y=i,i=kr}else $y=i,i=kr;else $y=i,i=kr;else $y=i,i=kr;else $y=i,i=kr}}}}}}}}n!==kr?(Jy=e,r=_c(r,n),e=r):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u($l)),e}function gt(){var e;return eg++,e=bt(),eg--,e===kr&&(kr,0===eg&&u(Ac)),e}function bt(){var e,r,n,i,o,s,a,l,c,f;if(eg++,e=$y,(r=mt())!==kr){for(n=[],i=$y,o=[],s=ur();s!==kr;)o.push(s),s=ur();if(o!==kr)if(43===t.charCodeAt($y)?(s=ll,$y++):(s=kr,0===eg&&u(cl)),s!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();a!==kr?(l=mt(),l!==kr?(o=[o,s,a,l],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr;if(i===kr){for(i=$y,o=[],s=ur();s!==kr;)o.push(s),s=ur();if(o!==kr)if(45===t.charCodeAt($y)?(s=Ic,$y++):(s=kr,0===eg&&u(Tc)),s!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();a!==kr?(l=mt(),l!==kr?(o=[o,s,a,l],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr;if(i===kr)if(i=$y,o=Nt(),o===kr&&(o=Nt()),o!==kr){for(s=$y,a=[],l=ur();l!==kr;)a.push(l),l=ur();if(a!==kr)if(42===t.charCodeAt($y)?(l=dn,$y++):(l=kr,0===eg&&u(vn)),l!==kr){for(c=[],f=ur();f!==kr;)c.push(f),f=ur();c!==kr?(f=wt(),f!==kr?(a=[a,l,c,f],s=a):($y=s,s=kr)):($y=s,s=kr)}else $y=s,s=kr;else $y=s,s=kr;if(s===kr){for(s=$y,a=[],l=ur();l!==kr;)a.push(l),l=ur();if(a!==kr)if(47===t.charCodeAt($y)?(l=Yu,$y++):(l=kr,0===eg&&u(Ku)),l!==kr){for(c=[],f=ur();f!==kr;)c.push(f),f=ur();c!==kr?(f=wt(),f!==kr?(a=[a,l,c,f],s=a):($y=s,s=kr)):($y=s,s=kr)}else $y=s,s=kr;else $y=s,s=kr}s===kr&&(s=null),s!==kr?(o=[o,s],i=o):($y=i,i=kr)}else $y=i,i=kr}for(;i!==kr;){for(n.push(i),i=$y,o=[],s=ur();s!==kr;)o.push(s),s=ur();if(o!==kr)if(43===t.charCodeAt($y)?(s=ll,$y++):(s=kr,0===eg&&u(cl)),s!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();a!==kr?(l=mt(),l!==kr?(o=[o,s,a,l],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr;if(i===kr){for(i=$y,o=[],s=ur();s!==kr;)o.push(s),s=ur();if(o!==kr)if(45===t.charCodeAt($y)?(s=Ic,$y++):(s=kr,0===eg&&u(Tc)),s!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();a!==kr?(l=mt(),l!==kr?(o=[o,s,a,l],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr;if(i===kr)if(i=$y,o=Nt(),o===kr&&(o=Nt()),o!==kr){for(s=$y,a=[],l=ur();l!==kr;)a.push(l),l=ur();if(a!==kr)if(42===t.charCodeAt($y)?(l=dn,$y++):(l=kr,0===eg&&u(vn)),l!==kr){for(c=[],f=ur();f!==kr;)c.push(f),f=ur();c!==kr?(f=wt(),f!==kr?(a=[a,l,c,f],s=a):($y=s,s=kr)):($y=s,s=kr)}else $y=s,s=kr;else $y=s,s=kr;if(s===kr){for(s=$y,a=[],l=ur();l!==kr;)a.push(l),l=ur();if(a!==kr)if(47===t.charCodeAt($y)?(l=Yu,$y++):(l=kr,0===eg&&u(Ku)),l!==kr){for(c=[],f=ur();f!==kr;)c.push(f),f=ur();c!==kr?(f=wt(),f!==kr?(a=[a,l,c,f],s=a):($y=s,s=kr)):($y=s,s=kr)}else $y=s,s=kr;else $y=s,s=kr}s===kr&&(s=null),s!==kr?(o=[o,s],i=o):($y=i,i=kr)}else $y=i,i=kr}}n!==kr?(Jy=e,r=Cc(r,n),e=r):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Sc)),e}function mt(){var e,r,n,i,o,s,a,l;if(eg++,e=$y,(r=wt())!==kr){for(n=[],i=$y,o=[],s=ur();s!==kr;)o.push(s),s=ur();if(o!==kr)if(42===t.charCodeAt($y)?(s=dn,$y++):(s=kr,0===eg&&u(vn)),s!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();a!==kr?(l=wt(),l!==kr?(o=[o,s,a,l],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr;if(i===kr){for(i=$y,o=[],s=ur();s!==kr;)o.push(s),s=ur();if(o!==kr)if(47===t.charCodeAt($y)?(s=Yu,$y++):(s=kr,0===eg&&u(Ku)),s!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();a!==kr?(l=wt(),l!==kr?(o=[o,s,a,l],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr}for(;i!==kr;){for(n.push(i),i=$y,o=[],s=ur();s!==kr;)o.push(s),s=ur();if(o!==kr)if(42===t.charCodeAt($y)?(s=dn,$y++):(s=kr,0===eg&&u(vn)),s!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();a!==kr?(l=wt(),l!==kr?(o=[o,s,a,l],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr;if(i===kr){for(i=$y,o=[],s=ur();s!==kr;)o.push(s),s=ur();if(o!==kr)if(47===t.charCodeAt($y)?(s=Yu,$y++):(s=kr,0===eg&&u(Ku)),s!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();a!==kr?(l=wt(),l!==kr?(o=[o,s,a,l],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr}}n!==kr?(Jy=e,r=Rc(r,n),e=r):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Fc)),e}function wt(){var e,r,n,i;if(eg++,e=$y,33===t.charCodeAt($y)?(r=pl,$y++):(r=kr,0===eg&&u(hl)),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();n!==kr?(i=xt(),i!==kr?(Jy=e,r=Nc(i),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;if(e===kr){if(e=$y,43===t.charCodeAt($y)?(r=ll,$y++):(r=kr,0===eg&&u(cl)),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();n!==kr?(i=xt(),i!==kr?(Jy=e,r=Lc(i),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;if(e===kr){if(e=$y,45===t.charCodeAt($y)?(r=Ic,$y++):(r=kr,0===eg&&u(Tc)),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();n!==kr?(i=xt(),i!==kr?(Jy=e,r=Pc(i),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;e===kr&&(e=xt())}}return eg--,e===kr&&(r=kr,0===eg&&u(jc)),e}function xt(){var e,t;return eg++,e=kt(),e===kr&&(e=Et())===kr&&(e=Tt())===kr&&(e=$y,t=Ct(),t!==kr&&(Jy=e,t=Qc(t)),(e=t)===kr&&(e=$y,t=Ft(),t!==kr&&(Jy=e,t=Dc(t)),(e=t)===kr&&(e=$y,t=Lt(),t!==kr&&(Jy=e,t=Bc(t)),(e=t)===kr&&(e=It())===kr&&(e=$y,t=ct(),t!==kr&&(Jy=e,t=Mc(t)),e=t)))),eg--,e===kr&&(t=kr,0===eg&&u(Oc)),e}function kt(){var e,r,n,i,o,s;if(eg++,e=$y,40===t.charCodeAt($y)?(r=sn,$y++):(r=kr,0===eg&&u(an)),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if((i=pt())!==kr){for(o=[],s=ur();s!==kr;)o.push(s),s=ur();o!==kr?(41===t.charCodeAt($y)?(s=pn,$y++):(s=kr,0===eg&&u(hn)),s!==kr?(Jy=e,r=qc(i),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Uc)),e}function Et(){var e,r,n,i,o,s,a,l,c,f,p,h,d,v,y,g;if(eg++,e=$y,t.substr($y,3)===Hc?(r=Hc,$y+=3):(r=kr,0===eg&&u(Xc)),r===kr&&(t.substr($y,3)===zc?(r=zc,$y+=3):(r=kr,0===eg&&u(Vc))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(40===t.charCodeAt($y)?(i=sn,$y++):(i=kr,0===eg&&u(an)),i!==kr){for(o=[],s=ur();s!==kr;)o.push(s),s=ur();if(o!==kr)if((s=pt())!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();a!==kr?(41===t.charCodeAt($y)?(l=pn,$y++):(l=kr,0===eg&&u(hn)),l!==kr?(Jy=e,r=Wc(s),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;if(e===kr){if(e=$y,t.substr($y,4)===$c?(r=$c,$y+=4):(r=kr,0===eg&&u(Jc)),r===kr&&(t.substr($y,4)===Yc?(r=Yc,$y+=4):(r=kr,0===eg&&u(Kc))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(40===t.charCodeAt($y)?(i=sn,$y++):(i=kr,0===eg&&u(an)),i!==kr){for(o=[],s=ur();s!==kr;)o.push(s),s=ur();if(o!==kr)if((s=pt())!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();a!==kr?(41===t.charCodeAt($y)?(l=pn,$y++):(l=kr,0===eg&&u(hn)),l!==kr?(Jy=e,r=Zc(s),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;if(e===kr){if(e=$y,t.substr($y,11)===ef?(r=ef,$y+=11):(r=kr,0===eg&&u(tf)),r===kr&&(t.substr($y,11)===rf?(r=rf,$y+=11):(r=kr,0===eg&&u(nf))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(40===t.charCodeAt($y)?(i=sn,$y++):(i=kr,0===eg&&u(an)),i!==kr){for(o=[],s=ur();s!==kr;)o.push(s),s=ur();if(o!==kr)if((s=pt())!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();if(a!==kr)if(44===t.charCodeAt($y)?(l=lu,$y++):(l=kr,0===eg&&u(cu)),l!==kr){for(c=[],f=ur();f!==kr;)c.push(f),f=ur();if(c!==kr)if((f=pt())!==kr){for(p=[],h=ur();h!==kr;)p.push(h),h=ur();p!==kr?(41===t.charCodeAt($y)?(h=pn,$y++):(h=kr,0===eg&&u(hn)),h!==kr?(Jy=e,r=of(s,f),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;if(e===kr){if(e=$y,t.substr($y,8)===sf?(r=sf,$y+=8):(r=kr,0===eg&&u(af)),r===kr&&(t.substr($y,8)===uf?(r=uf,$y+=8):(r=kr,0===eg&&u(lf))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(40===t.charCodeAt($y)?(i=sn,$y++):(i=kr,0===eg&&u(an)),i!==kr){for(o=[],s=ur();s!==kr;)o.push(s),s=ur();if(o!==kr)if((s=pt())!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();a!==kr?(41===t.charCodeAt($y)?(l=pn,$y++):(l=kr,0===eg&&u(hn)),l!==kr?(Jy=e,r=cf(s),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;if(e===kr){if(e=$y,t.substr($y,5)===ff?(r=ff,$y+=5):(r=kr,0===eg&&u(pf)),r===kr&&(t.substr($y,5)===hf?(r=hf,$y+=5):(r=kr,0===eg&&u(df))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(40===t.charCodeAt($y)?(i=sn,$y++):(i=kr,0===eg&&u(an)),i!==kr){for(o=[],s=ur();s!==kr;)o.push(s),s=ur();if(o!==kr)if((s=ct())!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();a!==kr?(41===t.charCodeAt($y)?(l=pn,$y++):(l=kr,0===eg&&u(hn)),l!==kr?(Jy=e,r=vf(s),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;if(e===kr){if(e=$y,t.substr($y,3)===yf?(r=yf,$y+=3):(r=kr,0===eg&&u(gf)),r===kr&&(t.substr($y,3)===bf?(r=bf,$y+=3):(r=kr,0===eg&&u(mf))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(40===t.charCodeAt($y)?(i=sn,$y++):(i=kr,0===eg&&u(an)),i!==kr){for(o=[],s=ur();s!==kr;)o.push(s),s=ur();if(o!==kr)if((s=pt())!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();a!==kr?(41===t.charCodeAt($y)?(l=pn,$y++):(l=kr,0===eg&&u(hn)),l!==kr?(Jy=e,r=wf(s),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;if(e===kr){if(e=$y,t.substr($y,3)===xf?(r=xf,$y+=3):(r=kr,0===eg&&u(kf)),r===kr&&(t.substr($y,3)===Ef?(r=Ef,$y+=3):(r=kr,0===eg&&u(_f))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(40===t.charCodeAt($y)?(i=sn,$y++):(i=kr,0===eg&&u(an)),i!==kr){for(o=[],s=ur();s!==kr;)o.push(s),s=ur();if(o!==kr)if((s=pt())!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();a!==kr?(41===t.charCodeAt($y)?(l=pn,$y++):(l=kr,0===eg&&u(hn)),l!==kr?(Jy=e,r=Af(s),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;if(e===kr){if(e=$y,t.substr($y,5)===Sf?(r=Sf,$y+=5):(r=kr,0===eg&&u(If)),r===kr&&(t.substr($y,5)===Tf?(r=Tf,$y+=5):(r=kr,0===eg&&u(Cf))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr){if(i=$y,40===t.charCodeAt($y)?(o=sn,$y++):(o=kr,0===eg&&u(an)),o!==kr){for(s=[],a=ur();a!==kr;)s.push(a),a=ur();if(s!==kr)if((a=pt())!==kr){for(l=[],c=ur();c!==kr;)l.push(c),c=ur();l!==kr?(41===t.charCodeAt($y)?(c=pn,$y++):(c=kr,0===eg&&u(hn)),c!==kr?(o=[o,s,a,l,c],i=o):($y=i,i=kr)):($y=i,i=kr)}else $y=i,i=kr;else $y=i,i=kr}else $y=i,i=kr;i===kr&&(i=ar()),i!==kr?(Jy=e,r=Ff(i),e=r):($y=e,e=kr)}else $y=e,e=kr}else $y=e,e=kr;if(e===kr){if(e=$y,t.substr($y,8)===Rf?(r=Rf,$y+=8):(r=kr,0===eg&&u(jf)),r===kr&&(t.substr($y,8)===Nf?(r=Nf,$y+=8):(r=kr,0===eg&&u(Lf))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();n!==kr?(i=Ie(),i!==kr?(Jy=e,r=Pf(i),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;if(e===kr){if(e=$y,t.substr($y,2)===Of?(r=Of,$y+=2):(r=kr,0===eg&&u(Qf)),r===kr&&(t.substr($y,2)===Df?(r=Df,$y+=2):(r=kr,0===eg&&u(Bf))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(40===t.charCodeAt($y)?(i=sn,$y++):(i=kr,0===eg&&u(an)),i!==kr){for(o=[],s=ur();s!==kr;)o.push(s),s=ur();if(o!==kr)if((s=pt())!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();if(a!==kr)if(44===t.charCodeAt($y)?(l=lu,$y++):(l=kr,0===eg&&u(cu)),l!==kr){for(c=[],f=ur();f!==kr;)c.push(f),f=ur();if(c!==kr)if((f=pt())!==kr){for(p=[],h=ur();h!==kr;)p.push(h),h=ur();if(p!==kr)if(44===t.charCodeAt($y)?(h=lu,$y++):(h=kr,0===eg&&u(cu)),h!==kr){for(d=[],v=ur();v!==kr;)d.push(v),v=ur();if(d!==kr)if((v=pt())!==kr){for(y=[],g=ur();g!==kr;)y.push(g),g=ur();y!==kr?(41===t.charCodeAt($y)?(g=pn,$y++):(g=kr,0===eg&&u(hn)),g!==kr?(Jy=e,r=Mf(s,f,v),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;if(e===kr){if(e=$y,t.substr($y,9)===Uf?(r=Uf,$y+=9):(r=kr,0===eg&&u(qf)),r===kr&&(t.substr($y,9)===Gf?(r=Gf,$y+=9):(r=kr,0===eg&&u(Hf)),r===kr&&(t.substr($y,9)===Xf?(r=Xf,$y+=9):(r=kr,0===eg&&u(zf)))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(40===t.charCodeAt($y)?(i=sn,$y++):(i=kr,0===eg&&u(an)),i!==kr){for(o=[],s=ur();s!==kr;)o.push(s),s=ur();if(o!==kr)if((s=pt())!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();a!==kr?(41===t.charCodeAt($y)?(l=pn,$y++):(l=kr,0===eg&&u(hn)),l!==kr?(Jy=e,r=Vf(s),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;if(e===kr){if(e=$y,t.substr($y,7)===Wf?(r=Wf,$y+=7):(r=kr,0===eg&&u($f)),r===kr&&(t.substr($y,7)===Jf?(r=Jf,$y+=7):(r=kr,0===eg&&u(Yf)),r===kr&&(t.substr($y,7)===Kf?(r=Kf,$y+=7):(r=kr,0===eg&&u(Zf)))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(40===t.charCodeAt($y)?(i=sn,$y++):(i=kr,0===eg&&u(an)),i!==kr){for(o=[],s=ur();s!==kr;)o.push(s),s=ur();if(o!==kr)if((s=pt())!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();a!==kr?(41===t.charCodeAt($y)?(l=pn,$y++):(l=kr,0===eg&&u(hn)),l!==kr?(Jy=e,r=ep(s),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;if(e===kr){if(e=$y,t.substr($y,8)===tp?(r=tp,$y+=8):(r=kr,0===eg&&u(rp)),r===kr&&(t.substr($y,8)===np?(r=np,$y+=8):(r=kr,0===eg&&u(ip))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(40===t.charCodeAt($y)?(i=sn,$y++):(i=kr,0===eg&&u(an)),i!==kr){for(o=[],s=ur();s!==kr;)o.push(s),s=ur();if(o!==kr)if((s=pt())!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();if(a!==kr)if(44===t.charCodeAt($y)?(l=lu,$y++):(l=kr,0===eg&&u(cu)),l!==kr){for(c=[],f=ur();f!==kr;)c.push(f),f=ur();if(c!==kr)if((f=pt())!==kr){for(p=[],h=ur();h!==kr;)p.push(h),h=ur();p!==kr?(41===t.charCodeAt($y)?(h=pn,$y++):(h=kr,0===eg&&u(hn)),h!==kr?(Jy=e,r=op(s,f),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;if(e===kr){if(e=$y,t.substr($y,5)===sp?(r=sp,$y+=5):(r=kr,0===eg&&u(ap)),r===kr&&(t.substr($y,5)===up?(r=up,$y+=5):(r=kr,0===eg&&u(lp)),r===kr&&(t.substr($y,5)===cp?(r=cp,$y+=5):(r=kr,0===eg&&u(fp)),r===kr&&(t.substr($y,5)===pp?(r=pp,$y+=5):(r=kr,0===eg&&u(hp)),r===kr&&(t.substr($y,5)===dp?(r=dp,$y+=5):(r=kr,0===eg&&u(vp)),r===kr&&(t.substr($y,5)===yp?(r=yp,$y+=5):(r=kr,0===eg&&u(gp))))))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(40===t.charCodeAt($y)?(i=sn,$y++):(i=kr,0===eg&&u(an)),i!==kr){for(o=[],s=ur();s!==kr;)o.push(s),s=ur();if(o!==kr)if((s=pt())!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();a!==kr?(41===t.charCodeAt($y)?(l=pn,$y++):(l=kr,0===eg&&u(hn)),l!==kr?(Jy=e,r=bp(s),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;if(e===kr){if(e=$y,t.substr($y,7)===mp?(r=mp,$y+=7):(r=kr,0===eg&&u(wp)),r===kr&&(t.substr($y,7)===xp?(r=xp,$y+=7):(r=kr,0===eg&&u(kp))),r!==kr){if(n=[],Ep.test(t.charAt($y))?(i=t.charAt($y),$y++):(i=kr,0===eg&&u(_p)),i!==kr)for(;i!==kr;)n.push(i),Ep.test(t.charAt($y))?(i=t.charAt($y),$y++):(i=kr,0===eg&&u(_p));else n=kr;if(n!==kr){for(i=[],o=ur();o!==kr;)i.push(o),o=ur();if(i!==kr)if(40===t.charCodeAt($y)?(o=sn,$y++):(o=kr,0===eg&&u(an)),o!==kr){for(s=[],a=$y,l=[],c=ur();c!==kr;)l.push(c),c=ur();for(l!==kr?(c=pt(),c!==kr?(44===t.charCodeAt($y)?(f=lu,$y++):(f=kr,0===eg&&u(cu)),f!==kr?(l=[l,c,f],a=l):($y=a,a=kr)):($y=a,a=kr)):($y=a,a=kr);a!==kr;){for(s.push(a),a=$y,l=[],c=ur();c!==kr;)l.push(c),c=ur();l!==kr?(c=pt(),c!==kr?(44===t.charCodeAt($y)?(f=lu,$y++):(f=kr,0===eg&&u(cu)),f!==kr?(l=[l,c,f],a=l):($y=a,a=kr)):($y=a,a=kr)):($y=a,a=kr)}if(s!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();if(a!==kr)if((l=pt())!==kr){for(c=[],f=ur();f!==kr;)c.push(f),f=ur();c!==kr?(41===t.charCodeAt($y)?(f=pn,$y++):(f=kr,0===eg&&u(hn)),f!==kr?(Jy=e,r=Ap(n,s,l),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr}else $y=e,e=kr;e===kr&&(e=_t())===kr&&(e=At())===kr&&(e=St())}}}}}}}}}}}}}}return eg--,e===kr&&(r=kr,0===eg&&u(Gc)),e}function _t(){var e,r,n,i,o,s,a,l,c,f,p,h,d,v,y;if(eg++,e=$y,t.substr($y,5)===Ip?(r=Ip,$y+=5):(r=kr,0===eg&&u(Tp)),r===kr&&(t.substr($y,5)===Cp?(r=Cp,$y+=5):(r=kr,0===eg&&u(Fp))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(40===t.charCodeAt($y)?(i=sn,$y++):(i=kr,0===eg&&u(an)),i!==kr){for(o=[],s=ur();s!==kr;)o.push(s),s=ur();if(o!==kr)if((s=pt())!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();if(a!==kr)if(44===t.charCodeAt($y)?(l=lu,$y++):(l=kr,0===eg&&u(cu)),l!==kr){for(c=[],f=ur();f!==kr;)c.push(f),f=ur();if(c!==kr)if((f=pt())!==kr){for(p=[],h=ur();h!==kr;)p.push(h),h=ur();if(p!==kr){if(h=$y,44===t.charCodeAt($y)?(d=lu,$y++):(d=kr,0===eg&&u(cu)),d!==kr){for(v=[],y=ur();y!==kr;)v.push(y),y=ur();v!==kr?(y=pt(),y!==kr?(d=[d,v,y],h=d):($y=h,h=kr)):($y=h,h=kr)}else $y=h,h=kr;if(h===kr&&(h=null),h!==kr){for(d=[],v=ur();v!==kr;)d.push(v),v=ur();d!==kr?(41===t.charCodeAt($y)?(v=pn,$y++):(v=kr,0===eg&&u(hn)),v!==kr?(Jy=e,r=Rp(s,f,h),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr}else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Sp)),e}function At(){var e,r,n,i;if(eg++,e=$y,t.substr($y,6)===Np?(r=Np,$y+=6):(r=kr,0===eg&&u(Lp)),r===kr&&(t.substr($y,6)===Pp?(r=Pp,$y+=6):(r=kr,0===eg&&u(Op))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();n!==kr?(i=ue(),i!==kr?(Jy=e,r=Qp(i),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(jp)),e}function St(){var e,r,n,i,o,s;if(eg++,e=$y,t.substr($y,3)===Bp?(r=Bp,$y+=3):(r=kr,0===eg&&u(Mp)),r===kr&&(t.substr($y,3)===Up?(r=Up,$y+=3):(r=kr,0===eg&&u(qp))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(t.substr($y,6)===Np?(i=Np,$y+=6):(i=kr,0===eg&&u(Lp)),i===kr&&(t.substr($y,6)===Pp?(i=Pp,$y+=6):(i=kr,0===eg&&u(Op))),i!==kr){for(o=[],s=ur();s!==kr;)o.push(s),s=ur();o!==kr?(s=ue(),s!==kr?(Jy=e,r=Gp(s),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Dp)),e}function It(){var e,r,n,i,o,s,a,l,c,f,p,h,d,v,y,g,b,m;if(eg++,e=$y,t.substr($y,5)===Xp?(r=Xp,$y+=5):(r=kr,0===eg&&u(zp)),r===kr&&(t.substr($y,5)===Vp?(r=Vp,$y+=5):(r=kr,0===eg&&u(Wp))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(40===t.charCodeAt($y)?(i=sn,$y++):(i=kr,0===eg&&u(an)),i!==kr){for(o=[],s=ur();s!==kr;)o.push(s),s=ur();if(o!==kr)if(t.substr($y,8)===Yr?(s=Yr,$y+=8):(s=kr,0===eg&&u(Kr)),s===kr&&(t.substr($y,8)===Zr?(s=Zr,$y+=8):(s=kr,0===eg&&u(en))),s===kr&&(s=null),s!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();if(a!==kr)if(42===t.charCodeAt($y)?(l=dn,$y++):(l=kr,0===eg&&u(vn)),l===kr&&(l=pt()),l!==kr){for(c=[],f=ur();f!==kr;)c.push(f),f=ur();if(c!==kr)if(41===t.charCodeAt($y)?(f=pn,$y++):(f=kr,0===eg&&u(hn)),f!==kr){for(p=[],h=ur();h!==kr;)p.push(h),h=ur();p!==kr?(Jy=e,r=$p(s,l),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;if(e===kr){if(e=$y,t.substr($y,12)===Jp?(r=Jp,$y+=12):(r=kr,0===eg&&u(Yp)),r===kr&&(t.substr($y,12)===Kp?(r=Kp,$y+=12):(r=kr,0===eg&&u(Zp))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(40===t.charCodeAt($y)?(i=sn,$y++):(i=kr,0===eg&&u(an)),i!==kr){for(o=[],s=ur();s!==kr;)o.push(s),s=ur();if(o!==kr)if(t.substr($y,8)===Yr?(s=Yr,$y+=8):(s=kr,0===eg&&u(Kr)),s===kr&&(t.substr($y,8)===Zr?(s=Zr,$y+=8):(s=kr,0===eg&&u(en))),s===kr&&(s=null),s!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();if(a!==kr)if((l=pt())!==kr){if(c=$y,59===t.charCodeAt($y)?(f=go,$y++):(f=kr,0===eg&&u(bo)),f!==kr){for(p=[],h=ur();h!==kr;)p.push(h),h=ur();if(p!==kr)if(t.substr($y,9)===eh?(h=eh,$y+=9):(h=kr,0===eg&&u(th)),h!==kr){for(d=[],v=ur();v!==kr;)d.push(v),v=ur();if(d!==kr)if(61===t.charCodeAt($y)?(v=Jl,$y++):(v=kr,0===eg&&u(Yl)),v!==kr){for(y=[],g=ur();g!==kr;)y.push(g),g=ur();if(y!==kr)if((g=Pt())!==kr){for(b=[],m=ur();m!==kr;)b.push(m),m=ur();b!==kr?(f=[f,p,h,d,v,y,g,b],c=f):($y=c,c=kr)}else $y=c,c=kr;else $y=c,c=kr}else $y=c,c=kr;else $y=c,c=kr}else $y=c,c=kr;else $y=c,c=kr}else $y=c,c=kr;if(c===kr&&(c=null),c!==kr)if(41===t.charCodeAt($y)?(f=pn,$y++):(f=kr,0===eg&&u(hn)),f!==kr){for(p=[],h=ur();h!==kr;)p.push(h),h=ur();p!==kr?(Jy=e,r=rh(s,l,c),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;if(e===kr){if(e=$y,t.substr($y,3)===nh?(r=nh,$y+=3):(r=kr,0===eg&&u(ih)),r===kr&&(t.substr($y,3)===oh?(r=oh,$y+=3):(r=kr,0===eg&&u(sh))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(40===t.charCodeAt($y)?(i=sn,$y++):(i=kr,0===eg&&u(an)),i!==kr){for(o=[],s=ur();s!==kr;)o.push(s),s=ur();if(o!==kr)if(t.substr($y,8)===Yr?(s=Yr,$y+=8):(s=kr,0===eg&&u(Kr)),s===kr&&(t.substr($y,8)===Zr?(s=Zr,$y+=8):(s=kr,0===eg&&u(en))),s===kr&&(s=null),s!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();if(a!==kr)if((l=pt())!==kr){for(c=[],f=ur();f!==kr;)c.push(f),f=ur();if(c!==kr)if(41===t.charCodeAt($y)?(f=pn,$y++):(f=kr,0===eg&&u(hn)),f!==kr){for(p=[],h=ur();h!==kr;)p.push(h),h=ur();p!==kr?(Jy=e,r=ah(s,l),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;if(e===kr){if(e=$y,t.substr($y,3)===uh?(r=uh,$y+=3):(r=kr,0===eg&&u(lh)),r===kr&&(t.substr($y,3)===ch?(r=ch,$y+=3):(r=kr,0===eg&&u(fh))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(40===t.charCodeAt($y)?(i=sn,$y++):(i=kr,0===eg&&u(an)),i!==kr){for(o=[],s=ur();s!==kr;)o.push(s),s=ur();if(o!==kr)if(t.substr($y,8)===Yr?(s=Yr,$y+=8):(s=kr,0===eg&&u(Kr)),s===kr&&(t.substr($y,8)===Zr?(s=Zr,$y+=8):(s=kr,0===eg&&u(en))),s===kr&&(s=null),s!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();if(a!==kr)if((l=pt())!==kr){for(c=[],f=ur();f!==kr;)c.push(f),f=ur();if(c!==kr)if(41===t.charCodeAt($y)?(f=pn,$y++):(f=kr,0===eg&&u(hn)),f!==kr){for(p=[],h=ur();h!==kr;)p.push(h),h=ur();p!==kr?(Jy=e,r=ph(s,l),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;if(e===kr){if(e=$y,t.substr($y,3)===hh?(r=hh,$y+=3):(r=kr,0===eg&&u(dh)),r===kr&&(t.substr($y,3)===vh?(r=vh,$y+=3):(r=kr,0===eg&&u(yh))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(40===t.charCodeAt($y)?(i=sn,$y++):(i=kr,0===eg&&u(an)),i!==kr){for(o=[],s=ur();s!==kr;)o.push(s),s=ur();if(o!==kr)if(t.substr($y,8)===Yr?(s=Yr,$y+=8):(s=kr,0===eg&&u(Kr)),s===kr&&(t.substr($y,8)===Zr?(s=Zr,$y+=8):(s=kr,0===eg&&u(en))),s===kr&&(s=null),s!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();if(a!==kr)if((l=pt())!==kr){for(c=[],f=ur();f!==kr;)c.push(f),f=ur();if(c!==kr)if(41===t.charCodeAt($y)?(f=pn,$y++):(f=kr,0===eg&&u(hn)),f!==kr){for(p=[],h=ur();h!==kr;)p.push(h),h=ur();p!==kr?(Jy=e,r=gh(s,l),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;if(e===kr)if(e=$y,t.substr($y,3)===bh?(r=bh,$y+=3):(r=kr,0===eg&&u(mh)),r===kr&&(t.substr($y,3)===wh?(r=wh,$y+=3):(r=kr,0===eg&&u(xh))),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();if(n!==kr)if(40===t.charCodeAt($y)?(i=sn,$y++):(i=kr,0===eg&&u(an)),i!==kr){for(o=[],s=ur();s!==kr;)o.push(s),s=ur();if(o!==kr)if(t.substr($y,8)===Yr?(s=Yr,$y+=8):(s=kr,0===eg&&u(Kr)),s===kr&&(t.substr($y,8)===Zr?(s=Zr,$y+=8):(s=kr,0===eg&&u(en))),s===kr&&(s=null),s!==kr){for(a=[],l=ur();l!==kr;)a.push(l),l=ur();if(a!==kr)if((l=pt())!==kr){for(c=[],f=ur();f!==kr;)c.push(f),f=ur();if(c!==kr)if(41===t.charCodeAt($y)?(f=pn,$y++):(f=kr,0===eg&&u(hn)),f!==kr){for(p=[],h=ur();h!==kr;)p.push(h),h=ur();p!==kr?(Jy=e,r=kh(s,l),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr;else $y=e,e=kr}else $y=e,e=kr}}}}return eg--,e===kr&&(r=kr,0===eg&&u(Hp)),e}function Tt(){var e,t,r,n;if(eg++,e=$y,(t=Ot())!==kr){for(r=[],n=ur();n!==kr;)r.push(n),n=ur();r!==kr?(n=Se(),n===kr&&(n=null),n!==kr?(Jy=e,t=_h(t,n),e=t):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(t=kr,0===eg&&u(Eh)),e}function Ct(){var e,r,n,i,o;return eg++,e=$y,r=Pt(),r!==kr?(n=Xt(),n===kr&&(n=$y,t.substr($y,2)===Sh?(i=Sh,$y+=2):(i=kr,0===eg&&u(Ih)),i!==kr?(o=Ot(),o!==kr?(i=[i,o],n=i):($y=n,n=kr)):($y=n,n=kr)),n===kr&&(n=null),n!==kr?(Jy=e,r=Th(r,n),e=r):($y=e,e=kr)):($y=e,e=kr),eg--,e===kr&&(r=kr,0===eg&&u(Ah)),e}function Ft(){var e;return eg++,e=Rt(),e===kr&&(e=jt())===kr&&(e=Nt()),eg--,e===kr&&(kr,0===eg&&u(Ch)),e}function Rt(){var e;return eg++,e=Wt(),e===kr&&(e=Vt())===kr&&(e=zt()),eg--,e===kr&&(kr,0===eg&&u(Fh)),e}function jt(){var e;return eg++,e=Yt(),e===kr&&(e=Jt())===kr&&(e=$t()),eg--,e===kr&&(kr,0===eg&&u(Rh)),e}function Nt(){var e;return eg++,e=er(),e===kr&&(e=Zt())===kr&&(e=Kt()),eg--,e===kr&&(kr,0===eg&&u(jh)),e}function Lt(){var e,r;return eg++,e=$y,t.substr($y,4)===Lh?(r=Lh,$y+=4):(r=kr,0===eg&&u(Ph)),r===kr&&(t.substr($y,4)===Oh?(r=Oh,$y+=4):(r=kr,0===eg&&u(Qh))),r!==kr&&(Jy=e,r=Dh()),e=r,e===kr&&(e=$y,t.substr($y,5)===Bh?(r=Bh,$y+=5):(r=kr,0===eg&&u(Mh)),r===kr&&(t.substr($y,5)===Uh?(r=Uh,$y+=5):(r=kr,0===eg&&u(qh))),r!==kr&&(Jy=e,r=Gh()),e=r),eg--,e===kr&&(r=kr,0===eg&&u(Nh)),e}function Pt(){var e,t;return eg++,e=$y,t=ir(),t!==kr&&(Jy=e,t=Xh(t)),e=t,e===kr&&(e=$y,t=or(),t!==kr&&(Jy=e,t=Xh(t)),(e=t)===kr&&(e=$y,t=rr(),t!==kr&&(Jy=e,t=Xh(t)),(e=t)===kr&&(e=$y,t=nr(),t!==kr&&(Jy=e,t=Xh(t)),e=t))),eg--,e===kr&&(t=kr,0===eg&&u(Hh)),e}function Ot(){var e,t;return eg++,e=$y,t=Bt(),t!==kr&&(Jy=e,t=Vh(t)),e=t,e===kr&&(e=$y,t=Qt(),t!==kr&&(Jy=e,t=Wh(t)),e=t),eg--,e===kr&&(t=kr,0===eg&&u(zh)),e}function Qt(){var e,t;return eg++,e=$y,t=Ut(),t!==kr&&(Jy=e,t=Jh(t)),e=t,e===kr&&(e=$y,t=Mt(),t!==kr&&(Jy=e,t=Yh(t)),e=t),eg--,e===kr&&(t=kr,0===eg&&u($h)),e}function Dt(){var e,t;return eg++,e=$y,t=qt(),t!==kr&&(Jy=e,t=Zh(t)),e=t,e===kr&&(e=$y,t=cr(),t!==kr&&(Jy=e,t=ed()),e=t),eg--,e===kr&&(t=kr,0===eg&&u(Kh)),e}function Bt(){var e,r,n,i;if(eg++,e=$y,60===t.charCodeAt($y)?(r=ec,$y++):(r=kr,0===eg&&u(tc)),r!==kr){for(n=[],rd.test(t.charAt($y))?(i=t.charAt($y),$y++):(i=kr,0===eg&&u(nd));i!==kr;)n.push(i),rd.test(t.charAt($y))?(i=t.charAt($y),$y++):(i=kr,0===eg&&u(nd));n!==kr?(62===t.charCodeAt($y)?(i=rc,$y++):(i=kr,0===eg&&u(nc)),i!==kr?(Jy=e,r=id(n),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(td)),e}function Mt(){var e,r,n;return eg++,e=$y,r=vr(),r===kr&&(r=null),r!==kr?(58===t.charCodeAt($y)?(n=sd,$y++):(n=kr,0===eg&&u(ad)),n!==kr?(Jy=e,r=Wh(r),e=r):($y=e,e=kr)):($y=e,e=kr),eg--,e===kr&&(r=kr,0===eg&&u(od)),e}function Ut(){var e,t,r;return eg++,e=$y,t=Mt(),t!==kr?(r=yr(),r!==kr?(Jy=e,t=ld(t,r),e=t):($y=e,e=kr)):($y=e,e=kr),eg--,e===kr&&(t=kr,0===eg&&u(ud)),e}function qt(){var e,r,n;return eg++,e=$y,t.substr($y,2)===fd?(r=fd,$y+=2):(r=kr,0===eg&&u(pd)),r!==kr?(n=yr(),n!==kr?(Jy=e,r=hd(n),e=r):($y=e,e=kr)):($y=e,e=kr),eg--,e===kr&&(r=kr,0===eg&&u(cd)),e}function Gt(){var e,r,n;return eg++,e=$y,63===t.charCodeAt($y)?(r=al,$y++):(r=kr,0===eg&&u(ul)),r!==kr?(n=hr(),n!==kr?(Jy=e,r=vd(n),e=r):($y=e,e=kr)):($y=e,e=kr),eg--,e===kr&&(r=kr,0===eg&&u(dd)),e}function Ht(){var e,r,n;return eg++,e=$y,36===t.charCodeAt($y)?(r=gd,$y++):(r=kr,0===eg&&u(bd)),r!==kr?(n=hr(),n!==kr?(Jy=e,r=vd(n),e=r):($y=e,e=kr)):($y=e,e=kr),eg--,e===kr&&(r=kr,0===eg&&u(yd)),e}function Xt(){var e,r,n,i,o,s,a,l;if(eg++,e=$y,64===t.charCodeAt($y)?(r=wd,$y++):(r=kr,0===eg&&u(xd)),r!==kr){if(n=[],kd.test(t.charAt($y))?(i=t.charAt($y),$y++):(i=kr,0===eg&&u(Ed)),i!==kr)for(;i!==kr;)n.push(i),kd.test(t.charAt($y))?(i=t.charAt($y),$y++):(i=kr,0===eg&&u(Ed));else n=kr;if(n!==kr){if(i=[],o=$y,45===t.charCodeAt($y)?(s=Ic,$y++):(s=kr,0===eg&&u(Tc)),s!==kr){if(a=[],_d.test(t.charAt($y))?(l=t.charAt($y),$y++):(l=kr,0===eg&&u(Ad)),l!==kr)for(;l!==kr;)a.push(l),_d.test(t.charAt($y))?(l=t.charAt($y),$y++):(l=kr,0===eg&&u(Ad));else a=kr;a!==kr?(s=[s,a],o=s):($y=o,o=kr)}else $y=o,o=kr;for(;o!==kr;)if(i.push(o),o=$y,45===t.charCodeAt($y)?(s=Ic,$y++):(s=kr,0===eg&&u(Tc)),s!==kr){if(a=[],_d.test(t.charAt($y))?(l=t.charAt($y),$y++):(l=kr,0===eg&&u(Ad)),l!==kr)for(;l!==kr;)a.push(l),_d.test(t.charAt($y))?(l=t.charAt($y),$y++):(l=kr,0===eg&&u(Ad));else a=kr;a!==kr?(s=[s,a],o=s):($y=o,o=kr)}else $y=o,o=kr;i!==kr?(Jy=e,r=Sd(n,i),e=r):($y=e,e=kr)}else $y=e,e=kr}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(md)),e}function zt(){var e,r,n;if(eg++,e=$y,r=[],Td.test(t.charAt($y))?(n=t.charAt($y),$y++):(n=kr,0===eg&&u(Cd)),n!==kr)for(;n!==kr;)r.push(n),Td.test(t.charAt($y))?(n=t.charAt($y),$y++):(n=kr,0===eg&&u(Cd));else r=kr;return r!==kr&&(Jy=e,r=Fd(r)),e=r,eg--,e===kr&&(r=kr,0===eg&&u(Id)),e}function Vt(){var e,r,n,i,o;if(eg++,e=$y,r=[],Td.test(t.charAt($y))?(n=t.charAt($y),$y++):(n=kr,0===eg&&u(Cd)),n!==kr)for(;n!==kr;)r.push(n),Td.test(t.charAt($y))?(n=t.charAt($y),$y++):(n=kr,0===eg&&u(Cd));else r=kr;if(r!==kr)if(46===t.charCodeAt($y)?(n=ea,$y++):(n=kr,0===eg&&u(ta)),n!==kr){for(i=[],Td.test(t.charAt($y))?(o=t.charAt($y),$y++):(o=kr,0===eg&&u(Cd));o!==kr;)i.push(o),Td.test(t.charAt($y))?(o=t.charAt($y),$y++):(o=kr,0===eg&&u(Cd));i!==kr?(Jy=e,r=jd(r,n,i),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr;if(e===kr)if(e=$y,46===t.charCodeAt($y)?(r=ea,$y++):(r=kr,0===eg&&u(ta)),r!==kr){if(n=[],Td.test(t.charAt($y))?(i=t.charAt($y),$y++):(i=kr,0===eg&&u(Cd)),i!==kr)for(;i!==kr;)n.push(i),Td.test(t.charAt($y))?(i=t.charAt($y),$y++):(i=kr,0===eg&&u(Cd));else n=kr;n!==kr?(Jy=e,r=Nd(r,n),e=r):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Rd)),e}function Wt(){var e,r,n,i,o;if(eg++,e=$y,r=[],Td.test(t.charAt($y))?(n=t.charAt($y),$y++):(n=kr,0===eg&&u(Cd)),n!==kr)for(;n!==kr;)r.push(n),Td.test(t.charAt($y))?(n=t.charAt($y),$y++):(n=kr,0===eg&&u(Cd));else r=kr;if(r!==kr)if(46===t.charCodeAt($y)?(n=ea,$y++):(n=kr,0===eg&&u(ta)),n!==kr){for(i=[],Td.test(t.charAt($y))?(o=t.charAt($y),$y++):(o=kr,0===eg&&u(Cd));o!==kr;)i.push(o),Td.test(t.charAt($y))?(o=t.charAt($y),$y++):(o=kr,0===eg&&u(Cd));i!==kr?(o=tr(),o!==kr?(Jy=e,r=Pd(r,n,i,o),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr;if(e===kr){if(e=$y,46===t.charCodeAt($y)?(r=ea,$y++):(r=kr,0===eg&&u(ta)),r!==kr){if(n=[],Td.test(t.charAt($y))?(i=t.charAt($y),$y++):(i=kr,0===eg&&u(Cd)),i!==kr)for(;i!==kr;)n.push(i),Td.test(t.charAt($y))?(i=t.charAt($y),$y++):(i=kr,0===eg&&u(Cd));else n=kr;n!==kr?(i=tr(),i!==kr?(Jy=e,r=Od(r,n,i),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;if(e===kr){if(e=$y,r=[],Td.test(t.charAt($y))?(n=t.charAt($y),$y++):(n=kr,0===eg&&u(Cd)),n!==kr)for(;n!==kr;)r.push(n),Td.test(t.charAt($y))?(n=t.charAt($y),$y++):(n=kr,0===eg&&u(Cd));else r=kr;r!==kr?(n=tr(),n!==kr?(Jy=e,r=Qd(r,n),e=r):($y=e,e=kr)):($y=e,e=kr)}}return eg--,e===kr&&(r=kr,0===eg&&u(Ld)),e}function $t(){var e,r,n;return eg++,e=$y,43===t.charCodeAt($y)?(r=ll,$y++):(r=kr,0===eg&&u(cl)),r!==kr?(n=zt(),n!==kr?(Jy=e,r=Bd(n),e=r):($y=e,e=kr)):($y=e,e=kr),eg--,e===kr&&(r=kr,0===eg&&u(Dd)),e}function Jt(){var e,r,n;return eg++,e=$y,43===t.charCodeAt($y)?(r=ll,$y++):(r=kr,0===eg&&u(cl)),r!==kr?(n=Vt(),n!==kr?(Jy=e,r=Ud(n),e=r):($y=e,e=kr)):($y=e,e=kr),eg--,e===kr&&(r=kr,0===eg&&u(Md)),e}function Yt(){var e,r,n;return eg++,e=$y,43===t.charCodeAt($y)?(r=ll,$y++):(r=kr,0===eg&&u(cl)),r!==kr?(n=Wt(),n!==kr?(Jy=e,r=Ud(n),e=r):($y=e,e=kr)):($y=e,e=kr),eg--,e===kr&&(r=kr,0===eg&&u(qd)),e}function Kt(){var e,r,n;return eg++,e=$y,45===t.charCodeAt($y)?(r=Ic,$y++):(r=kr,0===eg&&u(Tc)),r!==kr?(n=zt(),n!==kr?(Jy=e,r=Hd(n),e=r):($y=e,e=kr)):($y=e,e=kr),eg--,e===kr&&(r=kr,0===eg&&u(Gd)),e}function Zt(){var e,r,n;return eg++,e=$y,45===t.charCodeAt($y)?(r=Ic,$y++):(r=kr,0===eg&&u(Tc)),r!==kr?(n=Vt(),n!==kr?(Jy=e,r=Hd(n),e=r):($y=e,e=kr)):($y=e,e=kr),eg--,e===kr&&(r=kr,0===eg&&u(Xd)),e}function er(){var e,r,n;return eg++,e=$y,45===t.charCodeAt($y)?(r=Ic,$y++):(r=kr,0===eg&&u(Tc)),r!==kr?(n=Wt(),n!==kr?(Jy=e,r=Hd(n),e=r):($y=e,e=kr)):($y=e,e=kr),eg--,e===kr&&(r=kr,0===eg&&u(zd)),e}function tr(){var e,r,n,i,o;if(eg++,e=$y,Wd.test(t.charAt($y))?(r=t.charAt($y),$y++):(r=kr,0===eg&&u($d)),r!==kr)if(Jd.test(t.charAt($y))?(n=t.charAt($y),$y++):(n=kr,0===eg&&u(Yd)),n===kr&&(n=null),n!==kr){if(i=[],Td.test(t.charAt($y))?(o=t.charAt($y),$y++):(o=kr,0===eg&&u(Cd)),o!==kr)for(;o!==kr;)i.push(o),Td.test(t.charAt($y))?(o=t.charAt($y),$y++):(o=kr,0===eg&&u(Cd));else i=kr;i!==kr?(Jy=e,r=Kd(r,n,i),e=r):($y=e,e=kr)}else $y=e,e=kr;else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Vd)),e}function rr(){var e,r,n,i;if(eg++,e=$y,39===t.charCodeAt($y)?(r=ev,$y++):(r=kr,0===eg&&u(tv)),r!==kr){for(n=[],rv.test(t.charAt($y))?(i=t.charAt($y),$y++):(i=kr,0===eg&&u(nv)),i===kr&&(i=sr());i!==kr;)n.push(i),rv.test(t.charAt($y))?(i=t.charAt($y),$y++):(i=kr,0===eg&&u(nv)),i===kr&&(i=sr());n!==kr?(39===t.charCodeAt($y)?(i=ev,$y++):(i=kr,0===eg&&u(tv)),i!==kr?(Jy=e,r=iv(n),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Zd)),e}function nr(){var e,r,n,i;if(eg++,e=$y,34===t.charCodeAt($y)?(r=sv,$y++):(r=kr,0===eg&&u(av)),r!==kr){for(n=[],uv.test(t.charAt($y))?(i=t.charAt($y),$y++):(i=kr,0===eg&&u(lv)),i===kr&&(i=sr());i!==kr;)n.push(i),uv.test(t.charAt($y))?(i=t.charAt($y),$y++):(i=kr,0===eg&&u(lv)),i===kr&&(i=sr());n!==kr?(34===t.charCodeAt($y)?(i=sv,$y++):(i=kr,0===eg&&u(av)),i!==kr?(Jy=e,r=iv(n),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(ov)),e}function ir(){var e,r,n,i;if(eg++,e=$y,t.substr($y,3)===fv?(r=fv,$y+=3):(r=kr,0===eg&&u(pv)),r!==kr){for(n=[],hv.test(t.charAt($y))?(i=t.charAt($y),$y++):(i=kr,0===eg&&u(dv)),i===kr&&(i=sr());i!==kr;)n.push(i),hv.test(t.charAt($y))?(i=t.charAt($y),$y++):(i=kr,0===eg&&u(dv)),i===kr&&(i=sr());n!==kr?(t.substr($y,3)===fv?(i=fv,$y+=3):(i=kr,0===eg&&u(pv)),i!==kr?(Jy=e,r=iv(n),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(cv)),e}function or(){var e,r,n,i;if(eg++,e=$y,t.substr($y,3)===yv?(r=yv,$y+=3):(r=kr,0===eg&&u(gv)),r!==kr){for(n=[],bv.test(t.charAt($y))?(i=t.charAt($y),$y++):(i=kr,0===eg&&u(mv)),i===kr&&(i=sr());i!==kr;)n.push(i),bv.test(t.charAt($y))?(i=t.charAt($y),$y++):(i=kr,0===eg&&u(mv)),i===kr&&(i=sr());n!==kr?(t.substr($y,3)===yv?(i=yv,$y+=3):(i=kr,0===eg&&u(gv)),i!==kr?(Jy=e,r=iv(n),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(vv)),e}function sr(){var e,r,n;return eg++,e=$y,92===t.charCodeAt($y)?(r=xv,$y++):(r=kr,0===eg&&u(kv)),r!==kr?(Ev.test(t.charAt($y))?(n=t.charAt($y),$y++):(n=kr,0===eg&&u(_v)),n!==kr?(r=[r,n],e=r):($y=e,e=kr)):($y=e,e=kr),eg--,e===kr&&(r=kr,0===eg&&u(wv)),e}function ar(){var e,r,n,i;if(eg++,e=$y,40===t.charCodeAt($y)?(r=sn,$y++):(r=kr,0===eg&&u(an)),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();n!==kr?(41===t.charCodeAt($y)?(i=pn,$y++):(i=kr,0===eg&&u(hn)),i!==kr?(Jy=e,r=Sv(),e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Av)),e}function ur(){var e;return eg++,Tv.test(t.charAt($y))?(e=t.charAt($y),$y++):(e=kr,0===eg&&u(Cv)),e===kr&&(Fv.test(t.charAt($y))?(e=t.charAt($y),$y++):(e=kr,0===eg&&u(Rv)),e===kr&&(jv.test(t.charAt($y))?(e=t.charAt($y),$y++):(e=kr,0===eg&&u(Nv)),e===kr&&(Lv.test(t.charAt($y))?(e=t.charAt($y),$y++):(e=kr,0===eg&&u(Pv)),e===kr&&(e=lr())))),eg--,e===kr&&(kr,0===eg&&u(Iv)),e}function lr(){var e,r,n,i;if(eg++,e=$y,35===t.charCodeAt($y)?(r=Qv,$y++):(r=kr,0===eg&&u(Dv)),r!==kr){for(n=[],Bv.test(t.charAt($y))?(i=t.charAt($y),$y++):(i=kr,0===eg&&u(Mv));i!==kr;)n.push(i),Bv.test(t.charAt($y))?(i=t.charAt($y),$y++):(i=kr,0===eg&&u(Mv));n!==kr?(r=[r,n],e=r):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Ov)),e}function cr(){var e,r,n,i;if(eg++,e=$y,91===t.charCodeAt($y)?(r=xl,$y++):(r=kr,0===eg&&u(kl)),r!==kr){for(n=[],i=ur();i!==kr;)n.push(i),i=ur();n!==kr?(93===t.charCodeAt($y)?(i=El,$y++):(i=kr,0===eg&&u(_l)),i!==kr?(r=[r,n,i],e=r):($y=e,e=kr)):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Uv)),e}function fr(){var e;return eg++,Gv.test(t.charAt($y))?(e=t.charAt($y),$y++):(e=kr,0===eg&&u(Hv)),e===kr&&(Xv.test(t.charAt($y))?(e=t.charAt($y),$y++):(e=kr,0===eg&&u(zv)),e===kr&&(Vv.test(t.charAt($y))?(e=t.charAt($y),$y++):(e=kr,0===eg&&u(Wv)),e===kr&&($v.test(t.charAt($y))?(e=t.charAt($y),$y++):(e=kr,0===eg&&u(Jv)),e===kr&&(Yv.test(t.charAt($y))?(e=t.charAt($y),$y++):(e=kr,0===eg&&u(Kv)),e===kr&&(Zv.test(t.charAt($y))?(e=t.charAt($y),$y++):(e=kr,0===eg&&u(ey)),e===kr&&(ty.test(t.charAt($y))?(e=t.charAt($y),$y++):(e=kr,0===eg&&u(ry)),e===kr&&(ny.test(t.charAt($y))?(e=t.charAt($y),$y++):(e=kr,0===eg&&u(iy)),e===kr&&(oy.test(t.charAt($y))?(e=t.charAt($y),$y++):(e=kr,0===eg&&u(sy)),e===kr&&(ay.test(t.charAt($y))?(e=t.charAt($y),$y++):(e=kr,0===eg&&u(uy)),e===kr&&(ly.test(t.charAt($y))?(e=t.charAt($y),$y++):(e=kr,0===eg&&u(cy)),e===kr&&(fy.test(t.charAt($y))?(e=t.charAt($y),$y++):(e=kr,0===eg&&u(py)),e===kr&&(hy.test(t.charAt($y))?(e=t.charAt($y),$y++):(e=kr,0===eg&&u(dy)),e===kr&&(vy.test(t.charAt($y))?(e=t.charAt($y),$y++):(e=kr,0===eg&&u(yy))))))))))))))),eg--,e===kr&&(kr,0===eg&&u(qv)),e}function pr(){var e;return eg++,e=fr(),e===kr&&(95===t.charCodeAt($y)?(e=by,$y++):(e=kr,0===eg&&u(my))),eg--,e===kr&&(kr,0===eg&&u(gy)),e}function hr(){var e,r,n,i;if(eg++,e=$y,r=pr(),r===kr&&(Td.test(t.charAt($y))?(r=t.charAt($y),$y++):(r=kr,0===eg&&u(Cd))),r!==kr){for(n=[],i=pr(),i===kr&&(Td.test(t.charAt($y))?(i=t.charAt($y),$y++):(i=kr,0===eg&&u(Cd)),i===kr&&(xy.test(t.charAt($y))?(i=t.charAt($y),$y++):(i=kr,0===eg&&u(ky)),i===kr&&(Ey.test(t.charAt($y))?(i=t.charAt($y),$y++):(i=kr,0===eg&&u(_y)),i===kr&&(Ay.test(t.charAt($y))?(i=t.charAt($y),$y++):(i=kr,0===eg&&u(Sy))))));i!==kr;)n.push(i),(i=pr())===kr&&(Td.test(t.charAt($y))?(i=t.charAt($y),$y++):(i=kr,0===eg&&u(Cd)),i===kr&&(xy.test(t.charAt($y))?(i=t.charAt($y),$y++):(i=kr,0===eg&&u(ky)),i===kr&&(Ey.test(t.charAt($y))?(i=t.charAt($y),$y++):(i=kr,0===eg&&u(_y)),i===kr&&(Ay.test(t.charAt($y))?(i=t.charAt($y),$y++):(i=kr,0===eg&&u(Sy))))));n!==kr?(Jy=e,r=Iy(r,n),e=r):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(wy)),e}function dr(){var e;return eg++,e=pr(),e===kr&&(45===t.charCodeAt($y)?(e=Ic,$y++):(e=kr,0===eg&&u(Tc)),e===kr&&(Td.test(t.charAt($y))?(e=t.charAt($y),$y++):(e=kr,0===eg&&u(Cd)),e===kr&&(xy.test(t.charAt($y))?(e=t.charAt($y),$y++):(e=kr,0===eg&&u(ky)),e===kr&&(Ey.test(t.charAt($y))?(e=t.charAt($y),$y++):(e=kr,0===eg&&u(_y)),e===kr&&(Ay.test(t.charAt($y))?(e=t.charAt($y),$y++):(e=kr,0===eg&&u(Sy))))))),eg--,e===kr&&(kr,0===eg&&u(Ty)),e}function vr(){var e,r,n,i;if(eg++,e=$y,(r=fr())!==kr){for(n=[],i=dr(),i===kr&&(46===t.charCodeAt($y)?(i=ea,$y++):(i=kr,0===eg&&u(ta)));i!==kr;)n.push(i),(i=dr())===kr&&(46===t.charCodeAt($y)?(i=ea,$y++):(i=kr,0===eg&&u(ta)));n!==kr?(Jy=e,r=Fy(r,n),e=r):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Cy)),e}function yr(){var e,r,n,i;if(eg++,e=$y,r=pr(),r===kr&&(Td.test(t.charAt($y))?(r=t.charAt($y),$y++):(r=kr,0===eg&&u(Cd)),r===kr&&(58===t.charCodeAt($y)?(r=sd,$y++):(r=kr,0===eg&&u(ad)),r===kr&&(r=gr()))),r!==kr){for(n=[],i=dr(),i===kr&&(46===t.charCodeAt($y)?(i=ea,$y++):(i=kr,0===eg&&u(ta)),i===kr&&(58===t.charCodeAt($y)?(i=sd,$y++):(i=kr,0===eg&&u(ad)),i===kr&&(i=gr())));i!==kr;)n.push(i),(i=dr())===kr&&(46===t.charCodeAt($y)?(i=ea,$y++):(i=kr,0===eg&&u(ta)),i===kr&&(58===t.charCodeAt($y)?(i=sd,$y++):(i=kr,0===eg&&u(ad)),i===kr&&(i=gr())));n!==kr?(Jy=e,r=jy(r,n),e=r):($y=e,e=kr)}else $y=e,e=kr;return eg--,e===kr&&(r=kr,0===eg&&u(Ry)),e}function gr(){var e;return eg++,e=br(),e===kr&&(e=wr()),eg--,e===kr&&(kr,0===eg&&u(Ny)),e}function br(){var e,r,n,i,o;return eg++,e=$y,r=$y,37===t.charCodeAt($y)?(n=Py,$y++):(n=kr,0===eg&&u(Oy)),n!==kr?(i=mr(),i!==kr?(o=mr(),o!==kr?(n=[n,i,o],r=n):($y=r,r=kr)):($y=r,r=kr)):($y=r,r=kr),r!==kr&&(Jy=e,r=Qy(r)),e=r,eg--,e===kr&&(r=kr,0===eg&&u(Ly)),e}function mr(){var e;return eg++,Td.test(t.charAt($y))?(e=t.charAt($y),$y++):(e=kr,0===eg&&u(Cd)),e===kr&&(By.test(t.charAt($y))?(e=t.charAt($y),$y++):(e=kr,0===eg&&u(My)),e===kr&&(Uy.test(t.charAt($y))?(e=t.charAt($y),$y++):(e=kr,0===eg&&u(qy)))),eg--,e===kr&&(kr,0===eg&&u(Dy)),e}function wr(){var e,r,n;return eg++,e=$y,92===t.charCodeAt($y)?(r=xv,$y++):(r=kr,0===eg&&u(kv)),r!==kr?(95===t.charCodeAt($y)?(n=by,$y++):(n=kr,0===eg&&u(my)),n===kr&&(126===t.charCodeAt($y)?(n=Hy,$y++):(n=kr,0===eg&&u(Xy)),n===kr&&(46===t.charCodeAt($y)?(n=ea,$y++):(n=kr,0===eg&&u(ta)),n===kr&&(45===t.charCodeAt($y)?(n=Ic,$y++):(n=kr,0===eg&&u(Tc)),n===kr&&(33===t.charCodeAt($y)?(n=pl,$y++):(n=kr,0===eg&&u(hl)),n===kr&&(36===t.charCodeAt($y)?(n=gd,$y++):(n=kr,0===eg&&u(bd)),n===kr&&(38===t.charCodeAt($y)?(n=zy,$y++):(n=kr,0===eg&&u(Vy)),n===kr&&(39===t.charCodeAt($y)?(n=ev,$y++):(n=kr,0===eg&&u(tv)),n===kr&&(40===t.charCodeAt($y)?(n=sn,$y++):(n=kr,0===eg&&u(an)),n===kr&&(41===t.charCodeAt($y)?(n=pn,$y++):(n=kr,0===eg&&u(hn)),n===kr&&(42===t.charCodeAt($y)?(n=dn,$y++):(n=kr,0===eg&&u(vn)),n===kr&&(43===t.charCodeAt($y)?(n=ll,$y++):(n=kr,0===eg&&u(cl)),n===kr&&(44===t.charCodeAt($y)?(n=lu,$y++):(n=kr,0===eg&&u(cu)),n===kr&&(59===t.charCodeAt($y)?(n=go,$y++):(n=kr,0===eg&&u(bo)),n===kr&&(58===t.charCodeAt($y)?(n=sd,$y++):(n=kr,0===eg&&u(ad)),n===kr&&(61===t.charCodeAt($y)?(n=Jl,$y++):(n=kr,0===eg&&u(Yl)),n===kr&&(47===t.charCodeAt($y)?(n=Yu,$y++):(n=kr,0===eg&&u(Ku)),n===kr&&(63===t.charCodeAt($y)?(n=al,$y++):(n=kr,0===eg&&u(ul)),n===kr&&(35===t.charCodeAt($y)?(n=Qv,$y++):(n=kr,0===eg&&u(Dv)),n===kr&&(64===t.charCodeAt($y)?(n=wd,$y++):(n=kr,0===eg&&u(xd)),n===kr&&(37===t.charCodeAt($y)?(n=Py,$y++):(n=kr,0===eg&&u(Oy)))))))))))))))))))))),n!==kr?(Jy=e,r=Wy(n),e=r):($y=e,e=kr)):($y=e,e=kr),eg--,e===kr&&(r=kr,0===eg&&u(Gy)),e}r=void 0!==r?r:{};var xr,kr={},Er={DOCUMENT:c},_r=c,Ar=o("[1] QueryUnit"),Sr=o("[2] Query"),Ir=function(e,t,r){return{token:"query",kind:"query",prologue:e,units:[t],inlineData:r}},Tr=o("[3] Prologue"),Cr=function(e,t){return{token:"prologue",base:e,prefixes:t}},Fr=o("[4] BaseDecl"),Rr="BASE",jr=n("BASE",!1),Nr="base",Lr=n("base",!1),Pr=function(e){og(e);var t={};return t.token="base",t.value=e,t},Or=o("[5] PrefixDecl"),Qr="PREFIX",Dr=n("PREFIX",!1),Br="prefix",Mr=n("prefix",!1),Ur=function(e,t){ig(e,t);var r={};return r.token="prefix",r.prefix=e,r.local=t,r},qr=o("[6] SelectQuery"),Gr=function(e,t,r,n){for(var i={named:[],implicit:[]},o=0;o<t.length;o++){var s=t[o];"default"===s.kind?i.implicit.push(s.graph):i.named.push(s.graph)}0===i.named.length&&0===i.implicit.length&&i.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var a={};return a.kind="select",a.token="executableunit",a.dataset=i,a.projection=e.vars,a.modifier=e.modifier,a.pattern=r,null!=n&&null!=n.limit&&(a.limit=n.limit),null!=n&&null!=n.offset&&(a.offset=n.offset),null!=n&&null!=n.order&&""!=n.order&&(a.order=n.order),null!=n&&null!=n.group&&(a.group=n.group),a},Hr=o("[7] SubSelect"),Xr=function(e,t,r){var n={};return n.kind="select",n.token="subselect",n.projection=e.vars,n.modifier=e.modifier,n.pattern=t,null!=r&&null!=r.limit&&(n.limit=r.limit),null!=r&&null!=r.offset&&(n.offset=r.offset),null!=r&&null!=r.order&&""!=r.order&&(n.order=r.order),null!=r&&null!=r.group&&(n.group=r.group),n},zr=o("[8] SelectClause"),Vr="SELECT",Wr=n("SELECT",!1),$r="select",Jr=n("select",!1),Yr="DISTINCT",Kr=n("DISTINCT",!1),Zr="distinct",en=n("distinct",!1),tn="REDUCED",rn=n("REDUCED",!1),nn="reduced",on=n("reduced",!1),sn="(",an=n("(",!1),un="AS",ln=n("AS",!1),cn="as",fn=n("as",!1),pn=")",hn=n(")",!1),dn="*",vn=n("*",!1),yn=function(e,t){var r=[];if(3===t.length&&"*"===t[1])return{vars:[{token:"variable",kind:"*"}],modifier:sg(e)};for(var n=0;n<t.length;n++){var i=t[n];3===i.length?r.push({token:"variable",kind:"var",value:i[1]}):r.push({token:"variable",kind:"aliased",expression:i[3],alias:i[7]})}return{vars:r,modifier:sg(e)}},gn=o("[9] ConstructQuery"),bn="CONSTRUCT",mn=n("CONSTRUCT",!1),wn="construct",xn=n("construct",!1),kn=function(e,t,r,n){for(var i={named:[],implicit:[]},o=0;o<t.length;o++){var s=t[o];"default"===s.kind?i.implicit.push(s.graph):i.named.push(s.graph)}0===i.named.length&&0===i.implicit.length&&i.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var a={};return a.kind="construct",a.token="executableunit",a.dataset=i,a.template=e,a.pattern=r,null!=n&&null!=n.limit&&(a.limit=n.limit),null!=n&&null!=n.offset&&(a.offset=n.offset),null!=n&&null!=n.order&&""!=n.order&&(a.order=n.order),a},En="WHERE",_n=n("WHERE",!1),An="where",Sn=n("where",!1),In="{",Tn=n("{",!1),Cn="}",Fn=n("}",!1),Rn=function(e,t,r){for(var n={named:[],implicit:[]},i=0;i<e.length;i++){var o=e[i];"default"===o.kind?n.implicit.push(o.graph):n.named.push(o.graph)}0===n.named.length&&0===n.implicit.length&&n.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var s={};return s.kind="construct",s.token="executableunit",s.dataset=n,s.template=t,s.pattern={token:"basicgraphpattern",triplesContext:t.triplesContext},null!=r&&null!=r.limit&&(s.limit=r.limit),null!=r&&null!=r.offset&&(s.offset=r.offset),null!=r&&null!=r.order&&""!=r.order&&(s.order=r.order),s},jn=o("[10] DescribeQuery"),Nn="DESCRIBE",Ln=n("DESCRIBE",!1),Pn=o("[11] AskQuery"),On="ASK",Qn=n("ASK",!1),Dn="ask",Bn=n("ask",!1),Mn=function(e,t){for(var r={named:[],implicit:[]},n=0;n<e.length;n++){var i=e[n];"implicit"===i.kind?r.implicit.push(i.graph):r.named.push(i.graph)}0===r.named.length&&0===r.implicit.length&&r.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var o={};return o.kind="ask",o.token="executableunit",o.dataset=r,o.pattern=t,o},Un=o("[12] DatasetClause"),qn="FROM",Gn=n("FROM",!1),Hn="from",Xn=n("from",!1),zn=function(e){return e},Vn=o("[13] DefaultGraphClause"),Wn=function(e){return{graph:e,kind:"default",token:"graphClause"}},$n=o("[14] NamedGraphClause"),Jn="NAMED",Yn=n("NAMED",!1),Kn="named",Zn=n("named",!1),ei=function(e){return{graph:e,kind:"named",token:"graphCluase"}},ti=o("[15] SourceSelector"),ri=o("[16] WhereClause"),ni=function(e){return e},ii=o("[17] SolutionModifier"),oi=function(e,t,r){var n={};return null!=r&&(null!=r.limit&&(n.limit=r.limit),null!=r.offset&&(n.offset=r.offset)),null!=e&&(n.group=e),n.order=t,n},si=o("[18] GroupClause"),ai="GROUP",ui=n("GROUP",!1),li="group",ci=n("group",!1),fi="BY",pi=n("BY",!1),hi="by",di=n("by",!1),vi=function(e){return e},yi=o("[19] GroupCondition"),gi=function(e){return e},bi=function(e){return e},mi=function(e,t){return 0!=t.length?{token:"aliased_expression",expression:e,alias:t[2]}:e},wi=function(e){return e},xi=o("[20] HavingClause"),ki="HAVING",Ei=n("HAVING",!1),_i=o("[21] HavingCondition"),Ai=o("[22] OrderClause"),Si="ORDER",Ii=n("ORDER",!1),Ti="order",Ci=n("order",!1),Fi=function(e){return e},Ri=o("[23] OrderCondition"),ji="ASC",Ni=n("ASC",!1),Li="asc",Pi=n("asc",!1),Oi="DESC",Qi=n("DESC",!1),Di="desc",Bi=n("desc",!1),Mi=function(e,t){return{direction:e.toUpperCase(),expression:t}},Ui=function(e){if("var"===e.token)var e={token:"expression",expressionType:"atomic",primaryexpression:"var",value:e};return{direction:"ASC",expression:e}},qi=o("[24] LimitOffsetClauses"),Gi=function(e){for(var t={},r=0;r<e.length;r++){var n=e[r];null!=n&&null!=n.limit?t.limit=n.limit:null!=n&&null!=n.offset&&(t.offset=n.offset)}return t},Hi=o("[25] LimitClause"),Xi="LIMIT",zi=n("LIMIT",!1),Vi="limit",Wi=n("limit",!1),$i=function(e){return{limit:parseInt(e.value)}},Ji=o("[26] OffsetClause"),Yi="OFFSET",Ki=n("OFFSET",!1),Zi="offset",eo=n("offset",!1),to=function(e){return{offset:parseInt(e.value)}},ro=o("[27] BindingsClause"),no="BINDINGS",io=n("BINDINGS",!1),oo=o("[28] BindingValue"),so="UNDEF",ao=n("UNDEF",!1),uo=o("[28]\tValuesClause\t  ::=\t( 'VALUES' DataBlock )?"),lo="VALUES",co=n("VALUES",!1),fo="values",po=n("values",!1),ho=function(e){return null!=e?e[1]:null},vo=o("[29] UpdateUnit"),yo=o("[30] Update"),go=";",bo=n(";",!1),mo=function(e,t,r){var n={};n.token="query",n.kind="update",n.prologue=e;var i=[t];return null!=r&&null!=r.length&&null!=r[3]&&null!=r[3].units&&(i=i.concat(r[3].units)),n.units=i,n},wo=o("[31] Update1"),xo=o("[32] Load"),ko="LOAD",Eo=n("LOAD",!1),_o="load",Ao=n("load",!1),So="INTO",Io=n("INTO",!1),To="into",Co=n("into",!1),Fo=function(e,t){var r={};return r.kind="load",r.token="executableunit",r.sourceGraph=e,null!=t&&(r.destinyGraph=t[2]),r},Ro=o("[33] Clear"),jo="CLEAR",No=n("CLEAR",!1),Lo="clear",Po=n("clear",!1),Oo="SILENT",Qo=n("SILENT",!1),Do="silent",Bo=n("silent",!1),Mo=function(e){var t={};return t.kind="clear",t.token="executableunit",t.destinyGraph=e,t},Uo=o("[34] Drop"),qo="DROP",Go=n("DROP",!1),Ho="drop",Xo=n("drop",!1),zo=function(e){var t={};return t.kind="drop",t.token="executableunit",t.destinyGraph=e,t},Vo=o("[35] Create"),Wo="CREATE",$o=n("CREATE",!1),Jo="create",Yo=n("create",!1),Ko=function(e){var t={};return t.kind="create",t.token="executableunit",t.destinyGraph=e,t},Zo=o("[36] InsertData"),es="INSERT",ts=n("INSERT",!1),rs="insert",ns=n("insert",!1),is="DATA",os=n("DATA",!1),ss="data",as=n("data",!1),us=function(e){var t={};return t.kind="insertdata",t.token="executableunit",t.quads=e,t},ls=o("[37] DeleteData"),cs="DELETE",fs=n("DELETE",!1),ps="delete",hs=n("delete",!1),ds=function(e){var t={};return t.kind="deletedata",t.token="executableunit",t.quads=e,t},vs=o("[38] DeleteWhere"),ys=function(e){var t={};t.kind="modify",t.pattern=e,t.with=null,t.using=null;var r=[],n=e.patterns[0];n=null==n.triplesContext&&null!=n.patterns?n.patterns[0].triplesContext:n.triplesContext;for(var i=0;i<n.length;i++){var o={},s=n[i];o.subject=s.subject,o.predicate=s.predicate,o.object=s.object,o.graph=s.graph,r.push(o)}return t.delete=r,t},gs=o("[39] Modify"),bs="WITH",ms=n("WITH",!1),ws="with",xs=n("with",!1),ks=function(e,t,r,n){var i={};return i.kind="modify",i.with=""!=e&&null!=e?e[2]:null,3!==t.length||""!==t[2]&&null!=t[2]?3===t.length&&null!=t[0].length&&null!=t[1].length&&null!=t[2].length?(i.delete=t[0],i.insert=t[2]):(i.insert=t,i.delete=null):(i.delete=t[0],i.insert=null),""!=r&&(i.using=r),i.pattern=n,i},Es=o("[40] DeleteClause"),_s=function(e){return e},As=o("[41] InsertClause"),Ss=o("[42] UsingClause"),Is="USING",Ts=n("USING",!1),Cs="using",Fs=n("using",!1),Rs=function(e){return null!=e.length?{kind:"named",uri:e[2]}:{kind:"default",uri:e}},js=o("[43] GraphRef"),Ns="GRAPH",Ls=n("GRAPH",!1),Ps="graph",Os=n("graph",!1),Qs=function(e){return e},Ds=o("[44] GraphRefAll"),Bs="DEFAULT",Ms=n("DEFAULT",!1),Us="default",qs=n("default",!1),Gs=function(){return"default"},Hs=function(){return"named"},Xs="ALL",zs=n("ALL",!1),Vs="all",Ws=n("all",!1),$s=function(){return"all"},Js=o("[45] QuadPattern"),Ys=function(e){return e.quadsContext},Ks=o("[46] QuadData"),Zs=o("[47] Quads"),ea=".",ta=n(".",!1),ra=function(e,t){var r=[];if(null!=e&&null!=e.triplesContext)for(var n=0;n<e.triplesContext.length;n++){var i=e.triplesContext[n];i.graph=null,r.push(i)}if(t&&t.length>0&&t[0].length>0&&(r=r.concat(t[0][0].quadsContext),null!=t[0][2]&&null!=t[0][2].triplesContext))for(var n=0;n<t[0][2].triplesContext.length;n++){var i=t[0][2].triplesContext[n];i.graph=null,r.push(i)}return{token:"quads",quadsContext:r}},na=o("[48] QuadsNotTriples"),ia=function(e,t){var r=[];if(null!=t)for(var n=0;n<t.triplesContext.length;n++){var i=t.triplesContext[n];i.graph=e,r.push(i)}return{token:"quadsnottriples",quadsContext:r}},oa=o("[49] TriplesTemplate"),sa=function(e,t){var r=e.triplesContext;return null!=t&&"object"==typeof t&&null!=t.length&&null!=t[3]&&null!=t[3].triplesContext&&(r=r.concat(t[3].triplesContext)),{token:"triplestemplate",triplesContext:r}},aa=o("[50] GroupGraphPattern"),ua=function(e){return e},la=o("[51] GroupGraphPatternSub"),ca=function(e,t){var r=[];null!=e&&e!=[]&&r.push(e);for(var n=0;n<t.length;n++)for(var i=0;i<t[n].length;i++)null!=t[n][i]&&null!=t[n][i].token&&r.push(t[n][i]);for(var o=[],s=[],a=[],u=[],n=0;n<r.length;n++)if("triplespattern"!==r[n].token&&"filter"!==r[n].token&&"bind"!==r[n].token){if(0!=s.length||0!=a.length){for(var l=[],i=0;i<s.length;i++)l=l.concat(s[i].triplesContext);l.length>0&&o.push({token:"basicgraphpattern",triplesContext:l}),s=[]}o.push(r[n])}else"triplespattern"===r[n].token?s.push(r[n]):"bind"===r[n].token?u.push(r[n]):a.push(r[n]);if(0!=s.length||0!=a.length){for(var l=[],i=0;i<s.length;i++)l=l.concat(s[i].triplesContext);l.length>0&&o.push({token:"basicgraphpattern",triplesContext:l})}return{token:"groupgraphpattern",patterns:o,filters:a,binds:u}},fa=o("[54] TriplesBlock"),pa=function(e,t){var r=e.triplesContext;return null!=t&&"object"==typeof t&&null!=t&&null!=t.length&&null!=t[2]&&null!=t[2].triplesContext&&(r=r.concat(t[2].triplesContext)),{token:"triplespattern",triplesContext:r}},ha=o("[53] GraphPatternNotTriples"),da=o("[54] OptionalGraphPattern"),va="OPTIONAL",ya=n("OPTIONAL",!1),ga="optional",ba=n("optional",!1),ma=function(e){return{token:"optionalgraphpattern",value:e}},wa=o("[55] GraphGraphPattern"),xa=function(e,t){for(var r=0;r<t.patterns.length;r++)for(var n=t.patterns[r],i=0;i<n.triplesContext.length;i++){var o=n.triplesContext[i];o.graph=e}return t.token="groupgraphpattern",t},ka=o("[56] ServiceGraphPattern"),Ea="SERVICE",_a=n("SERVICE",!1),Aa=function(e,t){return{token:"servicegraphpattern",status:"todo",value:[e,t]}},Sa=o("[57] MinusGraphPattern"),Ia="MINUS",Ta=n("MINUS",!1),Ca="minus",Fa=n("minus",!1),Ra=function(e){return{token:"minusgraphpattern",status:"todo",value:e}},ja=o("[58] GroupOrUnionGraphPattern"),Na="UNION",La=n("UNION",!1),Pa="union",Oa=n("union",!1),Qa=function(e,t){if(0===t.length)return e;for(var r={token:"graphunionpattern",value:[e]},n=0;n<t.length;n++)if(n==t.length-1)r.value.push(t[n][3]);else{r.value.push(t[n][3]);var i={token:"graphunionpattern",value:[r]};r=i}return r},Da=o("[59] Filter"),Ba="FILTER",Ma=n("FILTER",!1),Ua="filter",qa=n("filter",!1),Ga=function(e){return{token:"filter",value:e}},Ha=o("[60] Bind"),Xa="BIND",za=n("BIND",!1),Va="bind",Wa=n("bind",!1),$a=function(e,t){return{token:"bind",expression:e,as:t}},Ja=o("[60] Constraint"),Ya=o("[61] InlineData"),Ka=function(e){return e},Za=o("[62] DataBlock"),eu=o("[63] InlineDataOneVar"),tu=function(e,t){return{token:"inlineData",values:[{var:e,value:t}]}},ru=o("[64] InlineDataFull"),nu=function(e,t){return{token:"inlineData",values:[],todo:!0}},iu=o("[65] DataBlockValue"),ou=o("[61] FunctionCall"),su=function(e,t){var r={};return r.token="expression",r.expressionType="irireforfunction",r.iriref=e,r.args=t.value,r},au=o("[62] ArgList"),uu=function(){var e={};return e.token="args",e.value=[],e},lu=",",cu=n(",",!1),fu=function(e,t,r){for(var n=[],i=0;i<r.length;i++)n.push(r[i][2]);var o={};return o.token="args",o.value=[t].concat(n),null!=e&&"DISTINCT"===e.toUpperCase()?o.distinct=!0:o.distinct=!1,o},pu=o("[63] ExpressionList"),hu=function(e,t){for(var r=[],n=0;n<t.length;n++)r.push(t[n][2]);var i={};return i.token="args",i.value=[e].concat(r),i},du=o("[64] ConstructTemplate"),vu=function(e){return e},yu=o("[65] ConstructTriples"),gu=function(e,t){var r=e.triplesContext;return null!=t&&"object"==typeof t&&null!=t.length&&null!=t[3]&&null!=t[3].triplesContext&&(r=r.concat(t[3].triplesContext)),{token:"triplestemplate",triplesContext:r}},bu=o("[66] TriplesSameSubject"),mu=function(e,t){var r=t.triplesContext,n=e;if(t.pairs)for(var i=0;i<t.pairs.length;i++){var o=t.pairs[i],s=null;null!=o[1].length&&(o[1]=o[1][0]),n.token&&"triplesnodecollection"===n.token?(s={subject:n.chainSubject[0],predicate:o[0],object:o[1]},r.push(s),r=r.concat(n.triplesContext)):(s={subject:n,predicate:o[0],object:o[1]},r.push(s))}var a={};return a.token="triplessamesubject",a.triplesContext=r,a.chainSubject=n,a},wu=function(e,t){var r=e.triplesContext,n=e.chainSubject;if(t.pairs)for(var i=0;i<t.pairs.length;i++){var o=t.pairs[i];if(null!=o[1].length&&(o[1]=o[1][0]),"triplesnodecollection"===e.token)for(var s=0;s<n.length;s++){var a=n[s];if(null!=a.triplesContext){var u={subject:a.chainSubject,predicate:o[0],object:o[1]};r.concat(a.triplesContext)}else{var u={subject:n[s],predicate:o[0],object:o[1]};r.push(u)}}else{var u={subject:n,predicate:o[0],object:o[1]};r.push(u)}}var l={};return l.token="triplessamesubject",l.triplesContext=r,l.chainSubject=n,l},xu=o("[83] PropertyListPathNotEmpty"),ku=function(e,t,r){var n={};n.token="propertylist";for(var i=[],o=[],s=0;s<t.length;s++)null!=t[s].triplesContext?(i=i.concat(t[s].triplesContext),"triplesnodecollection"===t[s].token&&null!=t[s].chainSubject.length?o.push([e,t[s].chainSubject[0]]):o.push([e,t[s].chainSubject])):o.push([e,t[s]]);for(var s=0;s<r.length;s++)for(var a=r[s][3],u=a[0],l=a[2]||[],c=0;c<l.length;c++)null!=l[c].triplesContext?(i=i.concat(l[c].triplesContext),o.push([u,l[c].chainSubject])):o.push([u,l[c]]);return n.pairs=o,n.triplesContext=i,n},Eu=o("[67] PropertyListNotEmpty"),_u=function(e,t,r){var n={};n.token="propertylist";for(var i=[],o=[],s=0;s<t.length;s++)null!=t[s].triplesContext?(i=i.concat(t[s].triplesContext),"triplesnodecollection"===t[s].token&&null!=t[s].chainSubject.length?o.push([e,t[s].chainSubject[0]]):o.push([e,t[s].chainSubject])):o.push([e,t[s]]);for(var s=0;s<r.length;s++)for(var a=r[s][3],u=a[0],l=a[2]||[],c=0;c<l.length;c++)null!=l[c].triplesContext?(i=i.concat(l[c].triplesContext),o.push([u,l[c].chainSubject])):o.push([u,l[c]]);return n.pairs=o,n.triplesContext=i,n},Au=o("[68] PropertyList"),Su=o("[86] ObjectListPath"),Iu=function(e,t){var r=[];r.push(e);for(var n=0;n<t.length;n++)for(var i=0;i<t[n].length;i++)"object"==typeof t[n][i]&&null!=t[n][i].token&&r.push(t[n][i]);return r},Tu=o("[69] ObjectList"),Cu=function(e,t){var r=[];r.push(e);for(var n=0;n<t.length;n++)for(var i=0;i<t[n].length;i++)"object"==typeof t[n][i]&&null!=t[n][i].token&&r.push(t[n][i]);return r},Fu=o("[87] ObjectPath"),Ru=o("[70] Object"),ju=o("[71] Verb"),Nu="a",Lu=n("a",!1),Pu=function(){return{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"}},Ou=o("[72] TriplesSameSubjectPath"),Qu=function(e,t){var r=t.triplesContext,n=e;if(t.pairs)for(var i=0;i<t.pairs.length;i++){var o=t.pairs[i],s=null;null!=o[1].length&&(o[1]=o[1][0]),n.token&&"triplesnodecollection"===n.token?(s={subject:n.chainSubject[0],predicate:o[0],object:o[1]},"path"===s.predicate.token&&"element"===s.predicate.kind&&(s.predicate=s.predicate.value),r.push(s),r=r.concat(n.triplesContext)):(s={subject:n,predicate:o[0],object:o[1]},"path"===s.predicate.token&&"element"===s.predicate.kind&&(s.predicate=s.predicate.value),r.push(s))}var a={};return a.token="triplessamesubject",a.triplesContext=r,a.chainSubject=n,a},Du=function(e,t){var r=e.triplesContext,n=e.chainSubject;if(null!=t&&null!=t.pairs)for(var i=0;i<t.pairs.length;i++){var o=t.pairs[i];if(null!=o[1].length&&(o[1]=o[1][0]),"triplesnodecollection"===e.token)for(var s=0;s<n.length;s++){var a=n[s];if(null!=a.triplesContext){var u={subject:a.chainSubject,predicate:o[0],object:o[1]};r.concat(a.triplesContext)}else{var u={subject:n[s],predicate:o[0],object:o[1]};r.push(u)}}else{var u={subject:n,predicate:o[0],object:o[1]};r.push(u)}}var l={};return l.token="triplessamesubject",l.triplesContext=r,l.chainSubject=n,l},Bu=o("[73] PropertyListNotEmptyPath"),Mu=function(e,t,r){var n={};n.token="propertylist";for(var i=[],o=[],s=0;s<t.length;s++)null!=t[s].triplesContext?(i=i.concat(t[s].triplesContext),"triplesnodecollection"===t[s].token&&null!=t[s].chainSubject.length?o.push([e,t[s].chainSubject[0]]):o.push([e,t[s].chainSubject])):o.push([e,t[s]]);for(var s=0;s<r.length;s++)for(var a=r[s][3],u=a[0],l=a[1]||[],c=0;c<l.length;c++)null!=l[c].triplesContext?(i=i.concat(l[c].triplesContext),o.push([u,l[c].chainSubject])):o.push([u,l[c]]);return n.pairs=o,n.triplesContext=i,n},Uu=o("[74] PropertyListPath"),qu=o("[75]"),Gu=function(e){var t={};return t.token="path",t.kind="element",t.value=e,e},Hu=o("[76] VerbSimple"),Xu=o("[77] Path"),zu=o("[78] PathAlternative"),Vu="|",Wu=n("|",!1),$u=function(e,t){if(null==t||0===t.length)return e;for(var r=[],n=0;n<t.length;n++)r.push(t[1]);var i={};return i.token="path",i.kind="alternative",i.value=r,i},Ju=o("[79] PathSequence"),Yu="/",Ku=n("/",!1),Zu=function(e,t){if(null==t||0===t.length)return e;for(var r=[e],n=0;n<t.length;n++)r.push(t[n][1]);var i={};return i.token="path",i.kind="sequence",i.value=r,i},el=o("[88] PathElt"),tl=function(e,t){if(e.token&&"path"!=e.token&&""==t)return e;if(e.token&&e.token!=r&&""!=t){var r={};return r.token="path",r.kind="element",r.value=e,r.modifier=t,r}return e.modifier=t,e},rl=o("[81] PathEltOrInverse"),nl="^",il=n("^",!1),ol=function(e){var t={};return t.token="path",t.kind="inversePath",t.value=e,t},sl=o("[82] PathMod"),al="?",ul=n("?",!1),ll="+",cl=n("+",!1),fl=o("[83] PathPrimary"),pl="!",hl=n("!",!1),dl=o("[85] PathOneInPropertySet"),vl=o("[86] Integer"),yl=o("[100] TriplesNodePath"),gl=function(e){for(var t=[],r=[],n=null,i=0;i<e.length;i++){rg++;var o=null;null==e[i].chainSubject&&null==e[i].triplesContext?o=e[i]:(o=e[i].chainSubject,t=t.concat(e[i].triplesContext)),n={subject:{token:"blank",value:"_:"+rg},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first"},object:o},0==i&&r.push(n.subject),t.push(n),n=i===e.length-1?{subject:{token:"blank",value:"_:"+rg},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}:{subject:{token:"blank",value:"_:"+rg},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"blank",value:"_:"+(rg+1)}},t.push(n)}return{token:"triplesnodecollection",triplesContext:t,chainSubject:r}},bl=o("[87] TriplesNode"),ml=function(e){for(var t=[],r=[],n=null,i=0;i<e.length;i++){rg++;var o=null;null==e[i].chainSubject&&null==e[i].triplesContext?o=e[i]:(o=e[i].chainSubject,t=t.concat(o.triplesContext)),n={subject:{token:"blank",value:"_:"+rg},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first"},object:o},0==i&&r.push(n.subject),t.push(n),n=i===e.length-1?{subject:{token:"blank",value:"_:"+rg},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}:{subject:{token:"blank",value:"_:"+rg},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"blank",value:"_:"+(rg+1)}},t.push(n)}return{token:"triplesnodecollection",triplesContext:t,chainSubject:r}},wl=o("[101] BlankNodePropertyListPath"),xl="[",kl=n("[",!1),El="]",_l=n("]",!1),Al=function(e){rg++;for(var t={token:"blank",value:"_:"+rg},r=[],n=0;n<e.pairs.length;n++){var i=e.pairs[n],o={};o.subject=t,o.predicate=i[0],null!=i[1].length&&(i[1]=i[1][0]),o.object=i[1],r.push(o)}return{token:"triplesnode",kind:"blanknodepropertylist",triplesContext:e.triplesContext.concat(r),chainSubject:t}},Sl=o("[88] BlankNodePropertyList"),Il=function(e){rg++;for(var t={token:"blank",value:"_:"+rg},r=[],n=0;n<e.pairs.length;n++){var i=e.pairs[n],o={};o.subject=t,o.predicate=i[0],null!=i[1].length&&(i[1]=i[1][0]),o.object=i[1],r.push(o)}return{token:"triplesnode",kind:"blanknodepropertylist",triplesContext:e.triplesContext.concat(r),chainSubject:t}},Tl=o("[103] CollectionPath"),Cl=function(e){return e},Fl=o("[89] Collection"),Rl=o("[105] GraphNodePath"),jl=function(e){return e[1]},Nl=o("[90] GraphNode"),Ll=o("[91] VarOrTerm"),Pl=o("[92] VarOrIRIref"),Ol=o("[93] Var"),Ql=function(e){var t={};return t.token="var",t.value=e,t},Dl=o("[94] GraphTerm"),Bl=o("[95] Expression"),Ml=o("[96] ConditionalOrExpression"),Ul="||",ql=n("||",!1),Gl=function(e,t){if(0===t.length)return e;var r={};r.token="expression",r.expressionType="conditionalor";for(var n=[e],i=0;i<t.length;i++)n.push(t[i][3]);return r.operands=n,r},Hl=o("[97] ConditionalAndExpression"),Xl="&&",zl=n("&&",!1),Vl=function(e,t){if(0===t.length)return e;var r={};r.token="expression",r.expressionType="conditionaland";for(var n=[e],i=0;i<t.length;i++)n.push(t[i][3]);return r.operands=n,r},Wl=o("[98] ValueLogical"),$l=o("[99] RelationalExpression"),Jl="=",Yl=n("=",!1),Kl="!=",Zl=n("!=",!1),ec="<",tc=n("<",!1),rc=">",nc=n(">",!1),ic="<=",oc=n("<=",!1),sc=">=",ac=n(">=",!1),uc="I",lc=n("I",!1),cc="i",fc=n("i",!1),pc="N",hc=n("N",!1),dc="n",vc=n("n",!1),yc="O",gc=n("O",!1),bc="o",mc=n("o",!1),wc="T",xc=n("T",!1),kc="t",Ec=n("t",!1),_c=function(e,t){if(0===t.length)return e;if("i"===t[0][1]||"I"===t[0][1]||"n"===t[0][1]||"N"===t[0][1]){var r={};if("i"===t[0][1]||"I"===t[0][1]){var n="=";r.expressionType="conditionalor"}else{var n="!=";r.expressionType="conditionaland"}for(var i=e,o=[],s=0;s<t[0].length;s++)if("args"===t[0][s].token){o=t[0][s].value;break}r.token="expression",r.operands=[];for(var a=0;a<o.length;a++){var u={};u.token="expression",u.expressionType="relationalexpression",u.operator=n,u.op1=i,u.op2=o[a],r.operands.push(u)}return r}var r={};return r.expressionType="relationalexpression",r.operator=t[0][1],r.op1=e,r.op2=t[0][3],r.token="expression",r},Ac=o("[100] NumericExpression"),Sc=o("[101] AdditiveExpression"),Ic="-",Tc=n("-",!1),Cc=function(e,t){if(0===t.length)return e;var r={};r.token="expression",r.expressionType="additiveexpression",r.summand=e,r.summands=[];for(var n=0;n<t.length;n++){var i=t[n],o={};if(4==i.length&&"string"==typeof i[1])o.operator=i[1],o.expression=i[3];else{var s={},a=o[0],u=(o[1][1],o[1][3]);a.value<0?(o.operator="-",a.value=-a.value):o.operator="+",s.token="expression",s.expressionType="multiplicativeexpression",s.operator=a,s.factors=[{operator:null,expression:u}],o.expression=s}r.summands.push(o)}return r},Fc=o("[102] MultiplicativeExpression"),Rc=function(e,t){if(0===t.length)return e;var r={};r.token="expression",r.expressionType="multiplicativeexpression",r.factor=e,r.factors=[];for(var n=0;n<t.length;n++){var i=t[n],o={};o.operator=i[1],o.expression=i[3],r.factors.push(o)}return r},jc=o("[103] UnaryExpression"),Nc=function(e){var t={};return t.token="expression",t.expressionType="unaryexpression",t.unaryexpression="!",t.expression=e,t},Lc=function(e){var t={};return t.token="expression",t.expressionType="unaryexpression",t.unaryexpression="+",t.expression=e,t},Pc=function(e){var t={};return t.token="expression",t.expressionType="unaryexpression",t.unaryexpression="-",t.expression=e,t},Oc=o("[104] PrimaryExpression"),Qc=function(e){var t={};return t.token="expression",t.expressionType="atomic",t.primaryexpression="rdfliteral",t.value=e,t},Dc=function(e){var t={};return t.token="expression",t.expressionType="atomic",t.primaryexpression="numericliteral",t.value=e,t},Bc=function(e){var t={};return t.token="expression",t.expressionType="atomic",t.primaryexpression="booleanliteral",t.value=e,t},Mc=function(e){var t={};return t.token="expression",t.expressionType="atomic",t.primaryexpression="var",t.value=e,t},Uc=o("[105] BrackettedExpression"),qc=function(e){return e},Gc=o("[106] BuiltInCall"),Hc="STR",Xc=n("STR",!1),zc="str",Vc=n("str",!1),Wc=function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="str",t.args=[e],t},$c="LANG",Jc=n("LANG",!1),Yc="lang",Kc=n("lang",!1),Zc=function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="lang",t.args=[e],t},ef="LANGMATCHES",tf=n("LANGMATCHES",!1),rf="langmatches",nf=n("langmatches",!1),of=function(e,t){var r={};return r.token="expression",r.expressionType="builtincall",r.builtincall="langmatches",r.args=[e,t],r},sf="DATATYPE",af=n("DATATYPE",!1),uf="datatype",lf=n("datatype",!1),cf=function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="datatype",t.args=[e],t},ff="BOUND",pf=n("BOUND",!1),hf="bound",df=n("bound",!1),vf=function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="bound",t.args=[e],t},yf="IRI",gf=n("IRI",!1),bf="iri",mf=n("iri",!1),wf=function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="iri",t.args=[e],t},xf="URI",kf=n("URI",!1),Ef="uri",_f=n("uri",!1),Af=function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="uri",t.args=[e],t},Sf="BNODE",If=n("BNODE",!1),Tf="bnode",Cf=n("bnode",!1),Ff=function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="bnode",5===e.length?t.args=[e[2]]:t.args=null,t},Rf="COALESCE",jf=n("COALESCE",!1),Nf="coalesce",Lf=n("coalesce",!1),Pf=function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="coalesce",t.args=e,t},Of="IF",Qf=n("IF",!1),Df="if",Bf=n("if",!1),Mf=function(e,t,r){var n={};return n.token="expression",n.expressionType="builtincall",n.builtincall="if",n.args=[e,t,r],n},Uf="ISLITERAL",qf=n("ISLITERAL",!1),Gf="isliteral",Hf=n("isliteral",!1),Xf="isLITERAL",zf=n("isLITERAL",!1),Vf=function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="isliteral",t.args=[e],t},Wf="ISBLANK",$f=n("ISBLANK",!1),Jf="isblank",Yf=n("isblank",!1),Kf="isBLANK",Zf=n("isBLANK",!1),ep=function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="isblank",t.args=[e],t},tp="SAMETERM",rp=n("SAMETERM",!1),np="sameterm",ip=n("sameterm",!1),op=function(e,t){var r={};return r.token="expression",r.expressionType="builtincall",r.builtincall="sameterm",r.args=[e,t],r},sp="ISURI",ap=n("ISURI",!1),up="isuri",lp=n("isuri",!1),cp="isURI",fp=n("isURI",!1),pp="ISIRI",hp=n("ISIRI",!1),dp="isiri",vp=n("isiri",!1),yp="isIRI",gp=n("isIRI",!1),bp=function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="isuri",t.args=[e],t},mp="custom:",wp=n("custom:",!1),xp="CUSTOM:",kp=n("CUSTOM:",!1),Ep=/^[a-zA-Z0-9_]/,_p=i([["a","z"],["A","Z"],["0","9"],"_"],!1,!1),Ap=function(e,t,r){var n={};n.token="expression",n.expressionType="custom",n.name=e.join("");for(var i=[],o=0;o<t.length;o++)i.push(t[o][1]);return i.push(r),n.args=i,n},Sp=o("[107] RegexExpression"),Ip="REGEX",Tp=n("REGEX",!1),Cp="regex",Fp=n("regex",!1),Rp=function(e,t,r){var n={};return n.token="expression",n.expressionType="regex",n.text=e,n.pattern=t,null!=r&&(n.flags=r[2]),n},jp=o("[108] ExistsFunc"),Np="EXISTS",Lp=n("EXISTS",!1),Pp="exists",Op=n("exists",!1),Qp=function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="exists",t.args=[e],t},Dp=o("[109] NotExistsFunc"),Bp="NOT",Mp=n("NOT",!1),Up="not",qp=n("not",!1),Gp=function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="notexists",t.args=[e],t},Hp=o("[110] Aggregate"),Xp="COUNT",zp=n("COUNT",!1),Vp="count",Wp=n("count",!1),$p=function(e,t){var r={};return r.token="expression",r.expressionType="aggregate",r.aggregateType="count",r.distinct=""!=e&&null!=e?"DISTINCT":e,r.expression=t,r},Jp="GROUP_CONCAT",Yp=n("GROUP_CONCAT",!1),Kp="group_concat",Zp=n("group_concat",!1),eh="SEPARATOR",th=n("SEPARATOR",!1),rh=function(e,t,r){var n={};return n.token="expression",n.expressionType="aggregate",n.aggregateType="group_concat",n.distinct=""!=e&&null!=e?"DISTINCT":e,n.expression=t,n.separator=r,n},nh="SUM",ih=n("SUM",!1),oh="sum",sh=n("sum",!1),ah=function(e,t){var r={};return r.token="expression",r.expressionType="aggregate",r.aggregateType="sum",r.distinct=""!=e&&null!=e?"DISTINCT":e,r.expression=t,r},uh="MIN",lh=n("MIN",!1),ch="min",fh=n("min",!1),ph=function(e,t){var r={};return r.token="expression",r.expressionType="aggregate",r.aggregateType="min",r.distinct=""!=e&&null!=e?"DISTINCT":e,r.expression=t,r},hh="MAX",dh=n("MAX",!1),vh="max",yh=n("max",!1),gh=function(e,t){var r={};return r.token="expression",r.expressionType="aggregate",r.aggregateType="max",r.distinct=""!=e&&null!=e?"DISTINCT":e,r.expression=t,r},bh="AVG",mh=n("AVG",!1),wh="avg",xh=n("avg",!1),kh=function(e,t){var r={};return r.token="expression",r.expressionType="aggregate",r.aggregateType="avg",r.distinct=""!=e&&null!=e?"DISTINCT":e,r.expression=t,r},Eh=o("[117] IRIrefOrFunction"),_h=function(e,t){var r={};return r.token="expression",r.expressionType="irireforfunction",r.iriref=e,r.args=null!=t?t.value:t,r},Ah=o("[112] RDFLiteral"),Sh="^^",Ih=n("^^",!1),Th=function(e,t){return"string"==typeof t&&t.length>0?{token:"literal",value:e.value,lang:t.slice(1),type:null}:null!=t&&"object"==typeof t?(t.shift(),{token:"literal",value:e.value,lang:null,type:t[0]}):{token:"literal",value:e.value,lang:null,type:null}},Ch=o("[113] NumericLiteral"),Fh=o("[114] NumericLiteralUnsigned"),Rh=o("[115] NumericLiteralPositive"),jh=o("[116] NumericLiteralNegative"),Nh=o("[117] BooleanLiteral"),Lh="TRUE",Ph=n("TRUE",!1),Oh="true",Qh=n("true",!1),Dh=function(){var e={};return e.token="literal",e.lang=null,e.type="http://www.w3.org/2001/XMLSchema#boolean",e.value=!0,e},Bh="FALSE",Mh=n("FALSE",!1),Uh="false",qh=n("false",!1),Gh=function(){var e={};return e.token="literal",e.lang=null,e.type="http://www.w3.org/2001/XMLSchema#boolean",e.value=!1,e},Hh=o("[118] String"),Xh=function(e){return{token:"string",value:e}},zh=o("[119] IRIref"),Vh=function(e){return{token:"uri",prefix:null,suffix:null,value:e}},Wh=function(e){return e},$h=o("[120] PrefixedName"),Jh=function(e){return{token:"uri",prefix:e[0],suffix:e[1],value:null}},Yh=function(e){return{token:"uri",prefix:e,suffix:"",value:null}},Kh=o("[121] BlankNode"),Zh=function(e){return{token:"blank",value:e}},ed=function(){return rg++,{token:"blank",value:"_:"+rg}},td=o("[122] IRI_REF"),rd=/^[^<>"{}|\^`\\]/,nd=i(["<",">",'"',"{","}","|","^","`","\\"],!0,!1),id=function(e){return e.join("")},od=o("[123] PNAME_NS"),sd=":",ad=n(":",!1),ud=o("[124] PNAME_LN"),ld=function(e,t){return[e,t]},cd=o("[125] BLANK_NODE_LABEL"),fd="_:",pd=n("_:",!1),hd=function(e){return e},dd=o("[126] VAR1"),vd=function(e){return e},yd=o("[127] VAR2"),gd="$",bd=n("$",!1),md=o("[128] LANGTAG"),wd="@",xd=n("@",!1),kd=/^[a-zA-Z]/,Ed=i([["a","z"],["A","Z"]],!1,!1),_d=/^[a-zA-Z0-9]/,Ad=i([["a","z"],["A","Z"],["0","9"]],!1,!1),Sd=function(e,t){return 0===t.length?("@"+e.join("")).toLowerCase():("@"+e.join("")+"-"+t[0][1].join("")).toLowerCase()},Id=o("[129] INTEGER"),Td=/^[0-9]/,Cd=i([["0","9"]],!1,!1),Fd=function(e){var t={};return t.token="literal",t.lang=null,t.type="http://www.w3.org/2001/XMLSchema#integer",t.value=tg(e),t},Rd=o("[130] DECIMAL"),jd=function(e,t,r){var n={};return n.token="literal",n.lang=null,n.type="http://www.w3.org/2001/XMLSchema#decimal",n.value=tg([e,t,r]),n},Nd=function(e,t){var r={};return r.token="literal",r.lang=null,r.type="http://www.w3.org/2001/XMLSchema#decimal",r.value=tg([e,t]),r},Ld=o("[131] DOUBLE"),Pd=function(e,t,r,n){var i={};return i.token="literal",i.lang=null,i.type="http://www.w3.org/2001/XMLSchema#double",i.value=tg([e,t,r,n]),i},Od=function(e,t,r){var n={};return n.token="literal",n.lang=null,n.type="http://www.w3.org/2001/XMLSchema#double",n.value=tg([e,t,r]),n},Qd=function(e,t){var r={};return r.token="literal",r.lang=null,r.type="http://www.w3.org/2001/XMLSchema#double",r.value=tg([e,t]),r},Dd=o("[132] INTEGER_POSITIVE"),Bd=function(e){return e.value="+"+e.value,e},Md=o("[133] DECIMAL_POSITIVE"),Ud=function(e){return e.value="+"+e.value,e},qd=o("[134] DOUBLE_POSITIVE"),Gd=o("[135] INTEGER_NEGATIVE"),Hd=function(e){return e.value="-"+e.value,e},Xd=o("[136] DECIMAL_NEGATIVE"),zd=o("[137] DOUBLE_NEGATIVE"),Vd=o("[138] EXPONENT"),Wd=/^[eE]/,$d=i(["e","E"],!1,!1),Jd=/^[+\-]/,Yd=i(["+","-"],!1,!1),Kd=function(e,t,r){return tg([e,t,r])},Zd=o("[139] STRING_LITERAL1"),ev="'",tv=n("'",!1),rv=/^[^'\\\n\r]/,nv=i(["'","\\","\n","\r"],!0,!1),iv=function(e){return tg(e)},ov=o("[140] STRING_LITERAL2"),sv='"',av=n('"',!1),uv=/^[^"\\\n\r]/,lv=i(['"',"\\","\n","\r"],!0,!1),cv=o("[141] STRING_LITERAL_LONG1"),fv="'''",pv=n("'''",!1),hv=/^[^'\\]/,dv=i(["'","\\"],!0,!1),vv=o("[142] STRING_LITERAL_LONG2"),yv='"""',gv=n('"""',!1),bv=/^[^"\\]/,mv=i(['"',"\\"],!0,!1),wv=o("[143] ECHAR"),xv="\\",kv=n("\\",!1),Ev=/^[tbnrf"']/,_v=i(["t","b","n","r","f",'"',"'"],!1,!1),Av=o("[144] NIL"),Sv=function(){return{token:"triplesnodecollection",triplesContext:[],chainSubject:[{token:"uri",value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}]}},Iv=o("[145] WS"),Tv=/^[ ]/,Cv=i([" "],!1,!1),Fv=/^[\t]/,Rv=i(["\t"],!1,!1),jv=/^[\r]/,Nv=i(["\r"],!1,!1),Lv=/^[\n]/,Pv=i(["\n"],!1,!1),Ov=o(" COMMENT"),Qv="#",Dv=n("#",!1),Bv=/^[^\n\r]/,Mv=i(["\n","\r"],!0,!1),Uv=o("[146] ANON"),qv=o("[147] PN_CHARS_BASE"),Gv=/^[A-Z]/,Hv=i([["A","Z"]],!1,!1),Xv=/^[a-z]/,zv=i([["a","z"]],!1,!1),Vv=/^[\xC0-\xD6]/,Wv=i([["À","Ö"]],!1,!1),$v=/^[\xD8-\xF6]/,Jv=i([["Ø","ö"]],!1,!1),Yv=/^[\xF8-\u02FF]/,Kv=i([["ø","˿"]],!1,!1),Zv=/^[\u0370-\u037D]/,ey=i([["Ͱ","ͽ"]],!1,!1),ty=/^[\u037F-\u1FFF]/,ry=i([["Ϳ","῿"]],!1,!1),ny=/^[\u200C-\u200D]/,iy=i([["‌","‍"]],!1,!1),oy=/^[\u2070-\u218F]/,sy=i([["⁰","↏"]],!1,!1),ay=/^[\u2C00-\u2FEF]/,uy=i([["Ⰰ","⿯"]],!1,!1),ly=/^[\u3001-\uD7FF]/,cy=i([["、","퟿"]],!1,!1),fy=/^[\uF900-\uFDCF]/,py=i([["豈","﷏"]],!1,!1),hy=/^[\uFDF0-\uFFFD]/,dy=i([["ﷰ","�"]],!1,!1),vy=/^[\u1000-\uEFFF]/,yy=i([["က",""]],!1,!1),gy=o("[148] PN_CHARS_U"),by="_",my=n("_",!1),wy=o("[149] VARNAME"),xy=/^[\xB7]/,ky=i(["·"],!1,!1),Ey=/^[\u0300-\u036F]/,_y=i([["̀","ͯ"]],!1,!1),Ay=/^[\u203F-\u2040]/,Sy=i([["‿","⁀"]],!1,!1),Iy=function(e,t){return e+t.join("")},Ty=o("[150] PN_CHARS"),Cy=o("[151] PN_PREFIX"),Fy=function(e,t){if("."==t[t.length-1])throw new Error("Wrong PN_PREFIX, cannot finish with '.'");return e+t.join("")},Ry=o("[152] PN_LOCAL"),jy=function(e,t){return e+(t||[]).join("")},Ny=o("[170] PLX"),Ly=o("[171] PERCENT"),Py="%",Oy=n("%",!1),Qy=function(e){return e.join("")},Dy=o("[172] HEX"),By=/^[A-F]/,My=i([["A","F"]],!1,!1),Uy=/^[a-f]/,qy=i([["a","f"]],!1,!1),Gy=o("[173] PN_LOCAL_ESC"),Hy="~",Xy=n("~",!1),zy="&",Vy=n("&",!1),Wy=function(e){return"\\"+e},$y=0,Jy=0,Yy=[{line:1,column:1}],Ky=0,Zy=[],eg=0;if("startRule"in r){if(!(r.startRule in Er))throw new Error("Can't start parsing from rule \""+r.startRule+'".');_r=Er[r.startRule]}var tg=function(e){for(var t="",r=0;r<e.length;r++)"string"==typeof e[r]?t+=e[r]:t+=e[r].join("");return t},rg=0,ng={},ig=function(e,t){ng[e]=t},og=function(e){ng[null]=e},sg=function(e){var t="";if(null==e)return null;for(var r=0;r<e.length;r++)t+=e[r];return t.toUpperCase()};if((xr=_r())!==kr&&$y===t.length)return xr;throw xr!==kr&&$y<t.length&&u(function(){return{type:"end"}}()),l(Zy,Ky<t.length?t.charAt(Ky):null,Ky<t.length?a(Ky,Ky+1):a(Ky,Ky))}return function(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}(e,Error),e.buildMessage=function(e,t){function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}function n(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}function i(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}function o(e){return s[e.type](e)}var s={literal:function(e){return'"'+n(e.text)+'"'},class:function(e){var t,r="";for(t=0;t<e.parts.length;t++)r+=e.parts[t]instanceof Array?i(e.parts[t][0])+"-"+i(e.parts[t][1]):i(e.parts[t]);return"["+(e.inverted?"^":"")+r+"]"},any:function(e){return"any character"},end:function(e){return"end of input"},other:function(e){return e.description}};return"Expected "+function(e){var t,r,n=new Array(e.length);for(t=0;t<e.length;t++)n[t]=o(e[t]);if(n.sort(),n.length>0){for(t=1,r=1;t<n.length;t++)n[t-1]!==n[t]&&(n[r]=n[t],r++);n.length=r}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}(e)+" but "+function(e){return e?'"'+n(e)+'"':"end of input"}(t)+" found."},{SyntaxError:e,parse:t}}()},function(e,t,r){var n=(r(63).Tree,r(0)),i=n,o=r(95).Lexicon;PersistentLexicon=function(e,t){var r=this;n.registerIndexedDB(r),this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri},this.oidCounter=1,r.dbName=t||"rdfstorejs";var i=r.indexedDB.open(this.dbName+"_lexicon",1);i.onerror=function(t){e(null,new Error("Error opening IndexedDB: "+t.target.errorCode))},i.onsuccess=function(t){r.db=t.target.result,e(r)},i.onupgradeneeded=function(e){r.db=e.target.result,r.db.createObjectStore("knownGraphs",{keyPath:"oid"}).createIndex("uriToken","uriToken",{unique:!0}),r.db.createObjectStore("components",{keyPath:"id",autoIncrement:!0}).createIndex("value","value",{unique:!0})}},PersistentLexicon.prototype.registerGraph=function(e,t,r){if(e!=this.defaultGraphOid){var n=this.db.transaction(["knownGraphs"],"readwrite");n.onerror=function(e){r(null,new Error(e.target.statusCode))};var i=n.objectStore("knownGraphs");i.get(t).onsuccess=function(n){n.target.result?r(!0):i.add({oid:e,uriToken:t}).onsuccess=function(e){r(!0)}}}else r()},PersistentLexicon.prototype.registeredGraphs=function(e,t){var r=[],n=this.db.transaction(["knownGraphs"],"readwrite").objectStore("knownGraphs"),i=n.openCursor();i.onsuccess=function(n){var i=n.target.result;i?(!0===e?r.push(i.value.uriToken):r.push(i.value.oid),i.continue()):t(r)},i.onerror=function(e){t(null,new Error("Error retrieving data from the cursor: "+e.target.errorCode))}},PersistentLexicon.prototype.registerUri=function(e,t){var r=this;if(e===this.defaultGraphUri)t(this.defaultGraphOid);else{var n=r.db.transaction(["components"],"readwrite").objectStore("components"),i=n.index("value").get("_u:"+e);i.onsuccess=function(r){var i=r.target.result;if(i){i.counter++;var o=i.id,s=n.put(i);s.onsuccess=function(e){t(o)},s.onerror=function(e){t(null,new Error("Error updating the URI data"+e.target.errorCode))}}else{var a=n.add({value:"_u:"+e,counter:0,uri:!0});a.onsuccess=function(e){t(e.target.result)},a.onerror=function(e){t(null,new Error("Error inserting the URI data"+e.target.errorCode))}}},i.onerror=function(e){t(null,new Error("Error retrieving the URI data"+e.target.errorCode))}}},PersistentLexicon.prototype.resolveUri=function(e,t){if(e===this.defaultGraphUri)t(this.defaultGraphOid);else{var r=this.db.transaction(["components"]).objectStore("components"),n=r.index("value").get("_u:"+e);n.onsuccess=function(e){t(null!=e.target.result?e.target.result.id:-1)},n.onerror=function(e){t(null,new Error("Error retrieving uri data "+e.target.errorCode))}}},PersistentLexicon.prototype.resolveUriCost=function(e,t){if(e===this.defaultGraphUri)t(0);else{var r=that.db.transaction(["components"]).objectStore("components"),n=r.index("value").get("_u:"+e);n.onsuccess=function(e){t(null!=e.target.result?e.target.result.cost:-1)},n.onerror=function(e){t(null,new Error("Error retrieving uri data "+e.target.errorCode))}}},PersistentLexicon.prototype.registerBlank=function(e){var t=guid(),r=this,n=r.db.transaction(["components"],"readwrite").objectStore("components"),i=n.add({value:"_b:"+t,counter:0,label:!0});i.onsuccess=function(t){e(t.target.result)},i.onerror=function(t){e(null,new Error("Error inserting the URI data"+t.target.errorCode))}},PersistentLexicon.prototype.resolveBlankCost=function(e,t){t(0)},PersistentLexicon.prototype.registerLiteral=function(e,t){var r=this,n=r.db.transaction(["components"],"readwrite").objectStore("components"),i=n.index("value").get("_l:"+e);i.onsuccess=function(r){var i=r.target.result;if(i){i.counter++;var o=i.id,s=n.put(i);s.onsuccess=function(e){t(o)},s.onerror=function(e){t(null,new Error("Error updating the literal data"+e.target.errorCode))}}else{var a=n.add({value:"_l:"+e,counter:0,literal:!0});a.onsuccess=function(e){t(e.target.result)},a.onerror=function(e){t(null,new Error("Error inserting the literal data"+e.target.errorCode))}}},i.onerror=function(e){t(null,new Error("Error retrieving the literal data"+e.target.errorCode))}},PersistentLexicon.prototype.resolveLiteral=function(e,t){var r=that.db.transaction(["components"]).objectStore("components"),n=r.index("value").get("_l:"+e);n.onsuccess=function(e){t(null!=e.target.result?e.target.result.id:-1)},n.onerror=function(e){t(null,new Error("Error retrieving literal data "+e.target.errorCode))}},PersistentLexicon.prototype.resolveLiteralCost=function(e,t){var r=that.db.transaction(["components"]).objectStore("components"),n=r.index("components").get(e);n.onsuccess=function(e){t(null!=e.target.result?e.target.result.cost:-1)},n.onerror=function(e){t(null,new Error("Error retrieving literal data "+e.target.errorCode))}},PersistentLexicon.prototype.parseLiteral=function(e){return o.prototype.parseLiteral(e)},PersistentLexicon.prototype.parseUri=function(e){return o.prototype.parseUri(e)},PersistentLexicon.prototype.retrieve=function(e,t){var r,n,i=this;e===this.defaultGraphOid?t({token:"uri",value:this.defaultGraphUri,prefix:null,suffix:null,defaultGraph:!0}):(r=i.db.transaction(["components"]),n=r.objectStore("components").get(e),n.onsuccess=function(e){if(null!=e.target.result)if(null!=e.target.result.label){var r="_:"+e.target.result.id;t({token:"blank",value:r})}else null!=e.target.result.uri?t(i.parseUri(e.target.result.value.slice(3,e.target.result.value.length))):null!=e.target.result.literal?t(i.parseLiteral(e.target.result.value.slice(3,e.target.result.value.length))):(console.log(e.target.result),t(null,new Error("Unknown type of component "+e.target.result)));else t(null,null)},n.onerror=function(e){t(null,new Error("Error searching in blanks data "+e.target.errorCode))})},PersistentLexicon.prototype.clear=function(e){var t=this;this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri};var r,n=t.db.transaction(["components"],"readwrite"),i=n.objectStore("components"),o=function(){null!=e&&e()};r=i.clear(),r.onsuccess=o,r.onerror=o},PersistentLexicon.prototype.unregister=function(e,t,r){var n=this;i.seq(function(r){n._unregisterTerm(e.subject.token,t.subject,r)},function(r){n._unregisterTerm(e.predicate.token,t.predicate,r)},function(r){n._unregisterTerm(e.object.token,t.object,r)},function(r){null!=e.graph?n._unregisterTerm(e.graph.token,t.graph,r):r()})(function(){r(!0)})},PersistentLexicon.prototype._unregisterTerm=function(e,t,r){var n,i=this,o=i.db.transaction(["components","knownGraphs"],"readwrite");if("uri"===e)if(t!=this.defaultGraphOid){n=o.objectStore("components").delete(t),n.onsuccess=function(){o.objectStore("knownGraphs").delete(t).onsuccess=function(){r()}}()}else r();else n=o.objectStore("components").delete(t),n.onsuccess=function(){r()}},e.exports={PersistentLexicon:PersistentLexicon}},function(e,t,r){var n=r(0);PersistentQuadBackend=function(e,t){var r=this;if(0!==arguments){n.registerIndexedDB(r),this.indexMap={},this.indices=["S","P","O","G","SP","SO","SG","PO","PG","OG","SPO","SPG","SOG","POG","SPOG"],this.componentOrders={S:["subject","predicate","object","graph"],P:["predicate","subject","object","graph"],O:["object","subject","predicate","graph"],G:["graph","subject","predicate","object"],SP:["subject","predicate","object","graph"],SO:["subject","object","predicate","graph"],SG:["subject","graph","predicate","object"],PO:["predicate","object","subject","graph"],PG:["predicate","graph","subject","object"],OG:["object","graph","subject","predicate"],SPO:["subject","predicate","object","graph"],SPG:["subject","predicate","graph","object"],SOG:["subject","object","graph","predicate"],POG:["predicate","object","graph","subject"],SPOG:["subject","predicate","object","graph"]},this.componentOrdersMap={};for(var i in this.componentOrders){var o=this.componentOrders[i],s=o.slice(0,i.length).sort().join(".");this.componentOrdersMap[s]=i}r.dbName=e.name||"rdfstorejs";var a=r.indexedDB.open(this.dbName+"_db",1);a.onerror=function(e){t(null,new Error("Error opening IndexedDB: "+e.target.errorCode))},a.onsuccess=function(e){r.db=e.target.result,t(r)},a.onupgradeneeded=function(e){var t=e.target.result,i=t.createObjectStore(r.dbName,{keyPath:"SPOG"});n.each(r.indices,function(e){"SPOG"!==e&&i.createIndex(e,e,{unique:!1})})}}},PersistentQuadBackend.prototype.index=function(e,t){var r=this;n.each(this.indices,function(t){e[t]=r._genMinIndexKey(e,t)});var i=r.db.transaction([r.dbName],"readwrite");i.oncomplete=function(e){},i.onerror=function(e){t(null,new Error(e.target.statusCode))},i.objectStore(r.dbName).add(e).onsuccess=function(e){t(!0)}},PersistentQuadBackend.prototype.range=function(e,t){var r,n=this,i=n.db.transaction([n.dbName]).objectStore(n.dbName),o=this._indexForPattern(e),s=this._genMinIndexKey(e,o),a=this._genMaxIndexKey(e,o),u=n.IDBKeyRange.bound(s,a,!1,!1),l=[];r="SPOG"===o?i:i.index(o),r.openCursor(u).onsuccess=function(e){var r=e.target.result;r?(l.push(r.value),r.continue()):t(l)}},PersistentQuadBackend.prototype.search=function(e,t){var r=this,n=r.db.transaction([r.dbName]).objectStore(r.dbName),i=this._genMinIndexKey(e,"SPOG"),o=n.get(i);o.onerror=function(e){t(null,new Error(e.target.statusCode))},o.onsuccess=function(e){t(null!=e.target.result)}},PersistentQuadBackend.prototype.delete=function(e,t){var r=this,n=r._genMinIndexKey(e,"SPOG"),i=r.db.transaction([r.dbName],"readwrite").objectStore(r.dbName).delete(n);i.onsuccess=function(){t(!0)},i.onerror=function(e){t(null,new Error(e.target.statusCode))}},PersistentQuadBackend.prototype._genMinIndexKey=function(e,t){var r=this.componentOrders[t];return n.map(r,function(t){return"string"==typeof e[t]||null==e[t]?"0":e[t]}).join(".")},PersistentQuadBackend.prototype._genMaxIndexKey=function(e,t){for(var r=this.componentOrders[t],i=[],o=0;o<r.length;o++){var s=r[o],a=e[s];i[o]="string"==typeof a?"z":a}return n.map(i,function(e){return""+e}).join(".")},PersistentQuadBackend.prototype._indexForPattern=function(e){var t=this,r=e.indexKey,n=r.sort().join("."),i=t.componentOrdersMap[n];if(null==i)throw new Error("Error, cannot find index for indexKey "+n);return i},PersistentQuadBackend.prototype.clear=function(e){var t,r=this,n=r.db.transaction([r.dbName],"readwrite");t=n.objectStore(r.dbName).clear(),t.onsuccess=function(){e()},t.onerror=function(){e()}},e.exports.PersistentQuadBackend=PersistentQuadBackend},function(e,t,r){var n=r(38).QuadIndex,i=r(0);QuadBackend=function(e,t){this.indexMap={},this.treeOrder=e.treeOrder,this.indices=e.index||QuadBackend.allIndices,this.componentOrders=QuadBackend.componentOrders;var r=this;i.eachSeries(this.indices,function(e,t){new n({order:r.treeOrder,componentOrder:r.componentOrders[e]},function(n){r.indexMap[e]=n,t()})},function(){t(r)})},QuadBackend.allIndices=["SPOG","GP","OGS","POG","GSP","OS"],QuadBackend.componentOrders={SPOG:["subject","predicate","object","graph"],GP:["graph","predicate","subject","object"],OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate","object"],OS:["object","subject","predicate","graph"]},QuadBackend.prototype._indexForPattern=function(e){for(var t=e.indexKey,r=0;r<QuadBackend.allIndices.length;r++)for(var n=QuadBackend.allIndices[r],o=QuadBackend.componentOrders[n],s=0;s<o.length&&!1!==i.include(t,o[s]);s++)if(s==t.length-1)return n;return"SPOG"},QuadBackend.prototype.index=function(e,t){var r=this;i.eachSeries(this.indices,function(t,n){r.indexMap[t].insert(e,function(){n()})},function(){t(!0)})},QuadBackend.prototype.range=function(e,t){var r=this._indexForPattern(e),n=this.indexMap[r];null!=n&&n.range(e,function(e){t(e)})},QuadBackend.prototype.search=function(e,t){var r=this.indexMap.SPOG;null!=r&&r.search(e,function(e){t(null!=e)})},QuadBackend.prototype.delete=function(e,t){var r=this;i.eachSeries(this.indices,function(t,n){r.indexMap[t].delete(e,function(){n()})},function(){t(!0)})},QuadBackend.prototype.clear=function(e){var t=this;i.eachSeries(this.indices,function(e,r){new n({order:t.treeOrder,componentOrder:t.componentOrders[e]},function(n){t.indexMap[e]=n,r()})},function(){e(!0)})},e.exports.QuadBackend=QuadBackend},function(e,t,r){function n(e,t,r){this.name="BindExpressionError",this.bind=t,this.error=r,this.message=e}var i=r(62).AbstractQueryTree,o=r(62).NonSupportedSparqlFeatureError,s=r(0),a=r(38),u=r(176).QueryPlan,l=r(96).QueryFilters,c=r(64),f=r(177).RDFLoader,p=r(168).CallbacksBackend,h=r(0),d=r(0);n.prototype=new Error,n.constructor=n,QueryEngine=function(e){0!=arguments.length&&(this.backend=e.backend,this.lexicon=e.lexicon,this.eventsOnBatchLoad=e.eventsOnBatchLoad||!1,this.defaultPrefixes={},this.abstractQueryTree=new i,this.rdfLoader=new f(e.communication),this.callbacksBackend=new p(this),this.customFns=e.customFns||{})},QueryEngine.prototype.setCustomFunctions=function(e){this.customFns=e},QueryEngine.prototype.registerNsInEnvironment=function(e,t){var r=[];null!=e&&null!=e.prefixes&&(r=e.prefixes);var n={};for(var i in this.defaultPrefixes)n[i]=this.defaultPrefixes[i];for(var o=0;o<r.length;o++){var s=r[o];"prefix"===s.token&&(n[s.prefix]=s.local)}t.namespaces=n,null!=e&&e.base&&"object"==typeof e.base?t.base=e.base.value:t.base=null},QueryEngine.prototype.applyModifier=function(e,t){if("DISTINCT"==e){for(var r={},n=[],i=0;i<t.length;i++){var o=t[i],s="";for(var a in o){var u=o[a];null==u?s=s+a+"null":"literal"==u.token?(null!=u.value&&(s+=u.value),null!=u.lang&&(s+=u.lang),null!=u.type&&(s+=u.type)):s=u.value?s+a+u.value:s+a+u}null==r[s]&&(n.push(o),r[s]=!0)}return n}return t},QueryEngine.prototype.applyLimitOffset=function(e,t,r){return null==t&&null==e?r:(null==e&&(e=0),t=null==t?r.length:e+t,r.slice(e,t))},QueryEngine.prototype.applySingleOrderBy=function(e,t,r,n,i){var o=[],s=this;h.eachSeries(e,function(e,i){l.collect(e.expression,[t],r,n,s,function(e){o.push(e[0].value),i()})},function(){i({binding:t,value:o})})},QueryEngine.prototype.applyOrderBy=function(e,t,r,n,i){var o=this,s=[];null!=e&&e.length>0?h.eachSeries(t,function(t,i){o.applySingleOrderBy(e,t,r,n,function(e){s.push(e),i()})},function(){s.sort(function(t,r){return o.compareFilteredBindings(t,r,e,n)});for(var t=[],r=0;r<s.length;r++)t.push(s[r].binding);i(t)}):i(t)},QueryEngine.prototype.compareFilteredBindings=function(e,t,r,n){for(var i=0;;){if(i==e.value.length)return 0;var o,s=r[i].direction;if(null!=e.value[i]||null!=t.value[i]){if(null==e.value[i])o={value:!1};else if(null==t.value[i])o={value:!0};else{if("blank"===e.value[i].token&&"blank"===t.value[i].token){i++;continue}if("blank"===e.value[i].token)o={value:!1};else if("blank"===t.value[i].token)o={value:!0};else if("uri"===e.value[i].token&&"uri"===t.value[i].token){if(1==l.runEqualityFunction(e.value[i],t.value[i],[],this,n).value){i++;continue}o=l.runTotalGtFunction(e.value[i],t.value[i],[])}else if("uri"===e.value[i].token)o={value:!1};else if("uri"===t.value[i].token)o={value:!0};else if("literal"===e.value[i].token&&"literal"===t.value[i].token&&null==e.value[i].type&&null==t.value[i].type){if(1==l.runEqualityFunction(e.value[i],t.value[i],[],this,n).value){i++;continue}o=l.runTotalGtFunction(e.value[i],t.value[i],[])}else if("literal"===e.value[i].token&&null==e.value[i].type)o={value:!1};else if("literal"===t.value[i].token&&null==t.value[i].type)o={value:!0};else{if(1==l.runEqualityFunction(e.value[i],t.value[i],[],this,n).value){i++;continue}o=l.runTotalGtFunction(e.value[i],t.value[i],[])}}return 1==o.value?"ASC"===s?1:-1:"ASC"===s?-1:1}i++}},QueryEngine.prototype.removeDefaultGraphBindings=function(e,t){for(var r=[],n={},i=0;i<t.named.length;i++)n[t.named[i].oid]=!0;for(i=0;i<t.implicit.length;i++)null==n[t.implicit[i].oid]&&r.push(t.implicit[i].oid);var o=[];for(i=0;i<e.length;i++){var s=e[i],a=!1;for(var u in s){for(var l=0;l<n.length;l++)if(s[u]===n[l]){a=!0;break}if(a)break}a||o.push(s)}return o},QueryEngine.prototype.aggregateBindings=function(e,t,r,n,i){this.copyDenormalizedBindings(t,n.outCache,function(t){for(var o={},s=0;s<e.length;s++){var a=l.runAggregator(e[s],t,this,r,n);e[s].alias?o[e[s].alias.value]=a:o[e[s].value.value]=a}i(o)})},QueryEngine.prototype.projectBindings=function(e,t,r){if("*"===e[0].kind)return t;for(var n=[],i=0;i<t.length;i++){for(var o=t[i],s={},a=!0,u=0;u<e.length;u++)if("variable"==e[u].token&&"aliased"!=e[u].kind)s[e[u].value.value]=o[e[u].value.value];else if("variable"==e[u].token&&"aliased"==e[u].kind){var c=l.runFilter(e[u].expression,o,this,r,{blanks:{},outCache:{}});if(l.isEbvError(c)){a=!1;break}s[e[u].alias.value]=c}!0===a&&n.push(s)}return n},QueryEngine.prototype.resolveNsInEnvironment=function(e,t){return t.namespaces[e]},QueryEngine.prototype.normalizeTerm=function(e,t,r,n){if("uri"===e.token){var i=s.lexicalFormBaseUri(e,t);null==i?n(null):r?this.lexicon.registerUri(i,n):this.lexicon.resolveUri(i,n)}else if("literal"===e.token){var o=s.lexicalFormLiteral(e,t);r?this.lexicon.registerLiteral(o,n):this.lexicon.resolveLiteral(o,n)}else if("blank"===e.token){var a=e.value,u=t.blanks[a];null!=u?n(u):r?this.lexicon.registerBlank(function(e){t.blanks[a]=e,n(e)}):this.lexicon.resolveBlank(function(e){t.blanks[a]=e,n(e)})}else n("var"===e.token?e.value:null)},QueryEngine.prototype.normalizeDatasets=function(e,t,r){var n=this;h.eachSeries(e,function(e,r){e.value===n.lexicon.defaultGraphUri?(e.oid=n.lexicon.defaultGraphOid,r()):n.normalizeTerm(e,t,!1,function(t){null!=t&&(e.oid=t),r()})},function(){r(!0)})},QueryEngine.prototype.normalizeQuad=function(e,t,r,n){var i=null,o=null,a=null,u=null,l=this,c=!1;h.seq(function(n){if(null==e.graph||e.graph.value===l.lexicon.defaultGraphUri)u=0,n();else{var i=s.lexicalFormBaseUri(e.graph,t);l.normalizeTerm(e.graph,t,r,function(t){null!=t?(u=t,!0===r&&"var"!=e.graph.token?l.lexicon.registerGraph(t,i,function(){n()}):n()):(c=!0,n())})}},function(n){!1===c?l.normalizeTerm(e.subject,t,r,function(e){null!=e?(i=e,n()):(c=!0,n())}):n()},function(n){!1===c?l.normalizeTerm(e.predicate,t,r,function(e){null!=e?(o=e,n()):(c=!0,n())}):n()},function(n){!1===c?l.normalizeTerm(e.object,t,r,function(e){null!=e?(a=e,n()):(c=!0,n())}):n()})(function(){n(!0===c?null:{subject:i,predicate:o,object:a,graph:u})})},QueryEngine.prototype.denormalizeBindingsList=function(e,t,r){var n=this,i=[];h.eachSeries(e,function(e,r){n.denormalizeBindings(e,t,function(e){i.push(e),r()})},function(){r(i)})},QueryEngine.prototype.copyDenormalizedBindings=function(e,t,r){var n=this,i=[];h.eachSeries(e,function(e,r){var o={},s=d.keys(e);h.eachSeries(s,function(r,i){var s=e[r];if(null==s)o[r]=null,i();else if("object"==typeof s)o[r]=s,i();else{var a=t[s];null!=a?(o[r]=a,i()):n.lexicon.retrieve(s,function(e){t[s]=e,o[r]=e,i()})}},function(){i.push(o),r()})},function(){r(i)})},QueryEngine.prototype.denormalizeBindings=function(e,t,r){var n=d.keys(e),i=t.outCache,o=this;h.eachSeries(n,function(r,n){var s=e[r];null==s?(e[r]=null,n()):"object"==typeof s?n():null!=i[s]?(e[r]=i[s],n()):o.lexicon.retrieve(s,function(i){e[r]=i,"blank"===i.token&&(t.blanks[i.value]=s),n()})},function(){r(e)})},QueryEngine.prototype.execute=function(e,t,r,n){e=s.normalizeUnicodeLiterals(e);var i=this.abstractQueryTree.parseQueryString(e);if(null==i)t(!1,"Error parsing query string");else if("query"===i.token&&"update"==i.kind){this.callbacksBackend.startGraphModification();var o=this;this.executeUpdate(i,function(e,r){o.lexicon.updateAfterWrite&&o.lexicon.updateAfterWrite(),e?(o.callbacksBackend.cancelGraphModification(),t(e,r)):o.callbacksBackend.endGraphModification(function(){t(e,r)})})}else"query"===i.token&&"query"==i.kind&&this.executeQuery(i,t,r,n)},QueryEngine.prototype.executeQuery=function(e,t,r,n){var i=e.prologue,o=e.units,s=this,a={blanks:{},outCache:{}};this.registerNsInEnvironment(i,a);var u=s.abstractQueryTree.parseExecutableUnit(o[0]);"select"===u.kind?this.executeSelect(u,a,r,n,function(e,r){null==e?"object"==typeof r&&!0===r.denorm?t(null,r.bindings):s.denormalizeBindingsList(r,a,function(e){t(null,e)}):t(e)}):"ask"===u.kind?(u.projection=[{token:"variable",kind:"*"}],this.executeSelect(u,a,r,n,function(e,r){null==e?r.length>0?t(null,!0):t(null,!1):t(e)})):"construct"===u.kind&&(u.projection=[{token:"variable",kind:"*"}],s=this,this.executeSelect(u,a,r,n,function(e,r){null==e?s.denormalizeBindingsList(r,a,function(e){if(null!=e){var r=new c.Graph;null==u.template&&(u.template={triplesContext:u.pattern});for(var n=1,i=[],o=0;o<e.length;o++){for(var l=e[o],f=0;f<i.length;f++)delete i[f].valuetmp;for(var f=0;f<u.template.triplesContext.length;f++){for(var p=["subject","predicate","object"],h=u.template.triplesContext[f],d=0;d<p.length;d++){var v=p[d];if("blank"===h[v].token)if(h[v].valuetmp&&null!=h[v].valuetmp);else{var y="_:b"+n;n++,h[v].valuetmp=y,i.push(h[v])}}var g=c.buildRDFResource(h.subject,l,s,a),d=c.buildRDFResource(h.predicate,l,s,a),b=c.buildRDFResource(h.object,l,s,a);if(null!=g&&null!=d&&null!=b){var m=new c.Triple(g,d,b);r.add(m)}}}t(null,r)}else t(new Error("Error denormalizing bindings."))}):t(e)}))},QueryEngine.prototype.executeSelect=function(e,t,r,n,i){if("select"===e.kind||"ask"===e.kind||"construct"===e.kind||"modify"===e.kind){var o=e.projection,s=e.dataset,a=e.modifier,u=e.limit,l=e.offset,c=e.order,f=this;null==r&&null==n||(s.implicit=r||[],s.named=n||[]),null!=s.implicit&&0===s.implicit.length&&null!=s.named&&0===s.named.length&&s.implicit.push(this.lexicon.defaultGraphUriTerm),f.normalizeDatasets(s.implicit.concat(s.named),t,function(){try{f.executeSelectUnit(o,s,e.pattern,t,function(r){if(null!=r){if(null!=e.group&&""===e.group){for(var n=!1,p=0;p<e.projection.length;p++)if(null!=e.projection[p].expression&&"aggregate"===e.projection[p].expression.expressionType){n=!0;break}!0===n&&(e.group="singleGroup")}e.group&&""!=e.group?f.checkGroupSemantics(e.group,o)?f.groupSolution(r,e.group,s,t,function(e){var r=[];h.eachSeries(e,function(e,n){f.aggregateBindings(o,e,s,t,function(e){r.push(e),n()})},function(){i(null,{bindings:r,denorm:!0})})}):i(new Error("Incompatible Group and Projection variables")):f.applyOrderBy(c,r,s,t,function(e){var t=f.projectBindings(o,e,s),r=f.applyModifier(a,t),n=f.applyLimitOffset(l,u,r),c=f.removeDefaultGraphBindings(n,s);i(null,c)})}else i(new Error("Error executing SELECT query."))})}catch(e){i(e)}})}else i(new Error("Cannot execute "+e.kind+" query as a select query"))},QueryEngine.prototype.groupSolution=function(e,t,r,n,i){var o=[],s=[],a=!1,u=this;"singleGroup"===t?i([e]):h.eachSeries(e,function(e,i){var c=!0;h.eachSeries(t,function(t,i){var s=null;if("var"===t.token)s=t.value,0==a&&o.push(s),i();else if("aliased_expression"===t.token){if(s=t.alias.value,0==a&&o.push(s),"var"===t.expression.primaryexpression)e[t.alias.value]=e[t.expression.value.value];else{var f=u.copyDenormalizedBindings([e],n.outCache),p=l.runFilter(t.expression,f[0],u,r,n);l.isEbvError(p)?c=!1:(null!=p.value&&(p.value=""+p.value),e[t.alias.value]=p)}i()}else u.copyDenormalizedBindings([e],n.outCache,function(r){var f=l.runFilter(t,r[0],u,n);l.isEbvError(f)?c=!1:(e["groupCondition"+env._i]=f,s="groupCondition"+env._i,0==a&&o.push(s)),i()})},function(){0==a&&(a=!0),!0===c&&s.push(e),i()})},function(){for(var e={},t={},r=0;r<s.length;r++){for(var n=s[r],a="",u=0;u<o.length;u++){var l=n[o[u]];a+="object"==typeof l?l.value:l}null==e[a]?(t[a]=0,e[a]=[n]):e[a].push(n)}var c=[];for(var f in e)c.push(e[f]);i(c)})},QueryEngine.prototype.executeSelectUnit=function(e,t,r,n,i){if("BGP"===r.kind)this.executeAndBGP(e,t,r,n,i);else if("UNION"===r.kind)this.executeUNION(e,t,r.value,n,i);else if("JOIN"===r.kind)this.executeJOIN(e,t,r,n,i);else if("LEFT_JOIN"===r.kind)this.executeLEFT_JOIN(e,t,r,n,i);else if("FILTER"===r.kind){var s=this;this.executeSelectUnit(e,t,r.value,n,function(e){null!=e?l.checkFilters(r,e,!1,t,n,s,i):i([])})}else{if("EMPTY_PATTERN"!==r.kind)throw new o(r.kind);i([])}},QueryEngine.prototype.executeUNION=function(e,t,r,i,o){var s,a,c=r[0],f=r[1],p=null;if(2!=r.length)throw"SPARQL algebra UNION with more than two components";var d=this;h.seq(function(r){try{d.executeSelectUnit(e,t,c,i,function(e){s=e,r()})}catch(e){p=e,r()}},function(r){if(null==p)try{d.executeSelectUnit(e,t,f,i,function(e){a=e,r()})}catch(e){p=e,r()}else r()})(function(){if(null!=p)o(p);else{var e=u.unionBindings(s,a);d.runBinds(r.binds,e,t,i,function(e,s){if(null!=e)throw new n("Error processing bind expressions",r.binds,e);l.checkFilters(r,s,!1,t,i,d,o)})}})},QueryEngine.prototype.executeAndBGP=function(e,t,r,i,o){var s=this;u.executeAndBGPsDPSize(r.value,t,this,i,function(e){null!=e?s.runBinds(r.binds,e,t,i,function(e,a){if(null!=e)throw new n("Error processing bind expressions",r.binds,e);l.checkFilters(r,a,!1,t,i,s,o)}):o(null)})},QueryEngine.prototype.executeLEFT_JOIN=function(e,t,r,i,o){var s=r.lvalue,a=r.rvalue;if("EMPTY_PATTERN"===s.kind)this.executeSelectUnit(e,t,a,i,o);else{var c,f,p=null,d=null,v=null,y=this;h.seq(function(r){try{y.executeSelectUnit(e,t,s,i,function(e){p=e,r()})}catch(e){v=e,r()}},function(r){if(null!=v)r();else try{y.executeSelectUnit(e,t,a,i,function(e){d=e,r()})}catch(e){v=e,r()}})(function(){if(null!=v)o(v);else{var e=u.leftOuterJoinBindings(p,d);y.runBinds(r.binds,e,t,i,function(s,a){if(null!=s)throw new n("Error processing bind expressions",r.binds,s);l.checkFilters(r,e,!0,t,i,y,function(e){if(p.length>1&&d.length>1){var t=[],r={};for(var n in p[0])r[n]=!0;for(n in d[0])1!=r[n]&&t.push(n);c=[],f={};for(var i=0;i<e.length;i++)if(!0===e[i].__nullify__){for(var s=0;s<t.length;s++)e[i].bindings[t[s]]=null;var a=[],u=[];for(var n in e[i].bindings)null!=e[i].bindings[n]&&(a.push(n+e[i].bindings[n]),a.sort(),u.push(a.join("")));if(null==f[a.join("")]){for(s=0;s<u.length;s++)f[u[s]]=!0;c.push(e[i].bindings)}}else{c.push(e[i]);var a=[],u=[];for(var n in e[i])a.push(n+e[i][n]),a.sort(),f[a.join("")]=!0}o(c)}else o(e)})})}})}},QueryEngine.prototype.executeJOIN=function(e,t,r,i,o){var s=r.lvalue,a=r.rvalue,c=null,f=null,p=null,d=this;h.seq(function(r){try{d.executeSelectUnit(e,t,s,i,function(e){c=e,r()})}catch(e){p=e,r()}},function(r){if(null!=p)r();else try{d.executeSelectUnit(e,t,a,i,function(e){f=e,r()})}catch(e){p=e,r()}})(function(){var e=null;if(null!=p)o(p);else if(0===c.length||0===f.length)o([]);else{var h={},v=[];for(var y in c[0])h[y]=!1;for(var y in f[0])!1===h[y]&&v.push(y);e=0==v.length?u.joinBindings(c,f):d.abstractQueryTree.treeWithUnion(s)||d.abstractQueryTree.treeWithUnion(a)?u.joinBindings(c,f):u.joinBindings2(v,c,f),d.runBinds(r.binds,e,t,i,function(e,s){if(null!=e)throw new n("Error processing bind expressions",r.binds,e);l.checkFilters(r,s,!1,t,i,d,o)})}})},QueryEngine.prototype.rangeQuery=function(e,t,r){var n=this;n.normalizeQuad(e,t,!1,function(e){null!=e?n.backend.range(new a.Pattern(e),function(e){r(null==e||0==e.length?[]:e)}):r(null)})},QueryEngine.prototype.executeUpdate=function(e,t){var r=e.prologue,n=e.units,i=this,o={blanks:{},outCache:{}};this.registerNsInEnvironment(r,o);for(var a=0;a<n.length;a++){var u=i.abstractQueryTree.parseExecutableUnit(n[a]);if("insertdata"===u.kind){var l=null;h.eachSeries(u.quads,function(e,t){null===l?i._executeQuadInsert(e,o,function(e){null!=e&&(l=e),t()}):t()},function(){null===l?t(null,!0):t(l)})}else if("deletedata"===u.kind){var l=null;h.eachSeries(u.quads,function(e,t){null===l?i._executeQuadDelete(e,o,function(e){null!=e&&(l=e),t()}):t()},function(){null===l?t(null,!0):t(l)})}else if("modify"===u.kind)this._executeModifyQuery(u,o,t);else if("create"===u.kind)t(!0);else if("load"===u.kind){var c={uri:s.lexicalFormBaseUri(u.sourceGraph,o)};null!=u.destinyGraph&&(c={uri:s.lexicalFormBaseUri(u.destinyGraph,o)});var i=this;this.rdfLoader.load(u.sourceGraph.value,c,function(e,r){e?t(new Error("error batch loading quads")):i.batchLoad(r,function(e){null!==e?t(null,e):t(new Error("Error batch loading quads"))})})}else if("drop"===u.kind)this._executeClearGraph(u.destinyGraph,o,t);else{if("clear"!==u.kind)throw new Error("not supported execution unit");this._executeClearGraph(u.destinyGraph,o,t)}}},QueryEngine.prototype.batchLoad=function(e,t){var r=0,n={},i=this;this.eventsOnBatchLoad&&this.callbacksBackend.startGraphModification();var o=function(e,t,r,o){var s,e;if(e[t].uri||"uri"===e[t].token){var a=e[t].uri||e[t].value;i.lexicon.registerUri(a,function(n){var s=function(){null!=e[t].uri&&(e[t]={token:"uri",value:e[t].uri},delete e[t].uri),r[t]=n,o()};"graph"===t?i.lexicon.registerGraph(n,a,function(){s()}):s()})}else e[t].literal||"literal"===e[t].token?i.lexicon.registerLiteral(e[t].literal||e[t].value,function(n){null!=e[t].literal&&(e[t]=i.lexicon.parseLiteral(e[t].literal),delete e[t].literal),r[t]=n,o()}):(s=n[e[t].blank||e[t].value],null==s?i.lexicon.registerBlank(function(i){n[e[t].blank||e[t].value]=i,null==e[t].token&&(e[t].token="blank",e[t].value=e[t].blank,delete e[t].blank),r[t]=i,o()}):(null==e[t].token&&(e[t].token="blank",e[t].value=e[t].blank,delete e[t].blank),r[t]=s,o()))};h.eachSeries(e,function(e,t){var n={};h.eachSeries(["subject","predicate","object","graph"],function(t,r){o(e,t,n,r)},function(){var o=e;e=n;var s=new a.NodeKey(e);i.backend.search(s,function(n){n?t():i.backend.index(s,function(n){n&&(i.eventsOnBatchLoad&&i.callbacksBackend.nextGraphModification(p.added,[o,e]),r+=1),t()})})})},function(){null!=i.lexicon.updateAfterWrite&&i.lexicon.updateAfterWrite();var e=function(){t(r)};i.eventsOnBatchLoad?i.callbacksBackend.endGraphModification(e()):e()})},QueryEngine.prototype._executeModifyQuery=function(e,t,r){var n=this,i=!0,o=new Error("Error executing modify query"),s=null,a=["subject","predicate","object","graph"];e.insert=null==e.insert?[]:e.insert,e.delete=null==e.delete?[]:e.delete,h.seq(function(r){var a=[],u=[];if(null!=e.with&&a.push(e.with),null!=e.using){u=[];for(var l=0;l<e.using.length;l++){var c=e.using[l];"named"===c.kind?u.push(c.uri):a.push(c.uri)}}e.dataset={},e.projection=[{token:"variable",kind:"*"}],n.executeSelect(e,t,a,u,function(e,a){if(e)return o=e,i=!1,r();n.denormalizeBindingsList(a,t,function(e){null!=e?s=e:(o=new Error("Error denormalizing bindings list"),i=!1),r()})})},function(r){var o=e.with;if(i){for(var u=[],l=0;l<e.delete.length;l++)for(var c=e.delete[l],f=0;f<s.length;f++){for(var p={},d=s[f],v=0;v<a.length;v++){var y=a[v];"graph"==y&&null==c[y]?p.graph=o:"var"===c[y].token?p[y]=d[c[y].value]:p[y]=c[y]}u.push(p)}h.eachSeries(u,function(e,r){n._executeQuadDelete(e,t,function(){r()})},function(){r()})}else r()},function(r){var o=e.with;if(i){for(var u=[],l=0;l<e.insert.length;l++)for(var c=e.insert[l],f=0;f<s.length;f++){for(var p={},d=s[f],v=0;v<a.length;v++){var y=a[v];"graph"==y&&null==c[y]?p.graph=o:"var"===c[y].token?p[y]=d[c[y].value]:p[y]=c[y]}u.push(p)}h.eachSeries(u,function(e,r){n._executeQuadInsert(e,t,function(){r()})},function(){r()})}else r()})(function(){r(i?null:o)})},QueryEngine.prototype._executeQuadInsert=function(e,t,r){var n,i=this,o=!1,s=null;h.seq(function(r){i.normalizeQuad(e,t,!0,function(e){null!=e?n=e:(o=!0,s="Error normalizing quad."),r()})},function(t){if(!1===o){var r=new a.NodeKey(n);i.backend.search(r,function(o){!0===o?t():i.backend.index(r,function(){i.callbacksBackend.nextGraphModification(p.added,[e,n]),t()})})}else t()})(function(){o?r(new Error(s)):r(null,!0)})},QueryEngine.prototype._executeQuadDelete=function(e,t,r){var n,i,o,s=this,u=!1;h.seq(function(r){s.normalizeQuad(e,t,!0,function(e){null!=e?n=e:(u=!0,i="Error normalizing quad."),r()})},function(e){!1===u?(o=new a.NodeKey(n),s.backend.delete(o,function(){e()})):e()},function(t){!1===u?s.lexicon.unregister(e,o,function(){s.callbacksBackend.nextGraphModification(p.deleted,[e,n]),t()}):t()})(function(){u?r(new Error(i)):r(null,!0)})},QueryEngine.prototype._executeClearGraph=function(e,t,r){var n=this;if("default"===e)this.execute("DELETE { ?s ?p ?o } WHERE { ?s ?p ?o }",r);else if("named"===e)n.lexicon.registeredGraphs(!0,function(e){if(null!=e){var t=!1;h.eachSeries(e,function(e,r){t?r():n.execute("DELETE { GRAPH <"+e+"> { ?s ?p ?o } } WHERE { GRAPH <"+e+"> { ?s ?p ?o } }",function(i,o){i?(t=i,r()):n.lexicon.resolveUri(e,function(i){-1!=i?n.lexicon.knownGraphs.delete(i,function(){r()}):(t="Cannot find graph "+e+" to clear it",r())})})},function(){r(!t)})}else r(!1,"Error deleting named graphs")});else if("all"===e){var n=this;this.execute("CLEAR DEFAULT",function(e,t){e?r(!1,t):n.execute("CLEAR NAMED",r)})}else if("uri"==e.token){var i=s.lexicalFormBaseUri(e,t);null!=i?(this.callbacksBackend.ongoingModification=!0,this.execute("DELETE { GRAPH <"+i+"> { ?s ?p ?o } } WHERE { GRAPH <"+i+"> { ?s ?p ?o } }",function(e){n.callbacksBackend.ongoingModification=!1,r(e)})):r(!1,"wrong graph URI")}else r(!1,"wrong graph URI")},QueryEngine.prototype.checkGroupSemantics=function(e,t){if("singleGroup"===e)return!0;for(var r={},n=0;n<e.length;n++){var i=e[n];"var"===i.token?r[i.value]=!0:"aliased_expression"===i.token&&(r[i.alias.value]=!0)}for(n=0;n<t.length;n++){var o=t[n];if("var"===o.kind){if(null==r[o.value.value])return!1}else if("aliased"===o.kind&&o.expression&&"var"===o.expression.primaryexpression&&null==r[o.expression.value.value])return!1}return!0},QueryEngine.prototype.runBinds=function(e,t,r,n,i){var o=this,s=t;null!=e&&e.length>0?o.copyDenormalizedBindings(t,n.outCache,function(a){for(var u=0;u<t.length;u++)for(var c=0;c<e.length;c++){var f=e[c],p=a[u],h=l.runFilter(f.expression,p,o,r,n);l.isEbvError(h)?i(h):s[u][f.as.value]=h}i(null,t)}):i(null,t)},QueryEngine.prototype.computeCosts=function(e,t,r){for(var n=0;n<e.length;n++)e[n]._cost=this.quadCost(e[n],t);r(e)},QueryEngine.prototype.quadCost=function(e,t){return 1},QueryEngine.prototype.registerDefaultNamespace=function(e,t){this.defaultPrefixes[e]=t},e.exports={QueryEngine:QueryEngine}},function(e,t,r){var n=r(0),i=r(0),o={};o.variablesInBGP=function(e){var t=e.variables;if(t)return t;var r=e.value||e;t=[];for(var n in r)r[n]&&"var"===r[n].token?t.push(r[n].value):r[n]&&"blank"===r[n].token&&t.push("blank:"+r[n].value);return e.variables=t,t},o.connected=function(e,t){for(var r="/"+e.vars.join("/")+"/",n=0;n<t.vars.length;n++)if(-1!=r.indexOf("/"+t.vars[n]+"/"))return!0;return!1};var s=function(e,t){for(var r={},n=0;n<e.lenght;n++)r[e[n]]=1;for(n=0;n<t.length;n++){var i=r[t[n]]||0;i++,r[t[n]]=i}var o=[];for(var s in r)2==r[s]&&o.push(r[s]);return o};o.variablesIntersectionBGP=function(e,t){return s(o.variablesInBGP(e),o.variablesInBGP(t))},o.executeAndBGPsGroups=function(e){for(var t={},r={},i=0,s=0;s<e.length;s++){var a=e[s],u={},l={},c=o.variablesInBGP(a),f={};for(var p in r)!function(e,t){for(var r=0;r<e.length;r++){var n="/"+e[r]+"/";if(-1!=t.indexOf(n))return!0}return!1}(c,r[p])?(u[p]=t[p],l[p]=r[p]):f[p]=!0;0===n.size(f)?(u["g"+i]=[a],l["g"+i]="/"+c.join("/")+"/",i++):function(e,n,i,o){var s=[],a="",u="";for(var l in n)a+=l,s=s.concat(t[l]),u+=r[l];u=u+c.join("/")+"/",s.push(e),i[a]=s,o[a]=u}(a,f,u,l),t=u,r=l}return n.values(t)},o.intersectionSize=function(e,t){for(var r=t.i.split("_"),n=0;n<r.length;n++)if(""!=r[n]&&-1!=e.i.indexOf("_"+r[n]+"_"))return 1;return 0},o.createJoinTree=function(e,t){for(var r="/"+e.vars.join("/")+"/",i=e.vars.concat([]),o=[],s=0;s<t.vars.length;s++)-1!=r.indexOf("/"+t.vars[s]+"/")?0==t.vars[s].indexOf("_:")?o.push("blank:"+t.vars[s]):o.push(t.vars[s]):i.push(t.vars[s]);for(var a=t.i.split("_"),u=e.i.split("_"),l={},s=0;s<a.length;s++)""!=a[s]&&(l[a[s]]=!0);for(var s=0;s<u.length;s++)""!=u[s]&&(l[u[s]]=!0);var c=n.keys(l);return{left:e,right:t,cost:e.cost+t.cost,i:"_"+c.sort().join("_")+"_",vars:i,join:o}},o.executeBushyTree=function(e,t,r,n,i){null==e.left?o.executeEmptyJoinBGP(e.right,t,r,n,i):null==e.right?o.executeEmptyJoinBGP(e.left,t,r,n,i):o.executeBushyTree(e.left,t,r,n,function(s){null!=s?o.executeBushyTree(e.right,t,r,n,function(t){i(null!=t?o.joinBindings2(e.join,s,t):null)}):i(null)})},o.executeAndBGPsDPSize=function(e,t,r,n,s){var a=o.executeAndBGPsGroups(e),u=[];i.eachSeries(a,function(e,t){r.computeCosts(e,n,function(e){var r={},n={},i={},s=1,a=null,l={};i[1]=[];for(var c=0;c<e.length;c++){var f=[];delete e[c].variables;for(var p in e[c])"_cost"!=p&&("var"===e[c][p].token?f.push(e[c][p].value):"blank"===e[c][p].token&&f.push(e[c][p].value));n["_"+c+"_"]={left:e[c],right:null,cost:e[c]._cost,i:"_"+c+"_",vars:f};var h={left:e[c],right:null,cost:e[c]._cost,i:"_"+c+"_",vars:f};r["_"+c+"_"]=h,delete e[c]._cost,l["_"+c+"_"]=!0,i[1].push("_"+c+"_"),(null==a||a.cost>h.cost)&&(a=h)}for(var d=2;d<=e.length;d++)for(var v=1;v<d;v++)for(var y=d-v,g=i[""+v]||[],b=i[""+y]||[],c=0;c<g.length;c++)for(var m=0;m<b.length;m++)if(g[c]!==b[m]){var w=n[g[c]],x=n[b[m]];if(0==o.intersectionSize(w,x)&&o.connected(w,x)){s=d;var k=r[w.i],E=r[x.i],_=o.createJoinTree(k,E);if(!l[_.i]){l[_.i]=!0;var A=_.cost+1;null!=r[_.i]&&(A=r[_.i].cost);var S=i[d]||[];S.push(_.i),n[_.i]=_,i[d]=S,A>_.cost&&(s===d&&(a=_),r[_.i]=_)}}}u.push(a),t()})},function(){var e=null;i.eachSeries(u,function(i,s){o.executeBushyTree(i,t,r,n,function(t){t?null==e?(e=t,s()):(e=o.crossProductBindings(e,t),s()):s("Error executing bushy tree")})},function(t){t?s(null,t):s(e)})})},o.executeEmptyJoinBGP=function(e,t,r,n,i){return o.executeBGPDatasets(e,t,r,n,i)},o.executeBGPDatasets=function(e,t,r,n,s){var a={};if(null==e.graph){var u=[];i.eachSeries(t.implicit,function(t,i){null==a[t.oid]?(a[t.oid]=!0,e.graph=t,r.rangeQuery(e,n,function(t){t=o.buildBindingsFromRange(t,e),u.push(t),i()})):i()},function(){var e=o.unionManyBindings(u);s(e)})}else if("var"===e.graph.token){var l=e.graph.value,u=[];i.eachSeries(t.named,function(t,i){null==a[t.oid]?(a[t.oid]=!0,e.graph=t,null!=u?r.rangeQuery(e,n,function(r){if(null!=r){r=o.buildBindingsFromRange(r,e);for(var n=0;n<r.length;n++)r[n][l]=t.oid;u.push(r)}else u=null;i()}):i()):i()},function(){if(null==u)s(null);else{var e=o.unionManyBindings(u);s(e)}})}else r.rangeQuery(e,n,function(t){null!=t?(t=o.buildBindingsFromRange(t,e),s(t)):s(null)})},o.buildBindingsFromRange=function(e,t){o.variablesInBGP(t);var r=t.value||t,n={};for(c in r)r[c]&&"var"===r[c].token?n[c]=r[c].value:r[c]&&"blank"===r[c].token&&(n[c]="blank:"+r[c].value);var i=[];if(null!=e)for(var s=0;s<e.length;s++){var a={},u=e[s],l=!1;for(var c in n){var f=u[c];if(null!=a[n[c]]&&a[n[c]]!==f){l=!0;break}a[n[c]]=f}l||i.push(a)}return i},o.areCompatibleBindings=function(e,t){for(var r in e)if(null!=t[r]&&t[r]!=e[r])return!1;return!0},o.mergeBindings=function(e,t){var r={};for(var n in e)r[n]=e[n];for(var n in t)r[n]=t[n];return r},o.joinBindings2=function(e,t,r){for(var n,i,s,a,u,l={},c=[],f=0;f<t.length;f++){n=t[f],u=l;for(var p=0;p<e.length;p++)i=e[p],s=n[i],p==e.length-1?(a=u[s]||[],a.push(n),u[s]=a):(a=u[s]||{},u[s]=a,u=a)}for(var f=0;f<r.length;f++){n=r[f],u=l;for(var p=0;p<e.length;p++)if(i=e[p],s=n[i],null!=u[s])if(p==e.length-1)for(var h=0;h<u[s].length;h++)c.push(o.mergeBindings(u[s][h],n));else u=u[s]}return c},o.joinBindings=function(e,t){for(var r=[],n=0;n<e.length;n++)for(var i=e[n],s=0;s<t.length;s++){var a=t[s];o.areCompatibleBindings(i,a)&&r.push(o.mergeBindings(i,a))}return r},o.augmentMissingBindings=function(e,t){for(var r in t)null==e[r]&&(e[r]=null);return e},o.leftOuterJoinBindings=function(e,t){for(var r=[],n=0;n<e.length;n++){for(var i=e[n],s=!1,a=0;a<t.length;a++){var u=t[a];o.areCompatibleBindings(i,u)&&(s=!0,r.push(o.mergeBindings(i,u)))}!1===s&&(o.augmentMissingBindings(i,u),r.push(i))}return r},o.crossProductBindings=function(e,t){for(var r=[],n=0;n<e.length;n++)for(var i=e[n],s=0;s<t.length;s++){var a=t[s];r.push(o.mergeBindings(i,a))}return r},o.unionBindings=function(e,t){return e.concat(t)},o.unionManyBindings=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];t=o.unionBindings(t,n)}return t},e.exports={QueryPlan:o}},function(e,t,r){var n=r(170).NetworkTransport,i=r(178).RVN3Parser,o=r(169).JSONLDParser,s=r(0),a=function(e){if(this.precedences=["text/turtle","text/n3","application/ld+json","application/json"],this.parsers={"text/turtle":i.parser,"text/n3":i.parser,"application/ld+json":o.parser,"application/json":o.parser},"undefined"!=typeof RDFXMLParser&&(this.precedences.push("application/rdf+xml"),this.parsers["application/rdf+xml"]=RDFXMLParser.parser),null!=e)for(var t in e.parsers)this.parsers[t]=e.parsers[t];if(e&&null!=e.precedences){this.precedences=e.precedences;for(var t in e.parsers)s.include(this.precedences,t)||this.precedences.push(t)}this.acceptHeaderValue="";for(var r=0;r<this.precedences.length;r++)this.acceptHeaderValue=0!=r?this.acceptHeaderValue+","+this.precedences[r]:this.acceptHeaderValue+this.precedences[r]};a.prototype.registerParser=function(e,t){this.parsers[e]=t,this.precedences.push(e)},a.prototype.unregisterParser=function(e){delete this.parsers[e];for(var t=[],r=0;r<this.precedences.length;r++)this.precedences[r]!=e&&t.push(this.precedences[r]);this.precedences=t},a.prototype.setAcceptHeaderPrecedence=function(e){this.precedences=e},a.prototype.load=function(e,t,r){var i=this;n.load(e,this.acceptHeaderValue,function(n,o){if(n)r(n);else{var s=o.headers["Content-Type"]||o.headers["content-type"],a=o.data;if(null!=s){s=s.split(";")[0];for(var u in i.parsers)if(-1!=u.indexOf("/")){var l=u.split("/");if("*"===l[1]){if(-1!=s.indexOf(l[0]))return i.tryToParse(i.parsers[u],t,a,{documentURI:e},r)}else{if(-1!=s.indexOf(u))return i.tryToParse(i.parsers[u],t,a,{documentURI:e},r);if(-1!=s.indexOf(l[1]))return i.tryToParse(i.parsers[u],t,a,{documentURI:e},r)}}else if(-1!=s.indexOf(u))return i.tryToParse(i.parsers[u],t,a,{documentURI:e},r);r(new Error("Unknown media type : "+s))}else r(new Error("Uknown media type"))}})},a.prototype.loadFromFile=function(e,t,n,i){try{var o=this;r(163).readFile(n.split("file:/")[1],function(r,s){if(r)i(r);else{var s=s.toString("utf8");o.tryToParse(e,t,s,{documentURI:n},i)}})}catch(e){i(e)}},a.prototype.tryToParse=function(e,t,r,n,i){try{"string"==typeof r&&(r=s.normalizeUnicodeLiterals(r)),e.parse(r,t,n,i)}catch(e){console.log(e.message),console.log(e.stack),i(e)}},e.exports={RDFLoader:a}},function(e,t,r){function n(e){switch(e[0]){case'"':if(e.indexOf("^^")>0){var t=e.split("^^");return{literal:t[0]+"^^<"+t[1]+">"}}return{literal:e};case"_":return{blank:e.replace("b","")};default:return{token:"uri",value:e,prefix:null,suffix:null}}}var i=r(161).Parser,o={};o.parser={async:!0,parse:function(e,t,r,o){o||(o=r,r=t,t=null),t&&"string"==typeof t&&(t={token:"uri",value:t,prefix:null,suffix:null}),r&&r.baseURI&&(r.documentIRI=r.baseURI);var s=[];new i(r).parse(e,function(e,r){e?o(e):r?s.push({subject:n(r.subject),predicate:n(r.predicate),object:n(r.object),graph:t}):o(!1,s)})},resetBlankNodeIds:function(){i._resetBlankNodeIds()}},e.exports={RVN3Parser:o}},function(e,t,r){e.exports=r(19)},function(e,t,r){"use strict";function n(e){if(!(this instanceof n))return new n(e);i.call(this,e)}e.exports=n;var i=r(98),o=r(30);o.inherits=r(12),o.inherits(n,i),n.prototype._transform=function(e,t,r){r(null,e)}},function(e,t,r){"use strict";function n(){this.head=null,this.tail=null,this.length=0}var i=r(66).Buffer;e.exports=n,n.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},n.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},n.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},n.prototype.clear=function(){this.head=this.tail=null,this.length=0},n.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},n.prototype.concat=function(e){if(0===this.length)return i.alloc(0);if(1===this.length)return this.head.data;for(var t=i.allocUnsafe(e>>>0),r=this.head,n=0;r;)r.data.copy(t,n),n+=r.data.length,r=r.next;return t}},function(e,t,r){e.exports=r(31).PassThrough},function(e,t,r){e.exports=r(31).Transform},function(e,t,r){e.exports=r(65)},function(e,t,r){(function(e,t){!function(e,r){"use strict";function n(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var n={callback:e,args:t};return l[u]=n,a(u),u++}function i(e){delete l[e]}function o(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(r,n)}}function s(e){if(c)setTimeout(s,0,e);else{var t=l[e];if(t){c=!0;try{o(t)}finally{i(e),c=!1}}}}if(!e.setImmediate){var a,u=1,l={},c=!1,f=e.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(e);p=p&&p.setTimeout?p:e,"[object process]"==={}.toString.call(e.process)?function(){a=function(e){t.nextTick(function(){s(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?function(){var t="setImmediate$"+Math.random()+"$",r=function(r){r.source===e&&"string"==typeof r.data&&0===r.data.indexOf(t)&&s(+r.data.slice(t.length))};e.addEventListener?e.addEventListener("message",r,!1):e.attachEvent("onmessage",r),a=function(r){e.postMessage(t+r,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){s(e.data)},a=function(t){e.port2.postMessage(t)}}():f&&"onreadystatechange"in f.createElement("script")?function(){var e=f.documentElement;a=function(t){var r=f.createElement("script");r.onreadystatechange=function(){s(t),r.onreadystatechange=null,e.removeChild(r),r=null},e.appendChild(r)}}():function(){a=function(e){setTimeout(s,0,e)}}(),p.setImmediate=n,p.clearImmediate=i}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,r(4),r(5))},function(e,t,r){(function(t,n,i){function o(e,t){return a.fetch&&t?"fetch":a.mozchunkedarraybuffer?"moz-chunked-arraybuffer":a.msstream?"ms-stream":a.arraybuffer&&e?"arraybuffer":a.vbArray&&e?"text:vbarray":"text"}function s(e){try{var t=e.status;return null!==t&&0!==t}catch(e){return!1}}var a=r(102),u=r(12),l=r(187),c=r(31),f=r(188),p=l.IncomingMessage,h=l.readyStates,d=e.exports=function(e){var r=this;c.Writable.call(r),r._opts=e,r._body=[],r._headers={},e.auth&&r.setHeader("Authorization","Basic "+new t(e.auth).toString("base64")),Object.keys(e.headers).forEach(function(t){r.setHeader(t,e.headers[t])});var n,i=!0;if("disable-fetch"===e.mode||"timeout"in e)i=!1,n=!0;else if("prefer-streaming"===e.mode)n=!1;else if("allow-wrong-content-type"===e.mode)n=!a.overrideMimeType;else{if(e.mode&&"default"!==e.mode&&"prefer-fast"!==e.mode)throw new Error("Invalid value for opts.mode");n=!0}r._mode=o(n,i),r.on("finish",function(){r._onFinish()})};u(d,c.Writable),d.prototype.setHeader=function(e,t){var r=this,n=e.toLowerCase();-1===v.indexOf(n)&&(r._headers[n]={name:e,value:t})},d.prototype.getHeader=function(e){var t=this._headers[e.toLowerCase()];return t?t.value:null},d.prototype.removeHeader=function(e){delete this._headers[e.toLowerCase()]},d.prototype._onFinish=function(){var e=this;if(!e._destroyed){var r=e._opts,o=e._headers,s=null;"GET"!==r.method&&"HEAD"!==r.method&&(s=a.blobConstructor?new n.Blob(e._body.map(function(e){return f(e)}),{type:(o["content-type"]||{}).value||""}):t.concat(e._body).toString());var u=[];if(Object.keys(o).forEach(function(e){var t=o[e].name,r=o[e].value;Array.isArray(r)?r.forEach(function(e){u.push([t,e])}):u.push([t,r])}),"fetch"===e._mode)n.fetch(e._opts.url,{method:e._opts.method,headers:u,body:s||void 0,mode:"cors",credentials:r.withCredentials?"include":"same-origin"}).then(function(t){e._fetchResponse=t,e._connect()},function(t){e.emit("error",t)});else{var l=e._xhr=new n.XMLHttpRequest;try{l.open(e._opts.method,e._opts.url,!0)}catch(t){return void i.nextTick(function(){e.emit("error",t)})}"responseType"in l&&(l.responseType=e._mode.split(":")[0]),"withCredentials"in l&&(l.withCredentials=!!r.withCredentials),"text"===e._mode&&"overrideMimeType"in l&&l.overrideMimeType("text/plain; charset=x-user-defined"),"timeout"in r&&(l.timeout=r.timeout,l.ontimeout=function(){e.emit("timeout")}),u.forEach(function(e){l.setRequestHeader(e[0],e[1])}),e._response=null,l.onreadystatechange=function(){switch(l.readyState){case h.LOADING:case h.DONE:e._onXHRProgress()}},"moz-chunked-arraybuffer"===e._mode&&(l.onprogress=function(){e._onXHRProgress()}),l.onerror=function(){e._destroyed||e.emit("error",new Error("XHR error"))};try{l.send(s)}catch(t){return void i.nextTick(function(){e.emit("error",t)})}}}},d.prototype._onXHRProgress=function(){var e=this;s(e._xhr)&&!e._destroyed&&(e._response||e._connect(),e._response._onXHRProgress())},d.prototype._connect=function(){var e=this;e._destroyed||(e._response=new p(e._xhr,e._fetchResponse,e._mode),e._response.on("error",function(t){e.emit("error",t)}),e.emit("response",e._response))},d.prototype._write=function(e,t,r){this._body.push(e),r()},d.prototype.abort=d.prototype.destroy=function(){var e=this;e._destroyed=!0,e._response&&(e._response._destroyed=!0),e._xhr&&e._xhr.abort()},d.prototype.end=function(e,t,r){var n=this;"function"==typeof e&&(r=e,e=void 0),c.Writable.prototype.end.call(n,e,t,r)},d.prototype.flushHeaders=function(){},d.prototype.setTimeout=function(){},d.prototype.setNoDelay=function(){},d.prototype.setSocketKeepAlive=function(){};var v=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"]}).call(t,r(23).Buffer,r(4),r(5))},function(e,t,r){(function(e,n,i){var o=r(102),s=r(12),a=r(31),u=t.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},l=t.IncomingMessage=function(t,r,i){function s(){l.read().then(function(e){if(!u._destroyed){if(e.done)return void u.push(null);u.push(new n(e.value)),s()}}).catch(function(e){u.emit("error",e)})}var u=this;if(a.Readable.call(u),u._mode=i,u.headers={},u.rawHeaders=[],u.trailers={},u.rawTrailers=[],u.on("end",function(){e.nextTick(function(){u.emit("close")})}),"fetch"===i){u._fetchResponse=r,u.url=r.url,u.statusCode=r.status,u.statusMessage=r.statusText,r.headers.forEach(function(e,t){u.headers[t.toLowerCase()]=e,u.rawHeaders.push(t,e)});var l=r.body.getReader();s()}else{u._xhr=t,u._pos=0,u.url=t.responseURL,u.statusCode=t.status,u.statusMessage=t.statusText;if(t.getAllResponseHeaders().split(/\r?\n/).forEach(function(e){var t=e.match(/^([^:]+):\s*(.*)/);if(t){var r=t[1].toLowerCase();"set-cookie"===r?(void 0===u.headers[r]&&(u.headers[r]=[]),u.headers[r].push(t[2])):void 0!==u.headers[r]?u.headers[r]+=", "+t[2]:u.headers[r]=t[2],u.rawHeaders.push(t[1],t[2])}}),u._charset="x-user-defined",!o.overrideMimeType){var c=u.rawHeaders["mime-type"];if(c){var f=c.match(/;\s*charset=([^;])(;|$)/);f&&(u._charset=f[1].toLowerCase())}u._charset||(u._charset="utf-8")}}};s(l,a.Readable),l.prototype._read=function(){},l.prototype._onXHRProgress=function(){var e=this,t=e._xhr,r=null;switch(e._mode){case"text:vbarray":if(t.readyState!==u.DONE)break;try{r=new i.VBArray(t.responseBody).toArray()}catch(e){}if(null!==r){e.push(new n(r));break}case"text":try{r=t.responseText}catch(t){e._mode="text:vbarray";break}if(r.length>e._pos){var o=r.substr(e._pos);if("x-user-defined"===e._charset){for(var s=new n(o.length),a=0;a<o.length;a++)s[a]=255&o.charCodeAt(a);e.push(s)}else e.push(o,e._charset);e._pos=r.length}break;case"arraybuffer":if(t.readyState!==u.DONE||!t.response)break;r=t.response,e.push(new n(new Uint8Array(r)));break;case"moz-chunked-arraybuffer":if(r=t.response,t.readyState!==u.LOADING||!r)break;e.push(new n(new Uint8Array(r)));break;case"ms-stream":if(r=t.response,t.readyState!==u.LOADING)break;var l=new i.MSStreamReader;l.onprogress=function(){l.result.byteLength>e._pos&&(e.push(new n(new Uint8Array(l.result.slice(e._pos)))),e._pos=l.result.byteLength)},l.onload=function(){e.push(null)},l.readAsArrayBuffer(r)}e._xhr.readyState===u.DONE&&"ms-stream"!==e._mode&&e.push(null)}}).call(t,r(5),r(23).Buffer,r(4))},function(e,t,r){var n=r(23).Buffer;e.exports=function(e){if(e instanceof Uint8Array){if(0===e.byteOffset&&e.byteLength===e.buffer.byteLength)return e.buffer;if("function"==typeof e.buffer.slice)return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}if(n.isBuffer(e)){for(var t=new Uint8Array(e.length),r=e.length,i=0;i<r;i++)t[i]=e[i];return t.buffer}throw new Error("Argument must be a Buffer")}},function(e,t,r){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,r){(function(t){function r(e,t){function r(){if(!i){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),i=!0}return e.apply(this,arguments)}if(n("noDeprecation"))return e;var i=!1;return r}function n(e){try{if(!t.localStorage)return!1}catch(e){return!1}var r=t.localStorage[e];return null!=r&&"true"===String(r).toLowerCase()}e.exports=r}).call(t,r(4))},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){function r(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var i in r)n.call(r,i)&&(e[i]=r[i])}return e}e.exports=r;var n=Object.prototype.hasOwnProperty},function(e,t){},function(e,t){}]);