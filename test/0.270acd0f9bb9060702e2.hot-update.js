webpackHotUpdate(0,{

/***/ "./app/actions/items.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("Object.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__models_rdf__ = __webpack_require__(\"./app/models/rdf.ts\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__services_sparql_item_service__ = __webpack_require__(\"./app/services/sparql-item-service.ts\");\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CREATE_TYPE\", function() { return CREATE_TYPE; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CREATE_ITEMS\", function() { return CREATE_ITEMS; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CREATE_DISPLAY_ITEMS\", function() { return CREATE_DISPLAY_ITEMS; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"DELETE_ITEMS\", function() { return DELETE_ITEMS; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CLEAR_TYPES\", function() { return CLEAR_TYPES; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"DISPLAY_ITEMS\", function() { return DISPLAY_ITEMS; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"HIDE_ITEM\", function() { return HIDE_ITEM; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CREATE_LOCAL_ITEM\", function() { return CREATE_LOCAL_ITEM; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ITEM_PROPERTIES\", function() { return ITEM_PROPERTIES; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SET_ORDERED_TYPES\", function() { return SET_ORDERED_TYPES; });\n/* harmony export (immutable) */ __webpack_exports__[\"itemProperty\"] = itemProperty;\n/* harmony export (immutable) */ __webpack_exports__[\"itemPropertyUpdated\"] = itemPropertyUpdated;\n/* harmony export (immutable) */ __webpack_exports__[\"createDisplayItem\"] = createDisplayItem;\n/* harmony export (immutable) */ __webpack_exports__[\"createDisplayItems\"] = createDisplayItems;\n/* harmony export (immutable) */ __webpack_exports__[\"displayItemsCreated\"] = displayItemsCreated;\n\n\nvar CREATE_TYPE = 'CREATE_TYPE';\nvar CREATE_ITEMS = 'CREATE_ITEMS';\nvar CREATE_DISPLAY_ITEMS = 'CREATE_DISPLAY_ITEMS';\nvar DELETE_ITEMS = 'DELETE_ITEMS';\nvar CLEAR_TYPES = 'CLEAR_TYPES';\nvar DISPLAY_ITEMS = 'DISPLAY_ITEMS';\nvar HIDE_ITEM = 'HIDE_ITEM';\nvar CREATE_LOCAL_ITEM = 'CREATE_LOCAL_ITEM';\nvar ITEM_PROPERTIES = 'ITEM_PROPERTIES';\nvar SET_ORDERED_TYPES = 'SET_ORDERED_TYPES';\nfunction itemProperty(sparqlItemService, item, propertiesToAdd, propertiesToRemove) {\n    return function (dispatch) {\n        return sparqlItemService.alterItem(item, propertiesToAdd, propertiesToRemove).then(function (str) {\n            dispatch(itemPropertyUpdated());\n        });\n    };\n}\nfunction itemPropertyUpdated() {\n    return {\n        type: ITEM_PROPERTIES,\n        payload: {}\n    };\n}\nfunction createDisplayItem($q, sparqlItemService, item, typ) {\n    return function (dispatch) {\n        return createItemsInternal($q, sparqlItemService, [item], typ).then(function () {\n            dispatch(displayItemsCreated([item], typ));\n        });\n    };\n}\nfunction createDisplayItems($q, sparqlItemService, items, typ) {\n    return function (dispatch) {\n        return createItemsInternal($q, sparqlItemService, items, typ).then(function () {\n            dispatch(displayItemsCreated(items, typ));\n        });\n    };\n}\nfunction displayItemsCreated(items, typ) {\n    return {\n        type: CREATE_DISPLAY_ITEMS,\n        payload: {\n            items: items,\n            type: typ\n        }\n    };\n}\nfunction createItemsInternal($q, sparqlItemService, items, type) {\n    var typeNode = type ? __WEBPACK_IMPORTED_MODULE_0__models_rdf__[\"b\" /* DataFactory */].instance.namedNode(type) : __WEBPACK_IMPORTED_MODULE_0__models_rdf__[\"d\" /* OWL */].Thing;\n    if (items[0]) {\n        var proms = items.map(function (node) {\n            if (node.value) {\n                return sparqlItemService.createNewItem([new __WEBPACK_IMPORTED_MODULE_1__services_sparql_item_service__[\"a\" /* PropertyAndValue */](__WEBPACK_IMPORTED_MODULE_0__models_rdf__[\"a\" /* SKOS */].prefLabel, __WEBPACK_IMPORTED_MODULE_0__models_rdf__[\"b\" /* DataFactory */].instance.literal(node.value)), new __WEBPACK_IMPORTED_MODULE_1__services_sparql_item_service__[\"a\" /* PropertyAndValue */](__WEBPACK_IMPORTED_MODULE_0__models_rdf__[\"c\" /* RDF */].type, typeNode)]);\n            } else {\n                return sparqlItemService.createNewItem([new __WEBPACK_IMPORTED_MODULE_1__services_sparql_item_service__[\"a\" /* PropertyAndValue */](__WEBPACK_IMPORTED_MODULE_0__models_rdf__[\"c\" /* RDF */].type, typeNode)]);\n            }\n        });\n        return this.$q.all(proms);\n    } else {\n        return sparqlItemService.createNewItem([new __WEBPACK_IMPORTED_MODULE_1__services_sparql_item_service__[\"a\" /* PropertyAndValue */](__WEBPACK_IMPORTED_MODULE_0__models_rdf__[\"c\" /* RDF */].type, typeNode), new __WEBPACK_IMPORTED_MODULE_1__services_sparql_item_service__[\"a\" /* PropertyAndValue */](__WEBPACK_IMPORTED_MODULE_0__models_rdf__[\"a\" /* SKOS */].prefLabel, __WEBPACK_IMPORTED_MODULE_0__models_rdf__[\"b\" /* DataFactory */].instance.literal(''))]).then(function (node) {\n            return [node];\n        });\n    }\n}//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hcHAvYWN0aW9ucy9pdGVtcy50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9hcHAvYWN0aW9ucy9pdGVtcy50cz84ZDYzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERhdGFGYWN0b3J5LCBPV0wsIFNLT1MsIFJERiB9IGZyb20gJy4uL21vZGVscy9yZGYnO1xuaW1wb3J0IHsgUHJvcGVydHlBbmRWYWx1ZSB9IGZyb20gJy4uL3NlcnZpY2VzL3NwYXJxbC1pdGVtLXNlcnZpY2UnO1xuZXhwb3J0IHZhciBDUkVBVEVfVFlQRSA9ICdDUkVBVEVfVFlQRSc7XG5leHBvcnQgdmFyIENSRUFURV9JVEVNUyA9ICdDUkVBVEVfSVRFTVMnO1xuZXhwb3J0IHZhciBDUkVBVEVfRElTUExBWV9JVEVNUyA9ICdDUkVBVEVfRElTUExBWV9JVEVNUyc7XG5leHBvcnQgdmFyIERFTEVURV9JVEVNUyA9ICdERUxFVEVfSVRFTVMnO1xuZXhwb3J0IHZhciBDTEVBUl9UWVBFUyA9ICdDTEVBUl9UWVBFUyc7XG5leHBvcnQgdmFyIERJU1BMQVlfSVRFTVMgPSAnRElTUExBWV9JVEVNUyc7XG5leHBvcnQgdmFyIEhJREVfSVRFTSA9ICdISURFX0lURU0nO1xuZXhwb3J0IHZhciBDUkVBVEVfTE9DQUxfSVRFTSA9ICdDUkVBVEVfTE9DQUxfSVRFTSc7XG5leHBvcnQgdmFyIElURU1fUFJPUEVSVElFUyA9ICdJVEVNX1BST1BFUlRJRVMnO1xuZXhwb3J0IHZhciBTRVRfT1JERVJFRF9UWVBFUyA9ICdTRVRfT1JERVJFRF9UWVBFUyc7XG5leHBvcnQgZnVuY3Rpb24gaXRlbVByb3BlcnR5KHNwYXJxbEl0ZW1TZXJ2aWNlLCBpdGVtLCBwcm9wZXJ0aWVzVG9BZGQsIHByb3BlcnRpZXNUb1JlbW92ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZGlzcGF0Y2gpIHtcbiAgICAgICAgcmV0dXJuIHNwYXJxbEl0ZW1TZXJ2aWNlLmFsdGVySXRlbShpdGVtLCBwcm9wZXJ0aWVzVG9BZGQsIHByb3BlcnRpZXNUb1JlbW92ZSkudGhlbihmdW5jdGlvbiAoc3RyKSB7XG4gICAgICAgICAgICBkaXNwYXRjaChpdGVtUHJvcGVydHlVcGRhdGVkKCkpO1xuICAgICAgICB9KTtcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGl0ZW1Qcm9wZXJ0eVVwZGF0ZWQoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogSVRFTV9QUk9QRVJUSUVTLFxuICAgICAgICBwYXlsb2FkOiB7fVxuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRGlzcGxheUl0ZW0oJHEsIHNwYXJxbEl0ZW1TZXJ2aWNlLCBpdGVtLCB0eXApIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGRpc3BhdGNoKSB7XG4gICAgICAgIHJldHVybiBjcmVhdGVJdGVtc0ludGVybmFsKCRxLCBzcGFycWxJdGVtU2VydmljZSwgW2l0ZW1dLCB0eXApLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZGlzcGF0Y2goZGlzcGxheUl0ZW1zQ3JlYXRlZChbaXRlbV0sIHR5cCkpO1xuICAgICAgICB9KTtcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZURpc3BsYXlJdGVtcygkcSwgc3BhcnFsSXRlbVNlcnZpY2UsIGl0ZW1zLCB0eXApIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGRpc3BhdGNoKSB7XG4gICAgICAgIHJldHVybiBjcmVhdGVJdGVtc0ludGVybmFsKCRxLCBzcGFycWxJdGVtU2VydmljZSwgaXRlbXMsIHR5cCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBkaXNwYXRjaChkaXNwbGF5SXRlbXNDcmVhdGVkKGl0ZW1zLCB0eXApKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBkaXNwbGF5SXRlbXNDcmVhdGVkKGl0ZW1zLCB0eXApIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBDUkVBVEVfRElTUExBWV9JVEVNUyxcbiAgICAgICAgcGF5bG9hZDoge1xuICAgICAgICAgICAgaXRlbXM6IGl0ZW1zLFxuICAgICAgICAgICAgdHlwZTogdHlwXG4gICAgICAgIH1cbiAgICB9O1xufVxuZnVuY3Rpb24gY3JlYXRlSXRlbXNJbnRlcm5hbCgkcSwgc3BhcnFsSXRlbVNlcnZpY2UsIGl0ZW1zLCB0eXBlKSB7XG4gICAgdmFyIHR5cGVOb2RlID0gdHlwZSA/IERhdGFGYWN0b3J5Lmluc3RhbmNlLm5hbWVkTm9kZSh0eXBlKSA6IE9XTC5UaGluZztcbiAgICBpZiAoaXRlbXNbMF0pIHtcbiAgICAgICAgdmFyIHByb21zID0gaXRlbXMubWFwKGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgICBpZiAobm9kZS52YWx1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBzcGFycWxJdGVtU2VydmljZS5jcmVhdGVOZXdJdGVtKFtuZXcgUHJvcGVydHlBbmRWYWx1ZShTS09TLnByZWZMYWJlbCwgRGF0YUZhY3RvcnkuaW5zdGFuY2UubGl0ZXJhbChub2RlLnZhbHVlKSksIG5ldyBQcm9wZXJ0eUFuZFZhbHVlKFJERi50eXBlLCB0eXBlTm9kZSldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBzcGFycWxJdGVtU2VydmljZS5jcmVhdGVOZXdJdGVtKFtuZXcgUHJvcGVydHlBbmRWYWx1ZShSREYudHlwZSwgdHlwZU5vZGUpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGhpcy4kcS5hbGwocHJvbXMpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHNwYXJxbEl0ZW1TZXJ2aWNlLmNyZWF0ZU5ld0l0ZW0oW25ldyBQcm9wZXJ0eUFuZFZhbHVlKFJERi50eXBlLCB0eXBlTm9kZSksIG5ldyBQcm9wZXJ0eUFuZFZhbHVlKFNLT1MucHJlZkxhYmVsLCBEYXRhRmFjdG9yeS5pbnN0YW5jZS5saXRlcmFsKCcnKSldKS50aGVuKGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgICByZXR1cm4gW25vZGVdO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gYXBwL2FjdGlvbnMvaXRlbXMudHMiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBRkE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),

/***/ "./app/components/construct-view/explore-component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__services_sparql_item_service__ = __webpack_require__(\"./app/services/sparql-item-service.ts\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__sunburst__ = __webpack_require__(\"./app/components/construct-view/sunburst.ts\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__property_popover__ = __webpack_require__(\"./app/components/construct-view/property-popover.ts\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_d3__ = __webpack_require__(\"./app/bower_components/d3/d3.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_d3___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_d3__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__models_rdf__ = __webpack_require__(\"./app/models/rdf.ts\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_angular__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_angular___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_angular__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__actions_verify__ = __webpack_require__(\"./app/actions/verify.ts\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__actions_types__ = __webpack_require__(\"./app/actions/types.ts\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__actions_items__ = __webpack_require__(\"./app/actions/items.ts\");\n/* unused harmony export ExploreComponent */\n\n\n\n\n\n\n\n\n\n\n\nvar ExploreComponentController = function () {\n    function ExploreComponentController($element, $compile, $window, $scope, $timeout, sparqlItemService, fibraService, $ngRedux, $q) {\n        var _this = this;\n        this.$element = $element;\n        this.$compile = $compile;\n        this.$window = $window;\n        this.$scope = $scope;\n        this.$timeout = $timeout;\n        this.sparqlItemService = sparqlItemService;\n        this.fibraService = fibraService;\n        this.$ngRedux = $ngRedux;\n        this.$q = $q;\n        this.primaryItems = [];\n        this.secondaryItems = [];\n        this.tertiaryItems = [];\n        this.untypedItems = [];\n        this.removedUntypedItems = [];\n        this.allItems = [];\n        this.radiusInitial = 1;\n        this.radius = 8;\n        this.radiusBounce = 15;\n        this.gridOffset = 50; // Should be even\n        this.chargeForce = __WEBPACK_IMPORTED_MODULE_3_d3__[\"forceCollide\"](this.gridOffset / 1.5);\n        this.chargeForce2 = __WEBPACK_IMPORTED_MODULE_3_d3__[\"forceCollide\"](this.gridOffset / 1.5);\n        this.svgBackgroundColor = '#EEE';\n        this.lastClickX = 0;\n        this.lastClickY = 0;\n        var unsub1 = $ngRedux.connect(this.mapVerifyToThis, __WEBPACK_IMPORTED_MODULE_6__actions_verify__)(this);\n        var unsub2 = $ngRedux.connect(this.mapTypesToThis, __WEBPACK_IMPORTED_MODULE_7__actions_types__)(this);\n        var unsub3 = $ngRedux.connect(this.mapItemsToThis, __WEBPACK_IMPORTED_MODULE_8__actions_items__)(this);\n        this.unsubscribe = function () {\n            unsub1();\n            unsub2();\n        };\n        this.sunburst = new __WEBPACK_IMPORTED_MODULE_1__sunburst__[\"a\" /* Sunburst */]($element, $compile, $scope, sparqlItemService, fibraService);\n        this.propertyPopover = new __WEBPACK_IMPORTED_MODULE_2__property_popover__[\"a\" /* PropertyPopover */]($element, $scope, fibraService, $compile);\n        this.fibraService.on('change', function () {\n            // this.verifyItem = this.fibraService.getState().construct.verifyItem\n            return _this.queryAndBuild();\n        });\n        this.itemService = sparqlItemService;\n        this.links = [];\n        this.$scope.layout = {\n            'choice': 'force',\n            'links': 'hide'\n        };\n        this.$scope.$watch('layout.choice', this.updateExplore.bind(this, false));\n        this.$scope.$watch('layout.links', this.updateExplore.bind(this, false));\n    }\n    ExploreComponentController.prototype.$onChanges = function (chngsObj) {\n        if (this.svgSel) {\n            this.updateExplore(false, false);\n        }\n    };\n    ExploreComponentController.prototype.$postLink = function () {\n        var _this = this;\n        this.svgSel = __WEBPACK_IMPORTED_MODULE_3_d3__[\"select\"](this.$element[0]).select('svg');\n        this.svgSel.append('rect').classed('background', true).style('fill', this.svgBackgroundColor).on('click', function () {\n            _this.lastClickX = __WEBPACK_IMPORTED_MODULE_3_d3__[\"event\"].offsetX;\n            _this.lastClickY = __WEBPACK_IMPORTED_MODULE_3_d3__[\"event\"].offsetY;\n            _this.fibraService.dispatchAction(_this.createDisplayItem());\n        });\n        // Create link g\n        this.svgSel.append('g').attr('class', 'links');\n        this.sunburst.addSunburstGroup(this.svgSel);\n        this.radius = 8;\n        this.tooltip = __WEBPACK_IMPORTED_MODULE_3_d3__[\"select\"]('body').append('div').style('position', 'absolute').style('z-index', '20').style('background-color', 'gray').style('color', 'white').style('padding', '3px').style('border-radius', '2px').style('visibility', 'hidden');\n        this.edittip = __WEBPACK_IMPORTED_MODULE_3_d3__[\"select\"]('body').append('div').attr('id', 'edittip').style('position', 'absolute').style('z-index', '40').style('background-color', 'white').style('color', 'gray').style('border', '1px solid gray').style('padding', '3px').style('border-radius', '2px').style('visibility', 'hidden');\n        this.updateSizing();\n        this.queryAndBuild();\n    };\n    // currently broken on deleting a link\n    ExploreComponentController.prototype.highlightLinks = function (d, i) {\n        __WEBPACK_IMPORTED_MODULE_3_d3__[\"selectAll\"]('line').classed('relevant', false);\n        for (var j = 0; j < this.links.length; j++) {\n            var linksource = this.links[j].source;\n            var linktarget = this.links[j].target;\n            if (linksource.index === i || linktarget.index === i) __WEBPACK_IMPORTED_MODULE_3_d3__[\"select\"]('#link-' + j).classed('relevant', true);\n        }\n    };\n    ExploreComponentController.prototype.$onDestroy = function () {\n        this.unsubscribe();\n    };\n    ExploreComponentController.prototype.queryAndBuild = function () {\n        var _this = this;\n        var prom = this.sparqlItemService.getItems(this.fibraService.getState().construct.items, false).then(function (items) {\n            // If we are showing property popovers, hide 'em.\n            _this.propertyPopover.hidePopover();\n            // Lock previous items\n            _this.lockExisting(_this.primaryItems);\n            _this.lockExisting(_this.secondaryItems);\n            _this.lockExisting(_this.tertiaryItems);\n            var displayTypes = _this.types.displayTypes;\n            var currentUntyped = _this.filterItemsByType(items, __WEBPACK_IMPORTED_MODULE_4__models_rdf__[\"d\" /* OWL */].Thing.value);\n            _this.removedUntypedItems = _this.untypedItems.filter(function (it) {\n                return currentUntyped.indexOf(it) === -1;\n            });\n            _this.untypedItems = _this.mergeNodes(_this.untypedItems, _this.filterItemsByType(items, __WEBPACK_IMPORTED_MODULE_4__models_rdf__[\"d\" /* OWL */].Thing.value));\n            if (displayTypes[0]) _this.primaryItems = _this.mergeNodes(_this.primaryItems, _this.filterItemsByType(items, displayTypes[0].id));\n            if (displayTypes[1]) _this.secondaryItems = _this.mergeNodes(_this.secondaryItems, _this.filterItemsByType(items, displayTypes[1].id));\n            if (displayTypes[2]) _this.tertiaryItems = _this.mergeNodes(_this.tertiaryItems, _this.filterItemsByType(items, displayTypes[2].id));\n            _this.allItems = _this.primaryItems.concat(_this.secondaryItems).concat(_this.tertiaryItems).concat(_this.untypedItems);\n            _this.properties = [];\n            if (_this.primaryItems[0] && _this.primaryItems[0].localProperties) {\n                for (var _i = 0, _a = _this.primaryItems[0].localProperties; _i < _a.length; _i++) {\n                    var p = _a[_i];\n                    _this.properties.push({ key: p.toCanonical(), value: p.label });\n                }\n            }\n            _this.links = _this.mergeLinks(_this.links);\n            return 'ok';\n        }).then(function () {\n            return _this.updateExplore();\n        });\n        this.fibraService.dispatchAction(this.fibraService.placeHolderAction(prom));\n        return prom;\n    };\n    ExploreComponentController.prototype.lockExisting = function (nodes) {\n        nodes.forEach(function (node) {\n            node.fx = node.gx;\n            node.fy = node.gy;\n        });\n    };\n    ExploreComponentController.prototype.filterItemsByType = function (items, type) {\n        return items.filter(function (it) {\n            var typeProp = it.localProperties.concat(it.remoteProperties).filter(function (pr) {\n                return pr.value === 'http://www.w3.org/1999/02/22-rdf-syntax-ns#type';\n            });\n            if (typeProp[0]) {\n                return typeProp[0].values.map(function (v) {\n                    return v.value.value;\n                }).indexOf(type) !== -1;\n            } else {\n                return false;\n            }\n        });\n    };\n    ExploreComponentController.prototype.updateSizing = function () {\n        // allow item_info_tip to expand somehow\n        // add delete and alter ability to sparql-item.pug\n        // fix how links sit on top of nodes\n        var viewport_width = window.innerWidth;\n        var viewport_height = window.innerHeight;\n        this.exploreWidth = viewport_width;\n        this.exploreHeight = viewport_height - 36;\n        __WEBPACK_IMPORTED_MODULE_3_d3__[\"select\"](this.$element[0]).select('#explorecontainer').style('height', this.exploreHeight + 'px');\n        // move table down so top is at bottom of viewport\n        __WEBPACK_IMPORTED_MODULE_3_d3__[\"select\"](this.$element[0]).select('#exploretable').style('height', viewport_height - 50 + 'px');\n        this.svgSel.style('width', viewport_width + 'px').style('height', viewport_height - 36 + 'px');\n        this.svgSel.select('rect.background').style('width', viewport_width + 'px').style('height', viewport_height - 36 + 'px');\n        var svg_width = +this.svgSel.style('width').replace('px', '');\n        var svg_height = +this.svgSel.style('height').replace('px', '');\n    };\n    ExploreComponentController.prototype.appendNodes = function (enterSelection, className) {\n        var _this = this;\n        var appendSelection = enterSelection.append('g').attr('id', function (d, i) {\n            return 'node-' + i + '-' + className;\n        }).attr('class', 'node').classed(className, true).append('circle').classed('node-circle', true).classed(className, true).attr('id', function (d, i) {\n            return 'node-circle-' + i + '-' + className;\n        }).attr('r', this.radiusInitial + 'px').call(__WEBPACK_IMPORTED_MODULE_3_d3__[\"drag\"]().on('start', function (d, i) {\n            if (!_this.linkMode) {\n                d.fx = d.x;\n                d.fy = d.y;\n            } else {\n                _this.dragline = _this.svgSel.append('line').attr('class', 'dragLine');\n            }\n        }).on('drag', function (d, i, group) {\n            if (!_this.linkMode) {\n                __WEBPACK_IMPORTED_MODULE_3_d3__[\"select\"](group[i]).classed('fixed', true);\n                d.x = __WEBPACK_IMPORTED_MODULE_3_d3__[\"event\"].x;\n                d.y = __WEBPACK_IMPORTED_MODULE_3_d3__[\"event\"].y;\n            } else {\n                _this.dragline.attr('x1', d.x).attr('y1', d.y).attr('x2', __WEBPACK_IMPORTED_MODULE_3_d3__[\"event\"].x).attr('y2', __WEBPACK_IMPORTED_MODULE_3_d3__[\"event\"].y);\n            }\n            _this.updateExplore(false, false);\n        }).on('end', function (d, i, group) {\n            if (!_this.linkMode) {\n                if (!__WEBPACK_IMPORTED_MODULE_3_d3__[\"select\"](group[i]).classed('fixed')) {\n                    d.fx = undefined;\n                    d.fy = undefined;\n                }\n            } else {\n                var lineX_1 = +_this.dragline.attr('x2');\n                var lineY_1 = +_this.dragline.attr('y2');\n                var nodeDrop_1 = false;\n                __WEBPACK_IMPORTED_MODULE_3_d3__[\"selectAll\"]('.node').each(function (f, j) {\n                    if (Math.abs(lineX_1 - f.x) < _this.radius && Math.abs(lineY_1 - f.y) < _this.radius) {\n                        nodeDrop_1 = true;\n                        _this.fibraService.dispatchAction(_this.itemProperty(f, [new __WEBPACK_IMPORTED_MODULE_0__services_sparql_item_service__[\"a\" /* PropertyAndValue */](__WEBPACK_IMPORTED_MODULE_4__models_rdf__[\"a\" /* SKOS */].related, __WEBPACK_IMPORTED_MODULE_4__models_rdf__[\"b\" /* DataFactory */].instance.nodeFromNode(d))], [])).then(function (state) {\n                            _this.dragline.remove();\n                            _this.queryAndBuild();\n                            return state;\n                        });\n                    }\n                });\n                if (!nodeDrop_1) {\n                    _this.dragline.remove();\n                }\n            }\n        })).on('mouseover', function (d, i) {\n            _this.highlightLinks(d, i);\n            _this.tooltip.style('top', __WEBPACK_IMPORTED_MODULE_3_d3__[\"event\"].pageY - 10 + 'px').style('left', __WEBPACK_IMPORTED_MODULE_3_d3__[\"event\"].pageX + 10 + 'px').style('visibility', 'visible').text(d.label);\n        }).on('mouseout', function (d, i) {\n            _this.svgSel.selectAll('line').classed('relevant', false);\n            _this.tooltip.style('visibility', 'hidden');\n        }).on('click', function (d, i, group) {\n            var localSelected = d.selected;\n            // Unselect everything\n            _this.svgSel.selectAll('.node').each(function (n) {\n                n.selected = false;\n            });\n            // Flip this one\n            d.selected = !localSelected;\n            _this.updateExplore(false);\n            if (d.selected) {\n                _this.svgSel.select('g.sunburst-overlay').datum(d).each(_this.sunburst.buildSunburst.bind(_this)).style('display', 'block');\n            } else {\n                _this.svgSel.select('.sunburst-overlay').style('display', 'none');\n            }\n            _this.highlightLinks(d, i);\n        });\n        appendSelection.transition().attr('r', this.radius + this.radiusBounce + 'px').transition().attr('r', this.radius + 'px');\n        return appendSelection;\n    };\n    ExploreComponentController.prototype.snapToGrid = function (x, y, primary) {\n        if (primary === void 0) {\n            primary = true;\n        }\n        var sx, sy;\n        // Snap to gridOffset with further offset for multiples\n        if (primary) {\n            sx = Math.round(x / this.gridOffset) * this.gridOffset;\n            sy = Math.round(y / this.gridOffset) * this.gridOffset;\n        } else {\n            sx = Math.round(x / this.gridOffset) * this.gridOffset - this.gridOffset / 2;\n            sy = Math.round(y / this.gridOffset) * this.gridOffset - this.gridOffset / 2;\n        }\n        return [sx, sy];\n    };\n    ExploreComponentController.prototype.tickTransformNodes = function (sel, primary) {\n        var _this = this;\n        if (primary === void 0) {\n            primary = true;\n        }\n        sel.attr('transform', function (d, i) {\n            var x = d.x,\n                y = d.y;\n            if (d.x < _this.radius) x = _this.radius;\n            if (d.y < _this.radius) y = _this.radius;\n            var _a = [x, y],\n                gx = _a[0],\n                gy = _a[1];\n            if (_this.$scope.layout.choice === 'forcegrid') {\n                _b = _this.snapToGrid(x, y, primary), gx = _b[0], gy = _b[1];\n            }\n            d.gx = gx;\n            d.gy = gy;\n            return 'translate(' + gx + ', ' + gy + ')';\n            var _b;\n        });\n        if (sel.filter(function (d) {\n            return d.selected;\n        }).node()) {\n            var sbFunc_1 = this.sunburst.buildSunburst;\n            var svgSel_1 = this.svgSel;\n            var tickSunburst = function (d, i, g) {\n                svgSel_1.select('g.sunburst-overlay').datum(d).each(sbFunc_1.bind(this));\n            };\n            sel.filter(function (d) {\n                return d.selected;\n            }).each(tickSunburst.bind(this));\n        }\n    };\n    ExploreComponentController.prototype.genericTick = function (primaryNodes, secondaryNodes, untypedNodes, linkLines, transition) {\n        if (transition === void 0) {\n            transition = false;\n        }\n        var lPrimaryNodes = primaryNodes;\n        var lSecondaryNodes = secondaryNodes;\n        var lUntypedNodes = untypedNodes;\n        var lLinkLines = linkLines;\n        if (transition) {\n            lPrimaryNodes = lPrimaryNodes.transition();\n            lSecondaryNodes = lSecondaryNodes.transition();\n            lUntypedNodes = lUntypedNodes.transition();\n            lLinkLines = lLinkLines.transition();\n        }\n        this.tickTransformNodes(lPrimaryNodes, true);\n        this.tickTransformNodes(lSecondaryNodes, false);\n        this.tickTransformNodes(lUntypedNodes, false);\n        this.svgSel.selectAll('.node-circle').classed('selected-circle', function (d) {\n            return d.selected;\n        }).style('cursor', this.linkMode ? 'crosshair' : 'initial');\n        this.svgSel.selectAll('.node-circle').classed('labeled', function (d) {\n            return d.label ? true : false;\n        }).classed('verified', function (d) {\n            return d.localProperties.filter(function (p) {\n                return p.value === 'http://www.w3.org/2002/07/owl#sameAs';\n            }).length > 0;\n        });\n        lLinkLines.attr('x1', function (d) {\n            return d.source.gx;\n        }).attr('y1', function (d) {\n            return d.source.gy;\n        }).attr('x2', function (d) {\n            return d.target.gx;\n        }).attr('y2', function (d) {\n            return d.target.gy;\n        });\n    };\n    ExploreComponentController.prototype.updateExplore = function (runSim, transition) {\n        var _this = this;\n        if (runSim === void 0) {\n            runSim = true;\n        }\n        if (transition === void 0) {\n            transition = false;\n        }\n        var untypedNodes = this.svgSel.selectAll('circle.untyped').data(this.untypedItems, function (d) {\n            return d.value;\n        });\n        var primaryNodes = this.svgSel.selectAll('circle.primary').data(this.primaryItems, function (d) {\n            return d.value;\n        });\n        var secondaryNodes = this.svgSel.selectAll('circle.secondary').data(this.secondaryItems, function (d) {\n            return d.value;\n        });\n        primaryNodes.exit().remove();\n        secondaryNodes.exit().remove();\n        untypedNodes.exit().remove();\n        // Untyped nodes should come in one at a time based on a user's click event. For these\n        // we also want append the user interface for setting type and label.\n        untypedNodes.enter().each(function (datum, i, g) {\n            datum.x = _this.lastClickX;\n            datum.y = _this.lastClickY;\n            datum.fx = _this.lastClickX;\n            datum.fy = _this.lastClickY;\n            datum.gx = _this.lastClickX;\n            datum.gy = _this.lastClickY;\n        }).each(this.propertyPopover.addPopover.bind(this, this.$scope, this.svgSel));\n        // If a node went from being untyped to being primary or secondary, bring along its position\n        // Also handle position getting set from a drop (pull position from state)\n        var applyOldPosition = function (datum) {\n            // Get position from state if it was set there.\n            datum.x = _this.fibraService.getState().construct.itemIndex[datum.value].x;\n            datum.y = _this.fibraService.getState().construct.itemIndex[datum.value].y;\n            datum.fx = _this.fibraService.getState().construct.itemIndex[datum.value].x;\n            datum.fy = _this.fibraService.getState().construct.itemIndex[datum.value].y;\n            datum.gx = _this.fibraService.getState().construct.itemIndex[datum.value].x;\n            datum.gx = _this.fibraService.getState().construct.itemIndex[datum.value].y;\n            // Or if node was already here, get position from old node\n            var oldNode = _this.removedUntypedItems.filter(function (it) {\n                return it.value === datum.value;\n            })[0];\n            if (oldNode) {\n                datum.x = oldNode.x;\n                datum.y = oldNode.y;\n                datum.fx = oldNode.fx;\n                datum.fy = oldNode.fy;\n                datum.gx = oldNode.gx;\n                datum.gy = oldNode.gy;\n            }\n        };\n        primaryNodes.enter().each(applyOldPosition);\n        secondaryNodes.enter().each(applyOldPosition);\n        primaryNodes = primaryNodes.merge(this.appendNodes(primaryNodes.enter(), 'primary'));\n        secondaryNodes = secondaryNodes.merge(this.appendNodes(secondaryNodes.enter(), 'secondary'));\n        untypedNodes = untypedNodes.merge(this.appendNodes(untypedNodes.enter(), 'untyped'));\n        var linkLines = this.svgSel.select('g.links').selectAll('line').data(this.links);\n        linkLines.exit().remove();\n        linkLines = linkLines.enter().append('line').attr('id', function (d, i) {\n            return 'link-' + i;\n        }).on('mouseover', function (d, i) {\n            _this.tooltip.style('top', __WEBPACK_IMPORTED_MODULE_3_d3__[\"event\"].pageY - 10 + 'px').style('left', __WEBPACK_IMPORTED_MODULE_3_d3__[\"event\"].pageX + 10 + 'px').style('visibility', 'visible').text(d.property.label);\n        }).on('mouseout', function (d, i) {\n            _this.tooltip.style('visibility', 'hidden');\n        }).merge(linkLines).style('visibility', this.$scope.layout.links === 'show' ? 'visible' : 'hidden');\n        // Add sunburst again so it stays on top\n        this.sunburst.addSunburstGroup(this.svgSel);\n        this.genericTick(primaryNodes, secondaryNodes, untypedNodes, linkLines, transition);\n        return this.$q.resolve('ok');\n    };\n    ExploreComponentController.prototype.mapVerifyToThis = function (state) {\n        return {\n            verify: state.verify\n        };\n    };\n    ExploreComponentController.prototype.mapTypesToThis = function (state) {\n        return {\n            types: state.types\n        };\n    };\n    ExploreComponentController.prototype.mapItemsToThis = function (state) {\n        return {\n            items: state.items\n        };\n    };\n    ExploreComponentController.prototype.mergeNodes = function (oldNodes, nodes) {\n        var newNodes = [];\n        // Check if old nodes are still in the mix\n        for (var i = 0; i < oldNodes.length; i++) {\n            for (var j = 0; j < nodes.length; j++) {\n                if (oldNodes[i].toCanonical() === nodes[j].toCanonical()) {\n                    newNodes.push(oldNodes[i]);\n                    // We need to grab new node information like labels and props in case it's changed\n                    oldNodes[i].label = nodes[j].label;\n                    oldNodes[i].localProperties = nodes[j].localProperties;\n                }\n            }\n        }\n        // Add the new nodes\n        for (var i = 0; i < nodes.length; i++) {\n            var check = false;\n            for (var j = 0; j < newNodes.length; j++) {\n                if (newNodes[j].toCanonical() === nodes[i].toCanonical()) check = true;\n            }\n            if (!check) {\n                newNodes.push(nodes[i]);\n            }\n        }\n        return newNodes;\n    };\n    ExploreComponentController.prototype.mergeLinks = function (oldLinks) {\n        var newLinks = [];\n        var items = this.primaryItems.concat(this.secondaryItems);\n        var sameAs = new __WEBPACK_IMPORTED_MODULE_4__models_rdf__[\"e\" /* ENodeMap */]();\n        for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\n            var item = items_1[_i];\n            sameAs.set(item, item);\n            var sameAsProp = item.localProperties.filter(function (p) {\n                return __WEBPACK_IMPORTED_MODULE_4__models_rdf__[\"d\" /* OWL */].sameAs.equals(p);\n            })[0];\n            if (sameAsProp && sameAsProp.values) for (var _a = 0, _b = sameAsProp.values; _a < _b.length; _a++) {\n                var n = _b[_a];\n                sameAs.set(n.value, item);\n            }\n        }\n        // Iterate over item property values to see if they match the id of any\n        // of the items displayed. Also check if they match sameAs values...\n        for (var _c = 0, items_2 = items; _c < items_2.length; _c++) {\n            var item = items_2[_c];\n            for (var _d = 0, _e = item.localProperties; _d < _e.length; _d++) {\n                var p = _e[_d];\n                for (var _f = 0, _g = p.values; _f < _g.length; _f++) {\n                    var v = _g[_f];\n                    if (sameAs.has(v.value) && item !== sameAs.get(v.value) && items.indexOf(sameAs.get(v.value)) !== -1) {\n                        newLinks.push({\n                            source: item,\n                            target: sameAs.get(v.value),\n                            property: p\n                        });\n                    }\n                }\n            }\n        }\n        return newLinks;\n    };\n    return ExploreComponentController;\n}();\nvar ExploreComponent = function () {\n    function ExploreComponent() {\n        this.bindings = {\n            linkMode: '<'\n        };\n        this.controller = ExploreComponentController; // (new (...args: any[]) => angular.IController) = ExploreComponentController\n        this.template = __webpack_require__(\"./app/components/construct-view/explore.pug\")();\n    }\n    return ExploreComponent;\n}();\n\n__WEBPACK_IMPORTED_MODULE_5_angular__[\"module\"]('fibra.components.explore', ['fibra.services']).component('explore', new ExploreComponent());//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hcHAvY29tcG9uZW50cy9jb25zdHJ1Y3Qtdmlldy9leHBsb3JlLWNvbXBvbmVudC50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9hcHAvY29tcG9uZW50cy9jb25zdHJ1Y3Qtdmlldy9leHBsb3JlLWNvbXBvbmVudC50cz85OTJjIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcbmltcG9ydCB7IFByb3BlcnR5QW5kVmFsdWUgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9zcGFycWwtaXRlbS1zZXJ2aWNlJztcbmltcG9ydCB7IFN1bmJ1cnN0IH0gZnJvbSAnLi9zdW5idXJzdCc7XG5pbXBvcnQgeyBQcm9wZXJ0eVBvcG92ZXIgfSBmcm9tICcuL3Byb3BlcnR5LXBvcG92ZXInO1xuaW1wb3J0ICogYXMgZDMgZnJvbSAnZDMnO1xuaW1wb3J0IHsgT1dMLCBTS09TLCBEYXRhRmFjdG9yeSwgRU5vZGVNYXAgfSBmcm9tICcuLi8uLi9tb2RlbHMvcmRmJztcbmltcG9ydCAqIGFzIGFuZ3VsYXIgZnJvbSAnYW5ndWxhcic7XG5pbXBvcnQgKiBhcyBWZXJpZnlBY3Rpb25zIGZyb20gJy4uLy4uL2FjdGlvbnMvdmVyaWZ5JztcbmltcG9ydCAqIGFzIFR5cGVBY3Rpb25zIGZyb20gJy4uLy4uL2FjdGlvbnMvdHlwZXMnO1xuaW1wb3J0ICogYXMgSXRlbUFjdGlvbnMgZnJvbSAnLi4vLi4vYWN0aW9ucy9pdGVtcyc7XG52YXIgRXhwbG9yZUNvbXBvbmVudENvbnRyb2xsZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEV4cGxvcmVDb21wb25lbnRDb250cm9sbGVyKCRlbGVtZW50LCAkY29tcGlsZSwgJHdpbmRvdywgJHNjb3BlLCAkdGltZW91dCwgc3BhcnFsSXRlbVNlcnZpY2UsIGZpYnJhU2VydmljZSwgJG5nUmVkdXgsICRxKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuJGVsZW1lbnQgPSAkZWxlbWVudDtcbiAgICAgICAgdGhpcy4kY29tcGlsZSA9ICRjb21waWxlO1xuICAgICAgICB0aGlzLiR3aW5kb3cgPSAkd2luZG93O1xuICAgICAgICB0aGlzLiRzY29wZSA9ICRzY29wZTtcbiAgICAgICAgdGhpcy4kdGltZW91dCA9ICR0aW1lb3V0O1xuICAgICAgICB0aGlzLnNwYXJxbEl0ZW1TZXJ2aWNlID0gc3BhcnFsSXRlbVNlcnZpY2U7XG4gICAgICAgIHRoaXMuZmlicmFTZXJ2aWNlID0gZmlicmFTZXJ2aWNlO1xuICAgICAgICB0aGlzLiRuZ1JlZHV4ID0gJG5nUmVkdXg7XG4gICAgICAgIHRoaXMuJHEgPSAkcTtcbiAgICAgICAgdGhpcy5wcmltYXJ5SXRlbXMgPSBbXTtcbiAgICAgICAgdGhpcy5zZWNvbmRhcnlJdGVtcyA9IFtdO1xuICAgICAgICB0aGlzLnRlcnRpYXJ5SXRlbXMgPSBbXTtcbiAgICAgICAgdGhpcy51bnR5cGVkSXRlbXMgPSBbXTtcbiAgICAgICAgdGhpcy5yZW1vdmVkVW50eXBlZEl0ZW1zID0gW107XG4gICAgICAgIHRoaXMuYWxsSXRlbXMgPSBbXTtcbiAgICAgICAgdGhpcy5yYWRpdXNJbml0aWFsID0gMTtcbiAgICAgICAgdGhpcy5yYWRpdXMgPSA4O1xuICAgICAgICB0aGlzLnJhZGl1c0JvdW5jZSA9IDE1O1xuICAgICAgICB0aGlzLmdyaWRPZmZzZXQgPSA1MDsgLy8gU2hvdWxkIGJlIGV2ZW5cbiAgICAgICAgdGhpcy5jaGFyZ2VGb3JjZSA9IGQzLmZvcmNlQ29sbGlkZSh0aGlzLmdyaWRPZmZzZXQgLyAxLjUpO1xuICAgICAgICB0aGlzLmNoYXJnZUZvcmNlMiA9IGQzLmZvcmNlQ29sbGlkZSh0aGlzLmdyaWRPZmZzZXQgLyAxLjUpO1xuICAgICAgICB0aGlzLnN2Z0JhY2tncm91bmRDb2xvciA9ICcjRUVFJztcbiAgICAgICAgdGhpcy5sYXN0Q2xpY2tYID0gMDtcbiAgICAgICAgdGhpcy5sYXN0Q2xpY2tZID0gMDtcbiAgICAgICAgdmFyIHVuc3ViMSA9ICRuZ1JlZHV4LmNvbm5lY3QodGhpcy5tYXBWZXJpZnlUb1RoaXMsIFZlcmlmeUFjdGlvbnMpKHRoaXMpO1xuICAgICAgICB2YXIgdW5zdWIyID0gJG5nUmVkdXguY29ubmVjdCh0aGlzLm1hcFR5cGVzVG9UaGlzLCBUeXBlQWN0aW9ucykodGhpcyk7XG4gICAgICAgIHZhciB1bnN1YjMgPSAkbmdSZWR1eC5jb25uZWN0KHRoaXMubWFwSXRlbXNUb1RoaXMsIEl0ZW1BY3Rpb25zKSh0aGlzKTtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHVuc3ViMSgpO1xuICAgICAgICAgICAgdW5zdWIyKCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc3VuYnVyc3QgPSBuZXcgU3VuYnVyc3QoJGVsZW1lbnQsICRjb21waWxlLCAkc2NvcGUsIHNwYXJxbEl0ZW1TZXJ2aWNlLCBmaWJyYVNlcnZpY2UpO1xuICAgICAgICB0aGlzLnByb3BlcnR5UG9wb3ZlciA9IG5ldyBQcm9wZXJ0eVBvcG92ZXIoJGVsZW1lbnQsICRzY29wZSwgZmlicmFTZXJ2aWNlLCAkY29tcGlsZSk7XG4gICAgICAgIHRoaXMuZmlicmFTZXJ2aWNlLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyB0aGlzLnZlcmlmeUl0ZW0gPSB0aGlzLmZpYnJhU2VydmljZS5nZXRTdGF0ZSgpLmNvbnN0cnVjdC52ZXJpZnlJdGVtXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMucXVlcnlBbmRCdWlsZCgpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5pdGVtU2VydmljZSA9IHNwYXJxbEl0ZW1TZXJ2aWNlO1xuICAgICAgICB0aGlzLmxpbmtzID0gW107XG4gICAgICAgIHRoaXMuJHNjb3BlLmxheW91dCA9IHtcbiAgICAgICAgICAgICdjaG9pY2UnOiAnZm9yY2UnLFxuICAgICAgICAgICAgJ2xpbmtzJzogJ2hpZGUnXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuJHNjb3BlLiR3YXRjaCgnbGF5b3V0LmNob2ljZScsIHRoaXMudXBkYXRlRXhwbG9yZS5iaW5kKHRoaXMsIGZhbHNlKSk7XG4gICAgICAgIHRoaXMuJHNjb3BlLiR3YXRjaCgnbGF5b3V0LmxpbmtzJywgdGhpcy51cGRhdGVFeHBsb3JlLmJpbmQodGhpcywgZmFsc2UpKTtcbiAgICB9XG4gICAgRXhwbG9yZUNvbXBvbmVudENvbnRyb2xsZXIucHJvdG90eXBlLiRvbkNoYW5nZXMgPSBmdW5jdGlvbiAoY2huZ3NPYmopIHtcbiAgICAgICAgaWYgKHRoaXMuc3ZnU2VsKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUV4cGxvcmUoZmFsc2UsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgRXhwbG9yZUNvbXBvbmVudENvbnRyb2xsZXIucHJvdG90eXBlLiRwb3N0TGluayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5zdmdTZWwgPSBkMy5zZWxlY3QodGhpcy4kZWxlbWVudFswXSkuc2VsZWN0KCdzdmcnKTtcbiAgICAgICAgdGhpcy5zdmdTZWwuYXBwZW5kKCdyZWN0JylcbiAgICAgICAgICAgIC5jbGFzc2VkKCdiYWNrZ3JvdW5kJywgdHJ1ZSlcbiAgICAgICAgICAgIC5zdHlsZSgnZmlsbCcsIHRoaXMuc3ZnQmFja2dyb3VuZENvbG9yKVxuICAgICAgICAgICAgLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzLmxhc3RDbGlja1ggPSBkMy5ldmVudC5vZmZzZXRYO1xuICAgICAgICAgICAgX3RoaXMubGFzdENsaWNrWSA9IGQzLmV2ZW50Lm9mZnNldFk7XG4gICAgICAgICAgICBfdGhpcy5maWJyYVNlcnZpY2UuZGlzcGF0Y2hBY3Rpb24oX3RoaXMuY3JlYXRlRGlzcGxheUl0ZW0oKSk7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBDcmVhdGUgbGluayBnXG4gICAgICAgIHRoaXMuc3ZnU2VsLmFwcGVuZCgnZycpLmF0dHIoJ2NsYXNzJywgJ2xpbmtzJyk7XG4gICAgICAgIHRoaXMuc3VuYnVyc3QuYWRkU3VuYnVyc3RHcm91cCh0aGlzLnN2Z1NlbCk7XG4gICAgICAgIHRoaXMucmFkaXVzID0gODtcbiAgICAgICAgdGhpcy50b29sdGlwID0gZDMuc2VsZWN0KCdib2R5JykuYXBwZW5kKCdkaXYnKVxuICAgICAgICAgICAgLnN0eWxlKCdwb3NpdGlvbicsICdhYnNvbHV0ZScpXG4gICAgICAgICAgICAuc3R5bGUoJ3otaW5kZXgnLCAnMjAnKVxuICAgICAgICAgICAgLnN0eWxlKCdiYWNrZ3JvdW5kLWNvbG9yJywgJ2dyYXknKVxuICAgICAgICAgICAgLnN0eWxlKCdjb2xvcicsICd3aGl0ZScpXG4gICAgICAgICAgICAuc3R5bGUoJ3BhZGRpbmcnLCAnM3B4JylcbiAgICAgICAgICAgIC5zdHlsZSgnYm9yZGVyLXJhZGl1cycsICcycHgnKVxuICAgICAgICAgICAgLnN0eWxlKCd2aXNpYmlsaXR5JywgJ2hpZGRlbicpO1xuICAgICAgICB0aGlzLmVkaXR0aXAgPSBkMy5zZWxlY3QoJ2JvZHknKS5hcHBlbmQoJ2RpdicpXG4gICAgICAgICAgICAuYXR0cignaWQnLCAnZWRpdHRpcCcpXG4gICAgICAgICAgICAuc3R5bGUoJ3Bvc2l0aW9uJywgJ2Fic29sdXRlJylcbiAgICAgICAgICAgIC5zdHlsZSgnei1pbmRleCcsICc0MCcpXG4gICAgICAgICAgICAuc3R5bGUoJ2JhY2tncm91bmQtY29sb3InLCAnd2hpdGUnKVxuICAgICAgICAgICAgLnN0eWxlKCdjb2xvcicsICdncmF5JylcbiAgICAgICAgICAgIC5zdHlsZSgnYm9yZGVyJywgJzFweCBzb2xpZCBncmF5JylcbiAgICAgICAgICAgIC5zdHlsZSgncGFkZGluZycsICczcHgnKVxuICAgICAgICAgICAgLnN0eWxlKCdib3JkZXItcmFkaXVzJywgJzJweCcpXG4gICAgICAgICAgICAuc3R5bGUoJ3Zpc2liaWxpdHknLCAnaGlkZGVuJyk7XG4gICAgICAgIHRoaXMudXBkYXRlU2l6aW5nKCk7XG4gICAgICAgIHRoaXMucXVlcnlBbmRCdWlsZCgpO1xuICAgIH07XG4gICAgLy8gY3VycmVudGx5IGJyb2tlbiBvbiBkZWxldGluZyBhIGxpbmtcbiAgICBFeHBsb3JlQ29tcG9uZW50Q29udHJvbGxlci5wcm90b3R5cGUuaGlnaGxpZ2h0TGlua3MgPSBmdW5jdGlvbiAoZCwgaSkge1xuICAgICAgICBkMy5zZWxlY3RBbGwoJ2xpbmUnKS5jbGFzc2VkKCdyZWxldmFudCcsIGZhbHNlKTtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB0aGlzLmxpbmtzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICB2YXIgbGlua3NvdXJjZSA9IHRoaXMubGlua3Nbal0uc291cmNlO1xuICAgICAgICAgICAgdmFyIGxpbmt0YXJnZXQgPSB0aGlzLmxpbmtzW2pdLnRhcmdldDtcbiAgICAgICAgICAgIGlmIChsaW5rc291cmNlLmluZGV4ID09PSBpIHx8IGxpbmt0YXJnZXQuaW5kZXggPT09IGkpXG4gICAgICAgICAgICAgICAgZDMuc2VsZWN0KCcjbGluay0nICsgaikuY2xhc3NlZCgncmVsZXZhbnQnLCB0cnVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgRXhwbG9yZUNvbXBvbmVudENvbnRyb2xsZXIucHJvdG90eXBlLiRvbkRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICB9O1xuICAgIEV4cGxvcmVDb21wb25lbnRDb250cm9sbGVyLnByb3RvdHlwZS5xdWVyeUFuZEJ1aWxkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgcHJvbSA9IHRoaXMuc3BhcnFsSXRlbVNlcnZpY2UuZ2V0SXRlbXModGhpcy5maWJyYVNlcnZpY2UuZ2V0U3RhdGUoKS5jb25zdHJ1Y3QuaXRlbXMsIGZhbHNlKS50aGVuKGZ1bmN0aW9uIChpdGVtcykge1xuICAgICAgICAgICAgLy8gSWYgd2UgYXJlIHNob3dpbmcgcHJvcGVydHkgcG9wb3ZlcnMsIGhpZGUgJ2VtLlxuICAgICAgICAgICAgX3RoaXMucHJvcGVydHlQb3BvdmVyLmhpZGVQb3BvdmVyKCk7XG4gICAgICAgICAgICAvLyBMb2NrIHByZXZpb3VzIGl0ZW1zXG4gICAgICAgICAgICBfdGhpcy5sb2NrRXhpc3RpbmcoX3RoaXMucHJpbWFyeUl0ZW1zKTtcbiAgICAgICAgICAgIF90aGlzLmxvY2tFeGlzdGluZyhfdGhpcy5zZWNvbmRhcnlJdGVtcyk7XG4gICAgICAgICAgICBfdGhpcy5sb2NrRXhpc3RpbmcoX3RoaXMudGVydGlhcnlJdGVtcyk7XG4gICAgICAgICAgICB2YXIgZGlzcGxheVR5cGVzID0gX3RoaXMudHlwZXMuZGlzcGxheVR5cGVzO1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRVbnR5cGVkID0gX3RoaXMuZmlsdGVySXRlbXNCeVR5cGUoaXRlbXMsIE9XTC5UaGluZy52YWx1ZSk7XG4gICAgICAgICAgICBfdGhpcy5yZW1vdmVkVW50eXBlZEl0ZW1zID0gX3RoaXMudW50eXBlZEl0ZW1zLmZpbHRlcihmdW5jdGlvbiAoaXQpIHsgcmV0dXJuIGN1cnJlbnRVbnR5cGVkLmluZGV4T2YoaXQpID09PSAtMTsgfSk7XG4gICAgICAgICAgICBfdGhpcy51bnR5cGVkSXRlbXMgPSBfdGhpcy5tZXJnZU5vZGVzKF90aGlzLnVudHlwZWRJdGVtcywgX3RoaXMuZmlsdGVySXRlbXNCeVR5cGUoaXRlbXMsIE9XTC5UaGluZy52YWx1ZSkpO1xuICAgICAgICAgICAgaWYgKGRpc3BsYXlUeXBlc1swXSlcbiAgICAgICAgICAgICAgICBfdGhpcy5wcmltYXJ5SXRlbXMgPSBfdGhpcy5tZXJnZU5vZGVzKF90aGlzLnByaW1hcnlJdGVtcywgX3RoaXMuZmlsdGVySXRlbXNCeVR5cGUoaXRlbXMsIGRpc3BsYXlUeXBlc1swXS5pZCkpO1xuICAgICAgICAgICAgaWYgKGRpc3BsYXlUeXBlc1sxXSlcbiAgICAgICAgICAgICAgICBfdGhpcy5zZWNvbmRhcnlJdGVtcyA9IF90aGlzLm1lcmdlTm9kZXMoX3RoaXMuc2Vjb25kYXJ5SXRlbXMsIF90aGlzLmZpbHRlckl0ZW1zQnlUeXBlKGl0ZW1zLCBkaXNwbGF5VHlwZXNbMV0uaWQpKTtcbiAgICAgICAgICAgIGlmIChkaXNwbGF5VHlwZXNbMl0pXG4gICAgICAgICAgICAgICAgX3RoaXMudGVydGlhcnlJdGVtcyA9IF90aGlzLm1lcmdlTm9kZXMoX3RoaXMudGVydGlhcnlJdGVtcywgX3RoaXMuZmlsdGVySXRlbXNCeVR5cGUoaXRlbXMsIGRpc3BsYXlUeXBlc1syXS5pZCkpO1xuICAgICAgICAgICAgX3RoaXMuYWxsSXRlbXMgPSBfdGhpcy5wcmltYXJ5SXRlbXMuY29uY2F0KF90aGlzLnNlY29uZGFyeUl0ZW1zKS5jb25jYXQoX3RoaXMudGVydGlhcnlJdGVtcykuY29uY2F0KF90aGlzLnVudHlwZWRJdGVtcyk7XG4gICAgICAgICAgICBfdGhpcy5wcm9wZXJ0aWVzID0gW107XG4gICAgICAgICAgICBpZiAoX3RoaXMucHJpbWFyeUl0ZW1zWzBdICYmIF90aGlzLnByaW1hcnlJdGVtc1swXS5sb2NhbFByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gX3RoaXMucHJpbWFyeUl0ZW1zWzBdLmxvY2FsUHJvcGVydGllczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHAgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnByb3BlcnRpZXMucHVzaCh7IGtleTogcC50b0Nhbm9uaWNhbCgpLCB2YWx1ZTogcC5sYWJlbCB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBfdGhpcy5saW5rcyA9IF90aGlzLm1lcmdlTGlua3MoX3RoaXMubGlua3MpO1xuICAgICAgICAgICAgcmV0dXJuICdvayc7XG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMudXBkYXRlRXhwbG9yZSgpOyB9KTtcbiAgICAgICAgdGhpcy5maWJyYVNlcnZpY2UuZGlzcGF0Y2hBY3Rpb24odGhpcy5maWJyYVNlcnZpY2UucGxhY2VIb2xkZXJBY3Rpb24ocHJvbSkpO1xuICAgICAgICByZXR1cm4gcHJvbTtcbiAgICB9O1xuICAgIEV4cGxvcmVDb21wb25lbnRDb250cm9sbGVyLnByb3RvdHlwZS5sb2NrRXhpc3RpbmcgPSBmdW5jdGlvbiAobm9kZXMpIHtcbiAgICAgICAgbm9kZXMuZm9yRWFjaChmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgbm9kZS5meCA9IG5vZGUuZ3g7XG4gICAgICAgICAgICBub2RlLmZ5ID0gbm9kZS5neTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBFeHBsb3JlQ29tcG9uZW50Q29udHJvbGxlci5wcm90b3R5cGUuZmlsdGVySXRlbXNCeVR5cGUgPSBmdW5jdGlvbiAoaXRlbXMsIHR5cGUpIHtcbiAgICAgICAgcmV0dXJuIGl0ZW1zLmZpbHRlcihmdW5jdGlvbiAoaXQpIHtcbiAgICAgICAgICAgIHZhciB0eXBlUHJvcCA9IGl0LmxvY2FsUHJvcGVydGllcy5jb25jYXQoaXQucmVtb3RlUHJvcGVydGllcykuZmlsdGVyKGZ1bmN0aW9uIChwcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBwci52YWx1ZSA9PT0gJ2h0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyN0eXBlJztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKHR5cGVQcm9wWzBdKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVQcm9wWzBdLnZhbHVlcy5tYXAoZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHYudmFsdWUudmFsdWU7IH0pLmluZGV4T2YodHlwZSkgIT09IC0xO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEV4cGxvcmVDb21wb25lbnRDb250cm9sbGVyLnByb3RvdHlwZS51cGRhdGVTaXppbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIGFsbG93IGl0ZW1faW5mb190aXAgdG8gZXhwYW5kIHNvbWVob3dcbiAgICAgICAgLy8gYWRkIGRlbGV0ZSBhbmQgYWx0ZXIgYWJpbGl0eSB0byBzcGFycWwtaXRlbS5wdWdcbiAgICAgICAgLy8gZml4IGhvdyBsaW5rcyBzaXQgb24gdG9wIG9mIG5vZGVzXG4gICAgICAgIHZhciB2aWV3cG9ydF93aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgICAgICB2YXIgdmlld3BvcnRfaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xuICAgICAgICB0aGlzLmV4cGxvcmVXaWR0aCA9IHZpZXdwb3J0X3dpZHRoO1xuICAgICAgICB0aGlzLmV4cGxvcmVIZWlnaHQgPSB2aWV3cG9ydF9oZWlnaHQgLSAzNjtcbiAgICAgICAgZDMuc2VsZWN0KHRoaXMuJGVsZW1lbnRbMF0pLnNlbGVjdCgnI2V4cGxvcmVjb250YWluZXInKVxuICAgICAgICAgICAgLnN0eWxlKCdoZWlnaHQnLCB0aGlzLmV4cGxvcmVIZWlnaHQgKyAncHgnKTtcbiAgICAgICAgLy8gbW92ZSB0YWJsZSBkb3duIHNvIHRvcCBpcyBhdCBib3R0b20gb2Ygdmlld3BvcnRcbiAgICAgICAgZDMuc2VsZWN0KHRoaXMuJGVsZW1lbnRbMF0pLnNlbGVjdCgnI2V4cGxvcmV0YWJsZScpXG4gICAgICAgICAgICAuc3R5bGUoJ2hlaWdodCcsIHZpZXdwb3J0X2hlaWdodCAtIDUwICsgJ3B4Jyk7XG4gICAgICAgIHRoaXMuc3ZnU2VsLnN0eWxlKCd3aWR0aCcsIHZpZXdwb3J0X3dpZHRoICsgJ3B4JylcbiAgICAgICAgICAgIC5zdHlsZSgnaGVpZ2h0Jywgdmlld3BvcnRfaGVpZ2h0IC0gMzYgKyAncHgnKTtcbiAgICAgICAgdGhpcy5zdmdTZWwuc2VsZWN0KCdyZWN0LmJhY2tncm91bmQnKVxuICAgICAgICAgICAgLnN0eWxlKCd3aWR0aCcsIHZpZXdwb3J0X3dpZHRoICsgJ3B4JylcbiAgICAgICAgICAgIC5zdHlsZSgnaGVpZ2h0Jywgdmlld3BvcnRfaGVpZ2h0IC0gMzYgKyAncHgnKTtcbiAgICAgICAgdmFyIHN2Z193aWR0aCA9ICt0aGlzLnN2Z1NlbC5zdHlsZSgnd2lkdGgnKS5yZXBsYWNlKCdweCcsICcnKTtcbiAgICAgICAgdmFyIHN2Z19oZWlnaHQgPSArdGhpcy5zdmdTZWwuc3R5bGUoJ2hlaWdodCcpLnJlcGxhY2UoJ3B4JywgJycpO1xuICAgIH07XG4gICAgRXhwbG9yZUNvbXBvbmVudENvbnRyb2xsZXIucHJvdG90eXBlLmFwcGVuZE5vZGVzID0gZnVuY3Rpb24gKGVudGVyU2VsZWN0aW9uLCBjbGFzc05hbWUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIGFwcGVuZFNlbGVjdGlvbiA9IGVudGVyU2VsZWN0aW9uLmFwcGVuZCgnZycpXG4gICAgICAgICAgICAuYXR0cignaWQnLCBmdW5jdGlvbiAoZCwgaSkgeyByZXR1cm4gJ25vZGUtJyArIGkgKyAnLScgKyBjbGFzc05hbWU7IH0pXG4gICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnbm9kZScpXG4gICAgICAgICAgICAuY2xhc3NlZChjbGFzc05hbWUsIHRydWUpXG4gICAgICAgICAgICAuYXBwZW5kKCdjaXJjbGUnKVxuICAgICAgICAgICAgLmNsYXNzZWQoJ25vZGUtY2lyY2xlJywgdHJ1ZSlcbiAgICAgICAgICAgIC5jbGFzc2VkKGNsYXNzTmFtZSwgdHJ1ZSlcbiAgICAgICAgICAgIC5hdHRyKCdpZCcsIGZ1bmN0aW9uIChkLCBpKSB7IHJldHVybiAnbm9kZS1jaXJjbGUtJyArIGkgKyAnLScgKyBjbGFzc05hbWU7IH0pXG4gICAgICAgICAgICAuYXR0cigncicsIHRoaXMucmFkaXVzSW5pdGlhbCArICdweCcpXG4gICAgICAgICAgICAuY2FsbChkMy5kcmFnKClcbiAgICAgICAgICAgIC5vbignc3RhcnQnLCBmdW5jdGlvbiAoZCwgaSkge1xuICAgICAgICAgICAgaWYgKCFfdGhpcy5saW5rTW9kZSkge1xuICAgICAgICAgICAgICAgIGQuZnggPSBkLng7XG4gICAgICAgICAgICAgICAgZC5meSA9IGQueTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIF90aGlzLmRyYWdsaW5lID0gX3RoaXMuc3ZnU2VsLmFwcGVuZCgnbGluZScpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdkcmFnTGluZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAgICAgLm9uKCdkcmFnJywgZnVuY3Rpb24gKGQsIGksIGdyb3VwKSB7XG4gICAgICAgICAgICBpZiAoIV90aGlzLmxpbmtNb2RlKSB7XG4gICAgICAgICAgICAgICAgZDMuc2VsZWN0KGdyb3VwW2ldKS5jbGFzc2VkKCdmaXhlZCcsIHRydWUpO1xuICAgICAgICAgICAgICAgIGQueCA9IGQzLmV2ZW50Lng7XG4gICAgICAgICAgICAgICAgZC55ID0gZDMuZXZlbnQueTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIF90aGlzLmRyYWdsaW5lLmF0dHIoJ3gxJywgZC54KVxuICAgICAgICAgICAgICAgICAgICAuYXR0cigneTEnLCBkLnkpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCd4MicsIGQzLmV2ZW50LngpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCd5MicsIGQzLmV2ZW50LnkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX3RoaXMudXBkYXRlRXhwbG9yZShmYWxzZSwgZmFsc2UpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLm9uKCdlbmQnLCBmdW5jdGlvbiAoZCwgaSwgZ3JvdXApIHtcbiAgICAgICAgICAgIGlmICghX3RoaXMubGlua01vZGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWQzLnNlbGVjdChncm91cFtpXSkuY2xhc3NlZCgnZml4ZWQnKSkge1xuICAgICAgICAgICAgICAgICAgICBkLmZ4ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICBkLmZ5ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBsaW5lWF8xID0gK190aGlzLmRyYWdsaW5lLmF0dHIoJ3gyJyk7XG4gICAgICAgICAgICAgICAgdmFyIGxpbmVZXzEgPSArX3RoaXMuZHJhZ2xpbmUuYXR0cigneTInKTtcbiAgICAgICAgICAgICAgICB2YXIgbm9kZURyb3BfMSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGQzLnNlbGVjdEFsbCgnLm5vZGUnKVxuICAgICAgICAgICAgICAgICAgICAuZWFjaChmdW5jdGlvbiAoZiwgaikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnMobGluZVhfMSAtIGYueCkgPCBfdGhpcy5yYWRpdXMgJiYgTWF0aC5hYnMobGluZVlfMSAtIGYueSkgPCBfdGhpcy5yYWRpdXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVEcm9wXzEgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZmlicmFTZXJ2aWNlLmRpc3BhdGNoQWN0aW9uKF90aGlzLml0ZW1Qcm9wZXJ0eShmLCBbbmV3IFByb3BlcnR5QW5kVmFsdWUoU0tPUy5yZWxhdGVkLCBEYXRhRmFjdG9yeS5pbnN0YW5jZS5ub2RlRnJvbU5vZGUoZCkpXSwgW10pKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmRyYWdsaW5lLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnF1ZXJ5QW5kQnVpbGQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmICghbm9kZURyb3BfMSkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5kcmFnbGluZS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKVxuICAgICAgICAgICAgLm9uKCdtb3VzZW92ZXInLCBmdW5jdGlvbiAoZCwgaSkge1xuICAgICAgICAgICAgX3RoaXMuaGlnaGxpZ2h0TGlua3MoZCwgaSk7XG4gICAgICAgICAgICBfdGhpcy50b29sdGlwLnN0eWxlKCd0b3AnLCAoZDMuZXZlbnQucGFnZVkgLSAxMCkgKyAncHgnKVxuICAgICAgICAgICAgICAgIC5zdHlsZSgnbGVmdCcsIChkMy5ldmVudC5wYWdlWCArIDEwKSArICdweCcpXG4gICAgICAgICAgICAgICAgLnN0eWxlKCd2aXNpYmlsaXR5JywgJ3Zpc2libGUnKVxuICAgICAgICAgICAgICAgIC50ZXh0KGQubGFiZWwpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLm9uKCdtb3VzZW91dCcsIGZ1bmN0aW9uIChkLCBpKSB7XG4gICAgICAgICAgICBfdGhpcy5zdmdTZWwuc2VsZWN0QWxsKCdsaW5lJykuY2xhc3NlZCgncmVsZXZhbnQnLCBmYWxzZSk7XG4gICAgICAgICAgICBfdGhpcy50b29sdGlwLnN0eWxlKCd2aXNpYmlsaXR5JywgJ2hpZGRlbicpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLm9uKCdjbGljaycsIGZ1bmN0aW9uIChkLCBpLCBncm91cCkge1xuICAgICAgICAgICAgdmFyIGxvY2FsU2VsZWN0ZWQgPSBkLnNlbGVjdGVkO1xuICAgICAgICAgICAgLy8gVW5zZWxlY3QgZXZlcnl0aGluZ1xuICAgICAgICAgICAgX3RoaXMuc3ZnU2VsLnNlbGVjdEFsbCgnLm5vZGUnKVxuICAgICAgICAgICAgICAgIC5lYWNoKGZ1bmN0aW9uIChuKSB7IG4uc2VsZWN0ZWQgPSBmYWxzZTsgfSk7XG4gICAgICAgICAgICAvLyBGbGlwIHRoaXMgb25lXG4gICAgICAgICAgICBkLnNlbGVjdGVkID0gIWxvY2FsU2VsZWN0ZWQ7XG4gICAgICAgICAgICBfdGhpcy51cGRhdGVFeHBsb3JlKGZhbHNlKTtcbiAgICAgICAgICAgIGlmIChkLnNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuc3ZnU2VsLnNlbGVjdCgnZy5zdW5idXJzdC1vdmVybGF5JylcbiAgICAgICAgICAgICAgICAgICAgLmRhdHVtKGQpXG4gICAgICAgICAgICAgICAgICAgIC5lYWNoKF90aGlzLnN1bmJ1cnN0LmJ1aWxkU3VuYnVyc3QuYmluZChfdGhpcykpXG4gICAgICAgICAgICAgICAgICAgIC5zdHlsZSgnZGlzcGxheScsICdibG9jaycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuc3ZnU2VsLnNlbGVjdCgnLnN1bmJ1cnN0LW92ZXJsYXknKS5zdHlsZSgnZGlzcGxheScsICdub25lJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBfdGhpcy5oaWdobGlnaHRMaW5rcyhkLCBpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGFwcGVuZFNlbGVjdGlvblxuICAgICAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAgICAgLmF0dHIoJ3InLCAodGhpcy5yYWRpdXMgKyB0aGlzLnJhZGl1c0JvdW5jZSkgKyAncHgnKVxuICAgICAgICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgICAgICAgLmF0dHIoJ3InLCB0aGlzLnJhZGl1cyArICdweCcpO1xuICAgICAgICByZXR1cm4gYXBwZW5kU2VsZWN0aW9uO1xuICAgIH07XG4gICAgRXhwbG9yZUNvbXBvbmVudENvbnRyb2xsZXIucHJvdG90eXBlLnNuYXBUb0dyaWQgPSBmdW5jdGlvbiAoeCwgeSwgcHJpbWFyeSkge1xuICAgICAgICBpZiAocHJpbWFyeSA9PT0gdm9pZCAwKSB7IHByaW1hcnkgPSB0cnVlOyB9XG4gICAgICAgIHZhciBzeCwgc3k7XG4gICAgICAgIC8vIFNuYXAgdG8gZ3JpZE9mZnNldCB3aXRoIGZ1cnRoZXIgb2Zmc2V0IGZvciBtdWx0aXBsZXNcbiAgICAgICAgaWYgKHByaW1hcnkpIHtcbiAgICAgICAgICAgIHN4ID0gTWF0aC5yb3VuZCh4IC8gdGhpcy5ncmlkT2Zmc2V0KSAqIHRoaXMuZ3JpZE9mZnNldDtcbiAgICAgICAgICAgIHN5ID0gTWF0aC5yb3VuZCh5IC8gdGhpcy5ncmlkT2Zmc2V0KSAqIHRoaXMuZ3JpZE9mZnNldDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHN4ID0gTWF0aC5yb3VuZCh4IC8gdGhpcy5ncmlkT2Zmc2V0KSAqIHRoaXMuZ3JpZE9mZnNldCAtIHRoaXMuZ3JpZE9mZnNldCAvIDI7XG4gICAgICAgICAgICBzeSA9IE1hdGgucm91bmQoeSAvIHRoaXMuZ3JpZE9mZnNldCkgKiB0aGlzLmdyaWRPZmZzZXQgLSB0aGlzLmdyaWRPZmZzZXQgLyAyO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbc3gsIHN5XTtcbiAgICB9O1xuICAgIEV4cGxvcmVDb21wb25lbnRDb250cm9sbGVyLnByb3RvdHlwZS50aWNrVHJhbnNmb3JtTm9kZXMgPSBmdW5jdGlvbiAoc2VsLCBwcmltYXJ5KSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmIChwcmltYXJ5ID09PSB2b2lkIDApIHsgcHJpbWFyeSA9IHRydWU7IH1cbiAgICAgICAgc2VsLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uIChkLCBpKSB7XG4gICAgICAgICAgICB2YXIgeCA9IGQueCwgeSA9IGQueTtcbiAgICAgICAgICAgIGlmIChkLnggPCBfdGhpcy5yYWRpdXMpXG4gICAgICAgICAgICAgICAgeCA9IF90aGlzLnJhZGl1cztcbiAgICAgICAgICAgIGlmIChkLnkgPCBfdGhpcy5yYWRpdXMpXG4gICAgICAgICAgICAgICAgeSA9IF90aGlzLnJhZGl1cztcbiAgICAgICAgICAgIHZhciBfYSA9IFt4LCB5XSwgZ3ggPSBfYVswXSwgZ3kgPSBfYVsxXTtcbiAgICAgICAgICAgIGlmIChfdGhpcy4kc2NvcGUubGF5b3V0LmNob2ljZSA9PT0gJ2ZvcmNlZ3JpZCcpIHtcbiAgICAgICAgICAgICAgICBfYiA9IF90aGlzLnNuYXBUb0dyaWQoeCwgeSwgcHJpbWFyeSksIGd4ID0gX2JbMF0sIGd5ID0gX2JbMV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkLmd4ID0gZ3g7XG4gICAgICAgICAgICBkLmd5ID0gZ3k7XG4gICAgICAgICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgnICsgZ3ggKyAnLCAnICsgZ3kgKyAnKSc7XG4gICAgICAgICAgICB2YXIgX2I7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoc2VsLmZpbHRlcihmdW5jdGlvbiAoZCkgeyByZXR1cm4gZC5zZWxlY3RlZDsgfSkubm9kZSgpKSB7XG4gICAgICAgICAgICB2YXIgc2JGdW5jXzEgPSB0aGlzLnN1bmJ1cnN0LmJ1aWxkU3VuYnVyc3Q7XG4gICAgICAgICAgICB2YXIgc3ZnU2VsXzEgPSB0aGlzLnN2Z1NlbDtcbiAgICAgICAgICAgIHZhciB0aWNrU3VuYnVyc3QgPSBmdW5jdGlvbiAoZCwgaSwgZykge1xuICAgICAgICAgICAgICAgIHN2Z1NlbF8xLnNlbGVjdCgnZy5zdW5idXJzdC1vdmVybGF5JykuZGF0dW0oZCkuZWFjaChzYkZ1bmNfMS5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBzZWwuZmlsdGVyKGZ1bmN0aW9uIChkKSB7IHJldHVybiBkLnNlbGVjdGVkOyB9KVxuICAgICAgICAgICAgICAgIC5lYWNoKHRpY2tTdW5idXJzdC5iaW5kKHRoaXMpKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgRXhwbG9yZUNvbXBvbmVudENvbnRyb2xsZXIucHJvdG90eXBlLmdlbmVyaWNUaWNrID0gZnVuY3Rpb24gKHByaW1hcnlOb2Rlcywgc2Vjb25kYXJ5Tm9kZXMsIHVudHlwZWROb2RlcywgbGlua0xpbmVzLCB0cmFuc2l0aW9uKSB7XG4gICAgICAgIGlmICh0cmFuc2l0aW9uID09PSB2b2lkIDApIHsgdHJhbnNpdGlvbiA9IGZhbHNlOyB9XG4gICAgICAgIHZhciBsUHJpbWFyeU5vZGVzID0gcHJpbWFyeU5vZGVzO1xuICAgICAgICB2YXIgbFNlY29uZGFyeU5vZGVzID0gc2Vjb25kYXJ5Tm9kZXM7XG4gICAgICAgIHZhciBsVW50eXBlZE5vZGVzID0gdW50eXBlZE5vZGVzO1xuICAgICAgICB2YXIgbExpbmtMaW5lcyA9IGxpbmtMaW5lcztcbiAgICAgICAgaWYgKHRyYW5zaXRpb24pIHtcbiAgICAgICAgICAgIGxQcmltYXJ5Tm9kZXMgPSBsUHJpbWFyeU5vZGVzLnRyYW5zaXRpb24oKTtcbiAgICAgICAgICAgIGxTZWNvbmRhcnlOb2RlcyA9IGxTZWNvbmRhcnlOb2Rlcy50cmFuc2l0aW9uKCk7XG4gICAgICAgICAgICBsVW50eXBlZE5vZGVzID0gbFVudHlwZWROb2Rlcy50cmFuc2l0aW9uKCk7XG4gICAgICAgICAgICBsTGlua0xpbmVzID0gbExpbmtMaW5lcy50cmFuc2l0aW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50aWNrVHJhbnNmb3JtTm9kZXMobFByaW1hcnlOb2RlcywgdHJ1ZSk7XG4gICAgICAgIHRoaXMudGlja1RyYW5zZm9ybU5vZGVzKGxTZWNvbmRhcnlOb2RlcywgZmFsc2UpO1xuICAgICAgICB0aGlzLnRpY2tUcmFuc2Zvcm1Ob2RlcyhsVW50eXBlZE5vZGVzLCBmYWxzZSk7XG4gICAgICAgIHRoaXMuc3ZnU2VsLnNlbGVjdEFsbCgnLm5vZGUtY2lyY2xlJylcbiAgICAgICAgICAgIC5jbGFzc2VkKCdzZWxlY3RlZC1jaXJjbGUnLCBmdW5jdGlvbiAoZCkgeyByZXR1cm4gZC5zZWxlY3RlZDsgfSlcbiAgICAgICAgICAgIC5zdHlsZSgnY3Vyc29yJywgdGhpcy5saW5rTW9kZSA/ICdjcm9zc2hhaXInIDogJ2luaXRpYWwnKTtcbiAgICAgICAgdGhpcy5zdmdTZWwuc2VsZWN0QWxsKCcubm9kZS1jaXJjbGUnKVxuICAgICAgICAgICAgLmNsYXNzZWQoJ2xhYmVsZWQnLCBmdW5jdGlvbiAoZCkgeyByZXR1cm4gZC5sYWJlbCA/IHRydWUgOiBmYWxzZTsgfSlcbiAgICAgICAgICAgIC5jbGFzc2VkKCd2ZXJpZmllZCcsIGZ1bmN0aW9uIChkKSB7IHJldHVybiBkLmxvY2FsUHJvcGVydGllcy5maWx0ZXIoZnVuY3Rpb24gKHApIHsgcmV0dXJuIHAudmFsdWUgPT09ICdodHRwOi8vd3d3LnczLm9yZy8yMDAyLzA3L293bCNzYW1lQXMnOyB9KS5sZW5ndGggPiAwOyB9KTtcbiAgICAgICAgbExpbmtMaW5lc1xuICAgICAgICAgICAgLmF0dHIoJ3gxJywgZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGQuc291cmNlLmd4OyB9KVxuICAgICAgICAgICAgLmF0dHIoJ3kxJywgZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGQuc291cmNlLmd5OyB9KVxuICAgICAgICAgICAgLmF0dHIoJ3gyJywgZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGQudGFyZ2V0Lmd4OyB9KVxuICAgICAgICAgICAgLmF0dHIoJ3kyJywgZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGQudGFyZ2V0Lmd5OyB9KTtcbiAgICB9O1xuICAgIEV4cGxvcmVDb21wb25lbnRDb250cm9sbGVyLnByb3RvdHlwZS51cGRhdGVFeHBsb3JlID0gZnVuY3Rpb24gKHJ1blNpbSwgdHJhbnNpdGlvbikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAocnVuU2ltID09PSB2b2lkIDApIHsgcnVuU2ltID0gdHJ1ZTsgfVxuICAgICAgICBpZiAodHJhbnNpdGlvbiA9PT0gdm9pZCAwKSB7IHRyYW5zaXRpb24gPSBmYWxzZTsgfVxuICAgICAgICB2YXIgdW50eXBlZE5vZGVzID0gdGhpcy5zdmdTZWxcbiAgICAgICAgICAgIC5zZWxlY3RBbGwoJ2NpcmNsZS51bnR5cGVkJylcbiAgICAgICAgICAgIC5kYXRhKHRoaXMudW50eXBlZEl0ZW1zLCBmdW5jdGlvbiAoZCkgeyByZXR1cm4gZC52YWx1ZTsgfSk7XG4gICAgICAgIHZhciBwcmltYXJ5Tm9kZXMgPSB0aGlzLnN2Z1NlbFxuICAgICAgICAgICAgLnNlbGVjdEFsbCgnY2lyY2xlLnByaW1hcnknKVxuICAgICAgICAgICAgLmRhdGEodGhpcy5wcmltYXJ5SXRlbXMsIGZ1bmN0aW9uIChkKSB7IHJldHVybiBkLnZhbHVlOyB9KTtcbiAgICAgICAgdmFyIHNlY29uZGFyeU5vZGVzID0gdGhpcy5zdmdTZWxcbiAgICAgICAgICAgIC5zZWxlY3RBbGwoJ2NpcmNsZS5zZWNvbmRhcnknKVxuICAgICAgICAgICAgLmRhdGEodGhpcy5zZWNvbmRhcnlJdGVtcywgZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGQudmFsdWU7IH0pO1xuICAgICAgICBwcmltYXJ5Tm9kZXMuZXhpdCgpLnJlbW92ZSgpO1xuICAgICAgICBzZWNvbmRhcnlOb2Rlcy5leGl0KCkucmVtb3ZlKCk7XG4gICAgICAgIHVudHlwZWROb2Rlcy5leGl0KCkucmVtb3ZlKCk7XG4gICAgICAgIC8vIFVudHlwZWQgbm9kZXMgc2hvdWxkIGNvbWUgaW4gb25lIGF0IGEgdGltZSBiYXNlZCBvbiBhIHVzZXIncyBjbGljayBldmVudC4gRm9yIHRoZXNlXG4gICAgICAgIC8vIHdlIGFsc28gd2FudCBhcHBlbmQgdGhlIHVzZXIgaW50ZXJmYWNlIGZvciBzZXR0aW5nIHR5cGUgYW5kIGxhYmVsLlxuICAgICAgICB1bnR5cGVkTm9kZXMuZW50ZXIoKS5lYWNoKGZ1bmN0aW9uIChkYXR1bSwgaSwgZykge1xuICAgICAgICAgICAgZGF0dW0ueCA9IF90aGlzLmxhc3RDbGlja1g7XG4gICAgICAgICAgICBkYXR1bS55ID0gX3RoaXMubGFzdENsaWNrWTtcbiAgICAgICAgICAgIGRhdHVtLmZ4ID0gX3RoaXMubGFzdENsaWNrWDtcbiAgICAgICAgICAgIGRhdHVtLmZ5ID0gX3RoaXMubGFzdENsaWNrWTtcbiAgICAgICAgICAgIGRhdHVtLmd4ID0gX3RoaXMubGFzdENsaWNrWDtcbiAgICAgICAgICAgIGRhdHVtLmd5ID0gX3RoaXMubGFzdENsaWNrWTtcbiAgICAgICAgfSkuZWFjaCh0aGlzLnByb3BlcnR5UG9wb3Zlci5hZGRQb3BvdmVyLmJpbmQodGhpcywgdGhpcy4kc2NvcGUsIHRoaXMuc3ZnU2VsKSk7XG4gICAgICAgIC8vIElmIGEgbm9kZSB3ZW50IGZyb20gYmVpbmcgdW50eXBlZCB0byBiZWluZyBwcmltYXJ5IG9yIHNlY29uZGFyeSwgYnJpbmcgYWxvbmcgaXRzIHBvc2l0aW9uXG4gICAgICAgIC8vIEFsc28gaGFuZGxlIHBvc2l0aW9uIGdldHRpbmcgc2V0IGZyb20gYSBkcm9wIChwdWxsIHBvc2l0aW9uIGZyb20gc3RhdGUpXG4gICAgICAgIHZhciBhcHBseU9sZFBvc2l0aW9uID0gZnVuY3Rpb24gKGRhdHVtKSB7XG4gICAgICAgICAgICAvLyBHZXQgcG9zaXRpb24gZnJvbSBzdGF0ZSBpZiBpdCB3YXMgc2V0IHRoZXJlLlxuICAgICAgICAgICAgZGF0dW0ueCA9IF90aGlzLmZpYnJhU2VydmljZS5nZXRTdGF0ZSgpLmNvbnN0cnVjdC5pdGVtSW5kZXhbZGF0dW0udmFsdWVdLng7XG4gICAgICAgICAgICBkYXR1bS55ID0gX3RoaXMuZmlicmFTZXJ2aWNlLmdldFN0YXRlKCkuY29uc3RydWN0Lml0ZW1JbmRleFtkYXR1bS52YWx1ZV0ueTtcbiAgICAgICAgICAgIGRhdHVtLmZ4ID0gX3RoaXMuZmlicmFTZXJ2aWNlLmdldFN0YXRlKCkuY29uc3RydWN0Lml0ZW1JbmRleFtkYXR1bS52YWx1ZV0ueDtcbiAgICAgICAgICAgIGRhdHVtLmZ5ID0gX3RoaXMuZmlicmFTZXJ2aWNlLmdldFN0YXRlKCkuY29uc3RydWN0Lml0ZW1JbmRleFtkYXR1bS52YWx1ZV0ueTtcbiAgICAgICAgICAgIGRhdHVtLmd4ID0gX3RoaXMuZmlicmFTZXJ2aWNlLmdldFN0YXRlKCkuY29uc3RydWN0Lml0ZW1JbmRleFtkYXR1bS52YWx1ZV0ueDtcbiAgICAgICAgICAgIGRhdHVtLmd4ID0gX3RoaXMuZmlicmFTZXJ2aWNlLmdldFN0YXRlKCkuY29uc3RydWN0Lml0ZW1JbmRleFtkYXR1bS52YWx1ZV0ueTtcbiAgICAgICAgICAgIC8vIE9yIGlmIG5vZGUgd2FzIGFscmVhZHkgaGVyZSwgZ2V0IHBvc2l0aW9uIGZyb20gb2xkIG5vZGVcbiAgICAgICAgICAgIHZhciBvbGROb2RlID0gX3RoaXMucmVtb3ZlZFVudHlwZWRJdGVtcy5maWx0ZXIoZnVuY3Rpb24gKGl0KSB7IHJldHVybiBpdC52YWx1ZSA9PT0gZGF0dW0udmFsdWU7IH0pWzBdO1xuICAgICAgICAgICAgaWYgKG9sZE5vZGUpIHtcbiAgICAgICAgICAgICAgICBkYXR1bS54ID0gb2xkTm9kZS54O1xuICAgICAgICAgICAgICAgIGRhdHVtLnkgPSBvbGROb2RlLnk7XG4gICAgICAgICAgICAgICAgZGF0dW0uZnggPSBvbGROb2RlLmZ4O1xuICAgICAgICAgICAgICAgIGRhdHVtLmZ5ID0gb2xkTm9kZS5meTtcbiAgICAgICAgICAgICAgICBkYXR1bS5neCA9IG9sZE5vZGUuZ3g7XG4gICAgICAgICAgICAgICAgZGF0dW0uZ3kgPSBvbGROb2RlLmd5O1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBwcmltYXJ5Tm9kZXMuZW50ZXIoKS5lYWNoKGFwcGx5T2xkUG9zaXRpb24pO1xuICAgICAgICBzZWNvbmRhcnlOb2Rlcy5lbnRlcigpLmVhY2goYXBwbHlPbGRQb3NpdGlvbik7XG4gICAgICAgIHByaW1hcnlOb2RlcyA9IHByaW1hcnlOb2Rlcy5tZXJnZSh0aGlzLmFwcGVuZE5vZGVzKHByaW1hcnlOb2Rlcy5lbnRlcigpLCAncHJpbWFyeScpKTtcbiAgICAgICAgc2Vjb25kYXJ5Tm9kZXMgPSBzZWNvbmRhcnlOb2Rlcy5tZXJnZSh0aGlzLmFwcGVuZE5vZGVzKHNlY29uZGFyeU5vZGVzLmVudGVyKCksICdzZWNvbmRhcnknKSk7XG4gICAgICAgIHVudHlwZWROb2RlcyA9IHVudHlwZWROb2Rlcy5tZXJnZSh0aGlzLmFwcGVuZE5vZGVzKHVudHlwZWROb2Rlcy5lbnRlcigpLCAndW50eXBlZCcpKTtcbiAgICAgICAgdmFyIGxpbmtMaW5lcyA9IHRoaXMuc3ZnU2VsXG4gICAgICAgICAgICAuc2VsZWN0KCdnLmxpbmtzJylcbiAgICAgICAgICAgIC5zZWxlY3RBbGwoJ2xpbmUnKVxuICAgICAgICAgICAgLmRhdGEodGhpcy5saW5rcyk7XG4gICAgICAgIGxpbmtMaW5lcy5leGl0KCkucmVtb3ZlKCk7XG4gICAgICAgIGxpbmtMaW5lcyA9IGxpbmtMaW5lc1xuICAgICAgICAgICAgLmVudGVyKCkuYXBwZW5kKCdsaW5lJylcbiAgICAgICAgICAgIC5hdHRyKCdpZCcsIGZ1bmN0aW9uIChkLCBpKSB7IHJldHVybiAnbGluay0nICsgaTsgfSlcbiAgICAgICAgICAgIC5vbignbW91c2VvdmVyJywgZnVuY3Rpb24gKGQsIGkpIHtcbiAgICAgICAgICAgIF90aGlzLnRvb2x0aXAuc3R5bGUoJ3RvcCcsIChkMy5ldmVudC5wYWdlWSAtIDEwKSArICdweCcpXG4gICAgICAgICAgICAgICAgLnN0eWxlKCdsZWZ0JywgKGQzLmV2ZW50LnBhZ2VYICsgMTApICsgJ3B4JylcbiAgICAgICAgICAgICAgICAuc3R5bGUoJ3Zpc2liaWxpdHknLCAndmlzaWJsZScpXG4gICAgICAgICAgICAgICAgLnRleHQoZC5wcm9wZXJ0eS5sYWJlbCk7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAub24oJ21vdXNlb3V0JywgZnVuY3Rpb24gKGQsIGkpIHtcbiAgICAgICAgICAgIF90aGlzLnRvb2x0aXAuc3R5bGUoJ3Zpc2liaWxpdHknLCAnaGlkZGVuJyk7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAubWVyZ2UobGlua0xpbmVzKVxuICAgICAgICAgICAgLnN0eWxlKCd2aXNpYmlsaXR5JywgdGhpcy4kc2NvcGUubGF5b3V0LmxpbmtzID09PSAnc2hvdycgPyAndmlzaWJsZScgOiAnaGlkZGVuJyk7XG4gICAgICAgIC8vIEFkZCBzdW5idXJzdCBhZ2FpbiBzbyBpdCBzdGF5cyBvbiB0b3BcbiAgICAgICAgdGhpcy5zdW5idXJzdC5hZGRTdW5idXJzdEdyb3VwKHRoaXMuc3ZnU2VsKTtcbiAgICAgICAgdGhpcy5nZW5lcmljVGljayhwcmltYXJ5Tm9kZXMsIHNlY29uZGFyeU5vZGVzLCB1bnR5cGVkTm9kZXMsIGxpbmtMaW5lcywgdHJhbnNpdGlvbik7XG4gICAgICAgIHJldHVybiB0aGlzLiRxLnJlc29sdmUoJ29rJyk7XG4gICAgfTtcbiAgICBFeHBsb3JlQ29tcG9uZW50Q29udHJvbGxlci5wcm90b3R5cGUubWFwVmVyaWZ5VG9UaGlzID0gZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB2ZXJpZnk6IHN0YXRlLnZlcmlmeVxuICAgICAgICB9O1xuICAgIH07XG4gICAgRXhwbG9yZUNvbXBvbmVudENvbnRyb2xsZXIucHJvdG90eXBlLm1hcFR5cGVzVG9UaGlzID0gZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlczogc3RhdGUudHlwZXNcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIEV4cGxvcmVDb21wb25lbnRDb250cm9sbGVyLnByb3RvdHlwZS5tYXBJdGVtc1RvVGhpcyA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaXRlbXM6IHN0YXRlLml0ZW1zXG4gICAgICAgIH07XG4gICAgfTtcbiAgICBFeHBsb3JlQ29tcG9uZW50Q29udHJvbGxlci5wcm90b3R5cGUubWVyZ2VOb2RlcyA9IGZ1bmN0aW9uIChvbGROb2Rlcywgbm9kZXMpIHtcbiAgICAgICAgdmFyIG5ld05vZGVzID0gW107XG4gICAgICAgIC8vIENoZWNrIGlmIG9sZCBub2RlcyBhcmUgc3RpbGwgaW4gdGhlIG1peFxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9sZE5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG5vZGVzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9sZE5vZGVzW2ldLnRvQ2Fub25pY2FsKCkgPT09IG5vZGVzW2pdLnRvQ2Fub25pY2FsKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3Tm9kZXMucHVzaChvbGROb2Rlc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gZ3JhYiBuZXcgbm9kZSBpbmZvcm1hdGlvbiBsaWtlIGxhYmVscyBhbmQgcHJvcHMgaW4gY2FzZSBpdCdzIGNoYW5nZWRcbiAgICAgICAgICAgICAgICAgICAgb2xkTm9kZXNbaV0ubGFiZWwgPSBub2Rlc1tqXS5sYWJlbDtcbiAgICAgICAgICAgICAgICAgICAgb2xkTm9kZXNbaV0ubG9jYWxQcm9wZXJ0aWVzID0gbm9kZXNbal0ubG9jYWxQcm9wZXJ0aWVzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBBZGQgdGhlIG5ldyBub2Rlc1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgY2hlY2sgPSBmYWxzZTtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbmV3Tm9kZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICBpZiAobmV3Tm9kZXNbal0udG9DYW5vbmljYWwoKSA9PT0gbm9kZXNbaV0udG9DYW5vbmljYWwoKSlcbiAgICAgICAgICAgICAgICAgICAgY2hlY2sgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFjaGVjaykge1xuICAgICAgICAgICAgICAgIG5ld05vZGVzLnB1c2gobm9kZXNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXdOb2RlcztcbiAgICB9O1xuICAgIEV4cGxvcmVDb21wb25lbnRDb250cm9sbGVyLnByb3RvdHlwZS5tZXJnZUxpbmtzID0gZnVuY3Rpb24gKG9sZExpbmtzKSB7XG4gICAgICAgIHZhciBuZXdMaW5rcyA9IFtdO1xuICAgICAgICB2YXIgaXRlbXMgPSB0aGlzLnByaW1hcnlJdGVtcy5jb25jYXQodGhpcy5zZWNvbmRhcnlJdGVtcyk7XG4gICAgICAgIHZhciBzYW1lQXMgPSBuZXcgRU5vZGVNYXAoKTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBpdGVtc18xID0gaXRlbXM7IF9pIDwgaXRlbXNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIHZhciBpdGVtID0gaXRlbXNfMVtfaV07XG4gICAgICAgICAgICBzYW1lQXMuc2V0KGl0ZW0sIGl0ZW0pO1xuICAgICAgICAgICAgdmFyIHNhbWVBc1Byb3AgPSBpdGVtLmxvY2FsUHJvcGVydGllcy5maWx0ZXIoZnVuY3Rpb24gKHApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gT1dMLnNhbWVBcy5lcXVhbHMocCk7XG4gICAgICAgICAgICB9KVswXTtcbiAgICAgICAgICAgIGlmIChzYW1lQXNQcm9wICYmIHNhbWVBc1Byb3AudmFsdWVzKVxuICAgICAgICAgICAgICAgIGZvciAodmFyIF9hID0gMCwgX2IgPSBzYW1lQXNQcm9wLnZhbHVlczsgX2EgPCBfYi5sZW5ndGg7IF9hKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBfYltfYV07XG4gICAgICAgICAgICAgICAgICAgIHNhbWVBcy5zZXQobi52YWx1ZSwgaXRlbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIEl0ZXJhdGUgb3ZlciBpdGVtIHByb3BlcnR5IHZhbHVlcyB0byBzZWUgaWYgdGhleSBtYXRjaCB0aGUgaWQgb2YgYW55XG4gICAgICAgIC8vIG9mIHRoZSBpdGVtcyBkaXNwbGF5ZWQuIEFsc28gY2hlY2sgaWYgdGhleSBtYXRjaCBzYW1lQXMgdmFsdWVzLi4uXG4gICAgICAgIGZvciAodmFyIF9jID0gMCwgaXRlbXNfMiA9IGl0ZW1zOyBfYyA8IGl0ZW1zXzIubGVuZ3RoOyBfYysrKSB7XG4gICAgICAgICAgICB2YXIgaXRlbSA9IGl0ZW1zXzJbX2NdO1xuICAgICAgICAgICAgZm9yICh2YXIgX2QgPSAwLCBfZSA9IGl0ZW0ubG9jYWxQcm9wZXJ0aWVzOyBfZCA8IF9lLmxlbmd0aDsgX2QrKykge1xuICAgICAgICAgICAgICAgIHZhciBwID0gX2VbX2RdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9mID0gMCwgX2cgPSBwLnZhbHVlczsgX2YgPCBfZy5sZW5ndGg7IF9mKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHYgPSBfZ1tfZl07XG4gICAgICAgICAgICAgICAgICAgIGlmIChzYW1lQXMuaGFzKHYudmFsdWUpICYmIGl0ZW0gIT09IHNhbWVBcy5nZXQodi52YWx1ZSkgJiYgaXRlbXMuaW5kZXhPZihzYW1lQXMuZ2V0KHYudmFsdWUpKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0xpbmtzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZTogaXRlbSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IHNhbWVBcy5nZXQodi52YWx1ZSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcGVydHk6IHBcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXdMaW5rcztcbiAgICB9O1xuICAgIHJldHVybiBFeHBsb3JlQ29tcG9uZW50Q29udHJvbGxlcjtcbn0oKSk7XG52YXIgRXhwbG9yZUNvbXBvbmVudCA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRXhwbG9yZUNvbXBvbmVudCgpIHtcbiAgICAgICAgdGhpcy5iaW5kaW5ncyA9IHtcbiAgICAgICAgICAgIGxpbmtNb2RlOiAnPCcsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuY29udHJvbGxlciA9IEV4cGxvcmVDb21wb25lbnRDb250cm9sbGVyOyAvLyAobmV3ICguLi5hcmdzOiBhbnlbXSkgPT4gYW5ndWxhci5JQ29udHJvbGxlcikgPSBFeHBsb3JlQ29tcG9uZW50Q29udHJvbGxlclxuICAgICAgICB0aGlzLnRlbXBsYXRlID0gcmVxdWlyZSgnLi9leHBsb3JlLnB1ZycpKCk7XG4gICAgfVxuICAgIHJldHVybiBFeHBsb3JlQ29tcG9uZW50O1xufSgpKTtcbmV4cG9ydCB7IEV4cGxvcmVDb21wb25lbnQgfTtcbmFuZ3VsYXIubW9kdWxlKCdmaWJyYS5jb21wb25lbnRzLmV4cGxvcmUnLCBbJ2ZpYnJhLnNlcnZpY2VzJ10pXG4gICAgLmNvbXBvbmVudCgnZXhwbG9yZScsIG5ldyBFeHBsb3JlQ29tcG9uZW50KCkpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGFwcC9jb21wb25lbnRzL2NvbnN0cnVjdC12aWV3L2V4cGxvcmUtY29tcG9uZW50LnRzIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFRQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQU1BO0FBQUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUlBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUVBO0FBQUE7QUFFQTtBQUlBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9");

/***/ })

})