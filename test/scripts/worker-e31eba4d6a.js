/**
 * @license AngularJS v1.6.2
 * (c) 2010-2017 Google, Inc. http://angularjs.org
 * License: MIT
 */
!function(e){"use strict";function t(e,t){return t=t||Error,function(){var r,n,i=2,o=arguments,a=o[0],s="["+(e?e+":":"")+a+"] ",u=o[1];for(s+=u.replace(/\{\d+\}/g,function(e){var t=+e.slice(1,-1),r=t+i;return r<o.length?xe(o[r]):e}),s+="\nhttp://errors.angularjs.org/1.6.2/"+(e?e+"/":"")+a,n=i,r="?";n<o.length;n++,r="&")s+=r+"p"+(n-i)+"="+encodeURIComponent(xe(o[n]));return new t(s)}}function r(e){if(null==e||S(e))return!1;if(li(e)||x(e)||Kn&&e instanceof Kn)return!0;var t="length"in Object(e)&&e.length;return $(t)&&(t>=0&&(t-1 in e||e instanceof Array)||"function"==typeof e.item)}function n(e,t,i){var o,a;if(e)if(E(e))for(o in e)"prototype"!==o&&"length"!==o&&"name"!==o&&e.hasOwnProperty(o)&&t.call(i,e[o],o,e);else if(li(e)||r(e)){var s="object"!=typeof e;for(o=0,a=e.length;o<a;o++)(s||o in e)&&t.call(i,e[o],o,e)}else if(e.forEach&&e.forEach!==n)e.forEach(t,i,e);else if(w(e))for(o in e)t.call(i,e[o],o,e);else if("function"==typeof e.hasOwnProperty)for(o in e)e.hasOwnProperty(o)&&t.call(i,e[o],o,e);else for(o in e)Hn.call(e,o)&&t.call(i,e[o],o,e);return e}function i(e,t,r){for(var n=Object.keys(e).sort(),i=0;i<n.length;i++)t.call(r,e[n[i]],n[i]);return n}function o(e){return function(t,r){e(r,t)}}function a(){return++si}function s(e,t){t?e.$$hashKey=t:delete e.$$hashKey}function u(e,t,r){for(var n=e.$$hashKey,i=0,o=t.length;i<o;++i){var a=t[i];if(b(a)||E(a))for(var l=Object.keys(a),c=0,f=l.length;c<f;c++){var p=l[c],h=a[p];r&&b(h)?k(h)?e[p]=new Date(h.valueOf()):_(h)?e[p]=new RegExp(h):h.nodeName?e[p]=h.cloneNode(!0):L(h)?e[p]=h.clone():(b(e[p])||(e[p]=li(h)?[]:{}),u(e[p],[h],!0)):e[p]=h}}return s(e,n),e}function l(e){return u(e,ei.call(arguments,1),!1)}function c(e){return u(e,ei.call(arguments,1),!0)}function f(e){return parseInt(e,10)}function p(e,t){return l(Object.create(e),t)}function h(){}function d(e){return e}function v(e){return function(){return e}}function g(e){return E(e.toString)&&e.toString!==ni}function y(e){return"undefined"==typeof e}function m(e){return"undefined"!=typeof e}function b(e){return null!==e&&"object"==typeof e}function w(e){return null!==e&&"object"==typeof e&&!ii(e)}function x(e){return"string"==typeof e}function $(e){return"number"==typeof e}function k(e){return"[object Date]"===ni.call(e)}function E(e){return"function"==typeof e}function _(e){return"[object RegExp]"===ni.call(e)}function S(e){return e&&e.window===e}function A(e){return e&&e.$evalAsync&&e.$watch}function C(e){return"[object File]"===ni.call(e)}function I(e){return"[object FormData]"===ni.call(e)}function T(e){return"[object Blob]"===ni.call(e)}function F(e){return"boolean"==typeof e}function N(e){return e&&E(e.then)}function j(e){return e&&$(e.length)&&ci.test(ni.call(e))}function R(e){return"[object ArrayBuffer]"===ni.call(e)}function L(e){return!(!e||!(e.nodeName||e.prop&&e.attr&&e.find))}function O(e){var t,r={},n=e.split(",");for(t=0;t<n.length;t++)r[n[t]]=!0;return r}function P(e){return Vn(e.nodeName||e[0]&&e[0].nodeName)}function Q(e,t){return Array.prototype.indexOf.call(e,t)!==-1}function D(e,t){var r=e.indexOf(t);return r>=0&&e.splice(r,1),r}function M(e,t){function r(e,t){var r,n=t.$$hashKey;if(li(e))for(var o=0,a=e.length;o<a;o++)t.push(i(e[o]));else if(w(e))for(r in e)t[r]=i(e[r]);else if(e&&"function"==typeof e.hasOwnProperty)for(r in e)e.hasOwnProperty(r)&&(t[r]=i(e[r]));else for(r in e)Hn.call(e,r)&&(t[r]=i(e[r]));return s(t,n),t}function i(e){if(!b(e))return e;var t=a.indexOf(e);if(t!==-1)return u[t];if(S(e)||A(e))throw oi("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var n=!1,i=o(e);return void 0===i&&(i=li(e)?[]:Object.create(ii(e)),n=!0),a.push(e),u.push(i),n?r(e,i):i}function o(e){switch(ni.call(e)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new e.constructor(i(e.buffer),e.byteOffset,e.length);case"[object ArrayBuffer]":if(!e.slice){var t=new ArrayBuffer(e.byteLength);return new Uint8Array(t).set(new Uint8Array(e)),t}return e.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new e.constructor(e.valueOf());case"[object RegExp]":var r=new RegExp(e.source,e.toString().match(/[^\/]*$/)[0]);return r.lastIndex=e.lastIndex,r;case"[object Blob]":return new e.constructor([e],{type:e.type})}if(E(e.cloneNode))return e.cloneNode(!0)}var a=[],u=[];if(t){if(j(t)||R(t))throw oi("cpta","Can't copy! TypedArray destination cannot be mutated.");if(e===t)throw oi("cpi","Can't copy! Source and destination are identical.");return li(t)?t.length=0:n(t,function(e,r){"$$hashKey"!==r&&delete t[r]}),a.push(e),u.push(t),r(e,t)}return i(e)}function q(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e!==e&&t!==t)return!0;var r,n,i,o=typeof e,a=typeof t;if(o===a&&"object"===o){if(!li(e)){if(k(e))return!!k(t)&&q(e.getTime(),t.getTime());if(_(e))return!!_(t)&&e.toString()===t.toString();if(A(e)||A(t)||S(e)||S(t)||li(t)||k(t)||_(t))return!1;i=ge();for(n in e)if("$"!==n.charAt(0)&&!E(e[n])){if(!q(e[n],t[n]))return!1;i[n]=!0}for(n in t)if(!(n in i)&&"$"!==n.charAt(0)&&m(t[n])&&!E(t[n]))return!1;return!0}if(!li(t))return!1;if((r=e.length)===t.length){for(n=0;n<r;n++)if(!q(e[n],t[n]))return!1;return!0}}return!1}function U(e,t,r){return e.concat(ei.call(t,r))}function B(e,t){return ei.call(e,t||0)}function G(e,t){var r=arguments.length>2?B(arguments,2):[];return!E(t)||t instanceof RegExp?t:r.length?function(){return arguments.length?t.apply(e,U(r,arguments,0)):t.apply(e,r)}:function(){return arguments.length?t.apply(e,arguments):t.call(e)}}function H(t,r){var n=r;return"string"==typeof t&&"$"===t.charAt(0)&&"$"===t.charAt(1)?n=void 0:S(r)?n="$WINDOW":r&&e.document===r?n="$DOCUMENT":A(r)&&(n="$SCOPE"),n}function V(e,t){if(!y(e))return $(t)||(t=t?2:null),JSON.stringify(e,H,t)}function z(e){return x(e)?JSON.parse(e):e}function W(e,t){e=e.replace(vi,"");var r=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return ui(r)?t:r}function X(e,t){return e=new Date(e.getTime()),e.setMinutes(e.getMinutes()+t),e}function J(e,t,r){r=r?-1:1;var n=e.getTimezoneOffset(),i=W(t,n);return X(e,r*(i-n))}function K(e){e=Kn(e).clone();try{e.empty()}catch(e){}var t=Kn("<div>").append(e).html();try{return e[0].nodeType===$i?Vn(t):t.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/,function(e,t){return"<"+Vn(t)})}catch(e){return Vn(t)}}function Y(e){try{return decodeURIComponent(e)}catch(e){}}function Z(e){var t={};return n((e||"").split("&"),function(e){var r,n,i;e&&(n=e=e.replace(/\+/g,"%20"),r=e.indexOf("="),r!==-1&&(n=e.substring(0,r),i=e.substring(r+1)),n=Y(n),m(n)&&(i=!m(i)||Y(i),Hn.call(t,n)?li(t[n])?t[n].push(i):t[n]=[t[n],i]:t[n]=i))}),t}function ee(e){var t=[];return n(e,function(e,r){li(e)?n(e,function(e){t.push(re(r,!0)+(e===!0?"":"="+re(e,!0)))}):t.push(re(r,!0)+(e===!0?"":"="+re(e,!0)))}),t.length?t.join("&"):""}function te(e){return re(e,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function re(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,t?"%20":"+")}function ne(e,t){var r,n,i=gi.length;for(n=0;n<i;++n)if(r=gi[n]+t,x(r=e.getAttribute(r)))return r;return null}function ie(e){var t=e.currentScript,r=t&&t.getAttribute("src");if(!r)return!0;var n=e.createElement("a");if(n.href=r,e.location.origin===n.origin)return!0;switch(n.protocol){case"http:":case"https:":case"ftp:":case"blob:":case"file:":case"data:":return!0;default:return!1}}function oe(t,r){var i,o,a={};if(n(gi,function(e){var r=e+"app";!i&&t.hasAttribute&&t.hasAttribute(r)&&(i=t,o=t.getAttribute(r))}),n(gi,function(e){var r,n=e+"app";!i&&(r=t.querySelector("["+n.replace(":","\\:")+"]"))&&(i=r,o=r.getAttribute(n))}),i){if(!yi)return void e.console.error("Angular: disabling automatic bootstrap. <script> protocol indicates an extension, document.location.href does not match.");a.strictDi=null!==ne(i,"strict-di"),r(i,o?[o]:[],a)}}function ae(t,r,i){b(i)||(i={});var o={strictDi:!1};i=l(o,i);var a=function(){if(t=Kn(t),t.injector()){var n=t[0]===e.document?"document":K(t);throw oi("btstrpd","App already bootstrapped with this element '{0}'",n.replace(/</,"&lt;").replace(/>/,"&gt;"))}r=r||[],r.unshift(["$provide",function(e){e.value("$rootElement",t)}]),i.debugInfoEnabled&&r.push(["$compileProvider",function(e){e.debugInfoEnabled(!0)}]),r.unshift("ng");var o=lt(r,i.strictDi);return o.invoke(["$rootScope","$rootElement","$compile","$injector",function(e,t,r,n){e.$apply(function(){t.data("$injector",n),r(t)(e)})}]),o},s=/^NG_ENABLE_DEBUG_INFO!/,u=/^NG_DEFER_BOOTSTRAP!/;return e&&s.test(e.name)&&(i.debugInfoEnabled=!0,e.name=e.name.replace(s,"")),e&&!u.test(e.name)?a():(e.name=e.name.replace(u,""),ai.resumeBootstrap=function(e){return n(e,function(e){r.push(e)}),a()},void(E(ai.resumeDeferredBootstrap)&&ai.resumeDeferredBootstrap()))}function se(){e.name="NG_ENABLE_DEBUG_INFO!"+e.name,e.location.reload()}function ue(e){var t=ai.element(e).injector();if(!t)throw oi("test","no injector found for element argument to getTestability");return t.get("$$testability")}function le(e,t){return t=t||"_",e.replace(mi,function(e,r){return(r?t:"")+e.toLowerCase()})}function ce(){var t;if(!bi){var r=di();Yn=y(r)?e.jQuery:r?e[r]:void 0,Yn&&Yn.fn.on?(Kn=Yn,l(Yn.fn,{scope:Di.scope,isolateScope:Di.isolateScope,controller:Di.controller,injector:Di.injector,inheritedData:Di.inheritedData}),t=Yn.cleanData,Yn.cleanData=function(e){for(var r,n,i=0;null!=(n=e[i]);i++)r=Yn._data(n,"events"),r&&r.$destroy&&Yn(n).triggerHandler("$destroy");t(e)}):Kn=Re,ai.element=Kn,bi=!0}}function fe(e,t,r){if(!e)throw oi("areq","Argument '{0}' is {1}",t||"?",r||"required");return e}function pe(e,t,r){return r&&li(e)&&(e=e[e.length-1]),fe(E(e),t,"not a function, got "+(e&&"object"==typeof e?e.constructor.name||"Object":typeof e)),e}function he(e,t){if("hasOwnProperty"===e)throw oi("badname","hasOwnProperty is not a valid {0} name",t)}function de(e,t,r){if(!t)return e;for(var n,i=t.split("."),o=e,a=i.length,s=0;s<a;s++)n=i[s],e&&(e=(o=e)[n]);return!r&&E(e)?G(o,e):e}function ve(e){for(var t,r=e[0],n=e[e.length-1],i=1;r!==n&&(r=r.nextSibling);i++)(t||e[i]!==r)&&(t||(t=Kn(ei.call(e,0,i))),t.push(r));return t||e}function ge(){return Object.create(null)}function ye(e){if(null==e)return"";switch(typeof e){case"string":break;case"number":e=""+e;break;default:e=!g(e)||li(e)||k(e)?V(e):e.toString()}return e}function me(e){function r(e,t,r){return e[t]||(e[t]=r())}var n=t("$injector"),i=t("ng"),o=r(e,"angular",Object);return o.$$minErr=o.$$minErr||t,r(o,"module",function(){var e={};return function(t,o,a){var s=function(e,t){if("hasOwnProperty"===e)throw i("badname","hasOwnProperty is not a valid {0} name",t)};return s(t,"module"),o&&e.hasOwnProperty(t)&&(e[t]=null),r(e,t,function(){function e(e,t,r,n){return n||(n=i),function(){return n[r||"push"]([e,t,arguments]),c}}function r(e,r,n){return n||(n=i),function(i,o){return o&&E(o)&&(o.$$moduleName=t),n.push([e,r,arguments]),c}}if(!o)throw n("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",t);var i=[],s=[],u=[],l=e("$injector","invoke","push",s),c={_invokeQueue:i,_configBlocks:s,_runBlocks:u,requires:o,name:t,provider:r("$provide","provider"),factory:r("$provide","factory"),service:r("$provide","service"),value:e("$provide","value"),constant:e("$provide","constant","unshift"),decorator:r("$provide","decorator",s),animation:r("$animateProvider","register"),filter:r("$filterProvider","register"),controller:r("$controllerProvider","register"),directive:r("$compileProvider","directive"),component:r("$compileProvider","component"),config:l,run:function(e){return u.push(e),this}};return a&&l(a),c})}})}function be(e,t){if(li(e)){t=t||[];for(var r=0,n=e.length;r<n;r++)t[r]=e[r]}else if(b(e)){t=t||{};for(var i in e)"$"===i.charAt(0)&&"$"===i.charAt(1)||(t[i]=e[i])}return t||e}function we(e){var t=[];return JSON.stringify(e,function(e,r){if(r=H(e,r),b(r)){if(t.indexOf(r)>=0)return"...";t.push(r)}return r})}function xe(e){return"function"==typeof e?e.toString().replace(/ \{[\s\S]*$/,""):y(e)?"undefined":"string"!=typeof e?we(e):e}function $e(r){l(r,{bootstrap:ae,copy:M,extend:l,merge:c,equals:q,element:Kn,forEach:n,injector:lt,noop:h,bind:G,toJson:V,fromJson:z,identity:d,isUndefined:y,isDefined:m,isString:x,isFunction:E,isObject:b,isNumber:$,isElement:L,isArray:li,version:Si,isDate:k,lowercase:Vn,uppercase:zn,callbacks:{$$counter:0},getTestability:ue,reloadWithDebugInfo:se,$$minErr:t,$$csp:hi,$$encodeUriSegment:te,$$encodeUriQuery:re,$$stringify:ye}),(Zn=me(e))("ng",["ngLocale"],["$provide",function(e){e.provider({$$sanitizeUri:Sr}),e.provider("$compile",wt).directive({a:Xo,input:va,textarea:va,form:ta,script:ls,select:ps,option:hs,ngBind:ma,ngBindHtml:wa,ngBindTemplate:ba,ngClass:$a,ngClassEven:Ea,ngClassOdd:ka,ngCloak:_a,ngController:Sa,ngForm:ra,ngHide:rs,ngIf:Ia,ngInclude:Ta,ngInit:Na,ngNonBindable:za,ngPluralize:Ka,ngRepeat:Ya,ngShow:ts,ngStyle:ns,ngSwitch:is,ngSwitchWhen:os,ngSwitchDefault:as,ngOptions:Ja,ngTransclude:us,ngModel:Ga,ngList:ja,ngChange:xa,pattern:vs,ngPattern:vs,required:ds,ngRequired:ds,minlength:ys,ngMinlength:ys,maxlength:gs,ngMaxlength:gs,ngValue:ya,ngModelOptions:Va}).directive({ngInclude:Fa}).directive(Jo).directive(Aa),e.provider({$anchorScroll:ct,$animate:no,$animateCss:ao,$$animateJs:to,$$animateQueue:ro,$$AnimateRunner:oo,$$animateAsyncRun:io,$browser:gt,$cacheFactory:yt,$controller:St,$document:At,$$isDocumentHidden:Ct,$exceptionHandler:It,$filter:qr,$$forceReflow:ho,$interpolate:Bt,$interval:Gt,$http:Dt,$httpParamSerializer:Ft,$httpParamSerializerJQLike:Nt,$httpBackend:qt,$xhrFactory:Mt,$jsonpCallbacks:$o,$location:or,$log:ar,$parse:wr,$rootScope:_r,$q:xr,$$q:$r,$sce:Fr,$sceDelegate:Tr,$sniffer:Nr,$templateCache:mt,$templateRequest:jr,$$testability:Rr,$timeout:Lr,$window:Qr,$$rAF:Er,$$jqLite:rt,$$Map:Hi,$$cookieReader:Mr})}])}function ke(){return++Ci}function Ee(e){return Se(e.replace(Ti,"ms-"))}function _e(e,t){return t.toUpperCase()}function Se(e){return e.replace(Ii,_e)}function Ae(e){return!Ri.test(e)}function Ce(e){var t=e.nodeType;return t===wi||!t||t===Ei}function Ie(e){for(var t in Ai[e.ng339])return!0;return!1}function Te(e){for(var t=0,r=e.length;t<r;t++)Qe(e[t])}function Fe(e,t){var r,i,o,a,s=t.createDocumentFragment(),u=[];if(Ae(e))u.push(t.createTextNode(e));else{for(r=s.appendChild(t.createElement("div")),i=(Li.exec(e)||["",""])[1].toLowerCase(),o=Pi[i]||Pi._default,r.innerHTML=o[1]+e.replace(Oi,"<$1></$2>")+o[2],a=o[0];a--;)r=r.lastChild;u=U(u,r.childNodes),r=s.firstChild,r.textContent=""}return s.textContent="",s.innerHTML="",n(u,function(e){s.appendChild(e)}),s}function Ne(t,r){r=r||e.document;var n;return(n=ji.exec(t))?[r.createElement(n[1])]:(n=Fe(t,r))?n.childNodes:[]}function je(e,t){var r=e.parentNode;r&&r.replaceChild(t,e),t.appendChild(e)}function Re(e){if(e instanceof Re)return e;var t;if(x(e)&&(e=fi(e),t=!0),!(this instanceof Re)){if(t&&"<"!==e.charAt(0))throw Ni("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new Re(e)}t?Ge(this,Ne(e)):E(e)?Je(e):Ge(this,e)}function Le(e){return e.cloneNode(!0)}function Oe(e,t){if(t||Qe(e),e.querySelectorAll)for(var r=e.querySelectorAll("*"),n=0,i=r.length;n<i;n++)Qe(r[n])}function Pe(e,t,r,i){if(m(i))throw Ni("offargs","jqLite#off() does not support the `selector` argument");var o=De(e),a=o&&o.events,s=o&&o.handle;if(s)if(t){var u=function(t){var n=a[t];m(r)&&D(n||[],r),m(r)&&n&&n.length>0||(e.removeEventListener(t,s),delete a[t])};n(t.split(" "),function(e){u(e),Fi[e]&&u(Fi[e])})}else for(t in a)"$destroy"!==t&&e.removeEventListener(t,s),delete a[t]}function Qe(e,t){var r=e.ng339,n=r&&Ai[r];if(n){if(t)return void delete n.data[t];n.handle&&(n.events.$destroy&&n.handle({},"$destroy"),Pe(e)),delete Ai[r],e.ng339=void 0}}function De(e,t){var r=e.ng339,n=r&&Ai[r];return t&&!n&&(e.ng339=r=ke(),n=Ai[r]={events:{},data:{},handle:void 0}),n}function Me(e,t,r){if(Ce(e)){var n,i=m(r),o=!i&&t&&!b(t),a=!t,s=De(e,!o),u=s&&s.data;if(i)u[Se(t)]=r;else{if(a)return u;if(o)return u&&u[Se(t)];for(n in t)u[Se(n)]=t[n]}}}function qe(e,t){return!!e.getAttribute&&(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+t+" ")>-1}function Ue(e,t){t&&e.setAttribute&&n(t.split(" "),function(t){e.setAttribute("class",fi((" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+fi(t)+" "," ")))})}function Be(e,t){if(t&&e.setAttribute){var r=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");n(t.split(" "),function(e){e=fi(e),r.indexOf(" "+e+" ")===-1&&(r+=e+" ")}),e.setAttribute("class",fi(r))}}function Ge(e,t){if(t)if(t.nodeType)e[e.length++]=t;else{var r=t.length;if("number"==typeof r&&t.window!==t){if(r)for(var n=0;n<r;n++)e[e.length++]=t[n]}else e[e.length++]=t}}function He(e,t){return Ve(e,"$"+(t||"ngController")+"Controller")}function Ve(e,t,r){e.nodeType===Ei&&(e=e.documentElement);for(var n=li(t)?t:[t];e;){for(var i=0,o=n.length;i<o;i++)if(m(r=Kn.data(e,n[i])))return r;e=e.parentNode||e.nodeType===_i&&e.host}}function ze(e){for(Oe(e,!0);e.firstChild;)e.removeChild(e.firstChild)}function We(e,t){t||Oe(e);var r=e.parentNode;r&&r.removeChild(e)}function Xe(t,r){r=r||e,"complete"===r.document.readyState?r.setTimeout(t):Kn(r).on("load",t)}function Je(t){function r(){e.document.removeEventListener("DOMContentLoaded",r),e.removeEventListener("load",r),t()}"complete"===e.document.readyState?e.setTimeout(t):(e.document.addEventListener("DOMContentLoaded",r),e.addEventListener("load",r))}function Ke(e,t){var r=Mi[t.toLowerCase()];return r&&qi[P(e)]&&r}function Ye(e){return Ui[e]}function Ze(e,t){var r=function(r,n){r.isDefaultPrevented=function(){return r.defaultPrevented};var i=t[n||r.type],o=i?i.length:0;if(o){if(y(r.immediatePropagationStopped)){var a=r.stopImmediatePropagation;r.stopImmediatePropagation=function(){r.immediatePropagationStopped=!0,r.stopPropagation&&r.stopPropagation(),a&&a.call(r)}}r.isImmediatePropagationStopped=function(){return r.immediatePropagationStopped===!0};var s=i.specialHandlerWrapper||et;o>1&&(i=be(i));for(var u=0;u<o;u++)r.isImmediatePropagationStopped()||s(e,r,i[u])}};return r.elem=e,r}function et(e,t,r){r.call(e,t)}function tt(e,t,r){var n=t.relatedTarget;n&&(n===e||Qi.call(e,n))||r.call(e,t)}function rt(){this.$get=function(){return l(Re,{hasClass:function(e,t){return e.attr&&(e=e[0]),qe(e,t)},addClass:function(e,t){return e.attr&&(e=e[0]),Be(e,t)},removeClass:function(e,t){return e.attr&&(e=e[0]),Ue(e,t)}})}}function nt(e,t){var r=e&&e.$$hashKey;if(r)return"function"==typeof r&&(r=e.$$hashKey()),r;var n=typeof e;return r="function"===n||"object"===n&&null!==e?e.$$hashKey=n+":"+(t||a)():n+":"+e}function it(){this._keys=[],this._values=[],this._lastKey=NaN,this._lastIndex=-1}function ot(e){return Function.prototype.toString.call(e)}function at(e){var t=ot(e).replace(Ji,""),r=t.match(Vi)||t.match(zi);return r}function st(e){var t=at(e);return t?"function("+(t[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function ut(e,t,r){var i,o,a;if("function"==typeof e){if(!(i=e.$inject)){if(i=[],e.length){if(t)throw x(r)&&r||(r=e.name||st(e)),Ki("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",r);o=at(e),n(o[1].split(Wi),function(e){e.replace(Xi,function(e,t,r){i.push(r)})})}e.$inject=i}}else li(e)?(a=e.length-1,pe(e[a],"fn"),i=e.slice(0,a)):pe(e,"fn",!0);return i}function lt(e,t){function r(e){return function(t,r){return b(t)?void n(t,o(e)):e(t,r)}}function i(e,t){if(he(e,"service"),(E(t)||li(t))&&(t=k.instantiate(t)),!t.$get)throw Ki("pget","Provider '{0}' must define $get factory method.",e);return $[e+g]=t}function a(e,t){return function(){var r=A.invoke(t,this);if(y(r))throw Ki("undef","Provider '{0}' must return a value from $get factory method.",e);return r}}function s(e,t,r){return i(e,{$get:r!==!1?a(e,t):t})}function u(e,t){return s(e,["$injector",function(e){return e.instantiate(t)}])}function l(e,t){return s(e,v(t),!1)}function c(e,t){he(e,"constant"),$[e]=t,_[e]=t}function f(e,t){var r=k.get(e+g),n=r.$get;r.$get=function(){var e=A.invoke(n,r);return A.invoke(t,null,{$delegate:e})}}function p(e){fe(y(e)||li(e),"modulesToLoad","not an array");var t,r=[];return n(e,function(e){function n(e){var t,r;for(t=0,r=e.length;t<r;t++){var n=e[t],i=k.get(n[0]);i[n[1]].apply(i,n[2])}}if(!w.get(e)){w.set(e,!0);try{x(e)?(t=Zn(e),r=r.concat(p(t.requires)).concat(t._runBlocks),n(t._invokeQueue),n(t._configBlocks)):E(e)?r.push(k.invoke(e)):li(e)?r.push(k.invoke(e)):pe(e,"module")}catch(t){throw li(e)&&(e=e[e.length-1]),t.message&&t.stack&&t.stack.indexOf(t.message)===-1&&(t=t.message+"\n"+t.stack),Ki("modulerr","Failed to instantiate module {0} due to:\n{1}",e,t.stack||t.message||t)}}}),r}function h(e,r){function n(t,n){if(e.hasOwnProperty(t)){if(e[t]===d)throw Ki("cdep","Circular dependency found: {0}",t+" <- "+m.join(" <- "));return e[t]}try{return m.unshift(t),e[t]=d,e[t]=r(t,n),e[t]}catch(r){throw e[t]===d&&delete e[t],r}finally{m.shift()}}function i(e,r,i){for(var o=[],a=lt.$$annotate(e,t,i),s=0,u=a.length;s<u;s++){var l=a[s];if("string"!=typeof l)throw Ki("itkn","Incorrect injection token! Expected service name as string, got {0}",l);o.push(r&&r.hasOwnProperty(l)?r[l]:n(l,i))}return o}function o(e){if(Jn||"function"!=typeof e)return!1;var t=e.$$ngIsClass;return F(t)||(t=e.$$ngIsClass=/^(?:class\b|constructor\()/.test(ot(e))),t}function a(e,t,r,n){"string"==typeof r&&(n=r,r=null);var a=i(e,r,n);return li(e)&&(e=e[e.length-1]),o(e)?(a.unshift(null),new(Function.prototype.bind.apply(e,a))):e.apply(t,a)}function s(e,t,r){var n=li(e)?e[e.length-1]:e,o=i(e,t,r);return o.unshift(null),new(Function.prototype.bind.apply(n,o))}return{invoke:a,instantiate:s,get:n,annotate:lt.$$annotate,has:function(t){return $.hasOwnProperty(t+g)||e.hasOwnProperty(t)}}}t=t===!0;var d={},g="Provider",m=[],w=new Gi,$={$provide:{provider:r(i),factory:r(s),service:r(u),value:r(l),constant:r(c),decorator:f}},k=$.$injector=h($,function(e,t){throw ai.isString(t)&&m.push(t),Ki("unpr","Unknown provider: {0}",m.join(" <- "))}),_={},S=h(_,function(e,t){var r=k.get(e+g,t);return A.invoke(r.$get,r,void 0,e)}),A=S;$["$injector"+g]={$get:v(S)};var C=p(e);return A=S.get("$injector"),A.strictDi=t,n(C,function(e){e&&A.invoke(e)}),A}function ct(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(t,r,n){function i(e){var t=null;return Array.prototype.some.call(e,function(e){if("a"===P(e))return t=e,!0}),t}function o(){var e=s.yOffset;if(E(e))e=e();else if(L(e)){var r=e[0],n=t.getComputedStyle(r);e="fixed"!==n.position?0:r.getBoundingClientRect().bottom}else $(e)||(e=0);return e}function a(e){if(e){e.scrollIntoView();var r=o();if(r){var n=e.getBoundingClientRect().top;t.scrollBy(0,n-r)}}else t.scrollTo(0,0)}function s(e){e=x(e)?e:$(e)?e.toString():r.hash();var t;e?(t=u.getElementById(e))?a(t):(t=i(u.getElementsByName(e)))?a(t):"top"===e&&a(null):a(null)}var u=t.document;return e&&n.$watch(function(){return r.hash()},function(e,t){e===t&&""===e||Xe(function(){n.$evalAsync(s)})}),s}]}function ft(e,t){return e||t?e?t?(li(e)&&(e=e.join(" ")),li(t)&&(t=t.join(" ")),e+" "+t):e:t:""}function pt(e){for(var t=0;t<e.length;t++){var r=e[t];if(r.nodeType===Zi)return r}}function ht(e){x(e)&&(e=e.split(" "));var t=ge();return n(e,function(e){e.length&&(t[e]=!0)}),t}function dt(e){return b(e)?e:{}}function vt(e,t,r,i){function o(e){try{e.apply(null,B(arguments,1))}finally{if(m--,0===m)for(;b.length;)try{b.pop()()}catch(e){r.error(e)}}}function a(e){var t=e.indexOf("#");return t===-1?"":e.substr(t)}function s(){E=null,l()}function u(){w=_(),w=y(w)?null:w,q(w,C)&&(w=C),C=w,x=w}function l(){var e=x;u(),$===c.url()&&e===w||($=c.url(),x=w,n(S,function(e){e(c.url(),w)}))}var c=this,f=e.location,p=e.history,d=e.setTimeout,v=e.clearTimeout,g={};c.isMock=!1;var m=0,b=[];c.$$completeOutstandingRequest=o,c.$$incOutstandingRequestCount=function(){m++},c.notifyWhenNoOutstandingRequests=function(e){0===m?e():b.push(e)};var w,x,$=f.href,k=t.find("base"),E=null,_=i.history?function(){try{return p.state}catch(e){}}:h;u(),c.url=function(t,r,n){if(y(n)&&(n=null),f!==e.location&&(f=e.location),p!==e.history&&(p=e.history),t){var o=x===n;if($===t&&(!i.history||o))return c;var s=$&&Jt($)===Jt(t);return $=t,x=n,!i.history||s&&o?(s||(E=t),r?f.replace(t):s?f.hash=a(t):f.href=t,f.href!==t&&(E=t)):(p[r?"replaceState":"pushState"](n,"",t),u()),E&&(E=t),c}return E||f.href.replace(/%27/g,"'")},c.state=function(){return w};var S=[],A=!1,C=null;c.onUrlChange=function(t){return A||(i.history&&Kn(e).on("popstate",s),Kn(e).on("hashchange",s),A=!0),S.push(t),t},c.$$applicationDestroyed=function(){Kn(e).off("hashchange popstate",s)},c.$$checkUrlChange=l,c.baseHref=function(){var e=k.attr("href");return e?e.replace(/^(https?:)?\/\/[^\/]*/,""):""},c.defer=function(e,t){var r;return m++,r=d(function(){delete g[r],o(e)},t||0),g[r]=!0,r},c.defer.cancel=function(e){return!!g[e]&&(delete g[e],v(e),o(h),!0)}}function gt(){this.$get=["$window","$log","$sniffer","$document",function(e,t,r,n){return new vt(e,n,t,r)}]}function yt(){this.$get=function(){function e(e,n){function i(e){e!==p&&(h?h===e&&(h=e.n):h=e,o(e.n,e.p),o(e,p),p=e,p.n=null)}function o(e,t){e!==t&&(e&&(e.p=t),t&&(t.n=e))}if(e in r)throw t("$cacheFactory")("iid","CacheId '{0}' is already taken!",e);var a=0,s=l({},n,{id:e}),u=ge(),c=n&&n.capacity||Number.MAX_VALUE,f=ge(),p=null,h=null;return r[e]={put:function(e,t){if(!y(t)){if(c<Number.MAX_VALUE){var r=f[e]||(f[e]={key:e});i(r)}return e in u||a++,u[e]=t,a>c&&this.remove(h.key),t}},get:function(e){if(c<Number.MAX_VALUE){var t=f[e];if(!t)return;i(t)}return u[e]},remove:function(e){if(c<Number.MAX_VALUE){var t=f[e];if(!t)return;t===p&&(p=t.p),t===h&&(h=t.n),o(t.n,t.p),delete f[e]}e in u&&(delete u[e],a--)},removeAll:function(){u=ge(),a=0,f=ge(),p=h=null},destroy:function(){u=null,s=null,f=null,delete r[e]},info:function(){return l({},s,{size:a})}}}var r={};return e.info=function(){var e={};return n(r,function(t,r){e[r]=t.info()}),e},e.get=function(e){return r[e]},e}}function mt(){this.$get=["$cacheFactory",function(e){return e("templates")}]}function bt(){}function wt(t,r){function i(e,t,r){var i=/^\s*([@&<]|=(\*?))(\??)\s*([\w$]*)\s*$/,o=ge();return n(e,function(e,n){if(e in C)return void(o[n]=C[e]);var a=e.match(i);if(!a)throw so("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",t,n,e,r?"controller bindings definition":"isolate scope definition");o[n]={mode:a[1][0],collection:"*"===a[2],optional:"?"===a[3],attrName:a[4]||n},a[4]&&(C[e]=o[n])}),o}function a(e,t){var r={isolateScope:null,bindToController:null};if(b(e.scope)&&(e.bindToController===!0?(r.bindToController=i(e.scope,t,!0),r.isolateScope={}):r.isolateScope=i(e.scope,t,!1)),b(e.bindToController)&&(r.bindToController=i(e.bindToController,t,!0)),r.bindToController&&!e.controller)throw so("noctrl","Cannot bind to controller without directive '{0}'s controller.",t);return r}function s(e){var t=e.charAt(0);if(!t||t!==Vn(t))throw so("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",e);if(e!==e.trim())throw so("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",e)}function u(e){var t=e.require||e.controller&&e.name;return!li(t)&&b(t)&&n(t,function(e,r){var n=e.match(_),i=e.substring(n[0].length);i||(t[r]=n[0]+r)}),t}function c(e,t){if(e&&(!x(e)||!/[EACM]/.test(e)))throw so("badrestrict","Restrict property '{0}' of directive '{1}' is invalid",e,t);return e||"EA"}var f={},g="Directive",w=/^\s*directive:\s*([\w-]+)\s+(.*)$/,$=/(([\w-]+)(?::([^;]+))?;?)/,k=O("ngSrc,ngSrcset,src,srcset"),_=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,S=/^(on[a-z]+|formaction)$/,C=ge();this.directive=function e(r,i){return fe(r,"name"),he(r,"directive"),x(r)?(s(r),fe(i,"directiveFactory"),f.hasOwnProperty(r)||(f[r]=[],t.factory(r+g,["$injector","$exceptionHandler",function(e,t){var i=[];return n(f[r],function(n,o){try{var a=e.invoke(n);E(a)?a={compile:v(a)}:!a.compile&&a.link&&(a.compile=v(a.link)),a.priority=a.priority||0,a.index=o,a.name=a.name||r,a.require=u(a),a.restrict=c(a.restrict,r),a.$$moduleName=n.$$moduleName,i.push(a)}catch(e){t(e)}}),i}])),f[r].push(i)):n(r,o(e)),this},this.component=function(e,t){function r(e){function r(t){return E(t)||li(t)?function(r,n){return e.invoke(t,this,{$element:r,$attrs:n})}:t}var o=t.template||t.templateUrl?t.template:"",a={controller:i,controllerAs:_t(t.controller)||t.controllerAs||"$ctrl",template:r(o),templateUrl:r(t.templateUrl),transclude:t.transclude,scope:{},bindToController:t.bindings||{},restrict:"E",require:t.require};return n(t,function(e,t){"$"===t.charAt(0)&&(a[t]=e)}),a}var i=t.controller||function(){};return n(t,function(e,t){"$"===t.charAt(0)&&(r[t]=e,E(i)&&(i[t]=e))}),r.$inject=["$injector"],this.directive(e,r)},this.aHrefSanitizationWhitelist=function(e){return m(e)?(r.aHrefSanitizationWhitelist(e),this):r.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(e){return m(e)?(r.imgSrcSanitizationWhitelist(e),this):r.imgSrcSanitizationWhitelist()};var I=!0;this.debugInfoEnabled=function(e){return m(e)?(I=e,this):I};var T=!1;this.preAssignBindingsEnabled=function(e){return m(e)?(T=e,this):T};var N=10;this.onChangesTtl=function(e){return arguments.length?(N=e,this):N};var j=!0;this.commentDirectivesEnabled=function(e){return arguments.length?(j=e,this):j};var R=!0;this.cssClassDirectivesEnabled=function(e){return arguments.length?(R=e,this):R},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate","$$sanitizeUri",function(t,r,i,o,s,u,c,v,C,L){function O(){try{if(!--Ie)throw ke=void 0,so("infchng","{0} $onChanges() iterations reached. Aborting!\n",N);c.$apply(function(){for(var e=[],t=0,r=ke.length;t<r;++t)try{ke[t]()}catch(t){e.push(t)}if(ke=void 0,e.length)throw e})}finally{Ie++}}function Q(e,t){if(t){var r,n,i,o=Object.keys(t);for(r=0,n=o.length;r<n;r++)i=o[r],this[i]=t[i]}else this.$attr={};this.$$element=e}function M(e,t,r){_e.innerHTML="<span "+t+">";var n=_e.firstChild.attributes,i=n[0];n.removeNamedItem(i.name),i.value=r,e.attributes.setNamedItem(i)}function U(e,t){try{e.addClass(t)}catch(e){}}function H(e,t,r,n,i){e instanceof Kn||(e=Kn(e));var o=z(e,t,e,r,n,i);H.$$addScopeClass(e);var a=null;return function(t,r,n){if(!e)throw so("multilink","This element has already been linked.");fe(t,"scope"),i&&i.needsNewScope&&(t=t.$parent.$new()),n=n||{};var s=n.parentBoundTranscludeFn,u=n.transcludeControllers,l=n.futureParentElement;s&&s.$$boundTransclude&&(s=s.$$boundTransclude),a||(a=V(l));var c;if(c="html"!==a?Kn(ve(a,Kn("<div>").append(e).html())):r?Di.clone.call(e):e,u)for(var f in u)c.data("$"+f+"Controller",u[f].instance);return H.$$addScopeInfo(c,t),r&&r(c,t),o&&o(t,c,c,s),r||(e=o=null),c}}function V(e){var t=e&&e[0];return t&&"foreignobject"!==P(t)&&ni.call(t).match(/SVG/)?"svg":"html"}function z(e,t,r,n,i,o){function a(e,r,n,i){var o,a,s,u,l,c,f,p,v;if(h){var g=r.length;for(v=new Array(g),l=0;l<d.length;l+=3)f=d[l],v[f]=r[f]}else v=r;for(l=0,c=d.length;l<c;)s=v[d[l++]],o=d[l++],a=d[l++],o?(o.scope?(u=e.$new(),H.$$addScopeInfo(Kn(s),u)):u=e,p=o.transcludeOnThisElement?X(e,o.transclude,i):!o.templateOnThisElement&&i?i:!i&&t?X(e,t):null,o(a,u,s,n,p)):a&&a(e,s.childNodes,void 0,i)}for(var s,u,l,c,f,p,h,d=[],v=li(e)||e instanceof Kn,g=0;g<e.length;g++)s=new Q,11===Jn&&W(e,g,v),u=J(e[g],[],s,0===g?n:void 0,i),l=u.length?re(u,e[g],s,t,r,null,[],[],o):null,l&&l.scope&&H.$$addScopeClass(s.$$element),f=l&&l.terminal||!(c=e[g].childNodes)||!c.length?null:z(c,l?(l.transcludeOnThisElement||!l.templateOnThisElement)&&l.transclude:t),
(l||f)&&(d.push(g,l,f),p=!0,h=h||l),o=null;return p?a:null}function W(e,t,r){var n,i=e[t],o=i.parentNode;if(i.nodeType===$i)for(;;){if(n=o?i.nextSibling:e[t+1],!n||n.nodeType!==$i)break;i.nodeValue=i.nodeValue+n.nodeValue,n.parentNode&&n.parentNode.removeChild(n),r&&n===e[t+1]&&e.splice(t+1,1)}}function X(e,t,r){function n(n,i,o,a,s){return n||(n=e.$new(!1,s),n.$$transcluded=!0),t(n,i,{parentBoundTranscludeFn:r,transcludeControllers:o,futureParentElement:a})}var i=n.$$slots=ge();for(var o in t.$$slots)t.$$slots[o]?i[o]=X(e,t.$$slots[o],r):i[o]=null;return n}function J(e,t,r,n,i){var o,a,s,u=e.nodeType,l=r.$attr;switch(u){case wi:a=P(e),ae(t,$t(a),"E",n,i);for(var c,f,p,h,d,v,g=e.attributes,y=0,m=g&&g.length;y<m;y++){var w=!1,k=!1;c=g[y],f=c.name,d=c.value,h=$t(f),v=je.test(h),v&&(f=f.replace(lo,"").substr(8).replace(/_(.)/g,function(e,t){return t.toUpperCase()}));var E=h.match(Re);E&&se(E[1])&&(w=f,k=f.substr(0,f.length-5)+"end",f=f.substr(0,f.length-6)),p=$t(f.toLowerCase()),l[p]=f,!v&&r.hasOwnProperty(p)||(r[p]=d,Ke(e,p)&&(r[p]=!0)),me(e,t,d,p,v),ae(t,p,"A",n,i,w,k)}if("input"===a&&"hidden"===e.getAttribute("type")&&e.setAttribute("autocomplete","off"),!Ce)break;if(s=e.className,b(s)&&(s=s.animVal),x(s)&&""!==s)for(;o=$.exec(s);)p=$t(o[2]),ae(t,p,"C",n,i)&&(r[p]=fi(o[3])),s=s.substr(o.index+o[0].length);break;case $i:de(t,e.nodeValue);break;case ki:if(!Se)break;Y(e,t,r,n,i)}return t.sort(pe),t}function Y(e,t,r,n,i){try{var o=w.exec(e.nodeValue);if(o){var a=$t(o[1]);ae(t,a,"M",n,i)&&(r[a]=fi(o[2]))}}catch(e){}}function Z(e,t,r){var n=[],i=0;if(t&&e.hasAttribute&&e.hasAttribute(t)){do{if(!e)throw so("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",t,r);e.nodeType===wi&&(e.hasAttribute(t)&&i++,e.hasAttribute(r)&&i--),n.push(e),e=e.nextSibling}while(i>0)}else n.push(e);return Kn(n)}function ee(e,t,r){return function(n,i,o,a,s){return i=Z(i[0],t,r),e(n,i,o,a,s)}}function te(e,t,r,n,i,o){var a;return e?H(t,r,n,i,o):function(){return a||(a=H(t,r,n,i,o),t=r=o=null),a.apply(this,arguments)}}function re(e,t,r,o,a,s,u,c,f){function p(e,t,r,n){e&&(r&&(e=ee(e,r,n)),e.require=d.require,e.directiveName=v,(_===d||d.$$isolateScope)&&(e=we(e,{isolateScope:!0})),u.push(e)),t&&(r&&(t=ee(t,r,n)),t.require=d.require,t.directiveName=v,(_===d||d.$$isolateScope)&&(t=we(t,{isolateScope:!0})),c.push(t))}function h(e,o,a,s,f){function p(e,t,r,n){var i;if(A(e)||(n=r,r=t,t=e,e=void 0),N&&(i=w),r||(r=N?C.parent():C),!n)return f(e,t,i,r,D);var o=f.$$slots[n];if(o)return o(e,t,i,r,D);if(y(o))throw so("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',n,K(C))}var h,d,v,g,m,w,x,C,I,F;t===a?(I=r,C=r.$$element):(C=Kn(a),I=new Q(C,r)),m=o,_?g=o.$new(!0):$&&(m=o.$parent),f&&(x=p,x.$$boundTransclude=f,x.isSlotFilled=function(e){return!!f.$$slots[e]}),k&&(w=ie(C,I,x,k,g,o,_)),_&&(H.$$addScopeInfo(C,g,!0,!(S&&(S===_||S===_.$$originalDirective))),H.$$addScopeClass(C,!0),g.$$isolateBindings=_.$$isolateBindings,F=$e(o,I,g,g.$$isolateBindings,_),F.removeWatches&&g.$on("$destroy",F.removeWatches));for(var j in w){var R=k[j],L=w[j],O=R.$$bindings.bindToController;if(T){O?L.bindingInfo=$e(m,I,L.instance,O,R):L.bindingInfo={};var P=L();P!==L.instance&&(L.instance=P,C.data("$"+R.name+"Controller",P),L.bindingInfo.removeWatches&&L.bindingInfo.removeWatches(),L.bindingInfo=$e(m,I,L.instance,O,R))}else L.instance=L(),C.data("$"+R.name+"Controller",L.instance),L.bindingInfo=$e(m,I,L.instance,O,R)}for(n(k,function(e,t){var r=e.require;e.bindToController&&!li(r)&&b(r)&&l(w[t].instance,ne(t,r,C,w))}),n(w,function(e){var t=e.instance;if(E(t.$onChanges))try{t.$onChanges(e.bindingInfo.initialChanges)}catch(e){i(e)}if(E(t.$onInit))try{t.$onInit()}catch(e){i(e)}E(t.$doCheck)&&(m.$watch(function(){t.$doCheck()}),t.$doCheck()),E(t.$onDestroy)&&m.$on("$destroy",function(){t.$onDestroy()})}),h=0,d=u.length;h<d;h++)v=u[h],xe(v,v.isolateScope?g:o,C,I,v.require&&ne(v.directiveName,v.require,C,w),x);var D=o;for(_&&(_.template||null===_.templateUrl)&&(D=g),e&&e(D,a.childNodes,void 0,f),h=c.length-1;h>=0;h--)v=c[h],xe(v,v.isolateScope?g:o,C,I,v.require&&ne(v.directiveName,v.require,C,w),x);n(w,function(e){var t=e.instance;E(t.$postLink)&&t.$postLink()})}f=f||{};for(var d,v,g,m,w,x=-Number.MAX_VALUE,$=f.newScopeDirective,k=f.controllerDirectives,_=f.newIsolateScopeDirective,S=f.templateDirective,C=f.nonTlbTranscludeDirective,I=!1,F=!1,N=f.hasElementTranscludeDirective,j=r.$$element=Kn(t),R=s,L=o,O=!1,D=!1,M=0,q=e.length;M<q;M++){d=e[M];var U=d.$$start,V=d.$$end;if(U&&(j=Z(t,U,V)),g=void 0,x>d.priority)break;if(w=d.scope,w&&(d.templateUrl||(b(w)?(he("new/isolated scope",_||$,d,j),_=d):he("new/isolated scope",_,d,j)),$=$||d),v=d.name,!O&&(d.replace&&(d.templateUrl||d.template)||d.transclude&&!d.$$tlb)){for(var z,W=M+1;z=e[W++];)if(z.transclude&&!z.$$tlb||z.replace&&(z.templateUrl||z.template)){D=!0;break}O=!0}if(!d.templateUrl&&d.controller&&(k=k||ge(),he("'"+v+"' controller",k[v],d,j),k[v]=d),w=d.transclude)if(I=!0,d.$$tlb||(he("transclusion",C,d,j),C=d),"element"===w)N=!0,x=d.priority,g=j,j=r.$$element=Kn(H.$$createComment(v,r[v])),t=j[0],be(a,B(g),t),g[0].$$parentNode=g[0].parentNode,L=te(D,g,o,x,R&&R.name,{nonTlbTranscludeDirective:C});else{var X=ge();if(b(w)){g=[];var Y=ge(),re=ge();n(w,function(e,t){var r="?"===e.charAt(0);e=r?e.substring(1):e,Y[e]=t,X[t]=null,re[t]=r}),n(j.contents(),function(e){var t=Y[$t(P(e))];t?(re[t]=!0,X[t]=X[t]||[],X[t].push(e)):g.push(e)}),n(re,function(e,t){if(!e)throw so("reqslot","Required transclusion slot `{0}` was not filled.",t)});for(var ae in X)X[ae]&&(X[ae]=te(D,X[ae],o))}else g=Kn(Le(t)).contents();j.empty(),L=te(D,g,o,void 0,void 0,{needsNewScope:d.$$isolateScope||d.$$newScope}),L.$$slots=X}if(d.template)if(F=!0,he("template",S,d,j),S=d,w=E(d.template)?d.template(j,r):d.template,w=Ne(w),d.replace){if(R=d,g=Ae(w)?[]:Et(ve(d.templateNamespace,fi(w))),t=g[0],1!==g.length||t.nodeType!==wi)throw so("tplrt","Template for directive '{0}' must have exactly one root element. {1}",v,"");be(a,j,t);var se={$attr:{}},le=J(t,[],se),fe=e.splice(M+1,e.length-(M+1));(_||$)&&oe(le,_,$),e=e.concat(le).concat(fe),ue(r,se),q=e.length}else j.html(w);if(d.templateUrl)F=!0,he("template",S,d,j),S=d,d.replace&&(R=d),h=ce(e.splice(M,e.length-M),j,r,a,I&&L,u,c,{controllerDirectives:k,newScopeDirective:$!==d&&$,newIsolateScopeDirective:_,templateDirective:S,nonTlbTranscludeDirective:C}),q=e.length;else if(d.compile)try{m=d.compile(j,r,L);var pe=d.$$originalDirective||d;E(m)?p(null,G(pe,m),U,V):m&&p(G(pe,m.pre),G(pe,m.post),U,V)}catch(e){i(e,K(j))}d.terminal&&(h.terminal=!0,x=Math.max(x,d.priority))}return h.scope=$&&$.scope===!0,h.transcludeOnThisElement=I,h.templateOnThisElement=F,h.transclude=L,f.hasElementTranscludeDirective=N,h}function ne(e,t,r,i){var o;if(x(t)){var a=t.match(_),s=t.substring(a[0].length),u=a[1]||a[3],l="?"===a[2];if("^^"===u?r=r.parent():(o=i&&i[s],o=o&&o.instance),!o){var c="$"+s+"Controller";o=u?r.inheritedData(c):r.data(c)}if(!o&&!l)throw so("ctreq","Controller '{0}', required by directive '{1}', can't be found!",s,e)}else if(li(t)){o=[];for(var f=0,p=t.length;f<p;f++)o[f]=ne(e,t[f],r,i)}else b(t)&&(o={},n(t,function(t,n){o[n]=ne(e,t,r,i)}));return o||null}function ie(e,t,r,n,i,o,a){var s=ge();for(var l in n){var c=n[l],f={$scope:c===a||c.$$isolateScope?i:o,$element:e,$attrs:t,$transclude:r},p=c.controller;"@"===p&&(p=t[c.name]);var h=u(p,f,!0,c.controllerAs);s[c.name]=h,e.data("$"+c.name+"Controller",h.instance)}return s}function oe(e,t,r){for(var n=0,i=e.length;n<i;n++)e[n]=p(e[n],{$$isolateScope:t,$$newScope:r})}function ae(e,r,n,i,o,s,u){if(r===o)return null;var l=null;if(f.hasOwnProperty(r))for(var c,h=t.get(r+g),d=0,v=h.length;d<v;d++)if(c=h[d],(y(i)||i>c.priority)&&c.restrict.indexOf(n)!==-1){if(s&&(c=p(c,{$$start:s,$$end:u})),!c.$$bindings){var m=c.$$bindings=a(c,c.name);b(m.isolateScope)&&(c.$$isolateBindings=m.isolateScope)}e.push(c),l=c}return l}function se(e){if(f.hasOwnProperty(e))for(var r,n=t.get(e+g),i=0,o=n.length;i<o;i++)if(r=n[i],r.multiElement)return!0;return!1}function ue(e,t){var r=t.$attr,i=e.$attr;n(e,function(n,i){"$"!==i.charAt(0)&&(t[i]&&t[i]!==n&&(n.length?n+=("style"===i?";":" ")+t[i]:n=t[i]),e.$set(i,n,!0,r[i]))}),n(t,function(t,n){e.hasOwnProperty(n)||"$"===n.charAt(0)||(e[n]=t,"class"!==n&&"style"!==n&&(i[n]=r[n]))})}function ce(e,t,r,a,s,u,l,c){var f,h,d=[],v=t[0],g=e.shift(),y=p(g,{templateUrl:null,transclude:null,replace:null,$$originalDirective:g}),m=E(g.templateUrl)?g.templateUrl(t,r):g.templateUrl,w=g.templateNamespace;return t.empty(),o(m).then(function(i){var o,p,x,$;if(i=Ne(i),g.replace){if(x=Ae(i)?[]:Et(ve(w,fi(i))),o=x[0],1!==x.length||o.nodeType!==wi)throw so("tplrt","Template for directive '{0}' must have exactly one root element. {1}",g.name,m);p={$attr:{}},be(a,t,o);var k=J(o,[],p);b(g.scope)&&oe(k,!0),e=k.concat(e),ue(r,p)}else o=v,t.html(i);for(e.unshift(y),f=re(e,o,r,s,t,g,u,l,c),n(a,function(e,r){e===o&&(a[r]=t[0])}),h=z(t[0].childNodes,s);d.length;){var E=d.shift(),_=d.shift(),S=d.shift(),A=d.shift(),C=t[0];if(!E.$$destroyed){if(_!==v){var I=_.className;c.hasElementTranscludeDirective&&g.replace||(C=Le(o)),be(S,Kn(_),C),U(Kn(C),I)}$=f.transcludeOnThisElement?X(E,f.transclude,A):A,f(h,E,C,a,$)}}d=null}).catch(function(e){e instanceof Error&&i(e)}),function(e,t,r,n,i){var o=i;t.$$destroyed||(d?d.push(t,r,n,o):(f.transcludeOnThisElement&&(o=X(t,f.transclude,i)),f(h,t,r,n,o)))}}function pe(e,t){var r=t.priority-e.priority;return 0!==r?r:e.name!==t.name?e.name<t.name?-1:1:e.index-t.index}function he(e,t,r,n){function i(e){return e?" (module: "+e+")":""}if(t)throw so("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",t.name,i(t.$$moduleName),r.name,i(r.$$moduleName),e,K(n))}function de(e,t){var n=r(t,!0);n&&e.push({priority:0,compile:function(e){var t=e.parent(),r=!!t.length;return r&&H.$$addBindingClass(t),function(e,t){var i=t.parent();r||H.$$addBindingClass(i),H.$$addBindingInfo(i,n.expressions),e.$watch(n,function(e){t[0].nodeValue=e})}}})}function ve(t,r){switch(t=Vn(t||"html")){case"svg":case"math":var n=e.document.createElement("div");return n.innerHTML="<"+t+">"+r+"</"+t+">",n.childNodes[0].childNodes;default:return r}}function ye(e,t){if("srcdoc"===t)return v.HTML;var r=P(e);if("src"===t||"ngSrc"===t){if(["img","video","audio","source","track"].indexOf(r)===-1)return v.RESOURCE_URL}else if("xlinkHref"===t||"form"===r&&"action"===t||"link"===r&&"href"===t)return v.RESOURCE_URL}function me(e,t,n,i,o){var a=ye(e,i),s=!o,u=k[i]||o,l=r(n,s,a,u);if(l){if("multiple"===i&&"select"===P(e))throw so("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",K(e));if(S.test(i))throw so("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");t.push({priority:100,compile:function(){return{pre:function(e,t,o){var s=o.$$observers||(o.$$observers=ge()),c=o[i];c!==n&&(l=c&&r(c,!0,a,u),n=c),l&&(o[i]=l(e),(s[i]||(s[i]=[])).$$inter=!0,(o.$$observers&&o.$$observers[i].$$scope||e).$watch(l,function(e,t){"class"===i&&e!==t?o.$updateClass(e,t):o.$set(i,e)}))}}}})}}function be(t,r,n){var i,o,a=r[0],s=r.length,u=a.parentNode;if(t)for(i=0,o=t.length;i<o;i++)if(t[i]===a){t[i++]=n;for(var l=i,c=l+s-1,f=t.length;l<f;l++,c++)c<f?t[l]=t[c]:delete t[l];t.length-=s-1,t.context===a&&(t.context=n);break}u&&u.replaceChild(n,a);var p=e.document.createDocumentFragment();for(i=0;i<s;i++)p.appendChild(r[i]);for(Kn.hasData(a)&&(Kn.data(n,Kn.data(a)),Kn(a).off("$destroy")),Kn.cleanData(p.querySelectorAll("*")),i=1;i<s;i++)delete r[i];r[0]=n,r.length=1}function we(e,t){return l(function(){return e.apply(null,arguments)},e,t)}function xe(e,t,r,n,o,a){try{e(t,r,n,o,a)}catch(e){i(e,K(r))}}function $e(e,t,i,o,a){function u(t,r,n){!E(i.$onChanges)||r===n||r!==r&&n!==n||(ke||(e.$$postDigest(O),ke=[]),c||(c={},ke.push(l)),c[t]&&(n=c[t].previousValue),c[t]=new xt(n,r))}function l(){i.$onChanges(c),c=void 0}var c,f=[],p={};return n(o,function(n,o){var l,c,d,v,g,y=n.attrName,m=n.optional,b=n.mode;switch(b){case"@":m||Hn.call(t,y)||(i[o]=t[y]=void 0),g=t.$observe(y,function(e){if(x(e)||F(e)){var t=i[o];u(o,e,t),i[o]=e}}),t.$$observers[y].$$scope=e,l=t[y],x(l)?i[o]=r(l)(e):F(l)&&(i[o]=l),p[o]=new xt(uo,i[o]),f.push(g);break;case"=":if(!Hn.call(t,y)){if(m)break;t[y]=void 0}if(m&&!t[y])break;c=s(t[y]),v=c.literal?q:function(e,t){return e===t||e!==e&&t!==t},d=c.assign||function(){throw l=i[o]=c(e),so("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",t[y],y,a.name)},l=i[o]=c(e);var w=function(t){return v(t,i[o])||(v(t,l)?d(e,t=i[o]):i[o]=t),l=t};w.$stateful=!0,g=n.collection?e.$watchCollection(t[y],w):e.$watch(s(t[y],w),null,c.literal),f.push(g);break;case"<":if(!Hn.call(t,y)){if(m)break;t[y]=void 0}if(m&&!t[y])break;c=s(t[y]);var $=c.literal,k=i[o]=c(e);p[o]=new xt(uo,i[o]),g=e.$watch(c,function(e,t){if(t===e){if(t===k||$&&q(t,k))return;t=k}u(o,e,t),i[o]=e},$),f.push(g);break;case"&":if(c=t.hasOwnProperty(y)?s(t[y]):h,c===h&&m)break;i[o]=function(t){return c(e,t)}}}),{initialChanges:p,removeWatches:f.length&&function(){for(var e=0,t=f.length;e<t;++e)f[e]()}}}var ke,Ee=/^\w/,_e=e.document.createElement("div"),Se=j,Ce=R,Ie=N;Q.prototype={$normalize:$t,$addClass:function(e){e&&e.length>0&&C.addClass(this.$$element,e)},$removeClass:function(e){e&&e.length>0&&C.removeClass(this.$$element,e)},$updateClass:function(e,t){var r=kt(e,t);r&&r.length&&C.addClass(this.$$element,r);var n=kt(t,e);n&&n.length&&C.removeClass(this.$$element,n)},$set:function(e,t,r,o){var a,s=this.$$element[0],u=Ke(s,e),l=Ye(e),c=e;if(u?(this.$$element.prop(e,t),o=u):l&&(this[l]=t,c=l),this[e]=t,o?this.$attr[e]=o:(o=this.$attr[e],o||(this.$attr[e]=o=le(e,"-"))),a=P(this.$$element),"a"===a&&("href"===e||"xlinkHref"===e)||"img"===a&&"src"===e)this[e]=t=L(t,"src"===e);else if("img"===a&&"srcset"===e&&m(t)){for(var f="",p=fi(t),h=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,d=/\s/.test(p)?h:/(,)/,v=p.split(d),g=Math.floor(v.length/2),b=0;b<g;b++){var w=2*b;f+=L(fi(v[w]),!0),f+=" "+fi(v[w+1])}var x=fi(v[2*b]).split(/\s/);f+=L(fi(x[0]),!0),2===x.length&&(f+=" "+fi(x[1])),this[e]=t=f}r!==!1&&(null===t||y(t)?this.$$element.removeAttr(o):Ee.test(o)?this.$$element.attr(o,t):M(this.$$element[0],o,t));var $=this.$$observers;$&&n($[c],function(e){try{e(t)}catch(e){i(e)}})},$observe:function(e,t){var r=this,n=r.$$observers||(r.$$observers=ge()),i=n[e]||(n[e]=[]);return i.push(t),c.$evalAsync(function(){i.$$inter||!r.hasOwnProperty(e)||y(r[e])||t(r[e])}),function(){D(i,t)}}};var Te=r.startSymbol(),Fe=r.endSymbol(),Ne="{{"===Te&&"}}"===Fe?d:function(e){return e.replace(/\{\{/g,Te).replace(/}}/g,Fe)},je=/^ngAttr[A-Z]/,Re=/^(.+)Start$/;return H.$$addBindingInfo=I?function(e,t){var r=e.data("$binding")||[];li(t)?r=r.concat(t):r.push(t),e.data("$binding",r)}:h,H.$$addBindingClass=I?function(e){U(e,"ng-binding")}:h,H.$$addScopeInfo=I?function(e,t,r,n){var i=r?n?"$isolateScopeNoTemplate":"$isolateScope":"$scope";e.data(i,t)}:h,H.$$addScopeClass=I?function(e,t){U(e,t?"ng-isolate-scope":"ng-scope")}:h,H.$$createComment=function(t,r){var n="";return I&&(n=" "+(t||"")+": ",r&&(n+=r+" ")),e.document.createComment(n)},H}]}function xt(e,t){this.previousValue=e,this.currentValue=t}function $t(e){return e.replace(lo,"").replace(co,_e)}function kt(e,t){var r="",n=e.split(/\s+/),i=t.split(/\s+/);e:for(var o=0;o<n.length;o++){for(var a=n[o],s=0;s<i.length;s++)if(a===i[s])continue e;r+=(r.length>0?" ":"")+a}return r}function Et(e){e=Kn(e);var t=e.length;if(t<=1)return e;for(;t--;){var r=e[t];(r.nodeType===ki||r.nodeType===$i&&""===r.nodeValue.trim())&&ti.call(e,t,1)}return e}function _t(e,t){if(t&&x(t))return t;if(x(e)){var r=po.exec(e);if(r)return r[3]}}function St(){var e={},r=!1;this.has=function(t){return e.hasOwnProperty(t)},this.register=function(t,r){he(t,"controller"),b(t)?l(e,t):e[t]=r},this.allowGlobals=function(){r=!0},this.$get=["$injector","$window",function(n,i){function o(e,r,n,i){if(!e||!b(e.$scope))throw t("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",i,r);e.$scope[r]=n}return function(t,a,s,u){var c,f,p,h;if(s=s===!0,u&&x(u)&&(h=u),x(t)){if(f=t.match(po),!f)throw fo("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",t);if(p=f[1],h=h||f[3],t=e.hasOwnProperty(p)?e[p]:de(a.$scope,p,!0)||(r?de(i,p,!0):void 0),!t)throw fo("ctrlreg","The controller with the name '{0}' is not registered.",p);pe(t,p,!0)}if(s){var d=(li(t)?t[t.length-1]:t).prototype;return c=Object.create(d||null),h&&o(a,h,c,p||t.name),l(function(){var e=n.invoke(t,c,a,p);return e!==c&&(b(e)||E(e))&&(c=e,h&&o(a,h,c,p||t.name)),c},{instance:c,identifier:h})}return c=n.instantiate(t,a,p),h&&o(a,h,c,p||t.name),c}}]}function At(){this.$get=["$window",function(e){return Kn(e.document)}]}function Ct(){this.$get=["$document","$rootScope",function(e,t){function r(){i=n.hidden}var n=e[0],i=n&&n.hidden;return e.on("visibilitychange",r),t.$on("$destroy",function(){e.off("visibilitychange",r)}),function(){return i}}]}function It(){this.$get=["$log",function(e){return function(t,r){e.error.apply(e,arguments)}}]}function Tt(e){return b(e)?k(e)?e.toISOString():V(e):e}function Ft(){this.$get=function(){return function(e){if(!e)return"";var t=[];return i(e,function(e,r){null===e||y(e)||(li(e)?n(e,function(e){t.push(re(r)+"="+re(Tt(e)))}):t.push(re(r)+"="+re(Tt(e))))}),t.join("&")}}}function Nt(){this.$get=function(){return function(e){function t(e,o,a){null===e||y(e)||(li(e)?n(e,function(e,r){t(e,o+"["+(b(e)?r:"")+"]")}):b(e)&&!k(e)?i(e,function(e,r){t(e,o+(a?"":"[")+r+(a?"":"]"))}):r.push(re(o)+"="+re(Tt(e))))}if(!e)return"";var r=[];return t(e,"",!0),r.join("&")}}}function jt(e,t){if(x(e)){var r=e.replace(bo,"").trim();if(r){var n=t("Content-Type");(n&&0===n.indexOf(vo)||Rt(r))&&(e=z(r))}}return e}function Rt(e){var t=e.match(yo);return t&&mo[t[0]].test(e)}function Lt(e){function t(e,t){e&&(i[e]=i[e]?i[e]+", "+t:t)}var r,i=ge();return x(e)?n(e.split("\n"),function(e){r=e.indexOf(":"),t(Vn(fi(e.substr(0,r))),fi(e.substr(r+1)))}):b(e)&&n(e,function(e,r){t(Vn(r),fi(e))}),i}function Ot(e){var t;return function(r){if(t||(t=Lt(e)),r){var n=t[Vn(r)];return void 0===n&&(n=null),n}return t}}function Pt(e,t,r,i){return E(i)?i(e,t,r):(n(i,function(n){e=n(e,t,r)}),e)}function Qt(e){return 200<=e&&e<300}function Dt(){var e=this.defaults={transformResponse:[jt],transformRequest:[function(e){return!b(e)||C(e)||T(e)||I(e)?e:V(e)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:be(go),put:be(go),patch:be(go)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer",jsonpCallbackParam:"callback"},r=!1;this.useApplyAsync=function(e){return m(e)?(r=!!e,this):r};var i=this.interceptors=[];this.$get=["$browser","$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector","$sce",function(o,a,s,u,c,f,p,d){function v(r){function i(e,t){for(var r=0,n=t.length;r<n;){var i=t[r++],o=t[r++];e=e.then(i,o)}return t.length=0,e}function a(){o.$$completeOutstandingRequest(h)}function s(e,t){var r,i={};return n(e,function(e,n){E(e)?(r=e(t),null!=r&&(i[n]=r)):i[n]=e}),i}function u(t){var r,n,i,o=e.headers,a=l({},t.headers);o=l({},o.common,o[Vn(t.method)]);e:for(r in o){n=Vn(r);for(i in a)if(Vn(i)===n)continue e;a[r]=o[r]}return s(a,be(t))}function c(t){var r=t.headers,i=Pt(t.data,Ot(r),void 0,t.transformRequest);return y(i)&&n(r,function(e,t){"content-type"===Vn(t)&&delete r[t]}),y(t.withCredentials)&&!y(e.withCredentials)&&(t.withCredentials=e.withCredentials),$(t,i).then(v,v)}function v(e){var t=l({},e);return t.data=Pt(e.data,e.headers,e.status,g.transformResponse),Qt(e.status)?t:f.reject(t)}if(!b(r))throw t("$http")("badreq","Http request configuration must be an object.  Received: {0}",r);if(!x(d.valueOf(r.url)))throw t("$http")("badreq","Http request configuration url must be a string or a $sce trusted object.  Received: {0}",r.url);var g=l({method:"get",transformRequest:e.transformRequest,transformResponse:e.transformResponse,paramSerializer:e.paramSerializer,jsonpCallbackParam:e.jsonpCallbackParam},r);g.headers=u(r),g.method=zn(g.method),g.paramSerializer=x(g.paramSerializer)?p.get(g.paramSerializer):g.paramSerializer,o.$$incOutstandingRequestCount();var m=[],w=[],k=f.resolve(g);return n(A,function(e){(e.request||e.requestError)&&m.unshift(e.request,e.requestError),(e.response||e.responseError)&&w.push(e.response,e.responseError)}),k=i(k,m),k=k.then(c),k=i(k,w),k=k.finally(a)}function g(e){n(arguments,function(e){v[e]=function(t,r){return v(l({},r||{},{method:e,url:t}))}})}function w(e){n(arguments,function(e){v[e]=function(t,r,n){return v(l({},n||{},{method:e,url:t,data:r}))}})}function $(t,i){function o(e){if(e){var t={};return n(e,function(e,n){t[n]=function(t){function n(){e(t)}r?c.$applyAsync(n):c.$$phase?n():c.$apply(n)}}),t}}function u(e,t,n,i){function o(){l(t,e,n,i)}g&&(Qt(e)?g.put(I,[e,t,Lt(n),i]):g.remove(I)),r?c.$applyAsync(o):(o(),c.$$phase||c.$apply())}function l(e,r,n,i){r=r>=-1?r:0,(Qt(r)?$.resolve:$.reject)({data:e,status:r,headers:Ot(n),config:t,statusText:i})}function p(e){l(e.data,e.status,be(e.headers()),e.statusText)}function h(){var e=v.pendingRequests.indexOf(t);e!==-1&&v.pendingRequests.splice(e,1)}var g,w,$=f.defer(),E=$.promise,A=t.headers,C="jsonp"===Vn(t.method),I=t.url;if(C?I=d.getTrustedResourceUrl(I):x(I)||(I=d.valueOf(I)),I=k(I,t.paramSerializer(t.params)),C&&(I=_(I,t.jsonpCallbackParam)),v.pendingRequests.push(t),E.then(h,h),!t.cache&&!e.cache||t.cache===!1||"GET"!==t.method&&"JSONP"!==t.method||(g=b(t.cache)?t.cache:b(e.cache)?e.cache:S),g&&(w=g.get(I),m(w)?N(w)?w.then(p,p):li(w)?l(w[1],w[0],be(w[2]),w[3]):l(w,200,{},"OK"):g.put(I,E)),y(w)){var T=Pr(t.url)?s()[t.xsrfCookieName||e.xsrfCookieName]:void 0;T&&(A[t.xsrfHeaderName||e.xsrfHeaderName]=T),a(t.method,I,i,u,A,t.timeout,t.withCredentials,t.responseType,o(t.eventHandlers),o(t.uploadEventHandlers))}return E}function k(e,t){return t.length>0&&(e+=(e.indexOf("?")===-1?"?":"&")+t),e}function _(e,t){if(/[&?][^=]+=JSON_CALLBACK/.test(e))throw wo("badjsonp",'Illegal use of JSON_CALLBACK in url, "{0}"',e);var r=new RegExp("[&?]"+t+"=");if(r.test(e))throw wo("badjsonp",'Illegal use of callback param, "{0}", in url, "{1}"',t,e);return e+=(e.indexOf("?")===-1?"?":"&")+t+"=JSON_CALLBACK"}var S=u("$http");e.paramSerializer=x(e.paramSerializer)?p.get(e.paramSerializer):e.paramSerializer;var A=[];return n(i,function(e){A.unshift(x(e)?p.get(e):p.invoke(e))}),v.pendingRequests=[],g("get","delete","head","jsonp"),w("post","put","patch"),v.defaults=e,v}]}function Mt(){this.$get=function(){return function(){return new e.XMLHttpRequest}}}function qt(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(e,t,r,n){return Ut(e,n,e.defer,t,r[0])}]}function Ut(e,t,r,i,o){function a(e,t,r){e=e.replace("JSON_CALLBACK",t);var n=o.createElement("script"),a=null;return n.type="text/javascript",n.src=e,n.async=!0,a=function(e){n.removeEventListener("load",a),n.removeEventListener("error",a),o.body.removeChild(n),n=null;var s=-1,u="unknown";e&&("load"!==e.type||i.wasCalled(t)||(e={type:"error"}),u=e.type,s="error"===e.type?404:200),r&&r(s,u)},n.addEventListener("load",a),n.addEventListener("error",a),o.body.appendChild(n),a}return function(o,s,u,l,c,f,p,h,d,v){function g(){x&&x(),$&&$.abort()}function b(e,t,n,i,o){m(E)&&r.cancel(E),x=$=null,e(t,n,i,o)}if(s=s||e.url(),"jsonp"===Vn(o))var w=i.createCallback(s),x=a(s,w,function(e,t){var r=200===e&&i.getResponse(w);b(l,e,r,"",t),i.removeCallback(w)});else{var $=t(o,s);$.open(o,s,!0),n(c,function(e,t){m(e)&&$.setRequestHeader(t,e)}),$.onload=function(){var e=$.statusText||"",t="response"in $?$.response:$.responseText,r=1223===$.status?204:$.status;0===r&&(r=t?200:"file"===Or(s).protocol?404:0),b(l,r,t,$.getAllResponseHeaders(),e)};var k=function(){b(l,-1,null,null,"")};if($.onerror=k,$.onabort=k,$.ontimeout=k,n(d,function(e,t){$.addEventListener(t,e)}),n(v,function(e,t){$.upload.addEventListener(t,e)}),p&&($.withCredentials=!0),h)try{$.responseType=h}catch(e){if("json"!==h)throw e}$.send(y(u)?null:u)}if(f>0)var E=r(g,f);else N(f)&&f.then(g)}}function Bt(){var e="{{",t="}}";this.startSymbol=function(t){return t?(e=t,this):e},this.endSymbol=function(e){return e?(t=e,this):t},this.$get=["$parse","$exceptionHandler","$sce",function(r,n,i){function o(e){return"\\\\\\"+e}function a(r){return r.replace(p,e).replace(h,t)}function s(e,t,r,n){var i=e.$watch(function(e){return i(),n(e)},t,r);return i}function u(o,u,p,h){function d(e){try{return e=F(e),h&&!m(e)?e:ye(e)}catch(e){n(xo.interr(o,e))}}if(!o.length||o.indexOf(e)===-1){var g;if(!u){var b=a(o);g=v(b),g.exp=o,g.expressions=[],g.$$watchDelegate=s}return g}h=!!h;for(var w,x,$,k=0,_=[],S=[],A=o.length,C=[],I=[];k<A;){if((w=o.indexOf(e,k))===-1||(x=o.indexOf(t,w+c))===-1){k!==A&&C.push(a(o.substring(k)));break}k!==w&&C.push(a(o.substring(k,w))),$=o.substring(w+c,x),_.push($),S.push(r($,d)),k=x+f,I.push(C.length),C.push("")}if(p&&C.length>1&&xo.throwNoconcat(o),!u||_.length){var T=function(e){for(var t=0,r=_.length;t<r;t++){if(h&&y(e[t]))return;C[I[t]]=e[t]}return C.join("")},F=function(e){return p?i.getTrusted(p,e):i.valueOf(e)};return l(function(e){var t=0,r=_.length,i=new Array(r);try{for(;t<r;t++)i[t]=S[t](e);return T(i)}catch(e){n(xo.interr(o,e))}},{exp:o,expressions:_,$$watchDelegate:function(e,t){var r;return e.$watchGroup(S,function(n,i){var o=T(n);E(t)&&t.call(this,o,n!==i?r:o,e),r=o})}})}}var c=e.length,f=t.length,p=new RegExp(e.replace(/./g,o),"g"),h=new RegExp(t.replace(/./g,o),"g");return u.startSymbol=function(){return e},u.endSymbol=function(){return t},u}]}function Gt(){this.$get=["$rootScope","$window","$q","$$q","$browser",function(e,t,r,n,i){function o(o,s,u,l){function c(){f?o.apply(null,p):o(v)}var f=arguments.length>4,p=f?B(arguments,4):[],h=t.setInterval,d=t.clearInterval,v=0,g=m(l)&&!l,y=(g?n:r).defer(),b=y.promise;return u=m(u)?u:0,b.$$intervalId=h(function(){g?i.defer(c):e.$evalAsync(c),y.notify(v++),u>0&&v>=u&&(y.resolve(v),d(b.$$intervalId),delete a[b.$$intervalId]),g||e.$apply()},s),a[b.$$intervalId]=y,b}var a={};return o.cancel=function(e){return!!(e&&e.$$intervalId in a)&&(a[e.$$intervalId].promise.catch(h),a[e.$$intervalId].reject("canceled"),t.clearInterval(e.$$intervalId),delete a[e.$$intervalId],!0)},o}]}function Ht(e){for(var t=e.split("/"),r=t.length;r--;)t[r]=te(t[r]);return t.join("/")}function Vt(e,t){var r=Or(e);t.$$protocol=r.protocol,t.$$host=r.hostname,t.$$port=f(r.port)||Eo[r.protocol]||null}function zt(e,t){if(So.test(e))throw _o("badpath",'Invalid url "{0}".',e);var r="/"!==e.charAt(0);r&&(e="/"+e);var n=Or(e);t.$$path=decodeURIComponent(r&&"/"===n.pathname.charAt(0)?n.pathname.substring(1):n.pathname),t.$$search=Z(n.search),t.$$hash=decodeURIComponent(n.hash),t.$$path&&"/"!==t.$$path.charAt(0)&&(t.$$path="/"+t.$$path)}function Wt(e,t){return e.slice(0,t.length)===t}function Xt(e,t){if(Wt(t,e))return t.substr(e.length)}function Jt(e){var t=e.indexOf("#");return t===-1?e:e.substr(0,t)}function Kt(e){return e.replace(/(#.+)|#$/,"$1")}function Yt(e){return e.substr(0,Jt(e).lastIndexOf("/")+1)}function Zt(e){return e.substring(0,e.indexOf("/",e.indexOf("//")+2))}function er(e,t,r){this.$$html5=!0,r=r||"",Vt(e,this),this.$$parse=function(e){var r=Xt(t,e);if(!x(r))throw _o("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',e,t);zt(r,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var e=ee(this.$$search),r=this.$$hash?"#"+te(this.$$hash):"";this.$$url=Ht(this.$$path)+(e?"?"+e:"")+r,this.$$absUrl=t+this.$$url.substr(1),this.$$urlUpdatedByLocation=!0},this.$$parseLinkUrl=function(n,i){if(i&&"#"===i[0])return this.hash(i.slice(1)),!0;var o,a,s;return m(o=Xt(e,n))?(a=o,s=r&&m(o=Xt(r,o))?t+(Xt("/",o)||o):e+a):m(o=Xt(t,n))?s=t+o:t===n+"/"&&(s=t),s&&this.$$parse(s),!!s}}function tr(e,t,r){Vt(e,this),this.$$parse=function(n){function i(e,t,r){var n,i=/^\/[A-Z]:(\/.*)/;return Wt(t,r)&&(t=t.replace(r,"")),i.exec(t)?e:(n=i.exec(e),n?n[1]:e)}var o,a=Xt(e,n)||Xt(t,n);y(a)||"#"!==a.charAt(0)?this.$$html5?o=a:(o="",y(a)&&(e=n,this.replace())):(o=Xt(r,a),y(o)&&(o=a)),zt(o,this),this.$$path=i(this.$$path,o,e),this.$$compose()},this.$$compose=function(){var t=ee(this.$$search),n=this.$$hash?"#"+te(this.$$hash):"";this.$$url=Ht(this.$$path)+(t?"?"+t:"")+n,this.$$absUrl=e+(this.$$url?r+this.$$url:""),this.$$urlUpdatedByLocation=!0},this.$$parseLinkUrl=function(t,r){return Jt(e)===Jt(t)&&(this.$$parse(t),!0)}}function rr(e,t,r){this.$$html5=!0,tr.apply(this,arguments),this.$$parseLinkUrl=function(n,i){if(i&&"#"===i[0])return this.hash(i.slice(1)),!0;var o,a;return e===Jt(n)?o=n:(a=Xt(t,n))?o=e+r+a:t===n+"/"&&(o=t),o&&this.$$parse(o),!!o},this.$$compose=function(){var t=ee(this.$$search),n=this.$$hash?"#"+te(this.$$hash):"";this.$$url=Ht(this.$$path)+(t?"?"+t:"")+n,this.$$absUrl=e+r+this.$$url,this.$$urlUpdatedByLocation=!0}}function nr(e){return function(){return this[e]}}function ir(e,t){return function(r){return y(r)?this[e]:(this[e]=t(r),this.$$compose(),this)}}function or(){var e="!",t={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(t){return m(t)?(e=t,this):e},this.html5Mode=function(e){return F(e)?(t.enabled=e,this):b(e)?(F(e.enabled)&&(t.enabled=e.enabled),F(e.requireBase)&&(t.requireBase=e.requireBase),(F(e.rewriteLinks)||x(e.rewriteLinks))&&(t.rewriteLinks=e.rewriteLinks),this):t},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(r,n,i,o,a){function s(e,t,r){var i=l.url(),o=l.$$state;try{n.url(e,t,r),l.$$state=n.state()}catch(e){throw l.url(i),l.$$state=o,e}}function u(e,t){r.$broadcast("$locationChangeSuccess",l.absUrl(),e,l.$$state,t)}var l,c,f,p=n.baseHref(),h=n.url();if(t.enabled){if(!p&&t.requireBase)throw _o("nobase","$location in HTML5 mode requires a <base> tag to be present!");f=Zt(h)+(p||"/"),c=i.history?er:rr}else f=Jt(h),c=tr;var d=Yt(f);l=new c(f,d,"#"+e),l.$$parseLinkUrl(h,h),l.$$state=n.state();var v=/^\s*(javascript|mailto):/i;o.on("click",function(e){var i=t.rewriteLinks;if(i&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&2!==e.which&&2!==e.button){for(var s=Kn(e.target);"a"!==P(s[0]);)if(s[0]===o[0]||!(s=s.parent())[0])return;if(!x(i)||!y(s.attr(i))){var u=s.prop("href"),c=s.attr("href")||s.attr("xlink:href");b(u)&&"[object SVGAnimatedString]"===u.toString()&&(u=Or(u.animVal).href),v.test(u)||!u||s.attr("target")||e.isDefaultPrevented()||l.$$parseLinkUrl(u,c)&&(e.preventDefault(),l.absUrl()!==n.url()&&(r.$apply(),a.angular["ff-684208-preventDefault"]=!0))}}}),Kt(l.absUrl())!==Kt(h)&&n.url(l.absUrl(),!0);var g=!0;return n.onUrlChange(function(e,t){return Wt(e,d)?(r.$evalAsync(function(){var n,i=l.absUrl(),o=l.$$state;e=Kt(e),l.$$parse(e),l.$$state=t,n=r.$broadcast("$locationChangeStart",e,i,t,o).defaultPrevented,l.absUrl()===e&&(n?(l.$$parse(i),l.$$state=o,s(i,!1,o)):(g=!1,u(i,o)))}),void(r.$$phase||r.$digest())):void(a.location.href=e)}),r.$watch(function(){if(g||l.$$urlUpdatedByLocation){l.$$urlUpdatedByLocation=!1;var e=Kt(n.url()),t=Kt(l.absUrl()),o=n.state(),a=l.$$replace,c=e!==t||l.$$html5&&i.history&&o!==l.$$state;(g||c)&&(g=!1,r.$evalAsync(function(){var t=l.absUrl(),n=r.$broadcast("$locationChangeStart",t,e,l.$$state,o).defaultPrevented;l.absUrl()===t&&(n?(l.$$parse(e),l.$$state=o):(c&&s(t,a,o===l.$$state?null:l.$$state),u(e,o)))}))}l.$$replace=!1}),l}]}function ar(){var e=!0,t=this;this.debugEnabled=function(t){return m(t)?(e=t,this):e},this.$get=["$window",function(r){function i(e){return e instanceof Error&&(e.stack?e=e.message&&e.stack.indexOf(e.message)===-1?"Error: "+e.message+"\n"+e.stack:e.stack:e.sourceURL&&(e=e.message+"\n"+e.sourceURL+":"+e.line)),e}function o(e){var t=r.console||{},o=t[e]||t.log||h,a=!1;try{a=!!o.apply}catch(e){}return a?function(){var e=[];return n(arguments,function(t){e.push(i(t))}),o.apply(t,e)}:function(e,t){
o(e,null==t?"":t)}}return{log:o("log"),info:o("info"),warn:o("warn"),error:o("error"),debug:function(){var r=o("debug");return function(){e&&r.apply(t,arguments)}}()}}]}function sr(e){return e+""}function ur(e,t){return"undefined"!=typeof e?e:t}function lr(e,t){return"undefined"==typeof e?t:"undefined"==typeof t?e:e+t}function cr(e,t){var r=e(t);return!r.$stateful}function fr(e,t){var r,i,o;switch(e.type){case jo.Program:r=!0,n(e.body,function(e){fr(e.expression,t),r=r&&e.expression.constant}),e.constant=r;break;case jo.Literal:e.constant=!0,e.toWatch=[];break;case jo.UnaryExpression:fr(e.argument,t),e.constant=e.argument.constant,e.toWatch=e.argument.toWatch;break;case jo.BinaryExpression:fr(e.left,t),fr(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.left.toWatch.concat(e.right.toWatch);break;case jo.LogicalExpression:fr(e.left,t),fr(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.constant?[]:[e];break;case jo.ConditionalExpression:fr(e.test,t),fr(e.alternate,t),fr(e.consequent,t),e.constant=e.test.constant&&e.alternate.constant&&e.consequent.constant,e.toWatch=e.constant?[]:[e];break;case jo.Identifier:e.constant=!1,e.toWatch=[e];break;case jo.MemberExpression:fr(e.object,t),e.computed&&fr(e.property,t),e.constant=e.object.constant&&(!e.computed||e.property.constant),e.toWatch=[e];break;case jo.CallExpression:o=!!e.filter&&cr(t,e.callee.name),r=o,i=[],n(e.arguments,function(e){fr(e,t),r=r&&e.constant,e.constant||i.push.apply(i,e.toWatch)}),e.constant=r,e.toWatch=o?i:[e];break;case jo.AssignmentExpression:fr(e.left,t),fr(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=[e];break;case jo.ArrayExpression:r=!0,i=[],n(e.elements,function(e){fr(e,t),r=r&&e.constant,e.constant||i.push.apply(i,e.toWatch)}),e.constant=r,e.toWatch=i;break;case jo.ObjectExpression:r=!0,i=[],n(e.properties,function(e){fr(e.value,t),r=r&&e.value.constant&&!e.computed,e.value.constant||i.push.apply(i,e.value.toWatch),e.computed&&(fr(e.key,t),e.key.constant||i.push.apply(i,e.key.toWatch))}),e.constant=r,e.toWatch=i;break;case jo.ThisExpression:e.constant=!1,e.toWatch=[];break;case jo.LocalsExpression:e.constant=!1,e.toWatch=[]}}function pr(e){if(1===e.length){var t=e[0].expression,r=t.toWatch;return 1!==r.length?r:r[0]!==t?r:void 0}}function hr(e){return e.type===jo.Identifier||e.type===jo.MemberExpression}function dr(e){if(1===e.body.length&&hr(e.body[0].expression))return{type:jo.AssignmentExpression,left:e.body[0].expression,right:{type:jo.NGValueParameter},operator:"="}}function vr(e){return 0===e.body.length||1===e.body.length&&(e.body[0].expression.type===jo.Literal||e.body[0].expression.type===jo.ArrayExpression||e.body[0].expression.type===jo.ObjectExpression)}function gr(e){return e.constant}function yr(e,t){this.astBuilder=e,this.$filter=t}function mr(e,t){this.astBuilder=e,this.$filter=t}function br(e){return E(e.valueOf)?e.valueOf():Io.call(e)}function wr(){var e,t,r=ge(),i={true:!0,false:!1,null:null,undefined:void 0};this.addLiteral=function(e,t){i[e]=t},this.setIdentifierFns=function(r,n){return e=r,t=n,this},this.$get=["$filter",function(o){function a(e,t){var n,i,a;switch(typeof e){case"string":if(e=e.trim(),a=e,n=r[a],!n){":"===e.charAt(0)&&":"===e.charAt(1)&&(i=!0,e=e.substring(2));var s=new No(v),d=new Ro(s,o,v);n=d.parse(e),n.constant?n.$$watchDelegate=f:i?n.$$watchDelegate=n.literal?c:l:n.inputs&&(n.$$watchDelegate=u),r[a]=n}return p(n,t);case"function":return p(e,t);default:return p(h,t)}}function s(e,t,r){return null==e||null==t?e===t:!("object"==typeof e&&!r&&(e=br(e),"object"==typeof e))&&(e===t||e!==e&&t!==t)}function u(e,t,r,n,i){var o,a=n.inputs;if(1===a.length){var u=s;return a=a[0],e.$watch(function(e){var t=a(e);return s(t,u,n.literal)||(o=n(e,void 0,void 0,[t]),u=t&&br(t)),o},t,r,i)}for(var l=[],c=[],f=0,p=a.length;f<p;f++)l[f]=s,c[f]=null;return e.$watch(function(e){for(var t=!1,r=0,i=a.length;r<i;r++){var u=a[r](e);(t||(t=!s(u,l[r],n.literal)))&&(c[r]=u,l[r]=u&&br(u))}return t&&(o=n(e,void 0,void 0,c)),o},t,r,i)}function l(e,t,r,n,i){function o(e){return n(e)}function a(e,r,n){l=e,E(t)&&t(e,r,n),m(e)&&n.$$postDigest(function(){m(l)&&s()})}var s,l;return s=n.inputs?u(e,a,r,n,i):e.$watch(o,a,r)}function c(e,t,r,i){function o(e){var t=!0;return n(e,function(e){m(e)||(t=!1)}),t}var a,s;return a=e.$watch(function(e){return i(e)},function(e,r,n){s=e,E(t)&&t(e,r,n),o(e)&&n.$$postDigest(function(){o(s)&&a()})},r)}function f(e,t,r,n){var i=e.$watch(function(e){return i(),n(e)},t,r);return i}function p(e,t){if(!t)return e;var r=e.$$watchDelegate,n=!1,i=r!==c&&r!==l,o=i?function(r,i,o,a){var s=n&&a?a[0]:e(r,i,o,a);return t(s,r,i)}:function(r,n,i,o){var a=e(r,n,i,o),s=t(a,r,n);return m(a)?s:a};return n=!e.inputs,e.$$watchDelegate&&e.$$watchDelegate!==u?(o.$$watchDelegate=e.$$watchDelegate,o.inputs=e.inputs):t.$stateful||(o.$$watchDelegate=u,o.inputs=e.inputs?e.inputs:[e]),o}var d=hi().noUnsafeEval,v={csp:d,literals:M(i),isIdentifierStart:E(e)&&e,isIdentifierContinue:E(t)&&t};return a}]}function xr(){var e=!0;this.$get=["$rootScope","$exceptionHandler",function(t,r){return kr(function(e){t.$evalAsync(e)},r,e)}],this.errorOnUnhandledRejections=function(t){return m(t)?(e=t,this):e}}function $r(){var e=!0;this.$get=["$browser","$exceptionHandler",function(t,r){return kr(function(e){t.defer(e)},r,e)}],this.errorOnUnhandledRejections=function(t){return m(t)?(e=t,this):e}}function kr(e,r,i){function o(){return new a}function a(){var e=this.promise=new s;this.resolve=function(t){p(e,t)},this.reject=function(t){d(e,t)},this.notify=function(t){g(e,t)}}function s(){this.$$state={status:0}}function u(t){var r,n,o;o=t.pending,t.processScheduled=!1,t.pending=void 0;try{for(var a=0,s=o.length;a<s;++a){t.pur=!0,n=o[a][0],r=o[a][t.status];try{E(r)?p(n,r(t.value)):1===t.status?p(n,t.value):d(n,t.value)}catch(e){d(n,e)}}}finally{--A,i&&0===A&&e(c)}}function c(){for(;!A&&C.length;){var e=C.shift();if(!e.pur){e.pur=!0;var t="Possibly unhandled rejection: "+xe(e.value);e.value instanceof Error?r(e.value,t):r(t)}}}function f(t){!i||t.pending||2!==t.status||t.pur||(0===A&&0===C.length&&e(c),C.push(t)),!t.processScheduled&&t.pending&&(t.processScheduled=!0,++A,e(function(){u(t)}))}function p(e,t){e.$$state.status||(t===e?v(e,S("qcycle","Expected promise to be resolved with value other than itself '{0}'",t)):h(e,t))}function h(e,t){function r(t){a||(a=!0,h(e,t))}function n(t){a||(a=!0,v(e,t))}function i(t){g(e,t)}var o,a=!1;try{(b(t)||E(t))&&(o=t.then),E(o)?(e.$$state.status=-1,o.call(t,r,n,i)):(e.$$state.value=t,e.$$state.status=1,f(e.$$state))}catch(e){n(e)}}function d(e,t){e.$$state.status||v(e,t)}function v(e,t){e.$$state.value=t,e.$$state.status=2,f(e.$$state)}function g(t,n){var i=t.$$state.pending;t.$$state.status<=0&&i&&i.length&&e(function(){for(var e,t,o=0,a=i.length;o<a;o++){t=i[o][0],e=i[o][3];try{g(t,E(e)?e(n):n)}catch(e){r(e)}}})}function m(e){var t=new s;return d(t,e),t}function w(e,t,r){var n=null;try{E(r)&&(n=r())}catch(e){return m(e)}return N(n)?n.then(function(){return t(e)},m):t(e)}function x(e,t,r,n){var i=new s;return p(i,e),i.then(t,r,n)}function $(e){var t=new s,r=0,i=li(e)?[]:{};return n(e,function(e,n){r++,x(e).then(function(e){i[n]=e,--r||p(t,i)},function(e){d(t,e)})}),0===r&&p(t,i),t}function k(e){var t=o();return n(e,function(e){x(e).then(t.resolve,t.reject)}),t.promise}function _(e){function t(e){p(n,e)}function r(e){d(n,e)}if(!E(e))throw S("norslvr","Expected resolverFn, got '{0}'",e);var n=new s;return e(t,r),n}var S=t("$q",TypeError),A=0,C=[];l(s.prototype,{then:function(e,t,r){if(y(e)&&y(t)&&y(r))return this;var n=new s;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([n,e,t,r]),this.$$state.status>0&&f(this.$$state),n},catch:function(e){return this.then(null,e)},finally:function(e,t){return this.then(function(t){return w(t,I,e)},function(t){return w(t,m,e)},t)}});var I=x;return _.prototype=s.prototype,_.defer=o,_.reject=m,_.when=x,_.resolve=I,_.all=$,_.race=k,_}function Er(){this.$get=["$window","$timeout",function(e,t){var r=e.requestAnimationFrame||e.webkitRequestAnimationFrame,n=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.webkitCancelRequestAnimationFrame,i=!!r,o=i?function(e){var t=r(e);return function(){n(t)}}:function(e){var r=t(e,16.66,!1);return function(){t.cancel(r)}};return o.supported=i,o}]}function _r(){function e(e){function t(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=a(),this.$$ChildScope=null}return t.prototype=e,t}var i=10,o=t("$rootScope"),s=null,u=null;this.digestTtl=function(e){return arguments.length&&(i=e),i},this.$get=["$exceptionHandler","$parse","$browser",function(t,l,c){function f(e){e.currentScope.$$destroyed=!0}function p(e){9===Jn&&(e.$$childHead&&p(e.$$childHead),e.$$nextSibling&&p(e.$$nextSibling)),e.$parent=e.$$nextSibling=e.$$prevSibling=e.$$childHead=e.$$childTail=e.$root=e.$$watchers=null}function d(){this.$id=a(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}function v(e){if(_.$$phase)throw o("inprog","{0} already in progress",_.$$phase);_.$$phase=e}function g(){_.$$phase=null}function m(e,t){do e.$$watchersCount+=t;while(e=e.$parent)}function w(e,t,r){do e.$$listenerCount[r]-=t,0===e.$$listenerCount[r]&&delete e.$$listenerCount[r];while(e=e.$parent)}function x(){}function $(){for(;C.length;)try{C.shift()()}catch(e){t(e)}u=null}function k(){null===u&&(u=c.defer(function(){_.$apply($)}))}d.prototype={constructor:d,$new:function(t,r){var n;return r=r||this,t?(n=new d,n.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=e(this)),n=new this.$$ChildScope),n.$parent=r,n.$$prevSibling=r.$$childTail,r.$$childHead?(r.$$childTail.$$nextSibling=n,r.$$childTail=n):r.$$childHead=r.$$childTail=n,(t||r!==this)&&n.$on("$destroy",f),n},$watch:function(e,t,r,n){var i=l(e);if(i.$$watchDelegate)return i.$$watchDelegate(this,t,r,i,e);var o=this,a=o.$$watchers,u={fn:t,last:x,get:i,exp:n||e,eq:!!r};return s=null,E(t)||(u.fn=h),a||(a=o.$$watchers=[],a.$$digestWatchIndex=-1),a.unshift(u),a.$$digestWatchIndex++,m(this,1),function(){var e=D(a,u);e>=0&&(m(o,-1),e<a.$$digestWatchIndex&&a.$$digestWatchIndex--),s=null}},$watchGroup:function(e,t){function r(){u=!1,l?(l=!1,t(o,o,s)):t(o,i,s)}var i=new Array(e.length),o=new Array(e.length),a=[],s=this,u=!1,l=!0;if(!e.length){var c=!0;return s.$evalAsync(function(){c&&t(o,o,s)}),function(){c=!1}}return 1===e.length?this.$watch(e[0],function(e,r,n){o[0]=e,i[0]=r,t(o,e===r?o:i,n)}):(n(e,function(e,t){var n=s.$watch(e,function(e,n){o[t]=e,i[t]=n,u||(u=!0,s.$evalAsync(r))});a.push(n)}),function(){for(;a.length;)a.shift()()})},$watchCollection:function(e,t){function n(e){o=e;var t,n,i,s,u;if(!y(o)){if(b(o))if(r(o)){a!==h&&(a=h,g=a.length=0,f++),t=o.length,g!==t&&(f++,a.length=g=t);for(var l=0;l<t;l++)u=a[l],s=o[l],i=u!==u&&s!==s,i||u===s||(f++,a[l]=s)}else{a!==d&&(a=d={},g=0,f++),t=0;for(n in o)Hn.call(o,n)&&(t++,s=o[n],u=a[n],n in a?(i=u!==u&&s!==s,i||u===s||(f++,a[n]=s)):(g++,a[n]=s,f++));if(g>t){f++;for(n in a)Hn.call(o,n)||(g--,delete a[n])}}else a!==o&&(a=o,f++);return f}}function i(){if(v?(v=!1,t(o,o,u)):t(o,s,u),c)if(b(o))if(r(o)){s=new Array(o.length);for(var e=0;e<o.length;e++)s[e]=o[e]}else{s={};for(var n in o)Hn.call(o,n)&&(s[n]=o[n])}else s=o}n.$stateful=!0;var o,a,s,u=this,c=t.length>1,f=0,p=l(e,n),h=[],d={},v=!0,g=0;return this.$watch(p,i)},$digest:function(){var e,r,n,a,l,f,p,h,d,y,m,b=i,w=this,k=[];v("$digest"),c.$$checkUrlChange(),this===_&&null!==u&&(c.defer.cancel(u),$()),s=null;do{p=!1,d=w;for(var C=0;C<S.length;C++){try{m=S[C],m.scope.$eval(m.expression,m.locals)}catch(e){t(e)}s=null}S.length=0;e:do{if(f=d.$$watchers)for(f.$$digestWatchIndex=f.length;f.$$digestWatchIndex--;)try{if(e=f[f.$$digestWatchIndex])if(l=e.get,(r=l(d))===(n=e.last)||(e.eq?q(r,n):ui(r)&&ui(n))){if(e===s){p=!1;break e}}else p=!0,s=e,e.last=e.eq?M(r,null):r,a=e.fn,a(r,n===x?r:n,d),b<5&&(y=4-b,k[y]||(k[y]=[]),k[y].push({msg:E(e.exp)?"fn: "+(e.exp.name||e.exp.toString()):e.exp,newVal:r,oldVal:n}))}catch(e){t(e)}if(!(h=d.$$watchersCount&&d.$$childHead||d!==w&&d.$$nextSibling))for(;d!==w&&!(h=d.$$nextSibling);)d=d.$parent}while(d=h);if((p||S.length)&&!b--)throw g(),o("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",i,k)}while(p||S.length);for(g();I<A.length;)try{A[I++]()}catch(e){t(e)}A.length=I=0,c.$$checkUrlChange()},$destroy:function(){if(!this.$$destroyed){var e=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this===_&&c.$$applicationDestroyed(),m(this,-this.$$watchersCount);for(var t in this.$$listenerCount)w(this,this.$$listenerCount[t],t);e&&e.$$childHead===this&&(e.$$childHead=this.$$nextSibling),e&&e.$$childTail===this&&(e.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=h,this.$on=this.$watch=this.$watchGroup=function(){return h},this.$$listeners={},this.$$nextSibling=null,p(this)}},$eval:function(e,t){return l(e)(this,t)},$evalAsync:function(e,t){_.$$phase||S.length||c.defer(function(){S.length&&_.$digest()}),S.push({scope:this,expression:l(e),locals:t})},$$postDigest:function(e){A.push(e)},$apply:function(e){try{v("$apply");try{return this.$eval(e)}finally{g()}}catch(e){t(e)}finally{try{_.$digest()}catch(e){throw t(e),e}}},$applyAsync:function(e){function t(){r.$eval(e)}var r=this;e&&C.push(t),e=l(e),k()},$on:function(e,t){var r=this.$$listeners[e];r||(this.$$listeners[e]=r=[]),r.push(t);var n=this;do n.$$listenerCount[e]||(n.$$listenerCount[e]=0),n.$$listenerCount[e]++;while(n=n.$parent);var i=this;return function(){var n=r.indexOf(t);n!==-1&&(r[n]=null,w(i,1,e))}},$emit:function(e,r){var n,i,o,a=[],s=this,u=!1,l={name:e,targetScope:s,stopPropagation:function(){u=!0},preventDefault:function(){l.defaultPrevented=!0},defaultPrevented:!1},c=U([l],arguments,1);do{for(n=s.$$listeners[e]||a,l.currentScope=s,i=0,o=n.length;i<o;i++)if(n[i])try{n[i].apply(null,c)}catch(e){t(e)}else n.splice(i,1),i--,o--;if(u)return l.currentScope=null,l;s=s.$parent}while(s);return l.currentScope=null,l},$broadcast:function(e,r){var n=this,i=n,o=n,a={name:e,targetScope:n,preventDefault:function(){a.defaultPrevented=!0},defaultPrevented:!1};if(!n.$$listenerCount[e])return a;for(var s,u,l,c=U([a],arguments,1);i=o;){for(a.currentScope=i,s=i.$$listeners[e]||[],u=0,l=s.length;u<l;u++)if(s[u])try{s[u].apply(null,c)}catch(e){t(e)}else s.splice(u,1),u--,l--;if(!(o=i.$$listenerCount[e]&&i.$$childHead||i!==n&&i.$$nextSibling))for(;i!==n&&!(o=i.$$nextSibling);)i=i.$parent}return a.currentScope=null,a}};var _=new d,S=_.$$asyncQueue=[],A=_.$$postDigestQueue=[],C=_.$$applyAsyncQueue=[],I=0;return _}]}function Sr(){var e=/^\s*(https?|ftp|mailto|tel|file):/,t=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(t){return m(t)?(e=t,this):e},this.imgSrcSanitizationWhitelist=function(e){return m(e)?(t=e,this):t},this.$get=function(){return function(r,n){var i,o=n?t:e;return i=Or(r).href,""===i||i.match(o)?r:"unsafe:"+i}}}function Ar(e){return e.replace(Po,_e)}function Cr(e){if("self"===e)return e;if(x(e)){if(e.indexOf("***")>-1)throw Lo("iwcard","Illegal sequence *** in string matcher.  String: {0}",e);return e=pi(e).replace(/\\\*\\\*/g,".*").replace(/\\\*/g,"[^:/.?&;]*"),new RegExp("^"+e+"$")}if(_(e))return new RegExp("^"+e.source+"$");throw Lo("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function Ir(e){var t=[];return m(e)&&n(e,function(e){t.push(Cr(e))}),t}function Tr(){this.SCE_CONTEXTS=Oo;var e=["self"],t=[];this.resourceUrlWhitelist=function(t){return arguments.length&&(e=Ir(t)),e},this.resourceUrlBlacklist=function(e){return arguments.length&&(t=Ir(e)),t},this.$get=["$injector",function(r){function n(e,t){return"self"===e?Pr(t):!!e.exec(t.href)}function i(r){var i,o,a=Or(r.toString()),s=!1;for(i=0,o=e.length;i<o;i++)if(n(e[i],a)){s=!0;break}if(s)for(i=0,o=t.length;i<o;i++)if(n(t[i],a)){s=!1;break}return s}function o(e){var t=function(e){this.$$unwrapTrustedValue=function(){return e}};return e&&(t.prototype=new e),t.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},t.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},t}function a(e,t){var r=f.hasOwnProperty(e)?f[e]:null;if(!r)throw Lo("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",e,t);if(null===t||y(t)||""===t)return t;if("string"!=typeof t)throw Lo("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",e);return new r(t)}function s(e){return e instanceof c?e.$$unwrapTrustedValue():e}function u(e,t){if(null===t||y(t)||""===t)return t;var r=f.hasOwnProperty(e)?f[e]:null;if(r&&t instanceof r)return t.$$unwrapTrustedValue();if(e===Oo.RESOURCE_URL){if(i(t))return t;throw Lo("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",t.toString())}if(e===Oo.HTML)return l(t);throw Lo("unsafe","Attempting to use an unsafe value in a safe context.")}var l=function(e){throw Lo("unsafe","Attempting to use an unsafe value in a safe context.")};r.has("$sanitize")&&(l=r.get("$sanitize"));var c=o(),f={};return f[Oo.HTML]=o(c),f[Oo.CSS]=o(c),f[Oo.URL]=o(c),f[Oo.JS]=o(c),f[Oo.RESOURCE_URL]=o(f[Oo.URL]),{trustAs:a,getTrusted:u,valueOf:s}}]}function Fr(){var e=!0;this.enabled=function(t){return arguments.length&&(e=!!t),e},this.$get=["$parse","$sceDelegate",function(t,r){if(e&&Jn<8)throw Lo("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var i=be(Oo);i.isEnabled=function(){return e},i.trustAs=r.trustAs,i.getTrusted=r.getTrusted,i.valueOf=r.valueOf,e||(i.trustAs=i.getTrusted=function(e,t){return t},i.valueOf=d),i.parseAs=function(e,r){var n=t(r);return n.literal&&n.constant?n:t(r,function(t){return i.getTrusted(e,t)})};var o=i.parseAs,a=i.getTrusted,s=i.trustAs;return n(Oo,function(e,t){var r=Vn(t);i[Ar("parse_as_"+r)]=function(t){return o(e,t)},i[Ar("get_trusted_"+r)]=function(t){return a(e,t)},i[Ar("trust_as_"+r)]=function(t){return s(e,t)}}),i}]}function Nr(){this.$get=["$window","$document",function(e,t){var r={},n=e.nw&&e.nw.process,i=!n&&e.chrome&&(e.chrome.app&&e.chrome.app.runtime||!e.chrome.app&&e.chrome.runtime&&e.chrome.runtime.id),o=!i&&e.history&&e.history.pushState,a=f((/android (\d+)/.exec(Vn((e.navigator||{}).userAgent))||[])[1]),s=/Boxee/i.test((e.navigator||{}).userAgent),u=t[0]||{},l=u.body&&u.body.style,c=!1,p=!1;return l&&(c=!!("transition"in l||"webkitTransition"in l),p=!!("animation"in l||"webkitAnimation"in l)),{history:!(!o||a<4||s),hasEvent:function(e){if("input"===e&&Jn)return!1;if(y(r[e])){var t=u.createElement("div");r[e]="on"+e in t}return r[e]},csp:hi(),transitions:c,animations:p,android:a}}]}function jr(){var e;this.httpOptions=function(t){return t?(e=t,this):e},this.$get=["$exceptionHandler","$templateCache","$http","$q","$sce",function(t,r,n,i,o){function a(s,u){function c(e){return u||(e=Qo("tpload","Failed to load template: {0} (HTTP status: {1} {2})",s,e.status,e.statusText),t(e)),i.reject(e)}a.totalPendingRequests++,x(s)&&!y(r.get(s))||(s=o.getTrustedResourceUrl(s));var f=n.defaults&&n.defaults.transformResponse;return li(f)?f=f.filter(function(e){return e!==jt}):f===jt&&(f=null),n.get(s,l({cache:r,transformResponse:f},e)).finally(function(){a.totalPendingRequests--}).then(function(e){return r.put(s,e.data),e.data},c)}return a.totalPendingRequests=0,a}]}function Rr(){this.$get=["$rootScope","$browser","$location",function(e,t,r){var i={};return i.findBindings=function(e,t,r){var i=e.getElementsByClassName("ng-binding"),o=[];return n(i,function(e){var i=ai.element(e).data("$binding");i&&n(i,function(n){if(r){var i=new RegExp("(^|\\s)"+pi(t)+"(\\s|\\||$)");i.test(n)&&o.push(e)}else n.indexOf(t)!==-1&&o.push(e)})}),o},i.findModels=function(e,t,r){for(var n=["ng-","data-ng-","ng\\:"],i=0;i<n.length;++i){var o=r?"=":"*=",a="["+n[i]+"model"+o+'"'+t+'"]',s=e.querySelectorAll(a);if(s.length)return s}},i.getLocation=function(){return r.url()},i.setLocation=function(t){t!==r.url()&&(r.url(t),e.$digest())},i.whenStable=function(e){t.notifyWhenNoOutstandingRequests(e)},i}]}function Lr(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(e,t,r,n,i){function o(o,s,u){E(o)||(u=s,s=o,o=h);var l,c=B(arguments,3),f=m(u)&&!u,p=(f?n:r).defer(),d=p.promise;return l=t.defer(function(){try{p.resolve(o.apply(null,c))}catch(e){p.reject(e),i(e)}finally{delete a[d.$$timeoutId]}f||e.$apply()},s),d.$$timeoutId=l,a[l]=p,d}var a={};return o.cancel=function(e){return!!(e&&e.$$timeoutId in a)&&(a[e.$$timeoutId].promise.catch(h),a[e.$$timeoutId].reject("canceled"),delete a[e.$$timeoutId],t.defer.cancel(e.$$timeoutId))},o}]}function Or(e){var t=e;return Jn&&(Do.setAttribute("href",t),t=Do.href),Do.setAttribute("href",t),{href:Do.href,protocol:Do.protocol?Do.protocol.replace(/:$/,""):"",host:Do.host,search:Do.search?Do.search.replace(/^\?/,""):"",hash:Do.hash?Do.hash.replace(/^#/,""):"",hostname:Do.hostname,port:Do.port,pathname:"/"===Do.pathname.charAt(0)?Do.pathname:"/"+Do.pathname}}function Pr(e){var t=x(e)?Or(e):e;return t.protocol===Mo.protocol&&t.host===Mo.host}function Qr(){this.$get=v(e)}function Dr(e){function t(e){try{return e.cookie||""}catch(e){return""}}function r(e){try{return decodeURIComponent(e)}catch(t){return e}}var n=e[0]||{},i={},o="";return function(){var e,a,s,u,l,c=t(n);if(c!==o)for(o=c,e=o.split("; "),i={},s=0;s<e.length;s++)a=e[s],u=a.indexOf("="),u>0&&(l=r(a.substring(0,u)),y(i[l])&&(i[l]=r(a.substring(u+1))));return i}}function Mr(){this.$get=Dr}function qr(e){function t(i,o){if(b(i)){var a={};return n(i,function(e,r){a[r]=t(r,e)}),a}return e.factory(i+r,o)}var r="Filter";this.register=t,this.$get=["$injector",function(e){return function(t){return e.get(t+r)}}],t("currency",Vr),t("date",un),t("filter",Ur),t("json",ln),t("limitTo",cn),t("lowercase",zo),t("number",zr),t("orderBy",pn),t("uppercase",Wo)}function Ur(){return function(e,n,i,o){if(!r(e)){if(null==e)return e;throw t("filter")("notarray","Expected array but received: {0}",e)}o=o||"$";var a,s,u=Hr(n);switch(u){case"function":a=n;break;case"boolean":case"null":case"number":case"string":s=!0;case"object":a=Br(n,i,o,s);break;default:return e}return Array.prototype.filter.call(e,a)}}function Br(e,t,r,n){var i,o=b(e)&&r in e;return t===!0?t=q:E(t)||(t=function(e,t){return!y(e)&&(null===e||null===t?e===t:!(b(t)||b(e)&&!g(e))&&(e=Vn(""+e),t=Vn(""+t),e.indexOf(t)!==-1))}),i=function(i){return o&&!b(i)?Gr(i,e[r],t,r,!1):Gr(i,e,t,r,n)}}function Gr(e,t,r,n,i,o){var a=Hr(e),s=Hr(t);if("string"===s&&"!"===t.charAt(0))return!Gr(e,t.substring(1),r,n,i);if(li(e))return e.some(function(e){return Gr(e,t,r,n,i)});switch(a){case"object":var u;if(i){for(u in e)if("$"!==u.charAt(0)&&Gr(e[u],t,r,n,!0))return!0;return!o&&Gr(e,t,r,n,!1)}if("object"===s){for(u in t){var l=t[u];if(!E(l)&&!y(l)){var c=u===n,f=c?e:e[u];if(!Gr(f,l,r,n,c,c))return!1}}return!0}return r(e,t);case"function":return!1;default:return r(e,t)}}function Hr(e){return null===e?"null":typeof e}function Vr(e){var t=e.NUMBER_FORMATS;return function(e,r,n){return y(r)&&(r=t.CURRENCY_SYM),y(n)&&(n=t.PATTERNS[1].maxFrac),null==e?e:Jr(e,t.PATTERNS[1],t.GROUP_SEP,t.DECIMAL_SEP,n).replace(/\u00A4/g,r)}}function zr(e){var t=e.NUMBER_FORMATS;return function(e,r){return null==e?e:Jr(e,t.PATTERNS[0],t.GROUP_SEP,t.DECIMAL_SEP,r)}}function Wr(e){var t,r,n,i,o,a=0;for((r=e.indexOf(Uo))>-1&&(e=e.replace(Uo,"")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charAt(n)===Bo;n++);if(n===(o=e.length))t=[0],r=1;else{for(o--;e.charAt(o)===Bo;)o--;for(r-=n,t=[],i=0;n<=o;n++,i++)t[i]=+e.charAt(n)}return r>qo&&(t=t.splice(0,qo-1),a=r-1,r=1),{d:t,e:a,i:r}}function Xr(e,t,r,n){var i=e.d,o=i.length-e.i;t=y(t)?Math.min(Math.max(r,o),n):+t;var a=t+e.i,s=i[a];if(a>0){i.splice(Math.max(e.i,a));for(var u=a;u<i.length;u++)i[u]=0}else{o=Math.max(0,o),e.i=1,i.length=Math.max(1,a=t+1),i[0]=0;for(var l=1;l<a;l++)i[l]=0}if(s>=5)if(a-1<0){for(var c=0;c>a;c--)i.unshift(0),e.i++;i.unshift(1),e.i++}else i[a-1]++;for(;o<Math.max(0,t);o++)i.push(0);var f=i.reduceRight(function(e,t,r,n){return t+=e,n[r]=t%10,Math.floor(t/10)},0);f&&(i.unshift(f),e.i++)}function Jr(e,t,r,n,i){if(!x(e)&&!$(e)||isNaN(e))return"";var o,a=!isFinite(e),s=!1,u=Math.abs(e)+"",l="";if(a)l="";else{o=Wr(u),Xr(o,i,t.minFrac,t.maxFrac);var c=o.d,f=o.i,p=o.e,h=[];for(s=c.reduce(function(e,t){return e&&!t},!0);f<0;)c.unshift(0),f++;f>0?h=c.splice(f,c.length):(h=c,c=[0]);var d=[];for(c.length>=t.lgSize&&d.unshift(c.splice(-t.lgSize,c.length).join(""));c.length>t.gSize;)d.unshift(c.splice(-t.gSize,c.length).join(""));c.length&&d.unshift(c.join("")),l=d.join(r),h.length&&(l+=n+h.join("")),p&&(l+="e+"+p)}return e<0&&!s?t.negPre+l+t.negSuf:t.posPre+l+t.posSuf}function Kr(e,t,r,n){var i="";for((e<0||n&&e<=0)&&(n?e=-e+1:(e=-e,i="-")),e=""+e;e.length<t;)e=Bo+e;return r&&(e=e.substr(e.length-t)),i+e}function Yr(e,t,r,n,i){return r=r||0,function(o){var a=o["get"+e]();return(r>0||a>-r)&&(a+=r),0===a&&r===-12&&(a=12),Kr(a,t,n,i)}}function Zr(e,t,r){return function(n,i){var o=n["get"+e](),a=(r?"STANDALONE":"")+(t?"SHORT":""),s=zn(a+e);return i[s][o]}}function en(e,t,r){var n=-1*r,i=n>=0?"+":"";return i+=Kr(Math[n>0?"floor":"ceil"](n/60),2)+Kr(Math.abs(n%60),2)}function tn(e){var t=new Date(e,0,1).getDay();return new Date(e,0,(t<=4?5:12)-t)}function rn(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+(4-e.getDay()))}function nn(e){return function(t){var r=tn(t.getFullYear()),n=rn(t),i=+n-+r,o=1+Math.round(i/6048e5);return Kr(o,e)}}function on(e,t){return e.getHours()<12?t.AMPMS[0]:t.AMPMS[1]}function an(e,t){return e.getFullYear()<=0?t.ERAS[0]:t.ERAS[1]}function sn(e,t){return e.getFullYear()<=0?t.ERANAMES[0]:t.ERANAMES[1]}function un(e){function t(e){var t;if(t=e.match(r)){var n=new Date(0),i=0,o=0,a=t[8]?n.setUTCFullYear:n.setFullYear,s=t[8]?n.setUTCHours:n.setHours;t[9]&&(i=f(t[9]+t[10]),o=f(t[9]+t[11])),a.call(n,f(t[1]),f(t[2])-1,f(t[3]));var u=f(t[4]||0)-i,l=f(t[5]||0)-o,c=f(t[6]||0),p=Math.round(1e3*parseFloat("0."+(t[7]||0)));return s.call(n,u,l,c,p),n}return e}var r=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(r,i,o){var a,s,u="",l=[];if(i=i||"mediumDate",i=e.DATETIME_FORMATS[i]||i,x(r)&&(r=Vo.test(r)?f(r):t(r)),$(r)&&(r=new Date(r)),!k(r)||!isFinite(r.getTime()))return r;for(;i;)s=Ho.exec(i),s?(l=U(l,s,1),i=l.pop()):(l.push(i),i=null);var c=r.getTimezoneOffset();return o&&(c=W(o,c),r=J(r,o,!0)),n(l,function(t){a=Go[t],u+=a?a(r,e.DATETIME_FORMATS,c):"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}}function ln(){return function(e,t){return y(t)&&(t=2),V(e,t)}}function cn(){return function(e,t,n){return t=Math.abs(Number(t))===1/0?Number(t):f(t),ui(t)?e:($(e)&&(e=e.toString()),r(e)?(n=!n||isNaN(n)?0:f(n),n=n<0?Math.max(0,e.length+n):n,t>=0?fn(e,n,n+t):0===n?fn(e,t,e.length):fn(e,Math.max(0,n+t),n)):e)}}function fn(e,t,r){return x(e)?e.slice(t,r):ei.call(e,t,r)}function pn(e){function n(t){return t.map(function(t){var r=1,n=d;if(E(t))n=t;else if(x(t)&&("+"!==t.charAt(0)&&"-"!==t.charAt(0)||(r="-"===t.charAt(0)?-1:1,t=t.substring(1)),""!==t&&(n=e(t),n.constant))){var i=n();n=function(e){return e[i]}}return{get:n,descending:r}})}function i(e){switch(typeof e){case"number":case"boolean":case"string":return!0;default:return!1}}function o(e){return E(e.valueOf)&&(e=e.valueOf(),i(e))?e:g(e)&&(e=e.toString(),i(e))?e:e}function a(e,t){var r=typeof e;return null===e?(r="string",e="null"):"object"===r&&(e=o(e)),{value:e,type:r,index:t}}function s(e,t){var r=0,n=e.type,i=t.type;if(n===i){var o=e.value,a=t.value;"string"===n?(o=o.toLowerCase(),a=a.toLowerCase()):"object"===n&&(b(o)&&(o=e.index),b(a)&&(a=t.index)),o!==a&&(r=o<a?-1:1)}else r=n<i?-1:1;return r}return function(e,i,o,u){function l(e,t){return{value:e,tieBreaker:{value:t,type:"number",index:t},predicateValues:f.map(function(r){return a(r.get(e),t)})}}function c(e,t){for(var r=0,n=f.length;r<n;r++){var i=h(e.predicateValues[r],t.predicateValues[r]);if(i)return i*f[r].descending*p}return h(e.tieBreaker,t.tieBreaker)*p}if(null==e)return e;if(!r(e))throw t("orderBy")("notarray","Expected array but received: {0}",e);li(i)||(i=[i]),0===i.length&&(i=["+"]);var f=n(i),p=o?-1:1,h=E(u)?u:s,d=Array.prototype.map.call(e,l);return d.sort(c),e=d.map(function(e){return e.value})}}function hn(e){return E(e)&&(e={link:e}),e.restrict=e.restrict||"AC",v(e)}function dn(e,t){e.$name=t}function vn(e,t,r,n,i){this.$$controls=[],this.$error={},this.$$success={},this.$pending=void 0,this.$name=i(t.name||t.ngForm||"")(r),this.$dirty=!1,this.$pristine=!0,this.$valid=!0,this.$invalid=!1,this.$submitted=!1,this.$$parentForm=Ko,this.$$element=e,this.$$animate=n,gn(this)}function gn(e){e.$$classCache={},e.$$classCache[La]=!(e.$$classCache[Ra]=e.$$element.hasClass(Ra))}function yn(e){function t(e,t,r,n){e[t]||(e[t]={}),a(e[t],r,n)}function r(e,t,r,n){e[t]&&s(e[t],r,n),mn(e[t])&&(e[t]=void 0)}function n(e,t,r){r&&!e.$$classCache[t]?(e.$$animate.addClass(e.$$element,t),e.$$classCache[t]=!0):!r&&e.$$classCache[t]&&(e.$$animate.removeClass(e.$$element,t),e.$$classCache[t]=!1)}function i(e,t,r){t=t?"-"+le(t,"-"):"",n(e,Ra+t,r===!0),n(e,La+t,r===!1)}var o=e.clazz,a=e.set,s=e.unset;o.prototype.$setValidity=function(e,o,u){y(o)?t(this,"$pending",e,u):r(this,"$pending",e,u),F(o)?o?(s(this.$error,e,u),a(this.$$success,e,u)):(a(this.$error,e,u),s(this.$$success,e,u)):(s(this.$error,e,u),s(this.$$success,e,u)),this.$pending?(n(this,Yo,!0),this.$valid=this.$invalid=void 0,i(this,"",null)):(n(this,Yo,!1),this.$valid=mn(this.$error),this.$invalid=!this.$valid,i(this,"",this.$valid));var l;l=this.$pending&&this.$pending[e]?void 0:!this.$error[e]&&(!!this.$$success[e]||null),i(this,e,l),this.$$parentForm.$setValidity(e,l,this)}}function mn(e){if(e)for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function bn(e){e.$formatters.push(function(t){return e.$isEmpty(t)?t:t.toString()})}function wn(e,t,r,n,i,o){xn(e,t,r,n,i,o),bn(n)}function xn(e,t,r,n,i,o){var a=Vn(t[0].type);if(!i.android){var s=!1;t.on("compositionstart",function(){s=!0}),t.on("compositionend",function(){s=!1,l()})}var u,l=function(e){if(u&&(o.defer.cancel(u),u=null),!s){var i=t.val(),l=e&&e.type;"password"===a||r.ngTrim&&"false"===r.ngTrim||(i=fi(i)),(n.$viewValue!==i||""===i&&n.$$hasNativeValidators)&&n.$setViewValue(i,l)}};if(i.hasEvent("input"))t.on("input",l);else{var c=function(e,t,r){u||(u=o.defer(function(){u=null,t&&t.value===r||l(e)}))};t.on("keydown",function(e){var t=e.keyCode;91===t||15<t&&t<19||37<=t&&t<=40||c(e,this,this.value)}),i.hasEvent("paste")&&t.on("paste cut",c)}t.on("change",l),ha[a]&&n.$$hasNativeValidators&&a===r.type&&t.on(pa,function(e){if(!u){var t=this[Gn],r=t.badInput,n=t.typeMismatch;u=o.defer(function(){u=null,t.badInput===r&&t.typeMismatch===n||l(e)})}}),n.$render=function(){var e=n.$isEmpty(n.$viewValue)?"":n.$viewValue;t.val()!==e&&t.val(e)}}function $n(e,t){if(k(e))return e;if(x(e)){la.lastIndex=0;var r=la.exec(e);if(r){var n=+r[1],i=+r[2],o=0,a=0,s=0,u=0,l=tn(n),c=7*(i-1);return t&&(o=t.getHours(),a=t.getMinutes(),s=t.getSeconds(),u=t.getMilliseconds()),new Date(n,0,l.getDate()+c,o,a,s,u)}}return NaN}function kn(e,t){return function(r,i){var o,a;if(k(r))return r;if(x(r)){if('"'===r.charAt(0)&&'"'===r.charAt(r.length-1)&&(r=r.substring(1,r.length-1)),
na.test(r))return new Date(r);if(e.lastIndex=0,o=e.exec(r))return o.shift(),a=i?{yyyy:i.getFullYear(),MM:i.getMonth()+1,dd:i.getDate(),HH:i.getHours(),mm:i.getMinutes(),ss:i.getSeconds(),sss:i.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},n(o,function(e,r){r<t.length&&(a[t[r]]=+e)}),new Date(a.yyyy,a.MM-1,a.dd,a.HH,a.mm,a.ss||0,1e3*a.sss||0)}return NaN}}function En(e,t,r,n){return function(i,o,a,s,u,l,c){function f(e){return e&&!(e.getTime&&e.getTime()!==e.getTime())}function p(e){return m(e)&&!k(e)?r(e)||void 0:e}_n(i,o,a,s),xn(i,o,a,s,u,l);var h,d=s&&s.$options.getOption("timezone");if(s.$$parserName=e,s.$parsers.push(function(e){if(s.$isEmpty(e))return null;if(t.test(e)){var n=r(e,h);return d&&(n=J(n,d)),n}}),s.$formatters.push(function(e){if(e&&!k(e))throw Ua("datefmt","Expected `{0}` to be a date",e);return f(e)?(h=e,h&&d&&(h=J(h,d,!0)),c("date")(e,n,d)):(h=null,"")}),m(a.min)||a.ngMin){var v;s.$validators.min=function(e){return!f(e)||y(v)||r(e)>=v},a.$observe("min",function(e){v=p(e),s.$validate()})}if(m(a.max)||a.ngMax){var g;s.$validators.max=function(e){return!f(e)||y(g)||r(e)<=g},a.$observe("max",function(e){g=p(e),s.$validate()})}}}function _n(e,t,r,n){var i=t[0],o=n.$$hasNativeValidators=b(i.validity);o&&n.$parsers.push(function(e){var r=t.prop(Gn)||{};return r.badInput||r.typeMismatch?void 0:e})}function Sn(e){e.$$parserName="number",e.$parsers.push(function(t){return e.$isEmpty(t)?null:aa.test(t)?parseFloat(t):void 0}),e.$formatters.push(function(t){if(!e.$isEmpty(t)){if(!$(t))throw Ua("numfmt","Expected `{0}` to be a number",t);t=t.toString()}return t})}function An(e){return m(e)&&!$(e)&&(e=parseFloat(e)),ui(e)?void 0:e}function Cn(e){return(0|e)===e}function In(e){var t=e.toString(),r=t.indexOf(".");if(r===-1){if(-1<e&&e<1){var n=/e-(\d+)$/.exec(t);if(n)return Number(n[1])}return 0}return t.length-r-1}function Tn(e,t,r){var n=Number(e),i=!Cn(n),o=!Cn(t),a=!Cn(r);if(i||o||a){var s=i?In(n):0,u=o?In(t):0,l=a?In(r):0,c=Math.max(s,u,l),f=Math.pow(10,c);n*=f,t*=f,r*=f,i&&(n=Math.round(n)),o&&(t=Math.round(t)),a&&(r=Math.round(r))}return(n-t)%r===0}function Fn(e,t,r,n,i,o){_n(e,t,r,n),Sn(n),xn(e,t,r,n,i,o);var a,s;if((m(r.min)||r.ngMin)&&(n.$validators.min=function(e){return n.$isEmpty(e)||y(a)||e>=a},r.$observe("min",function(e){a=An(e),n.$validate()})),(m(r.max)||r.ngMax)&&(n.$validators.max=function(e){return n.$isEmpty(e)||y(s)||e<=s},r.$observe("max",function(e){s=An(e),n.$validate()})),m(r.step)||r.ngStep){var u;n.$validators.step=function(e,t){return n.$isEmpty(t)||y(u)||Tn(t,a||0,u)},r.$observe("step",function(e){u=An(e),n.$validate()})}}function Nn(e,t,r,n,i,o){function a(e,n){t.attr(e,r[e]),r.$observe(e,n)}function s(e){if(f=An(e),!ui(n.$modelValue))if(c){var r=t.val();f>r&&(r=f,t.val(r)),n.$setViewValue(r)}else n.$validate()}function u(e){if(p=An(e),!ui(n.$modelValue))if(c){var r=t.val();p<r&&(t.val(p),r=p<f?f:p),n.$setViewValue(r)}else n.$validate()}function l(e){h=An(e),ui(n.$modelValue)||(c&&n.$viewValue!==t.val()?n.$setViewValue(t.val()):n.$validate())}_n(e,t,r,n),Sn(n),xn(e,t,r,n,i,o);var c=n.$$hasNativeValidators&&"range"===t[0].type,f=c?0:void 0,p=c?100:void 0,h=c?1:void 0,d=t[0].validity,v=m(r.min),g=m(r.max),b=m(r.step),w=n.$render;n.$render=c&&m(d.rangeUnderflow)&&m(d.rangeOverflow)?function(){w(),n.$setViewValue(t.val())}:w,v&&(n.$validators.min=c?function(){return!0}:function(e,t){return n.$isEmpty(t)||y(f)||t>=f},a("min",s)),g&&(n.$validators.max=c?function(){return!0}:function(e,t){return n.$isEmpty(t)||y(p)||t<=p},a("max",u)),b&&(n.$validators.step=c?function(){return!d.stepMismatch}:function(e,t){return n.$isEmpty(t)||y(h)||Tn(t,f||0,h)},a("step",l))}function jn(e,t,r,n,i,o){xn(e,t,r,n,i,o),bn(n),n.$$parserName="url",n.$validators.url=function(e,t){var r=e||t;return n.$isEmpty(r)||ia.test(r)}}function Rn(e,t,r,n,i,o){xn(e,t,r,n,i,o),bn(n),n.$$parserName="email",n.$validators.email=function(e,t){var r=e||t;return n.$isEmpty(r)||oa.test(r)}}function Ln(e,t,r,n){var i=!r.ngTrim||"false"!==fi(r.ngTrim);y(r.name)&&t.attr("name",a());var o=function(e){var o;t[0].checked&&(o=r.value,i&&(o=fi(o)),n.$setViewValue(o,e&&e.type))};t.on("click",o),n.$render=function(){var e=r.value;i&&(e=fi(e)),t[0].checked=e===n.$viewValue},r.$observe("value",n.$render)}function On(e,t,r,n,i){var o;if(m(n)){if(o=e(n),!o.constant)throw Ua("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",r,n);return o(t)}return i}function Pn(e,t,r,n,i,o,a,s){var u=On(s,e,"ngTrueValue",r.ngTrueValue,!0),l=On(s,e,"ngFalseValue",r.ngFalseValue,!1),c=function(e){n.$setViewValue(t[0].checked,e&&e.type)};t.on("click",c),n.$render=function(){t[0].checked=n.$viewValue},n.$isEmpty=function(e){return e===!1},n.$formatters.push(function(e){return q(e,u)}),n.$parsers.push(function(e){return e?u:l})}function Qn(e,t){function r(e,t){if(!e||!e.length)return[];if(!t||!t.length)return e;var r=[];e:for(var n=0;n<e.length;n++){for(var i=e[n],o=0;o<t.length;o++)if(i===t[o])continue e;r.push(i)}return r}function i(e){return e&&e.split(" ")}function o(e){var t=e;return li(e)?t=e.map(o).join(" "):b(e)&&(t=Object.keys(e).filter(function(t){return e[t]}).join(" ")),t}function a(e){var t=e;if(li(e))t=e.map(a);else if(b(e)){var r=!1;t=Object.keys(e).filter(function(t){var n=e[t];return!r&&y(n)&&(r=!0),n}),r&&t.push(void 0)}return t}e="ngClass"+e;var s;return["$parse",function(u){return{restrict:"AC",link:function(l,c,f){function p(e){e=v(i(e),1),f.$addClass(e)}function h(e){e=v(i(e),-1),f.$removeClass(e)}function d(e,t){var n=i(e),o=i(t),a=r(n,o),s=r(o,n),u=v(a,-1),l=v(s,1);f.$addClass(l),f.$removeClass(u)}function v(e,t){var r=[];return n(e,function(e){(t>0||_[e])&&(_[e]=(_[e]||0)+t,_[e]===+(t>0)&&r.push(e))}),r.join(" ")}function g(e){e===t?p(b):h(b),S=e}function y(e){var t=o(e);t!==b&&m(t)}function m(e){S===t&&d(b,e),b=e}var b,w=f[e].trim(),x=":"===w.charAt(0)&&":"===w.charAt(1),$=x?a:o,k=u(w,$),E=x?y:m,_=c.data("$classCounts"),S=!0;_||(_=ge(),c.data("$classCounts",_)),"ngClass"!==e&&(s||(s=u("$index",function(e){return 1&e})),l.$watch(s,g)),l.$watch(k,E,x)}}}]}function Dn(e,t,r,n,i,o,a,s,u){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=u(r.name||"",!1)(e),this.$$parentForm=Ko,this.$options=Ba,this.$$parsedNgModel=i(r.ngModel),this.$$parsedNgModelAssign=this.$$parsedNgModel.assign,this.$$ngModelGet=this.$$parsedNgModel,this.$$ngModelSet=this.$$parsedNgModelAssign,this.$$pendingDebounce=null,this.$$parserValid=void 0,this.$$currentValidationRunId=0,this.$$scope=e,this.$$attr=r,this.$$element=n,this.$$animate=o,this.$$timeout=a,this.$$parse=i,this.$$q=s,this.$$exceptionHandler=t,gn(this),Mn(this)}function Mn(e){e.$$scope.$watch(function(){var t=e.$$ngModelGet(e.$$scope);if(t!==e.$modelValue&&(e.$modelValue===e.$modelValue||t===t)){e.$modelValue=e.$$rawModelValue=t,e.$$parserValid=void 0;for(var r=e.$formatters,n=r.length,i=t;n--;)i=r[n](i);e.$viewValue!==i&&(e.$$updateEmptyClasses(i),e.$viewValue=e.$$lastCommittedViewValue=i,e.$render(),e.$$runValidators(e.$modelValue,e.$viewValue,h))}return t})}function qn(e){this.$$options=e}function Un(e,t){n(t,function(t,r){m(e[r])||(e[r]=t)})}var Bn=/^\/(.+)\/([a-z]*)$/,Gn="validity",Hn=Object.prototype.hasOwnProperty,Vn=function(e){return x(e)?e.toLowerCase():e},zn=function(e){return x(e)?e.toUpperCase():e},Wn=function(e){return x(e)?e.replace(/[A-Z]/g,function(e){return String.fromCharCode(32|e.charCodeAt(0))}):e},Xn=function(e){return x(e)?e.replace(/[a-z]/g,function(e){return String.fromCharCode(e.charCodeAt(0)&-33)}):e};"i"!=="I".toLowerCase()&&(Vn=Wn,zn=Xn);var Jn,Kn,Yn,Zn,ei=[].slice,ti=[].splice,ri=[].push,ni=Object.prototype.toString,ii=Object.getPrototypeOf,oi=t("ng"),ai=e.angular||(e.angular={}),si=0;Jn=e.document.documentMode;var ui=Number.isNaN||function(e){return e!==e};h.$inject=[],d.$inject=[];var li=Array.isArray,ci=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/,fi=function(e){return x(e)?e.trim():e},pi=function(e){return e.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},hi=function(){function t(){try{return new Function(""),!1}catch(e){return!0}}if(!m(hi.rules)){var r=e.document.querySelector("[ng-csp]")||e.document.querySelector("[data-ng-csp]");if(r){var n=r.getAttribute("ng-csp")||r.getAttribute("data-ng-csp");hi.rules={noUnsafeEval:!n||n.indexOf("no-unsafe-eval")!==-1,noInlineStyle:!n||n.indexOf("no-inline-style")!==-1}}else hi.rules={noUnsafeEval:t(),noInlineStyle:!1}}return hi.rules},di=function(){if(m(di.name_))return di.name_;var t,r,n,i,o=gi.length;for(r=0;r<o;++r)if(n=gi[r],t=e.document.querySelector("["+n.replace(":","\\:")+"jq]")){i=t.getAttribute(n+"jq");break}return di.name_=i},vi=/:/g,gi=["ng-","data-ng-","ng:","x-ng-"],yi=ie(e.document),mi=/[A-Z]/g,bi=!1,wi=1,xi=2,$i=3,ki=8,Ei=9,_i=11,Si={full:"1.6.2",major:1,minor:6,dot:2,codeName:"llamacorn-lovehug"};Re.expando="ng339";var Ai=Re.cache={},Ci=1;Re._data=function(e){return this.cache[e[this.expando]]||{}};var Ii=/-([a-z])/g,Ti=/^-ms-/,Fi={mouseleave:"mouseout",mouseenter:"mouseover"},Ni=t("jqLite"),ji=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,Ri=/<|&#?\w+;/,Li=/<([\w:-]+)/,Oi=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,Pi={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Pi.optgroup=Pi.option,Pi.tbody=Pi.tfoot=Pi.colgroup=Pi.caption=Pi.thead,Pi.th=Pi.td;var Qi=e.Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))},Di=Re.prototype={ready:Je,toString:function(){var e=[];return n(this,function(t){e.push(""+t)}),"["+e.join(", ")+"]"},eq:function(e){return Kn(e>=0?this[e]:this[this.length+e])},length:0,push:ri,sort:[].sort,splice:[].splice},Mi={};n("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(e){Mi[Vn(e)]=e});var qi={};n("input,select,option,textarea,button,form,details".split(","),function(e){qi[e]=!0});var Ui={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern",ngStep:"step"};n({data:Me,removeData:Qe,hasData:Ie,cleanData:Te},function(e,t){Re[t]=e}),n({data:Me,inheritedData:Ve,scope:function(e){return Kn.data(e,"$scope")||Ve(e.parentNode||e,["$isolateScope","$scope"])},isolateScope:function(e){return Kn.data(e,"$isolateScope")||Kn.data(e,"$isolateScopeNoTemplate")},controller:He,injector:function(e){return Ve(e,"$injector")},removeAttr:function(e,t){e.removeAttribute(t)},hasClass:qe,css:function(e,t,r){return t=Ee(t),m(r)?void(e.style[t]=r):e.style[t]},attr:function(e,t,r){var n,i=e.nodeType;if(i!==$i&&i!==xi&&i!==ki&&e.getAttribute){var o=Vn(t),a=Mi[o];return m(r)?void(null===r||r===!1&&a?e.removeAttribute(t):e.setAttribute(t,a?o:r)):(n=e.getAttribute(t),a&&null!==n&&(n=o),null===n?void 0:n)}},prop:function(e,t,r){return m(r)?void(e[t]=r):e[t]},text:function(){function e(e,t){if(y(t)){var r=e.nodeType;return r===wi||r===$i?e.textContent:""}e.textContent=t}return e.$dv="",e}(),val:function(e,t){if(y(t)){if(e.multiple&&"select"===P(e)){var r=[];return n(e.options,function(e){e.selected&&r.push(e.value||e.text)}),r}return e.value}e.value=t},html:function(e,t){return y(t)?e.innerHTML:(Oe(e,!0),void(e.innerHTML=t))},empty:ze},function(e,t){Re.prototype[t]=function(t,r){var n,i,o=this.length;if(e!==ze&&y(2===e.length&&e!==qe&&e!==He?t:r)){if(b(t)){for(n=0;n<o;n++)if(e===Me)e(this[n],t);else for(i in t)e(this[n],i,t[i]);return this}for(var a=e.$dv,s=y(a)?Math.min(o,1):o,u=0;u<s;u++){var l=e(this[u],t,r);a=a?a+l:l}return a}for(n=0;n<o;n++)e(this[n],t,r);return this}}),n({removeData:Qe,on:function(e,t,r,n){if(m(n))throw Ni("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(Ce(e)){var i=De(e,!0),o=i.events,a=i.handle;a||(a=i.handle=Ze(e,o));for(var s=t.indexOf(" ")>=0?t.split(" "):[t],u=s.length,l=function(t,n,i){var s=o[t];s||(s=o[t]=[],s.specialHandlerWrapper=n,"$destroy"===t||i||e.addEventListener(t,a)),s.push(r)};u--;)t=s[u],Fi[t]?(l(Fi[t],tt),l(t,void 0,!0)):l(t)}},off:Pe,one:function(e,t,r){e=Kn(e),e.on(t,function n(){e.off(t,r),e.off(t,n)}),e.on(t,r)},replaceWith:function(e,t){var r,i=e.parentNode;Oe(e),n(new Re(t),function(t){r?i.insertBefore(t,r.nextSibling):i.replaceChild(t,e),r=t})},children:function(e){var t=[];return n(e.childNodes,function(e){e.nodeType===wi&&t.push(e)}),t},contents:function(e){return e.contentDocument||e.childNodes||[]},append:function(e,t){var r=e.nodeType;if(r===wi||r===_i){t=new Re(t);for(var n=0,i=t.length;n<i;n++){var o=t[n];e.appendChild(o)}}},prepend:function(e,t){if(e.nodeType===wi){var r=e.firstChild;n(new Re(t),function(t){e.insertBefore(t,r)})}},wrap:function(e,t){je(e,Kn(t).eq(0).clone()[0])},remove:We,detach:function(e){We(e,!0)},after:function(e,t){var r=e,n=e.parentNode;if(n){t=new Re(t);for(var i=0,o=t.length;i<o;i++){var a=t[i];n.insertBefore(a,r.nextSibling),r=a}}},addClass:Be,removeClass:Ue,toggleClass:function(e,t,r){t&&n(t.split(" "),function(t){var n=r;y(n)&&(n=!qe(e,t)),(n?Be:Ue)(e,t)})},parent:function(e){var t=e.parentNode;return t&&t.nodeType!==_i?t:null},next:function(e){return e.nextElementSibling},find:function(e,t){return e.getElementsByTagName?e.getElementsByTagName(t):[]},clone:Le,triggerHandler:function(e,t,r){var i,o,a,s=t.type||t,u=De(e),c=u&&u.events,f=c&&c[s];f&&(i={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return this.immediatePropagationStopped===!0},stopPropagation:h,type:s,target:e},t.type&&(i=l(i,t)),o=be(f),a=r?[i].concat(r):[i],n(o,function(t){i.isImmediatePropagationStopped()||t.apply(e,a)}))}},function(e,t){Re.prototype[t]=function(t,r,n){for(var i,o=0,a=this.length;o<a;o++)y(i)?(i=e(this[o],t,r,n),m(i)&&(i=Kn(i))):Ge(i,e(this[o],t,r,n));return m(i)?i:this}}),Re.prototype.bind=Re.prototype.on,Re.prototype.unbind=Re.prototype.off;var Bi=Object.create(null);it.prototype={_idx:function(e){return e===this._lastKey?this._lastIndex:(this._lastKey=e,this._lastIndex=this._keys.indexOf(e),this._lastIndex)},_transformKey:function(e){return ui(e)?Bi:e},get:function(e){e=this._transformKey(e);var t=this._idx(e);if(t!==-1)return this._values[t]},set:function(e,t){e=this._transformKey(e);var r=this._idx(e);r===-1&&(r=this._lastIndex=this._keys.length),this._keys[r]=e,this._values[r]=t},delete:function(e){e=this._transformKey(e);var t=this._idx(e);return t!==-1&&(this._keys.splice(t,1),this._values.splice(t,1),this._lastKey=NaN,this._lastIndex=-1,!0)}};var Gi=it,Hi=[function(){this.$get=[function(){return Gi}]}],Vi=/^([^(]+?)=>/,zi=/^[^(]*\(\s*([^)]*)\)/m,Wi=/,/,Xi=/^\s*(_?)(\S+?)\1\s*$/,Ji=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Ki=t("$injector");lt.$$annotate=ut;var Yi=t("$animate"),Zi=1,eo="ng-animate",to=function(){this.$get=h},ro=function(){var e=new Gi,t=[];this.$get=["$$AnimateRunner","$rootScope",function(r,i){function o(e,t,r){var i=!1;return t&&(t=x(t)?t.split(" "):li(t)?t:[],n(t,function(t){t&&(i=!0,e[t]=r)})),i}function a(){n(t,function(t){var r=e.get(t);if(r){var i=ht(t.attr("class")),o="",a="";n(r,function(e,t){var r=!!i[t];e!==r&&(e?o+=(o.length?" ":"")+t:a+=(a.length?" ":"")+t)}),n(t,function(e){o&&Be(e,o),a&&Ue(e,a)}),e.delete(t)}}),t.length=0}function s(r,n,s){var u=e.get(r)||{},l=o(u,n,!0),c=o(u,s,!1);(l||c)&&(e.set(r,u),t.push(r),1===t.length&&i.$$postDigest(a))}return{enabled:h,on:h,off:h,pin:h,push:function(e,t,n,i){i&&i(),n=n||{},n.from&&e.css(n.from),n.to&&e.css(n.to),(n.addClass||n.removeClass)&&s(e,n.addClass,n.removeClass);var o=new r;return o.complete(),o}}}]},no=["$provide",function(e){var t=this;this.$$registeredAnimations=Object.create(null),this.register=function(r,n){if(r&&"."!==r.charAt(0))throw Yi("notcsel","Expecting class selector starting with '.' got '{0}'.",r);var i=r+"-animation";t.$$registeredAnimations[r.substr(1)]=i,e.factory(i,n)},this.classNameFilter=function(e){if(1===arguments.length&&(this.$$classNameFilter=e instanceof RegExp?e:null,this.$$classNameFilter)){var t=new RegExp("(\\s+|\\/)"+eo+"(\\s+|\\/)");if(t.test(this.$$classNameFilter.toString()))throw Yi("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',eo)}return this.$$classNameFilter},this.$get=["$$animateQueue",function(e){function t(e,t,r){if(r){var n=pt(r);!n||n.parentNode||n.previousElementSibling||(r=null)}r?r.after(e):t.prepend(e)}return{on:e.on,off:e.off,pin:e.pin,enabled:e.enabled,cancel:function(e){e.end&&e.end()},enter:function(r,n,i,o){return n=n&&Kn(n),i=i&&Kn(i),n=n||i.parent(),t(r,n,i),e.push(r,"enter",dt(o))},move:function(r,n,i,o){return n=n&&Kn(n),i=i&&Kn(i),n=n||i.parent(),t(r,n,i),e.push(r,"move",dt(o))},leave:function(t,r){return e.push(t,"leave",dt(r),function(){t.remove()})},addClass:function(t,r,n){return n=dt(n),n.addClass=ft(n.addclass,r),e.push(t,"addClass",n)},removeClass:function(t,r,n){return n=dt(n),n.removeClass=ft(n.removeClass,r),e.push(t,"removeClass",n)},setClass:function(t,r,n,i){return i=dt(i),i.addClass=ft(i.addClass,r),i.removeClass=ft(i.removeClass,n),e.push(t,"setClass",i)},animate:function(t,r,n,i,o){return o=dt(o),o.from=o.from?l(o.from,r):r,o.to=o.to?l(o.to,n):n,i=i||"ng-inline-animate",o.tempClasses=ft(o.tempClasses,i),e.push(t,"animate",o)}}}]}],io=function(){this.$get=["$$rAF",function(e){function t(t){r.push(t),r.length>1||e(function(){for(var e=0;e<r.length;e++)r[e]();r=[]})}var r=[];return function(){var e=!1;return t(function(){e=!0}),function(r){e?r():t(r)}}}]},oo=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$$isDocumentHidden","$timeout",function(e,t,r,i,o){function a(e){this.setHost(e);var t=r(),n=function(e){o(e,0,!1)};this._doneCallbacks=[],this._tick=function(e){i()?n(e):t(e)},this._state=0}var s=0,u=1,l=2;return a.chain=function(e,t){function r(){return n===e.length?void t(!0):void e[n](function(e){return e===!1?void t(!1):(n++,void r())})}var n=0;r()},a.all=function(e,t){function r(r){o=o&&r,++i===e.length&&t(o)}var i=0,o=!0;n(e,function(e){e.done(r)})},a.prototype={setHost:function(e){this.host=e||{}},done:function(e){this._state===l?e():this._doneCallbacks.push(e)},progress:h,getPromise:function(){if(!this.promise){var t=this;this.promise=e(function(e,r){t.done(function(t){t===!1?r():e()})})}return this.promise},then:function(e,t){return this.getPromise().then(e,t)},catch:function(e){return this.getPromise().catch(e)},finally:function(e){return this.getPromise().finally(e)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(e){var t=this;t._state===s&&(t._state=u,t._tick(function(){t._resolve(e)}))},_resolve:function(e){this._state!==l&&(n(this._doneCallbacks,function(t){t(e)}),this._doneCallbacks.length=0,this._state=l)}},a}]},ao=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(e,t,r){return function(t,n){function i(){return e(function(){o(),s||u.complete(),s=!0}),u}function o(){a.addClass&&(t.addClass(a.addClass),a.addClass=null),a.removeClass&&(t.removeClass(a.removeClass),a.removeClass=null),a.to&&(t.css(a.to),a.to=null)}var a=n||{};a.$$prepared||(a=M(a)),a.cleanupStyles&&(a.from=a.to=null),a.from&&(t.css(a.from),a.from=null);var s,u=new r;return{start:i,end:i}}}]},so=t("$compile"),uo=new bt;wt.$inject=["$provide","$$sanitizeUriProvider"],xt.prototype.isFirstChange=function(){return this.previousValue===uo};var lo=/^((?:x|data)[:\-_])/i,co=/[:\-_]+(.)/g,fo=t("$controller"),po=/^(\S+)(\s+as\s+([\w$]+))?$/,ho=function(){this.$get=["$document",function(e){return function(t){return t?!t.nodeType&&t instanceof Kn&&(t=t[0]):t=e[0].body,t.offsetWidth+1}}]},vo="application/json",go={"Content-Type":vo+";charset=utf-8"},yo=/^\[|^\{(?!\{)/,mo={"[":/]$/,"{":/}$/},bo=/^\)]\}',?\n/,wo=t("$http"),xo=ai.$interpolateMinErr=t("$interpolate");xo.throwNoconcat=function(e){throw xo("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",e)},xo.interr=function(e,t){return xo("interr","Can't interpolate: {0}\n{1}",e,t.toString())};var $o=function(){this.$get=["$window",function(e){function t(e){var t=function(e){t.data=e,t.called=!0};return t.id=e,t}var r=e.angular.callbacks,n={};return{createCallback:function(e){var i="_"+(r.$$counter++).toString(36),o="angular.callbacks."+i,a=t(i);return n[o]=r[i]=a,o},wasCalled:function(e){return n[e].called},getResponse:function(e){return n[e].data},removeCallback:function(e){var t=n[e];delete r[t.id],delete n[e]}}}]},ko=/^([^?#]*)(\?([^#]*))?(#(.*))?$/,Eo={http:80,https:443,ftp:21},_o=t("$location"),So=/^\s*[\\\/]{2,}/,Ao={$$absUrl:"",$$html5:!1,$$replace:!1,absUrl:nr("$$absUrl"),url:function(e){if(y(e))return this.$$url;var t=ko.exec(e);return(t[1]||""===e)&&this.path(decodeURIComponent(t[1])),(t[2]||t[1]||""===e)&&this.search(t[3]||""),this.hash(t[5]||""),this},protocol:nr("$$protocol"),host:nr("$$host"),port:nr("$$port"),path:ir("$$path",function(e){return e=null!==e?e.toString():"","/"===e.charAt(0)?e:"/"+e}),search:function(e,t){switch(arguments.length){case 0:return this.$$search;case 1:if(x(e)||$(e))e=e.toString(),this.$$search=Z(e);else{if(!b(e))throw _o("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");e=M(e,{}),n(e,function(t,r){null==t&&delete e[r]}),this.$$search=e}break;default:y(t)||null===t?delete this.$$search[e]:this.$$search[e]=t}return this.$$compose(),this},hash:ir("$$hash",function(e){return null!==e?e.toString():""}),replace:function(){return this.$$replace=!0,this}};n([rr,tr,er],function(e){e.prototype=Object.create(Ao),e.prototype.state=function(t){if(!arguments.length)return this.$$state;if(e!==er||!this.$$html5)throw _o("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=y(t)?null:t,this.$$urlUpdatedByLocation=!0,this}});var Co=t("$parse"),Io={}.constructor.prototype.valueOf,To=ge();n("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(e){To[e]=!0});var Fo={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},No=function(e){this.options=e};No.prototype={constructor:No,lex:function(e){for(this.text=e,this.index=0,this.tokens=[];this.index<this.text.length;){var t=this.text.charAt(this.index);if('"'===t||"'"===t)this.readString(t);else if(this.isNumber(t)||"."===t&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(t,"(){}[].,;:?"))this.tokens.push({index:this.index,text:t}),this.index++;else if(this.isWhitespace(t))this.index++;else{var r=t+this.peek(),n=r+this.peek(2),i=To[t],o=To[r],a=To[n];if(i||o||a){var s=a?n:o?r:t;this.tokens.push({index:this.index,text:s,operator:!0}),this.index+=s.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(e,t){return t.indexOf(e)!==-1},peek:function(e){var t=e||1;return this.index+t<this.text.length&&this.text.charAt(this.index+t)},isNumber:function(e){return"0"<=e&&e<="9"&&"string"==typeof e},isWhitespace:function(e){return" "===e||"\r"===e||"\t"===e||"\n"===e||"\v"===e||""===e},isIdentifierStart:function(e){return this.options.isIdentifierStart?this.options.isIdentifierStart(e,this.codePointAt(e)):this.isValidIdentifierStart(e)},isValidIdentifierStart:function(e){return"a"<=e&&e<="z"||"A"<=e&&e<="Z"||"_"===e||"$"===e},isIdentifierContinue:function(e){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(e,this.codePointAt(e)):this.isValidIdentifierContinue(e)},isValidIdentifierContinue:function(e,t){return this.isValidIdentifierStart(e,t)||this.isNumber(e)},codePointAt:function(e){return 1===e.length?e.charCodeAt(0):(e.charCodeAt(0)<<10)+e.charCodeAt(1)-56613888},peekMultichar:function(){var e=this.text.charAt(this.index),t=this.peek();if(!t)return e;var r=e.charCodeAt(0),n=t.charCodeAt(0);return r>=55296&&r<=56319&&n>=56320&&n<=57343?e+t:e},isExpOperator:function(e){return"-"===e||"+"===e||this.isNumber(e)},throwError:function(e,t,r){r=r||this.index;var n=m(t)?"s "+t+"-"+this.index+" ["+this.text.substring(t,r)+"]":" "+r;throw Co("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",e,n,this.text)},readNumber:function(){for(var e="",t=this.index;this.index<this.text.length;){var r=Vn(this.text.charAt(this.index));if("."===r||this.isNumber(r))e+=r;else{var n=this.peek();if("e"===r&&this.isExpOperator(n))e+=r;else if(this.isExpOperator(r)&&n&&this.isNumber(n)&&"e"===e.charAt(e.length-1))e+=r;else{if(!this.isExpOperator(r)||n&&this.isNumber(n)||"e"!==e.charAt(e.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:t,text:e,constant:!0,value:Number(e)})},readIdent:function(){var e=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var t=this.peekMultichar();if(!this.isIdentifierContinue(t))break;this.index+=t.length}this.tokens.push({index:e,text:this.text.slice(e,this.index),identifier:!0})},readString:function(e){var t=this.index;this.index++;for(var r="",n=e,i=!1;this.index<this.text.length;){var o=this.text.charAt(this.index);if(n+=o,i){if("u"===o){var a=this.text.substring(this.index+1,this.index+5);a.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+a+"]"),this.index+=4,r+=String.fromCharCode(parseInt(a,16))}else{var s=Fo[o];r+=s||o}i=!1}else if("\\"===o)i=!0;else{if(o===e)return this.index++,void this.tokens.push({index:t,text:n,constant:!0,value:r});r+=o}this.index++}this.throwError("Unterminated quote",t)}};var jo=function(e,t){this.lexer=e,this.options=t};jo.Program="Program",jo.ExpressionStatement="ExpressionStatement",jo.AssignmentExpression="AssignmentExpression",jo.ConditionalExpression="ConditionalExpression",jo.LogicalExpression="LogicalExpression",jo.BinaryExpression="BinaryExpression",jo.UnaryExpression="UnaryExpression",jo.CallExpression="CallExpression",jo.MemberExpression="MemberExpression",jo.Identifier="Identifier",jo.Literal="Literal",jo.ArrayExpression="ArrayExpression",jo.Property="Property",jo.ObjectExpression="ObjectExpression",jo.ThisExpression="ThisExpression",jo.LocalsExpression="LocalsExpression",jo.NGValueParameter="NGValueParameter",jo.prototype={ast:function(e){this.text=e,this.tokens=this.lexer.lex(e);var t=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),t},program:function(){for(var e=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&e.push(this.expressionStatement()),!this.expect(";"))return{type:jo.Program,body:e}},expressionStatement:function(){return{type:jo.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var e=this.expression();this.expect("|");)e=this.filter(e);return e},expression:function(){return this.assignment()},assignment:function(){var e=this.ternary();if(this.expect("=")){if(!hr(e))throw Co("lval","Trying to assign a value to a non l-value");e={type:jo.AssignmentExpression,left:e,right:this.assignment(),operator:"="}}return e},ternary:function(){var e,t,r=this.logicalOR();return this.expect("?")&&(e=this.expression(),this.consume(":"))?(t=this.expression(),{type:jo.ConditionalExpression,test:r,alternate:e,consequent:t}):r},logicalOR:function(){for(var e=this.logicalAND();this.expect("||");)e={type:jo.LogicalExpression,operator:"||",left:e,right:this.logicalAND()};return e},logicalAND:function(){for(var e=this.equality();this.expect("&&");)e={type:jo.LogicalExpression,operator:"&&",left:e,right:this.equality()};return e},equality:function(){for(var e,t=this.relational();e=this.expect("==","!=","===","!==");)t={type:jo.BinaryExpression,operator:e.text,left:t,right:this.relational()};return t},relational:function(){for(var e,t=this.additive();e=this.expect("<",">","<=",">=");)t={type:jo.BinaryExpression,operator:e.text,left:t,right:this.additive()};return t},additive:function(){for(var e,t=this.multiplicative();e=this.expect("+","-");)t={type:jo.BinaryExpression,operator:e.text,left:t,right:this.multiplicative()};return t},multiplicative:function(){for(var e,t=this.unary();e=this.expect("*","/","%");)t={type:jo.BinaryExpression,operator:e.text,left:t,right:this.unary()};return t},unary:function(){var e;return(e=this.expect("+","-","!"))?{type:jo.UnaryExpression,operator:e.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var e;this.expect("(")?(e=this.filterChain(),this.consume(")")):this.expect("[")?e=this.arrayDeclaration():this.expect("{")?e=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?e=M(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?e={type:jo.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?e=this.identifier():this.peek().constant?e=this.constant():this.throwError("not a primary expression",this.peek());for(var t;t=this.expect("(","[",".");)"("===t.text?(e={type:jo.CallExpression,callee:e,arguments:this.parseArguments()},this.consume(")")):"["===t.text?(e={type:jo.MemberExpression,object:e,property:this.expression(),computed:!0},this.consume("]")):"."===t.text?e={type:jo.MemberExpression,object:e,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return e},filter:function(e){for(var t=[e],r={type:jo.CallExpression,callee:this.identifier(),arguments:t,filter:!0};this.expect(":");)t.push(this.expression());return r},parseArguments:function(){var e=[];if(")"!==this.peekToken().text)do e.push(this.filterChain());while(this.expect(","));return e},identifier:function(){var e=this.consume();return e.identifier||this.throwError("is not a valid identifier",e),{type:jo.Identifier,name:e.text}},constant:function(){return{type:jo.Literal,value:this.consume().value}},arrayDeclaration:function(){var e=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;e.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:jo.ArrayExpression,elements:e}},object:function(){var e,t=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;e={type:jo.Property,kind:"init"},this.peek().constant?(e.key=this.constant(),e.computed=!1,this.consume(":"),e.value=this.expression()):this.peek().identifier?(e.key=this.identifier(),e.computed=!1,this.peek(":")?(this.consume(":"),e.value=this.expression()):e.value=e.key):this.peek("[")?(this.consume("["),e.key=this.expression(),this.consume("]"),e.computed=!0,this.consume(":"),e.value=this.expression()):this.throwError("invalid key",this.peek()),t.push(e)}while(this.expect(","));return this.consume("}"),{type:jo.ObjectExpression,properties:t}},throwError:function(e,t){throw Co("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",t.text,e,t.index+1,this.text,this.text.substring(t.index))},consume:function(e){if(0===this.tokens.length)throw Co("ueoe","Unexpected end of expression: {0}",this.text);var t=this.expect(e);return t||this.throwError("is unexpected, expecting ["+e+"]",this.peek()),t},peekToken:function(){if(0===this.tokens.length)throw Co("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e,t,r,n){return this.peekAhead(0,e,t,r,n)},peekAhead:function(e,t,r,n,i){if(this.tokens.length>e){
var o=this.tokens[e],a=o.text;if(a===t||a===r||a===n||a===i||!t&&!r&&!n&&!i)return o}return!1},expect:function(e,t,r,n){var i=this.peek(e,t,r,n);return!!i&&(this.tokens.shift(),i)},selfReferential:{this:{type:jo.ThisExpression},$locals:{type:jo.LocalsExpression}}},yr.prototype={compile:function(e){var t=this,r=this.astBuilder.ast(e);this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},fr(r,t.$filter);var i,o="";if(this.stage="assign",i=dr(r)){this.state.computing="assign";var a=this.nextId();this.recurse(i,a),this.return_(a),o="fn.assign="+this.generateFunction("assign","s,v,l")}var s=pr(r.body);t.stage="inputs",n(s,function(e,r){var n="fn"+r;t.state[n]={vars:[],body:[],own:{}},t.state.computing=n;var i=t.nextId();t.recurse(e,i),t.return_(i),t.state.inputs.push(n),e.watchId=r}),this.state.computing="fn",this.stage="main",this.recurse(r);var u='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+o+this.watchFns()+"return fn;",l=new Function("$filter","getStringValue","ifDefined","plus",u)(this.$filter,sr,ur,lr);return this.state=this.stage=void 0,l.literal=vr(r),l.constant=gr(r),l},USE:"use",STRICT:"strict",watchFns:function(){var e=[],t=this.state.inputs,r=this;return n(t,function(t){e.push("var "+t+"="+r.generateFunction(t,"s"))}),t.length&&e.push("fn.inputs=["+t.join(",")+"];"),e.join("")},generateFunction:function(e,t){return"function("+t+"){"+this.varsPrefix(e)+this.body(e)+"};"},filterPrefix:function(){var e=[],t=this;return n(this.state.filters,function(r,n){e.push(r+"=$filter("+t.escape(n)+")")}),e.length?"var "+e.join(",")+";":""},varsPrefix:function(e){return this.state[e].vars.length?"var "+this.state[e].vars.join(",")+";":""},body:function(e){return this.state[e].body.join("")},recurse:function(e,t,r,i,o,a){var s,u,l,c,f,p=this;if(i=i||h,!a&&m(e.watchId))return t=t||this.nextId(),void this.if_("i",this.lazyAssign(t,this.computedMember("i",e.watchId)),this.lazyRecurse(e,t,r,i,o,!0));switch(e.type){case jo.Program:n(e.body,function(t,r){p.recurse(t.expression,void 0,void 0,function(e){u=e}),r!==e.body.length-1?p.current().body.push(u,";"):p.return_(u)});break;case jo.Literal:c=this.escape(e.value),this.assign(t,c),i(t||c);break;case jo.UnaryExpression:this.recurse(e.argument,void 0,void 0,function(e){u=e}),c=e.operator+"("+this.ifDefined(u,0)+")",this.assign(t,c),i(c);break;case jo.BinaryExpression:this.recurse(e.left,void 0,void 0,function(e){s=e}),this.recurse(e.right,void 0,void 0,function(e){u=e}),c="+"===e.operator?this.plus(s,u):"-"===e.operator?this.ifDefined(s,0)+e.operator+this.ifDefined(u,0):"("+s+")"+e.operator+"("+u+")",this.assign(t,c),i(c);break;case jo.LogicalExpression:t=t||this.nextId(),p.recurse(e.left,t),p.if_("&&"===e.operator?t:p.not(t),p.lazyRecurse(e.right,t)),i(t);break;case jo.ConditionalExpression:t=t||this.nextId(),p.recurse(e.test,t),p.if_(t,p.lazyRecurse(e.alternate,t),p.lazyRecurse(e.consequent,t)),i(t);break;case jo.Identifier:t=t||this.nextId(),r&&(r.context="inputs"===p.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",e.name)+"?l:s"),r.computed=!1,r.name=e.name),p.if_("inputs"===p.stage||p.not(p.getHasOwnProperty("l",e.name)),function(){p.if_("inputs"===p.stage||"s",function(){o&&1!==o&&p.if_(p.isNull(p.nonComputedMember("s",e.name)),p.lazyAssign(p.nonComputedMember("s",e.name),"{}")),p.assign(t,p.nonComputedMember("s",e.name))})},t&&p.lazyAssign(t,p.nonComputedMember("l",e.name))),i(t);break;case jo.MemberExpression:s=r&&(r.context=this.nextId())||this.nextId(),t=t||this.nextId(),p.recurse(e.object,s,void 0,function(){p.if_(p.notNull(s),function(){e.computed?(u=p.nextId(),p.recurse(e.property,u),p.getStringValue(u),o&&1!==o&&p.if_(p.not(p.computedMember(s,u)),p.lazyAssign(p.computedMember(s,u),"{}")),c=p.computedMember(s,u),p.assign(t,c),r&&(r.computed=!0,r.name=u)):(o&&1!==o&&p.if_(p.isNull(p.nonComputedMember(s,e.property.name)),p.lazyAssign(p.nonComputedMember(s,e.property.name),"{}")),c=p.nonComputedMember(s,e.property.name),p.assign(t,c),r&&(r.computed=!1,r.name=e.property.name))},function(){p.assign(t,"undefined")}),i(t)},!!o);break;case jo.CallExpression:t=t||this.nextId(),e.filter?(u=p.filter(e.callee.name),l=[],n(e.arguments,function(e){var t=p.nextId();p.recurse(e,t),l.push(t)}),c=u+"("+l.join(",")+")",p.assign(t,c),i(t)):(u=p.nextId(),s={},l=[],p.recurse(e.callee,u,s,function(){p.if_(p.notNull(u),function(){n(e.arguments,function(t){p.recurse(t,e.constant?void 0:p.nextId(),void 0,function(e){l.push(e)})}),c=s.name?p.member(s.context,s.name,s.computed)+"("+l.join(",")+")":u+"("+l.join(",")+")",p.assign(t,c)},function(){p.assign(t,"undefined")}),i(t)}));break;case jo.AssignmentExpression:u=this.nextId(),s={},this.recurse(e.left,void 0,s,function(){p.if_(p.notNull(s.context),function(){p.recurse(e.right,u),c=p.member(s.context,s.name,s.computed)+e.operator+u,p.assign(t,c),i(t||c)})},1);break;case jo.ArrayExpression:l=[],n(e.elements,function(t){p.recurse(t,e.constant?void 0:p.nextId(),void 0,function(e){l.push(e)})}),c="["+l.join(",")+"]",this.assign(t,c),i(t||c);break;case jo.ObjectExpression:l=[],f=!1,n(e.properties,function(e){e.computed&&(f=!0)}),f?(t=t||this.nextId(),this.assign(t,"{}"),n(e.properties,function(e){e.computed?(s=p.nextId(),p.recurse(e.key,s)):s=e.key.type===jo.Identifier?e.key.name:""+e.key.value,u=p.nextId(),p.recurse(e.value,u),p.assign(p.member(t,s,e.computed),u)})):(n(e.properties,function(t){p.recurse(t.value,e.constant?void 0:p.nextId(),void 0,function(e){l.push(p.escape(t.key.type===jo.Identifier?t.key.name:""+t.key.value)+":"+e)})}),c="{"+l.join(",")+"}",this.assign(t,c)),i(t||c);break;case jo.ThisExpression:this.assign(t,"s"),i(t||"s");break;case jo.LocalsExpression:this.assign(t,"l"),i(t||"l");break;case jo.NGValueParameter:this.assign(t,"v"),i(t||"v")}},getHasOwnProperty:function(e,t){var r=e+"."+t,n=this.current().own;return n.hasOwnProperty(r)||(n[r]=this.nextId(!1,e+"&&("+this.escape(t)+" in "+e+")")),n[r]},assign:function(e,t){if(e)return this.current().body.push(e,"=",t,";"),e},filter:function(e){return this.state.filters.hasOwnProperty(e)||(this.state.filters[e]=this.nextId(!0)),this.state.filters[e]},ifDefined:function(e,t){return"ifDefined("+e+","+this.escape(t)+")"},plus:function(e,t){return"plus("+e+","+t+")"},return_:function(e){this.current().body.push("return ",e,";")},if_:function(e,t,r){if(e===!0)t();else{var n=this.current().body;n.push("if(",e,"){"),t(),n.push("}"),r&&(n.push("else{"),r(),n.push("}"))}},not:function(e){return"!("+e+")"},isNull:function(e){return e+"==null"},notNull:function(e){return e+"!=null"},nonComputedMember:function(e,t){var r=/^[$_a-zA-Z][$_a-zA-Z0-9]*$/,n=/[^$_a-zA-Z0-9]/g;return r.test(t)?e+"."+t:e+'["'+t.replace(n,this.stringEscapeFn)+'"]'},computedMember:function(e,t){return e+"["+t+"]"},member:function(e,t,r){return r?this.computedMember(e,t):this.nonComputedMember(e,t)},getStringValue:function(e){this.assign(e,"getStringValue("+e+")")},lazyRecurse:function(e,t,r,n,i,o){var a=this;return function(){a.recurse(e,t,r,n,i,o)}},lazyAssign:function(e,t){var r=this;return function(){r.assign(e,t)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)},escape:function(e){if(x(e))return"'"+e.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if($(e))return e.toString();if(e===!0)return"true";if(e===!1)return"false";if(null===e)return"null";if("undefined"==typeof e)return"undefined";throw Co("esc","IMPOSSIBLE")},nextId:function(e,t){var r="v"+this.state.nextId++;return e||this.current().vars.push(r+(t?"="+t:"")),r},current:function(){return this.state[this.state.computing]}},mr.prototype={compile:function(e){var t=this,r=this.astBuilder.ast(e);fr(r,t.$filter);var i,o;(i=dr(r))&&(o=this.recurse(i));var a,s=pr(r.body);s&&(a=[],n(s,function(e,r){var n=t.recurse(e);e.input=n,a.push(n),e.watchId=r}));var u=[];n(r.body,function(e){u.push(t.recurse(e.expression))});var l=0===r.body.length?h:1===r.body.length?u[0]:function(e,t){var r;return n(u,function(n){r=n(e,t)}),r};return o&&(l.assign=function(e,t,r){return o(e,r,t)}),a&&(l.inputs=a),l.literal=vr(r),l.constant=gr(r),l},recurse:function(e,t,r){var i,o,a,s=this;if(e.input)return this.inputs(e.input,e.watchId);switch(e.type){case jo.Literal:return this.value(e.value,t);case jo.UnaryExpression:return o=this.recurse(e.argument),this["unary"+e.operator](o,t);case jo.BinaryExpression:return i=this.recurse(e.left),o=this.recurse(e.right),this["binary"+e.operator](i,o,t);case jo.LogicalExpression:return i=this.recurse(e.left),o=this.recurse(e.right),this["binary"+e.operator](i,o,t);case jo.ConditionalExpression:return this["ternary?:"](this.recurse(e.test),this.recurse(e.alternate),this.recurse(e.consequent),t);case jo.Identifier:return s.identifier(e.name,t,r);case jo.MemberExpression:return i=this.recurse(e.object,!1,!!r),e.computed||(o=e.property.name),e.computed&&(o=this.recurse(e.property)),e.computed?this.computedMember(i,o,t,r):this.nonComputedMember(i,o,t,r);case jo.CallExpression:return a=[],n(e.arguments,function(e){a.push(s.recurse(e))}),e.filter&&(o=this.$filter(e.callee.name)),e.filter||(o=this.recurse(e.callee,!0)),e.filter?function(e,r,n,i){for(var s=[],u=0;u<a.length;++u)s.push(a[u](e,r,n,i));var l=o.apply(void 0,s,i);return t?{context:void 0,name:void 0,value:l}:l}:function(e,r,n,i){var s,u=o(e,r,n,i);if(null!=u.value){for(var l=[],c=0;c<a.length;++c)l.push(a[c](e,r,n,i));s=u.value.apply(u.context,l)}return t?{value:s}:s};case jo.AssignmentExpression:return i=this.recurse(e.left,!0,1),o=this.recurse(e.right),function(e,r,n,a){var s=i(e,r,n,a),u=o(e,r,n,a);return s.context[s.name]=u,t?{value:u}:u};case jo.ArrayExpression:return a=[],n(e.elements,function(e){a.push(s.recurse(e))}),function(e,r,n,i){for(var o=[],s=0;s<a.length;++s)o.push(a[s](e,r,n,i));return t?{value:o}:o};case jo.ObjectExpression:return a=[],n(e.properties,function(e){e.computed?a.push({key:s.recurse(e.key),computed:!0,value:s.recurse(e.value)}):a.push({key:e.key.type===jo.Identifier?e.key.name:""+e.key.value,computed:!1,value:s.recurse(e.value)})}),function(e,r,n,i){for(var o={},s=0;s<a.length;++s)a[s].computed?o[a[s].key(e,r,n,i)]=a[s].value(e,r,n,i):o[a[s].key]=a[s].value(e,r,n,i);return t?{value:o}:o};case jo.ThisExpression:return function(e){return t?{value:e}:e};case jo.LocalsExpression:return function(e,r){return t?{value:r}:r};case jo.NGValueParameter:return function(e,r,n){return t?{value:n}:n}}},"unary+":function(e,t){return function(r,n,i,o){var a=e(r,n,i,o);return a=m(a)?+a:0,t?{value:a}:a}},"unary-":function(e,t){return function(r,n,i,o){var a=e(r,n,i,o);return a=m(a)?-a:-0,t?{value:a}:a}},"unary!":function(e,t){return function(r,n,i,o){var a=!e(r,n,i,o);return t?{value:a}:a}},"binary+":function(e,t,r){return function(n,i,o,a){var s=e(n,i,o,a),u=t(n,i,o,a),l=lr(s,u);return r?{value:l}:l}},"binary-":function(e,t,r){return function(n,i,o,a){var s=e(n,i,o,a),u=t(n,i,o,a),l=(m(s)?s:0)-(m(u)?u:0);return r?{value:l}:l}},"binary*":function(e,t,r){return function(n,i,o,a){var s=e(n,i,o,a)*t(n,i,o,a);return r?{value:s}:s}},"binary/":function(e,t,r){return function(n,i,o,a){var s=e(n,i,o,a)/t(n,i,o,a);return r?{value:s}:s}},"binary%":function(e,t,r){return function(n,i,o,a){var s=e(n,i,o,a)%t(n,i,o,a);return r?{value:s}:s}},"binary===":function(e,t,r){return function(n,i,o,a){var s=e(n,i,o,a)===t(n,i,o,a);return r?{value:s}:s}},"binary!==":function(e,t,r){return function(n,i,o,a){var s=e(n,i,o,a)!==t(n,i,o,a);return r?{value:s}:s}},"binary==":function(e,t,r){return function(n,i,o,a){var s=e(n,i,o,a)==t(n,i,o,a);return r?{value:s}:s}},"binary!=":function(e,t,r){return function(n,i,o,a){var s=e(n,i,o,a)!=t(n,i,o,a);return r?{value:s}:s}},"binary<":function(e,t,r){return function(n,i,o,a){var s=e(n,i,o,a)<t(n,i,o,a);return r?{value:s}:s}},"binary>":function(e,t,r){return function(n,i,o,a){var s=e(n,i,o,a)>t(n,i,o,a);return r?{value:s}:s}},"binary<=":function(e,t,r){return function(n,i,o,a){var s=e(n,i,o,a)<=t(n,i,o,a);return r?{value:s}:s}},"binary>=":function(e,t,r){return function(n,i,o,a){var s=e(n,i,o,a)>=t(n,i,o,a);return r?{value:s}:s}},"binary&&":function(e,t,r){return function(n,i,o,a){var s=e(n,i,o,a)&&t(n,i,o,a);return r?{value:s}:s}},"binary||":function(e,t,r){return function(n,i,o,a){var s=e(n,i,o,a)||t(n,i,o,a);return r?{value:s}:s}},"ternary?:":function(e,t,r,n){return function(i,o,a,s){var u=e(i,o,a,s)?t(i,o,a,s):r(i,o,a,s);return n?{value:u}:u}},value:function(e,t){return function(){return t?{context:void 0,name:void 0,value:e}:e}},identifier:function(e,t,r){return function(n,i,o,a){var s=i&&e in i?i:n;r&&1!==r&&s&&null==s[e]&&(s[e]={});var u=s?s[e]:void 0;return t?{context:s,name:e,value:u}:u}},computedMember:function(e,t,r,n){return function(i,o,a,s){var u,l,c=e(i,o,a,s);return null!=c&&(u=t(i,o,a,s),u=sr(u),n&&1!==n&&c&&!c[u]&&(c[u]={}),l=c[u]),r?{context:c,name:u,value:l}:l}},nonComputedMember:function(e,t,r,n){return function(i,o,a,s){var u=e(i,o,a,s);n&&1!==n&&u&&null==u[t]&&(u[t]={});var l=null!=u?u[t]:void 0;return r?{context:u,name:t,value:l}:l}},inputs:function(e,t){return function(r,n,i,o){return o?o[t]:e(r,n,i)}}};var Ro=function(e,t,r){this.lexer=e,this.$filter=t,this.options=r,this.ast=new jo(e,r),this.astCompiler=r.csp?new mr(this.ast,t):new yr(this.ast,t)};Ro.prototype={constructor:Ro,parse:function(e){return this.astCompiler.compile(e)}};var Lo=t("$sce"),Oo={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Po=/_([a-z])/g,Qo=t("$compile"),Do=e.document.createElement("a"),Mo=Or(e.location.href);Dr.$inject=["$document"],qr.$inject=["$provide"];var qo=22,Uo=".",Bo="0";Vr.$inject=["$locale"],zr.$inject=["$locale"];var Go={yyyy:Yr("FullYear",4,0,!1,!0),yy:Yr("FullYear",2,0,!0,!0),y:Yr("FullYear",1,0,!1,!0),MMMM:Zr("Month"),MMM:Zr("Month",!0),MM:Yr("Month",2,1),M:Yr("Month",1,1),LLLL:Zr("Month",!1,!0),dd:Yr("Date",2),d:Yr("Date",1),HH:Yr("Hours",2),H:Yr("Hours",1),hh:Yr("Hours",2,-12),h:Yr("Hours",1,-12),mm:Yr("Minutes",2),m:Yr("Minutes",1),ss:Yr("Seconds",2),s:Yr("Seconds",1),sss:Yr("Milliseconds",3),EEEE:Zr("Day"),EEE:Zr("Day",!0),a:on,Z:en,ww:nn(2),w:nn(1),G:an,GG:an,GGG:an,GGGG:sn},Ho=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,Vo=/^-?\d+$/;un.$inject=["$locale"];var zo=v(Vn),Wo=v(zn);pn.$inject=["$parse"];var Xo=v({restrict:"E",compile:function(e,t){if(!t.href&&!t.xlinkHref)return function(e,t){if("a"===t[0].nodeName.toLowerCase()){var r="[object SVGAnimatedString]"===ni.call(t.prop("href"))?"xlink:href":"href";t.on("click",function(e){t.attr(r)||e.preventDefault()})}}}}),Jo={};n(Mi,function(e,t){function r(e,r,i){e.$watch(i[n],function(e){i.$set(t,!!e)})}if("multiple"!==e){var n=$t("ng-"+t),i=r;"checked"===e&&(i=function(e,t,i){i.ngModel!==i[n]&&r(e,t,i)}),Jo[n]=function(){return{restrict:"A",priority:100,link:i}}}}),n(Ui,function(e,t){Jo[t]=function(){return{priority:100,link:function(e,r,n){if("ngPattern"===t&&"/"===n.ngPattern.charAt(0)){var i=n.ngPattern.match(Bn);if(i)return void n.$set("ngPattern",new RegExp(i[1],i[2]))}e.$watch(n[t],function(e){n.$set(t,e)})}}}}),n(["src","srcset","href"],function(e){var t=$t("ng-"+e);Jo[t]=function(){return{priority:99,link:function(r,n,i){var o=e,a=e;"href"===e&&"[object SVGAnimatedString]"===ni.call(n.prop("href"))&&(a="xlinkHref",i.$attr[a]="xlink:href",o=null),i.$observe(t,function(t){return t?(i.$set(a,t),void(Jn&&o&&n.prop(o,i[a]))):void("href"===e&&i.$set(a,null))})}}}});var Ko={$addControl:h,$$renameControl:dn,$removeControl:h,$setValidity:h,$setDirty:h,$setPristine:h,$setSubmitted:h},Yo="ng-pending",Zo="ng-submitted";vn.$inject=["$element","$attrs","$scope","$animate","$interpolate"],vn.prototype={$rollbackViewValue:function(){n(this.$$controls,function(e){e.$rollbackViewValue()})},$commitViewValue:function(){n(this.$$controls,function(e){e.$commitViewValue()})},$addControl:function(e){he(e.$name,"input"),this.$$controls.push(e),e.$name&&(this[e.$name]=e),e.$$parentForm=this},$$renameControl:function(e,t){var r=e.$name;this[r]===e&&delete this[r],this[t]=e,e.$name=t},$removeControl:function(e){e.$name&&this[e.$name]===e&&delete this[e.$name],n(this.$pending,function(t,r){this.$setValidity(r,null,e)},this),n(this.$error,function(t,r){this.$setValidity(r,null,e)},this),n(this.$$success,function(t,r){this.$setValidity(r,null,e)},this),D(this.$$controls,e),e.$$parentForm=Ko},$setDirty:function(){this.$$animate.removeClass(this.$$element,Oa),this.$$animate.addClass(this.$$element,Pa),this.$dirty=!0,this.$pristine=!1,this.$$parentForm.$setDirty()},$setPristine:function(){this.$$animate.setClass(this.$$element,Oa,Pa+" "+Zo),this.$dirty=!1,this.$pristine=!0,this.$submitted=!1,n(this.$$controls,function(e){e.$setPristine()})},$setUntouched:function(){n(this.$$controls,function(e){e.$setUntouched()})},$setSubmitted:function(){this.$$animate.addClass(this.$$element,Zo),this.$submitted=!0,this.$$parentForm.$setSubmitted()}},yn({clazz:vn,set:function(e,t,r){var n=e[t];if(n){var i=n.indexOf(r);i===-1&&n.push(r)}else e[t]=[r]},unset:function(e,t,r){var n=e[t];n&&(D(n,r),0===n.length&&delete e[t])}});var ea=function(e){return["$timeout","$parse",function(t,r){function n(e){return""===e?r('this[""]').assign:r(e).assign||h}var i={name:"form",restrict:e?"EAC":"E",require:["form","^^?form"],controller:vn,compile:function(r,i){r.addClass(Oa).addClass(Ra);var o=i.name?"name":!(!e||!i.ngForm)&&"ngForm";return{pre:function(e,r,i,a){var s=a[0];if(!("action"in i)){var u=function(t){e.$apply(function(){s.$commitViewValue(),s.$setSubmitted()}),t.preventDefault()};r[0].addEventListener("submit",u),r.on("$destroy",function(){t(function(){r[0].removeEventListener("submit",u)},0,!1)})}var c=a[1]||s.$$parentForm;c.$addControl(s);var f=o?n(s.$name):h;o&&(f(e,s),i.$observe(o,function(t){s.$name!==t&&(f(e,void 0),s.$$parentForm.$$renameControl(s,t),(f=n(s.$name))(e,s))})),r.on("$destroy",function(){s.$$parentForm.$removeControl(s),f(e,void 0),l(s,Ko)})}}}};return i}]},ta=ea(),ra=ea(!0),na=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,ia=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:\/?#]+|\[[a-f\d:]+])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,oa=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,aa=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,sa=/^(\d{4,})-(\d{2})-(\d{2})$/,ua=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,la=/^(\d{4,})-W(\d\d)$/,ca=/^(\d{4,})-(\d\d)$/,fa=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,pa="keydown wheel mousedown",ha=ge();n("date,datetime-local,month,time,week".split(","),function(e){ha[e]=!0});var da={text:wn,date:En("date",sa,kn(sa,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":En("datetimelocal",ua,kn(ua,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:En("time",fa,kn(fa,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:En("week",la,$n,"yyyy-Www"),month:En("month",ca,kn(ca,["yyyy","MM"]),"yyyy-MM"),number:Fn,url:jn,email:Rn,radio:Ln,range:Nn,checkbox:Pn,hidden:h,button:h,submit:h,reset:h,file:h},va=["$browser","$sniffer","$filter","$parse",function(e,t,r,n){return{restrict:"E",require:["?ngModel"],link:{pre:function(i,o,a,s){s[0]&&(da[Vn(a.type)]||da.text)(i,o,a,s[0],t,e,r,n)}}}}],ga=/^(true|false|\d+)$/,ya=function(){function e(e,t,r){var n=m(r)?r:9===Jn?"":null;e.prop("value",n),t.$set("value",r)}return{restrict:"A",priority:100,compile:function(t,r){return ga.test(r.ngValue)?function(t,r,n){var i=t.$eval(n.ngValue);e(r,n,i)}:function(t,r,n){t.$watch(n.ngValue,function(t){e(r,n,t)})}}}},ma=["$compile",function(e){return{restrict:"AC",compile:function(t){return e.$$addBindingClass(t),function(t,r,n){e.$$addBindingInfo(r,n.ngBind),r=r[0],t.$watch(n.ngBind,function(e){r.textContent=ye(e)})}}}}],ba=["$interpolate","$compile",function(e,t){return{compile:function(r){return t.$$addBindingClass(r),function(r,n,i){var o=e(n.attr(i.$attr.ngBindTemplate));t.$$addBindingInfo(n,o.expressions),n=n[0],i.$observe("ngBindTemplate",function(e){n.textContent=y(e)?"":e})}}}}],wa=["$sce","$parse","$compile",function(e,t,r){return{restrict:"A",compile:function(n,i){var o=t(i.ngBindHtml),a=t(i.ngBindHtml,function(t){return e.valueOf(t)});return r.$$addBindingClass(n),function(t,n,i){r.$$addBindingInfo(n,i.ngBindHtml),t.$watch(a,function(){var r=o(t);n.html(e.getTrustedHtml(r)||"")})}}}}],xa=v({restrict:"A",require:"ngModel",link:function(e,t,r,n){n.$viewChangeListeners.push(function(){e.$eval(r.ngChange)})}}),$a=Qn("",!0),ka=Qn("Odd",0),Ea=Qn("Even",1),_a=hn({compile:function(e,t){t.$set("ngCloak",void 0),e.removeClass("ng-cloak")}}),Sa=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],Aa={},Ca={blur:!0,focus:!0};n("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(e){var t=$t("ng-"+e);Aa[t]=["$parse","$rootScope",function(r,n){return{restrict:"A",compile:function(i,o){var a=r(o[t]);return function(t,r){r.on(e,function(r){var i=function(){a(t,{$event:r})};Ca[e]&&n.$$phase?t.$evalAsync(i):t.$apply(i)})}}}}]});var Ia=["$animate","$compile",function(e,t){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(r,n,i,o,a){var s,u,l;r.$watch(i.ngIf,function(r){r?u||a(function(r,o){u=o,r[r.length++]=t.$$createComment("end ngIf",i.ngIf),s={clone:r},e.enter(r,n.parent(),n)}):(l&&(l.remove(),l=null),u&&(u.$destroy(),u=null),s&&(l=ve(s.clone),e.leave(l).done(function(e){e!==!1&&(l=null)}),s=null))})}}}],Ta=["$templateRequest","$anchorScroll","$animate",function(e,t,r){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:ai.noop,compile:function(n,i){var o=i.ngInclude||i.src,a=i.onload||"",s=i.autoscroll;return function(n,i,u,l,c){var f,p,h,d=0,v=function(){p&&(p.remove(),p=null),f&&(f.$destroy(),f=null),h&&(r.leave(h).done(function(e){e!==!1&&(p=null)}),p=h,h=null)};n.$watch(o,function(o){var u=function(e){e===!1||!m(s)||s&&!n.$eval(s)||t()},p=++d;o?(e(o,!0).then(function(e){if(!n.$$destroyed&&p===d){var t=n.$new();l.template=e;var s=c(t,function(e){v(),r.enter(e,null,i).done(u)});f=t,h=s,f.$emit("$includeContentLoaded",o),n.$eval(a)}},function(){n.$$destroyed||p===d&&(v(),n.$emit("$includeContentError",o))}),n.$emit("$includeContentRequested",o)):(v(),l.template=null)})}}}}],Fa=["$compile",function(t){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(r,n,i,o){return ni.call(n[0]).match(/SVG/)?(n.empty(),void t(Fe(o.template,e.document).childNodes)(r,function(e){n.append(e)},{futureParentElement:n})):(n.html(o.template),void t(n.contents())(r))}}}],Na=hn({priority:450,compile:function(){return{pre:function(e,t,r){e.$eval(r.ngInit)}}}}),ja=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(e,t,r,i){var o=r.ngList||", ",a="false"!==r.ngTrim,s=a?fi(o):o,u=function(e){if(!y(e)){var t=[];return e&&n(e.split(s),function(e){e&&t.push(a?fi(e):e)}),t}};i.$parsers.push(u),i.$formatters.push(function(e){if(li(e))return e.join(o)}),i.$isEmpty=function(e){return!e||!e.length}}}},Ra="ng-valid",La="ng-invalid",Oa="ng-pristine",Pa="ng-dirty",Qa="ng-untouched",Da="ng-touched",Ma="ng-empty",qa="ng-not-empty",Ua=t("ngModel");Dn.$inject=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$q","$interpolate"],Dn.prototype={$$initGetterSetters:function(){if(this.$options.getOption("getterSetter")){var e=this.$$parse(this.$$attr.ngModel+"()"),t=this.$$parse(this.$$attr.ngModel+"($$$p)");this.$$ngModelGet=function(t){var r=this.$$parsedNgModel(t);return E(r)&&(r=e(t)),r},this.$$ngModelSet=function(e,r){E(this.$$parsedNgModel(e))?t(e,{$$$p:r}):this.$$parsedNgModelAssign(e,r)}}else if(!this.$$parsedNgModel.assign)throw Ua("nonassign","Expression '{0}' is non-assignable. Element: {1}",this.$$attr.ngModel,K(this.$$element))},$render:h,$isEmpty:function(e){return y(e)||""===e||null===e||e!==e},$$updateEmptyClasses:function(e){this.$isEmpty(e)?(this.$$animate.removeClass(this.$$element,qa),this.$$animate.addClass(this.$$element,Ma)):(this.$$animate.removeClass(this.$$element,Ma),this.$$animate.addClass(this.$$element,qa))},$setPristine:function(){this.$dirty=!1,this.$pristine=!0,this.$$animate.removeClass(this.$$element,Pa),this.$$animate.addClass(this.$$element,Oa)},$setDirty:function(){this.$dirty=!0,this.$pristine=!1,this.$$animate.removeClass(this.$$element,Oa),this.$$animate.addClass(this.$$element,Pa),this.$$parentForm.$setDirty()},$setUntouched:function(){this.$touched=!1,this.$untouched=!0,this.$$animate.setClass(this.$$element,Qa,Da)},$setTouched:function(){this.$touched=!0,this.$untouched=!1,this.$$animate.setClass(this.$$element,Da,Qa)},$rollbackViewValue:function(){this.$$timeout.cancel(this.$$pendingDebounce),this.$viewValue=this.$$lastCommittedViewValue,this.$render()},$validate:function(){if(!ui(this.$modelValue)){var e=this.$$lastCommittedViewValue,t=this.$$rawModelValue,r=this.$valid,n=this.$modelValue,i=this.$options.getOption("allowInvalid"),o=this;this.$$runValidators(t,e,function(e){i||r===e||(o.$modelValue=e?t:void 0,o.$modelValue!==n&&o.$$writeModelToScope())})}},$$runValidators:function(e,t,r){function i(){var e=c.$$parserName||"parse";return y(c.$$parserValid)?(s(e,null),!0):(c.$$parserValid||(n(c.$validators,function(e,t){s(t,null)}),n(c.$asyncValidators,function(e,t){s(t,null)})),s(e,c.$$parserValid),c.$$parserValid)}function o(){var r=!0;return n(c.$validators,function(n,i){var o=Boolean(n(e,t));r=r&&o,s(i,o)}),!!r||(n(c.$asyncValidators,function(e,t){s(t,null)}),!1)}function a(){var r=[],i=!0;n(c.$asyncValidators,function(n,o){var a=n(e,t);if(!N(a))throw Ua("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",a);s(o,void 0),r.push(a.then(function(){s(o,!0)},function(){i=!1,s(o,!1)}))}),r.length?c.$$q.all(r).then(function(){u(i)},h):u(!0)}function s(e,t){l===c.$$currentValidationRunId&&c.$setValidity(e,t)}function u(e){l===c.$$currentValidationRunId&&r(e)}this.$$currentValidationRunId++;var l=this.$$currentValidationRunId,c=this;return i()&&o()?void a():void u(!1)},$commitViewValue:function(){var e=this.$viewValue;this.$$timeout.cancel(this.$$pendingDebounce),(this.$$lastCommittedViewValue!==e||""===e&&this.$$hasNativeValidators)&&(this.$$updateEmptyClasses(e),this.$$lastCommittedViewValue=e,this.$pristine&&this.$setDirty(),this.$$parseAndValidate())},$$parseAndValidate:function(){function e(){n.$modelValue!==o&&n.$$writeModelToScope()}var t=this.$$lastCommittedViewValue,r=t,n=this;if(this.$$parserValid=!y(r)||void 0,this.$$parserValid)for(var i=0;i<this.$parsers.length;i++)if(r=this.$parsers[i](r),y(r)){this.$$parserValid=!1;break}ui(this.$modelValue)&&(this.$modelValue=this.$$ngModelGet(this.$$scope));var o=this.$modelValue,a=this.$options.getOption("allowInvalid");this.$$rawModelValue=r,a&&(this.$modelValue=r,e()),this.$$runValidators(r,this.$$lastCommittedViewValue,function(t){a||(n.$modelValue=t?r:void 0,e())})},$$writeModelToScope:function(){this.$$ngModelSet(this.$$scope,this.$modelValue),n(this.$viewChangeListeners,function(e){try{e()}catch(e){this.$$exceptionHandler(e)}},this)},$setViewValue:function(e,t){this.$viewValue=e,this.$options.getOption("updateOnDefault")&&this.$$debounceViewValueCommit(t)},$$debounceViewValueCommit:function(e){var t=this.$options.getOption("debounce");$(t[e])?t=t[e]:$(t.default)&&(t=t.default),this.$$timeout.cancel(this.$$pendingDebounce);var r=this;t>0?this.$$pendingDebounce=this.$$timeout(function(){r.$commitViewValue()},t):this.$$scope.$root.$$phase?this.$commitViewValue():this.$$scope.$apply(function(){r.$commitViewValue()})},$overrideModelOptions:function(e){this.$options=this.$options.createChild(e)}},yn({clazz:Dn,set:function(e,t){e[t]=!0},unset:function(e,t){delete e[t]}});var Ba,Ga=["$rootScope",function(e){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:Dn,priority:1,compile:function(t){return t.addClass(Oa).addClass(Qa).addClass(Ra),{pre:function(e,t,r,n){var i=n[0],o=n[1]||i.$$parentForm,a=n[2];a&&(i.$options=a.$options),i.$$initGetterSetters(),o.$addControl(i),r.$observe("name",function(e){i.$name!==e&&i.$$parentForm.$$renameControl(i,e)}),e.$on("$destroy",function(){i.$$parentForm.$removeControl(i)})},post:function(t,r,n,i){function o(){a.$setTouched()}var a=i[0];a.$options.getOption("updateOn")&&r.on(a.$options.getOption("updateOn"),function(e){a.$$debounceViewValueCommit(e&&e.type)}),r.on("blur",function(){a.$touched||(e.$$phase?t.$evalAsync(o):t.$apply(o))})}}}}}],Ha=/(\s+|^)default(\s+|$)/;qn.prototype={getOption:function(e){return this.$$options[e]},createChild:function(e){var t=!1;return e=l({},e),n(e,function(r,n){"$inherit"===r?"*"===n?t=!0:(e[n]=this.$$options[n],"updateOn"===n&&(e.updateOnDefault=this.$$options.updateOnDefault)):"updateOn"===n&&(e.updateOnDefault=!1,e[n]=fi(r.replace(Ha,function(){return e.updateOnDefault=!0," "})))},this),t&&(delete e["*"],Un(e,this.$$options)),Un(e,Ba.$$options),new qn(e)}},Ba=new qn({updateOn:"",updateOnDefault:!0,debounce:0,getterSetter:!1,allowInvalid:!1,timezone:null});var Va=function(){function e(e,t){this.$$attrs=e,this.$$scope=t}return e.$inject=["$attrs","$scope"],e.prototype={$onInit:function(){var e=this.parentCtrl?this.parentCtrl.$options:Ba,t=this.$$scope.$eval(this.$$attrs.ngModelOptions);this.$options=e.createChild(t)}},{restrict:"A",priority:10,require:{parentCtrl:"?^^ngModelOptions"},bindToController:!0,controller:e}},za=hn({terminal:!0,priority:1e3}),Wa=t("ngOptions"),Xa=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([$\w][$\w]*)|(?:\(\s*([$\w][$\w]*)\s*,\s*([$\w][$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,Ja=["$compile","$document","$parse",function(t,i,o){function a(e,t,n){function i(e,t,r,n,i){this.selectValue=e,this.viewValue=t,this.label=r,this.group=n,this.disabled=i}function a(e){var t;if(!l&&r(e))t=e;else{t=[];for(var n in e)e.hasOwnProperty(n)&&"$"!==n.charAt(0)&&t.push(n)}return t}var s=e.match(Xa);if(!s)throw Wa("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",e,K(t));var u=s[5]||s[7],l=s[6],c=/ as /.test(s[0])&&s[1],f=s[9],p=o(s[2]?s[1]:u),h=c&&o(c),d=h||p,v=f&&o(f),g=f?function(e,t){return v(n,t)}:function(e){return nt(e)},y=function(e,t){return g(e,k(e,t))},m=o(s[2]||s[1]),b=o(s[3]||""),w=o(s[4]||""),x=o(s[8]),$={},k=l?function(e,t){return $[l]=t,$[u]=e,$}:function(e){return $[u]=e,$};return{trackBy:f,getTrackByValue:y,getWatchables:o(x,function(e){var t=[];e=e||[];for(var r=a(e),i=r.length,o=0;o<i;o++){var u=e===r?o:r[o],l=e[u],c=k(l,u),f=g(l,c);if(t.push(f),s[2]||s[1]){var p=m(n,c);t.push(p)}if(s[4]){var h=w(n,c);t.push(h)}}return t}),getOptions:function(){for(var e=[],t={},r=x(n)||[],o=a(r),s=o.length,u=0;u<s;u++){var l=r===o?u:o[u],c=r[l],p=k(c,l),h=d(n,p),v=g(h,p),$=m(n,p),E=b(n,p),_=w(n,p),S=new i(v,h,$,E,_);e.push(S),t[v]=S}return{items:e,selectValueMap:t,getOptionFromViewValue:function(e){return t[y(e)]},getViewValueFromOption:function(e){return f?M(e.viewValue):e.viewValue}}}}}function s(e,r,o,s){function c(e,t){var r=u.cloneNode(!1);t.appendChild(r),p(e,r)}function f(e){var t=k.getOptionFromViewValue(e),r=t&&t.element;return r&&!r.selected&&(r.selected=!0),t}function p(e,t){e.element=t,t.disabled=e.disabled,e.label!==t.label&&(t.label=e.label,t.textContent=e.label),t.value=e.selectValue}function h(){var e=k&&d.readValue();if(k)for(var t=k.items.length-1;t>=0;t--){var n=k.items[t];We(m(n.group)?n.element.parentNode:n.element)}k=E.getOptions();var i={};if(x&&r.prepend(d.emptyOption),k.items.forEach(function(e){var t;m(e.group)?(t=i[e.group],t||(t=l.cloneNode(!1),_.appendChild(t),
t.label=null===e.group?"null":e.group,i[e.group]=t),c(e,t)):c(e,_)}),r[0].appendChild(_),v.$render(),!v.$isEmpty(e)){var o=d.readValue(),a=E.trackBy||g;(a?q(e,o):e===o)||(v.$setViewValue(o),v.$render())}}for(var d=s[0],v=s[1],g=o.multiple,y=0,b=r.children(),w=b.length;y<w;y++)if(""===b[y].value){d.hasEmptyOption=!0,d.emptyOption=b.eq(y);break}var x=!!d.emptyOption,$=Kn(u.cloneNode(!1));$.val("?");var k,E=a(o.ngOptions,r,e),_=i[0].createDocumentFragment();d.generateUnknownOptionValue=function(e){return"?"},g?(d.writeValue=function(e){var t=e&&e.map(f)||[];k.items.forEach(function(e){e.element.selected&&!Q(t,e)&&(e.element.selected=!1)})},d.readValue=function(){var e=r.val()||[],t=[];return n(e,function(e){var r=k.selectValueMap[e];r&&!r.disabled&&t.push(k.getViewValueFromOption(r))}),t},E.trackBy&&e.$watchCollection(function(){if(li(v.$viewValue))return v.$viewValue.map(function(e){return E.getTrackByValue(e)})},function(){v.$render()})):(d.writeValue=function(e){var t=k.selectValueMap[r.val()],n=k.getOptionFromViewValue(e);t&&t.element.removeAttribute("selected"),n?(r[0].value!==n.selectValue&&(d.removeUnknownOption(),d.unselectEmptyOption(),r[0].value=n.selectValue,n.element.selected=!0),n.element.setAttribute("selected","selected")):x?d.selectEmptyOption():d.unknownOption.parent().length?d.updateUnknownOption(e):d.renderUnknownOption(e)},d.readValue=function(){var e=k.selectValueMap[r.val()];return e&&!e.disabled?(d.unselectEmptyOption(),d.removeUnknownOption(),k.getViewValueFromOption(e)):null},E.trackBy&&e.$watch(function(){return E.getTrackByValue(v.$viewValue)},function(){v.$render()})),x&&(d.emptyOption.remove(),t(d.emptyOption)(e),d.emptyOption[0].nodeType===ki?(d.hasEmptyOption=!1,d.registerOption=function(e,t){""===t.val()&&(d.hasEmptyOption=!0,d.emptyOption=t,d.emptyOption.removeClass("ng-scope"),v.$render(),t.on("$destroy",function(){d.hasEmptyOption=!1,d.emptyOption=void 0}))}):d.emptyOption.removeClass("ng-scope")),r.empty(),h(),e.$watchCollection(E.getWatchables,h)}var u=e.document.createElement("option"),l=e.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(e,t,r,n){n[0].registerOption=h},post:s}}}],Ka=["$locale","$interpolate","$log",function(e,t,r){var i=/{}/g,o=/^when(Minus)?(.+)$/;return{link:function(a,s,u){function l(e){s.text(e||"")}var c,f=u.count,p=u.$attr.when&&s.attr(u.$attr.when),d=u.offset||0,v=a.$eval(p)||{},g={},m=t.startSymbol(),b=t.endSymbol(),w=m+f+"-"+d+b,x=ai.noop;n(u,function(e,t){var r=o.exec(t);if(r){var n=(r[1]?"-":"")+Vn(r[2]);v[n]=s.attr(u.$attr[t])}}),n(v,function(e,r){g[r]=t(e.replace(i,w))}),a.$watch(f,function(t){var n=parseFloat(t),i=ui(n);if(i||n in v||(n=e.pluralCat(n-d)),!(n===c||i&&ui(c))){x();var o=g[n];y(o)?(null!=t&&r.debug("ngPluralize: no rule defined for '"+n+"' in "+p),x=h,l()):x=a.$watch(o,l),c=n}})}}}],Ya=["$parse","$animate","$compile",function(e,i,o){var a="$$NG_REMOVED",s=t("ngRepeat"),u=function(e,t,r,n,i,o,a){e[r]=n,i&&(e[i]=o),e.$index=t,e.$first=0===t,e.$last=t===a-1,e.$middle=!(e.$first||e.$last),e.$odd=!(e.$even=0===(1&t))},l=function(e){return e.clone[0]},c=function(e){return e.clone[e.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(t,f){var p=f.ngRepeat,h=o.$$createComment("end ngRepeat",p),d=p.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!d)throw s("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",p);var v=d[1],g=d[2],y=d[3],m=d[4];if(d=v.match(/^(?:(\s*[$\w]+)|\(\s*([$\w]+)\s*,\s*([$\w]+)\s*\))$/),!d)throw s("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",v);var b=d[3]||d[1],w=d[2];if(y&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(y)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(y)))throw s("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",y);var x,$,k,E,_={$id:nt};return m?x=e(m):(k=function(e,t){return nt(t)},E=function(e){return e}),function(e,t,o,f,d){x&&($=function(t,r,n){return w&&(_[w]=t),_[b]=r,_.$index=n,x(e,_)});var v=ge();e.$watchCollection(g,function(o){var f,g,m,x,_,S,A,C,I,T,F,N,j=t[0],R=ge();if(y&&(e[y]=o),r(o))I=o,C=$||k;else{C=$||E,I=[];for(var L in o)Hn.call(o,L)&&"$"!==L.charAt(0)&&I.push(L)}for(x=I.length,F=new Array(x),f=0;f<x;f++)if(_=o===I?f:I[f],S=o[_],A=C(_,S,f),v[A])T=v[A],delete v[A],R[A]=T,F[f]=T;else{if(R[A])throw n(F,function(e){e&&e.scope&&(v[e.id]=e)}),s("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",p,A,S);F[f]={id:A,scope:void 0,clone:void 0},R[A]=!0}for(var O in v){if(T=v[O],N=ve(T.clone),i.leave(N),N[0].parentNode)for(f=0,g=N.length;f<g;f++)N[f][a]=!0;T.scope.$destroy()}for(f=0;f<x;f++)if(_=o===I?f:I[f],S=o[_],T=F[f],T.scope){m=j;do m=m.nextSibling;while(m&&m[a]);l(T)!==m&&i.move(ve(T.clone),null,j),j=c(T),u(T.scope,f,b,S,w,_,x)}else d(function(e,t){T.scope=t;var r=h.cloneNode(!1);e[e.length++]=r,i.enter(e,null,j),j=r,T.clone=e,R[T.id]=T,u(T.scope,f,b,S,w,_,x)});v=R})}}}}],Za="ng-hide",es="ng-hide-animate",ts=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,r,n){t.$watch(n.ngShow,function(t){e[t?"removeClass":"addClass"](r,Za,{tempClasses:es})})}}}],rs=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,r,n){t.$watch(n.ngHide,function(t){e[t?"addClass":"removeClass"](r,Za,{tempClasses:es})})}}}],ns=hn(function(e,t,r){e.$watch(r.ngStyle,function(e,r){r&&e!==r&&n(r,function(e,r){t.css(r,"")}),e&&t.css(e)},!0)}),is=["$animate","$compile",function(e,t){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(r,i,o,a){var s=o.ngSwitch||o.on,u=[],l=[],c=[],f=[],p=function(e,t){return function(r){r!==!1&&e.splice(t,1)}};r.$watch(s,function(r){for(var i,o;c.length;)e.cancel(c.pop());for(i=0,o=f.length;i<o;++i){var s=ve(l[i].clone);f[i].$destroy();var h=c[i]=e.leave(s);h.done(p(c,i))}l.length=0,f.length=0,(u=a.cases["!"+r]||a.cases["?"])&&n(u,function(r){r.transclude(function(n,i){f.push(i);var o=r.element;n[n.length++]=t.$$createComment("end ngSwitchWhen");var a={clone:n};l.push(a),e.enter(n,o.parent(),o)})})})}}}],os=hn({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,r,i,o){var a=r.ngSwitchWhen.split(r.ngSwitchWhenSeparator).sort().filter(function(e,t,r){return r[t-1]!==e});n(a,function(e){i.cases["!"+e]=i.cases["!"+e]||[],i.cases["!"+e].push({transclude:o,element:t})})}}),as=hn({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,r,n,i){n.cases["?"]=n.cases["?"]||[],n.cases["?"].push({transclude:i,element:t})}}),ss=t("ngTransclude"),us=["$compile",function(e){return{restrict:"EAC",terminal:!0,compile:function(t){var r=e(t.contents());return t.empty(),function(e,t,n,i,o){function a(e,r){e.length&&u(e)?t.append(e):(s(),r.$destroy())}function s(){r(e,function(e){t.append(e)})}function u(e){for(var t=0,r=e.length;t<r;t++){var n=e[t];if(n.nodeType!==$i||n.nodeValue.trim())return!0}}if(!o)throw ss("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",K(t));n.ngTransclude===n.$attr.ngTransclude&&(n.ngTransclude="");var l=n.ngTransclude||n.ngTranscludeSlot;o(a,null,l),l&&!o.isSlotFilled(l)&&s()}}}}],ls=["$templateCache",function(e){return{restrict:"E",terminal:!0,compile:function(t,r){if("text/ng-template"===r.type){var n=r.id,i=t[0].text;e.put(n,i)}}}}],cs={$setViewValue:h,$render:h},fs=["$element","$scope",function(t,r){function n(){u||(u=!0,r.$$postDigest(function(){u=!1,a.ngModelCtrl.$render()}))}function i(e){l||(l=!0,r.$$postDigest(function(){r.$$destroyed||(l=!1,a.ngModelCtrl.$setViewValue(a.readValue()),e&&a.ngModelCtrl.$render())}))}function o(e){e.prop("selected",!0),e.attr("selected",!0)}var a=this,s=new Gi;a.selectValueMap={},a.ngModelCtrl=cs,a.multiple=!1,a.unknownOption=Kn(e.document.createElement("option")),a.hasEmptyOption=!1,a.emptyOption=void 0,a.renderUnknownOption=function(e){var r=a.generateUnknownOptionValue(e);a.unknownOption.val(r),t.prepend(a.unknownOption),o(a.unknownOption),t.val(r)},a.updateUnknownOption=function(e){var r=a.generateUnknownOptionValue(e);a.unknownOption.val(r),o(a.unknownOption),t.val(r)},a.generateUnknownOptionValue=function(e){return"? "+nt(e)+" ?"},a.removeUnknownOption=function(){a.unknownOption.parent()&&a.unknownOption.remove()},a.selectEmptyOption=function(){a.emptyOption&&(t.val(""),o(a.emptyOption))},a.unselectEmptyOption=function(){a.hasEmptyOption&&a.emptyOption.removeAttr("selected")},r.$on("$destroy",function(){a.renderUnknownOption=h}),a.readValue=function(){var e=t.val(),r=e in a.selectValueMap?a.selectValueMap[e]:e;return a.hasOption(r)?r:null},a.writeValue=function(e){var r=t[0].options[t[0].selectedIndex];if(r&&r.removeAttribute("selected"),a.hasOption(e)){a.removeUnknownOption();var n=nt(e);t.val(n in a.selectValueMap?n:e);var i=t[0].options[t[0].selectedIndex];o(Kn(i))}else null==e&&a.emptyOption?(a.removeUnknownOption(),a.selectEmptyOption()):a.unknownOption.parent().length?a.updateUnknownOption(e):a.renderUnknownOption(e)},a.addOption=function(e,t){if(t[0].nodeType!==ki){he(e,'"option value"'),""===e&&(a.hasEmptyOption=!0,a.emptyOption=t);var r=s.get(e)||0;s.set(e,r+1),n()}},a.removeOption=function(e){var t=s.get(e);t&&(1===t?(s.delete(e),""===e&&(a.hasEmptyOption=!1,a.emptyOption=void 0)):s.set(e,t-1))},a.hasOption=function(e){return!!s.get(e)};var u=!1,l=!1;a.registerOption=function(e,t,r,o,s){if(r.$attr.ngValue){var u,l=NaN;r.$observe("value",function(e){var r,n=t.prop("selected");m(l)&&(a.removeOption(u),delete a.selectValueMap[l],r=!0),l=nt(e),u=e,a.selectValueMap[l]=e,a.addOption(e,t),t.attr("value",l),r&&n&&i()})}else o?r.$observe("value",function(e){a.readValue();var r,n=t.prop("selected");m(u)&&(a.removeOption(u),r=!0),u=e,a.addOption(e,t),r&&n&&i()}):s?e.$watch(s,function(e,n){r.$set("value",e);var o=t.prop("selected");n!==e&&a.removeOption(n),a.addOption(e,t),n&&o&&i()}):a.addOption(r.value,t);r.$observe("disabled",function(e){("true"===e||e&&t.prop("selected"))&&(a.multiple?i(!0):(a.ngModelCtrl.$setViewValue(null),a.ngModelCtrl.$render()))}),t.on("$destroy",function(){var e=a.readValue(),t=r.value;a.removeOption(t),n(),(a.multiple&&e&&e.indexOf(t)!==-1||e===t)&&i(!0)})}}],ps=function(){function e(e,t,r,i){var o=i[0],a=i[1];if(!a)return void(o.registerOption=h);if(o.ngModelCtrl=a,t.on("change",function(){o.removeUnknownOption(),e.$apply(function(){a.$setViewValue(o.readValue())})}),r.multiple){o.multiple=!0,o.readValue=function(){var e=[];return n(t.find("option"),function(t){if(t.selected&&!t.disabled){var r=t.value;e.push(r in o.selectValueMap?o.selectValueMap[r]:r)}}),e},o.writeValue=function(e){n(t.find("option"),function(t){t.selected=!!e&&(Q(e,t.value)||Q(e,o.selectValueMap[t.value]))})};var s,u=NaN;e.$watch(function(){u!==a.$viewValue||q(s,a.$viewValue)||(s=be(a.$viewValue),a.$render()),u=a.$viewValue}),a.$isEmpty=function(e){return!e||0===e.length}}}function t(e,t,r,n){var i=n[1];if(i){var o=n[0];i.$render=function(){o.writeValue(i.$viewValue)}}}return{restrict:"E",require:["select","?ngModel"],controller:fs,priority:1,link:{pre:e,post:t}}},hs=["$interpolate",function(e){return{restrict:"E",priority:100,compile:function(t,r){var n,i;return m(r.ngValue)||(m(r.value)?n=e(r.value,!0):(i=e(t.text(),!0),i||r.$set("value",t.text()))),function(e,t,r){var o="$selectController",a=t.parent(),s=a.data(o)||a.parent().data(o);s&&s.registerOption(e,t,r,n,i)}}}}],ds=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,r,n){n&&(r.required=!0,n.$validators.required=function(e,t){return!r.required||!n.$isEmpty(t)},r.$observe("required",function(){n.$validate()}))}}},vs=function(){return{restrict:"A",require:"?ngModel",link:function(e,r,n,i){if(i){var o,a=n.ngPattern||n.pattern;n.$observe("pattern",function(e){if(x(e)&&e.length>0&&(e=new RegExp("^"+e+"$")),e&&!e.test)throw t("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",a,e,K(r));o=e||void 0,i.$validate()}),i.$validators.pattern=function(e,t){return i.$isEmpty(t)||y(o)||o.test(t)}}}}},gs=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,r,n){if(n){var i=-1;r.$observe("maxlength",function(e){var t=f(e);i=ui(t)?-1:t,n.$validate()}),n.$validators.maxlength=function(e,t){return i<0||n.$isEmpty(t)||t.length<=i}}}}},ys=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,r,n){if(n){var i=0;r.$observe("minlength",function(e){i=f(e)||0,n.$validate()}),n.$validators.minlength=function(e,t){return n.$isEmpty(t)||t.length>=i}}}}};return e.angular.bootstrap?void(e.console&&console.log("WARNING: Tried to load angular more than once.")):(ce(),$e(ai),ai.module("ngLocale",[],["$provide",function(e){function t(e){e+="";var t=e.indexOf(".");return t==-1?0:e.length-t-1}function r(e,r){var n=r;void 0===n&&(n=Math.min(t(e),3));var i=Math.pow(10,n),o=(e*i|0)%i;return{v:n,f:o}}var n={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};e.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a",short:"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(e,t){var i=0|e,o=r(e,t);return 1==i&&0==o.v?n.ONE:n.OTHER}})}]),void Kn(function(){oe(e.document,ae)}))}(window),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>'),/**
 * @license HTTP Auth Interceptor Module for AngularJS
 * (c) 2012 Witold Szczerba
 * License: MIT
 */
function(){"use strict";angular.module("http-auth-interceptor",["http-auth-interceptor-buffer"]).factory("authService",["$rootScope","httpBuffer",function(e,t){return{loginConfirmed:function(r,n){var i=n||function(e){return e};e.$broadcast("event:auth-loginConfirmed",r),t.retryAll(i)},loginCancelled:function(r,n){t.rejectAll(n),e.$broadcast("event:auth-loginCancelled",r)}}}]).config(["$httpProvider",function(e){e.interceptors.push(["$rootScope","$q","httpBuffer",function(e,t,r){return{responseError:function(n){var i=n.config||{};if(!i.ignoreAuthModule)switch(n.status){case 401:var o=t.defer(),a=r.append(i,o);return 1===a&&e.$broadcast("event:auth-loginRequired",n),o.promise;case 403:e.$broadcast("event:auth-forbidden",n)}return t.reject(n)}}}])}]),angular.module("http-auth-interceptor-buffer",[]).factory("httpBuffer",["$injector",function(e){function t(t,n){function i(e){n.resolve(e)}function o(e){n.reject(e)}r=r||e.get("$http"),r(t).then(i,o)}var r,n=[];return{append:function(e,t){return n.push({config:e,deferred:t})},rejectAll:function(e){if(e)for(var t=0;t<n.length;++t)n[t].deferred.reject(e);n=[]},retryAll:function(e){for(var r=0;r<n.length;++r){var i=e(n[r].config);i!==!1&&t(i,n[r].deferred)}n=[]}}}])}(),"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="http-auth-interceptor"),angular.module("fi.seco.sparql",[]);var fi;!function(e){var t;!function(e){var t;!function(e){"use strict";var t=function(){function e(){this.objectsById={},this.assignmentsById={}}return e}();e.UniqueObjectTracker=t;var r=function(){function e(e,t){this.$http=e,this.$q=t}return e.$inject=["$http","$q"],e.$componentName="sparqlService",e.stringToSPARQLString=function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/\f/g,"\\f")+'"'},e.bindingsToObject=function(t,r,n,i){void 0===r&&(r={});for(var o in t){var a=o,s=r,u=a.indexOf("_"),l=-1,c=void 0;for(i&&(c=i.assignmentsById);u!==-1;){a=o.substring(l+1,u);var f=o.substring(0,u);if(n&&n.bindingTypes&&n.bindingTypes[f]&&"uniqueArray"===n.bindingTypes[f]){s[a]||(s[a]=[]),i.objectsById[f]||(i.objectsById[f]={});var p=void 0;i.objectsById[f][t[f].value]?p=i.objectsById[f][t[f].value]:(p=n.bindingConverters[f](t[f],t),i.objectsById[f][t[f].value]=p),c[f]||(c[f]={}),c[f][t[f].value]||(s[f].push(p),c[f][t[f].value]={}),c=c[f][t[f].value],s=p}else n&&n.bindingTypes&&n.bindingTypes[f]&&"single"===n.bindingTypes[f]?(i.objectsById[f]||(i.objectsById[f]={}),i.objectsById[f][t[f].value]||(s[a]=n.bindingConverters[f](t[f],t),i.objectsById[f][t[f].value]=s[a])):s[a]||(s[a]=n.bindingConverters[f](t[f],t)),s=s[a];l=u,u=o.indexOf("_",u+1)}a=o.substring(l+1);var h=void 0;if(i&&n&&n.bindingTypes&&("single"===n.bindingTypes[o]||"uniqueArray"===n.bindingTypes[o])?(i.objectsById[o]||(i.objectsById[o]={}),i.objectsById[o][t[o].value]?h=i.objectsById[o][t[o].value]:(h=n&&n.bindingConverters&&n.bindingConverters[o]?n.bindingConverters[o](t[o],t):e.bindingToValue(t[o]),i.objectsById[o][t[o].value]=h)):n&&n.bindingConverters&&n.bindingConverters[o]?h=n.bindingConverters[o](t[o],t):n&&n.bindingTypes&&n.bindingTypes[o]&&("hash"===n.bindingTypes[o]||"ignore"===n.bindingTypes[o])||(h=e.bindingToValue(t[o])),n&&n.bindingTypes&&n.bindingTypes[o])switch(n.bindingTypes[o]){case"ignore":break;case"single":s[a]=h;break;case"array":Array.isArray(s[a])||(s[a]=[]),s[a].push(h);break;case"hash":if(s[a]||(s[a]={}),h)s[a][t[o].value]=h;else if("literal"===t[o].type){var d=t[o].datatype;d||(d=t[o]["xml:lang"],d||(d="")),s[a][d]=t[o].value}else s[a][t[o].value]=t[o].value;break;default:s[a]||(s[a]=[]),c[o]||(c[o]={}),c[o][t[o].value]||(c[o][t[o].value]=h,s[a].push(h))}else if(Array.isArray(s[a]))s[a].push(h);else if(null!==s[a]&&"object"==typeof s[a]&&t[o])if("literal"===t[o].type){var d=t[o].datatype;d||(d=t[o]["xml:lang"],d||(d="")),n&&n.bindingConverters&&n.bindingConverters[o]?s[a][d]=n.bindingConverters[o](t[o],t):s[a][d]=t[o].value}else n&&n.bindingConverters&&n.bindingConverters[o]?s[a][t[o].value]=n.bindingConverters[o](t[o],t):s[a][t[o].value]=t[o].value;else s[a]=h}return r},e.bindingToValue=function(e){if(e){if("uri"===e.type)return e.value;if("bnode"===e.type)return e.value;if(e.datatype)switch(e.datatype){case"http://www.w3.org/2001/XMLSchema#integer":case"http://www.w3.org/2001/XMLSchema#decimal":return parseInt(e.value,10);case"http://www.w3.org/2001/XMLSchema#float":case"http://www.w3.org/2001/XMLSchema#double":return parseFloat(e.value);case"http://www.w3.org/2001/XMLSchema#boolean":return!!e.value}return e.value}},e.bindingToString=function(e){if(!e)return"UNDEF";var t=e.value.replace(/\\/g,"\\\\").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\"/g,'\\"').replace(/\'/g,"\\'");if("uri"===e.type)return"<"+t+">";if("bnode"===e.type)return"_:"+t;if(!e.datatype)return e["xml:lang"]?'"'+t+'"@'+e["xml:lang"]:'"'+t+'"';switch(e.datatype){case"http://www.w3.org/2001/XMLSchema#integer":case"http://www.w3.org/2001/XMLSchema#decimal":case"http://www.w3.org/2001/XMLSchema#double":case"http://www.w3.org/2001/XMLSchema#boolean":return t;case"http://www.w3.org/2001/XMLSchema#string":return'"'+t+'"';default:return'"'+t+'"^^<'+e.datatype+">"}},e.prototype.check=function(e,t){var r=this.$q.defer();return this.$http(angular.extend({method:"GET",url:e,params:{query:"ASK {}"},headers:{Accept:"application/sparql-results+json"}},t)).then(function(e){return r.resolve(e.data.boolean===!0)},function(e){return r.resolve(!1)}),r.promise},e.prototype.checkUpdate=function(e,t){var r=this.$q.defer();return this.$http(angular.extend({method:"POST",url:e,headers:{"Content-Type":"application/sparql-update"},data:"INSERT DATA {}"},t)).then(function(e){return r.resolve(204===e.status)},function(e){return r.resolve(!1)}),r.promise},e.prototype.checkRest=function(e,t){var r=this.$q.defer();return this.$http(angular.extend({method:"POST",url:e+"?default",data:"",headers:{"Content-Type":"text/turtle"}},t)).then(function(e){return r.resolve(204===e.status)},function(e){return r.resolve(!1)}),r.promise},e.prototype.get=function(e,t,r){return this.$http(angular.extend({method:"GET",url:e,params:t?{graph:t}:{default:""},headers:{Accept:"text/turtle"}},r))},e.prototype.post=function(e,t,r,n){return this.$http(angular.extend({method:"POST",url:e,params:r?{graph:r}:{default:""},data:t,headers:{"Content-Type":"text/turtle"}},n))},e.prototype.put=function(e,t,r,n){return this.$http(angular.extend({method:"PUT",url:e,params:r?{graph:r}:{default:""},data:t,headers:{"Content-Type":"text/turtle"}},n))},e.prototype.delete=function(e,t,r){return this.$http(angular.extend({method:"DELETE",url:e,params:t?{graph:t}:{default:""}},r))},e.prototype.query=function(e,t,r){return t.length<=2048?this.$http(angular.extend({method:"GET",url:e,params:{query:t},headers:{Accept:"application/sparql-results+json"}},r)):this.$http(angular.extend({method:"POST",url:e,data:"query="+encodeURIComponent(t),headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/sparql-results+json"}},r))},e.prototype.construct=function(e,t,r){return t.length<=2048?this.$http(angular.extend({method:"GET",url:e,params:{query:t},headers:{Accept:"text/turtle"}},r)):this.$http(angular.extend({method:"POST",url:e,data:t,headers:{"Content-Type":"application/sparql-query",Accept:"text/turtle"}},r))},e.prototype.update=function(e,t,r){return this.$http(angular.extend({method:"POST",url:e,headers:{"Content-Type":"application/sparql-update"},data:t},r))},e}();angular.module("fi.seco.sparql").service("sparqlService",r),e.SparqlService=r}(t=e.sparql||(e.sparql={}))}(t=e.seco||(e.seco={}))}(fi||(fi={})),!function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.rdfstore=e()}}(function(){var define,module,exports;return function e(t,r,n){function i(a,s){if(!r[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+a+"'")}var l=r[a]={exports:{}};t[a][0].call(l.exports,function(e){var r=t[a][1][e];return i(r?r:e)},l,l.exports,e,t,r,n)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(e,t,r){!function(){function e(e){this.message=e}var t="undefined"!=typeof r?r:this,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.prototype=new Error,e.prototype.name="InvalidCharacterError",t.btoa||(t.btoa=function(t){for(var r,i,o=0,a=n,s="";t.charAt(0|o)||(a="=",o%1);s+=a.charAt(63&r>>8-o%1*8)){if(i=t.charCodeAt(o+=.75),i>255)throw new e("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");r=r<<8|i}return s}),t.atob||(t.atob=function(t){if(t=t.replace(/=+$/,""),t.length%4==1)throw new e("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,i,o=0,a=0,s="";i=t.charAt(a++);~i&&(r=o%4?64*r+i:i,o++%4)?s+=String.fromCharCode(255&r>>(-2*o&6)):0)i=n.indexOf(i);return s})}()},{}],2:[function(e,t,r){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(e){"use strict";function t(e){var t=e.charCodeAt(0);return t===a?62:t===s?63:t<u?-1:t<u+10?t-u+26+26:t<c+26?t-c:t<l+26?t-l+26:void 0}function r(e){function r(e){l[f++]=e}var n,i,a,s,u,l;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var c=e.length;u="="===e.charAt(c-2)?2:"="===e.charAt(c-1)?1:0,l=new o(3*e.length/4-u),a=u>0?e.length-4:e.length;var f=0;for(n=0,i=0;n<a;n+=4,i+=3)s=t(e.charAt(n))<<18|t(e.charAt(n+1))<<12|t(e.charAt(n+2))<<6|t(e.charAt(n+3)),r((16711680&s)>>16),r((65280&s)>>8),r(255&s);return 2===u?(s=t(e.charAt(n))<<2|t(e.charAt(n+1))>>4,r(255&s)):1===u&&(s=t(e.charAt(n))<<10|t(e.charAt(n+1))<<4|t(e.charAt(n+2))>>2,r(s>>8&255),r(255&s)),l}function i(e){function t(e){return n.charAt(e)}function r(e){return t(e>>18&63)+t(e>>12&63)+t(e>>6&63)+t(63&e)}var i,o,a,s=e.length%3,u="";for(i=0,a=e.length-s;i<a;i+=3)o=(e[i]<<16)+(e[i+1]<<8)+e[i+2],u+=r(o);switch(s){case 1:o=e[e.length-1],u+=t(o>>2),u+=t(o<<4&63),u+="==";break;case 2:o=(e[e.length-2]<<8)+e[e.length-1],u+=t(o>>10),u+=t(o>>4&63),u+=t(o<<2&63),u+="="}return u}var o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="+".charCodeAt(0),s="/".charCodeAt(0),u="0".charCodeAt(0),l="a".charCodeAt(0),c="A".charCodeAt(0);e.toByteArray=r,e.fromByteArray=i}("undefined"==typeof r?this.base64js={}:r)},{}],3:[function(e,t,r){(function(r,n){/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE
 * @version   2.3.0
 */
(function(){"use strict";function i(e){return"function"==typeof e||"object"==typeof e&&null!==e}function o(e){return"function"==typeof e}function a(e){return"object"==typeof e&&null!==e}function s(e){H=e}function u(e){X=e}function l(){var e=r.nextTick,t=r.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);return Array.isArray(t)&&"0"===t[1]&&"10"===t[2]&&(e=setImmediate),function(){e(d)}}function c(){return function(){G(d)}}function f(){var e=0,t=new Y(d),r=document.createTextNode("");return t.observe(r,{characterData:!0}),function(){r.data=e=++e%2}}function p(){var e=new MessageChannel;return e.port1.onmessage=d,function(){e.port2.postMessage(0)}}function h(){return function(){setTimeout(d,1)}}function d(){for(var e=0;e<W;e+=2){var t=te[e],r=te[e+1];t(r),te[e]=void 0,te[e+1]=void 0}W=0}function v(){try{var t=e,r=t("vertx");return G=r.runOnLoop||r.runOnContext,c()}catch(e){return h()}}function g(){}function y(){return new TypeError("You cannot resolve a promise with itself")}function m(){return new TypeError("A promises callback cannot return that same promise.")}function b(e){try{return e.then}catch(e){return oe.error=e,oe}}function w(e,t,r,n){try{e.call(t,r,n)}catch(e){return e}}function x(e,t,r){X(function(e){var n=!1,i=w(r,t,function(r){n||(n=!0,t!==r?E(e,r):S(e,r))},function(t){n||(n=!0,A(e,t))},"Settle: "+(e._label||" unknown promise"));!n&&i&&(n=!0,A(e,i))},e)}function $(e,t){t._state===ne?S(e,t._result):t._state===ie?A(e,t._result):C(t,void 0,function(t){E(e,t)},function(t){A(e,t)})}function k(e,t){if(t.constructor===e.constructor)$(e,t);else{var r=b(t);r===oe?A(e,oe.error):void 0===r?S(e,t):o(r)?x(e,t,r):S(e,t)}}function E(e,t){e===t?A(e,y()):i(t)?k(e,t):S(e,t)}function _(e){e._onerror&&e._onerror(e._result),I(e)}function S(e,t){e._state===re&&(e._result=t,e._state=ne,0!==e._subscribers.length&&X(I,e))}function A(e,t){e._state===re&&(e._state=ie,e._result=t,X(_,e))}function C(e,t,r,n){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+ne]=r,i[o+ie]=n,0===o&&e._state&&X(I,e)}function I(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var n,i,o=e._result,a=0;a<t.length;a+=3)n=t[a],i=t[a+r],n?N(r,n,i,o):i(o);e._subscribers.length=0}}function T(){this.error=null}function F(e,t){try{return e(t)}catch(e){return ae.error=e,ae}}function N(e,t,r,n){var i,a,s,u,l=o(r);if(l){if(i=F(r,n),i===ae?(u=!0,a=i.error,i=null):s=!0,t===i)return void A(t,m())}else i=n,s=!0;t._state!==re||(l&&s?E(t,i):u?A(t,a):e===ne?S(t,i):e===ie&&A(t,i))}function j(e,t){try{t(function(t){E(e,t)},function(t){A(e,t)})}catch(t){A(e,t)}}function R(e,t){var r=this;r._instanceConstructor=e,r.promise=new e(g),r._validateInput(t)?(r._input=t,r.length=t.length,r._remaining=t.length,r._init(),0===r.length?S(r.promise,r._result):(r.length=r.length||0,r._enumerate(),0===r._remaining&&S(r.promise,r._result))):A(r.promise,r._validationError())}function L(e){return new se(this,e).promise}function O(e){function t(e){E(i,e)}function r(e){A(i,e)}var n=this,i=new n(g);if(!z(e))return A(i,new TypeError("You must pass an array to race.")),i;for(var o=e.length,a=0;i._state===re&&a<o;a++)C(n.resolve(e[a]),void 0,t,r);return i}function P(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var r=new t(g);return E(r,e),r}function Q(e){var t=this,r=new t(g);return A(r,e),r}function D(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function M(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function q(e){this._id=pe++,this._state=void 0,this._result=void 0,this._subscribers=[],g!==e&&(o(e)||D(),this instanceof q||M(),j(this,e))}function U(){var e;if("undefined"!=typeof n)e=n;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;t&&"[object Promise]"===Object.prototype.toString.call(t.resolve())&&!t.cast||(e.Promise=he)}var B;B=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var G,H,V,z=B,W=0,X=({}.toString,function(e,t){te[W]=e,te[W+1]=t,W+=2,2===W&&(H?H(d):V())}),J="undefined"!=typeof window?window:void 0,K=J||{},Y=K.MutationObserver||K.WebKitMutationObserver,Z="undefined"!=typeof r&&"[object process]"==={}.toString.call(r),ee="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,te=new Array(1e3);V=Z?l():Y?f():ee?p():void 0===J&&"function"==typeof e?v():h();var re=void 0,ne=1,ie=2,oe=new T,ae=new T;R.prototype._validateInput=function(e){return z(e)},R.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},R.prototype._init=function(){this._result=new Array(this.length)};var se=R;R.prototype._enumerate=function(){for(var e=this,t=e.length,r=e.promise,n=e._input,i=0;r._state===re&&i<t;i++)e._eachEntry(n[i],i)},R.prototype._eachEntry=function(e,t){var r=this,n=r._instanceConstructor;a(e)?e.constructor===n&&e._state!==re?(e._onerror=null,r._settledAt(e._state,t,e._result)):r._willSettleAt(n.resolve(e),t):(r._remaining--,r._result[t]=e)},R.prototype._settledAt=function(e,t,r){var n=this,i=n.promise;i._state===re&&(n._remaining--,e===ie?A(i,r):n._result[t]=r),0===n._remaining&&S(i,n._result)},R.prototype._willSettleAt=function(e,t){var r=this;C(e,void 0,function(e){r._settledAt(ne,t,e)},function(e){r._settledAt(ie,t,e)})};var ue=L,le=O,ce=P,fe=Q,pe=0,he=q;q.all=ue,q.race=le,q.resolve=ce,q.reject=fe,q._setScheduler=s,q._setAsap=u,q._asap=X,q.prototype={constructor:q,then:function(e,t){var r=this,n=r._state;if(n===ne&&!e||n===ie&&!t)return this;var i=new this.constructor(g),o=r._result;if(n){var a=arguments[n-1];X(function(){N(n,i,a,o)})}else C(r,i,e,t);return i},catch:function(e){return this.then(null,e)}};var de=U,ve={Promise:he,polyfill:de};"function"==typeof define&&define.amd?define(function(){return ve}):"undefined"!=typeof t&&t.exports?t.exports=ve:"undefined"!=typeof this&&(this.ES6Promise=ve),de()}).call(this)}).call(this,e("7YKIPe"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"7YKIPe":10}],4:[function(e,t,r){
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.
function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function o(e){return"number"==typeof e}function a(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!o(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,r,n,o,u,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(r=this._events[e],s(r))return!1;if(i(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:for(n=arguments.length,o=new Array(n-1),u=1;u<n;u++)o[u-1]=arguments[u];r.apply(this,o)}else if(a(r)){for(n=arguments.length,o=new Array(n-1),u=1;u<n;u++)o[u-1]=arguments[u];for(l=r.slice(),n=l.length,u=0;u<n;u++)l[u].apply(this,o)}return!0},n.prototype.addListener=function(e,t){var r;if(!i(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?a(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,a(this._events[e])&&!this._events[e].warned){var r;r=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function r(){this.removeListener(e,r),n||(n=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var n=!1;return r.listener=t,this.on(e,r),this},n.prototype.removeListener=function(e,t){var r,n,o,s;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],o=r.length,n=-1,r===t||i(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(a(r)){for(s=o;s-- >0;)if(r[s]===t||r[s].listener&&r[s].listener===t){n=s;break}if(n<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],i(r))this.removeListener(e,r);else for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.listenerCount=function(e,t){var r;return r=e._events&&e._events[t]?i(e._events[t])?1:e._events[t].length:0}},{}],5:[function(e,t,r){},{}],6:[function(e,t,r){function n(e,t,r){if(!(this instanceof n))return new n(e,t,r);var i=typeof e;if("base64"===t&&"string"===i)for(e=C(e);e.length%4!==0;)e+="=";var o;if("number"===i)o=T(e);else if("string"===i)o=n.byteLength(e,t);else{if("object"!==i)throw new Error("First argument needs to be a number, array or string.");o=T(e.length)}var a;n._useTypedArrays?a=n._augment(new Uint8Array(o)):(a=this,a.length=o,a._isBuffer=!0);var s;if(n._useTypedArrays&&"number"==typeof e.byteLength)a._set(e);else if(N(e))for(s=0;s<o;s++)n.isBuffer(e)?a[s]=e.readUInt8(s):a[s]=e[s];else if("string"===i)a.write(e,0,t);else if("number"===i&&!n._useTypedArrays&&!r)for(s=0;s<o;s++)a[s]=0;return a}function i(e,t,r,i){r=Number(r)||0;var o=e.length-r;i?(i=Number(i),i>o&&(i=o)):i=o;var a=t.length;B(a%2===0,"Invalid hex string"),i>a/2&&(i=a/2);for(var s=0;s<i;s++){var u=parseInt(t.substr(2*s,2),16);B(!isNaN(u),"Invalid hex string"),e[r+s]=u}return n._charsWritten=2*s,s}function o(e,t,r,i){var o=n._charsWritten=Q(R(t),e,r,i);return o}function a(e,t,r,i){var o=n._charsWritten=Q(L(t),e,r,i);return o}function s(e,t,r,n){return a(e,t,r,n)}function u(e,t,r,i){var o=n._charsWritten=Q(P(t),e,r,i);return o}function l(e,t,r,i){var o=n._charsWritten=Q(O(t),e,r,i);return o}function c(e,t,r){return 0===t&&r===e.length?G.fromByteArray(e):G.fromByteArray(e.slice(t,r))}function f(e,t,r){var n="",i="";r=Math.min(e.length,r);for(var o=t;o<r;o++)e[o]<=127?(n+=D(i)+String.fromCharCode(e[o]),i=""):i+="%"+e[o].toString(16);return n+D(i)}function p(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;i++)n+=String.fromCharCode(e[i]);return n}function h(e,t,r){return p(e,t,r)}function d(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;o++)i+=j(e[o]);return i}function v(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function g(e,t,r,n){n||(B("boolean"==typeof r,"missing or invalid endian"),B(void 0!==t&&null!==t,"missing offset"),B(t+1<e.length,"Trying to read beyond buffer length"));var i=e.length;if(!(t>=i)){var o;return r?(o=e[t],t+1<i&&(o|=e[t+1]<<8)):(o=e[t]<<8,t+1<i&&(o|=e[t+1])),o}}function y(e,t,r,n){n||(B("boolean"==typeof r,"missing or invalid endian"),B(void 0!==t&&null!==t,"missing offset"),B(t+3<e.length,"Trying to read beyond buffer length"));var i=e.length;if(!(t>=i)){var o;return r?(t+2<i&&(o=e[t+2]<<16),t+1<i&&(o|=e[t+1]<<8),o|=e[t],t+3<i&&(o+=e[t+3]<<24>>>0)):(t+1<i&&(o=e[t+1]<<16),t+2<i&&(o|=e[t+2]<<8),t+3<i&&(o|=e[t+3]),o+=e[t]<<24>>>0),o}}function m(e,t,r,n){n||(B("boolean"==typeof r,"missing or invalid endian"),B(void 0!==t&&null!==t,"missing offset"),B(t+1<e.length,"Trying to read beyond buffer length"));var i=e.length;if(!(t>=i)){var o=g(e,t,r,!0),a=32768&o;return a?(65535-o+1)*-1:o}}function b(e,t,r,n){n||(B("boolean"==typeof r,"missing or invalid endian"),B(void 0!==t&&null!==t,"missing offset"),B(t+3<e.length,"Trying to read beyond buffer length"));var i=e.length;if(!(t>=i)){var o=y(e,t,r,!0),a=2147483648&o;return a?(4294967295-o+1)*-1:o}}function w(e,t,r,n){return n||(B("boolean"==typeof r,"missing or invalid endian"),B(t+3<e.length,"Trying to read beyond buffer length")),H.read(e,t,r,23,4)}function x(e,t,r,n){return n||(B("boolean"==typeof r,"missing or invalid endian"),B(t+7<e.length,"Trying to read beyond buffer length")),H.read(e,t,r,52,8)}function $(e,t,r,n,i){i||(B(void 0!==t&&null!==t,"missing value"),B("boolean"==typeof n,"missing or invalid endian"),B(void 0!==r&&null!==r,"missing offset"),B(r+1<e.length,"trying to write beyond buffer length"),M(t,65535));var o=e.length;if(!(r>=o))for(var a=0,s=Math.min(o-r,2);a<s;a++)e[r+a]=(t&255<<8*(n?a:1-a))>>>8*(n?a:1-a)}function k(e,t,r,n,i){i||(B(void 0!==t&&null!==t,"missing value"),B("boolean"==typeof n,"missing or invalid endian"),B(void 0!==r&&null!==r,"missing offset"),B(r+3<e.length,"trying to write beyond buffer length"),M(t,4294967295));var o=e.length;if(!(r>=o))for(var a=0,s=Math.min(o-r,4);a<s;a++)e[r+a]=t>>>8*(n?a:3-a)&255}function E(e,t,r,n,i){i||(B(void 0!==t&&null!==t,"missing value"),B("boolean"==typeof n,"missing or invalid endian"),B(void 0!==r&&null!==r,"missing offset"),B(r+1<e.length,"Trying to write beyond buffer length"),q(t,32767,-32768));var o=e.length;r>=o||(t>=0?$(e,t,r,n,i):$(e,65535+t+1,r,n,i))}function _(e,t,r,n,i){i||(B(void 0!==t&&null!==t,"missing value"),B("boolean"==typeof n,"missing or invalid endian"),B(void 0!==r&&null!==r,"missing offset"),B(r+3<e.length,"Trying to write beyond buffer length"),q(t,2147483647,-2147483648));var o=e.length;r>=o||(t>=0?k(e,t,r,n,i):k(e,4294967295+t+1,r,n,i))}function S(e,t,r,n,i){i||(B(void 0!==t&&null!==t,"missing value"),B("boolean"==typeof n,"missing or invalid endian"),B(void 0!==r&&null!==r,"missing offset"),B(r+3<e.length,"Trying to write beyond buffer length"),U(t,3.4028234663852886e38,-3.4028234663852886e38));var o=e.length;r>=o||H.write(e,t,r,n,23,4)}function A(e,t,r,n,i){i||(B(void 0!==t&&null!==t,"missing value"),B("boolean"==typeof n,"missing or invalid endian"),B(void 0!==r&&null!==r,"missing offset"),B(r+7<e.length,"Trying to write beyond buffer length"),U(t,1.7976931348623157e308,-1.7976931348623157e308));var o=e.length;r>=o||H.write(e,t,r,n,52,8)}function C(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function I(e,t,r){return"number"!=typeof e?r:(e=~~e,e>=t?t:e>=0?e:(e+=t,e>=0?e:0))}function T(e){return e=~~Math.ceil(+e),e<0?0:e}function F(e){return(Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)})(e)}function N(e){return F(e)||n.isBuffer(e)||e&&"object"==typeof e&&"number"==typeof e.length}function j(e){return e<16?"0"+e.toString(16):e.toString(16)}function R(e){for(var t=[],r=0;r<e.length;r++){var n=e.charCodeAt(r);if(n<=127)t.push(e.charCodeAt(r));else{var i=r;n>=55296&&n<=57343&&r++;for(var o=encodeURIComponent(e.slice(i,r+1)).substr(1).split("%"),a=0;a<o.length;a++)t.push(parseInt(o[a],16))}}return t}function L(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t}function O(e){for(var t,r,n,i=[],o=0;o<e.length;o++)t=e.charCodeAt(o),r=t>>8,n=t%256,i.push(n),i.push(r);return i}function P(e){return G.toByteArray(e)}function Q(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);i++)t[i+r]=e[i];return i}function D(e){try{return decodeURIComponent(e)}catch(e){return String.fromCharCode(65533)}}function M(e,t){B("number"==typeof e,"cannot write a non-number as a number"),B(e>=0,"specified a negative value for writing an unsigned value"),B(e<=t,"value is larger than maximum value for type"),B(Math.floor(e)===e,"value has a fractional component")}function q(e,t,r){B("number"==typeof e,"cannot write a non-number as a number"),B(e<=t,"value larger than maximum allowed value"),B(e>=r,"value smaller than minimum allowed value"),B(Math.floor(e)===e,"value has a fractional component")}function U(e,t,r){B("number"==typeof e,"cannot write a non-number as a number"),B(e<=t,"value larger than maximum allowed value"),B(e>=r,"value smaller than minimum allowed value")}function B(e,t){if(!e)throw new Error(t||"Failed assertion")}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var G=e("base64-js"),H=e("ieee754");r.Buffer=n,r.SlowBuffer=n,r.INSPECT_MAX_BYTES=50,n.poolSize=8192,n._useTypedArrays=function(){try{var e=new ArrayBuffer(0),t=new Uint8Array(e);return t.foo=function(){return 42},42===t.foo()&&"function"==typeof t.subarray}catch(e){return!1}}(),n.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.isBuffer=function(e){return!(null===e||void 0===e||!e._isBuffer)},n.byteLength=function(e,t){var r;switch(e+="",t||"utf8"){case"hex":r=e.length/2;break;case"utf8":case"utf-8":r=R(e).length;break;case"ascii":case"binary":case"raw":r=e.length;break;case"base64":r=P(e).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":r=2*e.length;break;default:throw new Error("Unknown encoding")}return r},n.concat=function(e,t){if(B(F(e),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===e.length)return new n(0);if(1===e.length)return e[0];var r;if("number"!=typeof t)for(t=0,r=0;r<e.length;r++)t+=e[r].length;var i=new n(t),o=0;for(r=0;r<e.length;r++){var a=e[r];a.copy(i,o),o+=a.length}return i},n.prototype.write=function(e,t,r,n){if(isFinite(t))isFinite(r)||(n=r,r=void 0);else{var c=n;n=t,t=r,r=c}t=Number(t)||0;var f=this.length-t;r?(r=Number(r),r>f&&(r=f)):r=f,n=String(n||"utf8").toLowerCase();var p;switch(n){case"hex":p=i(this,e,t,r);break;case"utf8":case"utf-8":p=o(this,e,t,r);break;case"ascii":p=a(this,e,t,r);break;case"binary":p=s(this,e,t,r);break;case"base64":p=u(this,e,t,r);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":p=l(this,e,t,r);break;default:throw new Error("Unknown encoding")}return p},n.prototype.toString=function(e,t,r){var n=this;if(e=String(e||"utf8").toLowerCase(),t=Number(t)||0,r=void 0!==r?Number(r):r=n.length,r===t)return"";var i;switch(e){case"hex":i=d(n,t,r);break;case"utf8":case"utf-8":i=f(n,t,r);break;case"ascii":i=p(n,t,r);break;case"binary":i=h(n,t,r);break;case"base64":i=c(n,t,r);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":i=v(n,t,r);break;default:throw new Error("Unknown encoding")}return i},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},n.prototype.copy=function(e,t,r,i){var o=this;if(r||(r=0),i||0===i||(i=this.length),t||(t=0),i!==r&&0!==e.length&&0!==o.length){B(i>=r,"sourceEnd < sourceStart"),B(t>=0&&t<e.length,"targetStart out of bounds"),B(r>=0&&r<o.length,"sourceStart out of bounds"),B(i>=0&&i<=o.length,"sourceEnd out of bounds"),i>this.length&&(i=this.length),e.length-t<i-r&&(i=e.length-t+r);var a=i-r;if(a<100||!n._useTypedArrays)for(var s=0;s<a;s++)e[s+t]=this[s+r];else e._set(this.subarray(r,r+a),t)}},n.prototype.slice=function(e,t){var r=this.length;if(e=I(e,r,0),t=I(t,r,r),n._useTypedArrays)return n._augment(this.subarray(e,t));for(var i=t-e,o=new n(i,void 0,!0),a=0;a<i;a++)o[a]=this[a+e];return o},n.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},n.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},n.prototype.readUInt8=function(e,t){if(t||(B(void 0!==e&&null!==e,"missing offset"),B(e<this.length,"Trying to read beyond buffer length")),!(e>=this.length))return this[e]},n.prototype.readUInt16LE=function(e,t){return g(this,e,!0,t)},n.prototype.readUInt16BE=function(e,t){return g(this,e,!1,t)},n.prototype.readUInt32LE=function(e,t){return y(this,e,!0,t)},n.prototype.readUInt32BE=function(e,t){return y(this,e,!1,t)},n.prototype.readInt8=function(e,t){if(t||(B(void 0!==e&&null!==e,"missing offset"),B(e<this.length,"Trying to read beyond buffer length")),!(e>=this.length)){var r=128&this[e];return r?(255-this[e]+1)*-1:this[e]}},n.prototype.readInt16LE=function(e,t){return m(this,e,!0,t)},n.prototype.readInt16BE=function(e,t){return m(this,e,!1,t)},n.prototype.readInt32LE=function(e,t){return b(this,e,!0,t)},n.prototype.readInt32BE=function(e,t){return b(this,e,!1,t)},n.prototype.readFloatLE=function(e,t){return w(this,e,!0,t)},n.prototype.readFloatBE=function(e,t){return w(this,e,!1,t)},n.prototype.readDoubleLE=function(e,t){return x(this,e,!0,t)},n.prototype.readDoubleBE=function(e,t){return x(this,e,!1,t)},n.prototype.writeUInt8=function(e,t,r){r||(B(void 0!==e&&null!==e,"missing value"),B(void 0!==t&&null!==t,"missing offset"),B(t<this.length,"trying to write beyond buffer length"),M(e,255)),t>=this.length||(this[t]=e)},n.prototype.writeUInt16LE=function(e,t,r){$(this,e,t,!0,r)},n.prototype.writeUInt16BE=function(e,t,r){$(this,e,t,!1,r)},n.prototype.writeUInt32LE=function(e,t,r){k(this,e,t,!0,r)},n.prototype.writeUInt32BE=function(e,t,r){k(this,e,t,!1,r)},n.prototype.writeInt8=function(e,t,r){r||(B(void 0!==e&&null!==e,"missing value"),B(void 0!==t&&null!==t,"missing offset"),B(t<this.length,"Trying to write beyond buffer length"),q(e,127,-128)),t>=this.length||(e>=0?this.writeUInt8(e,t,r):this.writeUInt8(255+e+1,t,r))},n.prototype.writeInt16LE=function(e,t,r){E(this,e,t,!0,r)},n.prototype.writeInt16BE=function(e,t,r){E(this,e,t,!1,r)},n.prototype.writeInt32LE=function(e,t,r){_(this,e,t,!0,r)},n.prototype.writeInt32BE=function(e,t,r){_(this,e,t,!1,r)},n.prototype.writeFloatLE=function(e,t,r){S(this,e,t,!0,r)},n.prototype.writeFloatBE=function(e,t,r){S(this,e,t,!1,r)},n.prototype.writeDoubleLE=function(e,t,r){A(this,e,t,!0,r)},n.prototype.writeDoubleBE=function(e,t,r){A(this,e,t,!1,r)},n.prototype.fill=function(e,t,r){if(e||(e=0),t||(t=0),r||(r=this.length),"string"==typeof e&&(e=e.charCodeAt(0)),B("number"==typeof e&&!isNaN(e),"value is not a number"),B(r>=t,"end < start"),r!==t&&0!==this.length){B(t>=0&&t<this.length,"start out of bounds"),B(r>=0&&r<=this.length,"end out of bounds");for(var n=t;n<r;n++)this[n]=e}},n.prototype.inspect=function(){for(var e=[],t=this.length,n=0;n<t;n++)if(e[n]=j(this[n]),n===r.INSPECT_MAX_BYTES){e[n+1]="...";break}return"<Buffer "+e.join(" ")+">"},n.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(n._useTypedArrays)return new n(this).buffer;for(var e=new Uint8Array(this.length),t=0,r=e.length;t<r;t+=1)e[t]=this[t];return e.buffer}throw new Error("Buffer.toArrayBuffer not supported in this browser")};var V=n.prototype;n._augment=function(e){return e._isBuffer=!0,e._get=e.get,e._set=e.set,e.get=V.get,e.set=V.set,e.write=V.write,e.toString=V.toString,e.toLocaleString=V.toString,e.toJSON=V.toJSON,e.copy=V.copy,e.slice=V.slice,e.readUInt8=V.readUInt8,e.readUInt16LE=V.readUInt16LE,e.readUInt16BE=V.readUInt16BE,e.readUInt32LE=V.readUInt32LE,e.readUInt32BE=V.readUInt32BE,e.readInt8=V.readInt8,e.readInt16LE=V.readInt16LE,e.readInt16BE=V.readInt16BE,e.readInt32LE=V.readInt32LE,e.readInt32BE=V.readInt32BE,e.readFloatLE=V.readFloatLE,e.readFloatBE=V.readFloatBE,e.readDoubleLE=V.readDoubleLE,e.readDoubleBE=V.readDoubleBE,e.writeUInt8=V.writeUInt8,e.writeUInt16LE=V.writeUInt16LE,e.writeUInt16BE=V.writeUInt16BE,e.writeUInt32LE=V.writeUInt32LE,e.writeUInt32BE=V.writeUInt32BE,e.writeInt8=V.writeInt8,e.writeInt16LE=V.writeInt16LE,e.writeInt16BE=V.writeInt16BE,e.writeInt32LE=V.writeInt32LE,e.writeInt32BE=V.writeInt32BE,e.writeFloatLE=V.writeFloatLE,e.writeFloatBE=V.writeFloatBE,e.writeDoubleLE=V.writeDoubleLE,e.writeDoubleBE=V.writeDoubleBE,e.fill=V.fill,e.inspect=V.inspect,e.toArrayBuffer=V.toArrayBuffer,e}},{"base64-js":2,ieee754:23}],7:[function(e,t,r){var n=t.exports,i=(e("events").EventEmitter,e("./lib/request")),o=e("url");n.request=function(e,t){"string"==typeof e&&(e=o.parse(e)),e||(e={}),e.host||e.port||(e.port=parseInt(window.location.port,10)),!e.host&&e.hostname&&(e.host=e.hostname),e.scheme||(e.scheme=window.location.protocol.split(":")[0]),e.host||(e.host=window.location.hostname||window.location.host),/:/.test(e.host)&&(e.port||(e.port=e.host.split(":")[1]),e.host=e.host.split(":")[0]),e.port||(e.port="https"==e.scheme?443:80);var r=new i(new a,e);return t&&r.on("response",t),r},n.get=function(e,t){e.method="GET";var r=n.request(e,t);return r.end(),r},n.Agent=function(){},n.Agent.defaultMaxSockets=4;var a=function(){if("undefined"==typeof window)throw new Error("no window object present");if(window.XMLHttpRequest)return window.XMLHttpRequest;if(window.ActiveXObject){for(var e=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"],t=0;t<e.length;t++)try{var r=new window.ActiveXObject(e[t]);return function(){if(r){var n=r;return r=null,n}return new window.ActiveXObject(e[t])}}catch(e){}throw new Error("ajax not supported in this browser")}throw new Error("ajax not supported in this browser")}();n.STATUS_CODES={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},{"./lib/request":8,events:4,url:36}],8:[function(e,t,r){var n=e("stream"),i=e("./response"),o=e("Base64"),a=e("inherits"),s=t.exports=function(e,t){var r=this;r.writable=!0,r.xhr=e,r.body=[],r.uri=(t.scheme||"http")+"://"+t.host+(t.port?":"+t.port:"")+(t.path||"/"),"undefined"==typeof t.withCredentials&&(t.withCredentials=!0);try{e.withCredentials=t.withCredentials}catch(e){}if(e.open(t.method||"GET",r.uri,!0),r._headers={},t.headers)for(var n=u(t.headers),a=0;a<n.length;a++){var s=n[a];if(r.isSafeRequestHeader(s)){var l=t.headers[s];r.setHeader(s,l)}}t.auth&&this.setHeader("Authorization","Basic "+o.btoa(t.auth));var c=new i;c.on("close",function(){r.emit("close")}),c.on("ready",function(){r.emit("response",c)}),e.onreadystatechange=function(){e.__aborted||c.handle(e)}};a(s,n),s.prototype.setHeader=function(e,t){this._headers[e.toLowerCase()]=t},s.prototype.getHeader=function(e){return this._headers[e.toLowerCase()]},s.prototype.removeHeader=function(e){delete this._headers[e.toLowerCase()]},s.prototype.write=function(e){this.body.push(e)},s.prototype.destroy=function(e){this.xhr.__aborted=!0,this.xhr.abort(),this.emit("close")},s.prototype.end=function(e){void 0!==e&&this.body.push(e);for(var t=u(this._headers),r=0;r<t.length;r++){var n=t[r],i=this._headers[n];if(l(i))for(var o=0;o<i.length;o++)this.xhr.setRequestHeader(n,i[o]);else this.xhr.setRequestHeader(n,i)}if(0===this.body.length)this.xhr.send("");else if("string"==typeof this.body[0])this.xhr.send(this.body.join(""));else if(l(this.body[0])){for(var a=[],r=0;r<this.body.length;r++)a.push.apply(a,this.body[r]);this.xhr.send(a)}else if(/Array/.test(Object.prototype.toString.call(this.body[0]))){for(var s=0,r=0;r<this.body.length;r++)s+=this.body[r].length;for(var a=new this.body[0].constructor(s),c=0,r=0;r<this.body.length;r++)for(var f=this.body[r],o=0;o<f.length;o++)a[c++]=f[o];this.xhr.send(a)}else{for(var a="",r=0;r<this.body.length;r++)a+=this.body[r].toString();this.xhr.send(a)}},s.unsafeHeaders=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","content-transfer-encoding","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"],s.prototype.isSafeRequestHeader=function(e){return!!e&&c(s.unsafeHeaders,e.toLowerCase())===-1};var u=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t},l=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},c=function(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0;r<e.length;r++)if(e[r]===t)return r;return-1}},{"./response":9,Base64:1,inherits:24,stream:15}],9:[function(e,t,r){function n(e){for(var t=e.getAllResponseHeaders().split(/\r?\n/),r={},n=0;n<t.length;n++){var i=t[n];if(""!==i){var o=i.match(/^([^:]+):\s*(.*)/);if(o){var a=o[1].toLowerCase(),s=o[2];void 0!==r[a]?u(r[a])?r[a].push(s):r[a]=[r[a],s]:r[a]=s}else r[i]=!0}}return r}var i=e("stream"),o=e("util"),a=t.exports=function(e){this.offset=0,this.readable=!0};o.inherits(a,i);var s={streaming:!0,status2:!0};a.prototype.getResponse=function(e){var t=String(e.responseType).toLowerCase();return"blob"===t?e.responseBlob||e.response:"arraybuffer"===t?e.response:e.responseText},a.prototype.getHeader=function(e){return this.headers[e.toLowerCase()]},a.prototype.handle=function(e){if(2===e.readyState&&s.status2){try{this.statusCode=e.status,this.headers=n(e)}catch(e){s.status2=!1}s.status2&&this.emit("ready")}else if(s.streaming&&3===e.readyState){try{this.statusCode||(this.statusCode=e.status,this.headers=n(e),this.emit("ready"))}catch(e){}try{this._emitData(e)}catch(e){s.streaming=!1}}else 4===e.readyState&&(this.statusCode||(this.statusCode=e.status,this.emit("ready")),this._emitData(e),e.error?this.emit("error",this.getResponse(e)):this.emit("end"),this.emit("close"))},a.prototype._emitData=function(e){var t=this.getResponse(e);return t.toString().match(/ArrayBuffer/)?(this.emit("data",new Uint8Array(t,this.offset)),void(this.offset=t.byteLength)):void(t.length>this.offset&&(this.emit("data",t.slice(this.offset)),this.offset=t.length))};var u=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{stream:15,util:38}],10:[function(e,t,r){function n(){}var i=t.exports={};i.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(t){var r=[];return window.addEventListener("message",function(e){var t=e.source;if((t===window||null===t)&&"process-tick"===e.data&&(e.stopPropagation(),r.length>0)){var n=r.shift();n()}},!0),function(e){r.push(e),window.postMessage("process-tick","*")}}return function(e){setTimeout(e,0)}}(),i.title="browser",i.browser=!0,i.env={},i.argv=[],i.on=n,i.addListener=n,i.once=n,i.off=n,i.removeListener=n,i.removeAllListeners=n,i.emit=n,i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")}},{}],11:[function(e,t,r){
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.
"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,r,o){t=t||"&",r=r||"=";var a={};if("string"!=typeof e||0===e.length)return a;var s=/\+/g;e=e.split(t);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var l=e.length;u>0&&l>u&&(l=u);for(var c=0;c<l;++c){var f,p,h,d,v=e[c].replace(s,"%20"),g=v.indexOf(r);g>=0?(f=v.substr(0,g),p=v.substr(g+1)):(f=v,p=""),h=decodeURIComponent(f),d=decodeURIComponent(p),n(a,h)?i(a[h])?a[h].push(d):a[h]=[a[h],d]:a[h]=d}return a};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],12:[function(e,t,r){
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.
"use strict";function n(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,r,s){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?n(a(e),function(n){var a=encodeURIComponent(i(n))+r;return o(e[n])?e[n].map(function(e){return a+encodeURIComponent(i(e))}).join(t):a+encodeURIComponent(i(e[n]))}).join(t):s?encodeURIComponent(i(s))+r+encodeURIComponent(i(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},{}],13:[function(e,t,r){"use strict";r.decode=r.parse=e("./decode"),r.encode=r.stringify=e("./encode")},{"./decode":11,"./encode":12}],14:[function(e,t,r){function n(e){return this instanceof n?(s.call(this,e),u.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",i)):new n(e)}function i(){if(!this.allowHalfOpen&&!this._writableState.ended){var e=this;a(function(){e.end()})}}
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.
t.exports=n;var o=e("inherits"),a=e("process/browser.js").nextTick,s=e("./readable.js"),u=e("./writable.js");o(n,s),n.prototype.write=u.prototype.write,n.prototype.end=u.prototype.end,n.prototype._write=u.prototype._write},{"./readable.js":18,"./writable.js":20,inherits:24,"process/browser.js":16}],15:[function(e,t,r){function n(){i.call(this)}
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.
t.exports=n;var i=e("events").EventEmitter,o=e("inherits");o(n,i),n.Readable=e("./readable.js"),n.Writable=e("./writable.js"),n.Duplex=e("./duplex.js"),n.Transform=e("./transform.js"),n.PassThrough=e("./passthrough.js"),n.Stream=n,n.prototype.pipe=function(e,t){function r(t){e.writable&&!1===e.write(t)&&l.pause&&l.pause()}function n(){l.readable&&l.resume&&l.resume()}function o(){c||(c=!0,e.end())}function a(){c||(c=!0,"function"==typeof e.destroy&&e.destroy())}function s(e){if(u(),0===i.listenerCount(this,"error"))throw e}function u(){l.removeListener("data",r),e.removeListener("drain",n),l.removeListener("end",o),l.removeListener("close",a),l.removeListener("error",s),e.removeListener("error",s),l.removeListener("end",u),l.removeListener("close",u),e.removeListener("close",u)}var l=this;l.on("data",r),e.on("drain",n),e._isStdio||t&&t.end===!1||(l.on("end",o),l.on("close",a));var c=!1;
// Allow for unix-like usage: A.pipe(B).pipe(C)
return l.on("error",s),e.on("error",s),l.on("end",u),l.on("close",u),e.on("close",u),e.emit("pipe",l),e}},{"./duplex.js":14,"./passthrough.js":17,"./readable.js":18,"./transform.js":19,"./writable.js":20,events:4,inherits:24}],16:[function(e,t,r){var n=t.exports={};n.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(t){var r=[];return window.addEventListener("message",function(e){var t=e.source;if((t===window||null===t)&&"process-tick"===e.data&&(e.stopPropagation(),r.length>0)){var n=r.shift();n()}},!0),function(e){r.push(e),window.postMessage("process-tick","*")}}return function(e){setTimeout(e,0)}}(),n.title="browser",n.browser=!0,n.env={},n.argv=[],n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")}},{}],17:[function(e,t,r){function n(e){return this instanceof n?void i.call(this,e):new n(e)}
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.
t.exports=n;var i=e("./transform.js"),o=e("inherits");o(n,i),n.prototype._transform=function(e,t,r){r(null,e)}},{"./transform.js":19,inherits:24}],18:[function(e,t,r){(function(r){function n(t,r){t=t||{};var n=t.highWaterMark;this.highWaterMark=n||0===n?n:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!t.objectMode,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(k||(k=e("string_decoder").StringDecoder),this.decoder=new k(t.encoding),this.encoding=t.encoding)}function i(e){return this instanceof i?(this._readableState=new n(e,this),this.readable=!0,void _.call(this)):new i(e)}function o(e,t,r,n,i){var o=l(t,r);if(o)e.emit("error",o);else if(null===r||void 0===r)t.reading=!1,t.ended||c(e,t);else if(t.objectMode||r&&r.length>0)if(t.ended&&!i){var s=new Error("stream.push() after EOF");e.emit("error",s)}else if(t.endEmitted&&i){var s=new Error("stream.unshift() after end event");e.emit("error",s)}else!t.decoder||i||n||(r=t.decoder.write(r)),t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):(t.reading=!1,t.buffer.push(r)),t.needReadable&&f(e),h(e,t);else i||(t.reading=!1);return a(t)}function a(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function s(e){if(e>=I)e=I;else{e--;for(var t=1;t<32;t<<=1)e|=e>>t;e++}return e}function u(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:isNaN(e)||null===e?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:e<=0?0:(e>t.highWaterMark&&(t.highWaterMark=s(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function l(e,t){var r=null;return S.isBuffer(t)||"string"==typeof t||null===t||void 0===t||e.objectMode||r||(r=new TypeError("Invalid non-string/buffer chunk")),r}function c(e,t){if(t.decoder&&!t.ended){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.length>0?f(e):w(e)}function f(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,t.sync?A(function(){p(e)}):p(e))}function p(e){e.emit("readable")}function h(e,t){t.readingMore||(t.readingMore=!0,A(function(){d(e,t)}))}function d(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function v(e){return function(){var t=e._readableState;t.awaitDrain--,0===t.awaitDrain&&g(e)}}function g(e){function t(e,t,i){var o=e.write(r);!1===o&&n.awaitDrain++}var r,n=e._readableState;for(n.awaitDrain=0;n.pipesCount&&null!==(r=e.read());)if(1===n.pipesCount?t(n.pipes,0,null):x(n.pipes,t),e.emit("data",r),n.awaitDrain>0)return;return 0===n.pipesCount?(n.flowing=!1,void(E.listenerCount(e,"data")>0&&m(e))):void(n.ranOut=!0)}function y(){this._readableState.ranOut&&(this._readableState.ranOut=!1,g(this))}function m(e,t){var r=e._readableState;if(r.flowing)throw new Error("Cannot switch to old mode now.");var n=t||!1,i=!1;e.readable=!0,e.pipe=_.prototype.pipe,e.on=e.addListener=_.prototype.on,e.on("readable",function(){i=!0;for(var t;!n&&null!==(t=e.read());)e.emit("data",t);null===t&&(i=!1,e._readableState.needReadable=!0)}),e.pause=function(){n=!0,this.emit("pause")},e.resume=function(){n=!1,i?A(function(){e.emit("readable")}):this.read(0),this.emit("resume")},e.emit("readable")}function b(e,t){var r,n=t.buffer,i=t.length,o=!!t.decoder,a=!!t.objectMode;if(0===n.length)return null;if(0===i)r=null;else if(a)r=n.shift();else if(!e||e>=i)r=o?n.join(""):S.concat(n,i),n.length=0;else if(e<n[0].length){var s=n[0];r=s.slice(0,e),n[0]=s.slice(e)}else if(e===n[0].length)r=n.shift();else{r=o?"":new S(e);for(var u=0,l=0,c=n.length;l<c&&u<e;l++){var s=n[0],f=Math.min(e-u,s.length);o?r+=s.slice(0,f):s.copy(r,u,0,f),f<s.length?n[0]=s.slice(f):n.shift(),u+=f}}return r}function w(e){var t=e._readableState;if(t.length>0)throw new Error("endReadable called on non-empty stream");!t.endEmitted&&t.calledRead&&(t.ended=!0,A(function(){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}))}function x(e,t){for(var r=0,n=e.length;r<n;r++)t(e[r],r)}function $(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.
t.exports=i,i.ReadableState=n;var k,E=e("events").EventEmitter,_=e("./index.js"),S=e("buffer").Buffer,A=e("process/browser.js").nextTick,C=e("inherits");C(i,_),i.prototype.push=function(e,t){var r=this._readableState;return"string"!=typeof e||r.objectMode||(t=t||r.defaultEncoding,t!==r.encoding&&(e=new S(e,t),t="")),o(this,r,e,t,!1)},i.prototype.unshift=function(e){var t=this._readableState;return o(this,t,e,"",!0)},i.prototype.setEncoding=function(t){k||(k=e("string_decoder").StringDecoder),this._readableState.decoder=new k(t),this._readableState.encoding=t};var I=8388608;i.prototype.read=function(e){var t=this._readableState;t.calledRead=!0;var r=e;if(("number"!=typeof e||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return f(this),null;if(e=u(e,t),0===e&&t.ended)return 0===t.length&&w(this),null;var n=t.needReadable;t.length-e<=t.highWaterMark&&(n=!0),(t.ended||t.reading)&&(n=!1),n&&(t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),n&&!t.reading&&(e=u(r,t));var i;return i=e>0?b(e,t):null,null===i&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),t.ended&&!t.endEmitted&&0===t.length&&w(this),i},i.prototype._read=function(e){this.emit("error",new Error("not implemented"))},i.prototype.pipe=function(e,t){function n(e){e===c&&o()}function i(){e.end()}function o(){e.removeListener("close",s),e.removeListener("finish",u),e.removeListener("drain",d),e.removeListener("error",a),e.removeListener("unpipe",n),c.removeListener("end",i),c.removeListener("end",o),e._writableState&&!e._writableState.needDrain||d()}function a(t){l(),0===m&&0===E.listenerCount(e,"error")&&e.emit("error",t)}function s(){e.removeListener("finish",u),l()}function u(){e.removeListener("close",s),l()}function l(){c.unpipe(e)}var c=this,f=this._readableState;switch(f.pipesCount){case 0:f.pipes=e;break;case 1:f.pipes=[f.pipes,e];break;default:f.pipes.push(e)}f.pipesCount+=1;var p=(!t||t.end!==!1)&&e!==r.stdout&&e!==r.stderr,h=p?i:o;f.endEmitted?A(h):c.once("end",h),e.on("unpipe",n);var d=v(c);e.on("drain",d);var m=E.listenerCount(e,"error");return e.once("error",a),e.once("close",s),e.once("finish",u),e.emit("pipe",c),f.flowing||(this.on("readable",y),f.flowing=!0,A(function(){g(c)})),e},i.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,this.removeListener("readable",y),t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var r=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,this.removeListener("readable",y),t.flowing=!1;for(var i=0;i<n;i++)r[i].emit("unpipe",this);return this}var i=$(t.pipes,e);return i===-1?this:(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},i.prototype.on=function(e,t){var r=_.prototype.on.call(this,e,t);if("data"!==e||this._readableState.flowing||m(this),"readable"===e&&this.readable){var n=this._readableState;n.readableListening||(n.readableListening=!0,n.emittedReadable=!1,n.needReadable=!0,n.reading?n.length&&f(this,n):this.read(0))}return r},i.prototype.addListener=i.prototype.on,i.prototype.resume=function(){m(this),this.read(0),this.emit("resume")},i.prototype.pause=function(){m(this,!0),this.emit("pause")},i.prototype.wrap=function(e){var t=this._readableState,r=!1,n=this;e.on("end",function(){if(t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&n.push(e)}n.push(null)}),e.on("data",function(i){if(t.decoder&&(i=t.decoder.write(i)),i&&(t.objectMode||i.length)){var o=n.push(i);o||(r=!0,e.pause())}});for(var i in e)"function"==typeof e[i]&&"undefined"==typeof this[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));var o=["error","close","destroy","pause","resume"];return x(o,function(t){e.on(t,function(e){return n.emit.apply(n,t,e)})}),n._read=function(t){r&&(r=!1,e.resume())},n},i._fromList=b}).call(this,e("7YKIPe"))},{"./index.js":15,"7YKIPe":10,buffer:6,events:4,inherits:24,"process/browser.js":16,string_decoder:21}],19:[function(e,t,r){function n(e,t){this.afterTransform=function(e,r){return i(t,e,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function i(e,t,r){var n=e._transformState;n.transforming=!1;var i=n.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,null!==r&&void 0!==r&&e.push(r),i&&i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);s.call(this,e);var t=(this._transformState=new n(e,this),this);this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",function(){"function"==typeof this._flush?this._flush(function(e){a(t,e)}):a(t)})}function a(e,t){if(t)return e.emit("error",t);var r=e._writableState,n=(e._readableState,e._transformState);if(r.length)throw new Error("calling transform done when ws.length != 0");if(n.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.
t.exports=o;var s=e("./duplex.js"),u=e("inherits");u(o,s),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,r){throw new Error("not implemented")},o.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0}},{"./duplex.js":14,inherits:24}],20:[function(e,t,r){function n(e,t,r){this.chunk=e,this.encoding=t,this.callback=r}function i(e,t){e=e||{};var r=e.highWaterMark;this.highWaterMark=r||0===r?r:16384,this.objectMode=!!e.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var n=e.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){h(t,e)},this.writecb=null,this.writelen=0,this.buffer=[]}function o(e){return this instanceof o||this instanceof k.Duplex?(this._writableState=new i(e,this),this.writable=!0,void k.call(this)):new o(e)}function a(e,t,r){var n=new Error("write after end");e.emit("error",n),E(function(){r(n)})}function s(e,t,r,n){var i=!0;if(!_.isBuffer(r)&&"string"!=typeof r&&null!==r&&void 0!==r&&!t.objectMode){var o=new TypeError("Invalid non-string/buffer chunk");e.emit("error",o),E(function(){n(o)}),i=!1}return i}function u(e,t,r){return e.objectMode||e.decodeStrings===!1||"string"!=typeof t||(t=new _(t,r)),t}function l(e,t,r,i,o){r=u(t,r,i);var a=t.objectMode?1:r.length;t.length+=a;var s=t.length<t.highWaterMark;return t.needDrain=!s,t.writing?t.buffer.push(new n(r,i,o)):c(e,t,a,r,i,o),s}function c(e,t,r,n,i,o){t.writelen=r,t.writecb=o,t.writing=!0,t.sync=!0,e._write(n,i,t.onwrite),t.sync=!1}function f(e,t,r,n,i){r?E(function(){i(n)}):i(n),e.emit("error",n)}function p(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function h(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(p(r),t)f(e,r,n,t,i);else{var o=y(e,r);o||r.bufferProcessing||!r.buffer.length||g(e,r),n?E(function(){d(e,r,o,i)}):d(e,r,o,i)}}function d(e,t,r,n){r||v(e,t),n(),r&&m(e,t)}function v(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function g(e,t){t.bufferProcessing=!0;for(var r=0;r<t.buffer.length;r++){var n=t.buffer[r],i=n.chunk,o=n.encoding,a=n.callback,s=t.objectMode?1:i.length;if(c(e,t,s,i,o,a),t.writing){r++;break}}t.bufferProcessing=!1,r<t.buffer.length?t.buffer=t.buffer.slice(r):t.buffer.length=0}function y(e,t){return t.ending&&0===t.length&&!t.finished&&!t.writing}function m(e,t){var r=y(e,t);return r&&(t.finished=!0,e.emit("finish")),r}function b(e,t,r){t.ending=!0,m(e,t),r&&(t.finished?E(r):e.once("finish",r)),t.ended=!0}
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.
t.exports=o,o.WritableState=i;var w="undefined"!=typeof Uint8Array?function(e){return e instanceof Uint8Array}:function(e){return e&&e.constructor&&"Uint8Array"===e.constructor.name},x="undefined"!=typeof ArrayBuffer?function(e){return e instanceof ArrayBuffer}:function(e){return e&&e.constructor&&"ArrayBuffer"===e.constructor.name},$=e("inherits"),k=e("./index.js"),E=e("process/browser.js").nextTick,_=e("buffer").Buffer;$(o,k),o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},o.prototype.write=function(e,t,r){var n=this._writableState,i=!1;return"function"==typeof t&&(r=t,t=null),!_.isBuffer(e)&&w(e)&&(e=new _(e)),x(e)&&"undefined"!=typeof Uint8Array&&(e=new _(new Uint8Array(e))),_.isBuffer(e)?t="buffer":t||(t=n.defaultEncoding),"function"!=typeof r&&(r=function(){}),n.ended?a(this,n,r):s(this,n,e,r)&&(i=l(this,n,e,t,r)),i},o.prototype._write=function(e,t,r){r(new Error("not implemented"))},o.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),"undefined"!=typeof e&&null!==e&&this.write(e,t),n.ending||n.finished||b(this,n,r)}},{"./index.js":15,buffer:6,inherits:24,"process/browser.js":16}],21:[function(e,t,r){function n(e){if(e&&!s.isEncoding(e))throw new Error("Unknown encoding: "+e)}function i(e){return e.toString(this.encoding)}function o(e){var t=this.charReceived=e.length%2;return this.charLength=t?2:0,t}function a(e){var t=this.charReceived=e.length%3;return this.charLength=t?3:0,t}
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.
var s=e("buffer").Buffer,u=r.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),n(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=a;break;default:return void(this.write=i)}this.charBuffer=new s(6),this.charReceived=0,this.charLength=0};u.prototype.write=function(e){for(var t="",r=0;this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,r,n),this.charReceived+=n-r,r=n,this.charReceived<this.charLength)return"";t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var i=t.charCodeAt(t.length-1);if(!(i>=55296&&i<=56319)){if(this.charReceived=this.charLength=0,n==e.length)return t;e=e.slice(n,e.length);break}this.charLength+=this.surrogateSize,t=""}var o=this.detectIncompleteChar(e),a=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-o,a),this.charReceived=o,a-=o),t+=e.toString(this.encoding,0,a);var a=t.length-1,i=t.charCodeAt(a);if(i>=55296&&i<=56319){var s=this.surrogateSize;return this.charLength+=s,this.charReceived+=s,this.charBuffer.copy(this.charBuffer,s,0,s),this.charBuffer.write(t.charAt(t.length-1),this.encoding),t.substring(0,a)}return t},u.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var r=e[e.length-t];if(1==t&&r>>5==6){this.charLength=2;break}if(t<=2&&r>>4==14){this.charLength=3;break}if(t<=3&&r>>3==30){this.charLength=4;break}}return t},u.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var r=this.charReceived,n=this.charBuffer,i=this.encoding;t+=n.slice(0,r).toString(i)}return t}},{buffer:6}],22:[function(e,t,r){var n=e("http"),i=t.exports;for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o]);i.request=function(e,t){return e||(e={}),e.scheme="https",e.protocol="https:",n.request.call(this,e,t)}},{http:7}],23:[function(e,t,r){r.read=function(e,t,r,n,i){var o,a,s=8*i-n-1,u=(1<<s)-1,l=u>>1,c=-7,f=r?i-1:0,p=r?-1:1,h=e[t+f];for(f+=p,o=h&(1<<-c)-1,h>>=-c,c+=s;c>0;o=256*o+e[t+f],f+=p,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=n;c>0;a=256*a+e[t+f],f+=p,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:(h?-1:1)*(1/0);a+=Math.pow(2,n),o-=l}return(h?-1:1)*a*Math.pow(2,o-n)},r.write=function(e,t,r,n,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,f=c>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:o-1,d=n?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),t+=a+f>=1?p/u:p*Math.pow(2,1-f),t*u>=2&&(a++,u/=2),a+f>=c?(s=0,a=c):a+f>=1?(s=(t*u-1)*Math.pow(2,i),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[r+h]=255&s,h+=d,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;e[r+h]=255&a,h+=d,a/=256,l-=8);e[r+h-d]|=128*v}},{}],24:[function(e,t,r){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},{}],25:[function(e,t,r){},{}],26:[function(e,t,r){(function(r,n,i){/**
 * A JavaScript implementation of the JSON-LD API.
 *
 * @author Dave Longley
 *
 * @license BSD 3-Clause License
 * Copyright (c) 2011-2015 Digital Bazaar, Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * Redistributions of source code must retain the above copyright notice,
 * this list of conditions and the following disclaimer.
 *
 * Redistributions in binary form must reproduce the above copyright
 * notice, this list of conditions and the following disclaimer in the
 * documentation and/or other materials provided with the distribution.
 *
 * Neither the name of the Digital Bazaar, Inc. nor the names of its
 * contributors may be used to endorse or promote products derived from
 * this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
 * IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED
 * TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A
 * PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
 * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
!function(){var o="undefined"!=typeof r&&r.versions&&r.versions.node,a=!o&&("undefined"!=typeof window||"undefined"!=typeof self);a&&"undefined"==typeof n&&("undefined"!=typeof window?n=window:"undefined"!=typeof self?n=self:"undefined"!=typeof $&&(n=$));var s=function(t){function s(){}function u(e){for(var t=[],r=Object.keys(e).sort(),n=0;n<r.length;++n){var i=r[n],o=e[i];M(o)||(o=[o]);for(var a=0;a<o.length;++a){var s=o[a];if(null!==s){if(!U(s))throw new Fe("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:e});t.push({"@value":s,"@language":i.toLowerCase()})}}}return t}function l(e,t){if(M(t))for(var r=0;r<t.length;++r)t[r]=l(e,t[r]);else if(K(t))t["@list"]=l(e,t["@list"]);else if(Q(t)){Y(t)&&(t["@id"]=e.getId(t["@id"]));for(var n=Object.keys(t).sort(),i=0;i<n.length;++i){var o=n[i];"@id"!==o&&(t[o]=l(e,t[o]))}}return t}function c(e,r,n){if(null===n||void 0===n)return null;var i=j(e,r,{vocab:!0});if("@id"===i)return j(e,n,{base:!0});if("@type"===i)return j(e,n,{vocab:!0,base:!0});var o=t.getContextValue(e,r,"@type");if("@id"===o||"@graph"===i&&U(n))return{"@id":j(e,n,{base:!0})};if("@vocab"===o)return{"@id":j(e,n,{vocab:!0,base:!0})};if(P(i))return n;var a={};if(null!==o)a["@type"]=o;else if(U(n)){var s=t.getContextValue(e,r,"@language");null!==s&&(a["@language"]=s)}return["boolean","number","string"].indexOf(typeof n)===-1&&(n=n.toString()),a["@value"]=n,a}function f(e,t,r){for(var n=[],i=Object.keys(e).sort(),o=0;o<i.length;++o)for(var a=i[o],s=e[a],u=Object.keys(s).sort(),l=0;l<u.length;++l){var c=u[l],f=s[c];if("@type"===c)c=Ee;else if(P(c))continue;for(var d=0;d<f.length;++d){var v=f[d],g={};if(g.type=0===a.indexOf("_:")?"blank node":"IRI",g.value=a,Z(a)){var y={};if(y.type=0===c.indexOf("_:")?"blank node":"IRI",y.value=c,Z(c)&&("blank node"!==y.type||r.produceGeneralizedRdf))if(K(v))p(v["@list"],t,g,y,n);else{var m=h(v);m&&n.push({subject:g,predicate:y,object:m})}}}}return n}function p(e,t,r,n,i){for(var o={type:"IRI",value:xe},a={type:"IRI",value:$e},s={type:"IRI",value:ke},u=0;u<e.length;++u){var l=e[u],c={type:"blank node",value:t.getId()};i.push({subject:r,predicate:n,object:c}),r=c,n=o;var f=h(l);f&&i.push({subject:r,predicate:n,object:f}),n=a}i.push({subject:r,predicate:n,object:s})}function h(e){var t={};if(J(e)){t.type="literal";var r=e["@value"],n=e["@type"]||null;V(r)?(t.value=r.toString(),t.datatype=n||ve):G(r)||n===ge?(G(r)||(r=parseFloat(r)),t.value=r.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),t.datatype=n||ge):B(r)?(t.value=r.toFixed(0),t.datatype=n||ye):"@language"in e?(t.value=r,t.datatype=n||Ce,t.language=e["@language"]):(t.value=r,t.datatype=n||me)}else{var i=Q(e)?e["@id"]:e;t.type=0===i.indexOf("_:")?"blank node":"IRI",t.value=i}return"IRI"!==t.type||Z(t.value)?t:null}function d(e,t){if("IRI"===e.type||"blank node"===e.type)return{"@id":e.value};var r={"@value":e.value};if(e.language)r["@language"]=e.language;else{var n=e.datatype;if(n||(n=me),t){if(n===ve)"true"===r["@value"]?r["@value"]=!0:"false"===r["@value"]&&(r["@value"]=!1);else if(H(r["@value"]))if(n===ye){var i=parseInt(r["@value"],10);i.toFixed(0)===r["@value"]&&(r["@value"]=i)}else n===ge&&(r["@value"]=parseFloat(r["@value"]));[ve,ye,ge,me].indexOf(n)===-1&&(r["@type"]=n)}else n!==me&&(r["@type"]=n)}return r}function v(e,t){for(var r=["subject","predicate","object"],n=0;n<r.length;++n){var i=r[n];if(e[i].type!==t[i].type||e[i].value!==t[i].value)return!1}return e.object.language===t.object.language&&e.object.datatype===t.object.datatype}function g(e,r,n,i,o,a){if(M(e))for(var s=0;s<e.length;++s)g(e[s],r,n,i,void 0,a);else{if(!Q(e))return void(a&&a.push(e));if(J(e)){if("@type"in e){var u=e["@type"];0===u.indexOf("_:")&&(e["@type"]=u=i.getId(u))}return void(a&&a.push(e))}if("@type"in e)for(var l=e["@type"],s=0;s<l.length;++s){var u=l[s];0===u.indexOf("_:")&&i.getId(u)}z(o)&&(o=Y(e)?i.getId(e["@id"]):e["@id"]),a&&a.push({"@id":o});var c=r[n],f=c[o]=c[o]||{};f["@id"]=o;for(var p=Object.keys(e).sort(),h=0;h<p.length;++h){var d=p[h];if("@id"!==d)if("@reverse"!==d)if("@graph"!==d)if("@type"!==d&&P(d)){if("@index"===d&&d in f&&(e[d]!==f[d]||e[d]["@id"]!==f[d]["@id"]))throw new Fe("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:f});f[d]=e[d]}else{var v=e[d];if(0===d.indexOf("_:")&&(d=i.getId(d)),0!==v.length)for(var y=0;y<v.length;++y){var m=v[y];if("@type"===d&&(m=0===m.indexOf("_:")?i.getId(m):m),W(m)||X(m)){var b=Y(m)?i.getId(m["@id"]):m["@id"];t.addValue(f,d,{"@id":b},{propertyIsArray:!0,allowDuplicate:!1}),g(m,r,n,i,b)}else if(K(m)){var w=[];g(m["@list"],r,n,i,o,w),m={"@list":w},t.addValue(f,d,m,{propertyIsArray:!0,allowDuplicate:!1})}else g(m,r,n,i,o),t.addValue(f,d,m,{propertyIsArray:!0,allowDuplicate:!1})}else t.addValue(f,d,[],{propertyIsArray:!0})}else{o in r||(r[o]={});var x="@merged"===n?n:o;g(e[d],r,x,i)}else{var $={"@id":o},k=e["@reverse"];for(var E in k)for(var _=k[E],S=0;S<_.length;++S){var A=_[S],C=A["@id"];Y(A)&&(C=i.getId(C)),g(A,r,n,i,C),t.addValue(c[C],E,$,{propertyIsArray:!0,allowDuplicate:!1})}}}}}function y(e){for(var t=e["@default"],r=Object.keys(e).sort(),n=0;n<r.length;++n){var i=r[n];if("@default"!==i){var o=e[i],a=t[i];a?"@graph"in a||(a["@graph"]=[]):t[i]=a={"@id":i,"@graph":[]};for(var s=a["@graph"],u=Object.keys(o).sort(),l=0;l<u.length;++l){var c=o[u[l]];X(c)||s.push(c)}}}return t}function m(e,t,r,n,i){$(r),r=r[0];for(var o=e.options,a={embed:x(r,o,"embed"),explicit:x(r,o,"explicit"),requireAll:x(r,o,"requireAll")},s=k(e,t,r,a),u=Object.keys(s).sort(),l=0;l<u.length;++l){var c=u[l],f=s[c];if("@link"===a.embed&&c in e.link)S(n,i,e.link[c]);else{null===i&&(e.uniqueEmbeds={});var p={};if(p["@id"]=c,e.link[c]=p,"@never"===a.embed||w(f,e.subjectStack))S(n,i,p);else{"@last"===a.embed&&(c in e.uniqueEmbeds&&_(e,c),e.uniqueEmbeds[c]={parent:n,property:i}),e.subjectStack.push(f);for(var h=Object.keys(f).sort(),d=0;d<h.length;d++){var v=h[d];if(P(v))p[v]=ee(f[v]);else if(!a.explicit||v in r)for(var g=f[v],y=0;y<g.length;++y){var E=g[y];if(K(E)){var A={"@list":[]};S(p,v,A);var C=E["@list"];for(var I in C)if(E=C[I],X(E)){var T=v in r?r[v][0]["@list"]:b(a);m(e,[E["@id"]],T,A,"@list")}else S(A,"@list",ee(E))}else if(X(E)){var T=v in r?r[v]:b(a);m(e,[E["@id"]],T,p,v)}else S(p,v,ee(E))}}for(var h=Object.keys(r).sort(),d=0;d<h.length;++d){var v=h[d];if(!P(v)){var F=r[v][0],N=x(F,o,"omitDefault");if(!(N||v in p)){var j="@null";"@default"in F&&(j=ee(F["@default"])),M(j)||(j=[j]),p[v]=[{"@preserve":j}]}}}S(n,i,p),e.subjectStack.pop()}}}}function b(e){var t={};for(var r in e)void 0!==e[r]&&(t["@"+r]=[e[r]]);return[t]}function w(e,t){for(var r=t.length-1;r>=0;--r)if(t[r]["@id"]===e["@id"])return!0;return!1}function x(e,t,r){var n="@"+r,i=n in e?e[n][0]:t[r];return"embed"===r&&(i===!0?i="@last":i===!1?i="@never":"@always"!==i&&"@never"!==i&&"@link"!==i&&(i="@last")),i}function $(e){if(!M(e)||1!==e.length||!Q(e[0]))throw new Fe("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:e})}function k(e,t,r,n){for(var i={},o=0;o<t.length;++o){var a=t[o],s=e.subjects[a];E(s,r,n)&&(i[a]=s)}return i}function E(e,r,n){if("@type"in r&&(1!==r["@type"].length||!Q(r["@type"][0]))){for(var i=r["@type"],o=0;o<i.length;++o)if(t.hasValue(e,"@type",i[o]))return!0;return!1}var a=!0,s=!1;for(var u in r){if(P(u)){if("@id"!==u&&"@type"!==u)continue;if(a=!1,"@id"===u&&U(r[u])){if(e[u]!==r[u])return!1;s=!0;continue}}if(a=!1,u in e){if(M(r[u])&&0===r[u].length&&void 0!==e[u])return!1;s=!0}else{var l=M(r[u])&&Q(r[u][0])&&"@default"in r[u][0];if(n.requireAll&&!l)return!1}}return a||s}function _(e,r){var n=e.uniqueEmbeds,i=n[r],o=i.parent,a=i.property,s={"@id":r};if(M(o)){for(var u=0;u<o.length;++u)if(t.compareValues(o[u],s)){o[u]=s;break}}else{var l=M(o[a]);t.removeValue(o,a,s,{propertyIsArray:l}),t.addValue(o,a,s,{propertyIsArray:l})}var c=function(e){for(var t=Object.keys(n),r=0;r<t.length;++r){var i=t[r];i in n&&Q(n[i].parent)&&n[i].parent["@id"]===e&&(delete n[i],c(i))}};c(r)}function S(e,r,n){Q(e)?t.addValue(e,r,n,{propertyIsArray:!0}):e.push(n)}/**
 * Removes the @preserve keywords as the last step of the framing algorithm.
 *
 * @param ctx the active context used to compact the input.
 * @param input the framed, compacted output.
 * @param options the compaction options used.
 *
 * @return the resulting output.
 */
function A(e,r,n){if(M(r)){for(var i=[],o=0;o<r.length;++o){var a=A(e,r[o],n);null!==a&&i.push(a)}r=i}else if(Q(r)){
// remove @preserve
if("@preserve"in r)return"@null"===r["@preserve"]?null:r["@preserve"];if(J(r))return r;if(K(r))return r["@list"]=A(e,r["@list"],n),r;var s=T(e,"@id");if(s in r){var u=r[s];if(u in n.link){var l=n.link[u].indexOf(r);if(l!==-1)return n.link[u][l];n.link[u].push(r)}else n.link[u]=[r]}for(var c in r){var a=A(e,r[c],n),f=t.getContextValue(e,c,"@container");n.compactArrays&&M(a)&&1===a.length&&null===f&&(a=a[0]),r[c]=a}}return r}function C(e,t){return e.length<t.length?-1:t.length<e.length?1:e===t?0:e<t?-1:1}function I(e,t,r,n,i,o){null===o&&(o="@null");var a=[];if("@id"!==o&&"@reverse"!==o||!X(r))a.push(o);else{"@reverse"===o&&a.push("@reverse");var s=T(e,r["@id"],null,{vocab:!0});s in e.mappings&&e.mappings[s]&&e.mappings[s]["@id"]===r["@id"]?a.push.apply(a,["@vocab","@id"]):a.push.apply(a,["@id","@vocab"])}a.push("@none");for(var u=e.inverse[t],l=0;l<n.length;++l){var c=n[l];if(c in u)for(var f=u[c][i],p=0;p<a.length;++p){var h=a[p];if(h in f)return f[h]}}return null}function T(e,t,r,n,i){if(null===t)return t;z(r)&&(r=null),z(i)&&(i=!1),n=n||{};var o=e.getInverse();if(P(t))return t in o?o[t]["@none"]["@type"]["@none"]:t;if(n.vocab&&t in o){var a=e["@language"]||"@none",s=[];Q(r)&&"@index"in r&&s.push("@index");var u="@language",l="@null";if(i)u="@type",l="@reverse",s.push("@set");else if(K(r)){"@index"in r||s.push("@list");for(var c=r["@list"],f=0===c.length?a:null,p=null,h=0;h<c.length;++h){var d=c[h],v="@none",g="@none";if(J(d)?"@language"in d?v=d["@language"]:"@type"in d?g=d["@type"]:v="@null":g="@id",null===f?f=v:v!==f&&J(d)&&(f="@none"),null===p?p=g:g!==p&&(p="@none"),"@none"===f&&"@none"===p)break}f=f||"@none",p=p||"@none","@none"!==p?(u="@type",l=p):l=f}else J(r)?"@language"in r&&!("@index"in r)?(s.push("@language"),l=r["@language"]):"@type"in r&&(u="@type",l=r["@type"]):(u="@type",l="@id"),s.push("@set");s.push("@none");var y=I(e,t,r,s,u,l);if(null!==y)return y}if(n.vocab&&"@vocab"in e){var m=e["@vocab"];if(0===t.indexOf(m)&&t!==m){var b=t.substr(m.length);if(!(b in e.mappings))return b}}for(var w=null,x=0,$=[],k=e.fastCurieMap,E=t.length-1;x<E&&t[x]in k;++x)k=k[t[x]],""in k&&$.push(k[""][0]);for(var h=$.length-1;h>=0;--h)for(var _=$[h],S=_.terms,A=0;A<S.length;++A){var T=S[A]+":"+t.substr(_.iri.length),F=!(T in e.mappings)||null===r&&e.mappings[T]["@id"]===t;F&&(null===w||C(T,w)<0)&&(w=T)}return null!==w?w:n.vocab?t:L(e["@base"],t)}function F(e,r,n){if(J(n)){var i=t.getContextValue(e,r,"@type"),o=t.getContextValue(e,r,"@language"),a=t.getContextValue(e,r,"@container"),s="@index"in n&&"@index"!==a;if(!s&&(n["@type"]===i||n["@language"]===o))return n["@value"];var u=Object.keys(n).length,l=1===u||2===u&&"@index"in n&&!s,c="@language"in e,f=U(n["@value"]),p=e.mappings[r]&&null===e.mappings[r]["@language"];if(l&&(!c||!f||p))return n["@value"];var h={};return s&&(h[T(e,"@index")]=n["@index"]),"@type"in n?h[T(e,"@type")]=T(e,n["@type"],null,{vocab:!0}):"@language"in n&&(h[T(e,"@language")]=n["@language"]),h[T(e,"@value")]=n["@value"],h}var d=j(e,r,{vocab:!0}),i=t.getContextValue(e,r,"@type"),v=T(e,n["@id"],null,{vocab:"@vocab"===i});if("@id"===i||"@vocab"===i||"@graph"===d)return v;var h={};return h[T(e,"@id")]=v,h}function N(e,t,r,n){if(r in n){if(n[r])return;throw new Fe("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:t,term:r})}if(n[r]=!1,P(r))throw new Fe("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:t,term:r});if(""===r)throw new Fe("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:t});e.mappings[r]&&delete e.mappings[r];var i=t[r];if(null===i||Q(i)&&null===i["@id"])return e.mappings[r]=null,void(n[r]=!0);if(U(i)&&(i={"@id":i}),!Q(i))throw new Fe("Invalid JSON-LD syntax; @context property values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:t});var o=e.mappings[r]={};if(o.reverse=!1,"@reverse"in i){if("@id"in i)throw new Fe("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});var a=i["@reverse"];if(!U(a))throw new Fe("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});var s=j(e,a,{vocab:!0,base:!1},t,n);if(!Z(s))throw new Fe("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});o["@id"]=s,o.reverse=!0}else if("@id"in i){var s=i["@id"];if(!U(s))throw new Fe("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});if(s!==r){if(s=j(e,s,{vocab:!0,base:!1},t,n),!Z(s)&&!P(s))throw new Fe("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});o["@id"]=s}}var u=r.indexOf(":");if(o._termHasColon=u!==-1,!("@id"in o))if(o._termHasColon){var l=r.substr(0,u);if(l in t&&N(e,t,l,n),e.mappings[l]){var c=r.substr(u+1);o["@id"]=e.mappings[l]["@id"]+c}else o["@id"]=r}else{if(!("@vocab"in e))throw new Fe("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t,term:r});o["@id"]=e["@vocab"]+r}if(n[r]=!0,"@type"in i){var f=i["@type"];if(!U(f))throw new Fe("Invalid JSON-LD syntax; an @context @type values must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:t});if("@id"!==f&&"@vocab"!==f){if(f=j(e,f,{vocab:!0,base:!1},t,n),!Z(f))throw new Fe("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:t});if(0===f.indexOf("_:"))throw new Fe("Invalid JSON-LD syntax; an @context @type values must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:t})}o["@type"]=f}if("@container"in i){var p=i["@container"];if("@list"!==p&&"@set"!==p&&"@index"!==p&&"@language"!==p)throw new Fe("Invalid JSON-LD syntax; @context @container value must be one of the following: @list, @set, @index, or @language.","jsonld.SyntaxError",{code:"invalid container mapping",context:t});if(o.reverse&&"@index"!==p&&"@set"!==p&&null!==p)throw new Fe("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});o["@container"]=p}if("@language"in i&&!("@type"in i)){var h=i["@language"];if(null!==h&&!U(h))throw new Fe("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:t});null!==h&&(h=h.toLowerCase()),o["@language"]=h}
// disallow aliasing @context and @preserve
var s=o["@id"];if("@context"===s||"@preserve"===s)throw new Fe("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:t})}function j(e,r,n,i,o){if(null===r||P(r))return r;if(r=String(r),i&&r in i&&o[r]!==!0&&N(e,i,r,o),n=n||{},n.vocab){var a=e.mappings[r];if(null===a)return null;if(a)return a["@id"]}var s=r.indexOf(":");if(s!==-1){var u=r.substr(0,s),l=r.substr(s+1);if("_"===u||0===l.indexOf("//"))return r;i&&u in i&&N(e,i,u,o);var a=e.mappings[u];return a?a["@id"]+l:r}if(n.vocab&&"@vocab"in e)return e["@vocab"]+r;var c=r;return n.base&&(c=t.prependBase(e["@base"],c)),c}function R(e,r){if(null===e)return r;if(r.indexOf(":")!==-1)return r;U(e)&&(e=t.url.parse(e||""));var n=t.url.parse(r),i={protocol:e.protocol||""};if(null!==n.authority)i.authority=n.authority,i.path=n.path,i.query=n.query;else if(i.authority=e.authority,""===n.path)i.path=e.path,null!==n.query?i.query=n.query:i.query=e.query;else{if(0===n.path.indexOf("/"))i.path=n.path;else{var o=e.path;""!==n.path&&(o=o.substr(0,o.lastIndexOf("/")+1),o.length>0&&"/"!==o.substr(-1)&&(o+="/"),o+=n.path),i.path=o}i.query=n.query}i.path=ue(i.path,!!i.authority);var a=i.protocol;return null!==i.authority&&(a+="//"+i.authority),a+=i.path,null!==i.query&&(a+="?"+i.query),null!==n.fragment&&(a+="#"+n.fragment),""===a&&(a="./"),a}function L(e,r){if(null===e)return r;U(e)&&(e=t.url.parse(e||""));var n="";if(""!==e.href?n+=(e.protocol||"")+"//"+(e.authority||""):r.indexOf("//")&&(n+="//"),0!==r.indexOf(n))return r;for(var i=t.url.parse(r.substr(n.length)),o=e.normalizedPath.split("/"),a=i.normalizedPath.split("/"),s=i.fragment||i.query?0:1;o.length>0&&a.length>s&&o[0]===a[0];)o.shift(),a.shift();var u="";if(o.length>0){o.pop();for(var l=0;l<o.length;++l)u+="../"}return u+=a.join("/"),null!==i.query&&(u+="?"+i.query),null!==i.fragment&&(u+="#"+i.fragment),""===u&&(u="./"),u}function O(e){function r(){var e=this;if(e.inverse)return e.inverse;for(var t=e.inverse={},r=e.fastCurieMap={},o={},a=e["@language"]||"@none",s=e.mappings,u=Object.keys(s).sort(C),l=0;l<u.length;++l){var c=u[l],f=s[c];if(null!==f){var p=f["@container"]||"@none",h=f["@id"];M(h)||(h=[h]);for(var d=0;d<h.length;++d){var v=h[d],g=t[v],y=P(v);if(g)y||f._termHasColon||o[v].push(c);else if(t[v]=g={},!y&&!f._termHasColon){o[v]=[c];var m={iri:v,terms:o[v]};v[0]in r?r[v[0]].push(m):r[v[0]]=[m]}if(g[p]||(g[p]={"@language":{},"@type":{}}),g=g[p],f.reverse)i(f,c,g["@type"],"@reverse");else if("@type"in f)i(f,c,g["@type"],f["@type"]);else if("@language"in f){var b=f["@language"]||"@null";i(f,c,g["@language"],b)}else i(f,c,g["@language"],a),i(f,c,g["@type"],"@none"),i(f,c,g["@language"],"@none")}}}for(var w in r)n(r,w,1);return t}function n(e,t,r){for(var i,o,a=e[t],s=e[t]={},u=0;u<a.length;++u)i=a[u].iri,o=r>=i.length?"":i[r],o in s?s[o].push(a[u]):s[o]=[a[u]];for(var t in s)""!==t&&n(s,t,r+1)}function i(e,t,r,n){n in r||(r[n]=t)}function o(){var e={};return e["@base"]=this["@base"],e.mappings=ee(this.mappings),e.clone=this.clone,e.inverse=null,e.getInverse=this.getInverse,"@language"in this&&(e["@language"]=this["@language"]),"@vocab"in this&&(e["@vocab"]=this["@vocab"]),e}var a=t.url.parse(e.base||"");return{"@base":a,mappings:{},inverse:null,getInverse:r,clone:o}}function P(e){if(!U(e))return!1;switch(e){case"@base":case"@context":case"@container":case"@default":case"@embed":case"@explicit":case"@graph":case"@id":case"@index":case"@language":case"@list":case"@omitDefault":case"@preserve":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@vocab":return!0}return!1}function Q(e){return"[object Object]"===Object.prototype.toString.call(e)}function D(e){return Q(e)&&0===Object.keys(e).length}function M(e){return Array.isArray(e)}function q(e){if(!U(e)&&!D(e)){var t=!1;if(M(e)){t=!0;for(var r=0;r<e.length;++r)if(!U(e[r])){t=!1;break}}if(!t)throw new Fe('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, or an empty object.',"jsonld.SyntaxError",{code:"invalid type value",value:e})}}function U(e){return"string"==typeof e||"[object String]"===Object.prototype.toString.call(e)}function B(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function G(e){return B(e)&&String(e).indexOf(".")!==-1}function H(e){return!isNaN(parseFloat(e))&&isFinite(e)}function V(e){return"boolean"==typeof e||"[object Boolean]"===Object.prototype.toString.call(e)}function z(e){return"undefined"==typeof e}function W(e){var t=!1;if(Q(e)&&!("@value"in e||"@set"in e||"@list"in e)){var r=Object.keys(e).length;t=r>1||!("@id"in e)}return t}function X(e){return Q(e)&&1===Object.keys(e).length&&"@id"in e}function J(e){return Q(e)&&"@value"in e}function K(e){return Q(e)&&"@list"in e}function Y(e){var t=!1;return Q(e)&&(t="@id"in e?0===e["@id"].indexOf("_:"):0===Object.keys(e).length||!("@value"in e||"@set"in e||"@list"in e)),t}function Z(e){return U(e)&&e.indexOf(":")!==-1}function ee(e){if(e&&"object"==typeof e){var t;if(M(e)){t=[];for(var r=0;r<e.length;++r)t[r]=ee(e[r])}else if(Q(e)){t={};for(var n in e)t[n]=ee(e[n])}else t=e.toString();return t}return e}function te(e,r,n,i){var o=Object.keys(r).length;if(M(e)){for(var a=0;a<e.length;++a)te(e[a],r,n,i);return o<Object.keys(r).length}if(Q(e)){for(var s in e)if("@context"===s){var u=e[s];if(M(u))for(var l=u.length,a=0;a<l;++a){var c=u[a];U(c)&&(c=t.prependBase(i,c),n?(c=r[c],M(c)?(Array.prototype.splice.apply(u,[a,1].concat(c)),a+=c.length-1,l=u.length):u[a]=c):c in r||(r[c]=!1))}else U(u)&&(u=t.prependBase(i,u),n?e[s]=r[u]:u in r||(r[u]=!1))}else te(e[s],r,n,i);return o<Object.keys(r).length}return!1}function re(e,t,r){var n=null,i=t.documentLoader,o=function(e,t,r,i,a){if(Object.keys(t).length>Te)return n=new Fe("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"loading remote context failed",max:Te}),a(n);var s={},u=function(){te(e,s,!0,i),a(null,e)};te(e,s,!1,i)||u();var l=[];for(var c in s)s[c]===!1&&l.push(c);for(var f=l.length,p=0;p<l.length;++p)!function(e){if(e in t)return n=new Fe("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"recursive context inclusion",url:e}),a(n);var i=ee(t);i[e]=!0;var l=function(t,l){if(!n){var c=l?l.document:null;if(!t&&U(c))try{c=JSON.parse(c)}catch(e){t=e}if(t?t=new Fe("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:e,cause:t}):Q(c)||(t=new Fe("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:e,cause:t})),t)return n=t,a(n);c="@context"in c?{"@context":c["@context"]}:{"@context":{}},l.contextUrl&&(M(c["@context"])||(c["@context"]=[c["@context"]]),c["@context"].push(l.contextUrl)),o(c,i,r,e,function(t,r){return t?a(t):(s[e]=r["@context"],f-=1,void(0===f&&u()))})}},c=r(e,l);c&&"then"in c&&c.then(l.bind(null,null),l)}(l[p])};o(e,{},i,t.base,r)}function ne(e){for(var t="(?:<([^:]+:[^>]*)>)",r="(_:(?:[A-Za-z0-9]+))",n='"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"',i="(?:\\^\\^"+t+")",o="(?:@([a-z]+(?:-[a-z0-9]+)*))",a="(?:"+n+"(?:"+i+"|"+o+")?)",s="(?:#.*)?",u="[ \\t]+",l="[ \\t]*",c=/(?:\r\n)|(?:\n)|(?:\r)/g,f=new RegExp("^"+l+s+"$"),p="(?:"+t+"|"+r+")"+u,h=t+u,d="(?:"+t+"|"+r+"|"+a+")"+l,g="(?:\\.|(?:(?:"+t+"|"+r+")"+l+"\\.))",y=new RegExp("^"+l+p+h+d+g+l+s+"$"),m={},b=e.split(c),w=0,x=0;x<b.length;++x){var $=b[x];if(w++,!f.test($)){var k=$.match(y);if(null===k)throw new Fe("Error while parsing N-Quads; invalid quad.","jsonld.ParseError",{line:w});var E={};if(z(k[1])?E.subject={type:"blank node",value:k[2]}:E.subject={type:"IRI",value:k[1]},E.predicate={type:"IRI",value:k[3]},z(k[4]))if(z(k[5])){E.object={type:"literal"},z(k[7])?z(k[8])?E.object.datatype=me:(E.object.datatype=Ce,E.object.language=k[8]):E.object.datatype=k[7];var _=k[6].replace(/\\"/g,'"').replace(/\\t/g,"\t").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\\\/g,"\\");E.object.value=_}else E.object={type:"blank node",value:k[5]};else E.object={type:"IRI",value:k[4]};var S="@default";if(z(k[9])?z(k[10])||(S=k[10]):S=k[9],S in m){for(var A=!0,C=m[S],I=0;A&&I<C.length;++I)v(C[I],E)&&(A=!1);A&&C.push(E)}else m[S]=[E]}}return m}function ie(e){var t=[];for(var r in e)for(var n=e[r],i=0;i<n.length;++i){var o=n[i];"@default"===r&&(r=null),t.push(oe(o,r))}return t.sort().join("")}function oe(e,t){var r=e.subject,n=e.predicate,i=e.object,o=t||null;"name"in e&&e.name&&(o=e.name.value);var a="";if(a+="IRI"===r.type?"<"+r.value+">":r.value,a+=" ",a+="IRI"===n.type?"<"+n.value+">":n.value,a+=" ","IRI"===i.type)a+="<"+i.value+">";else if("blank node"===i.type)a+=i.value;else{var s=i.value.replace(/\\/g,"\\\\").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\"/g,'\\"');a+='"'+s+'"',i.datatype===Ce?i.language&&(a+="@"+i.language):i.datatype!==me&&(a+="^^<"+i.datatype+">")}return null!==o&&void 0!==o&&(a+=0!==o.indexOf("_:")?" <"+o+">":" "+o),a+=" .\n"}function ae(e){var t={};t["@default"]=[];for(var r=e.getSubjects(),n=0;n<r.length;++n){var i=r[n];if(null!==i){var o=e.getSubjectTriples(i);if(null!==o){var a=o.predicates;for(var s in a)for(var u=a[s].objects,l=0;l<u.length;++l){var c=u[l],f={};0===i.indexOf("_:")?f.subject={type:"blank node",value:i}:f.subject={type:"IRI",value:i},0===s.indexOf("_:")?f.predicate={type:"blank node",value:s}:f.predicate={type:"IRI",value:s};var p=c.value;if(c.type===Se){he||Pe();var h=new he;p="";for(var d=0;d<c.value.length;d++)c.value[d].nodeType===de.ELEMENT_NODE?p+=h.serializeToString(c.value[d]):c.value[d].nodeType===de.TEXT_NODE&&(p+=c.value[d].nodeValue)}f.object={},c.type===Ae?0===c.value.indexOf("_:")?f.object.type="blank node":f.object.type="IRI":(f.object.type="literal",c.type===_e?c.language?(f.object.datatype=Ce,f.object.language=c.language):f.object.datatype=me:f.object.datatype=c.type),f.object.value=p,t["@default"].push(f)}}}}return t}function se(e){this.prefix=e,this.counter=0,this.existing={}}function ue(e,t){var r="";0===e.indexOf("/")&&(r="/");for(var n=e.split("/"),i=[];n.length>0;)"."===n[0]||""===n[0]&&n.length>1?n.shift():".."!==n[0]?i.push(n.shift()):(n.shift(),t||i.length>0&&".."!==i[i.length-1]?i.pop():i.push(".."));return r+i.join("/")}t.compact=function(e,r,n,i){function o(e,t,n,o){if(e)return i(e);o.compactArrays&&!o.graph&&M(t)?1===t.length?t=t[0]:0===t.length&&(t={}):o.graph&&Q(t)&&(t=[t]),Q(r)&&"@context"in r&&(r=r["@context"]),r=ee(r),M(r)||(r=[r]);var a=r;r=[];for(var s=0;s<a.length;++s)(!Q(a[s])||Object.keys(a[s]).length>0)&&r.push(a[s]);var u=r.length>0;if(1===r.length&&(r=r[0]),M(t)){var l=T(n,"@graph"),c=t;t={},u&&(t["@context"]=r),t[l]=c}else if(Q(t)&&u){var c=t;t={"@context":r};for(var f in c)t[f]=c[f]}i(null,t,n)}if(arguments.length<2)return t.nextTick(function(){i(new TypeError("Could not compact, too few arguments."))});if("function"==typeof n&&(i=n,n={}),n=n||{},null===r)return t.nextTick(function(){i(new Fe("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"}))});if(null===e)return t.nextTick(function(){i(null,null)});"base"in n||(n.base="string"==typeof e?e:""),"compactArrays"in n||(n.compactArrays=!0),"graph"in n||(n.graph=!1),"skipExpansion"in n||(n.skipExpansion=!1),"documentLoader"in n||(n.documentLoader=t.loadDocument),"link"in n||(n.link=!1),n.link&&(n.skipExpansion=!0);var a=function(e,r,n){return r.skipExpansion?t.nextTick(function(){n(null,e)}):void t.expand(e,r,n)};a(e,n,function(e,a){if(e)return i(new Fe("Could not expand input before compaction.","jsonld.CompactError",{cause:e}));var s=O(n);t.processContext(s,r,n,function(e,t){if(e)return i(new Fe("Could not process context before compaction.","jsonld.CompactError",{cause:e}));var r;try{r=(new Ne).compact(t,null,a,n)}catch(e){return i(e)}o(null,r,t,n)})})},t.expand=function(e,r,n){function i(e){"base"in r||(r.base=e.documentUrl||"");var t={document:ee(e.document),remoteContext:{"@context":e.contextUrl}};if("expandContext"in r){var i=ee(r.expandContext);"object"==typeof i&&"@context"in i?t.expandContext=i:t.expandContext={"@context":i}}re(t,r,function(e,t){if(e)return n(e);var i;try{var o=new Ne,a=O(r),s=t.document,u=t.remoteContext["@context"];t.expandContext&&(a=o.processContext(a,t.expandContext["@context"],r)),u&&(a=o.processContext(a,u,r)),i=o.expand(a,null,s,r,!1),Q(i)&&"@graph"in i&&1===Object.keys(i).length?i=i["@graph"]:null===i&&(i=[]),M(i)||(i=[i])}catch(e){return n(e)}n(null,i)})}return arguments.length<1?t.nextTick(function(){n(new TypeError("Could not expand, too few arguments."))}):("function"==typeof r&&(n=r,r={}),r=r||{},"documentLoader"in r||(r.documentLoader=t.loadDocument),"keepFreeFloatingNodes"in r||(r.keepFreeFloatingNodes=!1),void t.nextTick(function(){if("string"==typeof e){var t=function(e,t){if(e)return n(e);try{if(!t.document)throw new Fe("No remote document found at the given URL.","jsonld.NullRemoteDocument");"string"==typeof t.document&&(t.document=JSON.parse(t.document))}catch(e){return n(new Fe("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",cause:e,remoteDoc:t}))}i(t)},o=r.documentLoader(e,t);return void(o&&"then"in o&&o.then(t.bind(null,null),t))}i({contextUrl:null,documentUrl:null,document:e})}))},t.flatten=function(e,r,n,i){return arguments.length<1?t.nextTick(function(){i(new TypeError("Could not flatten, too few arguments."))}):("function"==typeof n?(i=n,n={}):"function"==typeof r&&(i=r,r=null,n={}),n=n||{},"base"in n||(n.base="string"==typeof e?e:""),"documentLoader"in n||(n.documentLoader=t.loadDocument),void t.expand(e,n,function(e,o){if(e)return i(new Fe("Could not expand input before flattening.","jsonld.FlattenError",{cause:e}));var a;try{a=(new Ne).flatten(o)}catch(e){return i(e)}return null===r?i(null,a):(n.graph=!0,n.skipExpansion=!0,void t.compact(a,r,n,function(e,t){return e?i(new Fe("Could not compact flattened output.","jsonld.FlattenError",{cause:e})):void i(null,t)}))}))},t.frame=function(e,r,n,i){function o(r){var o,a=r.document;a?(o=a["@context"],r.contextUrl?(o?M(o)?o.push(r.contextUrl):o=[o,r.contextUrl]:o=r.contextUrl,a["@context"]=o):o=o||{}):o={},t.expand(e,n,function(e,r){if(e)return i(new Fe("Could not expand input before framing.","jsonld.FrameError",{cause:e}));var s=ee(n);s.isFrame=!0,s.keepFreeFloatingNodes=!0,t.expand(a,s,function(e,n){if(e)return i(new Fe("Could not expand frame before framing.","jsonld.FrameError",{cause:e}));var a;try{a=(new Ne).frame(r,n,s)}catch(e){return i(e)}s.graph=!0,s.skipExpansion=!0,s.link={},t.compact(a,o,s,function(e,t,r){if(e)return i(new Fe("Could not compact framed output.","jsonld.FrameError",{cause:e}));var n=T(r,"@graph");
// remove @preserve from results
s.link={},t[n]=A(r,t[n],s),i(null,t)})})})}return arguments.length<2?t.nextTick(function(){i(new TypeError("Could not frame, too few arguments."))}):("function"==typeof n&&(i=n,n={}),n=n||{},"base"in n||(n.base="string"==typeof e?e:""),"documentLoader"in n||(n.documentLoader=t.loadDocument),"embed"in n||(n.embed="@last"),n.explicit=n.explicit||!1,"requireAll"in n||(n.requireAll=!0),n.omitDefault=n.omitDefault||!1,void t.nextTick(function(){if("string"==typeof r){var e=function(e,t){if(e)return i(e);try{if(!t.document)throw new Fe("No remote document found at the given URL.","jsonld.NullRemoteDocument");"string"==typeof t.document&&(t.document=JSON.parse(t.document))}catch(e){return i(new Fe("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",cause:e,remoteDoc:t}))}o(t)},t=n.documentLoader(r,e);return void(t&&"then"in t&&t.then(e.bind(null,null),e))}o({contextUrl:null,documentUrl:null,document:r})}))},t.link=function(e,r,n,i){var o={};r&&(o["@context"]=r),o["@embed"]="@link",t.frame(e,o,n,i)},t.objectify=function(e,r,n,i){"function"==typeof n&&(i=n,n={}),n=n||{},"base"in n||(n.base="string"==typeof e?e:""),"documentLoader"in n||(n.documentLoader=t.loadDocument),t.expand(e,n,function(e,o){if(e)return i(new Fe("Could not expand input before linking.","jsonld.LinkError",{cause:e}));var a;try{a=(new Ne).flatten(o)}catch(e){return i(e)}n.graph=!0,n.skipExpansion=!0,t.compact(a,r,n,function(e,r,n){if(e)return i(new Fe("Could not compact flattened output before linking.","jsonld.LinkError",{cause:e}));var o=T(n,"@graph"),a=r[o][0],s=function(e){if(Q(e)||M(e)){if(Q(e)){if(s.visited[e["@id"]])return;s.visited[e["@id"]]=!0}for(var r in e){var i=e[r],o="@id"===t.getContextValue(n,r,"@type");if(M(i)||Q(i)||o)if(U(i)&&o)e[r]=i=a[i],s(i);else if(M(i))for(var u=0;u<i.length;++u)U(i[u])&&o?i[u]=a[i[u]]:Q(i[u])&&"@id"in i[u]&&(i[u]=a[i[u]["@id"]]),s(i[u]);else if(Q(i)){var l=i["@id"];e[r]=i=a[l],s(i)}}}};s.visited={},s(a),r.of_type={};for(var u in a)if("@type"in a[u]){var l=a[u]["@type"];M(l)||(l=[l]);for(var c=0;c<l.length;++c)l[c]in r.of_type||(r.of_type[l[c]]=[]),r.of_type[l[c]].push(a[u])}i(null,r)})})},t.normalize=function(e,r,n){if(arguments.length<1)return t.nextTick(function(){n(new TypeError("Could not normalize, too few arguments."))});if("function"==typeof r&&(n=r,r={}),r=r||{},"algorithm"in r||(r.algorithm="URGNA2012"),"base"in r||(r.base="string"==typeof e?e:""),"documentLoader"in r||(r.documentLoader=t.loadDocument),"inputFormat"in r){if("application/nquads"!==r.inputFormat)return n(new Fe("Unknown normalization input format.","jsonld.NormalizeError"));var i=ne(e);(new Ne).normalize(i,r,n)}else{var o=ee(r);delete o.format,o.produceGeneralizedRdf=!1,t.toRDF(e,o,function(e,t){return e?n(new Fe("Could not convert input to RDF dataset before normalization.","jsonld.NormalizeError",{cause:e})):void(new Ne).normalize(t,r,n)})}},t.fromRDF=function(e,r,n){return arguments.length<1?t.nextTick(function(){n(new TypeError("Could not convert from RDF, too few arguments."))}):("function"==typeof r&&(n=r,r={}),r=r||{},"useRdfType"in r||(r.useRdfType=!1),"useNativeTypes"in r||(r.useNativeTypes=!1),"format"in r||!U(e)||"format"in r||(r.format="application/nquads"),void t.nextTick(function(){function t(e,t,r){(new Ne).fromRDF(e,t,r)}var i;if(r.format){if(i=r.rdfParser||pe[r.format],!i)return n(new Fe("Unknown input format.","jsonld.UnknownFormat",{format:r.format}))}else i=function(){return e};var o=!1;try{e=i(e,function(e,i){return o=!0,e?n(e):void t(i,r,n)})}catch(e){if(!o)return n(e);throw e}if(e){if("then"in e)return e.then(function(e){t(e,r,n)},n);t(e,r,n)}}))},t.toRDF=function(e,r,n){return arguments.length<1?t.nextTick(function(){n(new TypeError("Could not convert to RDF, too few arguments."))}):("function"==typeof r&&(n=r,r={}),r=r||{},"base"in r||(r.base="string"==typeof e?e:""),"documentLoader"in r||(r.documentLoader=t.loadDocument),void t.expand(e,r,function(e,t){if(e)return n(new Fe("Could not expand input before serialization to RDF.","jsonld.RdfError",{cause:e}));var i;try{if(i=Ne.prototype.toRDF(t,r),r.format){if("application/nquads"===r.format)return n(null,ie(i));throw new Fe("Unknown output format.","jsonld.UnknownFormat",{format:r.format})}}catch(e){return n(e)}n(null,i)}))},t.createNodeMap=function(e,r,n){return arguments.length<1?t.nextTick(function(){n(new TypeError("Could not create node map, too few arguments."))}):("function"==typeof r&&(n=r,r={}),r=r||{},"base"in r||(r.base="string"==typeof e?e:""),"documentLoader"in r||(r.documentLoader=t.loadDocument),void t.expand(e,r,function(e,t){if(e)return n(new Fe("Could not expand input before creating node map.","jsonld.CreateNodeMapError",{cause:e}));var i;try{i=(new Ne).createNodeMap(t,r)}catch(e){return n(e)}n(null,i)}))},t.merge=function(e,r,n,i){function o(e,t){if(!u){if(e)return u=e,i(new Fe("Could not expand input before flattening.","jsonld.FlattenError",{cause:e}));s.push(t),0===--l&&a(s)}}function a(e){var o=!0;"mergeNodes"in n&&(o=n.mergeNodes);var a,s=n.namer||n.issuer||new se("_:b"),u={"@default":{}};try{for(var l=0;l<e.length;++l){var c=e[l];c=t.relabelBlankNodes(c,{issuer:new se("_:b"+l+"-")});var f=o||0===l?u:{"@default":{}};if(g(c,f,"@default",s),f!==u)for(var p in f){var h=f[p];if(p in u){var d=u[p];for(var v in h)v in d||(d[v]=h[v])}else u[p]=h}}a=y(u)}catch(e){return i(e)}for(var m=[],b=Object.keys(a).sort(),w=0;w<b.length;++w){var x=a[b[w]];X(x)||m.push(x)}return null===r?i(null,m):(n.graph=!0,n.skipExpansion=!0,void t.compact(m,r,n,function(e,t){return e?i(new Fe("Could not compact merged output.","jsonld.MergeError",{cause:e})):void i(null,t)}))}if(arguments.length<1)return t.nextTick(function(){i(new TypeError("Could not merge, too few arguments."))});if(!M(e))return t.nextTick(function(){i(new TypeError('Could not merge, "docs" must be an array.'))});"function"==typeof n?(i=n,n={}):"function"==typeof r&&(i=r,r=null,n={}),n=n||{};for(var s=[],u=null,l=e.length,c=0;c<e.length;++c){var f={};for(var p in n)f[p]=n[p];t.expand(e[c],f,o)}},t.relabelBlankNodes=function(e,t){t=t||{};var r=t.namer||t.issuer||new se("_:b");return l(r,e)},t.prependBase=function(e,t){return R(e,t)},t.documentLoader=function(e,r){var n=new Fe("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed"});return o?r(n,{contextUrl:null,documentUrl:e,document:null}):t.promisify(function(e){e(n)})},t.loadDocument=function(e,r){var n=t.documentLoader(e,r);n&&"then"in n&&n.then(r.bind(null,null),r)},t.promises=function(r){r=r||{};var i=Array.prototype.slice,o=t.promisify,a=r.api||{},s=r.version||"jsonld.js";"string"==typeof r.api&&(r.version||(s=r.api),a={}),a.expand=function(e){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");return o.apply(null,[t.expand].concat(i.call(arguments)))},a.compact=function(e,r){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");var n=function(e,r,n,i){t.compact(e,r,n,function(e,t){i(e,t)})};return o.apply(null,[n].concat(i.call(arguments)))},a.flatten=function(e){if(arguments.length<1)throw new TypeError("Could not flatten, too few arguments.");return o.apply(null,[t.flatten].concat(i.call(arguments)))},a.frame=function(e,r){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");return o.apply(null,[t.frame].concat(i.call(arguments)))},a.fromRDF=function(e){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");return o.apply(null,[t.fromRDF].concat(i.call(arguments)))},a.toRDF=function(e){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");return o.apply(null,[t.toRDF].concat(i.call(arguments)))},a.normalize=function(e){if(arguments.length<1)throw new TypeError("Could not normalize, too few arguments.");return o.apply(null,[t.normalize].concat(i.call(arguments)))},"jsonld.js"===s&&(a.link=function(e,r){if(arguments.length<2)throw new TypeError("Could not link, too few arguments.");return o.apply(null,[t.link].concat(i.call(arguments)))},a.objectify=function(e){return o.apply(null,[t.objectify].concat(i.call(arguments)))},a.createNodeMap=function(e){return o.apply(null,[t.createNodeMap].concat(i.call(arguments)))},a.merge=function(e){return o.apply(null,[t.merge].concat(i.call(arguments)))});try{t.Promise=n.Promise||e("es6-promise").Promise}catch(e){var u=function(){throw new Error("Unable to find a Promise implementation.")};for(var l in a)a[l]=u}return a},t.promisify=function(r){if(!t.Promise)try{t.Promise=n.Promise||e("es6-promise").Promise}catch(e){throw new Error("Unable to find a Promise implementation.")}var i=Array.prototype.slice.call(arguments,1);return new t.Promise(function(e,t){r.apply(null,i.concat(function(r,n){r?t(r):e(n)}))})},t.promises({api:t.promises}),s.prototype=t.promises({version:"json-ld-1.0"}),s.prototype.toString=function(){return this instanceof s?"[object JsonLdProcessor]":"[object JsonLdProcessorPrototype]"},t.JsonLdProcessor=s;var le=!!Object.defineProperty;if(le)try{Object.defineProperty({},"x",{})}catch(e){le=!1}le&&(Object.defineProperty(s,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(s.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:s})),a&&"undefined"==typeof n.JsonLdProcessor&&(le?Object.defineProperty(n,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:s}):n.JsonLdProcessor=s);var ce="function"==typeof setImmediate&&setImmediate,fe=ce?function(e){ce(e)}:function(e){setTimeout(e,0)};"object"==typeof r&&"function"==typeof r.nextTick?t.nextTick=r.nextTick:t.nextTick=fe,t.setImmediate=ce?fe:t.nextTick,t.parseLinkHeader=function(e){for(var t={},r=e.match(/(?:<[^>]*?>|"[^"]*?"|[^,])+/g),n=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,i=0;i<r.length;++i){var o=r[i].match(n);if(o){for(var a={target:o[1]},s=o[2],u=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g;o=u.exec(s);)a[o[1]]=void 0===o[2]?o[3]:o[2];var l=a.rel||"";M(t[l])?t[l].push(a):l in t?t[l]=[t[l],a]:t[l]=a}}return t},t.RequestQueue=function(){this._requests={}},t.RequestQueue.prototype.wrapLoader=function(e){return this._loader=e,this._usePromise=1===e.length,this.add.bind(this)},t.RequestQueue.prototype.add=function(e,r){var n=this;if(!r&&!n._usePromise)throw new Error("callback must be specified.");return n._usePromise?new t.Promise(function(t,r){var i=n._requests[e];i||(i=n._requests[e]=n._loader(e).then(function(t){return delete n._requests[e],t}).catch(function(t){throw delete n._requests[e],t})),i.then(function(e){t(e)}).catch(function(e){r(e)})}):void(e in n._requests?n._requests[e].push(r):(n._requests[e]=[r],n._loader(e,function(t,r){var i=n._requests[e];delete n._requests[e];for(var o=0;o<i.length;++o)i[o](t,r)})))},t.DocumentCache=function(e){this.order=[],this.cache={},this.size=e||50,this.expires=3e4},t.DocumentCache.prototype.get=function(e){if(e in this.cache){var t=this.cache[e];if(t.expires>=+new Date)return t.ctx;delete this.cache[e],this.order.splice(this.order.indexOf(e),1)}return null},t.DocumentCache.prototype.set=function(e,t){this.order.length===this.size&&delete this.cache[this.order.shift()],this.order.push(e),this.cache[e]={ctx:t,expires:+new Date+this.expires}},t.ActiveContextCache=function(e){this.order=[],this.cache={},this.size=e||100},t.ActiveContextCache.prototype.get=function(e,t){var r=JSON.stringify(e),n=JSON.stringify(t),i=this.cache[r];return i&&n in i?i[n]:null},t.ActiveContextCache.prototype.set=function(e,t,r){if(this.order.length===this.size){var n=this.order.shift();delete this.cache[n.activeCtx][n.localCtx]}var i=JSON.stringify(e),o=JSON.stringify(t);this.order.push({activeCtx:i,localCtx:o}),i in this.cache||(this.cache[i]={}),this.cache[i][o]=ee(r)},t.cache={activeCtx:new t.ActiveContextCache},t.documentLoaders={},t.documentLoaders.jquery=function(e,r){function n(n,i){return 0!==n.indexOf("http:")&&0!==n.indexOf("https:")?i(new Fe('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:n}),{contextUrl:null,documentUrl:n,document:null}):r.secure&&0!==n.indexOf("https")?i(new Fe('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:n}),{contextUrl:null,documentUrl:n,document:null}):void e.ajax({url:n,accepts:{json:"application/ld+json, application/json"},headers:{Accept:"application/ld+json, application/json"},dataType:"json",crossDomain:!0,success:function(e,r,o){var a={contextUrl:null,documentUrl:n,document:e},s=o.getResponseHeader("Content-Type"),u=o.getResponseHeader("Link");if(u&&"application/ld+json"!==s){if(u=t.parseLinkHeader(u)[Ie],M(u))return i(new Fe("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:n}),a);u&&(a.contextUrl=u.target)}i(null,a)},error:function(e,t,r){i(new Fe("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:n,cause:r}),{contextUrl:null,documentUrl:n,document:null})}})}r=r||{};var i=new t.RequestQueue,o="usePromise"in r?r.usePromise:"undefined"!=typeof Promise;return o?i.wrapLoader(function(e){return t.promisify(n,e)}):i.wrapLoader(n)},t.documentLoaders.node=function(r){function n(e,l,c){function f(r,i,a){if(p={contextUrl:null,documentUrl:e,document:a||null},r)return c(new Fe("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:e,cause:r}),p);var s=u.STATUS_CODES[i.statusCode];if(i.statusCode>=400)return c(new Fe("URL could not be dereferenced: "+s,"jsonld.InvalidUrl",{code:"loading document failed",url:e,httpStatusCode:i.statusCode}),p);if(i.headers.link&&"application/ld+json"!==i.headers["content-type"]){var f=t.parseLinkHeader(i.headers.link)[Ie];if(M(f))return c(new Fe("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:e}),p);f&&(p.contextUrl=f.target)}return i.statusCode>=300&&i.statusCode<400&&i.headers.location?l.length===o?c(new Fe("URL could not be dereferenced; there were too many redirects.","jsonld.TooManyRedirects",{code:"loading document failed",url:e,httpStatusCode:i.statusCode,redirects:l}),p):l.indexOf(e)!==-1?c(new Fe("URL could not be dereferenced; infinite redirection was detected.","jsonld.InfiniteRedirectDetected",{code:"recursive context inclusion",url:e,httpStatusCode:i.statusCode,redirects:l}),p):(l.push(e),n(i.headers.location,l,c)):(l.push(e),void c(r,p))}if(0!==e.indexOf("http:")&&0!==e.indexOf("https:"))return c(new Fe('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:e}),{contextUrl:null,documentUrl:e,document:null});if(r.secure&&0!==e.indexOf("https"))return c(new Fe('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:e}),{contextUrl:null,documentUrl:e,document:null});var p=null;if(null!==p)return c(null,p);var h={Accept:s};for(var d in r.headers)h[d]=r.headers[d];a({url:e,headers:h,strictSSL:i,followRedirect:!1},f)}r=r||{};var i=!("strictSSL"in r)||r.strictSSL,o="maxRedirects"in r?r.maxRedirects:-1,a="request"in r?r.request:e("request"),s="application/ld+json, application/json",u=e("http"),l=new t.RequestQueue;if(r.usePromise)return l.wrapLoader(function(e){return t.promisify(n,e,[])});var c=r.headers||{};if("Accept"in c||"accept"in c)throw new RangeError('Accept header may not be specified as an option; only "'+s+'" is supported.');return l.wrapLoader(function(e,t){n(e,[],t)})},t.documentLoaders.xhr=function(e){function r(r,i){if(0!==r.indexOf("http:")&&0!==r.indexOf("https:"))return i(new Fe('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:r}),{contextUrl:null,documentUrl:r,document:null});if(e.secure&&0!==r.indexOf("https"))return i(new Fe('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:r}),{contextUrl:null,documentUrl:r,document:null});var o=e.xhr||XMLHttpRequest,a=new o;a.onload=function(){if(a.status>=400)return i(new Fe("URL could not be dereferenced: "+a.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:r,httpStatusCode:a.status}),{contextUrl:null,documentUrl:r,document:null});var e,o={contextUrl:null,documentUrl:r,document:a.response},s=a.getResponseHeader("Content-Type");if(n.test(a.getAllResponseHeaders())&&(e=a.getResponseHeader("Link")),e&&"application/ld+json"!==s){if(e=t.parseLinkHeader(e)[Ie],M(e))return i(new Fe("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:r}),o);e&&(o.contextUrl=e.target)}i(null,o)},a.onerror=function(){i(new Fe("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:r}),{contextUrl:null,documentUrl:r,document:null})},a.open("GET",r,!0),a.setRequestHeader("Accept","application/ld+json, application/json"),a.send()}e=e||{};var n=/(^|(\r\n))link:/i,i=new t.RequestQueue,o="usePromise"in e?e.usePromise:"undefined"!=typeof Promise;return o?i.wrapLoader(function(e){return t.promisify(r,e)}):i.wrapLoader(r)},t.useDocumentLoader=function(e){if(!(e in t.documentLoaders))throw new Fe('Unknown document loader type: "'+e+'"',"jsonld.UnknownDocumentLoader",{type:e});t.documentLoader=t.documentLoaders[e].apply(t,Array.prototype.slice.call(arguments,1))},t.processContext=function(e,r){var n={},i=2;arguments.length>3&&(n=arguments[2]||{},i+=1);var o=arguments[i];return"base"in n||(n.base=""),"documentLoader"in n||(n.documentLoader=t.loadDocument),null===r?o(null,O(n)):(r=ee(r),Q(r)&&"@context"in r||(r={"@context":r}),void re(r,n,function(t,r){if(t)return o(t);try{r=(new Ne).processContext(e,r,n)}catch(e){return o(e)}o(null,r)}))},t.hasProperty=function(e,t){var r=!1;if(t in e){var n=e[t];r=!M(n)||n.length>0}return r},t.hasValue=function(e,r,n){var i=!1;if(t.hasProperty(e,r)){var o=e[r],a=K(o);if(M(o)||a){a&&(o=o["@list"]);for(var s=0;s<o.length;++s)if(t.compareValues(n,o[s])){i=!0;break}}else M(n)||(i=t.compareValues(n,o))}return i},t.addValue=function(e,r,n,i){if(i=i||{},"propertyIsArray"in i||(i.propertyIsArray=!1),"allowDuplicate"in i||(i.allowDuplicate=!0),M(n)){0!==n.length||!i.propertyIsArray||r in e||(e[r]=[]);for(var o=0;o<n.length;++o)t.addValue(e,r,n[o],i)}else if(r in e){var a=!i.allowDuplicate&&t.hasValue(e,r,n);M(e[r])||a&&!i.propertyIsArray||(e[r]=[e[r]]),a||e[r].push(n)}else e[r]=i.propertyIsArray?[n]:n},t.getValues=function(e,t){var r=e[t]||[];return M(r)||(r=[r]),r},t.removeProperty=function(e,t){delete e[t]},t.removeValue=function(e,r,n,i){i=i||{},"propertyIsArray"in i||(i.propertyIsArray=!1);var o=t.getValues(e,r).filter(function(e){return!t.compareValues(e,n)});0===o.length?t.removeProperty(e,r):1!==o.length||i.propertyIsArray?e[r]=o:e[r]=o[0]},t.compareValues=function(e,t){return e===t||(!(!J(e)||!J(t)||e["@value"]!==t["@value"]||e["@type"]!==t["@type"]||e["@language"]!==t["@language"]||e["@index"]!==t["@index"])||!!(Q(e)&&"@id"in e&&Q(t)&&"@id"in t)&&e["@id"]===t["@id"])},t.getContextValue=function(e,t,r){var n=null;if(null===t)return n;if("@language"===r&&r in e&&(n=e[r]),e.mappings[t]){var i=e.mappings[t];z(r)?n=i:r in i&&(n=i[r])}return n};var pe={};if(t.registerRDFParser=function(e,t){pe[e]=t},t.unregisterRDFParser=function(e){delete pe[e]},o){if("undefined"==typeof he)var he=null;if("undefined"==typeof de)var de={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12}}var ve="http://www.w3.org/2001/XMLSchema#boolean",ge="http://www.w3.org/2001/XMLSchema#double",ye="http://www.w3.org/2001/XMLSchema#integer",me="http://www.w3.org/2001/XMLSchema#string",be="http://www.w3.org/1999/02/22-rdf-syntax-ns#",we=be+"List",xe=be+"first",$e=be+"rest",ke=be+"nil",Ee=be+"type",_e=be+"PlainLiteral",Se=be+"XMLLiteral",Ae=be+"object",Ce=be+"langString",Ie="http://www.w3.org/ns/json-ld#context",Te=10,Fe=function(e,t,r){o?(Error.call(this),Error.captureStackTrace(this,this.constructor)):"undefined"!=typeof Error&&(this.stack=(new Error).stack),this.name=t||"jsonld.Error",this.message=e||"An unspecified JSON-LD error occurred.",this.details=r||{}};o?e("util").inherits(Fe,Error):"undefined"!=typeof Error&&(Fe.prototype=new Error);var Ne=function(){};Ne.prototype.compact=function(e,r,n,i){if(M(n)){for(var o=[],a=0;a<n.length;++a){var s=this.compact(e,r,n[a],i);null!==s&&o.push(s)}if(i.compactArrays&&1===o.length){var u=t.getContextValue(e,r,"@container");null===u&&(o=o[0])}return o}if(Q(n)){if(i.link&&"@id"in n&&n["@id"]in i.link)for(var l=i.link[n["@id"]],a=0;a<l.length;++a)if(l[a].expanded===n)return l[a].compacted;if(J(n)||X(n)){var o=F(e,r,n);return i.link&&X(n)&&(n["@id"]in i.link||(i.link[n["@id"]]=[]),i.link[n["@id"]].push({expanded:n,compacted:o})),o}var c="@reverse"===r,o={};i.link&&"@id"in n&&(n["@id"]in i.link||(i.link[n["@id"]]=[]),i.link[n["@id"]].push({expanded:n,compacted:o}));for(var f=Object.keys(n).sort(),p=0;p<f.length;++p){var h=f[p],d=n[h];if("@id"!==h&&"@type"!==h)if("@reverse"!==h)if("@index"!==h)if("@graph"!==h&&"@list"!==h&&P(h)){var v=T(e,h);t.addValue(o,v,d)}else{if(0===d.length){var g=T(e,h,d,{vocab:!0},c);t.addValue(o,g,d,{propertyIsArray:!0})}for(var y=0;y<d.length;++y){var m=d[y],g=T(e,h,m,{vocab:!0},c),u=t.getContextValue(e,g,"@container"),b=K(m),w=null;b&&(w=m["@list"]);var x=this.compact(e,g,b?w:m,i);if(b)if(M(x)||(x=[x]),"@list"!==u){var $={};$[T(e,"@list")]=x,x=$,"@index"in m&&(x[T(e,"@index")]=m["@index"])}else if(g in o)throw new Fe('JSON-LD compact error; property has a "@list" @container rule but there is more than a single @list that matches the compacted term in the document. Compaction might mix unwanted items into the list.',"jsonld.SyntaxError",{code:"compaction to list of lists"});if("@language"===u||"@index"===u){var k;g in o?k=o[g]:o[g]=k={},"@language"===u&&J(x)&&(x=x["@value"]),t.addValue(k,m[u],x)}else{var E=!i.compactArrays||"@set"===u||"@list"===u||M(x)&&0===x.length||"@list"===h||"@graph"===h;t.addValue(o,g,x,{propertyIsArray:E})}}}else{var u=t.getContextValue(e,r,"@container");if("@index"===u)continue;var v=T(e,h);t.addValue(o,v,d)}else{var _=this.compact(e,"@reverse",d,i);for(var S in _)if(e.mappings[S]&&e.mappings[S].reverse){var A=_[S],u=t.getContextValue(e,S,"@container"),C="@set"===u||!i.compactArrays;t.addValue(o,S,A,{propertyIsArray:C}),delete _[S]}if(Object.keys(_).length>0){var v=T(e,h);t.addValue(o,v,_)}}else{var _;if(U(d))_=T(e,d,null,{vocab:"@type"===h});else{_=[];for(var y=0;y<d.length;++y)_.push(T(e,d[y],null,{vocab:!0}))}var v=T(e,h),E=M(_)&&0===d.length;t.addValue(o,v,_,{propertyIsArray:E})}}return o}return n},Ne.prototype.expand=function(e,r,n,i,o){var a=this;if(null===n||void 0===n)return null;if(!M(n)&&!Q(n))return o||null!==r&&"@graph"!==j(e,r,{vocab:!0})?c(e,r,n):null;if(M(n)){var s=[],l=t.getContextValue(e,r,"@container");o=o||"@list"===l;for(var f=0;f<n.length;++f){var p=a.expand(e,r,n[f],i);if(o&&(M(p)||K(p)))throw new Fe("Invalid JSON-LD syntax; lists of lists are not permitted.","jsonld.SyntaxError",{code:"list of lists"});null!==p&&(M(p)?s=s.concat(p):s.push(p))}return s}"@context"in n&&(e=a.processContext(e,n["@context"],i));for(var h=j(e,r,{vocab:!0}),s={},d=Object.keys(n).sort(),v=0;v<d.length;++v){var g,y=d[v],m=n[y];if("@context"!==y){var b=j(e,y,{vocab:!0});if(null!==b&&(Z(b)||P(b))){if(P(b)){if("@reverse"===h)throw new Fe("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:m});if(b in s)throw new Fe("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:b})}if("@id"===b&&!U(m)){if(!i.isFrame)throw new Fe('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:m});if(!Q(m))throw new Fe('Invalid JSON-LD syntax; "@id" value must be a string or an object.',"jsonld.SyntaxError",{code:"invalid @id value",value:m})}if("@type"===b&&q(m),"@graph"===b&&!Q(m)&&!M(m))throw new Fe('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:m});if("@value"===b&&(Q(m)||M(m)))throw new Fe('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:m});if("@language"===b){if(null===m)continue;if(!U(m))throw new Fe('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:m});m=m.toLowerCase()}if("@index"===b&&!U(m))throw new Fe('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:m});if("@reverse"!==b){var l=t.getContextValue(e,y,"@container");if("@language"===l&&Q(m))g=u(m);else if("@index"===l&&Q(m))g=function(t){for(var r=[],n=Object.keys(m).sort(),o=0;o<n.length;++o){var s=n[o],u=m[s];M(u)||(u=[u]),u=a.expand(e,t,u,i,!1);for(var l=0;l<u.length;++l){var c=u[l];"@index"in c||(c["@index"]=s),r.push(c)}}return r}(y);else{var w="@list"===b;if(w||"@set"===b){var x=r;if(w&&"@graph"===h&&(x=null),g=a.expand(e,x,m,i,w),w&&K(g))throw new Fe("Invalid JSON-LD syntax; lists of lists are not permitted.","jsonld.SyntaxError",{code:"list of lists"})}else g=a.expand(e,y,m,i,!1)}if(null!==g||"@value"===b)if("@list"===b||K(g)||"@list"!==l||(g=M(g)?g:[g],g={"@list":g}),e.mappings[y]&&e.mappings[y].reverse){var $=s["@reverse"]=s["@reverse"]||{};M(g)||(g=[g]);for(var k=0;k<g.length;++k){var E=g[k];if(J(E)||K(E))throw new Fe('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:g});t.addValue($,b,E,{propertyIsArray:!0})}}else{var _=["@index","@id","@type","@value","@language"].indexOf(b)===-1;t.addValue(s,b,g,{propertyIsArray:_})}}else{if(!Q(m))throw new Fe('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:m});if(g=a.expand(e,"@reverse",m,i),"@reverse"in g)for(var S in g["@reverse"])t.addValue(s,S,g["@reverse"][S],{propertyIsArray:!0});var $=s["@reverse"]||null;for(var S in g)if("@reverse"!==S){null===$&&($=s["@reverse"]={}),t.addValue($,S,[],{propertyIsArray:!0});for(var A=g[S],k=0;k<A.length;++k){var E=A[k];if(J(E)||K(E))throw new Fe('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:g});t.addValue($,S,E,{propertyIsArray:!0})}}}}}}d=Object.keys(s);var C=d.length;if("@value"in s){if("@type"in s&&"@language"in s)throw new Fe('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and "@language".',"jsonld.SyntaxError",{code:"invalid value object",element:s});var I=C-1;if("@type"in s&&(I-=1),"@index"in s&&(I-=1),"@language"in s&&(I-=1),0!==I)throw new Fe('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and at most one other property which can be "@type" or "@language".',"jsonld.SyntaxError",{code:"invalid value object",element:s});if(null===s["@value"])s=null;else{if("@language"in s&&!U(s["@value"]))throw new Fe("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:s});if("@type"in s&&(!Z(s["@type"])||0===s["@type"].indexOf("_:")))throw new Fe('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:s})}}else if("@type"in s&&!M(s["@type"]))s["@type"]=[s["@type"]];else if("@set"in s||"@list"in s){if(C>1&&!(2===C&&"@index"in s))throw new Fe('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:s});"@set"in s&&(s=s["@set"],d=Object.keys(s),C=d.length)}else 1===C&&"@language"in s&&(s=null);return!Q(s)||i.keepFreeFloatingNodes||o||null!==r&&"@graph"!==h||(0===C||"@value"in s||"@list"in s||1===C&&"@id"in s)&&(s=null),s},Ne.prototype.createNodeMap=function(e,t){t=t||{};var r=t.namer||t.issuer||new se("_:b"),n={"@default":{}};return g(e,n,"@default",r),y(n)},Ne.prototype.flatten=function(e){for(var t=this.createNodeMap(e),r=[],n=Object.keys(t).sort(),i=0;i<n.length;++i){var o=t[n[i]];X(o)||r.push(o)}return r},Ne.prototype.frame=function(e,t,r){var n={options:r,graphs:{"@default":{},"@merged":{}},subjectStack:[],link:{}},i=new se("_:b");g(e,n.graphs,"@merged",i),n.subjects=n.graphs["@merged"];var o=[];return m(n,Object.keys(n.subjects).sort(),t,o,null),o},Ne.prototype.normalize=function(e,t,r){return"URDNA2015"===t.algorithm?new je(t).main(e,r):"URGNA2012"===t.algorithm?new Re(t).main(e,r):void r(new Error("Invalid RDF Dataset Normalization algorithm: "+t.algorithm))},Ne.prototype.fromRDF=function(e,r,n){var i={},o={"@default":i},a={};for(var s in e){var u=e[s];s in o||(o[s]={}),"@default"===s||s in i||(i[s]={"@id":s});for(var l=o[s],c=0;c<u.length;++c){var f=u[c],p=f.subject.value,h=f.predicate.value,v=f.object;p in l||(l[p]={"@id":p});var g=l[p],y="IRI"===v.type||"blank node"===v.type;if(!y||v.value in l||(l[v.value]={"@id":v.value}),h!==Ee||r.useRdfType||!y){var m=d(v,r.useNativeTypes);if(t.addValue(g,h,m,{propertyIsArray:!0}),y)if(v.value===ke){var b=l[v.value];"usages"in b||(b.usages=[]),b.usages.push({node:g,property:h,value:m})}else v.value in a?a[v.value]=!1:a[v.value]={node:g,property:h,value:m}}else t.addValue(g,"@type",v.value,{propertyIsArray:!0})}}for(var s in o){var w=o[s];if(ke in w){for(var x=w[ke],$=0;$<x.usages.length;++$){for(var k=x.usages[$],g=k.node,E=k.property,_=k.value,S=[],A=[],C=Object.keys(g).length;E===$e&&Q(a[g["@id"]])&&M(g[xe])&&1===g[xe].length&&M(g[$e])&&1===g[$e].length&&(3===C||4===C&&M(g["@type"])&&1===g["@type"].length&&g["@type"][0]===we)&&(S.push(g[xe][0]),A.push(g["@id"]),k=a[g["@id"]],g=k.node,E=k.property,_=k.value,C=Object.keys(g).length,0===g["@id"].indexOf("_:")););if(E===xe){if(g["@id"]===ke)continue;_=w[_["@id"]][$e][0],S.pop(),A.pop()}delete _["@id"],_["@list"]=S.reverse();for(var I=0;I<A.length;++I)delete w[A[I]]}delete x.usages}}for(var T=[],F=Object.keys(i).sort(),$=0;$<F.length;++$){var N=F[$],g=i[N];if(N in o)for(var u=g["@graph"]=[],w=o[N],j=Object.keys(w).sort(),R=0;R<j.length;++R){var L=w[j[R]];X(L)||u.push(L)}X(g)||T.push(g)}n(null,T)},Ne.prototype.toRDF=function(e,t){var r=new se("_:b"),n={"@default":{}};g(e,n,"@default",r);for(var i={},o=Object.keys(n).sort(),a=0;a<o.length;++a){var s=o[a];("@default"===s||Z(s))&&(i[s]=f(n[s],r,t))}return i},Ne.prototype.processContext=function(e,r,n){Q(r)&&"@context"in r&&M(r["@context"])&&(r=r["@context"]);var i=M(r)?r:[r];if(0===i.length)return e.clone();for(var o=e,a=0;a<i.length;++a){var s=i[a];if(null!==s){if(Q(s)&&"@context"in s&&(s=s["@context"]),!Q(s))throw new Fe("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:s});if(t.cache.activeCtx){var u=t.cache.activeCtx.get(e,s);if(u){o=e=u;continue}}e=o,o=o.clone();var l={};if("@base"in s){var c=s["@base"];if(null===c)c=null;else{if(!U(c))throw new Fe('Invalid JSON-LD syntax; the value of "@base" in a @context must be a string or null.',"jsonld.SyntaxError",{
code:"invalid base IRI",context:s});if(""!==c&&!Z(c))throw new Fe('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI or the empty string.',"jsonld.SyntaxError",{code:"invalid base IRI",context:s})}null!==c&&(c=t.url.parse(c||"")),o["@base"]=c,l["@base"]=!0}if("@vocab"in s){var f=s["@vocab"];if(null===f)delete o["@vocab"];else{if(!U(f))throw new Fe('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:s});if(!Z(f))throw new Fe('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:s});o["@vocab"]=f}l["@vocab"]=!0}if("@language"in s){var f=s["@language"];if(null===f)delete o["@language"];else{if(!U(f))throw new Fe('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:s});o["@language"]=f.toLowerCase()}l["@language"]=!0}for(var p in s)N(o,s,p,l);t.cache.activeCtx&&t.cache.activeCtx.set(e,s,o)}else o=e=O(n)}return o};var je=function(){var e={subject:"s",object:"o",name:"g"},r=function(e){e=e||{},this.name="URDNA2015",this.options=e,this.blankNodeInfo={},this.hashToBlankNodes={},this.canonicalIssuer=new se("_:c14n"),this.quads=[],this.schedule={},"maxCallStackDepth"in e?this.schedule.MAX_DEPTH=e.maxCallStackDepth:this.schedule.MAX_DEPTH=500,"maxTotalCallStackDepth"in e?this.schedule.MAX_TOTAL_DEPTH=e.maxCallStackDepth:this.schedule.MAX_TOTAL_DEPTH=4294967295,this.schedule.depth=0,this.schedule.totalDepth=0,"timeSlice"in e?this.schedule.timeSlice=e.timeSlice:this.schedule.timeSlice=10};return r.prototype.doWork=function(e,r){var n=this.schedule;return n.totalDepth>=n.MAX_TOTAL_DEPTH?r(new Error("Maximum total call stack depth exceeded; normalization aborting.")):void function i(){if(n.depth===n.MAX_DEPTH)return n.depth=0,n.running=!1,t.nextTick(i);var o=(new Date).getTime();return n.running||(n.start=(new Date).getTime(),n.deadline=n.start+n.timeSlice),o<n.deadline?(n.running=!0,n.depth++,n.totalDepth++,e(function(e,t){n.depth--,n.totalDepth--,r(e,t)})):(n.depth=0,n.running=!1,void t.setImmediate(i))}()},r.prototype.forEach=function(e,t,r){var n,i,o=this,a=0;if(M(e))i=e.length,n=function(){return a!==i&&(n.value=e[a++],n.key=a,!0)};else{var s=Object.keys(e);i=s.length,n=function(){return a!==i&&(n.key=s[a++],n.value=e[n.key],!0)}}!function e(i,a){return i?r(i):n()?o.doWork(function(){t(n.value,n.key,e)}):void r()}()},r.prototype.waterfall=function(e,t){var r=this;r.forEach(e,function(e,t,n){r.doWork(e,n)},t)},r.prototype.whilst=function(e,t,r){var n=this;!function i(o){return o?r(o):e()?void n.doWork(t,i):r()}()},r.prototype.main=function(e,t){var r=this;r.schedule.start=(new Date).getTime();var n;if(r.options.format&&"application/nquads"!==r.options.format)return t(new Fe("Unknown output format.","jsonld.UnknownFormat",{format:r.options.format}));var i={};r.waterfall([function(t){r.forEach(e,function(e,t,n){"@default"===t&&(t=null),r.forEach(e,function(e,n,o){null!==t&&(0===t.indexOf("_:")?e.name={type:"blank node",value:t}:e.name={type:"IRI",value:t}),r.quads.push(e),r.forEachComponent(e,function(t){if("blank node"===t.type){var n=t.value;n in r.blankNodeInfo?r.blankNodeInfo[n].quads.push(e):(i[n]=!0,r.blankNodeInfo[n]={quads:[e]})}}),o()},n)},t)},function(e){var t=!0;r.whilst(function(){return t},function(e){t=!1,r.hashToBlankNodes={},r.waterfall([function(e){r.forEach(i,function(e,t,n){r.hashFirstDegreeQuads(t,function(e,i){return e?n(e):(i in r.hashToBlankNodes?r.hashToBlankNodes[i].push(t):r.hashToBlankNodes[i]=[t],void n())})},e)},function(e){var n=Object.keys(r.hashToBlankNodes).sort();r.forEach(n,function(e,n,o){var a=r.hashToBlankNodes[e];if(a.length>1)return o();var s=a[0];r.canonicalIssuer.getId(s),delete i[s],delete r.hashToBlankNodes[e],t=!0,o()},e)}],e)},e)},function(e){var t=Object.keys(r.hashToBlankNodes).sort();r.forEach(t,function(e,t,n){var i=[],o=r.hashToBlankNodes[e];r.waterfall([function(e){r.forEach(o,function(e,t,n){if(r.canonicalIssuer.hasId(e))return n();var o=new se("_:b");o.getId(e),r.hashNDegreeQuads(e,o,function(e,t){return e?n(e):(i.push(t),void n())})},e)},function(e){i.sort(function(e,t){return e.hash<t.hash?-1:e.hash>t.hash?1:0}),r.forEach(i,function(e,t,n){for(var i in e.issuer.existing)r.canonicalIssuer.getId(i);n()},e)}],n)},e)},function(e){var t=[];r.waterfall([function(e){r.forEach(r.quads,function(e,n,i){r.forEachComponent(e,function(e){"blank node"===e.type&&0!==e.value.indexOf(r.canonicalIssuer.prefix)&&(e.value=r.canonicalIssuer.getId(e.value))}),t.push(oe(e)),i()},e)},function(e){return t.sort(),"application/nquads"===r.options.format?(n=t.join(""),e()):(n=ne(t.join("")),void e())}],e)}],function(e){t(e,n)})},r.prototype.hashFirstDegreeQuads=function(e,t){var r=this,n=r.blankNodeInfo[e];if("hash"in n)return t(null,n.hash);var i=[],o=n.quads;r.forEach(o,function(t,n,o){var a={predicate:t.predicate};r.forEachComponent(t,function(t,n){a[n]=r.modifyFirstDegreeComponent(e,t,n)}),i.push(oe(a)),o()},function(e){return e?t(e):(i.sort(),n.hash=Oe.hashNQuads(r.name,i),void t(null,n.hash))})},r.prototype.modifyFirstDegreeComponent=function(e,t){return"blank node"!==t.type?t:(t=ee(t),t.value=t.value===e?"_:a":"_:z",t)},r.prototype.hashRelatedBlankNode=function(e,t,r,n,i){var o,a=this;a.waterfall([function(t){return a.canonicalIssuer.hasId(e)?(o=a.canonicalIssuer.getId(e),t()):r.hasId(e)?(o=r.getId(e),t()):void a.hashFirstDegreeQuads(e,function(e,r){return e?t(e):(o=r,void t())})}],function(e){if(e)return i(e);var r=new Oe(a.name);return r.update(n),"g"!==n&&r.update(a.getRelatedPredicate(t)),r.update(o),i(null,r.digest())})},r.prototype.getRelatedPredicate=function(e){return"<"+e.predicate.value+">"},r.prototype.hashNDegreeQuads=function(e,t,r){var n,i=this,o=new Oe(i.name);i.waterfall([function(r){i.createHashToRelated(e,t,function(e,t){return e?r(e):(n=t,void r())})},function(e){var r=Object.keys(n).sort();i.forEach(r,function(e,r,a){o.update(e);var s,u="",l=new Le(n[e]);i.whilst(function(){return l.hasNext()},function(e){var r=l.next(),n=t.clone(),o="",a=[];i.waterfall([function(t){i.forEach(r,function(t,r,s){return i.canonicalIssuer.hasId(t)?o+=i.canonicalIssuer.getId(t):(n.hasId(t)||a.push(t),o+=n.getId(t)),0!==u.length&&o.length>=u.length&&o>u?e():void s()},t)},function(t){i.forEach(a,function(t,r,a){i.hashNDegreeQuads(t,n,function(r,i){return r?a(r):(o+=n.getId(t),o+="<"+i.hash+">",n=i.issuer,0!==u.length&&o.length>=u.length&&o>u?e():void a())})},t)},function(e){(0===u.length||o<u)&&(u=o,s=n),e()}],e)},function(e){return e?a(e):(o.update(u),t=s,void a())})},e)}],function(e){r(e,{hash:o.digest(),issuer:t})})},r.prototype.createHashToRelated=function(t,r,n){var i=this,o={},a=i.blankNodeInfo[t].quads;i.forEach(a,function(n,a,s){i.forEach(n,function(a,s,u){if("predicate"===s||"blank node"!==a.type||a.value===t)return u();var l=a.value,c=e[s];i.hashRelatedBlankNode(l,n,r,c,function(e,t){return e?u(e):(t in o?o[t].push(l):o[t]=[l],void u())})},s)},function(e){n(e,o)})},r.prototype.forEachComponent=function(e,t){for(var r in e)"predicate"!==r&&t(e[r],r,e)},r}(),Re=function(){var e=function(e){je.call(this,e),this.name="URGNA2012"};return e.prototype=new je,e.prototype.modifyFirstDegreeComponent=function(e,t,r){return"blank node"!==t.type?t:(t=ee(t),"name"===r?t.value="_:g":t.value=t.value===e?"_:a":"_:z",t)},e.prototype.getRelatedPredicate=function(e){return e.predicate.value},e.prototype.createHashToRelated=function(e,t,r){var n=this,i={},o=n.blankNodeInfo[e].quads;n.forEach(o,function(r,o,a){var s,u;if("blank node"===r.subject.type&&r.subject.value!==e)u=r.subject.value,s="p";else{if("blank node"!==r.object.type||r.object.value===e)return a();u=r.object.value,s="r"}n.hashRelatedBlankNode(u,r,t,s,function(e,t){t in i?i[t].push(u):i[t]=[u],a()})},function(e){r(e,i)})},e}();Object.keys||(Object.keys=function(e){if(e!==Object(e))throw new TypeError("Object.keys called on non-object");var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}),t.registerRDFParser("application/nquads",ne),t.registerRDFParser("rdfa-api",ae),t.IdentifierIssuer=se,t.UniqueNamer=se,se.prototype.clone=function(){var e=new se(this.prefix);return e.counter=this.counter,e.existing=ee(this.existing),e},se.prototype.getId=function(e){if(e&&e in this.existing)return this.existing[e];var t=this.prefix+this.counter;return this.counter+=1,e&&(this.existing[e]=t),t},se.prototype.getName=se.prototype.getName,se.prototype.hasId=function(e){return e in this.existing},se.prototype.isNamed=se.prototype.hasId;var Le=function(e){this.list=e.sort(),this.done=!1,this.left={};for(var t=0;t<e.length;++t)this.left[e[t]]=!0};Le.prototype.hasNext=function(){return!this.done},Le.prototype.next=function(){for(var e=this.list.slice(),t=null,r=0,n=this.list.length,i=0;i<n;++i){var o=this.list[i],a=this.left[o];(null===t||o>t)&&(a&&i>0&&o>this.list[i-1]||!a&&i<n-1&&o>this.list[i+1])&&(t=o,r=i)}if(null===t)this.done=!0;else{var s=this.left[t]?r-1:r+1;this.list[r]=this.list[s],this.list[s]=t;for(var i=0;i<n;++i)this.list[i]>t&&(this.left[this.list[i]]=!this.left[this.list[i]])}return e};var Oe=function(e){if(!(this instanceof Oe))return new Oe(e);if(["URDNA2015","URGNA2012"].indexOf(e)===-1)throw new Error("Invalid RDF Dataset Normalization algorithm: "+e);Oe._init.call(this,e)};if(Oe.hashNQuads=function(e,t){for(var r=new Oe(e),n=0;n<t.length;++n)r.update(t[n]);return r.digest()},function(t){if(t){var r=e("crypto");return Oe._init=function(e){e="URDNA2015"===e?"sha256":"sha1",this.md=r.createHash(e)},Oe.prototype.update=function(e){return this.md.update(e,"utf8")},void(Oe.prototype.digest=function(){return this.md.digest("hex")})}Oe._init=function(e){e="URDNA2015"===e?new o.Algorithm:new i.Algorithm,this.md=new n(e)},Oe.prototype.update=function(e){return this.md.update(e)},Oe.prototype.digest=function(){return this.md.digest().toHex()};var n=function(e){if(!(this instanceof n))return new n(e);if(this._algorithm=e,!n._padding||n._padding.length<this._algorithm.blockSize){n._padding=String.fromCharCode(128);for(var t=String.fromCharCode(0),r=64;r>0;)1&r&&(n._padding+=t),r>>>=1,r>0&&(t+=t)}this.start()};n.prototype.start=function(){this.messageLength=0,this.fullMessageLength=[];for(var e=this._algorithm.messageLengthSize/4,t=0;t<e;++t)this.fullMessageLength.push(0);return this._input=new n.ByteBuffer,this.state=this._algorithm.start(),this},n.prototype.update=function(e){e=new n.ByteBuffer(unescape(encodeURIComponent(e))),this.messageLength+=e.length();var t=e.length();t=[t/4294967296>>>0,t>>>0];for(var r=this.fullMessageLength.length-1;r>=0;--r)this.fullMessageLength[r]+=t[1],t[1]=t[0]+(this.fullMessageLength[r]/4294967296>>>0),this.fullMessageLength[r]=this.fullMessageLength[r]>>>0,t[0]=t[1]/4294967296>>>0;for(this._input.putBytes(e.bytes());this._input.length()>=this._algorithm.blockSize;)this.state=this._algorithm.digest(this.state,this._input);return(this._input.read>2048||0===this._input.length())&&this._input.compact(),this},n.prototype.digest=function(){var e=new n.ByteBuffer;e.putBytes(this._input.bytes());var t=this.fullMessageLength[this.fullMessageLength.length-1]+this._algorithm.messageLengthSize,r=t&this._algorithm.blockSize-1;e.putBytes(n._padding.substr(0,this._algorithm.blockSize-r));for(var i=new n.ByteBuffer,o=0;o<this.fullMessageLength.length;++o)i.putInt32(this.fullMessageLength[o]<<3|this.fullMessageLength[o+1]>>>28);this._algorithm.writeMessageLength(e,i);var a=this._algorithm.digest(this.state.copy(),e),s=new n.ByteBuffer;return a.write(s),s},n.ByteBuffer=function(e){"string"==typeof e?this.data=e:this.data="",this.read=0},n.ByteBuffer.prototype.putInt32=function(e){this.data+=String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e)},n.ByteBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e},n.ByteBuffer.prototype.putBytes=function(e){this.data+=e},n.ByteBuffer.prototype.bytes=function(){return this.data.slice(this.read)},n.ByteBuffer.prototype.length=function(){return this.data.length-this.read},n.ByteBuffer.prototype.compact=function(){this.data=this.data.slice(this.read),this.read=0},n.ByteBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var r=this.data.charCodeAt(t);r<16&&(e+="0"),e+=r.toString(16)}return e};var i={_w:null};i.Algorithm=function(){this.name="sha1",this.blockSize=64,this.digestLength=20,this.messageLengthSize=8},i.Algorithm.prototype.start=function(){return i._w||(i._w=new Array(80)),i._createState()},i.Algorithm.prototype.writeMessageLength=function(e,t){e.putBytes(t.bytes())},i.Algorithm.prototype.digest=function(e,t){for(var r,n,o,a,s,u,l,c,f=t.length(),p=i._w;f>=64;){for(n=e.h0,o=e.h1,a=e.h2,s=e.h3,u=e.h4,c=0;c<16;++c)r=t.getInt32(),p[c]=r,l=s^o&(a^s),r=(n<<5|n>>>27)+l+u+1518500249+r,u=s,s=a,a=o<<30|o>>>2,o=n,n=r;for(;c<20;++c)r=p[c-3]^p[c-8]^p[c-14]^p[c-16],r=r<<1|r>>>31,p[c]=r,l=s^o&(a^s),r=(n<<5|n>>>27)+l+u+1518500249+r,u=s,s=a,a=o<<30|o>>>2,o=n,n=r;for(;c<32;++c)r=p[c-3]^p[c-8]^p[c-14]^p[c-16],r=r<<1|r>>>31,p[c]=r,l=o^a^s,r=(n<<5|n>>>27)+l+u+1859775393+r,u=s,s=a,a=o<<30|o>>>2,o=n,n=r;for(;c<40;++c)r=p[c-6]^p[c-16]^p[c-28]^p[c-32],r=r<<2|r>>>30,p[c]=r,l=o^a^s,r=(n<<5|n>>>27)+l+u+1859775393+r,u=s,s=a,a=o<<30|o>>>2,o=n,n=r;for(;c<60;++c)r=p[c-6]^p[c-16]^p[c-28]^p[c-32],r=r<<2|r>>>30,p[c]=r,l=o&a|s&(o^a),r=(n<<5|n>>>27)+l+u+2400959708+r,u=s,s=a,a=o<<30|o>>>2,o=n,n=r;for(;c<80;++c)r=p[c-6]^p[c-16]^p[c-28]^p[c-32],r=r<<2|r>>>30,p[c]=r,l=o^a^s,r=(n<<5|n>>>27)+l+u+3395469782+r,u=s,s=a,a=o<<30|o>>>2,o=n,n=r;e.h0=e.h0+n|0,e.h1=e.h1+o|0,e.h2=e.h2+a|0,e.h3=e.h3+s|0,e.h4=e.h4+u|0,f-=64}return e},i._createState=function(){var e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520};return e.copy=function(){var t=i._createState();return t.h0=e.h0,t.h1=e.h1,t.h2=e.h2,t.h3=e.h3,t.h4=e.h4,t},e.write=function(t){t.putInt32(e.h0),t.putInt32(e.h1),t.putInt32(e.h2),t.putInt32(e.h3),t.putInt32(e.h4)},e};var o={_k:null,_w:null};o.Algorithm=function(){this.name="sha256",this.blockSize=64,this.digestLength=32,this.messageLengthSize=8},o.Algorithm.prototype.start=function(){return o._k||o._init(),o._createState()},o.Algorithm.prototype.writeMessageLength=function(e,t){e.putBytes(t.bytes())},o.Algorithm.prototype.digest=function(e,t){for(var r,n,i,a,s,u,l,c,f,p,h,d,v,g,y,m=t.length(),b=o._k,w=o._w;m>=64;){for(l=0;l<16;++l)w[l]=t.getInt32();for(;l<64;++l)r=w[l-2],r=(r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10,n=w[l-15],n=(n>>>7|n<<25)^(n>>>18|n<<14)^n>>>3,w[l]=r+w[l-7]+n+w[l-16]|0;for(c=e.h0,f=e.h1,p=e.h2,h=e.h3,d=e.h4,v=e.h5,g=e.h6,y=e.h7,l=0;l<64;++l)a=(d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7),s=g^d&(v^g),i=(c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),u=c&f|p&(c^f),r=y+a+s+b[l]+w[l],n=i+u,y=g,g=v,v=d,d=h+r|0,h=p,p=f,f=c,c=r+n|0;e.h0=e.h0+c|0,e.h1=e.h1+f|0,e.h2=e.h2+p|0,e.h3=e.h3+h|0,e.h4=e.h4+d|0,e.h5=e.h5+v|0,e.h6=e.h6+g|0,e.h7=e.h7+y|0,m-=64}return e},o._createState=function(){var e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225};return e.copy=function(){var t=o._createState();return t.h0=e.h0,t.h1=e.h1,t.h2=e.h2,t.h3=e.h3,t.h4=e.h4,t.h5=e.h5,t.h6=e.h6,t.h7=e.h7,t},e.write=function(t){t.putInt32(e.h0),t.putInt32(e.h1),t.putInt32(e.h2),t.putInt32(e.h3),t.putInt32(e.h4),t.putInt32(e.h5),t.putInt32(e.h6),t.putInt32(e.h7)},e},o._init=function(){o._k=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],o._w=new Array(64)}}(o),!he)var Pe=function(){he=e("xmldom").XMLSerializer};if(
// (c) Steven Levithan <stevenlevithan.com>
// MIT License
// with local jsonld.js modifications
t.url={},t.url.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},t.url.parse=function(e,r){for(var n={},i=t.url.parsers[r||"full"],o=i.regex.exec(e),a=i.keys.length;a--;)n[i.keys[a]]=void 0===o[a]?null:o[a];return n.normalizedPath=ue(n.path,!!n.authority),n},o?t.useDocumentLoader("node"):"undefined"!=typeof XMLHttpRequest&&t.useDocumentLoader("xhr"),o){t.use=function(r){switch(r){case"request":t.request=e("jsonld-request");break;default:throw new Fe("Unknown extension.","jsonld.UnknownExtension",{extension:r})}};var Qe={exports:{},filename:i};e("pkginfo")(Qe,"version"),t.version=Qe.exports.version}return t},u=function(){return s(function(){return u()})};return!o&&"function"==typeof define&&define.amd?define([],function(){return s(u),u}):(s(u),"function"==typeof e&&"undefined"!=typeof t&&t.exports&&(t.exports=u),a&&("undefined"==typeof jsonld?jsonld=jsonldjs=u:jsonldjs=u)),u}()}).call(this,e("7YKIPe"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},"/../node_modules/jsonld/js")},{"7YKIPe":10,crypto:25,"es6-promise":3,http:25,"jsonld-request":25,pkginfo:25,request:25,util:25,xmldom:25}],27:[function(e,t,r){var n=e;e=function(){};var r=t.exports={Lexer:e("./lib/N3Lexer"),Parser:e("./lib/N3Parser"),Writer:e("./lib/N3Writer"),Store:e("./lib/N3Store"),StreamParser:e("./lib/N3StreamParser"),StreamWriter:e("./lib/N3StreamWriter"),Util:e("./lib/N3Util")};Object.keys(r).forEach(function(e){Object.defineProperty(r,e,{configurable:!0,enumerable:!0,get:function(){return delete r[e],r[e]=n("./lib/N3"+e)}})})},{"./lib/N3Lexer":28,"./lib/N3Parser":29,"./lib/N3Store":30,"./lib/N3StreamParser":31,"./lib/N3StreamWriter":32,"./lib/N3Util":33,"./lib/N3Writer":34}],28:[function(e,t,r){function n(e){if(!(this instanceof n))return new n(e);if(e&&e.lineMode){this._tripleQuotedString=this._number=this._boolean=/$0^/;var t=this;this._tokenize=this.tokenize,this.tokenize=function(e,r){this._tokenize(e,function(e,n){!e&&/^(?:IRI|prefixed|literal|langcode|type|\.|eof)$/.test(n.type)?r&&r(e,n):r&&r(e||t._syntaxError(n.type,r=null))})}}}var i=String.fromCharCode,o="function"==typeof setImmediate?setImmediate:function(e){setTimeout(e,0)},a=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\[uU]|\\(.)/g,s={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},u=/[\x00-\x20<>\\"\{\}\|\^\`]/;n.prototype={_iri:/^<((?:[^>\\]|\\[uU])+)>/,_unescapedIri:/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>/,_unescapedString:/^"[^"\\]+"(?=[^"\\])/,_singleQuotedString:/^"[^"\\]*(?:\\.[^"\\]*)*"(?=[^"\\])|^'[^'\\]*(?:\\.[^'\\]*)*'(?=[^'\\])/,_tripleQuotedString:/^""("[^"\\]*(?:(?:\\.|"(?!""))[^"\\]*)*")""|^''('[^'\\]*(?:(?:\\.|'(?!''))[^'\\]*)*')''/,_langcode:/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,_prefix:/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,_prefixed:/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?=\.?[,;\s#()\[\]\{\}"'<])/,_blank:/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=\.?[,;:\s#()\[\]\{\}"'<])/,_number:/^[\-+]?(?:\d+\.?\d*([eE](?:[\-\+])?\d+)|\d*\.?\d+)(?=[.,;:\s#()\[\]\{\}"'<])/,_boolean:/^(?:true|false)(?=[.,;:\s#()\[\]\{\}"'<])/,_keyword:/^@[a-z]+(?=[\s#<:])/,_sparqlKeyword:/^(?:PREFIX|BASE|GRAPH)(?=[\s#<:])/i,_shortPredicates:/^a(?=\s+|<)/,_newline:/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,_whitespace:/^[ \t]+/,_endOfFile:/^(?:#[^\n\r]*)?$/,_tokenizeToEnd:function(e,t){function r(t){e(t._syntaxError(/^\S*/.exec(n)[0]))}for(var n=this._input;;){for(var i;i=this._newline.exec(n);)n=n.substr(i[0].length,n.length),this._line++;if((i=this._whitespace.exec(n))&&(n=n.substr(i[0].length,n.length)),this._endOfFile.test(n))return t&&e(n=null,{line:this._line,type:"eof",value:"",prefix:""}),this._input=n;var o,a=this._line,s="",l="",c="",f=n[0],p=null,h=0,d=!1;switch(f){case"^":if(1===n.length)break;if("^"!==n[1])return r(this);if(this._prevTokenType="^",n=n.substr(2),"<"!==n[0]){d=!0;break}case"<":if(p=this._unescapedIri.exec(n))s="IRI",l=p[1];else if(p=this._iri.exec(n)){if(o=this._unescape(p[1]),null===o||u.test(o))return r(this);s="IRI",l=o}break;case"_":((p=this._blank.exec(n))||t&&(p=this._blank.exec(n+" ")))&&(s="prefixed",c="_",l=p[1]);break;case'"':case"'":if(p=this._unescapedString.exec(n))s="literal",l=p[0];else if(p=this._singleQuotedString.exec(n)){if(o=this._unescape(p[0]),null===o)return r(this);s="literal",l=o.replace(/^'|'$/g,'"')}else if(p=this._tripleQuotedString.exec(n)){if(o=p[1]||p[2],this._line+=o.split(/\r\n|\r|\n/).length-1,o=this._unescape(o),null===o)return r(this);s="literal",l=o.replace(/^'|'$/g,'"')}break;case"@":"literal"===this._prevTokenType&&(p=this._langcode.exec(n))?(s="langcode",l=p[1]):(p=this._keyword.exec(n))&&(s=p[0]);break;case".":if(1===n.length?t:n[1]<"0"||n[1]>"9"){s=".",h=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(p=this._number.exec(n))&&(s="literal",l='"'+p[0]+'"^^http://www.w3.org/2001/XMLSchema#'+(p[1]?"double":/^[+\-]?\d+$/.test(p[0])?"integer":"decimal"));break;case"B":case"b":case"p":case"P":case"G":case"g":(p=this._sparqlKeyword.exec(n))?s=p[0].toUpperCase():d=!0;break;case"f":case"t":(p=this._boolean.exec(n))?(s="literal",l='"'+p[0]+'"^^http://www.w3.org/2001/XMLSchema#boolean'):d=!0;break;case"a":(p=this._shortPredicates.exec(n))?(s="abbreviation",l="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"):d=!0;break;case",":case";":case"[":case"]":case"(":case")":case"{":case"}":h=1,s=f;break;default:d=!0}if(d&&("@prefix"!==this._prevTokenType&&"PREFIX"!==this._prevTokenType||!(p=this._prefix.exec(n))?((p=this._prefixed.exec(n))||t&&(p=this._prefixed.exec(n+" ")))&&(s="prefixed",c=p[1]||"",l=this._unescape(p[2])):(s="prefix",l=p[1]||"")),"^"===this._prevTokenType&&(s="IRI"===s||"prefixed"===s?"type":""),!s)return t||!/^'''|^"""/.test(n)&&/\n|\r/.test(n)?r(this):this._input=n;e(null,{line:a,type:s,value:l,prefix:c}),this._prevTokenType=s,n=n.substr(h||p[0].length,n.length)}},_unescape:function(e){try{return e.replace(a,function(e,t,r,n){var o;if(t){if(o=parseInt(t,16),isNaN(o))throw new Error;return i(o)}if(r){if(o=parseInt(r,16),isNaN(o))throw new Error;return o<=65535?i(o):i(55296+(o-=65536)/1024,56320+(1023&o))}var a=s[n];if(!a)throw new Error;return a})}catch(e){return null}},_syntaxError:function(e){return this._input=null,new Error('Syntax error: unexpected "'+e+'" on line '+this._line+".")},tokenize:function(e,t){function r(e){null!==i._input&&(i._input+=e,i._tokenizeToEnd(t,!1))}function n(){null!==i._input&&i._tokenizeToEnd(t,!0)}var i=this;this._line=1,"string"==typeof e?(this._input=e,o(function(){i._tokenizeToEnd(t,!0)})):(this._input="",e&&"function"!=typeof e?("function"==typeof e.setEncoding&&e.setEncoding("utf8"),e.on("data",r),e.on("end",n)):(this.addChunk=r,this.end=n,t||(t=e)))}},t.exports=n},{}],29:[function(e,t,r){function n(e){if(!(this instanceof n))return new n(e);this._tripleStack=[],this._graph=null,e=e||{},this._setBase(e.documentIRI);var t="string"==typeof e.format&&e.format.match(/\w*$/)[0].toLowerCase(),r="turtle"===t,a="trig"===t,s=/triple/.test(t),u=/quad/.test(t),l=s||u;(this._supportsNamedGraphs=!r)||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(r||a||s),l&&(this._base="",this._resolveIRI=function(e){return this._error("Disallowed relative IRI",e),this._callback=i,this._subject=null}),this._blankNodePrefix="string"!=typeof e.blankNodePrefix?"":"_:"+e.blankNodePrefix.replace(/^_:/,""),this._lexer=e.lexer||new o({lineMode:l})}function i(){}var o=e("./N3Lexer"),a="http://www.w3.org/1999/02/22-rdf-syntax-ns#",s=a+"nil",u=a+"first",l=a+"rest",c=/^[a-z][a-z0-9+.-]*:/i,f=/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i,p=/(?:^|\/)\.\.?(?:$|[\/#?])/,h=0,d=0;n._resetBlankNodeIds=function(){h=d=0},n.prototype={_setBase:function(e){if(e){if(e.indexOf("#")>=0)throw new Error("Invalid base IRI "+e)}else e=null;(this._base=e)&&(this._basePath=e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(f),this._baseRoot=e[0],this._baseScheme=e[1])},_readInTopContext:function(e){switch(e.type){case"eof":return null!==this._graph?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"@prefix":return this._sparqlStyle=!1,this._readPrefix;case"PREFIX":return this._sparqlStyle=!0,this._readPrefix;case"@base":return this._sparqlStyle=!1,this._readBaseIRI;case"BASE":return this._sparqlStyle=!0,this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}},_readSubject:function(e){switch(this._predicate=null,e.type){case"IRI":null===this._base||c.test(e.value)?this._subject=e.value:this._subject=this._resolveIRI(e);break;case"prefixed":var t=this._prefixes[e.prefix];if(void 0===t)return this._error('Undefined prefix "'+e.prefix+':"',e);this._subject=t+e.value;break;case"[":return this._subject="_:b"+d++,this._tripleStack.push({subject:this._subject,predicate:null,object:null,type:"blank"}),this._readBlankNodeHead;case"(":return this._tripleStack.push({subject:s,predicate:null,object:null,type:"list"}),this._subject=null,this._readListItem;case"}":return this._readPunctuation(e);default:return this._error("Expected subject but got "+e.type,e)}return this._readPredicateOrNamedGraph},_readPredicate:function(e){var t=e.type;switch(t){case"IRI":case"abbreviation":null===this._base||c.test(e.value)?this._predicate=e.value:this._predicate=this._resolveIRI(e);break;case"prefixed":if("_"===e.prefix)return this._error("Disallowed blank node as predicate",e);var r=this._prefixes[e.prefix];if(void 0===r)return this._error('Undefined prefix "'+e.prefix+':"',e);this._predicate=r+e.value;break;case".":case"]":case"}":return null===this._predicate?this._error("Unexpected "+t,e):(this._subject=null,"]"===t?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return this._readPredicate;default:return this._error('Expected predicate to follow "'+this._subject+'"',e)}return this._readObject},_readObject:function(e){switch(e.type){case"IRI":null===this._base||c.test(e.value)?this._object=e.value:this._object=this._resolveIRI(e);break;case"prefixed":var t=this._prefixes[e.prefix];if(void 0===t)return this._error('Undefined prefix "'+e.prefix+':"',e);this._object=t+e.value;break;case"literal":return this._object=e.value,this._readDataTypeOrLang;case"[":var r="_:b"+d++;return this._tripleStack.push({subject:this._subject,predicate:this._predicate,object:r,type:"blank"}),this._subject=r,this._readBlankNodeHead;case"(":return this._tripleStack.push({subject:this._subject,predicate:this._predicate,object:s,type:"list"}),this._subject=null,this._readListItem;default:return this._error('Expected object to follow "'+this._predicate+'"',e)}return this._getTripleEndReader()},_readPredicateOrNamedGraph:function(e){return"{"===e.type?this._readGraph(e):this._readPredicate(e)},_readGraph:function(e){return"{"!==e.type?this._error("Expected graph but got "+e.type,e):(this._graph=this._subject,this._subject=null,this._readSubject)},_readBlankNodeHead:function(e){return"]"===e.type?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))},_readBlankNodeTail:function(e){if("]"!==e.type)return this._readBlankNodePunctuation(e);null!==this._subject&&this._callback(null,{subject:this._subject,predicate:this._predicate,object:this._object,graph:this._graph||""});var t=this._tripleStack.pop();return this._subject=t.subject,null!==t.object?(this._predicate=t.predicate,this._object=t.object,this._getTripleEndReader()):null!==this._predicate?this._readPredicate:this._readPredicateOrNamedGraph},_readDataTypeOrLang:function(e){switch(e.type){case"type":var t;if(""===e.prefix)t=null===this._base||c.test(e.value)?e.value:this._resolveIRI(e);else{var r=this._prefixes[e.prefix];if(void 0===r)return this._error('Undefined prefix "'+e.prefix+':"',e);t=r+e.value}return this._object+="^^"+t,this._getTripleEndReader();case"langcode":return this._object+="@"+e.value.toLowerCase(),this._getTripleEndReader();default:return this._getTripleEndReader().call(this,e)}},_readListItem:function(e){var t=null,r=null,n=this._subject,i=this._tripleStack,o=i[i.length-1],a=this._readListItem;switch(e.type){case"IRI":t=null===this._base||c.test(e.value)?e.value:this._resolveIRI(e);break;case"prefixed":var f=this._prefixes[e.prefix];if(void 0===f)return this._error('Undefined prefix "'+e.prefix+':"',e);t=f+e.value;break;case"literal":t=e.value,a=this._readDataTypeOrLang;break;case"[":r="_:b"+d++,t="_:b"+d++,i.push({subject:r,predicate:u,object:t,type:"blank"}),this._subject=t,a=this._readBlankNodeHead;break;case"(":r="_:b"+d++,i.push({subject:r,predicate:u,object:s,type:"list"}),this._subject=null,a=this._readListItem;break;case")":if(i.pop(),0!==i.length&&"list"===i[i.length-1].type&&this._callback(null,{subject:o.subject,predicate:o.predicate,object:o.object,graph:this._graph||""}),this._subject=o.subject,null===o.predicate){if(a=this._readPredicate,o.subject===s)return a}else if(this._predicate=o.predicate,this._object=o.object,a=this._getTripleEndReader(),o.object===s)return a;r=s;break;default:return this._error('Expected list item instead of "'+e.type+'"',e)}return null===r&&(this._subject=r="_:b"+d++),null===n?o.object===s?o.object=r:o.subject=r:this._callback(null,{subject:n,predicate:l,object:r,graph:this._graph||""}),null!==t&&this._callback(null,{subject:r,predicate:u,object:t,graph:this._graph||""}),a},_readPunctuation:function(e){var t,r=this._subject,n=this._graph;switch(e.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",e);this._graph=null;case".":this._subject=null,t=this._readInTopContext;break;case";":t=this._readPredicate;break;case",":t=this._readObject;break;case"IRI":if(this._supportsQuads&&null===this._graph){n=null===this._base||c.test(e.value)?e.value:this._resolveIRI(e),r=this._subject,t=this._readQuadPunctuation;break}case"prefixed":if(this._supportsQuads&&null===this._graph){var i=this._prefixes[e.prefix];if(void 0===i)return this._error('Undefined prefix "'+e.prefix+':"',e);n=i+e.value,t=this._readQuadPunctuation;break}default:return this._error('Expected punctuation to follow "'+this._object+'"',e)}return null!==r&&this._callback(null,{subject:r,predicate:this._predicate,object:this._object,graph:n||""}),t},_readBlankNodePunctuation:function(e){var t;switch(e.type){case";":t=this._readPredicate;break;case",":t=this._readObject;break;default:return this._error('Expected punctuation to follow "'+this._object+'"',e)}return this._callback(null,{subject:this._subject,predicate:this._predicate,object:this._object,graph:this._graph||""}),t},_readQuadPunctuation:function(e){return"."!==e.type?this._error("Expected dot to follow quad",e):this._readInTopContext},_readPrefix:function(e){return"prefix"!==e.type?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)},_readPrefixIRI:function(e){if("IRI"!==e.type)return this._error('Expected IRI to follow prefix "'+this._prefix+':"',e);var t;return t=null===this._base||c.test(e.value)?e.value:this._resolveIRI(e),this._prefixes[this._prefix]=t,this._prefixCallback(this._prefix,t),this._readDeclarationPunctuation},_readBaseIRI:function(e){if("IRI"!==e.type)return this._error("Expected IRI to follow base declaration",e);try{this._setBase(null===this._base||c.test(e.value)?e.value:this._resolveIRI(e))}catch(t){this._error(t.message,e)}return this._readDeclarationPunctuation},_readNamedGraphLabel:function(e){switch(e.type){case"IRI":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}},_readNamedGraphBlankLabel:function(e){return"]"!==e.type?this._error("Invalid graph label",e):(this._subject="_:b"+d++,this._readGraph)},_readDeclarationPunctuation:function(e){return this._sparqlStyle?this._readInTopContext(e):"."!==e.type?this._error("Expected declaration to end with a dot",e):this._readInTopContext},_getTripleEndReader:function(){var e=this._tripleStack;if(0===e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem}},_error:function(e,t){this._callback(new Error(e+" at line "+t.line+"."))},_resolveIRI:function(e){var t=e.value;switch(t[0]){case void 0:return this._base;case"#":return this._base+t;case"?":return this._base.replace(/(?:\?.*)?$/,t);case"/":return("/"===t[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(t);default:return this._removeDotSegments(this._basePath+t)}},_removeDotSegments:function(e){if(!p.test(e))return e;for(var t="",r=e.length,n=-1,i=-1,o=0,a="/";n<r;){switch(a){case":":if(i<0&&"/"===e[++n]&&"/"===e[++n])for(;(i=n+1)<r&&"/"!==e[i];)n=i;break;case"?":case"#":n=r;break;case"/":if("."===e[n+1])switch(a=e[++n+1]){case"/":t+=e.substring(o,n-1),o=n+1;break;case void 0:case"?":case"#":return t+e.substring(o,n)+e.substr(n+1);case".":if(a=e[++n+1],void 0===a||"/"===a||"?"===a||"#"===a){if(t+=e.substring(o,n-2),(o=t.lastIndexOf("/"))>=i&&(t=t.substr(0,o)),"/"!==a)return t+"/"+e.substr(n+1);o=n+1}}}a=e[++n]}return t+e.substring(o)},parse:function(e,t,r){this._readCallback=this._readInTopContext,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix||"_:b"+h++ +"_","function"==typeof e&&(r=t,t=e,e=null),this._callback=t||i,this._prefixCallback=r||i;var n=this;this._lexer.tokenize(e,function(e,t){null!==e?(n._callback(e),n._callback=i):void 0!==n._readCallback&&(n._readCallback=n._readCallback(t))}),e||(this.addChunk=this._lexer.addChunk,this.end=this._lexer.end)}},t.exports=n},{"./N3Lexer":28}],30:[function(e,t,r){function n(e,t){return this instanceof n?(this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._ids["><"]=0,this._entities=Object.create(null),this._blankNodeIndex=0,t||!e||e[0]||(t=e,e=null),t=t||{},this._prefixes=Object.create(null),t.prefixes&&this.addPrefixes(t.prefixes),this.defaultGraph=t.defaultGraph||"http://example.org/#defaultGraph",void(e&&this.addTriples(e))):new n(e,t)}var i=e("./N3Util").expandPrefixedName;n.prototype={get size(){var e=this._size;if(null!==e)return e;var t,r,n=this._graphs;for(var i in n)for(var o in t=n[i].subjects)for(var a in r=t[o])e+=Object.keys(r[a]).length;return this._size=e},_addToIndex:function(e,t,r,n){var i=e[t]||(e[t]={}),o=i[r]||(i[r]={}),a=n in o;return a||(o[n]=null),!a},_removeFromIndex:function(e,t,r,n){var i,o=e[t],a=o[r];delete a[n];for(i in a)return;delete o[r];for(i in o)return;delete e[t]},_findInIndex:function(e,t,r,n,i,o,a,s){var u,l,c,f=[],p=!t+!r+!n,h=p>1?Object.keys(this._ids):this._entities;t&&((u=e,e={})[t]=u[t]);for(var d in e){var v=h[d];if(l=e[d]){r&&((u=l,l={})[r]=u[r]);for(var g in l){var y=h[g];if(c=l[g])for(var m=(n?n in c?[n]:[]:Object.keys(c)),b=m.length-1;b>=0;b--){var w={subject:"",predicate:"",object:"",graph:s};w[i]=v,w[o]=y,w[a]=h[m[b]],f.push(w)}}}}return f},_countInIndex:function(e,t,r,n){var i,o,a,s=0;t&&((i=e,e={})[t]=i[t]);for(var u in e)if(o=e[u]){r&&((i=o,o={})[r]=i[r]);for(var l in o)(a=o[l])&&(n?n in a&&s++:s+=Object.keys(a).length)}return s},addTriple:function(e,t,r,n){t||(n=e.graph,r=e.object,t=e.predicate,e=e.subject),n=n||this.defaultGraph;var i=this._graphs[n];i||(i=this._graphs[n]={subjects:{},predicates:{},objects:{}},Object.freeze(i));var o=this._ids,a=this._entities;e=o[e]||(o[a[++this._id]=e]=this._id),t=o[t]||(o[a[++this._id]=t]=this._id),r=o[r]||(o[a[++this._id]=r]=this._id);var s=this._addToIndex(i.subjects,e,t,r);return this._addToIndex(i.predicates,t,r,e),this._addToIndex(i.objects,r,e,t),this._size=null,s},addTriples:function(e){for(var t=e.length-1;t>=0;t--)this.addTriple(e[t])},addPrefix:function(e,t){this._prefixes[e]=t},addPrefixes:function(e){for(var t in e)this.addPrefix(t,e[t])},removeTriple:function(e,t,r,n){t||(n=e.graph,r=e.object,t=e.predicate,e=e.subject),n=n||this.defaultGraph;var i,o=this._ids,a=this._graphs;if(!(e=o[e]))return!1;if(!(t=o[t]))return!1;if(!(r=o[r]))return!1;if(!(i=a[n]))return!1;var s,u;if(!(s=i.subjects[e]))return!1;if(!(u=s[t]))return!1;if(!(r in u))return!1;this._removeFromIndex(i.subjects,e,t,r),this._removeFromIndex(i.predicates,t,r,e),this._removeFromIndex(i.objects,r,e,t),null!==this._size&&this._size--;for(e in i.subjects)return!0;return delete a[n],!0},removeTriples:function(e){for(var t=e.length-1;t>=0;t--)this.removeTriple(e[t])},find:function(e,t,r,n){var o=this._prefixes;return this.findByIRI(i(e,o),i(t,o),i(r,o),i(n,o))},findByIRI:function(e,t,r,n){var i,o,a,s,u=[],l={},c=this._ids;n?l[n]=this._graphs[n]:l=this._graphs;for(var f in l)if(i=l[f]){if(e&&!(o=c[e]))return u;if(t&&!(a=c[t]))return u;if(r&&!(s=c[r]))return u;o?s?u.push(this._findInIndex(i.objects,s,o,a,"object","subject","predicate",f)):u.push(this._findInIndex(i.subjects,o,a,null,"subject","predicate","object",f)):a?u.push(this._findInIndex(i.predicates,a,s,null,"predicate","object","subject",f)):s?u.push(this._findInIndex(i.objects,s,null,null,"object","subject","predicate",f)):u.push(this._findInIndex(i.subjects,null,null,null,"subject","predicate","object",f))}return 1===u.length?u[0]:u.concat.apply([],u)},count:function(e,t,r,n){var o=this._prefixes;return this.countByIRI(i(e,o),i(t,o),i(r,o),i(n,o))},countByIRI:function(e,t,r,n){n=n||this.defaultGraph;var i=this._graphs[n],o=this._ids;return i?e&&!(e=o[e])?0:t&&!(t=o[t])?0:r&&!(r=o[r])?0:e?r?this._countInIndex(i.objects,r,e,t):this._countInIndex(i.subjects,e,t,r):t?this._countInIndex(i.predicates,t,r,e):this._countInIndex(i.objects,r,e,t):0},createBlankNode:function(e){var t,r;if(e)for(t=e="_:"+e,r=1;this._ids[t];)t=e+r++;else do t="_:b"+this._blankNodeIndex++;while(this._ids[t]);return this._ids[t]=++this._id,t}},t.exports=n},{"./N3Util":33}],31:[function(e,t,r){function n(e){if(!(this instanceof n))return new n(e);i.call(this,{decodeStrings:!0}),this._readableState.objectMode=!0;var t=this,r=new a(e);r.parse(function(e,r){r&&t.push(r)||e&&t.emit("error",e)},this.emit.bind(this,"prefix")),this._transform=function(e,t,n){r.addChunk(e),n()},this._flush=function(e){r.end(),e()}}var i=e("stream").Transform,o=e("util"),a=e("./N3Parser.js");o.inherits(n,i),t.exports=n},{"./N3Parser.js":29,stream:15,util:38}],32:[function(e,t,r){function n(e){if(!(this instanceof n))return new n(e);i.call(this,{encoding:"utf8"}),this._writableState.objectMode=!0;var t=this,r=new a({write:function(e,r,n){t.push(e),n&&n()},end:function(e){t.push(null),e&&e()}},e);this._transform=function(e,t,n){r.addTriple(e,n)},this._flush=function(e){r.end(e)}}var i=e("stream").Transform,o=e("util"),a=e("./N3Writer.js");o.inherits(n,i),t.exports=n},{"./N3Writer.js":34,stream:15,util:38}],33:[function(e,t,r){function n(e,t){for(var r in f)t?e.prototype[r]=i(f[r]):e[r]=f[r];return e}function i(e){return function(t){return e(this,t)}}var o="http://www.w3.org/2001/XMLSchema#",a=o+"string",s=o+"integer",u=o+"decimal",l=o+"boolean",c="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",f={isIRI:function(e){if(!e)return e;var t=e[0];return'"'!==t&&"_"!==t},isLiteral:function(e){return e&&'"'===e[0]},isBlank:function(e){return e&&"_:"===e.substr(0,2)},getLiteralValue:function(e){var t=/^"([^]*)"/.exec(e);if(!t)throw new Error(e+" is not a literal");return t[1]},getLiteralType:function(e){var t=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(e);if(!t)throw new Error(e+" is not a literal");return t[1]||(t[2]?c:a)},getLiteralLanguage:function(e){var t=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(e);if(!t)throw new Error(e+" is not a literal");return t[1]?t[1].toLowerCase():""},isPrefixedName:function(e){return e&&/^[^:\/"']*:[^:\/"']+$/.test(e)},expandPrefixedName:function(e,t){var r,n,i,o=/(?:^|"\^\^)([^:\/#"'\^_]*):[^\/]*$/.exec(e);return o&&(r=o[1],n=t[r],i=o.index),void 0===n?e:0===i?n+e.substr(r.length+1):e.substr(0,i+3)+n+e.substr(i+r.length+4)},createIRI:function(e){return e&&'"'===e[0]?f.getLiteralValue(e):e},createLiteral:function(e,t){if(!t)switch(typeof e){case"boolean":t=l;break;case"number":if(isFinite(e)){t=e%1===0?s:u;break}default:return'"'+e+'"'}return'"'+e+(/^[a-z]+(-[a-z0-9]+)*$/i.test(t)?'"@'+t.toLowerCase():'"^^'+t)},prefix:function(e){return f.prefixes({"":e})("")},prefixes:function(e){function t(e,t){if(t||!(e in r)){var n=Object.create(null);t=t||"",r[e]=function(e){return n[e]||(n[e]=t+e)}}return r[e]}var r=Object.create(null);for(var n in e)t(n,e[n]);return t}};t.exports=n(n)},{}],34:[function(e,t,r){function n(e,t){if(!(this instanceof n))return new n(e,t);if(e&&"function"!=typeof e.write&&(t=e,e=null),t=t||{},e)this._outputStream=e,this._endStream=void 0===t.end||!!t.end;else{var r="";this._outputStream={write:function(e,t,n){r+=e,n&&n()},end:function(e){e&&e(null,r)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(t.format)?this._writeTriple=this._writeTripleLine:(this._graph="",this._prefixIRIs=Object.create(null),t.prefixes&&this.addPrefixes(t.prefixes))}function i(e){var t=c[e];return void 0===t&&(1===e.length?(t=e.charCodeAt(0).toString(16),t="\\u0000".substr(0,6-t.length)+t):(t=(1024*(e.charCodeAt(0)-55296)+e.charCodeAt(1)+9216).toString(16),t="\\U00000000".substr(0,10-t.length)+t)),t}var o=/^"([^]*)"(?:\^\^(.+)|@([\-a-z]+))?$/i,a="http://www.w3.org/1999/02/22-rdf-syntax-ns#",s=a+"type",u=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,l=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,c={"\\":"\\\\",'"':'\\"',"\t":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};n.prototype={_write:function(e,t){this._outputStream.write(e,"utf8",t)},_writeTriple:function(e,t,r,n,i){try{this._graph!==n&&(this._write((null===this._subject?"":this._graph?"\n}\n":".\n")+(n?this._encodeIriOrBlankNode(n)+" {\n":"")),this._subject=null,this._graph="["!==n[0]?n:"]"),this._subject===e?this._predicate===t?this._write(", "+this._encodeObject(r),i):this._write(";\n    "+this._encodePredicate(this._predicate=t)+" "+this._encodeObject(r),i):this._write((null===this._subject?"":".\n")+this._encodeSubject(this._subject=e)+" "+this._encodePredicate(this._predicate=t)+" "+this._encodeObject(r),i)}catch(e){i&&i(e)}},_writeTripleLine:function(e,t,r,n,i){delete this._prefixMatch;try{this._write(this._encodeIriOrBlankNode(e)+" "+this._encodeIriOrBlankNode(t)+" "+this._encodeObject(r)+(n?" "+this._encodeIriOrBlankNode(n)+".\n":".\n"),i)}catch(e){i&&i(e)}},_encodeIriOrBlankNode:function(e){var t=e[0];if("["===t||"("===t||"_"===t&&":"===e[1])return e;u.test(e)&&(e=e.replace(l,i));var r=this._prefixRegex.exec(e);return r?r[1]?this._prefixIRIs[r[1]]+r[2]:e:"<"+e+">"},_encodeLiteral:function(e,t,r){return u.test(e)&&(e=e.replace(l,i)),r?'"'+e+'"@'+r:t?'"'+e+'"^^'+this._encodeIriOrBlankNode(t):'"'+e+'"'},_encodeSubject:function(e){if('"'===e[0])throw new Error("A literal as subject is not allowed: "+e);return"["===e[0]&&(this._subject="]"),this._encodeIriOrBlankNode(e)},_encodePredicate:function(e){if('"'===e[0])throw new Error("A literal as predicate is not allowed: "+e);return e===s?"a":this._encodeIriOrBlankNode(e)},_encodeObject:function(e){if('"'!==e[0])return this._encodeIriOrBlankNode(e);var t=o.exec(e);if(!t)throw new Error("Invalid literal: "+e);return this._encodeLiteral(t[1],t[2],t[3])},_blockedWrite:function(){throw new Error("Cannot write because the writer has been closed.")},addTriple:function(e,t,r,n,i){void 0===r?this._writeTriple(e.subject,e.predicate,e.object,e.graph||"",t):"string"!=typeof n?this._writeTriple(e,t,r,"",n):this._writeTriple(e,t,r,n,i)},addTriples:function(e){for(var t=0;t<e.length;t++)this.addTriple(e[t])},addPrefix:function(e,t,r){var n={};n[e]=t,this.addPrefixes(n,r)},addPrefixes:function(e,t){var r=this._prefixIRIs,n=!1;for(var i in e){var o=e[i];/[#\/]$/.test(o)&&r[o]!==(i+=":")&&(n=!0,r[o]=i,null!==this._subject&&(this._write(this._graph?"\n}\n":".\n"),this._subject=null,this._graph=""),this._write("@prefix "+i+" <"+o+">.\n"))}if(n){var a="",s="";for(var u in r)a+=a?"|"+u:u,s+=(s?"|":"")+r[u];a=a.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&"),this._prefixRegex=new RegExp("^(?:"+s+")[^/]*$|^("+a+")([a-zA-Z][\\-_a-zA-Z0-9]*)$")}this._write(n?"\n":"",t)},blank:function(e,t){var r,n,i=e;switch(void 0===e?i=[]:"string"==typeof e?i=[{predicate:e,object:t}]:"length"in e||(i=[e]),n=i.length){case 0:return"[]";case 1:if(r=i[0],"["!==r.object[0])return"[ "+this._encodePredicate(r.predicate)+" "+this._encodeObject(r.object)+" ]";default:for(var o="[",a=0;a<n;a++)r=i[a],r.predicate===e?o+=", "+this._encodeObject(r.object):(o+=(a?";\n  ":"\n  ")+this._encodePredicate(r.predicate)+" "+this._encodeObject(r.object),e=r.predicate);return o+"\n]"}},list:function(e){for(var t=e&&e.length||0,r=new Array(t),n=0;n<t;n++)r[n]=this._encodeObject(e[n]);return"("+r.join(" ")+")"},_prefixRegex:/$0^/,end:function(e){null!==this._subject&&(this._write(this._graph?"\n}\n":".\n"),this._subject=null),this._write=this._blockedWrite;var t=e&&function(r,n){t=null,e(r,n)};if(this._endStream)try{return this._outputStream.end(t)}catch(e){}t&&t()}},t.exports=n},{}],35:[function(e,t,r){(function(e){!function(n){function i(e){throw RangeError(j[e])}function o(e,t){for(var r=e.length;r--;)e[r]=t(e[r]);return e}function a(e,t){return o(e.split(N),t).join(".")}function s(e){for(var t,r,n=[],i=0,o=e.length;i<o;)t=e.charCodeAt(i++),t>=55296&&t<=56319&&i<o?(r=e.charCodeAt(i++),56320==(64512&r)?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--)):n.push(t);return n}function u(e){return o(e,function(e){var t="";return e>65535&&(e-=65536,t+=O(e>>>10&1023|55296),e=56320|1023&e),t+=O(e)}).join("")}function l(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:$}function c(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function f(e,t,r){var n=0;for(e=r?L(e/S):e>>1,e+=L(e/t);e>R*E>>1;n+=$)e=L(e/R);return L(n+(R+1)*e/(e+_))}function p(e){var t,r,n,o,a,s,c,p,h,d,v=[],g=e.length,y=0,m=C,b=A;
for(r=e.lastIndexOf(I),r<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&i("not-basic"),v.push(e.charCodeAt(n));for(o=r>0?r+1:0;o<g;){for(a=y,s=1,c=$;o>=g&&i("invalid-input"),p=l(e.charCodeAt(o++)),(p>=$||p>L((x-y)/s))&&i("overflow"),y+=p*s,h=c<=b?k:c>=b+E?E:c-b,!(p<h);c+=$)d=$-h,s>L(x/d)&&i("overflow"),s*=d;t=v.length+1,b=f(y-a,t,0==a),L(y/t)>x-m&&i("overflow"),m+=L(y/t),y%=t,v.splice(y++,0,m)}return u(v)}function h(e){var t,r,n,o,a,u,l,p,h,d,v,g,y,m,b,w=[];for(e=s(e),g=e.length,t=C,r=0,a=A,u=0;u<g;++u)v=e[u],v<128&&w.push(O(v));for(n=o=w.length,o&&w.push(I);n<g;){for(l=x,u=0;u<g;++u)v=e[u],v>=t&&v<l&&(l=v);for(y=n+1,l-t>L((x-r)/y)&&i("overflow"),r+=(l-t)*y,t=l,u=0;u<g;++u)if(v=e[u],v<t&&++r>x&&i("overflow"),v==t){for(p=r,h=$;d=h<=a?k:h>=a+E?E:h-a,!(p<d);h+=$)b=p-d,m=$-d,w.push(O(c(d+b%m,0))),p=L(b/m);w.push(O(c(p,0))),a=f(r,y,n==o),r=0,++n}++r,++t}return w.join("")}function d(e){return a(e,function(e){return T.test(e)?p(e.slice(4).toLowerCase()):e})}function v(e){return a(e,function(e){return F.test(e)?"xn--"+h(e):e})}var g="object"==typeof r&&r,y="object"==typeof t&&t&&t.exports==g&&t,m="object"==typeof e&&e;m.global!==m&&m.window!==m||(n=m);var b,w,x=2147483647,$=36,k=1,E=26,_=38,S=700,A=72,C=128,I="-",T=/^xn--/,F=/[^ -~]/,N=/\x2E|\u3002|\uFF0E|\uFF61/g,j={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},R=$-k,L=Math.floor,O=String.fromCharCode;if(b={version:"1.2.4",ucs2:{decode:s,encode:u},decode:p,encode:h,toASCII:v,toUnicode:d},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return b});else if(g&&!g.nodeType)if(y)y.exports=b;else for(w in b)b.hasOwnProperty(w)&&(g[w]=b[w]);else n.punycode=b}(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],36:[function(e,t,r){function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(e,t,r){if(e&&l(e)&&e instanceof n)return e;var i=new n;return i.parse(e,t,r),i}function o(e){return u(e)&&(e=i(e)),e instanceof n?e.format():n.prototype.format.call(e)}function a(e,t){return i(e,!1,!0).resolve(t)}function s(e,t){return e?i(e,!1,!0).resolveObject(t):t}function u(e){return"string"==typeof e}function l(e){return"object"==typeof e&&null!==e}function c(e){return null===e}function f(e){return null==e}
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.
var p=e("punycode");r.parse=i,r.resolve=a,r.resolveObject=s,r.format=o,r.Url=n;var h=/^([a-z0-9.+-]+:)/i,d=/:[0-9]*$/,v=["<",">",'"',"`"," ","\r","\n","\t"],g=["{","}","|","\\","^","`"].concat(v),y=["'"].concat(g),m=["%","/","?",";","#"].concat(y),b=["/","?","#"],w=255,x=/^[a-z0-9A-Z_-]{0,63}$/,$=/^([a-z0-9A-Z_-]{0,63})(.*)$/,k={javascript:!0,"javascript:":!0},E={javascript:!0,"javascript:":!0},_={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},S=e("querystring");n.prototype.parse=function(e,t,r){if(!u(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e;n=n.trim();var i=h.exec(n);if(i){i=i[0];var o=i.toLowerCase();this.protocol=o,n=n.substr(i.length)}if(r||i||n.match(/^\/\/[^@\/]+@[^@\/]+/)){var a="//"===n.substr(0,2);!a||i&&E[i]||(n=n.substr(2),this.slashes=!0)}if(!E[i]&&(a||i&&!_[i])){for(var s=-1,l=0;l<b.length;l++){var c=n.indexOf(b[l]);c!==-1&&(s===-1||c<s)&&(s=c)}var f,d;d=s===-1?n.lastIndexOf("@"):n.lastIndexOf("@",s),d!==-1&&(f=n.slice(0,d),n=n.slice(d+1),this.auth=decodeURIComponent(f)),s=-1;for(var l=0;l<m.length;l++){var c=n.indexOf(m[l]);c!==-1&&(s===-1||c<s)&&(s=c)}s===-1&&(s=n.length),this.host=n.slice(0,s),n=n.slice(s),this.parseHost(),this.hostname=this.hostname||"";var v="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!v)for(var g=this.hostname.split(/\./),l=0,A=g.length;l<A;l++){var C=g[l];if(C&&!C.match(x)){for(var I="",T=0,F=C.length;T<F;T++)I+=C.charCodeAt(T)>127?"x":C[T];if(!I.match(x)){var N=g.slice(0,l),j=g.slice(l+1),R=C.match($);R&&(N.push(R[1]),j.unshift(R[2])),j.length&&(n="/"+j.join(".")+n),this.hostname=N.join(".");break}}}if(this.hostname.length>w?this.hostname="":this.hostname=this.hostname.toLowerCase(),!v){for(var L=this.hostname.split("."),O=[],l=0;l<L.length;++l){var P=L[l];O.push(P.match(/[^A-Za-z0-9_-]/)?"xn--"+p.encode(P):P)}this.hostname=O.join(".")}var Q=this.port?":"+this.port:"",D=this.hostname||"";this.host=D+Q,this.href+=this.host,v&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==n[0]&&(n="/"+n))}if(!k[o])for(var l=0,A=y.length;l<A;l++){var M=y[l],q=encodeURIComponent(M);q===M&&(q=escape(M)),n=n.split(M).join(q)}var U=n.indexOf("#");U!==-1&&(this.hash=n.substr(U),n=n.slice(0,U));var B=n.indexOf("?");if(B!==-1?(this.search=n.substr(B),this.query=n.substr(B+1),t&&(this.query=S.parse(this.query)),n=n.slice(0,B)):t&&(this.search="",this.query={}),n&&(this.pathname=n),_[o]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var Q=this.pathname||"",P=this.search||"";this.path=Q+P}return this.href=this.format(),this},n.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&l(this.query)&&Object.keys(this.query).length&&(o=S.stringify(this.query));var a=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||_[t])&&i!==!1?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),a=a.replace("#","%23"),t+i+r+a+n},n.prototype.resolve=function(e){return this.resolveObject(i(e,!1,!0)).format()},n.prototype.resolveObject=function(e){if(u(e)){var t=new n;t.parse(e,!1,!0),e=t}var r=new n;if(Object.keys(this).forEach(function(e){r[e]=this[e]},this),r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol)return Object.keys(e).forEach(function(t){"protocol"!==t&&(r[t]=e[t])}),_[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r;if(e.protocol&&e.protocol!==r.protocol){if(!_[e.protocol])return Object.keys(e).forEach(function(t){r[t]=e[t]}),r.href=r.format(),r;if(r.protocol=e.protocol,e.host||E[e.protocol])r.pathname=e.pathname;else{for(var i=(e.pathname||"").split("/");i.length&&!(e.host=i.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==i[0]&&i.unshift(""),i.length<2&&i.unshift(""),r.pathname=i.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var o=r.pathname||"",a=r.search||"";r.path=o+a}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var s=r.pathname&&"/"===r.pathname.charAt(0),l=e.host||e.pathname&&"/"===e.pathname.charAt(0),p=l||s||r.host&&e.pathname,h=p,d=r.pathname&&r.pathname.split("/")||[],i=e.pathname&&e.pathname.split("/")||[],v=r.protocol&&!_[r.protocol];if(v&&(r.hostname="",r.port=null,r.host&&(""===d[0]?d[0]=r.host:d.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===i[0]?i[0]=e.host:i.unshift(e.host)),e.host=null),p=p&&(""===i[0]||""===d[0])),l)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,d=i;else if(i.length)d||(d=[]),d.pop(),d=d.concat(i),r.search=e.search,r.query=e.query;else if(!f(e.search)){if(v){r.hostname=r.host=d.shift();var g=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");g&&(r.auth=g.shift(),r.host=r.hostname=g.shift())}return r.search=e.search,r.query=e.query,c(r.pathname)&&c(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!d.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var y=d.slice(-1)[0],m=(r.host||e.host)&&("."===y||".."===y)||""===y,b=0,w=d.length;w>=0;w--)y=d[w],"."==y?d.splice(w,1):".."===y?(d.splice(w,1),b++):b&&(d.splice(w,1),b--);if(!p&&!h)for(;b--;b)d.unshift("..");!p||""===d[0]||d[0]&&"/"===d[0].charAt(0)||d.unshift(""),m&&"/"!==d.join("/").substr(-1)&&d.push("");var x=""===d[0]||d[0]&&"/"===d[0].charAt(0);if(v){r.hostname=r.host=x?"":d.length?d.shift():"";var g=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");g&&(r.auth=g.shift(),r.host=r.hostname=g.shift())}return p=p||r.host&&d.length,p&&!x&&d.unshift(""),d.length?r.pathname=d.join("/"):(r.pathname=null,r.path=null),c(r.pathname)&&c(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},n.prototype.parseHost=function(){var e=this.host,t=d.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{punycode:35,querystring:13}],37:[function(e,t,r){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],38:[function(e,t,r){(function(t,n){function i(e,t){var n={seen:[],stylize:a};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),v(t)?n.showHidden=t:t&&r._extend(n,t),x(n.showHidden)&&(n.showHidden=!1),x(n.depth)&&(n.depth=2),x(n.colors)&&(n.colors=!1),x(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=o),u(n,e,n.depth)}function o(e,t){var r=i.styles[t];return r?"["+i.colors[r][0]+"m"+e+"["+i.colors[r][1]+"m":e}function a(e,t){return e}function s(e){var t={};return e.forEach(function(e,r){t[e]=!0}),t}function u(e,t,n){if(e.customInspect&&t&&S(t.inspect)&&t.inspect!==r.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(n,e);return b(i)||(i=u(e,i,n)),i}var o=l(e,t);if(o)return o;var a=Object.keys(t),v=s(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),_(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return c(t);if(0===a.length){if(S(t)){var g=t.name?": "+t.name:"";return e.stylize("[Function"+g+"]","special")}if($(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(E(t))return e.stylize(Date.prototype.toString.call(t),"date");if(_(t))return c(t)}var y="",m=!1,w=["{","}"];if(d(t)&&(m=!0,w=["[","]"]),S(t)){var x=t.name?": "+t.name:"";y=" [Function"+x+"]"}if($(t)&&(y=" "+RegExp.prototype.toString.call(t)),E(t)&&(y=" "+Date.prototype.toUTCString.call(t)),_(t)&&(y=" "+c(t)),0===a.length&&(!m||0==t.length))return w[0]+y+w[1];if(n<0)return $(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var k;return k=m?f(e,t,n,v,a):a.map(function(r){return p(e,t,n,v,r,m)}),e.seen.pop(),h(k,y,w)}function l(e,t){if(x(t))return e.stylize("undefined","undefined");if(b(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return m(t)?e.stylize(""+t,"number"):v(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}function c(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,r,n,i){for(var o=[],a=0,s=t.length;a<s;++a)F(t,String(a))?o.push(p(e,t,r,n,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(p(e,t,r,n,i,!0))}),o}function p(e,t,r,n,i,o){var a,s,l;if(l=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},l.get?s=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(s=e.stylize("[Setter]","special")),F(n,i)||(a="["+i+"]"),s||(e.seen.indexOf(l.value)<0?(s=g(r)?u(e,l.value,null):u(e,l.value,r-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n"))):s=e.stylize("[Circular]","special")),x(a)){if(o&&i.match(/^\d+$/))return s;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function h(e,t,r){var n=0,i=e.reduce(function(e,t){return n++,t.indexOf("\n")>=0&&n++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function d(e){return Array.isArray(e)}function v(e){return"boolean"==typeof e}function g(e){return null===e}function y(e){return null==e}function m(e){return"number"==typeof e}function b(e){return"string"==typeof e}function w(e){return"symbol"==typeof e}function x(e){return void 0===e}function $(e){return k(e)&&"[object RegExp]"===C(e)}function k(e){return"object"==typeof e&&null!==e}function E(e){return k(e)&&"[object Date]"===C(e)}function _(e){return k(e)&&("[object Error]"===C(e)||e instanceof Error)}function S(e){return"function"==typeof e}function A(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function C(e){return Object.prototype.toString.call(e)}function I(e){return e<10?"0"+e.toString(10):e.toString(10)}function T(){var e=new Date,t=[I(e.getHours()),I(e.getMinutes()),I(e.getSeconds())].join(":");return[e.getDate(),L[e.getMonth()],t].join(" ")}function F(e,t){return Object.prototype.hasOwnProperty.call(e,t)}
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.
var N=/%[sdj%]/g;r.format=function(e){if(!b(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(i(arguments[r]));return t.join(" ")}for(var r=1,n=arguments,o=n.length,a=String(e).replace(N,function(e){if("%%"===e)return"%";if(r>=o)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}}),s=n[r];r<o;s=n[++r])a+=g(s)||!k(s)?" "+s:" "+i(s);return a},r.deprecate=function(e,i){function o(){if(!a){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation?console.trace(i):console.error(i),a=!0}return e.apply(this,arguments)}if(x(n.process))return function(){return r.deprecate(e,i).apply(this,arguments)};if(t.noDeprecation===!0)return e;var a=!1;return o};var j,R={};r.debuglog=function(e){if(x(j)&&(j=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!R[e])if(new RegExp("\\b"+e+"\\b","i").test(j)){var n=t.pid;R[e]=function(){var t=r.format.apply(r,arguments);console.error("%s %d: %s",e,n,t)}}else R[e]=function(){};return R[e]},r.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},r.isArray=d,r.isBoolean=v,r.isNull=g,r.isNullOrUndefined=y,r.isNumber=m,r.isString=b,r.isSymbol=w,r.isUndefined=x,r.isRegExp=$,r.isObject=k,r.isDate=E,r.isError=_,r.isFunction=S,r.isPrimitive=A,r.isBuffer=e("./support/isBuffer");var L=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];r.log=function(){console.log("%s - %s",T(),r.format.apply(r,arguments))},r.inherits=e("inherits"),r._extend=function(e,t){if(!t||!k(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}}).call(this,e("7YKIPe"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":37,"7YKIPe":10,inherits:24}],39:[function(e,t,r){function n(e,t){this.name="NonSupportedSparqlFeatureError",this.feature=e,this.message=t||"SPARQL feature "+e+" non supported"}function i(e){this.name=ParserError,this.message=e||"Error parsing SPARQL query"}var o=e("./parser"),a=e("./utils"),s=a;n.prototype=new Error,n.constructor=n,i.prototype=new Error,i.constructor=i,AbstractQueryTree=function(){},AbstractQueryTree.prototype.parseQueryString=function(e){return o.parse(e)},AbstractQueryTree.prototype.parseExecutableUnit=function(e){if("select"===e.kind)return this.parseSelect(e);if("ask"===e.kind)return this.parseSelect(e);if("modify"===e.kind)return this.parseSelect(e);if("construct"===e.kind)return this.parseSelect(e);if("insertdata"===e.kind)return this.parseInsertData(e);if("deletedata"===e.kind)return this.parseInsertData(e);if("load"===e.kind)return e;if("clear"===e.kind)return e;if("drop"===e.kind)return e;if("create"===e.kind)return e;throw new Error("unknown executable unit: "+e.kind)},AbstractQueryTree.prototype.parseSelect=function(e){if(null==e)return console.log("error parsing query"),null;var t={freshCounter:0};return e.pattern=this.build(e.pattern,t),e},AbstractQueryTree.prototype.parseInsertData=function(e){return null==e?(console.log("error parsing query"),null):e},AbstractQueryTree.prototype.build=function(e,t){if("groupgraphpattern"===e.token)return this._buildGroupGraphPattern(e,t);if("basicgraphpattern"===e.token){var r={kind:"BGP",value:e.triplesContext};return r=AbstractQueryTree.translatePathExpressionsInBGP(r,t)}if("graphunionpattern"===e.token){var o=this.build(e.value[0],t),a=this.build(e.value[1],t);return{kind:"UNION",value:[o,a]}}if("graphgraphpattern"===e.token){var s=this.build(e.value,t);return{kind:"GRAPH",value:s,graph:e.graph}}throw null!=e.token?new n(e.token,"Non implemented SPARQL graph pattern: '"+e.token+"'"):new i("Error parsing graph pattern: '"+JSON.stringify(e)+"'")},AbstractQueryTree.translatePathExpressionsInBGP=function(e,t){for(var r,n,i,o=[],a=0;a<e.value.length;a++)if(e.value[a].predicate&&"path"===e.value[a].predicate.token){r=e.value[a],n=e.value.slice(a+1);var u=AbstractQueryTree.translatePathExpression(r,t),l=null;if("BGP"!==u.kind){if("ZERO_OR_MORE_PATH"===u.kind||"ONE_OR_MORE_PATH"===u.kind){if(i=o.length>0?{kind:"JOIN",lvalue:{kind:"BGP",value:o},rvalue:u}:u,"ZERO_OR_MORE_PATH"===u.kind)if("var"===u.y.token&&0===u.y.value.indexOf("fresh:")&&"var"===u.x.token&&0===u.x.value.indexOf("fresh:"))for(var c=0;c<e.value.length;c++)e.value[c].object&&"var"===e.value[c].object.token&&e.value[c].object.value===u.x.value&&(l=s.clone(e.value[c],!0),l.object=u.y);else if("var"===u.y.token&&0===u.y.value.indexOf("fresh:"))for(var c=0;c<e.value.length;c++)e.value[c].subject&&"var"===e.value[c].subject.token&&e.value[c].subject.value===u.y.value&&(l=s.clone(e.value[c],!0),l.subject=u.x);if(n.length>0){var f=AbstractQueryTree.translatePathExpressionsInBGP({kind:"BGP",value:n},t);if(null!=l){var p=o.concat([l]).concat(n);return{kind:"UNION",value:[{kind:"JOIN",lvalue:i,rvalue:f},{kind:"BGP",value:p}]}}return{kind:"JOIN",lvalue:i,rvalue:f}}return i}return u}o=o.concat(u.value)}else o.push(e.value[a]);return e.value=o,e},AbstractQueryTree.translatePathExpression=function(e,t){if("element"===e.predicate.kind){if("+"===e.predicate.modifier){e.predicate.modifier=null;var r=AbstractQueryTree.translatePathExpression(e,t);return{kind:"ONE_OR_MORE_PATH",path:r,x:e.subject,y:e.object}}if("*"===e.predicate.modifier){e.predicate.modifier=null;var r=AbstractQueryTree.translatePathExpression(e,t);return{kind:"ZERO_OR_MORE_PATH",path:r,x:e.subject,y:e.object}}return e.predicate=e.predicate.value,{kind:"BGP",value:[e]}}if("sequence"===e.predicate.kind){for(var i,o,a=e.subject,u=e.object,l=e.graph,c=[],f=0;f<e.predicate.value.length;f++)f!=e.predicate.value.length-1?(i={token:"var",value:"fresh:"+t.freshCounter},t.freshCounter++):i=u,o={subject:a,predicate:e.predicate.value[f],object:i},null!=l&&(o.graph=s.clone(l,!0)),c.push(o),f!=e.predicate.value.length-1&&(a=s.clone(i,!0));var p={kind:"BGP",value:c};return AbstractQueryTree.translatePathExpressionsInBGP(p,t)}throw new n("Non supported path expression "+e.predicate.kind)},AbstractQueryTree.prototype._buildGroupGraphPattern=function(e,t){for(var r=e.filters||[],n=e.binds||[],i={kind:"EMPTY_PATTERN"},o=0;o<e.patterns.length;o++){var a=e.patterns[o];if("optionalgraphpattern"===a.token){var s=this.build(a.value,t);i="FILTER"===s.kind?{kind:"LEFT_JOIN",lvalue:i,rvalue:s.value,filter:s.filter}:{kind:"LEFT_JOIN",lvalue:i,rvalue:s,filter:!0}}else{var s=this.build(a,t);i="EMPTY_PATTERN"==i.kind?s:{kind:"JOIN",lvalue:i,rvalue:s}}}if(i.binds=n,0!=r.length){if("EMPTY_PATTERN"===i.kind)return{kind:"FILTER",filter:r,value:i};if("LEFT_JOIN"===i.kind&&i.filter===!0)return{kind:"FILTER",filter:r,value:i};if("LEFT_JOIN"===i.kind)return{kind:"FILTER",filter:r,value:i};if("JOIN"===i.kind)return{kind:"FILTER",filter:r,value:i};if("UNION"===i.kind)return{kind:"FILTER",filter:r,value:i};if("GRAPH"===i.kind)return{kind:"FILTER",filter:r,value:i};if("BGP"===i.kind)return{kind:"FILTER",filter:r,value:i};throw new Error("Unknow kind of algebra expression: "+i.kind)}return i},AbstractQueryTree.prototype.collectBasicTriples=function(e,t){if(null==t&&(t=[]),"select"===e.kind)t=this.collectBasicTriples(e.pattern,t);else if("BGP"===e.kind)t=t.concat(e.value);else if("ZERO_OR_MORE_PATH"===e.kind)t=this.collectBasicTriples(e.path);else if("UNION"===e.kind)t=this.collectBasicTriples(e.value[0],t),t=this.collectBasicTriples(e.value[1],t);else if("GRAPH"===e.kind)t=this.collectBasicTriples(e.value,t);else if("LEFT_JOIN"===e.kind||"JOIN"===e.kind)t=this.collectBasicTriples(e.lvalue,t),t=this.collectBasicTriples(e.rvalue,t);else if("FILTER"===e.kind)t=this.collectBasicTriples(e.value,t);else if("construct"===e.kind)t=this.collectBasicTriples(e.pattern,t);else if("EMPTY_PATTERN"!==e.kind)throw"Unknown pattern: "+e.kind;return t},AbstractQueryTree.prototype.bind=function(e,t){if(null!=e.graph&&e.graph.token&&"var"===e.graph.token&&null!=t[e.graph.value]&&(e.graph=t[e.graph.value]),null!=e.filter){for(var r=[],n=0;n<e.filter.length;n++)e.filter[n].value=this._bindFilter(e.filter[n].value,t),r.push(e.filter[n]);e.filter=r}if("select"===e.kind)e.pattern=this.bind(e.pattern,t);else if("BGP"===e.kind)e.value=this._bindTripleContext(e.value,t);else if("ZERO_OR_MORE_PATH"===e.kind)e.path=this._bindTripleContext(e.path,t),e.x&&"var"===e.x.token&&null!=t[e.x.value]&&(e.x=t[e.x.value]),e.y&&"var"===e.y.token&&null!=t[e.y.value]&&(e.y=t[e.y.value]);else if("UNION"===e.kind)e.value[0]=this.bind(e.value[0],t),e.value[1]=this.bind(e.value[1],t);else if("GRAPH"===e.kind)e.value=this.bind(e.value,t);else if("LEFT_JOIN"===e.kind||"JOIN"===e.kind)e.lvalue=this.bind(e.lvalue,t),e.rvalue=this.bind(e.rvalue,t);else if("FILTER"===e.kind){var i=this;e.value=this.bind(e.value,t),e.filter=e.filter.map(function(e){return{token:"filter",value:i._bindFilter(e.value,t)}})}else if("EMPTY_PATTERN"!==e.kind)throw"Unknown pattern: "+e.kind;return e},AbstractQueryTree.prototype._bindTripleContext=function(e,t){for(var r=0;r<e.length;r++){delete e[r].graph,delete e[r].variables;for(var n in e[r]){var i=e[r][n];"var"===i.token&&null!=t[i.value]&&(e[r][n]=t[i.value])}}return e},AbstractQueryTree.prototype._bindFilter=function(e,t){if(null!=e.expressionType){var r=e.expressionType;if("relationalexpression"==r)e.op1=this._bindFilter(e.op1,t),e.op2=this._bindFilter(e.op2,t);else if("conditionalor"==r||"conditionaland"==r)for(var n=0;n<e.operands.length;n++)e.operands[n]=this._bindFilter(e.operands[n],t);else if("additiveexpression"==r){e.summand=this._bindFilter(e.summand,t);for(var n=0;n<e.summands.length;n++)e.summands[n].expression=this._bindFilter(e.summands[n].expression,t)}else if("builtincall"==r)for(var n=0;n<e.args.length;n++)e.args[n]=this._bindFilter(e.args[n],t);else if("multiplicativeexpression"==r){e.factor=this._bindFilter(e.factor,t);for(var n=0;n<e.factors.length;n++)e.factors[n].expression=this._bindFilter(e.factors[n].expression,t)}else if("unaryexpression"==r)e.expression=this._bindFilter(e.expression,t);else if("irireforfunction"==r)for(var n=0;n<e.factors.args;n++)e.args[n]=this._bindFilter(e.args[n],t);else if("atomic"==r&&"var"==e.primaryexpression&&null!=t[e.value.value]){var i=t[e.value.value];"uri"===i.token?e.primaryexpression="iri":e.primaryexpression="literal",e.value=i}}return e},AbstractQueryTree.prototype.replace=function(e,t,r,n){if(null!=e.graph&&e.graph.token&&e.graph.token===t.token&&e.graph.value==t.value&&(e.graph=s.clone(r,!0)),null!=e.filter){for(var i=[],o=0;o<e.filter.length;o++)e.filter[o].value=this._replaceFilter(e.filter[o].value,t,r,n),i.push(e.filter[o]);e.filter=i}if("select"===e.kind)e.pattern=this.replace(e.pattern,t,r,n);else if("BGP"===e.kind)e.value=this._replaceTripleContext(e.value,t,r,n);else if("ZERO_OR_MORE_PATH"===e.kind)e.path=this._replaceTripleContext(e.path,t,r,n),e.x&&e.x.token===t.token&&e.value===t.value&&(e.x=s.clone(r,!0)),e.y&&e.y.token===t.token&&e.value===t.value&&(e.y=s.clone(r,!0));else if("UNION"===e.kind)e.value[0]=this.replace(e.value[0],t,r,n),e.value[1]=this.replace(e.value[1],t,r,n);else if("GRAPH"===e.kind)e.value=this.replace(e.value,t,r);else if("LEFT_JOIN"===e.kind||"JOIN"===e.kind)e.lvalue=this.replace(e.lvalue,t,r,n),e.rvalue=this.replace(e.rvalue,t,r,n);else if("FILTER"===e.kind)e.value=this._replaceFilter(e.value,t,r,n);else if("EMPTY_PATTERN"!==e.kind)throw"Unknown pattern: "+e.kind;return e},AbstractQueryTree.prototype._replaceTripleContext=function(e,t,r,n){for(var i=0;i<e.length;i++)for(var o in e[i]){var s=e[i][o];"var"===s.token&&"var"===t.token&&s.value===t.value?e[i][o]=r:"blank"===s.token&&"blank"===t.token&&s.value===t.value?e[i][o]=r:"literal"!==s.token&&"uri"!==s.token||"literal"!==t.token&&"uri"!==t.token||s.token!==t.token||a.lexicalFormTerm(s,n)[s.token]!==a.lexicalFormTerm(t,n)[s.token]||(e[i][o]=r)}return e},AbstractQueryTree.prototype._replaceFilter=function(e,t,r,n){if(null!=e.expressionType){var i=e.expressionType;if("relationalexpression"==i)e.op1=this._replaceFilter(e.op1,t,r,n),e.op2=this._replaceFilter(e.op2,t,r,n);else if("conditionalor"==i||"conditionaland"==i)for(var o=0;o<e.operands.length;o++)e.operands[o]=this._replaceFilter(e.operands[o],t,r,n);else if("additiveexpression"==i){e.summand=this._replaceFilter(e.summand,t,r,n);for(var o=0;o<e.summands.length;o++)e.summands[o].expression=this._replaceFilter(e.summands[o].expression,t,r,n)}else if("builtincall"==i)for(var o=0;o<e.args.length;o++)e.args[o]=this._replaceFilter(e.args[o],t,r,n);else if("multiplicativeexpression"==i){e.factor=this._replaceFilter(e.factor,t,r,n);for(var o=0;o<e.factors.length;o++)e.factors[o].expression=this._replaceFilter(e.factors[o].expression,t,r,n)}else if("unaryexpression"==i)e.expression=this._replaceFilter(e.expression,t,r,n);else if("irireforfunction"==i)for(var o=0;o<e.factors.args;o++)e.args[o]=this._replaceFilter(e.args[o],t,r,n);else if("atomic"==i){var a=null;e.primaryexpression==t.token&&e.value==t.value?a=r.value:"iri"==e.primaryexpression&&"uri"==t.token&&e.value==t.value&&(a=r.value),null!=a&&("uri"===r.token?e.primaryexpression="iri":e.primaryexpression=r.token,e.value=a)}}return e},AbstractQueryTree.prototype.treeWithUnion=function(e){if(null==e)return!1;if(null==e.kind)return!1;if("select"===e.kind)return this.treeWithUnion(e.pattern);if("BGP"===e.kind)return this.treeWithUnion(e.value);if("ZERO_OR_MORE_PATH"===e.kind)return!1;if("UNION"===e.kind){if(null==e.value[0].value||null==e.value[0].value.variables||null==e.value[1].value||null==e.value[1].value.variables)return!0;if(e.value[0].variables.join("/")===e.values[1].variables.join("/"))return!!this.treeWithUnion(e.value[0])||this.treeWithUnion(e.value[1])}else{if("GRAPH"===e.kind)return!1;if("LEFT_JOIN"!==e.kind&&"JOIN"!==e.kind)return"FILTER"!==e.kind&&("EMPTY_PATTERN"===e.kind,!1);var t=this.treeWithUnion(e.lvalue);if(t)return!0;this.treeWithUnion(e.rvalue)}},t.exports={AbstractQueryTree:AbstractQueryTree,NonSupportedSparqlFeatureError:n,SparqlParserError:i}},{"./parser":46,"./utils":57}],40:[function(e,t,r){"use strict";var n=e("./utils"),i=n,o=n.nextTick,a=-1,s=1,u=function(e,t){if(0!=arguments.length){this.order=e,this.root=this._allocateNode(),this.root.isLeaf=!0,this.root.level=0;var r=this;this._diskWrite(this.root,function(e){r.root=e,r._updateRootNode(r.root,function(e){r.comparator=function(e,t){return e<t?-1:e>t?1:0},r.merger=null,null!=t&&t(r)})})}};u.prototype._allocateNode=function(){return new l},u.prototype._diskWrite=function(e,t){o(function(){t(e)})},u.prototype._diskRead=function(e,t){o(function(){t(e)})},u.prototype._diskDelete=function(e,t){o(function(){t()})},u.prototype._updateRootNode=function(e,t){t(e)},u.prototype.search=function(e,t,r){var n=this.root,i=this;i.__search(i,e,n,t,r)},u.prototype.__search=function(e,t,r,n,i){for(var o=0;o<r.numberActives&&1===e.comparator(t,r.keys[o].key);)o++;o<r.numberActives&&0===e.comparator(r.keys[o].key,t)?n(null!=i&&1==i?!0:r.keys[o].data):r.isLeaf===!0?n(null):e._diskRead(r.children[o],function(r){e.__search(e,t,r,n,i)})},u.prototype.walk=function(e,t){this.__walk(this,this.root,e,t)},u.prototype.__walk=function(e,t,r,n){var o=t.numberActives,a=0;if(t.isLeaf){for(a=0;a<t.numberActives;a++)r(t.keys[a]);return n()}i.whilst(function(){return a<o},function(n){e._diskRead(t.children[a],function(i){e.__walk(e,i,r,function(){e._diskRead(t.keys[a],function(e){r(e),a++,n()})})})},function(){e._diskRead(t.children[o],function(t){e.__walk(e,t,r,function(){n()})})})},u.prototype.walkNodes=function(e){this.__walkNodes(this,root,e,function(){})},u.prototype.__walkNodes=function(e,t,r,n){if(t.isLeaf)return r(t),n();r(t);var o=t.numberActives,a=0;i.whilst(function(){return a<o},function(n){e._diskRead(t.children[a],function(t){e.__walkNodes(e,t,r,function(){a++,n()})})},function(){e._diskRead(t.children[o],function(t){e.__walkNodes(e,t,r,function(){})})})},u.prototype._splitChild=function(e,t,r,n){var i=this._allocateNode();i.isLeaf=r.isLeaf,i.level=r.level,i.numberActives=this.order-1;var o=r.keys[this.order-1];r.keys[this.order-1]=null;for(var a=0;a<this.order-1;a++)i.keys[a]=r.keys[a+this.order],r.keys[a+this.order]=null,r.isLeaf||(i.children[a]=r.children[a+this.order],r.children[a+this.order]=null);for(r.isLeaf||(i.children[a]=r.children[a+this.order],r.children[a+this.order]=null),r.numberActives=this.order-1,a=e.numberActives+1;a>t+1;a--)e.children[a]=e.children[a-1];for(e.children[t+1]=i,a=e.numberActives;a>t;a--)e.keys[a]=e.keys[a-1];e.keys[t]=o,e.numberActives++;var s=this;this._diskWrite(i,function(i){s._diskWrite(e,function(e){e.children[t+1]=i,s._diskWrite(r,function(t){return n(e)})})})},u.prototype.insert=function(e,t,r){if(this.root.numberActives===2*this.order-1){var n=this._allocateNode();n.isLeaf=!1,n.level=this.root.level+1,n.numberActives=0,n.children[0]=this.root;var i=this;this._splitChild(n,0,this.root,function(o){n=o,i.root=n,i._updateRootNode(n,function(n){i._insertNonFull(n,e,t,r)})})}else this._insertNonFull(this.root,e,t,r)},u.prototype._insertNonFull=function(e,t,r,n){var i=e.numberActives-1;this.__insertNonFull(this,e,i,t,r,n)},u.prototype.__insertNonFull=function(e,t,r,n,i,o){if(t.isLeaf){for(;r>=0&&e.comparator(n,t.keys[r].key)===-1;)t.keys[r+1]=t.keys[r],r--;r>=0&&0===e.comparator(n,t.keys[r].key)?t.keys[r]={key:n,data:i}:(t.keys[r+1]={key:n,data:i},t.numberActives++),e._diskWrite(t,function(e){return o(e)})}else{for(;r>=0&&e.comparator(n,t.keys[r].key)===-1;)r--;r++;var a=e;e._diskRead(t.children[r],function(s){s.numberActives===2*a.order-1?a._splitChild(t,r,s,function(){1===a.comparator(n,t.keys[r].key)&&r++,a._diskRead(t.children[r],function(t){r=t.numberActives-1,a.__insertNonFull(e,t,r,n,i,o)})}):a._diskRead(t.children[r],function(t){r=t.numberActives-1,a.__insertNonFull(e,t,r,n,i,o)})})}},u.prototype.delete=function(e,t){var r=this.root;u.prototype.__deleteSearchNode(this,e,r,t)},u.prototype.__deleteSearchNode=function(e,t,r,n){var i=0;if(0===r.numberActives)return n(!1);for(;i<r.numberActives&&1===e.comparator(t,r.keys[i].key);)i++;var o=i;if(i<r.numberActives&&0===e.comparator(t,r.keys[i].key))return e.__deleteNodeFound(e,o,t,r,n);if(r.isLeaf===!0)return n(!1);var u=r;e._diskRead(r.children[i],function(r){if(null===r)return n(!1);var l=!1,c=!1,f=null,p=null;o===u.numberActives?(c=!0,p=u.children[o-1],f=u.children[o-1]):0===o?(l=!0,f=u.children[1],p=u.children[1]):(p=u.children[o-1],f=u.children[o+1]),e._diskRead(p,function(o){e._diskRead(f,function(f){c===!0&&(f=null),l===!0&&(o=null),r.numberActives===e.order-1&&null!=u?null!=f&&f.numberActives>e.order-1?e._moveKey(u,i,a,function(i){e.__deleteSearchNode(e,t,r,n)}):null!=o&&o.numberActives>e.order-1?e._moveKey(u,i,s,function(i){e.__deleteSearchNode(e,t,r,n)}):null!=o&&o.numberActives===e.order-1?e._mergeSiblings(u,i,a,function(r){e.__deleteSearchNode(e,t,r,n)}):null!=f&&f.numberActives===e.order-1&&e._mergeSiblings(u,i,s,function(r){e.__deleteSearchNode(e,t,r,n)}):e.__deleteSearchNode(e,t,r,n)})})})},u.prototype.__deleteNodeFound=function(e,t,r,n,i){return n.isLeaf&&n.numberActives>e.order-1?(e._deleteKeyFromNode(n,t,function(){i(!0)}),!0):n.isLeaf&&n===e.root?(e._deleteKeyFromNode(n,t,function(){i(!0)}),!0):(n.isLeaf===!1&&e._diskRead(n.children[t],function(o){o.numberActives>e.order-1?e._getMaxKeyPos(e,o,function(a){r=a.node.keys[a.index],n.keys[t]=r,e._diskWrite(n,function(t){t=o,r=r.key,e.__deleteSearchNode(e,r,t,i)})}):e._diskRead(n.children[t+1],function(a){a.numberActives>e.order-1?e._getMinKeyPos(e,a,function(o){r=o.node.keys[o.index],n.keys[t]=r,e._diskWrite(n,function(t){t=a,r=r.key,e.__deleteSearchNode(e,r,t,i)})}):o.numberActives===e.order-1&&a.numberActives===e.order-1&&e._mergeNodes(o,n.keys[t],a,function(o){n.children[t]=o,t++;for(var a=t;a<n.numberActives;a++)n.children[a]=n.children[a+1],n.keys[a-1]=n.keys[a];n.children[a]=null,n.keys[a-1]=null,n.numberActives--,0===n.numberActives&&e.root===n&&(e.root=o),e._diskWrite(n,function(t){e.__deleteSearchNode(e,r,o,i)})})})}),void(n.isLeaf&&n.numberActives>e.order-1&&e._deleteKeyFromNode(n,t,function(t){e.__deleteSearchNode(e,r,t,i)})))},u.prototype._moveKey=function(e,t,r,n){r===s&&t--;var i=this;i._diskRead(e.children[t],function(o){i._diskRead(e.children[t+1],function(s){if(r==a){o.keys[o.numberActives]=e.keys[t],o.children[o.numberActives+1]=s.children[0],s.children[0]=null,o.numberActives++,e.keys[t]=s.keys[0];for(var u=1;u<s.numberActives;u++)s.keys[u-1]=s.keys[u],s.children[u-1]=s.children[u];s.children[s.numberActives-1]=s.children[s.numberActives],s.numberActives--}else{s.children[s.numberActives+1]=s.children[s.numberActives];for(var u=s.numberActives;u>0;u--)s.children[u]=s.children[u-1],s.keys[u]=s.keys[u-1];s.keys[0]=null,s.children[0]=null,s.children[0]=o.children[o.numberActives],s.keys[0]=e.keys[t],s.numberActives++,o.children[o.numberActives]=null,e.keys[t]=o.keys[o.numberActives-1],o.keys[o.numberActives-1]=null,o.numberActives--}i._diskWrite(o,function(t){i._diskWrite(s,function(t){i._diskWrite(e,function(e){return n(e)})})})})})},u.prototype._mergeSiblings=function(e,t,r,n){var i,o,a,s;t===e.numberActives?(t--,a=e.children[e.numberActives-1],s=e.children[e.numberActives]):(a=e.children[t],s=e.children[t+1]);var u=this;u._diskRead(a,function(r){u._diskRead(s,function(a){var s=u._allocateNode();for(s.isLeaf=r.isLeaf,s.level=r.level,o=0;o<u.order-1;o++)s.keys[o]=r.keys[o],s.children[o]=r.children[o];for(s.keys[u.order-1]=e.keys[t],s.children[u.order-1]=r.children[u.order-1],o=0;o<u.order-1;o++)s.keys[o+u.order]=a.keys[o],s.children[o+u.order]=a.children[o];for(s.children[2*u.order-1]=a.children[u.order-1],e.children[t]=s,o=t;o<e.numberActives;o++)e.keys[o]=e.keys[o+1],e.children[o+1]=e.children[o+2];for(s.numberActives=r.numberActives+a.numberActives+1,e.numberActives--,i=e.numberActives;i<2*u.order-1;i++)e.keys[i]=null;0===e.numberActives&&u.root===e&&(u.root=s,s.level?s.isLeaf=!1:s.isLeaf=!0),u._diskWrite(s,function(t){u._diskWrite(e,function(e){u._diskDelete(r,function(){u._diskDelete(a,function(){return u.root!==t?n(t):void u._updateRootNode(u.root,function(){return n(t)})})})})})})})},u.prototype._deleteKeyFromNode=function(e,t,r){var n=2*this.order-1;e.numberActives<n&&(n=e.numberActives);var i;if(e.isLeaf===!1)return!1;e.keys[t];for(i=t;i<n-1;i++)e.keys[i]=e.keys[i+1];e.keys.pop(),e.numberActives--,this._diskWrite(e,function(e){return r(e)})},u.prototype._mergeNodes=function(e,t,r,n){var i,o;for(i=this._allocateNode(),i.isLeaf=!0,o=0;o<e.numberActives;o++)i.keys[o]=e.keys[o],i.children[o]=e.children[o];for(i.children[e.numberActives]=e.children[e.numberActives],i.keys[e.numberActives]=t,o=0;o<r.numberActives;o++)i.keys[o+e.numberActives+1]=r.keys[o],i.children[o+e.numberActives+1]=r.children[o];i.children[2*this.order-1]=r.children[r.numberActives],i.numberActives=e.numberActives+r.numberActives+1,i.isLeaf=e.isLeaf,i.level=e.level;var a=this;this._diskWrite(i,function(t){a._diskDelete(e,function(){a._diskDelete(r,function(){return n(t)})})})},u.prototype.audit=function(e){var t=[],r=[],n=this,i=function(i){for(var o=0;o<r.length;o++)if(0===n.comparator(r[o],i)){var a=" !!! duplicated key "+i;e===!0&&console.log(a),t.push(a)}},o=null,n=this;return this.walkNodes(function(a){e===!0&&(console.log("--- Node at "+a.level+" level"),console.log(" - leaf? "+a.isLeaf),console.log(" - num actives? "+a.numberActives),console.log(" - keys: "));for(var s=a.numberActives;s<a.keys.length;s++)null!=a.keys[s]&&e===!0&&(console.log(" * warning : redundant key data"),t.push(" * warning : redundant key data"));for(var s=a.numberActives+1;s<a.children.length;s++)null!=a.children[s]&&e===!0&&(console.log(" * warning : redundant children data"),t.push(" * warning : redundant key data"));if(a.isLeaf===!1)for(var s=0;s<a.numberActives;s++){var u=this._diskRead(a.children[s]).keys[this._diskRead(a.children[s]).numberActives-1].key,l=this._diskRead(a.children[s+1]).keys[0].key;if(e===!0&&console.log("   "+a.keys[s].key+"("+u+","+l+")"),n.comparator(a.keys[s].key,u)===-1){var c=" !!! value max left "+u+" > key "+a.keys[s].key;e===!0&&console.log(c),t.push(c)}if(1===n.comparator(a.keys[s].key,l)){var c=" !!! value min right "+l+" < key "+a.keys[s].key;e===!0&&console.log(c),t.push(c)}i(a.keys[s].key),r.push(a.keys[s].key)}else{if(null===o)o=a.level;else if(o!=a.level){var c=" !!! Leaf node with wrong level value";e===!0&&console.log(c),t.push(c)}for(var s=0;s<a.numberActives;s++)e===!0&&console.log(" "+a.keys[s].key),i(a.keys[s].key),r.push(a.keys[s].key)}if(a!=n.root){if(a.numberActives>2*n.order-1){if(e===!0)var c=" !!!! MAX num keys restriction violated ";console.log(c),t.push(c)}if(a.numberActives<n.order-1){if(e===!0)var c=" !!!! MIN num keys restriction violated ";console.log(c),t.push(c)}}}),t},u.prototype._getMaxKeyPos=function(e,t,r){var n={};return null===t?r(null):t.isLeaf===!0?(n.node=t,n.index=t.numberActives-1,r(n)):(n.node=t,n.index=t.numberActives-1,e._diskRead(t.children[t.numberActives],function(t){return e._getMaxKeyPos(e,t,r)}),void 0)},u.prototype._getMinKeyPos=function(e,t,r){var n={};return null===t&&r(null),t.isLeaf===!0?(n.node=t,n.index=0,r(n)):(n.node=t,n.index=0,e._diskRead(t.children[0],function(t){return e._getMinKeyPos(e,t,r)}),void 0)};var l=function(){this.numberActives=0,this.isLeaf=null,this.keys=[],this.children=[],this.level=0};t.exports={Tree:u,Node:l}},{"./utils":57}],41:[function(e,t,r){var n=e("./query_engine").QueryEngine,i=e("./quad_backend").QuadBackend,o=e("./persistent_quad_backend").PersistentQuadBackend,a=e("./lexicon").Lexicon,s=e("./persistent_lexicon").PersistentLexicon,u=e("./rdf_model"),l=e("./utils");Store=function(e,t){var r=null,u=null;if(0==arguments.length)u={};else if(1==arguments.length)u={},r=e;else{if(!(arguments.length>1))throw"An optional argument map and a callback must be provided";u=e,r=t}null==u.treeOrder&&(u.treeOrder=15);var l=a,c=i;u.persistent===!0&&(l=s,c=o),this.functionMap={};var f=this;this.customFns={},new l(function(e){var t=function(){new c(u,function(t){var i=function(){u.backend=t,u.lexicon=e,f.engine=new n(u),r(null,f)};u.overwrite?t.clear(i):i()})};u.overwrite===!0?e.clear(t):t()},u.name)},Store.prototype.rdf=u.rdf,Store.prototype.rdf.api=u,Store.prototype.registerCustomFunction=function(e,t){this.customFns[e]=t,this.engine.setCustomFunctions(this.customFns)},Store.prototype.execute=function(){if(3===arguments.length)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2]);else if(4===arguments.length)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2],arguments[3]);else{var e,t;if(1===arguments.length){e=arguments[0];var t=function(){}}else 2===arguments.length&&(e=arguments[0],t=arguments[1]);this.engine.execute(e,t)}},Store.prototype.executeWithEnvironment=function(){var e,t,r;if(3===arguments.length){e=arguments[0];var n=function(){};t=arguments[1],r=arguments[2]}else if(4===arguments.length){e=arguments[0];var n=arguments[3];t=arguments[1],r=arguments[2]}t=l.map(t,function(e){return{token:"uri",value:e}}),r=l.map(r,function(e){return{token:"uri",value:e}}),this.engine.execute(e,n,t,r)},Store.prototype.graph=function(){var e=null,t=null;if(1===arguments.length)t=arguments[0]||function(){},e=this.engine.lexicon.defaultGraphUri;else{if(2!==arguments.length)throw"An optional graph URI and a callback function must be provided";t=arguments[1]||function(){},e=arguments[0]}null!=this.rdf.resolve(e)&&(e=this.rdf.resolve(e)),this.engine.execute("CONSTRUCT { ?s ?p ?o } WHERE { GRAPH <"+e+"> { ?s ?p ?o } }",t)},Store.prototype.node=function(){var e=null,t=null,r=null;if(2===arguments.length)r=arguments[0],t=arguments[1]||function(){},e=this.engine.lexicon.defaultGraphUri;else{if(3!==arguments.length)throw"An optional graph URI, node URI and a callback function must be provided";r=arguments[0],e=arguments[1],t=arguments[2]||function(){}}null!=this.rdf.resolve(e)&&(e=this.rdf.resolve(e)),null!=this.rdf.resolve(r)&&(r=this.rdf.resolve(r)),this.engine.execute("CONSTRUCT { <"+r+"> ?p ?o } WHERE { GRAPH <"+e+"> { <"+r+"> ?p ?o } }",t)},Store.prototype.startObservingNode=function(){var e,t,r;2===arguments.length?(e=arguments[0],r=arguments[1],this.engine.callbacksBackend.observeNode(e,r,function(){})):3===arguments.length&&(e=arguments[0],t=arguments[1],r=arguments[2],this.engine.callbacksBackend.observeNode(e,t,r,function(){}))},Store.prototype.stopObservingNode=function(e){this.engine.callbacksBackend.stopObservingNode(e)},Store.prototype.startObservingQuery=function(){var e=arguments[0],t=arguments[1],r=arguments[2];null!=r?this.engine.callbacksBackend.observeQuery(e,t,r):this.engine.callbacksBackend.observeQuery(e,t,function(){})},Store.prototype.stopObservingQuery=function(e){this.engine.callbacksBackend.stopObservingQuery(e)},Store.prototype.subscribe=function(e,t,r,n,i){var o=this,a=function(e,t){var r=[],n={blanks:{},outCache:{}},a=[];l.each(t,function(e){var t=u.buildRDFResource(e.subject,a,o.engine,n),i=u.buildRDFResource(e.predicate,a,o.engine,n),s=u.buildRDFResource(e.object,a,o.engine,n);null!=t&&null!=i&&null!=s&&(e=new u.Triple(t,i,s),r.push(e))}),i(e,r)};this.functionMap[i]=a,this.engine.callbacksBackend.subscribe(e,t,r,n,a,function(){})},Store.prototype.unsubscribe=function(e){var t=this.functionMap[e];this.engine.callbacksBackend.unsubscribe(t),delete this.functionMap[e]},Store.prototype.setPrefix=function(e,t){this.rdf.setPrefix(e,t)},Store.prototype.setDefaultPrefix=function(e){this.rdf.setDefaultPrefix(e)},Store.prototype.insert=function(){var e,t,r;if(1===arguments.length)t=arguments[0],r=function(){};else if(2===arguments.length)t=arguments[0],r=arguments[1]||function(){};else{if(3!==arguments.length)throw"The triples to insert, an optional graph and callback must be provided";t=arguments[0],e=this.rdf.createNamedNode(arguments[1]),r=arguments[2]||function(){}}var n="",i=this;t.forEach(function(e){n=n+i._nodeToQuery(e.subject)+i._nodeToQuery(e.predicate)+i._nodeToQuery(e.object)+"."}),n=null!=e?"INSERT DATA { GRAPH "+this._nodeToQuery(e)+" { "+n+" } }":"INSERT DATA { "+n+" }",this.engine.execute(n,r)},Store.prototype._nodeToQuery=function(e){if("NamedNode"===e.interfaceName){var t=this.rdf.resolve(e.valueOf());return null!=t?"<"+t+">":"<"+e.valueOf()+">"}return e.toString()},Store.prototype.delete=function(){var e,t,r;if(1===arguments.length)t=arguments[0],r=function(){};else if(2===arguments.length)t=arguments[0],r=arguments[1]||function(){};else{if(3!==arguments.length)throw"The triples to delete, an optional graph and callback must be provided";t=arguments[0],e=this.rdf.createNamedNode(arguments[1]),r=arguments[2]||function(){}}var n="",i=this;t.forEach(function(e){n=n+i._nodeToQuery(e.subject)+i._nodeToQuery(e.predicate)+i._nodeToQuery(e.object)+"."}),n=null!=e?"DELETE DATA { GRAPH "+this._nodeToQuery(e)+" { "+n+" } }":"DELETE DATA { "+n+" }",this.engine.execute(n,r)},Store.prototype.clear=function(){var e,t;if(0===arguments.length){e=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri);var t=function(){}}else if(1===arguments.length)e=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),t=arguments[0]||function(){};else{if(2!==arguments.length)throw"The optional graph and a callback must be provided";e=this.rdf.createNamedNode(arguments[0]),t=arguments[1]||function(){}}var r="CLEAR GRAPH "+this._nodeToQuery(e);this.engine.execute(r,t)},Store.prototype.setBatchLoadEvents=function(e){this.engine.eventsOnBatchLoad=e},Store.prototype.registerDefaultNamespace=function(e,t){this.rdf.prefixes.set(e,t),this.engine.registerDefaultNamespace(e,t)},Store.prototype.registerDefaultProfileNamespaces=function(){var e=this.rdf.prefixes.values();for(var t in e)this.registerDefaultNamespace(t,e[t])},Store.prototype.load=function(){var e,t,r,n,i={};if(3===arguments.length)r=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),e=arguments[0],
t=arguments[1],n=arguments[2]||function(){};else if(4===arguments.length)e=arguments[0],t=arguments[1],i=arguments[2],"string"==typeof i?(r=this.rdf.createNamedNode(i),i={}):(r=this.rdf.createNamedNode(i.graph||this.engine.lexicon.defaultGraphUri),delete i.graph),n=arguments[3]||function(){};else if(2===arguments.length)throw"The mediaType of the parser, the data a callback and an optional graph must be provided";if("remote"===e){t=this.rdf.createNamedNode(t);var o="LOAD <"+t.valueOf()+"> INTO GRAPH <"+r.valueOf()+">";this.engine.execute(o,n)}else{var a=this,s=this.engine.rdfLoader.parsers[e];if(!s)return n(new Error("Cannot find parser for the provided media type:"+e));var u=function(e,t){e?n(e,t):a.engine.batchLoad(t,function(e){null!=e?n(null,e):n(new Error("Erro batch-loading triples."))})},l=[s,{token:"uri",value:r.valueOf()},t,i,u];t&&"string"==typeof t&&0===t.indexOf("file://")?this.engine.rdfLoader.loadFromFile.apply(null,l):this.engine.rdfLoader.tryToParse.apply(null,l)}},Store.prototype.registerParser=function(e,t){this.engine.rdfLoader.registerParser(e,t)},Store.prototype.registeredGraphs=function(e){this.engine.lexicon.registeredGraphs(!0,function(t){var r=l.map(t,function(e){return new u.NamedNode(e)});e(null,r)})},Store.prototype.getNetworkTransport=function(){return NetworkTransport},Store.prototype.setNetworkTransport=function(e){NetworkTransport=e},Store.prototype.close=function(e){null==e&&(e=function(){}),this.engine.close?this.engine.close(e):e()},Store.VERSION="0.9.17";var c=function(){var e;(e=1==arguments.length?arguments[0]:2==arguments.length?arguments[1]:arguments[2])(new Error("Store#connect is not supported in the 0.9.X series of the library"))},f=function(){return 1==arguments.length?new Store(arguments[0]):2==arguments.length?new Store(arguments[0],arguments[1]):new Store};Store.yieldFrequency=function(e){l.yieldFrequency(e)},t.exports.Store=Store,t.exports.create=f,t.exports.connect=c},{"./lexicon":44,"./persistent_lexicon":47,"./persistent_quad_backend":48,"./quad_backend":49,"./query_engine":51,"./rdf_model":55,"./utils":57}],42:[function(e,t,r){var n=e("./utils"),i=e("./utils"),o=(e("./quad_index").QuadIndex,e("./quad_index").Pattern),a=e("./rdf_model"),s=e("./abstract_query_tree").AbstractQueryTree;Callbacks={},Callbacks.ANYTHING={token:"var",value:"_"},Callbacks.added="added",Callbacks.deleted="deleted",Callbacks.eventsFlushed="eventsFlushed",Callbacks.CallbacksBackend=function(){this.aqt=new s,this.engine=arguments[0],this.indexMap={},this.observersMap={},this.queriesIndexMap={},this.emptyNotificationsMap={},this.queriesList=[],this.pendingQueries=[],this.matchedQueries=[],this.updateInProgress=null,this.indices=["SPOG","GP","OGS","POG","GSP","OS"],this.componentOrders={SPOG:["subject","predicate","object","graph"],GP:["graph","predicate","subject","object"],OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate","object"],OS:["object","subject","predicate","graph"]},this.callbackCounter=0,this.callbacksMap={},this.callbacksInverseMap={},this.queryCounter=0,this.queriesMap={},this.queriesCallbacksMap={},this.queriesInverseMap={};for(var e=0;e<this.indices.length;e++){var t=this.indices[e];this.indexMap[t]={},this.queriesIndexMap[t]={}}},Callbacks.CallbacksBackend.prototype.startGraphModification=function(){this.ongoingModification!==!0&&(this.pendingQueries=[].concat(this.queriesList),this.matchedQueries=[],null==this.updateInProgress&&(this.updateInProgress={},this.updateInProgress[Callbacks.added]=[],this.updateInProgress[Callbacks.deleted]=[]))},Callbacks.CallbacksBackend.prototype.nextGraphModification=function(e,t){this.updateInProgress[e].push(t)},Callbacks.CallbacksBackend.prototype.endGraphModification=function(e){if(this.ongoingModification!==!0){var t=this;if(null!=this.updateInProgress){var r=t.updateInProgress;t.updateInProgress=null,this.sendNotification(Callbacks.deleted,r[Callbacks.deleted],function(){t.sendNotification(Callbacks.added,r[Callbacks.added],function(){t.sendEmptyNotification(Callbacks.eventsFlushed,null,function(){t.dispatchQueries(function(){e(!0)})})})})}else e(!0)}else e(!0)},Callbacks.CallbacksBackend.prototype.cancelGraphModification=function(){this.ongoingModification!==!0&&(this.updateInProgress=null)},Callbacks.CallbacksBackend.prototype.sendNotification=function(e,t,r){for(var n={},i=0;i<t.length;i++){var o=t[i];for(var a in this.indexMap){var s=this.indexMap[a],u=this.componentOrders[a];this._searchCallbacksInIndex(s,u,e,o,n),0!=this.pendingQueries.length&&(s=this.queriesIndexMap[a],this._searchQueriesInIndex(s,u,o))}}this.dispatchNotifications(n),null!=r&&r(!0)},Callbacks.CallbacksBackend.prototype.sendEmptyNotification=function(e,t,r){for(var n=this.emptyNotificationsMap[e]||[],i=0;i<n.length;i++)n[i](e,t);r()},Callbacks.CallbacksBackend.prototype.dispatchNotifications=function(e){for(var t in e){var r=this.callbacksMap[t],n=e[t][Callbacks.deleted];if(null!=n)try{r(Callbacks.deleted,n)}catch(e){}for(var i in e[t])if(i!=Callbacks.deleted)try{r(i,e[t][i])}catch(e){}}},Callbacks.CallbacksBackend.prototype._searchCallbacksInIndex=function(e,t,r,n,i){for(var o=n[1],n=n[0],a=0;a<t.length+1;a++){for(var s=e._||[],u=[],l=0;l<s.length;l++){var c=s[l];null!=this.callbacksMap[c]&&(i[c]=i[c]||{},i[c][r]=i[c][r]||[],i[c][r].push(n),u.push(c))}e._=u;var f=t[a];if(null==e[""+o[f]])break;e=e[""+o[f]]}},Callbacks.CallbacksBackend.prototype.subscribeEmpty=function(e,t){var r=this.emptyNotificationsMap[e]||[];r.push(t),this.emptyNotificationsMap[e]=r},Callbacks.CallbacksBackend.prototype.unsubscribeEmpty=function(e,t){var r=this.emptyNotificationsMap[e];null!=r&&(r=n.reject(r,function(e){return e===t})),this.emptyNotificationsMap[e]=r},Callbacks.CallbacksBackend.prototype.subscribe=function(e,t,r,n,i,a){var s=this._tokenizeComponents(e,t,r,n),u={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,u);var l=this;this.engine.normalizeQuad(s,u,!0,function(e){for(var t=new o(e),r=l._indexForPattern(t),n=l.componentOrders[r],s=l.indexMap[r],u=0;u<n.length;u++){var c=n[u],f=e[c];if("_"===f){null==s._&&(s._=[]),l.callbackCounter++,s._.push(l.callbackCounter),l.callbacksMap[l.callbackCounter]=i,l.callbacksInverseMap[i]=l.callbackCounter;break}u===n.length-1?(s[f]=s[f]||{_:[]},l.callbackCounter++,s[f]._.push(l.callbackCounter),l.callbacksMap[l.callbackCounter]=i,l.callbacksInverseMap[i]=l.callbackCounter):(s[f]=s[f]||{},s=s[f])}null!=a&&a(!0)})},Callbacks.CallbacksBackend.prototype.unsubscribe=function(e){var t=this.callbacksInverseMap[e];null!=t&&(delete this.callbacksInverseMap[e],delete this.callbacksMap[t])},Callbacks.CallbacksBackend.prototype._tokenizeComponents=function(e,t,r,n){var i={};return null==e?i.subject=Callbacks.ANYTHING:0==e.indexOf("_:")?i.subject={token:"blank",value:e}:i.subject={token:"uri",value:e},null==t?i.predicate=Callbacks.ANYTHING:i.predicate={token:"uri",value:t},null==r?i.object=Callbacks.ANYTHING:i.object={token:"uri",value:r},null==n?i.graph=Callbacks.ANYTHING:i.graph={token:"uri",value:n},i},Callbacks.CallbacksBackend.prototype._indexForPattern=function(e){for(var t=e.indexKey,r=this.indices,i=0;i<r.length;i++)for(var o=r[i],a=this.componentOrders[o],s=0;s<a.length&&n.include(t,a[s])!==!1;s++)if(s==t.length-1)return o;return"SPOG"},Callbacks.CallbacksBackend.prototype.observeNode=function(){var e,t,r,n;4===arguments.length?(e=arguments[0],t=arguments[1],r=arguments[2],n=arguments[3]):(e=arguments[0],t=this.engine.lexicon.defaultGraphUri,r=arguments[1],n=arguments[2]);var i="CONSTRUCT { <"+e+"> ?p ?o } WHERE { GRAPH <"+t+"> { <"+e+"> ?p ?o } }",o=this,s={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,s);var u=[];this.engine.execute(i,function(t,i){if(t)n&&n(!1);else{var l=i,c=!1,f=function(e,t){if("eventsFlushed"===e&&c){c=!1;try{r(l)}catch(e){}}else if("eventsFlushed"!==e){c=!0;for(var n=0;n<t.length;n++){var i=t[n],f=a.buildRDFResource(i.subject,u,o.engine,s),p=a.buildRDFResource(i.predicate,u,o.engine,s),h=a.buildRDFResource(i.object,u,o.engine,s);null!=f&&null!=p&&null!=h&&(i=new a.Triple(f,p,h),e===Callbacks.added?l.add(i):e===Callbacks.deleted&&l.remove(i))}}};o.observersMap[r]=f,o.subscribeEmpty(Callbacks.eventsFlushed,f),o.subscribe(e,null,null,null,f,function(){try{r(l)}catch(e){}n&&n(!0)})}})},Callbacks.CallbacksBackend.prototype.stopObservingNode=function(e){var t=this.observersMap[e];return!!t&&(this.unsubscribe(t),this.unsubscribeEmpty(Callbacks.eventsFlushed,t),!0)},Callbacks.CallbacksBackend.prototype.observeQuery=function(e,t,r){var n=this.aqt.parseQueryString(e),a=this.aqt.parseSelect(n.units[0]),s=this.aqt.collectBasicTriples(a),u=this,l={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,l);var c=this.queryCounter;this.queryCounter++,this.queriesMap[c]=e,this.queriesInverseMap[e]=c,this.queriesList.push(c),this.queriesCallbacksMap[c]=t,i.eachSeries(s,function(e,t){null==e.graph&&(e.graph=u.engine.lexicon.defaultGraphUriTerm),u.engine.normalizeQuad(e,l,!0,function(e){for(var r=new o(e),n=u._indexForPattern(r),i=u.componentOrders[n],a=u.queriesIndexMap[n],s=0;s<i.length;s++){var l=i[s],f=e[l];if("string"==typeof f){null==a._&&(a._=[]),a._.push(c);break}s===i.length-1?(a[f]=a[f]||{_:[]},a[f]._.push(c)):(a[f]=a[f]||{},a=a[f])}t()})},function(){u.engine.execute(e,function(e,r){e?console.log("ERROR in query callback "+r):t(r)}),null!=r&&r()})},Callbacks.CallbacksBackend.prototype.stopObservingQuery=function(e){var t=this.queriesInverseMap[e];null!=t&&(delete this.queriesInverseMap[e],delete this.queriesMap[t],this.queriesList=n.reject(this.queriesList,function(e){return e===t}))},Callbacks.CallbacksBackend.prototype._searchQueriesInIndex=function(e,t,r){for(var i=r[1],r=r[0],o=0;o<t.length+1;o++){for(var a=e._||[],s=[],u=0;u<a.length;u++){var l=a[u];n.include(this.pendingQueries,l)&&(n.remove(this.pendingQueries,function(e){return e===l}),this.matchedQueries.push(l)),null!=this.queriesMap[l]&&s.push(l)}e._=s;var c=t[o];if(null==e[""+i[c]])break;e=e[""+i[c]]}},Callbacks.CallbacksBackend.prototype.dispatchQueries=function(e){var t,r,n=this,o={};i.eachSeries(this.matchedQueries,function(e,i){null==o[e]?(o[e]=!0,t=n.queriesMap[e],r=n.queriesCallbacksMap[e],n.engine.execute(t,function(e,t){if(!e)try{r(t)}catch(e){}i()})):i()},function(){e()})},Callbacks.CallbacksBackend.added=Callbacks.added,Callbacks.CallbacksBackend.deleted=Callbacks.deleted,Callbacks.CallbacksBackend.eventsFlushed=Callbacks.eventsFlushed,t.exports=Callbacks},{"./abstract_query_tree":39,"./quad_index":50,"./rdf_model":55,"./utils":57}],43:[function(e,t,r){var n=e("jsonld"),i=function(e,t,r){var i=null;n.normalize(e,{},function(e,n){if(e)r(e);else{var o=function(e){return"blank node"===e.type?{blank:e.value}:"IRI"===e.type?{token:"uri",value:e.value}:"literal"===e.type?null!=e.language?{literal:'"'+e.value+'"@'+e.language}:null!==e.datatype?{literal:'"'+e.value+'"^^<'+e.datatype+">"}:{literal:'"'+e.value+'"'}:void 0};i=[];var a=function(e,r,n){i.push({subject:o(e),predicate:o(r),object:o(n),graph:t})};for(var s in n)for(var u=n[s],l=0;l<u.length;l++){var c=u[l];a(c.subject,c.predicate,c.object)}r(null,i)}})};r.JSONLDParser={};var o=r.JSONLDParser;o.parser={async:!0,parse:function(e,t,r,n){try{"string"==typeof e&&(e=JSON.parse(e)),i(e,t,n)}catch(e){n(e)}}},t.exports={JSONLDParser:o}},{jsonld:26}],44:[function(e,t,r){var n=e("./utils"),i=e("./btree").Tree;Lexicon=function(e){var t=this;this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri},this.oidCounter=1,n.seq(function(e){new i(2,function(r){t.uris=r,e()})},function(e){new i(2,function(r){t.literals=r,e()})},function(e){new i(2,function(r){t.knownGraphs=r,e()})},function(e){new i(2,function(r){t.oidUris=r,e()})},function(e){new i(2,function(r){t.oidLiterals=r,e()})},function(e){new i(2,function(r){t.oidBlanks=r,e()})})(function(){null!=e&&e(t)})},Lexicon.prototype.registerGraph=function(e,t,r){e!=this.defaultGraphOid?this.knownGraphs.insert(e,t,function(){r()}):r()},Lexicon.prototype.registeredGraphs=function(e,t){var r=[];this.knownGraphs.walk(function(t){e===!0?r.push(t.data):r.push(t.key)},function(){t(r)})},Lexicon.prototype.registerUri=function(e,t){var r=this;e===this.defaultGraphUri?t(this.defaultGraphOid):this.uris.search(e,function(i){if(null==i){var o=r.oidCounter,a="u"+o;r.oidCounter++,n.seq(function(t){r.uris.insert(e,[o,0],function(){t()})},function(t){r.oidUris.insert(a,e,function(){t()})})(function(){t(o)})}else o=i[0],i[1]=i[1]+1,t(o)})},Lexicon.prototype.resolveUri=function(e,t){e===this.defaultGraphUri?t(this.defaultGraphOid):this.uris.search(e,function(e){t(null!=e?e[0]:-1)})},Lexicon.prototype.resolveUriCost=function(e,t){e===this.defaultGraphUri?t(0):this.uris.search(e,function(e){t(null!=e?e[1]:-1)})},Lexicon.prototype.registerBlank=function(e){var t=this.oidCounter;this.oidCounter++;var r=""+t;this.oidBlanks.insert(r,r,function(){e(t)})},Lexicon.prototype.resolveBlank=function(e,t){var r=this;this.oidBlanks.search(e,function(e){if(null!=e)t(e);else{var n=r.oidCounter;this.oidCounter++,t(""+n)}})},Lexicon.prototype.resolveBlankCost=function(e,t){t(0)},Lexicon.prototype.registerLiteral=function(e,t){var r=this;this.literals.search(e,function(i){if(null==i){var o=r.oidCounter,a="l"+o;r.oidCounter++,n.seq(function(t){r.literals.insert(e,[o,0],function(){t()})},function(t){r.oidLiterals.insert(a,e,function(){t()})})(function(){t(o)})}else{var o=i[0];i[1]=i[1]+1,t(o)}})},Lexicon.prototype.resolveLiteral=function(e,t){this.literals.search(e,function(e){t(null!=e?e[0]:-1)})},Lexicon.prototype.resolveLiteralCost=function(e,t){this.literals.search(e,function(e){t(null!=e?e[1]:-1)})},Lexicon.prototype.parseLiteral=function(e){var t=e.lastIndexOf("@");if(t!=-1&&'"'===e[t-1]&&null!=e.substring(t,e.length).match(/^@[a-zA-Z\-]+$/g)){var r=e.substring(1,t-1),n=e.substring(t+1,e.length);return{token:"literal",value:r,lang:n}}var t=e.lastIndexOf("^^");if(t!=-1&&'"'===e[t-1]&&"<"===e[t+2]&&">"===e[e.length-1]){var r=e.substring(1,t-1),i=e.substring(t+3,e.length-1);return{token:"literal",value:r,type:i}}var r=e.substring(1,e.length-1);return{token:"literal",value:r}},Lexicon.prototype.parseUri=function(e){return{token:"uri",value:e}},Lexicon.prototype.retrieve=function(e,t){var r=this;e===this.defaultGraphOid?t({token:"uri",value:this.defaultGraphUri,prefix:null,suffix:null,defaultGraph:!0}):n.seq(function(t,n){r.oidUris.search("u"+e,function(e){null!=e?n(null,r.parseUri(e)):n(null,null)})},function(t,n){null==t?r.oidLiterals.search("l"+e,function(e){null!=e?n(null,r.parseLiteral(e)):n(null,null)}):n(null,t)},function(t,n){null==t?r.oidBlanks.search(""+e,function(t){null!=t?n(null,{token:"blank",value:"_:"+e}):n(null,null)}):n(null,t)})(null,function(e,r){t(r)})},Lexicon.prototype.clear=function(e){var t=this;this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri},this.oidCounter=1,n.seq(function(e){new i(2,function(r){t.uris=r,e()})},function(e){new i(2,function(r){t.literals=r,e()})},function(e){new i(2,function(r){t.knownGraphs=r,e()})},function(e){new i(2,function(r){t.oidUris=r,e()})},function(e){new i(2,function(r){t.oidLiterals=r,e()})},function(e){new i(2,function(r){t.oidBlanks=r,e()})})(function(){null!=e&&e()})},Lexicon.prototype.unregister=function(e,t,r){var i=this;n.seq(function(r){i._unregisterTerm(e.subject.token,t.subject,r)},function(r){i._unregisterTerm(e.predicate.token,t.predicate,r)},function(r){i._unregisterTerm(e.object.token,t.object,r)},function(r){null!=e.graph?i._unregisterTerm(e.graph.token,t.graph,r):r()})(function(){r(!0)})},Lexicon.prototype._unregisterTerm=function(e,t,r){var i=this;if("uri"===e)if(t!=this.defaultGraphOid){var o="u"+t;i.oidUris.search(o,function(e){i.uris.search(e,function(a){var s=a[1];""+a[0]==""+t?0===s?n.seq(function(e){i.oidUris.delete(o,function(){e()})},function(t){i.uris.delete(e,function(){t()})},function(e){i.knownGraphs.delete(t,function(){e()})})(function(){r()}):i.uris.insert(e,[t,s-1],function(){r()}):r()})})}else r();else if("literal"===e){this.oidCounter++;var o="l"+t;i.oidLiterals.search(o,function(e){i.literals.search(e,function(a){var s=a[1];""+a[0]==""+t?0===s?n.seq(function(e){i.oidLiterals.delete(o,function(){e()})},function(t){i.literals.delete(e,function(){t()})})(function(){r()}):i.literals.insert(e,[t,s-1],function(){r()}):r()})})}else"blank"===e?i.oidBlanks.delete(""+t,function(){r()}):r()},t.exports={Lexicon:Lexicon}},{"./btree":40,"./utils":57}],45:[function(e,t,r){var n=e("./utils");if(!n.isWorker()){var i=e("http"),o=e("https"),a=e("url");NetworkTransport={load:function(e,t,r,n){var s=null==n?3:n,u=a.parse(e,!0,!0),l={host:u.host,hostname:u.hostname,method:"GET",path:u.path,headers:{host:u.hostname,Accept:t}},c=null;"http:"===u.protocol?(l.port=u.port||80,c=i):"https:"===u.protocol&&(l.port=u.port||443,c=o);var f=c.request(l,function(e){var n=e.headers,i="";if("2"==(""+e.statusCode)[0])e.on("end",function(){r(null,{headers:n,data:i})}),e.on("data",function(e){i+=e});else if("3"==(""+e.statusCode)[0])if(0==s)r(new Error("Too many redirections"));else{var o=n.Location||n.location;null!=o?NetworkTransport.load(o,t,r,s-1):r(new Error("Redirection without location header"))}else r(new Error("HTTP error: "+e.statusCode))});f.on("error",r),f.end()}},t.exports={NetworkTransport:NetworkTransport}}},{"./utils":57,http:7,https:22,url:36}],46:[function(e,t,r){t.exports=function(){"use strict";function e(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}function t(e,r,n,i){this.message=e,this.expected=r,this.found=n,this.location=i,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t)}function r(e,r){function n(e,t){return{type:"literal",text:e,ignoreCase:t}}function i(e,t,r){return{type:"class",parts:e,inverted:t,ignoreCase:r}}function o(){return{type:"end"}}function a(e){return{type:"other",description:e}}function s(t){var r,n=Yg[t];if(n)return n;for(r=t-1;!Yg[r];)r--;for(n=Yg[r],n={line:n.line,column:n.column};r<t;)10===e.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return Yg[t]=n,n}function u(e,t){var r=s(e),n=s(t);return{start:{offset:e,line:r.line,column:r.column},end:{offset:t,line:n.line,column:n.column}}}function l(e){Jg<Zg||(Jg>Zg&&(Zg=Jg,ey=[]),ey.push(e))}function c(e,r,n){return new t(t.buildMessage(e,r),e,r,n)}function f(){var e;return e=p()}function p(){var e;return e=h(),e===kr&&(e=U()),e}function h(){var e,t;return ty++,e=d(),ty--,e===kr&&(t=kr,0===ty&&l(Sr)),e}function d(){var e,t,r,n;return ty++,e=Jg,t=v(),t!==kr?(r=m(),r===kr&&(r=x(),r===kr&&(r=$(),r===kr&&(r=k()))),r!==kr?(n=q(),n!==kr?(Kg=e,t=Cr(t,r,n),e=t):(Jg=e,e=kr)):(Jg=e,e=kr)):(Jg=e,e=kr),ty--,e===kr&&(t=kr,0===ty&&l(Ar)),e}function v(){var e,t,r,n,i;if(ty++,e=Jg,t=g(),t===kr&&(t=null),t!==kr){for(r=[],n=lr();n!==kr;)r.push(n),n=lr();if(r!==kr){for(n=[],i=y();i!==kr;)n.push(i),i=y();n!==kr?(Kg=e,t=Tr(t,n),e=t):(Jg=e,e=kr)}else Jg=e,e=kr}else Jg=e,e=kr;return ty--,e===kr&&(t=kr,0===ty&&l(Ir)),e}function g(){var t,r,n,i,o;for(ty++,t=Jg,r=[],n=lr();n!==kr;)r.push(n),n=lr();if(r!==kr)if(e.substr(Jg,4)===Nr?(n=Nr,Jg+=4):(n=kr,0===ty&&l(jr)),n===kr&&(e.substr(Jg,4)===Rr?(n=Rr,Jg+=4):(n=kr,0===ty&&l(Lr))),n!==kr){for(i=[],o=lr();o!==kr;)i.push(o),o=lr();i!==kr?(o=Mt(),o!==kr?(Kg=t,r=Or(o),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(Fr)),t}function y(){var t,r,n,i,o,a,s;for(ty++,t=Jg,r=[],n=lr();n!==kr;)r.push(n),n=lr();if(r!==kr)if(e.substr(Jg,6)===Qr?(n=Qr,Jg+=6):(n=kr,0===ty&&l(Dr)),n===kr&&(e.substr(Jg,6)===Mr?(n=Mr,Jg+=6):(n=kr,0===ty&&l(qr))),n!==kr){for(i=[],o=lr();o!==kr;)i.push(o),o=lr();if(i!==kr)if(o=qt(),o!==kr){for(a=[],s=lr();s!==kr;)a.push(s),s=lr();a!==kr?(s=Mt(),s!==kr?(Kg=t,r=Ur(o,s),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(Pr)),t}function m(){var e,t,r,n,i,o,a,s,u,c;if(ty++,e=Jg,t=w(),t!==kr){for(r=[],n=lr();n!==kr;)r.push(n),n=lr();if(r!==kr){for(n=[],i=E();i!==kr;)n.push(i),i=E();if(n!==kr){for(i=[],o=lr();o!==kr;)i.push(o),o=lr();if(i!==kr)if(o=C(),o!==kr){for(a=[],s=lr();s!==kr;)a.push(s),s=lr();if(a!==kr)if(s=I(),s!==kr){for(u=[],c=lr();c!==kr;)u.push(c),c=lr();u!==kr?(c=D(),c!==kr?(Kg=e,t=Gr(t,n,o,s),e=t):(Jg=e,e=kr)):(Jg=e,e=kr)}else Jg=e,e=kr;else Jg=e,e=kr}else Jg=e,e=kr;else Jg=e,e=kr}else Jg=e,e=kr}else Jg=e,e=kr}else Jg=e,e=kr;return ty--,e===kr&&(t=kr,0===ty&&l(Br)),e}function b(){var e,t,r,n;return ty++,e=Jg,t=w(),t!==kr?(r=C(),r!==kr?(n=I(),n!==kr?(Kg=e,t=Vr(t,r,n),e=t):(Jg=e,e=kr)):(Jg=e,e=kr)):(Jg=e,e=kr),ty--,e===kr&&(t=kr,0===ty&&l(Hr)),e}function w(){var t,r,n,i,o,a,s,u,c,f,p,h,d,v,g,y,m,b,w,x;for(ty++,t=Jg,r=[],n=lr();n!==kr;)r.push(n),n=lr();if(r!==kr)if(e.substr(Jg,6)===Wr?(n=Wr,Jg+=6):(n=kr,0===ty&&l(Xr)),n===kr&&(e.substr(Jg,6)===Jr?(n=Jr,Jg+=6):(n=kr,0===ty&&l(Kr))),n!==kr){for(i=[],o=lr();o!==kr;)i.push(o),o=lr();if(i!==kr)if(e.substr(Jg,8)===Yr?(o=Yr,Jg+=8):(o=kr,0===ty&&l(Zr)),o===kr&&(e.substr(Jg,8)===en?(o=en,Jg+=8):(o=kr,0===ty&&l(tn))),o===kr&&(e.substr(Jg,7)===rn?(o=rn,Jg+=7):(o=kr,0===ty&&l(nn)),o===kr&&(e.substr(Jg,7)===on?(o=on,Jg+=7):(o=kr,0===ty&&l(an)))),o===kr&&(o=null),o!==kr){for(a=[],s=lr();s!==kr;)a.push(s),s=lr();if(a!==kr){for(s=[],u=Jg,c=[],f=lr();f!==kr;)c.push(f),f=lr();if(c!==kr)if(f=ft(),f!==kr){for(p=[],h=lr();h!==kr;)p.push(h),h=lr();p!==kr?(c=[c,f,p],u=c):(Jg=u,u=kr)}else Jg=u,u=kr;else Jg=u,u=kr;if(u===kr){for(u=Jg,c=[],f=lr();f!==kr;)c.push(f),f=lr();if(c!==kr)if(40===e.charCodeAt(Jg)?(f=sn,Jg++):(f=kr,0===ty&&l(un)),f!==kr){for(p=[],h=lr();h!==kr;)p.push(h),h=lr();if(p!==kr)if(h=ht(),h!==kr){for(d=[],v=lr();v!==kr;)d.push(v),v=lr();if(d!==kr)if(e.substr(Jg,2)===ln?(v=ln,Jg+=2):(v=kr,0===ty&&l(cn)),v===kr&&(e.substr(Jg,2)===fn?(v=fn,Jg+=2):(v=kr,0===ty&&l(pn))),v!==kr){for(g=[],y=lr();y!==kr;)g.push(y),y=lr();if(g!==kr)if(y=ft(),y!==kr){for(m=[],b=lr();b!==kr;)m.push(b),b=lr();if(m!==kr)if(41===e.charCodeAt(Jg)?(b=hn,Jg++):(b=kr,0===ty&&l(dn)),b!==kr){for(w=[],x=lr();x!==kr;)w.push(x),x=lr();w!==kr?(c=[c,f,p,h,d,v,g,y,m,b,w],u=c):(Jg=u,u=kr)}else Jg=u,u=kr;else Jg=u,u=kr}else Jg=u,u=kr;else Jg=u,u=kr}else Jg=u,u=kr;else Jg=u,u=kr}else Jg=u,u=kr;else Jg=u,u=kr}else Jg=u,u=kr;else Jg=u,u=kr}if(u!==kr)for(;u!==kr;){for(s.push(u),u=Jg,c=[],f=lr();f!==kr;)c.push(f),f=lr();if(c!==kr)if(f=ft(),f!==kr){for(p=[],h=lr();h!==kr;)p.push(h),h=lr();p!==kr?(c=[c,f,p],u=c):(Jg=u,u=kr)}else Jg=u,u=kr;else Jg=u,u=kr;if(u===kr){for(u=Jg,c=[],f=lr();f!==kr;)c.push(f),f=lr();if(c!==kr)if(40===e.charCodeAt(Jg)?(f=sn,Jg++):(f=kr,0===ty&&l(un)),f!==kr){for(p=[],h=lr();h!==kr;)p.push(h),h=lr();if(p!==kr)if(h=ht(),h!==kr){for(d=[],v=lr();v!==kr;)d.push(v),v=lr();if(d!==kr)if(e.substr(Jg,2)===ln?(v=ln,Jg+=2):(v=kr,0===ty&&l(cn)),v===kr&&(e.substr(Jg,2)===fn?(v=fn,Jg+=2):(v=kr,0===ty&&l(pn))),v!==kr){for(g=[],y=lr();y!==kr;)g.push(y),y=lr();if(g!==kr)if(y=ft(),y!==kr){for(m=[],b=lr();b!==kr;)m.push(b),b=lr();if(m!==kr)if(41===e.charCodeAt(Jg)?(b=hn,Jg++):(b=kr,0===ty&&l(dn)),b!==kr){for(w=[],x=lr();x!==kr;)w.push(x),x=lr();w!==kr?(c=[c,f,p,h,d,v,g,y,m,b,w],u=c):(Jg=u,u=kr)}else Jg=u,u=kr;else Jg=u,u=kr}else Jg=u,u=kr;else Jg=u,u=kr}else Jg=u,u=kr;else Jg=u,u=kr}else Jg=u,u=kr;else Jg=u,u=kr}else Jg=u,u=kr;else Jg=u,u=kr}}else s=kr;if(s===kr){for(s=Jg,u=[],c=lr();c!==kr;)u.push(c),c=lr();if(u!==kr)if(42===e.charCodeAt(Jg)?(c=vn,Jg++):(c=kr,0===ty&&l(gn)),c!==kr){for(f=[],p=lr();p!==kr;)f.push(p),p=lr();f!==kr?(u=[u,c,f],s=u):(Jg=s,s=kr)}else Jg=s,s=kr;else Jg=s,s=kr}s!==kr?(Kg=t,r=yn(o,s),t=r):(Jg=t,t=kr)}else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(zr)),t}function x(){var t,r,n,i,o,a,s,u,c,f,p,h,d,v,g;for(ty++,t=Jg,r=[],n=lr();n!==kr;)r.push(n),n=lr();if(r!==kr)if(e.substr(Jg,9)===bn?(n=bn,Jg+=9):(n=kr,0===ty&&l(wn)),n===kr&&(e.substr(Jg,9)===xn?(n=xn,Jg+=9):(n=kr,0===ty&&l($n))),n!==kr){for(i=[],o=lr();o!==kr;)i.push(o),o=lr();if(i!==kr)if(o=Ie(),o!==kr){for(a=[],s=lr();s!==kr;)a.push(s),s=lr();if(a!==kr){for(s=[],u=E();u!==kr;)s.push(u),u=E();if(s!==kr){for(u=[],c=lr();c!==kr;)u.push(c),c=lr();if(u!==kr)if(c=C(),c!==kr){for(f=[],p=lr();p!==kr;)f.push(p),p=lr();f!==kr?(p=I(),p!==kr?(Kg=t,r=kn(o,s,c,p),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr}else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr;if(t===kr){for(t=Jg,r=[],n=lr();n!==kr;)r.push(n),n=lr();if(r!==kr)if(e.substr(Jg,9)===bn?(n=bn,Jg+=9):(n=kr,0===ty&&l(wn)),n===kr&&(e.substr(Jg,9)===xn?(n=xn,Jg+=9):(n=kr,0===ty&&l($n))),n!==kr){for(i=[],o=lr();o!==kr;)i.push(o),o=lr();if(i!==kr){for(o=[],a=E();a!==kr;)o.push(a),a=E();if(o!==kr){for(a=[],s=lr();s!==kr;)a.push(s),s=lr();if(a!==kr)if(e.substr(Jg,5)===En?(s=En,Jg+=5):(s=kr,0===ty&&l(_n)),s===kr&&(e.substr(Jg,5)===Sn?(s=Sn,Jg+=5):(s=kr,0===ty&&l(An))),s!==kr){for(u=[],c=lr();c!==kr;)u.push(c),c=lr();if(u!==kr)if(123===e.charCodeAt(Jg)?(c=Cn,Jg++):(c=kr,0===ty&&l(In)),c!==kr){for(f=[],p=lr();p!==kr;)f.push(p),p=lr();if(f!==kr)if(p=ue(),p===kr&&(p=null),p!==kr){for(h=[],d=lr();d!==kr;)h.push(d),d=lr();if(h!==kr)if(125===e.charCodeAt(Jg)?(d=Tn,Jg++):(d=kr,0===ty&&l(Fn)),d!==kr){for(v=[],g=lr();g!==kr;)v.push(g),g=lr();v!==kr?(g=I(),g!==kr?(Kg=t,r=Nn(o,p,g),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr}else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}return ty--,t===kr&&(r=kr,0===ty&&l(mn)),t}function $(){var t,r,n,i,o,a;if(ty++,t=Jg,e.substr(Jg,8)===Rn?(r=Rn,Jg+=8):(r=kr,0===ty&&l(Ln)),r!==kr){if(n=[],i=ct(),i!==kr)for(;i!==kr;)n.push(i),i=ct();else n=kr;if(n===kr&&(42===e.charCodeAt(Jg)?(n=vn,Jg++):(n=kr,0===ty&&l(gn))),n!==kr){for(i=[],o=E();o!==kr;)i.push(o),o=E();i!==kr?(o=C(),o===kr&&(o=null),o!==kr?(a=I(),a!==kr?(r=[r,n,i,o,a],t=r):(Jg=t,t=kr)):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(jn)),t}function k(){var t,r,n,i,o,a,s;for(ty++,t=Jg,r=[],n=lr();n!==kr;)r.push(n),n=lr();if(r!==kr)if(e.substr(Jg,3)===Pn?(n=Pn,Jg+=3):(n=kr,0===ty&&l(Qn)),n===kr&&(e.substr(Jg,3)===Dn?(n=Dn,Jg+=3):(n=kr,0===ty&&l(Mn))),n!==kr){for(i=[],o=lr();o!==kr;)i.push(o),o=lr();if(i!==kr){for(o=[],a=E();a!==kr;)o.push(a),a=E();if(o!==kr){for(a=[],s=lr();s!==kr;)a.push(s),s=lr();a!==kr?(s=C(),s!==kr?(Kg=t,r=qn(o,s),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr}else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(On)),t}function E(){var t,r,n,i,o,a;if(ty++,t=Jg,e.substr(Jg,4)===Bn?(r=Bn,Jg+=4):(r=kr,0===ty&&l(Gn)),r===kr&&(e.substr(Jg,4)===Hn?(r=Hn,Jg+=4):(r=kr,0===ty&&l(Vn))),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();if(n!==kr)if(i=_(),i===kr&&(i=S()),i!==kr){for(o=[],a=lr();a!==kr;)o.push(a),a=lr();o!==kr?(Kg=t,r=zn(i),t=r):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(Un)),t}function _(){var e,t,r;for(ty++,e=Jg,t=[],r=lr();r!==kr;)t.push(r),r=lr();return t!==kr?(r=A(),r!==kr?(Kg=e,t=Xn(r),e=t):(Jg=e,e=kr)):(Jg=e,e=kr),ty--,e===kr&&(t=kr,0===ty&&l(Wn)),e}function S(){var t,r,n,i;if(ty++,t=Jg,e.substr(Jg,5)===Kn?(r=Kn,Jg+=5):(r=kr,0===ty&&l(Yn)),r===kr&&(e.substr(Jg,5)===Zn?(r=Zn,Jg+=5):(r=kr,0===ty&&l(ei))),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();n!==kr?(i=A(),i!==kr?(Kg=t,r=ti(i),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(Jn)),t}function A(){var e,t;return ty++,e=Pt(),ty--,e===kr&&(t=kr,0===ty&&l(ri)),e}function C(){var t,r,n,i,o,a;if(ty++,t=Jg,e.substr(Jg,5)===En?(r=En,Jg+=5):(r=kr,0===ty&&l(_n)),r===kr&&(e.substr(Jg,5)===Sn?(r=Sn,Jg+=5):(r=kr,0===ty&&l(An))),r===kr&&(r=null),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();if(n!==kr)if(i=le(),i!==kr){for(o=[],a=lr();a!==kr;)o.push(a),a=lr();o!==kr?(Kg=t,r=ii(i),t=r):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(ni)),t}function I(){var e,t,r,n,i;return ty++,e=Jg,t=T(),t===kr&&(t=null),t!==kr?(r=N(),r===kr&&(r=null),r!==kr?(n=R(),n===kr&&(n=null),n!==kr?(i=O(),i===kr&&(i=null),i!==kr?(Kg=e,t=ai(t,n,i),e=t):(Jg=e,e=kr)):(Jg=e,e=kr)):(Jg=e,e=kr)):(Jg=e,e=kr),ty--,e===kr&&(t=kr,0===ty&&l(oi)),e}function T(){var t,r,n,i,o,a,s;if(ty++,t=Jg,e.substr(Jg,5)===ui?(r=ui,Jg+=5):(r=kr,0===ty&&l(li)),r===kr&&(e.substr(Jg,5)===ci?(r=ci,Jg+=5):(r=kr,0===ty&&l(fi))),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();if(n!==kr)if(e.substr(Jg,2)===pi?(i=pi,Jg+=2):(i=kr,0===ty&&l(hi)),i===kr&&(e.substr(Jg,2)===di?(i=di,Jg+=2):(i=kr,0===ty&&l(vi))),i!==kr){for(o=[],a=lr();a!==kr;)o.push(a),a=lr();if(o!==kr){if(a=[],s=F(),s!==kr)for(;s!==kr;)a.push(s),s=F();else a=kr;a!==kr?(Kg=t,r=gi(a),t=r):(Jg=t,t=kr)}else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(si)),t}function F(){var t,r,n,i,o,a,s,u,c,f,p;for(ty++,t=Jg,r=[],n=lr();n!==kr;)r.push(n),n=lr();if(r!==kr)if(n=Et(),n!==kr){for(i=[],o=lr();o!==kr;)i.push(o),o=lr();i!==kr?(Kg=t,r=mi(n),t=r):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr;if(t===kr){for(t=Jg,r=[],n=lr();n!==kr;)r.push(n),n=lr();if(r!==kr)if(n=Se(),n!==kr){for(i=[],o=lr();o!==kr;)i.push(o),o=lr();i!==kr?(Kg=t,r=bi(n),t=r):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr;if(t===kr){for(t=Jg,r=[],n=lr();n!==kr;)r.push(n),n=lr();if(r!==kr)if(40===e.charCodeAt(Jg)?(n=sn,Jg++):(n=kr,0===ty&&l(un)),n!==kr){for(i=[],o=lr();o!==kr;)i.push(o),o=lr();if(i!==kr)if(o=ht(),o!==kr){for(a=[],s=lr();s!==kr;)a.push(s),s=lr();if(a!==kr){if(s=Jg,e.substr(Jg,2)===ln?(u=ln,Jg+=2):(u=kr,0===ty&&l(cn)),u===kr&&(e.substr(Jg,2)===fn?(u=fn,Jg+=2):(u=kr,0===ty&&l(pn))),u!==kr){for(c=[],f=lr();f!==kr;)c.push(f),f=lr();c!==kr?(f=ft(),f!==kr?(u=[u,c,f],s=u):(Jg=s,s=kr)):(Jg=s,s=kr)}else Jg=s,s=kr;if(s===kr&&(s=null),s!==kr){for(u=[],c=lr();c!==kr;)u.push(c),c=lr();if(u!==kr)if(41===e.charCodeAt(Jg)?(c=hn,Jg++):(c=kr,0===ty&&l(dn)),c!==kr){for(f=[],p=lr();p!==kr;)f.push(p),p=lr();f!==kr?(Kg=t,r=wi(o,s),t=r):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr}else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr;if(t===kr){for(t=Jg,r=[],n=lr();n!==kr;)r.push(n),n=lr();if(r!==kr)if(n=ft(),n!==kr){for(i=[],o=lr();o!==kr;)i.push(o),o=lr();i!==kr?(Kg=t,r=xi(n),t=r):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr}}}return ty--,t===kr&&(r=kr,0===ty&&l(yi)),t}function N(){var t,r,n,i;if(ty++,t=Jg,e.substr(Jg,6)===ki?(r=ki,Jg+=6):(r=kr,0===ty&&l(Ei)),r!==kr){if(n=[],i=j(),i!==kr)for(;i!==kr;)n.push(i),i=j();else n=kr;n!==kr?(r=[r,n],t=r):(Jg=t,t=kr)}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l($i)),t}function j(){var e,t;return ty++,e=we(),ty--,e===kr&&(t=kr,0===ty&&l(_i)),e}function R(){var t,r,n,i,o,a,s,u;if(ty++,t=Jg,e.substr(Jg,5)===Ai?(r=Ai,Jg+=5):(r=kr,0===ty&&l(Ci)),r===kr&&(e.substr(Jg,5)===Ii?(r=Ii,Jg+=5):(r=kr,0===ty&&l(Ti))),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();if(n!==kr)if(e.substr(Jg,2)===pi?(i=pi,Jg+=2):(i=kr,0===ty&&l(hi)),i===kr&&(e.substr(Jg,2)===di?(i=di,Jg+=2):(i=kr,0===ty&&l(vi))),i!==kr){for(o=[],a=lr();a!==kr;)o.push(a),a=lr();if(o!==kr){if(a=[],s=L(),s!==kr)for(;s!==kr;)a.push(s),s=L();else a=kr;if(a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();s!==kr?(Kg=t,r=Fi(a),t=r):(Jg=t,t=kr)}else Jg=t,t=kr}else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(Si)),t}function L(){var t,r,n,i,o,a;if(ty++,t=Jg,e.substr(Jg,3)===ji?(r=ji,Jg+=3):(r=kr,0===ty&&l(Ri)),r===kr&&(e.substr(Jg,3)===Li?(r=Li,Jg+=3):(r=kr,0===ty&&l(Oi)),r===kr&&(e.substr(Jg,4)===Pi?(r=Pi,Jg+=4):(r=kr,0===ty&&l(Qi)),r===kr&&(e.substr(Jg,4)===Di?(r=Di,Jg+=4):(r=kr,0===ty&&l(Mi))))),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();if(n!==kr)if(i=kt(),i!==kr){for(o=[],
a=lr();a!==kr;)o.push(a),a=lr();o!==kr?(Kg=t,r=qi(r,i),t=r):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;if(t===kr)if(t=Jg,r=we(),r===kr&&(r=ft()),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();n!==kr?(Kg=t,r=Ui(r),t=r):(Jg=t,t=kr)}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(Ni)),t}function O(){var e,t,r,n;return ty++,e=Jg,t=Jg,r=P(),r!==kr?(n=Q(),n===kr&&(n=null),n!==kr?(r=[r,n],t=r):(Jg=t,t=kr)):(Jg=t,t=kr),t===kr&&(t=Jg,r=Q(),r!==kr?(n=P(),n===kr&&(n=null),n!==kr?(r=[r,n],t=r):(Jg=t,t=kr)):(Jg=t,t=kr)),t!==kr&&(Kg=e,t=Gi(t)),e=t,ty--,e===kr&&(t=kr,0===ty&&l(Bi)),e}function P(){var t,r,n,i,o,a;if(ty++,t=Jg,e.substr(Jg,5)===Vi?(r=Vi,Jg+=5):(r=kr,0===ty&&l(zi)),r===kr&&(e.substr(Jg,5)===Wi?(r=Wi,Jg+=5):(r=kr,0===ty&&l(Xi))),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();if(n!==kr)if(i=zt(),i!==kr){for(o=[],a=lr();a!==kr;)o.push(a),a=lr();o!==kr?(Kg=t,r=Ji(i),t=r):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(Hi)),t}function Q(){var t,r,n,i,o,a;if(ty++,t=Jg,e.substr(Jg,6)===Yi?(r=Yi,Jg+=6):(r=kr,0===ty&&l(Zi)),r===kr&&(e.substr(Jg,6)===eo?(r=eo,Jg+=6):(r=kr,0===ty&&l(to))),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();if(n!==kr)if(i=zt(),i!==kr){for(o=[],a=lr();a!==kr;)o.push(a),a=lr();o!==kr?(Kg=t,r=ro(i),t=r):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(Ki)),t}function D(){var t,r,n,i,o,a,s,u,c;if(ty++,t=Jg,e.substr(Jg,8)===io?(r=io,Jg+=8):(r=kr,0===ty&&l(oo)),r!==kr){for(n=[],i=ft();i!==kr;)n.push(i),i=ft();if(n!==kr)if(123===e.charCodeAt(Jg)?(i=Cn,Jg++):(i=kr,0===ty&&l(In)),i!==kr){if(o=[],a=Jg,40===e.charCodeAt(Jg)?(s=sn,Jg++):(s=kr,0===ty&&l(un)),s!==kr){if(u=[],c=M(),c!==kr)for(;c!==kr;)u.push(c),c=M();else u=kr;u!==kr?(41===e.charCodeAt(Jg)?(c=hn,Jg++):(c=kr,0===ty&&l(dn)),c!==kr?(s=[s,u,c],a=s):(Jg=a,a=kr)):(Jg=a,a=kr)}else Jg=a,a=kr;for(a===kr&&(a=ur());a!==kr;){if(o.push(a),a=Jg,40===e.charCodeAt(Jg)?(s=sn,Jg++):(s=kr,0===ty&&l(un)),s!==kr){if(u=[],c=M(),c!==kr)for(;c!==kr;)u.push(c),c=M();else u=kr;u!==kr?(41===e.charCodeAt(Jg)?(c=hn,Jg++):(c=kr,0===ty&&l(dn)),c!==kr?(s=[s,u,c],a=s):(Jg=a,a=kr)):(Jg=a,a=kr)}else Jg=a,a=kr;a===kr&&(a=ur())}o!==kr?(125===e.charCodeAt(Jg)?(a=Tn,Jg++):(a=kr,0===ty&&l(Fn)),a!==kr?(r=[r,n,i,o,a],t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;return t===kr&&(t=null),ty--,t===kr&&(r=kr,0===ty&&l(no)),t}function M(){var t,r;return ty++,t=Pt(),t===kr&&(t=Tt(),t===kr&&(t=Ft(),t===kr&&(t=Lt(),t===kr&&(e.substr(Jg,5)===so?(t=so,Jg+=5):(t=kr,0===ty&&l(uo)))))),ty--,t===kr&&(r=kr,0===ty&&l(ao)),t}function q(){var t,r,n,i;return ty++,t=Jg,r=Jg,e.substr(Jg,6)===co?(n=co,Jg+=6):(n=kr,0===ty&&l(fo)),n===kr&&(e.substr(Jg,6)===po?(n=po,Jg+=6):(n=kr,0===ty&&l(ho))),n!==kr?(i=$e(),i!==kr?(n=[n,i],r=n):(Jg=r,r=kr)):(Jg=r,r=kr),r===kr&&(r=null),r!==kr&&(Kg=t,r=vo(r)),t=r,ty--,t===kr&&(r=kr,0===ty&&l(lo)),t}function U(){var e,t;return ty++,e=B(),ty--,e===kr&&(t=kr,0===ty&&l(go)),e}function B(){var t,r,n,i,o,a,s,u,c;if(ty++,t=Jg,r=v(),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();if(n!==kr)if(i=G(),i!==kr){for(o=Jg,a=[],s=lr();s!==kr;)a.push(s),s=lr();if(a!==kr)if(59===e.charCodeAt(Jg)?(s=mo,Jg++):(s=kr,0===ty&&l(bo)),s!==kr){for(u=[],c=lr();c!==kr;)u.push(c),c=lr();u!==kr?(c=B(),c===kr&&(c=null),c!==kr?(a=[a,s,u,c],o=a):(Jg=o,o=kr)):(Jg=o,o=kr)}else Jg=o,o=kr;else Jg=o,o=kr;o===kr&&(o=null),o!==kr?(Kg=t,r=wo(r,i,o),t=r):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(yo)),t}function G(){var e,t;return ty++,e=H(),e===kr&&(e=V(),e===kr&&(e=z(),e===kr&&(e=W(),e===kr&&(e=X(),e===kr&&(e=J(),e===kr&&(e=K(),e===kr&&(e=Y()))))))),ty--,e===kr&&(t=kr,0===ty&&l(xo)),e}function H(){var t,r,n,i,o,a,s,u,c;if(ty++,t=Jg,e.substr(Jg,4)===ko?(r=ko,Jg+=4):(r=kr,0===ty&&l(Eo)),r===kr&&(e.substr(Jg,4)===_o?(r=_o,Jg+=4):(r=kr,0===ty&&l(So))),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();if(n!==kr)if(i=Pt(),i!==kr){for(o=[],a=lr();a!==kr;)o.push(a),a=lr();if(o!==kr){if(a=Jg,e.substr(Jg,4)===Ao?(s=Ao,Jg+=4):(s=kr,0===ty&&l(Co)),s===kr&&(e.substr(Jg,4)===Io?(s=Io,Jg+=4):(s=kr,0===ty&&l(To))),s!==kr){for(u=[],c=lr();c!==kr;)u.push(c),c=lr();u!==kr?(c=re(),c!==kr?(s=[s,u,c],a=s):(Jg=a,a=kr)):(Jg=a,a=kr)}else Jg=a,a=kr;a===kr&&(a=null),a!==kr?(Kg=t,r=Fo(i,a),t=r):(Jg=t,t=kr)}else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l($o)),t}function V(){var t,r,n,i,o,a;if(ty++,t=Jg,e.substr(Jg,5)===jo?(r=jo,Jg+=5):(r=kr,0===ty&&l(Ro)),r===kr&&(e.substr(Jg,5)===Lo?(r=Lo,Jg+=5):(r=kr,0===ty&&l(Oo))),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();if(n!==kr)if(e.substr(Jg,6)===Po?(i=Po,Jg+=6):(i=kr,0===ty&&l(Qo)),i===kr&&(e.substr(Jg,6)===Do?(i=Do,Jg+=6):(i=kr,0===ty&&l(Mo))),i===kr&&(i=null),i!==kr){for(o=[],a=lr();a!==kr;)o.push(a),a=lr();o!==kr?(a=ne(),a!==kr?(Kg=t,r=qo(a),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(No)),t}function z(){var t,r,n,i,o,a;if(ty++,t=Jg,e.substr(Jg,4)===Bo?(r=Bo,Jg+=4):(r=kr,0===ty&&l(Go)),r===kr&&(e.substr(Jg,4)===Ho?(r=Ho,Jg+=4):(r=kr,0===ty&&l(Vo))),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();if(n!==kr)if(e.substr(Jg,6)===Po?(i=Po,Jg+=6):(i=kr,0===ty&&l(Qo)),i===kr&&(e.substr(Jg,6)===Do?(i=Do,Jg+=6):(i=kr,0===ty&&l(Mo))),i===kr&&(i=null),i!==kr){for(o=[],a=lr();a!==kr;)o.push(a),a=lr();o!==kr?(a=ne(),a!==kr?(Kg=t,r=zo(a),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(Uo)),t}function W(){var t,r,n,i,o,a;if(ty++,t=Jg,e.substr(Jg,6)===Xo?(r=Xo,Jg+=6):(r=kr,0===ty&&l(Jo)),r===kr&&(e.substr(Jg,6)===Ko?(r=Ko,Jg+=6):(r=kr,0===ty&&l(Yo))),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();if(n!==kr)if(e.substr(Jg,6)===Po?(i=Po,Jg+=6):(i=kr,0===ty&&l(Qo)),i===kr&&(e.substr(Jg,6)===Do?(i=Do,Jg+=6):(i=kr,0===ty&&l(Mo))),i===kr&&(i=null),i!==kr){for(o=[],a=lr();a!==kr;)o.push(a),a=lr();o!==kr?(a=re(),a!==kr?(Kg=t,r=Zo(a),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(Wo)),t}function X(){var t,r,n,i,o,a;if(ty++,t=Jg,e.substr(Jg,6)===ta?(r=ta,Jg+=6):(r=kr,0===ty&&l(ra)),r===kr&&(e.substr(Jg,6)===na?(r=na,Jg+=6):(r=kr,0===ty&&l(ia))),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();if(n!==kr)if(e.substr(Jg,4)===oa?(i=oa,Jg+=4):(i=kr,0===ty&&l(aa)),i===kr&&(e.substr(Jg,4)===sa?(i=sa,Jg+=4):(i=kr,0===ty&&l(ua))),i!==kr){for(o=[],a=lr();a!==kr;)o.push(a),a=lr();o!==kr?(a=oe(),a!==kr?(Kg=t,r=la(a),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(ea)),t}function J(){var t,r,n,i,o;if(ty++,t=Jg,e.substr(Jg,6)===fa?(r=fa,Jg+=6):(r=kr,0===ty&&l(pa)),r===kr&&(e.substr(Jg,6)===ha?(r=ha,Jg+=6):(r=kr,0===ty&&l(da))),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();n!==kr?(e.substr(Jg,4)===oa?(i=oa,Jg+=4):(i=kr,0===ty&&l(aa)),i===kr&&(e.substr(Jg,4)===sa?(i=sa,Jg+=4):(i=kr,0===ty&&l(ua))),i!==kr?(o=oe(),o!==kr?(Kg=t,r=va(o),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(ca)),t}function K(){var t,r,n,i,o,a;if(ty++,t=Jg,e.substr(Jg,6)===fa?(r=fa,Jg+=6):(r=kr,0===ty&&l(pa)),r===kr&&(e.substr(Jg,6)===ha?(r=ha,Jg+=6):(r=kr,0===ty&&l(da))),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();if(n!==kr)if(e.substr(Jg,5)===En?(i=En,Jg+=5):(i=kr,0===ty&&l(_n)),i===kr&&(e.substr(Jg,5)===Sn?(i=Sn,Jg+=5):(i=kr,0===ty&&l(An))),i!==kr){for(o=[],a=lr();a!==kr;)o.push(a),a=lr();o!==kr?(a=le(),a!==kr?(Kg=t,r=ya(a),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(ga)),t}function Y(){var t,r,n,i,o,a,s,u,c,f,p,h;if(ty++,t=Jg,r=Jg,e.substr(Jg,4)===ba?(n=ba,Jg+=4):(n=kr,0===ty&&l(wa)),n===kr&&(e.substr(Jg,4)===xa?(n=xa,Jg+=4):(n=kr,0===ty&&l($a))),n!==kr){for(i=[],o=lr();o!==kr;)i.push(o),o=lr();i!==kr?(o=Pt(),o!==kr?(n=[n,i,o],r=n):(Jg=r,r=kr)):(Jg=r,r=kr)}else Jg=r,r=kr;if(r===kr&&(r=null),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();if(n!==kr){if(i=Jg,o=Z(),o!==kr){for(a=[],s=lr();s!==kr;)a.push(s),s=lr();a!==kr?(s=ee(),s===kr&&(s=null),s!==kr?(o=[o,a,s],i=o):(Jg=i,i=kr)):(Jg=i,i=kr)}else Jg=i,i=kr;if(i===kr&&(i=ee()),i!==kr){for(o=[],a=lr();a!==kr;)o.push(a),a=lr();if(o!==kr){for(a=[],s=te();s!==kr;)a.push(s),s=te();if(a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();if(s!==kr)if(e.substr(Jg,5)===En?(u=En,Jg+=5):(u=kr,0===ty&&l(_n)),u===kr&&(e.substr(Jg,5)===Sn?(u=Sn,Jg+=5):(u=kr,0===ty&&l(An))),u!==kr){for(c=[],f=lr();f!==kr;)c.push(f),f=lr();if(c!==kr)if(f=le(),f!==kr){for(p=[],h=lr();h!==kr;)p.push(h),h=lr();p!==kr?(Kg=t,r=ka(r,i,a,f),t=r):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr}else Jg=t,t=kr}else Jg=t,t=kr}else Jg=t,t=kr}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(ma)),t}function Z(){var t,r,n;return ty++,t=Jg,e.substr(Jg,6)===fa?(r=fa,Jg+=6):(r=kr,0===ty&&l(pa)),r===kr&&(e.substr(Jg,6)===ha?(r=ha,Jg+=6):(r=kr,0===ty&&l(da))),r!==kr?(n=ie(),n!==kr?(Kg=t,r=_a(n),t=r):(Jg=t,t=kr)):(Jg=t,t=kr),ty--,t===kr&&(r=kr,0===ty&&l(Ea)),t}function ee(){var t,r,n;return ty++,t=Jg,e.substr(Jg,6)===ta?(r=ta,Jg+=6):(r=kr,0===ty&&l(ra)),r===kr&&(e.substr(Jg,6)===na?(r=na,Jg+=6):(r=kr,0===ty&&l(ia))),r!==kr?(n=ie(),n!==kr?(Kg=t,r=_a(n),t=r):(Jg=t,t=kr)):(Jg=t,t=kr),ty--,t===kr&&(r=kr,0===ty&&l(Sa)),t}function te(){var t,r,n,i,o,a,s,u;for(ty++,t=Jg,r=[],n=lr();n!==kr;)r.push(n),n=lr();if(r!==kr)if(e.substr(Jg,5)===Ca?(n=Ca,Jg+=5):(n=kr,0===ty&&l(Ia)),n===kr&&(e.substr(Jg,5)===Ta?(n=Ta,Jg+=5):(n=kr,0===ty&&l(Fa))),n!==kr){for(i=[],o=lr();o!==kr;)i.push(o),o=lr();if(i!==kr){if(o=Pt(),o===kr)if(o=Jg,e.substr(Jg,5)===Kn?(a=Kn,Jg+=5):(a=kr,0===ty&&l(Yn)),a===kr&&(e.substr(Jg,5)===Zn?(a=Zn,Jg+=5):(a=kr,0===ty&&l(ei))),a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();s!==kr?(u=Pt(),u!==kr?(a=[a,s,u],o=a):(Jg=o,o=kr)):(Jg=o,o=kr)}else Jg=o,o=kr;o!==kr?(Kg=t,r=Na(o),t=r):(Jg=t,t=kr)}else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(Aa)),t}function re(){var t,r,n,i;if(ty++,t=Jg,e.substr(Jg,5)===Ra?(r=Ra,Jg+=5):(r=kr,0===ty&&l(La)),r===kr&&(e.substr(Jg,5)===Oa?(r=Oa,Jg+=5):(r=kr,0===ty&&l(Pa))),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();n!==kr?(i=Pt(),i!==kr?(Kg=t,r=Qa(i),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(ja)),t}function ne(){var t,r;return ty++,t=Jg,r=re(),r!==kr&&(Kg=t,r=ii(r)),t=r,t===kr&&(t=Jg,e.substr(Jg,7)===Ma?(r=Ma,Jg+=7):(r=kr,0===ty&&l(qa)),r===kr&&(e.substr(Jg,7)===Ua?(r=Ua,Jg+=7):(r=kr,0===ty&&l(Ba))),r!==kr&&(Kg=t,r=Ga()),t=r,t===kr&&(t=Jg,e.substr(Jg,5)===Kn?(r=Kn,Jg+=5):(r=kr,0===ty&&l(Yn)),r===kr&&(e.substr(Jg,5)===Zn?(r=Zn,Jg+=5):(r=kr,0===ty&&l(ei))),r!==kr&&(Kg=t,r=Ha()),t=r,t===kr&&(t=Jg,e.substr(Jg,3)===Va?(r=Va,Jg+=3):(r=kr,0===ty&&l(za)),r===kr&&(e.substr(Jg,3)===Wa?(r=Wa,Jg+=3):(r=kr,0===ty&&l(Xa))),r!==kr&&(Kg=t,r=Ja()),t=r))),ty--,t===kr&&(r=kr,0===ty&&l(Da)),t}function ie(){var t,r,n,i,o,a,s,u,c;for(ty++,t=Jg,r=[],n=lr();n!==kr;)r.push(n),n=lr();if(r!==kr)if(123===e.charCodeAt(Jg)?(n=Cn,Jg++):(n=kr,0===ty&&l(In)),n!==kr){for(i=[],o=lr();o!==kr;)i.push(o),o=lr();if(i!==kr)if(o=ae(),o!==kr){for(a=[],s=lr();s!==kr;)a.push(s),s=lr();if(a!==kr)if(125===e.charCodeAt(Jg)?(s=Tn,Jg++):(s=kr,0===ty&&l(Fn)),s!==kr){for(u=[],c=lr();c!==kr;)u.push(c),c=lr();u!==kr?(Kg=t,r=Ya(o),t=r):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(Ka)),t}function oe(){var t,r,n,i,o,a,s,u,c;for(ty++,t=Jg,r=[],n=lr();n!==kr;)r.push(n),n=lr();if(r!==kr)if(123===e.charCodeAt(Jg)?(n=Cn,Jg++):(n=kr,0===ty&&l(In)),n!==kr){for(i=[],o=lr();o!==kr;)i.push(o),o=lr();if(i!==kr)if(o=ae(),o!==kr){for(a=[],s=lr();s!==kr;)a.push(s),s=lr();if(a!==kr)if(125===e.charCodeAt(Jg)?(s=Tn,Jg++):(s=kr,0===ty&&l(Fn)),s!==kr){for(u=[],c=lr();c!==kr;)u.push(c),c=lr();u!==kr?(Kg=t,r=Ya(o),t=r):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(Za)),t}function ae(){var t,r,n,i,o,a,s;if(ty++,t=Jg,r=ue(),r===kr&&(r=null),r!==kr){for(n=[],i=Jg,o=se(),o!==kr?(46===e.charCodeAt(Jg)?(a=ts,Jg++):(a=kr,0===ty&&l(rs)),a===kr&&(a=null),a!==kr?(s=ue(),s===kr&&(s=null),s!==kr?(o=[o,a,s],i=o):(Jg=i,i=kr)):(Jg=i,i=kr)):(Jg=i,i=kr);i!==kr;)n.push(i),i=Jg,o=se(),o!==kr?(46===e.charCodeAt(Jg)?(a=ts,Jg++):(a=kr,0===ty&&l(rs)),a===kr&&(a=null),a!==kr?(s=ue(),s===kr&&(s=null),s!==kr?(o=[o,a,s],i=o):(Jg=i,i=kr)):(Jg=i,i=kr)):(Jg=i,i=kr);n!==kr?(Kg=t,r=ns(r,n),t=r):(Jg=t,t=kr)}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(es)),t}function se(){var t,r,n,i,o,a,s,u,c,f,p,h,d;for(ty++,t=Jg,r=[],n=lr();n!==kr;)r.push(n),n=lr();if(r!==kr)if(e.substr(Jg,5)===Ra?(n=Ra,Jg+=5):(n=kr,0===ty&&l(La)),n===kr&&(e.substr(Jg,5)===Oa?(n=Oa,Jg+=5):(n=kr,0===ty&&l(Pa))),n!==kr){for(i=[],o=lr();o!==kr;)i.push(o),o=lr();if(i!==kr)if(o=ct(),o!==kr){for(a=[],s=lr();s!==kr;)a.push(s),s=lr();if(a!==kr)if(123===e.charCodeAt(Jg)?(s=Cn,Jg++):(s=kr,0===ty&&l(In)),s!==kr){for(u=[],c=lr();c!==kr;)u.push(c),c=lr();if(u!==kr)if(c=ue(),c===kr&&(c=null),c!==kr){for(f=[],p=lr();p!==kr;)f.push(p),p=lr();if(f!==kr)if(125===e.charCodeAt(Jg)?(p=Tn,Jg++):(p=kr,0===ty&&l(Fn)),p!==kr){for(h=[],d=lr();d!==kr;)h.push(d),d=lr();h!==kr?(Kg=t,r=os(o,c),t=r):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(is)),t}function ue(){var t,r,n,i,o,a,s;if(ty++,t=Jg,r=Fe(),r!==kr){for(n=Jg,i=[],o=lr();o!==kr;)i.push(o),o=lr();if(i!==kr)if(46===e.charCodeAt(Jg)?(o=ts,Jg++):(o=kr,0===ty&&l(rs)),o!==kr){for(a=[],s=lr();s!==kr;)a.push(s),s=lr();a!==kr?(s=ue(),s===kr&&(s=null),s!==kr?(i=[i,o,a,s],n=i):(Jg=n,n=kr)):(Jg=n,n=kr)}else Jg=n,n=kr;else Jg=n,n=kr;n===kr&&(n=null),n!==kr?(Kg=t,r=ss(r,n),t=r):(Jg=t,t=kr)}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(as)),t}function le(){var t,r,n,i,o,a;if(ty++,t=Jg,123===e.charCodeAt(Jg)?(r=Cn,Jg++):(r=kr,0===ty&&l(In)),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();if(n!==kr)if(i=b(),i!==kr){for(o=[],a=lr();a!==kr;)o.push(a),a=lr();o!==kr?(125===e.charCodeAt(Jg)?(a=Tn,Jg++):(a=kr,0===ty&&l(Fn)),a!==kr?(Kg=t,r=ls(i),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;if(t===kr)if(t=Jg,123===e.charCodeAt(Jg)?(r=Cn,Jg++):(r=kr,0===ty&&l(In)),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();if(n!==kr)if(i=ce(),i!==kr){for(o=[],a=lr();a!==kr;)o.push(a),a=lr();o!==kr?(125===e.charCodeAt(Jg)?(a=Tn,Jg++):(a=kr,0===ty&&l(Fn)),a!==kr?(Kg=t,r=ls(i),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(us)),t}function ce(){var t,r,n,i,o,a,s,u,c,f;if(ty++,t=Jg,r=fe(),r===kr&&(r=null),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();if(n!==kr){if(i=[],o=Jg,a=pe(),a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();if(s!==kr)if(46===e.charCodeAt(Jg)?(u=ts,Jg++):(u=kr,0===ty&&l(rs)),u===kr&&(u=null),u!==kr){for(c=[],f=lr();f!==kr;)c.push(f),f=lr();c!==kr?(f=fe(),f===kr&&(f=null),f!==kr?(a=[a,s,u,c,f],o=a):(Jg=o,o=kr)):(Jg=o,o=kr)}else Jg=o,o=kr;else Jg=o,o=kr}else Jg=o,o=kr;for(;o!==kr;)if(i.push(o),o=Jg,a=pe(),a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();if(s!==kr)if(46===e.charCodeAt(Jg)?(u=ts,Jg++):(u=kr,0===ty&&l(rs)),u===kr&&(u=null),u!==kr){for(c=[],f=lr();f!==kr;)c.push(f),f=lr();c!==kr?(f=fe(),f===kr&&(f=null),f!==kr?(a=[a,s,u,c,f],o=a):(Jg=o,o=kr)):(Jg=o,o=kr)}else Jg=o,o=kr;else Jg=o,o=kr}else Jg=o,o=kr;i!==kr?(Kg=t,r=fs(r,i),t=r):(Jg=t,t=kr)}else Jg=t,t=kr}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(cs)),t}function fe(){var t,r,n,i,o,a;if(ty++,t=Jg,r=Me(),r!==kr){for(n=Jg,i=[],o=lr();o!==kr;)i.push(o),o=lr();i!==kr?(46===e.charCodeAt(Jg)?(o=ts,Jg++):(o=kr,0===ty&&l(rs)),o!==kr?(a=fe(),a===kr&&(a=null),a!==kr?(i=[i,o,a],n=i):(Jg=n,n=kr)):(Jg=n,n=kr)):(Jg=n,n=kr),n===kr&&(n=null),n!==kr?(Kg=t,r=hs(r,n),t=r):(Jg=t,t=kr)}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(ps)),t}function pe(){var e,t;return ty++,e=ye(),e===kr&&(e=he(),e===kr&&(e=ge(),e===kr&&(e=de(),e===kr&&(e=ve(),e===kr&&(e=me(),e===kr&&(e=be(),e===kr&&(e=xe()))))))),ty--,e===kr&&(t=kr,0===ty&&l(ds)),e}function he(){var t,r,n,i,o;for(ty++,t=Jg,r=[],n=lr();n!==kr;)r.push(n),n=lr();if(r!==kr)if(e.substr(Jg,8)===gs?(n=gs,Jg+=8):(n=kr,0===ty&&l(ys)),n===kr&&(e.substr(Jg,8)===ms?(n=ms,Jg+=8):(n=kr,0===ty&&l(bs))),n!==kr){for(i=[],o=lr();o!==kr;)i.push(o),o=lr();i!==kr?(o=le(),o!==kr?(Kg=t,r=ws(o),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(vs)),t}function de(){var t,r,n,i,o,a,s;for(ty++,t=Jg,r=[],n=lr();n!==kr;)r.push(n),n=lr();if(r!==kr)if(e.substr(Jg,5)===Ra?(n=Ra,Jg+=5):(n=kr,0===ty&&l(La)),n===kr&&(e.substr(Jg,5)===Oa?(n=Oa,Jg+=5):(n=kr,0===ty&&l(Pa))),n!==kr){for(i=[],o=lr();o!==kr;)i.push(o),o=lr();if(i!==kr)if(o=ct(),o!==kr){for(a=[],s=lr();s!==kr;)a.push(s),s=lr();a!==kr?(s=le(),s!==kr?(Kg=t,r=$s(o,s),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(xs)),t}function ve(){var t,r,n,i;return ty++,t=Jg,e.substr(Jg,7)===Es?(r=Es,Jg+=7):(r=kr,0===ty&&l(_s)),r!==kr?(n=ct(),n!==kr?(i=le(),i!==kr?(Kg=t,r=Ss(n,i),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)):(Jg=t,t=kr),ty--,t===kr&&(r=kr,0===ty&&l(ks)),t}function ge(){var t,r,n,i;if(ty++,t=Jg,e.substr(Jg,5)===Cs?(r=Cs,Jg+=5):(r=kr,0===ty&&l(Is)),r===kr&&(e.substr(Jg,5)===Ts?(r=Ts,Jg+=5):(r=kr,0===ty&&l(Fs))),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();n!==kr?(i=le(),i!==kr?(Kg=t,r=Ns(i),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(As)),t}function ye(){var t,r,n,i,o,a,s,u;if(ty++,t=Jg,r=le(),r!==kr){for(n=[],i=Jg,o=[],a=lr();a!==kr;)o.push(a),a=lr();if(o!==kr)if(e.substr(Jg,5)===Rs?(a=Rs,Jg+=5):(a=kr,0===ty&&l(Ls)),a===kr&&(e.substr(Jg,5)===Os?(a=Os,Jg+=5):(a=kr,0===ty&&l(Ps))),a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();s!==kr?(u=le(),u!==kr?(o=[o,a,s,u],i=o):(Jg=i,i=kr)):(Jg=i,i=kr)}else Jg=i,i=kr;else Jg=i,i=kr;for(;i!==kr;){for(n.push(i),i=Jg,o=[],a=lr();a!==kr;)o.push(a),a=lr();if(o!==kr)if(e.substr(Jg,5)===Rs?(a=Rs,Jg+=5):(a=kr,0===ty&&l(Ls)),a===kr&&(e.substr(Jg,5)===Os?(a=Os,Jg+=5):(a=kr,0===ty&&l(Ps))),a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();s!==kr?(u=le(),u!==kr?(o=[o,a,s,u],i=o):(Jg=i,i=kr)):(Jg=i,i=kr)}else Jg=i,i=kr;else Jg=i,i=kr}n!==kr?(Kg=t,r=Qs(r,n),t=r):(Jg=t,t=kr)}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(js)),t}function me(){var t,r,n,i,o;for(ty++,t=Jg,r=[],n=lr();n!==kr;)r.push(n),n=lr();if(r!==kr)if(e.substr(Jg,6)===Ms?(n=Ms,Jg+=6):(n=kr,0===ty&&l(qs)),n===kr&&(e.substr(Jg,6)===Us?(n=Us,Jg+=6):(n=kr,0===ty&&l(Bs))),n!==kr){for(i=[],o=lr();o!==kr;)i.push(o),o=lr();i!==kr?(o=we(),o!==kr?(Kg=t,r=Gs(o),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(Ds)),t}function be(){var t,r,n,i,o,a,s,u,c,f,p,h,d;for(ty++,t=Jg,r=[],n=lr();n!==kr;)r.push(n),n=lr();if(r!==kr)if(e.substr(Jg,4)===Vs?(n=Vs,Jg+=4):(n=kr,0===ty&&l(zs)),n===kr&&(e.substr(Jg,4)===Ws?(n=Ws,Jg+=4):(n=kr,0===ty&&l(Xs))),n!==kr){for(i=[],o=lr();o!==kr;)i.push(o),o=lr();if(i!==kr)if(40===e.charCodeAt(Jg)?(o=sn,Jg++):(o=kr,0===ty&&l(un)),o!==kr){for(a=[],s=lr();s!==kr;)a.push(s),s=lr();if(a!==kr)if(s=ht(),s!==kr){for(u=[],c=lr();c!==kr;)u.push(c),c=lr();if(u!==kr)if(e.substr(Jg,2)===fn?(c=fn,Jg+=2):(c=kr,0===ty&&l(pn)),c===kr&&(e.substr(Jg,2)===ln?(c=ln,Jg+=2):(c=kr,0===ty&&l(cn))),c!==kr){for(f=[],p=lr();p!==kr;)f.push(p),p=lr();if(f!==kr)if(p=ft(),p!==kr){for(h=[],d=lr();d!==kr;)h.push(d),d=lr();h!==kr?(41===e.charCodeAt(Jg)?(d=hn,Jg++):(d=kr,0===ty&&l(dn)),d!==kr?(Kg=t,r=Js(s,p),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(Hs)),t}function we(){var e,t;return ty++,e=kt(),e===kr&&(e=Et(),e===kr&&(e=Se())),ty--,e===kr&&(t=kr,0===ty&&l(Ks)),e}function xe(){var t,r,n,i,o;for(ty++,t=Jg,r=[],n=lr();n!==kr;)r.push(n),n=lr();if(r!==kr)if(e.substr(Jg,6)===co?(n=co,Jg+=6):(n=kr,0===ty&&l(fo)),n===kr&&(e.substr(Jg,6)===po?(n=po,Jg+=6):(n=kr,0===ty&&l(ho))),n!==kr){for(i=[],o=lr();o!==kr;)i.push(o),o=lr();i!==kr?(o=$e(),o!==kr?(Kg=t,r=Zs(o),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(Ys)),t}function $e(){var e,t;return ty++,e=ke(),e===kr&&(e=Ee()),ty--,e===kr&&(t=kr,0===ty&&l(eu)),e}function ke(){var t,r,n,i,o,a,s,u;for(ty++,t=Jg,r=[],n=lr();n!==kr;)r.push(n),n=lr();if(r!==kr)if(n=ft(),n!==kr){for(i=[],o=lr();o!==kr;)i.push(o),o=lr();if(i!==kr)if(123===e.charCodeAt(Jg)?(o=Cn,Jg++):(o=kr,0===ty&&l(In)),o!==kr){for(a=[],s=lr();s!==kr;)a.push(s),s=lr();if(a!==kr){for(s=[],u=_e();u!==kr;)s.push(u),u=_e();s!==kr?(125===e.charCodeAt(Jg)?(u=Tn,Jg++):(u=kr,0===ty&&l(Fn)),u!==kr?(Kg=t,r=ru(n,s),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(tu)),t}function Ee(){var t,r,n,i,o,a,s,u,c,f,p,h,d,v,g,y;for(ty++,t=Jg,r=[],n=lr();n!==kr;)r.push(n),n=lr();if(r!==kr){if(n=ur(),n===kr)if(n=Jg,40===e.charCodeAt(Jg)?(i=sn,Jg++):(i=kr,0===ty&&l(un)),i!==kr){for(o=[],a=lr();a!==kr;)o.push(a),a=lr();if(o!==kr){for(a=[],s=ft();s!==kr;)a.push(s),s=ft();if(a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();s!==kr?(41===e.charCodeAt(Jg)?(u=hn,Jg++):(u=kr,0===ty&&l(dn)),u!==kr?(i=[i,o,a,s,u],n=i):(Jg=n,n=kr)):(Jg=n,n=kr)}else Jg=n,n=kr}else Jg=n,n=kr}else Jg=n,n=kr;if(n!==kr){for(i=[],o=lr();o!==kr;)i.push(o),o=lr();if(i!==kr)if(123===e.charCodeAt(Jg)?(o=Cn,Jg++):(o=kr,0===ty&&l(In)),o!==kr){for(a=[],s=lr();s!==kr;)a.push(s),s=lr();if(a!==kr){for(s=[],u=Jg,c=[],f=lr();f!==kr;)c.push(f),f=lr();if(c!==kr)if(40===e.charCodeAt(Jg)?(f=sn,Jg++):(f=kr,0===ty&&l(un)),f!==kr){for(p=[],h=lr();h!==kr;)p.push(h),h=lr();if(p!==kr){for(h=[],d=_e();d!==kr;)h.push(d),d=_e();if(h!==kr){for(d=[],v=lr();v!==kr;)d.push(v),v=lr();if(d!==kr)if(41===e.charCodeAt(Jg)?(v=hn,Jg++):(v=kr,0===ty&&l(dn)),v!==kr){for(g=[],y=lr();y!==kr;)g.push(y),y=lr();g!==kr?(c=[c,f,p,h,d,v,g],u=c):(Jg=u,u=kr)}else Jg=u,u=kr;else Jg=u,u=kr}else Jg=u,u=kr}else Jg=u,u=kr}else Jg=u,u=kr;else Jg=u,u=kr;for(u===kr&&(u=ur());u!==kr;){for(s.push(u),u=Jg,c=[],f=lr();f!==kr;)c.push(f),f=lr();if(c!==kr)if(40===e.charCodeAt(Jg)?(f=sn,Jg++):(f=kr,0===ty&&l(un)),f!==kr){for(p=[],h=lr();h!==kr;)p.push(h),h=lr();if(p!==kr){for(h=[],d=_e();d!==kr;)h.push(d),d=_e();if(h!==kr){for(d=[],v=lr();v!==kr;)d.push(v),v=lr();if(d!==kr)if(41===e.charCodeAt(Jg)?(v=hn,Jg++):(v=kr,0===ty&&l(dn)),v!==kr){for(g=[],y=lr();y!==kr;)g.push(y),y=lr();g!==kr?(c=[c,f,p,h,d,v,g],u=c):(Jg=u,u=kr)}else Jg=u,u=kr;else Jg=u,u=kr}else Jg=u,u=kr}else Jg=u,u=kr}else Jg=u,u=kr;else Jg=u,u=kr;u===kr&&(u=ur())}if(s!==kr){for(u=[],c=lr();c!==kr;)u.push(c),c=lr();u!==kr?(125===e.charCodeAt(Jg)?(c=Tn,Jg++):(c=kr,0===ty&&l(Fn)),c!==kr?(Kg=t,r=iu(n,s),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr}else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(nu)),t}function _e(){var t,r,n,i,o;for(ty++,t=Jg,r=[],n=lr();n!==kr;)r.push(n),n=lr();if(r!==kr)if(n=Mt(),n===kr&&(n=Tt(),n===kr&&(n=Ft(),n===kr&&(n=Lt(),n===kr&&(e.substr(Jg,5)===so?(n=so,Jg+=5):(n=kr,0===ty&&l(uo)))))),n!==kr){for(i=[],o=lr();o!==kr;)i.push(o),o=lr();i!==kr?(Kg=t,r=xi(n),t=r):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(ou)),t}function Se(){var e,t,r,n;if(ty++,e=Jg,t=Pt(),t!==kr){for(r=[],n=lr();n!==kr;)r.push(n),n=lr();r!==kr?(n=Ae(),n!==kr?(Kg=e,t=su(t,n),e=t):(Jg=e,e=kr)):(Jg=e,e=kr)}else Jg=e,e=kr;return ty--,e===kr&&(t=kr,0===ty&&l(au)),e}function Ae(){var t,r,n,i,o,a,s,u,c,f,p,h;if(ty++,t=Jg,r=ur(),r!==kr&&(Kg=t,r=lu()),t=r,t===kr)if(t=Jg,40===e.charCodeAt(Jg)?(r=sn,Jg++):(r=kr,0===ty&&l(un)),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();if(n!==kr)if(e.substr(Jg,8)===Yr?(i=Yr,Jg+=8):(i=kr,0===ty&&l(Zr)),i===kr&&(e.substr(Jg,8)===en?(i=en,Jg+=8):(i=kr,0===ty&&l(tn))),i===kr&&(i=null),i!==kr){for(o=[],a=lr();a!==kr;)o.push(a),a=lr();if(o!==kr)if(a=ht(),a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();if(s!==kr){if(u=[],c=Jg,44===e.charCodeAt(Jg)?(f=cu,Jg++):(f=kr,0===ty&&l(fu)),f!==kr){for(p=[],h=lr();h!==kr;)p.push(h),h=lr();p!==kr?(h=ht(),h!==kr?(f=[f,p,h],c=f):(Jg=c,c=kr)):(Jg=c,c=kr)}else Jg=c,c=kr;for(;c!==kr;)if(u.push(c),c=Jg,44===e.charCodeAt(Jg)?(f=cu,Jg++):(f=kr,0===ty&&l(fu)),f!==kr){for(p=[],h=lr();h!==kr;)p.push(h),h=lr();p!==kr?(h=ht(),h!==kr?(f=[f,p,h],c=f):(Jg=c,c=kr)):(Jg=c,c=kr)}else Jg=c,c=kr;u!==kr?(41===e.charCodeAt(Jg)?(c=hn,Jg++):(c=kr,0===ty&&l(dn)),c!==kr?(Kg=t,r=pu(i,a,u),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(uu)),t}function Ce(){var t,r,n,i,o,a,s,u,c,f;if(ty++,t=Jg,r=ur(),r!==kr&&(Kg=t,r=lu()),t=r,t===kr)if(t=Jg,40===e.charCodeAt(Jg)?(r=sn,Jg++):(r=kr,0===ty&&l(un)),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();if(n!==kr)if(i=Pt(),i===kr&&(i=ht()),i!==kr){for(o=[],a=lr();a!==kr;)o.push(a),a=lr();if(o!==kr){if(a=[],s=Jg,44===e.charCodeAt(Jg)?(u=cu,Jg++):(u=kr,0===ty&&l(fu)),u!==kr){for(c=[],f=lr();f!==kr;)c.push(f),f=lr();c!==kr?(f=Pt(),f===kr&&(f=ht()),f!==kr?(u=[u,c,f],s=u):(Jg=s,s=kr)):(Jg=s,s=kr)}else Jg=s,s=kr;for(;s!==kr;)if(a.push(s),s=Jg,44===e.charCodeAt(Jg)?(u=cu,Jg++):(u=kr,0===ty&&l(fu)),u!==kr){for(c=[],f=lr();f!==kr;)c.push(f),f=lr();c!==kr?(f=Pt(),f===kr&&(f=ht()),f!==kr?(u=[u,c,f],s=u):(Jg=s,s=kr)):(Jg=s,s=kr)}else Jg=s,s=kr;a!==kr?(41===e.charCodeAt(Jg)?(s=hn,Jg++):(s=kr,0===ty&&l(dn)),s!==kr?(Kg=t,r=du(i,a),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(hu)),t}function Ie(){var t,r,n,i,o,a;if(ty++,t=Jg,123===e.charCodeAt(Jg)?(r=Cn,Jg++):(r=kr,0===ty&&l(In)),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();if(n!==kr)if(i=Te(),i===kr&&(i=null),i!==kr){for(o=[],a=lr();a!==kr;)o.push(a),a=lr();o!==kr?(125===e.charCodeAt(Jg)?(a=Tn,Jg++):(a=kr,0===ty&&l(Fn)),a!==kr?(Kg=t,r=gu(i),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(vu)),t}function Te(){var t,r,n,i,o,a,s;if(ty++,t=Jg,r=Fe(),r!==kr){for(n=Jg,i=[],o=lr();o!==kr;)i.push(o),o=lr();if(i!==kr)if(46===e.charCodeAt(Jg)?(o=ts,Jg++):(o=kr,0===ty&&l(rs)),o!==kr){for(a=[],s=lr();s!==kr;)a.push(s),s=lr();a!==kr?(s=Te(),s===kr&&(s=null),s!==kr?(i=[i,o,a,s],n=i):(Jg=n,n=kr)):(Jg=n,n=kr)}else Jg=n,n=kr;else Jg=n,n=kr;n===kr&&(n=null),n!==kr?(Kg=t,r=mu(r,n),t=r):(Jg=t,t=kr)}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(yu)),t}function Fe(){var e,t,r,n,i;for(ty++,e=Jg,t=[],r=lr();r!==kr;)t.push(r),r=lr();if(t!==kr)if(r=lt(),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();n!==kr?(i=je(),i!==kr?(Kg=e,t=wu(r,i),e=t):(Jg=e,e=kr)):(Jg=e,e=kr)}else Jg=e,e=kr;else Jg=e,e=kr;if(e===kr){for(e=Jg,t=[],r=lr();r!==kr;)t.push(r),r=lr();if(t!==kr)if(r=rt(),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();n!==kr?(i=Re(),i!==kr?(Kg=e,t=xu(r,i),e=t):(Jg=e,e=kr)):(Jg=e,e=kr)}else Jg=e,e=kr;else Jg=e,e=kr}return ty--,e===kr&&(t=kr,0===ty&&l(bu)),e}function Ne(){var t,r,n,i,o,a,s,u,c,f,p,h,d;if(ty++,t=Jg,r=Be(),r===kr&&(r=Ge()),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();if(n!==kr)if(i=Le(),i!==kr){for(o=[],a=Jg,s=[],u=lr();u!==kr;)s.push(u),u=lr();if(s!==kr)if(59===e.charCodeAt(Jg)?(u=mo,Jg++):(u=kr,0===ty&&l(bo)),u!==kr){for(c=[],f=lr();f!==kr;)c.push(f),f=lr();if(c!==kr){if(f=Jg,p=Be(),p===kr&&(p=Ge()),p!==kr){for(h=[],d=lr();d!==kr;)h.push(d),d=lr();h!==kr?(d=Oe(),d!==kr?(p=[p,h,d],f=p):(Jg=f,f=kr)):(Jg=f,f=kr)}else Jg=f,f=kr;f===kr&&(f=null),f!==kr?(s=[s,u,c,f],a=s):(Jg=a,a=kr)}else Jg=a,a=kr}else Jg=a,a=kr;else Jg=a,a=kr;for(;a!==kr;){for(o.push(a),a=Jg,s=[],u=lr();u!==kr;)s.push(u),u=lr();if(s!==kr)if(59===e.charCodeAt(Jg)?(u=mo,Jg++):(u=kr,0===ty&&l(bo)),u!==kr){for(c=[],f=lr();f!==kr;)c.push(f),f=lr();if(c!==kr){if(f=Jg,p=Be(),p===kr&&(p=Ge()),p!==kr){for(h=[],d=lr();d!==kr;)h.push(d),d=lr();h!==kr?(d=Oe(),d!==kr?(p=[p,h,d],f=p):(Jg=f,f=kr)):(Jg=f,f=kr)}else Jg=f,f=kr;f===kr&&(f=null),f!==kr?(s=[s,u,c,f],a=s):(Jg=a,a=kr)}else Jg=a,a=kr}else Jg=a,a=kr;else Jg=a,a=kr}o!==kr?(Kg=t,r=ku(r,i,o),t=r):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l($u)),t}function je(){var t,r,n,i,o,a,s,u,c,f,p,h,d;if(ty++,t=Jg,r=De(),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();if(n!==kr)if(i=Oe(),i!==kr){for(o=[],a=Jg,s=[],u=lr();u!==kr;)s.push(u),u=lr();if(s!==kr)if(59===e.charCodeAt(Jg)?(u=mo,Jg++):(u=kr,0===ty&&l(bo)),u!==kr){for(c=[],f=lr();f!==kr;)c.push(f),f=lr();if(c!==kr){if(f=Jg,p=De(),p!==kr){for(h=[],d=lr();d!==kr;)h.push(d),d=lr();h!==kr?(d=Oe(),d!==kr?(p=[p,h,d],f=p):(Jg=f,f=kr)):(Jg=f,f=kr)}else Jg=f,f=kr;f===kr&&(f=null),f!==kr?(s=[s,u,c,f],a=s):(Jg=a,a=kr)}else Jg=a,a=kr}else Jg=a,a=kr;else Jg=a,a=kr;for(;a!==kr;){for(o.push(a),a=Jg,s=[],u=lr();u!==kr;)s.push(u),u=lr();if(s!==kr)if(59===e.charCodeAt(Jg)?(u=mo,Jg++):(u=kr,0===ty&&l(bo)),u!==kr){for(c=[],f=lr();f!==kr;)c.push(f),f=lr();if(c!==kr){if(f=Jg,p=De(),p!==kr){for(h=[],d=lr();d!==kr;)h.push(d),d=lr();h!==kr?(d=Oe(),d!==kr?(p=[p,h,d],f=p):(Jg=f,f=kr)):(Jg=f,f=kr)}else Jg=f,f=kr;f===kr&&(f=null),f!==kr?(s=[s,u,c,f],a=s):(Jg=a,a=kr)}else Jg=a,a=kr}else Jg=a,a=kr;else Jg=a,a=kr}o!==kr?(Kg=t,r=_u(r,i,o),t=r):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(Eu)),t}function Re(){var e,t;return ty++,e=je(),e===kr&&(e=null),ty--,e===kr&&(t=kr,0===ty&&l(Su)),e}function Le(){var t,r,n,i,o,a,s,u;if(ty++,t=Jg,r=Pe(),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();if(n!==kr){if(i=[],o=Jg,44===e.charCodeAt(Jg)?(a=cu,Jg++):(a=kr,0===ty&&l(fu)),a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();s!==kr?(u=Pe(),u!==kr?(a=[a,s,u],o=a):(Jg=o,o=kr)):(Jg=o,o=kr)}else Jg=o,o=kr;for(;o!==kr;)if(i.push(o),o=Jg,44===e.charCodeAt(Jg)?(a=cu,Jg++):(a=kr,0===ty&&l(fu)),a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();s!==kr?(u=Pe(),u!==kr?(a=[a,s,u],o=a):(Jg=o,o=kr)):(Jg=o,o=kr)}else Jg=o,o=kr;i!==kr?(Kg=t,r=Cu(r,i),t=r):(Jg=t,t=kr)}else Jg=t,t=kr}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(Au)),t}function Oe(){var t,r,n,i,o,a,s,u;if(ty++,t=Jg,r=Qe(),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();if(n!==kr){if(i=[],o=Jg,44===e.charCodeAt(Jg)?(a=cu,Jg++):(a=kr,0===ty&&l(fu)),a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();s!==kr?(u=Qe(),u!==kr?(a=[a,s,u],o=a):(Jg=o,o=kr)):(Jg=o,o=kr)}else Jg=o,o=kr;for(;o!==kr;)if(i.push(o),o=Jg,44===e.charCodeAt(Jg)?(a=cu,Jg++):(a=kr,0===ty&&l(fu)),a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();s!==kr?(u=Qe(),u!==kr?(a=[a,s,u],o=a):(Jg=o,o=kr)):(Jg=o,o=kr)}else Jg=o,o=kr;i!==kr?(Kg=t,r=Tu(r,i),t=r):(Jg=t,t=kr)}else Jg=t,t=kr}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(Iu)),t}function Pe(){var e,t;return ty++,e=st(),ty--,e===kr&&(t=kr,0===ty&&l(Fu)),e}function Qe(){var e,t;return ty++,e=ut(),ty--,e===kr&&(t=kr,0===ty&&l(Nu)),e}function De(){var t,r;return ty++,t=ct(),t===kr&&(t=Jg,97===e.charCodeAt(Jg)?(r=Ru,Jg++):(r=kr,0===ty&&l(Lu)),r!==kr&&(Kg=t,r=Ou()),t=r),ty--,t===kr&&(r=kr,0===ty&&l(ju)),t}function Me(){var e,t,r,n,i;for(ty++,e=Jg,t=[],r=lr();r!==kr;)t.push(r),r=lr();if(t!==kr)if(r=lt(),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();n!==kr?(i=qe(),i!==kr?(Kg=e,t=Qu(r,i),e=t):(Jg=e,e=kr)):(Jg=e,e=kr)}else Jg=e,e=kr;else Jg=e,e=kr;if(e===kr){for(e=Jg,t=[],r=lr();r!==kr;)t.push(r),r=lr();if(t!==kr)if(r=tt(),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();n!==kr?(i=Ue(),i!==kr?(Kg=e,t=Du(r,i),e=t):(Jg=e,e=kr)):(Jg=e,e=kr)}else Jg=e,e=kr;else Jg=e,e=kr}return ty--,e===kr&&(t=kr,0===ty&&l(Pu)),e}function qe(){var t,r,n,i,o,a,s,u,c,f,p,h;if(ty++,t=Jg,r=Be(),r===kr&&(r=Ge()),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();if(n!==kr)if(i=Le(),
i!==kr){for(o=[],a=Jg,s=[],u=lr();u!==kr;)s.push(u),u=lr();if(s!==kr)if(59===e.charCodeAt(Jg)?(u=mo,Jg++):(u=kr,0===ty&&l(bo)),u!==kr){for(c=[],f=lr();f!==kr;)c.push(f),f=lr();c!==kr?(f=Jg,p=Be(),p===kr&&(p=Ge()),p!==kr?(h=Oe(),h!==kr?(p=[p,h],f=p):(Jg=f,f=kr)):(Jg=f,f=kr),f===kr&&(f=null),f!==kr?(s=[s,u,c,f],a=s):(Jg=a,a=kr)):(Jg=a,a=kr)}else Jg=a,a=kr;else Jg=a,a=kr;for(;a!==kr;){for(o.push(a),a=Jg,s=[],u=lr();u!==kr;)s.push(u),u=lr();if(s!==kr)if(59===e.charCodeAt(Jg)?(u=mo,Jg++):(u=kr,0===ty&&l(bo)),u!==kr){for(c=[],f=lr();f!==kr;)c.push(f),f=lr();c!==kr?(f=Jg,p=Be(),p===kr&&(p=Ge()),p!==kr?(h=Oe(),h!==kr?(p=[p,h],f=p):(Jg=f,f=kr)):(Jg=f,f=kr),f===kr&&(f=null),f!==kr?(s=[s,u,c,f],a=s):(Jg=a,a=kr)):(Jg=a,a=kr)}else Jg=a,a=kr;else Jg=a,a=kr}o!==kr?(Kg=t,r=qu(r,i,o),t=r):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(Mu)),t}function Ue(){var e,t;return ty++,e=Ne(),e===kr&&(e=null),ty--,e===kr&&(t=kr,0===ty&&l(Uu)),e}function Be(){var e,t;return ty++,e=Jg,t=He(),t!==kr&&(Kg=e,t=Gu(t)),e=t,ty--,e===kr&&(t=kr,0===ty&&l(Bu)),e}function Ge(){var e,t;return ty++,e=ft(),ty--,e===kr&&(t=kr,0===ty&&l(Hu)),e}function He(){var e,t;return ty++,e=Ve(),ty--,e===kr&&(t=kr,0===ty&&l(Vu)),e}function Ve(){var t,r,n,i,o,a;if(ty++,t=Jg,r=ze(),r!==kr){for(n=[],i=Jg,124===e.charCodeAt(Jg)?(o=Wu,Jg++):(o=kr,0===ty&&l(Xu)),o!==kr?(a=ze(),a!==kr?(o=[o,a],i=o):(Jg=i,i=kr)):(Jg=i,i=kr);i!==kr;)n.push(i),i=Jg,124===e.charCodeAt(Jg)?(o=Wu,Jg++):(o=kr,0===ty&&l(Xu)),o!==kr?(a=ze(),a!==kr?(o=[o,a],i=o):(Jg=i,i=kr)):(Jg=i,i=kr);n!==kr?(Kg=t,r=Ju(r,n),t=r):(Jg=t,t=kr)}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(zu)),t}function ze(){var t,r,n,i,o,a;if(ty++,t=Jg,r=Xe(),r!==kr){for(n=[],i=Jg,47===e.charCodeAt(Jg)?(o=Yu,Jg++):(o=kr,0===ty&&l(Zu)),o!==kr?(a=Xe(),a!==kr?(o=[o,a],i=o):(Jg=i,i=kr)):(Jg=i,i=kr);i!==kr;)n.push(i),i=Jg,47===e.charCodeAt(Jg)?(o=Yu,Jg++):(o=kr,0===ty&&l(Zu)),o!==kr?(a=Xe(),a!==kr?(o=[o,a],i=o):(Jg=i,i=kr)):(Jg=i,i=kr);n!==kr?(Kg=t,r=el(r,n),t=r):(Jg=t,t=kr)}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(Ku)),t}function We(){var e,t,r;return ty++,e=Jg,t=Ke(),t!==kr?(r=Je(),r===kr&&(r=null),r!==kr?(Kg=e,t=rl(t,r),e=t):(Jg=e,e=kr)):(Jg=e,e=kr),ty--,e===kr&&(t=kr,0===ty&&l(tl)),e}function Xe(){var t,r,n;return ty++,t=We(),t===kr&&(t=Jg,94===e.charCodeAt(Jg)?(r=il,Jg++):(r=kr,0===ty&&l(ol)),r!==kr?(n=We(),n!==kr?(Kg=t,r=al(n),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)),ty--,t===kr&&(r=kr,0===ty&&l(nl)),t}function Je(){var t,r,n,i,o,a,s,u,c;return ty++,42===e.charCodeAt(Jg)?(t=vn,Jg++):(t=kr,0===ty&&l(gn)),t===kr&&(63===e.charCodeAt(Jg)?(t=ul,Jg++):(t=kr,0===ty&&l(ll)),t===kr&&(43===e.charCodeAt(Jg)?(t=cl,Jg++):(t=kr,0===ty&&l(fl)),t===kr&&(t=Jg,123===e.charCodeAt(Jg)?(r=Cn,Jg++):(r=kr,0===ty&&l(In)),r!==kr?(n=Jg,i=et(),i!==kr?(o=Jg,44===e.charCodeAt(Jg)?(a=cu,Jg++):(a=kr,0===ty&&l(fu)),a!==kr?(125===e.charCodeAt(Jg)?(s=Tn,Jg++):(s=kr,0===ty&&l(Fn)),s===kr&&(s=Jg,u=et(),u!==kr?(125===e.charCodeAt(Jg)?(c=Tn,Jg++):(c=kr,0===ty&&l(Fn)),c!==kr?(u=[u,c],s=u):(Jg=s,s=kr)):(Jg=s,s=kr)),s!==kr?(a=[a,s],o=a):(Jg=o,o=kr)):(Jg=o,o=kr),o===kr&&(125===e.charCodeAt(Jg)?(o=Tn,Jg++):(o=kr,0===ty&&l(Fn))),o!==kr?(i=[i,o],n=i):(Jg=n,n=kr)):(Jg=n,n=kr),n===kr&&(n=Jg,44===e.charCodeAt(Jg)?(i=cu,Jg++):(i=kr,0===ty&&l(fu)),i!==kr?(o=et(),o!==kr?(125===e.charCodeAt(Jg)?(a=Tn,Jg++):(a=kr,0===ty&&l(Fn)),a!==kr?(i=[i,o,a],n=i):(Jg=n,n=kr)):(Jg=n,n=kr)):(Jg=n,n=kr)),n!==kr?(r=[r,n],t=r):(Jg=t,t=kr)):(Jg=t,t=kr)))),ty--,t===kr&&(r=kr,0===ty&&l(sl)),t}function Ke(){var t,r,n,i;return ty++,t=Pt(),t===kr&&(t=Jg,97===e.charCodeAt(Jg)?(r=Ru,Jg++):(r=kr,0===ty&&l(Lu)),r!==kr&&(Kg=t,r=Ou()),t=r,t===kr&&(t=Jg,33===e.charCodeAt(Jg)?(r=hl,Jg++):(r=kr,0===ty&&l(dl)),r!==kr?(n=Ye(),n!==kr?(r=[r,n],t=r):(Jg=t,t=kr)):(Jg=t,t=kr),t===kr&&(t=Jg,40===e.charCodeAt(Jg)?(r=sn,Jg++):(r=kr,0===ty&&l(un)),r!==kr?(n=He(),n!==kr?(41===e.charCodeAt(Jg)?(i=hn,Jg++):(i=kr,0===ty&&l(dn)),i!==kr?(Kg=t,r=ls(n),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)):(Jg=t,t=kr)))),ty--,t===kr&&(r=kr,0===ty&&l(pl)),t}function Ye(){var t,r,n,i,o,a,s,u;if(t=Ze(),t===kr)if(t=Jg,40===e.charCodeAt(Jg)?(r=sn,Jg++):(r=kr,0===ty&&l(un)),r!==kr){if(n=Jg,i=Ze(),i!==kr){for(o=[],a=Jg,124===e.charCodeAt(Jg)?(s=Wu,Jg++):(s=kr,0===ty&&l(Xu)),s!==kr?(u=Ze(),u!==kr?(s=[s,u],a=s):(Jg=a,a=kr)):(Jg=a,a=kr);a!==kr;)o.push(a),a=Jg,124===e.charCodeAt(Jg)?(s=Wu,Jg++):(s=kr,0===ty&&l(Xu)),s!==kr?(u=Ze(),u!==kr?(s=[s,u],a=s):(Jg=a,a=kr)):(Jg=a,a=kr);o!==kr?(i=[i,o],n=i):(Jg=n,n=kr)}else Jg=n,n=kr;n===kr&&(n=null),n!==kr?(41===e.charCodeAt(Jg)?(i=hn,Jg++):(i=kr,0===ty&&l(dn)),i!==kr?(r=[r,n,i],t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr;return t}function Ze(){var t,r,n;return ty++,t=Pt(),t===kr&&(97===e.charCodeAt(Jg)?(t=Ru,Jg++):(t=kr,0===ty&&l(Lu)),t===kr&&(t=Jg,94===e.charCodeAt(Jg)?(r=il,Jg++):(r=kr,0===ty&&l(ol)),r!==kr?(n=Pt(),n===kr&&(97===e.charCodeAt(Jg)?(n=Ru,Jg++):(n=kr,0===ty&&l(Lu))),n!==kr?(r=[r,n],t=r):(Jg=t,t=kr)):(Jg=t,t=kr))),ty--,t===kr&&(r=kr,0===ty&&l(vl)),t}function et(){var e,t;return ty++,e=zt(),ty--,e===kr&&(t=kr,0===ty&&l(gl)),e}function tt(){var e,t;return ty++,e=Jg,t=ot(),t!==kr&&(Kg=e,t=ml(t)),e=t,e===kr&&(e=nt()),ty--,e===kr&&(t=kr,0===ty&&l(yl)),e}function rt(){var e,t;return ty++,e=Jg,t=at(),t!==kr&&(Kg=e,t=wl(t)),e=t,e===kr&&(e=it()),ty--,e===kr&&(t=kr,0===ty&&l(bl)),e}function nt(){var t,r,n,i,o,a,s,u;for(ty++,t=Jg,r=[],n=lr();n!==kr;)r.push(n),n=lr();if(r!==kr)if(91===e.charCodeAt(Jg)?(n=$l,Jg++):(n=kr,0===ty&&l(kl)),n!==kr){for(i=[],o=lr();o!==kr;)i.push(o),o=lr();if(i!==kr)if(o=qe(),o!==kr)if(93===e.charCodeAt(Jg)?(a=El,Jg++):(a=kr,0===ty&&l(_l)),a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();s!==kr?(Kg=t,r=Sl(o),t=r):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(xl)),t}function it(){var t,r,n,i,o,a,s,u,c;for(ty++,t=Jg,r=[],n=lr();n!==kr;)r.push(n),n=lr();if(r!==kr)if(91===e.charCodeAt(Jg)?(n=$l,Jg++):(n=kr,0===ty&&l(kl)),n!==kr){for(i=[],o=lr();o!==kr;)i.push(o),o=lr();if(i!==kr)if(o=je(),o!==kr){for(a=[],s=lr();s!==kr;)a.push(s),s=lr();if(a!==kr)if(93===e.charCodeAt(Jg)?(s=El,Jg++):(s=kr,0===ty&&l(_l)),s!==kr){for(u=[],c=lr();c!==kr;)u.push(c),c=lr();u!==kr?(Kg=t,r=Cl(o),t=r):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(Al)),t}function ot(){var t,r,n,i,o,a,s,u,c;for(ty++,t=Jg,r=[],n=lr();n!==kr;)r.push(n),n=lr();if(r!==kr)if(40===e.charCodeAt(Jg)?(n=sn,Jg++):(n=kr,0===ty&&l(un)),n!==kr){for(i=[],o=lr();o!==kr;)i.push(o),o=lr();if(i!==kr){if(o=[],a=st(),a!==kr)for(;a!==kr;)o.push(a),a=st();else o=kr;if(o!==kr){for(a=[],s=lr();s!==kr;)a.push(s),s=lr();if(a!==kr)if(41===e.charCodeAt(Jg)?(s=hn,Jg++):(s=kr,0===ty&&l(dn)),s!==kr){for(u=[],c=lr();c!==kr;)u.push(c),c=lr();u!==kr?(Kg=t,r=Tl(o),t=r):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr}else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(Il)),t}function at(){var t,r,n,i,o,a,s,u,c;for(ty++,t=Jg,r=[],n=lr();n!==kr;)r.push(n),n=lr();if(r!==kr)if(40===e.charCodeAt(Jg)?(n=sn,Jg++):(n=kr,0===ty&&l(un)),n!==kr){for(i=[],o=lr();o!==kr;)i.push(o),o=lr();if(i!==kr){if(o=[],a=ut(),a!==kr)for(;a!==kr;)o.push(a),a=ut();else o=kr;if(o!==kr){for(a=[],s=lr();s!==kr;)a.push(s),s=lr();if(a!==kr)if(41===e.charCodeAt(Jg)?(s=hn,Jg++):(s=kr,0===ty&&l(dn)),s!==kr){for(u=[],c=lr();c!==kr;)u.push(c),c=lr();u!==kr?(Kg=t,r=Tl(o),t=r):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr}else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(Fl)),t}function st(){var e,t,r,n,i,o;for(ty++,e=Jg,t=Jg,r=[],n=lr();n!==kr;)r.push(n),n=lr();if(r!==kr)if(n=lt(),n!==kr){for(i=[],o=lr();o!==kr;)i.push(o),o=lr();i!==kr?(r=[r,n,i],t=r):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr;if(t===kr){for(t=Jg,r=[],n=lr();n!==kr;)r.push(n),n=lr();if(r!==kr)if(n=tt(),n!==kr){for(i=[],o=lr();o!==kr;)i.push(o),o=lr();i!==kr?(r=[r,n,i],t=r):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr}return t!==kr&&(Kg=e,t=jl(t)),e=t,ty--,e===kr&&(t=kr,0===ty&&l(Nl)),e}function ut(){var e,t,r,n,i,o;for(ty++,e=Jg,t=Jg,r=[],n=lr();n!==kr;)r.push(n),n=lr();if(r!==kr)if(n=lt(),n!==kr){for(i=[],o=lr();o!==kr;)i.push(o),o=lr();i!==kr?(r=[r,n,i],t=r):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr;if(t===kr){for(t=Jg,r=[],n=lr();n!==kr;)r.push(n),n=lr();if(r!==kr)if(n=rt(),n!==kr){for(i=[],o=lr();o!==kr;)i.push(o),o=lr();i!==kr?(r=[r,n,i],t=r):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr}return t!==kr&&(Kg=e,t=jl(t)),e=t,ty--,e===kr&&(t=kr,0===ty&&l(Rl)),e}function lt(){var e,t;return ty++,e=ft(),e===kr&&(e=pt()),ty--,e===kr&&(t=kr,0===ty&&l(Ll)),e}function ct(){var e,t;return ty++,e=ft(),e===kr&&(e=Pt()),ty--,e===kr&&(t=kr,0===ty&&l(Ol)),e}function ft(){var e,t,r,n,i;for(ty++,e=Jg,t=[],r=lr();r!==kr;)t.push(r),r=lr();if(t!==kr)if(r=Gt(),r===kr&&(r=Ht()),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();n!==kr?(Kg=e,t=Ql(r),e=t):(Jg=e,e=kr)}else Jg=e,e=kr;else Jg=e,e=kr;return ty--,e===kr&&(t=kr,0===ty&&l(Pl)),e}function pt(){var e,t;return ty++,e=Pt(),e===kr&&(e=Tt(),e===kr&&(e=Ft(),e===kr&&(e=Lt(),e===kr&&(e=Dt(),e===kr&&(e=ur()))))),ty--,e===kr&&(t=kr,0===ty&&l(Dl)),e}function ht(){var e,t;return ty++,e=dt(),ty--,e===kr&&(t=kr,0===ty&&l(Ml)),e}function dt(){var t,r,n,i,o,a,s,u;if(ty++,t=Jg,r=vt(),r!==kr){for(n=[],i=Jg,o=[],a=lr();a!==kr;)o.push(a),a=lr();if(o!==kr)if(e.substr(Jg,2)===Ul?(a=Ul,Jg+=2):(a=kr,0===ty&&l(Bl)),a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();s!==kr?(u=vt(),u!==kr?(o=[o,a,s,u],i=o):(Jg=i,i=kr)):(Jg=i,i=kr)}else Jg=i,i=kr;else Jg=i,i=kr;for(;i!==kr;){for(n.push(i),i=Jg,o=[],a=lr();a!==kr;)o.push(a),a=lr();if(o!==kr)if(e.substr(Jg,2)===Ul?(a=Ul,Jg+=2):(a=kr,0===ty&&l(Bl)),a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();s!==kr?(u=vt(),u!==kr?(o=[o,a,s,u],i=o):(Jg=i,i=kr)):(Jg=i,i=kr)}else Jg=i,i=kr;else Jg=i,i=kr}n!==kr?(Kg=t,r=Gl(r,n),t=r):(Jg=t,t=kr)}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(ql)),t}function vt(){var t,r,n,i,o,a,s,u;if(ty++,t=Jg,r=gt(),r!==kr){for(n=[],i=Jg,o=[],a=lr();a!==kr;)o.push(a),a=lr();if(o!==kr)if(e.substr(Jg,2)===Vl?(a=Vl,Jg+=2):(a=kr,0===ty&&l(zl)),a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();s!==kr?(u=gt(),u!==kr?(o=[o,a,s,u],i=o):(Jg=i,i=kr)):(Jg=i,i=kr)}else Jg=i,i=kr;else Jg=i,i=kr;for(;i!==kr;){for(n.push(i),i=Jg,o=[],a=lr();a!==kr;)o.push(a),a=lr();if(o!==kr)if(e.substr(Jg,2)===Vl?(a=Vl,Jg+=2):(a=kr,0===ty&&l(zl)),a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();s!==kr?(u=gt(),u!==kr?(o=[o,a,s,u],i=o):(Jg=i,i=kr)):(Jg=i,i=kr)}else Jg=i,i=kr;else Jg=i,i=kr}n!==kr?(Kg=t,r=Wl(r,n),t=r):(Jg=t,t=kr)}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(Hl)),t}function gt(){var e,t;return ty++,e=yt(),ty--,e===kr&&(t=kr,0===ty&&l(Xl)),e}function yt(){var t,r,n,i,o,a,s,u,c,f,p,h,d;if(ty++,t=Jg,r=mt(),r!==kr){for(n=[],i=Jg,o=[],a=lr();a!==kr;)o.push(a),a=lr();if(o!==kr)if(61===e.charCodeAt(Jg)?(a=Kl,Jg++):(a=kr,0===ty&&l(Yl)),a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();s!==kr?(u=mt(),u!==kr?(o=[o,a,s,u],i=o):(Jg=i,i=kr)):(Jg=i,i=kr)}else Jg=i,i=kr;else Jg=i,i=kr;if(i===kr){for(i=Jg,o=[],a=lr();a!==kr;)o.push(a),a=lr();if(o!==kr)if(e.substr(Jg,2)===Zl?(a=Zl,Jg+=2):(a=kr,0===ty&&l(ec)),a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();s!==kr?(u=mt(),u!==kr?(o=[o,a,s,u],i=o):(Jg=i,i=kr)):(Jg=i,i=kr)}else Jg=i,i=kr;else Jg=i,i=kr;if(i===kr){for(i=Jg,o=[],a=lr();a!==kr;)o.push(a),a=lr();if(o!==kr)if(60===e.charCodeAt(Jg)?(a=tc,Jg++):(a=kr,0===ty&&l(rc)),a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();s!==kr?(u=mt(),u!==kr?(o=[o,a,s,u],i=o):(Jg=i,i=kr)):(Jg=i,i=kr)}else Jg=i,i=kr;else Jg=i,i=kr;if(i===kr){for(i=Jg,o=[],a=lr();a!==kr;)o.push(a),a=lr();if(o!==kr)if(62===e.charCodeAt(Jg)?(a=nc,Jg++):(a=kr,0===ty&&l(ic)),a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();s!==kr?(u=mt(),u!==kr?(o=[o,a,s,u],i=o):(Jg=i,i=kr)):(Jg=i,i=kr)}else Jg=i,i=kr;else Jg=i,i=kr;if(i===kr){for(i=Jg,o=[],a=lr();a!==kr;)o.push(a),a=lr();if(o!==kr)if(e.substr(Jg,2)===oc?(a=oc,Jg+=2):(a=kr,0===ty&&l(ac)),a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();s!==kr?(u=mt(),u!==kr?(o=[o,a,s,u],i=o):(Jg=i,i=kr)):(Jg=i,i=kr)}else Jg=i,i=kr;else Jg=i,i=kr;if(i===kr){for(i=Jg,o=[],a=lr();a!==kr;)o.push(a),a=lr();if(o!==kr)if(e.substr(Jg,2)===sc?(a=sc,Jg+=2):(a=kr,0===ty&&l(uc)),a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();s!==kr?(u=mt(),u!==kr?(o=[o,a,s,u],i=o):(Jg=i,i=kr)):(Jg=i,i=kr)}else Jg=i,i=kr;else Jg=i,i=kr;if(i===kr){for(i=Jg,o=[],a=lr();a!==kr;)o.push(a),a=lr();if(o!==kr)if(73===e.charCodeAt(Jg)?(a=lc,Jg++):(a=kr,0===ty&&l(cc)),a===kr&&(105===e.charCodeAt(Jg)?(a=fc,Jg++):(a=kr,0===ty&&l(pc))),a!==kr)if(78===e.charCodeAt(Jg)?(s=hc,Jg++):(s=kr,0===ty&&l(dc)),s===kr&&(110===e.charCodeAt(Jg)?(s=vc,Jg++):(s=kr,0===ty&&l(gc))),s!==kr){for(u=[],c=lr();c!==kr;)u.push(c),c=lr();u!==kr?(c=Ce(),c!==kr?(o=[o,a,s,u,c],i=o):(Jg=i,i=kr)):(Jg=i,i=kr)}else Jg=i,i=kr;else Jg=i,i=kr;else Jg=i,i=kr;if(i===kr){for(i=Jg,o=[],a=lr();a!==kr;)o.push(a),a=lr();if(o!==kr)if(78===e.charCodeAt(Jg)?(a=hc,Jg++):(a=kr,0===ty&&l(dc)),a===kr&&(110===e.charCodeAt(Jg)?(a=vc,Jg++):(a=kr,0===ty&&l(gc))),a!==kr)if(79===e.charCodeAt(Jg)?(s=yc,Jg++):(s=kr,0===ty&&l(mc)),s===kr&&(111===e.charCodeAt(Jg)?(s=bc,Jg++):(s=kr,0===ty&&l(wc))),s!==kr)if(84===e.charCodeAt(Jg)?(u=xc,Jg++):(u=kr,0===ty&&l($c)),u===kr&&(116===e.charCodeAt(Jg)?(u=kc,Jg++):(u=kr,0===ty&&l(Ec))),u!==kr){for(c=[],f=lr();f!==kr;)c.push(f),f=lr();if(c!==kr)if(73===e.charCodeAt(Jg)?(f=lc,Jg++):(f=kr,0===ty&&l(cc)),f===kr&&(105===e.charCodeAt(Jg)?(f=fc,Jg++):(f=kr,0===ty&&l(pc))),f!==kr)if(78===e.charCodeAt(Jg)?(p=hc,Jg++):(p=kr,0===ty&&l(dc)),p===kr&&(110===e.charCodeAt(Jg)?(p=vc,Jg++):(p=kr,0===ty&&l(gc))),p!==kr){for(h=[],d=lr();d!==kr;)h.push(d),d=lr();h!==kr?(d=Ce(),d!==kr?(o=[o,a,s,u,c,f,p,h,d],i=o):(Jg=i,i=kr)):(Jg=i,i=kr)}else Jg=i,i=kr;else Jg=i,i=kr;else Jg=i,i=kr}else Jg=i,i=kr;else Jg=i,i=kr;else Jg=i,i=kr;else Jg=i,i=kr}}}}}}}for(;i!==kr;){for(n.push(i),i=Jg,o=[],a=lr();a!==kr;)o.push(a),a=lr();if(o!==kr)if(61===e.charCodeAt(Jg)?(a=Kl,Jg++):(a=kr,0===ty&&l(Yl)),a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();s!==kr?(u=mt(),u!==kr?(o=[o,a,s,u],i=o):(Jg=i,i=kr)):(Jg=i,i=kr)}else Jg=i,i=kr;else Jg=i,i=kr;if(i===kr){for(i=Jg,o=[],a=lr();a!==kr;)o.push(a),a=lr();if(o!==kr)if(e.substr(Jg,2)===Zl?(a=Zl,Jg+=2):(a=kr,0===ty&&l(ec)),a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();s!==kr?(u=mt(),u!==kr?(o=[o,a,s,u],i=o):(Jg=i,i=kr)):(Jg=i,i=kr)}else Jg=i,i=kr;else Jg=i,i=kr;if(i===kr){for(i=Jg,o=[],a=lr();a!==kr;)o.push(a),a=lr();if(o!==kr)if(60===e.charCodeAt(Jg)?(a=tc,Jg++):(a=kr,0===ty&&l(rc)),a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();s!==kr?(u=mt(),u!==kr?(o=[o,a,s,u],i=o):(Jg=i,i=kr)):(Jg=i,i=kr)}else Jg=i,i=kr;else Jg=i,i=kr;if(i===kr){for(i=Jg,o=[],a=lr();a!==kr;)o.push(a),a=lr();if(o!==kr)if(62===e.charCodeAt(Jg)?(a=nc,Jg++):(a=kr,0===ty&&l(ic)),a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();s!==kr?(u=mt(),u!==kr?(o=[o,a,s,u],i=o):(Jg=i,i=kr)):(Jg=i,i=kr)}else Jg=i,i=kr;else Jg=i,i=kr;if(i===kr){for(i=Jg,o=[],a=lr();a!==kr;)o.push(a),a=lr();if(o!==kr)if(e.substr(Jg,2)===oc?(a=oc,Jg+=2):(a=kr,0===ty&&l(ac)),a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();s!==kr?(u=mt(),u!==kr?(o=[o,a,s,u],i=o):(Jg=i,i=kr)):(Jg=i,i=kr)}else Jg=i,i=kr;else Jg=i,i=kr;if(i===kr){for(i=Jg,o=[],a=lr();a!==kr;)o.push(a),a=lr();if(o!==kr)if(e.substr(Jg,2)===sc?(a=sc,Jg+=2):(a=kr,0===ty&&l(uc)),a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();s!==kr?(u=mt(),u!==kr?(o=[o,a,s,u],i=o):(Jg=i,i=kr)):(Jg=i,i=kr)}else Jg=i,i=kr;else Jg=i,i=kr;if(i===kr){for(i=Jg,o=[],a=lr();a!==kr;)o.push(a),a=lr();if(o!==kr)if(73===e.charCodeAt(Jg)?(a=lc,Jg++):(a=kr,0===ty&&l(cc)),a===kr&&(105===e.charCodeAt(Jg)?(a=fc,Jg++):(a=kr,0===ty&&l(pc))),a!==kr)if(78===e.charCodeAt(Jg)?(s=hc,Jg++):(s=kr,0===ty&&l(dc)),s===kr&&(110===e.charCodeAt(Jg)?(s=vc,Jg++):(s=kr,0===ty&&l(gc))),s!==kr){for(u=[],c=lr();c!==kr;)u.push(c),c=lr();u!==kr?(c=Ce(),c!==kr?(o=[o,a,s,u,c],i=o):(Jg=i,i=kr)):(Jg=i,i=kr)}else Jg=i,i=kr;else Jg=i,i=kr;else Jg=i,i=kr;if(i===kr){for(i=Jg,o=[],a=lr();a!==kr;)o.push(a),a=lr();if(o!==kr)if(78===e.charCodeAt(Jg)?(a=hc,Jg++):(a=kr,0===ty&&l(dc)),a===kr&&(110===e.charCodeAt(Jg)?(a=vc,Jg++):(a=kr,0===ty&&l(gc))),a!==kr)if(79===e.charCodeAt(Jg)?(s=yc,Jg++):(s=kr,0===ty&&l(mc)),s===kr&&(111===e.charCodeAt(Jg)?(s=bc,Jg++):(s=kr,0===ty&&l(wc))),s!==kr)if(84===e.charCodeAt(Jg)?(u=xc,Jg++):(u=kr,0===ty&&l($c)),u===kr&&(116===e.charCodeAt(Jg)?(u=kc,Jg++):(u=kr,0===ty&&l(Ec))),u!==kr){for(c=[],f=lr();f!==kr;)c.push(f),f=lr();if(c!==kr)if(73===e.charCodeAt(Jg)?(f=lc,Jg++):(f=kr,0===ty&&l(cc)),f===kr&&(105===e.charCodeAt(Jg)?(f=fc,Jg++):(f=kr,0===ty&&l(pc))),f!==kr)if(78===e.charCodeAt(Jg)?(p=hc,Jg++):(p=kr,0===ty&&l(dc)),p===kr&&(110===e.charCodeAt(Jg)?(p=vc,Jg++):(p=kr,0===ty&&l(gc))),p!==kr){for(h=[],d=lr();d!==kr;)h.push(d),d=lr();h!==kr?(d=Ce(),d!==kr?(o=[o,a,s,u,c,f,p,h,d],i=o):(Jg=i,i=kr)):(Jg=i,i=kr)}else Jg=i,i=kr;else Jg=i,i=kr;else Jg=i,i=kr}else Jg=i,i=kr;else Jg=i,i=kr;else Jg=i,i=kr;else Jg=i,i=kr}}}}}}}}n!==kr?(Kg=t,r=_c(r,n),t=r):(Jg=t,t=kr)}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(Jl)),t}function mt(){var e,t;return ty++,e=bt(),ty--,e===kr&&(t=kr,0===ty&&l(Sc)),e}function bt(){var t,r,n,i,o,a,s,u,c,f;if(ty++,t=Jg,r=wt(),r!==kr){for(n=[],i=Jg,o=[],a=lr();a!==kr;)o.push(a),a=lr();if(o!==kr)if(43===e.charCodeAt(Jg)?(a=cl,Jg++):(a=kr,0===ty&&l(fl)),a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();s!==kr?(u=wt(),u!==kr?(o=[o,a,s,u],i=o):(Jg=i,i=kr)):(Jg=i,i=kr)}else Jg=i,i=kr;else Jg=i,i=kr;if(i===kr){for(i=Jg,o=[],a=lr();a!==kr;)o.push(a),a=lr();if(o!==kr)if(45===e.charCodeAt(Jg)?(a=Cc,Jg++):(a=kr,0===ty&&l(Ic)),a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();s!==kr?(u=wt(),u!==kr?(o=[o,a,s,u],i=o):(Jg=i,i=kr)):(Jg=i,i=kr)}else Jg=i,i=kr;else Jg=i,i=kr;if(i===kr)if(i=Jg,o=Rt(),o===kr&&(o=Rt()),o!==kr){for(a=Jg,s=[],u=lr();u!==kr;)s.push(u),u=lr();if(s!==kr)if(42===e.charCodeAt(Jg)?(u=vn,Jg++):(u=kr,0===ty&&l(gn)),u!==kr){for(c=[],f=lr();f!==kr;)c.push(f),f=lr();c!==kr?(f=xt(),f!==kr?(s=[s,u,c,f],a=s):(Jg=a,a=kr)):(Jg=a,a=kr)}else Jg=a,a=kr;else Jg=a,a=kr;if(a===kr){for(a=Jg,s=[],u=lr();u!==kr;)s.push(u),u=lr();if(s!==kr)if(47===e.charCodeAt(Jg)?(u=Yu,Jg++):(u=kr,0===ty&&l(Zu)),u!==kr){for(c=[],f=lr();f!==kr;)c.push(f),f=lr();c!==kr?(f=xt(),f!==kr?(s=[s,u,c,f],a=s):(Jg=a,a=kr)):(Jg=a,a=kr)}else Jg=a,a=kr;else Jg=a,a=kr}a===kr&&(a=null),a!==kr?(o=[o,a],i=o):(Jg=i,i=kr)}else Jg=i,i=kr}for(;i!==kr;){for(n.push(i),i=Jg,o=[],a=lr();a!==kr;)o.push(a),a=lr();if(o!==kr)if(43===e.charCodeAt(Jg)?(a=cl,Jg++):(a=kr,0===ty&&l(fl)),a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();s!==kr?(u=wt(),u!==kr?(o=[o,a,s,u],i=o):(Jg=i,i=kr)):(Jg=i,i=kr)}else Jg=i,i=kr;else Jg=i,i=kr;if(i===kr){for(i=Jg,o=[],a=lr();a!==kr;)o.push(a),a=lr();if(o!==kr)if(45===e.charCodeAt(Jg)?(a=Cc,Jg++):(a=kr,0===ty&&l(Ic)),a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();s!==kr?(u=wt(),u!==kr?(o=[o,a,s,u],i=o):(Jg=i,i=kr)):(Jg=i,i=kr)}else Jg=i,i=kr;else Jg=i,i=kr;if(i===kr)if(i=Jg,o=Rt(),o===kr&&(o=Rt()),o!==kr){for(a=Jg,s=[],u=lr();u!==kr;)s.push(u),u=lr();if(s!==kr)if(42===e.charCodeAt(Jg)?(u=vn,Jg++):(u=kr,0===ty&&l(gn)),u!==kr){for(c=[],f=lr();f!==kr;)c.push(f),f=lr();c!==kr?(f=xt(),f!==kr?(s=[s,u,c,f],a=s):(Jg=a,a=kr)):(Jg=a,a=kr)}else Jg=a,a=kr;else Jg=a,a=kr;if(a===kr){for(a=Jg,s=[],u=lr();u!==kr;)s.push(u),u=lr();if(s!==kr)if(47===e.charCodeAt(Jg)?(u=Yu,Jg++):(u=kr,0===ty&&l(Zu)),u!==kr){for(c=[],f=lr();f!==kr;)c.push(f),f=lr();c!==kr?(f=xt(),f!==kr?(s=[s,u,c,f],a=s):(Jg=a,a=kr)):(Jg=a,a=kr)}else Jg=a,a=kr;else Jg=a,a=kr}a===kr&&(a=null),a!==kr?(o=[o,a],i=o):(Jg=i,i=kr)}else Jg=i,i=kr}}n!==kr?(Kg=t,r=Tc(r,n),t=r):(Jg=t,t=kr)}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(Ac)),t}function wt(){var t,r,n,i,o,a,s,u;if(ty++,t=Jg,r=xt(),r!==kr){for(n=[],i=Jg,o=[],a=lr();a!==kr;)o.push(a),a=lr();if(o!==kr)if(42===e.charCodeAt(Jg)?(a=vn,Jg++):(a=kr,0===ty&&l(gn)),a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();s!==kr?(u=xt(),u!==kr?(o=[o,a,s,u],i=o):(Jg=i,i=kr)):(Jg=i,i=kr)}else Jg=i,i=kr;else Jg=i,i=kr;if(i===kr){for(i=Jg,o=[],a=lr();a!==kr;)o.push(a),a=lr();if(o!==kr)if(47===e.charCodeAt(Jg)?(a=Yu,Jg++):(a=kr,0===ty&&l(Zu)),a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();s!==kr?(u=xt(),u!==kr?(o=[o,a,s,u],i=o):(Jg=i,i=kr)):(Jg=i,i=kr)}else Jg=i,i=kr;else Jg=i,i=kr}for(;i!==kr;){for(n.push(i),i=Jg,o=[],a=lr();a!==kr;)o.push(a),a=lr();if(o!==kr)if(42===e.charCodeAt(Jg)?(a=vn,Jg++):(a=kr,0===ty&&l(gn)),a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();s!==kr?(u=xt(),u!==kr?(o=[o,a,s,u],i=o):(Jg=i,i=kr)):(Jg=i,i=kr)}else Jg=i,i=kr;else Jg=i,i=kr;if(i===kr){for(i=Jg,o=[],a=lr();a!==kr;)o.push(a),a=lr();if(o!==kr)if(47===e.charCodeAt(Jg)?(a=Yu,Jg++):(a=kr,0===ty&&l(Zu)),a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();s!==kr?(u=xt(),u!==kr?(o=[o,a,s,u],i=o):(Jg=i,i=kr)):(Jg=i,i=kr)}else Jg=i,i=kr;else Jg=i,i=kr}}n!==kr?(Kg=t,r=Nc(r,n),t=r):(Jg=t,t=kr)}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(Fc)),t}function xt(){var t,r,n,i;if(ty++,t=Jg,33===e.charCodeAt(Jg)?(r=hl,Jg++):(r=kr,0===ty&&l(dl)),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();n!==kr?(i=$t(),i!==kr?(Kg=t,r=Rc(i),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr;if(t===kr){if(t=Jg,43===e.charCodeAt(Jg)?(r=cl,Jg++):(r=kr,0===ty&&l(fl)),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();n!==kr?(i=$t(),i!==kr?(Kg=t,r=Lc(i),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr;if(t===kr){if(t=Jg,45===e.charCodeAt(Jg)?(r=Cc,Jg++):(r=kr,0===ty&&l(Ic)),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();n!==kr?(i=$t(),i!==kr?(Kg=t,r=Oc(i),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr;t===kr&&(t=$t())}}return ty--,t===kr&&(r=kr,0===ty&&l(jc)),t}function $t(){var e,t;return ty++,e=kt(),e===kr&&(e=Et(),e===kr&&(e=It(),e===kr&&(e=Jg,t=Tt(),t!==kr&&(Kg=e,t=Qc(t)),e=t,e===kr&&(e=Jg,t=Ft(),t!==kr&&(Kg=e,t=Dc(t)),e=t,e===kr&&(e=Jg,t=Lt(),t!==kr&&(Kg=e,t=Mc(t)),e=t,e===kr&&(e=Ct(),e===kr&&(e=Jg,t=ft(),t!==kr&&(Kg=e,t=qc(t)),e=t))))))),ty--,e===kr&&(t=kr,0===ty&&l(Pc)),e}function kt(){var t,r,n,i,o,a;if(ty++,t=Jg,40===e.charCodeAt(Jg)?(r=sn,Jg++):(r=kr,0===ty&&l(un)),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();if(n!==kr)if(i=ht(),i!==kr){for(o=[],a=lr();a!==kr;)o.push(a),a=lr();o!==kr?(41===e.charCodeAt(Jg)?(a=hn,Jg++):(a=kr,0===ty&&l(dn)),a!==kr?(Kg=t,r=Bc(i),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(Uc)),t}function Et(){var t,r,n,i,o,a,s,u,c,f,p,h,d,v,g,y;if(ty++,t=Jg,e.substr(Jg,3)===Hc?(r=Hc,Jg+=3):(r=kr,0===ty&&l(Vc)),r===kr&&(e.substr(Jg,3)===zc?(r=zc,Jg+=3):(r=kr,0===ty&&l(Wc))),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();if(n!==kr)if(40===e.charCodeAt(Jg)?(i=sn,Jg++):(i=kr,0===ty&&l(un)),i!==kr){for(o=[],a=lr();a!==kr;)o.push(a),a=lr();if(o!==kr)if(a=ht(),a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();s!==kr?(41===e.charCodeAt(Jg)?(u=hn,Jg++):(u=kr,0===ty&&l(dn)),u!==kr?(Kg=t,r=Xc(a),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;if(t===kr){if(t=Jg,e.substr(Jg,4)===Jc?(r=Jc,Jg+=4):(r=kr,0===ty&&l(Kc)),r===kr&&(e.substr(Jg,4)===Yc?(r=Yc,Jg+=4):(r=kr,0===ty&&l(Zc))),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();if(n!==kr)if(40===e.charCodeAt(Jg)?(i=sn,Jg++):(i=kr,0===ty&&l(un)),i!==kr){for(o=[],a=lr();a!==kr;)o.push(a),a=lr();if(o!==kr)if(a=ht(),a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();s!==kr?(41===e.charCodeAt(Jg)?(u=hn,Jg++):(u=kr,0===ty&&l(dn)),u!==kr?(Kg=t,r=ef(a),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;if(t===kr){if(t=Jg,e.substr(Jg,11)===tf?(r=tf,Jg+=11):(r=kr,0===ty&&l(rf)),r===kr&&(e.substr(Jg,11)===nf?(r=nf,Jg+=11):(r=kr,0===ty&&l(of))),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();if(n!==kr)if(40===e.charCodeAt(Jg)?(i=sn,Jg++):(i=kr,0===ty&&l(un)),i!==kr){for(o=[],a=lr();a!==kr;)o.push(a),a=lr();if(o!==kr)if(a=ht(),a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();if(s!==kr)if(44===e.charCodeAt(Jg)?(u=cu,Jg++):(u=kr,0===ty&&l(fu)),u!==kr){for(c=[],f=lr();f!==kr;)c.push(f),f=lr();if(c!==kr)if(f=ht(),f!==kr){for(p=[],h=lr();h!==kr;)p.push(h),h=lr();p!==kr?(41===e.charCodeAt(Jg)?(h=hn,Jg++):(h=kr,0===ty&&l(dn)),h!==kr?(Kg=t,r=af(a,f),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;if(t===kr){if(t=Jg,e.substr(Jg,8)===sf?(r=sf,Jg+=8):(r=kr,0===ty&&l(uf)),r===kr&&(e.substr(Jg,8)===lf?(r=lf,Jg+=8):(r=kr,0===ty&&l(cf))),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();if(n!==kr)if(40===e.charCodeAt(Jg)?(i=sn,Jg++):(i=kr,0===ty&&l(un)),i!==kr){for(o=[],a=lr();a!==kr;)o.push(a),a=lr();if(o!==kr)if(a=ht(),a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();s!==kr?(41===e.charCodeAt(Jg)?(u=hn,Jg++):(u=kr,0===ty&&l(dn)),u!==kr?(Kg=t,r=ff(a),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;if(t===kr){if(t=Jg,e.substr(Jg,5)===pf?(r=pf,Jg+=5):(r=kr,0===ty&&l(hf)),r===kr&&(e.substr(Jg,5)===df?(r=df,Jg+=5):(r=kr,0===ty&&l(vf))),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();if(n!==kr)if(40===e.charCodeAt(Jg)?(i=sn,Jg++):(i=kr,0===ty&&l(un)),i!==kr){for(o=[],a=lr();a!==kr;)o.push(a),a=lr();if(o!==kr)if(a=ft(),a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();s!==kr?(41===e.charCodeAt(Jg)?(u=hn,Jg++):(u=kr,0===ty&&l(dn)),u!==kr?(Kg=t,r=gf(a),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;if(t===kr){if(t=Jg,e.substr(Jg,3)===yf?(r=yf,Jg+=3):(r=kr,0===ty&&l(mf)),r===kr&&(e.substr(Jg,3)===bf?(r=bf,Jg+=3):(r=kr,0===ty&&l(wf))),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();if(n!==kr)if(40===e.charCodeAt(Jg)?(i=sn,Jg++):(i=kr,0===ty&&l(un)),i!==kr){for(o=[],a=lr();a!==kr;)o.push(a),a=lr();if(o!==kr)if(a=ht(),a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();s!==kr?(41===e.charCodeAt(Jg)?(u=hn,Jg++):(u=kr,0===ty&&l(dn)),u!==kr?(Kg=t,r=xf(a),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;if(t===kr){if(t=Jg,e.substr(Jg,3)===$f?(r=$f,Jg+=3):(r=kr,0===ty&&l(kf)),r===kr&&(e.substr(Jg,3)===Ef?(r=Ef,Jg+=3):(r=kr,0===ty&&l(_f))),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();if(n!==kr)if(40===e.charCodeAt(Jg)?(i=sn,Jg++):(i=kr,0===ty&&l(un)),i!==kr){for(o=[],a=lr();a!==kr;)o.push(a),a=lr();if(o!==kr)if(a=ht(),a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();s!==kr?(41===e.charCodeAt(Jg)?(u=hn,Jg++):(u=kr,0===ty&&l(dn)),u!==kr?(Kg=t,r=Sf(a),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;if(t===kr){if(t=Jg,e.substr(Jg,5)===Af?(r=Af,Jg+=5):(r=kr,0===ty&&l(Cf)),r===kr&&(e.substr(Jg,5)===If?(r=If,Jg+=5):(r=kr,0===ty&&l(Tf))),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();if(n!==kr){if(i=Jg,40===e.charCodeAt(Jg)?(o=sn,Jg++):(o=kr,0===ty&&l(un)),o!==kr){for(a=[],s=lr();s!==kr;)a.push(s),s=lr();if(a!==kr)if(s=ht(),s!==kr){for(u=[],c=lr();c!==kr;)u.push(c),c=lr();u!==kr?(41===e.charCodeAt(Jg)?(c=hn,Jg++):(c=kr,0===ty&&l(dn)),c!==kr?(o=[o,a,s,u,c],i=o):(Jg=i,i=kr)):(Jg=i,i=kr)}else Jg=i,i=kr;else Jg=i,i=kr}else Jg=i,i=kr;i===kr&&(i=ur()),i!==kr?(Kg=t,r=Ff(i),t=r):(Jg=t,t=kr)}else Jg=t,t=kr}else Jg=t,t=kr;if(t===kr){if(t=Jg,e.substr(Jg,8)===Nf?(r=Nf,Jg+=8):(r=kr,0===ty&&l(jf)),r===kr&&(e.substr(Jg,8)===Rf?(r=Rf,Jg+=8):(r=kr,0===ty&&l(Lf))),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();n!==kr?(i=Ce(),i!==kr?(Kg=t,r=Of(i),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr;if(t===kr){if(t=Jg,e.substr(Jg,2)===Pf?(r=Pf,Jg+=2):(r=kr,0===ty&&l(Qf)),r===kr&&(e.substr(Jg,2)===Df?(r=Df,Jg+=2):(r=kr,0===ty&&l(Mf))),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();if(n!==kr)if(40===e.charCodeAt(Jg)?(i=sn,Jg++):(i=kr,0===ty&&l(un)),i!==kr){for(o=[],a=lr();a!==kr;)o.push(a),a=lr();if(o!==kr)if(a=ht(),a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();if(s!==kr)if(44===e.charCodeAt(Jg)?(u=cu,Jg++):(u=kr,0===ty&&l(fu)),u!==kr){for(c=[],f=lr();f!==kr;)c.push(f),f=lr();if(c!==kr)if(f=ht(),f!==kr){for(p=[],h=lr();h!==kr;)p.push(h),h=lr();if(p!==kr)if(44===e.charCodeAt(Jg)?(h=cu,Jg++):(h=kr,0===ty&&l(fu)),h!==kr){for(d=[],v=lr();v!==kr;)d.push(v),v=lr();if(d!==kr)if(v=ht(),v!==kr){for(g=[],y=lr();y!==kr;)g.push(y),y=lr();g!==kr?(41===e.charCodeAt(Jg)?(y=hn,Jg++):(y=kr,0===ty&&l(dn)),y!==kr?(Kg=t,r=qf(a,f,v),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;if(t===kr){if(t=Jg,e.substr(Jg,9)===Uf?(r=Uf,Jg+=9):(r=kr,0===ty&&l(Bf)),r===kr&&(e.substr(Jg,9)===Gf?(r=Gf,Jg+=9):(r=kr,0===ty&&l(Hf)),r===kr&&(e.substr(Jg,9)===Vf?(r=Vf,Jg+=9):(r=kr,0===ty&&l(zf)))),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();if(n!==kr)if(40===e.charCodeAt(Jg)?(i=sn,Jg++):(i=kr,0===ty&&l(un)),i!==kr){for(o=[],a=lr();a!==kr;)o.push(a),a=lr();if(o!==kr)if(a=ht(),a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();s!==kr?(41===e.charCodeAt(Jg)?(u=hn,Jg++):(u=kr,0===ty&&l(dn)),u!==kr?(Kg=t,r=Wf(a),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;if(t===kr){if(t=Jg,e.substr(Jg,7)===Xf?(r=Xf,Jg+=7):(r=kr,0===ty&&l(Jf)),r===kr&&(e.substr(Jg,7)===Kf?(r=Kf,Jg+=7):(r=kr,0===ty&&l(Yf)),r===kr&&(e.substr(Jg,7)===Zf?(r=Zf,Jg+=7):(r=kr,0===ty&&l(ep)))),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();if(n!==kr)if(40===e.charCodeAt(Jg)?(i=sn,Jg++):(i=kr,0===ty&&l(un)),i!==kr){for(o=[],a=lr();a!==kr;)o.push(a),a=lr();if(o!==kr)if(a=ht(),a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();s!==kr?(41===e.charCodeAt(Jg)?(u=hn,Jg++):(u=kr,0===ty&&l(dn)),u!==kr?(Kg=t,r=tp(a),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;if(t===kr){if(t=Jg,e.substr(Jg,8)===rp?(r=rp,Jg+=8):(r=kr,0===ty&&l(np)),r===kr&&(e.substr(Jg,8)===ip?(r=ip,Jg+=8):(r=kr,0===ty&&l(op))),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();if(n!==kr)if(40===e.charCodeAt(Jg)?(i=sn,Jg++):(i=kr,0===ty&&l(un)),i!==kr){for(o=[],a=lr();a!==kr;)o.push(a),a=lr();if(o!==kr)if(a=ht(),a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();if(s!==kr)if(44===e.charCodeAt(Jg)?(u=cu,Jg++):(u=kr,0===ty&&l(fu)),u!==kr){for(c=[],f=lr();f!==kr;)c.push(f),f=lr();if(c!==kr)if(f=ht(),f!==kr){for(p=[],h=lr();h!==kr;)p.push(h),h=lr();p!==kr?(41===e.charCodeAt(Jg)?(h=hn,Jg++):(h=kr,0===ty&&l(dn)),h!==kr?(Kg=t,r=ap(a,f),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;if(t===kr){if(t=Jg,e.substr(Jg,5)===sp?(r=sp,Jg+=5):(r=kr,0===ty&&l(up)),r===kr&&(e.substr(Jg,5)===lp?(r=lp,Jg+=5):(r=kr,0===ty&&l(cp)),r===kr&&(e.substr(Jg,5)===fp?(r=fp,Jg+=5):(r=kr,0===ty&&l(pp)),r===kr&&(e.substr(Jg,5)===hp?(r=hp,Jg+=5):(r=kr,0===ty&&l(dp)),r===kr&&(e.substr(Jg,5)===vp?(r=vp,Jg+=5):(r=kr,0===ty&&l(gp)),r===kr&&(e.substr(Jg,5)===yp?(r=yp,Jg+=5):(r=kr,0===ty&&l(mp))))))),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();if(n!==kr)if(40===e.charCodeAt(Jg)?(i=sn,Jg++):(i=kr,0===ty&&l(un)),i!==kr){for(o=[],a=lr();a!==kr;)o.push(a),a=lr();if(o!==kr)if(a=ht(),a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();s!==kr?(41===e.charCodeAt(Jg)?(u=hn,Jg++):(u=kr,0===ty&&l(dn)),u!==kr?(Kg=t,r=bp(a),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;if(t===kr){if(t=Jg,e.substr(Jg,7)===wp?(r=wp,Jg+=7):(r=kr,0===ty&&l(xp)),r===kr&&(e.substr(Jg,7)===$p?(r=$p,Jg+=7):(r=kr,0===ty&&l(kp))),r!==kr){if(n=[],Ep.test(e.charAt(Jg))?(i=e.charAt(Jg),Jg++):(i=kr,0===ty&&l(_p)),i!==kr)for(;i!==kr;)n.push(i),Ep.test(e.charAt(Jg))?(i=e.charAt(Jg),Jg++):(i=kr,0===ty&&l(_p));else n=kr;if(n!==kr){for(i=[],o=lr();o!==kr;)i.push(o),o=lr();if(i!==kr)if(40===e.charCodeAt(Jg)?(o=sn,Jg++):(o=kr,0===ty&&l(un)),o!==kr){for(a=[],s=Jg,u=[],c=lr();c!==kr;)u.push(c),c=lr();for(u!==kr?(c=ht(),c!==kr?(44===e.charCodeAt(Jg)?(f=cu,
Jg++):(f=kr,0===ty&&l(fu)),f!==kr?(u=[u,c,f],s=u):(Jg=s,s=kr)):(Jg=s,s=kr)):(Jg=s,s=kr);s!==kr;){for(a.push(s),s=Jg,u=[],c=lr();c!==kr;)u.push(c),c=lr();u!==kr?(c=ht(),c!==kr?(44===e.charCodeAt(Jg)?(f=cu,Jg++):(f=kr,0===ty&&l(fu)),f!==kr?(u=[u,c,f],s=u):(Jg=s,s=kr)):(Jg=s,s=kr)):(Jg=s,s=kr)}if(a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();if(s!==kr)if(u=ht(),u!==kr){for(c=[],f=lr();f!==kr;)c.push(f),f=lr();c!==kr?(41===e.charCodeAt(Jg)?(f=hn,Jg++):(f=kr,0===ty&&l(dn)),f!==kr?(Kg=t,r=Sp(n,a,u),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr}else Jg=t,t=kr;t===kr&&(t=_t(),t===kr&&(t=St(),t===kr&&(t=At())))}}}}}}}}}}}}}}return ty--,t===kr&&(r=kr,0===ty&&l(Gc)),t}function _t(){var t,r,n,i,o,a,s,u,c,f,p,h,d,v,g;if(ty++,t=Jg,e.substr(Jg,5)===Cp?(r=Cp,Jg+=5):(r=kr,0===ty&&l(Ip)),r===kr&&(e.substr(Jg,5)===Tp?(r=Tp,Jg+=5):(r=kr,0===ty&&l(Fp))),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();if(n!==kr)if(40===e.charCodeAt(Jg)?(i=sn,Jg++):(i=kr,0===ty&&l(un)),i!==kr){for(o=[],a=lr();a!==kr;)o.push(a),a=lr();if(o!==kr)if(a=ht(),a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();if(s!==kr)if(44===e.charCodeAt(Jg)?(u=cu,Jg++):(u=kr,0===ty&&l(fu)),u!==kr){for(c=[],f=lr();f!==kr;)c.push(f),f=lr();if(c!==kr)if(f=ht(),f!==kr){for(p=[],h=lr();h!==kr;)p.push(h),h=lr();if(p!==kr){if(h=Jg,44===e.charCodeAt(Jg)?(d=cu,Jg++):(d=kr,0===ty&&l(fu)),d!==kr){for(v=[],g=lr();g!==kr;)v.push(g),g=lr();v!==kr?(g=ht(),g!==kr?(d=[d,v,g],h=d):(Jg=h,h=kr)):(Jg=h,h=kr)}else Jg=h,h=kr;if(h===kr&&(h=null),h!==kr){for(d=[],v=lr();v!==kr;)d.push(v),v=lr();d!==kr?(41===e.charCodeAt(Jg)?(v=hn,Jg++):(v=kr,0===ty&&l(dn)),v!==kr?(Kg=t,r=Np(a,f,h),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr}else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(Ap)),t}function St(){var t,r,n,i;if(ty++,t=Jg,e.substr(Jg,6)===Rp?(r=Rp,Jg+=6):(r=kr,0===ty&&l(Lp)),r===kr&&(e.substr(Jg,6)===Op?(r=Op,Jg+=6):(r=kr,0===ty&&l(Pp))),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();n!==kr?(i=le(),i!==kr?(Kg=t,r=Qp(i),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(jp)),t}function At(){var t,r,n,i,o,a;if(ty++,t=Jg,e.substr(Jg,3)===Mp?(r=Mp,Jg+=3):(r=kr,0===ty&&l(qp)),r===kr&&(e.substr(Jg,3)===Up?(r=Up,Jg+=3):(r=kr,0===ty&&l(Bp))),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();if(n!==kr)if(e.substr(Jg,6)===Rp?(i=Rp,Jg+=6):(i=kr,0===ty&&l(Lp)),i===kr&&(e.substr(Jg,6)===Op?(i=Op,Jg+=6):(i=kr,0===ty&&l(Pp))),i!==kr){for(o=[],a=lr();a!==kr;)o.push(a),a=lr();o!==kr?(a=le(),a!==kr?(Kg=t,r=Gp(a),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(Dp)),t}function Ct(){var t,r,n,i,o,a,s,u,c,f,p,h,d,v,g,y,m,b;if(ty++,t=Jg,e.substr(Jg,5)===Vp?(r=Vp,Jg+=5):(r=kr,0===ty&&l(zp)),r===kr&&(e.substr(Jg,5)===Wp?(r=Wp,Jg+=5):(r=kr,0===ty&&l(Xp))),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();if(n!==kr)if(40===e.charCodeAt(Jg)?(i=sn,Jg++):(i=kr,0===ty&&l(un)),i!==kr){for(o=[],a=lr();a!==kr;)o.push(a),a=lr();if(o!==kr)if(e.substr(Jg,8)===Yr?(a=Yr,Jg+=8):(a=kr,0===ty&&l(Zr)),a===kr&&(e.substr(Jg,8)===en?(a=en,Jg+=8):(a=kr,0===ty&&l(tn))),a===kr&&(a=null),a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();if(s!==kr)if(42===e.charCodeAt(Jg)?(u=vn,Jg++):(u=kr,0===ty&&l(gn)),u===kr&&(u=ht()),u!==kr){for(c=[],f=lr();f!==kr;)c.push(f),f=lr();if(c!==kr)if(41===e.charCodeAt(Jg)?(f=hn,Jg++):(f=kr,0===ty&&l(dn)),f!==kr){for(p=[],h=lr();h!==kr;)p.push(h),h=lr();p!==kr?(Kg=t,r=Jp(a,u),t=r):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;if(t===kr){if(t=Jg,e.substr(Jg,12)===Kp?(r=Kp,Jg+=12):(r=kr,0===ty&&l(Yp)),r===kr&&(e.substr(Jg,12)===Zp?(r=Zp,Jg+=12):(r=kr,0===ty&&l(eh))),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();if(n!==kr)if(40===e.charCodeAt(Jg)?(i=sn,Jg++):(i=kr,0===ty&&l(un)),i!==kr){for(o=[],a=lr();a!==kr;)o.push(a),a=lr();if(o!==kr)if(e.substr(Jg,8)===Yr?(a=Yr,Jg+=8):(a=kr,0===ty&&l(Zr)),a===kr&&(e.substr(Jg,8)===en?(a=en,Jg+=8):(a=kr,0===ty&&l(tn))),a===kr&&(a=null),a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();if(s!==kr)if(u=ht(),u!==kr){if(c=Jg,59===e.charCodeAt(Jg)?(f=mo,Jg++):(f=kr,0===ty&&l(bo)),f!==kr){for(p=[],h=lr();h!==kr;)p.push(h),h=lr();if(p!==kr)if(e.substr(Jg,9)===th?(h=th,Jg+=9):(h=kr,0===ty&&l(rh)),h!==kr){for(d=[],v=lr();v!==kr;)d.push(v),v=lr();if(d!==kr)if(61===e.charCodeAt(Jg)?(v=Kl,Jg++):(v=kr,0===ty&&l(Yl)),v!==kr){for(g=[],y=lr();y!==kr;)g.push(y),y=lr();if(g!==kr)if(y=Ot(),y!==kr){for(m=[],b=lr();b!==kr;)m.push(b),b=lr();m!==kr?(f=[f,p,h,d,v,g,y,m],c=f):(Jg=c,c=kr)}else Jg=c,c=kr;else Jg=c,c=kr}else Jg=c,c=kr;else Jg=c,c=kr}else Jg=c,c=kr;else Jg=c,c=kr}else Jg=c,c=kr;if(c===kr&&(c=null),c!==kr)if(41===e.charCodeAt(Jg)?(f=hn,Jg++):(f=kr,0===ty&&l(dn)),f!==kr){for(p=[],h=lr();h!==kr;)p.push(h),h=lr();p!==kr?(Kg=t,r=nh(a,u,c),t=r):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;if(t===kr){if(t=Jg,e.substr(Jg,3)===ih?(r=ih,Jg+=3):(r=kr,0===ty&&l(oh)),r===kr&&(e.substr(Jg,3)===ah?(r=ah,Jg+=3):(r=kr,0===ty&&l(sh))),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();if(n!==kr)if(40===e.charCodeAt(Jg)?(i=sn,Jg++):(i=kr,0===ty&&l(un)),i!==kr){for(o=[],a=lr();a!==kr;)o.push(a),a=lr();if(o!==kr)if(e.substr(Jg,8)===Yr?(a=Yr,Jg+=8):(a=kr,0===ty&&l(Zr)),a===kr&&(e.substr(Jg,8)===en?(a=en,Jg+=8):(a=kr,0===ty&&l(tn))),a===kr&&(a=null),a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();if(s!==kr)if(u=ht(),u!==kr){for(c=[],f=lr();f!==kr;)c.push(f),f=lr();if(c!==kr)if(41===e.charCodeAt(Jg)?(f=hn,Jg++):(f=kr,0===ty&&l(dn)),f!==kr){for(p=[],h=lr();h!==kr;)p.push(h),h=lr();p!==kr?(Kg=t,r=uh(a,u),t=r):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;if(t===kr){if(t=Jg,e.substr(Jg,3)===lh?(r=lh,Jg+=3):(r=kr,0===ty&&l(ch)),r===kr&&(e.substr(Jg,3)===fh?(r=fh,Jg+=3):(r=kr,0===ty&&l(ph))),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();if(n!==kr)if(40===e.charCodeAt(Jg)?(i=sn,Jg++):(i=kr,0===ty&&l(un)),i!==kr){for(o=[],a=lr();a!==kr;)o.push(a),a=lr();if(o!==kr)if(e.substr(Jg,8)===Yr?(a=Yr,Jg+=8):(a=kr,0===ty&&l(Zr)),a===kr&&(e.substr(Jg,8)===en?(a=en,Jg+=8):(a=kr,0===ty&&l(tn))),a===kr&&(a=null),a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();if(s!==kr)if(u=ht(),u!==kr){for(c=[],f=lr();f!==kr;)c.push(f),f=lr();if(c!==kr)if(41===e.charCodeAt(Jg)?(f=hn,Jg++):(f=kr,0===ty&&l(dn)),f!==kr){for(p=[],h=lr();h!==kr;)p.push(h),h=lr();p!==kr?(Kg=t,r=hh(a,u),t=r):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;if(t===kr){if(t=Jg,e.substr(Jg,3)===dh?(r=dh,Jg+=3):(r=kr,0===ty&&l(vh)),r===kr&&(e.substr(Jg,3)===gh?(r=gh,Jg+=3):(r=kr,0===ty&&l(yh))),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();if(n!==kr)if(40===e.charCodeAt(Jg)?(i=sn,Jg++):(i=kr,0===ty&&l(un)),i!==kr){for(o=[],a=lr();a!==kr;)o.push(a),a=lr();if(o!==kr)if(e.substr(Jg,8)===Yr?(a=Yr,Jg+=8):(a=kr,0===ty&&l(Zr)),a===kr&&(e.substr(Jg,8)===en?(a=en,Jg+=8):(a=kr,0===ty&&l(tn))),a===kr&&(a=null),a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();if(s!==kr)if(u=ht(),u!==kr){for(c=[],f=lr();f!==kr;)c.push(f),f=lr();if(c!==kr)if(41===e.charCodeAt(Jg)?(f=hn,Jg++):(f=kr,0===ty&&l(dn)),f!==kr){for(p=[],h=lr();h!==kr;)p.push(h),h=lr();p!==kr?(Kg=t,r=mh(a,u),t=r):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;if(t===kr)if(t=Jg,e.substr(Jg,3)===bh?(r=bh,Jg+=3):(r=kr,0===ty&&l(wh)),r===kr&&(e.substr(Jg,3)===xh?(r=xh,Jg+=3):(r=kr,0===ty&&l($h))),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();if(n!==kr)if(40===e.charCodeAt(Jg)?(i=sn,Jg++):(i=kr,0===ty&&l(un)),i!==kr){for(o=[],a=lr();a!==kr;)o.push(a),a=lr();if(o!==kr)if(e.substr(Jg,8)===Yr?(a=Yr,Jg+=8):(a=kr,0===ty&&l(Zr)),a===kr&&(e.substr(Jg,8)===en?(a=en,Jg+=8):(a=kr,0===ty&&l(tn))),a===kr&&(a=null),a!==kr){for(s=[],u=lr();u!==kr;)s.push(u),u=lr();if(s!==kr)if(u=ht(),u!==kr){for(c=[],f=lr();f!==kr;)c.push(f),f=lr();if(c!==kr)if(41===e.charCodeAt(Jg)?(f=hn,Jg++):(f=kr,0===ty&&l(dn)),f!==kr){for(p=[],h=lr();h!==kr;)p.push(h),h=lr();p!==kr?(Kg=t,r=kh(a,u),t=r):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr;else Jg=t,t=kr}else Jg=t,t=kr}}}}return ty--,t===kr&&(r=kr,0===ty&&l(Hp)),t}function It(){var e,t,r,n;if(ty++,e=Jg,t=Pt(),t!==kr){for(r=[],n=lr();n!==kr;)r.push(n),n=lr();r!==kr?(n=Ae(),n===kr&&(n=null),n!==kr?(Kg=e,t=_h(t,n),e=t):(Jg=e,e=kr)):(Jg=e,e=kr)}else Jg=e,e=kr;return ty--,e===kr&&(t=kr,0===ty&&l(Eh)),e}function Tt(){var t,r,n,i,o;return ty++,t=Jg,r=Ot(),r!==kr?(n=Vt(),n===kr&&(n=Jg,e.substr(Jg,2)===Ah?(i=Ah,Jg+=2):(i=kr,0===ty&&l(Ch)),i!==kr?(o=Pt(),o!==kr?(i=[i,o],n=i):(Jg=n,n=kr)):(Jg=n,n=kr)),n===kr&&(n=null),n!==kr?(Kg=t,r=Ih(r,n),t=r):(Jg=t,t=kr)):(Jg=t,t=kr),ty--,t===kr&&(r=kr,0===ty&&l(Sh)),t}function Ft(){var e,t;return ty++,e=Nt(),e===kr&&(e=jt(),e===kr&&(e=Rt())),ty--,e===kr&&(t=kr,0===ty&&l(Th)),e}function Nt(){var e,t;return ty++,e=Xt(),e===kr&&(e=Wt(),e===kr&&(e=zt())),ty--,e===kr&&(t=kr,0===ty&&l(Fh)),e}function jt(){var e,t;return ty++,e=Yt(),e===kr&&(e=Kt(),e===kr&&(e=Jt())),ty--,e===kr&&(t=kr,0===ty&&l(Nh)),e}function Rt(){var e,t;return ty++,e=tr(),e===kr&&(e=er(),e===kr&&(e=Zt())),ty--,e===kr&&(t=kr,0===ty&&l(jh)),e}function Lt(){var t,r;return ty++,t=Jg,e.substr(Jg,4)===Lh?(r=Lh,Jg+=4):(r=kr,0===ty&&l(Oh)),r===kr&&(e.substr(Jg,4)===Ph?(r=Ph,Jg+=4):(r=kr,0===ty&&l(Qh))),r!==kr&&(Kg=t,r=Dh()),t=r,t===kr&&(t=Jg,e.substr(Jg,5)===Mh?(r=Mh,Jg+=5):(r=kr,0===ty&&l(qh)),r===kr&&(e.substr(Jg,5)===Uh?(r=Uh,Jg+=5):(r=kr,0===ty&&l(Bh))),r!==kr&&(Kg=t,r=Gh()),t=r),ty--,t===kr&&(r=kr,0===ty&&l(Rh)),t}function Ot(){var e,t;return ty++,e=Jg,t=or(),t!==kr&&(Kg=e,t=Vh(t)),e=t,e===kr&&(e=Jg,t=ar(),t!==kr&&(Kg=e,t=Vh(t)),e=t,e===kr&&(e=Jg,t=nr(),t!==kr&&(Kg=e,t=Vh(t)),e=t,e===kr&&(e=Jg,t=ir(),t!==kr&&(Kg=e,t=Vh(t)),e=t))),ty--,e===kr&&(t=kr,0===ty&&l(Hh)),e}function Pt(){var e,t;return ty++,e=Jg,t=Mt(),t!==kr&&(Kg=e,t=Wh(t)),e=t,e===kr&&(e=Jg,t=Qt(),t!==kr&&(Kg=e,t=Xh(t)),e=t),ty--,e===kr&&(t=kr,0===ty&&l(zh)),e}function Qt(){var e,t;return ty++,e=Jg,t=Ut(),t!==kr&&(Kg=e,t=Kh(t)),e=t,e===kr&&(e=Jg,t=qt(),t!==kr&&(Kg=e,t=Yh(t)),e=t),ty--,e===kr&&(t=kr,0===ty&&l(Jh)),e}function Dt(){var e,t;return ty++,e=Jg,t=Bt(),t!==kr&&(Kg=e,t=ed(t)),e=t,e===kr&&(e=Jg,t=fr(),t!==kr&&(Kg=e,t=td()),e=t),ty--,e===kr&&(t=kr,0===ty&&l(Zh)),e}function Mt(){var t,r,n,i;if(ty++,t=Jg,60===e.charCodeAt(Jg)?(r=tc,Jg++):(r=kr,0===ty&&l(rc)),r!==kr){for(n=[],nd.test(e.charAt(Jg))?(i=e.charAt(Jg),Jg++):(i=kr,0===ty&&l(id));i!==kr;)n.push(i),nd.test(e.charAt(Jg))?(i=e.charAt(Jg),Jg++):(i=kr,0===ty&&l(id));n!==kr?(62===e.charCodeAt(Jg)?(i=nc,Jg++):(i=kr,0===ty&&l(ic)),i!==kr?(Kg=t,r=od(n),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(rd)),t}function qt(){var t,r,n;return ty++,t=Jg,r=gr(),r===kr&&(r=null),r!==kr?(58===e.charCodeAt(Jg)?(n=sd,Jg++):(n=kr,0===ty&&l(ud)),n!==kr?(Kg=t,r=Xh(r),t=r):(Jg=t,t=kr)):(Jg=t,t=kr),ty--,t===kr&&(r=kr,0===ty&&l(ad)),t}function Ut(){var e,t,r;return ty++,e=Jg,t=qt(),t!==kr?(r=yr(),r!==kr?(Kg=e,t=cd(t,r),e=t):(Jg=e,e=kr)):(Jg=e,e=kr),ty--,e===kr&&(t=kr,0===ty&&l(ld)),e}function Bt(){var t,r,n;return ty++,t=Jg,e.substr(Jg,2)===pd?(r=pd,Jg+=2):(r=kr,0===ty&&l(hd)),r!==kr?(n=yr(),n!==kr?(Kg=t,r=dd(n),t=r):(Jg=t,t=kr)):(Jg=t,t=kr),ty--,t===kr&&(r=kr,0===ty&&l(fd)),t}function Gt(){var t,r,n;return ty++,t=Jg,63===e.charCodeAt(Jg)?(r=ul,Jg++):(r=kr,0===ty&&l(ll)),r!==kr?(n=dr(),n!==kr?(Kg=t,r=gd(n),t=r):(Jg=t,t=kr)):(Jg=t,t=kr),ty--,t===kr&&(r=kr,0===ty&&l(vd)),t}function Ht(){var t,r,n;return ty++,t=Jg,36===e.charCodeAt(Jg)?(r=md,Jg++):(r=kr,0===ty&&l(bd)),r!==kr?(n=dr(),n!==kr?(Kg=t,r=gd(n),t=r):(Jg=t,t=kr)):(Jg=t,t=kr),ty--,t===kr&&(r=kr,0===ty&&l(yd)),t}function Vt(){var t,r,n,i,o,a,s,u;if(ty++,t=Jg,64===e.charCodeAt(Jg)?(r=xd,Jg++):(r=kr,0===ty&&l($d)),r!==kr){if(n=[],kd.test(e.charAt(Jg))?(i=e.charAt(Jg),Jg++):(i=kr,0===ty&&l(Ed)),i!==kr)for(;i!==kr;)n.push(i),kd.test(e.charAt(Jg))?(i=e.charAt(Jg),Jg++):(i=kr,0===ty&&l(Ed));else n=kr;if(n!==kr){if(i=[],o=Jg,45===e.charCodeAt(Jg)?(a=Cc,Jg++):(a=kr,0===ty&&l(Ic)),a!==kr){if(s=[],_d.test(e.charAt(Jg))?(u=e.charAt(Jg),Jg++):(u=kr,0===ty&&l(Sd)),u!==kr)for(;u!==kr;)s.push(u),_d.test(e.charAt(Jg))?(u=e.charAt(Jg),Jg++):(u=kr,0===ty&&l(Sd));else s=kr;s!==kr?(a=[a,s],o=a):(Jg=o,o=kr)}else Jg=o,o=kr;for(;o!==kr;)if(i.push(o),o=Jg,45===e.charCodeAt(Jg)?(a=Cc,Jg++):(a=kr,0===ty&&l(Ic)),a!==kr){if(s=[],_d.test(e.charAt(Jg))?(u=e.charAt(Jg),Jg++):(u=kr,0===ty&&l(Sd)),u!==kr)for(;u!==kr;)s.push(u),_d.test(e.charAt(Jg))?(u=e.charAt(Jg),Jg++):(u=kr,0===ty&&l(Sd));else s=kr;s!==kr?(a=[a,s],o=a):(Jg=o,o=kr)}else Jg=o,o=kr;i!==kr?(Kg=t,r=Ad(n,i),t=r):(Jg=t,t=kr)}else Jg=t,t=kr}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(wd)),t}function zt(){var t,r,n;if(ty++,t=Jg,r=[],Id.test(e.charAt(Jg))?(n=e.charAt(Jg),Jg++):(n=kr,0===ty&&l(Td)),n!==kr)for(;n!==kr;)r.push(n),Id.test(e.charAt(Jg))?(n=e.charAt(Jg),Jg++):(n=kr,0===ty&&l(Td));else r=kr;return r!==kr&&(Kg=t,r=Fd(r)),t=r,ty--,t===kr&&(r=kr,0===ty&&l(Cd)),t}function Wt(){var t,r,n,i,o;if(ty++,t=Jg,r=[],Id.test(e.charAt(Jg))?(n=e.charAt(Jg),Jg++):(n=kr,0===ty&&l(Td)),n!==kr)for(;n!==kr;)r.push(n),Id.test(e.charAt(Jg))?(n=e.charAt(Jg),Jg++):(n=kr,0===ty&&l(Td));else r=kr;if(r!==kr)if(46===e.charCodeAt(Jg)?(n=ts,Jg++):(n=kr,0===ty&&l(rs)),n!==kr){for(i=[],Id.test(e.charAt(Jg))?(o=e.charAt(Jg),Jg++):(o=kr,0===ty&&l(Td));o!==kr;)i.push(o),Id.test(e.charAt(Jg))?(o=e.charAt(Jg),Jg++):(o=kr,0===ty&&l(Td));i!==kr?(Kg=t,r=jd(r,n,i),t=r):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr;if(t===kr)if(t=Jg,46===e.charCodeAt(Jg)?(r=ts,Jg++):(r=kr,0===ty&&l(rs)),r!==kr){if(n=[],Id.test(e.charAt(Jg))?(i=e.charAt(Jg),Jg++):(i=kr,0===ty&&l(Td)),i!==kr)for(;i!==kr;)n.push(i),Id.test(e.charAt(Jg))?(i=e.charAt(Jg),Jg++):(i=kr,0===ty&&l(Td));else n=kr;n!==kr?(Kg=t,r=Rd(r,n),t=r):(Jg=t,t=kr)}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(Nd)),t}function Xt(){var t,r,n,i,o;if(ty++,t=Jg,r=[],Id.test(e.charAt(Jg))?(n=e.charAt(Jg),Jg++):(n=kr,0===ty&&l(Td)),n!==kr)for(;n!==kr;)r.push(n),Id.test(e.charAt(Jg))?(n=e.charAt(Jg),Jg++):(n=kr,0===ty&&l(Td));else r=kr;if(r!==kr)if(46===e.charCodeAt(Jg)?(n=ts,Jg++):(n=kr,0===ty&&l(rs)),n!==kr){for(i=[],Id.test(e.charAt(Jg))?(o=e.charAt(Jg),Jg++):(o=kr,0===ty&&l(Td));o!==kr;)i.push(o),Id.test(e.charAt(Jg))?(o=e.charAt(Jg),Jg++):(o=kr,0===ty&&l(Td));i!==kr?(o=rr(),o!==kr?(Kg=t,r=Od(r,n,i,o),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr;if(t===kr){if(t=Jg,46===e.charCodeAt(Jg)?(r=ts,Jg++):(r=kr,0===ty&&l(rs)),r!==kr){if(n=[],Id.test(e.charAt(Jg))?(i=e.charAt(Jg),Jg++):(i=kr,0===ty&&l(Td)),i!==kr)for(;i!==kr;)n.push(i),Id.test(e.charAt(Jg))?(i=e.charAt(Jg),Jg++):(i=kr,0===ty&&l(Td));else n=kr;n!==kr?(i=rr(),i!==kr?(Kg=t,r=Pd(r,n,i),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr;if(t===kr){if(t=Jg,r=[],Id.test(e.charAt(Jg))?(n=e.charAt(Jg),Jg++):(n=kr,0===ty&&l(Td)),n!==kr)for(;n!==kr;)r.push(n),Id.test(e.charAt(Jg))?(n=e.charAt(Jg),Jg++):(n=kr,0===ty&&l(Td));else r=kr;r!==kr?(n=rr(),n!==kr?(Kg=t,r=Qd(r,n),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}}return ty--,t===kr&&(r=kr,0===ty&&l(Ld)),t}function Jt(){var t,r,n;return ty++,t=Jg,43===e.charCodeAt(Jg)?(r=cl,Jg++):(r=kr,0===ty&&l(fl)),r!==kr?(n=zt(),n!==kr?(Kg=t,r=Md(n),t=r):(Jg=t,t=kr)):(Jg=t,t=kr),ty--,t===kr&&(r=kr,0===ty&&l(Dd)),t}function Kt(){var t,r,n;return ty++,t=Jg,43===e.charCodeAt(Jg)?(r=cl,Jg++):(r=kr,0===ty&&l(fl)),r!==kr?(n=Wt(),n!==kr?(Kg=t,r=Ud(n),t=r):(Jg=t,t=kr)):(Jg=t,t=kr),ty--,t===kr&&(r=kr,0===ty&&l(qd)),t}function Yt(){var t,r,n;return ty++,t=Jg,43===e.charCodeAt(Jg)?(r=cl,Jg++):(r=kr,0===ty&&l(fl)),r!==kr?(n=Xt(),n!==kr?(Kg=t,r=Ud(n),t=r):(Jg=t,t=kr)):(Jg=t,t=kr),ty--,t===kr&&(r=kr,0===ty&&l(Bd)),t}function Zt(){var t,r,n;return ty++,t=Jg,45===e.charCodeAt(Jg)?(r=Cc,Jg++):(r=kr,0===ty&&l(Ic)),r!==kr?(n=zt(),n!==kr?(Kg=t,r=Hd(n),t=r):(Jg=t,t=kr)):(Jg=t,t=kr),ty--,t===kr&&(r=kr,0===ty&&l(Gd)),t}function er(){var t,r,n;return ty++,t=Jg,45===e.charCodeAt(Jg)?(r=Cc,Jg++):(r=kr,0===ty&&l(Ic)),r!==kr?(n=Wt(),n!==kr?(Kg=t,r=Hd(n),t=r):(Jg=t,t=kr)):(Jg=t,t=kr),ty--,t===kr&&(r=kr,0===ty&&l(Vd)),t}function tr(){var t,r,n;return ty++,t=Jg,45===e.charCodeAt(Jg)?(r=Cc,Jg++):(r=kr,0===ty&&l(Ic)),r!==kr?(n=Xt(),n!==kr?(Kg=t,r=Hd(n),t=r):(Jg=t,t=kr)):(Jg=t,t=kr),ty--,t===kr&&(r=kr,0===ty&&l(zd)),t}function rr(){var t,r,n,i,o;if(ty++,t=Jg,Xd.test(e.charAt(Jg))?(r=e.charAt(Jg),Jg++):(r=kr,0===ty&&l(Jd)),r!==kr)if(Kd.test(e.charAt(Jg))?(n=e.charAt(Jg),Jg++):(n=kr,0===ty&&l(Yd)),n===kr&&(n=null),n!==kr){if(i=[],Id.test(e.charAt(Jg))?(o=e.charAt(Jg),Jg++):(o=kr,0===ty&&l(Td)),o!==kr)for(;o!==kr;)i.push(o),Id.test(e.charAt(Jg))?(o=e.charAt(Jg),Jg++):(o=kr,0===ty&&l(Td));else i=kr;i!==kr?(Kg=t,r=Zd(r,n,i),t=r):(Jg=t,t=kr)}else Jg=t,t=kr;else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(Wd)),t}function nr(){var t,r,n,i;if(ty++,t=Jg,39===e.charCodeAt(Jg)?(r=tv,Jg++):(r=kr,0===ty&&l(rv)),r!==kr){for(n=[],nv.test(e.charAt(Jg))?(i=e.charAt(Jg),Jg++):(i=kr,0===ty&&l(iv)),i===kr&&(i=sr());i!==kr;)n.push(i),nv.test(e.charAt(Jg))?(i=e.charAt(Jg),Jg++):(i=kr,0===ty&&l(iv)),i===kr&&(i=sr());n!==kr?(39===e.charCodeAt(Jg)?(i=tv,Jg++):(i=kr,0===ty&&l(rv)),i!==kr?(Kg=t,r=ov(n),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(ev)),t}function ir(){var t,r,n,i;if(ty++,t=Jg,34===e.charCodeAt(Jg)?(r=sv,Jg++):(r=kr,0===ty&&l(uv)),r!==kr){for(n=[],lv.test(e.charAt(Jg))?(i=e.charAt(Jg),Jg++):(i=kr,0===ty&&l(cv)),i===kr&&(i=sr());i!==kr;)n.push(i),lv.test(e.charAt(Jg))?(i=e.charAt(Jg),Jg++):(i=kr,0===ty&&l(cv)),i===kr&&(i=sr());n!==kr?(34===e.charCodeAt(Jg)?(i=sv,Jg++):(i=kr,0===ty&&l(uv)),i!==kr?(Kg=t,r=ov(n),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(av)),t}function or(){var t,r,n,i;if(ty++,t=Jg,e.substr(Jg,3)===pv?(r=pv,Jg+=3):(r=kr,0===ty&&l(hv)),r!==kr){for(n=[],dv.test(e.charAt(Jg))?(i=e.charAt(Jg),Jg++):(i=kr,0===ty&&l(vv)),i===kr&&(i=sr());i!==kr;)n.push(i),dv.test(e.charAt(Jg))?(i=e.charAt(Jg),Jg++):(i=kr,0===ty&&l(vv)),i===kr&&(i=sr());n!==kr?(e.substr(Jg,3)===pv?(i=pv,Jg+=3):(i=kr,0===ty&&l(hv)),i!==kr?(Kg=t,r=ov(n),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(fv)),t}function ar(){var t,r,n,i;if(ty++,t=Jg,e.substr(Jg,3)===yv?(r=yv,Jg+=3):(r=kr,0===ty&&l(mv)),r!==kr){for(n=[],bv.test(e.charAt(Jg))?(i=e.charAt(Jg),Jg++):(i=kr,0===ty&&l(wv)),i===kr&&(i=sr());i!==kr;)n.push(i),bv.test(e.charAt(Jg))?(i=e.charAt(Jg),Jg++):(i=kr,0===ty&&l(wv)),i===kr&&(i=sr());n!==kr?(e.substr(Jg,3)===yv?(i=yv,Jg+=3):(i=kr,0===ty&&l(mv)),i!==kr?(Kg=t,r=ov(n),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(gv)),t}function sr(){var t,r,n;return ty++,t=Jg,92===e.charCodeAt(Jg)?(r=$v,Jg++):(r=kr,0===ty&&l(kv)),r!==kr?(Ev.test(e.charAt(Jg))?(n=e.charAt(Jg),Jg++):(n=kr,0===ty&&l(_v)),n!==kr?(r=[r,n],t=r):(Jg=t,t=kr)):(Jg=t,t=kr),ty--,t===kr&&(r=kr,0===ty&&l(xv)),t}function ur(){var t,r,n,i;if(ty++,t=Jg,40===e.charCodeAt(Jg)?(r=sn,Jg++):(r=kr,0===ty&&l(un)),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();n!==kr?(41===e.charCodeAt(Jg)?(i=hn,Jg++):(i=kr,0===ty&&l(dn)),i!==kr?(Kg=t,r=Av(),t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(Sv)),t}function lr(){var t,r;return ty++,Iv.test(e.charAt(Jg))?(t=e.charAt(Jg),Jg++):(t=kr,0===ty&&l(Tv)),t===kr&&(Fv.test(e.charAt(Jg))?(t=e.charAt(Jg),Jg++):(t=kr,0===ty&&l(Nv)),t===kr&&(jv.test(e.charAt(Jg))?(t=e.charAt(Jg),Jg++):(t=kr,0===ty&&l(Rv)),t===kr&&(Lv.test(e.charAt(Jg))?(t=e.charAt(Jg),Jg++):(t=kr,0===ty&&l(Ov)),t===kr&&(t=cr())))),ty--,t===kr&&(r=kr,0===ty&&l(Cv)),t}function cr(){var t,r,n,i;if(ty++,t=Jg,35===e.charCodeAt(Jg)?(r=Qv,Jg++):(r=kr,0===ty&&l(Dv)),r!==kr){for(n=[],Mv.test(e.charAt(Jg))?(i=e.charAt(Jg),Jg++):(i=kr,0===ty&&l(qv));i!==kr;)n.push(i),Mv.test(e.charAt(Jg))?(i=e.charAt(Jg),Jg++):(i=kr,0===ty&&l(qv));n!==kr?(r=[r,n],t=r):(Jg=t,t=kr)}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(Pv)),t}function fr(){var t,r,n,i;if(ty++,t=Jg,91===e.charCodeAt(Jg)?(r=$l,Jg++):(r=kr,0===ty&&l(kl)),r!==kr){for(n=[],i=lr();i!==kr;)n.push(i),i=lr();n!==kr?(93===e.charCodeAt(Jg)?(i=El,Jg++):(i=kr,0===ty&&l(_l)),i!==kr?(r=[r,n,i],t=r):(Jg=t,t=kr)):(Jg=t,t=kr)}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(Uv)),t}function pr(){var t,r;return ty++,Gv.test(e.charAt(Jg))?(t=e.charAt(Jg),Jg++):(t=kr,0===ty&&l(Hv)),t===kr&&(Vv.test(e.charAt(Jg))?(t=e.charAt(Jg),Jg++):(t=kr,0===ty&&l(zv)),t===kr&&(Wv.test(e.charAt(Jg))?(t=e.charAt(Jg),Jg++):(t=kr,0===ty&&l(Xv)),t===kr&&(Jv.test(e.charAt(Jg))?(t=e.charAt(Jg),Jg++):(t=kr,0===ty&&l(Kv)),t===kr&&(Yv.test(e.charAt(Jg))?(t=e.charAt(Jg),Jg++):(t=kr,0===ty&&l(Zv)),t===kr&&(eg.test(e.charAt(Jg))?(t=e.charAt(Jg),Jg++):(t=kr,0===ty&&l(tg)),t===kr&&(rg.test(e.charAt(Jg))?(t=e.charAt(Jg),Jg++):(t=kr,0===ty&&l(ng)),t===kr&&(ig.test(e.charAt(Jg))?(t=e.charAt(Jg),Jg++):(t=kr,0===ty&&l(og)),t===kr&&(ag.test(e.charAt(Jg))?(t=e.charAt(Jg),Jg++):(t=kr,0===ty&&l(sg)),t===kr&&(ug.test(e.charAt(Jg))?(t=e.charAt(Jg),Jg++):(t=kr,0===ty&&l(lg)),t===kr&&(cg.test(e.charAt(Jg))?(t=e.charAt(Jg),Jg++):(t=kr,0===ty&&l(fg)),t===kr&&(pg.test(e.charAt(Jg))?(t=e.charAt(Jg),Jg++):(t=kr,0===ty&&l(hg)),t===kr&&(dg.test(e.charAt(Jg))?(t=e.charAt(Jg),Jg++):(t=kr,0===ty&&l(vg)),t===kr&&(gg.test(e.charAt(Jg))?(t=e.charAt(Jg),Jg++):(t=kr,0===ty&&l(yg))))))))))))))),ty--,t===kr&&(r=kr,0===ty&&l(Bv)),t}function hr(){var t,r;return ty++,t=pr(),t===kr&&(95===e.charCodeAt(Jg)?(t=bg,Jg++):(t=kr,0===ty&&l(wg))),ty--,t===kr&&(r=kr,0===ty&&l(mg)),t}function dr(){var t,r,n,i;if(ty++,t=Jg,r=hr(),r===kr&&(Id.test(e.charAt(Jg))?(r=e.charAt(Jg),Jg++):(r=kr,0===ty&&l(Td))),r!==kr){for(n=[],i=hr(),i===kr&&(Id.test(e.charAt(Jg))?(i=e.charAt(Jg),Jg++):(i=kr,0===ty&&l(Td)),i===kr&&($g.test(e.charAt(Jg))?(i=e.charAt(Jg),Jg++):(i=kr,0===ty&&l(kg)),i===kr&&(Eg.test(e.charAt(Jg))?(i=e.charAt(Jg),Jg++):(i=kr,0===ty&&l(_g)),i===kr&&(Sg.test(e.charAt(Jg))?(i=e.charAt(Jg),Jg++):(i=kr,0===ty&&l(Ag))))));i!==kr;)n.push(i),i=hr(),i===kr&&(Id.test(e.charAt(Jg))?(i=e.charAt(Jg),Jg++):(i=kr,0===ty&&l(Td)),i===kr&&($g.test(e.charAt(Jg))?(i=e.charAt(Jg),Jg++):(i=kr,0===ty&&l(kg)),i===kr&&(Eg.test(e.charAt(Jg))?(i=e.charAt(Jg),Jg++):(i=kr,0===ty&&l(_g)),i===kr&&(Sg.test(e.charAt(Jg))?(i=e.charAt(Jg),Jg++):(i=kr,0===ty&&l(Ag))))));n!==kr?(Kg=t,r=Cg(r,n),t=r):(Jg=t,t=kr)}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(xg)),t}function vr(){var t,r;return ty++,t=hr(),t===kr&&(45===e.charCodeAt(Jg)?(t=Cc,Jg++):(t=kr,0===ty&&l(Ic)),t===kr&&(Id.test(e.charAt(Jg))?(t=e.charAt(Jg),Jg++):(t=kr,0===ty&&l(Td)),t===kr&&($g.test(e.charAt(Jg))?(t=e.charAt(Jg),Jg++):(t=kr,0===ty&&l(kg)),t===kr&&(Eg.test(e.charAt(Jg))?(t=e.charAt(Jg),Jg++):(t=kr,0===ty&&l(_g)),t===kr&&(Sg.test(e.charAt(Jg))?(t=e.charAt(Jg),Jg++):(t=kr,0===ty&&l(Ag))))))),ty--,t===kr&&(r=kr,0===ty&&l(Ig)),t}function gr(){var t,r,n,i;if(ty++,t=Jg,r=pr(),r!==kr){for(n=[],i=vr(),i===kr&&(46===e.charCodeAt(Jg)?(i=ts,Jg++):(i=kr,0===ty&&l(rs)));i!==kr;)n.push(i),i=vr(),i===kr&&(46===e.charCodeAt(Jg)?(i=ts,Jg++):(i=kr,0===ty&&l(rs)));n!==kr?(Kg=t,r=Fg(r,n),t=r):(Jg=t,t=kr)}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(Tg)),t}function yr(){var t,r,n,i;if(ty++,t=Jg,r=hr(),r===kr&&(Id.test(e.charAt(Jg))?(r=e.charAt(Jg),Jg++):(r=kr,0===ty&&l(Td)),r===kr&&(58===e.charCodeAt(Jg)?(r=sd,Jg++):(r=kr,0===ty&&l(ud)),r===kr&&(r=mr()))),r!==kr){for(n=[],i=vr(),i===kr&&(46===e.charCodeAt(Jg)?(i=ts,Jg++):(i=kr,0===ty&&l(rs)),i===kr&&(58===e.charCodeAt(Jg)?(i=sd,Jg++):(i=kr,0===ty&&l(ud)),i===kr&&(i=mr())));i!==kr;)n.push(i),i=vr(),i===kr&&(46===e.charCodeAt(Jg)?(i=ts,Jg++):(i=kr,0===ty&&l(rs)),i===kr&&(58===e.charCodeAt(Jg)?(i=sd,Jg++):(i=kr,0===ty&&l(ud)),i===kr&&(i=mr())));n!==kr?(Kg=t,r=jg(r,n),t=r):(Jg=t,t=kr)}else Jg=t,t=kr;return ty--,t===kr&&(r=kr,0===ty&&l(Ng)),t}function mr(){var e,t;return ty++,e=br(),e===kr&&(e=xr()),ty--,e===kr&&(t=kr,0===ty&&l(Rg)),e}function br(){var t,r,n,i,o;return ty++,t=Jg,r=Jg,37===e.charCodeAt(Jg)?(n=Og,Jg++):(n=kr,0===ty&&l(Pg)),n!==kr?(i=wr(),i!==kr?(o=wr(),o!==kr?(n=[n,i,o],r=n):(Jg=r,r=kr)):(Jg=r,r=kr)):(Jg=r,r=kr),r!==kr&&(Kg=t,r=Qg(r)),t=r,ty--,t===kr&&(r=kr,0===ty&&l(Lg)),t}function wr(){var t,r;return ty++,Id.test(e.charAt(Jg))?(t=e.charAt(Jg),Jg++):(t=kr,0===ty&&l(Td)),t===kr&&(Mg.test(e.charAt(Jg))?(t=e.charAt(Jg),Jg++):(t=kr,0===ty&&l(qg)),t===kr&&(Ug.test(e.charAt(Jg))?(t=e.charAt(Jg),Jg++):(t=kr,0===ty&&l(Bg)))),ty--,t===kr&&(r=kr,0===ty&&l(Dg)),t}function xr(){var t,r,n;return ty++,t=Jg,92===e.charCodeAt(Jg)?(r=$v,Jg++):(r=kr,0===ty&&l(kv)),r!==kr?(95===e.charCodeAt(Jg)?(n=bg,Jg++):(n=kr,0===ty&&l(wg)),n===kr&&(126===e.charCodeAt(Jg)?(n=Hg,Jg++):(n=kr,0===ty&&l(Vg)),n===kr&&(46===e.charCodeAt(Jg)?(n=ts,Jg++):(n=kr,0===ty&&l(rs)),n===kr&&(45===e.charCodeAt(Jg)?(n=Cc,Jg++):(n=kr,0===ty&&l(Ic)),n===kr&&(33===e.charCodeAt(Jg)?(n=hl,Jg++):(n=kr,0===ty&&l(dl)),n===kr&&(36===e.charCodeAt(Jg)?(n=md,Jg++):(n=kr,0===ty&&l(bd)),n===kr&&(38===e.charCodeAt(Jg)?(n=zg,Jg++):(n=kr,0===ty&&l(Wg)),n===kr&&(39===e.charCodeAt(Jg)?(n=tv,Jg++):(n=kr,0===ty&&l(rv)),n===kr&&(40===e.charCodeAt(Jg)?(n=sn,Jg++):(n=kr,0===ty&&l(un)),n===kr&&(41===e.charCodeAt(Jg)?(n=hn,Jg++):(n=kr,0===ty&&l(dn)),n===kr&&(42===e.charCodeAt(Jg)?(n=vn,Jg++):(n=kr,0===ty&&l(gn)),n===kr&&(43===e.charCodeAt(Jg)?(n=cl,Jg++):(n=kr,0===ty&&l(fl)),n===kr&&(44===e.charCodeAt(Jg)?(n=cu,Jg++):(n=kr,0===ty&&l(fu)),n===kr&&(59===e.charCodeAt(Jg)?(n=mo,Jg++):(n=kr,0===ty&&l(bo)),n===kr&&(58===e.charCodeAt(Jg)?(n=sd,Jg++):(n=kr,0===ty&&l(ud)),n===kr&&(61===e.charCodeAt(Jg)?(n=Kl,Jg++):(n=kr,0===ty&&l(Yl)),n===kr&&(47===e.charCodeAt(Jg)?(n=Yu,Jg++):(n=kr,0===ty&&l(Zu)),n===kr&&(63===e.charCodeAt(Jg)?(n=ul,Jg++):(n=kr,0===ty&&l(ll)),n===kr&&(35===e.charCodeAt(Jg)?(n=Qv,Jg++):(n=kr,0===ty&&l(Dv)),n===kr&&(64===e.charCodeAt(Jg)?(n=xd,Jg++):(n=kr,0===ty&&l($d)),n===kr&&(37===e.charCodeAt(Jg)?(n=Og,Jg++):(n=kr,0===ty&&l(Pg)))))))))))))))))))))),n!==kr?(Kg=t,r=Xg(n),t=r):(Jg=t,t=kr)):(Jg=t,t=kr),ty--,t===kr&&(r=kr,0===ty&&l(Gg)),t}r=void 0!==r?r:{};var $r,kr={},Er={DOCUMENT:f},_r=f,Sr=a("[1] QueryUnit"),Ar=a("[2] Query"),Cr=function(e,t,r){return{token:"query",kind:"query",prologue:e,units:[t],inlineData:r}},Ir=a("[3] Prologue"),Tr=function(e,t){return{token:"prologue",base:e,prefixes:t}},Fr=a("[4] BaseDecl"),Nr="BASE",jr=n("BASE",!1),Rr="base",Lr=n("base",!1),Or=function(e){ay(e);var t={};return t.token="base",t.value=e,t},Pr=a("[5] PrefixDecl"),Qr="PREFIX",Dr=n("PREFIX",!1),Mr="prefix",qr=n("prefix",!1),Ur=function(e,t){oy(e,t);var r={};return r.token="prefix",r.prefix=e,r.local=t,r},Br=a("[6] SelectQuery"),Gr=function(e,t,r,n){for(var i={named:[],implicit:[]},o=0;o<t.length;o++){var a=t[o];"default"===a.kind?i.implicit.push(a.graph):i.named.push(a.graph)}0===i.named.length&&0===i.implicit.length&&i.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var s={};return s.kind="select",s.token="executableunit",s.dataset=i,s.projection=e.vars,s.modifier=e.modifier,s.pattern=r,null!=n&&null!=n.limit&&(s.limit=n.limit),null!=n&&null!=n.offset&&(s.offset=n.offset),null!=n&&null!=n.order&&""!=n.order&&(s.order=n.order),null!=n&&null!=n.group&&(s.group=n.group),s},Hr=a("[7] SubSelect"),Vr=function(e,t,r){var n={};return n.kind="select",n.token="subselect",n.projection=e.vars,n.modifier=e.modifier,n.pattern=t,null!=r&&null!=r.limit&&(n.limit=r.limit),null!=r&&null!=r.offset&&(n.offset=r.offset),null!=r&&null!=r.order&&""!=r.order&&(n.order=r.order),null!=r&&null!=r.group&&(n.group=r.group),n},zr=a("[8] SelectClause"),Wr="SELECT",Xr=n("SELECT",!1),Jr="select",Kr=n("select",!1),Yr="DISTINCT",Zr=n("DISTINCT",!1),en="distinct",tn=n("distinct",!1),rn="REDUCED",nn=n("REDUCED",!1),on="reduced",an=n("reduced",!1),sn="(",un=n("(",!1),ln="AS",cn=n("AS",!1),fn="as",pn=n("as",!1),hn=")",dn=n(")",!1),vn="*",gn=n("*",!1),yn=function(e,t){var r=[];if(3===t.length&&"*"===t[1])return{vars:[{token:"variable",kind:"*"}],modifier:sy(e)};for(var n=0;n<t.length;n++){var i=t[n];3===i.length?r.push({token:"variable",kind:"var",value:i[1]}):r.push({token:"variable",kind:"aliased",expression:i[3],alias:i[7]})}return{vars:r,modifier:sy(e)}},mn=a("[9] ConstructQuery"),bn="CONSTRUCT",wn=n("CONSTRUCT",!1),xn="construct",$n=n("construct",!1),kn=function(e,t,r,n){for(var i={named:[],implicit:[]},o=0;o<t.length;o++){var a=t[o];"default"===a.kind?i.implicit.push(a.graph):i.named.push(a.graph)}0===i.named.length&&0===i.implicit.length&&i.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var s={};return s.kind="construct",s.token="executableunit",s.dataset=i,s.template=e,s.pattern=r,null!=n&&null!=n.limit&&(s.limit=n.limit),null!=n&&null!=n.offset&&(s.offset=n.offset),null!=n&&null!=n.order&&""!=n.order&&(s.order=n.order),s},En="WHERE",_n=n("WHERE",!1),Sn="where",An=n("where",!1),Cn="{",In=n("{",!1),Tn="}",Fn=n("}",!1),Nn=function(e,t,r){for(var n={named:[],implicit:[]},i=0;i<e.length;i++){var o=e[i];"default"===o.kind?n.implicit.push(o.graph):n.named.push(o.graph)}0===n.named.length&&0===n.implicit.length&&n.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var a={};return a.kind="construct",a.token="executableunit",a.dataset=n,a.template=t,a.pattern={token:"basicgraphpattern",triplesContext:t.triplesContext},null!=r&&null!=r.limit&&(a.limit=r.limit),null!=r&&null!=r.offset&&(a.offset=r.offset),null!=r&&null!=r.order&&""!=r.order&&(a.order=r.order),a},jn=a("[10] DescribeQuery"),Rn="DESCRIBE",Ln=n("DESCRIBE",!1),On=a("[11] AskQuery"),Pn="ASK",Qn=n("ASK",!1),Dn="ask",Mn=n("ask",!1),qn=function(e,t){for(var r={named:[],implicit:[]},n=0;n<e.length;n++){var i=e[n];"implicit"===i.kind?r.implicit.push(i.graph):r.named.push(i.graph)}0===r.named.length&&0===r.implicit.length&&r.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var o={};return o.kind="ask",o.token="executableunit",o.dataset=r,o.pattern=t,o},Un=a("[12] DatasetClause"),Bn="FROM",Gn=n("FROM",!1),Hn="from",Vn=n("from",!1),zn=function(e){return e},Wn=a("[13] DefaultGraphClause"),Xn=function(e){return{graph:e,kind:"default",token:"graphClause"}},Jn=a("[14] NamedGraphClause"),Kn="NAMED",Yn=n("NAMED",!1),Zn="named",ei=n("named",!1),ti=function(e){return{graph:e,kind:"named",token:"graphCluase"}},ri=a("[15] SourceSelector"),ni=a("[16] WhereClause"),ii=function(e){return e},oi=a("[17] SolutionModifier"),ai=function(e,t,r){var n={};return null!=r&&(null!=r.limit&&(n.limit=r.limit),null!=r.offset&&(n.offset=r.offset)),null!=e&&(n.group=e),n.order=t,n},si=a("[18] GroupClause"),ui="GROUP",li=n("GROUP",!1),ci="group",fi=n("group",!1),pi="BY",hi=n("BY",!1),di="by",vi=n("by",!1),gi=function(e){return e},yi=a("[19] GroupCondition"),mi=function(e){return e},bi=function(e){return e},wi=function(e,t){return 0!=t.length?{token:"aliased_expression",expression:e,alias:t[2]}:e},xi=function(e){return e},$i=a("[20] HavingClause"),ki="HAVING",Ei=n("HAVING",!1),_i=a("[21] HavingCondition"),Si=a("[22] OrderClause"),Ai="ORDER",Ci=n("ORDER",!1),Ii="order",Ti=n("order",!1),Fi=function(e){return e},Ni=a("[23] OrderCondition"),ji="ASC",Ri=n("ASC",!1),Li="asc",Oi=n("asc",!1),Pi="DESC",Qi=n("DESC",!1),Di="desc",Mi=n("desc",!1),qi=function(e,t){return{direction:e.toUpperCase(),expression:t}},Ui=function(e){if("var"===e.token)var e={token:"expression",expressionType:"atomic",primaryexpression:"var",value:e};return{direction:"ASC",expression:e}},Bi=a("[24] LimitOffsetClauses"),Gi=function(e){
for(var t={},r=0;r<e.length;r++){var n=e[r];null!=n&&null!=n.limit?t.limit=n.limit:null!=n&&null!=n.offset&&(t.offset=n.offset)}return t},Hi=a("[25] LimitClause"),Vi="LIMIT",zi=n("LIMIT",!1),Wi="limit",Xi=n("limit",!1),Ji=function(e){return{limit:parseInt(e.value)}},Ki=a("[26] OffsetClause"),Yi="OFFSET",Zi=n("OFFSET",!1),eo="offset",to=n("offset",!1),ro=function(e){return{offset:parseInt(e.value)}},no=a("[27] BindingsClause"),io="BINDINGS",oo=n("BINDINGS",!1),ao=a("[28] BindingValue"),so="UNDEF",uo=n("UNDEF",!1),lo=a("[28]\tValuesClause\t  ::=\t( 'VALUES' DataBlock )?"),co="VALUES",fo=n("VALUES",!1),po="values",ho=n("values",!1),vo=function(e){return null!=e?e[1]:null},go=a("[29] UpdateUnit"),yo=a("[30] Update"),mo=";",bo=n(";",!1),wo=function(e,t,r){var n={};n.token="query",n.kind="update",n.prologue=e;var i=[t];return null!=r&&null!=r.length&&null!=r[3]&&null!=r[3].units&&(i=i.concat(r[3].units)),n.units=i,n},xo=a("[31] Update1"),$o=a("[32] Load"),ko="LOAD",Eo=n("LOAD",!1),_o="load",So=n("load",!1),Ao="INTO",Co=n("INTO",!1),Io="into",To=n("into",!1),Fo=function(e,t){var r={};return r.kind="load",r.token="executableunit",r.sourceGraph=e,null!=t&&(r.destinyGraph=t[2]),r},No=a("[33] Clear"),jo="CLEAR",Ro=n("CLEAR",!1),Lo="clear",Oo=n("clear",!1),Po="SILENT",Qo=n("SILENT",!1),Do="silent",Mo=n("silent",!1),qo=function(e){var t={};return t.kind="clear",t.token="executableunit",t.destinyGraph=e,t},Uo=a("[34] Drop"),Bo="DROP",Go=n("DROP",!1),Ho="drop",Vo=n("drop",!1),zo=function(e){var t={};return t.kind="drop",t.token="executableunit",t.destinyGraph=e,t},Wo=a("[35] Create"),Xo="CREATE",Jo=n("CREATE",!1),Ko="create",Yo=n("create",!1),Zo=function(e){var t={};return t.kind="create",t.token="executableunit",t.destinyGraph=e,t},ea=a("[36] InsertData"),ta="INSERT",ra=n("INSERT",!1),na="insert",ia=n("insert",!1),oa="DATA",aa=n("DATA",!1),sa="data",ua=n("data",!1),la=function(e){var t={};return t.kind="insertdata",t.token="executableunit",t.quads=e,t},ca=a("[37] DeleteData"),fa="DELETE",pa=n("DELETE",!1),ha="delete",da=n("delete",!1),va=function(e){var t={};return t.kind="deletedata",t.token="executableunit",t.quads=e,t},ga=a("[38] DeleteWhere"),ya=function(e){var t={};t.kind="modify",t.pattern=e,t.with=null,t.using=null;var r=[],n=e.patterns[0];n=null==n.triplesContext&&null!=n.patterns?n.patterns[0].triplesContext:n.triplesContext;for(var i=0;i<n.length;i++){var o={},a=n[i];o.subject=a.subject,o.predicate=a.predicate,o.object=a.object,o.graph=a.graph,r.push(o)}return t.delete=r,t},ma=a("[39] Modify"),ba="WITH",wa=n("WITH",!1),xa="with",$a=n("with",!1),ka=function(e,t,r,n){var i={};return i.kind="modify",""!=e&&null!=e?i.with=e[2]:i.with=null,3!==t.length||""!==t[2]&&null!=t[2]?3===t.length&&null!=t[0].length&&null!=t[1].length&&null!=t[2].length?(i.delete=t[0],i.insert=t[2]):(i.insert=t,i.delete=null):(i.delete=t[0],i.insert=null),""!=r&&(i.using=r),i.pattern=n,i},Ea=a("[40] DeleteClause"),_a=function(e){return e},Sa=a("[41] InsertClause"),Aa=a("[42] UsingClause"),Ca="USING",Ia=n("USING",!1),Ta="using",Fa=n("using",!1),Na=function(e){return null!=e.length?{kind:"named",uri:e[2]}:{kind:"default",uri:e}},ja=a("[43] GraphRef"),Ra="GRAPH",La=n("GRAPH",!1),Oa="graph",Pa=n("graph",!1),Qa=function(e){return e},Da=a("[44] GraphRefAll"),Ma="DEFAULT",qa=n("DEFAULT",!1),Ua="default",Ba=n("default",!1),Ga=function(){return"default"},Ha=function(){return"named"},Va="ALL",za=n("ALL",!1),Wa="all",Xa=n("all",!1),Ja=function(){return"all"},Ka=a("[45] QuadPattern"),Ya=function(e){return e.quadsContext},Za=a("[46] QuadData"),es=a("[47] Quads"),ts=".",rs=n(".",!1),ns=function(e,t){var r=[];if(null!=e&&null!=e.triplesContext)for(var n=0;n<e.triplesContext.length;n++){var i=e.triplesContext[n];i.graph=null,r.push(i)}if(t&&t.length>0&&t[0].length>0&&(r=r.concat(t[0][0].quadsContext),null!=t[0][2]&&null!=t[0][2].triplesContext))for(var n=0;n<t[0][2].triplesContext.length;n++){var i=t[0][2].triplesContext[n];i.graph=null,r.push(i)}return{token:"quads",quadsContext:r}},is=a("[48] QuadsNotTriples"),os=function(e,t){var r=[];if(null!=t)for(var n=0;n<t.triplesContext.length;n++){var i=t.triplesContext[n];i.graph=e,r.push(i)}return{token:"quadsnottriples",quadsContext:r}},as=a("[49] TriplesTemplate"),ss=function(e,t){var r=e.triplesContext;return null!=t&&"object"==typeof t&&null!=t.length&&null!=t[3]&&null!=t[3].triplesContext&&(r=r.concat(t[3].triplesContext)),{token:"triplestemplate",triplesContext:r}},us=a("[50] GroupGraphPattern"),ls=function(e){return e},cs=a("[51] GroupGraphPatternSub"),fs=function(e,t){var r=[];null!=e&&e!=[]&&r.push(e);for(var n=0;n<t.length;n++)for(var i=0;i<t[n].length;i++)null!=t[n][i]&&null!=t[n][i].token&&r.push(t[n][i]);for(var o=[],a=[],s=[],u=[],n=0;n<r.length;n++)if("triplespattern"!==r[n].token&&"filter"!==r[n].token&&"bind"!==r[n].token){if(0!=a.length||0!=s.length){for(var l=[],i=0;i<a.length;i++)l=l.concat(a[i].triplesContext);l.length>0&&o.push({token:"basicgraphpattern",triplesContext:l}),a=[]}o.push(r[n])}else"triplespattern"===r[n].token?a.push(r[n]):"bind"===r[n].token?u.push(r[n]):s.push(r[n]);if(0!=a.length||0!=s.length){for(var l=[],i=0;i<a.length;i++)l=l.concat(a[i].triplesContext);l.length>0&&o.push({token:"basicgraphpattern",triplesContext:l})}return{token:"groupgraphpattern",patterns:o,filters:s,binds:u}},ps=a("[54] TriplesBlock"),hs=function(e,t){var r=e.triplesContext;return null!=t&&"object"==typeof t&&null!=t&&null!=t.length&&null!=t[2]&&null!=t[2].triplesContext&&(r=r.concat(t[2].triplesContext)),{token:"triplespattern",triplesContext:r}},ds=a("[53] GraphPatternNotTriples"),vs=a("[54] OptionalGraphPattern"),gs="OPTIONAL",ys=n("OPTIONAL",!1),ms="optional",bs=n("optional",!1),ws=function(e){return{token:"optionalgraphpattern",value:e}},xs=a("[55] GraphGraphPattern"),$s=function(e,t){for(var r=0;r<t.patterns.length;r++)for(var n=t.patterns[r],i=0;i<n.triplesContext.length;i++){var o=n.triplesContext[i];o.graph=e}return t.token="groupgraphpattern",t},ks=a("[56] ServiceGraphPattern"),Es="SERVICE",_s=n("SERVICE",!1),Ss=function(e,t){return{token:"servicegraphpattern",status:"todo",value:[e,t]}},As=a("[57] MinusGraphPattern"),Cs="MINUS",Is=n("MINUS",!1),Ts="minus",Fs=n("minus",!1),Ns=function(e){return{token:"minusgraphpattern",status:"todo",value:e}},js=a("[58] GroupOrUnionGraphPattern"),Rs="UNION",Ls=n("UNION",!1),Os="union",Ps=n("union",!1),Qs=function(e,t){if(0===t.length)return e;for(var r={token:"graphunionpattern",value:[e]},n=0;n<t.length;n++)if(n==t.length-1)r.value.push(t[n][3]);else{r.value.push(t[n][3]);var i={token:"graphunionpattern",value:[r]};r=i}return r},Ds=a("[59] Filter"),Ms="FILTER",qs=n("FILTER",!1),Us="filter",Bs=n("filter",!1),Gs=function(e){return{token:"filter",value:e}},Hs=a("[60] Bind"),Vs="BIND",zs=n("BIND",!1),Ws="bind",Xs=n("bind",!1),Js=function(e,t){return{token:"bind",expression:e,as:t}},Ks=a("[60] Constraint"),Ys=a("[61] InlineData"),Zs=function(e){return e},eu=a("[62] DataBlock"),tu=a("[63] InlineDataOneVar"),ru=function(e,t){var r={token:"inlineData",values:[{var:e,value:t}]};return r},nu=a("[64] InlineDataFull"),iu=function(e,t){var r={token:"inlineData",values:[],todo:!0};return r},ou=a("[65] DataBlockValue"),au=a("[61] FunctionCall"),su=function(e,t){var r={};return r.token="expression",r.expressionType="irireforfunction",r.iriref=e,r.args=t.value,r},uu=a("[62] ArgList"),lu=function(){var e={};return e.token="args",e.value=[],e},cu=",",fu=n(",",!1),pu=function(e,t,r){for(var n=[],i=0;i<r.length;i++)n.push(r[i][2]);var o={};return o.token="args",o.value=[t].concat(n),null!=e&&"DISTINCT"===e.toUpperCase()?o.distinct=!0:o.distinct=!1,o},hu=a("[63] ExpressionList"),du=function(e,t){for(var r=[],n=0;n<t.length;n++)r.push(t[n][2]);var i={};return i.token="args",i.value=[e].concat(r),i},vu=a("[64] ConstructTemplate"),gu=function(e){return e},yu=a("[65] ConstructTriples"),mu=function(e,t){var r=e.triplesContext;return null!=t&&"object"==typeof t&&null!=t.length&&null!=t[3]&&null!=t[3].triplesContext&&(r=r.concat(t[3].triplesContext)),{token:"triplestemplate",triplesContext:r}},bu=a("[66] TriplesSameSubject"),wu=function(e,t){var r=t.triplesContext,n=e;if(t.pairs)for(var i=0;i<t.pairs.length;i++){var o=t.pairs[i],a=null;null!=o[1].length&&(o[1]=o[1][0]),n.token&&"triplesnodecollection"===n.token?(a={subject:n.chainSubject[0],predicate:o[0],object:o[1]},r.push(a),r=r.concat(n.triplesContext)):(a={subject:n,predicate:o[0],object:o[1]},r.push(a))}var s={};return s.token="triplessamesubject",s.triplesContext=r,s.chainSubject=n,s},xu=function(e,t){var r=e.triplesContext,n=e.chainSubject;if(t.pairs)for(var i=0;i<t.pairs.length;i++){var o=t.pairs[i];if(null!=o[1].length&&(o[1]=o[1][0]),"triplesnodecollection"===e.token)for(var a=0;a<n.length;a++){var s=n[a];if(null!=s.triplesContext){var u={subject:s.chainSubject,predicate:o[0],object:o[1]};r.concat(s.triplesContext)}else{var u={subject:n[a],predicate:o[0],object:o[1]};r.push(u)}}else{var u={subject:n,predicate:o[0],object:o[1]};r.push(u)}}var l={};return l.token="triplessamesubject",l.triplesContext=r,l.chainSubject=n,l},$u=a("[83] PropertyListPathNotEmpty"),ku=function(e,t,r){var n={};n.token="propertylist";for(var i=[],o=[],a=0;a<t.length;a++)null!=t[a].triplesContext?(i=i.concat(t[a].triplesContext),"triplesnodecollection"===t[a].token&&null!=t[a].chainSubject.length?o.push([e,t[a].chainSubject[0]]):o.push([e,t[a].chainSubject])):o.push([e,t[a]]);for(var a=0;a<r.length;a++)for(var s=r[a][3],u=s[0],l=s[2]||[],c=0;c<l.length;c++)null!=l[c].triplesContext?(i=i.concat(l[c].triplesContext),o.push([u,l[c].chainSubject])):o.push([u,l[c]]);return n.pairs=o,n.triplesContext=i,n},Eu=a("[67] PropertyListNotEmpty"),_u=function(e,t,r){var n={};n.token="propertylist";for(var i=[],o=[],a=0;a<t.length;a++)null!=t[a].triplesContext?(i=i.concat(t[a].triplesContext),"triplesnodecollection"===t[a].token&&null!=t[a].chainSubject.length?o.push([e,t[a].chainSubject[0]]):o.push([e,t[a].chainSubject])):o.push([e,t[a]]);for(var a=0;a<r.length;a++)for(var s=r[a][3],u=s[0],l=s[2]||[],c=0;c<l.length;c++)null!=l[c].triplesContext?(i=i.concat(l[c].triplesContext),o.push([u,l[c].chainSubject])):o.push([u,l[c]]);return n.pairs=o,n.triplesContext=i,n},Su=a("[68] PropertyList"),Au=a("[86] ObjectListPath"),Cu=function(e,t){var r=[];r.push(e);for(var n=0;n<t.length;n++)for(var i=0;i<t[n].length;i++)"object"==typeof t[n][i]&&null!=t[n][i].token&&r.push(t[n][i]);return r},Iu=a("[69] ObjectList"),Tu=function(e,t){var r=[];r.push(e);for(var n=0;n<t.length;n++)for(var i=0;i<t[n].length;i++)"object"==typeof t[n][i]&&null!=t[n][i].token&&r.push(t[n][i]);return r},Fu=a("[87] ObjectPath"),Nu=a("[70] Object"),ju=a("[71] Verb"),Ru="a",Lu=n("a",!1),Ou=function(){return{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"}},Pu=a("[72] TriplesSameSubjectPath"),Qu=function(e,t){var r=t.triplesContext,n=e;if(t.pairs)for(var i=0;i<t.pairs.length;i++){var o=t.pairs[i],a=null;null!=o[1].length&&(o[1]=o[1][0]),n.token&&"triplesnodecollection"===n.token?(a={subject:n.chainSubject[0],predicate:o[0],object:o[1]},"path"===a.predicate.token&&"element"===a.predicate.kind&&(a.predicate=a.predicate.value),r.push(a),r=r.concat(n.triplesContext)):(a={subject:n,predicate:o[0],object:o[1]},"path"===a.predicate.token&&"element"===a.predicate.kind&&(a.predicate=a.predicate.value),r.push(a))}var s={};return s.token="triplessamesubject",s.triplesContext=r,s.chainSubject=n,s},Du=function(e,t){var r=e.triplesContext,n=e.chainSubject;if(null!=t&&null!=t.pairs)for(var i=0;i<t.pairs.length;i++){var o=t.pairs[i];if(null!=o[1].length&&(o[1]=o[1][0]),"triplesnodecollection"===e.token)for(var a=0;a<n.length;a++){var s=n[a];if(null!=s.triplesContext){var u={subject:s.chainSubject,predicate:o[0],object:o[1]};r.concat(s.triplesContext)}else{var u={subject:n[a],predicate:o[0],object:o[1]};r.push(u)}}else{var u={subject:n,predicate:o[0],object:o[1]};r.push(u)}}var l={};return l.token="triplessamesubject",l.triplesContext=r,l.chainSubject=n,l},Mu=a("[73] PropertyListNotEmptyPath"),qu=function(e,t,r){var n={};n.token="propertylist";for(var i=[],o=[],a=0;a<t.length;a++)null!=t[a].triplesContext?(i=i.concat(t[a].triplesContext),"triplesnodecollection"===t[a].token&&null!=t[a].chainSubject.length?o.push([e,t[a].chainSubject[0]]):o.push([e,t[a].chainSubject])):o.push([e,t[a]]);for(var a=0;a<r.length;a++)for(var s=r[a][3],u=s[0],l=s[1]||[],c=0;c<l.length;c++)null!=l[c].triplesContext?(i=i.concat(l[c].triplesContext),o.push([u,l[c].chainSubject])):o.push([u,l[c]]);return n.pairs=o,n.triplesContext=i,n},Uu=a("[74] PropertyListPath"),Bu=a("[75]"),Gu=function(e){var t={};return t.token="path",t.kind="element",t.value=e,e},Hu=a("[76] VerbSimple"),Vu=a("[77] Path"),zu=a("[78] PathAlternative"),Wu="|",Xu=n("|",!1),Ju=function(e,t){if(null==t||0===t.length)return e;for(var r=[],n=0;n<t.length;n++)r.push(t[1]);var i={};return i.token="path",i.kind="alternative",i.value=r,i},Ku=a("[79] PathSequence"),Yu="/",Zu=n("/",!1),el=function(e,t){if(null==t||0===t.length)return e;for(var r=[e],n=0;n<t.length;n++)r.push(t[n][1]);var i={};return i.token="path",i.kind="sequence",i.value=r,i},tl=a("[88] PathElt"),rl=function(e,t){if(e.token&&"path"!=e.token&&""==t)return e;if(e.token&&e.token!=r&&""!=t){var r={};return r.token="path",r.kind="element",r.value=e,r.modifier=t,r}return e.modifier=t,e},nl=a("[81] PathEltOrInverse"),il="^",ol=n("^",!1),al=function(e){var t={};return t.token="path",t.kind="inversePath",t.value=e,t},sl=a("[82] PathMod"),ul="?",ll=n("?",!1),cl="+",fl=n("+",!1),pl=a("[83] PathPrimary"),hl="!",dl=n("!",!1),vl=a("[85] PathOneInPropertySet"),gl=a("[86] Integer"),yl=a("[100] TriplesNodePath"),ml=function(e){for(var t=[],r=[],n=null,i=0;i<e.length;i++){ny++;var o=null;null==e[i].chainSubject&&null==e[i].triplesContext?o=e[i]:(o=e[i].chainSubject,t=t.concat(e[i].triplesContext)),n={subject:{token:"blank",value:"_:"+ny},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first"},object:o},0==i&&r.push(n.subject),t.push(n),n=i===e.length-1?{subject:{token:"blank",value:"_:"+ny},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}:{subject:{token:"blank",value:"_:"+ny},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"blank",value:"_:"+(ny+1)}},t.push(n)}return{token:"triplesnodecollection",triplesContext:t,chainSubject:r}},bl=a("[87] TriplesNode"),wl=function(e){for(var t=[],r=[],n=null,i=0;i<e.length;i++){ny++;var o=null;null==e[i].chainSubject&&null==e[i].triplesContext?o=e[i]:(o=e[i].chainSubject,t=t.concat(o.triplesContext)),n={subject:{token:"blank",value:"_:"+ny},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first"},object:o},0==i&&r.push(n.subject),t.push(n),n=i===e.length-1?{subject:{token:"blank",value:"_:"+ny},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}:{subject:{token:"blank",value:"_:"+ny},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"blank",value:"_:"+(ny+1)}},t.push(n)}return{token:"triplesnodecollection",triplesContext:t,chainSubject:r}},xl=a("[101] BlankNodePropertyListPath"),$l="[",kl=n("[",!1),El="]",_l=n("]",!1),Sl=function(e){ny++;for(var t={token:"blank",value:"_:"+ny},r=[],n=0;n<e.pairs.length;n++){var i=e.pairs[n],o={};o.subject=t,o.predicate=i[0],null!=i[1].length&&(i[1]=i[1][0]),o.object=i[1],r.push(o)}return{token:"triplesnode",kind:"blanknodepropertylist",triplesContext:e.triplesContext.concat(r),chainSubject:t}},Al=a("[88] BlankNodePropertyList"),Cl=function(e){ny++;for(var t={token:"blank",value:"_:"+ny},r=[],n=0;n<e.pairs.length;n++){var i=e.pairs[n],o={};o.subject=t,o.predicate=i[0],null!=i[1].length&&(i[1]=i[1][0]),o.object=i[1],r.push(o)}return{token:"triplesnode",kind:"blanknodepropertylist",triplesContext:e.triplesContext.concat(r),chainSubject:t}},Il=a("[103] CollectionPath"),Tl=function(e){return e},Fl=a("[89] Collection"),Nl=a("[105] GraphNodePath"),jl=function(e){return e[1]},Rl=a("[90] GraphNode"),Ll=a("[91] VarOrTerm"),Ol=a("[92] VarOrIRIref"),Pl=a("[93] Var"),Ql=function(e){var t={};return t.token="var",t.value=e,t},Dl=a("[94] GraphTerm"),Ml=a("[95] Expression"),ql=a("[96] ConditionalOrExpression"),Ul="||",Bl=n("||",!1),Gl=function(e,t){if(0===t.length)return e;var r={};r.token="expression",r.expressionType="conditionalor";for(var n=[e],i=0;i<t.length;i++)n.push(t[i][3]);return r.operands=n,r},Hl=a("[97] ConditionalAndExpression"),Vl="&&",zl=n("&&",!1),Wl=function(e,t){if(0===t.length)return e;var r={};r.token="expression",r.expressionType="conditionaland";for(var n=[e],i=0;i<t.length;i++)n.push(t[i][3]);return r.operands=n,r},Xl=a("[98] ValueLogical"),Jl=a("[99] RelationalExpression"),Kl="=",Yl=n("=",!1),Zl="!=",ec=n("!=",!1),tc="<",rc=n("<",!1),nc=">",ic=n(">",!1),oc="<=",ac=n("<=",!1),sc=">=",uc=n(">=",!1),lc="I",cc=n("I",!1),fc="i",pc=n("i",!1),hc="N",dc=n("N",!1),vc="n",gc=n("n",!1),yc="O",mc=n("O",!1),bc="o",wc=n("o",!1),xc="T",$c=n("T",!1),kc="t",Ec=n("t",!1),_c=function(e,t){if(0===t.length)return e;if("i"===t[0][1]||"I"===t[0][1]||"n"===t[0][1]||"N"===t[0][1]){var r={};if("i"===t[0][1]||"I"===t[0][1]){var n="=";r.expressionType="conditionalor"}else{var n="!=";r.expressionType="conditionaland"}for(var i=e,o=[],a=0;a<t[0].length;a++)if("args"===t[0][a].token){o=t[0][a].value;break}r.token="expression",r.operands=[];for(var s=0;s<o.length;s++){var u={};u.token="expression",u.expressionType="relationalexpression",u.operator=n,u.op1=i,u.op2=o[s],r.operands.push(u)}return r}var r={};return r.expressionType="relationalexpression",r.operator=t[0][1],r.op1=e,r.op2=t[0][3],r.token="expression",r},Sc=a("[100] NumericExpression"),Ac=a("[101] AdditiveExpression"),Cc="-",Ic=n("-",!1),Tc=function(e,t){if(0===t.length)return e;var r={};r.token="expression",r.expressionType="additiveexpression",r.summand=e,r.summands=[];for(var n=0;n<t.length;n++){var i=t[n],o={};if(4==i.length&&"string"==typeof i[1])o.operator=i[1],o.expression=i[3];else{var a={},s=o[0],u=o[1][1],l=o[1][3],u=null;s.value<0?(o.operator="-",s.value=-s.value):o.operator="+",a.token="expression",a.expressionType="multiplicativeexpression",a.operator=s,a.factors=[{operator:u,expression:l}],o.expression=a}r.summands.push(o)}return r},Fc=a("[102] MultiplicativeExpression"),Nc=function(e,t){if(0===t.length)return e;var r={};r.token="expression",r.expressionType="multiplicativeexpression",r.factor=e,r.factors=[];for(var n=0;n<t.length;n++){var i=t[n],o={};o.operator=i[1],o.expression=i[3],r.factors.push(o)}return r},jc=a("[103] UnaryExpression"),Rc=function(e){var t={};return t.token="expression",t.expressionType="unaryexpression",t.unaryexpression="!",t.expression=e,t},Lc=function(e){var t={};return t.token="expression",t.expressionType="unaryexpression",t.unaryexpression="+",t.expression=e,t},Oc=function(e){var t={};return t.token="expression",t.expressionType="unaryexpression",t.unaryexpression="-",t.expression=e,t},Pc=a("[104] PrimaryExpression"),Qc=function(e){var t={};return t.token="expression",t.expressionType="atomic",t.primaryexpression="rdfliteral",t.value=e,t},Dc=function(e){var t={};return t.token="expression",t.expressionType="atomic",t.primaryexpression="numericliteral",t.value=e,t},Mc=function(e){var t={};return t.token="expression",t.expressionType="atomic",t.primaryexpression="booleanliteral",t.value=e,t},qc=function(e){var t={};return t.token="expression",t.expressionType="atomic",t.primaryexpression="var",t.value=e,t},Uc=a("[105] BrackettedExpression"),Bc=function(e){return e},Gc=a("[106] BuiltInCall"),Hc="STR",Vc=n("STR",!1),zc="str",Wc=n("str",!1),Xc=function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="str",t.args=[e],t},Jc="LANG",Kc=n("LANG",!1),Yc="lang",Zc=n("lang",!1),ef=function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="lang",t.args=[e],t},tf="LANGMATCHES",rf=n("LANGMATCHES",!1),nf="langmatches",of=n("langmatches",!1),af=function(e,t){var r={};return r.token="expression",r.expressionType="builtincall",r.builtincall="langmatches",r.args=[e,t],r},sf="DATATYPE",uf=n("DATATYPE",!1),lf="datatype",cf=n("datatype",!1),ff=function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="datatype",t.args=[e],t},pf="BOUND",hf=n("BOUND",!1),df="bound",vf=n("bound",!1),gf=function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="bound",t.args=[e],t},yf="IRI",mf=n("IRI",!1),bf="iri",wf=n("iri",!1),xf=function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="iri",t.args=[e],t},$f="URI",kf=n("URI",!1),Ef="uri",_f=n("uri",!1),Sf=function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="uri",t.args=[e],t},Af="BNODE",Cf=n("BNODE",!1),If="bnode",Tf=n("bnode",!1),Ff=function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="bnode",5===e.length?t.args=[e[2]]:t.args=null,t},Nf="COALESCE",jf=n("COALESCE",!1),Rf="coalesce",Lf=n("coalesce",!1),Of=function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="coalesce",t.args=e,t},Pf="IF",Qf=n("IF",!1),Df="if",Mf=n("if",!1),qf=function(e,t,r){var n={};return n.token="expression",n.expressionType="builtincall",n.builtincall="if",n.args=[e,t,r],n},Uf="ISLITERAL",Bf=n("ISLITERAL",!1),Gf="isliteral",Hf=n("isliteral",!1),Vf="isLITERAL",zf=n("isLITERAL",!1),Wf=function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="isliteral",t.args=[e],t},Xf="ISBLANK",Jf=n("ISBLANK",!1),Kf="isblank",Yf=n("isblank",!1),Zf="isBLANK",ep=n("isBLANK",!1),tp=function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="isblank",t.args=[e],t},rp="SAMETERM",np=n("SAMETERM",!1),ip="sameterm",op=n("sameterm",!1),ap=function(e,t){var r={};return r.token="expression",r.expressionType="builtincall",r.builtincall="sameterm",r.args=[e,t],r},sp="ISURI",up=n("ISURI",!1),lp="isuri",cp=n("isuri",!1),fp="isURI",pp=n("isURI",!1),hp="ISIRI",dp=n("ISIRI",!1),vp="isiri",gp=n("isiri",!1),yp="isIRI",mp=n("isIRI",!1),bp=function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="isuri",t.args=[e],t},wp="custom:",xp=n("custom:",!1),$p="CUSTOM:",kp=n("CUSTOM:",!1),Ep=/^[a-zA-Z0-9_]/,_p=i([["a","z"],["A","Z"],["0","9"],"_"],!1,!1),Sp=function(e,t,r){var n={};n.token="expression",n.expressionType="custom",n.name=e.join("");for(var i=[],o=0;o<t.length;o++)i.push(t[o][1]);return i.push(r),n.args=i,n},Ap=a("[107] RegexExpression"),Cp="REGEX",Ip=n("REGEX",!1),Tp="regex",Fp=n("regex",!1),Np=function(e,t,r){var n={};return n.token="expression",n.expressionType="regex",n.text=e,n.pattern=t,null!=r&&(n.flags=r[2]),n},jp=a("[108] ExistsFunc"),Rp="EXISTS",Lp=n("EXISTS",!1),Op="exists",Pp=n("exists",!1),Qp=function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="exists",t.args=[e],t},Dp=a("[109] NotExistsFunc"),Mp="NOT",qp=n("NOT",!1),Up="not",Bp=n("not",!1),Gp=function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="notexists",t.args=[e],t},Hp=a("[110] Aggregate"),Vp="COUNT",zp=n("COUNT",!1),Wp="count",Xp=n("count",!1),Jp=function(e,t){var r={};return r.token="expression",r.expressionType="aggregate",r.aggregateType="count",r.distinct=""!=e&&null!=e?"DISTINCT":e,r.expression=t,r},Kp="GROUP_CONCAT",Yp=n("GROUP_CONCAT",!1),Zp="group_concat",eh=n("group_concat",!1),th="SEPARATOR",rh=n("SEPARATOR",!1),nh=function(e,t,r){var n={};return n.token="expression",n.expressionType="aggregate",n.aggregateType="group_concat",n.distinct=""!=e&&null!=e?"DISTINCT":e,n.expression=t,n.separator=r,n},ih="SUM",oh=n("SUM",!1),ah="sum",sh=n("sum",!1),uh=function(e,t){var r={};return r.token="expression",r.expressionType="aggregate",r.aggregateType="sum",r.distinct=""!=e&&null!=e?"DISTINCT":e,r.expression=t,r},lh="MIN",ch=n("MIN",!1),fh="min",ph=n("min",!1),hh=function(e,t){var r={};return r.token="expression",r.expressionType="aggregate",r.aggregateType="min",r.distinct=""!=e&&null!=e?"DISTINCT":e,r.expression=t,r},dh="MAX",vh=n("MAX",!1),gh="max",yh=n("max",!1),mh=function(e,t){var r={};return r.token="expression",r.expressionType="aggregate",r.aggregateType="max",r.distinct=""!=e&&null!=e?"DISTINCT":e,r.expression=t,r},bh="AVG",wh=n("AVG",!1),xh="avg",$h=n("avg",!1),kh=function(e,t){var r={};return r.token="expression",r.expressionType="aggregate",r.aggregateType="avg",r.distinct=""!=e&&null!=e?"DISTINCT":e,r.expression=t,r},Eh=a("[117] IRIrefOrFunction"),_h=function(e,t){var r={};return r.token="expression",r.expressionType="irireforfunction",r.iriref=e,r.args=null!=t?t.value:t,r},Sh=a("[112] RDFLiteral"),Ah="^^",Ch=n("^^",!1),Ih=function(e,t){return"string"==typeof t&&t.length>0?{token:"literal",value:e.value,lang:t.slice(1),type:null}:null!=t&&"object"==typeof t?(t.shift(),{token:"literal",value:e.value,lang:null,type:t[0]}):{token:"literal",value:e.value,lang:null,type:null}},Th=a("[113] NumericLiteral"),Fh=a("[114] NumericLiteralUnsigned"),Nh=a("[115] NumericLiteralPositive"),jh=a("[116] NumericLiteralNegative"),Rh=a("[117] BooleanLiteral"),Lh="TRUE",Oh=n("TRUE",!1),Ph="true",Qh=n("true",!1),Dh=function(){var e={};return e.token="literal",e.lang=null,e.type="http://www.w3.org/2001/XMLSchema#boolean",e.value=!0,e},Mh="FALSE",qh=n("FALSE",!1),Uh="false",Bh=n("false",!1),Gh=function(){var e={};return e.token="literal",e.lang=null,e.type="http://www.w3.org/2001/XMLSchema#boolean",e.value=!1,e},Hh=a("[118] String"),Vh=function(e){return{token:"string",value:e}},zh=a("[119] IRIref"),Wh=function(e){return{token:"uri",prefix:null,suffix:null,value:e}},Xh=function(e){return e},Jh=a("[120] PrefixedName"),Kh=function(e){return{token:"uri",prefix:e[0],suffix:e[1],value:null}},Yh=function(e){return{token:"uri",prefix:e,suffix:"",value:null}},Zh=a("[121] BlankNode"),ed=function(e){return{token:"blank",value:e}},td=function(){return ny++,{token:"blank",value:"_:"+ny}},rd=a("[122] IRI_REF"),nd=/^[^<>"{}|\^`\\]/,id=i(["<",">",'"',"{","}","|","^","`","\\"],!0,!1),od=function(e){return e.join("")},ad=a("[123] PNAME_NS"),sd=":",ud=n(":",!1),ld=a("[124] PNAME_LN"),cd=function(e,t){return[e,t]},fd=a("[125] BLANK_NODE_LABEL"),pd="_:",hd=n("_:",!1),dd=function(e){return e},vd=a("[126] VAR1"),gd=function(e){return e},yd=a("[127] VAR2"),md="$",bd=n("$",!1),wd=a("[128] LANGTAG"),xd="@",$d=n("@",!1),kd=/^[a-zA-Z]/,Ed=i([["a","z"],["A","Z"]],!1,!1),_d=/^[a-zA-Z0-9]/,Sd=i([["a","z"],["A","Z"],["0","9"]],!1,!1),Ad=function(e,t){return 0===t.length?("@"+e.join("")).toLowerCase():("@"+e.join("")+"-"+t[0][1].join("")).toLowerCase()},Cd=a("[129] INTEGER"),Id=/^[0-9]/,Td=i([["0","9"]],!1,!1),Fd=function(e){var t={};return t.token="literal",t.lang=null,t.type="http://www.w3.org/2001/XMLSchema#integer",t.value=ry(e),t},Nd=a("[130] DECIMAL"),jd=function(e,t,r){var n={};return n.token="literal",n.lang=null,n.type="http://www.w3.org/2001/XMLSchema#decimal",n.value=ry([e,t,r]),n},Rd=function(e,t){var r={};return r.token="literal",r.lang=null,r.type="http://www.w3.org/2001/XMLSchema#decimal",r.value=ry([e,t]),r},Ld=a("[131] DOUBLE"),Od=function(e,t,r,n){var i={};return i.token="literal",i.lang=null,i.type="http://www.w3.org/2001/XMLSchema#double",i.value=ry([e,t,r,n]),i},Pd=function(e,t,r){var n={};return n.token="literal",n.lang=null,n.type="http://www.w3.org/2001/XMLSchema#double",n.value=ry([e,t,r]),n},Qd=function(e,t){var r={};return r.token="literal",r.lang=null,r.type="http://www.w3.org/2001/XMLSchema#double",r.value=ry([e,t]),r},Dd=a("[132] INTEGER_POSITIVE"),Md=function(e){return e.value="+"+e.value,e},qd=a("[133] DECIMAL_POSITIVE"),Ud=function(e){return e.value="+"+e.value,e},Bd=a("[134] DOUBLE_POSITIVE"),Gd=a("[135] INTEGER_NEGATIVE"),Hd=function(e){return e.value="-"+e.value,e},Vd=a("[136] DECIMAL_NEGATIVE"),zd=a("[137] DOUBLE_NEGATIVE"),Wd=a("[138] EXPONENT"),Xd=/^[eE]/,Jd=i(["e","E"],!1,!1),Kd=/^[+\-]/,Yd=i(["+","-"],!1,!1),Zd=function(e,t,r){return ry([e,t,r])},ev=a("[139] STRING_LITERAL1"),tv="'",rv=n("'",!1),nv=/^[^'\\\n\r]/,iv=i(["'","\\","\n","\r"],!0,!1),ov=function(e){return ry(e)},av=a("[140] STRING_LITERAL2"),sv='"',uv=n('"',!1),lv=/^[^"\\\n\r]/,cv=i(['"',"\\","\n","\r"],!0,!1),fv=a("[141] STRING_LITERAL_LONG1"),pv="'''",hv=n("'''",!1),dv=/^[^'\\]/,vv=i(["'","\\"],!0,!1),gv=a("[142] STRING_LITERAL_LONG2"),yv='"""',mv=n('"""',!1),bv=/^[^"\\]/,wv=i(['"',"\\"],!0,!1),xv=a("[143] ECHAR"),$v="\\",kv=n("\\",!1),Ev=/^[tbnrf"']/,_v=i(["t","b","n","r","f",'"',"'"],!1,!1),Sv=a("[144] NIL"),Av=function(){return{token:"triplesnodecollection",triplesContext:[],chainSubject:[{token:"uri",value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}]}},Cv=a("[145] WS"),Iv=/^[ ]/,Tv=i([" "],!1,!1),Fv=/^[\t]/,Nv=i(["\t"],!1,!1),jv=/^[\r]/,Rv=i(["\r"],!1,!1),Lv=/^[\n]/,Ov=i(["\n"],!1,!1),Pv=a(" COMMENT"),Qv="#",Dv=n("#",!1),Mv=/^[^\n\r]/,qv=i(["\n","\r"],!0,!1),Uv=a("[146] ANON"),Bv=a("[147] PN_CHARS_BASE"),Gv=/^[A-Z]/,Hv=i([["A","Z"]],!1,!1),Vv=/^[a-z]/,zv=i([["a","z"]],!1,!1),Wv=/^[\xC0-\xD6]/,Xv=i([["",""]],!1,!1),Jv=/^[\xD8-\xF6]/,Kv=i([["",""]],!1,!1),Yv=/^[\xF8-\u02FF]/,Zv=i([["",""]],!1,!1),eg=/^[\u0370-\u037D]/,tg=i([["",""]],!1,!1),rg=/^[\u037F-\u1FFF]/,ng=i([["",""]],!1,!1),ig=/^[\u200C-\u200D]/,og=i([["",""]],!1,!1),ag=/^[\u2070-\u218F]/,sg=i([["",""]],!1,!1),ug=/^[\u2C00-\u2FEF]/,lg=i([["",""]],!1,!1),cg=/^[\u3001-\uD7FF]/,fg=i([["",""]],!1,!1),pg=/^[\uF900-\uFDCF]/,hg=i([["",""]],!1,!1),dg=/^[\uFDF0-\uFFFD]/,vg=i([["",""]],!1,!1),gg=/^[\u1000-\uEFFF]/,yg=i([["",""]],!1,!1),mg=a("[148] PN_CHARS_U"),bg="_",wg=n("_",!1),xg=a("[149] VARNAME"),$g=/^[\xB7]/,kg=i([""],!1,!1),Eg=/^[\u0300-\u036F]/,_g=i([["",""]],!1,!1),Sg=/^[\u203F-\u2040]/,Ag=i([["",""]],!1,!1),Cg=function(e,t){return e+t.join("")},Ig=a("[150] PN_CHARS"),Tg=a("[151] PN_PREFIX"),Fg=function(e,t){if("."==t[t.length-1])throw new Error("Wrong PN_PREFIX, cannot finish with '.'");return e+t.join("")},Ng=a("[152] PN_LOCAL"),jg=function(e,t){return e+(t||[]).join("")},Rg=a("[170] PLX"),Lg=a("[171] PERCENT"),Og="%",Pg=n("%",!1),Qg=function(e){return e.join("")},Dg=a("[172] HEX"),Mg=/^[A-F]/,qg=i([["A","F"]],!1,!1),Ug=/^[a-f]/,Bg=i([["a","f"]],!1,!1),Gg=a("[173] PN_LOCAL_ESC"),Hg="~",Vg=n("~",!1),zg="&",Wg=n("&",!1),Xg=function(e){return"\\"+e},Jg=0,Kg=0,Yg=[{line:1,column:1}],Zg=0,ey=[],ty=0;if("startRule"in r){if(!(r.startRule in Er))throw new Error("Can't start parsing from rule \""+r.startRule+'".');_r=Er[r.startRule]}var ry=function(e){for(var t="",r=0;r<e.length;r++)t+="string"==typeof e[r]?e[r]:e[r].join("");return t},ny=0,iy={},oy=function(e,t){iy[e]=t},ay=function(e){iy[null]=e},sy=function(e){var t="";if(null==e)return null;for(var r=0;r<e.length;r++)t+=e[r];return t.toUpperCase()};if($r=_r(),$r!==kr&&Jg===e.length)return $r;throw $r!==kr&&Jg<e.length&&l(o()),c(ey,Zg<e.length?e.charAt(Zg):null,Zg<e.length?u(Zg,Zg+1):u(Zg,Zg))}return e(t,Error),t.buildMessage=function(e,t){function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}function n(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}function i(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e);
}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}function o(e){return u[e.type](e)}function a(e){var t,r,n=new Array(e.length);for(t=0;t<e.length;t++)n[t]=o(e[t]);if(n.sort(),n.length>0){for(t=1,r=1;t<n.length;t++)n[t-1]!==n[t]&&(n[r]=n[t],r++);n.length=r}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}function s(e){return e?'"'+n(e)+'"':"end of input"}var u={literal:function(e){return'"'+n(e.text)+'"'},class:function(e){var t,r="";for(t=0;t<e.parts.length;t++)r+=e.parts[t]instanceof Array?i(e.parts[t][0])+"-"+i(e.parts[t][1]):i(e.parts[t]);return"["+(e.inverted?"^":"")+r+"]"},any:function(e){return"any character"},end:function(e){return"end of input"},other:function(e){return e.description}};return"Expected "+a(e)+" but "+s(t)+" found."},{SyntaxError:t,parse:r}}()},{}],47:[function(e,t,r){var n=(e("./btree").Tree,e("./utils")),i=n,o=e("./lexicon").Lexicon;PersistentLexicon=function(e,t){var r=this;n.registerIndexedDB(r),this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri},this.oidCounter=1,r.dbName=t||"rdfstorejs";var i=r.indexedDB.open(this.dbName+"_lexicon",1);i.onerror=function(t){e(null,new Error("Error opening IndexedDB: "+t.target.errorCode))},i.onsuccess=function(t){r.db=t.target.result,e(r)},i.onupgradeneeded=function(e){r.db=e.target.result;var t=r.db.createObjectStore("knownGraphs",{keyPath:"oid"});t.createIndex("uriToken","uriToken",{unique:!0});var n=r.db.createObjectStore("components",{keyPath:"id",autoIncrement:!0});n.createIndex("value","value",{unique:!0})}},PersistentLexicon.prototype.registerGraph=function(e,t,r){if(e!=this.defaultGraphOid){var n=this.db.transaction(["knownGraphs"],"readwrite");n.onerror=function(e){r(null,new Error(e.target.statusCode))};var i=n.objectStore("knownGraphs"),o=i.get(t);o.onsuccess=function(n){var o=n.target.result;if(o)r(!0);else{var a=i.add({oid:e,uriToken:t});a.onsuccess=function(e){r(!0)}}}}else r()},PersistentLexicon.prototype.registeredGraphs=function(e,t){var r=[],n=this.db.transaction(["knownGraphs"],"readwrite").objectStore("knownGraphs"),i=n.openCursor();i.onsuccess=function(n){var i=n.target.result;i?(e===!0?r.push(i.value.uriToken):r.push(i.value.oid),i.continue()):t(r)},i.onerror=function(e){t(null,new Error("Error retrieving data from the cursor: "+e.target.errorCode))}},PersistentLexicon.prototype.registerUri=function(e,t){var r=this;if(e===this.defaultGraphUri)t(this.defaultGraphOid);else{var n=r.db.transaction(["components"],"readwrite").objectStore("components"),i=n.index("value").get("_u:"+e);i.onsuccess=function(r){var i=r.target.result;if(i){i.counter++;var o=i.id,a=n.put(i);a.onsuccess=function(e){t(o)},a.onerror=function(e){t(null,new Error("Error updating the URI data"+e.target.errorCode))}}else{var s=n.add({value:"_u:"+e,counter:0,uri:!0});s.onsuccess=function(e){t(e.target.result)},s.onerror=function(e){t(null,new Error("Error inserting the URI data"+e.target.errorCode))}}},i.onerror=function(e){t(null,new Error("Error retrieving the URI data"+e.target.errorCode))}}},PersistentLexicon.prototype.resolveUri=function(e,t){if(e===this.defaultGraphUri)t(this.defaultGraphOid);else{var r=this.db.transaction(["components"]).objectStore("components"),n=r.index("value").get("_u:"+e);n.onsuccess=function(e){t(null!=e.target.result?e.target.result.id:-1)},n.onerror=function(e){t(null,new Error("Error retrieving uri data "+e.target.errorCode))}}},PersistentLexicon.prototype.resolveUriCost=function(e,t){if(e===this.defaultGraphUri)t(0);else{var r=that.db.transaction(["components"]).objectStore("components"),n=r.index("value").get("_u:"+e);n.onsuccess=function(e){t(null!=e.target.result?e.target.result.cost:-1)},n.onerror=function(e){t(null,new Error("Error retrieving uri data "+e.target.errorCode))}}},PersistentLexicon.prototype.registerBlank=function(e){var t=guid(),r=this,n=r.db.transaction(["components"],"readwrite").objectStore("components"),i=n.add({value:"_b:"+t,counter:0,label:!0});i.onsuccess=function(t){e(t.target.result)},i.onerror=function(t){e(null,new Error("Error inserting the URI data"+t.target.errorCode))}},PersistentLexicon.prototype.resolveBlankCost=function(e,t){t(0)},PersistentLexicon.prototype.registerLiteral=function(e,t){var r=this,n=r.db.transaction(["components"],"readwrite").objectStore("components"),i=n.index("value").get("_l:"+e);i.onsuccess=function(r){var i=r.target.result;if(i){i.counter++;var o=i.id,a=n.put(i);a.onsuccess=function(e){t(o)},a.onerror=function(e){t(null,new Error("Error updating the literal data"+e.target.errorCode))}}else{var s=n.add({value:"_l:"+e,counter:0,literal:!0});s.onsuccess=function(e){t(e.target.result)},s.onerror=function(e){t(null,new Error("Error inserting the literal data"+e.target.errorCode))}}},i.onerror=function(e){t(null,new Error("Error retrieving the literal data"+e.target.errorCode))}},PersistentLexicon.prototype.resolveLiteral=function(e,t){var r=that.db.transaction(["components"]).objectStore("components"),n=r.index("value").get("_l:"+e);n.onsuccess=function(e){t(null!=e.target.result?e.target.result.id:-1)},n.onerror=function(e){t(null,new Error("Error retrieving literal data "+e.target.errorCode))}},PersistentLexicon.prototype.resolveLiteralCost=function(e,t){var r=that.db.transaction(["components"]).objectStore("components"),n=r.index("components").get(e);n.onsuccess=function(e){t(null!=e.target.result?e.target.result.cost:-1)},n.onerror=function(e){t(null,new Error("Error retrieving literal data "+e.target.errorCode))}},PersistentLexicon.prototype.parseLiteral=function(e){return o.prototype.parseLiteral(e)},PersistentLexicon.prototype.parseUri=function(e){return o.prototype.parseUri(e)},PersistentLexicon.prototype.retrieve=function(e,t){var r,n,i=this;e===this.defaultGraphOid?t({token:"uri",value:this.defaultGraphUri,prefix:null,suffix:null,defaultGraph:!0}):(r=i.db.transaction(["components"]),n=r.objectStore("components").get(e),n.onsuccess=function(e){if(null!=e.target.result)if(null!=e.target.result.label){var r="_:"+e.target.result.id;t({token:"blank",value:r})}else null!=e.target.result.uri?t(i.parseUri(e.target.result.value.slice(3,e.target.result.value.length))):null!=e.target.result.literal?t(i.parseLiteral(e.target.result.value.slice(3,e.target.result.value.length))):(console.log(e.target.result),t(null,new Error("Unknown type of component "+e.target.result)));else t(null,null)},n.onerror=function(e){t(null,new Error("Error searching in blanks data "+e.target.errorCode))})},PersistentLexicon.prototype.clear=function(e){var t=this;this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri};var r,n=t.db.transaction(["components"],"readwrite"),i=n.objectStore("components"),o=function(){null!=e&&e()};r=i.clear(),r.onsuccess=o,r.onerror=o},PersistentLexicon.prototype.unregister=function(e,t,r){var n=this;i.seq(function(r){n._unregisterTerm(e.subject.token,t.subject,r)},function(r){n._unregisterTerm(e.predicate.token,t.predicate,r)},function(r){n._unregisterTerm(e.object.token,t.object,r)},function(r){null!=e.graph?n._unregisterTerm(e.graph.token,t.graph,r):r()})(function(){r(!0)})},PersistentLexicon.prototype._unregisterTerm=function(e,t,r){var n,i=this,o=i.db.transaction(["components","knownGraphs"],"readwrite");if("uri"===e)if(t!=this.defaultGraphOid){var a=function(){var e=o.objectStore("knownGraphs").delete(t);e.onsuccess=function(){r()}};n=o.objectStore("components").delete(t),n.onsuccess=a()}else r();else n=o.objectStore("components").delete(t),n.onsuccess=function(){r()}},t.exports={PersistentLexicon:PersistentLexicon}},{"./btree":40,"./lexicon":44,"./utils":57}],48:[function(e,t,r){var n=e("./utils");PersistentQuadBackend=function(e,t){var r=this;if(0!==arguments){n.registerIndexedDB(r),this.indexMap={},this.indices=["S","P","O","G","SP","SO","SG","PO","PG","OG","SPO","SPG","SOG","POG","SPOG"],this.componentOrders={S:["subject","predicate","object","graph"],P:["predicate","subject","object","graph"],O:["object","subject","predicate","graph"],G:["graph","subject","predicate","object"],SP:["subject","predicate","object","graph"],SO:["subject","object","predicate","graph"],SG:["subject","graph","predicate","object"],PO:["predicate","object","subject","graph"],PG:["predicate","graph","subject","object"],OG:["object","graph","subject","predicate"],SPO:["subject","predicate","object","graph"],SPG:["subject","predicate","graph","object"],SOG:["subject","object","graph","predicate"],POG:["predicate","object","graph","subject"],SPOG:["subject","predicate","object","graph"]},this.componentOrdersMap={};for(var i in this.componentOrders){var o=this.componentOrders[i],a=o.slice(0,i.length).sort().join(".");this.componentOrdersMap[a]=i}r.dbName=e.name||"rdfstorejs";var s=r.indexedDB.open(this.dbName+"_db",1);s.onerror=function(e){t(null,new Error("Error opening IndexedDB: "+e.target.errorCode))},s.onsuccess=function(e){r.db=e.target.result,t(r)},s.onupgradeneeded=function(e){var t=e.target.result,i=t.createObjectStore(r.dbName,{keyPath:"SPOG"});n.each(r.indices,function(e){"SPOG"!==e&&i.createIndex(e,e,{unique:!1})})}}},PersistentQuadBackend.prototype.index=function(e,t){var r=this;n.each(this.indices,function(t){e[t]=r._genMinIndexKey(e,t)});var i=r.db.transaction([r.dbName],"readwrite");i.oncomplete=function(e){},i.onerror=function(e){t(null,new Error(e.target.statusCode))};var o=i.objectStore(r.dbName),a=o.add(e);a.onsuccess=function(e){t(!0)}},PersistentQuadBackend.prototype.range=function(e,t){var r,n=this,i=n.db.transaction([n.dbName]).objectStore(n.dbName),o=this._indexForPattern(e),a=this._genMinIndexKey(e,o),s=this._genMaxIndexKey(e,o),u=n.IDBKeyRange.bound(a,s,!1,!1),l=[];r="SPOG"===o?i:i.index(o),r.openCursor(u).onsuccess=function(e){var r=e.target.result;r?(l.push(r.value),r.continue()):t(l)}},PersistentQuadBackend.prototype.search=function(e,t){var r=this,n=r.db.transaction([r.dbName]).objectStore(r.dbName),i=this._genMinIndexKey(e,"SPOG"),o=n.get(i);o.onerror=function(e){t(null,new Error(e.target.statusCode))},o.onsuccess=function(e){t(null!=e.target.result)}},PersistentQuadBackend.prototype.delete=function(e,t){var r=this,n=r._genMinIndexKey(e,"SPOG"),i=r.db.transaction([r.dbName],"readwrite").objectStore(r.dbName).delete(n);i.onsuccess=function(){t(!0)},i.onerror=function(e){t(null,new Error(e.target.statusCode))}},PersistentQuadBackend.prototype._genMinIndexKey=function(e,t){var r=this.componentOrders[t];return n.map(r,function(t){return"string"==typeof e[t]||null==e[t]?"0":e[t]}).join(".")},PersistentQuadBackend.prototype._genMaxIndexKey=function(e,t){for(var r=this.componentOrders[t],i=[],o=0;o<r.length;o++){var a=r[o],s=e[a];"string"==typeof s?i[o]="z":i[o]=s}return n.map(i,function(e){return""+e}).join(".")},PersistentQuadBackend.prototype._indexForPattern=function(e){var t=this,r=e.indexKey,n=r.sort().join("."),i=t.componentOrdersMap[n];if(null==i)throw new Error("Error, cannot find index for indexKey "+n);return i},PersistentQuadBackend.prototype.clear=function(e){var t,r=this,n=r.db.transaction([r.dbName],"readwrite");t=n.objectStore(r.dbName).clear(),t.onsuccess=function(){e()},t.onerror=function(){e()}},t.exports.PersistentQuadBackend=PersistentQuadBackend},{"./utils":57}],49:[function(e,t,r){var n=e("./quad_index").QuadIndex,i=e("./utils");QuadBackend=function(e,t){this.indexMap={},this.treeOrder=e.treeOrder,this.indices=e.index||QuadBackend.allIndices,this.componentOrders=QuadBackend.componentOrders;var r=this;i.eachSeries(this.indices,function(e,t){new n({order:r.treeOrder,componentOrder:r.componentOrders[e]},function(n){r.indexMap[e]=n,t()})},function(){t(r)})},QuadBackend.allIndices=["SPOG","GP","OGS","POG","GSP","OS"],QuadBackend.componentOrders={SPOG:["subject","predicate","object","graph"],GP:["graph","predicate","subject","object"],OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate","object"],OS:["object","subject","predicate","graph"]},QuadBackend.prototype._indexForPattern=function(e){for(var t=e.indexKey,r=0;r<QuadBackend.allIndices.length;r++)for(var n=QuadBackend.allIndices[r],o=QuadBackend.componentOrders[n],a=0;a<o.length&&i.include(t,o[a])!==!1;a++)if(a==t.length-1)return n;return"SPOG"},QuadBackend.prototype.index=function(e,t){var r=this;i.eachSeries(this.indices,function(t,n){var i=r.indexMap[t];i.insert(e,function(){n()})},function(){t(!0)})},QuadBackend.prototype.range=function(e,t){var r=this._indexForPattern(e),n=this.indexMap[r];null!=n&&n.range(e,function(e){t(e)})},QuadBackend.prototype.search=function(e,t){var r=this.indexMap.SPOG;null!=r&&r.search(e,function(e){t(null!=e)})},QuadBackend.prototype.delete=function(e,t){var r=this;i.eachSeries(this.indices,function(t,n){var i=r.indexMap[t];i.delete(e,function(){n()})},function(){t(!0)})},QuadBackend.prototype.clear=function(e){var t=this;i.eachSeries(this.indices,function(e,r){new n({order:t.treeOrder,componentOrder:t.componentOrders[e]},function(n){t.indexMap[e]=n,r()})},function(){e(!0)})},t.exports.QuadBackend=QuadBackend},{"./quad_index":50,"./utils":57}],50:[function(e,t,r){var n=e("./btree").Tree,i=e("./utils"),o=e("./utils");NodeKey=function(e,t){this.subject=e.subject,this.predicate=e.predicate,this.object=e.object,this.graph=e.graph,this.order=t},NodeKey.prototype.comparator=function(e){for(var t=0;t<this.order.length;t++){var r=this.order[t];if(null==e[r])return 0;if(this[r]<e[r])return-1;if(this[r]>e[r])return 1}return 0},Pattern=function(e){this.subject=e.subject,this.predicate=e.predicate,this.object=e.object,this.graph=e.graph,this.indexKey=[],this.keyComponents={};var t=[],r=[],n=this;i.forEach(["subject","predicate","object","graph"],function(e){"string"==typeof n[e]?(r.push(e),n.keyComponents[e]=null):(t.push(e),n.keyComponents[e]=n[e],n.indexKey.push(e))}),this.order=t.concat(r),this.key=new NodeKey(this.keyComponents,this.order)},QuadIndex=function(e,t){0!=arguments&&(this.componentOrder=e.componentOrder,n.call(this,e.order,function(e){e.comparator=function(t,r){for(var n=0;n<e.componentOrder.length;n++){var i=e.componentOrder[n],o=t[i],a=r[i];if(o<a)return-1;if(o>a)return 1}return 0},e.rangeComparator=function(t,r){for(var n=0;n<e.componentOrder.length;n++){var i=e.componentOrder[n];if(null==r[i]||null==t[i])return 0;if(t[i]<r[i])return-1;if(t[i]>r[i])return 1}return 0},t(e)}))},QuadIndex.prototype=i.create(n.prototype,{constructor:n}),QuadIndex.prototype.insert=function(e,t){n.prototype.insert.call(this,e,null,function(e){t(e)})},QuadIndex.prototype.search=function(e,t){n.prototype.search.call(this,e,function(e){t(e)},!0)},QuadIndex.prototype.range=function(e,t){this._rangeTraverse(this,this.root,e,t)},QuadIndex.prototype._rangeTraverse=function(e,t,r,n){var i=r.key,a=[],s=[t];o.whilst(function(){return s.length>0},function(t){for(var r=s.shift(),n=0;n<r.numberActives&&e.rangeComparator(r.keys[n].key,i)===-1;)n++;if(r.isLeaf===!0){for(var u=n;u<r.numberActives&&0===e.rangeComparator(r.keys[u].key,i);)a.push(r.keys[u].key),u++;t()}else e._diskRead(r.children[n],function(u){s.push(u);var l=n;o.whilst(function(){return l<r.numberActives&&0===e.rangeComparator(r.keys[l].key,i)},function(t){a.push(r.keys[l].key),l++,e._diskRead(r.children[l],function(e){s.push(e),t()})},function(){t()})})},function(){n(a)})},t.exports={QuadIndex:QuadIndex,Pattern:Pattern,NodeKey:NodeKey}},{"./btree":40,"./utils":57}],51:[function(e,t,r){function n(e,t,r){this.name="BindExpressionError",this.bind=t,this.error=r,this.message=e}var i=e("./abstract_query_tree").AbstractQueryTree,o=e("./abstract_query_tree").NonSupportedSparqlFeatureError,a=e("./utils"),s=e("./quad_index"),u=e("./query_plan").QueryPlan,l=e("./query_filters").QueryFilters,c=e("./rdf_model"),f=e("./rdf_loader").RDFLoader,p=e("./graph_callbacks").CallbacksBackend,h=e("./utils"),d=e("./utils");n.prototype=new Error,n.constructor=n,QueryEngine=function(e){0!=arguments.length&&(this.backend=e.backend,this.lexicon=e.lexicon,this.eventsOnBatchLoad=e.eventsOnBatchLoad||!1,this.defaultPrefixes={},this.abstractQueryTree=new i,this.rdfLoader=new f(e.communication),this.callbacksBackend=new p(this),this.customFns=e.customFns||{})},QueryEngine.prototype.setCustomFunctions=function(e){this.customFns=e},QueryEngine.prototype.registerNsInEnvironment=function(e,t){var r=[];null!=e&&null!=e.prefixes&&(r=e.prefixes);var n={};for(var i in this.defaultPrefixes)n[i]=this.defaultPrefixes[i];for(var o=0;o<r.length;o++){var a=r[o];"prefix"===a.token&&(n[a.prefix]=a.local)}t.namespaces=n,null!=e&&e.base&&"object"==typeof e.base?t.base=e.base.value:t.base=null},QueryEngine.prototype.applyModifier=function(e,t){if("DISTINCT"==e){for(var r={},n=[],i=0;i<t.length;i++){var o=t[i],a="";for(var s in o){var u=o[s];null==u?a=a+s+"null":"literal"==u.token?(null!=u.value&&(a+=u.value),null!=u.lang&&(a+=u.lang),null!=u.type&&(a+=u.type)):a=u.value?a+s+u.value:a+s+u}null==r[a]&&(n.push(o),r[a]=!0)}return n}return t},QueryEngine.prototype.applyLimitOffset=function(e,t,r){return null==t&&null==e?r:(null==e&&(e=0),t=null==t?r.length:e+t,r.slice(e,t))},QueryEngine.prototype.applySingleOrderBy=function(e,t,r,n,i){var o=[],a=this;h.eachSeries(e,function(e,i){l.collect(e.expression,[t],r,n,a,function(e){o.push(e[0].value),i()})},function(){i({binding:t,value:o})})},QueryEngine.prototype.applyOrderBy=function(e,t,r,n,i){var o=this,a=[];null!=e&&e.length>0?h.eachSeries(t,function(t,i){o.applySingleOrderBy(e,t,r,n,function(e){a.push(e),i()})},function(){a.sort(function(t,r){return o.compareFilteredBindings(t,r,e,n)});for(var t=[],r=0;r<a.length;r++)t.push(a[r].binding);i(t)}):i(t)},QueryEngine.prototype.compareFilteredBindings=function(e,t,r,n){for(var i=!1,o=0;!i;){if(o==e.value.length)return 0;var a,s=r[o].direction;if(null!=e.value[o]||null!=t.value[o]){if(null==e.value[o])a={value:!1};else if(null==t.value[o])a={value:!0};else{if("blank"===e.value[o].token&&"blank"===t.value[o].token){o++;continue}if("blank"===e.value[o].token)a={value:!1};else if("blank"===t.value[o].token)a={value:!0};else if("uri"===e.value[o].token&&"uri"===t.value[o].token){if(1==l.runEqualityFunction(e.value[o],t.value[o],[],this,n).value){o++;continue}a=l.runTotalGtFunction(e.value[o],t.value[o],[])}else if("uri"===e.value[o].token)a={value:!1};else if("uri"===t.value[o].token)a={value:!0};else if("literal"===e.value[o].token&&"literal"===t.value[o].token&&null==e.value[o].type&&null==t.value[o].type){if(1==l.runEqualityFunction(e.value[o],t.value[o],[],this,n).value){o++;continue}a=l.runTotalGtFunction(e.value[o],t.value[o],[])}else if("literal"===e.value[o].token&&null==e.value[o].type)a={value:!1};else if("literal"===t.value[o].token&&null==t.value[o].type)a={value:!0};else{if(1==l.runEqualityFunction(e.value[o],t.value[o],[],this,n).value){o++;continue}a=l.runTotalGtFunction(e.value[o],t.value[o],[])}}return 1==a.value?"ASC"===s?1:-1:"ASC"===s?-1:1}o++}},QueryEngine.prototype.removeDefaultGraphBindings=function(e,t){for(var r=[],n={},i=0;i<t.named.length;i++)n[t.named[i].oid]=!0;for(i=0;i<t.implicit.length;i++)null==n[t.implicit[i].oid]&&r.push(t.implicit[i].oid);var o=[];for(i=0;i<e.length;i++){var a=e[i],s=!1;for(var u in a){for(var l=0;l<n.length;l++)if(a[u]===n[l]){s=!0;break}if(s)break}s||o.push(a)}return o},QueryEngine.prototype.aggregateBindings=function(e,t,r,n,i){this.copyDenormalizedBindings(t,n.outCache,function(t){for(var o={},a=0;a<e.length;a++){var s=l.runAggregator(e[a],t,this,r,n);e[a].alias?o[e[a].alias.value]=s:o[e[a].value.value]=s}i(o)})},QueryEngine.prototype.projectBindings=function(e,t,r){if("*"===e[0].kind)return t;for(var n=[],i=0;i<t.length;i++){for(var o=t[i],a={},s=!0,u=0;u<e.length;u++)if("variable"==e[u].token&&"aliased"!=e[u].kind)a[e[u].value.value]=o[e[u].value.value];else if("variable"==e[u].token&&"aliased"==e[u].kind){var c=l.runFilter(e[u].expression,o,this,r,{blanks:{},outCache:{}});if(l.isEbvError(c)){s=!1;break}a[e[u].alias.value]=c}s===!0&&n.push(a)}return n},QueryEngine.prototype.resolveNsInEnvironment=function(e,t){var r=t.namespaces;return r[e]},QueryEngine.prototype.normalizeTerm=function(e,t,r,n){if("uri"===e.token){var i=a.lexicalFormBaseUri(e,t);null==i?n(null):r?this.lexicon.registerUri(i,n):this.lexicon.resolveUri(i,n)}else if("literal"===e.token){var o=a.lexicalFormLiteral(e,t);r?this.lexicon.registerLiteral(o,n):this.lexicon.resolveLiteral(o,n)}else if("blank"===e.token){var s=e.value,u=t.blanks[s];null!=u?n(u):r?this.lexicon.registerBlank(function(e){t.blanks[s]=e,n(e)}):this.lexicon.resolveBlank(function(e){t.blanks[s]=e,n(e)})}else n("var"===e.token?e.value:null)},QueryEngine.prototype.normalizeDatasets=function(e,t,r){var n=this;h.eachSeries(e,function(e,r){e.value===n.lexicon.defaultGraphUri?(e.oid=n.lexicon.defaultGraphOid,r()):n.normalizeTerm(e,t,!1,function(t){null!=t&&(e.oid=t),r()})},function(){r(!0)})},QueryEngine.prototype.normalizeQuad=function(e,t,r,n){var i=null,o=null,s=null,u=null,l=this,c=!1;h.seq(function(n){if(null==e.graph||e.graph.value===l.lexicon.defaultGraphUri)u=0,n();else{var i=a.lexicalFormBaseUri(e.graph,t);l.normalizeTerm(e.graph,t,r,function(t){null!=t?(u=t,r===!0&&"var"!=e.graph.token?l.lexicon.registerGraph(t,i,function(){n()}):n()):(c=!0,n())})}},function(n){c===!1?l.normalizeTerm(e.subject,t,r,function(e){null!=e?(i=e,n()):(c=!0,n())}):n()},function(n){c===!1?l.normalizeTerm(e.predicate,t,r,function(e){null!=e?(o=e,n()):(c=!0,n())}):n()},function(n){c===!1?l.normalizeTerm(e.object,t,r,function(e){null!=e?(s=e,n()):(c=!0,n())}):n()})(function(){n(c===!0?null:{subject:i,predicate:o,object:s,graph:u})})},QueryEngine.prototype.denormalizeBindingsList=function(e,t,r){var n=this,i=[];h.eachSeries(e,function(e,r){n.denormalizeBindings(e,t,function(e){i.push(e),r()})},function(){r(i)})},QueryEngine.prototype.copyDenormalizedBindings=function(e,t,r){var n=this,i=[];h.eachSeries(e,function(e,r){var o={},a=d.keys(e);h.eachSeries(a,function(r,i){var a=e[r];if(null==a)o[r]=null,i();else if("object"==typeof a)o[r]=a,i();else{var s=t[a];null!=s?(o[r]=s,i()):n.lexicon.retrieve(a,function(e){t[a]=e,o[r]=e,i()})}},function(){i.push(o),r()})},function(){r(i)})},QueryEngine.prototype.denormalizeBindings=function(e,t,r){var n=d.keys(e),i=t.outCache,o=this;h.eachSeries(n,function(r,n){var a=e[r];null==a?(e[r]=null,n()):"object"==typeof a?n():null!=i[a]?(e[r]=i[a],n()):o.lexicon.retrieve(a,function(i){e[r]=i,"blank"===i.token&&(t.blanks[i.value]=a),n()})},function(){r(e)})},QueryEngine.prototype.execute=function(e,t,r,n){e=a.normalizeUnicodeLiterals(e);var i=this.abstractQueryTree.parseQueryString(e);if(null==i)t(!1,"Error parsing query string");else if("query"===i.token&&"update"==i.kind){this.callbacksBackend.startGraphModification();var o=this;this.executeUpdate(i,function(e,r){o.lexicon.updateAfterWrite&&o.lexicon.updateAfterWrite(),e?(o.callbacksBackend.cancelGraphModification(),t(e,r)):o.callbacksBackend.endGraphModification(function(){t(e,r)})})}else"query"===i.token&&"query"==i.kind&&this.executeQuery(i,t,r,n)},QueryEngine.prototype.executeQuery=function(e,t,r,n){var i=e.prologue,o=e.units,a=this,s={blanks:{},outCache:{}};this.registerNsInEnvironment(i,s);var u=a.abstractQueryTree.parseExecutableUnit(o[0]);"select"===u.kind?this.executeSelect(u,s,r,n,function(e,r){null==e?"object"==typeof r&&r.denorm===!0?t(null,r.bindings):a.denormalizeBindingsList(r,s,function(e){t(null,e)}):t(e)}):"ask"===u.kind?(u.projection=[{token:"variable",kind:"*"}],this.executeSelect(u,s,r,n,function(e,r){null==e?r.length>0?t(null,!0):t(null,!1):t(e)})):"construct"===u.kind&&(u.projection=[{token:"variable",kind:"*"}],a=this,this.executeSelect(u,s,r,n,function(e,r){null==e?a.denormalizeBindingsList(r,s,function(e){if(null!=e){var r=new c.Graph;null==u.template&&(u.template={triplesContext:u.pattern});for(var n=1,i=[],o=0;o<e.length;o++){for(var l=e[o],f=0;f<i.length;f++)delete i[f].valuetmp;for(var f=0;f<u.template.triplesContext.length;f++){for(var p=["subject","predicate","object"],h=u.template.triplesContext[f],d=0;d<p.length;d++){var v=p[d];if("blank"===h[v].token)if(h[v].valuetmp&&null!=h[v].valuetmp);else{var g="_:b"+n;n++,h[v].valuetmp=g,i.push(h[v])}}var y=c.buildRDFResource(h.subject,l,a,s),d=c.buildRDFResource(h.predicate,l,a,s),m=c.buildRDFResource(h.object,l,a,s);if(null!=y&&null!=d&&null!=m){var b=new c.Triple(y,d,m);r.add(b)}}}t(null,r)}else t(new Error("Error denormalizing bindings."))}):t(e)}))},QueryEngine.prototype.executeSelect=function(e,t,r,n,i){if("select"===e.kind||"ask"===e.kind||"construct"===e.kind||"modify"===e.kind){var o=e.projection,a=e.dataset,s=e.modifier,u=e.limit,l=e.offset,c=e.order,f=this;null==r&&null==n||(a.implicit=r||[],a.named=n||[]),null!=a.implicit&&0===a.implicit.length&&null!=a.named&&0===a.named.length&&a.implicit.push(this.lexicon.defaultGraphUriTerm),f.normalizeDatasets(a.implicit.concat(a.named),t,function(){try{f.executeSelectUnit(o,a,e.pattern,t,function(r){if(null!=r){if(null!=e.group&&""===e.group){for(var n=!1,p=0;p<e.projection.length;p++)if(null!=e.projection[p].expression&&"aggregate"===e.projection[p].expression.expressionType){n=!0;break}n===!0&&(e.group="singleGroup")}e.group&&""!=e.group?f.checkGroupSemantics(e.group,o)?f.groupSolution(r,e.group,a,t,function(e){var r=[];h.eachSeries(e,function(e,n){f.aggregateBindings(o,e,a,t,function(e){r.push(e),n()})},function(){i(null,{bindings:r,denorm:!0})})}):i(new Error("Incompatible Group and Projection variables")):f.applyOrderBy(c,r,a,t,function(e){var t=f.projectBindings(o,e,a),r=f.applyModifier(s,t),n=f.applyLimitOffset(l,u,r),c=f.removeDefaultGraphBindings(n,a);i(null,c)})}else i(new Error("Error executing SELECT query."))})}catch(e){i(e)}})}else i(new Error("Cannot execute "+e.kind+" query as a select query"))},QueryEngine.prototype.groupSolution=function(e,t,r,n,i){var o=[],a=[],s=!1,u=this;"singleGroup"===t?i([e]):h.eachSeries(e,function(e,i){var c=!0;h.eachSeries(t,function(t,i){var a=null;if("var"===t.token)a=t.value,0==s&&o.push(a),i();else if("aliased_expression"===t.token){if(a=t.alias.value,0==s&&o.push(a),"var"===t.expression.primaryexpression)e[t.alias.value]=e[t.expression.value.value];else{var f=u.copyDenormalizedBindings([e],n.outCache),p=l.runFilter(t.expression,f[0],u,r,n);l.isEbvError(p)?c=!1:(null!=p.value&&(p.value=""+p.value),e[t.alias.value]=p)}i()}else u.copyDenormalizedBindings([e],n.outCache,function(r){var f=l.runFilter(t,r[0],u,n);l.isEbvError(f)?c=!1:(e["groupCondition"+env._i]=f,a="groupCondition"+env._i,0==s&&o.push(a)),i()})},function(){0==s&&(s=!0),c===!0&&a.push(e),i()})},function(){for(var e={},t={},r=0,n=0;n<a.length;n++){for(var s=a[n],u="",l=0;l<o.length;l++){var c=s[o[l]];u+="object"==typeof c?c.value:c}null==e[u]?(t[u]=r,e[u]=[s]):e[u].push(s)}var f=[];for(var p in e)f.push(e[p]);i(f)})},QueryEngine.prototype.executeSelectUnit=function(e,t,r,n,i){if("BGP"===r.kind)this.executeAndBGP(e,t,r,n,i);else if("UNION"===r.kind)this.executeUNION(e,t,r.value,n,i);else if("JOIN"===r.kind)this.executeJOIN(e,t,r,n,i);else if("LEFT_JOIN"===r.kind)this.executeLEFT_JOIN(e,t,r,n,i);else if("FILTER"===r.kind){var a=this;this.executeSelectUnit(e,t,r.value,n,function(e){null!=e?l.checkFilters(r,e,!1,t,n,a,i):i([])})}else{if("EMPTY_PATTERN"!==r.kind)throw new o(r.kind);i([])}},QueryEngine.prototype.executeUNION=function(e,t,r,i,o){var a,s,c=r[0],f=r[1],p=null;if(2!=r.length)throw"SPARQL algebra UNION with more than two components";var d=this;h.seq(function(r){try{d.executeSelectUnit(e,t,c,i,function(e){a=e,r()})}catch(e){p=e,r()}},function(r){if(null==p)try{d.executeSelectUnit(e,t,f,i,function(e){s=e,r()})}catch(e){p=e,r()}else r()})(function(){if(null!=p)o(p);else{var e=u.unionBindings(a,s);d.runBinds(r.binds,e,t,i,function(e,a){if(null!=e)throw new n("Error processing bind expressions",r.binds,e);l.checkFilters(r,a,!1,t,i,d,o)})}})},QueryEngine.prototype.executeAndBGP=function(e,t,r,i,o){var a=this;u.executeAndBGPsDPSize(r.value,t,this,i,function(e){null!=e?a.runBinds(r.binds,e,t,i,function(e,s){if(null!=e)throw new n("Error processing bind expressions",r.binds,e);l.checkFilters(r,s,!1,t,i,a,o)}):o(null)})},QueryEngine.prototype.executeLEFT_JOIN=function(e,t,r,i,o){var a=r.lvalue,s=r.rvalue;if("EMPTY_PATTERN"===a.kind)this.executeSelectUnit(e,t,s,i,o);else{var c,f,p=null,d=null,v=null,g=this;h.seq(function(r){try{g.executeSelectUnit(e,t,a,i,function(e){p=e,r()})}catch(e){v=e,r()}},function(r){if(null!=v)r();else try{g.executeSelectUnit(e,t,s,i,function(e){d=e,r()})}catch(e){v=e,r()}})(function(){if(null!=v)o(v);else{var e=u.leftOuterJoinBindings(p,d);g.runBinds(r.binds,e,t,i,function(a,s){if(null!=a)throw new n("Error processing bind expressions",r.binds,a);l.checkFilters(r,e,!0,t,i,g,function(e){if(p.length>1&&d.length>1){var t=[],r={};for(var n in p[0])r[n]=!0;for(n in d[0])1!=r[n]&&t.push(n);c=[],f={};for(var i=0;i<e.length;i++)if(e[i].__nullify__===!0){for(var a=0;a<t.length;a++)e[i].bindings[t[a]]=null;var s=[],u=[];for(var n in e[i].bindings)null!=e[i].bindings[n]&&(s.push(n+e[i].bindings[n]),s.sort(),u.push(s.join("")));if(null==f[s.join("")]){for(a=0;a<u.length;a++)f[u[a]]=!0;c.push(e[i].bindings)}}else{c.push(e[i]);var s=[],u=[];for(var n in e[i])s.push(n+e[i][n]),s.sort(),f[s.join("")]=!0}o(c)}else o(e)})})}})}},QueryEngine.prototype.executeJOIN=function(e,t,r,i,o){var a=r.lvalue,s=r.rvalue,c=null,f=null,p=null,d=this;h.seq(function(r){try{d.executeSelectUnit(e,t,a,i,function(e){c=e,r()})}catch(e){p=e,r()}},function(r){if(null!=p)r();else try{d.executeSelectUnit(e,t,s,i,function(e){f=e,r()})}catch(e){p=e,r()}})(function(){var e=null;if(null!=p)o(p);else if(0===c.length||0===f.length)o([]);else{var h={},v=[];for(var g in c[0])h[g]=!1;for(var g in f[0])h[g]===!1&&v.push(g);e=0==v.length?u.joinBindings(c,f):d.abstractQueryTree.treeWithUnion(a)||d.abstractQueryTree.treeWithUnion(s)?u.joinBindings(c,f):u.joinBindings2(v,c,f),d.runBinds(r.binds,e,t,i,function(e,a){if(null!=e)throw new n("Error processing bind expressions",r.binds,e);l.checkFilters(r,a,!1,t,i,d,o)})}})},QueryEngine.prototype.rangeQuery=function(e,t,r){var n=this;n.normalizeQuad(e,t,!1,function(e){null!=e?n.backend.range(new s.Pattern(e),function(e){r(null==e||0==e.length?[]:e)}):r(null)})},QueryEngine.prototype.executeUpdate=function(e,t){var r=e.prologue,n=e.units,i=this,o={blanks:{},outCache:{}};this.registerNsInEnvironment(r,o);for(var s=0;s<n.length;s++){var u=i.abstractQueryTree.parseExecutableUnit(n[s]);if("insertdata"===u.kind){var l=null;h.eachSeries(u.quads,function(e,t){null===l?i._executeQuadInsert(e,o,function(e){null!=e&&(l=e),t()}):t()},function(){null===l?t(null,!0):t(l)})}else if("deletedata"===u.kind){var l=null;h.eachSeries(u.quads,function(e,t){null===l?i._executeQuadDelete(e,o,function(e){null!=e&&(l=e),t()}):t()},function(){null===l?t(null,!0):t(l)})}else if("modify"===u.kind)this._executeModifyQuery(u,o,t);else if("create"===u.kind)t(!0);else if("load"===u.kind){var c={uri:a.lexicalFormBaseUri(u.sourceGraph,o)};null!=u.destinyGraph&&(c={uri:a.lexicalFormBaseUri(u.destinyGraph,o)});var i=this;this.rdfLoader.load(u.sourceGraph.value,c,function(e,r){e?t(new Error("error batch loading quads")):i.batchLoad(r,function(e){null!==e?t(null,e):t(new Error("Error batch loading quads"))})})}else if("drop"===u.kind)this._executeClearGraph(u.destinyGraph,o,t);else{if("clear"!==u.kind)throw new Error("not supported execution unit");this._executeClearGraph(u.destinyGraph,o,t)}}},QueryEngine.prototype.batchLoad=function(e,t){var r=0,n={},i=this;this.eventsOnBatchLoad&&this.callbacksBackend.startGraphModification();var o=function(e,t,r,o){var a,e;if(e[t].uri||"uri"===e[t].token){var s=e[t].uri||e[t].value;i.lexicon.registerUri(s,function(n){var a=function(){null!=e[t].uri&&(e[t]={
token:"uri",value:e[t].uri},delete e[t].uri),r[t]=n,o()};"graph"===t?i.lexicon.registerGraph(n,s,function(){a()}):a()})}else e[t].literal||"literal"===e[t].token?i.lexicon.registerLiteral(e[t].literal||e[t].value,function(n){null!=e[t].literal&&(e[t]=i.lexicon.parseLiteral(e[t].literal),delete e[t].literal),r[t]=n,o()}):(a=n[e[t].blank||e[t].value],null==a?i.lexicon.registerBlank(function(i){n[e[t].blank||e[t].value]=i,null==e[t].token&&(e[t].token="blank",e[t].value=e[t].blank,delete e[t].blank),r[t]=i,o()}):(null==e[t].token&&(e[t].token="blank",e[t].value=e[t].blank,delete e[t].blank),r[t]=a,o()))};h.eachSeries(e,function(e,t){var n={};h.eachSeries(["subject","predicate","object","graph"],function(t,r){o(e,t,n,r)},function(){var o=e;e=n;var a=new s.NodeKey(e);i.backend.search(a,function(n){n?t():i.backend.index(a,function(n){n&&(i.eventsOnBatchLoad&&i.callbacksBackend.nextGraphModification(p.added,[o,e]),r+=1),t()})})})},function(){null!=i.lexicon.updateAfterWrite&&i.lexicon.updateAfterWrite();var e=function(){t(r)};i.eventsOnBatchLoad?i.callbacksBackend.endGraphModification(e()):e()})},QueryEngine.prototype._executeModifyQuery=function(e,t,r){var n=this,i=!0,o=new Error("Error executing modify query"),a=null,s=["subject","predicate","object","graph"];e.insert=null==e.insert?[]:e.insert,e.delete=null==e.delete?[]:e.delete,h.seq(function(r){var s=[],u=[];if(null!=e.with&&s.push(e.with),null!=e.using){u=[];for(var l=0;l<e.using.length;l++){var c=e.using[l];"named"===c.kind?u.push(c.uri):s.push(c.uri)}}e.dataset={},e.projection=[{token:"variable",kind:"*"}],n.executeSelect(e,t,s,u,function(e,s){return e?(o=e,i=!1,r()):void n.denormalizeBindingsList(s,t,function(e){null!=e?a=e:(o=new Error("Error denormalizing bindings list"),i=!1),r()})})},function(r){var o=e.with;if(i){for(var u=[],l=0;l<e.delete.length;l++)for(var c=e.delete[l],f=0;f<a.length;f++){for(var p={},d=a[f],v=0;v<s.length;v++){var g=s[v];"graph"==g&&null==c[g]?p.graph=o:"var"===c[g].token?p[g]=d[c[g].value]:p[g]=c[g]}u.push(p)}h.eachSeries(u,function(e,r){n._executeQuadDelete(e,t,function(){r()})},function(){r()})}else r()},function(r){var o=e.with;if(i){for(var u=[],l=0;l<e.insert.length;l++)for(var c=e.insert[l],f=0;f<a.length;f++){for(var p={},d=a[f],v=0;v<s.length;v++){var g=s[v];"graph"==g&&null==c[g]?p.graph=o:"var"===c[g].token?p[g]=d[c[g].value]:p[g]=c[g]}u.push(p)}h.eachSeries(u,function(e,r){n._executeQuadInsert(e,t,function(){r()})},function(){r()})}else r()})(function(){r(i?null:o)})},QueryEngine.prototype._executeQuadInsert=function(e,t,r){var n,i=this,o=!1,a=null;h.seq(function(r){i.normalizeQuad(e,t,!0,function(e){null!=e?n=e:(o=!0,a="Error normalizing quad."),r()})},function(t){if(o===!1){var r=new s.NodeKey(n);i.backend.search(r,function(o){o===!0?t():i.backend.index(r,function(){i.callbacksBackend.nextGraphModification(p.added,[e,n]),t()})})}else t()})(function(){o?r(new Error(a)):r(null,!0)})},QueryEngine.prototype._executeQuadDelete=function(e,t,r){var n,i,o,a=this,u=!1;h.seq(function(r){a.normalizeQuad(e,t,!0,function(e){null!=e?n=e:(u=!0,i="Error normalizing quad."),r()})},function(e){u===!1?(o=new s.NodeKey(n),a.backend.delete(o,function(){e()})):e()},function(t){u===!1?a.lexicon.unregister(e,o,function(){a.callbacksBackend.nextGraphModification(p.deleted,[e,n]),t()}):t()})(function(){u?r(new Error(i)):r(null,!0)})},QueryEngine.prototype._executeClearGraph=function(e,t,r){var n=this;if("default"===e)this.execute("DELETE { ?s ?p ?o } WHERE { ?s ?p ?o }",r);else if("named"===e)n.lexicon.registeredGraphs(!0,function(e){if(null!=e){var t=!1;h.eachSeries(e,function(e,r){t?r():n.execute("DELETE { GRAPH <"+e+"> { ?s ?p ?o } } WHERE { GRAPH <"+e+"> { ?s ?p ?o } }",function(i,o){i?(t=i,r()):n.lexicon.resolveUri(e,function(i){i!=-1?n.lexicon.knownGraphs.delete(i,function(){r()}):(t="Cannot find graph "+e+" to clear it",r())})})},function(){r(!t)})}else r(!1,"Error deleting named graphs")});else if("all"===e){var n=this;this.execute("CLEAR DEFAULT",function(e,t){e?r(!1,t):n.execute("CLEAR NAMED",r)})}else if("uri"==e.token){var i=a.lexicalFormBaseUri(e,t);null!=i?(this.callbacksBackend.ongoingModification=!0,this.execute("DELETE { GRAPH <"+i+"> { ?s ?p ?o } } WHERE { GRAPH <"+i+"> { ?s ?p ?o } }",function(e){n.callbacksBackend.ongoingModification=!1,r(e)})):r(!1,"wrong graph URI")}else r(!1,"wrong graph URI")},QueryEngine.prototype.checkGroupSemantics=function(e,t){if("singleGroup"===e)return!0;for(var r={},n=0;n<e.length;n++){var i=e[n];"var"===i.token?r[i.value]=!0:"aliased_expression"===i.token&&(r[i.alias.value]=!0)}for(n=0;n<t.length;n++){var o=t[n];if("var"===o.kind){if(null==r[o.value.value])return!1}else if("aliased"===o.kind&&o.expression&&"var"===o.expression.primaryexpression&&null==r[o.expression.value.value])return!1}return!0},QueryEngine.prototype.runBinds=function(e,t,r,n,i){var o=this,a=t;null!=e&&e.length>0?o.copyDenormalizedBindings(t,n.outCache,function(s){for(var u=0;u<t.length;u++)for(var c=0;c<e.length;c++){var f=e[c],p=s[u],h=l.runFilter(f.expression,p,o,r,n);l.isEbvError(h)?i(h):a[u][f.as.value]=h}i(null,t)}):i(null,t)},QueryEngine.prototype.computeCosts=function(e,t,r){for(var n=0;n<e.length;n++)e[n]._cost=this.quadCost(e[n],t);r(e)},QueryEngine.prototype.quadCost=function(e,t){return 1},QueryEngine.prototype.registerDefaultNamespace=function(e,t){this.defaultPrefixes[e]=t},t.exports={QueryEngine:QueryEngine}},{"./abstract_query_tree":39,"./graph_callbacks":42,"./quad_index":50,"./query_filters":52,"./query_plan":53,"./rdf_loader":54,"./rdf_model":55,"./utils":57}],52:[function(e,t,r){var n=e("./utils"),i=n,o=e("./utils");QueryFilters={};var a="http://www.w3.org/2001/XMLSchema#";QueryFilters.checkFilters=function(e,t,r,n,i,a,s){var u=[];e.filter&&"function"!=typeof e.filter&&(u=e.filter);var l=[];return null==u||0===u.length||null!=e.length?s(t):void QueryFilters.preprocessExistentialFilters(u,t,a,n,i,function(e){o.eachSeries(e,function(e,o){QueryFilters.run(e.value,t,r,n,i,a,function(e){for(var r=[],n=0;n<e.length;n++){var i=e[n];null!=i.__nullify__?l.push(i):r.push(i)}t=r,o()})},function(){s(t.concat(l))})})},QueryFilters.preprocessExistentialFilters=function(e,t,r,n,a,s){var u=[];o.eachSeries(e,function(e,s){if("builtincall"!==e.value.expressionType||"exists"!==e.value.builtincall&&"notexists"!==e.value.builtincall)if("conditionalor"===e.value.expressionType||"conditionaland"===e.value.expressionType){var l=i.map(e.value.operands,function(e){return{value:e}});QueryFilters.preprocessExistentialFilters(l,t,r,n,a,function(t){e.value.operands=t.map(function(e){return e.value}),u.push(e),s()})}else if("multiplicativeexpression"===e.value.expressionType){var l=i.map(e.value.factors,function(e){return{value:e}});QueryFilters.preprocessExistentialFilters(l,t,r,n,a,function(t){e.value.factors=t.map(function(e){return e.value}),u.push(e),s()})}else if("additiveexpression"===e.value.expressionType){var l=i.map(e.value.summands,function(e){return{value:e}});QueryFilters.preprocessExistentialFilters(l,t,r,n,a,function(t){e.value.summands=t.map(function(e){return e.value}),u.push(e),s()})}else if("relationalexpression"===e.value.expressionType){var l=[{value:e.value.op1},{value:e.value.op2}];QueryFilters.preprocessExistentialFilters(l,t,r,n,a,function(t){e.value.op1=t[0].value,e.value.op2=t[1].value,u.push(e),s()})}else if("irireforfunction"===e.value.expressionType||"custom"===e.value.expressionType)if(null!=e.value.args){var l=i.map(e.value.args,function(e){return{value:e}});QueryFilters.preprocessExistentialFilters(l,t,r,n,a,function(t){e.value.args=t.map(function(e){return e.value}),u.push(e),s()})}else u.push(e),s();else u.push(e),s();else{var c=e.value.builtincall,f=e.value.args,p={};r.copyDenormalizedBindings(t,a.outCache,function(t){o.eachSeries(t,function(e,t){var o=i.clone(f[0],!0),s=r.abstractQueryTree.parseSelect({pattern:o},e);s=r.abstractQueryTree.bind(s.pattern,e),r.executeSelectUnit([{kind:"*"}],n,s,a,function(r){var n=null;n="exists"===c?QueryFilters.ebvBoolean(0!==r.length):QueryFilters.ebvBoolean(0===r.length);var i=[];for(var o in e)i.push(JSON.stringify(e[o]));i=i.sort().join(""),p[i]=n,t()})},function(){e.value.origArgs=e.value.args,e.value.args=p,u.push(e),s()})})}},function(){s(u)})},QueryFilters.boundVars=function(e){if(null==e.expressionType)throw"Cannot find bound expressions in a no expression token";var t=e.expressionType;if("relationalexpression"==t){var r=e.op1,n=e.op2;return QueryFilters.boundVars(r)+QueryFilters.boundVars(n)}if("conditionalor"==t||"conditionaland"==t){for(var i=[],o=0;o<e.operands;o++)i=i.concat(QueryFilters.boundVars(e.operands[o]));return i}if("builtincall"==t){if(null==e.args)return[];for(var a=[],o=0;o<e.args.length;o++)a=a.concat(QueryFilters.boundVars(e.args[o]));return a}if("multiplicativeexpression"==t){for(var a=QueryFilters.boundVars(e.factor),o=0;o<e.factors.length;o++)a=a.concat(QueryFilters.boundVars(e.factors[o].expression));return a}if("additiveexpression"==t){for(var a=QueryFilters.boundVars(e.summand),o=0;o<e.summands.length;o++)a=a.concat(QueryFilters.boundVars(e.summands[o].expression));return a}if("regex"==t){var a=QueryFilters.boundVars(e.expression1);return a.concat(QueryFilters.boundVars(e.expression2))}return"unaryexpression"==t?QueryFilters.boundVars(e.expression):"atomic"==t?"var"==e.primaryexpression?[e.value]:[]:void 0},QueryFilters.run=function(e,t,r,n,i,o,a){o.copyDenormalizedBindings(t,i.outCache,function(s){for(var u=[],l=0;l<t.length;l++){var c=s[l],f=QueryFilters.runFilter(e,c,o,n,i),f=QueryFilters.ebv(f);if(QueryFilters.isEbvError(f)){if(r){var p={__nullify__:!0,bindings:t[l]};u.push(p)}}else if(f===!0)u.push(t[l]);else if(r){var p={__nullify__:!0,bindings:t[l]};u.push(p)}}a(u)})},QueryFilters.collect=function(e,t,r,n,i,o){i.copyDenormalizedBindings(t,n.outCache,function(a){for(var s=[],u=0;u<a.length;u++){var l=a[u],c=QueryFilters.runFilter(e,l,i,r,n);s.push({binding:t[u],value:c})}return o(s)})},QueryFilters.runDistinct=function(e,t){},QueryFilters.runAggregator=function(e,t,r,i,o){if(null==t||0===t.length)return QueryFilters.ebvError();if("variable"===e.token&&"var"==e.kind)return t[0][e.value.value];if("variable"===e.token&&"aliased"===e.kind){if("atomic"===e.expression.expressionType&&"var"===e.expression.primaryexpression)return t[0][e.expression.value.value];if("aggregate"===e.expression.expressionType){if("max"===e.expression.aggregateType){for(var s=null,u=0;u<t.length;u++){var l=t[u],c=QueryFilters.runFilter(e.expression.expression,l,r,i,o);QueryFilters.isEbvError(c)||(null===s?s=c:QueryFilters.runLtFunction(s,c).value===!0&&(s=c))}return null===s?QueryFilters.ebvError():s}if("min"===e.expression.aggregateType){for(var f=null,u=0;u<t.length;u++){var l=t[u],c=QueryFilters.runFilter(e.expression.expression,l,r,i,o);QueryFilters.isEbvError(c)||(null===f?f=c:QueryFilters.runGtFunction(f,c).value===!0&&(f=c))}return null===f?QueryFilters.ebvError():f}if("count"===e.expression.aggregateType){var p={},h=0;if("*"===e.expression.expression)if(null!=e.expression.distinct&&""!=e.expression.distinct)for(var u=0;u<t.length;u++){var l=t[u],d=n.hashTerm(l);null==p[d]&&(p[d]=!0,h++)}else h=t.length;else for(var u=0;u<t.length;u++){var l=t[u],c=QueryFilters.runFilter(e.expression.expression,l,r,i,o);if(!QueryFilters.isEbvError(c))if(null!=e.expression.distinct&&""!=e.expression.distinct){var d=n.hashTerm(c);null==p[d]&&(p[d]=!0,h++)}else h++}return{token:"literal",type:a+"integer",value:""+h}}if("avg"===e.expression.aggregateType){for(var p={},v={token:"literal",type:a+"integer",value:"0"},h=0,u=0;u<t.length;u++){var l=t[u],c=QueryFilters.runFilter(e.expression.expression,l,r,i,o);if(!QueryFilters.isEbvError(c))if(null!=e.expression.distinct&&""!=e.expression.distinct){var d=n.hashTerm(c);null==p[d]&&(p[d]=!0,QueryFilters.isNumeric(c)&&(v=QueryFilters.runSumFunction(v,c),h++))}else QueryFilters.isNumeric(c)&&(v=QueryFilters.runSumFunction(v,c),h++)}var g=QueryFilters.runDivFunction(v,{token:"literal",type:a+"integer",value:""+h});return g.value=""+g.value,g}if("sum"===e.expression.aggregateType){for(var p={},v={token:"literal",type:a+"integer",value:"0"},u=0;u<t.length;u++){var l=t[u],c=QueryFilters.runFilter(e.expression.expression,l,r,i,o);if(!QueryFilters.isEbvError(c))if(null!=e.expression.distinct&&""!=e.expression.distinct){var d=n.hashTerm(c);null==p[d]&&(p[d]=!0,QueryFilters.isNumeric(c)&&(v=QueryFilters.runSumFunction(v,c)))}else QueryFilters.isNumeric(c)&&(v=QueryFilters.runSumFunction(v,c))}return v.value=""+v.value,v}var c=QueryFilters.runFilter(aggregate.expression,t[0],i,{blanks:{},outCache:{}});return c}}},QueryFilters.runFilter=function(e,t,r,i,o){if(null!=e.expressionType){var a=e.expressionType;if("relationalexpression"==a){var s=QueryFilters.runFilter(e.op1,t,r,i,o),u=QueryFilters.runFilter(e.op2,t,r,i,o);return QueryFilters.runRelationalFilter(e,s,u,t,r,i,o)}if("conditionalor"==a)return QueryFilters.runOrFunction(e,t,r,i,o);if("conditionaland"==a)return QueryFilters.runAndFunction(e,t,r,i,o);if("additiveexpression"==a)return QueryFilters.runAddition(e.summand,e.summands,t,r,i,o);if("builtincall"==a)return QueryFilters.runBuiltInCall(e.builtincall,e.args,t,r,i,o);if("multiplicativeexpression"==a)return QueryFilters.runMultiplication(e.factor,e.factors,t,r,i,o);if("unaryexpression"==a)return QueryFilters.runUnaryExpression(e.unaryexpression,e.expression,t,r,i,o);if("irireforfunction"==a)return QueryFilters.runIriRefOrFunction(e.iriref,e.args,t,r,i,o);if("regex"==a)return QueryFilters.runRegex(e.text,e.pattern,e.flags,t,r,i,o);if("custom"==a)return QueryFilters.runBuiltInCall(e.name,e.args,t,r,i,o);if("atomic"==a)return"var"==e.primaryexpression?t[e.value.value]:"object"!=typeof e.value?e.value:null==e.value.type||"object"!=typeof e.value.type?e.value:(e.value.type=n.lexicalFormBaseUri(e.value.type,o),e.value);throw"Unknown filter expression type"}throw"Cannot find bound expressions in a no expression token"},QueryFilters.isRDFTerm=function(e){return null!=e&&!!(e.token&&"literal"==e.token||e.token&&"uri"==e.token||e.token&&"blank"==e.token)},QueryFilters.RDFTermEquality=function(e,t,r,i){return"literal"===e.token&&"literal"===t.token?e.lang==t.lang&&e.type==t.type&&e.value==t.value||(null!=e.type&&null!=t.type?QueryFilters.ebvError():QueryFilters.isSimpleLiteral(e)&&null!=t.type?QueryFilters.ebvError():!(!QueryFilters.isSimpleLiteral(t)||null==e.type)&&QueryFilters.ebvError()):"uri"===e.token&&"uri"===t.token?n.lexicalFormBaseUri(e,i)==n.lexicalFormBaseUri(t,i):"blank"===e.token&&"blank"===t.token&&e.value==t.value},QueryFilters.isInteger=function(e){return null!=e&&("literal"===e.token&&(e.type==a+"integer"||e.type==a+"decimal"||e.type==a+"double"||e.type==a+"nonPositiveInteger"||e.type==a+"negativeInteger"||e.type==a+"long"||e.type==a+"int"||e.type==a+"short"||e.type==a+"byte"||e.type==a+"nonNegativeInteger"||e.type==a+"unsignedLong"||e.type==a+"unsignedInt"||e.type==a+"unsignedShort"||e.type==a+"unsignedByte"||e.type==a+"positiveInteger"))},QueryFilters.isFloat=function(e){return null!=e&&("literal"===e.token&&e.type==a+"float")},QueryFilters.isDecimal=function(e){return null!=e&&("literal"===e.token&&e.type==a+"decimal")},QueryFilters.isDouble=function(e){return null!=e&&("literal"===e.token&&e.type==a+"double")},QueryFilters.isNumeric=function(e){return null!=e&&("literal"===e.token&&(e.type==a+"integer"||e.type==a+"decimal"||e.type==a+"float"||e.type==a+"double"||e.type==a+"nonPositiveInteger"||e.type==a+"negativeInteger"||e.type==a+"long"||e.type==a+"int"||e.type==a+"short"||e.type==a+"byte"||e.type==a+"nonNegativeInteger"||e.type==a+"unsignedLong"||e.type==a+"unsignedInt"||e.type==a+"unsignedShort"||e.type==a+"unsignedByte"||e.type==a+"positiveInteger"))},QueryFilters.isSimpleLiteral=function(e){return!(!e||"literal"!=e.token)&&(null==e.type&&null==e.lang)},QueryFilters.isXsdType=function(e,t){return!(!t||"literal"!=t.token)&&t.type==a+""+e},QueryFilters.ebv=function(e){if(null==e||QueryFilters.isEbvError(e))return QueryFilters.ebvError();if(e.token&&"literal"===e.token){if(e.type==a+"integer"||e.type==a+"decimal"||e.type==a+"double"||e.type==a+"nonPositiveInteger"||e.type==a+"negativeInteger"||e.type==a+"long"||e.type==a+"int"||e.type==a+"short"||e.type==a+"byte"||e.type==a+"nonNegativeInteger"||e.type==a+"unsignedLong"||e.type==a+"unsignedInt"||e.type==a+"unsignedShort"||e.type==a+"unsignedByte"||e.type==a+"positiveInteger"){var t=parseFloat(e.value);return!isNaN(t)&&0!=parseFloat(e.value)}return e.type===a+"boolean"?"true"===e.value||e.value===!0||"True"===e.value:e.type===a+"string"?""!=e.value:e.type===a+"dateTime"?null!=new Date(e.value):QueryFilters.isEbvError(e)?e:null==e.type?""!=e.value:QueryFilters.ebvError()}return e.value===!0},QueryFilters.effectiveBooleanValue=QueryFilters.ebv,QueryFilters.ebvTrue=function(){var e={token:"literal",type:a+"boolean",value:!0};return e},QueryFilters.ebvFalse=function(){var e={token:"literal",type:a+"boolean",value:!1};return e},QueryFilters.ebvError=function(){var e={token:"literal",type:"https://github.com/antoniogarrote/js-tools/types#error",value:null};return e},QueryFilters.isEbvError=function(e){return"object"==typeof e&&null!=e&&"https://github.com/antoniogarrote/js-tools/types#error"===e.type},QueryFilters.ebvBoolean=function(e){return QueryFilters.isEbvError(e)?e:e===!0?QueryFilters.ebvTrue():QueryFilters.ebvFalse()},QueryFilters.runRelationalFilter=function(e,t,r,n,i,o,a){var s=e.operator;if("="===s)return QueryFilters.runEqualityFunction(t,r,n,i,o,a);if("!="===s){var u=QueryFilters.runEqualityFunction(t,r,n,i,o,a);return QueryFilters.isEbvError(u)?u:(u.value=!u.value,u)}if("<"===s)return QueryFilters.runLtFunction(t,r,n);if(">"===s)return QueryFilters.runGtFunction(t,r,n);if("<="===s)return QueryFilters.runLtEqFunction(t,r,n);if(">="===s)return QueryFilters.runGtEqFunction(t,r,n);throw"Error applying relational filter, unknown operator"},QueryFilters.effectiveTypeValue=function(e){if("literal"!=e.token)throw console.log("not implemented yet"),console.log(e),"value not supported in operations yet";if(e.type==a+"integer"){var t=parseInt(e.value);return t}if(e.type==a+"decimal"){var t=parseFloat(e.value);return t}if(e.type==a+"float"){var t=parseFloat(e.value);return t}if(e.type==a+"double"){var t=parseFloat(e.value);return t}if(e.type==a+"nonPositiveInteger"){var t=parseFloat(e.value);return t}if(e.type==a+"negativeInteger"){var t=parseInt(e.value);return t}if(e.type==a+"long"){var t=parseInt(e.value);return t}if(e.type==a+"int"){var t=parseInt(e.value);return t}if(e.type==a+"short"){var t=parseInt(e.value);return t}if(e.type==a+"byte"){var t=parseInt(e.value);return t}if(e.type==a+"nonNegativeInteger"){var t=parseInt(e.value);return t}if(e.type==a+"unsignedLong"){var t=parseInt(e.value);return t}if(e.type==a+"unsignedInt"){var t=parseInt(e.value);return t}if(e.type==a+"unsignedShort"){var t=parseInt(e.value);return t}if(e.type==a+"unsignedByte"){var t=parseInt(e.value);return t}if(e.type==a+"positiveInteger"){var t=parseInt(e.value);return t}if(e.type!=a+"date"&&e.type!=a+"dateTime")return e.type==a+"boolean"?e.value===!0||"true"===e.value||"1"===e.value||1===e.value||e.value===!0||e.value!==!1&&"false"!==e.value&&"0"!==e.value&&0!==e.value&&e.value!==!1&&void 0:e.type==a+"string"?null===e.value||void 0===e.value?void 0:""+e.value:null==e.type?e.value:e.value;try{var r=n.parseISO8601(e.value);return r}catch(e){return null}},QueryFilters.runOrFunction=function(e,t,r,n,i){for(var o=null,a=0;a<e.operands.length;a++){var s=QueryFilters.runFilter(e.operands[a],t,r,n,i);0==QueryFilters.isEbvError(s)&&(s=QueryFilters.ebv(s)),null==o?o=s:QueryFilters.isEbvError(s)?o=QueryFilters.isEbvError(o)?QueryFilters.ebvError():o===!0||QueryFilters.ebvError():s===!0?o=!0:QueryFilters.isEbvError(o)&&(o=QueryFilters.ebvError())}return QueryFilters.ebvBoolean(o)},QueryFilters.runAndFunction=function(e,t,r,n,i){for(var o=null,a=0;a<e.operands.length;a++){var s=QueryFilters.runFilter(e.operands[a],t,r,n,i);0==QueryFilters.isEbvError(s)&&(s=QueryFilters.ebv(s)),null==o?o=s:QueryFilters.isEbvError(s)?o=QueryFilters.isEbvError(o)?QueryFilters.ebvError():o===!0&&QueryFilters.ebvError():s===!0?QueryFilters.isEbvError(o)&&(o=QueryFilters.ebvError()):o=!1}return QueryFilters.ebvBoolean(o)},QueryFilters.runEqualityFunction=function(e,t,r,i,o,a){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(t)){var s=QueryFilters.effectiveTypeValue(e),u=QueryFilters.effectiveTypeValue(t);return isNaN(s)||isNaN(u)?QueryFilters.ebvBoolean(QueryFilters.RDFTermEquality(e,t,i,a)):QueryFilters.ebvBoolean(s==u)}if((QueryFilters.isSimpleLiteral(e)||QueryFilters.isXsdType("string",e))&&(QueryFilters.isSimpleLiteral(t)||QueryFilters.isXsdType("string",t)))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)==QueryFilters.effectiveTypeValue(t));if(QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)==QueryFilters.effectiveTypeValue(t));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",t)||QueryFilters.isXsdType("date",t))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",t))return QueryFilters.ebvFalse();if(QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",t))return QueryFilters.ebvFalse();var l=n.compareDateComponents(e.value,t.value);return null!=l?0==l?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.isRDFTerm(e)&&QueryFilters.isRDFTerm(t)?QueryFilters.ebvBoolean(QueryFilters.RDFTermEquality(e,t,i,a)):QueryFilters.ebvFalse()},QueryFilters.runGtFunction=function(e,t,r){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>QueryFilters.effectiveTypeValue(t));if(QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>QueryFilters.effectiveTypeValue(t));if(QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>QueryFilters.effectiveTypeValue(t));if(QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>QueryFilters.effectiveTypeValue(t));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",t)||QueryFilters.isXsdType("date",t))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",t))return QueryFilters.ebvFalse();if(QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",t))return QueryFilters.ebvFalse();var i=n.compareDateComponents(e.value,t.value);return null!=i?1==i?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runTotalGtFunction=function(e,t){return QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t)?QueryFilters.ebvError():QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(t)||QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(t)||QueryFilters.isXsdType("string",e)&&QueryFilters.isSimpleLiteral("string",t)||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isSimpleLiteral("boolean",t)||QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isSimpleLiteral("dateTime",t)?QueryFilters.runGtFunction(e,t,[]):e.token&&"uri"===e.token&&t.token&&"uri"===t.token?QueryFilters.ebvBoolean(e.value>t.value):e.token&&"literal"===e.token&&t.token&&"literal"===t.token?QueryFilters.ebvBoolean(""+e.value+e.type+e.lang>""+t.value+t.type+t.lang):e.token&&"blank"===e.token&&t.token&&"blank"===t.token?QueryFilters.ebvBoolean(e.value>t.value):e.value&&t.value?QueryFilters.ebvBoolean(e.value>t.value):QueryFilters.ebvTrue()},QueryFilters.runLtFunction=function(e,t,r){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<QueryFilters.effectiveTypeValue(t));if(QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<QueryFilters.effectiveTypeValue(t));if(QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<QueryFilters.effectiveTypeValue(t));if(QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<QueryFilters.effectiveTypeValue(t));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",t)||QueryFilters.isXsdType("date",t))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",t))return QueryFilters.ebvFalse();if(QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",t))return QueryFilters.ebvFalse();var i=n.compareDateComponents(e.value,t.value);return null!=i?i==-1?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runGtEqFunction=function(e,t,r){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>=QueryFilters.effectiveTypeValue(t));if(QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>=QueryFilters.effectiveTypeValue(t));if(QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>=QueryFilters.effectiveTypeValue(t));if(QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>=QueryFilters.effectiveTypeValue(t));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",t)||QueryFilters.isXsdType("date",t))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",t))return QueryFilters.ebvFalse();if(QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",t))return QueryFilters.ebvFalse();var i=n.compareDateComponents(e.value,t.value);return null!=i?i!=-1?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runLtEqFunction=function(e,t,r){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<=QueryFilters.effectiveTypeValue(t));if(QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<=QueryFilters.effectiveTypeValue(t));if(QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<=QueryFilters.effectiveTypeValue(t));if(QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<=QueryFilters.effectiveTypeValue(t));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",t)||QueryFilters.isXsdType("date",t))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",t))return QueryFilters.ebvFalse();if(QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",t))return QueryFilters.ebvFalse();var i=n.compareDateComponents(e.value,t.value);return null!=i?1!=i?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runAddition=function(e,t,r,n,i,o){var a=QueryFilters.runFilter(e,r,n,i,o);if(QueryFilters.isEbvError(a))return QueryFilters.ebvError();var s=a;if(QueryFilters.isNumeric(a)){for(var u=0;u<t.length;u++){var l=QueryFilters.runFilter(t[u].expression,r,n,i,o);if(!QueryFilters.isNumeric(l))return QueryFilters.ebvFalse();"+"===t[u].operator?s=QueryFilters.runSumFunction(s,l):"-"===t[u].operator&&(s=QueryFilters.runSubFunction(s,l))}return s}return QueryFilters.ebvFalse()},QueryFilters.runSumFunction=function(e,t){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t))return QueryFilters.ebvError();var r=QueryFilters.effectiveTypeValue(e)+QueryFilters.effectiveTypeValue(t);return QueryFilters.isDouble(e)||QueryFilters.isDouble(t)?{token:"literal",type:a+"double",value:r}:QueryFilters.isFloat(e)||QueryFilters.isFloat(t)?{token:"literal",type:a+"float",value:r}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(t)?{token:"literal",type:a+"decimal",value:r}:{token:"literal",type:a+"integer",value:r}},QueryFilters.runSubFunction=function(e,t){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t))return QueryFilters.ebvError();var r=QueryFilters.effectiveTypeValue(e)-QueryFilters.effectiveTypeValue(t);return QueryFilters.isDouble(e)||QueryFilters.isDouble(t)?{token:"literal",type:a+"double",value:r}:QueryFilters.isFloat(e)||QueryFilters.isFloat(t)?{token:"literal",type:a+"float",value:r}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(t)?{token:"literal",type:a+"decimal",value:r}:{token:"literal",type:a+"integer",value:r}},QueryFilters.runMultiplication=function(e,t,r,n,i,o){var a=QueryFilters.runFilter(e,r,n,i,o);if(QueryFilters.isEbvError(a))return a;var s=a;if(QueryFilters.isNumeric(a)){for(var u=0;u<t.length;u++){var l=QueryFilters.runFilter(t[u].expression,r,n,i,o);if(QueryFilters.isEbvError(l))return a;if(!QueryFilters.isNumeric(l))return QueryFilters.ebvFalse();"*"===t[u].operator?s=QueryFilters.runMulFunction(s,l):"/"===t[u].operator&&(s=QueryFilters.runDivFunction(s,l))}return s}return QueryFilters.ebvFalse()},QueryFilters.runMulFunction=function(e,t){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t))return QueryFilters.ebvError();var r=QueryFilters.effectiveTypeValue(e)*QueryFilters.effectiveTypeValue(t);return QueryFilters.isDouble(e)||QueryFilters.isDouble(t)?{token:"literal",type:a+"double",value:r}:QueryFilters.isFloat(e)||QueryFilters.isFloat(t)?{token:"literal",type:a+"float",value:r}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(t)?{token:"literal",type:a+"decimal",value:r}:{token:"literal",type:a+"integer",value:r}},QueryFilters.runDivFunction=function(e,t){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t))return QueryFilters.ebvError();var r=QueryFilters.effectiveTypeValue(e)/QueryFilters.effectiveTypeValue(t);return QueryFilters.isDouble(e)||QueryFilters.isDouble(t)?{token:"literal",type:a+"double",value:r}:QueryFilters.isFloat(e)||QueryFilters.isFloat(t)?{token:"literal",type:a+"float",value:r}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(t)?{token:"literal",type:a+"decimal",value:r}:{token:"literal",type:a+"integer",value:r}},QueryFilters.runBuiltInCall=function(e,t,r,n,i,o){if("notexists"===e||"exists"===e){var a=[];for(var s in r)a.push(JSON.stringify(r[s]));return a=a.sort().join(""),t[a]}for(var u=[],l=0;l<t.length;l++)if("var"===t[l].token)u.push(t[l]);else{var c=QueryFilters.runFilter(t[l],r,n,i,o);if(QueryFilters.isEbvError(c))return c;u.push(c)}if("str"===e)return"literal"===u[0].token?{token:"literal",type:null,value:""+u[0].value}:"uri"===u[0].token?{token:"literal",type:null,value:u[0].value}:QueryFilters.ebvFalse();if("lang"===e)return"literal"===u[0].token?null!=u[0].lang?{token:"literal",value:""+u[0].lang}:{token:"literal",value:""}:QueryFilters.ebvError();if("datatype"===e){if("literal"===u[0].token){var f=u[0];return null!=f.type?"string"==typeof f.type?{token:"uri",value:f.type,
prefix:null,suffix:null}:f.type:null==f.lang?{token:"uri",value:"http://www.w3.org/2001/XMLSchema#string",prefix:null,suffix:null}:QueryFilters.ebvError()}return QueryFilters.ebvError()}if("isliteral"===e)return"literal"===u[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("isblank"===e)return"blank"===u[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("isuri"===e||"isiri"===e)return"uri"===u[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("sameterm"===e){var p=u[0],h=u[1],d=QueryFilters.RDFTermEquality(p,h,n,o);return QueryFilters.isEbvError(d)&&(d=!1),QueryFilters.ebvBoolean(d)}if("langmatches"===e){var v=u[0],g=u[1];return"literal"===v.token&&"literal"===g.token?"*"===g.value&&""!=v.value?QueryFilters.ebvTrue():QueryFilters.ebvBoolean(0===v.value.toLowerCase().indexOf(g.value.toLowerCase())):QueryFilters.ebvError()}if("bound"===e){var y=u[0].value;return null==y?QueryFilters.ebvError():null!=r[y]?QueryFilters.ebvTrue():QueryFilters.ebvFalse()}if(null!=n.customFns[e])return n.customFns[e](QueryFilters,u);throw"Builtin call "+e+" not implemented yet"},QueryFilters.runUnaryExpression=function(e,t,r,n,i,o){var a=QueryFilters.runFilter(t,r,n,i,o);if(QueryFilters.isEbvError(a))return a;if("!"===e){var s=QueryFilters.ebv(a);return QueryFilters.isEbvError(s)?QueryFilters.ebvFalse():(s=!s,QueryFilters.ebvBoolean(s))}if("+"===e)return QueryFilters.isNumeric(a)?a:QueryFilters.ebvError();if("-"===e){if(QueryFilters.isNumeric(a)){var u={};for(var l in a)u[l]=a[l];return u.value=-u.value,u}return QueryFilters.ebvError()}},QueryFilters.runRegex=function(e,t,r,n,i,o,a){if(null==e)return QueryFilters.ebvError();if(e=QueryFilters.runFilter(e,n,i,o,a),null==t)return QueryFilters.ebvError();if(t=QueryFilters.runFilter(t,n,i,o,a),null!=r&&(r=QueryFilters.runFilter(r,n,i,o,a)),null==t||"literal"!==t.token||null!=r&&"literal"!==r.token)return QueryFilters.ebvError();if(t=t.value,r=null==r?null:r.value,null!=e&&"var"==e.token){if(null==n[e.value])return QueryFilters.ebvError();e=n[e.value]}else{if(null==e||"literal"!==e.token)return QueryFilters.ebvError();if(null!=e.type&&!QueryFilters.isXsdType("string",e))return QueryFilters.ebvError();e=e.value}var s;return s=null==r?new RegExp(t):new RegExp(t,r.toLowerCase()),s.exec(e)?QueryFilters.ebvTrue():QueryFilters.ebvFalse()},QueryFilters.normalizeLiteralDatatype=function(e,t,r){return null==e.value.type||"object"!=typeof e.value.type?e:(e.value.type=n.lexicalFormBaseUri(e.value.type,r),e)},QueryFilters.runIriRefOrFunction=function(e,t,r,i,o,s){if(null==t)return e;for(var u=[],l=0;l<t.length;l++)u.push(QueryFilters.runFilter(t[l],r,i,o,s));var c=n.lexicalFormBaseUri(e,s);if(c==a+"integer"||c==a+"decimal"||c==a+"double"||c==a+"nonPositiveInteger"||c==a+"negativeInteger"||c==a+"long"||c==a+"int"||c==a+"short"||c==a+"byte"||c==a+"nonNegativeInteger"||c==a+"unsignedLong"||c==a+"unsignedInt"||c==a+"unsignedShort"||c==a+"unsignedByte"||c==a+"positiveInteger"){var f=u[0];if("literal"!==f.token)return QueryFilters.ebvError();if(f=QueryFilters.normalizeLiteralDatatype(f,i,s),f.type==a+"integer"||f.type==a+"decimal"||f.type==a+"double"||f.type==a+"nonPositiveInteger"||f.type==a+"negativeInteger"||f.type==a+"long"||f.type==a+"int"||f.type==a+"short"||f.type==a+"byte"||f.type==a+"nonNegativeInteger"||f.type==a+"unsignedLong"||f.type==a+"unsignedInt"||f.type==a+"unsignedShort"||f.type==a+"unsignedByte"||f.type==a+"positiveInteger")return f.type=c,f;if("http://www.w3.org/2001/XMLSchema#boolean"==f.type)return 1==QueryFilters.ebv(f)?(f.type=c,f.value=1):(f.type=c,f.value=0),f;if("http://www.w3.org/2001/XMLSchema#float"==f.type||"http://www.w3.org/2001/XMLSchema#double"==f.type)return f.type=c,f.value=parseInt(f.value),f;if("http://www.w3.org/2001/XMLSchema#string"!=f.type&&null!=f.type)return QueryFilters.ebvError();if(f.value.split(".").length>2)return QueryFilters.ebvError();if(f.value.split("-").length>2)return QueryFilters.ebvError();if(f.value.split("/").length>2)return QueryFilters.ebvError();if(f.value.split("+").length>2)return QueryFilters.ebvError();if(c==a+"decimal"&&(f.value.indexOf("e")!=-1||f.value.indexOf("E")!=-1))return QueryFilters.ebvError();if(!(c!=a+"int"&&c!=a+"integer"||f.value.indexOf("e")==-1&&f.value.indexOf("E")==-1&&f.value.indexOf(".")==-1))return QueryFilters.ebvError();try{return f.value=parseInt(parseFloat(f.value)),isNaN(f.value)?QueryFilters.ebvError():(f.type=c,f)}catch(e){return QueryFilters.ebvError()}}else{if(c==a+"boolean"){var f=u[0];return"literal"===f.token&&null==f.type?"true"===f.value||"1"===f.value?QueryFilters.ebvTrue():"false"===f.value||"0"===f.value?QueryFilters.ebvFalse():QueryFilters.ebvError():"literal"===f.token?QueryFilters.isEbvError(f)?f:QueryFilters.ebvBoolean(f):QueryFilters.ebvError()}if(c==a+"string"){var f=u[0];return"literal"===f.token?(f=QueryFilters.normalizeLiteralDatatype(f,i,s),f.type==a+"integer"||f.type==a+"decimal"||f.type==a+"double"||f.type==a+"nonPositiveInteger"||f.type==a+"negativeInteger"||f.type==a+"long"||f.type==a+"int"||f.type==a+"short"||f.type==a+"byte"||f.type==a+"nonNegativeInteger"||f.type==a+"unsignedLong"||f.type==a+"unsignedInt"||f.type==a+"unsignedShort"||f.type==a+"unsignedByte"||f.type==a+"positiveInteger"||f.type==a+"float"?(f.type=c,f.value=""+f.value,f):f.type==a+"string"?f:f.type==a+"boolean"?(QueryFilters.ebv(f)?(f.type=c,f.value="true"):(f.type=c,f.value="false"),f):f.type==a+"dateTime"||f.type==a+"date"?(f.type=c,"string"!=typeof f.value&&(f.value=n.iso8601(f.value)),f):null==f.type?(f.value=""+f.value,f.type=c,f):QueryFilters.ebvError()):"uri"===f.token?{token:"literal",value:n.lexicalFormBaseUri(f,s),type:c,lang:null}:QueryFilters.ebvError()}if(c==a+"dateTime"||c==a+"date"){if(f=u[0],f.type==a+"dateTime"||f.type==a+"date")return f;if(f.type!=a+"string"&&null!=f.type)return QueryFilters.ebvError();try{return f.value=n.iso8601(n.parseISO8601(f.value)),f.type=c,f}catch(e){return QueryFilters.ebvError()}}else{if(c!=a+"float")return null!=i.customFns[c]?i.customFns[c](QueryFilters,u):QueryFilters.ebvError();var f=u[0];if("literal"!==f.token)return QueryFilters.ebvError();if(f=QueryFilters.normalizeLiteralDatatype(f,i,s),"http://www.w3.org/2001/XMLSchema#decimal"==f.type||"http://www.w3.org/2001/XMLSchema#int"==f.type)return f.type=c,f.value=parseFloat(f.value),f;if("http://www.w3.org/2001/XMLSchema#boolean"==f.type)return 1==QueryFilters.ebv(f)?(f.type=c,f.value=1):(f.type=c,f.value=0),f;if("http://www.w3.org/2001/XMLSchema#float"==f.type||"http://www.w3.org/2001/XMLSchema#double"==f.type)return f.type=c,f.value=parseFloat(f.value),f;if("http://www.w3.org/2001/XMLSchema#string"==f.type)try{return f.value=parseFloat(f.value),isNaN(f.value)?QueryFilters.ebvError():(f.type=c,f)}catch(e){return QueryFilters.ebvError()}else{if(null!=f.type)return QueryFilters.ebvError();if(f.value.split(".").length>2)return QueryFilters.ebvError();if(f.value.split("-").length>2)return QueryFilters.ebvError();if(f.value.split("/").length>2)return QueryFilters.ebvError();if(f.value.split("+").length>2)return QueryFilters.ebvError();try{return f.value=parseFloat(f.value),isNaN(f.value)?QueryFilters.ebvError():(f.type=c,f)}catch(e){return QueryFilters.ebvError()}}}}},t.exports={QueryFilters:QueryFilters}},{"./utils":57}],53:[function(e,t,r){var n=e("./utils"),i=e("./utils"),o={};o.variablesInBGP=function(e){var t=e.variables;if(t)return t;var r=e.value||e;t=[];for(var n in r)r[n]&&"var"===r[n].token?t.push(r[n].value):r[n]&&"blank"===r[n].token&&t.push("blank:"+r[n].value);return e.variables=t,t},o.connected=function(e,t){for(var r="/"+e.vars.join("/")+"/",n=0;n<t.vars.length;n++)if(r.indexOf("/"+t.vars[n]+"/")!=-1)return!0;return!1};var a=function(e,t){for(var r={},n=0;n<e.lenght;n++)r[e[n]]=1;for(n=0;n<t.length;n++){var i=r[t[n]]||0;i++,r[t[n]]=i}var o=[];for(var a in r)2==r[a]&&o.push(r[a]);return o};o.variablesIntersectionBGP=function(e,t){return a(o.variablesInBGP(e),o.variablesInBGP(t))},o.executeAndBGPsGroups=function(e){for(var t={},r={},i=0,a=function(e,t){for(var r=0;r<e.length;r++){var n="/"+e[r]+"/";if(t.indexOf(n)!=-1)return!0}return!1},s=function(e,n,i,o){var a=[],s="",u="";for(var l in n)s+=l,a=a.concat(t[l]),u+=r[l];u=u+p.join("/")+"/",a.push(e),i[s]=a,o[s]=u},u=0;u<e.length;u++){var l=e[u],c={},f={},p=o.variablesInBGP(l),h={};for(var d in r)a(p,r[d])?h[d]=!0:(c[d]=t[d],f[d]=r[d]);0===n.size(h)?(c["g"+i]=[l],f["g"+i]="/"+p.join("/")+"/",i++):s(l,h,c,f),t=c,r=f}return n.values(t)},o.intersectionSize=function(e,t){for(var r=t.i.split("_"),n=0;n<r.length;n++)if(""!=r[n]&&e.i.indexOf("_"+r[n]+"_")!=-1)return 1;return 0},o.createJoinTree=function(e,t){for(var r="/"+e.vars.join("/")+"/",i=e.vars.concat([]),o=[],a=0;a<t.vars.length;a++)r.indexOf("/"+t.vars[a]+"/")!=-1?0==t.vars[a].indexOf("_:")?o.push("blank:"+t.vars[a]):o.push(t.vars[a]):i.push(t.vars[a]);for(var s=t.i.split("_"),u=e.i.split("_"),l={},a=0;a<s.length;a++)""!=s[a]&&(l[s[a]]=!0);for(var a=0;a<u.length;a++)""!=u[a]&&(l[u[a]]=!0);var c=n.keys(l);return{left:e,right:t,cost:e.cost+t.cost,i:"_"+c.sort().join("_")+"_",vars:i,join:o}},o.executeBushyTree=function(e,t,r,n,i){null==e.left?o.executeEmptyJoinBGP(e.right,t,r,n,i):null==e.right?o.executeEmptyJoinBGP(e.left,t,r,n,i):o.executeBushyTree(e.left,t,r,n,function(a){null!=a?o.executeBushyTree(e.right,t,r,n,function(t){i(null!=t?o.joinBindings2(e.join,a,t):null)}):i(null)})},o.executeAndBGPsDPSize=function(e,t,r,n,a){var s=o.executeAndBGPsGroups(e),u=[];i.eachSeries(s,function(e,t){r.computeCosts(e,n,function(e){var r={},n={},i={},a=1,s=null,l={};i[1]=[];for(var c=0;c<e.length;c++){var f=[];delete e[c].variables;for(var p in e[c])"_cost"!=p&&("var"===e[c][p].token?f.push(e[c][p].value):"blank"===e[c][p].token&&f.push(e[c][p].value));n["_"+c+"_"]={left:e[c],right:null,cost:e[c]._cost,i:"_"+c+"_",vars:f};var h={left:e[c],right:null,cost:e[c]._cost,i:"_"+c+"_",vars:f};r["_"+c+"_"]=h,delete e[c]._cost,l["_"+c+"_"]=!0,i[1].push("_"+c+"_"),(null==s||s.cost>h.cost)&&(s=h)}for(var d=2;d<=e.length;d++)for(var v=1;v<d;v++)for(var g=d-v,y=i[""+v]||[],m=i[""+g]||[],c=0;c<y.length;c++)for(var b=0;b<m.length;b++)if(y[c]!==m[b]){var w=n[y[c]],x=n[m[b]];if(0==o.intersectionSize(w,x)&&o.connected(w,x)){a=d;var $=r[w.i],k=r[x.i],E=o.createJoinTree($,k);if(!l[E.i]){l[E.i]=!0;var _=E.cost+1;null!=r[E.i]&&(_=r[E.i].cost);var S=i[d]||[];S.push(E.i),n[E.i]=E,i[d]=S,_>E.cost&&(a===d&&(s=E),r[E.i]=E)}}}u.push(s),t()})},function(){var e=null;i.eachSeries(u,function(i,a){o.executeBushyTree(i,t,r,n,function(t){t?null==e?(e=t,a()):(e=o.crossProductBindings(e,t),a()):a("Error executing bushy tree")})},function(t){t?a(null,t):a(e)})})},o.executeEmptyJoinBGP=function(e,t,r,n,i){return o.executeBGPDatasets(e,t,r,n,i)},o.executeBGPDatasets=function(e,t,r,n,a){var s={};if(null==e.graph){var u=[];i.eachSeries(t.implicit,function(t,i){null==s[t.oid]?(s[t.oid]=!0,e.graph=t,r.rangeQuery(e,n,function(t){t=o.buildBindingsFromRange(t,e),u.push(t),i()})):i()},function(){var e=o.unionManyBindings(u);a(e)})}else if("var"===e.graph.token){var l=e.graph.value,u=[];i.eachSeries(t.named,function(t,i){null==s[t.oid]?(s[t.oid]=!0,e.graph=t,null!=u?r.rangeQuery(e,n,function(r){if(null!=r){r=o.buildBindingsFromRange(r,e);for(var n=0;n<r.length;n++)r[n][l]=t.oid;u.push(r)}else u=null;i()}):i()):i()},function(){if(null==u)a(null);else{var e=o.unionManyBindings(u);a(e)}})}else r.rangeQuery(e,n,function(t){null!=t?(t=o.buildBindingsFromRange(t,e),a(t)):a(null)})},o.buildBindingsFromRange=function(e,t){o.variablesInBGP(t);var r=t.value||t,n={};for(c in r)r[c]&&"var"===r[c].token?n[c]=r[c].value:r[c]&&"blank"===r[c].token&&(n[c]="blank:"+r[c].value);var i=[];if(null!=e)for(var a=0;a<e.length;a++){var s={},u=e[a],l=!1;for(var c in n){var f=u[c];if(null!=s[n[c]]&&s[n[c]]!==f){l=!0;break}s[n[c]]=f}l||i.push(s)}return i},o.areCompatibleBindings=function(e,t){for(var r in e)if(null!=t[r]&&t[r]!=e[r])return!1;return!0},o.mergeBindings=function(e,t){var r={};for(var n in e)r[n]=e[n];for(var n in t)r[n]=t[n];return r},o.joinBindings2=function(e,t,r){for(var n,i,a,s,u,l={},c=[],f=0;f<t.length;f++){n=t[f],u=l;for(var p=0;p<e.length;p++)i=e[p],a=n[i],p==e.length-1?(s=u[a]||[],s.push(n),u[a]=s):(s=u[a]||{},u[a]=s,u=s)}for(var f=0;f<r.length;f++){n=r[f],u=l;for(var p=0;p<e.length;p++)if(i=e[p],a=n[i],null!=u[a])if(p==e.length-1)for(var h=0;h<u[a].length;h++)c.push(o.mergeBindings(u[a][h],n));else u=u[a]}return c},o.joinBindings=function(e,t){for(var r=[],n=0;n<e.length;n++)for(var i=e[n],a=0;a<t.length;a++){var s=t[a];o.areCompatibleBindings(i,s)&&r.push(o.mergeBindings(i,s))}return r},o.augmentMissingBindings=function(e,t){for(var r in t)null==e[r]&&(e[r]=null);return e},o.leftOuterJoinBindings=function(e,t){for(var r=[],n=0;n<e.length;n++){for(var i=e[n],a=!1,s=0;s<t.length;s++){var u=t[s];o.areCompatibleBindings(i,u)&&(a=!0,r.push(o.mergeBindings(i,u)))}a===!1&&(o.augmentMissingBindings(i,u),r.push(i))}return r},o.crossProductBindings=function(e,t){for(var r=[],n=0;n<e.length;n++)for(var i=e[n],a=0;a<t.length;a++){var s=t[a];r.push(o.mergeBindings(i,s))}return r},o.unionBindings=function(e,t){return e.concat(t)},o.unionManyBindings=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];t=o.unionBindings(t,n)}return t},t.exports={QueryPlan:o}},{"./utils":57}],54:[function(e,t,r){var n=e("./network_transport").NetworkTransport,i=e("./rvn3_parser").RVN3Parser,o=e("./jsonld_parser").JSONLDParser,a=e("./utils"),s=function(e){if(this.precedences=["text/turtle","text/n3","application/ld+json","application/json"],this.parsers={"text/turtle":i.parser,"text/n3":i.parser,"application/ld+json":o.parser,"application/json":o.parser},"undefined"!=typeof RDFXMLParser&&(this.precedences.push("application/rdf+xml"),this.parsers["application/rdf+xml"]=RDFXMLParser.parser),null!=e)for(var t in e.parsers)this.parsers[t]=e.parsers[t];if(e&&null!=e.precedences){this.precedences=e.precedences;for(var t in e.parsers)a.include(this.precedences,t)||this.precedences.push(t)}this.acceptHeaderValue="";for(var r=0;r<this.precedences.length;r++)0!=r?this.acceptHeaderValue=this.acceptHeaderValue+","+this.precedences[r]:this.acceptHeaderValue=this.acceptHeaderValue+this.precedences[r]};s.prototype.registerParser=function(e,t){this.parsers[e]=t,this.precedences.push(e)},s.prototype.unregisterParser=function(e){delete this.parsers[e];for(var t=[],r=0;r<this.precedences.length;r++)this.precedences[r]!=e&&t.push(this.precedences[r]);this.precedences=t},s.prototype.setAcceptHeaderPrecedence=function(e){this.precedences=e},s.prototype.load=function(e,t,r){var i=this;n.load(e,this.acceptHeaderValue,function(n,o){if(n)r(n);else{var a=o.headers["Content-Type"]||o.headers["content-type"],s=o.data;if(null!=a){a=a.split(";")[0];for(var u in i.parsers)if(u.indexOf("/")!=-1){var l=u.split("/");if("*"===l[1]){if(a.indexOf(l[0])!=-1)return i.tryToParse(i.parsers[u],t,s,{documentURI:e},r)}else{if(a.indexOf(u)!=-1)return i.tryToParse(i.parsers[u],t,s,{documentURI:e},r);if(a.indexOf(l[1])!=-1)return i.tryToParse(i.parsers[u],t,s,{documentURI:e},r)}}else if(a.indexOf(u)!=-1)return i.tryToParse(i.parsers[u],t,s,{documentURI:e},r);r(new Error("Unknown media type : "+a))}else r(new Error("Uknown media type"))}})},s.prototype.loadFromFile=function(t,r,n,i){try{var o=this,a=e("fs");a.readFile(n.split("file:/")[1],function(e,a){if(e)i(e);else{var a=a.toString("utf8");o.tryToParse(t,r,a,{documentURI:n},i)}})}catch(e){i(e)}},s.prototype.tryToParse=function(e,t,r,n,i){try{"string"==typeof r&&(r=a.normalizeUnicodeLiterals(r)),e.parse(r,t,n,i)}catch(e){console.log(e.message),console.log(e.stack),i(e)}},t.exports={RDFLoader:s}},{"./jsonld_parser":43,"./network_transport":45,"./rvn3_parser":56,"./utils":57,fs:5}],55:[function(e,t,r){var n=e("./utils"),i=e("./query_filters").QueryFilters;RDFModel={},RDFModel.defaultContext={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",owl:"http://www.w3.org/2002/07/owl#",xsd:"http://www.w3.org/2001/XMLSchema#",dcterms:"http://purl.org/dc/terms/",foaf:"http://xmlns.com/foaf/0.1/",cal:"http://www.w3.org/2002/12/cal/ical#",vcard:"http://www.w3.org/2006/vcard/ns# ",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",cc:"http://creativecommons.org/ns#",sioc:"http://rdfs.org/sioc/ns#",doap:"http://usefulinc.com/ns/doap#",com:"http://purl.org/commerce#",ps:"http://purl.org/payswarm#",gr:"http://purl.org/goodrelations/v1#",sig:"http://purl.org/signature#",ccard:"http://purl.org/commerce/creditcard#",ldp:"http://www.w3.org/ns/ldp#"},RDFModel.UrisMap=function(){this.defaultNs="",this.interfaceProperties=["get","remove","set","setDefault","addAll","resolve","shrink"]},RDFModel.UrisMap.prototype.values=function(){var e={};for(var t in this)n.include(this.interfaceProperties,t)||"function"==typeof this[t]||"defaultNs"===t||"interfaceProperties"===t||(e[t]=this[t]);return e},RDFModel.UrisMap.prototype.get=function(e){if(e.indexOf(" ")!=-1)throw"Prefix must not contain any whitespaces";return this[e]},RDFModel.UrisMap.prototype.remove=function(e){if(e.indexOf(" ")!=-1)throw"Prefix must not contain any whitespaces";return delete this[e],null},RDFModel.UrisMap.prototype.set=function(e,t){if(e.indexOf(" ")!=-1)throw"Prefix must not contain any whitespaces";this[e]=t},RDFModel.UrisMap.prototype.setDefault=function(e){this.defaultNs=e},RDFModel.UrisMap.prototype.addAll=function(e,t){for(var r in e)n.include(this.interfaceProperties,r)||(null!=this[r]?t===!0&&(this[r]=e[r]):this[r]=e[r]);return this},RDFModel.UrisMap.prototype.resolve=function(e){var t=e.split(":"),r=t[0],n=t[1];return""===r?null==this.defaultNs?null:this.defaultNs+n:null!=this[r]?this[r]+n:null},RDFModel.UrisMap.prototype.shrink=function(e){for(var t in this){var r=this[t];if(0===e.indexOf(r)&&""!==r&&"defaultNs"!=t){var n=e.split(r)[1];return t+":"+n}}return e},RDFModel.Profile=function(){this.prefixes=new RDFModel.UrisMap,this.terms=new RDFModel.UrisMap},RDFModel.Profile.prototype.importProfile=function(e,t){this.prefixes.addAll(e.prefixes,t),this.terms.addAll(e.terms,t)},RDFModel.Profile.prototype.resolve=function(e){return e.indexOf(":")!=-1?this.prefixes.resolve(e):null!=this.terms[e]?this.terms.resolve(e):null},RDFModel.Profile.prototype.setDefaultPrefix=function(e){this.prefixes.setDefault(e)},RDFModel.Profile.prototype.setDefaultVocabulary=function(e){this.terms.setDefault(e)},RDFModel.Profile.prototype.setPrefix=function(e,t){this.prefixes.set(e,t)},RDFModel.Profile.prototype.setTerm=function(e,t){this.terms.set(e,t)},RDFModel.RDFEnvironment=function(){RDFModel.Profile.call(this),this.blankNodeCounter=0;var e=this;this.filters={s:function(e){return function(t){return t.subject.equals(e)}},p:function(e){return function(t){return t.predicate.equals(e)}},o:function(e){return function(t){return t.object.equals(e)}},sp:function(e,t){return function(r){return r.subject.equals(e)&&r.predicate.equals(t)}},so:function(e,t){return function(r){return r.subject.equals(e)&&r.object.equals(t)}},po:function(e,t){return function(r){return r.predicate.equals(e)&&r.object.equals(t)}},spo:function(e,t,r){return function(n){return n.subject.equals(e)&&n.predicate.equals(t)&&n.object.equals(r)}},describes:function(e){return function(t){return t.subject.equals(e)||t.object.equals(e)}},type:function(t){var r=e.resolve("rdf:type");return function(e){return e.predicate.equals(r)&&e.object.equals(t)}}};for(var t in RDFModel.defaultContext)this.prefixes.set(t,RDFModel.defaultContext[t])},RDFModel.RDFEnvironment.prototype=n.create(RDFModel.Profile.prototype,{constructor:RDFModel.RDFEnvironment}),RDFModel.RDFEnvironment.prototype.createBlankNode=function(){var e=new RDFModel.BlankNode(this.blankNodeCounter);return this.blankNodeCounter++,e},RDFModel.RDFEnvironment.prototype.createNamedNode=function(e){var t=this.resolve(e);return null!=t?new RDFModel.NamedNode(t):new RDFModel.NamedNode(e)},RDFModel.RDFEnvironment.prototype.createLiteral=function(e,t,r){return null!=r?new RDFModel.Literal(e,t,r.toString()):new RDFModel.Literal(e,t,r)},RDFModel.RDFEnvironment.prototype.createTriple=function(e,t,r){return new RDFModel.Triple(e,t,r)},RDFModel.RDFEnvironment.prototype.createGraph=function(e){var t=new RDFModel.Graph;if(null!=e)for(var r=0;r<e.length;r++)t.add(e[r]);return t},RDFModel.RDFEnvironment.prototype.createAction=function(e,t){return function(r){return e(r)?t(r):r}},RDFModel.RDFEnvironment.prototype.createProfile=function(e){if(e===!0)return new RDFModel.RDFEnvironment.Profile;var t=new RDFModel.RDFEnvironment.Profile;return t.importProfile(this),t},RDFModel.RDFEnvironment.prototype.createTermMap=function(e){if(e===!0)return new RDFModel.UrisMap;var t=this.terms.values(),r=new RDFModel.UrisMap;for(var n in t)r[n]=t[n];return r},RDFModel.RDFEnvironment.prototype.createPrefixMap=function(e){if(e===!0)return new RDFModel.UrisMap;var t=this.prefixes.values(),r=new RDFModel.UrisMap;for(var n in t)r[n]=t[n];return r},RDFModel.RDFNode=function(e){this.interfaceName=e,this.attributes=["interfaceName","nominalValue"]},RDFModel.RDFNode.prototype.equals=function(e){if(null==e.interfaceName)return this.valueOf()==e;for(var t in this.attributes){var r=this.attributes[t];if(this[r]!=e[r])return!1}return!0},RDFModel.BlankNode=function(e){RDFModel.RDFNode.call(this,"BlankNode"),this.nominalValue="_:"+e,this.bnodeId=e},RDFModel.BlankNode.prototype=n.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.BlankNode}),RDFModel.BlankNode.prototype.toString=function(){return this.nominalValue},RDFModel.BlankNode.prototype.toNT=function(){return this.nominalValue},RDFModel.BlankNode.prototype.valueOf=function(){return this.nominalValue},RDFModel.Literal=function(e,t,r){RDFModel.RDFNode.call(this,"Literal"),this.nominalValue=e,null!=t?this.language=t:null!=r&&(this.datatype=r)},RDFModel.Literal.prototype=n.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.Literal}),RDFModel.Literal.prototype.toString=function(){var e='"'+this.nominalValue+'"';return null!=this.language?e=e+"@"+this.language:(null!=this.datatype||this.type)&&(e=e+"^^<"+(this.datatype||this.type)+">"),e},RDFModel.Literal.prototype.toNT=function(){return this.toString()},RDFModel.Literal.prototype.valueOf=function(){return i.effectiveTypeValue({token:"literal",type:this.type||this.datatype,value:this.nominalValue,language:this.language})},RDFModel.NamedNode=function(e){RDFModel.RDFNode.call(this,"NamedNode"),null!=e.value?this.nominalValue=e.value:this.nominalValue=e},RDFModel.NamedNode.prototype=n.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.NamedNode}),RDFModel.NamedNode.prototype.toString=function(){return this.nominalValue},RDFModel.NamedNode.prototype.toNT=function(){return"<"+this.toString()+">"},RDFModel.NamedNode.prototype.valueOf=function(){return this.nominalValue},RDFModel.Triple=function(e,t,r){this.subject=e,this.predicate=t,this.object=r},RDFModel.Triple.prototype.equals=function(e){return this.subject.equals(e.subject)&&this.predicate.equals(e.predicate)&&this.object.equals(e.object)},RDFModel.Triple.prototype.toString=function(){return this.subject.toNT()+" "+this.predicate.toNT()+" "+this.object.toNT()+" . \r\n"},RDFModel.Graph=function(){this.triples=[],this.duplicates={},this.actions=[],this.length=0},RDFModel.Graph.prototype.add=function(e){for(var t=0;t<this.actions.length;t++)e=this.actions[t](e);var r=e.subject.toString()+e.predicate.toString()+e.object.toString();return this.duplicates[r]||(this.duplicates[r]=!0,this.triples.push(e)),this.length=this.triples.length,this},RDFModel.Graph.prototype.addAction=function(e,t){if(this.actions.push(e),1==t)for(var r=0;r<this.triples.length;r++)this.triples[r]=e(this.triples[r]);return this},RDFModel.Graph.prototype.addAll=function(e){for(var t=e.toArray(),r=0;r<t.length;r++)this.add(t[r]);return this.length=this.triples.length,this},RDFModel.Graph.prototype.remove=function(e){for(var t=null,r=0;r<this.triples.length;r++)if(this.triples[r].equals(e)){var n=e.subject.toString()+e.predicate.toString()+e.object.toString();delete this.duplicates[n],t=r;break}return null!=t&&this.triples.splice(t,1),this.length=this.triples.length,this},RDFModel.Graph.prototype.toArray=function(){return this.triples},RDFModel.Graph.prototype.some=function(e){for(var t=0;t<this.triples.length;t++)if(e(this.triples[t],this)===!0)return!0;return!1},RDFModel.Graph.prototype.every=function(e){for(var t=0;t<this.triples.length;t++)if(e(this.triples[t],this)===!1)return!1;return!0},RDFModel.Graph.prototype.filter=function(e){for(var t=new RDFModel.Graph,r=0;r<this.triples.length;r++)e(this.triples[r],this)===!0&&t.add(this.triples[r]);return t},RDFModel.Graph.prototype.forEach=function(e){for(var t=0;t<this.triples.length;t++)e(this.triples[t],this)},RDFModel.Graph.prototype.merge=function(e){for(var t=new RDFModel.Graph,r=0;r<this.triples.length;r++)t.add(this.triples[r]);return t},RDFModel.Graph.prototype.match=function(e,t,r,n){for(var i=new RDFModel.Graph,o=0,a=0;a<this.triples.length;a++){var s=this.triples[a];if((null==e||s.subject.equals(e))&&(null==t||s.predicate.equals(t))&&(null==r||s.object.equals(r))){if(!(null==n||o<n))return i;o++,i.add(s)}}return i},RDFModel.Graph.prototype.removeMatches=function(e,t,r){for(var n=[],i=0;i<this.triples.length;i++){var o=this.triples[i];(null==e||o.subject.equals(e))&&(null==t||o.predicate.equals(t))&&(null==r||o.object.equals(r))&&n.push(o)}for(var i=0;i<n.length;i++)this.remove(n[i]);return this},RDFModel.Graph.prototype.toNT=function(){var e="";return this.forEach(function(t){e+=t.toString()}),e},RDFModel.buildRDFResource=function(e,t,r,n){if("blank"===e.token)return RDFModel.buildBlankNode(e,t,r,n);if("literal"===e.token)return RDFModel.buildLiteral(e,t,r,n);if("uri"===e.token)return RDFModel.buildNamedNode(e,t,r,n);if("var"===e.token){var i=t[e.value];return null!=i?RDFModel.buildRDFResource(i,t,r,n):null}return null},RDFModel.buildBlankNode=function(e,t,r,n){return null!=e.valuetmp&&(e.value=e.valuetmp),0===e.value.indexOf("_:")&&(e.value=e.value.split("_:")[1]),new RDFModel.BlankNode(e.value)},RDFModel.buildLiteral=function(e,t,r,n){return new RDFModel.Literal(e.value,e.lang,e.type)},RDFModel.buildNamedNode=function(e,t,r,n){if(null!=e.value)return new RDFModel.NamedNode(e);if(null!=e.prefix){var i=r.resolveNsInEnvironment(e.prefix,n);return e.value=i+e.suffix,new RDFModel.NamedNode(e)}return new RDFModel.NamedNode(e)},RDFModel.rdf=new RDFModel.RDFEnvironment,t.exports=RDFModel},{"./query_filters":52,"./utils":57}],56:[function(e,t,r){function n(e){switch(e[0]){case'"':if(e.indexOf("^^")>0){var t=e.split("^^");return{literal:t[0]+"^^<"+t[1]+">"}}return{literal:e};case"_":return{blank:e.replace("b","")};default:return{token:"uri",value:e,prefix:null,suffix:null}}}var i=e("n3").Parser,o={};o.parser={async:!0,parse:function(e,t,r,o){o||(o=r,r=t,t=null),t&&"string"==typeof t&&(t={token:"uri",value:t,prefix:null,suffix:null}),r&&r.baseURI&&(r.documentIRI=r.baseURI);var a=[];new i(r).parse(e,function(e,r){e?o(e):r?a.push({subject:n(r.subject),predicate:n(r.predicate),object:n(r.object),graph:t}):o(!1,a)})},resetBlankNodeIds:function(){i._resetBlankNodeIds()}},t.exports={RVN3Parser:o}},{n3:27}],57:[function(_dereq_,module,exports){(function(process){var slowNextTick=function(){return"undefined"!=typeof process&&process.nextTick?process.nextTick:"undefined"!=typeof window&&window.setImmediate?window.setImmediate:function(e){setTimeout(e,0)}}(),spin=0,yieldFrequency=100,nextTick=function(e){spin++,spin<yieldFrequency?e():(spin=0,slowNextTick(e))},hashTerm=function(e){try{if(null==e)return"";if("uri"===e.token)return"u"+e.value;if("blank"===e.token)return"b"+e.value;if("literal"===e.token){var t="l"+e.value;return t+=e.type||"",t+=e.lang||""}}catch(t){if("object"==typeof e){var r="";for(p in e)r=r+p+e[p];return r}return e}},lexicalFormBaseUri=function(e,t){var r=null;if(t=t||{},null==e.value){var n=e.prefix,i=e.suffix,o=t.namespaces[n];r=null!=o?o+i:n+":"+i}else r=e.value;return null===r?null:(r.indexOf(":")==-1&&(r=(t.base||"")+r),r)};parseISO8601=function(e){return Date.parse(e)},Date.prototype.toISOString||!function(){function e(e){return e<10?"0"+e:e}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"."+(this.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}}(),iso8601=function(e){return e.toISOString()},compareDateComponents=function(e,t){var r=parseISO8601(e),n=parseISO8601(t);return r==n?0:r<n?-1:1},lexicalFormLiteral=function(e,t){var r=e.value,n=e.lang,i=e.type,o=null;if(null!=r&&null!=i&&"string"!=typeof i){var a=i.value;if(null==a){var s=i.prefix,u=i.suffix,l=t.namespaces[s];e.type=l+u,a=l+u}o=a.indexOf("hexBinary")!=-1?'"'+e.value.toLowerCase()+'"^^<'+a+">":'"'+e.value+'"^^<'+a+">"}else o=null==n&&null==i?'"'+r+'"':null==i?'"'+r+'"@'+n:i.indexOf("hexBinary")!=-1?'"'+e.value.toLowerCase()+'"^^<'+i+">":'"'+e.value+'"^^<'+i+">";return o},normalizeUnicodeLiterals=function(string){for(var escapedUnicode=string.match(/\\u[0-9abcdefABCDEF]{4,4}/g)||[],dups={},i=0;i<escapedUnicode.length;i++)null==dups[escapedUnicode[i]]&&(dups[escapedUnicode[i]]=!0,string=string.replace(new RegExp("\\"+escapedUnicode[i],"g"),eval("'"+escapedUnicode[i]+"'")));return string},registerIndexedDB=function(e){if("undefined"==typeof window&&"undefined"!=typeof process&&process.browser===!1){var t=_dereq_("sqlite3"),r=_dereq_("indexeddb-js"),n=new t.Database(":memory:"),i=r.makeScope("sqlite3",n);e.indexedDB=i.indexedDB,e.IDBKeyRange=i.IDBKeyRange}else{var o;o="undefined"==typeof window?self:window,o.indexedDB=o.indexedDB||o.mozIndexedDB||o.webkitIndexedDB||o.msIndexedDB,o.IDBKeyRange=o.IDBKeyRange||o.webkitIDBKeyRange||o.msIDBKeyRange,o.indexedDB?(e.indexedDB=o.indexedDB,e.IDBKeyRange=o.IDBKeyRange):console.log("The browser does not support IndexDB.")}},guid=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},hashTerm=function(e){try{if(null==e)return"";if("uri"===e.token)return"u"+e.value;if("blank"===e.token)return"b"+e.value;if("literal"===e.token){var t="l"+e.value;return t+=e.type||"",t+=e.lang||""}}catch(t){if("object"==typeof e){var r="";for(p in e)r=r+p+e[p];return r}return e}};var reject=function(e,t){for(var r=[],n=0;n<e.length;n++)t(e[n])&&r.push(e[n]);return r},include=function(e,t){for(var r=0;r<e.length;r++)if(e[r]===t)return!0;return!1},each=function(e,t){if(e.forEach)e.forEach(t);else for(var r=0;r<e.length;r++)t(e[r])},map=function(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r[n]=t(e[n]);return r},keys=function(e){var t=[];for(var r in e)t.push(r);return t},values=function(e){var t=[];for(var r in e)t.push(e[r]);return t},size=function(e){if(e.length)return e.length;var t=0;for(var r in e)t++;return t};clone=function(e){return JSON.parse(JSON.stringify(e))};var isObject=function(e){var t=typeof e;return"function"==t||e&&"object"==t||!1},create=function(){function e(){}return function(t){if(isObject(t)){e.prototype=t;var r=new e;e.prototype=null}return r||e()}}(),whilst=function(e,t,r){e()?t(function(n){return n?r(n):void whilst(e,t,r)}):r()},eachSeries=function(e,t,r){if(r=r||function(){},!e.length)return r();var n=0,i=function(){t(e[n],function(t){t?(r(t),r=function(){}):(n+=1,n>=e.length?r():nextTick(i))})};i()},eachParallel=function(e,t,r){if(r=r||function(){},!e.length)return r();for(var n=!1,i=0,o=function(t){if(t)throw n=!0,new Error(t);n||(i++,i===e.length&&r())},a=0;a<e.length;a++)!function(e,t,r,n){nextTick(function(){try{n(e[t],function(){r()})}catch(e){r(e)}})}(e,a,o,t)},reduce=function(e,t,r,n){eachSeries(e,function(e,n){r(t,e,function(e,r){t=r,n(e)})},function(e){n(e,t)})},seq=function(){var e=arguments;return function(){var t=this,r=Array.prototype.slice.call(arguments),n=r.pop();reduce(e,r,function(e,r,n){r.apply(t,e.concat([function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);
n(e,t)}]))},function(e,r){n.apply(t,[e].concat(r))})}},isWorker=function(){return("undefined"==typeof process||process.browser===!0)&&"undefined"==typeof window};module.exports={isWorker:isWorker,nextTick:nextTick,hasTerm:hashTerm,lexicalFormBaseUri:lexicalFormBaseUri,parseISO8601:parseISO8601,compareDateComponents:compareDateComponents,iso8601:iso8601,normalizeUnicodeLiterals:normalizeUnicodeLiterals,lexicalFormLiteral:lexicalFormLiteral,registerIndexedDB:registerIndexedDB,guid:guid,hashTerm:hashTerm,keys:keys,values:values,size:size,map:map,each:each,forEach:each,include:include,reject:reject,remove:reject,clone:clone,create:create,whilst:whilst,eachSeries:eachSeries,eachParallel:eachParallel,seq:seq,yieldFrequency:function(e){yieldFrequency=e}}}).call(this,_dereq_("7YKIPe"))},{"7YKIPe":10}]},{},[41])(41)});var fibra;!function(e){"use strict";var t=function(){function e(e,t){this.sparqlEndpoint=e,this.graph=t}return e.clone=function(t){return new e(t.sparqlEndpoint,t.graph)},e}();e.CitableSource=t;var r=function(){function t(e,t,r,n,i,o){void 0===r&&(r=[]),void 0===i&&(i=[]),void 0===o&&(o=[]),this.labels=r,this.url=n,this.descriptions=i,this.rightsHolders=o,this.source={sparqlEndpoint:null},this.id=e,this.source=t}return t.toTurtle=function(t,r,n){n.skos=e.SKOS.ns,n.dcterms=e.DCTerms.ns,n.foaf=e.FOAF.ns,n.fibra=e.FIBRA.ns,n.rdf=e.RDF.ns;var i=r.get(t.id);t.labels.forEach(function(e){e.value&&(i+="\n  skos:prefLabel "+e.toCanonical()+" ;")}),t.descriptions.forEach(function(e){e.value&&(i+="\n  dcterms:description "+e.toCanonical()+" ;")}),t.url&&(i+="\n  foaf:homepage <"+t.url+"> ;"),t.rightsHolders.length>0&&(i+="\n  dcterms:rightsHolder ",t.rightsHolders.forEach(function(e){i+="<"+e.id+">, ",r.has(e.id)||(r.set(e.id,"<"+e.id+"> a foaf:Agent ;"),e.toTurtle(r,n))}),i=i.substring(0,i.length-2)+" ;",t.rightsHolders.length>1&&t.rightsHolders.forEach(function(e,t){i+="\n  fibra:qualifiedAssertion [\n    rdf:predicate dcterms:rightsHolder ;\n    rdf:object <"+e.id+"> ;\n    fibra:order "+t+" ;\n  ] ;"})),r.set(t.id,i)},t.prototype.toTurtle=function(e,r){t.toTurtle(this,e,r)},t}();e.Citable=r}(fibra||(fibra={}));var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),fibra;!function(e){"use strict";var t=fi.seco.sparql,r=function(){function e(e,t,r,n){void 0===r&&(r=void 0),void 0===n&&(n=void 0),this.value=e,this.termType=t,this.language=r,this.datatype=n}return e.prototype.toCanonical=function(){switch(this.termType){case"NamedNode":return"<"+this.value+">";case"BlankNode":return"_:"+this.value;case"Literal":return t.SparqlService.stringToSPARQLString(this.value)+(this.language?"@"+this.language:!this.datatype||x.langString.equals(this.datatype)||$.string.equals(this.datatype)?"":"^^"+this.datatype.toCanonical());case"Variable":return"?"+this.value;case"DefaultGraph":return"";case"UNDEF":return"UNDEF";default:throw"Unknown term type "+this}},e.prototype.equals=function(e){return this.termType===e.termType&&this.value===e.value&&("Literal"!==this.termType||this.language===e.language&&this.datatype===e.datatype)},e}();e.Node=r;var n=function(e){function t(t){return e.call(this,t.value,t.termType,t.language,t.datatype)||this}return __extends(t,e),t}(r);e.NodeFromNode=n;var i=function(e){function t(){return e.call(this,"","DefaultGraph")||this}return __extends(t,e),t.prototype.toCanonical=function(){return""},t.prototype.equals=function(e){return"DefaultGraph"===e.termType},t}(r);i.instance=new i,e.DefaultGraph=i;var o=function(e){function t(){return e.call(this,"","UNDEF")||this}return __extends(t,e),t.prototype.toCanonical=function(){return""},t.prototype.equals=function(e){return"UNDEF"===e.termType},t}(r);o.instance=new o,e.UNDEF=o;var a=function(e){function t(t){return e.call(this,t,"Variable")||this}return __extends(t,e),t.prototype.toCanonical=function(){return"?"+this.value},t}(r);e.Variable=a;var s=function(e){function t(t){return e.call(this,t,"NamedNode")||this}return __extends(t,e),t.prototype.toCanonical=function(){return"<"+this.value+">"},t}(r);e.NamedNode=s;var u=function(e){function t(t){return e.call(this,t,"BlankNode")||this}return __extends(t,e),t.prototype.toCanonical=function(){return"?"+this.value},t}(r);e.BlankNode=u;var l=function(e){function t(t,r,n){return void 0===r&&(r=""),e.call(this,t,"Literal",r,n?n:r?x.langString:$.string)||this}return __extends(t,e),t}(r);e.Literal=l;var c=function(){function e(e,t,r,n){this.subject=e,this.predicate=t,this.object=r,this.graph=n}return e.prototype.toCanonical=function(){return this.subject.toCanonical()+" "+this.predicate.toCanonical()+" "+this.object.toCanonical()+("DefaultGraph"===this.graph.termType?"":" "+this.graph.toCanonical())},e.prototype.equals=function(e){return this.subject.equals(e.subject)&&this.predicate.equals(e.predicate)&&this.object.equals(e.object)&&this.graph.equals(e.graph)},e}();e.Quad=c;var f=function(){function e(e,t,r){this.subject=e,this.predicate=t,this.object=r,this.graph=i.instance}return e.prototype.toCanonical=function(){return this.subject.toCanonical()+" "+this.predicate.toCanonical()+" "+this.object.toCanonical()},e.prototype.equals=function(e){return this.subject.equals(e.subject)&&this.predicate.equals(e.predicate)&&this.object.equals(e.object)&&this.graph.equals(e.graph)},e}();e.Triple=f;var p=function(){function e(e,t){void 0===t&&(t=[]),this.graph=e,this.triples=t}return e}();e.Graph=p;var h=function(){function e(){this.nextBlankNodeId=0}return e.nodeFromBinding=function(t){return e.instance.nodeFromBinding(t)},e.nodeFromNode=function(t){return e.instance.nodeFromNode(t)},e.nodeFromCanonicalRepresentation=function(t){return e.instance.nodeFromCanonicalRepresentation(t)},e.namedNode=function(t){return e.instance.namedNode(t)},e.blankNode=function(t){return e.instance.blankNode(t)},e.literal=function(t,r){return e.instance.literal(t,r)},e.variable=function(t){return e.instance.variable(t)},e.defaultGraph=function(){return e.instance.defaultGraph()},e.triple=function(t,r,n){return e.instance.triple(t,r,n)},e.quad=function(t,r,n,i){return e.instance.quad(t,r,n,i)},e.prototype.nodeFromBinding=function(e){var t=new r(e.value,"literal"===e.type?"Literal":"uri"===e.type?"NamedNode":"BlankNode");return"literal"===e.type&&(t.language=e["xml:lang"]?e["xml:lang"]:"",t.datatype=e.datatype?new s(e.datatype):""!==t.language?x.langString:$.string),t},e.prototype.nodeFromNode=function(e){return"Literal"===e.termType?new l(e.value,e.language,e.datatype):new r(e.value,e.termType)},e.prototype.nodeFromCanonicalRepresentation=function(e){if(0===e.indexOf("<"))return new s(e.substring(1,e.length-1));if(0===e.indexOf("_:"))return new u(e.substring(2));var t=e.substring(1,e.lastIndexOf('"'));return e.lastIndexOf("@")===e.lastIndexOf('"')+1?new l(t,e.substring(e.lastIndexOf("@"))):e.lastIndexOf("^^<")===e.lastIndexOf('"')+1?new l(t,"",new s(e.substring(e.lastIndexOf("^^<"),e.length-1))):new l(t)},e.prototype.namedNode=function(e){return new s(e)},e.prototype.blankNode=function(e){return new u(e?e:"b"+ ++this.nextBlankNodeId)},e.prototype.literal=function(e,t){return"string"==typeof t?new l(e,t):new l(e,void 0,t)},e.prototype.variable=function(e){return new a(e)},e.prototype.defaultGraph=function(){return i.instance},e.prototype.triple=function(e,t,r){return new f(e,t,r)},e.prototype.quad=function(e,t,r,n){return new c(e,t,r,n?n:i.instance)},e}();h.instance=new h,e.DataFactory=h;var d=function(){function e(){}return e}();d.ns="http://hdlab.stanford.edu/fibra/ontology#",d.Project=new s(d.ns+"Project"),d.graph=new s(d.ns+"graph"),d.qualifiedAssertion=new s(d.ns+"qualifiedAssertion"),d.order=new s(d.ns+"order"),d.schemaNS=new s(d.ns+"schemaNS"),d.instanceNS=new s(d.ns+"instanceNS"),d.updateEndpoint=new s(d.ns+"updateEndpoint"),d.configuration=new s(d.ns+"configuration"),d.configurationReference=new s(d.ns+"configurationReference"),d.schema=new s(d.ns+"schema"),d.schemaReference=new s(d.ns+"schemaReference"),d.autocompletionQuery=new s(d.ns+"autocompletionQuery"),d.propertyQuery=new s(d.ns+"propertyQuery"),d.classQuery=new s(d.ns+"classQuery"),d.itemQuery=new s(d.ns+"itemQuery"),d.deleteItemQuery=new s(d.ns+"deleteItemQuery"),d.RemoteEndpointConfiguration=new s(d.ns+"RemoteEndpointConfiguration"),d.PrimaryEndpointConfiguration=new s(d.ns+"PrimaryEndpointConfiguration"),d.AuthorityEndpointConfiguration=new s(d.ns+"AuthorityEndpointConfiguration"),d.ArchiveEndpointConfiguration=new s(d.ns+"ArchiveEndpointConfiguration"),d.Schema=new s(d.ns+"Schema"),e.FIBRA=d;var v=function(){function e(){}return e}();v.ns="http://www.w3.org/ns/sparql-service-description#",v._name=new s(v.ns+"name"),e.SD=v;var g=function(){function e(){}return e}();g.ns="http://www.w3.org/2004/02/skos/core#",g.prefLabel=new s(g.ns+"prefLabel"),g.altLabel=new s(g.ns+"altLabel"),g.related=new s(g.ns+"related"),e.SKOS=g;var y=function(){function e(){}return e}();y.ns="http://rdfs.org/ns/void#",y.sparqlEndpoint=new s(y.ns+"sparqlEndpoint"),e.VOID=y;var m=function(){function e(){}return e}();m.ns="http://purl.org/dc/terms/",m.rightsHolder=new s(m.ns+"rightsHolder"),m.description=new s(m.ns+"description"),e.DCTerms=m;var b=function(){function e(){}return e}();b.ns="http://xmlns.com/foaf/0.1/",b.homepage=new s(b.ns+"homepage"),e.FOAF=b;var w=function(){function e(){}return e}();w.ns="http://www.w3.org/2002/07/owl#",w.sameAs=new s(w.ns+"sameAs"),w.Thing=new s(w.ns+"Thing"),w.Class=new s(w.ns+"Class"),e.OWL=w;var x=function(){function e(){}return e}();x.ns="http://www.w3.org/1999/02/22-rdf-syntax-ns#",x.type=new s(x.ns+"type"),x.langString=new s(x.ns+"langString"),x.Triple=new s(x.ns+"Triple"),x.subject=new s(x.ns+"subject"),x.predicate=new s(x.ns+"predicate"),x.object=new s(x.ns+"object"),x.value=new s(x.ns+"value"),e.RDF=x;var $=function(){function e(){}return e}();$.ns="http://www.w3.org/2001/XMLSchema#",$.string=new s($.ns+"string"),e.XMLSchema=$;var k=function(){function e(){}return e}();k.ns="http://www.cidoc-crm.org/cidoc-crm/",k.Person=new s(k.ns+"E21_Person"),k.Place=new s(k.ns+"E53_Place"),k.Group=new s(k.ns+"E74_Group"),e.CIDOC=k;var E=function(){function e(){}return e}();E.ns="http://vocab.getty.edu/ontology#",E.AdminPlaceConcept=new s(E.ns+"AdminPlaceConcept"),E.PhysicalPlaceConcept=new s(E.ns+"PhysicalPlaceConcept"),E.PhysAdminPlaceConcept=new s(E.ns+"PhysAdminPlaceConcept"),E.PersonConcept=new s(E.ns+"PersonConcept"),E.GroupConcept=new s(E.ns+"GroupConcept"),e.GETTY=E;var _=function(){function e(){}return e}();_.ns="http://www.loc.gov/mads/rdf/v1#",_.CorporateName=new s(_.ns+"CorporateName"),_.PersonalName=new s(_.ns+"PersonalName"),_.NameTitle=new s(_.ns+"NameTitle"),_.Geographic=new s(_.ns+"Geographic"),e.MADS=_;var S=function(){function e(){}return e}();S.ns="http://geovocab.org/spatial#",S.Feature=new s(S.ns+"Feature"),e.GEOVOCAB=S;var A=function(){function t(t,r){void 0===t&&(t=function(){return{}}),void 0===r&&(r=new e.EMap),this.create=t,this.map=r}return t.prototype.goc=function(e,t){return this.has(e)||this.set(e,t?t(e):this.create(e)),this.get(e)},t.prototype.get=function(e){return this.map.get(e.toCanonical())},t.prototype.remove=function(e){return this.map.remove(e.toCanonical())},t.prototype.each=function(e){var t=this;this.map.each(function(r,n,i){return e(r,h.instance.nodeFromCanonicalRepresentation(n),t)})},t.prototype.has=function(e){return this.map.has(e.toCanonical())},t.prototype.set=function(e,t){return this.map.set(e.toCanonical(),t),this},Object.defineProperty(t.prototype,"size",{get:function(){return this.map.size()},enumerable:!0,configurable:!0}),t.prototype.values=function(){return this.map.values()},t.prototype.keys=function(){return this.map.keys().map(function(e){return h.instance.nodeFromCanonicalRepresentation(e)})},t.prototype.entries=function(){return this.map.entries().map(function(e){return{key:h.instance.nodeFromCanonicalRepresentation(e.key),value:e.value}})},t.prototype.clear=function(){return this.map.clear(),this},t}();e.ENodeMap=A;var C=function(t){function r(r){return t.call(this,r,new e.EOMap)||this}return __extends(r,t),r}(A);e.EONodeMap=C;var I=function(){function t(t){void 0===t&&(t=new e.EMap),this.m=new A(void 0,t)}return t.prototype.add=function(e){return this.m.set(e,e),this},t.prototype.adda=function(e){var t=this;return e.forEach(function(e){return t.add(e)}),this},t.prototype.adds=function(e){var t=this;return e.each(function(e){return t.add(e)}),this},t.prototype.has=function(e){return this.m.has(e)},t.prototype.get=function(e){return this.m.get(e)},t.prototype.clear=function(){return this.m.clear(),this},t.prototype.remove=function(e){return this.m.remove(e)},t.prototype.values=function(){return this.m.values()},Object.defineProperty(t.prototype,"size",{get:function(){return this.m.size},enumerable:!0,configurable:!0}),t.prototype.each=function(e){var t=this;this.m.each(function(r,n,i){return e(r,r,t)})},t}();e.NodeSet=I;var T=function(t){function r(){return t.call(this,new e.EOMap)||this}return __extends(r,t),r}(I);e.ONodeSet=T}(fibra||(fibra={}));var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),fibra;!function(e){"use strict";var t=function(e){function t(t,r,n,i,o){void 0===i&&(i=[]),void 0===o&&(o=[]);var a=e.call(this,t)||this;return a.label=r,a.description=n,a.types=i,a.sourceEndpoints=o,a}return __extends(t,e),t}(e.NodeFromNode);e.FullRichNodeFromNode=t;var r=function(e){function t(t){var r=e.call(this,t)||this;return r.label=t.label,r.description=t.description,r.types=t.types,r.sourceEndpoints=t.sourceEndpoints,r}return __extends(t,e),t}(e.NodeFromNode);e.RichNodeFromRichNode=r;var n=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t}(e.NodeFromNode);e.PrunedRichNodeFromNode=n}(fibra||(fibra={}));var fibra;!function(e){"use strict";var t=angular.module("fibra",["fi.seco.sparql","http-auth-interceptor"]);t.run(["$rootScope","workerWorkerService",function(e,t){e.$on("event:auth-loginRequired",function(){return t.$broadcast("event:auth-loginRequired")})}]),t.run(["$rootScope","authService","$http",function(e,t,r){e.$on("main:auth-loginAuthInfo",function(e,n){r.defaults.headers.common.Authorization=n,t.loginConfirmed()})}])}(fibra||(fibra={}));var fibra;!function(e){"use strict";var t=angular.module("fibra");t.service("workerServicePrototypeMappingConfiguration",function(){for(var t={Object:Object.prototype},r=0,n=Object.getOwnPropertyNames(e);r<n.length;r++){var i=n[r];t[i]=e[i].prototype,e[i].__name=i}return t})}(fibra||(fibra={}));var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),fibra;!function(e){"use strict";var t=function(){function e(e,t){void 0===e&&(e=null),void 0===t&&(t="en"),this.project=e,this.language=t}return e}();e.CommonState=t;var r=function(){function e(){this.types=[],this.userTypes=[],this.displayTypes=[],this.items=[],this.itemIndex={},this.localItems=[]}return e}();e.ConstructState=r;var n=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.construct=new r,t.actionsRunning=0,t}return __extends(n,e),n.prototype.toCommonState=function(){return new t(this.project,this.language)},n}(t);e.UIState=n;var i="PLACEHOLDER",o="CREATE_TYPE",a="CREATE_ITEMS",s="CREATE_DISPLAY_ITEMS",u="DELETE_ITEMS",l="VERIFY_ITEM",c="ADD_TYPE",f="CLEAR_TYPES",p="DISPLAY_ITEMS",h="HIDE_ITEM",d="CREATE_LOCAL_ITEM",v="ITEM_PROPERTIES",g="SET_ORDERED_TYPES",y="SET_LANGUAGE",m="SET_PROJECT",b=new n,w={type:"",payload:null},x=function(){function t(e,t,r,n){this.$q=e,this.workerService=t,this.sparqlItemService=r,this.sparqlTreeService=n,this.callbacks={},this.createState()}return t.prototype.on=function(e,t){var r=this;return void 0===this.callbacks[e]&&(this.callbacks[e]=Array()),this.callbacks[e].push(t),function(){r.callbacks[e].indexOf(t)!==-1&&r.callbacks[e].splice(r.callbacks[e].indexOf(t),1)}},t.prototype.dispatch=function(e){void 0===this.callbacks[e]&&(this.callbacks[e]=Array());var t=this.callbacks[e].map(function(e){return e()});return this.$q.all(t)},t.prototype.createState=function(){this.state=b,this.store||this.createStore()},t.prototype.createStore=function(){this.store=[this.state]},t.prototype.placeHolderAction=function(e){return{type:i,payload:e}},t.prototype.setLanguage=function(e){return{type:y,payload:e}},t.prototype.setProject=function(e){return{type:m,payload:e}},t.prototype.createLocalItem=function(e){return{type:d,payload:e}},t.prototype.displayItem=function(e,t){return{type:p,payload:{items:[e],coordinates:[t]}}},t.prototype.displayItems=function(e,t){return{type:p,payload:{items:e,coordinates:t}}},t.prototype.hideItem=function(e){return{type:h,payload:e}},t.prototype.itemProperty=function(e,t,r){return{type:v,payload:{item:e,propertiesToAdd:t,propertiesToRemove:r}}},t.prototype.createItem=function(e,t){return{type:a,payload:{items:[e],type:t}}},t.prototype.createItems=function(e,t){return{type:a,payload:{items:e,type:t}}},t.prototype.createDisplayItem=function(e,t){return{type:s,payload:{items:[e],type:t}}},t.prototype.createDisplayItems=function(e,t){return{type:s,payload:{items:e,type:t}}},t.prototype.deleteItem=function(e){return{type:u,payload:[e]}},t.prototype.verifyItem=function(e){return{type:l,payload:e}},t.prototype.addType=function(e){return{type:c,payload:e}},t.prototype.clearTypes=function(){return{type:f,payload:void 0}},t.prototype.setOrderedTypes=function(e){return{type:g,payload:e}},t.prototype.createType=function(e){return{type:o,payload:e}},t.prototype.itemReducer=function(e,t){var r=this;switch(void 0===e&&(e=b),void 0===t&&(t=w),t.type){case p:return t.payload.items.forEach(function(r,n){e.construct.itemIndex[r.value]||(e.construct.items.push(r),e.construct.itemIndex[r.value]=r,t.payload.coordinates&&t.payload.coordinates[n]&&t.payload.coordinates[n][0]&&t.payload.coordinates[n][1]&&(e.construct.itemIndex[r.value].x=t.payload.coordinates[n][0],e.construct.itemIndex[r.value].y=t.payload.coordinates[n][1]))}),this.dispatch("change"),this.$q.resolve(e);case h:var n=e.construct.itemIndex[t.payload.value];return n&&(e.construct.items.splice(e.construct.items.indexOf(n),1),delete e.construct.itemIndex[t.payload.value]),this.dispatch("change"),this.$q.resolve(e);case d:var i=t.payload;return e.construct.localItems.push(i),this.$q.resolve(e);case a:return this.createItemsInternal(t,e).then(function(t){return e});case s:return this.createItemsInternal(t,e).then(function(e){return r.dispatchAction(r.displayItems(e))});case u:return this.$q.all(t.payload.map(function(e){return r.sparqlItemService.deleteItem(e)})).then(function(){return r.dispatch("change"),r.state});case l:return this.state.construct.verifyItem=t.payload,this.dispatch("change"),this.$q.resolve(this.state);case v:return this.sparqlItemService.alterItem(t.payload.item,t.payload.propertiesToAdd,t.payload.propertiesToRemove).then(function(e){return r.state});default:return this.$q.resolve(e)}},t.prototype.sessionReducer=function(e,t){switch(void 0===e&&(e=b),void 0===t&&(t=w),t.type){case y:return e.language=t.payload,this.$q.resolve(e);case m:return e.project=t.payload,this.$q.resolve(e);default:return this.$q.resolve(e)}},t.prototype.constructReducer=function(t,r){var n=this;switch(void 0===t&&(t=b),void 0===r&&(r=w),r.type){case i:return r.payload.then(function(){return t});case c:t.construct.types.push(r.payload);var a=t.construct.userTypes.filter(function(e){return e.id===r.payload.id})[0];return a&&t.construct.userTypes.splice(t.construct.userTypes.indexOf(a),1),this.$q.resolve(t);case f:return t.construct.types=[],this.$q.resolve(t);case g:return t.construct.displayTypes=r.payload,this.$q.resolve(t);case o:return this.sparqlItemService.createNewItem([new e.PropertyAndValue(e.SKOS.prefLabel,e.DataFactory.instance.literal(r.payload)),new e.PropertyAndValue(e.RDF.type,e.OWL.Class)]).then(function(t){var i=new e.TreeNode(t.value,r.payload);return n.state.construct.userTypes.push(i),n.state});default:return this.$q.resolve(t)}},t.prototype.createItemsInternal=function(t,r){var n=this,i=t.payload.items,o=t.payload.type?e.DataFactory.instance.namedNode(t.payload.type):e.OWL.Thing;if(i[0]){var a=i.map(function(t){return t.value?n.sparqlItemService.createNewItem([new e.PropertyAndValue(e.SKOS.prefLabel,e.DataFactory.instance.literal(t.value)),new e.PropertyAndValue(e.RDF.type,o)]):n.sparqlItemService.createNewItem([new e.PropertyAndValue(e.RDF.type,o)])});return this.$q.all(a)}return this.sparqlItemService.createNewItem([new e.PropertyAndValue(e.RDF.type,o),new e.PropertyAndValue(e.SKOS.prefLabel,e.DataFactory.instance.literal(""))]).then(function(e){return[e]})},t.prototype.dispatchAction=function(t){var r=this;this.state.actionsRunning=this.state.actionsRunning+1,console.log(t.type,this.state.actionsRunning),this.dispatch("action");var n=this.state.toCommonState();return this.constructReducer(this.state,t).then(function(e){return r.itemReducer(e,t)}).then(function(e){return r.sessionReducer(e,t)}).then(function(t){if(t.language!==n.language||t.project!==n.project){var i=t.toCommonState();e.WorkerService.savePrototypes(i),r.workerService.callAll("stateWorkerService","setState",[i])}return r.state=t,r.state.actionsRunning=r.state.actionsRunning-1,t})},t.prototype.getState=function(){return this.state},t.prototype.undo=function(){},t}();angular.module("fibra").service("fibraService",["$q","workerService","sparqlItemService","sparqlTreeService",function(){return new(Function.prototype.bind.apply(x,[null].concat(Array.prototype.slice.apply(arguments))))}]),e.FibraService=x;var $=function(){function e(){}return e.prototype.setState=function(e){this.state=e},e}();angular.module("fibra").service("stateWorkerService",[function(){return new(Function.prototype.bind.apply($,[null].concat(Array.prototype.slice.apply(arguments))))}]),e.StateWorkerService=$}(fibra||(fibra={}));var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),fibra;!function(e){"use strict";var t=fi.seco.sparql.SparqlService,r=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.instanceNS="http://ldf.fi/fibra/",t.schemaNS="http://ldf.fi/fibra/schema#",t.dataModel=new e.DataModel,t.autocompletionQuery=e.SparqlAutocompleteService.defaultMatchQuery,t.treeQuery=e.SparqlTreeService.getClassTreeQuery,t.itemQuery=e.SparqlItemService.getLocalItemPropertiesQuery,t.deleteItemQuery=e.SparqlItemService.deleteItemQuery,t.classQuery=e.DataModel.classQuery,t.propertyQuery=e.DataModel.propertyQuery,t.authorityEndpoints=[],t.archiveEndpoints=[],t.schemas=[],t}return __extends(n,r),n.prototype.remoteEndpoints=function(){return this.archiveEndpoints.concat(this.authorityEndpoints)},n.prototype.asTemplate=function(){var t=new e.PrimaryEndpointConfiguration;return t.autocompletionQuery=this.autocompletionQuery,t.itemQuery=this.itemQuery,t.deleteItemQuery=this.deleteItemQuery,t.treeQuery=this.treeQuery,t.propertyQuery=this.propertyQuery,t.classQuery=this.classQuery,t},n.prototype.toTurtle=function(n,i){var o=this;if(!n.has(this.id)){i.fibra=e.FIBRA.ns,i.void=e.VOID.ns,n.set(this.id,"<"+this.id+"> a fibra:Project ;"),r.prototype.toTurtle.call(this,n,i);var a=n.get(this.id);this.schemas.length>0&&(a+="\n  fibra:schema ",this.schemas.forEach(function(e){a+="<"+e.id+">, "}),a=a.substring(0,a.length-2)+" ;",this.schemas.filter(function(e){return e.source.sparqlEndpoint!==o.source.sparqlEndpoint||o.source.graph!==e.source.graph}).forEach(function(e){a+="\n  fibra:schemaReference [\n    rdf:value <"+e.id+"> ;\n    void:sparqlEndpoint <"+e.source.sparqlEndpoint+"> ;",e.source.graph&&(a+="\n    fibra:graph <"+e.source.graph+">"),a+="\n  ] ;"})),this.authorityEndpoints.length>0&&(a+="\n  fibra:authorityEndpoint ",this.authorityEndpoints.forEach(function(e){a+="<"+e.id+">, "}),a=a.substring(0,a.length-2)+" ;",this.authorityEndpoints.filter(function(e){return e.source.sparqlEndpoint!==o.source.sparqlEndpoint||o.source.graph!==e.source.graph}).forEach(function(e){a+="\n  fibra:authorityEndpointReference [\n    rdf:value <"+e.id+"> ;\n    void:sparqlEndpoint <"+e.source.sparqlEndpoint+"> ;",e.source.graph&&(a+="\n    fibra:graph <"+e.source.graph+">"),a+="\n  ] ;"})),this.archiveEndpoints.length>0&&(a+="\n  fibra:archiveEndpoint ",this.archiveEndpoints.forEach(function(e){a+="<"+e.id+">, "}),a=a.substring(0,a.length-2)+" ;",this.archiveEndpoints.filter(function(e){return e.source.sparqlEndpoint!==o.source.sparqlEndpoint||o.source.graph!==e.source.graph}).forEach(function(e){a+="\n  fibra:archiveEndpointReference [\n    rdf:value <"+e.id+"> ;\n    void:sparqlEndpoint <"+e.source.sparqlEndpoint+"> ;",e.source.graph&&(a+="\n    fibra:graph <"+e.source.graph+">"),a+="\n  ] ;"})),this.graph&&(a+="\n  fibra:graph <"+this.graph+"> ;"),a+="\n  fibra:autocompletionQuery "+t.stringToSPARQLString(this.autocompletionQuery)+" ;\n  fibra:treeQuery "+t.stringToSPARQLString(this.treeQuery)+" ;\n  fibra:itemQuery "+t.stringToSPARQLString(this.itemQuery)+" ;\n  fibra:deleteItemQuery "+t.stringToSPARQLString(this.deleteItemQuery)+" ;\n  fibra:classQuery "+t.stringToSPARQLString(this.classQuery)+" ;\n  fibra:propertyQuery "+t.stringToSPARQLString(this.propertyQuery)+" ;\n  void:sparqlEndpoint <"+this.endpoint+"> ;\n  fibra:updateEndpoint <"+this.updateEndpoint+"> ;\n  fibra:graphStoreEndpoint <"+this.graphStoreEndpoint+"> ;\n  fibra:schemaNS "+t.stringToSPARQLString(this.schemaNS)+" ;\n  fibra:instanceNS "+t.stringToSPARQLString(this.instanceNS)+" .",n.set(this.id,a)}},n}(e.Citable);r.listProjectsQuery="PREFIX fibra: <http://hdlab.stanford.edu/fibra/ontology#>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX dcterms: <http://purl.org/dc/terms/>\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\nPREFIX void: <http://rdfs.org/ns/void#>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nSELECT ?id ?labels ?descriptions ?url ?rightsHolders ?rightsHolders_labels ?rightsHolders_descriptions ?rightsHolder_surl ?rightsHolders_order ?instanceNS ?schemaNS ?endpoint ?graphStoreEndpoint ?updateEndpoint ?graph ?autocompletionQuery ?treeQuery ?itemQuery ?deleteItemQuery ?authorityEndpoints ?authorityEndpoints_source_graph ?authorityEndpoints_source_sparqlEndpoint ?archiveEndpoints ?archiveEndpoints_source_graph ?archiveEndpoints_source_sparqlEndpoint ?schemas ?schemas_source_graph ?schemas_source_sparqlEndpoint {\n  # STARTGRAPH\n    ?id a fibra:Project .\n    {\n      ?id skos:prefLabel ?labels\n    } UNION {\n      ?id fibra:instanceNS ?instanceNS .\n      ?id fibra:schemaNS ?schemaNS .\n      ?id void:sparqlEndpoint ?endpoint .\n      ?id fibra:updateEndpoint ?updateEndpoint .\n      ?id fibra:graphStoreEndpoint ?graphStoreEndpoint .\n      ?id fibra:autocompletionQuery ?autocompletionQuery .\n      ?id fibra:treeQuery ?treeQuery .\n      ?id fibra:itemQuery ?itemQuery .\n      ?id fibra:deleteItemQuery ?deleteItemQuery .\n      OPTIONAL { ?id fibra:graph ?graph }\n    } UNION {\n      ?id foaf:homepage ?url .\n    } UNION {\n      ?id fibra:schema ?schemas\n    } UNION {\n      ?id fibra:schemaReference ?ar .\n      ?ar rdf:value ?schemas .\n      ?ar void:sparqlEndpoint ?schemas_source_sparqlEndpoint .\n      OPTIONAL { ?ar fibra:graph ?schemas_source_graph }\n    } UNION {\n      ?id fibra:authorityEndpoint ?authorityEndpoints\n    } UNION {\n      ?id fibra:authorityEndpointReference ?ar .\n      ?ar rdf:value ?authorityEndpoints .\n      ?ar void:sparqlEndpoint ?authorityEndpoints_source_sparqlEndpoint .\n      OPTIONAL { ?ar fibra:graph ?authorityEndpoints_source_graph }\n    } UNION {\n      ?id fibra:archiveEndpoint ?archiveEndpoints\n    } UNION {\n      ?id fibra:archiveEndpointReference ?ar .\n      ?ar rdf:value ?archiveEndpoints .\n      ?ar void:sparqlEndpoint ?archiveEndpoints_source_sparqlEndpoint .\n      OPTIONAL { ?ar fibra:graph ?archiveEndpoints_source_graph }\n    } UNION {\n      ?id dcterms:description ?descriptions\n    } UNION {\n      {\n        ?id dcterms:rightsHolder ?rightsHolders\n      } UNION {\n        ?id fibra:qualifiedAssertion ?qa .\n        ?qa rdf:predicate dcterms:rightsHolder .\n        ?qa rdf:object ?rightsHolders .\n        OPTIONAL { ?qa fibra:order ?rightsHolders_order }\n      }\n      {\n        ?rightsHolders skos:prefLabel ?rightsHolders_labels\n      } UNION {\n        ?rightsHolders foaf:homepage ?rightsHolders_url\n      } UNION {\n        ?rightsHolders dcterms:description ?rightsHolders_descriptions\n      }\n    }\n  # ENDGRAPH\n}",r.projectQuery="PREFIX fibra: <http://hdlab.stanford.edu/fibra/ontology#>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX dcterms: <http://purl.org/dc/terms/>\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\nPREFIX void: <http://rdfs.org/ns/void#>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nSELECT ?labels ?descriptions ?url ?rightsHolders ?rightsHolders_labels ?rightsHolders_descriptions ?rightsHolder_surl ?rightsHolders_order ?instanceNS ?schemaNS ?endpoint ?graphStoreEndpoint ?updateEndpoint ?graph ?autocompletionQuery ?treeQuery ?itemQuery ?deleteItemQuery ?authorityEndpoints ?authorityEndpoints_source_graph ?authorityEndpoints_source_sparqlEndpoint ?archiveEndpoints ?archiveEndpoints_source_graph ?archiveEndpoints_source_sparqlEndpoint ?schemas ?schemas_source_graph ?schemas_source_sparqlEndpoint {\n  # STARTGRAPH\n    {\n      <ID> skos:prefLabel ?labels\n    } UNION {\n      <ID> fibra:instanceNS ?instanceNS .\n      <ID> fibra:schemaNS ?schemaNS .\n      <ID> void:sparqlEndpoint ?endpoint .\n      <ID> fibra:updateEndpoint ?updateEndpoint .\n      <ID> fibra:graphStoreEndpoint ?graphStoreEndpoint .\n      <ID> fibra:autocompletionQuery ?autocompletionQuery .\n      <ID> fibra:treeQuery ?treeQuery .\n      <ID> fibra:itemQuery ?itemQuery .\n      <ID> fibra:deleteItemQuery ?deleteItemQuery .\n      OPTIONAL { <ID> fibra:graph ?graph }\n    } UNION {\n      <ID> foaf:homepage ?url .\n    } UNION {\n      <ID> fibra:schema ?schemas\n    } UNION {\n      <ID> fibra:schemaReference ?ar .\n      ?ar rdf:value ?schemas .\n      ?ar void:sparqlEndpoint ?schemas_source_sparqlEndpoint .\n      OPTIONAL { ?ar fibra:graph ?schemas_source_graph }\n    } UNION {\n      <ID> fibra:authorityEndpoint ?authorityEndpoints\n    } UNION {\n      <ID> fibra:authorityEndpointReference ?ar .\n      ?ar rdf:value ?authorityEndpoints .\n      ?ar void:sparqlEndpoint ?authorityEndpoints_source_sparqlEndpoint .\n      OPTIONAL { ?ar fibra:graph ?authorityEndpoints_source_graph }\n    } UNION {\n      <ID> fibra:archiveEndpoint ?archiveEndpoints\n    } UNION {\n      <ID> fibra:archiveEndpointReference ?ar .\n      ?ar rdf:value ?archiveEndpoints .\n      ?ar void:sparqlEndpoint ?archiveEndpoints_source_sparqlEndpoint .\n      OPTIONAL { ?ar fibra:graph ?archiveEndpoints_source_graph }\n    } UNION {\n      <ID> dcterms:description ?descriptions\n    } UNION {\n      {\n        <ID> dcterms:rightsHolder ?rightsHolders\n      } UNION {\n        <ID> fibra:qualifiedAssertion ?qa .\n        ?qa rdf:predicate dcterms:rightsHolder .\n        ?qa rdf:object ?rightsHolders .\n        OPTIONAL { ?qa fibra:order ?rightsHolders_order }\n      }\n      {\n        ?rightsHolders skos:prefLabel ?rightsHolders_labels\n      } UNION {\n        ?rightsHolders foaf:homepage ?rightsHolders_url\n      } UNION {\n        ?rightsHolders dcterms:description ?rightsHolders_descriptions\n      }\n    }\n  # ENDGRAPH\n}",
e.Project=r}(fibra||(fibra={}));var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),fibra;!function(e){"use strict";var t=fi.seco.sparql.SparqlService,r=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.classQuery=e.DataModel.classQuery,t.propertyQuery=e.DataModel.propertyQuery,t}return __extends(n,r),n.prototype.toTurtle=function(n,i){if(!n.has(this.id)){i.fibra=e.FIBRA.ns,i.void=e.VOID.ns,n.set(this.id,"<"+this.id+"> a fibra:Schema ;"),r.prototype.toTurtle.call(this,n,i);var o=n.get(this.id);o+="\n  void:sparqlEndpoint <"+this.endpoint+"> ;\n  fibra:classQuery "+t.stringToSPARQLString(this.classQuery)+" ;\n  fibra:propertyQuery "+t.stringToSPARQLString(this.propertyQuery)+" .",n.set(this.id,o)}},n}(e.Citable);r.listSchemasQuery="PREFIX fibra: <http://hdlab.stanford.edu/fibra/ontology#>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX dcterms: <http://purl.org/dc/terms/>\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nPREFIX void: <http://rdfs.org/ns/void#>\nSELECT ?id ?labels ?descriptions ?rightsHolders ?rightsHolders_labels ?rightsHolders_descriptions ?rightsHolders_url ?rightsHolders_order ?url ?endpoint ?classQuery ?propertyQuery {\n  # STARTGRAPH\n    ?id a fibra:Schema .\n    { ?id skos:prefLabel ?labels }\n    UNION\n    { ?id dcterms:description ?descriptions }\n    UNION\n    { ?id foaf:homepage ?url }\n    UNION\n    {\n      ?id void:sparqlEndpoint ?endpoint .\n      ?id fibra:classQuery ?classQuery .\n      ?id fibra:propertyQuery ?propertyQuery .\n    } UNION {\n      {\n        ?id dcterms:rightsHolder ?rightsHolders\n      } UNION {\n        ?id fibra:qualifiedAssertion ?qa .\n        ?qa rdf:predicate dcterms:rightsHolder .\n        ?qa rdf:object ?rightsHolders .\n        OPTIONAL { ?qa fibra:order ?rightsHolders_order }\n      }\n      {\n        ?rightsHolders skos:prefLabel ?rightsHolders_labels\n      } UNION {\n        ?rightsHolders foaf:homepage ?rightsHolders_url\n      } UNION {\n        ?rightsHolders dcterms:description ?rightsHolders_descriptions\n      }\n    }\n  # ENDGRAPH\n}",r.schemaQuery="PREFIX fibra: <http://hdlab.stanford.edu/fibra/ontology#>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX dcterms: <http://purl.org/dc/terms/>\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\nPREFIX void: <http://rdfs.org/ns/void#>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nSELECT ?labels ?descriptions ?rightsHolders ?rightsHolders_labels ?rightsHolders_descriptions ?rightsHolders_url ?rightsHolders_order ?url ?endpoint ?classQuery ?propertyQuery {\n  # STARTGRAPH\n    { <ID> skos:prefLabel ?labels }\n    UNION\n    { <ID> dcterms:description ?descriptions }\n    UNION\n    {\n      <ID> void:sparqlEndpoint ?endpoint .\n      <ID> fibra:classQuery ?classQuery .\n      <ID> fibra:propertyQuery ?propertyQuery .\n    } UNION {\n      {\n        <ID> dcterms:rightsHolder ?rightsHolders\n      } UNION {\n        <ID> fibra:qualifiedAssertion ?qa .\n        ?qa rdf:predicate dcterms:rightsHolder .\n        ?qa rdf:object ?rightsHolders .\n        OPTIONAL { ?qa fibra:order ?rightsHolders_order }\n      }\n      {\n        ?rightsHolders skos:prefLabel ?rightsHolders_labels\n      } UNION {\n        ?rightsHolders foaf:homepage ?rightsHolders_url\n      } UNION {\n        ?rightsHolders dcterms:description ?rightsHolders_descriptions\n      }\n    }\n  # ENDGRAPH\n}\n",e.Schema=r}(fibra||(fibra={}));var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),fibra;!function(e){"use strict";var t=fi.seco.sparql.SparqlService,r=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.compatibleEndpoints=[],t.autocompletionQuery=e.SparqlAutocompleteService.defaultMatchQuery,t.itemQuery=e.SparqlItemService.getLocalItemPropertiesQuery,t.deleteItemQuery=e.SparqlItemService.deleteItemQuery,t.treeQuery=e.SparqlTreeService.getClassTreeQuery,t.classQuery=e.DataModel.classQuery,t.propertyQuery=e.DataModel.propertyQuery,t}return __extends(n,r),n.prototype.toTurtle=function(n,i){if(!n.has(this.id)){i.fibra=e.FIBRA.ns,n.set(this.id,"<"+this.id+"> a fibra:PrimaryEndpointConfiguration ;"),r.prototype.toTurtle.call(this,n,i);var o=n.get(this.id),a=this.compatibleEndpoints.filter(function(e){return e});0!==a.length&&(o+="\n  fibra:compatibleEndpoint ",a.forEach(function(e){return o+="<"+e+">, "}),o=o.substring(0,o.length-2)+" ;"),o+="\n  fibra:autocompletionQuery "+t.stringToSPARQLString(this.autocompletionQuery)+" ;\n  fibra:treeQuery "+t.stringToSPARQLString(this.treeQuery)+" ;\n  fibra:propertyQuery "+t.stringToSPARQLString(this.propertyQuery)+" ;\n  fibra:classQuery "+t.stringToSPARQLString(this.classQuery)+" ;\n  fibra:itemQuery "+t.stringToSPARQLString(this.itemQuery)+" ;\n  fibra:deleteItemQuery "+t.stringToSPARQLString(this.deleteItemQuery)+" .",n.set(this.id,o)}},n.prototype.copyToProject=function(e){var t=this.autocompletionQuery;t=e.graph?t.replace(/# STARTGRAPH/g,"GRAPH <"+e.graph+"> {").replace(/# ENDGRAPH/g,"}"):t.replace(/.*# STARTGRAPH\n/g,"").replace(/.*# ENDGRAPH\n/g,""),e.autocompletionQuery=t,t=this.itemQuery,t=e.graph?t.replace(/# STARTGRAPH/g,"GRAPH <"+e.graph+"> {").replace(/# ENDGRAPH/g,"}"):t.replace(/.*# STARTGRAPH\n/g,"").replace(/.*# ENDGRAPH\n/g,""),e.itemQuery=t,t=this.deleteItemQuery,t=e.graph?t.replace(/# STARTGRAPH/g,"GRAPH <"+e.graph+"> {").replace(/# ENDGRAPH/g,"}"):t.replace(/.*# STARTGRAPH\n/g,"").replace(/.*# ENDGRAPH\n/g,""),e.deleteItemQuery=t,t=this.treeQuery,t=e.graph?t.replace(/# STARTGRAPH/g,"GRAPH <"+e.graph+"> {").replace(/# ENDGRAPH/g,"}"):t.replace(/.*# STARTGRAPH\n/g,"").replace(/.*# ENDGRAPH\n/g,""),e.treeQuery=t,t=this.propertyQuery,t=e.graph?t.replace(/# STARTGRAPH/g,"GRAPH <"+e.graph+"> {").replace(/# ENDGRAPH/g,"}"):t.replace(/.*# STARTGRAPH\n/g,"").replace(/.*# ENDGRAPH\n/g,""),e.propertyQuery=t,t=this.classQuery,t=e.graph?t.replace(/# STARTGRAPH/g,"GRAPH <"+e.graph+"> {").replace(/# ENDGRAPH/g,"}"):t.replace(/.*# STARTGRAPH\n/g,"").replace(/.*# ENDGRAPH\n/g,""),e.classQuery=t},n}(e.Citable);r.listPrimaryEndpointConfigurationsQuery="PREFIX fibra: <http://hdlab.stanford.edu/fibra/ontology#>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX dcterms: <http://purl.org/dc/terms/>\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nSELECT ?id ?labels ?descriptions ?compatibleEndpoints ?rightsHolders ?rightsHolders_labels ?rightsHolders_descriptions ?rightsHolders_url ?rightsHolders_order ?url ?autocompletionQuery ?itemQuery ?deleteItemQuery ?treeQuery ?properyQuery ?classQuery {\n  # STARTGRAPH\n    ?id a fibra:PrimaryEndpointConfiguration .\n    { ?id skos:prefLabel ?labels }\n    UNION\n    { ?id dcterms:description ?descriptions }\n    UNION\n    { ?id fibra:compatibleEndpoint ?compatibleEndpoints }\n    UNION\n    {\n      ?id fibra:autocompletionQuery ?autocompletionQuery .\n      ?id fibra:itemQuery ?itemQuery .\n      ?id fibra:deleteItemQuery ?deleteItemQuery .\n      ?id fibra:treeQuery ?treeQuery .\n      ?id fibra:propertyQuery ?propertyQuery .\n      ?id fibra:classQuery ?classQuery .\n      OPTIONAL { ?id foaf:homepage ?url }\n    } UNION {\n      {\n        ?id dcterms:rightsHolder ?rightsHolders\n      } UNION {\n        ?id fibra:qualifiedAssertion ?qa .\n        ?qa rdf:predicate dcterms:rightsHolder .\n        ?qa rdf:object ?rightsHolders .\n        OPTIONAL { ?qa fibra:order ?rightsHolders_order }\n      }\n      {\n        ?rightsHolders skos:prefLabel ?rightsHolders_labels\n      } UNION {\n        ?rightsHolders foaf:homepage ?rightsHolders_url\n      } UNION {\n        ?rightsHolders dcterms:description ?rightsHolders_descriptions\n      }\n    }\n  # ENDGRAPH\n}",r.primaryEndpointConfigurationQuery="PREFIX fibra: <http://hdlab.stanford.edu/fibra/ontology#>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX dcterms: <http://purl.org/dc/terms/>\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nSELECT ?labels ?descriptions ?compatibleEndpoints ?rightsHolders ?rightsHolders_labels ?rightsHolders_descriptions ?rightsHolders_url ?rightsHolders_order ?url ?autocompletionQuery ?itemQuery ?deleteItemQuery ?treeQuery ?properyQuery ?classQuery {\n  # STARTGRAPH\n    { <ID> skos:prefLabel ?labels }\n    UNION\n    { <ID> dcterms:description ?descriptions }\n    UNION\n    { <ID> fibra:compatibleEndpoint ?compatibleEndpoints }\n    UNION\n    {\n      <ID> fibra:autocompletionQuery ?autocompletionQuery .\n      <ID> fibra:itemQuery ?itemQuery .\n      <ID> fibra:deleteItemQuery ?deleteItemQuery .\n      <ID> fibra:treeQuery ?treeQuery .\n      <ID> fibra:propertyQuery ?propertyQuery .\n      <ID> fibra:classQuery ?classQuery .\n      OPTIONAL { <ID> foaf:homepage ?url }\n    } UNION {\n      {\n        <ID> dcterms:rightsHolder ?rightsHolders\n      } UNION {\n        <ID> fibra:qualifiedAssertion ?qa .\n        <ID> rdf:predicate dcterms:rightsHolder .\n        <ID> rdf:object ?rightsHolders .\n        OPTIONAL { <ID> fibra:order ?rightsHolders_order }\n      }\n      {\n        ?rightsHolders skos:prefLabel ?rightsHolders_labels\n      } UNION {\n        ?rightsHolders foaf:homepage ?rightsHolders_url\n      } UNION {\n        ?rightsHolders dcterms:description ?rightsHolders_descriptions\n      }\n    }\n  # ENDGRAPH\n}",e.PrimaryEndpointConfiguration=r}(fibra||(fibra={}));var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),fibra;!function(e){"use strict";var t=fi.seco.sparql.SparqlService,r=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.types=[],t.autocompletionQuery=e.SparqlAutocompleteService.defaultMatchQuery,t.propertyQuery=e.DataModel.propertyQuery,t.classQuery=e.DataModel.classQuery,t.itemQuery=e.SparqlItemService.getRemoteItemPropertiesQuery,t.treeQuery=e.SparqlTreeService.getClassTreeQuery,t}return __extends(n,r),n.prototype.toTurtle=function(n,i){if(!n.has(this.id)){i.fibra=e.FIBRA.ns,i.void=e.VOID.ns,i.rdf=e.RDF.ns;var o="<"+this.id+"> a ";this.types.forEach(function(e){return o+=e.toCanonical()+" ,"}),o=o.substring(0,o.length-2)+" ;",n.set(this.id,o),r.prototype.toTurtle.call(this,n,i),o=n.get(this.id),o+="\n  void:sparqlEndpoint <"+this.endpoint+"> ;\n  fibra:autocompletionQuery "+t.stringToSPARQLString(this.autocompletionQuery)+" ;\n  fibra:itemQuery "+t.stringToSPARQLString(this.itemQuery)+" ;\n  fibra:treeQuery "+t.stringToSPARQLString(this.treeQuery)+" ;\n  fibra:propertyQuery "+t.stringToSPARQLString(this.propertyQuery)+" ;\n  fibra:classQuery "+t.stringToSPARQLString(this.classQuery)+" .",n.set(this.id,o)}},n}(e.Citable);r.listAuthorityEndpointConfigurationsQuery="PREFIX fibra: <http://hdlab.stanford.edu/fibra/ontology#>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX dcterms: <http://purl.org/dc/terms/>\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\nPREFIX void: <http://rdfs.org/ns/void#>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nSELECT ?id ?types ?labels ?descriptions ?rightsHolders ?rightsHolders_labels ?rightsHolders_descriptions ?rightsHolders_url ?rightsHolders_order ?url ?endpoint ?autocompletionQuery ?itemQuery ?treeQuery ?propertyQuery ?classQuery {\n  # STARTGRAPH\n    ?id a fibra:AuthorityEndpointConfiguration .\n    ?id a ?types .\n    { ?id skos:prefLabel ?labels }\n    UNION\n    { ?id dcterms:description ?descriptions }\n    UNION\n    {\n      ?id void:sparqlEndpoint ?endpoint .\n      ?id fibra:autocompletionQuery ?autocompletionQuery .\n      ?id fibra:itemQuery ?itemQuery .\n      ?id fibra:treeQuery ?treeQuery .\n      ?id fibra:propertyQuery ?propertyQuery .\n      ?id fibra:classQuery ?classQuery .\n      OPTIONAL { ?id foaf:homepage ?url }\n    } UNION {\n      {\n        ?id dcterms:rightsHolder ?rightsHolders\n      } UNION {\n        ?id fibra:qualifiedAssertion ?qa .\n        ?qa rdf:predicate dcterms:rightsHolder .\n        ?qa rdf:object ?rightsHolders .\n        OPTIONAL { ?qa fibra:order ?rightsHolders_order }\n      }\n      {\n        ?rightsHolders skos:prefLabel ?rightsHolders_labels\n      } UNION {\n        ?rightsHolders foaf:homepage ?rightsHolders_url\n      } UNION {\n        ?rightsHolders dcterms:description ?rightsHolders_descriptions\n      }\n    }\n  # ENDGRAPH\n}",r.listArchiveEndpointConfigurationsQuery=r.listAuthorityEndpointConfigurationsQuery.replace(/fibra:AuthorityEndpointConfiguration/,"fibra:ArchiveEndpointConfiguration"),r.remoteEndpointConfigurationQuery="PREFIX fibra: <http://hdlab.stanford.edu/fibra/ontology#>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX dcterms: <http://purl.org/dc/terms/>\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\nPREFIX void: <http://rdfs.org/ns/void#>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nSELECT ?types ?labels ?descriptions ?rightsHolders ?rightsHolders_labels ?rightsHolders_descriptions ?rightsHolders_url ?rightsHolders_order ?url ?endpoint ?autocompletionQuery ?itemQuery ?treeQuery ?propertyQuery ?classQuery {\n  # STARTGRAPH\n    { <ID> skos:prefLabel ?labels }\n    UNION\n    { <ID> dcterms:description ?descriptions }\n    UNION\n    {\n      <ID> a ?types .\n      <ID> void:sparqlEndpoint ?endpoint .\n      <ID> fibra:autocompletionQuery ?autocompletionQuery .\n      <ID> fibra:itemQuery ?itemQuery .\n      <ID> fibra:treeQuery ?treeQuery .\n      <ID> fibra:propertyQuery ?propertyQuery .\n      <ID> fibra:classQuery ?classQuery .\n      OPTIONAL { <ID> foaf:homepage ?url }\n    } UNION {\n      {\n        <ID> dcterms:rightsHolder ?rightsHolders\n      } UNION {\n        <ID> fibra:qualifiedAssertion ?qa .\n        ?qa rdf:predicate dcterms:rightsHolder .\n        ?qa rdf:object ?rightsHolders .\n        OPTIONAL { ?qa fibra:order ?rightsHolders_order }\n      }\n      {\n        ?rightsHolders skos:prefLabel ?rightsHolders_labels\n      } UNION {\n        ?rightsHolders foaf:homepage ?rightsHolders_url\n      } UNION {\n        ?rightsHolders dcterms:description ?rightsHolders_descriptions\n      }\n    }\n  # ENDGRAPH\n}",e.RemoteEndpointConfiguration=r}(fibra||(fibra={}));var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),fibra;!function(e){"use strict";var t=function(){function t(e){this.id=e,this.labels=[],this.descriptions=[],this.types=[]}return t.prototype.asNode=function(e){var t=this.asNodes[e];if(t)return t;if(t=this.asNodes[""])return t;for(var r in this.asNodes)return this.asNodes[r]},t.prototype.buildAsNodes=function(){var t=this;if(!this.asNodes){this.asNodes={};var r=new e.StringSet,n=new e.Map,i=new e.Map,o=new e.Map;this.labels.forEach(function(e){n.set(e.language,e.value),n.has("")||n.set("",e.value),r.add(e.language)}),this.descriptions.forEach(function(e){i.set(e.language,e.value),i.has("")||i.set("",e.value),r.add(e.language)}),this.types.forEach(function(t){t.buildAsNodes();var n=new e.Map;o.set(t.id.value,n),t.labels.forEach(function(e){n.set(e.language,e.value),n.has("")||n.set("",e.value),r.add(e.language)})}),r.each(function(r){var o=new e.FullRichNodeFromNode(t.id);o.label=n.get(r),o.label||(o.label=n.get("")),o.description=i.get(r),o.description||(o.description=i.get("")),o.types=t.types.map(function(e){return e.id===t.id?o:e.asNode(r)}),t.asNodes[r]=o})}},t}(),r=function(e){function t(t){var r=e.call(this,t)||this;return r.superClasses=[],r.subClasses=[],r.properties=[],r.inverseProperties=[],r}return __extends(t,e),t}(t);e.Class=r;var n=function(e){function t(t){var r=e.call(this,t)||this;return r.domains=[],r.ranges=[],r.superProperties=[],r.subProperties=[],r}return __extends(t,e),t}(t);e.Property=n;var i=function(){function t(){this.classMap=new e.Map,this.propertyMap=new e.Map,this.rootClasses=[],this.rootProperties=[]}return t.getFilter=function(e){return 0===e.length?"":"FILTER (?groupId IN ("+e.map(function(e){return e.toCanonical()}).join(", ")+"))"},t}();i.propertyQuery="PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\nPREFIX sf: <http://ldf.fi/functions#>\nPREFIX dcterms: <http://purl.org/dc/terms/>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nSELECT ?id ?domains ?ranges ?labels ?descriptions ?types ?inverseProperty ?superProperties ?subProperties {\n  # STARTGRAPH\n    {\n      ?types rdfs:subClassOf* rdf:Property .\n      ?id a ?types .\n    }\n      {\n      ?id skos:prefLabel|rdfs:label ?labels .\n    } UNION {\n      ?id rdfs:comment|dcterms:description ?descriptions .\n    } UNION {\n      ?id owl:inverseOf ?inverseProperty .\n    } UNION {\n      ?id rdfs:domain ?domains .\n    } UNION {\n      ?id rdfs:range ?ranges .\n    } UNION {\n      ?id rdfs:subPropertyOf ?superProperties .\n    } UNION {\n      ?subProperties rdfs:subPropertyOf ?id .\n    }\n # ENDGRAPH\n}",i.classQuery="PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\nPREFIX sf: <http://ldf.fi/functions#>\nPREFIX dcterms: <http://purl.org/dc/terms/>\nSELECT ?id ?types ?labels ?descriptions ?superClasses ?subClasses {\n  # STARTGRAPH\n    {\n      ?types rdfs:subClassOf* rdfs:Class .\n      ?id a ?types .\n    }\n    {\n      ?id skos:prefLabel|rdfs:label ?labels .\n    } UNION {\n      ?id rdfs:comment|dcterms:description ?descriptions .\n    } UNION {\n      ?id rdfs:subClassOf ?superClasses .\n    } UNION {\n      ?subClasses rdfs:subClassOf ?id .\n    }\n  # ENDGRAPH\n}",e.DataModel=i}(fibra||(fibra={}));var fibra;!function(e){"use strict";var t=fi.seco.sparql,r=function(){function t(e,t,r,n){this.workerService=e,this.fibraService=t,this.fibraSparqlService=r,this.$localStorage=n,n.projectSources?n.projectSources.forEach(function(e){e.sparqlEndpoint||(e.sparqlEndpoint=e.endpoint,e.updateEndpoint=e.endpoint,e.graphStoreEndpoint=e.endpoint)}):n.projectSources=[]}return t.orderCitables=function(e){e.sort(function(e,t){return(e.order?e.order:Number.MAX_VALUE)-(t.order?t.order:Number.MAX_VALUE)}),e.forEach(function(e){return delete e.order})},t.prototype.getCurrentProject=function(){return this.fibraService.getState().project},t.prototype.setCurrentProject=function(e){return this.fibraService.dispatchAction(this.fibraService.setProject(e))},t.prototype.getProjectSources=function(){return this.$localStorage.projectSources},t.prototype.listPrimaryEndpointConfigurations=function(e){return this.workerService.call("projectWorkerService","listPrimaryEndpointConfigurations",[e])},t.prototype.loadPrimaryEndpointConfiguration=function(e,t){return this.workerService.call("projectWorkerService","loadPrimaryEndpointConfiguration",[e,t])},t.prototype.listArchiveEndpointConfigurations=function(e){return this.workerService.call("projectWorkerService","listArchiveEndpointConfigurations",[e])},t.prototype.listAuthorityEndpointConfigurations=function(e){return this.workerService.call("projectWorkerService","listAuthorityEndpointConfigurations",[e])},t.prototype.loadRemoteEndpointConfiguration=function(e,t){return this.workerService.call("projectWorkerService","loadRemoteEndpointConfiguration",[e,t])},t.prototype.listSchemas=function(e){return this.workerService.call("projectWorkerService","listSchemas",[e])},t.prototype.loadSchema=function(e,t){return this.workerService.call("projectWorkerService","loadSchema",[e,t])},t.prototype.listProjects=function(e){return this.workerService.call("projectWorkerService","listProjects",[e])},t.prototype.loadProject=function(e,t){return this.workerService.call("projectWorkerService","loadProject",[e,t])},t.prototype.deleteCitable=function(e,t){return this.deleteObject(e,t.id,t.source.graph)},t.prototype.deleteObjects=function(e,r,n){var i=n?t.deleteQuery.replace(/# STARTGRAPH/g,"GRAPH <"+n+"> {").replace(/# ENDGRAPH/g,"}"):t.deleteQuery.replace(/.*# STARTGRAPH\n/g,"").replace(/.*# ENDGRAPH\n/g,"");return i=i.replace(/# PATTERNS/g,r.reduce(function(e,t,r){return e+" <"+t+"> ?p"+r+" ?o"+r+" ."},"")),this.fibraSparqlService.update(e,i)},t.prototype.deleteObject=function(e,t,r){return this.deleteObjects(e,[t],r)},t.prototype.saveCitable=function(t,r,n){var i=this,o=new e.Map,a={};return n.toTurtle(o,a),this.deleteObjects(t,o.keys(),n.source.graph).then(function(){return i.fibraSparqlService.post(r,e.toTurtle(a,o),n.source.graph)})},t}();angular.module("fibra").service("projectService",["workerService","fibraService","fibraSparqlService","$localStorage",function(){return new(Function.prototype.bind.apply(r,[null].concat(Array.prototype.slice.apply(arguments))))}]),r.deleteQuery="DELETE {\n  # STARTGRAPH\n    # PATTERNS\n  # ENDGRAPH\n}\nWHERE {\n  # STARTGRAPH\n    # PATTERNS\n  # ENDGRAPH\n}",e.ProjectService=r;var n=function(){function n(e,t){this.fibraSparqlService=e,this.$q=t}return n.prototype.loadPrimaryEndpointConfiguration=function(t,r){return this.runSingleQuery(t,e.PrimaryEndpointConfiguration.primaryEndpointConfigurationQuery,r,new e.PrimaryEndpointConfiguration(r,t))},n.prototype.listPrimaryEndpointConfigurations=function(t){return this.runListQuery(t,e.PrimaryEndpointConfiguration.listPrimaryEndpointConfigurationsQuery,function(r){return new e.PrimaryEndpointConfiguration(r,t)})},n.prototype.loadRemoteEndpointConfiguration=function(t,r){return this.runSingleQuery(t,e.RemoteEndpointConfiguration.remoteEndpointConfigurationQuery,r,new e.RemoteEndpointConfiguration(r,t))},n.prototype.listArchiveEndpointConfigurations=function(t){return this.runListQuery(t,e.RemoteEndpointConfiguration.listArchiveEndpointConfigurationsQuery,function(r){return new e.RemoteEndpointConfiguration(r,t)})},n.prototype.listAuthorityEndpointConfigurations=function(t){return this.runListQuery(t,e.RemoteEndpointConfiguration.listAuthorityEndpointConfigurationsQuery,function(r){return new e.RemoteEndpointConfiguration(r,t)})},n.prototype.listProjects=function(t){return this.runListQuery(t,e.Project.listProjectsQuery,function(r){return new e.Project(r,t)})},n.prototype.listSchemas=function(t){return this.runListQuery(t,e.Schema.listSchemasQuery,function(r){return new e.Schema(r,t)})},n.prototype.loadSchema=function(t,r){return this.runSingleQuery(t,e.Schema.schemaQuery,r,new e.Schema(r,t))},n.prototype.loadDataModel=function(r){var n=this,i=new e.DataModel,o=new e.EMap(function(t){var r=new e.Class(e.DataFactory.namedNode(t));return i.classMap.set(t,r),r}),a=new e.EMap(function(t){var r=new e.Property(e.DataFactory.namedNode(t));return i.propertyMap.set(t,r),r}),s=[];return r.forEach(function(r){s.push(n.fibraSparqlService.query(r.endpoint,r.classQuery).then(function(r){var n={bindingTypes:{types:"uniqueArray"},bindingConverters:{superClasses:function(e){return o.goc(e.value)},subClasses:function(e){return o.goc(e.value)},types:function(e){return o.goc(e.value)},labels:function(t){return e.DataFactory.nodeFromBinding(t)},descriptions:function(t){return e.DataFactory.nodeFromBinding(t)}}},i=new t.UniqueObjectTracker;r.results.bindings.forEach(function(e){return t.SparqlService.bindingsToObject(e,o.goc(e.id.value),n,i)})})),s.push(n.fibraSparqlService.query(r.endpoint,r.propertyQuery).then(function(r){var n={bindingTypes:{types:"uniqueArray"},bindingConverters:{superProperties:function(e){return a.goc(e.value)},subProperties:function(e){return a.goc(e.value)},inverseProperty:function(e){return a.goc(e.value)},types:function(e){return o.goc(e.value)},domains:function(e){return o.goc(e.value)},ranges:function(e){return o.goc(e.value)},labels:function(t){return e.DataFactory.nodeFromBinding(t)},descriptions:function(t){return e.DataFactory.nodeFromBinding(t)}}},i=new t.UniqueObjectTracker;r.results.bindings.forEach(function(e){return t.SparqlService.bindingsToObject(e,a.goc(e.id.value),n,i)})}))}),this.$q.all(s).then(function(){return o.values().forEach(function(e){e.buildAsNodes(),e.superClasses.filter(function(t){return!t.subClasses.find(function(t){return t===e})}).forEach(function(t){return t.subClasses.push(e)}),e.subClasses.filter(function(t){return!t.superClasses.find(function(t){return t===e})}).forEach(function(t){return t.superClasses.push(e)})}),o.values().forEach(function(e){0===e.superClasses.length&&i.rootClasses.push(e)}),a.values().forEach(function(e){e.buildAsNodes(),e.inverseProperty&&(e.inverseProperty.inverseProperty=e),e.superProperties.filter(function(t){return!t.subProperties.find(function(t){return t===e})}).forEach(function(t){return t.subProperties.push(e)}),e.subProperties.filter(function(t){return!t.superProperties.find(function(t){return t===e})}).forEach(function(t){return t.superProperties.push(e)}),e.domains.forEach(function(t){return t.properties.push(e)}),e.ranges.forEach(function(t){return t.inverseProperties.push(e)})}),a.values().forEach(function(e){0===e.superProperties.length&&i.rootProperties.push(e)}),i})},n.prototype.loadProject=function(t,r){var n=this;return this.runSingleQuery(t,e.Project.projectQuery,r,new e.Project(r,t)).then(function(e){var t=[];t.push(n.$q.all(e.schemas.map(function(e){return n.loadSchema(e.source,e.id)})).then(function(t){return e.schemas=t,n.loadDataModel(t).then(function(t){return e.dataModel=t})}));var r=[],i=[];return e.archiveEndpoints.forEach(function(e){return t.push(n.loadRemoteEndpointConfiguration(e.source,e.id).then(function(e){return r.push(e)}))}),e.authorityEndpoints.forEach(function(e){return t.push(n.loadRemoteEndpointConfiguration(e.source,e.id).then(function(e){return i.push(e)}))}),n.$q.all(t).then(function(){return e.archiveEndpoints=r,e.authorityEndpoints=i,e})})},n.prototype.runSingleQuery=function(n,i,o,a){i=n.graph?i.replace(/# STARTGRAPH/g,"GRAPH <"+n.graph+"> {").replace(/# ENDGRAPH/g,"}"):i.replace(/.*# STARTGRAPH\n/g,"").replace(/.*# ENDGRAPH\n/g,""),i=i.replace(/<ID>/g,"<"+o+">");var s=this.$q.defer();return this.fibraSparqlService.query(n.sparqlEndpoint,i).then(function(i){var o={bindingTypes:{rightsHolders:"uniqueArray",schemas:"uniqueArray",authorityEndpoints:"uniqueArray",archiveEndpoints:"uniqueArray"},bindingConverters:{types:function(t){return e.DataFactory.nodeFromBinding(t)},labels:function(t){return e.DataFactory.nodeFromBinding(t)},descriptions:function(t){return e.DataFactory.nodeFromBinding(t)},schemas:function(t){return new e.Schema(t.value,e.CitableSource.clone(n))},authorityEndpoints:function(t){return new e.RemoteEndpointConfiguration(t.value,e.CitableSource.clone(n))},archiveEndpoints:function(t){return new e.RemoteEndpointConfiguration(t.value,e.CitableSource.clone(n))},rightsHolders_labels:function(t){return e.DataFactory.nodeFromBinding(t)},rightsHolders_descriptions:function(t){return e.DataFactory.nodeFromBinding(t)},rightsHolders:function(t){return new e.Citable(t.value,n)}}},u=new t.UniqueObjectTracker;i.results.bindings.forEach(function(e){return t.SparqlService.bindingsToObject(e,a,o,u)}),r.orderCitables(a.rightsHolders),s.resolve(a)}),s.promise},n.prototype.runListQuery=function(n,i,o){return i=n.graph?i.replace(/# STARTGRAPH/g,"GRAPH <"+n.graph+"> {").replace(/# ENDGRAPH/g,"}"):i.replace(/.*# STARTGRAPH\n/g,"").replace(/.*# ENDGRAPH\n/g,""),this.fibraSparqlService.query(n.sparqlEndpoint,i).then(function(i){var a=new e.EMap(o),s={bindingTypes:{rightsHolders:"uniqueArray",schemas:"uniqueArray",authorityEndpoints:"uniqueArray",archiveEndpoints:"uniqueArray"},bindingConverters:{types:function(t){return e.DataFactory.nodeFromBinding(t)},labels:function(t){return e.DataFactory.nodeFromBinding(t)},descriptions:function(t){return e.DataFactory.nodeFromBinding(t)},schemas:function(t){return new e.Schema(t.value,e.CitableSource.clone(n))},authorityEndpoints:function(t){return new e.RemoteEndpointConfiguration(t.value,e.CitableSource.clone(n))},archiveEndpoints:function(t){return new e.RemoteEndpointConfiguration(t.value,e.CitableSource.clone(n))},rightsHolders_labels:function(t){return e.DataFactory.nodeFromBinding(t)},rightsHolders_descriptions:function(t){return e.DataFactory.nodeFromBinding(t)},rightsHolders:function(t){return new e.Citable(t.value,n)}}},u=new t.UniqueObjectTracker;return i.results.bindings.forEach(function(e){return t.SparqlService.bindingsToObject(e,a.goc(e.id.value),s,u)}),a.values().forEach(function(e){return r.orderCitables(e.rightsHolders)}),a.values()})},n}();angular.module("fibra").service("projectWorkerService",["fibraSparqlService","$q",function(){return new(Function.prototype.bind.apply(n,[null].concat(Array.prototype.slice.apply(arguments))))}]),e.ProjectWorkerService=n}(fibra||(fibra={}));var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),fibra;!function(e){"use strict";function t(e,t,r){return void 0===e[t]&&(e[t]=r?r(t):{}),e[t]}function r(e,t,r,n){return void 0===e[t]&&(e[t]=n?n(t):{},r.push(e[t])),e[t]}function n(e,t,r,n){void 0===t[r]&&(t[r]=n,e.push(n))}function i(e,t,r){for(var i in r)n(e,t,i,r[i])}var o=function(){function e(){this.s={}}return e.prototype.has=function(e){return void 0!==this.s[e]},e.prototype.set=function(e,t){return this.s[e]=t,this},e.prototype.get=function(e){return this.s[e]},e.prototype.remove=function(e){var t=this.has(e);return delete this.s[e],t},e.prototype.sets=function(e){for(var t in e)this.set(t,e[t]);return this},e.prototype.setm=function(e){for(var t in e)this.set(t,e[t]);return this},e.prototype.clear=function(){return this.s={},this},e.prototype.keys=function(){var e=[];for(var t in this.s)e.push(t);return e},e.prototype.values=function(){var e=[];for(var t in this.s)e.push(this.s[t]);return e},e.prototype.entries=function(){var e=[];for(var t in this.s)e.push({key:t,value:this.s[t]});return e},e.prototype.each=function(e){for(var t in this.s)e(this.s[t],t,this)},e.prototype.size=function(){var e=0;for(var t in this.s)e++;return e},e.prototype.empty=function(){return 0===this.size()},e}();e.Map=o;var a=function(e){function t(t){void 0===t&&(t=function(){return{}});var r=e.call(this)||this;return r.create=t,r}return __extends(t,e),t.prototype.goc=function(e,t){return this.has(e)||this.set(e,t?t(e):this.create(e)),this.get(e)},t}(o);e.EMap=a;var s=function(){function e(){this.a=[]}return e.prototype.clear=function(){return this.a=[],this},e.prototype.has=function(e){return this.a.indexOf(e)!==-1},e.prototype.add=function(e){return this.has(e)?this:(this.a.push(e),this)},e.prototype.adda=function(e){var t=this;return e.forEach(function(e){return t.add(e)}),this},e.prototype.adds=function(e){var t=this;return e.each(function(e){return t.add(e)}),this},e.prototype.remove=function(e){var t=this.a.indexOf(e);return t!==-1&&(this.a.splice(t,1),!0)},e.prototype.each=function(e){for(var t=0,r=this.a;t<r.length;t++){
var n=r[t];e(n,n,this)}},e.prototype.size=function(){return this.a.length},e.prototype.empty=function(){return 0===this.size()},e.prototype.values=function(){return this.a},e}();e.IdentitySet=s;var u=function(){function e(){this.s={}}return e.prototype.clear=function(){return this.s={},this},e.prototype.has=function(e){return void 0!==this.s[e]},e.prototype.add=function(e){return this.s[e]=e,this},e.prototype.adda=function(e){var t=this;return e.forEach(function(e){return t.add(e)}),this},e.prototype.adds=function(e){var t=this;return e.each(function(e){return t.add(e)}),this},e.prototype.remove=function(e){var t=this.has(e);return delete this.s[e],t},e.prototype.each=function(e){for(var t in this.s)e(this.s[t],t,this)},e.prototype.size=function(){var e=0;for(var t in this.s)e++;return e},e.prototype.empty=function(){return 0===this.size()},e.prototype.values=function(){var e=[];for(var t in this.s)e.push(t);return e},e}();e.StringSet=u;var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.a=[],t}return __extends(t,e),t.prototype.set=function(t,r){return this.has(t)||(e.prototype.set.call(this,t,r),this.a.push(r)),this},t.prototype.remove=function(t){var r=this.get(t);return void 0!==r&&(e.prototype.remove.call(this,t),this.a.splice(this.a.indexOf(r),1)),void 0!==r},t.prototype.size=function(){return this.a.length},t.prototype.values=function(){return this.a},t.prototype.clear=function(){return e.prototype.clear.call(this),this.a=[],this},t}(o);e.OMap=l;var c=function(e){function t(t){var r=e.call(this)||this;return r.create=t,r}return __extends(t,e),t.prototype.goc=function(e,t){return this.has(e)||this.set(e,t?t(e):this.create(e)),this.get(e)},t}(l);e.EOMap=c;var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.a=[],t}return __extends(t,e),t.prototype.add=function(t){return this.has(t)||(e.prototype.add.call(this,t),this.a.push(t)),this},t.prototype.remove=function(t){var r=e.prototype.remove.call(this,t);return r&&this.a.splice(this.a.indexOf(t),1),r},t.prototype.size=function(){return this.a.length},t.prototype.values=function(){return this.a},t.prototype.clear=function(){return e.prototype.clear.call(this),this.a=[],this},t}(u);e.OStringSet=f,e.goc=t,e.ogoc=r,e.cpush=n,e.cpushs=i}(fibra||(fibra={}));var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),fibra;!function(e){"use strict";var t=function(){function t(e,t){this.property=e,this.object=t}return t.prototype.pruned=function(){return new t(new e.PrunedRichNodeFromNode(this.property),new e.PrunedRichNodeFromNode(this.object))},t}();e.PropertyAndValue=t;var r=function(){function e(e,t){void 0===t&&(t=[]),this.value=e,this.properties=t}return e}();e.RichPropertyValue=r;var n=function(t){function n(n){var i=t.call(this,n)||this;return i.values=n.values.map(function(t){return new r(new e.PrunedRichNodeFromNode(t.value))}),i}return __extends(n,t),n.prototype.toPropertyAndValues=function(){return i.toPropertyAndValues(this)},n.prototype.toTriples=function(e){return i.toTriples(e,this)},n.prototype.toQuads=function(e,t){return i.toQuads(e,this,t)},n.prototype.pruned=function(){return this},n}(e.PrunedRichNodeFromNode);e.PrunedPropertyValuesFromPropertyValues=n;var i=function(r){function i(e){var t=r.call(this,e)||this;return t.values=[],t}return __extends(i,r),i.toPropertyAndValues=function(e){return e.values.map(function(r){return new t(e,r.value)})},i.toTriples=function(t,r){return i.toQuads(t,r,e.DefaultGraph.instance)},i.toQuads=function(t,r,n){return r.values.map(function(i){return e.DataFactory.instance.quad(t,r,i.value,n)})},i.prototype.pruned=function(){return new n(this)},i.prototype.toPropertyAndValues=function(){return i.toPropertyAndValues(this)},i.prototype.toTriples=function(e){return i.toTriples(e,this)},i.prototype.toQuads=function(e,t){return i.toQuads(e,this,t)},i}(e.RichNodeFromRichNode);e.PropertyToValues=i;var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.localProperties=[],t.remoteProperties=[],t.localInverseProperties=[],t.remoteInverseProperties=[],t}return __extends(t,e),t}(e.FullRichNodeFromNode);e.Item=o;var a=function(){function e(e,t){void 0===t&&(t=0),this.constraintString=e,this.priority=t}return e}();e.SimpleConstraint=a;var s=function(){function e(e){this.workerService=e}return e.prototype.getItem=function(e,t,r){return void 0===t&&(t=!1),this.workerService.call("sparqlItemWorkerService","getItems",[[e.toCanonical()],t],r).then(function(e){return e[0]},null,function(e){return{endpointType:e.endpointType,endpoint:e.endpoint,item:e.items[0]}})},e.prototype.getItems=function(e,t,r){return void 0===t&&(t=!1),this.workerService.call("sparqlItemWorkerService","getItems",[e.map(function(e){return e.toCanonical()}),t],r)},e.prototype.getAllItems=function(e,t){return void 0===e&&(e=!1),this.workerService.call("sparqlItemWorkerService","getItems",[!1,e],t)},e.prototype.createNewItem=function(e){return void 0===e&&(e=[]),this.workerService.call("sparqlItemWorkerService","createNewItem",[e.map(function(e){return e.pruned()})])},e.prototype.alterItem=function(e,t,r){return void 0===r&&(r=[]),this.workerService.call("sparqlItemWorkerService","alterItem",[e,t.map(function(e){return e.pruned()}),r.map(function(e){return e.pruned()})])},e.prototype.deleteItem=function(e){return this.workerService.call("sparqlItemWorkerService","deleteItem",[e])},e}();angular.module("fibra").service("sparqlItemService",["workerService",function(){return new(Function.prototype.bind.apply(s,[null].concat(Array.prototype.slice.apply(arguments))))}]),s.naiveGetLocalItemPropertiesQuery='PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX mads: <http://www.loc.gov/mads/rdf/v1#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\nSELECT ?id ?itemLabel ?property ?propertyLabel ?object ?objectLabel {\n  # STARTGRAPH\n    VALUES ?id { <IDS> }\n    ?id skos:prefLabel|mads:authoritativeLabel|rdfs:label ?itemLabel .\n    FILTER(LANG(?itemLabel)=\'\' || LANG(?itemLabel)=\'<PREFLANG>\')\n    ?id ?property ?object .\n    OPTIONAL {\n      ?property skos:prefLabel|rdfs:label ?propertyLabelP .\n      FILTER(LANG(?propertyLabelP)=\'\' || LANG(?propertyLabelP)=\'<PREFLANG>\')\n    }\n    BIND(COALESCE(?propertyLabelP,REPLACE(REPLACE(REPLACE(REPLACE(STR(?property),".*/",""),".*#",""),"_"," "),"([A-Z])"," $1")) AS ?propertyLabel)\n    OPTIONAL {\n      ?object skos:prefLabel|rdfs:label ?objectLabelP .\n      FILTER(LANG(?objectLabelP)=\'\' || LANG(?objectLabelP)=\'<PREFLANG>\')\n    }\n    BIND (IF(ISIRI(?object),COALESCE(?objectLabelP,REPLACE(REPLACE(REPLACE(REPLACE(STR(?object),".*/",""),".*#",""),"_"," "),"([A-Z])"," $1")),?object) AS ?objectLabel)\n  # ENDGRAPH\n}',s.getLocalItemPropertiesQuery='PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX mads: <http://www.loc.gov/mads/rdf/v1#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\nPREFIX sf: <http://ldf.fi/functions#>\nSELECT ?id ?itemLabel ?property ?propertyLabel ?object ?objectLabel {\n  # STARTGRAPH\n    VALUES ?id { <IDS> }\n    { ?id ?property ?object . }\n    UNION\n    { ?object ?property ?id . }\n    ?id sf:preferredLanguageLiteral (skos:prefLabel mads:authoritativeLabel rdfs:label skos:altLabel mads:variantLabel \'<PREFLANG>\' \'\' ?itemLabel) .\n    OPTIONAL {\n      ?property sf:preferredLanguageLiteral (skos:prefLabel mads:authoritativeLabel rdfs:label skos:altLabel mads:variantLabel \'<PREFLANG>\' \'\' ?propertyLabelP)\n    }\n    BIND(COALESCE(?propertyLabelP,REPLACE(REPLACE(REPLACE(REPLACE(STR(?property),".*/",""),".*#",""),"_"," "),"([A-Z])"," $1")) AS ?propertyLabel)\n    OPTIONAL {\n      ?object sf:preferredLanguageLiteral (skos:prefLabel mads:authoritativeLabel rdfs:label skos:altLabel mads:variantLabel \'<PREFLANG>\' \'\' ?objectLabelP) .\n    }\n    BIND (IF(ISIRI(?object),COALESCE(?objectLabelP,REPLACE(REPLACE(REPLACE(REPLACE(STR(?object),".*/",""),".*#",""),"_"," "),"([A-Z])"," $1")),?object) AS ?objectLabel)\n  # ENDGRAPH\n}',s.getRemoteItemPropertiesQuery='PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX mads: <http://www.loc.gov/mads/rdf/v1#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\nPREFIX sf: <http://ldf.fi/functions#>\nSELECT ?id ?property ?propertyLabel ?object ?objectLabel {\n  VALUES (?id ?oid) { <IDPAIRS> }\n  ?oid ?property ?object .\n  OPTIONAL {\n    ?property sf:preferredLanguageLiteral (skos:prefLabel mads:authoritativeLabel rdfs:label skos:altLabel mads:variantLabel \'<PREFLANG>\' \'\' ?propertyLabelP)\n  }\n  BIND(COALESCE(?propertyLabelP,REPLACE(REPLACE(REPLACE(REPLACE(STR(?property),".*/",""),".*#",""),"_"," "),"([A-Z])"," $1")) AS ?propertyLabel)\n  OPTIONAL {\n    ?object sf:preferredLanguageLiteral (skos:prefLabel mads:authoritativeLabel rdfs:label skos:altLabel mads:variantLabel \'<PREFLANG>\' \'\' ?objectLabelP) .\n  }\n  BIND (IF(ISIRI(?object),COALESCE(?objectLabelP,REPLACE(REPLACE(REPLACE(REPLACE(STR(?object),".*/",""),".*#",""),"_"," "),"([A-Z])"," $1")),?object) AS ?objectLabel)\n}\n',s.deleteItemQuery="DELETE {\n  # STARTGRAPH\n    <ID> ?p ?o .\n    ?s ?p <ID> .\n  # ENDGRAPH\n}\nWHERE {\n  # STARTGRAPH\n    { <ID> ?p ?o } UNION { ?s ?p <ID> }\n  # ENDGRAPH\n}\n",e.SparqlItemService=s;var u=function(){function t(e,t,r,n){this.fibraSparqlService=e,this.$q=t,this.sparqlUpdateWorkerService=r,this.stateWorkerService=n}return t.processItemResult=function(t,n,o,a,s,u){if(u.property){var l=o.goc(u.property.value).goc(u.object.value,function(){var o=n.goc(u.property.value,function(){var r=new i(e.DataFactory.instance.nodeFromBinding(u.property));return u.propertyLabel&&(r.label=u.propertyLabel.value),t.push(r),r}),s=new e.FullRichNodeFromNode(e.DataFactory.instance.nodeFromBinding(u.object));return s.sourceEndpoints=[],o.values.push(new r(s)),e.OWL.sameAs.equals(o)&&a.push(s),s});l.sourceEndpoints.push(s),u.objectLabel&&!l.label&&(l.label=u.objectLabel.value)}},t.prototype.getItems=function(r,n,i){var a=this;void 0===n&&(n=!1);var s=this.stateWorkerService.state.project.itemQuery;s=r?s.replace(/<IDS>/g,r.join("")):s.replace(/VALUES \?id { <IDS> }/g,""),s=s.replace(/<PREFLANG>/g,this.stateWorkerService.state.language);var u=new e.EMap(function(t){return new o(e.DataFactory.instance.namedNode(t))}),l=this.$q.defer();return this.fibraSparqlService.query(this.stateWorkerService.state.project.endpoint,s,{timeout:i}).then(function(r){for(var o=new e.EMap(function(){return new e.EMap}),s=new e.EMap(function(){return new e.EMap(function(){return new e.EMap})}),c=new e.ENodeMap(function(){return[]}),f=0,p=r.results.bindings;f<p.length;f++){var h=p[f],d=u.goc(h.id.value);h.itemLabel&&(d.label=h.itemLabel.value),t.processItemResult(d.localProperties,o.goc(h.id.value),s.goc(h.id.value),c.goc(d),a.stateWorkerService.state.project.endpoint,h)}if(n){l.notify({endpointType:"primary",endpoint:a.stateWorkerService.state.project.endpoint,items:u.values()});for(var v="",g=0,y=u.values();g<y.length;g++){var d=y[g];v+="("+d.toCanonical()+d.toCanonical()+")";for(var m=0,b=c.get(d);m<b.length;m++){var w=b[m];v+="("+d.toCanonical()+w.toCanonical()+")"}}a.$q.all(a.stateWorkerService.state.project.remoteEndpoints().map(function(r){var n=r.itemQuery;return n=n.replace(/<IDPAIRS>/g,v),n=n.replace(/<PREFLANG>/g,a.stateWorkerService.state.language),a.fibraSparqlService.query(r.endpoint,n,{timeout:i}).then(function(e){if(0!==e.results.bindings.length){for(var n=0,i=e.results.bindings;n<i.length;n++){var a=i[n],f=u.goc(a.id.value);t.processItemResult(f.remoteProperties,o.goc(a.id.value),s.goc(a.id.value),c.goc(f),r.id,a)}l.notify({endpointType:"remote",endpoint:r.id,items:u.values()})}},function(t){return l.notify({endpointType:"remote",endpoint:r.id,error:e.WorkerWorkerService.stripFunctions(t)})})})).then(function(){return l.resolve(u.values())})}else l.resolve(u.values())}),l.promise},t.prototype.deleteItem=function(e){return this.fibraSparqlService.update(this.stateWorkerService.state.project.updateEndpoint,this.stateWorkerService.state.project.deleteItemQuery.replace(/<ID>/g,e.toCanonical())).then(function(e){return!0},function(e){return!1})},t.prototype.alterItem=function(t,r,n){void 0===n&&(n=[]);var i=[],o=[];return r.forEach(function(r){return i.push(new e.Triple(t,r.property,r.object))}),n.forEach(function(r){return o.push(new e.Triple(t,r.property,r.object))}),this.sparqlUpdateWorkerService.updateGraphs(this.stateWorkerService.state.project.updateEndpoint,[new e.Graph(this.stateWorkerService.state.project.graph?e.DataFactory.namedNode(this.stateWorkerService.state.project.graph):e.DefaultGraph.instance,i)],[new e.Graph(this.stateWorkerService.state.project.graph?e.DataFactory.namedNode(this.stateWorkerService.state.project.graph):e.DefaultGraph.instance,o)])},t.prototype.createNewItem=function(t){void 0===t&&(t=[]);var r=this.$q.defer(),n=new e.NamedNode(this.stateWorkerService.state.project.instanceNS+e.UUID());r.notify(n);var i=[];return t.forEach(function(t){return i.push(new e.Triple(n,t.property,t.object))}),this.sparqlUpdateWorkerService.updateGraphs(this.stateWorkerService.state.project.updateEndpoint,[new e.Graph(this.stateWorkerService.state.project.graph?e.DataFactory.namedNode(this.stateWorkerService.state.project.graph):e.DefaultGraph.instance,i)]).then(function(){return r.resolve(n)},r.reject,r.notify),r.promise},t}();angular.module("fibra").service("sparqlItemWorkerService",["fibraSparqlService","$q","sparqlUpdateWorkerService","stateWorkerService",function(){return new(Function.prototype.bind.apply(u,[null].concat(Array.prototype.slice.apply(arguments))))}]),e.SparqlItemWorkerService=u}(fibra||(fibra={}));var fibra;!function(e){"use strict";var t=function(){function e(e,t,r){this.appName=e,this.workerThreads=t,this.importScripts=r}return e}();e.WorkerServiceConfiguration=t;var r=function(){function e(t,r,n,i,o){var a=this;this.workerServicePrototypeMappingConfiguration=r,this.$q=o,this.currentWorker=0,this.deferreds=[];var s=i.location.protocol+"//"+i.location.host,u=t.importScripts.map(function(e){return 0!==e.indexOf("http")?s+(0!==e.indexOf("/")?i.location.pathname:"")+e:e}),l=i.URL.createObjectURL(new Blob([e.workerTemplate.replace(/<APP_NAME>/g,t.appName).replace(/<IMPORT_SCRIPTS>/g,u.join("','"))],{type:"application/javascript"}));this.workers=[];for(var c=0;c<t.workerThreads;c++)this.workers.push(new Worker(l)),this.workers[c].addEventListener("message",function(e){var t=e.data.event;if("broadcast"===t)n.$broadcast(e.data.name,a.restorePrototypes(e.data.args)),n.$apply();else{var r=a.deferreds[e.data.id];r&&("success"===t?(delete a.deferreds[e.data.id],r.resolve(a.restorePrototypes(e.data.data))):"failure"===t?(delete a.deferreds[e.data.id],r.reject(a.restorePrototypes(e.data.data))):r.notify(a.restorePrototypes(e.data.data)))}})}return e.stripMarks=function(t){if(t&&t.__mark&&"object"==typeof t)if(delete t.__mark,t instanceof Array)t.forEach(function(t){return e.stripMarks(t)});else for(var r in t)t.hasOwnProperty(r)&&e.stripMarks(t[r])},e.stripPrototypes=function(t){if(t&&t.__className&&"object"==typeof t)if(delete t.__className,t instanceof Array)t.forEach(function(t){return e.stripPrototypes(t)});else for(var r in t)t.hasOwnProperty(r)&&e.stripPrototypes(t[r])},e.savePrototypes=function(t){return e.stripPrototypes(t),this.savePrototypesInternal(t),t},e.savePrototypesInternal=function(t){if(t&&!t.__className&&"object"==typeof t)if(t instanceof Array)t.forEach(function(t){return e.savePrototypesInternal(t)});else{if(t.constructor.__name||"Object"!==t.constructor.name){var r=Object.getPrototypeOf(t);e:for(;r!==Object.prototype;){for(var n=0,i=Object.getOwnPropertyNames(r);n<i.length;n++){var o=i[n];if("constructor"!==o&&"function"==typeof t.__proto__[o]){t.__className=t.constructor.__name?t.constructor.__name:t.constructor.name;break e}}r=Object.getPrototypeOf(r)}t.__className||(t.__className="Object")}for(var a in t)t.hasOwnProperty(a)&&e.savePrototypesInternal(t[a])}},e.prototype.$broadcast=function(t,r){this.workers.forEach(function(n){return n.postMessage({name:t,args:e.savePrototypes(r)})})},e.prototype.callAll=function(t,r,n,i){var o=this;void 0===n&&(n=[]);var a=this.$q.defer();this.deferreds.push(a);var s=this.deferreds.length-1,u={id:s,service:t,method:r,args:e.savePrototypes(n)};return i&&i.then(function(){o.workers.forEach(function(e){return e.postMessage({id:s,cancel:!0})}),delete o.deferreds[s]}),this.workers.forEach(function(e){return e.postMessage(u)}),a.promise},e.prototype.call=function(t,r,n,i){var o=this;void 0===n&&(n=[]);var a=this.$q.defer();this.deferreds.push(a);var s=this.deferreds.length-1,u=this.workers[this.currentWorker];return this.currentWorker=(this.currentWorker+1)%this.workers.length,i&&i.then(function(){u.postMessage({id:s,cancel:!0}),delete o.deferreds[s]}),u.postMessage({id:s,service:t,method:r,args:e.savePrototypes(n)}),a.promise},e.prototype.restorePrototypes=function(t){return this.restorePrototypesInternal(t),e.stripMarks(t),t},e.prototype.restorePrototypesInternal=function(e){var t=this;if(e&&!e.__mark&&"object"==typeof e)if(e.__mark=!0,e instanceof Array)e.forEach(function(e){return t.restorePrototypesInternal(e)});else{if(e.__className){var r=this.workerServicePrototypeMappingConfiguration[e.__className];if(!r)throw"Unknown prototype "+e.__className;e.__proto__=r,delete e.__className}for(var n in e)e.hasOwnProperty(n)&&this.restorePrototypesInternal(e[n])}},e}();angular.module("fibra").service("workerService",["workerServiceConfiguration","workerServicePrototypeMappingConfiguration","$rootScope","$window","$q",function(){return new(Function.prototype.bind.apply(r,[null].concat(Array.prototype.slice.apply(arguments))))}]),r.workerTemplate="\n      var window = self\n      self.history = {}\n      self.Node = function () {}\n      self.setImmediate = function(fn) { return window.setTimeout(fn, 0) }\n      var document = {\n        readyState: 'complete',\n        cookie: '',\n        querySelector: function () {},\n        addEventListener: function() {},\n        createElement: function() {\n          return {\n            pathname: '',\n            setAttribute: function(key, value) {}\n          };\n        },\n      };\n      importScripts('<IMPORT_SCRIPTS>')\n      window.angular.module('<APP_NAME>').run(['workerWorkerService', function(workerWorkerService) {\n        self.addEventListener('message', function(e) { workerWorkerService.onMessage(e.data) })\n      }])\n      window.angular.bootstrap(null, ['<APP_NAME>'])\n    ",e.WorkerService=r;var n=function(){function e(e,t,r,n){this.workerServicePrototypeMappingConfiguration=e,this.$injector=t,this.$q=r,this.$rootScope=n,this.cancellers=[]}return e.stripFunctions=function(t){var r={};for(var n in t)"object"==typeof t[n]?r[n]=e.stripFunctions(t[n]):"function"!=typeof t[n]&&(r[n]=t[n]);return r},e.prototype.$broadcast=function(e,t){try{self.postMessage({event:"broadcast",name:e,args:r.savePrototypes(t)})}catch(e){throw console.log(t,e),e}},e.prototype.onMessage=function(t){var n=this;if(void 0===t.id)this.$rootScope.$broadcast(t.name,this.restorePrototypes(t.args)),this.$rootScope.$apply();else if(t.cancel){var i=this.cancellers[t.id];delete this.cancellers[t.id],i&&i.resolve()}else{var o=this.$injector.get(t.service),i=this.$q.defer();this.cancellers[t.id]=i;var a=o[t.method].apply(o,this.restorePrototypes(t.args).concat(i.promise));if(!a||!a.then){var s=this.$q.defer();s.resolve(a),a=s.promise}a.then(function(e){delete n.cancellers[t.id],self.postMessage({event:"success",id:t.id,data:r.savePrototypes(e)})},function(i){if(delete n.cancellers[t.id],i instanceof Error)throw self.postMessage({event:"failure",id:t.id,data:{name:i.name,message:i.message,stack:i.stack}}),i;self.postMessage({event:"failure",id:t.id,data:r.savePrototypes(e.stripFunctions(i))})},function(e){return self.postMessage({event:"update",id:t.id,data:r.savePrototypes(e)})})}},e.prototype.restorePrototypes=function(e){return this.restorePrototypesInternal(e),r.stripMarks(e),e},e.prototype.restorePrototypesInternal=function(e){var t=this;if(e&&!e.__mark&&"object"==typeof e)if(e.__mark=!0,e instanceof Array)e.forEach(function(e){return t.restorePrototypesInternal(e)});else{if(e.__className){var r=this.workerServicePrototypeMappingConfiguration[e.__className];if(!r)throw"Unknown prototype "+e.__className;e.__proto__=r,delete e.__className}for(var n in e)e.hasOwnProperty(n)&&this.restorePrototypesInternal(e[n])}},e}();angular.module("fibra").service("workerWorkerService",["workerServicePrototypeMappingConfiguration","$injector","$q","$rootScope",function(){return new(Function.prototype.bind.apply(n,[null].concat(Array.prototype.slice.apply(arguments))))}]),e.WorkerWorkerService=n}(fibra||(fibra={}));var fibra;!function(e){"use strict";var t=function(){function e(e,t){this.type=e,this.id=t}return e}();e.SparqlServiceDefinition=t;var r=function(){function t(t,r){var o=this;this.sparqlService=t,this.$q=r,this.services=new e.EMap(function(e){if(0===e.indexOf("local:")){var t=o.$q.defer();return new rdfstore.Store({name:e,persistent:!0},function(e,r){e?t.reject(e):t.resolve(new i(r,o.$q))}),t.promise}return o.$q.resolve(new n(o.sparqlService,e))})}return t.prototype.query=function(e,t,r){return this.services.goc(e).then(function(e){return e.query(t,r)})},t.prototype.update=function(e,t,r){return this.services.goc(e).then(function(e){return e.update(t,r)})},t.prototype.get=function(e,t,r){return this.services.goc(e).then(function(e){return e.get(t,r)})},t.prototype.put=function(e,t,r,n){return this.services.goc(e).then(function(e){return e.put(t,r,n)})},t.prototype.post=function(e,t,r,n){return this.services.goc(e).then(function(e){return e.post(t,r,n)})},t}();angular.module("fibra").service("fibraSparqlService",["sparqlService","$q",function(){return new(Function.prototype.bind.apply(r,[null].concat(Array.prototype.slice.apply(arguments))))}]),e.FibraSparqlService=r;var n=function(){function e(e,t){this.s=e,this.endpoint=t}return e.prototype.query=function(e,t){return this.s.query(this.endpoint,e,t).then(function(e){return e.data})},e.prototype.update=function(e,t){return this.s.update(this.endpoint,e,t).then(function(e){return e.data})},e.prototype.get=function(e,t){return this.s.get(this.endpoint,e,t).then(function(e){return e.data})},e.prototype.post=function(e,t,r){return this.s.post(this.endpoint,e,t,r).then(function(e){return e.data})},e.prototype.put=function(e,t,r){return this.s.put(this.endpoint,e,t,r).then(function(e){return e.data})},e}();angular.module("fibra").service("remoteInternalSparqlService",["s","endpoint",function(){return new(Function.prototype.bind.apply(n,[null].concat(Array.prototype.slice.apply(arguments))))}]);var i=function(){function t(e,t){this.s=e,this.$q=t}return t.convertBinding=function(e){switch(e.token){case"uri":return{type:"uri",value:e.value};case"blank":return{type:"bnode",value:e.value};case"literal":return{type:"literal",value:e.value,"xml:lang":e.lang,datatype:e.type};default:throw"Unknown binding type "+e.token}},t.prototype.query=function(r,n){var i=this,o=this.$q.defer();try{this.s.execute(r,function(n,a){if(n)console.log("Error executing",i.s,r,n),o.reject(n);else{var s={head:{vars:[]},results:{bindings:[]}},u=new e.StringSet;s.results.bindings=a.map(function(e){var r={};for(var n in e)u.add(n),null!==e[n]&&(r[n]=t.convertBinding(e[n]));return r}),s.head.vars=u.values(),o.resolve(s)}})}catch(e){throw console.log("Exception executing",this.s,r,e),e}return o.promise},t.prototype.update=function(e,t){var r=this.$q.defer();return this.s.execute(e,function(e,t){e?r.reject(e):r.resolve(t)}),r.promise},t.prototype.get=function(e,t){var r=this.$q.defer();return this.s.graph(e,function(e,t){e?r.reject(e):r.resolve(t.toNT())}),r.promise},t.prototype.post=function(e,t,r){var n=this.$q.defer(),i=function(e,t){e?n.reject(e):n.resolve()};return t?this.s.load("text/turtle",e,t,i):this.s.load("text/turtle",e,i),n.promise},t.prototype.put=function(e,t,r){var n=this,i=this.$q.defer(),o=function(r){r&&i.reject(r);var o=function(e,t){e?i.reject(e):i.resolve()};t?n.s.load("text/turtle",e,t,o):n.s.load("text/turtle",e,o)};return t?this.s.clear(t,o):this.s.clear(o),i.promise},t}();angular.module("fibra").service("rDFStoreInternalSparqlService",["s","$q",function(){return new(Function.prototype.bind.apply(i,[null].concat(Array.prototype.slice.apply(arguments))))}]),e.RDFStoreInternalSparqlService=i}(fibra||(fibra={}));var fibra;!function(e){"use strict";var t=fi.seco.sparql,r=function(){function e(){this.localMatchingResults=[],this.localNonMatchingResults=[],this.remoteResults=[]}return e}();e.AutocompletionResults=r;var n=function(){function e(e){this.label=e,this.results=[]}return e}();e.ResultGroup=n;var i=function(){function e(e,t,r,n){this.ids=e,this.datasources=t,this.matchedLabel=r,this.prefLabel=n,this.additionalInformation={}}return e}();e.Result=i;var o=function(){function e(e){this.workerService=e}return e.prototype.autocomplete=function(e,t,r,n,i){return void 0===r&&(r=!1),void 0===n&&(n=""),this.workerService.call("sparqlAutocompleteWorkerService","autocomplete",[e,t,r,n],i)},e}();angular.module("fibra").service("sparqlAutocompleteService",["workerService",function(){return new(Function.prototype.bind.apply(o,[null].concat(Array.prototype.slice.apply(arguments))))}]),o.naiveMatchQueryTemplate='PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX mads: <http://www.loc.gov/mads/rdf/v1#>\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\nPREFIX dcterms: <http://purl.org/dc/terms/>\nSELECT ?groupId ?id ?prefLabel ?matchedLabel ?sameAs ?altLabel { # ADDITIONALVARIABLES\n  GRAPH <GRAPH> {\n    {\n      SELECT ?groupId ?id {\n        {\n          ?id skos:prefLabel|rdfs:label|skos:altLabel|mads:authoritativeLabel|mads:variantLabel <QUERY> .\n        } UNION {\n          ?id skos:prefLabel|rdfs:label|skos:altLabel|mads:authoritativeLabel|mads:variantLabel <QUERY>@<PREFLANG> .\n        }\n        ?id a ?groupId .\n      }\n      GROUP BY ?groupId ?id\n      HAVING(BOUND(?id))\n      LIMIT <LIMIT>\n    }\n    ?id skos:prefLabel|rdfs:label|skos:altLabel|mads:authoritativeLabel|mads:variantLabel ?matchedLabel .\n    FILTER (REGEX(LCASE(?matchedLabel),CONCAT("\\\\b",LCASE(<QUERY>))))\n    BIND(COALESCE(?groupLabelP,REPLACE(REPLACE(REPLACE(REPLACE(STR(?groupId),".*/",""),".*#",""),"_"," "),"([A-Z])"," $1")) AS ?groupLabel)\n    {\n      ?id  rdfs:label|skos:prefLabel|mads:authoritativeLabel ?prefLabel .\n    } UNION {\n      ?id owl:sameAs ?sameAs .\n    } UNION {\n      ?id skos:altLabel|mads:variantLabel ?altLabel .\n    }\n    # ADDITIONALSELECT\n  }\n}',o.defaultMatchQuery='\nPREFIX text: <http://jena.apache.org/text#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX mads: <http://www.loc.gov/mads/rdf/v1#>\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\nPREFIX sf: <http://ldf.fi/functions#>\nPREFIX fibra: <http://ldf.fi/fibra/schema#>\nPREFIX dcterms: <http://purl.org/dc/terms/>\nSELECT ?groupId ?id ?prefLabel ?matchedLabel ?sameAs ?altLabel { # ADDITIONALVARIABLES\n  # STARTGRAPH\n    {\n      SELECT ?groupId ?id (SUM(?sc) AS ?score) {\n        {\n          SELECT ?groupId ?id ?sc {\n            BIND(CONCAT("\\"",REPLACE(<QUERY>,"([\\\\+\\\\-\\\\&\\\\|\\\\!\\\\(\\\\)\\\\{\\\\}\\\\[\\\\]\\\\^\\\\\\"\\\\~\\\\*\\\\?\\\\:\\\\/\\\\\\\\])","\\\\$1"),"\\"") AS ?query)\n            (?id ?sc) text:query ?query .\n            ?id skos:prefLabel|rdfs:label|skos:altLabel|mads:authoritativeLabel|mads:variantLabel ?matchedLabel\n            FILTER (LCASE(?matchedLabel)=LCASE(<QUERY>))\n            ?id a ?groupIdLocal .\n            BIND(?groupIdLocal AS ?groupId)\n            # CONSTRAINTS\n          }\n          GROUP BY ?groupId ?id ?sc\n          LIMIT <LIMIT>\n        } UNION {\n          SELECT ?groupId ?id ?sc {\n            BIND(CONCAT(REPLACE(<QUERY>,"([\\\\+\\\\-\\\\&\\\\|\\\\!\\\\(\\\\)\\\\{\\\\}\\\\[\\\\]\\\\^\\\\\\"\\\\~\\\\*\\\\?\\\\:\\\\/\\\\\\\\])","\\\\$1"),"*") AS ?query)\n            (?id ?sc) text:query ?query .\n            ?id a ?groupIdLocal .\n            BIND(?groupIdLocal AS ?groupId)\n            # CONSTRAINTS\n          }\n          GROUP BY ?groupId ?id ?sc\n          LIMIT <LIMIT>\n        }\n      }\n      GROUP BY ?groupId ?id\n      HAVING(BOUND(?id))\n      LIMIT <LIMIT>\n    }\n    ?id skos:prefLabel|rdfs:label|skos:altLabel|mads:authoritativeLabel|mads:variantLabel ?matchedLabel\n    FILTER (REGEX(LCASE(?matchedLabel),CONCAT("\\\\b",LCASE(<QUERY>))))\n    {\n      ?id sf:preferredLanguageLiteral (skos:prefLabel mads:authoritativeLabel rdfs:label skos:altLabel mads:variantLabel \'<PREFLANG>\' \'\' ?prefLabel) .\n    } UNION {\n      ?id owl:sameAs ?sameAs .\n    } UNION {\n      ?id skos:altLabel|mads:variantLabel ?altLabel .\n    }\n    # ADDITIONALSELECT\n  # ENDGRAPH\n}\n',e.SparqlAutocompleteService=o;var a=function(){function t(){this.idToIdSet=new e.EMap(function(){return new e.StringSet}),this.idToGroupIdSet=new e.EMap(function(){return new e.StringSet}),this.ifpVarPlusValueToIdSet=new e.EMap(function(){return new e.EMap(function(){return new e.StringSet})}),this.idToPrefLabelSet=new e.EMap(function(){return new e.ONodeSet}),this.idToMatchedLabelSet=new e.EMap(function(){return new e.ONodeSet}),this.idToAltLabelSet=new e.EMap(function(){return new e.ONodeSet}),this.idToDatasourceSet=new e.EMap(function(){return new e.StringSet}),this.seen=new e.StringSet}return t}(),s=function(){function o(e,t,r){this.$q=e,this.fibraSparqlService=t,this.stateWorkerService=r}return o.processBindings=function(t,r,n){n.results.bindings.forEach(function(i){var o=i.id.value;t.idToIdSet.goc(o).add(o),t.idToDatasourceSet.goc(o).add(r),i.prefLabel&&t.idToPrefLabelSet.goc(o).add(e.DataFactory.instance.nodeFromBinding(i.prefLabel)),i.altLabel&&t.idToAltLabelSet.goc(o).add(e.DataFactory.instance.nodeFromBinding(i.altLabel)),i.matchedLabel&&t.idToMatchedLabelSet.goc(o).add(e.DataFactory.instance.nodeFromBinding(i.matchedLabel)),i.groupId&&(t.idToGroupIdSet.goc(o).add(i.groupId.value),i.groupLabel&&t.idToPrefLabelSet.goc(i.groupId.value).add(e.DataFactory.instance.nodeFromBinding(i.groupLabel))),i.sameAs&&(t.idToIdSet.get(o).add(i.sameAs.value),t.idToIdSet.goc(i.sameAs.value).add(o));for(var a=0,s=n.head.vars;a<s.length;a++){var u=s[a];0===u.indexOf("ifp")&&i[u]&&t.ifpVarPlusValueToIdSet.goc(u.substring(3)).goc(i[u].value).add(o)}})},o.buildResults=function(t,r){var o=[];return t.idToIdSet.each(function(a,s){var u=t.seen.has(s)||a.values().some(function(e){return t.seen.has(e)});if(!u){t.seen.adds(a);var l=new i(a.values().map(function(t){return e.DataFactory.instance.namedNode(t)}),t.idToDatasourceSet.get(s).values(),t.idToMatchedLabelSet.get(s).values()[0],t.idToPrefLabelSet.has(s)?t.idToPrefLabelSet.get(s).values()[0]:null);t.idToAltLabelSet.has(s)&&(l.additionalInformation.altLabel=t.idToAltLabelSet.get(s).values()),l.additionalInformation.type=t.idToGroupIdSet.get(s).values().map(function(t){return e.DataFactory.instance.namedNode(t)}),l.additionalInformation.typeLabel=t.idToGroupIdSet.get(s).values().map(function(e){return t.idToPrefLabelSet.has(s)?t.idToPrefLabelSet.get(s).values()[0]:null}),t.idToGroupIdSet.get(s).each(function(e){var i=r.get(e);!i&&t.idToPrefLabelSet.has(e)&&(i=new n(t.idToPrefLabelSet.get(e).values()[0].value),r.set(e,i),o.push(i)),i&&i.results.push(l)})}}),o},o.unifyResults=function(e){e.ifpVarPlusValueToIdSet.each(function(t){return t.each(function(t){
return t.each(function(r){return e.idToIdSet.goc(r).adds(t)})})}),e.idToIdSet.each(function(t,r){return t.each(function(n){var i=e.idToIdSet.get(n);if(t!==i){e.idToIdSet.set(n,t),t.adds(i);var o=e.idToDatasourceSet.get(r),a=e.idToDatasourceSet.get(n);o?(a&&o.adds(a),e.idToDatasourceSet.set(n,o)):a&&e.idToDatasourceSet.set(r,a);var s=e.idToGroupIdSet.get(r),u=e.idToGroupIdSet.get(n);s?(u&&s.adds(u),e.idToGroupIdSet.set(n,s)):u&&e.idToGroupIdSet.set(r,u);var l=e.idToPrefLabelSet.get(r),c=e.idToPrefLabelSet.get(n);l?(c&&l.adds(c),e.idToPrefLabelSet.set(n,l)):c&&e.idToPrefLabelSet.set(r,c),l=e.idToMatchedLabelSet.get(r),c=e.idToMatchedLabelSet.get(n),l?(c&&l.adds(c),e.idToMatchedLabelSet.set(n,l)):c&&e.idToMatchedLabelSet.set(r,c),l=e.idToAltLabelSet.get(r),c=e.idToAltLabelSet.get(n),l?(c&&l.adds(c),e.idToAltLabelSet.set(n,l)):c&&e.idToAltLabelSet.set(r,c)}})})},o.prototype.autocomplete=function(n,i,s,u,l){var c=this;void 0===s&&(s=!1),void 0===u&&(u="");var f=this.$q.defer(),p=new r,h=this.stateWorkerService.state.project.autocompletionQuery;h=h.replace(/<QUERY>/g,t.SparqlService.stringToSPARQLString(n)),h=h.replace(/<LIMIT>/g,""+i),h=h.replace(/# CONSTRAINTS/g,u),h=h.replace(/<PREFLANG>/g,this.stateWorkerService.state.language);var d=new a,v=this.fibraSparqlService.query(this.stateWorkerService.state.project.endpoint,h,{timeout:l}).then(function(t){console.log(t),o.processBindings(d,c.stateWorkerService.state.project.endpoint,t),console.log(d),p.localMatchingResults=o.buildResults(d,new e.EMap),console.log(p.localMatchingResults),s?f.notify({endpointType:"primary",endpoint:c.stateWorkerService.state.project.id,results:p}):f.resolve(p)});if(s){var g=new e.EMap;this.$q.all(this.stateWorkerService.state.project.remoteEndpoints().map(function(r){return h=r.autocompletionQuery,h=h.replace(/<QUERY>/g,t.SparqlService.stringToSPARQLString(n)),h=h.replace(/<LIMIT>/g,""+i),h=h.replace(/<PREFLANG>/g,c.stateWorkerService.state.language),c.fibraSparqlService.query(r.endpoint,h,{timeout:l}).then(function(e){console.log(e),0!==e.results.bindings.length&&v.then(function(){o.processBindings(d,r.id,e),console.log(d),o.unifyResults(d),p.remoteResults=p.remoteResults.concat(o.buildResults(d,g)),console.log(p.remoteResults),f.notify({endpointType:"remote",endpoint:r.id,results:p})})},function(t){return f.notify({endpointType:"remote",endpoint:r.id,error:e.WorkerWorkerService.stripFunctions(t)})})})).then(function(){return f.resolve(p)})}return f.promise},o}();angular.module("fibra").service("sparqlAutocompleteWorkerService",["$q","fibraSparqlService","stateWorkerService",function(){return new(Function.prototype.bind.apply(s,[null].concat(Array.prototype.slice.apply(arguments))))}]),e.SparqlAutocompleteWorkerService=s}(fibra||(fibra={}));var fibra;!function(e){"use strict";var t=function(){function e(e){this.workerService=e}return e.prototype.getTree=function(e,t,r){return this.workerService.call("sparqlTreeWorkerService","getTree",[e,t],r)},e}();angular.module("fibra").service("sparqlTreeService",["workerService",function(){return new(Function.prototype.bind.apply(t,[null].concat(Array.prototype.slice.apply(arguments))))}]),t.getClassTreeQuery='PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX sf: <http://ldf.fi/functions#>\nSELECT ?subClass ?superClass ?class ?classLabel ?instances {\n  # STARTGRAPH\n    {\n      ?groupId rdfs:subClassOf ?class .\n      FILTER EXISTS {\n        ?id a ?groupId .\n        # CONSTRAINTS\n      }\n      BIND(?groupId AS ?subClass)\n    } UNION {\n      {\n        SELECT ?groupId (COUNT(*) AS ?instances) {\n          ?id a ?groupId .\n        }\n        GROUP BY ?groupId\n      }\n      # CONSTRAINTS\n      BIND (?groupId AS ?class)\n    }\n    OPTIONAL {\n      ?class sf:preferredLanguageLiteral (skos:prefLabel rdfs:label skos:altLabel \'en\' \'\' ?classLabelP) .\n    }\n    FILTER(ISIRI(?class))\n    BIND(COALESCE(?classLabelP,REPLACE(REPLACE(REPLACE(REPLACE(STR(?class),".*/",""),".*#",""),"_"," "),"([A-Z])"," $1")) AS ?classLabel)\n  # ENDGRAPH\n}\n',e.SparqlTreeService=t;var r=function(){function t(e){this.fibraSparqlService=e}return t.prototype.getTree=function(t,r,n){return this.fibraSparqlService.query(t,r,{timeout:n}).then(function(t){var r={},n={};t.results.bindings.forEach(function(t){if(t.classLabel&&(n[t.class.value]=new e.TreeNode(t.class.value,t.classLabel.value)),t.instances&&(n[t.class.value].instances=parseInt(t.instances.value,10)),t.subClass){var i=t.subClass.value;r[i]||(r[i]={}),r[i][t.class.value]=!0}if(t.superClass){var i=t.class.value;r[i]||(r[i]={}),r[i][t.superClass.value]=!0}});var i=[];for(var o in n)if(r[o])for(var a in r[o])n[a].children.push(n[o]);else i.push(n[o]);return i})},t}();angular.module("fibra").service("sparqlTreeWorkerService",["fibraSparqlService",function(){return new(Function.prototype.bind.apply(r,[null].concat(Array.prototype.slice.apply(arguments))))}]),e.SparqlTreeWorkerService=r}(fibra||(fibra={}));var fibra;!function(e){"use strict";var t=function(){function e(e){this.workerService=e}return e.prototype.updateQuads=function(e,t,r){return this.workerService.call("sparqlUpdateWorkerService","updateQuads",[e,t,r])},e.prototype.updateGraphs=function(e,t,r){return this.workerService.call("sparqlUpdateWorkerService","updateGraphs",[e,t,r])},e}();angular.module("fibra").service("sparqlUpdateService",["workerService",function(){return new(Function.prototype.bind.apply(t,[null].concat(Array.prototype.slice.apply(arguments))))}]),e.SparqlUpdateService=t;var r=function(){function t(e){this.fibraSparqlService=e}return t.prototype.updateQuads=function(t,r,n){void 0===r&&(r=[]),void 0===n&&(n=[]);var i={},o={},a=[],s=[];return r.forEach(function(t){var r=i[t.graph.value];r||(r=new e.Graph(t.graph),i[t.graph.value]=r,a.push(r)),r.triples.push(e.DataFactory.triple(t.subject,t.predicate,t.object))}),n.forEach(function(t){var r=o[t.graph.value];r||(r=new e.Graph(t.graph),o[t.graph.value]=r,s.push(r)),r.triples.push(e.DataFactory.triple(t.subject,t.predicate,t.object))}),this.updateGraphs(t,a,s)},t.prototype.updateGraphs=function(r,n,i){void 0===n&&(n=[]),void 0===i&&(i=[]);var o=n.map(function(t){return(e.DefaultGraph.instance.equals(t.graph)?"":"GRAPH"+t.graph.toCanonical())+"{"+t.triples.map(function(e){return e.toCanonical()}).join(" . ")+"}"}).join(""),a=i.map(function(t){return(e.DefaultGraph.instance.equals(t.graph)?"":"GRAPH"+t.graph.toCanonical())+"{"+t.triples.map(function(e){return e.toCanonical()}).join(" . ")+"}"}).join("");return this.fibraSparqlService.update(r,t.queryTemplate.replace(/<DELETE>/g,a).replace(/<INSERT>/g,o)).then(function(e){return!0},function(e){return!1})},t}();angular.module("fibra").service("sparqlUpdateWorkerService",["fibraSparqlService",function(){return new(Function.prototype.bind.apply(r,[null].concat(Array.prototype.slice.apply(arguments))))}]),r.queryTemplate="DELETE{<DELETE>}INSERT{<INSERT>}WHERE {}",e.SparqlUpdateWorkerService=r}(fibra||(fibra={}));var fibra;!function(e){"use strict";var t=function(){function e(e,t){this.id=e,this.label=t,this.children=[],this.selected=!0,this.open=!0}return e.recursivelyProcess=function(t,r){r(t),t.children.forEach(function(t){return e.recursivelyProcess(t,r)})},e.filter=function(e,t){for(var r=e.cloneWithoutChildren(),n=0,i=e.children;n<i.length;n++){var o=i[n];t(o)&&r.children.push(o)}return r},e.recursivelyMap=function(t,r){for(var n=[],i=0,o=t.children;i<o.length;i++){var a=o[i];n=n.concat(e.recursivelyMap(a,r))}return r(t,n)},e.prototype.cloneWithoutChildren=function(){var t=new e(this.id,this.label);return t.instances=this.instances,t.matchingInstances=this.matchingInstances,t.selected=this.selected,t.open=this.open,t},e}();e.TreeNode=t;var r=function(){function e(){this.bindings={tree:"<",onSelect:"&"},this.templateUrl="components/tree/tree.html"}return e}();angular.module("fibra").component("tree",new r),e.TreeComponent=r}(fibra||(fibra={}));var fibra;!function(e){"use strict";function t(e,t){var r="";for(var n in e)r=r+"@prefix "+n+": <"+e[n]+"> .\n";return t.values().forEach(function(e){return r=r+e.substring(0,e.length-2)+" .\n\n"}),r}function r(r){var n={},i=new e.Map;return r.toTurtle(i,n),t(n,i)}function n(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,r=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return i[255&e]+i[e>>8&255]+i[e>>16&255]+i[e>>24&255]+"-"+i[255&t]+i[t>>8&255]+"-"+i[t>>16&15|64]+i[t>>24&255]+"-"+i[63&r|128]+i[r>>8&255]+"-"+i[r>>16&255]+i[r>>24&255]+i[255&n]+i[n>>8&255]+i[n>>16&255]+i[n>>24&255]}e.toTurtle=t,e.citableToTurtle=r;for(var i=[],o=0;o<256;o++)i[o]=(o<16?"0":"")+o.toString(16);e.UUID=n}(fibra||(fibra={}));