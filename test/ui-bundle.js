!function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=248)}([function(e,t){e.exports=angular},function(e,t,r){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,r){"use strict";t.__esModule=!0;var n=r(175),i=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,i.default)(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}()},function(e,t,r){"use strict";function n(e){return e}function i(){}function o(e,t,r,n,i){void 0===i&&(i=!1);var o=function(t){return e()[t].bind(r())},a=function(e){return function(){return t[e]=o(e),t[e].apply(null,arguments)}};return n=n||Object.keys(e()),n.reduce(function(e,t){return e[t]=i?a(t):o(t),e},t)}function a(e,t){return-1!==e.indexOf(t)}function s(e,t){var r=e.indexOf(t);return r>=0&&e.splice(r,1),e}function l(e,t){return e.push(t),t}function u(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=r.concat({}).reverse(),o=t.extend.apply(null,i);return t.extend({},o,p(e||{},Object.keys(o)))}function c(e,t){var r=[];for(var n in e.path){if(e.path[n]!==t.path[n])break;r.push(e.path[n])}return r}function p(e,t){var r={};for(var n in e)-1!==t.indexOf(n)&&(r[n]=e[n]);return r}function d(e,r){return Object.keys(e).filter(L.not(t.inArray(r))).reduce(function(t,r){return t[r]=e[r],t},{})}function f(e,t){return v(e,L.prop(t))}function h(e,r){var n=I.isArray(e),i=n?[]:{},o=n?function(e){return i.push(e)}:function(e,t){return i[t]=e};return t.forEach(e,function(e,t){r(e,t)&&o(e,t)}),i}function g(e,r){var n;return t.forEach(e,function(e,t){n||r(e,t)&&(n=e)}),n}function v(e,r){var n=I.isArray(e)?[]:{};return t.forEach(e,function(e,t){return n[t]=r(e,t)}),n}function m(e,t){return e.push(t),e}function y(e,t){return void 0===t&&(t="assert failure"),function(r){var n=e(r);if(!n)throw new Error(I.isFunction(t)?t(r):t);return n}}function b(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)return[];var r,n=e.reduce(function(e,t){return Math.min(t.length,e)},9007199254740991),i=[];for(r=0;r<n;r++)switch(e.length){case 1:i.push([e[0][r]]);break;case 2:i.push([e[0][r],e[1][r]]);break;case 3:i.push([e[0][r],e[1][r],e[2][r]]);break;case 4:i.push([e[0][r],e[1][r],e[2][r],e[3][r]]);break;default:i.push(e.map(function(e){return e[r]}))}return i}function E(e,t){var r,n;if(I.isArray(t)&&(r=t[0],n=t[1]),!I.isString(r))throw new Error("invalid parameters to applyPairs");return e[r]=n,e}function x(e){return e.length&&e[e.length-1]||void 0}function S(e,r){return r&&Object.keys(r).forEach(function(e){return delete r[e]}),r||(r={}),t.extend(r,e)}function C(e,t,r){if(I.isArray(e))return e.forEach(t,r);Object.keys(e).forEach(function(r){return t(e[r],r)})}function w(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];if(r)for(var n=Object.keys(r),i=0;i<n.length;i++)e[n[i]]=r[n[i]]}return e}function T(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e!==e&&t!==t)return!0;var r=typeof e;if(r!==typeof t||"object"!==r)return!1;var n=[e,t];if(L.all(I.isArray)(n))return A(e,t);if(L.all(I.isDate)(n))return e.getTime()===t.getTime();if(L.all(I.isRegExp)(n))return e.toString()===t.toString();if(L.all(I.isFunction)(n))return!0;if([I.isFunction,I.isArray,I.isDate,I.isRegExp].map(L.any).reduce(function(e,t){return e||!!t(n)},!1))return!1;var i,o={};for(i in e){if(!T(e[i],t[i]))return!1;o[i]=!0}for(i in t)if(!o[i])return!1;return!0}function A(e,t){return e.length===t.length&&b(e,t).reduce(function(e,t){return e&&T(t[0],t[1])},!0)}Object.defineProperty(t,"__esModule",{value:!0});var I=r(5),L=r(6),N=r(16),R="undefined"==typeof window?{}:window,_=R.angular||{};t.fromJson=_.fromJson||JSON.parse.bind(JSON),t.toJson=_.toJson||JSON.stringify.bind(JSON),t.copy=_.copy||S,t.forEach=_.forEach||C,t.extend=Object.assign||w,t.equals=_.equals||T,t.identity=n,t.noop=i,t.createProxyFunctions=o,t.inherit=function(e,r){return t.extend(Object.create(e),r)};t.inArray=L.curry(a),t._inArray=a,t.removeFrom=L.curry(s),t._removeFrom=s,t.pushTo=L.curry(l),t._pushTo=l,t.deregAll=function(e){return e.slice().forEach(function(r){"function"==typeof r&&r(),t.removeFrom(e,r)})},t.defaults=u,t.mergeR=function(e,r){return t.extend(e,r)},t.ancestors=c,t.pick=p,t.omit=d,t.pluck=f,t.filter=h,t.find=g,t.mapObj=v,t.map=v,t.values=function(e){return Object.keys(e).map(function(t){return e[t]})},t.allTrueR=function(e,t){return e&&t},t.anyTrueR=function(e,t){return e||t},t.unnestR=function(e,t){return e.concat(t)},t.flattenR=function(e,r){return I.isArray(r)?e.concat(r.reduce(t.flattenR,[])):m(e,r)},t.pushR=m,t.uniqR=function(e,r){return t.inArray(e,r)?e:m(e,r)},t.unnest=function(e){return e.reduce(t.unnestR,[])},t.flatten=function(e){return e.reduce(t.flattenR,[])},t.assertPredicate=y,t.assertMap=y,t.assertFn=y,t.pairs=function(e){return Object.keys(e).map(function(t){return[t,e[t]]})},t.arrayTuples=b,t.applyPairs=E,t.tail=x,t._extend=w,t.sortBy=function(e,t){return void 0===t&&(t=L.val(!0)),function(r,n){return t(r)&&t(n)?e(r)-e(n):0}},t.composeSort=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t,r){return e.reduce(function(e,n){return e||n(t,r)},0)}},t.silenceUncaughtInPromise=function(e){return e.catch(function(e){return 0})&&e},t.silentRejection=function(e){return t.silenceUncaughtInPromise(N.services.$q.reject(e))}},function(e,t,r){!function(r,n){e.exports=t=n()}(0,function(){var e=e||function(e,t){var r=Object.create||function(){function e(){}return function(t){var r;return e.prototype=t,r=new e,e.prototype=null,r}}(),n={},i=n.lib={},o=i.Base=function(){return{extend:function(e){var t=r(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),a=i.WordArray=o.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var t=this.words,r=e.words,n=this.sigBytes,i=e.sigBytes;if(this.clamp(),n%4)for(var o=0;o<i;o++){var a=r[o>>>2]>>>24-o%4*8&255;t[n+o>>>2]|=a<<24-(n+o)%4*8}else for(var o=0;o<i;o+=4)t[n+o>>>2]=r[o>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8,t.length=e.ceil(r/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var r,n=[],i=0;i<t;i+=4){var o=function(t){var t=t,r=987654321,n=4294967295;return function(){r=36969*(65535&r)+(r>>16)&n,t=18e3*(65535&t)+(t>>16)&n;var i=(r<<16)+t&n;return i/=4294967296,(i+=.5)*(e.random()>.5?1:-1)}}(4294967296*(r||e.random()));r=987654071*o(),n.push(4294967296*o()|0)}return new a.init(n,t)}}),s=n.enc={},l=s.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i++){var o=t[i>>>2]>>>24-i%4*8&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new a.init(r,t/2)}},u=s.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i++){var o=t[i>>>2]>>>24-i%4*8&255;n.push(String.fromCharCode(o))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new a.init(r,t)}},c=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},p=i.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=c.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var r=this._data,n=r.words,i=r.sigBytes,o=this.blockSize,s=4*o,l=i/s;l=t?e.ceil(l):e.max((0|l)-this._minBufferSize,0);var u=l*o,c=e.min(4*u,i);if(u){for(var p=0;p<u;p+=o)this._doProcessBlock(n,p);var d=n.splice(0,u);r.sigBytes-=c}return new a.init(d,c)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),d=(i.Hasher=p.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new d.HMAC.init(e,r).finalize(t)}}}),n.algo={});return n}(Math);return e})},function(e,t,r){"use strict";function n(e){if(t.isArray(e)&&e.length){var r=e.slice(0,-1),n=e.slice(-1);return!(r.filter(i.not(t.isString)).length||n.filter(i.not(t.isFunction)).length)}return t.isFunction(e)}Object.defineProperty(t,"__esModule",{value:!0});var i=r(6),o=r(136),a=Object.prototype.toString,s=function(e){return function(t){return typeof t===e}};t.isUndefined=s("undefined"),t.isDefined=i.not(t.isUndefined),t.isNull=function(e){return null===e},t.isNullOrUndefined=i.or(t.isNull,t.isUndefined),t.isFunction=s("function"),t.isNumber=s("number"),t.isString=s("string"),t.isObject=function(e){return null!==e&&"object"==typeof e},t.isArray=Array.isArray,t.isDate=function(e){return"[object Date]"===a.call(e)},t.isRegExp=function(e){return"[object RegExp]"===a.call(e)},t.isState=o.StateObject.isState,t.isInjectable=n,t.isPromise=i.and(t.isObject,i.pipe(i.prop("then"),t.isFunction))},function(e,t,r){"use strict";function n(e){function t(r){return r.length>=n?e.apply(null,r):function(){return t(r.concat([].slice.apply(arguments)))}}var r=[].slice.apply(arguments,[1]),n=e.length;return t(r)}function i(){var e=arguments,t=e.length-1;return function(){for(var r=t,n=e[t].apply(this,arguments);r--;)n=e[r].call(this,n);return n}}function o(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i.apply(null,[].slice.call(arguments).reverse())}function a(e,t){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return e.apply(null,r)&&t.apply(null,r)}}function s(e,t){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return e.apply(null,r)||t.apply(null,r)}}function l(e,t){return function(r){return r[e].apply(r,t)}}function u(e){return function(t){for(var r=0;r<e.length;r++)if(e[r][0](t))return e[r][1](t)}}Object.defineProperty(t,"__esModule",{value:!0}),t.curry=n,t.compose=i,t.pipe=o,t.prop=function(e){return function(t){return t&&t[e]}},t.propEq=n(function(e,t,r){return r&&r[e]===t}),t.parse=function(e){return o.apply(null,e.split(".").map(t.prop))},t.not=function(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return!e.apply(null,t)}},t.and=a,t.or=s,t.all=function(e){return function(t){return t.reduce(function(t,r){return t&&!!e(r)},!0)}},t.any=function(e){return function(t){return t.reduce(function(t,r){return t||!!e(r)},!1)}},t.is=function(e){return function(t){return null!=t&&t.constructor===e||t instanceof e}},t.eq=function(e){return function(t){return e===t}},t.val=function(e){return function(){return e}},t.invoke=l,t.pattern=u},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ONodeSet=t.NodeSet=t.EONodeMap=t.ENodeMap=t.GEOVOCAB=t.MADS=t.GETTY=t.CIDOC=t.XMLSchema=t.RDF=t.OWL=t.FOAF=t.DCTerms=t.VOID=t.SKOS=t.SD=t.FIBRA=t.DataFactory=t.Graph=t.Triple=t.Quad=t.Literal=t.BlankNode=t.NamedNode=t.Variable=t.UNDEF=t.DefaultGraph=t.NodeFromNode=t.CNode=void 0;var i=r(15),o=n(i),a=r(18),s=n(a),l=r(19),u=n(l),c=r(1),p=n(c),d=r(2),f=n(d),h=r(43),g=r(32),v=t.CNode=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;(0,p.default)(this,e),this.value=t,this.termType=r,this.language=n,this.datatype=i}return(0,f.default)(e,[{key:"toCanonical",value:function(){switch(this.termType){case"NamedNode":return"<"+this.value+">";case"BlankNode":return"_:"+this.value;case"Literal":return h.SparqlService.stringToSPARQLString(this.value)+(this.language?"@"+this.language:!this.datatype||O.langString.equals(this.datatype)||P.string.equals(this.datatype)?"":"^^"+this.datatype.toCanonical());case"Variable":return"?"+this.value;case"DefaultGraph":return"";case"UNDEF":return"UNDEF";default:throw"Unknown term type "+this}}},{key:"equals",value:function(e){return this.termType===e.termType&&this.value===e.value&&("Literal"!==this.termType||this.language===e.language&&this.datatype===e.datatype)}}]),e}(),m=(t.NodeFromNode=function(e){function t(e){return(0,p.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e.value,e.termType,e.language,e.datatype))}return(0,u.default)(t,e),t}(v),t.DefaultGraph=function(e){function t(){return(0,p.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"","DefaultGraph"))}return(0,u.default)(t,e),(0,f.default)(t,[{key:"toCanonical",value:function(){return""}},{key:"equals",value:function(e){return"DefaultGraph"===e.termType}}]),t}(v));m.instance=new m;var y=t.UNDEF=function(e){function t(){return(0,p.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"","UNDEF"))}return(0,u.default)(t,e),(0,f.default)(t,[{key:"toCanonical",value:function(){return""}},{key:"equals",value:function(e){return"UNDEF"===e.termType}}]),t}(v);y.instance=new y;var b=t.Variable=function(e){function t(e){return(0,p.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,"Variable"))}return(0,u.default)(t,e),(0,f.default)(t,[{key:"toCanonical",value:function(){return"?"+this.value}}]),t}(v),E=t.NamedNode=function(e){function t(e){return(0,p.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,"NamedNode"))}return(0,u.default)(t,e),(0,f.default)(t,[{key:"toCanonical",value:function(){return"<"+this.value+">"}}]),t}(v),x=t.BlankNode=function(e){function t(e){return(0,p.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,"BlankNode"))}return(0,u.default)(t,e),(0,f.default)(t,[{key:"toCanonical",value:function(){return"?"+this.value}}]),t}(v),S=t.Literal=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments[2];return(0,p.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,"Literal",r,n||(r?O.langString:P.string)))}return(0,u.default)(t,e),t}(v),C=t.Quad=function(){function e(t,r,n,i){(0,p.default)(this,e),this.subject=t,this.predicate=r,this.object=n,this.graph=i}return(0,f.default)(e,[{key:"toCanonical",value:function(){return this.subject.toCanonical()+" "+this.predicate.toCanonical()+" "+this.object.toCanonical()+("DefaultGraph"===this.graph.termType?"":" "+this.graph.toCanonical())}},{key:"equals",value:function(e){return this.subject.equals(e.subject)&&this.predicate.equals(e.predicate)&&this.object.equals(e.object)&&this.graph.equals(e.graph)}}]),e}(),w=t.Triple=function(){function e(t,r,n){(0,p.default)(this,e),this.subject=t,this.predicate=r,this.object=n,this.graph=m.instance}return(0,f.default)(e,[{key:"toCanonical",value:function(){return this.subject.toCanonical()+" "+this.predicate.toCanonical()+" "+this.object.toCanonical()}},{key:"equals",value:function(e){return this.subject.equals(e.subject)&&this.predicate.equals(e.predicate)&&this.object.equals(e.object)&&this.graph.equals(e.graph)}}]),e}(),T=(t.Graph=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];(0,p.default)(this,e),this.graph=t,this.triples=r},t.DataFactory=function(){function e(){(0,p.default)(this,e),this.nextBlankNodeId=0}return(0,f.default)(e,[{key:"nodeFromBinding",value:function(e){var t=new v(e.value,"literal"===e.type?"Literal":"uri"===e.type?"NamedNode":"BlankNode");return"literal"===e.type&&(t.language=e["xml:lang"]?e["xml:lang"]:"",t.datatype=e.datatype?new E(e.datatype):""!==t.language?O.langString:P.string),t}},{key:"nodeFromNode",value:function(e){return"Literal"===e.termType?new S(e.value,e.language,e.datatype):new v(e.value,e.termType)}},{key:"nodeFromCanonicalRepresentation",value:function(e){if(0===e.indexOf("<"))return new E(e.substring(1,e.length-1));if(0===e.indexOf("_:"))return new x(e.substring(2));var t=e.substring(1,e.lastIndexOf('"'));return e.lastIndexOf("@")===e.lastIndexOf('"')+1?new S(t,e.substring(e.lastIndexOf("@"))):e.lastIndexOf("^^<")===e.lastIndexOf('"')+1?new S(t,"",new E(e.substring(e.lastIndexOf("^^<"),e.length-1))):new S(t)}},{key:"namedNode",value:function(e){return new E(e)}},{key:"blankNode",value:function(e){return new x(e||"b"+ ++this.nextBlankNodeId)}},{key:"literal",value:function(e,t){return"string"==typeof t?new S(e,t):new S(e,void 0,t)}},{key:"variable",value:function(e){return new b(e)}},{key:"defaultGraph",value:function(){return m.instance}},{key:"triple",value:function(e,t,r){return new w(e,t,r)}},{key:"quad",value:function(e,t,r,n){return new C(e,t,r,n||m.instance)}}],[{key:"nodeFromBinding",value:function(t){return e.instance.nodeFromBinding(t)}},{key:"nodeFromNode",value:function(t){return e.instance.nodeFromNode(t)}},{key:"nodeFromCanonicalRepresentation",value:function(t){return e.instance.nodeFromCanonicalRepresentation(t)}},{key:"namedNode",value:function(t){return e.instance.namedNode(t)}},{key:"blankNode",value:function(t){return e.instance.blankNode(t)}},{key:"literal",value:function(t,r){return e.instance.literal(t,r)}},{key:"variable",value:function(t){return e.instance.variable(t)}},{key:"defaultGraph",value:function(){return e.instance.defaultGraph()}},{key:"triple",value:function(t,r,n){return e.instance.triple(t,r,n)}},{key:"quad",value:function(t,r,n,i){return e.instance.quad(t,r,n,i)}}]),e}());T.instance=new T;var A=t.FIBRA=function e(){(0,p.default)(this,e)};A.ns="http://hdlab.stanford.edu/fibra/ontology#",A.Project=new E(A.ns+"Project"),A.graph=new E(A.ns+"graph"),A.qualifiedAssertion=new E(A.ns+"qualifiedAssertion"),A.order=new E(A.ns+"order"),A.schemaNS=new E(A.ns+"schemaNS"),A.instanceNS=new E(A.ns+"instanceNS"),A.updateEndpoint=new E(A.ns+"updateEndpoint"),A.configuration=new E(A.ns+"configuration"),A.configurationReference=new E(A.ns+"configurationReference"),A.schema=new E(A.ns+"schema"),A.schemaReference=new E(A.ns+"schemaReference"),A.autocompletionQuery=new E(A.ns+"autocompletionQuery"),A.propertyQuery=new E(A.ns+"propertyQuery"),A.classQuery=new E(A.ns+"classQuery"),A.itemQuery=new E(A.ns+"itemQuery"),A.deleteItemQuery=new E(A.ns+"deleteItemQuery"),A.RemoteEndpointConfiguration=new E(A.ns+"RemoteEndpointConfiguration"),A.PrimaryEndpointConfiguration=new E(A.ns+"PrimaryEndpointConfiguration"),A.AuthorityEndpointConfiguration=new E(A.ns+"AuthorityEndpointConfiguration"),A.ArchiveEndpointConfiguration=new E(A.ns+"ArchiveEndpointConfiguration"),A.Schema=new E(A.ns+"Schema");var I=t.SD=function e(){(0,p.default)(this,e)};I.ns="http://www.w3.org/ns/sparql-service-description#",I._name=new E(I.ns+"name");var L=t.SKOS=function e(){(0,p.default)(this,e)};L.ns="http://www.w3.org/2004/02/skos/core#",L.prefLabel=new E(L.ns+"prefLabel"),L.altLabel=new E(L.ns+"altLabel"),L.related=new E(L.ns+"related");var N=t.VOID=function e(){(0,p.default)(this,e)};N.ns="http://rdfs.org/ns/void#",N.sparqlEndpoint=new E(N.ns+"sparqlEndpoint");var R=t.DCTerms=function e(){(0,p.default)(this,e)};R.ns="http://purl.org/dc/terms/",R.rightsHolder=new E(R.ns+"rightsHolder"),R.description=new E(R.ns+"description");var _=t.FOAF=function e(){(0,p.default)(this,e)};_.ns="http://xmlns.com/foaf/0.1/",_.homepage=new E(_.ns+"homepage");var k=t.OWL=function e(){(0,p.default)(this,e)};k.ns="http://www.w3.org/2002/07/owl#",k.sameAs=new E(k.ns+"sameAs"),k.Thing=new E(k.ns+"Thing"),k.Class=new E(k.ns+"Class");var O=t.RDF=function e(){(0,p.default)(this,e)};O.ns="http://www.w3.org/1999/02/22-rdf-syntax-ns#",O.type=new E(O.ns+"type"),O.langString=new E(O.ns+"langString"),O.Triple=new E(O.ns+"Triple"),O.subject=new E(O.ns+"subject"),O.predicate=new E(O.ns+"predicate"),O.object=new E(O.ns+"object"),O.value=new E(O.ns+"value");var P=t.XMLSchema=function e(){(0,p.default)(this,e)};P.ns="http://www.w3.org/2001/XMLSchema#",P.string=new E(P.ns+"string"),P.dateTime=new E(P.ns+"dateTime");var D=t.CIDOC=function e(){(0,p.default)(this,e)};D.ns="http://www.cidoc-crm.org/cidoc-crm/",D.Person=new E(D.ns+"E21_Person"),D.Place=new E(D.ns+"E53_Place"),D.Group=new E(D.ns+"E74_Group");var F=t.GETTY=function e(){(0,p.default)(this,e)};F.ns="http://vocab.getty.edu/ontology#",F.AdminPlaceConcept=new E(F.ns+"AdminPlaceConcept"),F.PhysicalPlaceConcept=new E(F.ns+"PhysicalPlaceConcept"),F.PhysAdminPlaceConcept=new E(F.ns+"PhysAdminPlaceConcept"),F.PersonConcept=new E(F.ns+"PersonConcept"),F.GroupConcept=new E(F.ns+"GroupConcept");var M=t.MADS=function e(){(0,p.default)(this,e)};M.ns="http://www.loc.gov/mads/rdf/v1#",M.CorporateName=new E(M.ns+"CorporateName"),M.PersonalName=new E(M.ns+"PersonalName"),M.NameTitle=new E(M.ns+"NameTitle"),M.Geographic=new E(M.ns+"Geographic");var j=t.GEOVOCAB=function e(){(0,p.default)(this,e)};j.ns="http://geovocab.org/spatial#",j.Feature=new E(j.ns+"Feature");var $=t.ENodeMap=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return{}},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new g.EMap;(0,p.default)(this,e),this.create=t,this.map=r}return(0,f.default)(e,[{key:"goc",value:function(e,t){return this.has(e)||this.set(e,t?t(e):this.create(e)),this.get(e)}},{key:"get",value:function(e){return this.map.get(e.toCanonical())}},{key:"remove",value:function(e){return this.map.remove(e.toCanonical())}},{key:"each",value:function(e){var t=this;this.map.each(function(r,n,i){return e(r,T.instance.nodeFromCanonicalRepresentation(n),t)})}},{key:"has",value:function(e){return this.map.has(e.toCanonical())}},{key:"set",value:function(e,t){return this.map.set(e.toCanonical(),t),this}},{key:"values",value:function(){return this.map.values()}},{key:"keys",value:function(){return this.map.keys().map(function(e){return T.instance.nodeFromCanonicalRepresentation(e)})}},{key:"entries",value:function(){return this.map.entries().map(function(e){return{key:T.instance.nodeFromCanonicalRepresentation(e.key),value:e.value}})}},{key:"clear",value:function(){return this.map.clear(),this}},{key:"size",get:function(){return this.map.size()}}]),e}(),G=(t.EONodeMap=function(e){function t(e){return(0,p.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,new g.EOMap))}return(0,u.default)(t,e),t}($),t.NodeSet=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new g.EMap;(0,p.default)(this,e),this.m=new $(void 0,t)}return(0,f.default)(e,[{key:"add",value:function(e){return this.m.set(e,e),this}},{key:"adda",value:function(e){var t=this;return e.forEach(function(e){return t.add(e)}),this}},{key:"adds",value:function(e){var t=this;return e.each(function(e){return t.add(e)}),this}},{key:"has",value:function(e){return this.m.has(e)}},{key:"get",value:function(e){return this.m.get(e)}},{key:"clear",value:function(){return this.m.clear(),this}},{key:"remove",value:function(e){return this.m.remove(e)}},{key:"values",value:function(){return this.m.values()}},{key:"each",value:function(e){var t=this;this.m.each(function(r,n,i){return e(r,r,t)})}},{key:"size",get:function(){return this.m.size}}]),e}());t.ONodeSet=function(e){function t(){return(0,p.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,new g.EOMap))}return(0,u.default)(t,e),t}(G)},function(e,t,r){"use strict";function n(e,t){if(1===arguments.length){for(var r=e[0],i=1;i<e.length;i++)r=n(r,e[i]);return r}for(var o in t)if("class"===o){var a=e[o]||[];e[o]=(Array.isArray(a)?a:[a]).concat(t[o]||[])}else if("style"===o){var a=s(e[o]),l=s(t[o]);e[o]=a+l}else e[o]=t[o];return e}function i(e,t){for(var r,n="",i="",o=Array.isArray(t),s=0;s<e.length;s++)(r=a(e[s]))&&(o&&t[s]&&(r=c(r)),n=n+i+r,i=" ");return n}function o(e){var t="",r="";for(var n in e)n&&e[n]&&d.call(e,n)&&(t=t+r+n,r=" ");return t}function a(e,t){return Array.isArray(e)?i(e,t):e&&"object"==typeof e?o(e):e||""}function s(e){if(!e)return"";if("object"==typeof e){var t="";for(var r in e)d.call(e,r)&&(t=t+r+":"+e[r]+";");return t}return e+="",";"!==e[e.length-1]?e+";":e}function l(e,t,r,n){return!1!==t&&null!=t&&(t||"class"!==e&&"style"!==e)?!0===t?" "+(n?e:e+'="'+e+'"'):("function"==typeof t.toJSON&&(t=t.toJSON()),"string"==typeof t||(t=JSON.stringify(t),r||-1===t.indexOf('"'))?(r&&(t=c(t))," "+e+'="'+t+'"'):" "+e+"='"+t.replace(/'/g,"&#39;")+"'"):""}function u(e,t){var r="";for(var n in e)if(d.call(e,n)){var i=e[n];if("class"===n){i=a(i),r=l(n,i,!1,t)+r;continue}"style"===n&&(i=s(i)),r+=l(n,i,!1,t)}return r}function c(e){var t=""+e,r=f.exec(t);if(!r)return e;var n,i,o,a="";for(n=r.index,i=0;n<t.length;n++){switch(t.charCodeAt(n)){case 34:o="&quot;";break;case 38:o="&amp;";break;case 60:o="&lt;";break;case 62:o="&gt;";break;default:continue}i!==n&&(a+=t.substring(i,n)),i=n+1,a+=o}return i!==n?a+t.substring(i,n):a}function p(e,t,n,i){if(!(e instanceof Error))throw e;if(!("undefined"==typeof window&&t||i))throw e.message+=" on line "+n,e;try{i=i||r(417).readFileSync(t,"utf8")}catch(t){p(e,null,n)}var o=3,a=i.split("\n"),s=Math.max(n-o,0),l=Math.min(a.length,n+o),o=a.slice(s,l).map(function(e,t){var r=t+s+1;return(r==n?"  > ":"    ")+r+"| "+e}).join("\n");throw e.path=t,e.message=(t||"Pug")+":"+n+"\n"+o+"\n\n"+e.message,e}var d=Object.prototype.hasOwnProperty;t.merge=n,t.classes=a,t.style=s,t.attr=l,t.attrs=u;var f=/["&<>]/;t.escape=c,t.rethrow=p},function(e,t){var r=e.exports={version:"2.5.1"};"number"==typeof __e&&(__e=r)},function(module,exports,__webpack_require__){(function(process){var slowNextTick=function(){return void 0!==process&&process.nextTick?process.nextTick:"undefined"!=typeof window&&window.setImmediate?window.setImmediate:function(e){setTimeout(e,0)}}(),spin=0,yieldFrequency=100,nextTick=function(e){spin++,spin<yieldFrequency?e():(spin=0,slowNextTick(e))},hashTerm=function(e){try{if(null==e)return"";if("uri"===e.token)return"u"+e.value;if("blank"===e.token)return"b"+e.value;if("literal"===e.token){var t="l"+e.value;return t+=e.type||"",t+=e.lang||""}}catch(t){if("object"==typeof e){var r="";for(p in e)r=r+p+e[p];return r}return e}},lexicalFormBaseUri=function(e,t){var r=null;if(t=t||{},null==e.value){var n=e.prefix,i=e.suffix,o=t.namespaces[n];r=null!=o?o+i:n+":"+i}else r=e.value;return null===r?null:(-1==r.indexOf(":")&&(r=(t.base||"")+r),r)};parseISO8601=function(e){return Date.parse(e)},Date.prototype.toISOString||function(){function e(e){return e<10?"0"+e:e}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"."+(this.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}}(),iso8601=function(e){return e.toISOString()},compareDateComponents=function(e,t){var r=parseISO8601(e),n=parseISO8601(t);return r==n?0:r<n?-1:1},lexicalFormLiteral=function(e,t){var r=e.value,n=e.lang,i=e.type,o=null;if(null!=r&&null!=i&&"string"!=typeof i){var a=i.value;if(null==a){var s=i.prefix,l=i.suffix,u=t.namespaces[s];e.type=u+l,a=u+l}o=-1!=a.indexOf("hexBinary")?'"'+e.value.toLowerCase()+'"^^<'+a+">":'"'+e.value+'"^^<'+a+">"}else o=null==n&&null==i?'"'+r+'"':null==i?'"'+r+'"@'+n:-1!=i.indexOf("hexBinary")?'"'+e.value.toLowerCase()+'"^^<'+i+">":'"'+e.value+'"^^<'+i+">";return o},normalizeUnicodeLiterals=function(string){for(var escapedUnicode=string.match(/\\u[0-9abcdefABCDEF]{4,4}/g)||[],dups={},i=0;i<escapedUnicode.length;i++)null==dups[escapedUnicode[i]]&&(dups[escapedUnicode[i]]=!0,string=string.replace(new RegExp("\\"+escapedUnicode[i],"g"),eval("'"+escapedUnicode[i]+"'")));return string},registerIndexedDB=function(e){if("undefined"==typeof window&&void 0!==process&&!1===process.browser){var t=_dereq_("sqlite3"),r=_dereq_("indexeddb-js"),n=new t.Database(":memory:"),i=r.makeScope("sqlite3",n);e.indexedDB=i.indexedDB,e.IDBKeyRange=i.IDBKeyRange}else{var o;o="undefined"==typeof window?self:window,o.indexedDB=o.indexedDB||o.mozIndexedDB||o.webkitIndexedDB||o.msIndexedDB,o.IDBKeyRange=o.IDBKeyRange||o.webkitIDBKeyRange||o.msIDBKeyRange,o.indexedDB?(e.indexedDB=o.indexedDB,e.IDBKeyRange=o.IDBKeyRange):console.log("The browser does not support IndexDB.")}},guid=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},hashTerm=function(e){try{if(null==e)return"";if("uri"===e.token)return"u"+e.value;if("blank"===e.token)return"b"+e.value;if("literal"===e.token){var t="l"+e.value;return t+=e.type||"",t+=e.lang||""}}catch(t){if("object"==typeof e){var r="";for(p in e)r=r+p+e[p];return r}return e}};var reject=function(e,t){for(var r=[],n=0;n<e.length;n++)t(e[n])&&r.push(e[n]);return r},include=function(e,t){for(var r=0;r<e.length;r++)if(e[r]===t)return!0;return!1},each=function(e,t){if(e.forEach)e.forEach(t);else for(var r=0;r<e.length;r++)t(e[r])},map=function(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r[n]=t(e[n]);return r},keys=function(e){var t=[];for(var r in e)t.push(r);return t},values=function(e){var t=[];for(var r in e)t.push(e[r]);return t},size=function(e){if(e.length)return e.length;var t=0;for(var r in e)t++;return t};clone=function(e){return JSON.parse(JSON.stringify(e))};var isObject=function(e){var t=typeof e;return"function"==t||e&&"object"==t||!1},create=function(){function e(){}return function(t){if(isObject(t)){e.prototype=t;var r=new e;e.prototype=null}return r||void 0}}(),whilst=function(e,t,r){e()?t(function(n){if(n)return r(n);whilst(e,t,r)}):r()},eachSeries=function(e,t,r){if(r=r||function(){},!e.length)return r();var n=0,i=function(){t(e[n],function(t){t?(r(t),r=function(){}):(n+=1,n>=e.length?r():nextTick(i))})};i()},eachParallel=function(e,t,r){if(r=r||function(){},!e.length)return r();for(var n=!1,i=0,o=function(t){if(t)throw n=!0,new Error(t);n||++i===e.length&&r()},a=0;a<e.length;a++)!function(e,t,r,n){nextTick(function(){try{n(e[t],function(){r()})}catch(e){r(e)}})}(e,a,o,t)},reduce=function(e,t,r,n){eachSeries(e,function(e,n){r(t,e,function(e,r){t=r,n(e)})},function(e){n(e,t)})},seq=function(){var e=arguments;return function(){var t=this,r=Array.prototype.slice.call(arguments),n=r.pop();reduce(e,r,function(e,r,n){r.apply(t,e.concat([function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);n(e,t)}]))},function(e,r){n.apply(t,[e].concat(r))})}},isWorker=function(){return(void 0===process||!0===process.browser)&&"undefined"==typeof window};module.exports={isWorker:isWorker,nextTick:nextTick,hasTerm:hashTerm,lexicalFormBaseUri:lexicalFormBaseUri,parseISO8601:parseISO8601,compareDateComponents:compareDateComponents,iso8601:iso8601,normalizeUnicodeLiterals:normalizeUnicodeLiterals,lexicalFormLiteral:lexicalFormLiteral,registerIndexedDB:registerIndexedDB,guid:guid,hashTerm:hashTerm,keys:keys,values:values,size:size,map:map,each:each,forEach:each,include:include,reject:reject,remove:reject,clone:clone,create:create,whilst:whilst,eachSeries:eachSeries,eachParallel:eachParallel,seq:seq,yieldFrequency:function(e){yieldFrequency=e}}}).call(exports,__webpack_require__(28))},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){!function(n,i,o){e.exports=t=i(r(4),r(49))}(0,function(e){e.lib.Cipher||function(t){var r=e,n=r.lib,i=n.Base,o=n.WordArray,a=n.BufferedBlockAlgorithm,s=r.enc,l=(s.Utf8,s.Base64),u=r.algo,c=u.EvpKDF,p=n.Cipher=a.extend({cfg:i.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,r){this.cfg=this.cfg.extend(r),this._xformMode=e,this._key=t,this.reset()},reset:function(){a.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?C:E}return function(t){return{encrypt:function(r,n,i){return e(n).encrypt(t,r,n,i)},decrypt:function(r,n,i){return e(n).decrypt(t,r,n,i)}}}}()}),d=(n.StreamCipher=p.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),r.mode={}),f=n.BlockCipherMode=i.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),h=d.CBC=function(){function e(e,r,n){var i=this._iv;if(i){var o=i;this._iv=t}else var o=this._prevBlock;for(var a=0;a<n;a++)e[r+a]^=o[a]}var r=f.extend();return r.Encryptor=r.extend({processBlock:function(t,r){var n=this._cipher,i=n.blockSize;e.call(this,t,r,i),n.encryptBlock(t,r),this._prevBlock=t.slice(r,r+i)}}),r.Decryptor=r.extend({processBlock:function(t,r){var n=this._cipher,i=n.blockSize,o=t.slice(r,r+i);n.decryptBlock(t,r),e.call(this,t,r,i),this._prevBlock=o}}),r}(),g=r.pad={},v=g.Pkcs7={pad:function(e,t){for(var r=4*t,n=r-e.sigBytes%r,i=n<<24|n<<16|n<<8|n,a=[],s=0;s<n;s+=4)a.push(i);var l=o.create(a,n);e.concat(l)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},m=(n.BlockCipher=p.extend({cfg:p.cfg.extend({mode:h,padding:v}),reset:function(){p.reset.call(this);var e=this.cfg,t=e.iv,r=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=r.createEncryptor;else{var n=r.createDecryptor;this._minBufferSize=1}this._mode&&this._mode.__creator==n?this._mode.init(this,t&&t.words):(this._mode=n.call(r,this,t&&t.words),this._mode.__creator=n)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else{var t=this._process(!0);e.unpad(t)}return t},blockSize:4}),n.CipherParams=i.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),y=r.format={},b=y.OpenSSL={stringify:function(e){var t=e.ciphertext,r=e.salt;if(r)var n=o.create([1398893684,1701076831]).concat(r).concat(t);else var n=t;return n.toString(l)},parse:function(e){var t=l.parse(e),r=t.words;if(1398893684==r[0]&&1701076831==r[1]){var n=o.create(r.slice(2,4));r.splice(0,4),t.sigBytes-=16}return m.create({ciphertext:t,salt:n})}},E=n.SerializableCipher=i.extend({cfg:i.extend({format:b}),encrypt:function(e,t,r,n){n=this.cfg.extend(n);var i=e.createEncryptor(r,n),o=i.finalize(t),a=i.cfg;return m.create({ciphertext:o,key:r,iv:a.iv,algorithm:e,mode:a.mode,padding:a.padding,blockSize:e.blockSize,formatter:n.format})},decrypt:function(e,t,r,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),e.createDecryptor(r,n).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),x=r.kdf={},S=x.OpenSSL={execute:function(e,t,r,n){n||(n=o.random(8));var i=c.create({keySize:t+r}).compute(e,n),a=o.create(i.words.slice(t),4*r);return i.sigBytes=4*t,m.create({key:i,iv:a,salt:n})}},C=n.PasswordBasedCipher=E.extend({cfg:E.cfg.extend({kdf:S}),encrypt:function(e,t,r,n){n=this.cfg.extend(n);var i=n.kdf.execute(r,e.keySize,e.ivSize);n.iv=i.iv;var o=E.encrypt.call(this,e,t,i.key,n);return o.mixIn(i),o},decrypt:function(e,t,r,n){n=this.cfg.extend(n),t=this._parse(t,n.format);var i=n.kdf.execute(r,e.keySize,e.ivSize,t.salt);return n.iv=i.iv,E.decrypt.call(this,e,t,i.key,n)}})}()})},function(e,t,r){var n=r(17),i=r(9),o=r(29),a=r(31),s=function(e,t,r){var l,u,c,p=e&s.F,d=e&s.G,f=e&s.S,h=e&s.P,g=e&s.B,v=e&s.W,m=d?i:i[t]||(i[t]={}),y=m.prototype,b=d?n:f?n[t]:(n[t]||{}).prototype;d&&(r=t);for(l in r)(u=!p&&b&&void 0!==b[l])&&l in m||(c=u?b[l]:r[l],m[l]=d&&"function"!=typeof b[l]?r[l]:g&&u?o(c,n):v&&b[l]==c?function(e){var t=function(t,r,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,n)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(c):h&&"function"==typeof c?o(Function.call,c):c,h&&((m.virtual||(m.virtual={}))[l]=c,e&s.R&&y&&!y[l]&&a(y,l,c)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,t,r){var n=r(117)("wks"),i=r(82),o=r(17).Symbol,a="function"==typeof o;(e.exports=function(e){return n[e]||(n[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=n},function(e,t,r){e.exports={default:r(287),__esModule:!0}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.notImplemented=function(e){return function(){throw new Error(e+"(): No coreservices implementation for UI-Router is loaded.")}};var n={$q:void 0,$injector:void 0};t.services=n},function(e,t){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(e,t,r){"use strict";t.__esModule=!0;var n=r(88),i=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,i.default)(t))&&"function"!=typeof t?e:t}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=r(297),o=n(i),a=r(301),s=n(a),l=r(88),u=n(l);t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,u.default)(t)));e.prototype=(0,s.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(o.default?(0,o.default)(e,t):e.__proto__=t)}},function(e,t,r){var n,i;/*!
 * jQuery JavaScript Library v2.2.4
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2016-05-20T17:23Z
 */
!function(t,r){"object"==typeof e&&"object"==typeof e.exports?e.exports=t.document?r(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return r(e)}:r(t)}("undefined"!=typeof window?window:this,function(r,o){function a(e){var t=!!e&&"length"in e&&e.length,r=le.type(e);return"function"!==r&&!le.isWindow(e)&&("array"===r||0===t||"number"==typeof t&&t>0&&t-1 in e)}function s(e,t,r){if(le.isFunction(t))return le.grep(e,function(e,n){return!!t.call(e,n,e)!==r});if(t.nodeType)return le.grep(e,function(e){return e===t!==r});if("string"==typeof t){if(ye.test(t))return le.filter(t,e,r);t=le.filter(t,e)}return le.grep(e,function(e){return ne.call(t,e)>-1!==r})}function l(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function u(e){var t={};return le.each(e.match(Ce)||[],function(e,r){t[r]=!0}),t}function c(){Z.removeEventListener("DOMContentLoaded",c),r.removeEventListener("load",c),le.ready()}function p(){this.expando=le.expando+p.uid++}function d(e,t,r){var n;if(void 0===r&&1===e.nodeType)if(n="data-"+t.replace(Re,"-$&").toLowerCase(),"string"==typeof(r=e.getAttribute(n))){try{r="true"===r||"false"!==r&&("null"===r?null:+r+""===r?+r:Ne.test(r)?le.parseJSON(r):r)}catch(e){}Le.set(e,t,r)}else r=void 0;return r}function f(e,t,r,n){var i,o=1,a=20,s=n?function(){return n.cur()}:function(){return le.css(e,t,"")},l=s(),u=r&&r[3]||(le.cssNumber[t]?"":"px"),c=(le.cssNumber[t]||"px"!==u&&+l)&&ke.exec(le.css(e,t));if(c&&c[3]!==u){u=u||c[3],r=r||[],c=+l||1;do{o=o||".5",c/=o,le.style(e,t,c+u)}while(o!==(o=s()/l)&&1!==o&&--a)}return r&&(c=+c||+l||0,i=r[1]?c+(r[1]+1)*r[2]:+r[2],n&&(n.unit=u,n.start=c,n.end=i)),i}function h(e,t){var r=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&le.nodeName(e,t)?le.merge([e],r):r}function g(e,t){for(var r=0,n=e.length;r<n;r++)Ie.set(e[r],"globalEval",!t||Ie.get(t[r],"globalEval"))}function v(e,t,r,n,i){for(var o,a,s,l,u,c,p=t.createDocumentFragment(),d=[],f=0,v=e.length;f<v;f++)if((o=e[f])||0===o)if("object"===le.type(o))le.merge(d,o.nodeType?[o]:o);else if($e.test(o)){for(a=a||p.appendChild(t.createElement("div")),s=(Fe.exec(o)||["",""])[1].toLowerCase(),l=je[s]||je._default,a.innerHTML=l[1]+le.htmlPrefilter(o)+l[2],c=l[0];c--;)a=a.lastChild;le.merge(d,a.childNodes),a=p.firstChild,a.textContent=""}else d.push(t.createTextNode(o));for(p.textContent="",f=0;o=d[f++];)if(n&&le.inArray(o,n)>-1)i&&i.push(o);else if(u=le.contains(o.ownerDocument,o),a=h(p.appendChild(o),"script"),u&&g(a),r)for(c=0;o=a[c++];)Me.test(o.type||"")&&r.push(o);return p}function m(){return!0}function y(){return!1}function b(){try{return Z.activeElement}catch(e){}}function E(e,t,r,n,i,o){var a,s;if("object"==typeof t){"string"!=typeof r&&(n=n||r,r=void 0);for(s in t)E(e,s,r,n,t[s],o);return e}if(null==n&&null==i?(i=r,n=r=void 0):null==i&&("string"==typeof r?(i=n,n=void 0):(i=n,n=r,r=void 0)),!1===i)i=y;else if(!i)return e;return 1===o&&(a=i,i=function(e){return le().off(e),a.apply(this,arguments)},i.guid=a.guid||(a.guid=le.guid++)),e.each(function(){le.event.add(this,t,i,n,r)})}function x(e,t){return le.nodeName(e,"table")&&le.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function S(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function C(e){var t=ze.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function w(e,t){var r,n,i,o,a,s,l,u;if(1===t.nodeType){if(Ie.hasData(e)&&(o=Ie.access(e),a=Ie.set(t,o),u=o.events)){delete a.handle,a.events={};for(i in u)for(r=0,n=u[i].length;r<n;r++)le.event.add(t,i,u[i][r])}Le.hasData(e)&&(s=Le.access(e),l=le.extend({},s),Le.set(t,l))}}function T(e,t){var r=t.nodeName.toLowerCase();"input"===r&&De.test(e.type)?t.checked=e.checked:"input"!==r&&"textarea"!==r||(t.defaultValue=e.defaultValue)}function A(e,t,r,n){t=te.apply([],t);var i,o,a,s,l,u,c=0,p=e.length,d=p-1,f=t[0],g=le.isFunction(f);if(g||p>1&&"string"==typeof f&&!se.checkClone&&qe.test(f))return e.each(function(i){var o=e.eq(i);g&&(t[0]=f.call(this,i,o.html())),A(o,t,r,n)});if(p&&(i=v(t,e[0].ownerDocument,!1,e,n),o=i.firstChild,1===i.childNodes.length&&(i=o),o||n)){for(a=le.map(h(i,"script"),S),s=a.length;c<p;c++)l=i,c!==d&&(l=le.clone(l,!0,!0),s&&le.merge(a,h(l,"script"))),r.call(e[c],l,c);if(s)for(u=a[a.length-1].ownerDocument,le.map(a,C),c=0;c<s;c++)l=a[c],Me.test(l.type||"")&&!Ie.access(l,"globalEval")&&le.contains(u,l)&&(l.src?le._evalUrl&&le._evalUrl(l.src):le.globalEval(l.textContent.replace(Qe,"")))}return e}function I(e,t,r){for(var n,i=t?le.filter(t,e):e,o=0;null!=(n=i[o]);o++)r||1!==n.nodeType||le.cleanData(h(n)),n.parentNode&&(r&&le.contains(n.ownerDocument,n)&&g(h(n,"script")),n.parentNode.removeChild(n));return e}function L(e,t){var r=le(t.createElement(e)).appendTo(t.body),n=le.css(r[0],"display");return r.detach(),n}function N(e){var t=Z,r=Xe[e];return r||(r=L(e,t),"none"!==r&&r||(We=(We||le("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=We[0].contentDocument,t.write(),t.close(),r=L(e,t),We.detach()),Xe[e]=r),r}function R(e,t,r){var n,i,o,a,s=e.style;return r=r||Je(e),a=r?r.getPropertyValue(t)||r[t]:void 0,""!==a&&void 0!==a||le.contains(e.ownerDocument,e)||(a=le.style(e,t)),r&&!se.pixelMarginRight()&&Ke.test(a)&&Ye.test(t)&&(n=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=r.width,s.width=n,s.minWidth=i,s.maxWidth=o),void 0!==a?a+"":a}function _(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function k(e){if(e in ot)return e;for(var t=e[0].toUpperCase()+e.slice(1),r=it.length;r--;)if((e=it[r]+t)in ot)return e}function O(e,t,r){var n=ke.exec(t);return n?Math.max(0,n[2]-(r||0))+(n[3]||"px"):t}function P(e,t,r,n,i){for(var o=r===(n?"border":"content")?4:"width"===t?1:0,a=0;o<4;o+=2)"margin"===r&&(a+=le.css(e,r+Oe[o],!0,i)),n?("content"===r&&(a-=le.css(e,"padding"+Oe[o],!0,i)),"margin"!==r&&(a-=le.css(e,"border"+Oe[o]+"Width",!0,i))):(a+=le.css(e,"padding"+Oe[o],!0,i),"padding"!==r&&(a+=le.css(e,"border"+Oe[o]+"Width",!0,i)));return a}function D(e,t,r){var n=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=Je(e),a="border-box"===le.css(e,"boxSizing",!1,o);if(i<=0||null==i){if(i=R(e,t,o),(i<0||null==i)&&(i=e.style[t]),Ke.test(i))return i;n=a&&(se.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+P(e,t,r||(a?"border":"content"),n,o)+"px"}function F(e,t){for(var r,n,i,o=[],a=0,s=e.length;a<s;a++)n=e[a],n.style&&(o[a]=Ie.get(n,"olddisplay"),r=n.style.display,t?(o[a]||"none"!==r||(n.style.display=""),""===n.style.display&&Pe(n)&&(o[a]=Ie.access(n,"olddisplay",N(n.nodeName)))):(i=Pe(n),"none"===r&&i||Ie.set(n,"olddisplay",i?r:le.css(n,"display"))));for(a=0;a<s;a++)n=e[a],n.style&&(t&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=t?o[a]||"":"none"));return e}function M(e,t,r,n,i){return new M.prototype.init(e,t,r,n,i)}function j(){return r.setTimeout(function(){at=void 0}),at=le.now()}function $(e,t){var r,n=0,i={height:e};for(t=t?1:0;n<4;n+=2-t)r=Oe[n],i["margin"+r]=i["padding"+r]=e;return t&&(i.opacity=i.width=e),i}function G(e,t,r){for(var n,i=(U.tweeners[t]||[]).concat(U.tweeners["*"]),o=0,a=i.length;o<a;o++)if(n=i[o].call(r,t,e))return n}function B(e,t,r){var n,i,o,a,s,l,u,c=this,p={},d=e.style,f=e.nodeType&&Pe(e),h=Ie.get(e,"fxshow");r.queue||(s=le._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,c.always(function(){c.always(function(){s.unqueued--,le.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(r.overflow=[d.overflow,d.overflowX,d.overflowY],u=le.css(e,"display"),"inline"===("none"===u?Ie.get(e,"olddisplay")||N(e.nodeName):u)&&"none"===le.css(e,"float")&&(d.display="inline-block")),r.overflow&&(d.overflow="hidden",c.always(function(){d.overflow=r.overflow[0],d.overflowX=r.overflow[1],d.overflowY=r.overflow[2]}));for(n in t)if(i=t[n],lt.exec(i)){if(delete t[n],o=o||"toggle"===i,i===(f?"hide":"show")){if("show"!==i||!h||void 0===h[n])continue;f=!0}p[n]=h&&h[n]||le.style(e,n)}else u=void 0;if(le.isEmptyObject(p))"inline"===("none"===u?N(e.nodeName):u)&&(d.display=u);else{h?"hidden"in h&&(f=h.hidden):h=Ie.access(e,"fxshow",{}),o&&(h.hidden=!f),f?le(e).show():c.done(function(){le(e).hide()}),c.done(function(){var t;Ie.remove(e,"fxshow");for(t in p)le.style(e,t,p[t])});for(n in p)a=G(f?h[n]:0,n,c),n in h||(h[n]=a.start,f&&(a.end=a.start,a.start="width"===n||"height"===n?1:0))}}function H(e,t){var r,n,i,o,a;for(r in e)if(n=le.camelCase(r),i=t[n],o=e[r],le.isArray(o)&&(i=o[1],o=e[r]=o[0]),r!==n&&(e[n]=o,delete e[r]),(a=le.cssHooks[n])&&"expand"in a){o=a.expand(o),delete e[n];for(r in o)r in e||(e[r]=o[r],t[r]=i)}else t[n]=i}function U(e,t,r){var n,i,o=0,a=U.prefilters.length,s=le.Deferred().always(function(){delete l.elem}),l=function(){if(i)return!1;for(var t=at||j(),r=Math.max(0,u.startTime+u.duration-t),n=r/u.duration||0,o=1-n,a=0,l=u.tweens.length;a<l;a++)u.tweens[a].run(o);return s.notifyWith(e,[u,o,r]),o<1&&l?r:(s.resolveWith(e,[u]),!1)},u=s.promise({elem:e,props:le.extend({},t),opts:le.extend(!0,{specialEasing:{},easing:le.easing._default},r),originalProperties:t,originalOptions:r,startTime:at||j(),duration:r.duration,tweens:[],createTween:function(t,r){var n=le.Tween(e,u.opts,t,r,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(n),n},stop:function(t){var r=0,n=t?u.tweens.length:0;if(i)return this;for(i=!0;r<n;r++)u.tweens[r].run(1);return t?(s.notifyWith(e,[u,1,0]),s.resolveWith(e,[u,t])):s.rejectWith(e,[u,t]),this}}),c=u.props;for(H(c,u.opts.specialEasing);o<a;o++)if(n=U.prefilters[o].call(u,e,c,u.opts))return le.isFunction(n.stop)&&(le._queueHooks(u.elem,u.opts.queue).stop=le.proxy(n.stop,n)),n;return le.map(c,G,u),le.isFunction(u.opts.start)&&u.opts.start.call(e,u),le.fx.timer(le.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function V(e){return e.getAttribute&&e.getAttribute("class")||""}function q(e){return function(t,r){"string"!=typeof t&&(r=t,t="*");var n,i=0,o=t.toLowerCase().match(Ce)||[];if(le.isFunction(r))for(;n=o[i++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(r)):(e[n]=e[n]||[]).push(r)}}function z(e,t,r,n){function i(s){var l;return o[s]=!0,le.each(e[s]||[],function(e,s){var u=s(t,r,n);return"string"!=typeof u||a||o[u]?a?!(l=u):void 0:(t.dataTypes.unshift(u),i(u),!1)}),l}var o={},a=e===Lt;return i(t.dataTypes[0])||!o["*"]&&i("*")}function Q(e,t){var r,n,i=le.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((i[r]?e:n||(n={}))[r]=t[r]);return n&&le.extend(!0,e,n),e}function W(e,t,r){for(var n,i,o,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(i in s)if(s[i]&&s[i].test(n)){l.unshift(i);break}if(l[0]in r)o=l[0];else{for(i in r){if(!l[0]||e.converters[i+" "+l[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==l[0]&&l.unshift(o),r[o]}function X(e,t,r,n){var i,o,a,s,l,u={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)u[a.toLowerCase()]=e.converters[a];for(o=c.shift();o;)if(e.responseFields[o]&&(r[e.responseFields[o]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=u[l+" "+o]||u["* "+o]))for(i in u)if(s=i.split(" "),s[1]===o&&(a=u[l+" "+s[0]]||u["* "+s[0]])){!0===a?a=u[i]:!0!==u[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}function Y(e,t,r,n){var i;if(le.isArray(t))le.each(t,function(t,i){r||kt.test(e)?n(e,i):Y(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,r,n)});else if(r||"object"!==le.type(t))n(e,t);else for(i in t)Y(e+"["+i+"]",t[i],r,n)}function K(e){return le.isWindow(e)?e:9===e.nodeType&&e.defaultView}var J=[],Z=r.document,ee=J.slice,te=J.concat,re=J.push,ne=J.indexOf,ie={},oe=ie.toString,ae=ie.hasOwnProperty,se={},le=function(e,t){return new le.fn.init(e,t)},ue=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ce=/^-ms-/,pe=/-([\da-z])/gi,de=function(e,t){return t.toUpperCase()};le.fn=le.prototype={jquery:"2.2.4",constructor:le,selector:"",length:0,toArray:function(){return ee.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:ee.call(this)},pushStack:function(e){var t=le.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return le.each(this,e)},map:function(e){return this.pushStack(le.map(this,function(t,r){return e.call(t,r,t)}))},slice:function(){return this.pushStack(ee.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,r=+e+(e<0?t:0);return this.pushStack(r>=0&&r<t?[this[r]]:[])},end:function(){return this.prevObject||this.constructor()},push:re,sort:J.sort,splice:J.splice},le.extend=le.fn.extend=function(){var e,t,r,n,i,o,a=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[s]||{},s++),"object"==typeof a||le.isFunction(a)||(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(e=arguments[s]))for(t in e)r=a[t],n=e[t],a!==n&&(u&&n&&(le.isPlainObject(n)||(i=le.isArray(n)))?(i?(i=!1,o=r&&le.isArray(r)?r:[]):o=r&&le.isPlainObject(r)?r:{},a[t]=le.extend(u,o,n)):void 0!==n&&(a[t]=n));return a},le.extend({expando:"jQuery"+("2.2.4"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===le.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=e&&e.toString();return!le.isArray(e)&&t-parseFloat(t)+1>=0},isPlainObject:function(e){var t;if("object"!==le.type(e)||e.nodeType||le.isWindow(e))return!1;if(e.constructor&&!ae.call(e,"constructor")&&!ae.call(e.constructor.prototype||{},"isPrototypeOf"))return!1;for(t in e);return void 0===t||ae.call(e,t)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?ie[oe.call(e)]||"object":typeof e},globalEval:function(e){var t,r=eval;(e=le.trim(e))&&(1===e.indexOf("use strict")?(t=Z.createElement("script"),t.text=e,Z.head.appendChild(t).parentNode.removeChild(t)):r(e))},camelCase:function(e){return e.replace(ce,"ms-").replace(pe,de)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var r,n=0;if(a(e))for(r=e.length;n<r&&!1!==t.call(e[n],n,e[n]);n++);else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},trim:function(e){return null==e?"":(e+"").replace(ue,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(a(Object(e))?le.merge(r,"string"==typeof e?[e]:e):re.call(r,e)),r},inArray:function(e,t,r){return null==t?-1:ne.call(t,e,r)},merge:function(e,t){for(var r=+t.length,n=0,i=e.length;n<r;n++)e[i++]=t[n];return e.length=i,e},grep:function(e,t,r){for(var n=[],i=0,o=e.length,a=!r;i<o;i++)!t(e[i],i)!==a&&n.push(e[i]);return n},map:function(e,t,r){var n,i,o=0,s=[];if(a(e))for(n=e.length;o<n;o++)null!=(i=t(e[o],o,r))&&s.push(i);else for(o in e)null!=(i=t(e[o],o,r))&&s.push(i);return te.apply([],s)},guid:1,proxy:function(e,t){var r,n,i;if("string"==typeof t&&(r=e[t],t=e,e=r),le.isFunction(e))return n=ee.call(arguments,2),i=function(){return e.apply(t||this,n.concat(ee.call(arguments)))},i.guid=e.guid=e.guid||le.guid++,i},now:Date.now,support:se}),"function"==typeof Symbol&&(le.fn[Symbol.iterator]=J[Symbol.iterator]),le.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){ie["[object "+t+"]"]=t.toLowerCase()});var fe=/*!
 * Sizzle CSS Selector Engine v2.2.1
 * http://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2015-10-17
 */
function(e){function t(e,t,r,n){var i,o,a,s,u,p,d,f,h=t&&t.ownerDocument,g=t?t.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==g&&9!==g&&11!==g)return r;if(!n&&((t?t.ownerDocument||t:j)!==R&&N(t),t=t||R,k)){if(11!==g&&(p=ge.exec(e)))if(i=p[1]){if(9===g){if(!(a=t.getElementById(i)))return r;if(a.id===i)return r.push(a),r}else if(h&&(a=h.getElementById(i))&&F(t,a)&&a.id===i)return r.push(a),r}else{if(p[2])return Y.apply(r,t.getElementsByTagName(e)),r;if((i=p[3])&&b.getElementsByClassName&&t.getElementsByClassName)return Y.apply(r,t.getElementsByClassName(i)),r}if(b.qsa&&!U[e+" "]&&(!O||!O.test(e))){if(1!==g)h=t,f=e;else if("object"!==t.nodeName.toLowerCase()){for((s=t.getAttribute("id"))?s=s.replace(me,"\\$&"):t.setAttribute("id",s=M),d=C(e),o=d.length,u=ce.test(s)?"#"+s:"[id='"+s+"']";o--;)d[o]=u+" "+c(d[o]);f=d.join(","),h=ve.test(e)&&l(t.parentNode)||t}if(f)try{return Y.apply(r,h.querySelectorAll(f)),r}catch(e){}finally{s===M&&t.removeAttribute("id")}}}return T(e.replace(oe,"$1"),t,r,n)}function r(){function e(r,n){return t.push(r+" ")>E.cacheLength&&delete e[t.shift()],e[r+" "]=n}var t=[];return e}function n(e){return e[M]=!0,e}function i(e){var t=R.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var r=e.split("|"),n=r.length;n--;)E.attrHandle[r[n]]=t}function a(e,t){var r=t&&e,n=r&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||q)-(~e.sourceIndex||q);if(n)return n;if(r)for(;r=r.nextSibling;)if(r===t)return-1;return e?1:-1}function s(e){return n(function(t){return t=+t,n(function(r,n){for(var i,o=e([],r.length,t),a=o.length;a--;)r[i=o[a]]&&(r[i]=!(n[i]=r[i]))})})}function l(e){return e&&void 0!==e.getElementsByTagName&&e}function u(){}function c(e){for(var t=0,r=e.length,n="";t<r;t++)n+=e[t].value;return n}function p(e,t,r){var n=t.dir,i=r&&"parentNode"===n,o=G++;return t.first?function(t,r,o){for(;t=t[n];)if(1===t.nodeType||i)return e(t,r,o)}:function(t,r,a){var s,l,u,c=[$,o];if(a){for(;t=t[n];)if((1===t.nodeType||i)&&e(t,r,a))return!0}else for(;t=t[n];)if(1===t.nodeType||i){if(u=t[M]||(t[M]={}),l=u[t.uniqueID]||(u[t.uniqueID]={}),(s=l[n])&&s[0]===$&&s[1]===o)return c[2]=s[2];if(l[n]=c,c[2]=e(t,r,a))return!0}}}function d(e){return e.length>1?function(t,r,n){for(var i=e.length;i--;)if(!e[i](t,r,n))return!1;return!0}:e[0]}function f(e,r,n){for(var i=0,o=r.length;i<o;i++)t(e,r[i],n);return n}function h(e,t,r,n,i){for(var o,a=[],s=0,l=e.length,u=null!=t;s<l;s++)(o=e[s])&&(r&&!r(o,n,i)||(a.push(o),u&&t.push(s)));return a}function g(e,t,r,i,o,a){return i&&!i[M]&&(i=g(i)),o&&!o[M]&&(o=g(o,a)),n(function(n,a,s,l){var u,c,p,d=[],g=[],v=a.length,m=n||f(t||"*",s.nodeType?[s]:s,[]),y=!e||!n&&t?m:h(m,d,e,s,l),b=r?o||(n?e:v||i)?[]:a:y;if(r&&r(y,b,s,l),i)for(u=h(b,g),i(u,[],s,l),c=u.length;c--;)(p=u[c])&&(b[g[c]]=!(y[g[c]]=p));if(n){if(o||e){if(o){for(u=[],c=b.length;c--;)(p=b[c])&&u.push(y[c]=p);o(null,b=[],u,l)}for(c=b.length;c--;)(p=b[c])&&(u=o?J(n,p):d[c])>-1&&(n[u]=!(a[u]=p))}}else b=h(b===a?b.splice(v,b.length):b),o?o(null,a,b,l):Y.apply(a,b)})}function v(e){for(var t,r,n,i=e.length,o=E.relative[e[0].type],a=o||E.relative[" "],s=o?1:0,l=p(function(e){return e===t},a,!0),u=p(function(e){return J(t,e)>-1},a,!0),f=[function(e,r,n){var i=!o&&(n||r!==A)||((t=r).nodeType?l(e,r,n):u(e,r,n));return t=null,i}];s<i;s++)if(r=E.relative[e[s].type])f=[p(d(f),r)];else{if(r=E.filter[e[s].type].apply(null,e[s].matches),r[M]){for(n=++s;n<i&&!E.relative[e[n].type];n++);return g(s>1&&d(f),s>1&&c(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(oe,"$1"),r,s<n&&v(e.slice(s,n)),n<i&&v(e=e.slice(n)),n<i&&c(e))}f.push(r)}return d(f)}function m(e,r){var i=r.length>0,o=e.length>0,a=function(n,a,s,l,u){var c,p,d,f=0,g="0",v=n&&[],m=[],y=A,b=n||o&&E.find.TAG("*",u),x=$+=null==y?1:Math.random()||.1,S=b.length;for(u&&(A=a===R||a||u);g!==S&&null!=(c=b[g]);g++){if(o&&c){for(p=0,a||c.ownerDocument===R||(N(c),s=!k);d=e[p++];)if(d(c,a||R,s)){l.push(c);break}u&&($=x)}i&&((c=!d&&c)&&f--,n&&v.push(c))}if(f+=g,i&&g!==f){for(p=0;d=r[p++];)d(v,m,a,s);if(n){if(f>0)for(;g--;)v[g]||m[g]||(m[g]=W.call(l));m=h(m)}Y.apply(l,m),u&&!n&&m.length>0&&f+r.length>1&&t.uniqueSort(l)}return u&&($=x,A=y),v};return i?n(a):a}var y,b,E,x,S,C,w,T,A,I,L,N,R,_,k,O,P,D,F,M="sizzle"+1*new Date,j=e.document,$=0,G=0,B=r(),H=r(),U=r(),V=function(e,t){return e===t&&(L=!0),0},q=1<<31,z={}.hasOwnProperty,Q=[],W=Q.pop,X=Q.push,Y=Q.push,K=Q.slice,J=function(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},Z="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ee="[\\x20\\t\\r\\n\\f]",te="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",re="\\["+ee+"*("+te+")(?:"+ee+"*([*^$|!~]?=)"+ee+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+te+"))|)"+ee+"*\\]",ne=":("+te+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+re+")*)|.*)\\)|)",ie=new RegExp(ee+"+","g"),oe=new RegExp("^"+ee+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ee+"+$","g"),ae=new RegExp("^"+ee+"*,"+ee+"*"),se=new RegExp("^"+ee+"*([>+~]|"+ee+")"+ee+"*"),le=new RegExp("="+ee+"*([^\\]'\"]*?)"+ee+"*\\]","g"),ue=new RegExp(ne),ce=new RegExp("^"+te+"$"),pe={ID:new RegExp("^#("+te+")"),CLASS:new RegExp("^\\.("+te+")"),TAG:new RegExp("^("+te+"|[*])"),ATTR:new RegExp("^"+re),PSEUDO:new RegExp("^"+ne),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ee+"*(even|odd|(([+-]|)(\\d*)n|)"+ee+"*(?:([+-]|)"+ee+"*(\\d+)|))"+ee+"*\\)|)","i"),bool:new RegExp("^(?:"+Z+")$","i"),needsContext:new RegExp("^"+ee+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ee+"*((?:-\\d)?\\d*)"+ee+"*\\)|)(?=[^-]|$)","i")},de=/^(?:input|select|textarea|button)$/i,fe=/^h\d$/i,he=/^[^{]+\{\s*\[native \w/,ge=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ve=/[+~]/,me=/'|\\/g,ye=new RegExp("\\\\([\\da-f]{1,6}"+ee+"?|("+ee+")|.)","ig"),be=function(e,t,r){var n="0x"+t-65536;return n!==n||r?t:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},Ee=function(){N()};try{Y.apply(Q=K.call(j.childNodes),j.childNodes),Q[j.childNodes.length].nodeType}catch(e){Y={apply:Q.length?function(e,t){X.apply(e,K.call(t))}:function(e,t){for(var r=e.length,n=0;e[r++]=t[n++];);e.length=r-1}}}b=t.support={},S=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},N=t.setDocument=function(e){var t,r,n=e?e.ownerDocument||e:j;return n!==R&&9===n.nodeType&&n.documentElement?(R=n,_=R.documentElement,k=!S(R),(r=R.defaultView)&&r.top!==r&&(r.addEventListener?r.addEventListener("unload",Ee,!1):r.attachEvent&&r.attachEvent("onunload",Ee)),b.attributes=i(function(e){return e.className="i",!e.getAttribute("className")}),b.getElementsByTagName=i(function(e){return e.appendChild(R.createComment("")),!e.getElementsByTagName("*").length}),b.getElementsByClassName=he.test(R.getElementsByClassName),b.getById=i(function(e){return _.appendChild(e).id=M,!R.getElementsByName||!R.getElementsByName(M).length}),b.getById?(E.find.ID=function(e,t){if(void 0!==t.getElementById&&k){var r=t.getElementById(e);return r?[r]:[]}},E.filter.ID=function(e){var t=e.replace(ye,be);return function(e){return e.getAttribute("id")===t}}):(delete E.find.ID,E.filter.ID=function(e){var t=e.replace(ye,be);return function(e){var r=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return r&&r.value===t}}),E.find.TAG=b.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):b.qsa?t.querySelectorAll(e):void 0}:function(e,t){var r,n=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;r=o[i++];)1===r.nodeType&&n.push(r);return n}return o},E.find.CLASS=b.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&k)return t.getElementsByClassName(e)},P=[],O=[],(b.qsa=he.test(R.querySelectorAll))&&(i(function(e){_.appendChild(e).innerHTML="<a id='"+M+"'></a><select id='"+M+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&O.push("[*^$]="+ee+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||O.push("\\["+ee+"*(?:value|"+Z+")"),e.querySelectorAll("[id~="+M+"-]").length||O.push("~="),e.querySelectorAll(":checked").length||O.push(":checked"),e.querySelectorAll("a#"+M+"+*").length||O.push(".#.+[+~]")}),i(function(e){var t=R.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&O.push("name"+ee+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||O.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),O.push(",.*:")})),(b.matchesSelector=he.test(D=_.matches||_.webkitMatchesSelector||_.mozMatchesSelector||_.oMatchesSelector||_.msMatchesSelector))&&i(function(e){b.disconnectedMatch=D.call(e,"div"),D.call(e,"[s!='']:x"),P.push("!=",ne)}),O=O.length&&new RegExp(O.join("|")),P=P.length&&new RegExp(P.join("|")),t=he.test(_.compareDocumentPosition),F=t||he.test(_.contains)?function(e,t){var r=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(r.contains?r.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},V=t?function(e,t){if(e===t)return L=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&r||!b.sortDetached&&t.compareDocumentPosition(e)===r?e===R||e.ownerDocument===j&&F(j,e)?-1:t===R||t.ownerDocument===j&&F(j,t)?1:I?J(I,e)-J(I,t):0:4&r?-1:1)}:function(e,t){if(e===t)return L=!0,0;var r,n=0,i=e.parentNode,o=t.parentNode,s=[e],l=[t];if(!i||!o)return e===R?-1:t===R?1:i?-1:o?1:I?J(I,e)-J(I,t):0;if(i===o)return a(e,t);for(r=e;r=r.parentNode;)s.unshift(r);for(r=t;r=r.parentNode;)l.unshift(r);for(;s[n]===l[n];)n++;return n?a(s[n],l[n]):s[n]===j?-1:l[n]===j?1:0},R):R},t.matches=function(e,r){return t(e,null,null,r)},t.matchesSelector=function(e,r){if((e.ownerDocument||e)!==R&&N(e),r=r.replace(le,"='$1']"),b.matchesSelector&&k&&!U[r+" "]&&(!P||!P.test(r))&&(!O||!O.test(r)))try{var n=D.call(e,r);if(n||b.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return t(r,R,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==R&&N(e),F(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==R&&N(e);var r=E.attrHandle[t.toLowerCase()],n=r&&z.call(E.attrHandle,t.toLowerCase())?r(e,t,!k):void 0;return void 0!==n?n:b.attributes||!k?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,r=[],n=0,i=0;if(L=!b.detectDuplicates,I=!b.sortStable&&e.slice(0),e.sort(V),L){for(;t=e[i++];)t===e[i]&&(n=r.push(i));for(;n--;)e.splice(r[n],1)}return I=null,e},x=t.getText=function(e){var t,r="",n=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)r+=x(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[n++];)r+=x(t);return r},E=t.selectors={cacheLength:50,createPseudo:n,match:pe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ye,be),e[3]=(e[3]||e[4]||e[5]||"").replace(ye,be),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,r=!e[6]&&e[2];return pe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":r&&ue.test(r)&&(t=C(r,!0))&&(t=r.indexOf(")",r.length-t)-r.length)&&(e[0]=e[0].slice(0,t),e[2]=r.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ye,be).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=B[e+" "];return t||(t=new RegExp("(^|"+ee+")"+e+"("+ee+"|$)"))&&B(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,r,n){return function(i){var o=t.attr(i,e);return null==o?"!="===r:!r||(o+="","="===r?o===n:"!="===r?o!==n:"^="===r?n&&0===o.indexOf(n):"*="===r?n&&o.indexOf(n)>-1:"$="===r?n&&o.slice(-n.length)===n:"~="===r?(" "+o.replace(ie," ")+" ").indexOf(n)>-1:"|="===r&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,r,n,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===n&&0===i?function(e){return!!e.parentNode}:function(t,r,l){var u,c,p,d,f,h,g=o!==a?"nextSibling":"previousSibling",v=t.parentNode,m=s&&t.nodeName.toLowerCase(),y=!l&&!s,b=!1;if(v){if(o){for(;g;){for(d=t;d=d[g];)if(s?d.nodeName.toLowerCase()===m:1===d.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?v.firstChild:v.lastChild],a&&y){for(d=v,p=d[M]||(d[M]={}),c=p[d.uniqueID]||(p[d.uniqueID]={}),u=c[e]||[],f=u[0]===$&&u[1],b=f&&u[2],d=f&&v.childNodes[f];d=++f&&d&&d[g]||(b=f=0)||h.pop();)if(1===d.nodeType&&++b&&d===t){c[e]=[$,f,b];break}}else if(y&&(d=t,p=d[M]||(d[M]={}),c=p[d.uniqueID]||(p[d.uniqueID]={}),u=c[e]||[],f=u[0]===$&&u[1],b=f),!1===b)for(;(d=++f&&d&&d[g]||(b=f=0)||h.pop())&&((s?d.nodeName.toLowerCase()!==m:1!==d.nodeType)||!++b||(y&&(p=d[M]||(d[M]={}),c=p[d.uniqueID]||(p[d.uniqueID]={}),c[e]=[$,b]),d!==t)););return(b-=i)===n||b%n==0&&b/n>=0}}},PSEUDO:function(e,r){var i,o=E.pseudos[e]||E.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[M]?o(r):o.length>1?(i=[e,e,"",r],E.setFilters.hasOwnProperty(e.toLowerCase())?n(function(e,t){for(var n,i=o(e,r),a=i.length;a--;)n=J(e,i[a]),e[n]=!(t[n]=i[a])}):function(e){return o(e,0,i)}):o}},pseudos:{not:n(function(e){var t=[],r=[],i=w(e.replace(oe,"$1"));return i[M]?n(function(e,t,r,n){for(var o,a=i(e,null,n,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,n,o){return t[0]=e,i(t,null,o,r),t[0]=null,!r.pop()}}),has:n(function(e){return function(r){return t(e,r).length>0}}),contains:n(function(e){return e=e.replace(ye,be),function(t){return(t.textContent||t.innerText||x(t)).indexOf(e)>-1}}),lang:n(function(e){return ce.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(ye,be).toLowerCase(),function(t){var r;do{if(r=k?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(r=r.toLowerCase())===e||0===r.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var r=e.location&&e.location.hash;return r&&r.slice(1)===t.id},root:function(e){return e===_},focus:function(e){return e===R.activeElement&&(!R.hasFocus||R.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!E.pseudos.empty(e)},header:function(e){return fe.test(e.nodeName)},input:function(e){return de.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:s(function(){return[0]}),last:s(function(e,t){return[t-1]}),eq:s(function(e,t,r){return[r<0?r+t:r]}),even:s(function(e,t){for(var r=0;r<t;r+=2)e.push(r);return e}),odd:s(function(e,t){for(var r=1;r<t;r+=2)e.push(r);return e}),lt:s(function(e,t,r){for(var n=r<0?r+t:r;--n>=0;)e.push(n);return e}),gt:s(function(e,t,r){for(var n=r<0?r+t:r;++n<t;)e.push(n);return e})}},E.pseudos.nth=E.pseudos.eq;for(y in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})E.pseudos[y]=function(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}(y);for(y in{submit:!0,reset:!0})E.pseudos[y]=function(e){return function(t){var r=t.nodeName.toLowerCase();return("input"===r||"button"===r)&&t.type===e}}(y);return u.prototype=E.filters=E.pseudos,E.setFilters=new u,C=t.tokenize=function(e,r){var n,i,o,a,s,l,u,c=H[e+" "];if(c)return r?0:c.slice(0);for(s=e,l=[],u=E.preFilter;s;){n&&!(i=ae.exec(s))||(i&&(s=s.slice(i[0].length)||s),l.push(o=[])),n=!1,(i=se.exec(s))&&(n=i.shift(),o.push({value:n,type:i[0].replace(oe," ")}),s=s.slice(n.length));for(a in E.filter)!(i=pe[a].exec(s))||u[a]&&!(i=u[a](i))||(n=i.shift(),o.push({value:n,type:a,matches:i}),s=s.slice(n.length));if(!n)break}return r?s.length:s?t.error(e):H(e,l).slice(0)},w=t.compile=function(e,t){var r,n=[],i=[],o=U[e+" "];if(!o){for(t||(t=C(e)),r=t.length;r--;)o=v(t[r]),o[M]?n.push(o):i.push(o);o=U(e,m(i,n)),o.selector=e}return o},T=t.select=function(e,t,r,n){var i,o,a,s,u,p="function"==typeof e&&e,d=!n&&C(e=p.selector||e);if(r=r||[],1===d.length){if(o=d[0]=d[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&b.getById&&9===t.nodeType&&k&&E.relative[o[1].type]){if(!(t=(E.find.ID(a.matches[0].replace(ye,be),t)||[])[0]))return r;p&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=pe.needsContext.test(e)?0:o.length;i--&&(a=o[i],!E.relative[s=a.type]);)if((u=E.find[s])&&(n=u(a.matches[0].replace(ye,be),ve.test(o[0].type)&&l(t.parentNode)||t))){if(o.splice(i,1),!(e=n.length&&c(o)))return Y.apply(r,n),r;break}}return(p||w(e,d))(n,t,!k,r,!t||ve.test(e)&&l(t.parentNode)||t),r},b.sortStable=M.split("").sort(V).join("")===M,b.detectDuplicates=!!L,N(),b.sortDetached=i(function(e){return 1&e.compareDocumentPosition(R.createElement("div"))}),i(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,r){if(!r)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),b.attributes&&i(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,r){if(!r&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),i(function(e){return null==e.getAttribute("disabled")})||o(Z,function(e,t,r){var n;if(!r)return!0===e[t]?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),t}(r);le.find=fe,le.expr=fe.selectors,le.expr[":"]=le.expr.pseudos,le.uniqueSort=le.unique=fe.uniqueSort,le.text=fe.getText,le.isXMLDoc=fe.isXML,le.contains=fe.contains;var he=function(e,t,r){for(var n=[],i=void 0!==r;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&le(e).is(r))break;n.push(e)}return n},ge=function(e,t){for(var r=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&r.push(e);return r},ve=le.expr.match.needsContext,me=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,ye=/^.[^:#\[\.,]*$/;le.filter=function(e,t,r){var n=t[0];return r&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?le.find.matchesSelector(n,e)?[n]:[]:le.find.matches(e,le.grep(t,function(e){return 1===e.nodeType}))},le.fn.extend({find:function(e){var t,r=this.length,n=[],i=this;if("string"!=typeof e)return this.pushStack(le(e).filter(function(){for(t=0;t<r;t++)if(le.contains(i[t],this))return!0}));for(t=0;t<r;t++)le.find(e,i[t],n);return n=this.pushStack(r>1?le.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(s(this,e||[],!1))},not:function(e){return this.pushStack(s(this,e||[],!0))},is:function(e){return!!s(this,"string"==typeof e&&ve.test(e)?le(e):e||[],!1).length}});var be,Ee=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(le.fn.init=function(e,t,r){var n,i;if(!e)return this;if(r=r||be,"string"==typeof e){if(!(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:Ee.exec(e))||!n[1]&&t)return!t||t.jquery?(t||r).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof le?t[0]:t,le.merge(this,le.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:Z,!0)),me.test(n[1])&&le.isPlainObject(t))for(n in t)le.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return i=Z.getElementById(n[2]),i&&i.parentNode&&(this.length=1,this[0]=i),this.context=Z,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):le.isFunction(e)?void 0!==r.ready?r.ready(e):e(le):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),le.makeArray(e,this))}).prototype=le.fn,be=le(Z);var xe=/^(?:parents|prev(?:Until|All))/,Se={children:!0,contents:!0,next:!0,prev:!0};le.fn.extend({has:function(e){var t=le(e,this),r=t.length;return this.filter(function(){for(var e=0;e<r;e++)if(le.contains(this,t[e]))return!0})},closest:function(e,t){for(var r,n=0,i=this.length,o=[],a=ve.test(e)||"string"!=typeof e?le(e,t||this.context):0;n<i;n++)for(r=this[n];r&&r!==t;r=r.parentNode)if(r.nodeType<11&&(a?a.index(r)>-1:1===r.nodeType&&le.find.matchesSelector(r,e))){o.push(r);break}return this.pushStack(o.length>1?le.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?ne.call(le(e),this[0]):ne.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(le.uniqueSort(le.merge(this.get(),le(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),le.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return he(e,"parentNode")},parentsUntil:function(e,t,r){return he(e,"parentNode",r)},next:function(e){return l(e,"nextSibling")},prev:function(e){return l(e,"previousSibling")},nextAll:function(e){return he(e,"nextSibling")},prevAll:function(e){return he(e,"previousSibling")},nextUntil:function(e,t,r){return he(e,"nextSibling",r)},prevUntil:function(e,t,r){return he(e,"previousSibling",r)},siblings:function(e){return ge((e.parentNode||{}).firstChild,e)},children:function(e){return ge(e.firstChild)},contents:function(e){return e.contentDocument||le.merge([],e.childNodes)}},function(e,t){le.fn[e]=function(r,n){var i=le.map(this,t,r);return"Until"!==e.slice(-5)&&(n=r),n&&"string"==typeof n&&(i=le.filter(n,i)),this.length>1&&(Se[e]||le.uniqueSort(i),xe.test(e)&&i.reverse()),this.pushStack(i)}});var Ce=/\S+/g;le.Callbacks=function(e){e="string"==typeof e?u(e):le.extend({},e);var t,r,n,i,o=[],a=[],s=-1,l=function(){for(i=e.once,n=t=!0;a.length;s=-1)for(r=a.shift();++s<o.length;)!1===o[s].apply(r[0],r[1])&&e.stopOnFalse&&(s=o.length,r=!1);e.memory||(r=!1),t=!1,i&&(o=r?[]:"")},c={add:function(){return o&&(r&&!t&&(s=o.length-1,a.push(r)),function t(r){le.each(r,function(r,n){le.isFunction(n)?e.unique&&c.has(n)||o.push(n):n&&n.length&&"string"!==le.type(n)&&t(n)})}(arguments),r&&!t&&l()),this},remove:function(){return le.each(arguments,function(e,t){for(var r;(r=le.inArray(t,o,r))>-1;)o.splice(r,1),r<=s&&s--}),this},has:function(e){return e?le.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=a=[],o=r="",this},disabled:function(){return!o},lock:function(){return i=a=[],r||(o=r=""),this},locked:function(){return!!i},fireWith:function(e,r){return i||(r=r||[],r=[e,r.slice?r.slice():r],a.push(r),t||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!n}};return c},le.extend({Deferred:function(e){var t=[["resolve","done",le.Callbacks("once memory"),"resolved"],["reject","fail",le.Callbacks("once memory"),"rejected"],["notify","progress",le.Callbacks("memory")]],r="pending",n={state:function(){return r},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return le.Deferred(function(r){le.each(t,function(t,o){var a=le.isFunction(e[t])&&e[t];i[o[1]](function(){var e=a&&a.apply(this,arguments);e&&le.isFunction(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[o[0]+"With"](this===n?r.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?le.extend(e,n):n}},i={};return n.pipe=n.then,le.each(t,function(e,o){var a=o[2],s=o[3];n[o[1]]=a.add,s&&a.add(function(){r=s},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?n:this,arguments),this},i[o[0]+"With"]=a.fireWith}),n.promise(i),e&&e.call(i,i),i},when:function(e){var t,r,n,i=0,o=ee.call(arguments),a=o.length,s=1!==a||e&&le.isFunction(e.promise)?a:0,l=1===s?e:le.Deferred(),u=function(e,r,n){return function(i){r[e]=this,n[e]=arguments.length>1?ee.call(arguments):i,n===t?l.notifyWith(r,n):--s||l.resolveWith(r,n)}};if(a>1)for(t=new Array(a),r=new Array(a),n=new Array(a);i<a;i++)o[i]&&le.isFunction(o[i].promise)?o[i].promise().progress(u(i,r,t)).done(u(i,n,o)).fail(l.reject):--s;return s||l.resolveWith(n,o),l.promise()}});var we;le.fn.ready=function(e){return le.ready.promise().done(e),this},le.extend({isReady:!1,readyWait:1,holdReady:function(e){e?le.readyWait++:le.ready(!0)},ready:function(e){(!0===e?--le.readyWait:le.isReady)||(le.isReady=!0,!0!==e&&--le.readyWait>0||(we.resolveWith(Z,[le]),le.fn.triggerHandler&&(le(Z).triggerHandler("ready"),le(Z).off("ready"))))}}),le.ready.promise=function(e){return we||(we=le.Deferred(),"complete"===Z.readyState||"loading"!==Z.readyState&&!Z.documentElement.doScroll?r.setTimeout(le.ready):(Z.addEventListener("DOMContentLoaded",c),r.addEventListener("load",c))),we.promise(e)},le.ready.promise();var Te=function(e,t,r,n,i,o,a){var s=0,l=e.length,u=null==r;if("object"===le.type(r)){i=!0;for(s in r)Te(e,t,s,r[s],!0,o,a)}else if(void 0!==n&&(i=!0,le.isFunction(n)||(a=!0),u&&(a?(t.call(e,n),t=null):(u=t,t=function(e,t,r){return u.call(le(e),r)})),t))for(;s<l;s++)t(e[s],r,a?n:n.call(e[s],s,t(e[s],r)));return i?e:u?t.call(e):l?t(e[0],r):o},Ae=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};p.uid=1,p.prototype={register:function(e,t){var r=t||{};return e.nodeType?e[this.expando]=r:Object.defineProperty(e,this.expando,{value:r,writable:!0,configurable:!0}),e[this.expando]},cache:function(e){if(!Ae(e))return{};var t=e[this.expando];return t||(t={},Ae(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,r){var n,i=this.cache(e);if("string"==typeof t)i[t]=r;else for(n in t)i[n]=t[n];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][t]},access:function(e,t,r){var n;return void 0===t||t&&"string"==typeof t&&void 0===r?(n=this.get(e,t),void 0!==n?n:this.get(e,le.camelCase(t))):(this.set(e,t,r),void 0!==r?r:t)},remove:function(e,t){var r,n,i,o=e[this.expando];if(void 0!==o){if(void 0===t)this.register(e);else{le.isArray(t)?n=t.concat(t.map(le.camelCase)):(i=le.camelCase(t),t in o?n=[t,i]:(n=i,n=n in o?[n]:n.match(Ce)||[])),r=n.length;for(;r--;)delete o[n[r]]}(void 0===t||le.isEmptyObject(o))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!le.isEmptyObject(t)}};var Ie=new p,Le=new p,Ne=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Re=/[A-Z]/g;le.extend({hasData:function(e){return Le.hasData(e)||Ie.hasData(e)},data:function(e,t,r){return Le.access(e,t,r)},removeData:function(e,t){Le.remove(e,t)},_data:function(e,t,r){return Ie.access(e,t,r)},_removeData:function(e,t){Ie.remove(e,t)}}),le.fn.extend({data:function(e,t){var r,n,i,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(i=Le.get(o),1===o.nodeType&&!Ie.get(o,"hasDataAttrs"))){for(r=a.length;r--;)a[r]&&(n=a[r].name,0===n.indexOf("data-")&&(n=le.camelCase(n.slice(5)),d(o,n,i[n])));Ie.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){Le.set(this,e)}):Te(this,function(t){var r,n;if(o&&void 0===t){if(void 0!==(r=Le.get(o,e)||Le.get(o,e.replace(Re,"-$&").toLowerCase())))return r;if(n=le.camelCase(e),void 0!==(r=Le.get(o,n)))return r;if(void 0!==(r=d(o,n,void 0)))return r}else n=le.camelCase(e),this.each(function(){var r=Le.get(this,n);Le.set(this,n,t),e.indexOf("-")>-1&&void 0!==r&&Le.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Le.remove(this,e)})}}),le.extend({queue:function(e,t,r){var n;if(e)return t=(t||"fx")+"queue",n=Ie.get(e,t),r&&(!n||le.isArray(r)?n=Ie.access(e,t,le.makeArray(r)):n.push(r)),n||[]},dequeue:function(e,t){t=t||"fx";var r=le.queue(e,t),n=r.length,i=r.shift(),o=le._queueHooks(e,t),a=function(){le.dequeue(e,t)};"inprogress"===i&&(i=r.shift(),n--),i&&("fx"===t&&r.unshift("inprogress"),delete o.stop,i.call(e,a,o)),!n&&o&&o.empty.fire()},_queueHooks:function(e,t){var r=t+"queueHooks";return Ie.get(e,r)||Ie.access(e,r,{empty:le.Callbacks("once memory").add(function(){Ie.remove(e,[t+"queue",r])})})}}),le.fn.extend({queue:function(e,t){var r=2;return"string"!=typeof e&&(t=e,e="fx",r--),arguments.length<r?le.queue(this[0],e):void 0===t?this:this.each(function(){var r=le.queue(this,e,t);le._queueHooks(this,e),"fx"===e&&"inprogress"!==r[0]&&le.dequeue(this,e)})},dequeue:function(e){return this.each(function(){le.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var r,n=1,i=le.Deferred(),o=this,a=this.length,s=function(){--n||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(r=Ie.get(o[a],e+"queueHooks"))&&r.empty&&(n++,r.empty.add(s));return s(),i.promise(t)}});var _e=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ke=new RegExp("^(?:([+-])=|)("+_e+")([a-z%]*)$","i"),Oe=["Top","Right","Bottom","Left"],Pe=function(e,t){return e=t||e,"none"===le.css(e,"display")||!le.contains(e.ownerDocument,e)},De=/^(?:checkbox|radio)$/i,Fe=/<([\w:-]+)/,Me=/^$|\/(?:java|ecma)script/i,je={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};je.optgroup=je.option,je.tbody=je.tfoot=je.colgroup=je.caption=je.thead,je.th=je.td;var $e=/<|&#?\w+;/;!function(){var e=Z.createDocumentFragment(),t=e.appendChild(Z.createElement("div")),r=Z.createElement("input");r.setAttribute("type","radio"),r.setAttribute("checked","checked"),r.setAttribute("name","t"),t.appendChild(r),se.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",se.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var Ge=/^key/,Be=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,He=/^([^.]*)(?:\.(.+)|)/;le.event={global:{},add:function(e,t,r,n,i){var o,a,s,l,u,c,p,d,f,h,g,v=Ie.get(e);if(v)for(r.handler&&(o=r,r=o.handler,i=o.selector),r.guid||(r.guid=le.guid++),(l=v.events)||(l=v.events={}),(a=v.handle)||(a=v.handle=function(t){return void 0!==le&&le.event.triggered!==t.type?le.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(Ce)||[""],u=t.length;u--;)s=He.exec(t[u])||[],f=g=s[1],h=(s[2]||"").split(".").sort(),f&&(p=le.event.special[f]||{},f=(i?p.delegateType:p.bindType)||f,p=le.event.special[f]||{},c=le.extend({type:f,origType:g,data:n,handler:r,guid:r.guid,selector:i,needsContext:i&&le.expr.match.needsContext.test(i),namespace:h.join(".")},o),(d=l[f])||(d=l[f]=[],d.delegateCount=0,p.setup&&!1!==p.setup.call(e,n,h,a)||e.addEventListener&&e.addEventListener(f,a)),p.add&&(p.add.call(e,c),c.handler.guid||(c.handler.guid=r.guid)),i?d.splice(d.delegateCount++,0,c):d.push(c),le.event.global[f]=!0)},remove:function(e,t,r,n,i){var o,a,s,l,u,c,p,d,f,h,g,v=Ie.hasData(e)&&Ie.get(e);if(v&&(l=v.events)){for(t=(t||"").match(Ce)||[""],u=t.length;u--;)if(s=He.exec(t[u])||[],f=g=s[1],h=(s[2]||"").split(".").sort(),f){for(p=le.event.special[f]||{},f=(n?p.delegateType:p.bindType)||f,d=l[f]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=d.length;o--;)c=d[o],!i&&g!==c.origType||r&&r.guid!==c.guid||s&&!s.test(c.namespace)||n&&n!==c.selector&&("**"!==n||!c.selector)||(d.splice(o,1),c.selector&&d.delegateCount--,p.remove&&p.remove.call(e,c));a&&!d.length&&(p.teardown&&!1!==p.teardown.call(e,h,v.handle)||le.removeEvent(e,f,v.handle),delete l[f])}else for(f in l)le.event.remove(e,f+t[u],r,n,!0);le.isEmptyObject(l)&&Ie.remove(e,"handle events")}},dispatch:function(e){e=le.event.fix(e);var t,r,n,i,o,a=[],s=ee.call(arguments),l=(Ie.get(this,"events")||{})[e.type]||[],u=le.event.special[e.type]||{};if(s[0]=e,e.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,e)){for(a=le.event.handlers.call(this,e,l),t=0;(i=a[t++])&&!e.isPropagationStopped();)for(e.currentTarget=i.elem,r=0;(o=i.handlers[r++])&&!e.isImmediatePropagationStopped();)e.rnamespace&&!e.rnamespace.test(o.namespace)||(e.handleObj=o,e.data=o.data,void 0!==(n=((le.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(e.result=n)&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,t){var r,n,i,o,a=[],s=t.delegateCount,l=e.target;if(s&&l.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==e.type)){for(n=[],r=0;r<s;r++)o=t[r],i=o.selector+" ",void 0===n[i]&&(n[i]=o.needsContext?le(i,this).index(l)>-1:le.find(i,this,null,[l]).length),n[i]&&n.push(o);n.length&&a.push({elem:l,handlers:n})}return s<t.length&&a.push({elem:this,handlers:t.slice(s)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var r,n,i,o=t.button;return null==e.pageX&&null!=t.clientX&&(r=e.target.ownerDocument||Z,n=r.documentElement,i=r.body,e.pageX=t.clientX+(n&&n.scrollLeft||i&&i.scrollLeft||0)-(n&&n.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(n&&n.scrollTop||i&&i.scrollTop||0)-(n&&n.clientTop||i&&i.clientTop||0)),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[le.expando])return e;var t,r,n,i=e.type,o=e,a=this.fixHooks[i];for(a||(this.fixHooks[i]=a=Be.test(i)?this.mouseHooks:Ge.test(i)?this.keyHooks:{}),n=a.props?this.props.concat(a.props):this.props,e=new le.Event(o),t=n.length;t--;)r=n[t],e[r]=o[r];return e.target||(e.target=Z),3===e.target.nodeType&&(e.target=e.target.parentNode),a.filter?a.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==b()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===b()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&le.nodeName(this,"input"))return this.click(),!1},_default:function(e){return le.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},le.removeEvent=function(e,t,r){e.removeEventListener&&e.removeEventListener(t,r)},le.Event=function(e,t){if(!(this instanceof le.Event))return new le.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?m:y):this.type=e,t&&le.extend(this,t),this.timeStamp=e&&e.timeStamp||le.now(),this[le.expando]=!0},le.Event.prototype={constructor:le.Event,isDefaultPrevented:y,isPropagationStopped:y,isImmediatePropagationStopped:y,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=m,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=m,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=m,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},le.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){le.event.special[e]={delegateType:t,bindType:t,handle:function(e){var r,n=this,i=e.relatedTarget,o=e.handleObj;return i&&(i===n||le.contains(n,i))||(e.type=o.origType,r=o.handler.apply(this,arguments),e.type=t),r}}}),le.fn.extend({on:function(e,t,r,n){return E(this,e,t,r,n)},one:function(e,t,r,n){return E(this,e,t,r,n,1)},off:function(e,t,r){var n,i;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,le(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(r=t,t=void 0),!1===r&&(r=y),this.each(function(){le.event.remove(this,e,r,t)})}});var Ue=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,Ve=/<script|<style|<link/i,qe=/checked\s*(?:[^=]|=\s*.checked.)/i,ze=/^true\/(.*)/,Qe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;le.extend({htmlPrefilter:function(e){return e.replace(Ue,"<$1></$2>")},clone:function(e,t,r){var n,i,o,a,s=e.cloneNode(!0),l=le.contains(e.ownerDocument,e);if(!(se.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||le.isXMLDoc(e)))for(a=h(s),o=h(e),n=0,i=o.length;n<i;n++)T(o[n],a[n]);if(t)if(r)for(o=o||h(e),a=a||h(s),n=0,i=o.length;n<i;n++)w(o[n],a[n]);else w(e,s);return a=h(s,"script"),a.length>0&&g(a,!l&&h(e,"script")),s},cleanData:function(e){for(var t,r,n,i=le.event.special,o=0;void 0!==(r=e[o]);o++)if(Ae(r)){if(t=r[Ie.expando]){if(t.events)for(n in t.events)i[n]?le.event.remove(r,n):le.removeEvent(r,n,t.handle);r[Ie.expando]=void 0}r[Le.expando]&&(r[Le.expando]=void 0)}}}),le.fn.extend({domManip:A,detach:function(e){return I(this,e,!0)},remove:function(e){return I(this,e)},text:function(e){return Te(this,function(e){return void 0===e?le.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return A(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){x(this,e).appendChild(e)}})},prepend:function(){return A(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=x(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return A(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return A(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(le.cleanData(h(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return le.clone(this,e,t)})},html:function(e){return Te(this,function(e){var t=this[0]||{},r=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ve.test(e)&&!je[(Fe.exec(e)||["",""])[1].toLowerCase()]){e=le.htmlPrefilter(e);try{for(;r<n;r++)t=this[r]||{},1===t.nodeType&&(le.cleanData(h(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return A(this,arguments,function(t){var r=this.parentNode;le.inArray(this,e)<0&&(le.cleanData(h(this)),r&&r.replaceChild(t,this))},e)}}),le.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){le.fn[e]=function(e){for(var r,n=[],i=le(e),o=i.length-1,a=0;a<=o;a++)r=a===o?this:this.clone(!0),le(i[a])[t](r),re.apply(n,r.get());return this.pushStack(n)}});var We,Xe={HTML:"block",BODY:"block"},Ye=/^margin/,Ke=new RegExp("^("+_e+")(?!px)[a-z%]+$","i"),Je=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=r),t.getComputedStyle(e)},Ze=function(e,t,r,n){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=r.apply(e,n||[]);for(o in t)e.style[o]=a[o];return i},et=Z.documentElement;!function(){function e(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",s.innerHTML="",et.appendChild(a);var e=r.getComputedStyle(s);t="1%"!==e.top,o="2px"===e.marginLeft,n="4px"===e.width,s.style.marginRight="50%",i="4px"===e.marginRight,et.removeChild(a)}var t,n,i,o,a=Z.createElement("div"),s=Z.createElement("div");s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",se.clearCloneStyle="content-box"===s.style.backgroundClip,a.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",a.appendChild(s),le.extend(se,{pixelPosition:function(){return e(),t},boxSizingReliable:function(){return null==n&&e(),n},pixelMarginRight:function(){return null==n&&e(),i},reliableMarginLeft:function(){return null==n&&e(),o},reliableMarginRight:function(){var e,t=s.appendChild(Z.createElement("div"));return t.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",t.style.marginRight=t.style.width="0",s.style.width="1px",et.appendChild(a),e=!parseFloat(r.getComputedStyle(t).marginRight),et.removeChild(a),s.removeChild(t),e}}))}();var tt=/^(none|table(?!-c[ea]).+)/,rt={position:"absolute",visibility:"hidden",display:"block"},nt={letterSpacing:"0",fontWeight:"400"},it=["Webkit","O","Moz","ms"],ot=Z.createElement("div").style;le.extend({cssHooks:{opacity:{get:function(e,t){if(t){var r=R(e,"opacity");return""===r?"1":r}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,r,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=le.camelCase(t),l=e.style;if(t=le.cssProps[s]||(le.cssProps[s]=k(s)||s),a=le.cssHooks[t]||le.cssHooks[s],void 0===r)return a&&"get"in a&&void 0!==(i=a.get(e,!1,n))?i:l[t];o=typeof r,"string"===o&&(i=ke.exec(r))&&i[1]&&(r=f(e,t,i),o="number"),null!=r&&r===r&&("number"===o&&(r+=i&&i[3]||(le.cssNumber[s]?"":"px")),se.clearCloneStyle||""!==r||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(r=a.set(e,r,n))||(l[t]=r))}},css:function(e,t,r,n){var i,o,a,s=le.camelCase(t);return t=le.cssProps[s]||(le.cssProps[s]=k(s)||s),a=le.cssHooks[t]||le.cssHooks[s],a&&"get"in a&&(i=a.get(e,!0,r)),void 0===i&&(i=R(e,t,n)),"normal"===i&&t in nt&&(i=nt[t]),""===r||r?(o=parseFloat(i),!0===r||isFinite(o)?o||0:i):i}}),le.each(["height","width"],function(e,t){le.cssHooks[t]={get:function(e,r,n){if(r)return tt.test(le.css(e,"display"))&&0===e.offsetWidth?Ze(e,rt,function(){return D(e,t,n)}):D(e,t,n)},set:function(e,r,n){var i,o=n&&Je(e),a=n&&P(e,t,n,"border-box"===le.css(e,"boxSizing",!1,o),o);return a&&(i=ke.exec(r))&&"px"!==(i[3]||"px")&&(e.style[t]=r,r=le.css(e,t)),O(e,r,a)}}}),le.cssHooks.marginLeft=_(se.reliableMarginLeft,function(e,t){if(t)return(parseFloat(R(e,"marginLeft"))||e.getBoundingClientRect().left-Ze(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),le.cssHooks.marginRight=_(se.reliableMarginRight,function(e,t){if(t)return Ze(e,{display:"inline-block"},R,[e,"marginRight"])}),le.each({margin:"",padding:"",border:"Width"},function(e,t){le.cssHooks[e+t]={expand:function(r){for(var n=0,i={},o="string"==typeof r?r.split(" "):[r];n<4;n++)i[e+Oe[n]+t]=o[n]||o[n-2]||o[0];return i}},Ye.test(e)||(le.cssHooks[e+t].set=O)}),le.fn.extend({css:function(e,t){return Te(this,function(e,t,r){var n,i,o={},a=0;if(le.isArray(t)){for(n=Je(e),i=t.length;a<i;a++)o[t[a]]=le.css(e,t[a],!1,n);return o}return void 0!==r?le.style(e,t,r):le.css(e,t)},e,t,arguments.length>1)},show:function(){return F(this,!0)},hide:function(){return F(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Pe(this)?le(this).show():le(this).hide()})}}),le.Tween=M,M.prototype={constructor:M,init:function(e,t,r,n,i,o){this.elem=e,this.prop=r,this.easing=i||le.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=o||(le.cssNumber[r]?"":"px")},cur:function(){var e=M.propHooks[this.prop];return e&&e.get?e.get(this):M.propHooks._default.get(this)},run:function(e){var t,r=M.propHooks[this.prop];return this.options.duration?this.pos=t=le.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):M.propHooks._default.set(this),this}},M.prototype.init.prototype=M.prototype,M.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=le.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){le.fx.step[e.prop]?le.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[le.cssProps[e.prop]]&&!le.cssHooks[e.prop]?e.elem[e.prop]=e.now:le.style(e.elem,e.prop,e.now+e.unit)}}},M.propHooks.scrollTop=M.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},le.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},le.fx=M.prototype.init,le.fx.step={};var at,st,lt=/^(?:toggle|show|hide)$/,ut=/queueHooks$/;le.Animation=le.extend(U,{tweeners:{"*":[function(e,t){var r=this.createTween(e,t);return f(r.elem,e,ke.exec(t),r),r}]},tweener:function(e,t){le.isFunction(e)?(t=e,e=["*"]):e=e.match(Ce);for(var r,n=0,i=e.length;n<i;n++)r=e[n],U.tweeners[r]=U.tweeners[r]||[],U.tweeners[r].unshift(t)},prefilters:[B],prefilter:function(e,t){t?U.prefilters.unshift(e):U.prefilters.push(e)}}),le.speed=function(e,t,r){var n=e&&"object"==typeof e?le.extend({},e):{complete:r||!r&&t||le.isFunction(e)&&e,duration:e,easing:r&&t||t&&!le.isFunction(t)&&t};return n.duration=le.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in le.fx.speeds?le.fx.speeds[n.duration]:le.fx.speeds._default,null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){le.isFunction(n.old)&&n.old.call(this),n.queue&&le.dequeue(this,n.queue)},n},le.fn.extend({fadeTo:function(e,t,r,n){return this.filter(Pe).css("opacity",0).show().end().animate({opacity:t},e,r,n)},animate:function(e,t,r,n){var i=le.isEmptyObject(e),o=le.speed(t,r,n),a=function(){var t=U(this,le.extend({},e),o);(i||Ie.get(this,"finish"))&&t.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,r){var n=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=le.timers,a=Ie.get(this);if(i)a[i]&&a[i].stop&&n(a[i]);else for(i in a)a[i]&&a[i].stop&&ut.test(i)&&n(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(r),t=!1,o.splice(i,1));!t&&r||le.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,r=Ie.get(this),n=r[e+"queue"],i=r[e+"queueHooks"],o=le.timers,a=n?n.length:0;for(r.finish=!0,le.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete r.finish})}}),le.each(["toggle","show","hide"],function(e,t){var r=le.fn[t];le.fn[t]=function(e,n,i){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate($(t,!0),e,n,i)}}),le.each({slideDown:$("show"),slideUp:$("hide"),slideToggle:$("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){le.fn[e]=function(e,r,n){return this.animate(t,e,r,n)}}),le.timers=[],le.fx.tick=function(){var e,t=0,r=le.timers;for(at=le.now();t<r.length;t++)(e=r[t])()||r[t]!==e||r.splice(t--,1);r.length||le.fx.stop(),at=void 0},le.fx.timer=function(e){le.timers.push(e),e()?le.fx.start():le.timers.pop()},le.fx.interval=13,le.fx.start=function(){st||(st=r.setInterval(le.fx.tick,le.fx.interval))},le.fx.stop=function(){r.clearInterval(st),st=null},le.fx.speeds={slow:600,fast:200,_default:400},le.fn.delay=function(e,t){return e=le.fx?le.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var i=r.setTimeout(t,e);n.stop=function(){r.clearTimeout(i)}})},function(){var e=Z.createElement("input"),t=Z.createElement("select"),r=t.appendChild(Z.createElement("option"));e.type="checkbox",se.checkOn=""!==e.value,se.optSelected=r.selected,t.disabled=!0,se.optDisabled=!r.disabled,e=Z.createElement("input"),e.value="t",e.type="radio",se.radioValue="t"===e.value}();var ct,pt=le.expr.attrHandle;le.fn.extend({attr:function(e,t){return Te(this,le.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){le.removeAttr(this,e)})}}),le.extend({attr:function(e,t,r){var n,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?le.prop(e,t,r):(1===o&&le.isXMLDoc(e)||(t=t.toLowerCase(),i=le.attrHooks[t]||(le.expr.match.bool.test(t)?ct:void 0)),void 0!==r?null===r?void le.removeAttr(e,t):i&&"set"in i&&void 0!==(n=i.set(e,r,t))?n:(e.setAttribute(t,r+""),r):i&&"get"in i&&null!==(n=i.get(e,t))?n:(n=le.find.attr(e,t),null==n?void 0:n))},attrHooks:{type:{set:function(e,t){if(!se.radioValue&&"radio"===t&&le.nodeName(e,"input")){var r=e.value;return e.setAttribute("type",t),r&&(e.value=r),t}}}},removeAttr:function(e,t){var r,n,i=0,o=t&&t.match(Ce);if(o&&1===e.nodeType)for(;r=o[i++];)n=le.propFix[r]||r,le.expr.match.bool.test(r)&&(e[n]=!1),e.removeAttribute(r)}}),ct={set:function(e,t,r){return!1===t?le.removeAttr(e,r):e.setAttribute(r,r),r}},le.each(le.expr.match.bool.source.match(/\w+/g),function(e,t){var r=pt[t]||le.find.attr;pt[t]=function(e,t,n){var i,o;return n||(o=pt[t],pt[t]=i,i=null!=r(e,t,n)?t.toLowerCase():null,pt[t]=o),i}});var dt=/^(?:input|select|textarea|button)$/i,ft=/^(?:a|area)$/i;le.fn.extend({prop:function(e,t){return Te(this,le.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[le.propFix[e]||e]})}}),le.extend({prop:function(e,t,r){var n,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&le.isXMLDoc(e)||(t=le.propFix[t]||t,i=le.propHooks[t]),void 0!==r?i&&"set"in i&&void 0!==(n=i.set(e,r,t))?n:e[t]=r:i&&"get"in i&&null!==(n=i.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=le.find.attr(e,"tabindex");return t?parseInt(t,10):dt.test(e.nodeName)||ft.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),se.optSelected||(le.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),le.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){le.propFix[this.toLowerCase()]=this});var ht=/[\t\r\n\f]/g;le.fn.extend({addClass:function(e){var t,r,n,i,o,a,s,l=0;if(le.isFunction(e))return this.each(function(t){le(this).addClass(e.call(this,t,V(this)))});if("string"==typeof e&&e)for(t=e.match(Ce)||[];r=this[l++];)if(i=V(r),n=1===r.nodeType&&(" "+i+" ").replace(ht," ")){for(a=0;o=t[a++];)n.indexOf(" "+o+" ")<0&&(n+=o+" ");s=le.trim(n),i!==s&&r.setAttribute("class",s)}return this},removeClass:function(e){var t,r,n,i,o,a,s,l=0;if(le.isFunction(e))return this.each(function(t){le(this).removeClass(e.call(this,t,V(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(Ce)||[];r=this[l++];)if(i=V(r),n=1===r.nodeType&&(" "+i+" ").replace(ht," ")){for(a=0;o=t[a++];)for(;n.indexOf(" "+o+" ")>-1;)n=n.replace(" "+o+" "," ");s=le.trim(n),i!==s&&r.setAttribute("class",s)}return this},toggleClass:function(e,t){var r=typeof e;return"boolean"==typeof t&&"string"===r?t?this.addClass(e):this.removeClass(e):le.isFunction(e)?this.each(function(r){le(this).toggleClass(e.call(this,r,V(this),t),t)}):this.each(function(){var t,n,i,o;if("string"===r)for(n=0,i=le(this),o=e.match(Ce)||[];t=o[n++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else void 0!==e&&"boolean"!==r||(t=V(this),t&&Ie.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Ie.get(this,"__className__")||""))})},hasClass:function(e){var t,r,n=0;for(t=" "+e+" ";r=this[n++];)if(1===r.nodeType&&(" "+V(r)+" ").replace(ht," ").indexOf(t)>-1)return!0;return!1}});var gt=/\r/g,vt=/[\x20\t\r\n\f]+/g;le.fn.extend({val:function(e){var t,r,n,i=this[0];{if(arguments.length)return n=le.isFunction(e),this.each(function(r){var i;1===this.nodeType&&(i=n?e.call(this,r,le(this).val()):e,null==i?i="":"number"==typeof i?i+="":le.isArray(i)&&(i=le.map(i,function(e){return null==e?"":e+""})),(t=le.valHooks[this.type]||le.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))});if(i)return(t=le.valHooks[i.type]||le.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(r=t.get(i,"value"))?r:(r=i.value,"string"==typeof r?r.replace(gt,""):null==r?"":r)}}}),le.extend({valHooks:{option:{get:function(e){var t=le.find.attr(e,"value");return null!=t?t:le.trim(le.text(e)).replace(vt," ")}},select:{get:function(e){for(var t,r,n=e.options,i=e.selectedIndex,o="select-one"===e.type||i<0,a=o?null:[],s=o?i+1:n.length,l=i<0?s:o?i:0;l<s;l++)if(r=n[l],(r.selected||l===i)&&(se.optDisabled?!r.disabled:null===r.getAttribute("disabled"))&&(!r.parentNode.disabled||!le.nodeName(r.parentNode,"optgroup"))){if(t=le(r).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var r,n,i=e.options,o=le.makeArray(t),a=i.length;a--;)n=i[a],(n.selected=le.inArray(le.valHooks.option.get(n),o)>-1)&&(r=!0);return r||(e.selectedIndex=-1),o}}}}),le.each(["radio","checkbox"],function(){le.valHooks[this]={set:function(e,t){if(le.isArray(t))return e.checked=le.inArray(le(e).val(),t)>-1}},se.checkOn||(le.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var mt=/^(?:focusinfocus|focusoutblur)$/;le.extend(le.event,{trigger:function(e,t,n,i){var o,a,s,l,u,c,p,d=[n||Z],f=ae.call(e,"type")?e.type:e,h=ae.call(e,"namespace")?e.namespace.split("."):[];if(a=s=n=n||Z,3!==n.nodeType&&8!==n.nodeType&&!mt.test(f+le.event.triggered)&&(f.indexOf(".")>-1&&(h=f.split("."),f=h.shift(),h.sort()),u=f.indexOf(":")<0&&"on"+f,e=e[le.expando]?e:new le.Event(f,"object"==typeof e&&e),e.isTrigger=i?2:3,e.namespace=h.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:le.makeArray(t,[e]),p=le.event.special[f]||{},i||!p.trigger||!1!==p.trigger.apply(n,t))){if(!i&&!p.noBubble&&!le.isWindow(n)){for(l=p.delegateType||f,mt.test(l+f)||(a=a.parentNode);a;a=a.parentNode)d.push(a),s=a;s===(n.ownerDocument||Z)&&d.push(s.defaultView||s.parentWindow||r)}for(o=0;(a=d[o++])&&!e.isPropagationStopped();)e.type=o>1?l:p.bindType||f,c=(Ie.get(a,"events")||{})[e.type]&&Ie.get(a,"handle"),c&&c.apply(a,t),(c=u&&a[u])&&c.apply&&Ae(a)&&(e.result=c.apply(a,t),!1===e.result&&e.preventDefault());return e.type=f,i||e.isDefaultPrevented()||p._default&&!1!==p._default.apply(d.pop(),t)||!Ae(n)||u&&le.isFunction(n[f])&&!le.isWindow(n)&&(s=n[u],s&&(n[u]=null),le.event.triggered=f,n[f](),le.event.triggered=void 0,s&&(n[u]=s)),e.result}},simulate:function(e,t,r){var n=le.extend(new le.Event,r,{type:e,isSimulated:!0});le.event.trigger(n,null,t)}}),le.fn.extend({trigger:function(e,t){return this.each(function(){le.event.trigger(e,t,this)})},triggerHandler:function(e,t){var r=this[0];if(r)return le.event.trigger(e,t,r,!0)}}),le.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){le.fn[t]=function(e,r){return arguments.length>0?this.on(t,null,e,r):this.trigger(t)}}),le.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),se.focusin="onfocusin"in r,se.focusin||le.each({focus:"focusin",blur:"focusout"},function(e,t){var r=function(e){le.event.simulate(t,e.target,le.event.fix(e))};le.event.special[t]={setup:function(){var n=this.ownerDocument||this,i=Ie.access(n,t);i||n.addEventListener(e,r,!0),Ie.access(n,t,(i||0)+1)},teardown:function(){var n=this.ownerDocument||this,i=Ie.access(n,t)-1;i?Ie.access(n,t,i):(n.removeEventListener(e,r,!0),Ie.remove(n,t))}}});var yt=r.location,bt=le.now(),Et=/\?/;le.parseJSON=function(e){return JSON.parse(e+"")},le.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new r.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||le.error("Invalid XML: "+e),t};var xt=/#.*$/,St=/([?&])_=[^&]*/,Ct=/^(.*?):[ \t]*([^\r\n]*)$/gm,wt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Tt=/^(?:GET|HEAD)$/,At=/^\/\//,It={},Lt={},Nt="*/".concat("*"),Rt=Z.createElement("a");Rt.href=yt.href,le.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:yt.href,type:"GET",isLocal:wt.test(yt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Nt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":le.parseJSON,"text xml":le.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Q(Q(e,le.ajaxSettings),t):Q(le.ajaxSettings,e)},ajaxPrefilter:q(It),ajaxTransport:q(Lt),ajax:function(e,t){function n(e,t,n,s){var u,p,y,b,x,C=t;2!==E&&(E=2,l&&r.clearTimeout(l),i=void 0,a=s||"",S.readyState=e>0?4:0,u=e>=200&&e<300||304===e,n&&(b=W(d,S,n)),b=X(d,b,S,u),u?(d.ifModified&&(x=S.getResponseHeader("Last-Modified"),x&&(le.lastModified[o]=x),(x=S.getResponseHeader("etag"))&&(le.etag[o]=x)),204===e||"HEAD"===d.type?C="nocontent":304===e?C="notmodified":(C=b.state,p=b.data,y=b.error,u=!y)):(y=C,!e&&C||(C="error",e<0&&(e=0))),S.status=e,S.statusText=(t||C)+"",u?g.resolveWith(f,[p,C,S]):g.rejectWith(f,[S,C,y]),S.statusCode(m),m=void 0,c&&h.trigger(u?"ajaxSuccess":"ajaxError",[S,d,u?p:y]),v.fireWith(f,[S,C]),c&&(h.trigger("ajaxComplete",[S,d]),--le.active||le.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var i,o,a,s,l,u,c,p,d=le.ajaxSetup({},t),f=d.context||d,h=d.context&&(f.nodeType||f.jquery)?le(f):le.event,g=le.Deferred(),v=le.Callbacks("once memory"),m=d.statusCode||{},y={},b={},E=0,x="canceled",S={readyState:0,getResponseHeader:function(e){var t;if(2===E){if(!s)for(s={};t=Ct.exec(a);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===E?a:null},setRequestHeader:function(e,t){var r=e.toLowerCase();return E||(e=b[r]=b[r]||e,y[e]=t),this},overrideMimeType:function(e){return E||(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(E<2)for(t in e)m[t]=[m[t],e[t]];else S.always(e[S.status]);return this},abort:function(e){var t=e||x;return i&&i.abort(t),n(0,t),this}};if(g.promise(S).complete=v.add,S.success=S.done,S.error=S.fail,d.url=((e||d.url||yt.href)+"").replace(xt,"").replace(At,yt.protocol+"//"),d.type=t.method||t.type||d.method||d.type,d.dataTypes=le.trim(d.dataType||"*").toLowerCase().match(Ce)||[""],null==d.crossDomain){u=Z.createElement("a");try{u.href=d.url,u.href=u.href,d.crossDomain=Rt.protocol+"//"+Rt.host!=u.protocol+"//"+u.host}catch(e){d.crossDomain=!0}}if(d.data&&d.processData&&"string"!=typeof d.data&&(d.data=le.param(d.data,d.traditional)),z(It,d,t,S),2===E)return S;c=le.event&&d.global,c&&0==le.active++&&le.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Tt.test(d.type),o=d.url,d.hasContent||(d.data&&(o=d.url+=(Et.test(o)?"&":"?")+d.data,delete d.data),!1===d.cache&&(d.url=St.test(o)?o.replace(St,"$1_="+bt++):o+(Et.test(o)?"&":"?")+"_="+bt++)),d.ifModified&&(le.lastModified[o]&&S.setRequestHeader("If-Modified-Since",le.lastModified[o]),le.etag[o]&&S.setRequestHeader("If-None-Match",le.etag[o])),(d.data&&d.hasContent&&!1!==d.contentType||t.contentType)&&S.setRequestHeader("Content-Type",d.contentType),S.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Nt+"; q=0.01":""):d.accepts["*"]);for(p in d.headers)S.setRequestHeader(p,d.headers[p]);if(d.beforeSend&&(!1===d.beforeSend.call(f,S,d)||2===E))return S.abort();x="abort";for(p in{success:1,error:1,complete:1})S[p](d[p]);if(i=z(Lt,d,t,S)){if(S.readyState=1,c&&h.trigger("ajaxSend",[S,d]),2===E)return S;d.async&&d.timeout>0&&(l=r.setTimeout(function(){S.abort("timeout")},d.timeout));try{E=1,i.send(y,n)}catch(e){if(!(E<2))throw e;n(-1,e)}}else n(-1,"No Transport");return S},getJSON:function(e,t,r){return le.get(e,t,r,"json")},getScript:function(e,t){return le.get(e,void 0,t,"script")}}),le.each(["get","post"],function(e,t){le[t]=function(e,r,n,i){return le.isFunction(r)&&(i=i||n,n=r,r=void 0),le.ajax(le.extend({url:e,type:t,dataType:i,data:r,success:n},le.isPlainObject(e)&&e))}}),le._evalUrl=function(e){return le.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},le.fn.extend({wrapAll:function(e){var t;return le.isFunction(e)?this.each(function(t){le(this).wrapAll(e.call(this,t))}):(this[0]&&(t=le(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return le.isFunction(e)?this.each(function(t){le(this).wrapInner(e.call(this,t))}):this.each(function(){var t=le(this),r=t.contents();r.length?r.wrapAll(e):t.append(e)})},wrap:function(e){var t=le.isFunction(e);return this.each(function(r){le(this).wrapAll(t?e.call(this,r):e)})},unwrap:function(){return this.parent().each(function(){le.nodeName(this,"body")||le(this).replaceWith(this.childNodes)}).end()}}),le.expr.filters.hidden=function(e){return!le.expr.filters.visible(e)},le.expr.filters.visible=function(e){return e.offsetWidth>0||e.offsetHeight>0||e.getClientRects().length>0};var _t=/%20/g,kt=/\[\]$/,Ot=/\r?\n/g,Pt=/^(?:submit|button|image|reset|file)$/i,Dt=/^(?:input|select|textarea|keygen)/i;le.param=function(e,t){var r,n=[],i=function(e,t){t=le.isFunction(t)?t():null==t?"":t,n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=le.ajaxSettings&&le.ajaxSettings.traditional),le.isArray(e)||e.jquery&&!le.isPlainObject(e))le.each(e,function(){i(this.name,this.value)});else for(r in e)Y(r,e[r],t,i);return n.join("&").replace(_t,"+")},le.fn.extend({serialize:function(){return le.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=le.prop(this,"elements");return e?le.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!le(this).is(":disabled")&&Dt.test(this.nodeName)&&!Pt.test(e)&&(this.checked||!De.test(e))}).map(function(e,t){var r=le(this).val();return null==r?null:le.isArray(r)?le.map(r,function(e){return{name:t.name,value:e.replace(Ot,"\r\n")}}):{name:t.name,value:r.replace(Ot,"\r\n")}}).get()}}),le.ajaxSettings.xhr=function(){try{return new r.XMLHttpRequest}catch(e){}};var Ft={0:200,1223:204},Mt=le.ajaxSettings.xhr();se.cors=!!Mt&&"withCredentials"in Mt,se.ajax=Mt=!!Mt,le.ajaxTransport(function(e){var t,n;if(se.cors||Mt&&!e.crossDomain)return{send:function(i,o){var a,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)s[a]=e.xhrFields[a];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(a in i)s.setRequestHeader(a,i[a]);t=function(e){return function(){t&&(t=n=s.onload=s.onerror=s.onabort=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Ft[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=t(),n=s.onerror=t("error"),void 0!==s.onabort?s.onabort=n:s.onreadystatechange=function(){4===s.readyState&&r.setTimeout(function(){t&&n()})},t=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}}),le.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return le.globalEval(e),e}}}),le.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),le.ajaxTransport("script",function(e){if(e.crossDomain){var t,r;return{send:function(n,i){t=le("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",r=function(e){t.remove(),r=null,e&&i("error"===e.type?404:200,e.type)}),Z.head.appendChild(t[0])},abort:function(){r&&r()}}}});var jt=[],$t=/(=)\?(?=&|$)|\?\?/;le.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=jt.pop()||le.expando+"_"+bt++;return this[e]=!0,e}}),le.ajaxPrefilter("json jsonp",function(e,t,n){var i,o,a,s=!1!==e.jsonp&&($t.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&$t.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=le.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace($t,"$1"+i):!1!==e.jsonp&&(e.url+=(Et.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return a||le.error(i+" was not called"),a[0]},e.dataTypes[0]="json",o=r[i],r[i]=function(){a=arguments},n.always(function(){void 0===o?le(r).removeProp(i):r[i]=o,e[i]&&(e.jsonpCallback=t.jsonpCallback,jt.push(i)),a&&le.isFunction(o)&&o(a[0]),a=o=void 0}),"script"}),le.parseHTML=function(e,t,r){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(r=t,t=!1),t=t||Z;var n=me.exec(e),i=!r&&[];return n?[t.createElement(n[1])]:(n=v([e],t,i),i&&i.length&&le(i).remove(),le.merge([],n.childNodes))};var Gt=le.fn.load;le.fn.load=function(e,t,r){if("string"!=typeof e&&Gt)return Gt.apply(this,arguments);var n,i,o,a=this,s=e.indexOf(" ");return s>-1&&(n=le.trim(e.slice(s)),e=e.slice(0,s)),le.isFunction(t)?(r=t,t=void 0):t&&"object"==typeof t&&(i="POST"),a.length>0&&le.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(n?le("<div>").append(le.parseHTML(e)).find(n):e)}).always(r&&function(e,t){a.each(function(){r.apply(this,o||[e.responseText,t,e])})}),this},le.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){le.fn[t]=function(e){return this.on(t,e)}}),le.expr.filters.animated=function(e){return le.grep(le.timers,function(t){return e===t.elem}).length},le.offset={setOffset:function(e,t,r){var n,i,o,a,s,l,u,c=le.css(e,"position"),p=le(e),d={};"static"===c&&(e.style.position="relative"),s=p.offset(),o=le.css(e,"top"),l=le.css(e,"left"),u=("absolute"===c||"fixed"===c)&&(o+l).indexOf("auto")>-1,u?(n=p.position(),a=n.top,i=n.left):(a=parseFloat(o)||0,i=parseFloat(l)||0),le.isFunction(t)&&(t=t.call(e,r,le.extend({},s))),null!=t.top&&(d.top=t.top-s.top+a),null!=t.left&&(d.left=t.left-s.left+i),"using"in t?t.using.call(e,d):p.css(d)}},le.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){le.offset.setOffset(this,e,t)});var t,r,n=this[0],i={top:0,left:0},o=n&&n.ownerDocument;if(o)return t=o.documentElement,le.contains(t,n)?(i=n.getBoundingClientRect(),r=K(o),{top:i.top+r.pageYOffset-t.clientTop,left:i.left+r.pageXOffset-t.clientLeft}):i},position:function(){if(this[0]){var e,t,r=this[0],n={top:0,left:0};return"fixed"===le.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),le.nodeName(e[0],"html")||(n=e.offset()),n.top+=le.css(e[0],"borderTopWidth",!0),n.left+=le.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-le.css(r,"marginTop",!0),left:t.left-n.left-le.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===le.css(e,"position");)e=e.offsetParent;return e||et})}}),le.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var r="pageYOffset"===t;le.fn[e]=function(n){return Te(this,function(e,n,i){var o=K(e);if(void 0===i)return o?o[t]:e[n];o?o.scrollTo(r?o.pageXOffset:i,r?i:o.pageYOffset):e[n]=i},e,n,arguments.length)}}),le.each(["top","left"],function(e,t){le.cssHooks[t]=_(se.pixelPosition,function(e,r){if(r)return r=R(e,t),Ke.test(r)?le(e).position()[t]+"px":r})}),le.each({Height:"height",Width:"width"},function(e,t){le.each({padding:"inner"+e,content:t,"":"outer"+e},function(r,n){le.fn[n]=function(n,i){var o=arguments.length&&(r||"boolean"!=typeof n),a=r||(!0===n||!0===i?"margin":"border");return Te(this,function(t,r,n){var i;return le.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===n?le.css(t,r,a):le.style(t,r,n,a)},t,o?n:void 0,o,null)}})}),le.fn.extend({bind:function(e,t,r){return this.on(e,null,t,r)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,r,n){return this.on(t,e,r,n)},undelegate:function(e,t,r){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",r)},size:function(){return this.length}}),le.fn.andSelf=le.fn.addBack,n=[],void 0!==(i=function(){return le}.apply(t,n))&&(e.exports=i);var Bt=r.jQuery,Ht=r.$;return le.noConflict=function(e){return r.$===le&&(r.$=Ht),e&&r.jQuery===le&&(r.jQuery=Bt),le},o||(r.jQuery=r.$=le),le})},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SparqlItemWorkerService=t.SparqlItemService=t.SimpleConstraint=t.Item=t.PropertyToValues=t.RichPropertyValue=t.PropertyAndValue=void 0;var i=r(42),o=n(i),a=r(15),s=n(a),l=r(18),u=n(l),c=r(19),p=n(c),d=r(1),f=n(d),h=r(2),g=n(h),v=r(0),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(v),y=r(89),b=r(7),E=r(90),x=r(32),S=r(92),C=t.PropertyAndValue=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];(0,f.default)(this,e),this.property=t,this.object=r,this.properties=n}return(0,g.default)(e,[{key:"pruned",value:function(){return new e(new y.PrunedRichNodeFromNode(this.property),new y.PrunedRichNodeFromNode(this.object),this.properties.map(function(e){return e.pruned()}))}}]),e}(),w=t.RichPropertyValue=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];(0,f.default)(this,e),this.value=t,this.properties=r},T=t.PropertyToValues=function(e){function t(e){(0,f.default)(this,t);var r=(0,u.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return r.values=[],r}return(0,p.default)(t,e),(0,g.default)(t,[{key:"toPropertyAndValues",value:function(e){return t.toPropertyAndValues(this,e)}}],[{key:"toPropertyAndValues",value:function(e,t){return e.values.map(function(t){return new C(e,t.value,(0,S.flatten)(t.properties.map(function(e){return e.values.map(function(t){return new C(e,t.value)})})))})}}]),t}(y.RichNodeFromRichNode),A=t.Item=function(e){function t(){(0,f.default)(this,t);var e=(0,u.default)(this,(t.__proto__||(0,s.default)(t)).apply(this,arguments));return e.localProperties=[],e.remoteProperties=[],e.localInverseProperties=[],e.remoteInverseProperties=[],e}return(0,p.default)(t,e),t}(y.FullRichNodeFromNode),I=(t.SimpleConstraint=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,f.default)(this,e),this.constraintString=t,this.priority=r},t.SparqlItemService=function(){function e(t){(0,f.default)(this,e),this.workerService=t}return e.$inject=["workerService"],(0,g.default)(e,[{key:"getItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments[2];return this.workerService.call("sparqlItemWorkerService","getItems",[[e.toCanonical()],t],r).then(function(e){return e[0]},null,function(e){return{endpointType:e.endpointType,endpoint:e.endpoint,item:e.items[0]}})}},{key:"getItems",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments[2];return this.workerService.call("sparqlItemWorkerService","getItems",[e.map(function(e){return e.toCanonical()}),t],r)}},{key:"getAllItems",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments[1];return this.workerService.call("sparqlItemWorkerService","getItems",[!1,e],t)}},{key:"createNewItem",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.workerService.call("sparqlItemWorkerService","createNewItem",[e.map(function(e){return e.pruned()})])}},{key:"alterItem",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.workerService.call("sparqlItemWorkerService","alterItem",[e,t.map(function(e){return e.pruned()}),r.map(function(e){return e.pruned()})])}},{key:"deleteItem",value:function(e){return this.workerService.call("sparqlItemWorkerService","deleteItem",[e])}}]),e}());I.naiveGetLocalItemPropertiesQuery='PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX mads: <http://www.loc.gov/mads/rdf/v1#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\nSELECT ?id ?itemLabel ?property ?propertyLabel ?object ?objectLabel {\n# STARTGRAPH\n  VALUES ?id { <IDS> }\n  ?id skos:prefLabel|mads:authoritativeLabel|rdfs:label ?itemLabel .\n  FILTER(LANG(?itemLabel)=\'\' || LANG(?itemLabel)=\'<PREFLANG>\')\n  ?id ?property ?object .\n  OPTIONAL {\n    ?property skos:prefLabel|rdfs:label ?propertyLabelP .\n    FILTER(LANG(?propertyLabelP)=\'\' || LANG(?propertyLabelP)=\'<PREFLANG>\')\n  }\n  BIND(COALESCE(?propertyLabelP,REPLACE(REPLACE(REPLACE(REPLACE(STR(?property),".*/",""),".*#",""),"_"," "),"([A-Z])"," $1")) AS ?propertyLabel)\n  OPTIONAL {\n    ?object skos:prefLabel|rdfs:label ?objectLabelP .\n    FILTER(LANG(?objectLabelP)=\'\' || LANG(?objectLabelP)=\'<PREFLANG>\')\n  }\n  BIND (IF(ISIRI(?object),COALESCE(?objectLabelP,REPLACE(REPLACE(REPLACE(REPLACE(STR(?object),".*/",""),".*#",""),"_"," "),"([A-Z])"," $1")),?object) AS ?objectLabel)\n# ENDGRAPH\n}',I.getLocalItemPropertiesQuery='PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX mads: <http://www.loc.gov/mads/rdf/v1#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\nPREFIX sf: <http://ldf.fi/functions#>\nSELECT ?id ?itemLabel ?property ?propertyLabel ?object ?objectLabel {\n# STARTGRAPH\n  VALUES ?id { <IDS> }\n  { ?id ?property ?object . }\n  UNION\n  { ?object ?property ?id . }\n  ?id sf:preferredLanguageLiteral (skos:prefLabel mads:authoritativeLabel rdfs:label skos:altLabel mads:variantLabel \'<PREFLANG>\' \'\' ?itemLabel) .\n  OPTIONAL {\n    ?property sf:preferredLanguageLiteral (skos:prefLabel mads:authoritativeLabel rdfs:label skos:altLabel mads:variantLabel \'<PREFLANG>\' \'\' ?propertyLabelP)\n  }\n  BIND(COALESCE(?propertyLabelP,REPLACE(REPLACE(REPLACE(REPLACE(STR(?property),".*/",""),".*#",""),"_"," "),"([A-Z])"," $1")) AS ?propertyLabel)\n  OPTIONAL {\n    ?object sf:preferredLanguageLiteral (skos:prefLabel mads:authoritativeLabel rdfs:label skos:altLabel mads:variantLabel \'<PREFLANG>\' \'\' ?objectLabelP) .\n  }\n  BIND (IF(ISIRI(?object),COALESCE(?objectLabelP,REPLACE(REPLACE(REPLACE(REPLACE(STR(?object),".*/",""),".*#",""),"_"," "),"([A-Z])"," $1")),?object) AS ?objectLabel)\n# ENDGRAPH\n}',I.getRemoteItemPropertiesQuery='PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX mads: <http://www.loc.gov/mads/rdf/v1#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\nPREFIX sf: <http://ldf.fi/functions#>\nSELECT ?id ?property ?propertyLabel ?object ?objectLabel {\nVALUES (?id ?oid) { <IDPAIRS> }\n?oid ?property ?object .\nOPTIONAL {\n  ?property sf:preferredLanguageLiteral (skos:prefLabel mads:authoritativeLabel rdfs:label skos:altLabel mads:variantLabel \'<PREFLANG>\' \'\' ?propertyLabelP)\n}\nBIND(COALESCE(?propertyLabelP,REPLACE(REPLACE(REPLACE(REPLACE(STR(?property),".*/",""),".*#",""),"_"," "),"([A-Z])"," $1")) AS ?propertyLabel)\nOPTIONAL {\n  ?object sf:preferredLanguageLiteral (skos:prefLabel mads:authoritativeLabel rdfs:label skos:altLabel mads:variantLabel \'<PREFLANG>\' \'\' ?objectLabelP) .\n}\nBIND (IF(ISIRI(?object),COALESCE(?objectLabelP,REPLACE(REPLACE(REPLACE(REPLACE(STR(?object),".*/",""),".*#",""),"_"," "),"([A-Z])"," $1")),?object) AS ?objectLabel)\n}\n',I.deleteItemQuery="DELETE {\n# STARTGRAPH\n  <ID> ?p ?o .\n  ?s ?p <ID> .\n# ENDGRAPH\n}\nWHERE {\n# STARTGRAPH\n  { <ID> ?p ?o } UNION { ?s ?p <ID> }\n# ENDGRAPH\n}\n";t.SparqlItemWorkerService=function(){function e(t,r,n,i){(0,f.default)(this,e),this.fibraSparqlService=t,this.$q=r,this.sparqlUpdateWorkerService=n,this.stateWorkerService=i}return e.$inject=["fibraSparqlService","$q","sparqlUpdateWorkerService","stateWorkerService"],(0,g.default)(e,[{key:"getItems",value:function(t){var r=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments[2],a=this.stateWorkerService.state.project.itemQuery;a=t?a.replace(/<IDS>/g,t.join("")):a.replace(/VALUES \?id { <IDS> }/g,""),a=a.replace(/<PREFLANG>/g,this.stateWorkerService.state.language);var s=new x.EMap(function(e){return new A(b.DataFactory.instance.namedNode(e))}),l=this.$q.defer();return this.fibraSparqlService.query(this.stateWorkerService.state.project.endpoint,a,{timeout:i}).then(function(t){var a=new x.EMap(function(){return new x.EMap}),u=new x.EMap(function(){return new x.EMap(function(){return new x.EMap})}),c=new b.ENodeMap(function(){return[]}),p=!0,d=!1,f=void 0;try{for(var h,g=(0,o.default)(t.results.bindings);!(p=(h=g.next()).done);p=!0){var v=h.value,m=s.goc(v.id.value);v.itemLabel&&(m.label=v.itemLabel.value),e.processItemResult(m.localProperties,a.goc(v.id.value),u.goc(v.id.value),c.goc(m),r.stateWorkerService.state.project.endpoint,v)}}catch(e){d=!0,f=e}finally{try{!p&&g.return&&g.return()}finally{if(d)throw f}}if(n){l.notify({endpointType:"primary",endpoint:r.stateWorkerService.state.project.endpoint,items:s.values()});var y="",S=!0,C=!1,w=void 0;try{for(var T,A=(0,o.default)(s.values());!(S=(T=A.next()).done);S=!0){var m=T.value;y+="("+m.toCanonical()+m.toCanonical()+")";var I=!0,L=!1,N=void 0;try{for(var R,_=(0,o.default)(c.get(m));!(I=(R=_.next()).done);I=!0){var k=R.value;y+="("+m.toCanonical()+k.toCanonical()+")"}}catch(e){L=!0,N=e}finally{try{!I&&_.return&&_.return()}finally{if(L)throw N}}}}catch(e){C=!0,w=e}finally{try{!S&&A.return&&A.return()}finally{if(C)throw w}}r.$q.all(r.stateWorkerService.state.project.remoteEndpoints().map(function(t){var n=t.itemQuery;return n=n.replace(/<IDPAIRS>/g,y),n=n.replace(/<PREFLANG>/g,r.stateWorkerService.state.language),r.fibraSparqlService.query(t.endpoint,n,{timeout:i}).then(function(r){if(0!==r.results.bindings.length){var n=!0,i=!1,p=void 0;try{for(var d,f=(0,o.default)(r.results.bindings);!(n=(d=f.next()).done);n=!0){var h=d.value,g=s.goc(h.id.value);e.processItemResult(g.remoteProperties,a.goc(h.id.value),u.goc(h.id.value),c.goc(g),t.id,h)}}catch(e){i=!0,p=e}finally{try{!n&&f.return&&f.return()}finally{if(i)throw p}}l.notify({endpointType:"remote",endpoint:t.id,items:s.values()})}},function(e){return l.notify({endpointType:"remote",endpoint:t.id,error:E.WorkerWorkerService.stripFunctions(e)})})})).then(function(){return l.resolve(s.values())})}else l.resolve(s.values())}),l.promise}},{key:"deleteItem",value:function(e){return this.fibraSparqlService.update(this.stateWorkerService.state.project.updateEndpoint,this.stateWorkerService.state.project.deleteItemQuery.replace(/<ID>/g,e.toCanonical())).then(function(e){return!0},function(e){return!1})}},{key:"alterItem",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=[],i=[];return t.forEach(function(t){return n.push(new b.Triple(e,t.property,t.object))}),r.forEach(function(t){return i.push(new b.Triple(e,t.property,t.object))}),this.sparqlUpdateWorkerService.updateGraphs(this.stateWorkerService.state.project.updateEndpoint,[new b.Graph(this.stateWorkerService.state.project.graph?b.DataFactory.namedNode(this.stateWorkerService.state.project.graph):b.DefaultGraph.instance,n)],[new b.Graph(this.stateWorkerService.state.project.graph?b.DataFactory.namedNode(this.stateWorkerService.state.project.graph):b.DefaultGraph.instance,i)])}},{key:"createNewItem",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.$q.defer(),r=new b.NamedNode(this.stateWorkerService.state.project.instanceNS+(0,S.UUID)());t.notify(r);var n=[];return e.forEach(function(e){return n.push(new b.Triple(r,e.property,e.object))}),this.sparqlUpdateWorkerService.updateGraphs(this.stateWorkerService.state.project.updateEndpoint,[new b.Graph(this.stateWorkerService.state.project.graph?b.DataFactory.namedNode(this.stateWorkerService.state.project.graph):b.DefaultGraph.instance,n)]).then(function(){return t.resolve(r)},t.reject,t.notify),t.promise}}],[{key:"processItemResult",value:function(e,t,r,n,i,o){if(o.property){var a=r.goc(o.property.value).goc(o.object.value,function(){var r=t.goc(o.property.value,function(){var t=new T(b.DataFactory.instance.nodeFromBinding(o.property));return o.propertyLabel&&(t.label=o.propertyLabel.value),e.push(t),t}),i=new y.FullRichNodeFromNode(b.DataFactory.instance.nodeFromBinding(o.object));return i.sourceEndpoints=[],r.values.push(new w(i)),b.OWL.sameAs.equals(r)&&n.push(i),i});a.sourceEndpoints.push(i),o.objectLabel&&!a.label&&(a.label=o.objectLabel.value)}}}]),e}();m.module("fibra.services.sparql-item-service",[]).config(["$provide",function(e){e.service("sparqlItemService",I)}])},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(95)),n(r(328)),n(r(329)),n(r(330)),n(r(331)),n(r(341)),n(r(342)),n(r(343)),n(r(200)),n(r(195)),n(r(344)),n(r(347))},function(e,t,r){!function(t){e.exports=t()}(function(){"use strict";function e(r,n){if(!(this instanceof e))return new e(r,n);this.options=n=n?ji(n):{},ji(ta,n,!1),f(n);var i=n.value;"string"==typeof i&&(i=new Ta(i,n.mode,null,n.lineSeparator)),this.doc=i;var o=new e.inputStyles[n.inputStyle](this),a=this.display=new t(r,i,o);a.wrapper.CodeMirror=this,u(this),s(this),n.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),n.autofocus&&!Ro&&a.input.focus(),m(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new _i,keySeq:null,specialChars:null};var l=this;Eo&&xo<11&&setTimeout(function(){l.display.input.reset(!0)},20),Ut(this),Yi(),xt(this),this.curOp.forceUpdate=!0,Kn(this,i),n.autofocus&&!Ro||l.hasFocus()?setTimeout($i(mr,this),20):yr(this);for(var c in ra)ra.hasOwnProperty(c)&&ra[c](this,n[c],na);S(this),n.finishInit&&n.finishInit(this);for(var p=0;p<sa.length;++p)sa[p](this);Ct(this),So&&n.lineWrapping&&"optimizelegibility"==getComputedStyle(a.lineDiv).textRendering&&(a.lineDiv.style.textRendering="auto")}function t(e,t,r){var n=this;this.input=r,n.scrollbarFiller=Ui("div",null,"CodeMirror-scrollbar-filler"),n.scrollbarFiller.setAttribute("cm-not-content","true"),n.gutterFiller=Ui("div",null,"CodeMirror-gutter-filler"),n.gutterFiller.setAttribute("cm-not-content","true"),n.lineDiv=Ui("div",null,"CodeMirror-code"),n.selectionDiv=Ui("div",null,null,"position: relative; z-index: 1"),n.cursorDiv=Ui("div",null,"CodeMirror-cursors"),n.measure=Ui("div",null,"CodeMirror-measure"),n.lineMeasure=Ui("div",null,"CodeMirror-measure"),n.lineSpace=Ui("div",[n.measure,n.lineMeasure,n.selectionDiv,n.cursorDiv,n.lineDiv],null,"position: relative; outline: none"),n.mover=Ui("div",[Ui("div",[n.lineSpace],"CodeMirror-lines")],null,"position: relative"),n.sizer=Ui("div",[n.mover],"CodeMirror-sizer"),n.sizerWidth=null,n.heightForcer=Ui("div",null,null,"position: absolute; height: "+Fa+"px; width: 1px;"),n.gutters=Ui("div",null,"CodeMirror-gutters"),n.lineGutter=null,n.scroller=Ui("div",[n.sizer,n.heightForcer,n.gutters],"CodeMirror-scroll"),n.scroller.setAttribute("tabIndex","-1"),n.wrapper=Ui("div",[n.scrollbarFiller,n.gutterFiller,n.scroller],"CodeMirror"),Eo&&xo<8&&(n.gutters.style.zIndex=-1,n.scroller.style.paddingRight=0),So||mo&&Ro||(n.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(n.wrapper):e(n.wrapper)),n.viewFrom=n.viewTo=t.first,n.reportedViewFrom=n.reportedViewTo=t.first,n.view=[],n.renderedView=null,n.externalMeasured=null,n.viewOffset=0,n.lastWrapHeight=n.lastWrapWidth=0,n.updateLineNumbers=null,n.nativeBarWidth=n.barHeight=n.barWidth=0,n.scrollbarsClipped=!1,n.lineNumWidth=n.lineNumInnerWidth=n.lineNumChars=null,n.alignWidgets=!1,n.cachedCharWidth=n.cachedTextHeight=n.cachedPaddingH=null,n.maxLine=null,n.maxLineLength=0,n.maxLineChanged=!1,n.wheelDX=n.wheelDY=n.wheelStartX=n.wheelStartY=null,n.shift=!1,n.selForContextMenu=null,n.activeTouch=null,r.init(n)}function r(t){t.doc.mode=e.getMode(t.options,t.doc.modeOption),n(t)}function n(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.frontier=e.doc.first,$e(e,100),e.state.modeGen++,e.curOp&&Ft(e)}function i(e){e.options.lineWrapping?(Za(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(Ja(e.display.wrapper,"CodeMirror-wrap"),d(e)),a(e),Ft(e),lt(e),setTimeout(function(){y(e)},100)}function o(e){var t=bt(e.display),r=e.options.lineWrapping,n=r&&Math.max(5,e.display.scroller.clientWidth/Et(e.display)-3);return function(i){if(Cn(e.doc,i))return 0;var o=0;if(i.widgets)for(var a=0;a<i.widgets.length;a++)i.widgets[a].height&&(o+=i.widgets[a].height);return r?o+(Math.ceil(i.text.length/n)||1)*t:o+t}}function a(e){var t=e.doc,r=o(e);t.iter(function(e){var t=r(e);t!=e.height&&ti(e,t)})}function s(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),lt(e)}function l(e){u(e),Ft(e),setTimeout(function(){x(e)},20)}function u(e){var t=e.display.gutters,r=e.options.gutters;Vi(t);for(var n=0;n<r.length;++n){var i=r[n],o=t.appendChild(Ui("div",null,"CodeMirror-gutter "+i));"CodeMirror-linenumbers"==i&&(e.display.lineGutter=o,o.style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=n?"":"none",c(e)}function c(e){var t=e.display.gutters.offsetWidth;e.display.sizer.style.marginLeft=t+"px"}function p(e){if(0==e.height)return 0;for(var t,r=e.text.length,n=e;t=vn(n);){var i=t.find(0,!0);n=i.from.line,r+=i.from.ch-i.to.ch}for(n=e;t=mn(n);){var i=t.find(0,!0);r-=n.text.length-i.from.ch,n=i.to.line,r+=n.text.length-i.to.ch}return r}function d(e){var t=e.display,r=e.doc;t.maxLine=Jn(r,r.first),t.maxLineLength=p(t.maxLine),t.maxLineChanged=!0,r.iter(function(e){var r=p(e);r>t.maxLineLength&&(t.maxLineLength=r,t.maxLine=e)})}function f(e){var t=Pi(e.gutters,"CodeMirror-linenumbers");-1==t&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):t>-1&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}function h(e){var t=e.display,r=t.gutters.offsetWidth,n=Math.round(e.doc.height+Ve(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?r:0,docHeight:n,scrollHeight:n+ze(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:r}}function g(e,t,r){this.cm=r;var n=this.vert=Ui("div",[Ui("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),i=this.horiz=Ui("div",[Ui("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");e(n),e(i),_a(n,"scroll",function(){n.clientHeight&&t(n.scrollTop,"vertical")}),_a(i,"scroll",function(){i.clientWidth&&t(i.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,Eo&&xo<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")}function v(){}function m(t){t.display.scrollbars&&(t.display.scrollbars.clear(),t.display.scrollbars.addClass&&Ja(t.display.wrapper,t.display.scrollbars.addClass)),t.display.scrollbars=new e.scrollbarModel[t.options.scrollbarStyle](function(e){t.display.wrapper.insertBefore(e,t.display.scrollbarFiller),_a(e,"mousedown",function(){t.state.focused&&setTimeout(function(){t.display.input.focus()},0)}),e.setAttribute("cm-not-content","true")},function(e,r){"horizontal"==r?or(t,e):ir(t,e)},t),t.display.scrollbars.addClass&&Za(t.display.wrapper,t.display.scrollbars.addClass)}function y(e,t){t||(t=h(e));var r=e.display.barWidth,n=e.display.barHeight;b(e,t);for(var i=0;i<4&&r!=e.display.barWidth||n!=e.display.barHeight;i++)r!=e.display.barWidth&&e.options.lineWrapping&&_(e),b(e,h(e)),r=e.display.barWidth,n=e.display.barHeight}function b(e,t){var r=e.display,n=r.scrollbars.update(t);r.sizer.style.paddingRight=(r.barWidth=n.right)+"px",r.sizer.style.paddingBottom=(r.barHeight=n.bottom)+"px",r.heightForcer.style.borderBottom=n.bottom+"px solid transparent",n.right&&n.bottom?(r.scrollbarFiller.style.display="block",r.scrollbarFiller.style.height=n.bottom+"px",r.scrollbarFiller.style.width=n.right+"px"):r.scrollbarFiller.style.display="",n.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(r.gutterFiller.style.display="block",r.gutterFiller.style.height=n.bottom+"px",r.gutterFiller.style.width=t.gutterWidth+"px"):r.gutterFiller.style.display=""}function E(e,t,r){var n=r&&null!=r.top?Math.max(0,r.top):e.scroller.scrollTop;n=Math.floor(n-Ue(e));var i=r&&null!=r.bottom?r.bottom:n+e.wrapper.clientHeight,o=ni(t,n),a=ni(t,i);if(r&&r.ensure){var s=r.ensure.from.line,l=r.ensure.to.line;s<o?(o=s,a=ni(t,ii(Jn(t,s))+e.wrapper.clientHeight)):Math.min(l,t.lastLine())>=a&&(o=ni(t,ii(Jn(t,l))-e.wrapper.clientHeight),a=l)}return{from:o,to:Math.max(a,o+1)}}function x(e){var t=e.display,r=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var n=w(t)-t.scroller.scrollLeft+e.doc.scrollLeft,i=t.gutters.offsetWidth,o=n+"px",a=0;a<r.length;a++)if(!r[a].hidden){e.options.fixedGutter&&r[a].gutter&&(r[a].gutter.style.left=o);var s=r[a].alignable;if(s)for(var l=0;l<s.length;l++)s[l].style.left=o}e.options.fixedGutter&&(t.gutters.style.left=n+i+"px")}}function S(e){if(!e.options.lineNumbers)return!1;var t=e.doc,r=C(e.options,t.first+t.size-1),n=e.display;if(r.length!=n.lineNumChars){var i=n.measure.appendChild(Ui("div",[Ui("div",r)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=i.firstChild.offsetWidth,a=i.offsetWidth-o;return n.lineGutter.style.width="",n.lineNumInnerWidth=Math.max(o,n.lineGutter.offsetWidth-a)+1,n.lineNumWidth=n.lineNumInnerWidth+a,n.lineNumChars=n.lineNumInnerWidth?r.length:-1,n.lineGutter.style.width=n.lineNumWidth+"px",c(e),!0}return!1}function C(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function w(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function T(e,t,r){var n=e.display;this.viewport=t,this.visible=E(n,e.doc,t),this.editorIsHidden=!n.wrapper.offsetWidth,this.wrapperHeight=n.wrapper.clientHeight,this.wrapperWidth=n.wrapper.clientWidth,this.oldDisplayWidth=Qe(e),this.force=r,this.dims=O(e),this.events=[]}function A(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=ze(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=ze(e)+"px",t.scrollbarsClipped=!0)}function I(e,t){var r=e.display,n=e.doc;if(t.editorIsHidden)return jt(e),!1;if(!t.force&&t.visible.from>=r.viewFrom&&t.visible.to<=r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>=r.viewTo)&&r.renderedView==r.view&&0==Ht(e))return!1;S(e)&&(jt(e),t.dims=O(e));var i=n.first+n.size,o=Math.max(t.visible.from-e.options.viewportMargin,n.first),a=Math.min(i,t.visible.to+e.options.viewportMargin);r.viewFrom<o&&o-r.viewFrom<20&&(o=Math.max(n.first,r.viewFrom)),r.viewTo>a&&r.viewTo-a<20&&(a=Math.min(i,r.viewTo)),jo&&(o=xn(e.doc,o),a=Sn(e.doc,a));var s=o!=r.viewFrom||a!=r.viewTo||r.lastWrapHeight!=t.wrapperHeight||r.lastWrapWidth!=t.wrapperWidth;Bt(e,o,a),r.viewOffset=ii(Jn(e.doc,r.viewFrom)),e.display.mover.style.top=r.viewOffset+"px";var l=Ht(e);if(!s&&0==l&&!t.force&&r.renderedView==r.view&&(null==r.updateLineNumbers||r.updateLineNumbers>=r.viewTo))return!1;var u=zi();return l>4&&(r.lineDiv.style.display="none"),P(e,r.updateLineNumbers,t.dims),l>4&&(r.lineDiv.style.display=""),r.renderedView=r.view,u&&zi()!=u&&u.offsetHeight&&u.focus(),Vi(r.cursorDiv),Vi(r.selectionDiv),r.gutters.style.height=r.sizer.style.minHeight=0,s&&(r.lastWrapHeight=t.wrapperHeight,r.lastWrapWidth=t.wrapperWidth,$e(e,400)),r.updateLineNumbers=null,!0}function L(e,t){for(var r=t.viewport,n=!0;(n&&e.options.lineWrapping&&t.oldDisplayWidth!=Qe(e)||(r&&null!=r.top&&(r={top:Math.min(e.doc.height+Ve(e.display)-We(e),r.top)}),t.visible=E(e.display,e.doc,r),!(t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)))&&I(e,t);n=!1){_(e);var i=h(e);Pe(e),y(e,i),R(e,i)}t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function N(e,t){var r=new T(e,t);if(I(e,r)){_(e),L(e,r);var n=h(e);Pe(e),y(e,n),R(e,n),r.finish()}}function R(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+ze(e)+"px"}function _(e){for(var t=e.display,r=t.lineDiv.offsetTop,n=0;n<t.view.length;n++){var i,o=t.view[n];if(!o.hidden){if(Eo&&xo<8){var a=o.node.offsetTop+o.node.offsetHeight;i=a-r,r=a}else{var s=o.node.getBoundingClientRect();i=s.bottom-s.top}var l=o.line.height-i;if(i<2&&(i=bt(t)),(l>.001||l<-.001)&&(ti(o.line,i),k(o.line),o.rest))for(var u=0;u<o.rest.length;u++)k(o.rest[u])}}}function k(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t)e.widgets[t].height=e.widgets[t].node.parentNode.offsetHeight}function O(e){for(var t=e.display,r={},n={},i=t.gutters.clientLeft,o=t.gutters.firstChild,a=0;o;o=o.nextSibling,++a)r[e.options.gutters[a]]=o.offsetLeft+o.clientLeft+i,n[e.options.gutters[a]]=o.clientWidth;return{fixedPos:w(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:r,gutterWidth:n,wrapperWidth:t.wrapper.clientWidth}}function P(e,t,r){function n(t){var r=t.nextSibling;return So&&_o&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),r}for(var i=e.display,o=e.options.lineNumbers,a=i.lineDiv,s=a.firstChild,l=i.view,u=i.viewFrom,c=0;c<l.length;c++){var p=l[c];if(p.hidden);else if(p.node&&p.node.parentNode==a){for(;s!=p.node;)s=n(s);var d=o&&null!=t&&t<=u&&p.lineNumber;p.changes&&(Pi(p.changes,"gutter")>-1&&(d=!1),D(e,p,u,r)),d&&(Vi(p.lineNumber),p.lineNumber.appendChild(document.createTextNode(C(e.options,u)))),s=p.node.nextSibling}else{var f=U(e,p,u,r);a.insertBefore(f,s)}u+=p.size}for(;s;)s=n(s)}function D(e,t,r,n){for(var i=0;i<t.changes.length;i++){var o=t.changes[i];"text"==o?$(e,t):"gutter"==o?B(e,t,r,n):"class"==o?G(t):"widget"==o&&H(e,t,n)}t.changes=null}function F(e){return e.node==e.text&&(e.node=Ui("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),Eo&&xo<8&&(e.node.style.zIndex=2)),e.node}function M(e){var t=e.bgClass?e.bgClass+" "+(e.line.bgClass||""):e.line.bgClass;if(t&&(t+=" CodeMirror-linebackground"),e.background)t?e.background.className=t:(e.background.parentNode.removeChild(e.background),e.background=null);else if(t){var r=F(e);e.background=r.insertBefore(Ui("div",null,t),r.firstChild)}}function j(e,t){var r=e.display.externalMeasured;return r&&r.line==t.line?(e.display.externalMeasured=null,t.measure=r.measure,r.built):$n(e,t)}function $(e,t){var r=t.text.className,n=j(e,t);t.text==t.node&&(t.node=n.pre),t.text.parentNode.replaceChild(n.pre,t.text),t.text=n.pre,n.bgClass!=t.bgClass||n.textClass!=t.textClass?(t.bgClass=n.bgClass,t.textClass=n.textClass,G(t)):r&&(t.text.className=r)}function G(e){M(e),e.line.wrapClass?F(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className="");var t=e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass;e.text.className=t||""}function B(e,t,r,n){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var i=F(t);t.gutterBackground=Ui("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px; width: "+n.gutterTotalWidth+"px"),i.insertBefore(t.gutterBackground,t.text)}var o=t.line.gutterMarkers;if(e.options.lineNumbers||o){var i=F(t),a=t.gutter=Ui("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px");if(e.display.input.setUneditable(a),i.insertBefore(a,t.text),t.line.gutterClass&&(a.className+=" "+t.line.gutterClass),!e.options.lineNumbers||o&&o["CodeMirror-linenumbers"]||(t.lineNumber=a.appendChild(Ui("div",C(e.options,r),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+n.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),o)for(var s=0;s<e.options.gutters.length;++s){var l=e.options.gutters[s],u=o.hasOwnProperty(l)&&o[l];u&&a.appendChild(Ui("div",[u],"CodeMirror-gutter-elt","left: "+n.gutterLeft[l]+"px; width: "+n.gutterWidth[l]+"px"))}}}function H(e,t,r){t.alignable&&(t.alignable=null);for(var n,i=t.node.firstChild;i;i=n){var n=i.nextSibling;"CodeMirror-linewidget"==i.className&&t.node.removeChild(i)}V(e,t,r)}function U(e,t,r,n){var i=j(e,t);return t.text=t.node=i.pre,i.bgClass&&(t.bgClass=i.bgClass),i.textClass&&(t.textClass=i.textClass),G(t),B(e,t,r,n),V(e,t,n),t.node}function V(e,t,r){if(q(e,t.line,t,r,!0),t.rest)for(var n=0;n<t.rest.length;n++)q(e,t.rest[n],t,r,!1)}function q(e,t,r,n,i){if(t.widgets)for(var o=F(r),a=0,s=t.widgets;a<s.length;++a){var l=s[a],u=Ui("div",[l.node],"CodeMirror-linewidget");l.handleMouseEvents||u.setAttribute("cm-ignore-events","true"),z(l,u,r,n),e.display.input.setUneditable(u),i&&l.above?o.insertBefore(u,r.gutter||r.text):o.appendChild(u),Ti(l,"redraw")}}function z(e,t,r,n){if(e.noHScroll){(r.alignable||(r.alignable=[])).push(t);var i=n.wrapperWidth;t.style.left=n.fixedPos+"px",e.coverGutter||(i-=n.gutterTotalWidth,t.style.paddingLeft=n.gutterTotalWidth+"px"),t.style.width=i+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-n.gutterTotalWidth+"px"))}function Q(e){return $o(e.line,e.ch)}function W(e,t){return Go(e,t)<0?t:e}function X(e,t){return Go(e,t)<0?e:t}function Y(e){e.state.focused||(e.display.input.focus(),mr(e))}function K(e,t,r,n,i){var o=e.doc;e.display.shift=!1,n||(n=o.sel);var a=e.state.pasteIncoming||"paste"==i,s=o.splitLines(t),l=null;if(a&&n.ranges.length>1)if(Bo&&Bo.text.join("\n")==t){if(n.ranges.length%Bo.text.length==0){l=[];for(var u=0;u<Bo.text.length;u++)l.push(o.splitLines(Bo.text[u]))}}else s.length==n.ranges.length&&(l=Di(s,function(e){return[e]}));for(var u=n.ranges.length-1;u>=0;u--){var c=n.ranges[u],p=c.from(),d=c.to();c.empty()&&(r&&r>0?p=$o(p.line,p.ch-r):e.state.overwrite&&!a?d=$o(d.line,Math.min(Jn(o,d.line).text.length,d.ch+Oi(s).length)):Bo&&Bo.lineWise&&Bo.text.join("\n")==t&&(p=d=$o(p.line,0)));var f=e.curOp.updateInput,h={from:p,to:d,text:l?l[u%l.length]:s,origin:i||(a?"paste":e.state.cutIncoming?"cut":"+input")};Ar(e.doc,h),Ti(e,"inputRead",e,h)}t&&!a&&Z(e,t),jr(e),e.curOp.updateInput=f,e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=!1}function J(e,t){var r=e.clipboardData&&e.clipboardData.getData("text/plain");if(r)return e.preventDefault(),t.isReadOnly()||t.options.disableInput||Rt(t,function(){K(t,r,0,null,"paste")}),!0}function Z(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var r=e.doc.sel,n=r.ranges.length-1;n>=0;n--){var i=r.ranges[n];if(!(i.head.ch>100||n&&r.ranges[n-1].head.line==i.head.line)){var o=e.getModeAt(i.head),a=!1;if(o.electricChars){for(var s=0;s<o.electricChars.length;s++)if(t.indexOf(o.electricChars.charAt(s))>-1){a=Gr(e,i.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(Jn(e.doc,i.head.line).text.slice(0,i.head.ch))&&(a=Gr(e,i.head.line,"smart"));a&&Ti(e,"electricInput",e,i.head.line)}}}function ee(e){for(var t=[],r=[],n=0;n<e.doc.sel.ranges.length;n++){var i=e.doc.sel.ranges[n].head.line,o={anchor:$o(i,0),head:$o(i+1,0)};r.push(o),t.push(e.getRange(o.anchor,o.head))}return{text:t,ranges:r}}function te(e){e.setAttribute("autocorrect","off"),e.setAttribute("autocapitalize","off"),e.setAttribute("spellcheck","false")}function re(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new _i,this.inaccurateSelection=!1,this.hasSelection=!1,this.composing=null}function ne(){var e=Ui("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),t=Ui("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return So?e.style.width="1000px":e.setAttribute("wrap","off"),No&&(e.style.border="1px solid black"),te(e),t}function ie(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new _i,this.gracePeriod=!1}function oe(e,t){var r=Ze(e,t.line);if(!r||r.hidden)return null;var n=Jn(e.doc,t.line),i=Ye(r,n,t.line),o=oi(n),a="left";if(o){a=co(o,t.ch)%2?"right":"left"}var s=rt(i.map,t.ch,a);return s.offset="right"==s.collapse?s.end:s.start,s}function ae(e,t){return t&&(e.bad=!0),e}function se(e,t,r){var n;if(t==e.display.lineDiv){if(!(n=e.display.lineDiv.childNodes[r]))return ae(e.clipPos($o(e.display.viewTo-1)),!0);t=null,r=0}else for(n=t;;n=n.parentNode){if(!n||n==e.display.lineDiv)return null;if(n.parentNode&&n.parentNode==e.display.lineDiv)break}for(var i=0;i<e.display.view.length;i++){var o=e.display.view[i];if(o.node==n)return le(o,t,r)}}function le(e,t,r){function n(t,r,n){for(var i=-1;i<(c?c.length:0);i++)for(var o=i<0?u.map:c[i],a=0;a<o.length;a+=3){var s=o[a+2];if(s==t||s==r){var l=ri(i<0?e.line:e.rest[i]),p=o[a]+n;return(n<0||s!=t)&&(p=o[a+(n?1:0)]),$o(l,p)}}}var i=e.text.firstChild,o=!1;if(!t||!Xa(i,t))return ae($o(ri(e.line),0),!0);if(t==i&&(o=!0,t=i.childNodes[r],r=0,!t)){var a=e.rest?Oi(e.rest):e.line;return ae($o(ri(a),a.text.length),o)}var s=3==t.nodeType?t:null,l=t;for(s||1!=t.childNodes.length||3!=t.firstChild.nodeType||(s=t.firstChild,r&&(r=s.nodeValue.length));l.parentNode!=i;)l=l.parentNode;var u=e.measure,c=u.maps,p=n(s,l,r);if(p)return ae(p,o);for(var d=l.nextSibling,f=s?s.nodeValue.length-r:0;d;d=d.nextSibling){if(p=n(d,d.firstChild,0))return ae($o(p.line,p.ch-f),o);f+=d.textContent.length}for(var h=l.previousSibling,f=r;h;h=h.previousSibling){if(p=n(h,h.firstChild,-1))return ae($o(p.line,p.ch+f),o);f+=d.textContent.length}}function ue(e,t,r,n,i){function o(e){return function(t){return t.id==e}}function a(t){if(1==t.nodeType){var r=t.getAttribute("cm-text");if(null!=r)return""==r&&(r=t.textContent.replace(/\u200b/g,"")),void(s+=r);var c,p=t.getAttribute("cm-marker");if(p){var d=e.findMarks($o(n,0),$o(i+1,0),o(+p));return void(d.length&&(c=d[0].find())&&(s+=Zn(e.doc,c.from,c.to).join(u)))}if("false"==t.getAttribute("contenteditable"))return;for(var f=0;f<t.childNodes.length;f++)a(t.childNodes[f]);/^(pre|div|p)$/i.test(t.nodeName)&&(l=!0)}else if(3==t.nodeType){var h=t.nodeValue;if(!h)return;l&&(s+=u,l=!1),s+=h}}for(var s="",l=!1,u=e.doc.lineSeparator();a(t),t!=r;)t=t.nextSibling;return s}function ce(e,t){this.ranges=e,this.primIndex=t}function pe(e,t){this.anchor=e,this.head=t}function de(e,t){var r=e[t];e.sort(function(e,t){return Go(e.from(),t.from())}),t=Pi(e,r);for(var n=1;n<e.length;n++){var i=e[n],o=e[n-1];if(Go(o.to(),i.from())>=0){var a=X(o.from(),i.from()),s=W(o.to(),i.to()),l=o.empty()?i.from()==i.head:o.from()==o.head;n<=t&&--t,e.splice(--n,2,new pe(l?s:a,l?a:s))}}return new ce(e,t)}function fe(e,t){return new ce([new pe(e,t||e)],0)}function he(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function ge(e,t){if(t.line<e.first)return $o(e.first,0);var r=e.first+e.size-1;return t.line>r?$o(r,Jn(e,r).text.length):ve(t,Jn(e,t.line).text.length)}function ve(e,t){var r=e.ch;return null==r||r>t?$o(e.line,t):r<0?$o(e.line,0):e}function me(e,t){return t>=e.first&&t<e.first+e.size}function ye(e,t){for(var r=[],n=0;n<t.length;n++)r[n]=ge(e,t[n]);return r}function be(e,t,r,n){if(e.cm&&e.cm.display.shift||e.extend){var i=t.anchor;if(n){var o=Go(r,i)<0;o!=Go(n,i)<0?(i=r,r=n):o!=Go(r,n)<0&&(r=n)}return new pe(i,r)}return new pe(n||r,r)}function Ee(e,t,r,n){Ae(e,new ce([be(e,e.sel.primary(),t,r)],0),n)}function xe(e,t,r){for(var n=[],i=0;i<e.sel.ranges.length;i++)n[i]=be(e,e.sel.ranges[i],t[i],null);Ae(e,de(n,e.sel.primIndex),r)}function Se(e,t,r,n){var i=e.sel.ranges.slice(0);i[t]=r,Ae(e,de(i,e.sel.primIndex),n)}function Ce(e,t,r,n){Ae(e,fe(t,r),n)}function we(e,t,r){var n={ranges:t.ranges,update:function(t){this.ranges=[];for(var r=0;r<t.length;r++)this.ranges[r]=new pe(ge(e,t[r].anchor),ge(e,t[r].head))},origin:r&&r.origin};return Pa(e,"beforeSelectionChange",e,n),e.cm&&Pa(e.cm,"beforeSelectionChange",e.cm,n),n.ranges!=t.ranges?de(n.ranges,n.ranges.length-1):t}function Te(e,t,r){var n=e.history.done,i=Oi(n);i&&i.ranges?(n[n.length-1]=t,Ie(e,t,r)):Ae(e,t,r)}function Ae(e,t,r){Ie(e,t,r),di(e,e.sel,e.cm?e.cm.curOp.id:NaN,r)}function Ie(e,t,r){(Ni(e,"beforeSelectionChange")||e.cm&&Ni(e.cm,"beforeSelectionChange"))&&(t=we(e,t,r)),Le(e,Re(e,t,r&&r.bias||(Go(t.primary().head,e.sel.primary().head)<0?-1:1),!0)),r&&!1===r.scroll||!e.cm||jr(e.cm)}function Le(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=!0,Li(e.cm)),Ti(e,"cursorActivity",e))}function Ne(e){Le(e,Re(e,e.sel,null,!1),ja)}function Re(e,t,r,n){for(var i,o=0;o<t.ranges.length;o++){var a=t.ranges[o],s=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[o],l=ke(e,a.anchor,s&&s.anchor,r,n),u=ke(e,a.head,s&&s.head,r,n);(i||l!=a.anchor||u!=a.head)&&(i||(i=t.ranges.slice(0,o)),i[o]=new pe(l,u))}return i?de(i,t.primIndex):t}function _e(e,t,r,n,i){var o=Jn(e,t.line);if(o.markedSpans)for(var a=0;a<o.markedSpans.length;++a){var s=o.markedSpans[a],l=s.marker;if((null==s.from||(l.inclusiveLeft?s.from<=t.ch:s.from<t.ch))&&(null==s.to||(l.inclusiveRight?s.to>=t.ch:s.to>t.ch))){if(i&&(Pa(l,"beforeCursorEnter"),l.explicitlyCleared)){if(o.markedSpans){--a;continue}break}if(!l.atomic)continue;if(r){var u,c=l.find(n<0?1:-1);if((n<0?l.inclusiveRight:l.inclusiveLeft)&&(c=Oe(e,c,-n,c&&c.line==t.line?o:null)),c&&c.line==t.line&&(u=Go(c,r))&&(n<0?u<0:u>0))return _e(e,c,t,n,i)}var p=l.find(n<0?-1:1);return(n<0?l.inclusiveLeft:l.inclusiveRight)&&(p=Oe(e,p,n,p.line==t.line?o:null)),p?_e(e,p,t,n,i):null}}return t}function ke(e,t,r,n,i){var o=n||1,a=_e(e,t,r,o,i)||!i&&_e(e,t,r,o,!0)||_e(e,t,r,-o,i)||!i&&_e(e,t,r,-o,!0);return a||(e.cantEdit=!0,$o(e.first,0))}function Oe(e,t,r,n){return r<0&&0==t.ch?t.line>e.first?ge(e,$o(t.line-1)):null:r>0&&t.ch==(n||Jn(e,t.line)).text.length?t.line<e.first+e.size-1?$o(t.line+1,0):null:new $o(t.line,t.ch+r)}function Pe(e){e.display.input.showSelection(e.display.input.prepareSelection())}function De(e,t){for(var r=e.doc,n={},i=n.cursors=document.createDocumentFragment(),o=n.selection=document.createDocumentFragment(),a=0;a<r.sel.ranges.length;a++)if(!1!==t||a!=r.sel.primIndex){var s=r.sel.ranges[a];if(!(s.from().line>=e.display.viewTo||s.to().line<e.display.viewFrom)){var l=s.empty();(l||e.options.showCursorWhenSelecting)&&Fe(e,s.head,i),l||Me(e,s,o)}}return n}function Fe(e,t,r){var n=ht(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),i=r.appendChild(Ui("div","","CodeMirror-cursor"));if(i.style.left=n.left+"px",i.style.top=n.top+"px",i.style.height=Math.max(0,n.bottom-n.top)*e.options.cursorHeight+"px",n.other){var o=r.appendChild(Ui("div","","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=n.other.left+"px",o.style.top=n.other.top+"px",o.style.height=.85*(n.other.bottom-n.other.top)+"px"}}function Me(e,t,r){function n(e,t,r,n){t<0&&(t=0),t=Math.round(t),n=Math.round(n),s.appendChild(Ui("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px; top: "+t+"px; width: "+(null==r?c-e:r)+"px; height: "+(n-t)+"px"))}function i(t,r,i){function o(r,n){return ft(e,$o(t,r),"div",p,n)}var s,l,p=Jn(a,t),d=p.text.length;return to(oi(p),r||0,null==i?d:i,function(e,t,a){var p,f,h,g=o(e,"left");if(e==t)p=g,f=h=g.left;else{if(p=o(t-1,"right"),"rtl"==a){var v=g;g=p,p=v}f=g.left,h=p.right}null==r&&0==e&&(f=u),p.top-g.top>3&&(n(f,g.top,null,g.bottom),f=u,g.bottom<p.top&&n(f,g.bottom,null,p.top)),null==i&&t==d&&(h=c),(!s||g.top<s.top||g.top==s.top&&g.left<s.left)&&(s=g),(!l||p.bottom>l.bottom||p.bottom==l.bottom&&p.right>l.right)&&(l=p),f<u+1&&(f=u),n(f,p.top,h-f,p.bottom)}),{start:s,end:l}}var o=e.display,a=e.doc,s=document.createDocumentFragment(),l=qe(e.display),u=l.left,c=Math.max(o.sizerWidth,Qe(e)-o.sizer.offsetLeft)-l.right,p=t.from(),d=t.to();if(p.line==d.line)i(p.line,p.ch,d.ch);else{var f=Jn(a,p.line),h=Jn(a,d.line),g=bn(f)==bn(h),v=i(p.line,p.ch,g?f.text.length+1:null).end,m=i(d.line,g?0:null,d.ch).start;g&&(v.top<m.top-2?(n(v.right,v.top,null,v.bottom),n(u,m.top,m.left,m.bottom)):n(v.right,v.top,m.left-v.right,v.bottom)),v.bottom<m.top&&n(u,v.bottom,null,m.top)}r.appendChild(s)}function je(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var r=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){t.cursorDiv.style.visibility=(r=!r)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function $e(e,t){e.doc.mode.startState&&e.doc.frontier<e.display.viewTo&&e.state.highlight.set(t,$i(Ge,e))}function Ge(e){var t=e.doc;if(t.frontier<t.first&&(t.frontier=t.first),!(t.frontier>=e.display.viewTo)){var r=+new Date+e.options.workTime,n=ua(t.mode,He(e,t.frontier)),i=[];t.iter(t.frontier,Math.min(t.first+t.size,e.display.viewTo+500),function(o){if(t.frontier>=e.display.viewFrom){var a=o.styles,s=o.text.length>e.options.maxHighlightLength,l=Dn(e,o,s?ua(t.mode,n):n,!0);o.styles=l.styles;var u=o.styleClasses,c=l.classes;c?o.styleClasses=c:u&&(o.styleClasses=null);for(var p=!a||a.length!=o.styles.length||u!=c&&(!u||!c||u.bgClass!=c.bgClass||u.textClass!=c.textClass),d=0;!p&&d<a.length;++d)p=a[d]!=o.styles[d];p&&i.push(t.frontier),o.stateAfter=s?n:ua(t.mode,n)}else o.text.length<=e.options.maxHighlightLength&&Mn(e,o.text,n),o.stateAfter=t.frontier%5==0?ua(t.mode,n):null;if(++t.frontier,+new Date>r)return $e(e,e.options.workDelay),!0}),i.length&&Rt(e,function(){for(var t=0;t<i.length;t++)Mt(e,i[t],"text")})}}function Be(e,t,r){for(var n,i,o=e.doc,a=r?-1:t-(e.doc.mode.innerMode?1e3:100),s=t;s>a;--s){if(s<=o.first)return o.first;var l=Jn(o,s-1);if(l.stateAfter&&(!r||s<=o.frontier))return s;var u=Ba(l.text,null,e.options.tabSize);(null==i||n>u)&&(i=s-1,n=u)}return i}function He(e,t,r){var n=e.doc,i=e.display;if(!n.mode.startState)return!0;var o=Be(e,t,r),a=o>n.first&&Jn(n,o-1).stateAfter;return a=a?ua(n.mode,a):ca(n.mode),n.iter(o,t,function(r){Mn(e,r.text,a);var s=o==t-1||o%5==0||o>=i.viewFrom&&o<i.viewTo;r.stateAfter=s?ua(n.mode,a):null,++o}),r&&(n.frontier=o),a}function Ue(e){return e.lineSpace.offsetTop}function Ve(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function qe(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=qi(e.measure,Ui("pre","x")),r=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,n={left:parseInt(r.paddingLeft),right:parseInt(r.paddingRight)};return isNaN(n.left)||isNaN(n.right)||(e.cachedPaddingH=n),n}function ze(e){return Fa-e.display.nativeBarWidth}function Qe(e){return e.display.scroller.clientWidth-ze(e)-e.display.barWidth}function We(e){return e.display.scroller.clientHeight-ze(e)-e.display.barHeight}function Xe(e,t,r){var n=e.options.lineWrapping,i=n&&Qe(e);if(!t.measure.heights||n&&t.measure.width!=i){var o=t.measure.heights=[];if(n){t.measure.width=i;for(var a=t.text.firstChild.getClientRects(),s=0;s<a.length-1;s++){var l=a[s],u=a[s+1];Math.abs(l.bottom-u.bottom)>2&&o.push((l.bottom+u.top)/2-r.top)}}o.push(r.bottom-r.top)}}function Ye(e,t,r){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var n=0;n<e.rest.length;n++)if(e.rest[n]==t)return{map:e.measure.maps[n],cache:e.measure.caches[n]};for(var n=0;n<e.rest.length;n++)if(ri(e.rest[n])>r)return{map:e.measure.maps[n],cache:e.measure.caches[n],before:!0}}function Ke(e,t){t=bn(t);var r=ri(t),n=e.display.externalMeasured=new Pt(e.doc,t,r);n.lineN=r;var i=n.built=$n(e,n);return n.text=i.pre,qi(e.display.lineMeasure,i.pre),n}function Je(e,t,r,n){return tt(e,et(e,t),r,n)}function Ze(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[$t(e,t)];var r=e.display.externalMeasured;return r&&t>=r.lineN&&t<r.lineN+r.size?r:void 0}function et(e,t){var r=ri(t),n=Ze(e,r);n&&!n.text?n=null:n&&n.changes&&(D(e,n,r,O(e)),e.curOp.forceUpdate=!0),n||(n=Ke(e,t));var i=Ye(n,t,r);return{line:t,view:n,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function tt(e,t,r,n,i){t.before&&(r=-1);var o,a=r+(n||"");return t.cache.hasOwnProperty(a)?o=t.cache[a]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(Xe(e,t.view,t.rect),t.hasHeights=!0),o=it(e,t,r,n),o.bogus||(t.cache[a]=o)),{left:o.left,right:o.right,top:i?o.rtop:o.top,bottom:i?o.rbottom:o.bottom}}function rt(e,t,r){for(var n,i,o,a,s=0;s<e.length;s+=3){var l=e[s],u=e[s+1];if(t<l?(i=0,o=1,a="left"):t<u?(i=t-l,o=i+1):(s==e.length-3||t==u&&e[s+3]>t)&&(o=u-l,i=o-1,t>=u&&(a="right")),null!=i){if(n=e[s+2],l==u&&r==(n.insertLeft?"left":"right")&&(a=r),"left"==r&&0==i)for(;s&&e[s-2]==e[s-3]&&e[s-1].insertLeft;)n=e[2+(s-=3)],a="left";if("right"==r&&i==u-l)for(;s<e.length-3&&e[s+3]==e[s+4]&&!e[s+5].insertLeft;)n=e[(s+=3)+2],a="right";break}}return{node:n,start:i,end:o,collapse:a,coverStart:l,coverEnd:u}}function nt(e,t){var r=qo;if("left"==t)for(var n=0;n<e.length&&(r=e[n]).left==r.right;n++);else for(var n=e.length-1;n>=0&&(r=e[n]).left==r.right;n--);return r}function it(e,t,r,n){var i,o=rt(t.map,r,n),a=o.node,s=o.start,l=o.end,u=o.collapse;if(3==a.nodeType){for(var c=0;c<4;c++){for(;s&&Hi(t.line.text.charAt(o.coverStart+s));)--s;for(;o.coverStart+l<o.coverEnd&&Hi(t.line.text.charAt(o.coverStart+l));)++l;if(i=Eo&&xo<9&&0==s&&l==o.coverEnd-o.coverStart?a.parentNode.getBoundingClientRect():nt(qa(a,s,l).getClientRects(),n),i.left||i.right||0==s)break;l=s,s-=1,u="right"}Eo&&xo<11&&(i=ot(e.display.measure,i))}else{s>0&&(u=n="right");var p;i=e.options.lineWrapping&&(p=a.getClientRects()).length>1?p["right"==n?p.length-1:0]:a.getBoundingClientRect()}if(Eo&&xo<9&&!s&&(!i||!i.left&&!i.right)){var d=a.parentNode.getClientRects()[0];i=d?{left:d.left,right:d.left+Et(e.display),top:d.top,bottom:d.bottom}:qo}for(var f=i.top-t.rect.top,h=i.bottom-t.rect.top,g=(f+h)/2,v=t.view.measure.heights,c=0;c<v.length-1&&!(g<v[c]);c++);var m=c?v[c-1]:0,y=v[c],b={left:("right"==u?i.right:i.left)-t.rect.left,right:("left"==u?i.left:i.right)-t.rect.left,top:m,bottom:y};return i.left||i.right||(b.bogus=!0),e.options.singleCursorHeightPerLine||(b.rtop=f,b.rbottom=h),b}function ot(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!eo(e))return t;var r=screen.logicalXDPI/screen.deviceXDPI,n=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*r,right:t.right*r,top:t.top*n,bottom:t.bottom*n}}function at(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function st(e){e.display.externalMeasure=null,Vi(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)at(e.display.view[t])}function lt(e){st(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function ut(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function ct(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function pt(e,t,r,n){if(t.widgets)for(var i=0;i<t.widgets.length;++i)if(t.widgets[i].above){var o=An(t.widgets[i]);r.top+=o,r.bottom+=o}if("line"==n)return r;n||(n="local");var a=ii(t);if("local"==n?a+=Ue(e.display):a-=e.display.viewOffset,"page"==n||"window"==n){var s=e.display.lineSpace.getBoundingClientRect();a+=s.top+("window"==n?0:ct());var l=s.left+("window"==n?0:ut());r.left+=l,r.right+=l}return r.top+=a,r.bottom+=a,r}function dt(e,t,r){if("div"==r)return t;var n=t.left,i=t.top;if("page"==r)n-=ut(),i-=ct();else if("local"==r||!r){var o=e.display.sizer.getBoundingClientRect();n+=o.left,i+=o.top}var a=e.display.lineSpace.getBoundingClientRect();return{left:n-a.left,top:i-a.top}}function ft(e,t,r,n,i){return n||(n=Jn(e.doc,t.line)),pt(e,n,Je(e,n,t.ch,i),r)}function ht(e,t,r,n,i,o){function a(t,a){var s=tt(e,i,t,a?"right":"left",o);return a?s.left=s.right:s.right=s.left,pt(e,n,s,r)}function s(e,t){var r=l[t],n=r.level%2;return e==ro(r)&&t&&r.level<l[t-1].level?(r=l[--t],e=no(r)-(r.level%2?0:1),n=!0):e==no(r)&&t<l.length-1&&r.level<l[t+1].level&&(r=l[++t],e=ro(r)-r.level%2,n=!1),n&&e==r.to&&e>r.from?a(e-1):a(e,n)}n=n||Jn(e.doc,t.line),i||(i=et(e,n));var l=oi(n),u=t.ch;if(!l)return a(u);var c=co(l,u),p=s(u,c);return null!=ss&&(p.other=s(u,ss)),p}function gt(e,t){var r=0,t=ge(e.doc,t);e.options.lineWrapping||(r=Et(e.display)*t.ch);var n=Jn(e.doc,t.line),i=ii(n)+Ue(e.display);return{left:r,right:r,top:i,bottom:i+n.height}}function vt(e,t,r,n){var i=$o(e,t);return i.xRel=n,r&&(i.outside=!0),i}function mt(e,t,r){var n=e.doc;if((r+=e.display.viewOffset)<0)return vt(n.first,0,!0,-1);var i=ni(n,r),o=n.first+n.size-1;if(i>o)return vt(n.first+n.size-1,Jn(n,o).text.length,!0,1);t<0&&(t=0);for(var a=Jn(n,i);;){var s=yt(e,a,i,t,r),l=mn(a),u=l&&l.find(0,!0);if(!l||!(s.ch>u.from.ch||s.ch==u.from.ch&&s.xRel>0))return s;i=ri(a=u.to.line)}}function yt(e,t,r,n,i){function o(n){var i=ht(e,$o(r,n),"line",t,u);return s=!0,a>i.bottom?i.left-l:a<i.top?i.left+l:(s=!1,i.left)}var a=i-ii(t),s=!1,l=2*e.display.wrapper.clientWidth,u=et(e,t),c=oi(t),p=t.text.length,d=io(t),f=oo(t),h=o(d),g=s,v=o(f),m=s;if(n>v)return vt(r,f,m,1);for(;;){if(c?f==d||f==fo(t,d,1):f-d<=1){var y=n<h||n-h<=v-n?d:f,b=y==d?g:m,E=n-(y==d?h:v);if(m&&!c&&!/\s/.test(t.text.charAt(y))&&E>0&&y<t.text.length&&u.view.measure.heights.length>1){var x=tt(e,u,y,"right");a<=x.bottom&&a>=x.top&&Math.abs(n-x.right)<E&&(b=!1,y++,E=n-x.right)}for(;Hi(t.text.charAt(y));)++y;return vt(r,y,b,E<-1?-1:E>1?1:0)}var S=Math.ceil(p/2),C=d+S;if(c){C=d;for(var w=0;w<S;++w)C=fo(t,C,1)}var T=o(C);T>n?(f=C,v=T,(m=s)&&(v+=1e3),p=S):(d=C,h=T,g=s,p-=S)}}function bt(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==Ho){Ho=Ui("pre");for(var t=0;t<49;++t)Ho.appendChild(document.createTextNode("x")),Ho.appendChild(Ui("br"));Ho.appendChild(document.createTextNode("x"))}qi(e.measure,Ho);var r=Ho.offsetHeight/50;return r>3&&(e.cachedTextHeight=r),Vi(e.measure),r||1}function Et(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=Ui("span","xxxxxxxxxx"),r=Ui("pre",[t]);qi(e.measure,r);var n=t.getBoundingClientRect(),i=(n.right-n.left)/10;return i>2&&(e.cachedCharWidth=i),i||10}function xt(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Qo},zo?zo.ops.push(e.curOp):e.curOp.ownsGroup=zo={ops:[e.curOp],delayedCallbacks:[]}}function St(e){var t=e.delayedCallbacks,r=0;do{for(;r<t.length;r++)t[r].call(null);for(var n=0;n<e.ops.length;n++){var i=e.ops[n];if(i.cursorActivityHandlers)for(;i.cursorActivityCalled<i.cursorActivityHandlers.length;)i.cursorActivityHandlers[i.cursorActivityCalled++].call(null,i.cm)}}while(r<t.length)}function Ct(e){var t=e.curOp,r=t.ownsGroup;if(r)try{St(r)}finally{zo=null;for(var n=0;n<r.ops.length;n++)r.ops[n].cm.curOp=null;wt(r)}}function wt(e){for(var t=e.ops,r=0;r<t.length;r++)Tt(t[r]);for(var r=0;r<t.length;r++)At(t[r]);for(var r=0;r<t.length;r++)It(t[r]);for(var r=0;r<t.length;r++)Lt(t[r]);for(var r=0;r<t.length;r++)Nt(t[r])}function Tt(e){var t=e.cm,r=t.display;A(t),e.updateMaxLine&&d(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<r.viewFrom||e.scrollToPos.to.line>=r.viewTo)||r.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new T(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function At(e){e.updatedDisplay=e.mustUpdate&&I(e.cm,e.update)}function It(e){var t=e.cm,r=t.display;e.updatedDisplay&&_(t),e.barMeasure=h(t),r.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=Je(t,r.maxLine,r.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(r.scroller.clientWidth,r.sizer.offsetLeft+e.adjustWidthTo+ze(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,r.sizer.offsetLeft+e.adjustWidthTo-Qe(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=r.input.prepareSelection(e.focus))}function Lt(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&or(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var r=e.focus&&e.focus==zi()&&(!document.hasFocus||document.hasFocus());e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,r),(e.updatedDisplay||e.startHeight!=t.doc.height)&&y(t,e.barMeasure),e.updatedDisplay&&R(t,e.barMeasure),e.selectionChanged&&je(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),r&&Y(e.cm)}function Nt(e){var t=e.cm,r=t.display,n=t.doc;if(e.updatedDisplay&&L(t,e.update),null==r.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(r.wheelStartX=r.wheelStartY=null),null==e.scrollTop||r.scroller.scrollTop==e.scrollTop&&!e.forceScroll||(n.scrollTop=Math.max(0,Math.min(r.scroller.scrollHeight-r.scroller.clientHeight,e.scrollTop)),r.scrollbars.setScrollTop(n.scrollTop),r.scroller.scrollTop=n.scrollTop),null==e.scrollLeft||r.scroller.scrollLeft==e.scrollLeft&&!e.forceScroll||(n.scrollLeft=Math.max(0,Math.min(r.scroller.scrollWidth-r.scroller.clientWidth,e.scrollLeft)),r.scrollbars.setScrollLeft(n.scrollLeft),r.scroller.scrollLeft=n.scrollLeft,x(t)),e.scrollToPos){var i=Pr(t,ge(n,e.scrollToPos.from),ge(n,e.scrollToPos.to),e.scrollToPos.margin);e.scrollToPos.isCursor&&t.state.focused&&Or(t,i)}var o=e.maybeHiddenMarkers,a=e.maybeUnhiddenMarkers;if(o)for(var s=0;s<o.length;++s)o[s].lines.length||Pa(o[s],"hide");if(a)for(var s=0;s<a.length;++s)a[s].lines.length&&Pa(a[s],"unhide");r.wrapper.offsetHeight&&(n.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&Pa(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function Rt(e,t){if(e.curOp)return t();xt(e);try{return t()}finally{Ct(e)}}function _t(e,t){return function(){if(e.curOp)return t.apply(e,arguments);xt(e);try{return t.apply(e,arguments)}finally{Ct(e)}}}function kt(e){return function(){if(this.curOp)return e.apply(this,arguments);xt(this);try{return e.apply(this,arguments)}finally{Ct(this)}}}function Ot(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);xt(t);try{return e.apply(this,arguments)}finally{Ct(t)}}}function Pt(e,t,r){this.line=t,this.rest=En(t),this.size=this.rest?ri(Oi(this.rest))-r+1:1,this.node=this.text=null,this.hidden=Cn(e,t)}function Dt(e,t,r){for(var n,i=[],o=t;o<r;o=n){var a=new Pt(e.doc,Jn(e.doc,o),o);n=o+a.size,i.push(a)}return i}function Ft(e,t,r,n){null==t&&(t=e.doc.first),null==r&&(r=e.doc.first+e.doc.size),n||(n=0);var i=e.display;if(n&&r<i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>t)&&(i.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=i.viewTo)jo&&xn(e.doc,t)<i.viewTo&&jt(e);else if(r<=i.viewFrom)jo&&Sn(e.doc,r+n)>i.viewFrom?jt(e):(i.viewFrom+=n,i.viewTo+=n);else if(t<=i.viewFrom&&r>=i.viewTo)jt(e);else if(t<=i.viewFrom){var o=Gt(e,r,r+n,1);o?(i.view=i.view.slice(o.index),i.viewFrom=o.lineN,i.viewTo+=n):jt(e)}else if(r>=i.viewTo){var o=Gt(e,t,t,-1);o?(i.view=i.view.slice(0,o.index),i.viewTo=o.lineN):jt(e)}else{var a=Gt(e,t,t,-1),s=Gt(e,r,r+n,1);a&&s?(i.view=i.view.slice(0,a.index).concat(Dt(e,a.lineN,s.lineN)).concat(i.view.slice(s.index)),i.viewTo+=n):jt(e)}var l=i.externalMeasured;l&&(r<l.lineN?l.lineN+=n:t<l.lineN+l.size&&(i.externalMeasured=null))}function Mt(e,t,r){e.curOp.viewChanged=!0;var n=e.display,i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size&&(n.externalMeasured=null),!(t<n.viewFrom||t>=n.viewTo)){var o=n.view[$t(e,t)];if(null!=o.node){var a=o.changes||(o.changes=[]);-1==Pi(a,r)&&a.push(r)}}}function jt(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function $t(e,t){if(t>=e.display.viewTo)return null;if((t-=e.display.viewFrom)<0)return null;for(var r=e.display.view,n=0;n<r.length;n++)if((t-=r[n].size)<0)return n}function Gt(e,t,r,n){var i,o=$t(e,t),a=e.display.view;if(!jo||r==e.doc.first+e.doc.size)return{index:o,lineN:r};for(var s=0,l=e.display.viewFrom;s<o;s++)l+=a[s].size;if(l!=t){if(n>0){if(o==a.length-1)return null;i=l+a[o].size-t,o++}else i=l-t;t+=i,r+=i}for(;xn(e.doc,r)!=r;){if(o==(n<0?0:a.length-1))return null;r+=n*a[o-(n<0?1:0)].size,o+=n}return{index:o,lineN:r}}function Bt(e,t,r){var n=e.display;0==n.view.length||t>=n.viewTo||r<=n.viewFrom?(n.view=Dt(e,t,r),n.viewFrom=t):(n.viewFrom>t?n.view=Dt(e,t,n.viewFrom).concat(n.view):n.viewFrom<t&&(n.view=n.view.slice($t(e,t))),n.viewFrom=t,n.viewTo<r?n.view=n.view.concat(Dt(e,n.viewTo,r)):n.viewTo>r&&(n.view=n.view.slice(0,$t(e,r)))),n.viewTo=r}function Ht(e){for(var t=e.display.view,r=0,n=0;n<t.length;n++){var i=t[n];i.hidden||i.node&&!i.changes||++r}return r}function Ut(e){function t(){i.activeTouch&&(o=setTimeout(function(){i.activeTouch=null},1e3),a=i.activeTouch,a.end=+new Date)}function r(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}function n(e,t){if(null==t.left)return!0;var r=t.left-e.left,n=t.top-e.top;return r*r+n*n>400}var i=e.display;_a(i.scroller,"mousedown",_t(e,Wt)),Eo&&xo<11?_a(i.scroller,"dblclick",_t(e,function(t){if(!Ii(e,t)){var r=Qt(e,t);if(r&&!Zt(e,t)&&!zt(e.display,t)){La(t);var n=e.findWordAt(r);Ee(e.doc,n.anchor,n.head)}}})):_a(i.scroller,"dblclick",function(t){Ii(e,t)||La(t)}),Fo||_a(i.scroller,"contextmenu",function(t){br(e,t)});var o,a={end:0};_a(i.scroller,"touchstart",function(t){if(!Ii(e,t)&&!r(t)){clearTimeout(o);var n=+new Date;i.activeTouch={start:n,moved:!1,prev:n-a.end<=300?a:null},1==t.touches.length&&(i.activeTouch.left=t.touches[0].pageX,i.activeTouch.top=t.touches[0].pageY)}}),_a(i.scroller,"touchmove",function(){i.activeTouch&&(i.activeTouch.moved=!0)}),_a(i.scroller,"touchend",function(r){var o=i.activeTouch;if(o&&!zt(i,r)&&null!=o.left&&!o.moved&&new Date-o.start<300){var a,s=e.coordsChar(i.activeTouch,"page");a=!o.prev||n(o,o.prev)?new pe(s,s):!o.prev.prev||n(o,o.prev.prev)?e.findWordAt(s):new pe($o(s.line,0),ge(e.doc,$o(s.line+1,0))),e.setSelection(a.anchor,a.head),e.focus(),La(r)}t()}),_a(i.scroller,"touchcancel",t),_a(i.scroller,"scroll",function(){i.scroller.clientHeight&&(ir(e,i.scroller.scrollTop),or(e,i.scroller.scrollLeft,!0),Pa(e,"scroll",e))}),_a(i.scroller,"mousewheel",function(t){ar(e,t)}),_a(i.scroller,"DOMMouseScroll",function(t){ar(e,t)}),_a(i.wrapper,"scroll",function(){i.wrapper.scrollTop=i.wrapper.scrollLeft=0}),i.dragFunctions={enter:function(t){Ii(e,t)||Ra(t)},over:function(t){Ii(e,t)||(rr(e,t),Ra(t))},start:function(t){tr(e,t)},drop:_t(e,er),leave:function(t){Ii(e,t)||nr(e)}};var s=i.input.getField();_a(s,"keyup",function(t){hr.call(e,t)}),_a(s,"keydown",_t(e,dr)),_a(s,"keypress",_t(e,gr)),_a(s,"focus",$i(mr,e)),_a(s,"blur",$i(yr,e))}function Vt(t,r,n){if(!r!=!(n&&n!=e.Init)){var i=t.display.dragFunctions,o=r?_a:Oa;o(t.display.scroller,"dragstart",i.start),o(t.display.scroller,"dragenter",i.enter),o(t.display.scroller,"dragover",i.over),o(t.display.scroller,"dragleave",i.leave),o(t.display.scroller,"drop",i.drop)}}function qt(e){var t=e.display;t.lastWrapHeight==t.wrapper.clientHeight&&t.lastWrapWidth==t.wrapper.clientWidth||(t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize())}function zt(e,t){for(var r=Si(t);r!=e.wrapper;r=r.parentNode)if(!r||1==r.nodeType&&"true"==r.getAttribute("cm-ignore-events")||r.parentNode==e.sizer&&r!=e.mover)return!0}function Qt(e,t,r,n){var i=e.display;if(!r&&"true"==Si(t).getAttribute("cm-not-content"))return null;var o,a,s=i.lineSpace.getBoundingClientRect();try{o=t.clientX-s.left,a=t.clientY-s.top}catch(t){return null}var l,u=mt(e,o,a);if(n&&1==u.xRel&&(l=Jn(e.doc,u.line).text).length==u.ch){var c=Ba(l,l.length,e.options.tabSize)-l.length;u=$o(u.line,Math.max(0,Math.round((o-qe(e.display).left)/Et(e.display))-c))}return u}function Wt(e){var t=this,r=t.display;if(!(Ii(t,e)||r.activeTouch&&r.input.supportsTouch())){if(r.shift=e.shiftKey,zt(r,e))return void(So||(r.scroller.draggable=!1,setTimeout(function(){r.scroller.draggable=!0},100)));if(!Zt(t,e)){var n=Qt(t,e);switch(window.focus(),Ci(e)){case 1:t.state.selectingText?t.state.selectingText(e):n?Xt(t,e,n):Si(e)==r.scroller&&La(e);break;case 2:So&&(t.state.lastMiddleDown=+new Date),n&&Ee(t.doc,n),setTimeout(function(){r.input.focus()},20),La(e);break;case 3:Fo?br(t,e):vr(t)}}}}function Xt(e,t,r){Eo?setTimeout($i(Y,e),0):e.curOp.focus=zi();var n,i=+new Date;Vo&&Vo.time>i-400&&0==Go(Vo.pos,r)?n="triple":Uo&&Uo.time>i-400&&0==Go(Uo.pos,r)?(n="double",Vo={time:i,pos:r}):(n="single",Uo={time:i,pos:r});var o,a=e.doc.sel,s=_o?t.metaKey:t.ctrlKey;e.options.dragDrop&&ts&&!e.isReadOnly()&&"single"==n&&(o=a.contains(r))>-1&&(Go((o=a.ranges[o]).from(),r)<0||r.xRel>0)&&(Go(o.to(),r)>0||r.xRel<0)?Yt(e,t,r,s):Kt(e,t,r,n,s)}function Yt(e,t,r,n){var i=e.display,o=+new Date,a=_t(e,function(s){So&&(i.scroller.draggable=!1),e.state.draggingText=!1,Oa(document,"mouseup",a),Oa(i.scroller,"drop",a),Math.abs(t.clientX-s.clientX)+Math.abs(t.clientY-s.clientY)<10&&(La(s),!n&&+new Date-200<o&&Ee(e.doc,r),So||Eo&&9==xo?setTimeout(function(){document.body.focus(),i.input.focus()},20):i.input.focus())});So&&(i.scroller.draggable=!0),e.state.draggingText=a,a.copy=_o?t.altKey:t.ctrlKey,i.scroller.dragDrop&&i.scroller.dragDrop(),_a(document,"mouseup",a),_a(i.scroller,"drop",a)}function Kt(e,t,r,n,i){function o(t){if(0!=Go(v,t))if(v=t,"rect"==n){for(var i=[],o=e.options.tabSize,a=Ba(Jn(u,r.line).text,r.ch,o),s=Ba(Jn(u,t.line).text,t.ch,o),l=Math.min(a,s),f=Math.max(a,s),h=Math.min(r.line,t.line),g=Math.min(e.lastLine(),Math.max(r.line,t.line));h<=g;h++){var m=Jn(u,h).text,y=Ha(m,l,o);l==f?i.push(new pe($o(h,y),$o(h,y))):m.length>y&&i.push(new pe($o(h,y),$o(h,Ha(m,f,o))))}i.length||i.push(new pe(r,r)),Ae(u,de(d.ranges.slice(0,p).concat(i),p),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var b=c,E=b.anchor,x=t;if("single"!=n){if("double"==n)var S=e.findWordAt(t);else var S=new pe($o(t.line,0),ge(u,$o(t.line+1,0)));Go(S.anchor,E)>0?(x=S.head,E=X(b.from(),S.anchor)):(x=S.anchor,E=W(b.to(),S.head))}var i=d.ranges.slice(0);i[p]=new pe(ge(u,E),x),Ae(u,de(i,p),$a)}}function a(t){var r=++y,i=Qt(e,t,!0,"rect"==n);if(i)if(0!=Go(i,v)){e.curOp.focus=zi(),o(i);var s=E(l,u);(i.line>=s.to||i.line<s.from)&&setTimeout(_t(e,function(){y==r&&a(t)}),150)}else{var c=t.clientY<m.top?-20:t.clientY>m.bottom?20:0;c&&setTimeout(_t(e,function(){y==r&&(l.scroller.scrollTop+=c,a(t))}),50)}}function s(t){e.state.selectingText=!1,y=1/0,La(t),l.input.focus(),Oa(document,"mousemove",b),Oa(document,"mouseup",x),u.history.lastSelOrigin=null}var l=e.display,u=e.doc;La(t);var c,p,d=u.sel,f=d.ranges;if(i&&!t.shiftKey?(p=u.sel.contains(r),c=p>-1?f[p]:new pe(r,r)):(c=u.sel.primary(),p=u.sel.primIndex),ko?t.shiftKey&&t.metaKey:t.altKey)n="rect",i||(c=new pe(r,r)),r=Qt(e,t,!0,!0),p=-1;else if("double"==n){var h=e.findWordAt(r);c=e.display.shift||u.extend?be(u,c,h.anchor,h.head):h}else if("triple"==n){var g=new pe($o(r.line,0),ge(u,$o(r.line+1,0)));c=e.display.shift||u.extend?be(u,c,g.anchor,g.head):g}else c=be(u,c,r);i?-1==p?(p=f.length,Ae(u,de(f.concat([c]),p),{scroll:!1,origin:"*mouse"})):f.length>1&&f[p].empty()&&"single"==n&&!t.shiftKey?(Ae(u,de(f.slice(0,p).concat(f.slice(p+1)),0),{scroll:!1,origin:"*mouse"}),d=u.sel):Se(u,p,c,$a):(p=0,Ae(u,new ce([c],0),$a),d=u.sel);var v=r,m=l.wrapper.getBoundingClientRect(),y=0,b=_t(e,function(e){Ci(e)?a(e):s(e)}),x=_t(e,s);e.state.selectingText=x,_a(document,"mousemove",b),_a(document,"mouseup",x)}function Jt(e,t,r,n){try{var i=t.clientX,o=t.clientY}catch(t){return!1}if(i>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;n&&La(t);var a=e.display,s=a.lineDiv.getBoundingClientRect();if(o>s.bottom||!Ni(e,r))return xi(t);o-=s.top-a.viewOffset;for(var l=0;l<e.options.gutters.length;++l){var u=a.gutters.childNodes[l];if(u&&u.getBoundingClientRect().right>=i){var c=ni(e.doc,o),p=e.options.gutters[l];return Pa(e,r,e,c,p,t),xi(t)}}}function Zt(e,t){return Jt(e,t,"gutterClick",!0)}function er(e){var t=this;if(nr(t),!Ii(t,e)&&!zt(t.display,e)){La(e),Eo&&(Wo=+new Date);var r=Qt(t,e,!0),n=e.dataTransfer.files;if(r&&!t.isReadOnly())if(n&&n.length&&window.FileReader&&window.File)for(var i=n.length,o=Array(i),a=0,s=0;s<i;++s)!function(e,n){if(!t.options.allowDropFileTypes||-1!=Pi(t.options.allowDropFileTypes,e.type)){var s=new FileReader;s.onload=_t(t,function(){var e=s.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(e)&&(e=""),o[n]=e,++a==i){r=ge(t.doc,r);var l={from:r,to:r,text:t.doc.splitLines(o.join(t.doc.lineSeparator())),origin:"paste"};Ar(t.doc,l),Te(t.doc,fe(r,ea(l)))}}),s.readAsText(e)}}(n[s],s);else{if(t.state.draggingText&&t.doc.sel.contains(r)>-1)return t.state.draggingText(e),void setTimeout(function(){t.display.input.focus()},20);try{var o=e.dataTransfer.getData("Text");if(o){if(t.state.draggingText&&!t.state.draggingText.copy)var l=t.listSelections();if(Ie(t.doc,fe(r,r)),l)for(var s=0;s<l.length;++s)kr(t.doc,"",l[s].anchor,l[s].head,"drag");t.replaceSelection(o,"around","paste"),t.display.input.focus()}}catch(e){}}}}function tr(e,t){if(Eo&&(!e.state.draggingText||+new Date-Wo<100))return void Ra(t);if(!Ii(e,t)&&!zt(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!Ao)){var r=Ui("img",null,null,"position: fixed; left: 0; top: 0;");r.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",To&&(r.width=r.height=1,e.display.wrapper.appendChild(r),r._top=r.offsetTop),t.dataTransfer.setDragImage(r,0,0),To&&r.parentNode.removeChild(r)}}function rr(e,t){var r=Qt(e,t);if(r){var n=document.createDocumentFragment();Fe(e,r,n),e.display.dragCursor||(e.display.dragCursor=Ui("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),qi(e.display.dragCursor,n)}}function nr(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function ir(e,t){Math.abs(e.doc.scrollTop-t)<2||(e.doc.scrollTop=t,mo||N(e,{top:t}),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t),e.display.scrollbars.setScrollTop(t),mo&&N(e),$e(e,100))}function or(e,t,r){(r?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)||(t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),e.doc.scrollLeft=t,x(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function ar(e,t){var r=Ko(t),n=r.x,i=r.y,o=e.display,a=o.scroller,s=a.scrollWidth>a.clientWidth,l=a.scrollHeight>a.clientHeight;if(n&&s||i&&l){if(i&&_o&&So)e:for(var u=t.target,c=o.view;u!=a;u=u.parentNode)for(var p=0;p<c.length;p++)if(c[p].node==u){e.display.currentWheelTarget=u;break e}if(n&&!mo&&!To&&null!=Yo)return i&&l&&ir(e,Math.max(0,Math.min(a.scrollTop+i*Yo,a.scrollHeight-a.clientHeight))),or(e,Math.max(0,Math.min(a.scrollLeft+n*Yo,a.scrollWidth-a.clientWidth))),(!i||i&&l)&&La(t),void(o.wheelStartX=null);if(i&&null!=Yo){var d=i*Yo,f=e.doc.scrollTop,h=f+o.wrapper.clientHeight;d<0?f=Math.max(0,f+d-50):h=Math.min(e.doc.height,h+d+50),N(e,{top:f,bottom:h})}Xo<20&&(null==o.wheelStartX?(o.wheelStartX=a.scrollLeft,o.wheelStartY=a.scrollTop,o.wheelDX=n,o.wheelDY=i,setTimeout(function(){if(null!=o.wheelStartX){var e=a.scrollLeft-o.wheelStartX,t=a.scrollTop-o.wheelStartY,r=t&&o.wheelDY&&t/o.wheelDY||e&&o.wheelDX&&e/o.wheelDX;o.wheelStartX=o.wheelStartY=null,r&&(Yo=(Yo*Xo+r)/(Xo+1),++Xo)}},200)):(o.wheelDX+=n,o.wheelDY+=i))}}function sr(e,t,r){if("string"==typeof t&&!(t=pa[t]))return!1;e.display.input.ensurePolled();var n=e.display.shift,i=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),r&&(e.display.shift=!1),i=t(e)!=Ma}finally{e.display.shift=n,e.state.suppressEdits=!1}return i}function lr(e,t,r){for(var n=0;n<e.state.keyMaps.length;n++){var i=fa(t,e.state.keyMaps[n],r,e);if(i)return i}return e.options.extraKeys&&fa(t,e.options.extraKeys,r,e)||fa(t,e.options.keyMap,r,e)}function ur(e,t,r,n){var i=e.state.keySeq;if(i){if(ha(t))return"handled";Jo.set(50,function(){e.state.keySeq==i&&(e.state.keySeq=null,e.display.input.reset())}),t=i+" "+t}var o=lr(e,t,n);return"multi"==o&&(e.state.keySeq=t),"handled"==o&&Ti(e,"keyHandled",e,t,r),"handled"!=o&&"multi"!=o||(La(r),je(e)),i&&!o&&/\'$/.test(t)?(La(r),!0):!!o}function cr(e,t){var r=ga(t,!0);return!!r&&(t.shiftKey&&!e.state.keySeq?ur(e,"Shift-"+r,t,function(t){return sr(e,t,!0)})||ur(e,r,t,function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return sr(e,t)}):ur(e,r,t,function(t){return sr(e,t)}))}function pr(e,t,r){return ur(e,"'"+r+"'",t,function(t){return sr(e,t,!0)})}function dr(e){var t=this;if(t.curOp.focus=zi(),!Ii(t,e)){Eo&&xo<11&&27==e.keyCode&&(e.returnValue=!1);var r=e.keyCode;t.display.shift=16==r||e.shiftKey;var n=cr(t,e);To&&(Zo=n?r:null,!n&&88==r&&!is&&(_o?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),18!=r||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||fr(t)}}function fr(e){function t(e){18!=e.keyCode&&e.altKey||(Ja(r,"CodeMirror-crosshair"),Oa(document,"keyup",t),Oa(document,"mouseover",t))}var r=e.display.lineDiv;Za(r,"CodeMirror-crosshair"),_a(document,"keyup",t),_a(document,"mouseover",t)}function hr(e){16==e.keyCode&&(this.doc.sel.shift=!1),Ii(this,e)}function gr(e){var t=this;if(!(zt(t.display,e)||Ii(t,e)||e.ctrlKey&&!e.altKey||_o&&e.metaKey)){var r=e.keyCode,n=e.charCode;if(To&&r==Zo)return Zo=null,void La(e);if(!To||e.which&&!(e.which<10)||!cr(t,e)){pr(t,e,String.fromCharCode(null==n?r:n))||t.display.input.onKeyPress(e)}}}function vr(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,yr(e))},100)}function mr(e){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(Pa(e,"focus",e),e.state.focused=!0,Za(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),So&&setTimeout(function(){e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),je(e))}function yr(e){e.state.delayingBlurEvent||(e.state.focused&&(Pa(e,"blur",e),e.state.focused=!1,Ja(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function br(e,t){zt(e.display,t)||Er(e,t)||Ii(e,t,"contextmenu")||e.display.input.onContextMenu(t)}function Er(e,t){return!!Ni(e,"gutterContextMenu")&&Jt(e,t,"gutterContextMenu",!1)}function xr(e,t){if(Go(e,t.from)<0)return e;if(Go(e,t.to)<=0)return ea(t);var r=e.line+t.text.length-(t.to.line-t.from.line)-1,n=e.ch;return e.line==t.to.line&&(n+=ea(t).ch-t.to.ch),$o(r,n)}function Sr(e,t){for(var r=[],n=0;n<e.sel.ranges.length;n++){var i=e.sel.ranges[n];r.push(new pe(xr(i.anchor,t),xr(i.head,t)))}return de(r,e.sel.primIndex)}function Cr(e,t,r){return e.line==t.line?$o(r.line,e.ch-t.ch+r.ch):$o(r.line+(e.line-t.line),e.ch)}function wr(e,t,r){for(var n=[],i=$o(e.first,0),o=i,a=0;a<t.length;a++){var s=t[a],l=Cr(s.from,i,o),u=Cr(ea(s),i,o);if(i=s.to,o=u,"around"==r){var c=e.sel.ranges[a],p=Go(c.head,c.anchor)<0;n[a]=new pe(p?u:l,p?l:u)}else n[a]=new pe(l,l)}return new ce(n,e.sel.primIndex)}function Tr(e,t,r){var n={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){this.canceled=!0}};return r&&(n.update=function(t,r,n,i){t&&(this.from=ge(e,t)),r&&(this.to=ge(e,r)),n&&(this.text=n),void 0!==i&&(this.origin=i)}),Pa(e,"beforeChange",e,n),e.cm&&Pa(e.cm,"beforeChange",e.cm,n),n.canceled?null:{from:n.from,to:n.to,text:n.text,origin:n.origin}}function Ar(e,t,r){if(e.cm){if(!e.cm.curOp)return _t(e.cm,Ar)(e,t,r);if(e.cm.state.suppressEdits)return}if(!(Ni(e,"beforeChange")||e.cm&&Ni(e.cm,"beforeChange"))||(t=Tr(e,t,!0))){var n=Mo&&!r&&un(e,t.from,t.to);if(n)for(var i=n.length-1;i>=0;--i)Ir(e,{from:n[i].from,to:n[i].to,text:i?[""]:t.text});else Ir(e,t)}}function Ir(e,t){if(1!=t.text.length||""!=t.text[0]||0!=Go(t.from,t.to)){var r=Sr(e,t);ci(e,t,r,e.cm?e.cm.curOp.id:NaN),Rr(e,t,r,an(e,t));var n=[];Yn(e,function(e,r){r||-1!=Pi(n,e.history)||(Ei(e.history,t),n.push(e.history)),Rr(e,t,null,an(e,t))})}}function Lr(e,t,r){if(!e.cm||!e.cm.state.suppressEdits||r){for(var n,i=e.history,o=e.sel,a="undo"==t?i.done:i.undone,s="undo"==t?i.undone:i.done,l=0;l<a.length&&(n=a[l],r?!n.ranges||n.equals(e.sel):n.ranges);l++);if(l!=a.length){for(i.lastOrigin=i.lastSelOrigin=null;n=a.pop(),n.ranges;){if(fi(n,s),r&&!n.equals(e.sel))return void Ae(e,n,{clearRedo:!1});o=n}var u=[];fi(o,s),s.push({changes:u,generation:i.generation}),i.generation=n.generation||++i.maxGeneration;for(var c=Ni(e,"beforeChange")||e.cm&&Ni(e.cm,"beforeChange"),l=n.changes.length-1;l>=0;--l){var p=n.changes[l];if(p.origin=t,c&&!Tr(e,p,!1))return void(a.length=0);u.push(si(e,p));var d=l?Sr(e,p):Oi(a);Rr(e,p,d,ln(e,p)),!l&&e.cm&&e.cm.scrollIntoView({from:p.from,to:ea(p)});var f=[];Yn(e,function(e,t){t||-1!=Pi(f,e.history)||(Ei(e.history,p),f.push(e.history)),Rr(e,p,null,ln(e,p))})}}}}function Nr(e,t){if(0!=t&&(e.first+=t,e.sel=new ce(Di(e.sel.ranges,function(e){return new pe($o(e.anchor.line+t,e.anchor.ch),$o(e.head.line+t,e.head.ch))}),e.sel.primIndex),e.cm)){Ft(e.cm,e.first,e.first-t,t);for(var r=e.cm.display,n=r.viewFrom;n<r.viewTo;n++)Mt(e.cm,n,"gutter")}}function Rr(e,t,r,n){if(e.cm&&!e.cm.curOp)return _t(e.cm,Rr)(e,t,r,n);if(t.to.line<e.first)return void Nr(e,t.text.length-1-(t.to.line-t.from.line));if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);Nr(e,i),t={from:$o(e.first,0),to:$o(t.to.line+i,t.to.ch),text:[Oi(t.text)],origin:t.origin}}var o=e.lastLine();t.to.line>o&&(t={from:t.from,to:$o(o,Jn(e,o).text.length),text:[t.text[0]],origin:t.origin}),t.removed=Zn(e,t.from,t.to),r||(r=Sr(e,t)),e.cm?_r(e.cm,t,n):Qn(e,t,n),Ie(e,r,ja)}}function _r(e,t,r){var n=e.doc,i=e.display,a=t.from,s=t.to,l=!1,u=a.line;e.options.lineWrapping||(u=ri(bn(Jn(n,a.line))),n.iter(u,s.line+1,function(e){if(e==i.maxLine)return l=!0,!0})),n.sel.contains(t.from,t.to)>-1&&Li(e),Qn(n,t,r,o(e)),e.options.lineWrapping||(n.iter(u,a.line+t.text.length,function(e){var t=p(e);t>i.maxLineLength&&(i.maxLine=e,i.maxLineLength=t,i.maxLineChanged=!0,l=!1)}),l&&(e.curOp.updateMaxLine=!0)),n.frontier=Math.min(n.frontier,a.line),$e(e,400);var c=t.text.length-(s.line-a.line)-1;t.full?Ft(e):a.line!=s.line||1!=t.text.length||zn(e.doc,t)?Ft(e,a.line,s.line+1,c):Mt(e,a.line,"text");var d=Ni(e,"changes"),f=Ni(e,"change");if(f||d){var h={from:a,to:s,text:t.text,removed:t.removed,origin:t.origin};f&&Ti(e,"change",e,h),d&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(h)}e.display.selForContextMenu=null}function kr(e,t,r,n,i){if(n||(n=r),Go(n,r)<0){var o=n;n=r,r=o}"string"==typeof t&&(t=e.splitLines(t)),Ar(e,{from:r,to:n,text:t,origin:i})}function Or(e,t){if(!Ii(e,"scrollCursorIntoView")){var r=e.display,n=r.sizer.getBoundingClientRect(),i=null;if(t.top+n.top<0?i=!0:t.bottom+n.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1),null!=i&&!Lo){var o=Ui("div","",null,"position: absolute; top: "+(t.top-r.viewOffset-Ue(e.display))+"px; height: "+(t.bottom-t.top+ze(e)+r.barHeight)+"px; left: "+t.left+"px; width: 2px;");e.display.lineSpace.appendChild(o),o.scrollIntoView(i),e.display.lineSpace.removeChild(o)}}}function Pr(e,t,r,n){null==n&&(n=0);for(var i=0;i<5;i++){var o=!1,a=ht(e,t),s=r&&r!=t?ht(e,r):a,l=Fr(e,Math.min(a.left,s.left),Math.min(a.top,s.top)-n,Math.max(a.left,s.left),Math.max(a.bottom,s.bottom)+n),u=e.doc.scrollTop,c=e.doc.scrollLeft;if(null!=l.scrollTop&&(ir(e,l.scrollTop),Math.abs(e.doc.scrollTop-u)>1&&(o=!0)),null!=l.scrollLeft&&(or(e,l.scrollLeft),Math.abs(e.doc.scrollLeft-c)>1&&(o=!0)),!o)break}return a}function Dr(e,t,r,n,i){var o=Fr(e,t,r,n,i);null!=o.scrollTop&&ir(e,o.scrollTop),null!=o.scrollLeft&&or(e,o.scrollLeft)}function Fr(e,t,r,n,i){var o=e.display,a=bt(e.display);r<0&&(r=0);var s=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:o.scroller.scrollTop,l=We(e),u={};i-r>l&&(i=r+l);var c=e.doc.height+Ve(o),p=r<a,d=i>c-a;if(r<s)u.scrollTop=p?0:r;else if(i>s+l){var f=Math.min(r,(d?c:i)-l);f!=s&&(u.scrollTop=f)}var h=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:o.scroller.scrollLeft,g=Qe(e)-(e.options.fixedGutter?o.gutters.offsetWidth:0),v=n-t>g;return v&&(n=t+g),t<10?u.scrollLeft=0:t<h?u.scrollLeft=Math.max(0,t-(v?0:10)):n>g+h-3&&(u.scrollLeft=n+(v?0:10)-g),u}function Mr(e,t,r){null==t&&null==r||$r(e),null!=t&&(e.curOp.scrollLeft=(null==e.curOp.scrollLeft?e.doc.scrollLeft:e.curOp.scrollLeft)+t),null!=r&&(e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+r)}function jr(e){$r(e);var t=e.getCursor(),r=t,n=t;e.options.lineWrapping||(r=t.ch?$o(t.line,t.ch-1):t,n=$o(t.line,t.ch+1)),e.curOp.scrollToPos={from:r,to:n,margin:e.options.cursorScrollMargin,isCursor:!0}}function $r(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var r=gt(e,t.from),n=gt(e,t.to),i=Fr(e,Math.min(r.left,n.left),Math.min(r.top,n.top)-t.margin,Math.max(r.right,n.right),Math.max(r.bottom,n.bottom)+t.margin);e.scrollTo(i.scrollLeft,i.scrollTop)}}function Gr(e,t,r,n){var i,o=e.doc;null==r&&(r="add"),"smart"==r&&(o.mode.indent?i=He(e,t):r="prev");var a=e.options.tabSize,s=Jn(o,t),l=Ba(s.text,null,a);s.stateAfter&&(s.stateAfter=null);var u,c=s.text.match(/^\s*/)[0];if(n||/\S/.test(s.text)){if("smart"==r&&((u=o.mode.indent(i,s.text.slice(c.length),s.text))==Ma||u>150)){if(!n)return;r="prev"}}else u=0,r="not";"prev"==r?u=t>o.first?Ba(Jn(o,t-1).text,null,a):0:"add"==r?u=l+e.options.indentUnit:"subtract"==r?u=l-e.options.indentUnit:"number"==typeof r&&(u=l+r),u=Math.max(0,u);var p="",d=0;if(e.options.indentWithTabs)for(var f=Math.floor(u/a);f;--f)d+=a,p+="\t";if(d<u&&(p+=ki(u-d)),p!=c)return kr(o,p,$o(t,0),$o(t,c.length),"+input"),s.stateAfter=null,!0;for(var f=0;f<o.sel.ranges.length;f++){var h=o.sel.ranges[f];if(h.head.line==t&&h.head.ch<c.length){var d=$o(t,c.length);Se(o,f,new pe(d,d));break}}}function Br(e,t,r,n){var i=t,o=t;return"number"==typeof t?o=Jn(e,he(e,t)):i=ri(t),null==i?null:(n(o,i)&&e.cm&&Mt(e.cm,i,r),o)}function Hr(e,t){for(var r=e.doc.sel.ranges,n=[],i=0;i<r.length;i++){for(var o=t(r[i]);n.length&&Go(o.from,Oi(n).to)<=0;){var a=n.pop();if(Go(a.from,o.from)<0){o.from=a.from;break}}n.push(o)}Rt(e,function(){for(var t=n.length-1;t>=0;t--)kr(e.doc,"",n[t].from,n[t].to,"+delete");jr(e)})}function Ur(e,t,r,n,i){function o(){var t=s+r;return!(t<e.first||t>=e.first+e.size)&&(s=t,c=Jn(e,t))}function a(e){var t=(i?fo:ho)(c,l,r,!0);if(null==t){if(e||!o())return!1;l=i?(r<0?oo:io)(c):r<0?c.text.length:0}else l=t;return!0}var s=t.line,l=t.ch,u=r,c=Jn(e,s);if("char"==n)a();else if("column"==n)a(!0);else if("word"==n||"group"==n)for(var p=null,d="group"==n,f=e.cm&&e.cm.getHelper(t,"wordChars"),h=!0;!(r<0)||a(!h);h=!1){var g=c.text.charAt(l)||"\n",v=Gi(g,f)?"w":d&&"\n"==g?"n":!d||/\s/.test(g)?null:"p";if(!d||h||v||(v="s"),p&&p!=v){r<0&&(r=1,a());break}if(v&&(p=v),r>0&&!a(!h))break}var m=ke(e,$o(s,l),t,u,!0);return Go(t,m)||(m.hitSide=!0),m}function Vr(e,t,r,n){var i,o=e.doc,a=t.left;if("page"==n){var s=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);i=t.top+r*(s-(r<0?1.5:.5)*bt(e.display))}else"line"==n&&(i=r>0?t.bottom+3:t.top-3);for(;;){var l=mt(e,a,i);if(!l.outside)break;if(r<0?i<=0:i>=o.height){l.hitSide=!0;break}i+=5*r}return l}function qr(t,r,n,i){e.defaults[t]=r,n&&(ra[t]=i?function(e,t,r){r!=na&&n(e,t,r)}:n)}function zr(e){for(var t,r,n,i,o=e.split(/-(?!$)/),e=o[o.length-1],a=0;a<o.length-1;a++){var s=o[a];if(/^(cmd|meta|m)$/i.test(s))i=!0;else if(/^a(lt)?$/i.test(s))t=!0;else if(/^(c|ctrl|control)$/i.test(s))r=!0;else{if(!/^s(hift)$/i.test(s))throw new Error("Unrecognized modifier name: "+s);n=!0}}return t&&(e="Alt-"+e),r&&(e="Ctrl-"+e),i&&(e="Cmd-"+e),n&&(e="Shift-"+e),e}function Qr(e){return"string"==typeof e?da[e]:e}function Wr(e,t,r,n,i){if(n&&n.shared)return Xr(e,t,r,n,i);if(e.cm&&!e.cm.curOp)return _t(e.cm,Wr)(e,t,r,n,i);var o=new ya(e,i),a=Go(t,r);if(n&&ji(n,o,!1),a>0||0==a&&!1!==o.clearWhenEmpty)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=Ui("span",[o.replacedWith],"CodeMirror-widget"),n.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true"),n.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(yn(e,t.line,t,r,o)||t.line!=r.line&&yn(e,r.line,t,r,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");jo=!0}o.addToHistory&&ci(e,{from:t,to:r,origin:"markText"},e.sel,NaN);var s,l=t.line,u=e.cm;if(e.iter(l,r.line+1,function(e){u&&o.collapsed&&!u.options.lineWrapping&&bn(e)==u.display.maxLine&&(s=!0),o.collapsed&&l!=t.line&&ti(e,0),rn(e,new Zr(o,l==t.line?t.ch:null,l==r.line?r.ch:null)),++l}),o.collapsed&&e.iter(t.line,r.line+1,function(t){Cn(e,t)&&ti(t,0)}),o.clearOnEnter&&_a(o,"beforeCursorEnter",function(){o.clear()}),o.readOnly&&(Mo=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),o.collapsed&&(o.id=++ma,o.atomic=!0),u){if(s&&(u.curOp.updateMaxLine=!0),o.collapsed)Ft(u,t.line,r.line+1);else if(o.className||o.title||o.startStyle||o.endStyle||o.css)for(var c=t.line;c<=r.line;c++)Mt(u,c,"text");o.atomic&&Ne(u.doc),Ti(u,"markerAdded",u,o)}return o}function Xr(e,t,r,n,i){n=ji(n),n.shared=!1;var o=[Wr(e,t,r,n,i)],a=o[0],s=n.widgetNode;return Yn(e,function(e){s&&(n.widgetNode=s.cloneNode(!0)),o.push(Wr(e,ge(e,t),ge(e,r),n,i));for(var l=0;l<e.linked.length;++l)if(e.linked[l].isParent)return;a=Oi(o)}),new ba(o,a)}function Yr(e){return e.findMarks($o(e.first,0),e.clipPos($o(e.lastLine())),function(e){return e.parent})}function Kr(e,t){for(var r=0;r<t.length;r++){var n=t[r],i=n.find(),o=e.clipPos(i.from),a=e.clipPos(i.to);if(Go(o,a)){var s=Wr(e,o,a,n.primary,n.primary.type);n.markers.push(s),s.parent=n}}}function Jr(e){for(var t=0;t<e.length;t++){var r=e[t],n=[r.primary.doc];Yn(r.primary.doc,function(e){n.push(e)});for(var i=0;i<r.markers.length;i++){var o=r.markers[i];-1==Pi(n,o.doc)&&(o.parent=null,r.markers.splice(i--,1))}}}function Zr(e,t,r){this.marker=e,this.from=t,this.to=r}function en(e,t){if(e)for(var r=0;r<e.length;++r){var n=e[r];if(n.marker==t)return n}}function tn(e,t){for(var r,n=0;n<e.length;++n)e[n]!=t&&(r||(r=[])).push(e[n]);return r}function rn(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}function nn(e,t,r){if(e)for(var n,i=0;i<e.length;++i){var o=e[i],a=o.marker,s=null==o.from||(a.inclusiveLeft?o.from<=t:o.from<t);if(s||o.from==t&&"bookmark"==a.type&&(!r||!o.marker.insertLeft)){var l=null==o.to||(a.inclusiveRight?o.to>=t:o.to>t);(n||(n=[])).push(new Zr(a,o.from,l?null:o.to))}}return n}function on(e,t,r){if(e)for(var n,i=0;i<e.length;++i){var o=e[i],a=o.marker,s=null==o.to||(a.inclusiveRight?o.to>=t:o.to>t);if(s||o.from==t&&"bookmark"==a.type&&(!r||o.marker.insertLeft)){var l=null==o.from||(a.inclusiveLeft?o.from<=t:o.from<t);(n||(n=[])).push(new Zr(a,l?null:o.from-t,null==o.to?null:o.to-t))}}return n}function an(e,t){if(t.full)return null;var r=me(e,t.from.line)&&Jn(e,t.from.line).markedSpans,n=me(e,t.to.line)&&Jn(e,t.to.line).markedSpans;if(!r&&!n)return null;var i=t.from.ch,o=t.to.ch,a=0==Go(t.from,t.to),s=nn(r,i,a),l=on(n,o,a),u=1==t.text.length,c=Oi(t.text).length+(u?i:0);if(s)for(var p=0;p<s.length;++p){var d=s[p];if(null==d.to){var f=en(l,d.marker);f?u&&(d.to=null==f.to?null:f.to+c):d.to=i}}if(l)for(var p=0;p<l.length;++p){var d=l[p];if(null!=d.to&&(d.to+=c),null==d.from){var f=en(s,d.marker);f||(d.from=c,u&&(s||(s=[])).push(d))}else d.from+=c,u&&(s||(s=[])).push(d)}s&&(s=sn(s)),l&&l!=s&&(l=sn(l));var h=[s];if(!u){var g,v=t.text.length-2;if(v>0&&s)for(var p=0;p<s.length;++p)null==s[p].to&&(g||(g=[])).push(new Zr(s[p].marker,null,null));for(var p=0;p<v;++p)h.push(g);h.push(l)}return h}function sn(e){for(var t=0;t<e.length;++t){var r=e[t];null!=r.from&&r.from==r.to&&!1!==r.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function ln(e,t){var r=vi(e,t),n=an(e,t);if(!r)return n;if(!n)return r;for(var i=0;i<r.length;++i){var o=r[i],a=n[i];if(o&&a)e:for(var s=0;s<a.length;++s){for(var l=a[s],u=0;u<o.length;++u)if(o[u].marker==l.marker)continue e;o.push(l)}else a&&(r[i]=a)}return r}function un(e,t,r){var n=null;if(e.iter(t.line,r.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var r=e.markedSpans[t].marker;!r.readOnly||n&&-1!=Pi(n,r)||(n||(n=[])).push(r)}}),!n)return null;for(var i=[{from:t,to:r}],o=0;o<n.length;++o)for(var a=n[o],s=a.find(0),l=0;l<i.length;++l){var u=i[l];if(!(Go(u.to,s.from)<0||Go(u.from,s.to)>0)){var c=[l,1],p=Go(u.from,s.from),d=Go(u.to,s.to);(p<0||!a.inclusiveLeft&&!p)&&c.push({from:u.from,to:s.from}),(d>0||!a.inclusiveRight&&!d)&&c.push({from:s.to,to:u.to}),i.splice.apply(i,c),l+=c.length-1}}return i}function cn(e){var t=e.markedSpans;if(t){for(var r=0;r<t.length;++r)t[r].marker.detachLine(e);e.markedSpans=null}}function pn(e,t){if(t){for(var r=0;r<t.length;++r)t[r].marker.attachLine(e);e.markedSpans=t}}function dn(e){return e.inclusiveLeft?-1:0}function fn(e){return e.inclusiveRight?1:0}function hn(e,t){var r=e.lines.length-t.lines.length;if(0!=r)return r;var n=e.find(),i=t.find(),o=Go(n.from,i.from)||dn(e)-dn(t);if(o)return-o;var a=Go(n.to,i.to)||fn(e)-fn(t);return a||t.id-e.id}function gn(e,t){var r,n=jo&&e.markedSpans;if(n)for(var i,o=0;o<n.length;++o)i=n[o],i.marker.collapsed&&null==(t?i.from:i.to)&&(!r||hn(r,i.marker)<0)&&(r=i.marker);return r}function vn(e){return gn(e,!0)}function mn(e){return gn(e,!1)}function yn(e,t,r,n,i){var o=Jn(e,t),a=jo&&o.markedSpans;if(a)for(var s=0;s<a.length;++s){var l=a[s];if(l.marker.collapsed){var u=l.marker.find(0),c=Go(u.from,r)||dn(l.marker)-dn(i),p=Go(u.to,n)||fn(l.marker)-fn(i);if(!(c>=0&&p<=0||c<=0&&p>=0)&&(c<=0&&(l.marker.inclusiveRight&&i.inclusiveLeft?Go(u.to,r)>=0:Go(u.to,r)>0)||c>=0&&(l.marker.inclusiveRight&&i.inclusiveLeft?Go(u.from,n)<=0:Go(u.from,n)<0)))return!0}}}function bn(e){for(var t;t=vn(e);)e=t.find(-1,!0).line;return e}function En(e){for(var t,r;t=mn(e);)e=t.find(1,!0).line,(r||(r=[])).push(e);return r}function xn(e,t){var r=Jn(e,t),n=bn(r);return r==n?t:ri(n)}function Sn(e,t){if(t>e.lastLine())return t;var r,n=Jn(e,t);if(!Cn(e,n))return t;for(;r=mn(n);)n=r.find(1,!0).line;return ri(n)+1}function Cn(e,t){var r=jo&&t.markedSpans;if(r)for(var n,i=0;i<r.length;++i)if(n=r[i],n.marker.collapsed){if(null==n.from)return!0;if(!n.marker.widgetNode&&0==n.from&&n.marker.inclusiveLeft&&wn(e,t,n))return!0}}function wn(e,t,r){if(null==r.to){var n=r.marker.find(1,!0);return wn(e,n.line,en(n.line.markedSpans,r.marker))}if(r.marker.inclusiveRight&&r.to==t.text.length)return!0;for(var i,o=0;o<t.markedSpans.length;++o)if(i=t.markedSpans[o],i.marker.collapsed&&!i.marker.widgetNode&&i.from==r.to&&(null==i.to||i.to!=r.from)&&(i.marker.inclusiveLeft||r.marker.inclusiveRight)&&wn(e,t,i))return!0}function Tn(e,t,r){ii(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Mr(e,null,r)}function An(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!Xa(document.body,e.node)){var r="position: relative;";e.coverGutter&&(r+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(r+="width: "+t.display.wrapper.clientWidth+"px;"),qi(t.display.measure,Ui("div",[e.node],null,r))}return e.height=e.node.parentNode.offsetHeight}function In(e,t,r,n){var i=new Ea(e,r,n),o=e.cm;return o&&i.noHScroll&&(o.display.alignWidgets=!0),Br(e,t,"widget",function(t){var r=t.widgets||(t.widgets=[]);if(null==i.insertAt?r.push(i):r.splice(Math.min(r.length-1,Math.max(0,i.insertAt)),0,i),i.line=t,o&&!Cn(e,t)){var n=ii(t)<e.scrollTop;ti(t,t.height+An(i)),n&&Mr(o,null,i.height),o.curOp.forceUpdate=!0}return!0}),i}function Ln(e,t,r,n){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),cn(e),pn(e,r);var i=n?n(e):1;i!=e.height&&ti(e,i)}function Nn(e){e.parent=null,cn(e)}function Rn(e,t){if(e)for(;;){var r=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!r)break;e=e.slice(0,r.index)+e.slice(r.index+r[0].length);var n=r[1]?"bgClass":"textClass";null==t[n]?t[n]=r[2]:new RegExp("(?:^|s)"+r[2]+"(?:$|s)").test(t[n])||(t[n]+=" "+r[2])}return e}function _n(t,r){if(t.blankLine)return t.blankLine(r);if(t.innerMode){var n=e.innerMode(t,r);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function kn(t,r,n,i){for(var o=0;o<10;o++){i&&(i[0]=e.innerMode(t,n).mode);var a=t.token(r,n);if(r.pos>r.start)return a}throw new Error("Mode "+t.name+" failed to advance stream.")}function On(e,t,r,n){function i(e){return{start:p.start,end:p.pos,string:p.current(),type:o||null,state:e?ua(a.mode,c):c}}var o,a=e.doc,s=a.mode;t=ge(a,t);var l,u=Jn(a,t.line),c=He(e,t.line,r),p=new va(u.text,e.options.tabSize);for(n&&(l=[]);(n||p.pos<t.ch)&&!p.eol();)p.start=p.pos,o=kn(s,p,c),n&&l.push(i(!0));return n?l:i()}function Pn(e,t,r,n,i,o,a){var s=r.flattenSpans;null==s&&(s=e.options.flattenSpans);var l,u=0,c=null,p=new va(t,e.options.tabSize),d=e.options.addModeClass&&[null];for(""==t&&Rn(_n(r,n),o);!p.eol();){if(p.pos>e.options.maxHighlightLength?(s=!1,a&&Mn(e,t,n,p.pos),p.pos=t.length,l=null):l=Rn(kn(r,p,n,d),o),d){var f=d[0].name;f&&(l="m-"+(l?f+" "+l:f))}if(!s||c!=l){for(;u<p.start;)u=Math.min(p.start,u+5e4),i(u,c);c=l}p.start=p.pos}for(;u<p.pos;){var h=Math.min(p.pos,u+5e4);i(h,c),u=h}}function Dn(e,t,r,n){var i=[e.state.modeGen],o={};Pn(e,t.text,e.doc.mode,r,function(e,t){i.push(e,t)},o,n);for(var a=0;a<e.state.overlays.length;++a){var s=e.state.overlays[a],l=1,u=0;Pn(e,t.text,s.mode,!0,function(e,t){for(var r=l;u<e;){var n=i[l];n>e&&i.splice(l,1,e,i[l+1],n),l+=2,u=Math.min(e,n)}if(t)if(s.opaque)i.splice(r,l-r,e,"cm-overlay "+t),l=r+2;else for(;r<l;r+=2){var o=i[r+1];i[r+1]=(o?o+" ":"")+"cm-overlay "+t}},o)}return{styles:i,classes:o.bgClass||o.textClass?o:null}}function Fn(e,t,r){if(!t.styles||t.styles[0]!=e.state.modeGen){var n=He(e,ri(t)),i=Dn(e,t,t.text.length>e.options.maxHighlightLength?ua(e.doc.mode,n):n);t.stateAfter=n,t.styles=i.styles,i.classes?t.styleClasses=i.classes:t.styleClasses&&(t.styleClasses=null),r===e.doc.frontier&&e.doc.frontier++}return t.styles}function Mn(e,t,r,n){var i=e.doc.mode,o=new va(t,e.options.tabSize);for(o.start=o.pos=n||0,""==t&&_n(i,r);!o.eol();)kn(i,o,r),o.start=o.pos}function jn(e,t){if(!e||/^\s*$/.test(e))return null;var r=t.addModeClass?Ca:Sa;return r[e]||(r[e]=e.replace(/\S+/g,"cm-$&"))}function $n(e,t){var r=Ui("span",null,null,So?"padding-right: .1px":null),n={pre:Ui("pre",[r],"CodeMirror-line"),content:r,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:(Eo||So)&&e.getOption("lineWrapping")};t.measure={};for(var i=0;i<=(t.rest?t.rest.length:0);i++){var o,a=i?t.rest[i-1]:t.line;n.pos=0,n.addToken=Bn,Zi(e.display.measure)&&(o=oi(a))&&(n.addToken=Un(n.addToken,o)),n.map=[];qn(a,n,Fn(e,a,t!=e.display.externalMeasured&&ri(a))),a.styleClasses&&(a.styleClasses.bgClass&&(n.bgClass=Wi(a.styleClasses.bgClass,n.bgClass||"")),a.styleClasses.textClass&&(n.textClass=Wi(a.styleClasses.textClass,n.textClass||""))),0==n.map.length&&n.map.push(0,0,n.content.appendChild(Ji(e.display.measure))),0==i?(t.measure.map=n.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(n.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(So){var s=n.content.lastChild;(/\bcm-tab\b/.test(s.className)||s.querySelector&&s.querySelector(".cm-tab"))&&(n.content.className="cm-tab-wrap-hack")}return Pa(e,"renderLine",e,t.line,n.pre),n.pre.className&&(n.textClass=Wi(n.pre.className,n.textClass||"")),n}function Gn(e){var t=Ui("span","","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function Bn(e,t,r,n,i,o,a){if(t){var s=e.splitSpaces?Hn(t,e.trailingSpace):t,l=e.cm.state.specialChars,u=!1;if(l.test(t))for(var c=document.createDocumentFragment(),p=0;;){l.lastIndex=p;var d=l.exec(t),f=d?d.index-p:t.length-p;if(f){var h=document.createTextNode(s.slice(p,p+f));Eo&&xo<9?c.appendChild(Ui("span",[h])):c.appendChild(h),e.map.push(e.pos,e.pos+f,h),e.col+=f,e.pos+=f}if(!d)break;if(p+=f+1,"\t"==d[0]){var g=e.cm.options.tabSize,v=g-e.col%g,h=c.appendChild(Ui("span",ki(v),"cm-tab"));h.setAttribute("role","presentation"),h.setAttribute("cm-text","\t"),e.col+=v}else if("\r"==d[0]||"\n"==d[0]){var h=c.appendChild(Ui("span","\r"==d[0]?"":"","cm-invalidchar"));h.setAttribute("cm-text",d[0]),e.col+=1}else{var h=e.cm.options.specialCharPlaceholder(d[0]);h.setAttribute("cm-text",d[0]),Eo&&xo<9?c.appendChild(Ui("span",[h])):c.appendChild(h),e.col+=1}e.map.push(e.pos,e.pos+1,h),e.pos++}else{e.col+=t.length;var c=document.createTextNode(s);e.map.push(e.pos,e.pos+t.length,c),Eo&&xo<9&&(u=!0),e.pos+=t.length}if(e.trailingSpace=32==s.charCodeAt(t.length-1),r||n||i||u||a){var m=r||"";n&&(m+=n),i&&(m+=i);var y=Ui("span",[c],m,a);return o&&(y.title=o),e.content.appendChild(y)}e.content.appendChild(c)}}function Hn(e,t){if(e.length>1&&!/  /.test(e))return e;for(var r=t,n="",i=0;i<e.length;i++){var o=e.charAt(i);" "!=o||!r||i!=e.length-1&&32!=e.charCodeAt(i+1)||(o=""),n+=o,r=" "==o}return n}function Un(e,t){return function(r,n,i,o,a,s,l){i=i?i+" cm-force-border":"cm-force-border";for(var u=r.pos,c=u+n.length;;){for(var p=0;p<t.length;p++){var d=t[p];if(d.to>u&&d.from<=u)break}if(d.to>=c)return e(r,n,i,o,a,s,l);e(r,n.slice(0,d.to-u),i,o,null,s,l),o=null,n=n.slice(d.to-u),u=d.to}}}function Vn(e,t,r,n){var i=!n&&r.widgetNode;i&&e.map.push(e.pos,e.pos+t,i),!n&&e.cm.display.input.needsContentAttribute&&(i||(i=e.content.appendChild(document.createElement("span"))),i.setAttribute("cm-marker",r.id)),i&&(e.cm.display.input.setUneditable(i),e.content.appendChild(i)),e.pos+=t,e.trailingSpace=!1}function qn(e,t,r){var n=e.markedSpans,i=e.text,o=0;if(n)for(var a,s,l,u,c,p,d,f=i.length,h=0,g=1,v="",m=0;;){if(m==h){l=u=c=p=s="",d=null,m=1/0;for(var y,b=[],E=0;E<n.length;++E){var x=n[E],S=x.marker;"bookmark"==S.type&&x.from==h&&S.widgetNode?b.push(S):x.from<=h&&(null==x.to||x.to>h||S.collapsed&&x.to==h&&x.from==h)?(null!=x.to&&x.to!=h&&m>x.to&&(m=x.to,u=""),S.className&&(l+=" "+S.className),S.css&&(s=(s?s+";":"")+S.css),S.startStyle&&x.from==h&&(c+=" "+S.startStyle),S.endStyle&&x.to==m&&(y||(y=[])).push(S.endStyle,x.to),S.title&&!p&&(p=S.title),S.collapsed&&(!d||hn(d.marker,S)<0)&&(d=x)):x.from>h&&m>x.from&&(m=x.from)}if(y)for(var E=0;E<y.length;E+=2)y[E+1]==m&&(u+=" "+y[E]);if(!d||d.from==h)for(var E=0;E<b.length;++E)Vn(t,0,b[E]);if(d&&(d.from||0)==h){if(Vn(t,(null==d.to?f+1:d.to)-h,d.marker,null==d.from),null==d.to)return;d.to==h&&(d=!1)}}if(h>=f)break;for(var C=Math.min(f,m);;){if(v){var w=h+v.length;if(!d){var T=w>C?v.slice(0,C-h):v;t.addToken(t,T,a?a+l:l,c,h+T.length==m?u:"",p,s)}if(w>=C){v=v.slice(C-h),h=C;break}h=w,c=""}v=i.slice(o,o=r[g++]),a=jn(r[g++],t.cm.options)}}else for(var g=1;g<r.length;g+=2)t.addToken(t,i.slice(o,o=r[g]),jn(r[g+1],t.cm.options))}function zn(e,t){return 0==t.from.ch&&0==t.to.ch&&""==Oi(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Qn(e,t,r,n){function i(e){return r?r[e]:null}function o(e,r,i){Ln(e,r,i,n),Ti(e,"change",e,t)}function a(e,t){for(var r=e,o=[];r<t;++r)o.push(new xa(u[r],i(r),n));return o}var s=t.from,l=t.to,u=t.text,c=Jn(e,s.line),p=Jn(e,l.line),d=Oi(u),f=i(u.length-1),h=l.line-s.line;if(t.full)e.insert(0,a(0,u.length)),e.remove(u.length,e.size-u.length);else if(zn(e,t)){var g=a(0,u.length-1);o(p,p.text,f),h&&e.remove(s.line,h),g.length&&e.insert(s.line,g)}else if(c==p)if(1==u.length)o(c,c.text.slice(0,s.ch)+d+c.text.slice(l.ch),f);else{var g=a(1,u.length-1);g.push(new xa(d+c.text.slice(l.ch),f,n)),o(c,c.text.slice(0,s.ch)+u[0],i(0)),e.insert(s.line+1,g)}else if(1==u.length)o(c,c.text.slice(0,s.ch)+u[0]+p.text.slice(l.ch),i(0)),e.remove(s.line+1,h);else{o(c,c.text.slice(0,s.ch)+u[0],i(0)),o(p,d+p.text.slice(l.ch),f);var g=a(1,u.length-1);h>1&&e.remove(s.line+1,h-1),e.insert(s.line+1,g)}Ti(e,"change",e,t)}function Wn(e){this.lines=e,this.parent=null;for(var t=0,r=0;t<e.length;++t)e[t].parent=this,r+=e[t].height;this.height=r}function Xn(e){this.children=e;for(var t=0,r=0,n=0;n<e.length;++n){var i=e[n];t+=i.chunkSize(),r+=i.height,i.parent=this}this.size=t,this.height=r,this.parent=null}function Yn(e,t,r){function n(e,i,o){if(e.linked)for(var a=0;a<e.linked.length;++a){var s=e.linked[a];if(s.doc!=i){var l=o&&s.sharedHist;r&&!l||(t(s.doc,l),n(s.doc,e,l))}}}n(e,null,!0)}function Kn(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,a(e),r(e),e.options.lineWrapping||d(e),e.options.mode=t.modeOption,Ft(e)}function Jn(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var r=e;!r.lines;)for(var n=0;;++n){var i=r.children[n],o=i.chunkSize();if(t<o){r=i;break}t-=o}return r.lines[t]}function Zn(e,t,r){var n=[],i=t.line;return e.iter(t.line,r.line+1,function(e){var o=e.text;i==r.line&&(o=o.slice(0,r.ch)),i==t.line&&(o=o.slice(t.ch)),n.push(o),++i}),n}function ei(e,t,r){var n=[];return e.iter(t,r,function(e){n.push(e.text)}),n}function ti(e,t){var r=t-e.height;if(r)for(var n=e;n;n=n.parent)n.height+=r}function ri(e){if(null==e.parent)return null;for(var t=e.parent,r=Pi(t.lines,e),n=t.parent;n;t=n,n=n.parent)for(var i=0;n.children[i]!=t;++i)r+=n.children[i].chunkSize();return r+t.first}function ni(e,t){var r=e.first;e:do{for(var n=0;n<e.children.length;++n){var i=e.children[n],o=i.height;if(t<o){e=i;continue e}t-=o,r+=i.chunkSize()}return r}while(!e.lines);for(var n=0;n<e.lines.length;++n){var a=e.lines[n],s=a.height;if(t<s)break;t-=s}return r+n}function ii(e){e=bn(e);for(var t=0,r=e.parent,n=0;n<r.lines.length;++n){var i=r.lines[n];if(i==e)break;t+=i.height}for(var o=r.parent;o;r=o,o=r.parent)for(var n=0;n<o.children.length;++n){var a=o.children[n];if(a==r)break;t+=a.height}return t}function oi(e){var t=e.order;return null==t&&(t=e.order=ls(e.text)),t}function ai(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function si(e,t){var r={from:Q(t.from),to:ea(t),text:Zn(e,t.from,t.to)};return hi(e,r,t.from.line,t.to.line+1),Yn(e,function(e){hi(e,r,t.from.line,t.to.line+1)},!0),r}function li(e){for(;e.length;){if(!Oi(e).ranges)break;e.pop()}}function ui(e,t){return t?(li(e.done),Oi(e.done)):e.done.length&&!Oi(e.done).ranges?Oi(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),Oi(e.done)):void 0}function ci(e,t,r,n){var i=e.history;i.undone.length=0;var o,a=+new Date;if((i.lastOp==n||i.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&e.cm&&i.lastModTime>a-e.cm.options.historyEventDelay||"*"==t.origin.charAt(0)))&&(o=ui(i,i.lastOp==n))){var s=Oi(o.changes);0==Go(t.from,t.to)&&0==Go(t.from,s.to)?s.to=ea(t):o.changes.push(si(e,t))}else{var l=Oi(i.done);for(l&&l.ranges||fi(e.sel,i.done),o={changes:[si(e,t)],generation:i.generation},i.done.push(o);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(r),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=a,i.lastOp=i.lastSelOp=n,i.lastOrigin=i.lastSelOrigin=t.origin,s||Pa(e,"historyAdded")}function pi(e,t,r,n){var i=t.charAt(0);return"*"==i||"+"==i&&r.ranges.length==n.ranges.length&&r.somethingSelected()==n.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function di(e,t,r,n){var i=e.history,o=n&&n.origin;r==i.lastSelOp||o&&i.lastSelOrigin==o&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==o||pi(e,o,Oi(i.done),t))?i.done[i.done.length-1]=t:fi(t,i.done),i.lastSelTime=+new Date,i.lastSelOrigin=o,i.lastSelOp=r,n&&!1!==n.clearRedo&&li(i.undone)}function fi(e,t){var r=Oi(t);r&&r.ranges&&r.equals(e)||t.push(e)}function hi(e,t,r,n){var i=t["spans_"+e.id],o=0;e.iter(Math.max(e.first,r),Math.min(e.first+e.size,n),function(r){r.markedSpans&&((i||(i=t["spans_"+e.id]={}))[o]=r.markedSpans),++o})}function gi(e){if(!e)return null;for(var t,r=0;r<e.length;++r)e[r].marker.explicitlyCleared?t||(t=e.slice(0,r)):t&&t.push(e[r]);return t?t.length?t:null:e}function vi(e,t){var r=t["spans_"+e.id];if(!r)return null;for(var n=0,i=[];n<t.text.length;++n)i.push(gi(r[n]));return i}function mi(e,t,r){for(var n=0,i=[];n<e.length;++n){var o=e[n];if(o.ranges)i.push(r?ce.prototype.deepCopy.call(o):o);else{var a=o.changes,s=[];i.push({changes:s});for(var l=0;l<a.length;++l){var u,c=a[l];if(s.push({from:c.from,to:c.to,text:c.text}),t)for(var p in c)(u=p.match(/^spans_(\d+)$/))&&Pi(t,Number(u[1]))>-1&&(Oi(s)[p]=c[p],delete c[p])}}}return i}function yi(e,t,r,n){r<e.line?e.line+=n:t<e.line&&(e.line=t,e.ch=0)}function bi(e,t,r,n){for(var i=0;i<e.length;++i){var o=e[i],a=!0;if(o.ranges){o.copied||(o=e[i]=o.deepCopy(),o.copied=!0);for(var s=0;s<o.ranges.length;s++)yi(o.ranges[s].anchor,t,r,n),yi(o.ranges[s].head,t,r,n)}else{for(var s=0;s<o.changes.length;++s){var l=o.changes[s];if(r<l.from.line)l.from=$o(l.from.line+n,l.from.ch),l.to=$o(l.to.line+n,l.to.ch);else if(t<=l.to.line){a=!1;break}}a||(e.splice(0,i+1),i=0)}}}function Ei(e,t){var r=t.from.line,n=t.to.line,i=t.text.length-(n-r)-1;bi(e.done,r,n,i),bi(e.undone,r,n,i)}function xi(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function Si(e){return e.target||e.srcElement}function Ci(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),_o&&e.ctrlKey&&1==t&&(t=3),t}function wi(e,t,r){var n=e._handlers&&e._handlers[t];return r?n&&n.length>0?n.slice():ka:n||ka}function Ti(e,t){var r=wi(e,t,!1);if(r.length){var n,i=Array.prototype.slice.call(arguments,2);zo?n=zo.delayedCallbacks:Da?n=Da:(n=Da=[],setTimeout(Ai,0));for(var o=0;o<r.length;++o)n.push(function(e){return function(){e.apply(null,i)}}(r[o]))}}function Ai(){var e=Da;Da=null;for(var t=0;t<e.length;++t)e[t]()}function Ii(e,t,r){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),Pa(e,r||t.type,e,t),xi(t)||t.codemirrorIgnore}function Li(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var r=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),n=0;n<t.length;++n)-1==Pi(r,t[n])&&r.push(t[n])}function Ni(e,t){return wi(e,t).length>0}function Ri(e){e.prototype.on=function(e,t){_a(this,e,t)},e.prototype.off=function(e,t){Oa(this,e,t)}}function _i(){this.id=null}function ki(e){for(;Ua.length<=e;)Ua.push(Oi(Ua)+" ");return Ua[e]}function Oi(e){return e[e.length-1]}function Pi(e,t){for(var r=0;r<e.length;++r)if(e[r]==t)return r;return-1}function Di(e,t){for(var r=[],n=0;n<e.length;n++)r[n]=t(e[n],n);return r}function Fi(){}function Mi(e,t){var r;return Object.create?r=Object.create(e):(Fi.prototype=e,r=new Fi),t&&ji(t,r),r}function ji(e,t,r){t||(t={});for(var n in e)!e.hasOwnProperty(n)||!1===r&&t.hasOwnProperty(n)||(t[n]=e[n]);return t}function $i(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function Gi(e,t){return t?!!(t.source.indexOf("\\w")>-1&&Qa(e))||t.test(e):Qa(e)}function Bi(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}function Hi(e){return e.charCodeAt(0)>=768&&Wa.test(e)}function Ui(e,t,r,n){var i=document.createElement(e);if(r&&(i.className=r),n&&(i.style.cssText=n),"string"==typeof t)i.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)i.appendChild(t[o]);return i}function Vi(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function qi(e,t){return Vi(e).appendChild(t)}function zi(){for(var e=document.activeElement;e&&e.root&&e.root.activeElement;)e=e.root.activeElement;return e}function Qi(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}function Wi(e,t){for(var r=e.split(" "),n=0;n<r.length;n++)r[n]&&!Qi(r[n]).test(t)&&(t+=" "+r[n]);return t}function Xi(e){if(document.body.getElementsByClassName)for(var t=document.body.getElementsByClassName("CodeMirror"),r=0;r<t.length;r++){var n=t[r].CodeMirror;n&&e(n)}}function Yi(){es||(Ki(),es=!0)}function Ki(){var e;_a(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,Xi(qt)},100))}),_a(window,"blur",function(){Xi(yr)})}function Ji(e){if(null==Ya){var t=Ui("span","");qi(e,Ui("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(Ya=t.offsetWidth<=1&&t.offsetHeight>2&&!(Eo&&xo<8))}var r=Ya?Ui("span",""):Ui("span","",null,"display: inline-block; width: 1px; margin-right: -1px");return r.setAttribute("cm-text",""),r}function Zi(e){if(null!=Ka)return Ka;var t=qi(e,document.createTextNode("AA")),r=qa(t,0,1).getBoundingClientRect(),n=qa(t,1,2).getBoundingClientRect();return Vi(e),!(!r||r.left==r.right)&&(Ka=n.right-r.right<3)}function eo(e){if(null!=os)return os;var t=qi(e,Ui("span","x")),r=t.getBoundingClientRect(),n=qa(t,0,1).getBoundingClientRect();return os=Math.abs(r.left-n.left)>1}function to(e,t,r,n){if(!e)return n(t,r,"ltr");for(var i=!1,o=0;o<e.length;++o){var a=e[o];(a.from<r&&a.to>t||t==r&&a.to==t)&&(n(Math.max(a.from,t),Math.min(a.to,r),1==a.level?"rtl":"ltr"),i=!0)}i||n(t,r,"ltr")}function ro(e){return e.level%2?e.to:e.from}function no(e){return e.level%2?e.from:e.to}function io(e){var t=oi(e);return t?ro(t[0]):0}function oo(e){var t=oi(e);return t?no(Oi(t)):e.text.length}function ao(e,t){var r=Jn(e.doc,t),n=bn(r);n!=r&&(t=ri(n));var i=oi(n),o=i?i[0].level%2?oo(n):io(n):0;return $o(t,o)}function so(e,t){for(var r,n=Jn(e.doc,t);r=mn(n);)n=r.find(1,!0).line,t=null;var i=oi(n),o=i?i[0].level%2?io(n):oo(n):n.text.length;return $o(null==t?ri(n):t,o)}function lo(e,t){var r=ao(e,t.line),n=Jn(e.doc,r.line),i=oi(n);if(!i||0==i[0].level){var o=Math.max(0,n.text.search(/\S/)),a=t.line==r.line&&t.ch<=o&&t.ch;return $o(r.line,a?0:o)}return r}function uo(e,t,r){var n=e[0].level;return t==n||r!=n&&t<r}function co(e,t){ss=null;for(var r,n=0;n<e.length;++n){var i=e[n];if(i.from<t&&i.to>t)return n;if(i.from==t||i.to==t){if(null!=r)return uo(e,i.level,e[r].level)?(i.from!=i.to&&(ss=r),n):(i.from!=i.to&&(ss=n),r);r=n}}return r}function po(e,t,r,n){if(!n)return t+r;do{t+=r}while(t>0&&Hi(e.text.charAt(t)));return t}function fo(e,t,r,n){var i=oi(e);if(!i)return ho(e,t,r,n);for(var o=co(i,t),a=i[o],s=po(e,t,a.level%2?-r:r,n);;){if(s>a.from&&s<a.to)return s;if(s==a.from||s==a.to)return co(i,s)==o?s:(a=i[o+=r],r>0==a.level%2?a.to:a.from);if(!(a=i[o+=r]))return null;s=r>0==a.level%2?po(e,a.to,-1,n):po(e,a.from,1,n)}}function ho(e,t,r,n){var i=t+r;if(n)for(;i>0&&Hi(e.text.charAt(i));)i+=r;return i<0||i>e.text.length?null:i}var go=navigator.userAgent,vo=navigator.platform,mo=/gecko\/\d/i.test(go),yo=/MSIE \d/.test(go),bo=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(go),Eo=yo||bo,xo=Eo&&(yo?document.documentMode||6:bo[1]),So=/WebKit\//.test(go),Co=So&&/Qt\/\d+\.\d+/.test(go),wo=/Chrome\//.test(go),To=/Opera\//.test(go),Ao=/Apple Computer/.test(navigator.vendor),Io=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(go),Lo=/PhantomJS/.test(go),No=/AppleWebKit/.test(go)&&/Mobile\/\w+/.test(go),Ro=No||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(go),_o=No||/Mac/.test(vo),ko=/\bCrOS\b/.test(go),Oo=/win/i.test(vo),Po=To&&go.match(/Version\/(\d*\.\d*)/);Po&&(Po=Number(Po[1])),Po&&Po>=15&&(To=!1,So=!0);var Do=_o&&(Co||To&&(null==Po||Po<12.11)),Fo=mo||Eo&&xo>=9,Mo=!1,jo=!1;g.prototype=ji({update:function(e){var t=e.scrollWidth>e.clientWidth+1,r=e.scrollHeight>e.clientHeight+1,n=e.nativeBarWidth;if(r){this.vert.style.display="block",this.vert.style.bottom=t?n+"px":"0";var i=e.viewHeight-(t?n:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+i)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=r?n+"px":"0",this.horiz.style.left=e.barLeft+"px";var o=e.viewWidth-e.barLeft-(r?n:0);this.horiz.firstChild.style.width=e.scrollWidth-e.clientWidth+o+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(0==n&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:r?n:0,bottom:t?n:0}},setScrollLeft:function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz)},setScrollTop:function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert)},zeroWidthHack:function(){var e=_o&&!Io?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new _i,this.disableVert=new _i},enableZeroWidthBar:function(e,t){function r(){var n=e.getBoundingClientRect();document.elementFromPoint(n.left+1,n.bottom-1)!=e?e.style.pointerEvents="none":t.set(1e3,r)}e.style.pointerEvents="auto",t.set(1e3,r)},clear:function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)}},g.prototype),v.prototype=ji({update:function(){return{bottom:0,right:0}},setScrollLeft:function(){},setScrollTop:function(){},clear:function(){}},v.prototype),e.scrollbarModel={native:g,null:v},T.prototype.signal=function(e,t){Ni(e,t)&&this.events.push(arguments)},T.prototype.finish=function(){for(var e=0;e<this.events.length;e++)Pa.apply(null,this.events[e])};var $o=e.Pos=function(e,t){if(!(this instanceof $o))return new $o(e,t);this.line=e,this.ch=t},Go=e.cmpPos=function(e,t){return e.line-t.line||e.ch-t.ch},Bo=null;re.prototype=ji({init:function(e){function t(e){if(!Ii(n,e)){if(n.somethingSelected())Bo={lineWise:!1,text:n.getSelections()},r.inaccurateSelection&&(r.prevInput="",r.inaccurateSelection=!1,o.value=Bo.text.join("\n"),Va(o));else{if(!n.options.lineWiseCopyCut)return;var t=ee(n);Bo={lineWise:!0,text:t.text},"cut"==e.type?n.setSelections(t.ranges,null,ja):(r.prevInput="",o.value=t.text.join("\n"),Va(o))}"cut"==e.type&&(n.state.cutIncoming=!0)}}var r=this,n=this.cm,i=this.wrapper=ne(),o=this.textarea=i.firstChild;e.wrapper.insertBefore(i,e.wrapper.firstChild),No&&(o.style.width="0px"),_a(o,"input",function(){Eo&&xo>=9&&r.hasSelection&&(r.hasSelection=null),r.poll()}),_a(o,"paste",function(e){Ii(n,e)||J(e,n)||(n.state.pasteIncoming=!0,r.fastPoll())}),_a(o,"cut",t),_a(o,"copy",t),_a(e.scroller,"paste",function(t){zt(e,t)||Ii(n,t)||(n.state.pasteIncoming=!0,r.focus())}),_a(e.lineSpace,"selectstart",function(t){zt(e,t)||La(t)}),_a(o,"compositionstart",function(){var e=n.getCursor("from");r.composing&&r.composing.range.clear(),r.composing={start:e,range:n.markText(e,n.getCursor("to"),{className:"CodeMirror-composing"})}}),_a(o,"compositionend",function(){r.composing&&(r.poll(),r.composing.range.clear(),r.composing=null)})},prepareSelection:function(){var e=this.cm,t=e.display,r=e.doc,n=De(e);if(e.options.moveInputWithCursor){var i=ht(e,r.sel.primary().head,"div"),o=t.wrapper.getBoundingClientRect(),a=t.lineDiv.getBoundingClientRect();n.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,i.top+a.top-o.top)),n.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,i.left+a.left-o.left))}return n},showSelection:function(e){var t=this.cm,r=t.display;qi(r.cursorDiv,e.cursors),qi(r.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},reset:function(e){if(!this.contextMenuPending){var t,r,n=this.cm,i=n.doc;if(n.somethingSelected()){this.prevInput="";var o=i.sel.primary();t=is&&(o.to().line-o.from().line>100||(r=n.getSelection()).length>1e3);var a=t?"-":r||n.getSelection();this.textarea.value=a,n.state.focused&&Va(this.textarea),Eo&&xo>=9&&(this.hasSelection=a)}else e||(this.prevInput=this.textarea.value="",Eo&&xo>=9&&(this.hasSelection=null));this.inaccurateSelection=t}},getField:function(){return this.textarea},supportsTouch:function(){return!1},focus:function(){if("nocursor"!=this.cm.options.readOnly&&(!Ro||zi()!=this.textarea))try{this.textarea.focus()}catch(e){}},blur:function(){this.textarea.blur()},resetPosition:function(){this.wrapper.style.top=this.wrapper.style.left=0},receivedFocus:function(){this.slowPoll()},slowPoll:function(){var e=this;e.pollingFast||e.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},fastPoll:function(){function e(){r.poll()||t?(r.pollingFast=!1,r.slowPoll()):(t=!0,r.polling.set(60,e))}var t=!1,r=this;r.pollingFast=!0,r.polling.set(20,e)},poll:function(){var e=this.cm,t=this.textarea,r=this.prevInput;if(this.contextMenuPending||!e.state.focused||ns(t)&&!r&&!this.composing||e.isReadOnly()||e.options.disableInput||e.state.keySeq)return!1;var n=t.value;if(n==r&&!e.somethingSelected())return!1;if(Eo&&xo>=9&&this.hasSelection===n||_o&&/[\uf700-\uf7ff]/.test(n))return e.display.input.reset(),!1;if(e.doc.sel==e.display.selForContextMenu){var i=n.charCodeAt(0);if(8203!=i||r||(r=""),8666==i)return this.reset(),this.cm.execCommand("undo")}for(var o=0,a=Math.min(r.length,n.length);o<a&&r.charCodeAt(o)==n.charCodeAt(o);)++o;var s=this;return Rt(e,function(){K(e,n.slice(o),r.length-o,null,s.composing?"*compose":null),n.length>1e3||n.indexOf("\n")>-1?t.value=s.prevInput="":s.prevInput=n,s.composing&&(s.composing.range.clear(),s.composing.range=e.markText(s.composing.start,e.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},ensurePolled:function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},onKeyPress:function(){Eo&&xo>=9&&(this.hasSelection=null),this.fastPoll()},onContextMenu:function(e){function t(){if(null!=a.selectionStart){var e=i.somethingSelected(),t=""+(e?a.value:"");a.value="",a.value=t,n.prevInput=e?"":"",a.selectionStart=1,a.selectionEnd=t.length,o.selForContextMenu=i.doc.sel}}function r(){if(n.contextMenuPending=!1,n.wrapper.style.cssText=c,a.style.cssText=u,Eo&&xo<9&&o.scrollbars.setScrollTop(o.scroller.scrollTop=l),null!=a.selectionStart){(!Eo||Eo&&xo<9)&&t();var e=0,r=function(){o.selForContextMenu==i.doc.sel&&0==a.selectionStart&&a.selectionEnd>0&&""==n.prevInput?_t(i,pa.selectAll)(i):e++<10?o.detectingSelectAll=setTimeout(r,500):o.input.reset()};o.detectingSelectAll=setTimeout(r,200)}}var n=this,i=n.cm,o=i.display,a=n.textarea,s=Qt(i,e),l=o.scroller.scrollTop;if(s&&!To){i.options.resetSelectionOnContextMenu&&-1==i.doc.sel.contains(s)&&_t(i,Ae)(i.doc,fe(s),ja);var u=a.style.cssText,c=n.wrapper.style.cssText;n.wrapper.style.cssText="position: absolute";var p=n.wrapper.getBoundingClientRect();if(a.style.cssText="position: absolute; width: 30px; height: 30px; top: "+(e.clientY-p.top-5)+"px; left: "+(e.clientX-p.left-5)+"px; z-index: 1000; background: "+(Eo?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",So)var d=window.scrollY;if(o.input.focus(),So&&window.scrollTo(null,d),o.input.reset(),i.somethingSelected()||(a.value=n.prevInput=" "),n.contextMenuPending=!0,o.selForContextMenu=i.doc.sel,clearTimeout(o.detectingSelectAll),Eo&&xo>=9&&t(),Fo){Ra(e);var f=function(){Oa(window,"mouseup",f),setTimeout(r,20)};_a(window,"mouseup",f)}else setTimeout(r,50)}},readOnlyChanged:function(e){e||this.reset()},setUneditable:Fi,needsContentAttribute:!1},re.prototype),ie.prototype=ji({init:function(e){function t(e){if(!Ii(n,e)){if(n.somethingSelected())Bo={lineWise:!1,text:n.getSelections()},"cut"==e.type&&n.replaceSelection("",null,"cut");else{if(!n.options.lineWiseCopyCut)return;var t=ee(n);Bo={lineWise:!0,text:t.text},"cut"==e.type&&n.operation(function(){n.setSelections(t.ranges,0,ja),n.replaceSelection("",null,"cut")})}if(e.clipboardData&&!No)e.preventDefault(),e.clipboardData.clearData(),e.clipboardData.setData("text/plain",Bo.text.join("\n"));else{var r=ne(),i=r.firstChild;n.display.lineSpace.insertBefore(r,n.display.lineSpace.firstChild),i.value=Bo.text.join("\n");var o=document.activeElement;Va(i),setTimeout(function(){n.display.lineSpace.removeChild(r),o.focus()},50)}}}var r=this,n=r.cm,i=r.div=e.lineDiv;te(i),_a(i,"paste",function(e){Ii(n,e)||J(e,n)}),_a(i,"compositionstart",function(e){var t=e.data;if(r.composing={sel:n.doc.sel,data:t,startData:t},t){var i=n.doc.sel.primary(),o=n.getLine(i.head.line),a=o.indexOf(t,Math.max(0,i.head.ch-t.length));a>-1&&a<=i.head.ch&&(r.composing.sel=fe($o(i.head.line,a),$o(i.head.line,a+t.length)))}}),_a(i,"compositionupdate",function(e){r.composing.data=e.data}),_a(i,"compositionend",function(e){var t=r.composing;t&&(e.data==t.startData||/\u200b/.test(e.data)||(t.data=e.data),setTimeout(function(){t.handled||r.applyComposition(t),r.composing==t&&(r.composing=null)},50))}),_a(i,"touchstart",function(){r.forceCompositionEnd()}),_a(i,"input",function(){r.composing||!n.isReadOnly()&&r.pollContent()||Rt(r.cm,function(){Ft(n)})}),_a(i,"copy",t),_a(i,"cut",t)},prepareSelection:function(){var e=De(this.cm,!1);return e.focus=this.cm.state.focused,e},showSelection:function(e,t){e&&this.cm.display.view.length&&((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},showPrimarySelection:function(){var e=window.getSelection(),t=this.cm.doc.sel.primary(),r=se(this.cm,e.anchorNode,e.anchorOffset),n=se(this.cm,e.focusNode,e.focusOffset);if(!r||r.bad||!n||n.bad||0!=Go(X(r,n),t.from())||0!=Go(W(r,n),t.to())){var i=oe(this.cm,t.from()),o=oe(this.cm,t.to());if(i||o){var a=this.cm.display.view,s=e.rangeCount&&e.getRangeAt(0);if(i){if(!o){var l=a[a.length-1].measure,u=l.maps?l.maps[l.maps.length-1]:l.map;o={node:u[u.length-1],offset:u[u.length-2]-u[u.length-3]}}}else i={node:a[0].measure.map[2],offset:0};try{var c=qa(i.node,i.offset,o.offset,o.node)}catch(e){}c&&(!mo&&this.cm.state.focused?(e.collapse(i.node,i.offset),c.collapsed||e.addRange(c)):(e.removeAllRanges(),e.addRange(c)),s&&null==e.anchorNode?e.addRange(s):mo&&this.startGracePeriod()),this.rememberSelection()}}},startGracePeriod:function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){e.cm.curOp.selectionChanged=!0})},20)},showMultipleSelections:function(e){qi(this.cm.display.cursorDiv,e.cursors),qi(this.cm.display.selectionDiv,e.selection)},rememberSelection:function(){var e=window.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},selectionInEditor:function(){var e=window.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return Xa(this.div,t)},focus:function(){"nocursor"!=this.cm.options.readOnly&&this.div.focus()},blur:function(){this.div.blur()},getField:function(){return this.div},supportsTouch:function(){return!0},receivedFocus:function(){function e(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,e))}var t=this;this.selectionInEditor()?this.pollSelection():Rt(this.cm,function(){t.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,e)},selectionChanged:function(){var e=window.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},pollSelection:function(){if(!this.composing&&!this.gracePeriod&&this.selectionChanged()){var e=window.getSelection(),t=this.cm;this.rememberSelection();var r=se(t,e.anchorNode,e.anchorOffset),n=se(t,e.focusNode,e.focusOffset);r&&n&&Rt(t,function(){Ae(t.doc,fe(r,n),ja),(r.bad||n.bad)&&(t.curOp.selectionChanged=!0)})}},pollContent:function(){var e=this.cm,t=e.display,r=e.doc.sel.primary(),n=r.from(),i=r.to();if(n.line<t.viewFrom||i.line>t.viewTo-1)return!1;var o;if(n.line==t.viewFrom||0==(o=$t(e,n.line)))var a=ri(t.view[0].line),s=t.view[0].node;else var a=ri(t.view[o].line),s=t.view[o-1].node.nextSibling;var l=$t(e,i.line);if(l==t.view.length-1)var u=t.viewTo-1,c=t.lineDiv.lastChild;else var u=ri(t.view[l+1].line)-1,c=t.view[l+1].node.previousSibling;for(var p=e.doc.splitLines(ue(e,s,c,a,u)),d=Zn(e.doc,$o(a,0),$o(u,Jn(e.doc,u).text.length));p.length>1&&d.length>1;)if(Oi(p)==Oi(d))p.pop(),d.pop(),u--;else{if(p[0]!=d[0])break;p.shift(),d.shift(),a++}for(var f=0,h=0,g=p[0],v=d[0],m=Math.min(g.length,v.length);f<m&&g.charCodeAt(f)==v.charCodeAt(f);)++f;for(var y=Oi(p),b=Oi(d),E=Math.min(y.length-(1==p.length?f:0),b.length-(1==d.length?f:0));h<E&&y.charCodeAt(y.length-h-1)==b.charCodeAt(b.length-h-1);)++h;p[p.length-1]=y.slice(0,y.length-h),p[0]=p[0].slice(f);var x=$o(a,f),S=$o(u,d.length?Oi(d).length-h:0);return p.length>1||p[0]||Go(x,S)?(kr(e.doc,p,x,S,"+input"),!0):void 0},ensurePolled:function(){this.forceCompositionEnd()},reset:function(){this.forceCompositionEnd()},forceCompositionEnd:function(){this.composing&&!this.composing.handled&&(this.applyComposition(this.composing),this.composing.handled=!0,this.div.blur(),this.div.focus())},applyComposition:function(e){this.cm.isReadOnly()?_t(this.cm,Ft)(this.cm):e.data&&e.data!=e.startData&&_t(this.cm,K)(this.cm,e.data,0,e.sel)},setUneditable:function(e){e.contentEditable="false"},onKeyPress:function(e){e.preventDefault(),this.cm.isReadOnly()||_t(this.cm,K)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0)},readOnlyChanged:function(e){this.div.contentEditable=String("nocursor"!=e)},onContextMenu:Fi,resetPosition:Fi,needsContentAttribute:!0},ie.prototype),e.inputStyles={textarea:re,contenteditable:ie},ce.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var r=this.ranges[t],n=e.ranges[t];if(0!=Go(r.anchor,n.anchor)||0!=Go(r.head,n.head))return!1}return!0},deepCopy:function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new pe(Q(this.ranges[t].anchor),Q(this.ranges[t].head));return new ce(e,this.primIndex)},somethingSelected:function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},contains:function(e,t){t||(t=e);for(var r=0;r<this.ranges.length;r++){var n=this.ranges[r];if(Go(t,n.from())>=0&&Go(e,n.to())<=0)return r}return-1}},pe.prototype={from:function(){return X(this.anchor,this.head)},to:function(){return W(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var Ho,Uo,Vo,qo={left:0,right:0,top:0,bottom:0},zo=null,Qo=0,Wo=0,Xo=0,Yo=null;Eo?Yo=-.53:mo?Yo=15:wo?Yo=-.7:Ao&&(Yo=-1/3);var Ko=function(e){var t=e.wheelDeltaX,r=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==r&&e.detail&&e.axis==e.VERTICAL_AXIS?r=e.detail:null==r&&(r=e.wheelDelta),{x:t,y:r}};e.wheelEventPixels=function(e){var t=Ko(e);return t.x*=Yo,t.y*=Yo,t};var Jo=new _i,Zo=null,ea=e.changeEnd=function(e){return e.text?$o(e.from.line+e.text.length-1,Oi(e.text).length+(1==e.text.length?e.from.ch:0)):e.to};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,t){var r=this.options,n=r[e];r[e]==t&&"mode"!=e||(r[e]=t,ra.hasOwnProperty(e)&&_t(this,ra[e])(this,t,n))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](Qr(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,r=0;r<t.length;++r)if(t[r]==e||t[r].name==e)return t.splice(r,1),!0},addOverlay:kt(function(t,r){var n=t.token?t:e.getMode(this.options,t);if(n.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:n,modeSpec:t,opaque:r&&r.opaque}),this.state.modeGen++,Ft(this)}),removeOverlay:kt(function(e){for(var t=this.state.overlays,r=0;r<t.length;++r){var n=t[r].modeSpec;if(n==e||"string"==typeof e&&n.name==e)return t.splice(r,1),this.state.modeGen++,void Ft(this)}}),indentLine:kt(function(e,t,r){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),me(this.doc,e)&&Gr(this,e,t,r)}),indentSelection:kt(function(e){for(var t=this.doc.sel.ranges,r=-1,n=0;n<t.length;n++){var i=t[n];if(i.empty())i.head.line>r&&(Gr(this,i.head.line,e,!0),r=i.head.line,n==this.doc.sel.primIndex&&jr(this));else{var o=i.from(),a=i.to(),s=Math.max(r,o.line);r=Math.min(this.lastLine(),a.line-(a.ch?0:1))+1;for(var l=s;l<r;++l)Gr(this,l,e);var u=this.doc.sel.ranges;0==o.ch&&t.length==u.length&&u[n].from().ch>0&&Se(this.doc,n,new pe(o,u[n].to()),ja)}}}),getTokenAt:function(e,t){return On(this,e,t)},getLineTokens:function(e,t){return On(this,$o(e),t,!0)},getTokenTypeAt:function(e){e=ge(this.doc,e);var t,r=Fn(this,Jn(this.doc,e.line)),n=0,i=(r.length-1)/2,o=e.ch;if(0==o)t=r[2];else for(;;){var a=n+i>>1;if((a?r[2*a-1]:0)>=o)i=a;else{if(!(r[2*a+1]<o)){t=r[2*a+2];break}n=a+1}}var s=t?t.indexOf("cm-overlay "):-1;return s<0?t:0==s?null:t.slice(0,s-1)},getModeAt:function(t){var r=this.doc.mode;return r.innerMode?e.innerMode(r,this.getTokenAt(t).state).mode:r},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var r=[];if(!la.hasOwnProperty(t))return r;var n=la[t],i=this.getModeAt(e);if("string"==typeof i[t])n[i[t]]&&r.push(n[i[t]]);else if(i[t])for(var o=0;o<i[t].length;o++){var a=n[i[t][o]];a&&r.push(a)}else i.helperType&&n[i.helperType]?r.push(n[i.helperType]):n[i.name]&&r.push(n[i.name]);for(var o=0;o<n._global.length;o++){var s=n._global[o];s.pred(i,this)&&-1==Pi(r,s.val)&&r.push(s.val)}return r},getStateAfter:function(e,t){var r=this.doc;return e=he(r,null==e?r.first+r.size-1:e),He(this,e+1,t)},cursorCoords:function(e,t){var r,n=this.doc.sel.primary();return r=null==e?n.head:"object"==typeof e?ge(this.doc,e):e?n.from():n.to(),ht(this,r,t||"page")},charCoords:function(e,t){return ft(this,ge(this.doc,e),t||"page")},coordsChar:function(e,t){return e=dt(this,e,t||"page"),mt(this,e.left,e.top)},lineAtHeight:function(e,t){return e=dt(this,{top:e,left:0},t||"page").top,ni(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t){var r,n=!1;if("number"==typeof e){var i=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>i&&(e=i,n=!0),r=Jn(this.doc,e)}else r=e;return pt(this,r,{top:0,left:0},t||"page").top+(n?this.doc.height-ii(r):0)},defaultTextHeight:function(){return bt(this.display)},defaultCharWidth:function(){return Et(this.display)},setGutterMarker:kt(function(e,t,r){return Br(this.doc,e,"gutter",function(e){var n=e.gutterMarkers||(e.gutterMarkers={});return n[t]=r,!r&&Bi(n)&&(e.gutterMarkers=null),!0})}),clearGutter:kt(function(e){var t=this,r=t.doc,n=r.first;r.iter(function(r){r.gutterMarkers&&r.gutterMarkers[e]&&(r.gutterMarkers[e]=null,Mt(t,n,"gutter"),Bi(r.gutterMarkers)&&(r.gutterMarkers=null)),++n})}),lineInfo:function(e){if("number"==typeof e){if(!me(this.doc,e))return null;var t=e;if(!(e=Jn(this.doc,e)))return null}else{var t=ri(e);if(null==t)return null}return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,r,n,i){var o=this.display;e=ht(this,ge(this.doc,e));var a=e.bottom,s=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),o.sizer.appendChild(t),"over"==n)a=e.top;else if("above"==n||"near"==n){var l=Math.max(o.wrapper.clientHeight,this.doc.height),u=Math.max(o.sizer.clientWidth,o.lineSpace.clientWidth);("above"==n||e.bottom+t.offsetHeight>l)&&e.top>t.offsetHeight?a=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=l&&(a=e.bottom),s+t.offsetWidth>u&&(s=u-t.offsetWidth)}t.style.top=a+"px",t.style.left=t.style.right="","right"==i?(s=o.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==i?s=0:"middle"==i&&(s=(o.sizer.clientWidth-t.offsetWidth)/2),t.style.left=s+"px"),r&&Dr(this,s,a,s+t.offsetWidth,a+t.offsetHeight)},triggerOnKeyDown:kt(dr),triggerOnKeyPress:kt(gr),triggerOnKeyUp:hr,execCommand:function(e){if(pa.hasOwnProperty(e))return pa[e].call(null,this)},triggerElectric:kt(function(e){Z(this,e)}),findPosH:function(e,t,r,n){var i=1;t<0&&(i=-1,t=-t);for(var o=0,a=ge(this.doc,e);o<t&&(a=Ur(this.doc,a,i,r,n),!a.hitSide);++o);return a},moveH:kt(function(e,t){var r=this;r.extendSelectionsBy(function(n){return r.display.shift||r.doc.extend||n.empty()?Ur(r.doc,n.head,e,t,r.options.rtlMoveVisually):e<0?n.from():n.to()},Ga)}),deleteH:kt(function(e,t){var r=this.doc.sel,n=this.doc;r.somethingSelected()?n.replaceSelection("",null,"+delete"):Hr(this,function(r){var i=Ur(n,r.head,e,t,!1);return e<0?{from:i,to:r.head}:{from:r.head,to:i}})}),findPosV:function(e,t,r,n){var i=1,o=n;t<0&&(i=-1,t=-t);for(var a=0,s=ge(this.doc,e);a<t;++a){var l=ht(this,s,"div");if(null==o?o=l.left:l.left=o,s=Vr(this,l,i,r),s.hitSide)break}return s},moveV:kt(function(e,t){var r=this,n=this.doc,i=[],o=!r.display.shift&&!n.extend&&n.sel.somethingSelected();if(n.extendSelectionsBy(function(a){if(o)return e<0?a.from():a.to();var s=ht(r,a.head,"div");null!=a.goalColumn&&(s.left=a.goalColumn),i.push(s.left);var l=Vr(r,s,e,t);return"page"==t&&a==n.sel.primary()&&Mr(r,null,ft(r,l,"div").top-s.top),l},Ga),i.length)for(var a=0;a<n.sel.ranges.length;a++)n.sel.ranges[a].goalColumn=i[a]}),findWordAt:function(e){var t=this.doc,r=Jn(t,e.line).text,n=e.ch,i=e.ch;if(r){var o=this.getHelper(e,"wordChars");(e.xRel<0||i==r.length)&&n?--n:++i;for(var a=r.charAt(n),s=Gi(a,o)?function(e){return Gi(e,o)}:/\s/.test(a)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!Gi(e)};n>0&&s(r.charAt(n-1));)--n;for(;i<r.length&&s(r.charAt(i));)++i}return new pe($o(e.line,n),$o(e.line,i))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?Za(this.display.cursorDiv,"CodeMirror-overwrite"):Ja(this.display.cursorDiv,"CodeMirror-overwrite"),Pa(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==zi()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:kt(function(e,t){null==e&&null==t||$r(this),null!=e&&(this.curOp.scrollLeft=e),null!=t&&(this.curOp.scrollTop=t)}),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-ze(this)-this.display.barHeight,width:e.scrollWidth-ze(this)-this.display.barWidth,clientHeight:We(this),clientWidth:Qe(this)}},scrollIntoView:kt(function(e,t){if(null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:$o(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line)$r(this),this.curOp.scrollToPos=e;else{var r=Fr(this,Math.min(e.from.left,e.to.left),Math.min(e.from.top,e.to.top)-e.margin,Math.max(e.from.right,e.to.right),Math.max(e.from.bottom,e.to.bottom)+e.margin);this.scrollTo(r.scrollLeft,r.scrollTop)}}),setSize:kt(function(e,t){function r(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e}var n=this;null!=e&&(n.display.wrapper.style.width=r(e)),null!=t&&(n.display.wrapper.style.height=r(t)),n.options.lineWrapping&&st(this);var i=n.display.viewFrom;n.doc.iter(i,n.display.viewTo,function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){Mt(n,i,"widget");break}++i}),n.curOp.forceUpdate=!0,Pa(n,"refresh",this)}),operation:function(e){return Rt(this,e)},refresh:kt(function(){var e=this.display.cachedTextHeight;Ft(this),this.curOp.forceUpdate=!0,lt(this),this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop),c(this),(null==e||Math.abs(e-bt(this.display))>.5)&&a(this),Pa(this,"refresh",this)}),swapDoc:kt(function(e){var t=this.doc;return t.cm=null,Kn(this,e),lt(this),this.display.input.reset(),this.scrollTo(e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,Ti(this,"swapDoc",this,t),t}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Ri(e);var ta=e.defaults={},ra=e.optionHandlers={},na=e.Init={toString:function(){return"CodeMirror.Init"}};qr("value","",function(e,t){e.setValue(t)},!0),qr("mode",null,function(e,t){e.doc.modeOption=t,r(e)},!0),qr("indentUnit",2,r,!0),qr("indentWithTabs",!1),qr("smartIndent",!0),qr("tabSize",4,function(e){n(e),lt(e),Ft(e)},!0),qr("lineSeparator",null,function(e,t){if(e.doc.lineSep=t,t){var r=[],n=e.doc.first;e.doc.iter(function(e){for(var i=0;;){var o=e.text.indexOf(t,i);if(-1==o)break;i=o+t.length,r.push($o(n,o))}n++});for(var i=r.length-1;i>=0;i--)kr(e.doc,t,r[i],$o(r[i].line,r[i].ch+t.length))}}),qr("specialChars",/[\u0000-\u001f\u007f\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(t,r,n){t.state.specialChars=new RegExp(r.source+(r.test("\t")?"":"|\t"),"g"),n!=e.Init&&t.refresh()}),qr("specialCharPlaceholder",Gn,function(e){e.refresh()},!0),qr("electricChars",!0),qr("inputStyle",Ro?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),qr("rtlMoveVisually",!Oo),qr("wholeLineUpdateBefore",!0),qr("theme","default",function(e){s(e),l(e)},!0),qr("keyMap","default",function(t,r,n){var i=Qr(r),o=n!=e.Init&&Qr(n);o&&o.detach&&o.detach(t,i),i.attach&&i.attach(t,o||null)}),qr("extraKeys",null),qr("lineWrapping",!1,i,!0),qr("gutters",[],function(e){f(e.options),l(e)},!0),qr("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?w(e.display)+"px":"0",e.refresh()},!0),qr("coverGutterNextToScrollbar",!1,function(e){y(e)},!0),qr("scrollbarStyle","native",function(e){m(e),y(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)},!0),qr("lineNumbers",!1,function(e){f(e.options),l(e)},!0),qr("firstLineNumber",1,l,!0),qr("lineNumberFormatter",function(e){return e},l,!0),qr("showCursorWhenSelecting",!1,Pe,!0),qr("resetSelectionOnContextMenu",!0),qr("lineWiseCopyCut",!0),qr("readOnly",!1,function(e,t){"nocursor"==t?(yr(e),e.display.input.blur(),e.display.disabled=!0):e.display.disabled=!1,e.display.input.readOnlyChanged(t)}),qr("disableInput",!1,function(e,t){t||e.display.input.reset()},!0),qr("dragDrop",!0,Vt),qr("allowDropFileTypes",null),qr("cursorBlinkRate",530),qr("cursorScrollMargin",0),qr("cursorHeight",1,Pe,!0),qr("singleCursorHeightPerLine",!0,Pe,!0),qr("workTime",100),qr("workDelay",100),qr("flattenSpans",!0,n,!0),qr("addModeClass",!1,n,!0),qr("pollInterval",100),qr("undoDepth",200,function(e,t){e.doc.history.undoDepth=t}),qr("historyEventDelay",1250),qr("viewportMargin",10,function(e){e.refresh()},!0),qr("maxHighlightLength",1e4,n,!0),qr("moveInputWithCursor",!0,function(e,t){t||e.display.input.resetPosition()}),qr("tabindex",null,function(e,t){e.display.input.getField().tabIndex=t||""}),qr("autofocus",null);var ia=e.modes={},oa=e.mimeModes={};e.defineMode=function(t,r){e.defaults.mode||"null"==t||(e.defaults.mode=t),arguments.length>2&&(r.dependencies=Array.prototype.slice.call(arguments,2)),ia[t]=r},e.defineMIME=function(e,t){oa[e]=t},e.resolveMode=function(t){if("string"==typeof t&&oa.hasOwnProperty(t))t=oa[t];else if(t&&"string"==typeof t.name&&oa.hasOwnProperty(t.name)){var r=oa[t.name];"string"==typeof r&&(r={name:r}),t=Mi(r,t),t.name=r.name}else if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return e.resolveMode("application/xml");return"string"==typeof t?{name:t}:t||{name:"null"}},e.getMode=function(t,r){var r=e.resolveMode(r),n=ia[r.name];if(!n)return e.getMode(t,"text/plain");var i=n(t,r);if(aa.hasOwnProperty(r.name)){var o=aa[r.name];for(var a in o)o.hasOwnProperty(a)&&(i.hasOwnProperty(a)&&(i["_"+a]=i[a]),i[a]=o[a])}if(i.name=r.name,r.helperType&&(i.helperType=r.helperType),r.modeProps)for(var a in r.modeProps)i[a]=r.modeProps[a];return i},e.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),e.defineMIME("text/plain","null");var aa=e.modeExtensions={};e.extendMode=function(e,t){ji(t,aa.hasOwnProperty(e)?aa[e]:aa[e]={})},e.defineExtension=function(t,r){e.prototype[t]=r},e.defineDocExtension=function(e,t){Ta.prototype[e]=t},e.defineOption=qr;var sa=[];e.defineInitHook=function(e){sa.push(e)};var la=e.helpers={};e.registerHelper=function(t,r,n){la.hasOwnProperty(t)||(la[t]=e[t]={_global:[]}),la[t][r]=n},e.registerGlobalHelper=function(t,r,n,i){e.registerHelper(t,r,i),la[t]._global.push({pred:n,val:i})};var ua=e.copyState=function(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var r={};for(var n in t){var i=t[n];i instanceof Array&&(i=i.concat([])),r[n]=i}return r},ca=e.startState=function(e,t,r){return!e.startState||e.startState(t,r)};e.innerMode=function(e,t){for(;e.innerMode;){var r=e.innerMode(t);if(!r||r.mode==e)break;t=r.state,e=r.mode}return r||{mode:e,state:t}};var pa=e.commands={selectAll:function(e){e.setSelection($o(e.firstLine(),0),$o(e.lastLine()),ja)},singleSelection:function(e){e.setSelection(e.getCursor("anchor"),e.getCursor("head"),ja)},killLine:function(e){Hr(e,function(t){if(t.empty()){var r=Jn(e.doc,t.head.line).text.length;return t.head.ch==r&&t.head.line<e.lastLine()?{from:t.head,to:$o(t.head.line+1,0)}:{from:t.head,to:$o(t.head.line,r)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){Hr(e,function(t){return{from:$o(t.from().line,0),to:ge(e.doc,$o(t.to().line+1,0))}})},delLineLeft:function(e){Hr(e,function(e){return{from:$o(e.from().line,0),to:e.from()}})},delWrappedLineLeft:function(e){Hr(e,function(t){var r=e.charCoords(t.head,"div").top+5;return{from:e.coordsChar({left:0,top:r},"div"),to:t.from()}})},delWrappedLineRight:function(e){Hr(e,function(t){var r=e.charCoords(t.head,"div").top+5,n=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:r},"div");return{from:t.from(),to:n}})},undo:function(e){e.undo()},redo:function(e){e.redo()},undoSelection:function(e){e.undoSelection()},redoSelection:function(e){e.redoSelection()},goDocStart:function(e){e.extendSelection($o(e.firstLine(),0))},goDocEnd:function(e){e.extendSelection($o(e.lastLine()))},goLineStart:function(e){e.extendSelectionsBy(function(t){return ao(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){e.extendSelectionsBy(function(t){return lo(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){e.extendSelectionsBy(function(t){return so(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){e.extendSelectionsBy(function(t){var r=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:r},"div")},Ga)},goLineLeft:function(e){e.extendSelectionsBy(function(t){var r=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:r},"div")},Ga)},goLineLeftSmart:function(e){e.extendSelectionsBy(function(t){var r=e.charCoords(t.head,"div").top+5,n=e.coordsChar({left:0,top:r},"div");return n.ch<e.getLine(n.line).search(/\S/)?lo(e,t.head):n},Ga)},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goGroupRight:function(e){e.moveH(1,"group")},goGroupLeft:function(e){e.moveH(-1,"group")},goWordRight:function(e){e.moveH(1,"word")},delCharBefore:function(e){e.deleteH(-1,"char")},delCharAfter:function(e){e.deleteH(1,"char")},delWordBefore:function(e){e.deleteH(-1,"word")},delWordAfter:function(e){e.deleteH(1,"word")},delGroupBefore:function(e){e.deleteH(-1,"group")},delGroupAfter:function(e){e.deleteH(1,"group")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],r=e.listSelections(),n=e.options.tabSize,i=0;i<r.length;i++){var o=r[i].from(),a=Ba(e.getLine(o.line),o.ch,n);t.push(ki(n-a%n))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){Rt(e,function(){for(var t=e.listSelections(),r=[],n=0;n<t.length;n++){var i=t[n].head,o=Jn(e.doc,i.line).text;if(o)if(i.ch==o.length&&(i=new $o(i.line,i.ch-1)),i.ch>0)i=new $o(i.line,i.ch+1),e.replaceRange(o.charAt(i.ch-1)+o.charAt(i.ch-2),$o(i.line,i.ch-2),i,"+transpose");else if(i.line>e.doc.first){var a=Jn(e.doc,i.line-1).text;a&&e.replaceRange(o.charAt(0)+e.doc.lineSeparator()+a.charAt(a.length-1),$o(i.line-1,a.length-1),$o(i.line,1),"+transpose")}r.push(new pe(i,i))}e.setSelections(r)})},newlineAndIndent:function(e){Rt(e,function(){for(var t=e.listSelections().length,r=0;r<t;r++){var n=e.listSelections()[r];e.replaceRange(e.doc.lineSeparator(),n.anchor,n.head,"+input"),e.indentLine(n.from().line+1,null,!0)}jr(e)})},openLine:function(e){e.replaceSelection("\n","start")},toggleOverwrite:function(e){e.toggleOverwrite()}},da=e.keyMap={};da.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},da.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},da.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},da.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},da.default=_o?da.macDefault:da.pcDefault,e.normalizeKeyMap=function(e){var t={};for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];if(/^(name|fallthrough|(de|at)tach)$/.test(r))continue;if("..."==n){delete e[r];continue}for(var i=Di(r.split(" "),zr),o=0;o<i.length;o++){var a,s;o==i.length-1?(s=i.join(" "),a=n):(s=i.slice(0,o+1).join(" "),a="...");var l=t[s];if(l){if(l!=a)throw new Error("Inconsistent bindings for "+s)}else t[s]=a}delete e[r]}for(var u in t)e[u]=t[u];return e};var fa=e.lookupKey=function(e,t,r,n){t=Qr(t);var i=t.call?t.call(e,n):t[e];if(!1===i)return"nothing";if("..."===i)return"multi";if(null!=i&&r(i))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return fa(e,t.fallthrough,r,n);for(var o=0;o<t.fallthrough.length;o++){var a=fa(e,t.fallthrough[o],r,n);if(a)return a}}},ha=e.isModifierKey=function(e){var t="string"==typeof e?e:as[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t},ga=e.keyName=function(e,t){if(To&&34==e.keyCode&&e.char)return!1;var r=as[e.keyCode],n=r;return null!=n&&!e.altGraphKey&&(e.altKey&&"Alt"!=r&&(n="Alt-"+n),(Do?e.metaKey:e.ctrlKey)&&"Ctrl"!=r&&(n="Ctrl-"+n),(Do?e.ctrlKey:e.metaKey)&&"Cmd"!=r&&(n="Cmd-"+n),!t&&e.shiftKey&&"Shift"!=r&&(n="Shift-"+n),n)};e.fromTextArea=function(t,r){function n(){t.value=l.getValue()}if(r=r?ji(r):{},r.value=t.value,!r.tabindex&&t.tabIndex&&(r.tabindex=t.tabIndex),!r.placeholder&&t.placeholder&&(r.placeholder=t.placeholder),null==r.autofocus){var i=zi();r.autofocus=i==t||null!=t.getAttribute("autofocus")&&i==document.body}if(t.form&&(_a(t.form,"submit",n),!r.leaveSubmitMethodAlone)){var o=t.form,a=o.submit;try{var s=o.submit=function(){n(),o.submit=a,o.submit(),o.submit=s}}catch(e){}}r.finishInit=function(e){e.save=n,e.getTextArea=function(){return t},e.toTextArea=function(){e.toTextArea=isNaN,n(),t.parentNode.removeChild(e.getWrapperElement()),t.style.display="",t.form&&(Oa(t.form,"submit",n),"function"==typeof t.form.submit&&(t.form.submit=a))}},t.style.display="none";var l=e(function(e){t.parentNode.insertBefore(e,t.nextSibling)},r);return l};var va=e.StringStream=function(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0};va.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(e){var t=this.string.charAt(this.pos);if("string"==typeof e)var r=t==e;else var r=t&&(e.test?e.test(t):e(t));if(r)return++this.pos,t},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},backUp:function(e){this.pos-=e},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Ba(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Ba(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return Ba(this.string,null,this.tabSize)-(this.lineStart?Ba(this.string,this.lineStart,this.tabSize):0)},match:function(e,t,r){if("string"!=typeof e){var n=this.string.slice(this.pos).match(e);return n&&n.index>0?null:(n&&!1!==t&&(this.pos+=n[0].length),n)}var i=function(e){return r?e.toLowerCase():e};if(i(this.string.substr(this.pos,e.length))==i(e))return!1!==t&&(this.pos+=e.length),!0},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}}};var ma=0,ya=e.TextMarker=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++ma};Ri(ya),ya.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&xt(e),Ni(this,"clear")){var r=this.find();r&&Ti(this,"clear",r.from,r.to)}for(var n=null,i=null,o=0;o<this.lines.length;++o){var a=this.lines[o],s=en(a.markedSpans,this);e&&!this.collapsed?Mt(e,ri(a),"text"):e&&(null!=s.to&&(i=ri(a)),null!=s.from&&(n=ri(a))),a.markedSpans=tn(a.markedSpans,s),null==s.from&&this.collapsed&&!Cn(this.doc,a)&&e&&ti(a,bt(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var o=0;o<this.lines.length;++o){var l=bn(this.lines[o]),u=p(l);u>e.display.maxLineLength&&(e.display.maxLine=l,e.display.maxLineLength=u,e.display.maxLineChanged=!0)}null!=n&&e&&this.collapsed&&Ft(e,n,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&Ne(e.doc)),e&&Ti(e,"markerCleared",e,this),t&&Ct(e),this.parent&&this.parent.clear()}},ya.prototype.find=function(e,t){null==e&&"bookmark"==this.type&&(e=1);for(var r,n,i=0;i<this.lines.length;++i){var o=this.lines[i],a=en(o.markedSpans,this);if(null!=a.from&&(r=$o(t?o:ri(o),a.from),-1==e))return r;if(null!=a.to&&(n=$o(t?o:ri(o),a.to),1==e))return n}return r&&{from:r,to:n}},ya.prototype.changed=function(){var e=this.find(-1,!0),t=this,r=this.doc.cm;e&&r&&Rt(r,function(){var n=e.line,i=ri(e.line),o=Ze(r,i);if(o&&(at(o),r.curOp.selectionChanged=r.curOp.forceUpdate=!0),r.curOp.updateMaxLine=!0,!Cn(t.doc,n)&&null!=t.height){var a=t.height;t.height=null;var s=An(t)-a;s&&ti(n,n.height+s)}})},ya.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=Pi(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},ya.prototype.detachLine=function(e){if(this.lines.splice(Pi(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}};var ma=0,ba=e.SharedTextMarker=function(e,t){this.markers=e,this.primary=t;for(var r=0;r<e.length;++r)e[r].parent=this};Ri(ba),ba.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();Ti(this,"clear")}},ba.prototype.find=function(e,t){return this.primary.find(e,t)};var Ea=e.LineWidget=function(e,t,r){if(r)for(var n in r)r.hasOwnProperty(n)&&(this[n]=r[n]);this.doc=e,this.node=t};Ri(Ea),Ea.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,r=this.line,n=ri(r);if(null!=n&&t){for(var i=0;i<t.length;++i)t[i]==this&&t.splice(i--,1);t.length||(r.widgets=null);var o=An(this);ti(r,Math.max(0,r.height-o)),e&&Rt(e,function(){Tn(e,r,-o),Mt(e,n,"widget")})}},Ea.prototype.changed=function(){var e=this.height,t=this.doc.cm,r=this.line;this.height=null;var n=An(this)-e;n&&(ti(r,r.height+n),t&&Rt(t,function(){t.curOp.forceUpdate=!0,Tn(t,r,n)}))};var xa=e.Line=function(e,t,r){this.text=e,pn(this,t),this.height=r?r(this):1};Ri(xa),xa.prototype.lineNo=function(){return ri(this)};var Sa={},Ca={};Wn.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var r=e,n=e+t;r<n;++r){var i=this.lines[r];this.height-=i.height,Nn(i),Ti(i,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,r){this.height+=r,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var n=0;n<t.length;++n)t[n].parent=this},iterN:function(e,t,r){for(var n=e+t;e<n;++e)if(r(this.lines[e]))return!0}},Xn.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var r=0;r<this.children.length;++r){var n=this.children[r],i=n.chunkSize();if(e<i){var o=Math.min(t,i-e),a=n.height;if(n.removeInner(e,o),this.height-=a-n.height,i==o&&(this.children.splice(r--,1),n.parent=null),0==(t-=o))break;e=0}else e-=i}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof Wn))){var s=[];this.collapse(s),this.children=[new Wn(s)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,r){this.size+=t.length,this.height+=r;for(var n=0;n<this.children.length;++n){var i=this.children[n],o=i.chunkSize();if(e<=o){if(i.insertInner(e,t,r),i.lines&&i.lines.length>50){for(var a=i.lines.length%25+25,s=a;s<i.lines.length;){var l=new Wn(i.lines.slice(s,s+=25));i.height-=l.height,this.children.splice(++n,0,l),l.parent=this}i.lines=i.lines.slice(0,a),this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=e.children.splice(e.children.length-5,5),r=new Xn(t);if(e.parent){e.size-=r.size,e.height-=r.height;var n=Pi(e.parent.children,e);e.parent.children.splice(n+1,0,r)}else{var i=new Xn(e.children);i.parent=e,e.children=[i,r],e=i}r.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,r){for(var n=0;n<this.children.length;++n){var i=this.children[n],o=i.chunkSize();if(e<o){var a=Math.min(t,o-e);if(i.iterN(e,a,r))return!0;if(0==(t-=a))break;e=0}else e-=o}}};var wa=0,Ta=e.Doc=function(e,t,r,n){if(!(this instanceof Ta))return new Ta(e,t,r,n);null==r&&(r=0),Xn.call(this,[new Wn([new xa("",null)])]),this.first=r,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.frontier=r;var i=$o(r,0);this.sel=fe(i),this.history=new ai(null),this.id=++wa,this.modeOption=t,this.lineSep=n,this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),Qn(this,{from:i,to:i,text:e}),Ae(this,fe(i),ja)};Ta.prototype=Mi(Xn.prototype,{constructor:Ta,iter:function(e,t,r){r?this.iterN(e-this.first,t-e,r):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var r=0,n=0;n<t.length;++n)r+=t[n].height;this.insertInner(e-this.first,t,r)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=ei(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:Ot(function(e){var t=$o(this.first,0),r=this.first+this.size-1;Ar(this,{from:t,to:$o(r,Jn(this,r).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),Ae(this,fe(t))}),replaceRange:function(e,t,r,n){t=ge(this,t),r=r?ge(this,r):t,kr(this,e,t,r,n)},getRange:function(e,t,r){var n=Zn(this,ge(this,e),ge(this,t));return!1===r?n:n.join(r||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(me(this,e))return Jn(this,e)},getLineNumber:function(e){return ri(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=Jn(this,e)),bn(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return ge(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Ot(function(e,t,r){Ce(this,ge(this,"number"==typeof e?$o(e,t||0):e),null,r)}),setSelection:Ot(function(e,t,r){Ce(this,ge(this,e),ge(this,t||e),r)}),extendSelection:Ot(function(e,t,r){Ee(this,ge(this,e),t&&ge(this,t),r)}),extendSelections:Ot(function(e,t){xe(this,ye(this,e),t)}),extendSelectionsBy:Ot(function(e,t){xe(this,ye(this,Di(this.sel.ranges,e)),t)}),setSelections:Ot(function(e,t,r){if(e.length){for(var n=0,i=[];n<e.length;n++)i[n]=new pe(ge(this,e[n].anchor),ge(this,e[n].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),Ae(this,de(i,t),r)}}),addSelection:Ot(function(e,t,r){var n=this.sel.ranges.slice(0);n.push(new pe(ge(this,e),ge(this,t||e))),Ae(this,de(n,n.length-1),r)}),getSelection:function(e){for(var t,r=this.sel.ranges,n=0;n<r.length;n++){var i=Zn(this,r[n].from(),r[n].to());t=t?t.concat(i):i}return!1===e?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],r=this.sel.ranges,n=0;n<r.length;n++){var i=Zn(this,r[n].from(),r[n].to());!1!==e&&(i=i.join(e||this.lineSeparator())),t[n]=i}return t},replaceSelection:function(e,t,r){for(var n=[],i=0;i<this.sel.ranges.length;i++)n[i]=e;this.replaceSelections(n,t,r||"+input")},replaceSelections:Ot(function(e,t,r){for(var n=[],i=this.sel,o=0;o<i.ranges.length;o++){var a=i.ranges[o];n[o]={from:a.from(),to:a.to(),text:this.splitLines(e[o]),origin:r}}for(var s=t&&"end"!=t&&wr(this,n,t),o=n.length-1;o>=0;o--)Ar(this,n[o]);s?Te(this,s):this.cm&&jr(this.cm)}),undo:Ot(function(){Lr(this,"undo")}),redo:Ot(function(){Lr(this,"redo")}),undoSelection:Ot(function(){Lr(this,"undo",!0)}),redoSelection:Ot(function(){Lr(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,r=0,n=0;n<e.done.length;n++)e.done[n].ranges||++t;for(var n=0;n<e.undone.length;n++)e.undone[n].ranges||++r;return{undo:t,redo:r}},clearHistory:function(){this.history=new ai(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:mi(this.history.done),undone:mi(this.history.undone)}},setHistory:function(e){var t=this.history=new ai(this.history.maxGeneration);t.done=mi(e.done.slice(0),null,!0),t.undone=mi(e.undone.slice(0),null,!0)},addLineClass:Ot(function(e,t,r){return Br(this,e,"gutter"==t?"gutter":"class",function(e){var n="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(e[n]){if(Qi(r).test(e[n]))return!1;e[n]+=" "+r}else e[n]=r;return!0})}),removeLineClass:Ot(function(e,t,r){return Br(this,e,"gutter"==t?"gutter":"class",function(e){var n="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",i=e[n];if(!i)return!1;if(null==r)e[n]=null;else{var o=i.match(Qi(r));if(!o)return!1;var a=o.index+o[0].length;e[n]=i.slice(0,o.index)+(o.index&&a!=i.length?" ":"")+i.slice(a)||null}return!0})}),addLineWidget:Ot(function(e,t,r){return In(this,e,t,r)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,r){return Wr(this,ge(this,e),ge(this,t),r,r&&r.type||"range")},setBookmark:function(e,t){var r={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return e=ge(this,e),Wr(this,e,e,r,"bookmark")},findMarksAt:function(e){e=ge(this,e);var t=[],r=Jn(this,e.line).markedSpans;if(r)for(var n=0;n<r.length;++n){var i=r[n];(null==i.from||i.from<=e.ch)&&(null==i.to||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},findMarks:function(e,t,r){e=ge(this,e),t=ge(this,t);var n=[],i=e.line;return this.iter(e.line,t.line+1,function(o){var a=o.markedSpans;if(a)for(var s=0;s<a.length;s++){var l=a[s];null!=l.to&&i==e.line&&e.ch>=l.to||null==l.from&&i!=e.line||null!=l.from&&i==t.line&&l.from>=t.ch||r&&!r(l.marker)||n.push(l.marker.parent||l.marker)}++i}),n},getAllMarks:function(){var e=[];return this.iter(function(t){var r=t.markedSpans;if(r)for(var n=0;n<r.length;++n)null!=r[n].from&&e.push(r[n].marker)}),e},posFromIndex:function(e){var t,r=this.first,n=this.lineSeparator().length;return this.iter(function(i){var o=i.text.length+n;if(o>e)return t=e,!0;e-=o,++r}),ge(this,$o(r,t))},indexFromPos:function(e){e=ge(this,e);var t=e.ch;if(e.line<this.first||e.ch<0)return 0;var r=this.lineSeparator().length;return this.iter(this.first,e.line,function(e){t+=e.text.length+r}),t},copy:function(e){var t=new Ta(ei(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,r=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<r&&(r=e.to);var n=new Ta(ei(this,t,r),e.mode||this.modeOption,t,this.lineSep);return e.sharedHist&&(n.history=this.history),(this.linked||(this.linked=[])).push({doc:n,sharedHist:e.sharedHist}),n.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],Kr(n,Yr(this)),n},unlinkDoc:function(t){if(t instanceof e&&(t=t.doc),this.linked)for(var r=0;r<this.linked.length;++r){var n=this.linked[r];if(n.doc==t){this.linked.splice(r,1),t.unlinkDoc(this),Jr(Yr(this));break}}if(t.history==this.history){var i=[t.id];Yn(t,function(e){i.push(e.id)},!0),t.history=new ai(null),t.history.done=mi(this.history.done,i),t.history.undone=mi(this.history.undone,i)}},iterLinkedDocs:function(e){Yn(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):rs(e)},lineSeparator:function(){return this.lineSep||"\n"}}),Ta.prototype.eachLine=Ta.prototype.iter;var Aa="iter insert remove copy getEditor constructor".split(" ");for(var Ia in Ta.prototype)Ta.prototype.hasOwnProperty(Ia)&&Pi(Aa,Ia)<0&&(e.prototype[Ia]=function(e){return function(){return e.apply(this.doc,arguments)}}(Ta.prototype[Ia]));Ri(Ta);var La=e.e_preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},Na=e.e_stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},Ra=e.e_stop=function(e){La(e),Na(e)},_a=e.on=function(e,t,r){if(e.addEventListener)e.addEventListener(t,r,!1);else if(e.attachEvent)e.attachEvent("on"+t,r);else{var n=e._handlers||(e._handlers={}),i=n[t]||(n[t]=[]);i.push(r)}},ka=[],Oa=e.off=function(e,t,r){if(e.removeEventListener)e.removeEventListener(t,r,!1);else if(e.detachEvent)e.detachEvent("on"+t,r);else for(var n=wi(e,t,!1),i=0;i<n.length;++i)if(n[i]==r){n.splice(i,1);break}},Pa=e.signal=function(e,t){var r=wi(e,t,!0);if(r.length)for(var n=Array.prototype.slice.call(arguments,2),i=0;i<r.length;++i)r[i].apply(null,n)},Da=null,Fa=30,Ma=e.Pass={toString:function(){return"CodeMirror.Pass"}},ja={scroll:!1},$a={origin:"*mouse"},Ga={origin:"+move"};_i.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var Ba=e.countColumn=function(e,t,r,n,i){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var o=n||0,a=i||0;;){var s=e.indexOf("\t",o);if(s<0||s>=t)return a+(t-o);a+=s-o,a+=r-a%r,o=s+1}},Ha=e.findColumn=function(e,t,r){for(var n=0,i=0;;){var o=e.indexOf("\t",n);-1==o&&(o=e.length);var a=o-n;if(o==e.length||i+a>=t)return n+Math.min(a,t-i);if(i+=o-n,i+=r-i%r,n=o+1,i>=t)return n}},Ua=[""],Va=function(e){e.select()};No?Va=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:Eo&&(Va=function(e){try{e.select()}catch(e){}});var qa,za=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,Qa=e.isWordChar=function(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||za.test(e))},Wa=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;qa=document.createRange?function(e,t,r,n){var i=document.createRange();return i.setEnd(n||e,r),i.setStart(e,t),i}:function(e,t,r){var n=document.body.createTextRange();try{n.moveToElementText(e.parentNode)}catch(e){return n}return n.collapse(!0),n.moveEnd("character",r),n.moveStart("character",t),n};var Xa=e.contains=function(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)};Eo&&xo<11&&(zi=function(){try{return document.activeElement}catch(e){return document.body}});var Ya,Ka,Ja=e.rmClass=function(e,t){var r=e.className,n=Qi(t).exec(r);if(n){var i=r.slice(n.index+n[0].length);e.className=r.slice(0,n.index)+(i?n[1]+i:"")}},Za=e.addClass=function(e,t){var r=e.className;Qi(t).test(r)||(e.className+=(r?" ":"")+t)},es=!1,ts=function(){if(Eo&&xo<9)return!1;var e=Ui("div");return"draggable"in e||"dragDrop"in e}(),rs=e.splitLines=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,r=[],n=e.length;t<=n;){var i=e.indexOf("\n",t);-1==i&&(i=e.length);var o=e.slice(t,"\r"==e.charAt(i-1)?i-1:i),a=o.indexOf("\r");-1!=a?(r.push(o.slice(0,a)),t+=a+1):(r.push(o),t=i+1)}return r}:function(e){return e.split(/\r\n?|\n/)},ns=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(e){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(e){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},is=function(){var e=Ui("div");return"oncopy"in e||(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy)}(),os=null,as=e.keyNames={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};!function(){for(var e=0;e<10;e++)as[e+48]=as[e+96]=String(e);for(var e=65;e<=90;e++)as[e]=String.fromCharCode(e);for(var e=1;e<=12;e++)as[e+111]=as[e+63235]="F"+e}();var ss,ls=function(){function e(e){return e<=247?r.charAt(e):1424<=e&&e<=1524?"R":1536<=e&&e<=1773?n.charAt(e-1536):1774<=e&&e<=2220?"r":8192<=e&&e<=8203?"w":8204==e?"b":"L"}function t(e,t,r){this.level=e,this.from=t,this.to=r}var r="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",n="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm",i=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,o=/[stwN]/,a=/[LRr]/,s=/[Lb1n]/,l=/[1n]/;return function(r){if(!i.test(r))return!1;for(var n,u=r.length,c=[],p=0;p<u;++p)c.push(n=e(r.charCodeAt(p)));for(var p=0,d="L";p<u;++p){var n=c[p];"m"==n?c[p]=d:d=n}for(var p=0,f="L";p<u;++p){var n=c[p];"1"==n&&"r"==f?c[p]="n":a.test(n)&&(f=n,"r"==n&&(c[p]="R"))}for(var p=1,d=c[0];p<u-1;++p){var n=c[p];"+"==n&&"1"==d&&"1"==c[p+1]?c[p]="1":","!=n||d!=c[p+1]||"1"!=d&&"n"!=d||(c[p]=d),d=n}for(var p=0;p<u;++p){var n=c[p];if(","==n)c[p]="N";else if("%"==n){for(var h=p+1;h<u&&"%"==c[h];++h);for(var g=p&&"!"==c[p-1]||h<u&&"1"==c[h]?"1":"N",v=p;v<h;++v)c[v]=g;p=h-1}}for(var p=0,f="L";p<u;++p){var n=c[p];"L"==f&&"1"==n?c[p]="L":a.test(n)&&(f=n)}for(var p=0;p<u;++p)if(o.test(c[p])){for(var h=p+1;h<u&&o.test(c[h]);++h);for(var m="L"==(p?c[p-1]:"L"),y="L"==(h<u?c[h]:"L"),g=m||y?"L":"R",v=p;v<h;++v)c[v]=g;p=h-1}for(var b,E=[],p=0;p<u;)if(s.test(c[p])){var x=p;for(++p;p<u&&s.test(c[p]);++p);E.push(new t(0,x,p))}else{var S=p,C=E.length;for(++p;p<u&&"L"!=c[p];++p);for(var v=S;v<p;)if(l.test(c[v])){S<v&&E.splice(C,0,new t(1,S,v));var w=v;for(++v;v<p&&l.test(c[v]);++v);E.splice(C,0,new t(2,w,v)),S=v}else++v;S<p&&E.splice(C,0,new t(1,S,p))}return 1==E[0].level&&(b=r.match(/^\s+/))&&(E[0].from=b[0].length,E.unshift(new t(0,0,b[0].length))),1==Oi(E).level&&(b=r.match(/\s+$/))&&(Oi(E).to-=b[0].length,E.push(new t(0,u-b[0].length,u))),2==E[0].level&&E.unshift(new t(1,E[0].to,E[0].to)),E[0].level!=Oi(E).level&&E.push(new t(E[0].level,u,u)),E}}();return e.version="5.17.0",e})},function(e,t,r){var n=r(25),i=r(166),o=r(112),a=Object.defineProperty;t.f=r(27)?Object.defineProperty:function(e,t,r){if(n(e),t=o(t,!0),n(r),i)try{return a(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},function(e,t,r){var n=r(26);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,r){e.exports=!r(38)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function i(e){if(c===setTimeout)return setTimeout(e,0);if((c===r||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function o(e){if(p===clearTimeout)return clearTimeout(e);if((p===n||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(e);try{return p(e)}catch(t){try{return p.call(null,e)}catch(t){return p.call(this,e)}}}function a(){g&&f&&(g=!1,f.length?h=f.concat(h):v=-1,h.length&&s())}function s(){if(!g){var e=i(a);g=!0;for(var t=h.length;t;){for(f=h,h=[];++v<t;)f&&f[v].run();v=-1,t=h.length}f=null,g=!1,o(e)}}function l(e,t){this.fun=e,this.array=t}function u(){}var c,p,d=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:r}catch(e){c=r}try{p="function"==typeof clearTimeout?clearTimeout:n}catch(e){p=n}}();var f,h=[],g=!1,v=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];h.push(new l(e,t)),1!==h.length||g||i(s)},l.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=u,d.addListener=u,d.once=u,d.off=u,d.removeListener=u,d.removeAllListeners=u,d.emit=u,d.prependListener=u,d.prependOnceListener=u,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t,r){var n=r(63);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},function(e,t,r){e.exports={default:r(275),__esModule:!0}},function(e,t,r){var n=r(24),i=r(64);e.exports=r(27)?function(e,t,r){return n.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r){return void 0===e[t]&&(e[t]=r?r(t):{}),e[t]}function o(e,t,r,n){return void 0===e[t]&&(e[t]=n?n(t):{},r.push(e[t])),e[t]}function a(e,t,r,n){void 0===t[r]&&(t[r]=n,e.push(n))}function s(e,t,r){for(var n in r)a(e,t,n,r[n])}Object.defineProperty(t,"__esModule",{value:!0}),t.OStringSet=t.EOMap=t.OMap=t.StringSet=t.IdentitySet=t.EMap=t.FMap=void 0;var l=r(69),u=n(l),c=r(42),p=n(c),d=r(15),f=n(d),h=r(18),g=n(h),v=r(19),m=n(v),y=r(1),b=n(y),E=r(2),x=n(E);t.goc=i,t.ogoc=o,t.cpush=a,t.cpushs=s;var S=t.FMap=function(){function e(){(0,b.default)(this,e),this.s={}}return(0,x.default)(e,[{key:"has",value:function(e){return void 0!==this.s[e]}},{key:"set",value:function(e,t){return this.s[e]=t,this}},{key:"get",value:function(e){return this.s[e]}},{key:"remove",value:function(e){var t=this.has(e);return delete this.s[e],t}},{key:"sets",value:function(e){for(var t in e)this.set(t,e[t]);return this}},{key:"setm",value:function(e){for(var t in e)this.set(t,e[t]);return this}},{key:"clear",value:function(){return this.s={},this}},{key:"keys",value:function(){var e=[];for(var t in this.s)e.push(t);return e}},{key:"values",value:function(){var e=[];for(var t in this.s)e.push(this.s[t]);return e}},{key:"entries",value:function(){var e=[];for(var t in this.s)e.push({key:t,value:this.s[t]});return e}},{key:"each",value:function(e){for(var t in this.s)e(this.s[t],t,this)}},{key:"size",value:function(){var e=0;for(var t in this.s)e++;return e}},{key:"empty",value:function(){return 0===this.size()}}]),e}(),C=(t.EMap=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return{}};(0,b.default)(this,t);var r=(0,g.default)(this,(t.__proto__||(0,f.default)(t)).call(this));return r.create=e,r}return(0,m.default)(t,e),(0,x.default)(t,[{key:"goc",value:function(e,t){return this.has(e)||this.set(e,t?t(e):this.create(e)),this.get(e)}}]),t}(S),t.IdentitySet=function(){function e(){(0,b.default)(this,e),this.a=[]}return(0,x.default)(e,[{key:"clear",value:function(){return this.a=[],this}},{key:"has",value:function(e){return-1!==this.a.indexOf(e)}},{key:"add",value:function(e){return this.has(e)?this:(this.a.push(e),this)}},{key:"adda",value:function(e){var t=this;return e.forEach(function(e){return t.add(e)}),this}},{key:"adds",value:function(e){var t=this;return e.each(function(e){return t.add(e)}),this}},{key:"remove",value:function(e){var t=this.a.indexOf(e);return-1!==t&&(this.a.splice(t,1),!0)}},{key:"each",value:function(e){var t=!0,r=!1,n=void 0;try{for(var i,o=(0,p.default)(this.a);!(t=(i=o.next()).done);t=!0){var a=i.value;e(a,a,this)}}catch(e){r=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw n}}}},{key:"size",value:function(){return this.a.length}},{key:"empty",value:function(){return 0===this.size()}},{key:"values",value:function(){return this.a}}]),e}(),t.StringSet=function(){function e(){(0,b.default)(this,e),this.s={}}return(0,x.default)(e,[{key:"clear",value:function(){return this.s={},this}},{key:"has",value:function(e){return void 0!==this.s[e]}},{key:"add",value:function(e){return this.s[e]="",this}},{key:"adda",value:function(e){var t=this;return e.forEach(function(e){return t.add(e)}),this}},{key:"adds",value:function(e){var t=this;return e.each(function(e){return t.add(e)}),this}},{key:"remove",value:function(e){var t=this.has(e);return delete this.s[e],t}},{key:"each",value:function(e){for(var t in this.s)e(t,t,this)}},{key:"size",value:function(){var e=0;for(var t in this.s)e++;return e}},{key:"empty",value:function(){return 0===this.size()}},{key:"values",value:function(){var e=[];for(var t in this.s)e.push(t);return e}}]),e}()),w=t.OMap=function(e){function t(){(0,b.default)(this,t);var e=(0,g.default)(this,(t.__proto__||(0,f.default)(t)).apply(this,arguments));return e.a=[],e}return(0,m.default)(t,e),(0,x.default)(t,[{key:"set",value:function(e,r){return this.has(e)||((0,u.default)(t.prototype.__proto__||(0,f.default)(t.prototype),"set",this).call(this,e,r),this.a.push(r)),this}},{key:"remove",value:function(e){var r=this.get(e);return void 0!==r&&((0,u.default)(t.prototype.__proto__||(0,f.default)(t.prototype),"remove",this).call(this,e),this.a.splice(this.a.indexOf(r),1)),void 0!==r}},{key:"size",value:function(){return this.a.length}},{key:"values",value:function(){return this.a}},{key:"clear",value:function(){return(0,u.default)(t.prototype.__proto__||(0,f.default)(t.prototype),"clear",this).call(this),this.a=[],this}}]),t}(S);t.EOMap=function(e){function t(e){(0,b.default)(this,t);var r=(0,g.default)(this,(t.__proto__||(0,f.default)(t)).call(this));return r.create=e,r}return(0,m.default)(t,e),(0,x.default)(t,[{key:"goc",value:function(e,t){return this.has(e)||this.set(e,t?t(e):this.create(e)),this.get(e)}}]),t}(w),t.OStringSet=function(e){function t(){(0,b.default)(this,t);var e=(0,g.default)(this,(t.__proto__||(0,f.default)(t)).apply(this,arguments));return e.a=[],e}return(0,m.default)(t,e),(0,x.default)(t,[{key:"add",value:function(e){return this.has(e)||((0,u.default)(t.prototype.__proto__||(0,f.default)(t.prototype),"add",this).call(this,e),this.a.push(e)),this}},{key:"remove",value:function(e){var r=(0,u.default)(t.prototype.__proto__||(0,f.default)(t.prototype),"remove",this).call(this,e);return r&&this.a.splice(this.a.indexOf(e),1),r}},{key:"size",value:function(){return this.a.length}},{key:"values",value:function(){return this.a}},{key:"clear",value:function(){return(0,u.default)(t.prototype.__proto__||(0,f.default)(t.prototype),"clear",this).call(this),this.a=[],this}}]),t}(C)},function(e,t,r){"use strict";function n(e,t){return t.length<=e?t:t.substr(0,e-3)+"..."}function i(e,t){for(;t.length<e;)t+=" ";return t}function o(e){return e.replace(/^([A-Z])/,function(e){return e.toLowerCase()}).replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function a(e){var t=s(e),r=t.match(/^(function [^ ]+\([^)]*\))/),n=r?r[1]:t,i=e.name||"";return i&&n.match(/function \(/)?"function "+i+n.substr(9):n}function s(e){var t=p.isArray(e)?e.slice(-1)[0]:e;return t&&t.toString()||"undefined"}function l(e){function t(e){if(p.isObject(e)){if(-1!==r.indexOf(e))return"[circular ref]";r.push(e)}return y(e)}var r=[];return JSON.stringify(e,function(e,r){return t(r)}).replace(/\\"/g,'"')}function u(e){var t=new RegExp("("+e+")","g");return function(e){return e.split(t).filter(f.identity)}}function c(e,t){return p.isString(f.tail(e))&&p.isString(t)?e.slice(0,-1).concat(f.tail(e)+t):f.pushR(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var p=r(5),d=r(73),f=r(3),h=r(6),g=r(97),v=r(75);t.maxLength=n,t.padString=i,t.kebobString=o,t.functionToString=a,t.fnToString=s;var m=null,y=function(e){var t=d.Rejection.isRejectionPromise;return(m=m||h.pattern([[h.not(p.isDefined),h.val("undefined")],[p.isNull,h.val("null")],[p.isPromise,h.val("[Promise]")],[t,function(e){return e._transitionRejection.toString()}],[h.is(d.Rejection),h.invoke("toString")],[h.is(g.Transition),h.invoke("toString")],[h.is(v.Resolvable),h.invoke("toString")],[p.isInjectable,a],[h.val(!0),f.identity]]))(e)};t.stringify=l,t.beforeAfterSubstr=function(e){return function(t){if(!t)return["",""];var r=t.indexOf(e);return-1===r?[t,""]:[t.substr(0,r),t.substr(r+1)]}},t.splitOnDelim=u,t.joinNeighborsR=c},function(e,t,r){"use strict";function n(e){return e?"[ui-view#"+e.id+" tag in template from '"+(e.creationContext&&e.creationContext.name||"(root)")+"' state]: fqn: '"+e.fqn+"', name: '"+e.name+"@"+e.creationContext+"')":"ui-view (defunct)"}function i(e){return s.isNumber(e)?o[e]:o[o[e]]}Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(6),s=r(5),l=r(33),u=function(e){return"[ViewConfig#"+e.$id+" from '"+(e.viewDecl.$context.name||"(root)")+"' state]: target ui-view: '"+e.viewDecl.$uiViewName+"@"+e.viewDecl.$uiViewContextAnchor+"'"};!function(e){e[e.RESOLVE=0]="RESOLVE",e[e.TRANSITION=1]="TRANSITION",e[e.HOOK=2]="HOOK",e[e.UIVIEW=3]="UIVIEW",e[e.VIEWCONFIG=4]="VIEWCONFIG"}(o=t.Category||(t.Category={}));var c=a.parse("$id"),p=a.parse("router.$id"),d=function(e){return"Transition #"+c(e)+"-"+p(e)},f=function(){function e(){this._enabled={},this.approximateDigests=0}return e.prototype._set=function(e,t){var r=this;t.length||(t=Object.keys(o).map(function(e){return parseInt(e,10)}).filter(function(e){return!isNaN(e)}).map(function(e){return o[e]})),t.map(i).forEach(function(t){return r._enabled[t]=e})},e.prototype.enable=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._set(!0,e)},e.prototype.disable=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._set(!1,e)},e.prototype.enabled=function(e){return!!this._enabled[i(e)]},e.prototype.traceTransitionStart=function(e){this.enabled(o.TRANSITION)&&console.log(d(e)+": Started  -> "+l.stringify(e))},e.prototype.traceTransitionIgnored=function(e){this.enabled(o.TRANSITION)&&console.log(d(e)+": Ignored  <> "+l.stringify(e))},e.prototype.traceHookInvocation=function(e,t,r){if(this.enabled(o.HOOK)){var n=a.parse("traceData.hookType")(r)||"internal",i=a.parse("traceData.context.state.name")(r)||a.parse("traceData.context")(r)||"unknown",s=l.functionToString(e.registeredHook.callback);console.log(d(t)+":   Hook -> "+n+" context: "+i+", "+l.maxLength(200,s))}},e.prototype.traceHookResult=function(e,t,r){this.enabled(o.HOOK)&&console.log(d(t)+":   <- Hook returned: "+l.maxLength(200,l.stringify(e)))},e.prototype.traceResolvePath=function(e,t,r){this.enabled(o.RESOLVE)&&console.log(d(r)+":         Resolving "+e+" ("+t+")")},e.prototype.traceResolvableResolved=function(e,t){this.enabled(o.RESOLVE)&&console.log(d(t)+":               <- Resolved  "+e+" to: "+l.maxLength(200,l.stringify(e.data)))},e.prototype.traceError=function(e,t){this.enabled(o.TRANSITION)&&console.log(d(t)+": <- Rejected "+l.stringify(t)+", reason: "+e)},e.prototype.traceSuccess=function(e,t){this.enabled(o.TRANSITION)&&console.log(d(t)+": <- Success  "+l.stringify(t)+", final state: "+e.name)},e.prototype.traceUIViewEvent=function(e,t,r){void 0===r&&(r=""),this.enabled(o.UIVIEW)&&console.log("ui-view: "+l.padString(30,e)+" "+n(t)+r)},e.prototype.traceUIViewConfigUpdated=function(e,t){this.enabled(o.UIVIEW)&&this.traceUIViewEvent("Updating",e," with ViewConfig from context='"+t+"'")},e.prototype.traceUIViewFill=function(e,t){this.enabled(o.UIVIEW)&&this.traceUIViewEvent("Fill",e," with: "+l.maxLength(200,t))},e.prototype.traceViewServiceEvent=function(e,t){this.enabled(o.VIEWCONFIG)&&console.log("VIEWCONFIG: "+e+" "+u(t))},e.prototype.traceViewServiceUIViewEvent=function(e,t){this.enabled(o.VIEWCONFIG)&&console.log("VIEWCONFIG: "+e+" "+n(t))},e}();t.Trace=f;var h=new f;t.trace=h},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t,r){"use strict";function n(e){this.style.removeProperty(e)}function i(e,t,r){this.style.setProperty(e,t,r)}function o(e,t,r){var n=t.apply(this,arguments);null==n?this.style.removeProperty(e):this.style.setProperty(e,n,r)}var a=r(500);t.a=function(e,t,r,s){var l;return arguments.length>1?(null==r?n:"function"==typeof r?o:i).call(e,t,r,null==s?"":s):Object(a.a)(l=e).getComputedStyle(l,null).getPropertyValue(t)}},function(e,t,r){"use strict";function n(e){return e.trim().split(/^|\s+/)}function i(e){return e.classList||new o(e)}function o(e){this._node=e,this._names=n(e.getAttribute("class")||"")}function a(e,t){for(var r=i(e),n=-1,o=t.length;++n<o;)r.add(t[n])}function s(e,t){for(var r=i(e),n=-1,o=t.length;++n<o;)r.remove(t[n])}function l(e){a(this,e)}function u(e){s(this,e)}function c(e,t){(t.apply(this,arguments)?a:s)(this,e)}o.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}},t.a=function(e,t,r){var o=n(t+"");if(arguments.length<2){for(var a=i(this),s=-1,p=o.length;++s<p;)if(!a.contains(o[s]))return!1;return!0}("function"==typeof r?c:r?l:u).call(e,o,r)}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},function(e,t,r){var n=r(113),i=r(114);e.exports=function(e){return n(i(e))}},function(e,t,r){"use strict";function n(e){return{type:p,payload:e}}function i(){return{type:d,payload:void 0}}function o(e){return{type:f,payload:e}}function a(e,t){return function(r){return t.createNewItem([new l.PropertyAndValue(u.SKOS.prefLabel,u.DataFactory.instance.literal(e)),new l.PropertyAndValue(u.RDF.type,u.OWL.Class)]).then(function(t){r(s(t,e))})}}function s(e,t){return{type:c,payload:{node:e,label:t}}}Object.defineProperty(t,"__esModule",{value:!0}),t.SET_ORDERED_TYPES=t.CLEAR_TYPES=t.ADD_TYPE=t.TYPE_CREATED=t.CREATE_TYPE=void 0,t.addType=n,t.clearTypes=i,t.setOrderedTypes=o,t.createType=a,t.typeCreated=s;var l=r(21),u=r(7),c=(t.CREATE_TYPE="CREATE_TYPE",t.TYPE_CREATED="TYPE_CREATED"),p=t.ADD_TYPE="ADD_TYPE",d=t.CLEAR_TYPES="CLEAR_TYPES",f=t.SET_ORDERED_TYPES="SET_ORDERED_TYPES"},function(e,t,r){e.exports={default:r(280),__esModule:!0}},function(e,t,r){!function(t,n){e.exports=n(r(0))}(0,function(e){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(t,r){t.exports=e},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=function(){function e(){this.objectsById={},this.assignmentsById={}}return e}();t.UniqueObjectTracker=i;var o=function(){function e(e,t){this.$http=e,this.$q=t}return e.$inject=["$http","$q"],e.stringToSPARQLString=function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/\f/g,"\\f")+'"'},e.bindingsToObject=function(t,r,n,i){void 0===r&&(r={});for(var o in t){var a=o,s=r,l=a.indexOf("_"),u=-1,c=void 0;for(i&&(c=i.assignmentsById);-1!==l;){a=o.substring(u+1,l);var p=o.substring(0,l);if(n&&n.bindingTypes&&n.bindingTypes[p]&&"uniqueArray"===n.bindingTypes[p]){s[a]||(s[a]=[]),i.objectsById[p]||(i.objectsById[p]={});var d=void 0;i.objectsById[p][t[p].value]?d=i.objectsById[p][t[p].value]:(d=n.bindingConverters[p](t[p],t),i.objectsById[p][t[p].value]=d),c[p]||(c[p]={}),c[p][t[p].value]||(s[p].push(d),c[p][t[p].value]={}),c=c[p][t[p].value],s=d}else n&&n.bindingTypes&&n.bindingTypes[p]&&"single"===n.bindingTypes[p]?(i.objectsById[p]||(i.objectsById[p]={}),i.objectsById[p][t[p].value]||(s[a]=n.bindingConverters[p](t[p],t),i.objectsById[p][t[p].value]=s[a])):s[a]||(s[a]=n.bindingConverters[p](t[p],t)),s=s[a];u=l,l=o.indexOf("_",l+1)}a=o.substring(u+1);var f=void 0;if(i&&n&&n.bindingTypes&&("single"===n.bindingTypes[o]||"uniqueArray"===n.bindingTypes[o])?(i.objectsById[o]||(i.objectsById[o]={}),i.objectsById[o][t[o].value]?f=i.objectsById[o][t[o].value]:(f=n&&n.bindingConverters&&n.bindingConverters[o]?n.bindingConverters[o](t[o],t):e.bindingToValue(t[o]),i.objectsById[o][t[o].value]=f)):n&&n.bindingConverters&&n.bindingConverters[o]?f=n.bindingConverters[o](t[o],t):n&&n.bindingTypes&&n.bindingTypes[o]&&("hash"===n.bindingTypes[o]||"ignore"===n.bindingTypes[o])||(f=e.bindingToValue(t[o])),n&&n.bindingTypes&&n.bindingTypes[o])switch(n.bindingTypes[o]){case"ignore":break;case"single":s[a]=f;break;case"array":Array.isArray(s[a])||(s[a]=[]),s[a].push(f);break;case"hash":if(s[a]||(s[a]={}),f)s[a][t[o].value]=f;else if("literal"===t[o].type){var h=t[o].datatype;h||(h=t[o]["xml:lang"])||(h=""),s[a][h]=t[o].value}else s[a][t[o].value]=t[o].value;break;default:s[a]||(s[a]=[]),c[o]||(c[o]={}),c[o][t[o].value]||(c[o][t[o].value]=f,s[a].push(f))}else if(Array.isArray(s[a]))s[a].push(f);else if(null!==s[a]&&"object"==typeof s[a]&&t[o])if("literal"===t[o].type){var h=t[o].datatype;h||(h=t[o]["xml:lang"])||(h=""),n&&n.bindingConverters&&n.bindingConverters[o]?s[a][h]=n.bindingConverters[o](t[o],t):s[a][h]=t[o].value}else n&&n.bindingConverters&&n.bindingConverters[o]?s[a][t[o].value]=n.bindingConverters[o](t[o],t):s[a][t[o].value]=t[o].value;else s[a]=f}return r},e.bindingToValue=function(e){if(e){if("uri"===e.type)return e.value;if("bnode"===e.type)return e.value;if(e.datatype)switch(e.datatype){case"http://www.w3.org/2001/XMLSchema#integer":case"http://www.w3.org/2001/XMLSchema#decimal":return parseInt(e.value,10);case"http://www.w3.org/2001/XMLSchema#float":case"http://www.w3.org/2001/XMLSchema#double":return parseFloat(e.value);case"http://www.w3.org/2001/XMLSchema#boolean":return!!e.value}return e.value}},e.bindingToString=function(e){if(!e)return"UNDEF";var t=e.value.replace(/\\/g,"\\\\").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\"/g,'\\"').replace(/\'/g,"\\'");if("uri"===e.type)return"<"+t+">";if("bnode"===e.type)return"_:"+t;if(!e.datatype)return e["xml:lang"]?'"'+t+'"@'+e["xml:lang"]:'"'+t+'"';switch(e.datatype){case"http://www.w3.org/2001/XMLSchema#integer":case"http://www.w3.org/2001/XMLSchema#decimal":case"http://www.w3.org/2001/XMLSchema#double":case"http://www.w3.org/2001/XMLSchema#boolean":return t;case"http://www.w3.org/2001/XMLSchema#string":return'"'+t+'"';default:return'"'+t+'"^^<'+e.datatype+">"}},e.prototype.check=function(e,t){var r=this.$q.defer();return this.$http(n.extend({method:"GET",url:e,params:{query:"ASK {}"},headers:{Accept:"application/sparql-results+json"}},t)).then(function(e){return r.resolve(!0===e.data.boolean)},function(e){return r.resolve(!1)}),r.promise},e.prototype.checkUpdate=function(e,t){var r=this.$q.defer();return this.$http(n.extend({method:"POST",url:e,headers:{"Content-Type":"application/sparql-update"},data:"INSERT DATA {}"},t)).then(function(e){return r.resolve(204===e.status)},function(e){return r.resolve(!1)}),r.promise},e.prototype.checkRest=function(e,t){var r=this.$q.defer();return this.$http(n.extend({method:"POST",url:e+"?default",data:"",headers:{"Content-Type":"text/turtle"}},t)).then(function(e){return r.resolve(204===e.status)},function(e){return r.resolve(!1)}),r.promise},e.prototype.get=function(e,t,r){return this.$http(n.extend({method:"GET",url:e,params:t?{graph:t}:{default:""},headers:{Accept:"text/turtle"}},r))},e.prototype.post=function(e,t,r,i){return this.$http(n.extend({method:"POST",url:e,params:r?{graph:r}:{default:""},data:t,headers:{"Content-Type":"text/turtle"}},i))},e.prototype.put=function(e,t,r,i){return this.$http(n.extend({method:"PUT",url:e,params:r?{graph:r}:{default:""},data:t,headers:{"Content-Type":"text/turtle"}},i))},e.prototype.delete=function(e,t,r){return this.$http(n.extend({method:"DELETE",url:e,params:t?{graph:t}:{default:""}},r))},e.prototype.query=function(e,t,r){return t.length<=2048?this.$http(n.extend({method:"GET",url:e,params:{query:t},headers:{Accept:"application/sparql-results+json"}},r)):this.$http(n.extend({method:"POST",url:e,data:"query="+encodeURIComponent(t),headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/sparql-results+json"}},r))},e.prototype.construct=function(e,t,r){return t.length<=2048?this.$http(n.extend({method:"GET",url:e,params:{query:t},headers:{Accept:"text/turtle"}},r)):this.$http(n.extend({method:"POST",url:e,data:t,headers:{"Content-Type":"application/sparql-query",Accept:"text/turtle"}},r))},e.prototype.update=function(e,t,r){return this.$http(n.extend({method:"POST",url:e,headers:{"Content-Type":"application/sparql-update"},data:t},r))},e}();t.SparqlService=o,n.module("fi.seco.sparql",[]).service("sparqlService",o)}])})},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Citable=t.CitableSource=void 0;var i=r(1),o=n(i),a=r(2),s=n(a),l=r(7);t.CitableSource=function(){function e(t,r){(0,o.default)(this,e),this.sparqlEndpoint=t,this.graph=r}return(0,s.default)(e,null,[{key:"clone",value:function(t){return new e(t.sparqlEndpoint,t.graph)}}]),e}(),t.Citable=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:new Date;(0,o.default)(this,e),this.labels=n,this.url=i,this.descriptions=a,this.rightsHolders=s,this.dateCreated=l,this.source={sparqlEndpoint:null},this.id=t,this.source=r}return(0,s.default)(e,[{key:"toTurtle",value:function(t,r){e.toTurtle(this,t,r)}}],[{key:"toTurtle",value:function(e,t,r){r.skos=l.SKOS.ns,r.dcterms=l.DCTerms.ns,r.foaf=l.FOAF.ns,r.fibra=l.FIBRA.ns,r.rdf=l.RDF.ns,r.xsd=l.XMLSchema.ns;var n=t.get(e.id);e.labels.forEach(function(e){e.value&&(n=n+"\nskos:prefLabel "+e.toCanonical()+" ;")}),n=n+'\ndcterms:created "'+e.dateCreated.toISOString()+'"^^xsd:dateTime ;',e.descriptions.forEach(function(e){e.value&&(n=n+"\ndcterms:description "+e.toCanonical()+" ;")}),e.url&&(n=n+"\nfoaf:homepage <"+e.url+"> ;"),e.rightsHolders.length>0&&(n+="\ndcterms:rightsHolder ",e.rightsHolders.forEach(function(e){n=n+"<"+e.id+">, ",t.has(e.id)||(t.set(e.id,"<"+e.id+"> a foaf:Agent ;"),e.toTurtle(t,r))}),n=n.substring(0,n.length-2)+" ;",e.rightsHolders.length>1&&e.rightsHolders.forEach(function(e,t){n=n+"\nfibra:qualifiedAssertion [\n  rdf:predicate dcterms:rightsHolder ;\n  rdf:object <"+e.id+"> ;\n  fibra:order "+t+" ;\n] ;"})),t.set(e.id,n)}}]),e}()},function(e,t,r){"use strict";function n(e){return function(t){return e.getAllItems().then(function(e){t(i(e))})}}function i(e){return{type:A,payload:{items:e}}}function o(e,t){return{type:C,payload:{items:e?[e]:[],coordinates:[t]}}}function a(e,t){return{type:C,payload:{items:e,coordinates:t}}}function s(e,t,r,n){return function(i){return e.alterItem(t,r,n).then(function(e){i(l())})}}function l(){return{type:T,payload:{}}}function u(e,t,r,n){return function(i){i(c(e,t,r?[r]:[],n))}}function c(e,t,r,n){return function(i){return y(e,t,r,n).then(function(e){i(p(e))})}}function p(e){return{type:x,payload:{items:e}}}function d(e,t,r,n){return function(i){return y(e,t,r?[r]:[],n).then(function(e){return i(a(e))})}}function f(e,t,r,n){return function(i){return y(e,t,r,n).then(function(e){return i(a(e))})}}function h(e,t,r){return function(n){return n(g(e,t,r?[r]:[]))}}function g(e,t,r){return function(n){return e.all(r.map(function(e){return t.deleteItem(e)})).then(function(){return n(v(r))})}}function v(e){return{type:S,payload:{items:e}}}function m(e){return{type:w,payload:e}}function y(e,t,r,n){var i=n?b.DataFactory.instance.namedNode(n):b.OWL.Thing;if(r[0]){var o=r.map(function(e){return e.value?t.createNewItem([new E.PropertyAndValue(b.SKOS.prefLabel,b.DataFactory.instance.literal(e.value)),new E.PropertyAndValue(b.RDF.type,i)]):t.createNewItem([new E.PropertyAndValue(b.RDF.type,i)])});return e.all(o)}return t.createNewItem([new E.PropertyAndValue(b.RDF.type,i),new E.PropertyAndValue(b.SKOS.prefLabel,b.DataFactory.instance.literal(""))]).then(function(e){return[e]})}Object.defineProperty(t,"__esModule",{value:!0}),t.ALL_ITEMS_LOADED=t.LOAD_ALL_ITEMS=t.SET_ORDERED_TYPES=t.ITEM_PROPERTIES=t.CREATE_LOCAL_ITEM=t.HIDE_ITEM=t.DISPLAY_ITEMS=t.CLEAR_TYPES=t.ITEMS_DELETED=t.CREATE_DISPLAY_ITEMS=t.ITEMS_CREATED=t.CREATE_TYPE=void 0,t.loadAllItems=n,t.allItemsLoaded=i,t.displayItem=o,t.displayItems=a,t.itemProperty=s,t.itemPropertyUpdated=l,t.createItem=u,t.createItems=c,t.itemsCreated=p,t.createDisplayItem=d,t.createDisplayItems=f,t.deleteItem=h,t.deleteItems=g,t.itemsDeleted=v,t.hideItem=m;var b=r(7),E=r(21),x=(t.CREATE_TYPE="CREATE_TYPE",t.ITEMS_CREATED="ITEMS_CREATED"),S=(t.CREATE_DISPLAY_ITEMS="CREATE_DISPLAY_ITEMS",t.ITEMS_DELETED="ITEMS_DELETED"),C=(t.CLEAR_TYPES="CLEAR_TYPES",t.DISPLAY_ITEMS="DISPLAY_ITEMS"),w=t.HIDE_ITEM="HIDE_ITEM",T=(t.CREATE_LOCAL_ITEM="CREATE_LOCAL_ITEM",t.ITEM_PROPERTIES="ITEM_PROPERTIES"),A=(t.SET_ORDERED_TYPES="SET_ORDERED_TYPES",t.LOAD_ALL_ITEMS="LOAD_ALL_ITEMS",t.ALL_ITEMS_LOADED="ALL_ITEMS_LOADED")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(5),o=function(){function e(e,t,r,n){void 0===n&&(n={}),this._identifier=e,this._definition=t,this._options=n,this._params=r||{}}return e.prototype.name=function(){return this._definition&&this._definition.name||this._identifier},e.prototype.identifier=function(){return this._identifier},e.prototype.params=function(){return this._params},e.prototype.$state=function(){return this._definition},e.prototype.state=function(){return this._definition&&this._definition.self},e.prototype.options=function(){return this._options},e.prototype.exists=function(){return!(!this._definition||!this._definition.self)},e.prototype.valid=function(){return!this.error()},e.prototype.error=function(){var e=this.options().relative;if(!this._definition&&e){var t=e.name?e.name:e;return"Could not resolve '"+this.name()+"' from state '"+t+"'"}return this._definition?this._definition.self?void 0:"State '"+this.name()+"' has an invalid definition":"No such state '"+this.name()+"'"},e.prototype.toString=function(){return"'"+this.name()+"'"+n.toJson(this.params())},e}();o.isDef=function(e){return e&&e.state&&(i.isString(e.state)||i.isString(e.state.name))},t.TargetState=o},function(e,t,r){"use strict";function n(e){if(!(this instanceof n))return new n(e);u.call(this,e),c.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",i)}function i(){this.allowHalfOpen||this._writableState.ended||a(o,this)}function o(e){e.end()}var a=r(103),s=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=n;var l=r(78);l.inherits=r(35);var u=r(217),c=r(149);l.inherits(n,u);for(var p=s(c.prototype),d=0;d<p.length;d++){var f=p[d];n.prototype[f]||(n.prototype[f]=c.prototype[f])}Object.defineProperty(n.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),n.prototype._destroy=function(e,t){this.push(null),this.end(),a(t,e)}},function(e,t){},function(e,t,r){!function(n,i,o){e.exports=t=i(r(4),r(155),r(156))}(0,function(e){return function(){var t=e,r=t.lib,n=r.Base,i=r.WordArray,o=t.algo,a=o.MD5,s=o.EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:a,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var r=this.cfg,n=r.hasher.create(),o=i.create(),a=o.words,s=r.keySize,l=r.iterations;a.length<s;){u&&n.update(u);var u=n.update(e).finalize(t);n.reset();for(var c=1;c<l;c++)u=n.finalize(u),n.reset();o.concat(u)}return o.sigBytes=4*s,o}});t.EvpKDF=function(e,t,r){return s.create(r).compute(e,t)}}(),e.EvpKDF})},function(e,t){e.exports=d3},function(e,t,r){"use strict";var n=r(20),i=(r(51),r(157)),o=function(e,t){var r=e.getPrefixesFromQuery();if(0==!t.string.indexOf("<")&&(t.tokenPrefix=t.string.substring(0,t.string.indexOf(":")+1),null!=r[t.tokenPrefix.slice(0,-1)]&&(t.tokenPrefixUri=r[t.tokenPrefix.slice(0,-1)])),t.autocompletionString=t.string.trim(),0==!t.string.indexOf("<")&&t.string.indexOf(":")>-1)for(var n in r)if(t.tokenPrefix===n+":"){t.autocompletionString=r[n],t.autocompletionString+=t.string.substring(n.length+1);break}return 0==t.autocompletionString.indexOf("<")&&(t.autocompletionString=t.autocompletionString.substring(1)),-1!==t.autocompletionString.indexOf(">",t.length-1)&&(t.autocompletionString=t.autocompletionString.substring(0,t.autocompletionString.length-1)),t},a=function(e,t,r){return r=t.tokenPrefix&&t.autocompletionString&&t.tokenPrefixUri?t.tokenPrefix+r.substring(t.tokenPrefixUri.length):"<"+r+">"},s=0===window.location.protocol.indexOf("http")?"//":"http://",l=function(e,t,o,a){if(!o||!o.string||0==o.string.trim().length)return e.autocompleters.notifications.getEl(t).empty().append("Nothing to autocomplete yet!"),!1;var l={q:o.autocompletionString,page:1};"classes"==t.name?l.type="class":l.type="property";var u=[],c="",p=function(){c=s+"lov.okfn.org/dataset/lov/api/v2/autocomplete/terms?"+n.param(l)};p();var d=function(){l.page++,p()},f=function(){n.get(c,function(r){for(var i=0;i<r.results.length;i++)n.isArray(r.results[i].uri)&&r.results[i].uri.length>0?u.push(r.results[i].uri[0]):u.push(r.results[i].uri);u.length<r.total_results&&u.length<50?(d(),f()):(u.length>0?e.autocompleters.notifications.hide(e,t):e.autocompleters.notifications.getEl(t).text("0 matches found..."),a(u))}).fail(function(r,n,i){e.autocompleters.notifications.getEl(t).empty().append("Failed fetching suggestions..")})};e.autocompleters.notifications.getEl(t).empty().append(n("<span>Fetchting autocompletions &nbsp;</span>")).append(n(i.svg.getElement(r(243).loader)).addClass("notificationLoader")),f()};e.exports={fetchFromLov:l,preprocessResourceTokenForCompletion:o,postprocessResourceTokenForCompletion:a}},function(e,t,r){var n=r(114);e.exports=function(e){return Object(n(e))}},function(e,t){e.exports={}},function(e,t,r){"use strict";var n=r(285)(!0);r(120)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})})},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.DataModel=t.Property=t.Class=void 0;var i=r(15),o=n(i),a=r(18),s=n(a),l=r(19),u=n(l),c=r(1),p=n(c),d=r(2),f=n(d),h=r(89),g=r(32),v=function(){function e(t){(0,p.default)(this,e),this.id=t,this.labels=[],this.descriptions=[],this.types=[]}return(0,f.default)(e,[{key:"getLabel",value:function(e){return this.asNode(e).label}},{key:"asNode",value:function(e){var t=this.asNodes[e];if(t)return t;if(t=this.asNodes[""])return t;for(var r in this.asNodes)return this.asNodes[r]}},{key:"buildAsNodes",value:function(){var e=this;if(!this.asNodes){this.asNodes={};var t=new g.StringSet,r=new g.FMap,n=new g.FMap,i=new g.FMap;this.labels.forEach(function(e){r.set(e.language,e.value),r.has("")||r.set("",e.value),t.add(e.language)}),this.descriptions.forEach(function(e){n.set(e.language,e.value),n.has("")||n.set("",e.value),t.add(e.language)}),this.types.forEach(function(e){e.buildAsNodes();var r=new g.FMap;i.set(e.id.value,r),e.labels.forEach(function(e){r.set(e.language,e.value),r.has("")||r.set("",e.value),t.add(e.language)})}),t.each(function(t){var i=new h.FullRichNodeFromNode(e.id);i.label=r.get(t),i.label||(i.label=r.get("")),i.description=n.get(t),i.description||(i.description=n.get("")),i.types=e.types.map(function(r){return r.id===e.id?i:r.asNode(t)}),e.asNodes[t]=i})}}}]),e}(),m=(t.Class=function(e){function t(e){(0,p.default)(this,t);var r=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return r.superClasses=[],r.subClasses=[],r.properties=[],r.inverseProperties=[],r}return(0,u.default)(t,e),t}(v),t.Property=function(e){function t(e){(0,p.default)(this,t);var r=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return r.domains=[],r.ranges=[],r.superProperties=[],r.subProperties=[],r}return(0,u.default)(t,e),t}(v),t.DataModel=function(){function e(){(0,p.default)(this,e),this.classMap=new g.FMap,this.propertyMap=new g.FMap,this.rootClasses=[],this.rootProperties=[]}return(0,f.default)(e,null,[{key:"getFilter",value:function(e){return 0===e.length?"":"FILTER (?groupId IN ("+e.map(function(e){return e.toCanonical()}).join(", ")+"))"}}]),e}());m.propertyQuery="PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\nPREFIX sf: <http://ldf.fi/functions#>\nPREFIX dcterms: <http://purl.org/dc/terms/>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nSELECT ?id ?domains ?ranges ?labels ?descriptions ?types ?inverseProperty ?superProperties ?subProperties {\n# STARTGRAPH\n  {\n    ?types rdfs:subClassOf* rdf:Property .\n    ?id a ?types .\n  }\n    {\n    ?id skos:prefLabel|rdfs:label ?labels .\n  } UNION {\n    ?id rdfs:comment|dcterms:description ?descriptions .\n  } UNION {\n    ?id owl:inverseOf ?inverseProperty .\n  } UNION {\n    ?id rdfs:domain ?domains .\n  } UNION {\n    ?id rdfs:range ?ranges .\n  } UNION {\n    ?id rdfs:subPropertyOf ?superProperties .\n  } UNION {\n    ?subProperties rdfs:subPropertyOf ?id .\n  }\n# ENDGRAPH\n}",m.classQuery="PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\nPREFIX sf: <http://ldf.fi/functions#>\nPREFIX dcterms: <http://purl.org/dc/terms/>\nSELECT ?id ?types ?labels ?descriptions ?superClasses ?subClasses {\n# STARTGRAPH\n  {\n    ?types rdfs:subClassOf* rdfs:Class .\n    ?id a ?types .\n  }\n  {\n    ?id skos:prefLabel|rdfs:label ?labels .\n  } UNION {\n    ?id rdfs:comment|dcterms:description ?descriptions .\n  } UNION {\n    ?id rdfs:subClassOf ?superClasses .\n  } UNION {\n    ?subClasses rdfs:subClassOf ?id .\n  }\n# ENDGRAPH\n}"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e[e.CREATE=0]="CREATE",e[e.BEFORE=1]="BEFORE",e[e.RUN=2]="RUN",e[e.SUCCESS=3]="SUCCESS",e[e.ERROR=4]="ERROR"}(t.TransitionHookPhase||(t.TransitionHookPhase={}));!function(e){e[e.TRANSITION=0]="TRANSITION",e[e.STATE=1]="STATE"}(t.TransitionHookScope||(t.TransitionHookScope={}))},function(e,t,r){"use strict";function n(e){function t(){return e.value}return e=h(e)&&{value:e}||e,t.__cacheable=!0,l.extend(e,{$$fn:c.isInjectable(e.value)?e.value:t})}function i(e,t,r,n,i){if(e.type&&t&&"string"!==t.name)throw new Error("Param '"+n+"' has two type configurations.");if(e.type&&t&&"string"===t.name&&i.type(e.type))return i.type(e.type);if(t)return t;if(!e.type){var o=r===s.CONFIG?"any":r===s.PATH?"path":r===s.SEARCH?"query":"string";return i.type(o)}return e.type instanceof d.ParamType?e.type:i.type(e.type)}function o(e,t,r){var n=e.squash;if(!t||!1===n)return!1;if(!c.isDefined(n)||null==n)return r;if(!0===n||c.isString(n))return n;throw new Error("Invalid squash policy: '"+n+"'. Valid policies: false, true, or arbitrary string")}function a(e,t,r,n){var i,o,a=[{from:"",to:r||t?void 0:""},{from:null,to:r||t?void 0:""}];return i=c.isArray(e.replace)?e.replace:[],c.isString(n)&&i.push({from:n,to:void 0}),o=l.map(i,u.prop("from")),l.filter(a,function(e){return-1===o.indexOf(e.from)}).concat(i)}Object.defineProperty(t,"__esModule",{value:!0});var s,l=r(3),u=r(6),c=r(5),p=r(16),d=r(140),f=Object.prototype.hasOwnProperty,h=function(e){return 0===["value","type","squash","array","dynamic"].filter(f.bind(e||{})).length};!function(e){e[e.PATH=0]="PATH",e[e.SEARCH=1]="SEARCH",e[e.CONFIG=2]="CONFIG"}(s=t.DefType||(t.DefType={}));var g=function(){function e(e,t,r,u,p){r=n(r),t=i(r,t,u,e,p.paramTypes);var d=function(){var t={array:u===s.SEARCH&&"auto"},n=e.match(/\[\]$/)?{array:!0}:{};return l.extend(t,n,r).array}();t=d?t.$asArray(d,u===s.SEARCH):t;var f=void 0!==r.value||u===s.SEARCH,h=c.isDefined(r.dynamic)?!!r.dynamic:!!t.dynamic,g=c.isDefined(r.raw)?!!r.raw:!!t.raw,v=o(r,f,p.defaultSquashPolicy()),m=a(r,d,f,v),y=c.isDefined(r.inherit)?!!r.inherit:!!t.inherit;l.extend(this,{id:e,type:t,location:u,isOptional:f,dynamic:h,raw:g,squash:v,replace:m,inherit:y,array:d,config:r})}return e.prototype.isDefaultValue=function(e){return this.isOptional&&this.type.equals(this.value(),e)},e.prototype.value=function(e){var t=this;return e=function(e){for(var r=0,n=t.replace;r<n.length;r++){var i=n[r];if(i.from===e)return i.to}return e}(e),c.isUndefined(e)?function(){if(t._defaultValueCache)return t._defaultValueCache.defaultValue;if(!p.services.$injector)throw new Error("Injectable functions cannot be called at configuration time");var e=p.services.$injector.invoke(t.config.$$fn);if(null!==e&&void 0!==e&&!t.type.is(e))throw new Error("Default value ("+e+") for parameter '"+t.id+"' is not an instance of ParamType ("+t.type.name+")");return t.config.$$fn.__cacheable&&(t._defaultValueCache={defaultValue:e}),e}():this.type.$normalize(e)},e.prototype.isSearch=function(){return this.location===s.SEARCH},e.prototype.validates=function(e){if((c.isUndefined(e)||null===e)&&this.isOptional)return!0;var t=this.type.$normalize(e);if(!this.type.is(t))return!1;var r=this.type.encode(t);return!(c.isString(r)&&!this.type.pattern.exec(r))},e.prototype.toString=function(){return"{Param:"+this.id+" "+this.type+" squash: '"+this.squash+"' optional: "+this.isOptional+"}"},e.values=function(e,t){void 0===t&&(t={});for(var r={},n=0,i=e;n<i.length;n++){var o=i[n];r[o.id]=o.value(t[o.id])}return r},e.changed=function(e,t,r){return void 0===t&&(t={}),void 0===r&&(r={}),e.filter(function(e){return!e.type.equals(t[e.id],r[e.id])})},e.equals=function(t,r,n){return void 0===r&&(r={}),void 0===n&&(n={}),0===e.changed(t,r,n).length},e.validates=function(e,t){return void 0===t&&(t={}),e.map(function(e){return e.validates(t[e.id])}).reduce(l.allTrueR,!0)},e}();t.Param=g},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=angular;t.ng=n&&n.module?n:i},function(e,t,r){"use strict";(function(e){function n(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(e,t){if(n()<t)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=o.prototype):(null===e&&(e=new o(t)),e.length=t),e}function o(e,t,r){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return u(this,e)}return a(this,e,t,r)}function a(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?d(e,t,r,n):"string"==typeof t?c(e,t,r):f(e,t)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function l(e,t,r,n){return s(t),t<=0?i(e,t):void 0!==r?"string"==typeof n?i(e,t).fill(r,n):i(e,t).fill(r):i(e,t)}function u(e,t){if(s(t),e=i(e,t<0?0:0|h(t)),!o.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function c(e,t,r){if("string"==typeof r&&""!==r||(r="utf8"),!o.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|v(t,r);e=i(e,n);var a=e.write(t,r);return a!==n&&(e=e.slice(0,a)),e}function p(e,t){var r=t.length<0?0:0|h(t.length);e=i(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function d(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n),o.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=o.prototype):e=p(e,t),e}function f(e,t){if(o.isBuffer(t)){var r=0|h(t.length);return e=i(e,r),0===e.length?e:(t.copy(e,0,0,r),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||X(t.length)?i(e,0):p(e,t);if("Buffer"===t.type&&J(t.data))return p(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function h(e){if(e>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|e}function g(e){return+e!=e&&(e=0),o.alloc(+e)}function v(e,t){if(o.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return V(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return Q(e).length;default:if(n)return V(e).length;t=(""+t).toLowerCase(),n=!0}}function m(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,t>>>=0,r<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return k(this,t,r);case"utf8":case"utf-8":return L(this,t,r);case"ascii":return R(this,t,r);case"latin1":case"binary":return _(this,t,r);case"base64":return I(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function y(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function b(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=o.from(t,n)),o.isBuffer(t))return 0===t.length?-1:E(e,t,r,n,i);if("number"==typeof t)return t&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):E(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function E(e,t,r,n,i){function o(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var a=1,s=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,s/=2,l/=2,r/=2}var u;if(i){var c=-1;for(u=r;u<s;u++)if(o(e,u)===o(t,-1===c?0:u-c)){if(-1===c&&(c=u),u-c+1===l)return c*a}else-1!==c&&(u-=u-c),c=-1}else for(r+l>s&&(r=s-l),u=r;u>=0;u--){for(var p=!0,d=0;d<l;d++)if(o(e,u+d)!==o(t,d)){p=!1;break}if(p)return u}return-1}function x(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[r+a]=s}return a}function S(e,t,r,n){return W(V(t,e.length-r),e,r,n)}function C(e,t,r,n){return W(q(t),e,r,n)}function w(e,t,r,n){return C(e,t,r,n)}function T(e,t,r,n){return W(Q(t),e,r,n)}function A(e,t,r,n){return W(z(t,e.length-r),e,r,n)}function I(e,t,r){return 0===t&&r===e.length?Y.fromByteArray(e):Y.fromByteArray(e.slice(t,r))}function L(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o=e[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=r){var l,u,c,p;switch(s){case 1:o<128&&(a=o);break;case 2:l=e[i+1],128==(192&l)&&(p=(31&o)<<6|63&l)>127&&(a=p);break;case 3:l=e[i+1],u=e[i+2],128==(192&l)&&128==(192&u)&&(p=(15&o)<<12|(63&l)<<6|63&u)>2047&&(p<55296||p>57343)&&(a=p);break;case 4:l=e[i+1],u=e[i+2],c=e[i+3],128==(192&l)&&128==(192&u)&&128==(192&c)&&(p=(15&o)<<18|(63&l)<<12|(63&u)<<6|63&c)>65535&&p<1114112&&(a=p)}}null===a?(a=65533,s=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=s}return N(n)}function N(e){var t=e.length;if(t<=Z)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=Z));return r}function R(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function _(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function k(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=U(e[o]);return i}function O(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function P(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function D(e,t,r,n,i,a){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function F(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-r,2);i<o;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function M(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-r,4);i<o;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function j(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function $(e,t,r,n,i){return i||j(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38),K.write(e,t,r,n,23,4),r+4}function G(e,t,r,n,i){return i||j(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308),K.write(e,t,r,n,52,8),r+8}function B(e){if(e=H(e).replace(ee,""),e.length<2)return"";for(;e.length%4!=0;)e+="=";return e}function H(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function U(e){return e<16?"0"+e.toString(16):e.toString(16)}function V(e,t){t=t||1/0;for(var r,n=e.length,i=null,o=[],a=0;a<n;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function q(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function z(e,t){for(var r,n,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=e.charCodeAt(a),n=r>>8,i=r%256,o.push(i),o.push(n);return o}function Q(e){return Y.toByteArray(B(e))}function W(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function X(e){return e!==e}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var Y=r(377),K=r(378),J=r(215);t.Buffer=o,t.SlowBuffer=g,t.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=n(),o.poolSize=8192,o._augment=function(e){return e.__proto__=o.prototype,e},o.from=function(e,t,r){return a(null,e,t,r)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(e,t,r){return l(null,e,t,r)},o.allocUnsafe=function(e){return u(null,e)},o.allocUnsafeSlow=function(e){return u(null,e)},o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,a=Math.min(r,n);i<a;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!J(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=o.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var a=e[r];if(!o.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,i),i+=a.length}return n},o.byteLength=v,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)y(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},o.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?L(this,0,e):m.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e,t,r,n,i){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;for(var a=i-n,s=r-t,l=Math.min(a,s),u=this.slice(n,i),c=e.slice(t,r),p=0;p<l;++p)if(u[p]!==c[p]){a=u[p],s=c[p];break}return a<s?-1:s<a?1:0},o.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},o.prototype.indexOf=function(e,t,r){return b(this,e,t,r,!0)},o.prototype.lastIndexOf=function(e,t,r){return b(this,e,t,r,!1)},o.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return x(this,e,t,r);case"utf8":case"utf-8":return S(this,e,t,r);case"ascii":return C(this,e,t,r);case"latin1":case"binary":return w(this,e,t,r);case"base64":return T(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Z=4096;o.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n;if(o.TYPED_ARRAY_SUPPORT)n=this.subarray(e,t),n.__proto__=o.prototype;else{var i=t-e;n=new o(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+e]}return n},o.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||P(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},o.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||P(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},o.prototype.readUInt8=function(e,t){return t||P(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return t||P(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return t||P(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return t||P(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return t||P(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||P(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},o.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||P(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return t||P(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){t||P(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt16BE=function(e,t){t||P(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt32LE=function(e,t){return t||P(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return t||P(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return t||P(e,4,this.length),K.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return t||P(e,4,this.length),K.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return t||P(e,8,this.length),K.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return t||P(e,8,this.length),K.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t|=0,r|=0,!n){D(this,e,t,r,Math.pow(2,8*r)-1,0)}var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},o.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t|=0,r|=0,!n){D(this,e,t,r,Math.pow(2,8*r)-1,0)}var i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},o.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):F(this,e,t,!0),t+2},o.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):F(this,e,t,!1),t+2},o.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):M(this,e,t,!0),t+4},o.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):M(this,e,t,!1),t+4},o.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);D(this,e,t,r,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<r&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},o.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);D(this,e,t,r,i-1,-i)}var o=r-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},o.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):F(this,e,t,!0),t+2},o.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):F(this,e,t,!1),t+2},o.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):M(this,e,t,!0),t+4},o.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):M(this,e,t,!1),t+4},o.prototype.writeFloatLE=function(e,t,r){return $(this,e,t,!0,r)},o.prototype.writeFloatBE=function(e,t,r){return $(this,e,t,!1,r)},o.prototype.writeDoubleLE=function(e,t,r){return G(this,e,t,!0,r)},o.prototype.writeDoubleBE=function(e,t,r){return G(this,e,t,!1,r)},o.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,a=n-r;if(this===e&&r<t&&t<n)for(i=a-1;i>=0;--i)e[i+t]=this[i+r];else if(a<1e3||!o.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+a),t);return a},o.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!o.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0);var a;if("number"==typeof e)for(a=t;a<r;++a)this[a]=e;else{var s=o.isBuffer(e)?e:V(new o(e,n).toString()),l=s.length;for(a=0;a<r-t;++a)this[a+t]=s[a%l]}return this};var ee=/[^+\/0-9A-Za-z-_]/g}).call(t,r(11))},function(e,t,r){!function(n,i){e.exports=t=i(r(4))}(0,function(e){return function(){function t(e,t,r){for(var n=[],o=0,a=0;a<t;a++)if(a%4){var s=r[e.charCodeAt(a-1)]<<a%4*2,l=r[e.charCodeAt(a)]>>>6-a%4*2;n[o>>>2]|=(s|l)<<24-o%4*8,o++}return i.create(n,o)}var r=e,n=r.lib,i=n.WordArray,o=r.enc;o.Base64={stringify:function(e){var t=e.words,r=e.sigBytes,n=this._map;e.clamp();for(var i=[],o=0;o<r;o+=3)for(var a=t[o>>>2]>>>24-o%4*8&255,s=t[o+1>>>2]>>>24-(o+1)%4*8&255,l=t[o+2>>>2]>>>24-(o+2)%4*8&255,u=a<<16|s<<8|l,c=0;c<4&&o+.75*c<r;c++)i.push(n.charAt(u>>>6*(3-c)&63));var p=n.charAt(64);if(p)for(;i.length%4;)i.push(p);return i.join("")},parse:function(e){var r=e.length,n=this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var o=0;o<n.length;o++)i[n.charCodeAt(o)]=o}var a=n.charAt(64);if(a){var s=e.indexOf(a);-1!==s&&(r=s)}return t(e,r,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),e.enc.Base64})},function(e,t,r){!function(n,i){e.exports=t=i(r(4))}(0,function(e){return function(t){function r(e,t,r,n,i,o,a){var s=e+(t&r|~t&n)+i+a;return(s<<o|s>>>32-o)+t}function n(e,t,r,n,i,o,a){var s=e+(t&n|r&~n)+i+a;return(s<<o|s>>>32-o)+t}function i(e,t,r,n,i,o,a){var s=e+(t^r^n)+i+a;return(s<<o|s>>>32-o)+t}function o(e,t,r,n,i,o,a){var s=e+(r^(t|~n))+i+a;return(s<<o|s>>>32-o)+t}var a=e,s=a.lib,l=s.WordArray,u=s.Hasher,c=a.algo,p=[];!function(){for(var e=0;e<64;e++)p[e]=4294967296*t.abs(t.sin(e+1))|0}();var d=c.MD5=u.extend({_doReset:function(){this._hash=new l.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var a=0;a<16;a++){var s=t+a,l=e[s];e[s]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}var u=this._hash.words,c=e[t+0],d=e[t+1],f=e[t+2],h=e[t+3],g=e[t+4],v=e[t+5],m=e[t+6],y=e[t+7],b=e[t+8],E=e[t+9],x=e[t+10],S=e[t+11],C=e[t+12],w=e[t+13],T=e[t+14],A=e[t+15],I=u[0],L=u[1],N=u[2],R=u[3];I=r(I,L,N,R,c,7,p[0]),R=r(R,I,L,N,d,12,p[1]),N=r(N,R,I,L,f,17,p[2]),L=r(L,N,R,I,h,22,p[3]),I=r(I,L,N,R,g,7,p[4]),R=r(R,I,L,N,v,12,p[5]),N=r(N,R,I,L,m,17,p[6]),L=r(L,N,R,I,y,22,p[7]),I=r(I,L,N,R,b,7,p[8]),R=r(R,I,L,N,E,12,p[9]),N=r(N,R,I,L,x,17,p[10]),L=r(L,N,R,I,S,22,p[11]),I=r(I,L,N,R,C,7,p[12]),R=r(R,I,L,N,w,12,p[13]),N=r(N,R,I,L,T,17,p[14]),L=r(L,N,R,I,A,22,p[15]),I=n(I,L,N,R,d,5,p[16]),R=n(R,I,L,N,m,9,p[17]),N=n(N,R,I,L,S,14,p[18]),L=n(L,N,R,I,c,20,p[19]),I=n(I,L,N,R,v,5,p[20]),R=n(R,I,L,N,x,9,p[21]),N=n(N,R,I,L,A,14,p[22]),L=n(L,N,R,I,g,20,p[23]),I=n(I,L,N,R,E,5,p[24]),R=n(R,I,L,N,T,9,p[25]),N=n(N,R,I,L,h,14,p[26]),L=n(L,N,R,I,b,20,p[27]),I=n(I,L,N,R,w,5,p[28]),R=n(R,I,L,N,f,9,p[29]),N=n(N,R,I,L,y,14,p[30]),L=n(L,N,R,I,C,20,p[31]),I=i(I,L,N,R,v,4,p[32]),R=i(R,I,L,N,b,11,p[33]),N=i(N,R,I,L,S,16,p[34]),L=i(L,N,R,I,T,23,p[35]),I=i(I,L,N,R,d,4,p[36]),R=i(R,I,L,N,g,11,p[37]),N=i(N,R,I,L,y,16,p[38]),L=i(L,N,R,I,x,23,p[39]),I=i(I,L,N,R,w,4,p[40]),R=i(R,I,L,N,c,11,p[41]),N=i(N,R,I,L,h,16,p[42]),L=i(L,N,R,I,m,23,p[43]),I=i(I,L,N,R,E,4,p[44]),R=i(R,I,L,N,C,11,p[45]),N=i(N,R,I,L,A,16,p[46]),L=i(L,N,R,I,f,23,p[47]),I=o(I,L,N,R,c,6,p[48]),R=o(R,I,L,N,y,10,p[49]),N=o(N,R,I,L,T,15,p[50]),L=o(L,N,R,I,v,21,p[51]),I=o(I,L,N,R,C,6,p[52]),R=o(R,I,L,N,h,10,p[53]),N=o(N,R,I,L,x,15,p[54]),L=o(L,N,R,I,d,21,p[55]),I=o(I,L,N,R,b,6,p[56]),R=o(R,I,L,N,A,10,p[57]),N=o(N,R,I,L,m,15,p[58]),L=o(L,N,R,I,w,21,p[59]),I=o(I,L,N,R,g,6,p[60]),R=o(R,I,L,N,S,10,p[61]),N=o(N,R,I,L,f,15,p[62]),L=o(L,N,R,I,E,21,p[63]),u[0]=u[0]+I|0,u[1]=u[1]+L|0,u[2]=u[2]+N|0,u[3]=u[3]+R|0},_doFinalize:function(){var e=this._data,r=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;r[i>>>5]|=128<<24-i%32;var o=t.floor(n/4294967296),a=n;r[15+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),r[14+(i+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),e.sigBytes=4*(r.length+1),this._process();for(var s=this._hash,l=s.words,u=0;u<4;u++){var c=l[u];l[u]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}return s},clone:function(){var e=u.clone.call(this);return e._hash=this._hash.clone(),e}});a.MD5=u._createHelper(d),a.HmacMD5=u._createHmacHelper(d)}(Math),e.MD5})},function(e,t,r){(function(t){function r(e,t){return function(){return t.apply(e,Array.prototype.slice.call(arguments,0))}}function n(e,t){return Array.prototype.slice.call(e,t||0)}function i(e,t){a(e,function(e,r){return t(e,r),!1})}function o(e,t){var r=s(e)?[]:{};return a(e,function(e,n){return r[n]=t(e,n),!1}),r}function a(e,t){if(s(e)){for(var r=0;r<e.length;r++)if(t(e[r],r))return e[r]}else for(var n in e)if(e.hasOwnProperty(n)&&t(e[n],n))return e[n]}function s(e){return null!=e&&"function"!=typeof e&&"number"==typeof e.length}function l(e){return e&&"[object Function]"==={}.toString.call(e)}function u(e){return e&&"[object Object]"==={}.toString.call(e)}var c=function(){return Object.assign?Object.assign:function(e,t,r,n){for(var o=1;o<arguments.length;o++)i(Object(arguments[o]),function(t,r){e[r]=t});return e}}(),p=function(){function e(){}return Object.create?function(e,t,r,i){var o=n(arguments,1);return c.apply(this,[Object.create(e)].concat(o))}:function(t,r,i,o){var a=n(arguments,1);return e.prototype=t,c.apply(this,[new e].concat(a))}}(),d=function(){return String.prototype.trim?function(e){return String.prototype.trim.call(e)}:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}}(),f="undefined"!=typeof window?window:t;e.exports={assign:c,create:p,trim:d,bind:r,slice:n,each:i,map:o,pluck:a,isList:s,isFunction:l,isObject:u,Global:f}}).call(t,r(11))},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,r){var n=r(167),i=r(118);e.exports=Object.keys||function(e){return n(e,i)}},function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},function(e,t,r){r(281);for(var n=r(17),i=r(31),o=r(53),a=r(14)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<s.length;l++){var u=s[l],c=n[u],p=c&&c.prototype;p&&!p[a]&&i(p,a,u),o[u]=o.Array}},function(e,t,r){var n=r(24).f,i=r(39),o=r(14)("toStringTag");e.exports=function(e,t,r){e&&!i(e=r?e:e.prototype,o)&&n(e,o,{configurable:!0,value:t})}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=r(15),o=n(i),a=r(306),s=n(a);t.default=function e(t,r,n){null===t&&(t=Function.prototype);var i=(0,s.default)(t,r);if(void 0===i){var a=(0,o.default)(t);return null===a?void 0:e(a,r,n)}if("value"in i)return i.value;var l=i.get;if(void 0!==l)return l.call(n)}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SparqlAutocompleteWorkerService=t.SparqlAutocompleteService=t.Result=t.ResultGroup=t.AutocompletionResults=void 0;var i=r(42),o=n(i),a=r(2),s=n(a),l=r(1),u=n(l),c=r(7),p=r(90),d=r(32),f=r(43),h=r(0),g=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(h),v=t.AutocompletionResults=function e(){(0,u.default)(this,e),this.localMatchingResults=[],this.localNonMatchingResults=[],this.remoteResults=[]},m=t.ResultGroup=function e(t){(0,u.default)(this,e),this.label=t,this.results=[]},y=t.Result=function e(t,r,n,i){(0,u.default)(this,e),this.ids=t,this.datasources=r,this.matchedLabel=n,this.prefLabel=i,this.additionalInformation={}},b=t.SparqlAutocompleteService=function(){function e(t){(0,u.default)(this,e),this.workerService=t}return e.$inject=["workerService"],(0,s.default)(e,[{key:"autocomplete",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments[4];return this.workerService.call("sparqlAutocompleteWorkerService","autocomplete",[e,t,r,n],i)}}]),e}();b.defaultMatchQuery='\nPREFIX text: <http://jena.apache.org/text#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX mads: <http://www.loc.gov/mads/rdf/v1#>\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\nPREFIX sf: <http://ldf.fi/functions#>\nPREFIX fibra: <http://ldf.fi/fibra/schema#>\nPREFIX dcterms: <http://purl.org/dc/terms/>\nSELECT ?groupId ?id ?prefLabel ?matchedLabel ?sameAs ?altLabel { # ADDITIONALVARIABLES\n# STARTGRAPH\n  {\n    SELECT ?groupId ?id (SUM(?sc) AS ?score) {\n      {\n        SELECT ?groupId ?id ?sc {\n          BIND(CONCAT("\\"",REPLACE(<QUERY>,"([\\\\+\\\\-\\\\&\\\\|\\\\!\\\\(\\\\)\\\\{\\\\}\\\\[\\\\]\\\\^\\\\\\"\\\\~\\\\*\\\\?\\\\:\\\\/\\\\\\\\])","\\\\$1"),"\\"") AS ?query)\n          (?id ?sc) text:query ?query .\n          ?id skos:prefLabel|rdfs:label|skos:altLabel|mads:authoritativeLabel|mads:variantLabel ?matchedLabel\n          FILTER (LCASE(?matchedLabel)=LCASE(<QUERY>))\n          ?id a ?groupIdLocal .\n          BIND(?groupIdLocal AS ?groupId)\n          # CONSTRAINTS\n        }\n        GROUP BY ?groupId ?id ?sc\n        LIMIT <LIMIT>\n      } UNION {\n        SELECT ?groupId ?id ?sc {\n          BIND(CONCAT(REPLACE(<QUERY>,"([\\\\+\\\\-\\\\&\\\\|\\\\!\\\\(\\\\)\\\\{\\\\}\\\\[\\\\]\\\\^\\\\\\"\\\\~\\\\*\\\\?\\\\:\\\\/\\\\\\\\])","\\\\$1"),"*") AS ?query)\n          (?id ?sc) text:query ?query .\n          ?id a ?groupIdLocal .\n          BIND(?groupIdLocal AS ?groupId)\n          # CONSTRAINTS\n        }\n        GROUP BY ?groupId ?id ?sc\n        LIMIT <LIMIT>\n      }\n    }\n    GROUP BY ?groupId ?id\n    HAVING(BOUND(?id))\n    LIMIT <LIMIT>\n  }\n  ?id skos:prefLabel|rdfs:label|skos:altLabel|mads:authoritativeLabel|mads:variantLabel ?matchedLabel\n  FILTER (REGEX(LCASE(?matchedLabel),CONCAT("\\\\b",LCASE(<QUERY>))))\n  {\n    ?id sf:preferredLanguageLiteral (skos:prefLabel mads:authoritativeLabel rdfs:label skos:altLabel mads:variantLabel \'<PREFLANG>\' \'\' ?prefLabel) .\n  } UNION {\n    ?id owl:sameAs ?sameAs .\n  } UNION {\n    ?id skos:altLabel|mads:variantLabel ?altLabel .\n  }\n  # ADDITIONALSELECT\n# ENDGRAPH\n}\n';var E=function e(){(0,u.default)(this,e),this.idToIdSet=new d.EMap(function(){return new d.StringSet}),this.idToGroupIdSet=new d.EMap(function(){return new d.StringSet}),this.ifpVarPlusValueToIdSet=new d.EMap(function(){return new d.EMap(function(){return new d.StringSet})}),this.idToPrefLabelSet=new d.EMap(function(){return new c.ONodeSet}),this.idToMatchedLabelSet=new d.EMap(function(){return new c.ONodeSet}),this.idToAltLabelSet=new d.EMap(function(){return new c.ONodeSet}),this.idToDatasourceSet=new d.EMap(function(){return new d.StringSet}),this.seen=new d.StringSet};t.SparqlAutocompleteWorkerService=function(){function e(t,r,n){(0,u.default)(this,e),this.$q=t,this.fibraSparqlService=r,this.stateWorkerService=n}return e.$inject=["$q","fibraSparqlService","stateWorkerService"],(0,s.default)(e,[{key:"autocomplete",value:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=arguments[4],s=this.$q.defer(),l=new v,u=this.stateWorkerService.state.project.autocompletionQuery;u=u.replace(/<QUERY>/g,f.SparqlService.stringToSPARQLString(t)),u=u.replace(/<LIMIT>/g,""+r),u=u.replace(/# CONSTRAINTS/g,o),u=u.replace(/<PREFLANG>/g,this.stateWorkerService.state.language);var c=new E,h=this.fibraSparqlService.query(this.stateWorkerService.state.project.endpoint,u,{timeout:a}).then(function(t){e.processBindings(c,i.stateWorkerService.state.project.endpoint,t),l.localMatchingResults=e.buildResults(c,new d.EMap,i.stateWorkerService.state.project.dataModel,i.stateWorkerService.state.language),n?s.notify({endpointType:"primary",endpoint:i.stateWorkerService.state.project.id,results:l}):s.resolve(l)});if(n){var g=new d.EMap;this.$q.all(this.stateWorkerService.state.project.remoteEndpoints().map(function(n){return u=n.autocompletionQuery,u=u.replace(/<QUERY>/g,f.SparqlService.stringToSPARQLString(t)),u=u.replace(/<LIMIT>/g,""+r),u=u.replace(/<PREFLANG>/g,i.stateWorkerService.state.language),i.fibraSparqlService.query(n.endpoint,u,{timeout:a}).then(function(t){0!==t.results.bindings.length&&h.then(function(){e.processBindings(c,n.id,t),e.unifyResults(c),l.remoteResults=l.remoteResults.concat(e.buildResults(c,g,i.stateWorkerService.state.project.dataModel,i.stateWorkerService.state.language)),s.notify({endpointType:"remote",endpoint:n.id,results:l})})},function(e){return s.notify({endpointType:"remote",endpoint:n.id,error:p.WorkerWorkerService.stripFunctions(e)})})})).then(function(){return s.resolve(l)})}return s.promise}}],[{key:"processBindings",value:function(e,t,r){r.results.bindings.forEach(function(n){var i=n.id.value;e.idToIdSet.goc(i).add(i),e.idToDatasourceSet.goc(i).add(t),n.prefLabel&&e.idToPrefLabelSet.goc(i).add(c.DataFactory.instance.nodeFromBinding(n.prefLabel)),n.altLabel&&e.idToAltLabelSet.goc(i).add(c.DataFactory.instance.nodeFromBinding(n.altLabel)),n.matchedLabel&&e.idToMatchedLabelSet.goc(i).add(c.DataFactory.instance.nodeFromBinding(n.matchedLabel)),n.groupId&&(e.idToGroupIdSet.goc(i).add(n.groupId.value),n.groupLabel&&e.idToPrefLabelSet.goc(n.groupId.value).add(c.DataFactory.instance.nodeFromBinding(n.groupLabel))),n.sameAs&&(e.idToIdSet.get(i).add(n.sameAs.value),e.idToIdSet.goc(n.sameAs.value).add(i));var a=!0,s=!1,l=void 0;try{for(var u,p=(0,o.default)(r.head.vars);!(a=(u=p.next()).done);a=!0){var d=u.value;0===d.indexOf("ifp")&&n[d]&&e.ifpVarPlusValueToIdSet.goc(d.substring(3)).goc(n[d].value).add(i)}}catch(e){s=!0,l=e}finally{try{!a&&p.return&&p.return()}finally{if(s)throw l}}})}},{key:"buildResults",value:function(e,t,r,n){var i=[];return e.idToIdSet.each(function(o,a){if(!e.seen.has(a)&&!o.values().some(function(t){return e.seen.has(t)})){e.seen.adds(o);var s=new y(o.values().map(function(e){return c.DataFactory.instance.namedNode(e)}),e.idToDatasourceSet.get(a).values(),e.idToMatchedLabelSet.get(a).values()[0],e.idToPrefLabelSet.has(a)?e.idToPrefLabelSet.get(a).values()[0]:null);e.idToAltLabelSet.has(a)&&(s.additionalInformation.altLabel=e.idToAltLabelSet.get(a).values()),s.additionalInformation.type=e.idToGroupIdSet.get(a).values().map(function(e){return c.DataFactory.instance.namedNode(e)}),s.additionalInformation.typeLabel=e.idToGroupIdSet.get(a).values().map(function(t){return e.idToPrefLabelSet.has(a)?e.idToPrefLabelSet.get(a).values()[0]:null}),e.idToGroupIdSet.get(a).each(function(o){return t.goc(o,function(){var t=r.classMap.has(o)?r.classMap.get(o).getLabel(n):e.idToPrefLabelSet.has(o)?e.idToPrefLabelSet.get(o).values()[0].value:o,a=new m(t);return i.push(a),a}).results.push(s)})}}),i}},{key:"unifyResults",value:function(e){e.ifpVarPlusValueToIdSet.each(function(t){return t.each(function(t){return t.each(function(r){return e.idToIdSet.goc(r).adds(t)})})}),e.idToIdSet.each(function(t,r){return t.each(function(n){var i=e.idToIdSet.get(n);if(t!==i){e.idToIdSet.set(n,t),t.adds(i);var o=e.idToDatasourceSet.get(r),a=e.idToDatasourceSet.get(n);o?(a&&o.adds(a),e.idToDatasourceSet.set(n,o)):a&&e.idToDatasourceSet.set(r,a);var s=e.idToGroupIdSet.get(r),l=e.idToGroupIdSet.get(n);s?(l&&s.adds(l),e.idToGroupIdSet.set(n,s)):l&&e.idToGroupIdSet.set(r,l);var u=e.idToPrefLabelSet.get(r),c=e.idToPrefLabelSet.get(n);u?(c&&u.adds(c),e.idToPrefLabelSet.set(n,u)):c&&e.idToPrefLabelSet.set(r,c),u=e.idToMatchedLabelSet.get(r),c=e.idToMatchedLabelSet.get(n),u?(c&&u.adds(c),e.idToMatchedLabelSet.set(n,u)):c&&e.idToMatchedLabelSet.set(r,c),u=e.idToAltLabelSet.get(r),c=e.idToAltLabelSet.get(n),u?(c&&u.adds(c),e.idToAltLabelSet.set(n,u)):c&&e.idToAltLabelSet.set(r,c)}})})}}]),e}();g.module("fibra.services.sparql-autocomplete-service",[]).config(["$provide",function(e){e.service("sparqlAutocompleteService",b)}])},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SparqlTreeWorkerService=t.SparqlTreeService=void 0;var i=r(1),o=n(i),a=r(2),s=n(a),l=r(0),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(l),c=r(128),p=t.SparqlTreeService=function(){function e(t){(0,o.default)(this,e),this.workerService=t}return e.$inject=["workerService"],(0,s.default)(e,[{key:"getTree",value:function(e,t,r){return this.workerService.call("sparqlTreeWorkerService","getTree",[e,t],r)}}]),e}();p.getClassTreeQuery='PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX sf: <http://ldf.fi/functions#>\nSELECT ?subClass ?superClass ?class ?classLabel ?instances {\n# STARTGRAPH\n  {\n    ?groupId rdfs:subClassOf ?class .\n    FILTER EXISTS {\n      ?id a ?groupId .\n      # CONSTRAINTS\n    }\n    BIND(?groupId AS ?subClass)\n  } UNION {\n    {\n      SELECT ?groupId (COUNT(*) AS ?instances) {\n        ?id a ?groupId .\n      }\n      GROUP BY ?groupId\n    }\n    # CONSTRAINTS\n    BIND (?groupId AS ?class)\n  }\n  OPTIONAL {\n    ?class sf:preferredLanguageLiteral (skos:prefLabel rdfs:label skos:altLabel \'en\' \'\' ?classLabelP) .\n  }\n  FILTER(ISIRI(?class))\n  BIND(COALESCE(?classLabelP,REPLACE(REPLACE(REPLACE(REPLACE(STR(?class),".*/",""),".*#",""),"_"," "),"([A-Z])"," $1")) AS ?classLabel)\n# ENDGRAPH\n}\n';t.SparqlTreeWorkerService=function(){function e(t){(0,o.default)(this,e),this.fibraSparqlService=t}return e.$inject=["fibraSparqlService"],(0,s.default)(e,[{key:"getTree",value:function(e,t,r){return this.fibraSparqlService.query(e,t,{timeout:r}).then(function(e){var t={},r={};e.results.bindings.forEach(function(e){if(e.classLabel&&(r[e.class.value]=new c.TreeNode(e.class.value,e.classLabel.value)),e.instances&&(r[e.class.value].instances=parseInt(e.instances.value,10)),e.subClass){var n=e.subClass.value;t[n]||(t[n]={}),t[n][e.class.value]=!0}if(e.superClass){var i=e.class.value;t[i]||(t[i]={}),t[i][e.superClass.value]=!0}});var n=[];for(var i in r)if(t[i])for(var o in t[i])r[o].children.push(r[i]);else n.push(r[i]);return n})}}]),e}();u.module("fibra.services.sparql-tree-service",[]).config(["$provide",function(e){e.service("sparqlTreeService",p)}])},function(e,t,r){var n=r(29),i=r(176),o=r(177),a=r(25),s=r(81),l=r(121),u={},c={},t=e.exports=function(e,t,r,p,d){var f,h,g,v,m=d?function(){return e}:l(e),y=n(r,p,t?2:1),b=0;if("function"!=typeof m)throw TypeError(e+" is not iterable!");if(o(m)){for(f=s(e.length);f>b;b++)if((v=t?y(a(h=e[b])[0],h[1]):y(e[b]))===u||v===c)return v}else for(g=m.call(e);!(h=g.next()).done;)if((v=i(g,y,h.value,t))===u||v===c)return v};t.BREAK=u,t.RETURN=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(3),o=r(33),a=r(6);!function(e){e[e.SUPERSEDED=2]="SUPERSEDED",e[e.ABORTED=3]="ABORTED",e[e.INVALID=4]="INVALID",e[e.IGNORED=5]="IGNORED",e[e.ERROR=6]="ERROR"}(n=t.RejectType||(t.RejectType={}));var s=0,l=function(){function e(e,t,r){this.$id=s++,this.type=e,this.message=t,this.detail=r}return e.prototype.toString=function(){var e=function(e){return e&&e.toString!==Object.prototype.toString?e.toString():o.stringify(e)}(this.detail),t=this;return"Transition Rejection($id: "+t.$id+" type: "+t.type+", message: "+t.message+", detail: "+e+")"},e.prototype.toPromise=function(){return i.extend(i.silentRejection(this),{_transitionRejection:this})},e.isRejectionPromise=function(t){return t&&"function"==typeof t.then&&a.is(e)(t._transitionRejection)},e.superseded=function(t,r){var i=new e(n.SUPERSEDED,"The transition has been superseded by a different transition",t);return r&&r.redirected&&(i.redirected=!0),i},e.redirected=function(t){return e.superseded(t,{redirected:!0})},e.invalid=function(t){return new e(n.INVALID,"This transition is invalid",t)},e.ignored=function(t){return new e(n.IGNORED,"The transition was ignored",t)},e.aborted=function(t){return new e(n.ABORTED,"The transition has been aborted",t)},e.errored=function(t){return new e(n.ERROR,"The transition errored",t)},e.normalize=function(t){return a.is(e)(t)?t:e.errored(t)},e}();t.Rejection=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(56),i=r(3),o=r(33),a=r(5),s=r(6),l=r(34),u=r(16),c=r(73),p=r(46),d={current:i.noop,transition:null,traceData:{},bind:null},f=function(){function e(e,t,r,o){var a=this;this.transition=e,this.stateContext=t,this.registeredHook=r,this.options=o,this.isSuperseded=function(){return a.type.hookPhase===n.TransitionHookPhase.RUN&&!a.options.transition.isActive()},this.options=i.defaults(o,d),this.type=r.eventType}return e.prototype.logError=function(e){this.transition.router.stateService.defaultErrorHandler()(e)},e.prototype.invokeHook=function(){var e=this,t=this.registeredHook;if(!t._deregistered){var r=this.getNotCurrentRejection();if(r)return r;var n=this.options;l.trace.traceHookInvocation(this,this.transition,n);var i=function(e){return c.Rejection.normalize(e).toPromise()},o=function(r){return t.eventType.getErrorHandler(e)(r)},s=function(r){return t.eventType.getResultHandler(e)(r)};try{var u=function(){return t.callback.call(n.bind,e.transition,e.stateContext)}();return!this.type.synchronous&&a.isPromise(u)?u.catch(i).then(s,o):s(u)}catch(e){return o(c.Rejection.normalize(e))}}},e.prototype.handleHookResult=function(e){var t=this,r=this.getNotCurrentRejection();return r||(a.isPromise(e)?e.then(function(e){return t.handleHookResult(e)}):(l.trace.traceHookResult(e,this.transition,this.options),!1===e?c.Rejection.aborted("Hook aborted transition").toPromise():s.is(p.TargetState)(e)?c.Rejection.redirected(e).toPromise():void 0))},e.prototype.getNotCurrentRejection=function(){var e=this.transition.router;return e._disposed?c.Rejection.aborted("UIRouter instance #"+e.$id+" has been stopped (disposed)").toPromise():this.transition._aborted?c.Rejection.aborted().toPromise():this.isSuperseded()?c.Rejection.superseded(this.options.current()).toPromise():void 0},e.prototype.toString=function(){var e=this,t=e.options,r=e.registeredHook,n=s.parse("traceData.hookType")(t)||"internal",i=s.parse("traceData.context.state.name")(t)||s.parse("traceData.context")(t)||"unknown",a=o.fnToString(r.callback);return n+" context: "+i+", "+o.maxLength(200,a)},e.chain=function(e,t){var r=function(e,t){return e.then(function(){return t.invokeHook()})};return e.reduce(r,t||u.services.$q.when())},e.invokeHooks=function(t,r){for(var n=0;n<t.length;n++){var i=t[n].invokeHook();if(a.isPromise(i)){var o=t.slice(n+1);return e.chain(o,i).then(r)}}return r()},e.runAllHooks=function(e){e.forEach(function(e){return e.invokeHook()})},e}();f.HANDLE_RESULT=function(e){return function(t){return e.handleHookResult(t)}},f.LOG_REJECTED_RESULT=function(e){return function(t){a.isPromise(t)&&t.catch(function(t){return e.logError(c.Rejection.normalize(t))})}},f.LOG_ERROR=function(e){return function(t){return e.logError(t)}},f.REJECT_ERROR=function(e){return function(e){return i.silentRejection(e)}},f.THROW_ERROR=function(e){return function(e){throw e}},t.TransitionHook=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(16),o=r(34),a=r(33),s=r(5);t.defaultResolvePolicy={when:"LAZY",async:"WAIT"};var l=function(){function e(t,r,o,a,l){if(this.resolved=!1,this.promise=void 0,t instanceof e)n.extend(this,t);else if(s.isFunction(r)){if(null==t||void 0==t)throw new Error("new Resolvable(): token argument is required");if(!s.isFunction(r))throw new Error("new Resolvable(): resolveFn argument must be a function");this.token=t,this.policy=a,this.resolveFn=r,this.deps=o||[],this.data=l,this.resolved=void 0!==l,this.promise=this.resolved?i.services.$q.when(this.data):void 0}else if(s.isObject(t)&&t.token&&s.isFunction(t.resolveFn)){var u=t;return new e(u.token,u.resolveFn,u.deps,u.policy,u.data)}}return e.prototype.getPolicy=function(e){var r=this.policy||{},n=e&&e.resolvePolicy||{};return{when:r.when||n.when||t.defaultResolvePolicy.when,async:r.async||n.async||t.defaultResolvePolicy.async}},e.prototype.resolve=function(e,t){var r=this,a=i.services.$q,s=function(){return a.all(e.getDependencies(r).map(function(r){return r.get(e,t)}))},l=function(e){return r.resolveFn.apply(null,e)},u=function(e){var t=e.cache(1);return t.take(1).toPromise().then(function(){return t})},c=e.findNode(this),p=c&&c.state,d="RXWAIT"===this.getPolicy(p).async?u:n.identity,f=function(e){return r.data=e,r.resolved=!0,o.trace.traceResolvableResolved(r,t),r.data};return this.promise=a.when().then(s).then(l).then(d).then(f)},e.prototype.get=function(e,t){return this.promise||this.resolve(e,t)},e.prototype.toString=function(){return"Resolvable(token: "+a.stringify(this.token)+", requires: ["+this.deps.map(a.stringify)+"])"},e.prototype.clone=function(){return new e(this)},e}();l.fromData=function(e,t){return new l(e,function(){return t},null,null,t)},t.Resolvable=l},function(e,t,r){"use strict";function n(e){var r=function(e){return e||""},n=t.splitHash(e).map(r),i=n[0],o=n[1],a=t.splitQuery(i).map(r);return{path:a[0],search:a[1],hash:o,url:e}}function i(e,t,r,n){return function(i){function o(e){e.dispose(a),e.dispose(s)}var a=i.locationService=new r(i),s=i.locationConfig=new n(i,t);return{name:e,service:a,configuration:s,dispose:o}}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(95),a=r(3),s=function(e){return function(t){if(!t)return["",""];var r=t.indexOf(e);return-1===r?[t,""]:[t.substr(0,r),t.substr(r+1)]}};t.splitHash=s("#"),t.splitQuery=s("?"),t.splitEqual=s("="),t.trimHashVal=function(e){return e?e.replace(/^#/,""):""},t.keyValsToObjectR=function(e,t){var r=t[0],n=t[1];return e.hasOwnProperty(r)?o.isArray(e[r])?e[r].push(n):e[r]=[e[r],n]:e[r]=n,e},t.getParams=function(e){return e.split("&").filter(a.identity).map(t.splitEqual).reduce(t.keyValsToObjectR,{})},t.parseUrl=n,t.buildUrl=function(e){var t=e.path(),r=e.search(),n=e.hash(),i=Object.keys(r).map(function(e){var t=r[e];return(o.isArray(t)?t:[t]).map(function(t){return e+"="+t})}).reduce(a.unnestR,[]).join("&");return t+(i?"?"+i:"")+(n?"#"+n:"")},t.locationPluginFactory=i},function(e,t,r){t=e.exports=r(217),t.Stream=t,t.Readable=t,t.Writable=r(149),t.Duplex=r(47),t.Transform=r(221),t.PassThrough=r(384)},function(e,t,r){(function(e){function r(e){return Array.isArray?Array.isArray(e):"[object Array]"===v(e)}function n(e){return"boolean"==typeof e}function i(e){return null===e}function o(e){return null==e}function a(e){return"number"==typeof e}function s(e){return"string"==typeof e}function l(e){return"symbol"==typeof e}function u(e){return void 0===e}function c(e){return"[object RegExp]"===v(e)}function p(e){return"object"==typeof e&&null!==e}function d(e){return"[object Date]"===v(e)}function f(e){return"[object Error]"===v(e)||e instanceof Error}function h(e){return"function"==typeof e}function g(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function v(e){return Object.prototype.toString.call(e)}t.isArray=r,t.isBoolean=n,t.isNull=i,t.isNullOrUndefined=o,t.isNumber=a,t.isString=s,t.isSymbol=l,t.isUndefined=u,t.isRegExp=c,t.isObject=p,t.isDate=d,t.isError=f,t.isFunction=h,t.isPrimitive=g,t.isBuffer=e.isBuffer}).call(t,r(59).Buffer)},function(e,t,r){"use strict";window.console=window.console||{log:function(){}};var n=r(20),i=r(23),o=r(107),a=r(157),s=r(243);r(560),r(244),r(561),r(562),r(563),r(245),r(564),r(565),r(566),r(567),r(568),r(569);var l=e.exports=function(e,t){var r=n("<div>",{class:"yasqe"}).appendTo(n(e));t=u(t);var o=c(i(r[0],t));return f(o),o},u=function(e){return n.extend(!0,{},l.defaults,e)},c=function(e){e.autocompleters=r(571)(l,e),e.options.autocompleters&&e.options.autocompleters.forEach(function(t){l.Autocompleters[t]&&e.autocompleters.init(t,l.Autocompleters[t])}),e.lastQueryDuration=null,e.getCompleteToken=function(t,n){return r(108).getCompleteToken(e,t,n)},e.getPreviousNonWsToken=function(t,n){return r(108).getPreviousNonWsToken(e,t,n)},e.getNextNonWsToken=function(t,n){return r(108).getNextNonWsToken(e,t,n)},e.collapsePrefixes=function(t){void 0===t&&(t=!0),e.foldCode(r(245).findFirstPrefixLine(e),l.fold.prefix,t?"fold":"unfold")};var t=null,i=null;return e.setBackdrop=function(r){(e.options.backdrop||0===e.options.backdrop||"0"===e.options.backdrop)&&(null===i&&1===(i=+e.options.backdrop)&&(i=400),t||(t=n("<div>",{class:"backdrop"}).click(function(){n(this).hide()}).insertAfter(n(e.getWrapperElement()))),r?t.show(i):t.hide(i))},e.query=function(t){l.executeQuery(e,t)},e.getUrlArguments=function(t){return l.getUrlArguments(e,t)},e.getPrefixesFromQuery=function(){return r(158).getPrefixesFromQuery(e)},e.addPrefixes=function(t){return r(158).addPrefixes(e,t)},e.removePrefixes=function(t){return r(158).removePrefixes(e,t)},e.getValueWithoutComments=function(){var t="";return l.runMode(e.getValue(),"sparql11",function(e,r){"comment"!=r&&(t+=e)}),t},e.getQueryType=function(){return e.queryType},e.getQueryMode=function(){var t=e.getQueryType();return"INSERT"==t||"DELETE"==t||"LOAD"==t||"CLEAR"==t||"CREATE"==t||"DROP"==t||"COPY"==t||"MOVE"==t||"ADD"==t?"update":"query"},e.setCheckSyntaxErrors=function(t){e.options.syntaxErrorCheck=t,v(e)},e.enableCompleter=function(t){p(e.options,t),l.Autocompleters[t]&&e.autocompleters.init(t,l.Autocompleters[t])},e.disableCompleter=function(t){d(e.options,t)},e},p=function(e,t){e.autocompleters||(e.autocompleters=[]),e.autocompleters.push(t)},d=function(e,t){if("object"==typeof e.autocompleters){var r=n.inArray(t,e.autocompleters);r>=0&&(e.autocompleters.splice(r,1),d(e,t))}},f=function(e){var t=o.getPersistencyId(e,e.options.persistent);if(t){var r=a.storage.get(t);r&&e.setValue(r)}l.drawButtons(e),e.on("blur",function(e,t){l.storeQuery(e)}),e.on("change",function(e,t){v(e),l.updateQueryButton(e),l.positionButtons(e)}),e.on("changes",function(){v(e),l.updateQueryButton(e),l.positionButtons(e)}),e.on("cursorActivity",function(e,t){g(e)}),e.prevQueryValid=!1,v(e),l.positionButtons(e),n(e.getWrapperElement()).on("mouseenter",".cm-atom",function(){var t=n(this).text();n(e.getWrapperElement()).find(".cm-atom").filter(function(){return n(this).text()===t}).addClass("matchingVar")}).on("mouseleave",".cm-atom",function(){n(e.getWrapperElement()).find(".matchingVar").removeClass("matchingVar")}),e.options.consumeShareLink&&(e.options.consumeShareLink(e,h()),window.addEventListener("hashchange",function(){e.options.consumeShareLink(e,h())})),e.options.collapsePrefixesOnLoad&&e.collapsePrefixes(!0)},h=function(){var e=null;return window.location.hash.length>1&&(e=n.deparam(location.href.split("#")[1])),e&&"query"in e||!(window.location.search.length>1)||(e=n.deparam(window.location.search.substring(1))),e},g=function(e){e.cursor=n(".CodeMirror-cursor"),e.buttons&&e.buttons.is(":visible")&&e.cursor.length>0&&(o.elementsOverlap(e.cursor,e.buttons)?e.buttons.find("svg").attr("opacity","0.2"):e.buttons.find("svg").attr("opacity","1.0"))},v=function(e,t){e.queryValid=!0,e.clearGutter("gutterErrorBar");for(var i=null,o=0;o<e.lineCount();++o){var l=!1;e.prevQueryValid||(l=!0);var u=e.getTokenAt({line:o,ch:e.getLine(o).length},l),i=u.state;if(e.queryType=i.queryType,0==i.OK){if(!e.options.syntaxErrorCheck)return void n(e.getWrapperElement).find(".sp-error").css("color","black");var c=a.svg.getElement(s.warning);i.errorMsg?r(246)(e,c,function(){return n("<div/>").text(u.state.errorMsg).html()}):i.possibleCurrent&&i.possibleCurrent.length>0&&r(246)(e,c,function(){var e=[];return i.possibleCurrent.forEach(function(t){e.push("<strong style='text-decoration:underline'>"+n("<div/>").text(t).html()+"</strong>")}),"This line is invalid. Expected: "+e.join(", ")}),c.style.marginTop="2px",c.style.marginLeft="2px",c.className="parseErrorIcon",e.setGutterMarker(o,"gutterErrorBar",c),e.queryValid=!1;break}}if(e.prevQueryValid=e.queryValid,t&&null!=i&&void 0!=i.stack){var p=i.stack,d=i.stack.length;d>1?e.queryValid=!1:1==d&&"solutionModifier"!=p[0]&&"?limitOffsetClauses"!=p[0]&&"?offsetClause"!=p[0]&&(e.queryValid=!1)}};n.extend(l,i),l.Autocompleters={},l.registerAutocompleter=function(e,t){l.Autocompleters[e]=t,p(l.defaults,e)},l.autoComplete=function(e){e.autocompleters.autoComplete(!1)},l.registerAutocompleter("prefixes",r(573)),l.registerAutocompleter("properties",r(574)),l.registerAutocompleter("classes",r(575)),l.registerAutocompleter("variables",r(576)),l.positionButtons=function(e){var t=n(e.getWrapperElement()).find(".CodeMirror-vscrollbar"),r=0;t.is(":visible")&&(r=t.outerWidth()),e.buttons.is(":visible")&&e.buttons.css("right",r+4)},l.createShareLink=function(e){var t={};return window.location.hash.length>1&&(t=n.deparam(window.location.hash.substring(1))),t.query=e.getValue(),t},l.getAsCurl=function(e,t){return r(577).createCurlString(e,t)},l.consumeShareLink=function(e,t){t&&t.query&&e.setValue(t.query)},l.drawButtons=function(e){if(e.buttons=n("<div class='yasqe_buttons'></div>").appendTo(n(e.getWrapperElement())),e.options.createShareLink){var t=n(a.svg.getElement(s.share));t.click(function(r){r.stopPropagation();var i=n("<div class='yasqe_sharePopup'></div>").appendTo(e.buttons);n("html").click(function(){i&&i.remove()}),i.click(function(e){e.stopPropagation()});var o=n("<input>").val(location.protocol+"//"+location.host+location.pathname+location.search+"#"+n.param(e.options.createShareLink(e)));o.focus(function(){var e=n(this);e.select(),e.mouseup(function(){return e.unbind("mouseup"),!1})}),i.empty().append(n("<div>",{class:"inputWrapper"}).append(o)),e.options.createShortLink&&(i.addClass("enableShort"),n("<button>Shorten</button>").addClass("yasqe_btn yasqe_btn-sm yasqe_btn-primary").click(function(){n(this).parent().find("button").attr("disabled","disabled"),e.options.createShortLink(o.val(),function(e,t){e?(o.remove(),i.find(".inputWrapper").append(n("<span>",{class:"shortlinkErr"}).text(e))):o.val(t).focus()})}).appendTo(i)),n("<button>CURL</button>").addClass("yasqe_btn yasqe_btn-sm yasqe_btn-primary").click(function(){n(this).parent().find("button").attr("disabled","disabled"),o.val(l.getAsCurl(e)).focus()}).appendTo(i);var a=t.position();i.css("top",a.top+t.outerHeight()+parseInt(i.css("padding-top"))+"px").css("left",a.left+t.outerWidth()-i.outerWidth()+"px"),o.focus()}).addClass("yasqe_share").attr("title","Share your query").appendTo(e.buttons)}var r=n("<div>",{class:"fullscreenToggleBtns"}).append(n(a.svg.getElement(s.fullscreen)).addClass("yasqe_fullscreenBtn").attr("title","Set editor full screen").click(function(){e.setOption("fullScreen",!0)})).append(n(a.svg.getElement(s.smallscreen)).addClass("yasqe_smallscreenBtn").attr("title","Set editor to normal size").click(function(){e.setOption("fullScreen",!1)}));e.buttons.append(r),e.options.sparql.showQueryButton&&(n("<div>",{class:"yasqe_queryButton"}).click(function(){n(this).hasClass("query_busy")?(e.xhr&&e.xhr.abort(),l.updateQueryButton(e)):e.query()}).appendTo(e.buttons),l.updateQueryButton(e))};var m={busy:"loader",valid:"query",error:"queryInvalid"};l.updateQueryButton=function(e,t){var r=n(e.getWrapperElement()).find(".yasqe_queryButton");0!=r.length&&(t||(t="valid",!1===e.queryValid&&(t="error")),t!=e.queryStatus&&(r.empty().removeClass(function(e,t){return t.split(" ").filter(function(e){return 0==e.indexOf("query_")}).join(" ")}),"busy"==t?(r.append(n("<div>",{class:"loader"})),e.queryStatus=t):"valid"!=t&&"error"!=t||(r.addClass("query_"+t),a.svg.draw(r,s[m[t]]),e.queryStatus=t)))},l.fromTextArea=function(e,t){t=u(t);var r=(n("<div>",{class:"yasqe"}).insertBefore(n(e)).append(n(e)),c(i.fromTextArea(e,t)));return f(r),r},l.storeQuery=function(e){var t=o.getPersistencyId(e,e.options.persistent);t&&a.storage.set(t,e.getValue(),"month",e.options.onQuotaExceeded)},l.commentLines=function(e){for(var t=e.getCursor(!0).line,r=e.getCursor(!1).line,n=Math.min(t,r),i=Math.max(t,r),o=!0,a=n;a<=i;a++){var s=e.getLine(a);if(0==s.length||"#"!=s.substring(0,1)){o=!1;break}}for(var a=n;a<=i;a++)o?e.replaceRange("",{line:a,ch:0},{line:a,ch:1}):e.replaceRange("#",{line:a,ch:0})},l.copyLineUp=function(e){var t=e.getCursor(),r=e.lineCount();e.replaceRange("\n",{line:r-1,ch:e.getLine(r-1).length});for(var n=r;n>t.line;n--){var i=e.getLine(n-1);e.replaceRange(i,{line:n,ch:0},{line:n,ch:e.getLine(n).length})}},l.copyLineDown=function(e){l.copyLineUp(e);var t=e.getCursor();t.line++,e.setCursor(t)},l.doAutoFormat=function(e){e.somethingSelected()||e.execCommand("selectAll");var t={line:e.getCursor(!1).line,ch:e.getSelection().length};y(e,e.getCursor(!0),t)};var y=function(e,t,r){var n=e.indexFromPos(t),i=e.indexFromPos(r),o=b(e.getValue(),n,i);e.operation(function(){e.replaceRange(o,t,r);for(var i=e.posFromIndex(n).line,a=e.posFromIndex(n+o.length).line,s=i;s<=a;s++)e.indentLine(s,"smart")})},b=function(e,t,r){e=e.substring(t,r);var o=[["keyword","ws","prefixed","ws","uri"],["keyword","ws","uri"]],a=["{",".",";"],s=["}"],l=function(e,t){for(var r=0;r<o.length;r++)if(p.valueOf().toString()==o[r].valueOf().toString())return 1;for(var r=0;r<a.length;r++)if(e==a[r])return 1;for(var r=0;r<s.length;r++)if(""!=n.trim(c)&&e==s[r])return-1;return 0},u="",c="",p=[];return i.runMode(e,"sparql11",function(e,t){p.push(t);var r=l(e);0!=r?(1==r?(u+=e+"\n",c=""):(u+="\n"+e,c=e),p=[]):(c+=e,u+=e),1==p.length&&"sp-ws"==p[0]&&(p=[])}),n.trim(u.replace(/\n\s*\n/g,"\n"))};r(247),r(578),l.$=n,l.version={CodeMirror:i.version,YASQE:r(579).version,jquery:n.fn.jquery,"yasgui-utils":a.version}},function(e,t,r){"use strict";function n(e){return{type:i,payload:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.verifyItem=n;var i=t.VERIFY_ITEM="VERIFY_ITEM"},function(e,t,r){var n=r(115),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},function(e,t){var r=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+n).toString(36))}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t){e.exports=!0},function(e,t,r){var n=r(25),i=r(284),o=r(118),a=r(116)("IE_PROTO"),s=function(){},l=function(){var e,t=r(111)("iframe"),n=o.length;for(t.style.display="none",r(170).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;n--;)delete l.prototype[o[n]];return l()};e.exports=Object.create||function(e,t){var r;return null!==e?(s.prototype=n(e),r=new s,s.prototype=null,r[a]=e):r=l(),void 0===t?r:i(r,t)}},function(e,t,r){var n=r(66),i=r(14)("toStringTag"),o="Arguments"==n(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,r,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=a(t=Object(e),i))?r:o?n(t):"Object"==(s=n(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t,r){var n=r(13),i=r(9),o=r(38);e.exports=function(e,t){var r=(i.Object||{})[e]||Object[e],a={};a[e]=t(r),n(n.S+n.F*o(function(){r(1)}),"Object",a)}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=r(289),o=n(i),a=r(291),s=n(a),l="function"==typeof s.default&&"symbol"==typeof o.default?function(e){return typeof e}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":typeof e};t.default="function"==typeof s.default&&"symbol"===l(o.default)?function(e){return void 0===e?"undefined":l(e)}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":void 0===e?"undefined":l(e)}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.PrunedRichNodeFromNode=t.RichNodeFromRichNode=t.FullRichNodeFromNode=void 0;var i=r(15),o=n(i),a=r(1),s=n(a),l=r(18),u=n(l),c=r(19),p=n(c),d=r(7);t.FullRichNodeFromNode=function(e){function t(e,r,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];(0,s.default)(this,t);var l=(0,u.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return l.label=r,l.description=n,l.types=i,l.sourceEndpoints=a,l}return(0,p.default)(t,e),t}(d.NodeFromNode),t.RichNodeFromRichNode=function(e){function t(e){(0,s.default)(this,t);var r=(0,u.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return r.label=e.label,r.description=e.description,r.types=e.types,r.sourceEndpoints=e.sourceEndpoints,r}return(0,p.default)(t,e),t}(d.NodeFromNode),t.PrunedRichNodeFromNode=function(e){function t(e){return(0,s.default)(this,t),(0,u.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e))}return(0,p.default)(t,e),t}(d.NodeFromNode)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.StateWorkerService=t.WorkerWorkerService=t.WorkerService=t.WorkerServiceConfiguration=void 0;var i=r(309),o=n(i),a=r(42),s=n(a),l=r(15),u=n(l),c=r(88),p=n(c),d=r(2),f=n(d),h=r(1),g=n(h),v=r(0),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(v);r(312);var y=r(160),b=(t.WorkerServiceConfiguration=function e(t,r,n){(0,g.default)(this,e),this.appName=t,this.workerThreads=r,this.importScripts=n},t.WorkerService=function(){function e(t,r,n,i,o,a){var s=this;(0,g.default)(this,e),this.workerServicePrototypeMappingConfiguration=r,this.$q=o,this.$ngRedux=a,this.currentWorker=0,this.deferreds=[],this.oldState=new y.BackendRootState,a.subscribe(function(){var t=(0,y.convertToBackendState)(s.$ngRedux.getState(),s.oldState);null!==t&&(s.oldState=t,e.savePrototypes(t),s.callAll("stateWorkerService","setState",[t]))});var l=i.location.protocol+"//"+i.location.host,u=t.importScripts.map(function(e){return 0!==e.indexOf("http")?l+(0!==e.indexOf("/")?i.location.pathname:"")+e:e}),c=i.URL.createObjectURL(new Blob([e.workerTemplate.replace(/<APP_NAME>/g,t.appName).replace(/<IMPORT_SCRIPTS>/g,u.join("','"))],{type:"application/javascript"}));this.workers=[];for(var p=0;p<t.workerThreads;p++)this.workers.push(new Worker(c)),this.workers[p].addEventListener("message",function(e){var t=e.data.event;if("broadcast"===t)n.$broadcast(e.data.name,s.restorePrototypes(e.data.args)),n.$apply();else{var r=s.deferreds[e.data.id];r&&("success"===t?(delete s.deferreds[e.data.id],r.resolve(s.restorePrototypes(e.data.data))):"failure"===t?(delete s.deferreds[e.data.id],r.reject(s.restorePrototypes(e.data.data))):r.notify(s.restorePrototypes(e.data.data)))}})}return e.$inject=["workerServiceConfiguration","workerServicePrototypeMappingConfiguration","$rootScope","$window","$q","$ngRedux"],(0,f.default)(e,[{key:"$broadcast",value:function(t,r){this.workers.forEach(function(n){return n.postMessage({name:t,args:e.savePrototypes(r)})})}},{key:"callAll",value:function(t,r){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments[3],a=this.$q.defer();this.deferreds.push(a);var s=this.deferreds.length-1,l={id:s,service:t,method:r,args:e.savePrototypes(i)};return o&&o.then(function(){n.workers.forEach(function(e){return e.postMessage({id:s,cancel:!0})}),delete n.deferreds[s]}),this.workers.forEach(function(e){return e.postMessage(l)}),a.promise}},{key:"call",value:function(t,r){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments[3],a=this.$q.defer();this.deferreds.push(a);var s=this.deferreds.length-1,l=this.workers[this.currentWorker];return this.currentWorker=(this.currentWorker+1)%this.workers.length,o&&o.then(function(){l.postMessage({id:s,cancel:!0}),delete n.deferreds[s]}),l.postMessage({id:s,service:t,method:r,args:e.savePrototypes(i)}),a.promise}},{key:"restorePrototypes",value:function(t){return this.restorePrototypesInternal(t),e.stripMarks(t),t}},{key:"restorePrototypesInternal",value:function(e){var t=this;if(e&&!e.__mark&&"object"===(void 0===e?"undefined":(0,p.default)(e)))if(e.__mark=!0,e instanceof Array)e.forEach(function(e){return t.restorePrototypesInternal(e)});else{if(e.__className){var r=this.workerServicePrototypeMappingConfiguration[e.__className];if(!r)throw"Unknown prototype "+e.__className;e.__proto__=r,delete e.__className}for(var n in e)e.hasOwnProperty(n)&&this.restorePrototypesInternal(e[n])}}}],[{key:"stripMarks",value:function(t){if(t&&t.__mark&&"object"===(void 0===t?"undefined":(0,p.default)(t)))if(delete t.__mark,t instanceof Array)t.forEach(function(t){return e.stripMarks(t)});else for(var r in t)t.hasOwnProperty(r)&&e.stripMarks(t[r])}},{key:"stripPrototypes",value:function(t){if(t&&t.__className&&"object"===(void 0===t?"undefined":(0,p.default)(t)))if(delete t.__className,t instanceof Array)t.forEach(function(t){return e.stripPrototypes(t)});else for(var r in t)t.hasOwnProperty(r)&&e.stripPrototypes(t[r])}},{key:"savePrototypes",value:function(t){return e.stripPrototypes(t),this.savePrototypesInternal(t),t}},{key:"savePrototypesInternal",value:function(t){if(t&&!t.__className&&"object"===(void 0===t?"undefined":(0,p.default)(t)))if(t instanceof Array)t.forEach(function(t){return e.savePrototypesInternal(t)});else{if(t.constructor.__name||"Object"!==t.constructor.name){var r=(0,u.default)(t);e:for(;r!==Object.prototype;){var n=!0,i=!1,a=void 0;try{for(var l,c=(0,s.default)((0,o.default)(r));!(n=(l=c.next()).done);n=!0){var d=l.value;if("constructor"!==d&&"function"==typeof t.__proto__[d]){t.__className=t.constructor.__name?t.constructor.__name:t.constructor.name;break e}}}catch(e){i=!0,a=e}finally{try{!n&&c.return&&c.return()}finally{if(i)throw a}}r=(0,u.default)(r)}t.__className||(t.__className="Object")}for(var f in t)t.hasOwnProperty(f)&&e.savePrototypesInternal(t[f])}}}]),e}());b.workerTemplate="\n    var window = self\n    window.history = {}\n    window.Node = function () {}\n    //self.setImmediate = function(fn) { return window.setTimeout(fn, 0) }\n    window.document = {\n      readyState: 'complete',\n      cookie: '',\n      querySelector: function (selector) {\n        if (selector=='html') return { innerHTML: '', getAttribute: function() {}} // angular-hot-loader patch\n      },\n      addEventListener: function() {},\n      createElement: function() {\n        return {\n          pathname: '',\n          setAttribute: function(key, value) {}\n        };\n      },\n    };\n    importScripts('<IMPORT_SCRIPTS>')\n    window.angular.module('<APP_NAME>').run(['workerWorkerService', function(workerWorkerService) {\n      self.addEventListener('message', function(e) { workerWorkerService.onMessage(e.data) })\n    }])\n    window.angular.bootstrap(null, ['<APP_NAME>'])\n    window = undefined\n    self.history = undefined\n    self.Node = undefined\n    setTimeout(function() { // angular init needs this\n      self.document = undefined\n    }, 0)\n  ";var E=t.WorkerWorkerService=function(){function e(t,r,n,i){(0,g.default)(this,e),this.workerServicePrototypeMappingConfiguration=t,this.$injector=r,this.$q=n,this.$rootScope=i,this.cancellers=[]}return e.$inject=["workerServicePrototypeMappingConfiguration","$injector","$q","$rootScope"],(0,f.default)(e,[{key:"$broadcast",value:function(e,t){try{self.postMessage({event:"broadcast",name:e,args:b.savePrototypes(t)})}catch(e){throw console.log(t,e),e}}},{key:"onMessage",value:function(t){var r=this;if(void 0===t.id)this.$rootScope.$broadcast(t.name,this.restorePrototypes(t.args)),this.$rootScope.$apply();else if(t.cancel){var n=this.cancellers[t.id];delete this.cancellers[t.id],n&&n.resolve()}else{var i=this.$injector.get(t.service),o=this.$q.defer();this.cancellers[t.id]=o;var a=i[t.method].apply(i,this.restorePrototypes(t.args).concat(o.promise));if(!a||!a.then){var s=this.$q.defer();s.resolve(a),a=s.promise}a.then(function(e){delete r.cancellers[t.id],self.postMessage({event:"success",id:t.id,data:b.savePrototypes(e)})},function(n){if(delete r.cancellers[t.id],n instanceof Error)throw self.postMessage({event:"failure",id:t.id,data:{name:n.name,message:n.message,stack:n.stack}}),n;self.postMessage({event:"failure",id:t.id,data:b.savePrototypes(e.stripFunctions(n))})},function(e){return self.postMessage({event:"update",id:t.id,data:b.savePrototypes(e)})})}}},{key:"restorePrototypes",value:function(e){return this.restorePrototypesInternal(e),b.stripMarks(e),e}},{key:"restorePrototypesInternal",value:function(e){var t=this;if(e&&!e.__mark&&"object"===(void 0===e?"undefined":(0,p.default)(e)))if(e.__mark=!0,e instanceof Array)e.forEach(function(e){return t.restorePrototypesInternal(e)});else{if(e.__className){var r=this.workerServicePrototypeMappingConfiguration[e.__className];if(!r)throw"Unknown prototype "+e.__className;e.__proto__=r,delete e.__className}for(var n in e)e.hasOwnProperty(n)&&this.restorePrototypesInternal(e[n])}}}],[{key:"stripFunctions",value:function(t){var r={};for(var n in t)"object"===(0,p.default)(t[n])?r[n]=e.stripFunctions(t[n]):"function"!=typeof t[n]&&(r[n]=t[n]);return r}}]),e}(),x=t.StateWorkerService=function(){function e(){(0,g.default)(this,e)}return(0,f.default)(e,[{key:"setState",value:function(e){this.state=e}}]),e}();m.module("fibra.services.worker-service",["fibra.services.worker-service-prototype-mapping-configuration"]).config(["$provide",function(e){e.service("stateWorkerService",x),e.service("workerService",b),e.service("workerWorkerService",E)}])},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.PrimaryEndpointConfiguration=void 0;var i=r(15),o=n(i),a=r(1),s=n(a),l=r(2),u=n(l),c=r(18),p=n(c),d=r(69),f=n(d),h=r(19),g=n(h),v=r(44),m=r(70),y=r(21),b=r(71),E=r(55),x=r(7),S=r(43),C=t.PrimaryEndpointConfiguration=function(e){function t(){(0,s.default)(this,t);var e=(0,p.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments));return e.compatibleEndpoints=[],e.autocompletionQuery=m.SparqlAutocompleteService.defaultMatchQuery,e.itemQuery=y.SparqlItemService.getLocalItemPropertiesQuery,e.deleteItemQuery=y.SparqlItemService.deleteItemQuery,e.treeQuery=b.SparqlTreeService.getClassTreeQuery,e.classQuery=E.DataModel.classQuery,e.propertyQuery=E.DataModel.propertyQuery,e}return(0,g.default)(t,e),(0,u.default)(t,[{key:"toTurtle",value:function(e,r){if(!e.has(this.id)){r.fibra=x.FIBRA.ns,e.set(this.id,"<"+this.id+"> a fibra:PrimaryEndpointConfiguration ;"),(0,f.default)(t.prototype.__proto__||(0,o.default)(t.prototype),"toTurtle",this).call(this,e,r);var n=e.get(this.id),i=this.compatibleEndpoints.filter(function(e){return e});0!==i.length&&(n+="\nfibra:compatibleEndpoint ",i.forEach(function(e){return n=n+"<"+e+">, "}),n=n.substring(0,n.length-2)+" ;"),n=n+"\nfibra:autocompletionQuery "+S.SparqlService.stringToSPARQLString(this.autocompletionQuery)+" ;\nfibra:treeQuery "+S.SparqlService.stringToSPARQLString(this.treeQuery)+" ;\nfibra:propertyQuery "+S.SparqlService.stringToSPARQLString(this.propertyQuery)+" ;\nfibra:classQuery "+S.SparqlService.stringToSPARQLString(this.classQuery)+" ;\nfibra:itemQuery "+S.SparqlService.stringToSPARQLString(this.itemQuery)+" ;\nfibra:deleteItemQuery "+S.SparqlService.stringToSPARQLString(this.deleteItemQuery)+" .",e.set(this.id,n)}}},{key:"copyToProject",value:function(e){var t=this.autocompletionQuery;t=e.graph?t.replace(/# STARTGRAPH/g,"GRAPH <"+e.graph+"> {").replace(/# ENDGRAPH/g,"}"):t.replace(/.*# STARTGRAPH\n/g,"").replace(/.*# ENDGRAPH\n/g,""),e.autocompletionQuery=t,t=this.itemQuery,t=e.graph?t.replace(/# STARTGRAPH/g,"GRAPH <"+e.graph+"> {").replace(/# ENDGRAPH/g,"}"):t.replace(/.*# STARTGRAPH\n/g,"").replace(/.*# ENDGRAPH\n/g,""),e.itemQuery=t,t=this.deleteItemQuery,t=e.graph?t.replace(/# STARTGRAPH/g,"GRAPH <"+e.graph+"> {").replace(/# ENDGRAPH/g,"}"):t.replace(/.*# STARTGRAPH\n/g,"").replace(/.*# ENDGRAPH\n/g,""),e.deleteItemQuery=t,t=this.treeQuery,t=e.graph?t.replace(/# STARTGRAPH/g,"GRAPH <"+e.graph+"> {").replace(/# ENDGRAPH/g,"}"):t.replace(/.*# STARTGRAPH\n/g,"").replace(/.*# ENDGRAPH\n/g,""),e.treeQuery=t,t=this.propertyQuery,t=e.graph?t.replace(/# STARTGRAPH/g,"GRAPH <"+e.graph+"> {").replace(/# ENDGRAPH/g,"}"):t.replace(/.*# STARTGRAPH\n/g,"").replace(/.*# ENDGRAPH\n/g,""),e.propertyQuery=t,t=this.classQuery,t=e.graph?t.replace(/# STARTGRAPH/g,"GRAPH <"+e.graph+"> {").replace(/# ENDGRAPH/g,"}"):t.replace(/.*# STARTGRAPH\n/g,"").replace(/.*# ENDGRAPH\n/g,""),e.classQuery=t}}]),t}(v.Citable);C.listPrimaryEndpointConfigurationsQuery="PREFIX fibra: <http://hdlab.stanford.edu/fibra/ontology#>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX dcterms: <http://purl.org/dc/terms/>\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nSELECT ?id ?labels ?descriptions ?compatibleEndpoints ?rightsHolders ?rightsHolders_labels ?rightsHolders_descriptions ?rightsHolders_url ?rightsHolders_order ?url ?autocompletionQuery ?itemQuery ?deleteItemQuery ?treeQuery ?properyQuery ?classQuery {\n# STARTGRAPH\n  ?id a fibra:PrimaryEndpointConfiguration .\n  { ?id skos:prefLabel ?labels }\n  UNION\n  { ?id dcterms:description ?descriptions }\n  UNION\n  { ?id fibra:compatibleEndpoint ?compatibleEndpoints }\n  UNION\n  {\n    ?id fibra:autocompletionQuery ?autocompletionQuery .\n    ?id fibra:itemQuery ?itemQuery .\n    ?id fibra:deleteItemQuery ?deleteItemQuery .\n    ?id fibra:treeQuery ?treeQuery .\n    ?id fibra:propertyQuery ?propertyQuery .\n    ?id fibra:classQuery ?classQuery .\n    OPTIONAL { ?id foaf:homepage ?url }\n  } UNION {\n    {\n      ?id dcterms:rightsHolder ?rightsHolders\n    } UNION {\n      ?id fibra:qualifiedAssertion ?qa .\n      ?qa rdf:predicate dcterms:rightsHolder .\n      ?qa rdf:object ?rightsHolders .\n      OPTIONAL { ?qa fibra:order ?rightsHolders_order }\n    }\n    {\n      ?rightsHolders skos:prefLabel ?rightsHolders_labels\n    } UNION {\n      ?rightsHolders foaf:homepage ?rightsHolders_url\n    } UNION {\n      ?rightsHolders dcterms:description ?rightsHolders_descriptions\n    }\n  }\n# ENDGRAPH\n}",C.primaryEndpointConfigurationQuery="PREFIX fibra: <http://hdlab.stanford.edu/fibra/ontology#>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX dcterms: <http://purl.org/dc/terms/>\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nSELECT ?labels ?descriptions ?compatibleEndpoints ?rightsHolders ?rightsHolders_labels ?rightsHolders_descriptions ?rightsHolders_url ?rightsHolders_order ?url ?autocompletionQuery ?itemQuery ?deleteItemQuery ?treeQuery ?properyQuery ?classQuery {\n# STARTGRAPH\n  { <ID> skos:prefLabel ?labels }\n  UNION\n  { <ID> dcterms:description ?descriptions }\n  UNION\n  { <ID> fibra:compatibleEndpoint ?compatibleEndpoints }\n  UNION\n  {\n    <ID> fibra:autocompletionQuery ?autocompletionQuery .\n    <ID> fibra:itemQuery ?itemQuery .\n    <ID> fibra:deleteItemQuery ?deleteItemQuery .\n    <ID> fibra:treeQuery ?treeQuery .\n    <ID> fibra:propertyQuery ?propertyQuery .\n    <ID> fibra:classQuery ?classQuery .\n    OPTIONAL { <ID> foaf:homepage ?url }\n  } UNION {\n    {\n      <ID> dcterms:rightsHolder ?rightsHolders\n    } UNION {\n      <ID> fibra:qualifiedAssertion ?qa .\n      <ID> rdf:predicate dcterms:rightsHolder .\n      <ID> rdf:object ?rightsHolders .\n      OPTIONAL { <ID> fibra:order ?rightsHolders_order }\n    }\n    {\n      ?rightsHolders skos:prefLabel ?rightsHolders_labels\n    } UNION {\n      ?rightsHolders foaf:homepage ?rightsHolders_url\n    } UNION {\n      ?rightsHolders dcterms:description ?rightsHolders_descriptions\n    }\n  }\n# ENDGRAPH\n}"},function(e,t,r){"use strict";function n(e,t){var r="";for(var n in e)r=r+"@prefix "+n+": <"+e[n]+"> .\n";return t.values().forEach(function(e){return r=r+e.substring(0,e.length-2)+" .\n\n"}),r}function i(e){var t={},r=new s.FMap;return e.toTurtle(r,t),n(t,r)}function o(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,r=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return l[255&e]+l[e>>8&255]+l[e>>16&255]+l[e>>24&255]+"-"+l[255&t]+l[t>>8&255]+"-"+l[t>>16&15|64]+l[t>>24&255]+"-"+l[63&r|128]+l[r>>8&255]+"-"+l[r>>16&255]+l[r>>24&255]+l[255&n]+l[n>>8&255]+l[n>>16&255]+l[n>>24&255]}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.reduce(function(e,t){return e.concat(Array.isArray(t)?a(t):t)},t)}Object.defineProperty(t,"__esModule",{value:!0}),t.toTurtle=n,t.citableToTurtle=i,t.UUID=o,t.flatten=a;for(var s=r(32),l=[],u=0;u<256;u++)l[u]=(u<16?"0":"")+u.toString(16)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectActionService=t.SET_ACTIVE_ITEM_COUNT=t.SET_FILTERED_ITEM_COUNT=t.SET_ALL_ITEM_COUNT=t.SET_PROJECT=void 0;var i=r(1),o=n(i),a=r(2),s=n(a),l=r(0),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(l),c=r(131),p=t.SET_PROJECT="SET_PROJECT",d=t.SET_ALL_ITEM_COUNT="SET_ALL_ITEM_COUNT",f=t.SET_FILTERED_ITEM_COUNT="SET_FILTERED_ITEM_COUNT",h=t.SET_ACTIVE_ITEM_COUNT="SET_ACTIVE_ITEM_COUNT",g=t.ProjectActionService=function(){function e(t,r){(0,o.default)(this,e),this.$ngRedux=t,this.projectService=r}return e.$inject=["$ngRedux","projectService"],(0,s.default)(e,[{key:"setProject",value:function(e,t,r){var n=this;return this.projectService.loadProject({sparqlEndpoint:t,graph:r},e,!0).then(function(e){return e.archiveEndpoints.forEach(function(t){n.$ngRedux.dispatch({type:c.ADD_SOURCE,payload:{id:t.id,labels:t.labels,classes:e.dataModel.classMap.values()}})}),e.authorityEndpoints.forEach(function(t){n.$ngRedux.dispatch({type:c.ADD_SOURCE,payload:{id:t.id,labels:t.labels,classes:e.dataModel.classMap.values()}})}),n.$ngRedux.dispatch({type:p,payload:e})})}},{key:"setAllItemCount",value:function(e){return this.$ngRedux.dispatch({type:d,payload:e})}},{key:"setFilteredItemCount",value:function(e){return this.$ngRedux.dispatch({type:f,payload:e})}},{key:"setActiveItemCount",value:function(e){return this.$ngRedux.dispatch({type:h,payload:e})}}]),e}();u.module("fibra.actions.project",[]).config(["$provide",function(e){e.service("projectActionService",g)}])},function(e,t,r){"use strict";t.__esModule=!0;var n=r(175),i=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(e,t,r){return t in e?(0,i.default)(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(3)),n(r(16)),n(r(96)),n(r(6)),n(r(5)),n(r(137)),n(r(33)),n(r(34))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.text=e,this.glob=e.split(".");var t=this.text.split(".").map(function(e){return"**"===e?"(?:|(?:\\.[^.]*)*)":"*"===e?"\\.[^.]*":"\\."+e}).join("");this.regexp=new RegExp("^"+t+"$")}return e.prototype.matches=function(e){return this.regexp.test("."+e)},e.is=function(e){return!!/[!,*]+/.exec(e)},e.fromString=function(t){return e.is(t)?new e(t):null},e}();t.Glob=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(34),i=r(16),o=r(3),a=r(5),s=r(6),l=r(56),u=r(74),c=r(138),p=r(186),d=r(98),f=r(46),h=r(57),g=r(75),v=r(99),m=s.prop("self"),y=function(){function e(e,t,r){var n=this;if(this._deferred=i.services.$q.defer(),this.promise=this._deferred.promise,this._registeredHooks={},this._hookBuilder=new p.HookBuilder(this),this.isActive=function(){return n.router.globals.transition===n},this.router=r,this._targetState=t,!t.valid())throw new Error(t.error());this._options=o.extend({current:s.val(this)},t.options()),this.$id=r.transitionService._transitionCount++;var a=d.PathUtils.buildToPath(e,t);this._treeChanges=d.PathUtils.treeChanges(e,a,this._options.reloadState),this.createTransitionHookRegFns();var c=this._hookBuilder.buildHooksForPhase(l.TransitionHookPhase.CREATE);u.TransitionHook.invokeHooks(c,function(){return null}),this.applyViewConfigs(r)}return e.prototype.onBefore=function(e,t,r){},e.prototype.onStart=function(e,t,r){},e.prototype.onExit=function(e,t,r){},e.prototype.onRetain=function(e,t,r){},e.prototype.onEnter=function(e,t,r){},e.prototype.onFinish=function(e,t,r){},e.prototype.onSuccess=function(e,t,r){},e.prototype.onError=function(e,t,r){},e.prototype.createTransitionHookRegFns=function(){var e=this;this.router.transitionService._pluginapi._getEvents().filter(function(e){return e.hookPhase!==l.TransitionHookPhase.CREATE}).forEach(function(t){return c.makeEvent(e,e.router.transitionService,t)})},e.prototype.getHooks=function(e){return this._registeredHooks[e]},e.prototype.applyViewConfigs=function(e){var t=this._treeChanges.entering.map(function(e){return e.state});d.PathUtils.applyViewConfigs(e.transitionService.$view,this._treeChanges.to,t)},e.prototype.$from=function(){return o.tail(this._treeChanges.from).state},e.prototype.$to=function(){return o.tail(this._treeChanges.to).state},e.prototype.from=function(){return this.$from().self},e.prototype.to=function(){return this.$to().self},e.prototype.targetState=function(){return this._targetState},e.prototype.is=function(t){return t instanceof e?this.is({to:t.$to().name,from:t.$from().name}):!(t.to&&!c.matchState(this.$to(),t.to)||t.from&&!c.matchState(this.$from(),t.from))},e.prototype.params=function(e){return void 0===e&&(e="to"),Object.freeze(this._treeChanges[e].map(s.prop("paramValues")).reduce(o.mergeR,{}))},e.prototype.injector=function(e,t){void 0===t&&(t="to");var r=this._treeChanges[t];return e&&(r=d.PathUtils.subPath(r,function(t){return t.state===e||t.state.name===e})),new v.ResolveContext(r).injector()},e.prototype.getResolveTokens=function(e){return void 0===e&&(e="to"),new v.ResolveContext(this._treeChanges[e]).getTokens()},e.prototype.addResolvable=function(e,t){void 0===t&&(t=""),e=s.is(g.Resolvable)(e)?e:new g.Resolvable(e);var r="string"==typeof t?t:t.name,n=this._treeChanges.to,i=o.find(n,function(e){return e.state.name===r});new v.ResolveContext(n).addResolvables([e],i.state)},e.prototype.redirectedFrom=function(){return this._options.redirectedFrom||null},e.prototype.originalTransition=function(){var e=this.redirectedFrom();return e&&e.originalTransition()||this},e.prototype.options=function(){return this._options},e.prototype.entering=function(){return o.map(this._treeChanges.entering,s.prop("state")).map(m)},e.prototype.exiting=function(){return o.map(this._treeChanges.exiting,s.prop("state")).map(m).reverse()},e.prototype.retained=function(){return o.map(this._treeChanges.retained,s.prop("state")).map(m)},e.prototype.views=function(e,t){void 0===e&&(e="entering");var r=this._treeChanges[e];return r=t?r.filter(s.propEq("state",t)):r,r.map(s.prop("views")).filter(o.identity).reduce(o.unnestR,[])},e.prototype.treeChanges=function(e){return e?this._treeChanges[e]:this._treeChanges},e.prototype.redirect=function(e){for(var t=1,r=this;null!=(r=r.redirectedFrom());)if(++t>20)throw new Error("Too many consecutive Transition redirects (20+)");var n={redirectedFrom:this,source:"redirect"};"url"===this.options().source&&!1!==e.options().location&&(n.location="replace");var i=o.extend({},this.options(),e.options(),n);e=new f.TargetState(e.identifier(),e.$state(),e.params(),i);var a=this.router.transitionService.create(this._treeChanges.from,e),l=this._treeChanges.entering,u=a._treeChanges.entering;return d.PathUtils.matching(u,l,d.PathUtils.nonDynamicParams).filter(s.not(function(e){return function(t){return e&&t.state.includes[e.name]}}(e.options().reloadState))).forEach(function(e,t){e.resolvables=l[t].resolvables}),a},e.prototype._changedParams=function(){var e=this._treeChanges;if(!this._options.reload&&!e.exiting.length&&!e.entering.length&&e.to.length===e.from.length){if(!o.arrayTuples(e.to,e.from).map(function(e){return e[0].state!==e[1].state}).reduce(o.anyTrueR,!1)){var t=e.to.map(function(e){return e.paramSchema}),r=[e.to,e.from].map(function(e){return e.map(function(e){return e.paramValues})}),n=r[0],i=r[1];return o.arrayTuples(t,n,i).map(function(e){var t=e[0],r=e[1],n=e[2];return h.Param.changed(t,r,n)}).reduce(o.unnestR,[])}}},e.prototype.dynamic=function(){var e=this._changedParams();return!!e&&e.map(function(e){return e.dynamic}).reduce(o.anyTrueR,!1)},e.prototype.ignored=function(){return!!this._ignoredReason()},e.prototype._ignoredReason=function(){var e=this.router.globals.transition,t=this._options.reloadState,r=function(e,r){if(e.length!==r.length)return!1;var n=d.PathUtils.matching(e,r);return e.length===n.filter(function(e){return!t||!e.state.includes[t.name]}).length},n=this.treeChanges(),i=e&&e.treeChanges();return i&&r(i.to,n.to)&&r(i.exiting,n.exiting)?"SameAsPending":0===n.exiting.length&&0===n.entering.length&&r(n.from,n.to)?"SameAsCurrent":void 0},e.prototype.run=function(){var e=this,t=u.TransitionHook.runAllHooks,r=function(t){return e._hookBuilder.buildHooksForPhase(t)},o=function(){n.trace.traceSuccess(e.$to(),e),e.success=!0,e._deferred.resolve(e.to()),t(r(l.TransitionHookPhase.SUCCESS))},a=function(i){n.trace.traceError(i,e),e.success=!1,e._deferred.reject(i),e._error=i,t(r(l.TransitionHookPhase.ERROR))},s=function(){var e=r(l.TransitionHookPhase.RUN),t=function(){return i.services.$q.when(void 0)};return u.TransitionHook.invokeHooks(e,t)},c=function(){var t=e.router.globals;return t.lastStartedTransitionId=e.$id,t.transition=e,t.transitionHistory.enqueue(e),n.trace.traceTransitionStart(e),i.services.$q.when(void 0)},p=r(l.TransitionHookPhase.BEFORE);return u.TransitionHook.invokeHooks(p,c).then(s).then(o,a),this.promise},e.prototype.valid=function(){return!this.error()||void 0!==this.success},e.prototype.abort=function(){a.isUndefined(this.success)&&(this._aborted=!0)},e.prototype.error=function(){var e=this.$to();return e.self.abstract?"Cannot transition to abstract state '"+e.name+"'":h.Param.validates(e.parameters(),this.params())?!1===this.success?this._error:void 0:"Param values not valid for state '"+e.name+"'"},e.prototype.toString=function(){var e=this.from(),t=this.to(),r=function(e){return null!==e["#"]&&void 0!==e["#"]?e:o.omit(e,["#"])};return"Transition#"+this.$id+"( '"+(a.isObject(e)?e.name:e)+"'"+o.toJson(r(this._treeChanges.from.map(s.prop("paramValues")).reduce(o.mergeR,{})))+" -> "+(this.valid()?"":"(X) ")+"'"+(a.isObject(t)?t.name:t)+"'"+o.toJson(r(this.params()))+" )"},e}();y.diToken=y,t.Transition=y},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(6),o=r(46),a=r(139),s=function(){function e(){}return e.makeTargetState=function(e){var t=n.tail(e).state;return new o.TargetState(t,t,e.map(i.prop("paramValues")).reduce(n.mergeR,{}))},e.buildPath=function(e){var t=e.params();return e.$state().path.map(function(e){return new a.PathNode(e).applyRawParams(t)})},e.buildToPath=function(t,r){var n=e.buildPath(r);return r.options().inherit?e.inheritParams(t,n,Object.keys(r.params())):n},e.applyViewConfigs=function(t,r,i){r.filter(function(e){return n.inArray(i,e.state)}).forEach(function(i){var o=n.values(i.state.views||{}),a=e.subPath(r,function(e){return e===i}),s=o.map(function(e){return t.createViewConfig(a,e)});i.views=s.reduce(n.unnestR,[])})},e.inheritParams=function(e,t,r){function o(e,t){var r=n.find(e,i.propEq("state",t));return n.extend({},r&&r.paramValues)}function s(t){var i=n.extend({},t&&t.paramValues),s=n.pick(i,r);i=n.omit(i,r);var u=n.omit(o(e,t.state)||{},l),c=n.extend(i,u,s);return new a.PathNode(t.state).applyRawParams(c)}void 0===r&&(r=[]);var l=e.map(function(e){return e.paramSchema}).reduce(n.unnestR,[]).filter(function(e){return!e.inherit}).map(i.prop("id"));return t.map(s)},e.treeChanges=function(t,r,n){function i(e,t){var n=a.PathNode.clone(e);return n.paramValues=r[t].paramValues,n}for(var o=0,s=Math.min(t.length,r.length);o<s&&t[o].state!==n&&function(t,r){return t.equals(r,e.nonDynamicParams)}(t[o],r[o]);)o++;var l,u,c,p,d;l=t,u=l.slice(0,o),c=l.slice(o);var f=u.map(i);return p=r.slice(o),d=f.concat(p),{from:l,to:d,retained:u,exiting:c,entering:p}},e.matching=function(e,t,r){var i=!1;return n.arrayTuples(e,t).reduce(function(e,t){var n=t[0],o=t[1];return i=i||!n.equals(o,r),i?e:e.concat(n)},[])},e.equals=function(t,r,n){return t.length===r.length&&e.matching(t,r,n).length===t.length},e.subPath=function(e,t){var r=n.find(e,t),i=e.indexOf(r);return-1===i?void 0:e.slice(0,i+1)},e}();s.nonDynamicParams=function(e){return e.state.parameters({inherit:!1}).filter(function(e){return!e.dynamic})},s.paramValues=function(e){return e.reduce(function(e,t){return n.extend(e,t.paramValues)},{})},t.PathUtils=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(6),o=r(34),a=r(16),s=r(187),l=r(75),u=r(98),c=r(33),p=s.resolvePolicies.when,d=[p.EAGER,p.LAZY],f=[p.EAGER];t.NATIVE_INJECTOR_TOKEN="Native Injector";var h=function(){function e(e){this._path=e}return e.prototype.getTokens=function(){return this._path.reduce(function(e,t){return e.concat(t.resolvables.map(function(e){return e.token}))},[]).reduce(n.uniqR,[])},e.prototype.getResolvable=function(e){var t=this._path.map(function(e){return e.resolvables}).reduce(n.unnestR,[]).filter(function(t){return t.token===e});return n.tail(t)},e.prototype.getPolicy=function(e){var t=this.findNode(e);return e.getPolicy(t.state)},e.prototype.subContext=function(t){return new e(u.PathUtils.subPath(this._path,function(e){return e.state===t}))},e.prototype.addResolvables=function(e,t){var r=n.find(this._path,i.propEq("state",t)),o=e.map(function(e){return e.token});r.resolvables=r.resolvables.filter(function(e){return-1===o.indexOf(e.token)}).concat(e)},e.prototype.resolvePath=function(e,t){var r=this;void 0===e&&(e="LAZY");var l=n.inArray(d,e)?e:"LAZY",u=l===s.resolvePolicies.when.EAGER?f:d;o.trace.traceResolvePath(this._path,e,t);var c=function(e,t){return function(i){return n.inArray(e,r.getPolicy(i)[t])}},p=this._path.reduce(function(e,n){var o=n.resolvables.filter(c(u,"when")),a=o.filter(c(["NOWAIT"],"async")),s=o.filter(i.not(c(["NOWAIT"],"async"))),l=r.subContext(n.state),p=function(e){return e.get(l,t).then(function(t){return{token:e.token,value:t}})};return a.forEach(p),e.concat(s.map(p))},[]);return a.services.$q.all(p)},e.prototype.injector=function(){return this._injector||(this._injector=new g(this))},e.prototype.findNode=function(e){return n.find(this._path,function(t){return n.inArray(t.resolvables,e)})},e.prototype.getDependencies=function(e){var t=this,r=this.findNode(e),i=u.PathUtils.subPath(this._path,function(e){return e===r})||this._path,o=i.reduce(function(e,t){return e.concat(t.resolvables)},[]).filter(function(t){return t!==e}),a=function(e){var r=o.filter(function(t){return t.token===e});if(r.length)return n.tail(r);var i=t.injector().getNative(e);if(!i)throw new Error("Could not find Dependency Injection token: "+c.stringify(e));return new l.Resolvable(e,function(){return i},[],i)};return e.deps.map(a)},e}();t.ResolveContext=h;var g=function(){function e(e){this.context=e,this.native=this.get(t.NATIVE_INJECTOR_TOKEN)||a.services.$injector}return e.prototype.get=function(e){var t=this.context.getResolvable(e);if(t){if("NOWAIT"===this.context.getPolicy(t).async)return t.get(this.context);if(!t.resolved)throw new Error("Resolvable async .get() not complete:"+c.stringify(t.token));return t.data}return this.native&&this.native.get(e)},e.prototype.getAsync=function(e){var t=this.context.getResolvable(e);return t?t.get(this.context):a.services.$q.when(this.native.get(e))},e.prototype.getNative=function(e){return this.native&&this.native.get(e)},e}()},function(e,t,r){"use strict";function n(e,t){var r=["",""],n=e.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!t)return n;switch(t.squash){case!1:r=["(",")"+(t.isOptional?"?":"")];break;case!0:n=n.replace(/\/$/,""),r=["(?:/(",")|/)?"];break;default:r=["("+t.squash+"|",")?"]}return n+r[0]+t.type.pattern.source+r[1]}Object.defineProperty(t,"__esModule",{value:!0});var i=r(3),o=r(6),a=r(5),s=r(57),l=r(33),u=function(e,t,r){return e[t]=e[t]||r()},c=l.splitOnDelim("/"),p=function(){function e(t,r,a,s){var l=this;this.config=s,this._cache={path:[this]},this._children=[],this._params=[],this._segments=[],this._compiled=[],this.pattern=t,this.config=i.defaults(this.config,{params:{},strict:!0,caseInsensitive:!1,paramMap:i.identity});for(var u,c,p,d=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,f=/([:]?)([\w\[\].-]+)|\{([\w\[\].-]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,h=0,g=[],v=function(r){if(!e.nameValidator.test(r))throw new Error("Invalid parameter name '"+r+"' in pattern '"+t+"'");if(i.find(l._params,o.propEq("id",r)))throw new Error("Duplicate parameter name '"+r+"' in pattern '"+t+"'")},m=function(e,n){var o=e[2]||e[3],a=n?e[4]:e[4]||("*"===e[1]?".*":null);return{id:o,regexp:a,cfg:l.config.params[o],segment:t.substring(h,e.index),type:a?r.type(a)||function(e){return i.inherit(r.type(n?"query":"path"),{pattern:new RegExp(e,l.config.caseInsensitive?"i":void 0)})}(a):null}};(u=d.exec(t))&&(c=m(u,!1),!(c.segment.indexOf("?")>=0));)v(c.id),this._params.push(a.fromPath(c.id,c.type,this.config.paramMap(c.cfg,!1))),this._segments.push(c.segment),g.push([c.segment,i.tail(this._params)]),h=d.lastIndex;p=t.substring(h);var y=p.indexOf("?");if(y>=0){var b=p.substring(y);if(p=p.substring(0,y),b.length>0)for(h=0;u=f.exec(b);)c=m(u,!0),v(c.id),this._params.push(a.fromSearch(c.id,c.type,this.config.paramMap(c.cfg,!0))),h=d.lastIndex}this._segments.push(p),this._compiled=g.map(function(e){return n.apply(null,e)}).concat(n(p))}return e.prototype.append=function(e){return this._children.push(e),e._cache={path:this._cache.path.concat(e),parent:this,pattern:null},e},e.prototype.isRoot=function(){return this._cache.path[0]===this},e.prototype.toString=function(){return this.pattern},e.prototype.exec=function(e,t,r,n){var s=this;void 0===t&&(t={}),void 0===n&&(n={});var l=u(this._cache,"pattern",function(){return new RegExp(["^",i.unnest(s._cache.path.map(o.prop("_compiled"))).join(""),!1===s.config.strict?"/?":"","$"].join(""),s.config.caseInsensitive?"i":void 0)}).exec(e);if(!l)return null;var c=this.parameters(),p=c.filter(function(e){return!e.isSearch()}),d=c.filter(function(e){return e.isSearch()}),f=this._cache.path.map(function(e){return e._segments.length-1}).reduce(function(e,t){return e+t}),h={};if(f!==l.length-1)throw new Error("Unbalanced capture group in route '"+this.pattern+"'");for(var g=0;g<f;g++){for(var v=p[g],m=l[g+1],y=0;y<v.replace.length;y++)v.replace[y].from===m&&(m=v.replace[y].to);m&&!0===v.array&&(m=function(e){var t=function(e){return e.split("").reverse().join("")},r=function(e){return e.replace(/\\-/g,"-")},n=t(e).split(/-(?!\\)/),o=i.map(n,t);return i.map(o,r).reverse()}(m)),a.isDefined(m)&&(m=v.type.decode(m)),h[v.id]=v.value(m)}return d.forEach(function(e){for(var r=t[e.id],n=0;n<e.replace.length;n++)e.replace[n].from===r&&(r=e.replace[n].to);a.isDefined(r)&&(r=e.type.decode(r)),h[e.id]=e.value(r)}),r&&(h["#"]=r),h},e.prototype.parameters=function(e){return void 0===e&&(e={}),!1===e.inherit?this._params:i.unnest(this._cache.path.map(function(e){return e._params}))},e.prototype.parameter=function(e,t){var r=this;void 0===t&&(t={});var n=this._cache.parent;return function(){for(var t=0,n=r._params;t<n.length;t++){var i=n[t];if(i.id===e)return i}}()||!1!==t.inherit&&n&&n.parameter(e,t)||null},e.prototype.validates=function(e){var t=function(e,t){return!e||e.validates(t)};return e=e||{},this.parameters().filter(function(t){return e.hasOwnProperty(t.id)}).map(function(r){return t(r,e[r.id])}).reduce(i.allTrueR,!0)},e.prototype.format=function(t){function r(e){var r=e.value(t[e.id]),n=e.validates(r),i=e.isDefaultValue(r);return{param:e,value:r,isValid:n,isDefaultValue:i,squash:!!i&&e.squash,encoded:e.type.encode(r)}}void 0===t&&(t={});var n=this._cache.path,o=n.map(e.pathSegmentsAndParams).reduce(i.unnestR,[]).map(function(e){return a.isString(e)?e:r(e)}),s=n.map(e.queryParams).reduce(i.unnestR,[]).map(r),l=function(e){return!1===e.isValid};if(o.concat(s).filter(l).length)return null;var u=o.reduce(function(t,r){if(a.isString(r))return t+r;var n=r.squash,o=r.encoded,s=r.param;return!0===n?t.match(/\/$/)?t.slice(0,-1):t:a.isString(n)?t+n:!1!==n?t:null==o?t:a.isArray(o)?t+i.map(o,e.encodeDashes).join("-"):s.raw?t+o:t+encodeURIComponent(o)},""),c=s.map(function(e){var t=e.param,r=e.squash,n=e.encoded,o=e.isDefaultValue;if(!(null==n||o&&!1!==r)&&(a.isArray(n)||(n=[n]),0!==n.length))return t.raw||(n=i.map(n,encodeURIComponent)),n.map(function(e){return t.id+"="+e})}).filter(i.identity).reduce(i.unnestR,[]).join("&");return u+(c?"?"+c:"")+(t["#"]?"#"+t["#"]:"")},e.encodeDashes=function(e){return encodeURIComponent(e).replace(/-/g,function(e){return"%5C%"+e.charCodeAt(0).toString(16).toUpperCase()})},e.pathSegmentsAndParams=function(e){var t=e._segments,r=e._params.filter(function(e){return e.location===s.DefType.PATH});return i.arrayTuples(t,r.concat(void 0)).reduce(i.unnestR,[]).filter(function(e){return""!==e&&a.isDefined(e)})},e.queryParams=function(e){return e._params.filter(function(e){return e.location===s.DefType.SEARCH})},e.compare=function(t,r){var n,o,u=function(t){return t._cache.segments=t._cache.segments||t._cache.path.map(e.pathSegmentsAndParams).reduce(i.unnestR,[]).reduce(l.joinNeighborsR,[]).map(function(e){return a.isString(e)?c(e):e}).reduce(i.unnestR,[])},p=function(e){return e._cache.weights=e._cache.weights||u(e).map(function(e){return"/"===e?1:a.isString(e)?2:e instanceof s.Param?3:void 0})},d=i.arrayTuples(p(t),p(r));for(o=0;o<d.length;o++)if(0!==(n=d[o][0]-d[o][1]))return n;return 0},e}();p.nameValidator=/^\w+([-.]+\w+)*(?:\[\])?$/,t.UrlMatcher=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(76),i=r(5),o=r(3),a=function(){function e(e,t){var r=this;this.fireAfterUpdate=t,this._listener=function(e){return r._listeners.forEach(function(t){return t(e)})},this._listeners=[],this.hash=function(){return n.parseUrl(r._get()).hash},this.path=function(){return n.parseUrl(r._get()).path},this.search=function(){return n.getParams(n.parseUrl(r._get()).search)},this._location=window&&window.location,this._history=window&&window.history}return e.prototype.url=function(e,t){if(void 0===t&&(t=!0),i.isDefined(e)&&e!==this._get()&&(this._set(null,null,e,t),this.fireAfterUpdate)){var r=o.extend(new Event("locationchange"),{url:e});this._listeners.forEach(function(e){return e(r)})}return n.buildUrl(this)},e.prototype.onChange=function(e){var t=this;return this._listeners.push(e),function(){return o.removeFrom(t._listeners,e)}},e.prototype.dispose=function(e){o.deregAll(this._listeners)},e}();t.BaseLocationServices=a},function(e,t,r){var n=r(145).Tree,i=r(10),o=r(10);NodeKey=function(e,t){this.subject=e.subject,this.predicate=e.predicate,this.object=e.object,this.graph=e.graph,this.order=t},NodeKey.prototype.comparator=function(e){for(var t=0;t<this.order.length;t++){var r=this.order[t];if(null==e[r])return 0;if(this[r]<e[r])return-1;if(this[r]>e[r])return 1}return 0},Pattern=function(e){this.subject=e.subject,this.predicate=e.predicate,this.object=e.object,this.graph=e.graph,this.indexKey=[],this.keyComponents={};var t=[],r=[],n=this;i.forEach(["subject","predicate","object","graph"],function(e){"string"==typeof n[e]?(r.push(e),n.keyComponents[e]=null):(t.push(e),n.keyComponents[e]=n[e],n.indexKey.push(e))}),this.order=t.concat(r),this.key=new NodeKey(this.keyComponents,this.order)},QuadIndex=function(e,t){0!=arguments&&(this.componentOrder=e.componentOrder,n.call(this,e.order,function(e){e.comparator=function(t,r){for(var n=0;n<e.componentOrder.length;n++){var i=e.componentOrder[n],o=t[i],a=r[i];if(o<a)return-1;if(o>a)return 1}return 0},e.rangeComparator=function(t,r){for(var n=0;n<e.componentOrder.length;n++){var i=e.componentOrder[n];if(null==r[i]||null==t[i])return 0;if(t[i]<r[i])return-1;if(t[i]>r[i])return 1}return 0},t(e)}))},QuadIndex.prototype=i.create(n.prototype,{constructor:n}),QuadIndex.prototype.insert=function(e,t){n.prototype.insert.call(this,e,null,function(e){t(e)})},QuadIndex.prototype.search=function(e,t){n.prototype.search.call(this,e,function(e){t(e)},!0)},QuadIndex.prototype.range=function(e,t){this._rangeTraverse(this,this.root,e,t)},QuadIndex.prototype._rangeTraverse=function(e,t,r,n){var i=r.key,a=[],s=[t];o.whilst(function(){return s.length>0},function(t){for(var r=s.shift(),n=0;n<r.numberActives&&-1===e.rangeComparator(r.keys[n].key,i);)n++;if(!0===r.isLeaf){for(var l=n;l<r.numberActives&&0===e.rangeComparator(r.keys[l].key,i);)a.push(r.keys[l].key),l++;t()}else e._diskRead(r.children[n],function(l){s.push(l);var u=n;o.whilst(function(){return u<r.numberActives&&0===e.rangeComparator(r.keys[u].key,i)},function(t){a.push(r.keys[u].key),u++,e._diskRead(r.children[u],function(e){s.push(e),t()})},function(){t()})})},function(){n(a)})},e.exports={QuadIndex:QuadIndex,Pattern:Pattern,NodeKey:NodeKey}},function(e,t,r){"use strict";(function(t){function r(e,r,n,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick(function(){e.call(null,r)});case 3:return t.nextTick(function(){e.call(null,r,n)});case 4:return t.nextTick(function(){e.call(null,r,n,i)});default:for(o=new Array(s-1),a=0;a<o.length;)o[a++]=arguments[a];return t.nextTick(function(){e.apply(null,o)})}}!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports=r:e.exports=t.nextTick}).call(t,r(28))},function(e,t,r){function n(e,t){this._id=e,this._clearFn=t}var i=Function.prototype.apply;t.setTimeout=function(){return new n(i.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new n(i.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},r(382),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t,r){!function(n,i){e.exports=t=i(r(4))}(0,function(e){return function(t){var r=e,n=r.lib,i=n.Base,o=n.WordArray,a=r.x64={};a.Word=i.extend({init:function(e,t){this.high=e,this.low=t}}),a.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,r=[],n=0;n<t;n++){var i=e[n];r.push(i.high),r.push(i.low)}return o.create(r,this.sigBytes)},clone:function(){for(var e=i.clone.call(this),t=e.words=this.words.slice(0),r=t.length,n=0;n<r;n++)t[n]=t[n].clone();return e}})}(),e})},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.CitableEditorComponent=t.CitableEditorComponentController=t.EditCitableComponentController=void 0;var i=r(1),o=n(i),a=r(2),s=n(a),l=r(44),u=r(92),c=r(7),p=r(0),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(p),f=(t.EditCitableComponentController=function(){function e(t,r,n){(0,o.default)(this,e),this.projectService=r,this.toastr=n,this.disabled=!1,this.projectSources=r.getProjectSources(),this.projectSource=this.projectSources.find(function(e){return e.id===t})}return e.$inject=["sourceId","projectService","toastr"],(0,s.default)(e,[{key:"delete",value:function(){var e=this;this.disabled=!0,this.projectService.deleteCitable(this.projectSource.updateEndpoint,this.c).then(function(){e.toastr.success("Resource deleted"),e.disabled=!1},function(t){e.toastr.error("Error deleting resource",t),e.disabled=!1})}},{key:"save",value:function(){var e=this;this.disabled=!0,this.c.source=this.projectSource,this.projectService.saveCitable(this.projectSource.updateEndpoint,this.projectSource.graphStoreEndpoint,this.c).then(function(){e.toastr.success("Resource saved"),e.disabled=!1},function(t){e.toastr.error("Error saving resource",t),e.disabled=!1})}}]),e}(),t.CitableEditorComponentController=function(){function e(t){(0,o.default)(this,e),this.fibraService=t}return(0,s.default)(e,[{key:"addRightsHolder",value:function(){var e=new l.Citable("http://ldf.fi/fibra/citable_"+(0,u.UUID)());e.labels=[c.DataFactory.literal("",this.fibraService.getState().language)],e.descriptions=[c.DataFactory.literal("",this.fibraService.getState().language)],this.citable.rightsHolders.push(e)}},{key:"addLabel",value:function(){this.citable.labels.push(c.DataFactory.literal("",""))}},{key:"addDescription",value:function(){this.citable.descriptions.push(c.DataFactory.literal("",""))}},{key:"removeLabel",value:function(e){this.citable.labels.splice(e,1)}},{key:"removeDescription",value:function(e){this.citable.descriptions.splice(e,1)}}]),e}()),h=t.CitableEditorComponent=function e(){(0,o.default)(this,e),this.bindings={citable:"=",noRightsHolders:"@",noId:"@",noRightsHolderIds:"@"},this.controller=f,this.template=r(468)()};d.module("fibra.components.citable-editor",["fibra.services"]).component("citableEditor",new h)},function(e,t,r){"use strict";var n=r(20),i=function(e,t){var r=!1;try{void 0!==e[t]&&(r=!0)}catch(e){}return r},o=function(e,t){var r=null;return t&&(r="string"==typeof t?t:t(e)),r},a=function(){function e(e){var t,r,i;return t=n(e).offset(),r=n(e).width(),i=n(e).height(),[[t.left,t.left+r],[t.top,t.top+i]]}function t(e,t){var r,n;return r=e[0]<t[0]?e:t,n=e[0]<t[0]?t:e,r[1]>n[0]||r[0]===n[0]}return function(r,n){var i=e(r),o=e(n);return t(i[0],o[0])&&t(i[1],o[1])}}(),s=function(e,t){return"function"==typeof t?t(e):t};e.exports={keyExists:i,getPersistencyId:o,elementsOverlap:a,getString:s}},function(e,t,r){"use strict";var n=function(e,t,r){r||(r=e.getCursor()),t||(t=e.getTokenAt(r));var i=e.getTokenAt({line:r.line,ch:t.start});return null!=i.type&&"ws"!=i.type&&null!=t.type&&"ws"!=t.type?(t.start=i.start,t.string=i.string+t.string,n(e,t,{line:r.line,ch:i.start})):null!=t.type&&"ws"==t.type?(t.start=t.start+1,t.string=t.string.substring(1),t):t},i=function(e,t,r){var n=e.getTokenAt({line:t,ch:r.start});return null!=n&&"ws"==n.type&&(n=i(e,t,n)),n},o=function(e,t,r){void 0==r&&(r=1);var n=e.getTokenAt({line:t,ch:r});return null==n||void 0==n||n.end<r?null:"ws"==n.type?o(e,t,n.end+1):n};e.exports={getPreviousNonWsToken:i,getCompleteToken:n,getNextNonWsToken:o}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(161),i=r(270),o=r(271),a=r(272),s=r(165);r(164);r.d(t,"createStore",function(){return n.b}),r.d(t,"combineReducers",function(){return i.a}),r.d(t,"bindActionCreators",function(){return o.a}),r.d(t,"applyMiddleware",function(){return a.a}),r.d(t,"compose",function(){return s.a})},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){var n=r(26),i=r(17).document,o=n(i)&&n(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,r){var n=r(26);e.exports=function(e,t){if(!n(e))return e;var r,i;if(t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;if("function"==typeof(r=e.valueOf)&&!n(i=r.call(e)))return i;if(!t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,r){var n=r(66);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){var r=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:r)(e)}},function(e,t,r){var n=r(117)("keys"),i=r(82);e.exports=function(e){return n[e]||(n[e]=i(e))}},function(e,t,r){var n=r(17),i=n["__core-js_shared__"]||(n["__core-js_shared__"]={});e.exports=function(e){return i[e]||(i[e]={})}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,r){"use strict";var n=r(84),i=r(13),o=r(169),a=r(31),s=r(39),l=r(53),u=r(283),c=r(68),p=r(171),d=r(14)("iterator"),f=!([].keys&&"next"in[].keys()),h=function(){return this};e.exports=function(e,t,r,g,v,m,y){u(r,t,g);var b,E,x,S=function(e){if(!f&&e in A)return A[e];switch(e){case"keys":case"values":return function(){return new r(this,e)}}return function(){return new r(this,e)}},C=t+" Iterator",w="values"==v,T=!1,A=e.prototype,I=A[d]||A["@@iterator"]||v&&A[v],L=I||S(v),N=v?w?S("entries"):L:void 0,R="Array"==t?A.entries||I:I;if(R&&(x=p(R.call(new e)))!==Object.prototype&&x.next&&(c(x,C,!0),n||s(x,d)||a(x,d,h)),w&&I&&"values"!==I.name&&(T=!0,L=function(){return I.call(this)}),n&&!y||!f&&!T&&A[d]||a(A,d,L),l[t]=L,l[C]=h,v)if(b={values:w?L:S("values"),keys:m?L:S("keys"),entries:N},y)for(E in b)E in A||o(A,E,b[E]);else i(i.P+i.F*(f||T),t,b);return b}},function(e,t,r){var n=r(86),i=r(14)("iterator"),o=r(53);e.exports=r(9).getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[n(e)]}},function(e,t,r){t.f=r(14)},function(e,t,r){var n=r(82)("meta"),i=r(26),o=r(39),a=r(24).f,s=0,l=Object.isExtensible||function(){return!0},u=!r(38)(function(){return l(Object.preventExtensions({}))}),c=function(e){a(e,n,{value:{i:"O"+ ++s,w:{}}})},p=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,n)){if(!l(e))return"F";if(!t)return"E";c(e)}return e[n].i},d=function(e,t){if(!o(e,n)){if(!l(e))return!0;if(!t)return!1;c(e)}return e[n].w},f=function(e){return u&&h.NEED&&l(e)&&!o(e,n)&&c(e),e},h=e.exports={KEY:n,NEED:!1,fastKey:p,getWeak:d,onFreeze:f}},function(e,t,r){var n=r(17),i=r(9),o=r(84),a=r(122),s=r(24).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t,r){var n=r(83),i=r(64),o=r(40),a=r(112),s=r(39),l=r(166),u=Object.getOwnPropertyDescriptor;t.f=r(27)?u:function(e,t){if(e=o(e),t=a(t,!0),l)try{return u(e,t)}catch(e){}if(s(e,t))return i(!n.f.call(e,t),e[t])}},function(e,t){},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Project=void 0;var i=r(15),o=n(i),a=r(1),s=n(a),l=r(2),u=n(l),c=r(18),p=n(c),d=r(69),f=n(d),h=r(19),g=n(h),v=r(44),m=r(55),y=r(43),b=r(70),E=r(71),x=r(21),S=r(91),C=r(7),w=t.Project=function(e){function t(){(0,s.default)(this,t);var e=(0,p.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments));return e.instanceNS="http://ldf.fi/fibra/",e.schemaNS="http://ldf.fi/fibra/schema#",e.dataModel=new m.DataModel,e.autocompletionQuery=b.SparqlAutocompleteService.defaultMatchQuery,e.treeQuery=E.SparqlTreeService.getClassTreeQuery,e.itemQuery=x.SparqlItemService.getLocalItemPropertiesQuery,e.deleteItemQuery=x.SparqlItemService.deleteItemQuery,e.classQuery=m.DataModel.classQuery,e.propertyQuery=m.DataModel.propertyQuery,e.authorityEndpoints=[],e.archiveEndpoints=[],e.schemas=[],e}return(0,g.default)(t,e),(0,u.default)(t,[{key:"remoteEndpoints",value:function(){return this.archiveEndpoints.concat(this.authorityEndpoints)}},{key:"asTemplate",value:function(){var e=new S.PrimaryEndpointConfiguration;return e.autocompletionQuery=this.autocompletionQuery,e.itemQuery=this.itemQuery,e.deleteItemQuery=this.deleteItemQuery,e.treeQuery=this.treeQuery,e.propertyQuery=this.propertyQuery,e.classQuery=this.classQuery,e}},{key:"toTurtle",value:function(e,r){var n=this;if(!e.has(this.id)){r.fibra=C.FIBRA.ns,r.void=C.VOID.ns,e.set(this.id,"<"+this.id+"> a fibra:Project ;"),(0,f.default)(t.prototype.__proto__||(0,o.default)(t.prototype),"toTurtle",this).call(this,e,r);var i=e.get(this.id);this.schemas.length>0&&(i+="\nfibra:schema ",this.schemas.forEach(function(e){i=i+"<"+e.id+">, "}),i=i.substring(0,i.length-2)+" ;",this.schemas.filter(function(e){return e.source.sparqlEndpoint!==n.source.sparqlEndpoint||n.source.graph!==e.source.graph}).forEach(function(e){i=i+"\nfibra:schemaReference [\n  rdf:value <"+e.id+"> ;\n  void:sparqlEndpoint <"+e.source.sparqlEndpoint+"> ;",e.source.graph&&(i=i+"\n  fibra:graph <"+e.source.graph+">"),i+="\n] ;"})),this.authorityEndpoints.length>0&&(i+="\nfibra:authorityEndpoint ",this.authorityEndpoints.forEach(function(e){i=i+"<"+e.id+">, "}),i=i.substring(0,i.length-2)+" ;",this.authorityEndpoints.filter(function(e){return e.source.sparqlEndpoint!==n.source.sparqlEndpoint||n.source.graph!==e.source.graph}).forEach(function(e){i=i+"\nfibra:authorityEndpointReference [\n  rdf:value <"+e.id+"> ;\n  void:sparqlEndpoint <"+e.source.sparqlEndpoint+"> ;",e.source.graph&&(i=i+"\n  fibra:graph <"+e.source.graph+">"),i+="\n] ;"})),this.archiveEndpoints.length>0&&(i+="\nfibra:archiveEndpoint ",this.archiveEndpoints.forEach(function(e){i=i+"<"+e.id+">, "}),i=i.substring(0,i.length-2)+" ;",this.archiveEndpoints.filter(function(e){return e.source.sparqlEndpoint!==n.source.sparqlEndpoint||n.source.graph!==e.source.graph}).forEach(function(e){i=i+"\nfibra:archiveEndpointReference [\n  rdf:value <"+e.id+"> ;\n  void:sparqlEndpoint <"+e.source.sparqlEndpoint+"> ;",e.source.graph&&(i=i+"\n  fibra:graph <"+e.source.graph+">"),i+="\n] ;"})),this.graph&&(i=i+"\nfibra:graph <"+this.graph+"> ;"),i=i+"\nfibra:autocompletionQuery "+y.SparqlService.stringToSPARQLString(this.autocompletionQuery)+" ;\nfibra:treeQuery "+y.SparqlService.stringToSPARQLString(this.treeQuery)+" ;\nfibra:itemQuery "+y.SparqlService.stringToSPARQLString(this.itemQuery)+" ;\nfibra:deleteItemQuery "+y.SparqlService.stringToSPARQLString(this.deleteItemQuery)+" ;\nfibra:classQuery "+y.SparqlService.stringToSPARQLString(this.classQuery)+" ;\nfibra:propertyQuery "+y.SparqlService.stringToSPARQLString(this.propertyQuery)+" ;\nvoid:sparqlEndpoint <"+this.endpoint+"> ;\nfibra:updateEndpoint <"+this.updateEndpoint+"> ;\nfibra:graphStoreEndpoint <"+this.graphStoreEndpoint+"> ;\nfibra:schemaNS "+y.SparqlService.stringToSPARQLString(this.schemaNS)+" ;\nfibra:instanceNS "+y.SparqlService.stringToSPARQLString(this.instanceNS)+" .",e.set(this.id,i)}}}]),t}(v.Citable);w.listProjectsQuery="PREFIX fibra: <http://hdlab.stanford.edu/fibra/ontology#>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX dcterms: <http://purl.org/dc/terms/>\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\nPREFIX void: <http://rdfs.org/ns/void#>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nSELECT ?id ?labels ?descriptions ?url ?dateCreated ?rightsHolders ?rightsHolders_labels ?rightsHolders_descriptions ?rightsHolder_surl ?rightsHolders_order ?instanceNS ?schemaNS ?endpoint ?graphStoreEndpoint ?updateEndpoint ?graph ?autocompletionQuery ?treeQuery ?itemQuery ?deleteItemQuery ?authorityEndpoints ?authorityEndpoints_source_graph ?authorityEndpoints_source_sparqlEndpoint ?archiveEndpoints ?archiveEndpoints_source_graph ?archiveEndpoints_source_sparqlEndpoint ?schemas ?schemas_source_graph ?schemas_source_sparqlEndpoint {\n# STARTGRAPH\n  ?id a fibra:Project .\n  {\n    ?id skos:prefLabel ?labels\n  } UNION {\n    ?id fibra:instanceNS ?instanceNS .\n    ?id fibra:schemaNS ?schemaNS .\n    ?id void:sparqlEndpoint ?endpoint .\n    ?id fibra:updateEndpoint ?updateEndpoint .\n    ?id fibra:graphStoreEndpoint ?graphStoreEndpoint .\n    ?id fibra:autocompletionQuery ?autocompletionQuery .\n    ?id fibra:treeQuery ?treeQuery .\n    ?id fibra:itemQuery ?itemQuery .\n    ?id fibra:deleteItemQuery ?deleteItemQuery .\n    OPTIONAL { ?id fibra:graph ?graph }\n    OPTIONAL { ?id dcterms:created ?dateCreated }\n    OPTIONAL { ?id foaf:homepage ?url }\n  } UNION {\n    ?id fibra:schema ?schemas\n  } UNION {\n    ?id fibra:schemaReference ?ar .\n    ?ar rdf:value ?schemas .\n    ?ar void:sparqlEndpoint ?schemas_source_sparqlEndpoint .\n    OPTIONAL { ?ar fibra:graph ?schemas_source_graph }\n  } UNION {\n    ?id fibra:authorityEndpoint ?authorityEndpoints\n  } UNION {\n    ?id fibra:authorityEndpointReference ?ar .\n    ?ar rdf:value ?authorityEndpoints .\n    ?ar void:sparqlEndpoint ?authorityEndpoints_source_sparqlEndpoint .\n    OPTIONAL { ?ar fibra:graph ?authorityEndpoints_source_graph }\n  } UNION {\n    ?id fibra:archiveEndpoint ?archiveEndpoints\n  } UNION {\n    ?id fibra:archiveEndpointReference ?ar .\n    ?ar rdf:value ?archiveEndpoints .\n    ?ar void:sparqlEndpoint ?archiveEndpoints_source_sparqlEndpoint .\n    OPTIONAL { ?ar fibra:graph ?archiveEndpoints_source_graph }\n  } UNION {\n    ?id dcterms:description ?descriptions\n  } UNION {\n    {\n      ?id dcterms:rightsHolder ?rightsHolders\n    } UNION {\n      ?id fibra:qualifiedAssertion ?qa .\n      ?qa rdf:predicate dcterms:rightsHolder .\n      ?qa rdf:object ?rightsHolders .\n      OPTIONAL { ?qa fibra:order ?rightsHolders_order }\n    }\n    {\n      ?rightsHolders skos:prefLabel ?rightsHolders_labels\n    } UNION {\n      ?rightsHolders foaf:homepage ?rightsHolders_url\n    } UNION {\n      ?rightsHolders dcterms:description ?rightsHolders_descriptions\n    }\n  }\n# ENDGRAPH\n}",w.projectQuery="PREFIX fibra: <http://hdlab.stanford.edu/fibra/ontology#>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX dcterms: <http://purl.org/dc/terms/>\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\nPREFIX void: <http://rdfs.org/ns/void#>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nSELECT ?labels ?descriptions ?url ?dateCreated ?rightsHolders ?rightsHolders_labels ?rightsHolders_descriptions ?rightsHolder_surl ?rightsHolders_order ?instanceNS ?schemaNS ?endpoint ?graphStoreEndpoint ?updateEndpoint ?graph ?autocompletionQuery ?treeQuery ?itemQuery ?deleteItemQuery ?authorityEndpoints ?authorityEndpoints_source_graph ?authorityEndpoints_source_sparqlEndpoint ?archiveEndpoints ?archiveEndpoints_source_graph ?archiveEndpoints_source_sparqlEndpoint ?schemas ?schemas_source_graph ?schemas_source_sparqlEndpoint {\n# STARTGRAPH\n  {\n    <ID> skos:prefLabel ?labels\n  } UNION {\n    <ID> fibra:instanceNS ?instanceNS .\n    <ID> fibra:schemaNS ?schemaNS .\n    <ID> void:sparqlEndpoint ?endpoint .\n    <ID> fibra:updateEndpoint ?updateEndpoint .\n    <ID> fibra:graphStoreEndpoint ?graphStoreEndpoint .\n    <ID> fibra:autocompletionQuery ?autocompletionQuery .\n    <ID> fibra:treeQuery ?treeQuery .\n    <ID> fibra:itemQuery ?itemQuery .\n    <ID> fibra:deleteItemQuery ?deleteItemQuery .\n    OPTIONAL { <ID> fibra:graph ?graph }\n    OPTIONAL { <ID> foaf:homepage ?url }\n    OPTIONAL { <ID> dcterms:created ?dateCreated }\n  } UNION {\n    <ID> fibra:schema ?schemas\n  } UNION {\n    <ID> fibra:schemaReference ?ar .\n    ?ar rdf:value ?schemas .\n    ?ar void:sparqlEndpoint ?schemas_source_sparqlEndpoint .\n    OPTIONAL { ?ar fibra:graph ?schemas_source_graph }\n  } UNION {\n    <ID> fibra:authorityEndpoint ?authorityEndpoints\n  } UNION {\n    <ID> fibra:authorityEndpointReference ?ar .\n    ?ar rdf:value ?authorityEndpoints .\n    ?ar void:sparqlEndpoint ?authorityEndpoints_source_sparqlEndpoint .\n    OPTIONAL { ?ar fibra:graph ?authorityEndpoints_source_graph }\n  } UNION {\n    <ID> fibra:archiveEndpoint ?archiveEndpoints\n  } UNION {\n    <ID> fibra:archiveEndpointReference ?ar .\n    ?ar rdf:value ?archiveEndpoints .\n    ?ar void:sparqlEndpoint ?archiveEndpoints_source_sparqlEndpoint .\n    OPTIONAL { ?ar fibra:graph ?archiveEndpoints_source_graph }\n  } UNION {\n    <ID> dcterms:description ?descriptions\n  } UNION {\n    {\n      <ID> dcterms:rightsHolder ?rightsHolders\n    } UNION {\n      <ID> fibra:qualifiedAssertion ?qa .\n      ?qa rdf:predicate dcterms:rightsHolder .\n      ?qa rdf:object ?rightsHolders .\n      OPTIONAL { ?qa fibra:order ?rightsHolders_order }\n    }\n    {\n      ?rightsHolders skos:prefLabel ?rightsHolders_labels\n    } UNION {\n      ?rightsHolders foaf:homepage ?rightsHolders_url\n    } UNION {\n      ?rightsHolders dcterms:description ?rightsHolders_descriptions\n    }\n  }\n# ENDGRAPH\n}"},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.TreeComponent=t.TreeNode=void 0;var i=r(42),o=n(i),a=r(1),s=n(a),l=r(2),u=n(l);t.TreeNode=function(){function e(t,r){(0,s.default)(this,e),this.id=t,this.label=r,this.children=[],this.selected=!0,this.open=!0}return(0,u.default)(e,[{key:"cloneWithoutChildren",value:function(){var t=new e(this.id,this.label);return t.instances=this.instances,t.matchingInstances=this.matchingInstances,t.selected=this.selected,t.open=this.open,t}}],[{key:"recursivelyProcess",value:function(t,r){r(t),t.children.forEach(function(t){return e.recursivelyProcess(t,r)})}},{key:"filter",value:function(e,t){var r=e.cloneWithoutChildren(),n=!0,i=!1,a=void 0;try{for(var s,l=(0,o.default)(e.children);!(n=(s=l.next()).done);n=!0){var u=s.value;t(u)&&r.children.push(u)}}catch(e){i=!0,a=e}finally{try{!n&&l.return&&l.return()}finally{if(i)throw a}}return r}},{key:"recursivelyMap",value:function(t,r){var n=[],i=!0,a=!1,s=void 0;try{for(var l,u=(0,o.default)(t.children);!(i=(l=u.next()).done);i=!0){var c=l.value;n=n.concat(e.recursivelyMap(c,r))}}catch(e){a=!0,s=e}finally{try{!i&&u.return&&u.return()}finally{if(a)throw s}}return r(t,n)}}]),e}(),t.TreeComponent=function e(){(0,s.default)(this,e),this.bindings={tree:"<",onSelect:"&"},this.templateUrl="components/tree/tree.html"}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteEndpointConfiguration=void 0;var i=r(15),o=n(i),a=r(1),s=n(a),l=r(2),u=n(l),c=r(18),p=n(c),d=r(69),f=n(d),h=r(19),g=n(h),v=r(44),m=r(7),y=r(70),b=r(55),E=r(21),x=r(71),S=r(43),C=t.RemoteEndpointConfiguration=function(e){function t(){(0,s.default)(this,t);var e=(0,p.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments));return e.types=[],e.autocompletionQuery=y.SparqlAutocompleteService.defaultMatchQuery,e.propertyQuery=b.DataModel.propertyQuery,e.classQuery=b.DataModel.classQuery,e.itemQuery=E.SparqlItemService.getRemoteItemPropertiesQuery,e.treeQuery=x.SparqlTreeService.getClassTreeQuery,e}return(0,g.default)(t,e),(0,u.default)(t,[{key:"toTurtle",value:function(e,r){if(console.log(e),!e.has(this.id)){r.fibra=m.FIBRA.ns,r.void=m.VOID.ns,r.rdf=m.RDF.ns;var n="<"+this.id+"> a ";this.types.forEach(function(e){return n+=e.toCanonical()+" ,"}),n=n.substring(0,n.length-2)+" ;",e.set(this.id,n),(0,f.default)(t.prototype.__proto__||(0,o.default)(t.prototype),"toTurtle",this).call(this,e,r),n=e.get(this.id),n=n+"\nvoid:sparqlEndpoint <"+this.endpoint+"> ;\nfibra:autocompletionQuery "+S.SparqlService.stringToSPARQLString(this.autocompletionQuery)+" ;\nfibra:itemQuery "+S.SparqlService.stringToSPARQLString(this.itemQuery)+" ;\nfibra:treeQuery "+S.SparqlService.stringToSPARQLString(this.treeQuery)+" ;\nfibra:propertyQuery "+S.SparqlService.stringToSPARQLString(this.propertyQuery)+" ;\nfibra:classQuery "+S.SparqlService.stringToSPARQLString(this.classQuery)+" .",e.set(this.id,n)}}}]),t}(v.Citable);C.listAuthorityEndpointConfigurationsQuery="PREFIX fibra: <http://hdlab.stanford.edu/fibra/ontology#>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX dcterms: <http://purl.org/dc/terms/>\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\nPREFIX void: <http://rdfs.org/ns/void#>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nSELECT ?id ?types ?labels ?descriptions ?rightsHolders ?rightsHolders_labels ?rightsHolders_descriptions ?rightsHolders_url ?rightsHolders_order ?url ?endpoint ?autocompletionQuery ?itemQuery ?treeQuery ?propertyQuery ?classQuery {\n# STARTGRAPH\n  ?id a fibra:AuthorityEndpointConfiguration .\n  ?id a ?types .\n  { ?id skos:prefLabel ?labels }\n  UNION\n  { ?id dcterms:description ?descriptions }\n  UNION\n  {\n    ?id void:sparqlEndpoint ?endpoint .\n    ?id fibra:autocompletionQuery ?autocompletionQuery .\n    ?id fibra:itemQuery ?itemQuery .\n    ?id fibra:treeQuery ?treeQuery .\n    ?id fibra:propertyQuery ?propertyQuery .\n    ?id fibra:classQuery ?classQuery .\n    OPTIONAL { ?id foaf:homepage ?url }\n  } UNION {\n    {\n      ?id dcterms:rightsHolder ?rightsHolders\n    } UNION {\n      ?id fibra:qualifiedAssertion ?qa .\n      ?qa rdf:predicate dcterms:rightsHolder .\n      ?qa rdf:object ?rightsHolders .\n      OPTIONAL { ?qa fibra:order ?rightsHolders_order }\n    }\n    {\n      ?rightsHolders skos:prefLabel ?rightsHolders_labels\n    } UNION {\n      ?rightsHolders foaf:homepage ?rightsHolders_url\n    } UNION {\n      ?rightsHolders dcterms:description ?rightsHolders_descriptions\n    }\n  }\n# ENDGRAPH\n}",C.listArchiveEndpointConfigurationsQuery=C.listAuthorityEndpointConfigurationsQuery.replace(/fibra:AuthorityEndpointConfiguration/,"fibra:ArchiveEndpointConfiguration"),C.remoteEndpointConfigurationQuery="PREFIX fibra: <http://hdlab.stanford.edu/fibra/ontology#>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX dcterms: <http://purl.org/dc/terms/>\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\nPREFIX void: <http://rdfs.org/ns/void#>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nSELECT ?types ?labels ?descriptions ?rightsHolders ?rightsHolders_labels ?rightsHolders_descriptions ?rightsHolders_url ?rightsHolders_order ?url ?endpoint ?autocompletionQuery ?itemQuery ?treeQuery ?propertyQuery ?classQuery {\n# STARTGRAPH\n  { <ID> skos:prefLabel ?labels }\n  UNION\n  { <ID> dcterms:description ?descriptions }\n  UNION\n  {\n    <ID> a ?types .\n    <ID> void:sparqlEndpoint ?endpoint .\n    <ID> fibra:autocompletionQuery ?autocompletionQuery .\n    <ID> fibra:itemQuery ?itemQuery .\n    <ID> fibra:treeQuery ?treeQuery .\n    <ID> fibra:propertyQuery ?propertyQuery .\n    <ID> fibra:classQuery ?classQuery .\n    OPTIONAL { <ID> foaf:homepage ?url }\n  } UNION {\n    {\n      <ID> dcterms:rightsHolder ?rightsHolders\n    } UNION {\n      <ID> fibra:qualifiedAssertion ?qa .\n      ?qa rdf:predicate dcterms:rightsHolder .\n      ?qa rdf:object ?rightsHolders .\n      OPTIONAL { ?qa fibra:order ?rightsHolders_order }\n    }\n    {\n      ?rightsHolders skos:prefLabel ?rightsHolders_labels\n    } UNION {\n      ?rightsHolders foaf:homepage ?rightsHolders_url\n    } UNION {\n      ?rightsHolders dcterms:description ?rightsHolders_descriptions\n    }\n  }\n# ENDGRAPH\n}"},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Schema=void 0;var i=r(15),o=n(i),a=r(1),s=n(a),l=r(2),u=n(l),c=r(18),p=n(c),d=r(69),f=n(d),h=r(19),g=n(h),v=r(44),m=r(55),y=r(7),b=r(43),E=t.Schema=function(e){function t(){(0,s.default)(this,t);var e=(0,p.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments));return e.classQuery=m.DataModel.classQuery,e.propertyQuery=m.DataModel.propertyQuery,e}return(0,g.default)(t,e),(0,u.default)(t,[{key:"toTurtle",value:function(e,r){if(!e.has(this.id)){r.fibra=y.FIBRA.ns,r.void=y.VOID.ns,e.set(this.id,"<"+this.id+"> a fibra:Schema ;"),(0,f.default)(t.prototype.__proto__||(0,o.default)(t.prototype),"toTurtle",this).call(this,e,r);var n=e.get(this.id);n=n+"\nvoid:sparqlEndpoint <"+this.endpoint+"> ;\nfibra:classQuery "+b.SparqlService.stringToSPARQLString(this.classQuery)+" ;\nfibra:propertyQuery "+b.SparqlService.stringToSPARQLString(this.propertyQuery)+" .",e.set(this.id,n)}}}]),t}(v.Citable);E.listSchemasQuery="PREFIX fibra: <http://hdlab.stanford.edu/fibra/ontology#>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX dcterms: <http://purl.org/dc/terms/>\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nPREFIX void: <http://rdfs.org/ns/void#>\nSELECT ?id ?labels ?descriptions ?rightsHolders ?rightsHolders_labels ?rightsHolders_descriptions ?rightsHolders_url ?rightsHolders_order ?url ?endpoint ?classQuery ?propertyQuery {\n# STARTGRAPH\n  ?id a fibra:Schema .\n  { ?id skos:prefLabel ?labels }\n  UNION\n  { ?id dcterms:description ?descriptions }\n  UNION\n  { ?id foaf:homepage ?url }\n  UNION\n  {\n    ?id void:sparqlEndpoint ?endpoint .\n    ?id fibra:classQuery ?classQuery .\n    ?id fibra:propertyQuery ?propertyQuery .\n  } UNION {\n    {\n      ?id dcterms:rightsHolder ?rightsHolders\n    } UNION {\n      ?id fibra:qualifiedAssertion ?qa .\n      ?qa rdf:predicate dcterms:rightsHolder .\n      ?qa rdf:object ?rightsHolders .\n      OPTIONAL { ?qa fibra:order ?rightsHolders_order }\n    }\n    {\n      ?rightsHolders skos:prefLabel ?rightsHolders_labels\n    } UNION {\n      ?rightsHolders foaf:homepage ?rightsHolders_url\n    } UNION {\n      ?rightsHolders dcterms:description ?rightsHolders_descriptions\n    }\n  }\n# ENDGRAPH\n}",E.schemaQuery="PREFIX fibra: <http://hdlab.stanford.edu/fibra/ontology#>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX dcterms: <http://purl.org/dc/terms/>\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\nPREFIX void: <http://rdfs.org/ns/void#>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nSELECT ?labels ?descriptions ?rightsHolders ?rightsHolders_labels ?rightsHolders_descriptions ?rightsHolders_url ?rightsHolders_order ?url ?endpoint ?classQuery ?propertyQuery {\n# STARTGRAPH\n  { <ID> skos:prefLabel ?labels }\n  UNION\n  { <ID> dcterms:description ?descriptions }\n  UNION\n  {\n    <ID> void:sparqlEndpoint ?endpoint .\n    <ID> fibra:classQuery ?classQuery .\n    <ID> fibra:propertyQuery ?propertyQuery .\n  } UNION {\n    {\n      <ID> dcterms:rightsHolder ?rightsHolders\n    } UNION {\n      <ID> fibra:qualifiedAssertion ?qa .\n      ?qa rdf:predicate dcterms:rightsHolder .\n      ?qa rdf:object ?rightsHolders .\n      OPTIONAL { ?qa fibra:order ?rightsHolders_order }\n    }\n    {\n      ?rightsHolders skos:prefLabel ?rightsHolders_labels\n    } UNION {\n      ?rightsHolders foaf:homepage ?rightsHolders_url\n    } UNION {\n      ?rightsHolders dcterms:description ?rightsHolders_descriptions\n    }\n  }\n# ENDGRAPH\n}\n"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ADD_SOURCE=t.SET_SOURCE_CLASS_ACTIVE=void 0;var n=r(132),i=function(e){return e&&e.__esModule?e:{default:e}}(n),o=t.SET_SOURCE_CLASS_ACTIVE="SET_SOURCE_CLASS_ACTIVE",a=t.ADD_SOURCE="ADD_SOURCE";t.default={setSourceClassActive:function(e,t,r){return function(n){return i.default.resolve(n({type:o,payload:{source:e,clss:t,status:r}}))}},addSource:function(e){return function(t){return i.default.resolve(t({type:a,payload:e}))}}}},function(e,t,r){e.exports={default:r(317),__esModule:!0}},function(e,t){e.exports=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e}},function(e,t,r){"use strict";function n(e){var t,r;this.promise=new e(function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n}),this.resolve=i(t),this.reject=i(r)}var i=r(63);e.exports.f=function(e){return new n(e)}},function(e,t,r){var n=r(31);e.exports=function(e,t,r){for(var i in t)r&&e[i]?e[i]=t[i]:n(e,i,t[i]);return e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(6),o=r(96),a=r(5),s=function(){function e(t){return e.create(t||{})}return e.create=function(t){t=e.isStateClass(t)?new t:t;var r=n.inherit(n.inherit(t,e.prototype));return t.$$state=function(){return r},r.self=t,r.__stateObjectCache={nameGlob:o.Glob.fromString(r.name)},r},e.prototype.is=function(e){return this===e||this.self===e||this.fqn()===e},e.prototype.fqn=function(){if(!(this.parent&&this.parent instanceof this.constructor))return this.name;var e=this.parent.fqn();return e?e+"."+this.name:this.name},e.prototype.root=function(){return this.parent&&this.parent.root()||this},e.prototype.parameters=function(e){return e=n.defaults(e,{inherit:!0,matchingKeys:null}),(e.inherit&&this.parent&&this.parent.parameters()||[]).concat(n.values(this.params)).filter(function(t){return!e.matchingKeys||e.matchingKeys.hasOwnProperty(t.id)})},e.prototype.parameter=function(e,t){return void 0===t&&(t={}),this.url&&this.url.parameter(e,t)||n.find(n.values(this.params),i.propEq("id",e))||t.inherit&&this.parent&&this.parent.parameter(e)},e.prototype.toString=function(){return this.fqn()},e}();s.isStateClass=function(e){return a.isFunction(e)&&!0===e.__uiRouterState},s.isState=function(e){return a.isObject(e.__stateObjectCache)},t.StateObject=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){void 0===e&&(e=[]),void 0===t&&(t=null),this._items=e,this._limit=t}return e.prototype.enqueue=function(e){var t=this._items;return t.push(e),this._limit&&t.length>this._limit&&t.shift(),e},e.prototype.dequeue=function(){if(this.size())return this._items.splice(0,1)[0]},e.prototype.clear=function(){var e=this._items;return this._items=[],e},e.prototype.size=function(){return this._items.length},e.prototype.remove=function(e){var t=this._items.indexOf(e);return t>-1&&this._items.splice(t,1)[0]},e.prototype.peekTail=function(){return this._items[this._items.length-1]},e.prototype.peekHead=function(){if(this.size())return this._items[0]},e}();t.Queue=n},function(e,t,r){"use strict";function n(e,t){function r(e){for(var t=n,r=0;r<t.length;r++){var i=new l.Glob(t[r]);if(i&&i.matches(e.name)||!i&&t[r]===e.name)return!0}return!1}var n=a.isString(t)?[t]:t;return!!(a.isFunction(n)?n:r)(e)}function i(e,t,r){function n(e,n,i){void 0===i&&(i={});var s=new u(t,r,n,e,i);return a.push(s),function(){s._deregistered=!0,o.removeFrom(a)(s)}}var i=e._registeredHooks=e._registeredHooks||{},a=i[r.name]=[];return e[r.name]=n,n}Object.defineProperty(t,"__esModule",{value:!0});var o=r(3),a=r(5),s=r(56),l=r(96);t.matchState=n;var u=function(){function e(e,t,r,n,i){void 0===i&&(i={}),this.tranSvc=e,this.eventType=t,this.callback=r,this.matchCriteria=n,this.priority=i.priority||0,this.bind=i.bind||null,this._deregistered=!1}return e.prototype._matchingNodes=function(e,t){if(!0===t)return e;var r=e.filter(function(e){return n(e.state,t)});return r.length?r:null},e.prototype._getDefaultMatchCriteria=function(){return o.map(this.tranSvc._pluginapi._getPathTypes(),function(){return!0})},e.prototype._getMatchingNodes=function(e){var t=this,r=o.extend(this._getDefaultMatchCriteria(),this.matchCriteria);return o.values(this.tranSvc._pluginapi._getPathTypes()).reduce(function(n,i){var a=i.scope===s.TransitionHookScope.STATE,l=e[i.name]||[],u=a?l:[o.tail(l)];return n[i.name]=t._matchingNodes(u,r[i.name]),n},{})},e.prototype.matches=function(e){var t=this._getMatchingNodes(e);return o.values(t).every(o.identity)?t:null},e}();t.RegisteredHook=u,t.makeEvent=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(6),o=r(57),a=function(){function e(t){if(t instanceof e){var r=t;this.state=r.state,this.paramSchema=r.paramSchema.slice(),this.paramValues=n.extend({},r.paramValues),this.resolvables=r.resolvables.slice(),this.views=r.views&&r.views.slice()}else{var i=t;this.state=i,this.paramSchema=i.parameters({inherit:!1}),this.paramValues={},this.resolvables=i.resolvables.map(function(e){return e.clone()})}}return e.prototype.applyRawParams=function(e){var t=function(t){return[t.id,t.value(e[t.id])]};return this.paramValues=this.paramSchema.reduce(function(e,r){return n.applyPairs(e,t(r))},{}),this},e.prototype.parameter=function(e){return n.find(this.paramSchema,i.propEq("id",e))},e.prototype.equals=function(e,t){var r=this.diff(e,t);return r&&0===r.length},e.prototype.diff=function(e,t){if(this.state!==e.state)return!1;var r=t?t(this):this.paramSchema;return o.Param.changed(r,this.paramValues,e.paramValues)},e.clone=function(t){return new e(t)},e}();t.PathNode=a},function(e,t,r){"use strict";function n(e,t){function r(e){return o.isArray(e)?e:o.isDefined(e)?[e]:[]}function n(e){switch(e.length){case 0:return;case 1:return"auto"===t?e[0]:e;default:return e}}function a(e,t){return function(a){if(o.isArray(a)&&0===a.length)return a;var s=r(a),l=i.map(s,e);return!0===t?0===i.filter(l,function(e){return!e}).length:n(l)}}function s(e){return function(t,n){var i=r(t),o=r(n);if(i.length!==o.length)return!1;for(var a=0;a<i.length;a++)if(!e(i[a],o[a]))return!1;return!0}}var l=this;["encode","decode","equals","$normalize"].forEach(function(t){var r=e[t].bind(e),n="equals"===t?s:a;l[t]=n(r)}),i.extend(this,{dynamic:e.dynamic,name:e.name,pattern:e.pattern,inherit:e.inherit,is:a(e.is.bind(e),!0),$arrayMode:t})}Object.defineProperty(t,"__esModule",{value:!0});var i=r(3),o=r(5),a=function(){function e(e){this.pattern=/.*/,this.inherit=!0,i.extend(this,e)}return e.prototype.is=function(e,t){return!0},e.prototype.encode=function(e,t){return e},e.prototype.decode=function(e,t){return e},e.prototype.equals=function(e,t){return e==t},e.prototype.$subPattern=function(){var e=this.pattern.toString();return e.substr(1,e.length-2)},e.prototype.toString=function(){return"{ParamType:"+this.name+"}"},e.prototype.$normalize=function(e){return this.is(e)?e:this.decode(e)},e.prototype.$asArray=function(e,t){if(!e)return this;if("auto"===e&&!t)throw new Error("'auto' array mode is for query parameters only");return new n(this,e)},e}();t.ParamType=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(56),i=r(97),o=r(138),a=r(332),s=r(333),l=r(334),u=r(335),c=r(336),p=r(337),d=r(338),f=r(202),h=r(203),g=r(74),v=r(5),m=r(3),y=r(6),b=r(339),E=r(340);t.defaultTransOpts={location:!0,relative:null,inherit:!1,notify:!0,reload:!1,custom:{},current:function(){return null},source:"unknown"};var x=function(){function e(e){this._transitionCount=0,this._eventTypes=[],this._registeredHooks={},this._criteriaPaths={},this._router=e,this.$view=e.viewService,this._deregisterHookFns={},this._pluginapi=m.createProxyFunctions(y.val(this),{},y.val(this),["_definePathType","_defineEvent","_getPathTypes","_getEvents","getHooks"]),this._defineCorePaths(),this._defineCoreEvents(),this._registerCoreTransitionHooks()}return e.prototype.onCreate=function(e,t,r){},e.prototype.onBefore=function(e,t,r){},e.prototype.onStart=function(e,t,r){},e.prototype.onExit=function(e,t,r){},e.prototype.onRetain=function(e,t,r){},e.prototype.onEnter=function(e,t,r){},e.prototype.onFinish=function(e,t,r){},e.prototype.onSuccess=function(e,t,r){},e.prototype.onError=function(e,t,r){},e.prototype.dispose=function(e){m.values(this._registeredHooks).forEach(function(e){return e.forEach(function(t){t._deregistered=!0,m.removeFrom(e,t)})})},e.prototype.create=function(e,t){return new i.Transition(e,t,this._router)},e.prototype._defineCoreEvents=function(){var e=n.TransitionHookPhase,t=g.TransitionHook,r=this._criteriaPaths;this._defineEvent("onCreate",e.CREATE,0,r.to,!1,t.LOG_REJECTED_RESULT,t.THROW_ERROR,!0),this._defineEvent("onBefore",e.BEFORE,0,r.to),this._defineEvent("onStart",e.RUN,0,r.to),this._defineEvent("onExit",e.RUN,100,r.exiting,!0),this._defineEvent("onRetain",e.RUN,200,r.retained),this._defineEvent("onEnter",e.RUN,300,r.entering),this._defineEvent("onFinish",e.RUN,400,r.to),this._defineEvent("onSuccess",e.SUCCESS,0,r.to,!1,t.LOG_REJECTED_RESULT,t.LOG_ERROR,!0),this._defineEvent("onError",e.ERROR,0,r.to,!1,t.LOG_REJECTED_RESULT,t.LOG_ERROR,!0)},e.prototype._defineCorePaths=function(){var e=n.TransitionHookScope.STATE,t=n.TransitionHookScope.TRANSITION;this._definePathType("to",t),this._definePathType("from",t),this._definePathType("exiting",e),this._definePathType("retained",e),this._definePathType("entering",e)},e.prototype._defineEvent=function(e,t,r,n,i,a,s,l){void 0===i&&(i=!1),void 0===a&&(a=g.TransitionHook.HANDLE_RESULT),void 0===s&&(s=g.TransitionHook.REJECT_ERROR),void 0===l&&(l=!1);var u=new h.TransitionEventType(e,t,r,n,i,a,s,l);this._eventTypes.push(u),o.makeEvent(this,this,u)},e.prototype._getEvents=function(e){return(v.isDefined(e)?this._eventTypes.filter(function(t){return t.hookPhase===e}):this._eventTypes.slice()).sort(function(e,t){var r=e.hookPhase-t.hookPhase;return 0===r?e.hookOrder-t.hookOrder:r})},e.prototype._definePathType=function(e,t){this._criteriaPaths[e]={name:e,scope:t}},e.prototype._getPathTypes=function(){return this._criteriaPaths},e.prototype.getHooks=function(e){return this._registeredHooks[e]},e.prototype._registerCoreTransitionHooks=function(){var e=this._deregisterHookFns;e.addCoreResolves=a.registerAddCoreResolvables(this),e.ignored=b.registerIgnoredTransitionHook(this),e.invalid=E.registerInvalidTransitionHook(this),e.redirectTo=s.registerRedirectToHook(this),e.onExit=l.registerOnExitHook(this),e.onRetain=l.registerOnRetainHook(this),e.onEnter=l.registerOnEnterHook(this),e.eagerResolve=u.registerEagerResolvePath(this),e.lazyResolve=u.registerLazyResolveState(this),e.loadViews=c.registerLoadEnteringViews(this),e.activateViews=c.registerActivateViews(this),e.updateGlobals=p.registerUpdateGlobalState(this),e.updateUrl=d.registerUpdateUrl(this),e.lazyLoad=f.registerLazyLoadHook(this)},e}();t.TransitionService=x},function(e,t,r){"use strict";function n(e){function t(e,t,n,i,o,a){return r._runtimeServices(i,e,n,t),delete b.router,delete b.$get,b}b=this.router=new s.UIRouter,b.stateProvider=new c.StateProvider(b.stateRegistry,b.stateService),b.stateRegistry.decorator("views",l.ng1ViewsBuilder),b.stateRegistry.decorator("onExit",p.getStateHookBuilder("onExit")),b.stateRegistry.decorator("onRetain",p.getStateHookBuilder("onRetain")),b.stateRegistry.decorator("onEnter",p.getStateHookBuilder("onEnter")),b.viewService._pluginapi._viewConfigFactory("ng1",l.getNg1ViewConfigFactory());var r=b.locationService=b.locationConfig=new d.Ng1LocationServices(e);return d.Ng1LocationServices.monkeyPatchPathParameterType(b),b.router=b,b.$get=t,t.$inject=["$location","$browser","$sniffer","$rootScope","$http","$templateCache"],b}function i(e,t,r){s.services.$injector=e,s.services.$q=t,r.stateRegistry.get().map(function(e){return e.$$state().resolvables}).reduce(s.unnestR,[]).filter(function(e){return"deferred"===e.deps}).forEach(function(t){return t.deps=e.annotate(t.resolveFn)})}function o(e){e.$watch(function(){s.trace.approximateDigests++})}Object.defineProperty(t,"__esModule",{value:!0});var a=r(58),s=r(22),l=r(143),u=r(348),c=r(211),p=r(349),d=r(350),f=r(212);a.ng.module("ui.router.angular1",[]);var h=a.ng.module("ui.router.init",[]),g=a.ng.module("ui.router.util",["ng","ui.router.init"]),v=a.ng.module("ui.router.router",["ui.router.util"]),m=a.ng.module("ui.router.state",["ui.router.router","ui.router.util","ui.router.angular1"]),y=a.ng.module("ui.router",["ui.router.init","ui.router.state","ui.router.angular1"]),b=(a.ng.module("ui.router.compat",["ui.router"]),null);n.$inject=["$locationProvider"];var E=function(e){return["$uiRouterProvider",function(t){var r=t.router[e];return r.$get=function(){return r},r}]};i.$inject=["$injector","$q","$uiRouter"];var x=function(e){return e.urlRouterProvider=new f.UrlRouterProvider(e)},S=function(){return s.extend(b.stateProvider,{$get:function(){return b.stateService}})};o.$inject=["$rootScope"],t.watchDigests=o,h.provider("$uiRouter",n),v.provider("$urlRouter",["$uiRouterProvider",x]),g.provider("$urlService",E("urlService")),g.provider("$urlMatcherFactory",["$uiRouterProvider",function(){return b.urlMatcherFactory}]),g.provider("$templateFactory",function(){return new u.TemplateFactory}),m.provider("$stateRegistry",E("stateRegistry")),m.provider("$uiRouterGlobals",E("globals")),m.provider("$transitions",E("transitionService")),m.provider("$state",["$uiRouterProvider",S]),m.factory("$stateParams",["$uiRouter",function(e){return e.globals.params}]),y.factory("$view",function(){return b.viewService}),y.service("$trace",function(){return s.trace}),y.run(o),g.run(["$urlMatcherFactory",function(e){}]),m.run(["$state",function(e){}]),v.run(["$urlRouter",function(e){}]),h.run(i),t.getLocals=function(e){return e.getTokens().filter(s.isString).map(function(t){var r=e.getResolvable(t);return[t,"NOWAIT"===e.getPolicy(r).async?r.promise:r.data]}).reduce(s.applyPairs,{})}},function(e,t,r){"use strict";function n(){var e=null;return function(t,r){return e=e||o.services.$injector.get("$templateFactory"),[new l(t,r,e)]}}function i(e){if(!e.parent)return{};var t=["templateProvider","templateUrl","template","notify","async"],r=["controller","controllerProvider","controllerAs","resolveAs"],n=["component","bindings","componentProvider"],i=t.concat(r),s=n.concat(i);if(o.isDefined(e.views)&&a(s,e))throw new Error("State '"+e.name+"' has a 'views' object. It cannot also have \"view properties\" at the state level.  Move the following properties into a view (in the 'views' object):  "+s.filter(function(t){return o.isDefined(e[t])}).join(", "));var l={},u=e.views||{$default:o.pick(e,s)};return o.forEach(u,function(t,r){if(r=r||"$default",o.isString(t)&&(t={component:t}),t=o.extend({},t),a(n,t)&&a(i,t))throw new Error("Cannot combine: "+n.join("|")+" with: "+i.join("|")+" in stateview: '"+r+"@"+e.name+"'");t.resolveAs=t.resolveAs||"$resolve",t.$type="ng1",t.$context=e,t.$name=r;var s=o.ViewService.normalizeUIViewTarget(t.$context,t.$name);t.$uiViewName=s.uiViewName,t.$uiViewContextAnchor=s.uiViewContextAnchor,l[r]=t}),l}Object.defineProperty(t,"__esModule",{value:!0});var o=r(22);t.getNg1ViewConfigFactory=n;var a=function(e,t){return e.reduce(function(e,r){return e||o.isDefined(t[r])},!1)};t.ng1ViewsBuilder=i;var s=0,l=function(){function e(e,t,r){var n=this;this.path=e,this.viewDecl=t,this.factory=r,this.$id=s++,this.loaded=!1,this.getTemplate=function(e,t){return n.component?n.factory.makeComponentTemplate(e,t,n.component,n.viewDecl.bindings):n.template}}return e.prototype.load=function(){var e=this,t=o.services.$q,r=new o.ResolveContext(this.path),n=this.path.reduce(function(e,t){return o.extend(e,t.paramValues)},{}),i={template:t.when(this.factory.fromConfig(this.viewDecl,n,r)),controller:t.when(this.getController(r))};return t.all(i).then(function(t){return o.trace.traceViewServiceEvent("Loaded",e),e.controller=t.controller,o.extend(e,t.template),e})},e.prototype.getController=function(e){var t=this.viewDecl.controllerProvider;if(!o.isInjectable(t))return this.viewDecl.controller;var r=o.services.$injector.annotate(t),n=o.isArray(t)?o.tail(t):t;return new o.Resolvable("",n,r).get(e)},e}();t.Ng1ViewConfig=l},function(e,t,r){function n(e,t){this.name="NonSupportedSparqlFeatureError",this.feature=e,this.message=t||"SPARQL feature "+e+" non supported"}function i(e){this.name=ParserError,this.message=e||"Error parsing SPARQL query"}var o=r(372),a=r(10),s=a;n.prototype=new Error,n.constructor=n,i.prototype=new Error,i.constructor=i,AbstractQueryTree=function(){},AbstractQueryTree.prototype.parseQueryString=function(e){return o.parse(e)},AbstractQueryTree.prototype.parseExecutableUnit=function(e){if("select"===e.kind)return this.parseSelect(e);if("ask"===e.kind)return this.parseSelect(e);if("modify"===e.kind)return this.parseSelect(e);if("construct"===e.kind)return this.parseSelect(e);if("insertdata"===e.kind)return this.parseInsertData(e);if("deletedata"===e.kind)return this.parseInsertData(e);if("load"===e.kind)return e;if("clear"===e.kind)return e;if("drop"===e.kind)return e;if("create"===e.kind)return e;throw new Error("unknown executable unit: "+e.kind)},AbstractQueryTree.prototype.parseSelect=function(e){if(null==e)return console.log("error parsing query"),null;var t={freshCounter:0};return e.pattern=this.build(e.pattern,t),e},AbstractQueryTree.prototype.parseInsertData=function(e){return null==e?(console.log("error parsing query"),null):e},AbstractQueryTree.prototype.build=function(e,t){if("groupgraphpattern"===e.token)return this._buildGroupGraphPattern(e,t);if("basicgraphpattern"===e.token){var r={kind:"BGP",value:e.triplesContext};return r=AbstractQueryTree.translatePathExpressionsInBGP(r,t)}if("graphunionpattern"===e.token){return{kind:"UNION",value:[this.build(e.value[0],t),this.build(e.value[1],t)]}}if("graphgraphpattern"===e.token){return{kind:"GRAPH",value:this.build(e.value,t),graph:e.graph}}throw null!=e.token?new n(e.token,"Non implemented SPARQL graph pattern: '"+e.token+"'"):new i("Error parsing graph pattern: '"+JSON.stringify(e)+"'")},AbstractQueryTree.translatePathExpressionsInBGP=function(e,t){for(var r,n,i,o=[],a=0;a<e.value.length;a++)if(e.value[a].predicate&&"path"===e.value[a].predicate.token){r=e.value[a],n=e.value.slice(a+1);var l=AbstractQueryTree.translatePathExpression(r,t),u=null;if("BGP"!==l.kind){if("ZERO_OR_MORE_PATH"===l.kind||"ONE_OR_MORE_PATH"===l.kind){if(i=o.length>0?{kind:"JOIN",lvalue:{kind:"BGP",value:o},rvalue:l}:l,"ZERO_OR_MORE_PATH"===l.kind)if("var"===l.y.token&&0===l.y.value.indexOf("fresh:")&&"var"===l.x.token&&0===l.x.value.indexOf("fresh:"))for(var c=0;c<e.value.length;c++)e.value[c].object&&"var"===e.value[c].object.token&&e.value[c].object.value===l.x.value&&(u=s.clone(e.value[c],!0),u.object=l.y);else if("var"===l.y.token&&0===l.y.value.indexOf("fresh:"))for(var c=0;c<e.value.length;c++)e.value[c].subject&&"var"===e.value[c].subject.token&&e.value[c].subject.value===l.y.value&&(u=s.clone(e.value[c],!0),u.subject=l.x);if(n.length>0){var p=AbstractQueryTree.translatePathExpressionsInBGP({kind:"BGP",value:n},t);if(null!=u){var d=o.concat([u]).concat(n);return{kind:"UNION",value:[{kind:"JOIN",lvalue:i,rvalue:p},{kind:"BGP",value:d}]}}return{kind:"JOIN",lvalue:i,rvalue:p}}return i}return l}o=o.concat(l.value)}else o.push(e.value[a]);return e.value=o,e},AbstractQueryTree.translatePathExpression=function(e,t){if("element"===e.predicate.kind){if("+"===e.predicate.modifier){e.predicate.modifier=null;var r=AbstractQueryTree.translatePathExpression(e,t);return{kind:"ONE_OR_MORE_PATH",path:r,x:e.subject,y:e.object}}if("*"===e.predicate.modifier){e.predicate.modifier=null;var r=AbstractQueryTree.translatePathExpression(e,t);return{kind:"ZERO_OR_MORE_PATH",path:r,x:e.subject,y:e.object}}return e.predicate=e.predicate.value,{kind:"BGP",value:[e]}}if("sequence"===e.predicate.kind){for(var i,o,a=e.subject,l=e.object,u=e.graph,c=[],p=0;p<e.predicate.value.length;p++)p!=e.predicate.value.length-1?(i={token:"var",value:"fresh:"+t.freshCounter},t.freshCounter++):i=l,o={subject:a,predicate:e.predicate.value[p],object:i},null!=u&&(o.graph=s.clone(u,!0)),c.push(o),p!=e.predicate.value.length-1&&(a=s.clone(i,!0));var d={kind:"BGP",value:c};return AbstractQueryTree.translatePathExpressionsInBGP(d,t)}throw new n("Non supported path expression "+e.predicate.kind)},AbstractQueryTree.prototype._buildGroupGraphPattern=function(e,t){for(var r=e.filters||[],n=e.binds||[],i={kind:"EMPTY_PATTERN"},o=0;o<e.patterns.length;o++){var a=e.patterns[o];if("optionalgraphpattern"===a.token){var s=this.build(a.value,t);i="FILTER"===s.kind?{kind:"LEFT_JOIN",lvalue:i,rvalue:s.value,filter:s.filter}:{kind:"LEFT_JOIN",lvalue:i,rvalue:s,filter:!0}}else{var s=this.build(a,t);i="EMPTY_PATTERN"==i.kind?s:{kind:"JOIN",lvalue:i,rvalue:s}}}if(i.binds=n,0!=r.length){if("EMPTY_PATTERN"===i.kind)return{kind:"FILTER",filter:r,value:i};if("LEFT_JOIN"===i.kind&&!0===i.filter)return{kind:"FILTER",filter:r,value:i};if("LEFT_JOIN"===i.kind)return{kind:"FILTER",filter:r,value:i};if("JOIN"===i.kind)return{kind:"FILTER",filter:r,value:i};if("UNION"===i.kind)return{kind:"FILTER",filter:r,value:i};if("GRAPH"===i.kind)return{kind:"FILTER",filter:r,value:i};if("BGP"===i.kind)return{kind:"FILTER",filter:r,value:i};throw new Error("Unknow kind of algebra expression: "+i.kind)}return i},AbstractQueryTree.prototype.collectBasicTriples=function(e,t){if(null==t&&(t=[]),"select"===e.kind)t=this.collectBasicTriples(e.pattern,t);else if("BGP"===e.kind)t=t.concat(e.value);else if("ZERO_OR_MORE_PATH"===e.kind)t=this.collectBasicTriples(e.path);else if("UNION"===e.kind)t=this.collectBasicTriples(e.value[0],t),t=this.collectBasicTriples(e.value[1],t);else if("GRAPH"===e.kind)t=this.collectBasicTriples(e.value,t);else if("LEFT_JOIN"===e.kind||"JOIN"===e.kind)t=this.collectBasicTriples(e.lvalue,t),t=this.collectBasicTriples(e.rvalue,t);else if("FILTER"===e.kind)t=this.collectBasicTriples(e.value,t);else if("construct"===e.kind)t=this.collectBasicTriples(e.pattern,t);else if("EMPTY_PATTERN"!==e.kind)throw"Unknown pattern: "+e.kind;return t},AbstractQueryTree.prototype.bind=function(e,t){if(null!=e.graph&&e.graph.token&&"var"===e.graph.token&&null!=t[e.graph.value]&&(e.graph=t[e.graph.value]),null!=e.filter){for(var r=[],n=0;n<e.filter.length;n++)e.filter[n].value=this._bindFilter(e.filter[n].value,t),r.push(e.filter[n]);e.filter=r}if("select"===e.kind)e.pattern=this.bind(e.pattern,t);else if("BGP"===e.kind)e.value=this._bindTripleContext(e.value,t);else if("ZERO_OR_MORE_PATH"===e.kind)e.path=this._bindTripleContext(e.path,t),e.x&&"var"===e.x.token&&null!=t[e.x.value]&&(e.x=t[e.x.value]),e.y&&"var"===e.y.token&&null!=t[e.y.value]&&(e.y=t[e.y.value]);else if("UNION"===e.kind)e.value[0]=this.bind(e.value[0],t),e.value[1]=this.bind(e.value[1],t);else if("GRAPH"===e.kind)e.value=this.bind(e.value,t);else if("LEFT_JOIN"===e.kind||"JOIN"===e.kind)e.lvalue=this.bind(e.lvalue,t),e.rvalue=this.bind(e.rvalue,t);else if("FILTER"===e.kind){var i=this;e.value=this.bind(e.value,t),e.filter=e.filter.map(function(e){return{token:"filter",value:i._bindFilter(e.value,t)}})}else if("EMPTY_PATTERN"!==e.kind)throw"Unknown pattern: "+e.kind;return e},AbstractQueryTree.prototype._bindTripleContext=function(e,t){for(var r=0;r<e.length;r++){delete e[r].graph,delete e[r].variables;for(var n in e[r]){var i=e[r][n];"var"===i.token&&null!=t[i.value]&&(e[r][n]=t[i.value])}}return e},AbstractQueryTree.prototype._bindFilter=function(e,t){if(null!=e.expressionType){var r=e.expressionType;if("relationalexpression"==r)e.op1=this._bindFilter(e.op1,t),e.op2=this._bindFilter(e.op2,t);else if("conditionalor"==r||"conditionaland"==r)for(var n=0;n<e.operands.length;n++)e.operands[n]=this._bindFilter(e.operands[n],t);else if("additiveexpression"==r){e.summand=this._bindFilter(e.summand,t);for(var n=0;n<e.summands.length;n++)e.summands[n].expression=this._bindFilter(e.summands[n].expression,t)}else if("builtincall"==r)for(var n=0;n<e.args.length;n++)e.args[n]=this._bindFilter(e.args[n],t);else if("multiplicativeexpression"==r){e.factor=this._bindFilter(e.factor,t);for(var n=0;n<e.factors.length;n++)e.factors[n].expression=this._bindFilter(e.factors[n].expression,t)}else if("unaryexpression"==r)e.expression=this._bindFilter(e.expression,t);else if("irireforfunction"==r)for(var n=0;n<e.factors.args;n++)e.args[n]=this._bindFilter(e.args[n],t);else if("atomic"==r&&"var"==e.primaryexpression&&null!=t[e.value.value]){var i=t[e.value.value];"uri"===i.token?e.primaryexpression="iri":e.primaryexpression="literal",e.value=i}}return e},AbstractQueryTree.prototype.replace=function(e,t,r,n){if(null!=e.graph&&e.graph.token&&e.graph.token===t.token&&e.graph.value==t.value&&(e.graph=s.clone(r,!0)),null!=e.filter){for(var i=[],o=0;o<e.filter.length;o++)e.filter[o].value=this._replaceFilter(e.filter[o].value,t,r,n),i.push(e.filter[o]);e.filter=i}if("select"===e.kind)e.pattern=this.replace(e.pattern,t,r,n);else if("BGP"===e.kind)e.value=this._replaceTripleContext(e.value,t,r,n);else if("ZERO_OR_MORE_PATH"===e.kind)e.path=this._replaceTripleContext(e.path,t,r,n),e.x&&e.x.token===t.token&&e.value===t.value&&(e.x=s.clone(r,!0)),e.y&&e.y.token===t.token&&e.value===t.value&&(e.y=s.clone(r,!0));else if("UNION"===e.kind)e.value[0]=this.replace(e.value[0],t,r,n),e.value[1]=this.replace(e.value[1],t,r,n);else if("GRAPH"===e.kind)e.value=this.replace(e.value,t,r);else if("LEFT_JOIN"===e.kind||"JOIN"===e.kind)e.lvalue=this.replace(e.lvalue,t,r,n),e.rvalue=this.replace(e.rvalue,t,r,n);else if("FILTER"===e.kind)e.value=this._replaceFilter(e.value,t,r,n);else if("EMPTY_PATTERN"!==e.kind)throw"Unknown pattern: "+e.kind;return e},AbstractQueryTree.prototype._replaceTripleContext=function(e,t,r,n){for(var i=0;i<e.length;i++)for(var o in e[i]){var s=e[i][o];"var"===s.token&&"var"===t.token&&s.value===t.value?e[i][o]=r:"blank"===s.token&&"blank"===t.token&&s.value===t.value?e[i][o]=r:"literal"!==s.token&&"uri"!==s.token||"literal"!==t.token&&"uri"!==t.token||s.token!==t.token||a.lexicalFormTerm(s,n)[s.token]!==a.lexicalFormTerm(t,n)[s.token]||(e[i][o]=r)}return e},AbstractQueryTree.prototype._replaceFilter=function(e,t,r,n){if(null!=e.expressionType){var i=e.expressionType;if("relationalexpression"==i)e.op1=this._replaceFilter(e.op1,t,r,n),e.op2=this._replaceFilter(e.op2,t,r,n);else if("conditionalor"==i||"conditionaland"==i)for(var o=0;o<e.operands.length;o++)e.operands[o]=this._replaceFilter(e.operands[o],t,r,n);else if("additiveexpression"==i){e.summand=this._replaceFilter(e.summand,t,r,n);for(var o=0;o<e.summands.length;o++)e.summands[o].expression=this._replaceFilter(e.summands[o].expression,t,r,n)}else if("builtincall"==i)for(var o=0;o<e.args.length;o++)e.args[o]=this._replaceFilter(e.args[o],t,r,n);else if("multiplicativeexpression"==i){e.factor=this._replaceFilter(e.factor,t,r,n);for(var o=0;o<e.factors.length;o++)e.factors[o].expression=this._replaceFilter(e.factors[o].expression,t,r,n)}else if("unaryexpression"==i)e.expression=this._replaceFilter(e.expression,t,r,n);else if("irireforfunction"==i)for(var o=0;o<e.factors.args;o++)e.args[o]=this._replaceFilter(e.args[o],t,r,n);else if("atomic"==i){var a=null;e.primaryexpression==t.token&&e.value==t.value?a=r.value:"iri"==e.primaryexpression&&"uri"==t.token&&e.value==t.value&&(a=r.value),null!=a&&("uri"===r.token?e.primaryexpression="iri":e.primaryexpression=r.token,e.value=a)}}return e},AbstractQueryTree.prototype.treeWithUnion=function(e){if(null==e)return!1;if(null==e.kind)return!1;if("select"===e.kind)return this.treeWithUnion(e.pattern);if("BGP"===e.kind)return this.treeWithUnion(e.value);if("ZERO_OR_MORE_PATH"===e.kind)return!1;if("UNION"===e.kind){if(null==e.value[0].value||null==e.value[0].value.variables||null==e.value[1].value||null==e.value[1].value.variables)return!0;if(e.value[0].variables.join("/")===e.values[1].variables.join("/"))return!!this.treeWithUnion(e.value[0])||this.treeWithUnion(e.value[1])}else{if("GRAPH"===e.kind)return!1;if("LEFT_JOIN"!==e.kind&&"JOIN"!==e.kind)return"FILTER"!==e.kind&&(e.kind,!1);if(this.treeWithUnion(e.lvalue))return!0;this.treeWithUnion(e.rvalue)}},e.exports={AbstractQueryTree:AbstractQueryTree,NonSupportedSparqlFeatureError:n,SparqlParserError:i}},function(e,t,r){"use strict";var n=r(10),i=n,o=n.nextTick,a=function(e,t){if(0!=arguments.length){this.order=e,this.root=this._allocateNode(),this.root.isLeaf=!0,this.root.level=0;var r=this;this._diskWrite(this.root,function(e){r.root=e,r._updateRootNode(r.root,function(e){r.comparator=function(e,t){return e<t?-1:e>t?1:0},r.merger=null,null!=t&&t(r)})})}};a.prototype._allocateNode=function(){return new s},a.prototype._diskWrite=function(e,t){o(function(){t(e)})},a.prototype._diskRead=function(e,t){o(function(){t(e)})},a.prototype._diskDelete=function(e,t){o(function(){t()})},a.prototype._updateRootNode=function(e,t){t(e)},a.prototype.search=function(e,t,r){var n=this.root,i=this;i.__search(i,e,n,t,r)},a.prototype.__search=function(e,t,r,n,i){for(var o=0;o<r.numberActives&&1===e.comparator(t,r.keys[o].key);)o++;o<r.numberActives&&0===e.comparator(r.keys[o].key,t)?n(null!=i&&1==i?!0:r.keys[o].data):!0===r.isLeaf?n(null):e._diskRead(r.children[o],function(r){e.__search(e,t,r,n,i)})},a.prototype.walk=function(e,t){this.__walk(this,this.root,e,t)},a.prototype.__walk=function(e,t,r,n){var o=t.numberActives,a=0;if(t.isLeaf){for(a=0;a<t.numberActives;a++)r(t.keys[a]);return n()}i.whilst(function(){return a<o},function(n){e._diskRead(t.children[a],function(i){e.__walk(e,i,r,function(){e._diskRead(t.keys[a],function(e){r(e),a++,n()})})})},function(){e._diskRead(t.children[o],function(t){e.__walk(e,t,r,function(){n()})})})},a.prototype.walkNodes=function(e){this.__walkNodes(this,root,e,function(){})},a.prototype.__walkNodes=function(e,t,r,n){if(t.isLeaf)return r(t),n();r(t);var o=t.numberActives,a=0;i.whilst(function(){return a<o},function(n){e._diskRead(t.children[a],function(t){e.__walkNodes(e,t,r,function(){a++,n()})})},function(){e._diskRead(t.children[o],function(t){e.__walkNodes(e,t,r,function(){})})})},a.prototype._splitChild=function(e,t,r,n){var i=this._allocateNode();i.isLeaf=r.isLeaf,i.level=r.level,i.numberActives=this.order-1;var o=r.keys[this.order-1];r.keys[this.order-1]=null;for(var a=0;a<this.order-1;a++)i.keys[a]=r.keys[a+this.order],r.keys[a+this.order]=null,r.isLeaf||(i.children[a]=r.children[a+this.order],r.children[a+this.order]=null);for(r.isLeaf||(i.children[a]=r.children[a+this.order],r.children[a+this.order]=null),r.numberActives=this.order-1,a=e.numberActives+1;a>t+1;a--)e.children[a]=e.children[a-1];for(e.children[t+1]=i,a=e.numberActives;a>t;a--)e.keys[a]=e.keys[a-1];e.keys[t]=o,e.numberActives++;var s=this;this._diskWrite(i,function(i){s._diskWrite(e,function(e){e.children[t+1]=i,s._diskWrite(r,function(t){return n(e)})})})},a.prototype.insert=function(e,t,r){if(this.root.numberActives===2*this.order-1){var n=this._allocateNode();n.isLeaf=!1,n.level=this.root.level+1,n.numberActives=0,n.children[0]=this.root;var i=this;this._splitChild(n,0,this.root,function(o){n=o,i.root=n,i._updateRootNode(n,function(n){i._insertNonFull(n,e,t,r)})})}else this._insertNonFull(this.root,e,t,r)},a.prototype._insertNonFull=function(e,t,r,n){var i=e.numberActives-1;this.__insertNonFull(this,e,i,t,r,n)},a.prototype.__insertNonFull=function(e,t,r,n,i,o){if(t.isLeaf){for(;r>=0&&-1===e.comparator(n,t.keys[r].key);)t.keys[r+1]=t.keys[r],r--;r>=0&&0===e.comparator(n,t.keys[r].key)?t.keys[r]={key:n,data:i}:(t.keys[r+1]={key:n,data:i},t.numberActives++),e._diskWrite(t,function(e){return o(e)})}else{for(;r>=0&&-1===e.comparator(n,t.keys[r].key);)r--;r++;var a=e;e._diskRead(t.children[r],function(s){s.numberActives===2*a.order-1?a._splitChild(t,r,s,function(){1===a.comparator(n,t.keys[r].key)&&r++,a._diskRead(t.children[r],function(t){r=t.numberActives-1,a.__insertNonFull(e,t,r,n,i,o)})}):a._diskRead(t.children[r],function(t){r=t.numberActives-1,a.__insertNonFull(e,t,r,n,i,o)})})}},a.prototype.delete=function(e,t){var r=this.root;a.prototype.__deleteSearchNode(this,e,r,t)},a.prototype.__deleteSearchNode=function(e,t,r,n){var i=0;if(0===r.numberActives)return n(!1);for(;i<r.numberActives&&1===e.comparator(t,r.keys[i].key);)i++;var o=i;if(i<r.numberActives&&0===e.comparator(t,r.keys[i].key))return e.__deleteNodeFound(e,o,t,r,n);if(!0===r.isLeaf)return n(!1);var a=r;e._diskRead(r.children[i],function(r){if(null===r)return n(!1);var s=!1,l=!1,u=null,c=null;o===a.numberActives?(l=!0,c=a.children[o-1],u=a.children[o-1]):0===o?(s=!0,u=a.children[1],c=a.children[1]):(c=a.children[o-1],u=a.children[o+1]),e._diskRead(c,function(o){e._diskRead(u,function(u){!0===l&&(u=null),!0===s&&(o=null),r.numberActives===e.order-1&&null!=a?null!=u&&u.numberActives>e.order-1?e._moveKey(a,i,-1,function(i){e.__deleteSearchNode(e,t,r,n)}):null!=o&&o.numberActives>e.order-1?e._moveKey(a,i,1,function(i){e.__deleteSearchNode(e,t,r,n)}):null!=o&&o.numberActives===e.order-1?e._mergeSiblings(a,i,-1,function(r){e.__deleteSearchNode(e,t,r,n)}):null!=u&&u.numberActives===e.order-1&&e._mergeSiblings(a,i,1,function(r){e.__deleteSearchNode(e,t,r,n)}):e.__deleteSearchNode(e,t,r,n)})})})},a.prototype.__deleteNodeFound=function(e,t,r,n,i){return n.isLeaf&&n.numberActives>e.order-1?(e._deleteKeyFromNode(n,t,function(){i(!0)}),!0):n.isLeaf&&n===e.root?(e._deleteKeyFromNode(n,t,function(){i(!0)}),!0):(!1===n.isLeaf&&e._diskRead(n.children[t],function(o){o.numberActives>e.order-1?e._getMaxKeyPos(e,o,function(a){r=a.node.keys[a.index],n.keys[t]=r,e._diskWrite(n,function(t){t=o,r=r.key,e.__deleteSearchNode(e,r,t,i)})}):e._diskRead(n.children[t+1],function(a){a.numberActives>e.order-1?e._getMinKeyPos(e,a,function(o){r=o.node.keys[o.index],n.keys[t]=r,e._diskWrite(n,function(t){t=a,r=r.key,e.__deleteSearchNode(e,r,t,i)})}):o.numberActives===e.order-1&&a.numberActives===e.order-1&&e._mergeNodes(o,n.keys[t],a,function(o){n.children[t]=o,t++;for(var a=t;a<n.numberActives;a++)n.children[a]=n.children[a+1],n.keys[a-1]=n.keys[a];n.children[a]=null,n.keys[a-1]=null,n.numberActives--,0===n.numberActives&&e.root===n&&(e.root=o),e._diskWrite(n,function(t){e.__deleteSearchNode(e,r,o,i)})})})}),void(n.isLeaf&&n.numberActives>e.order-1&&e._deleteKeyFromNode(n,t,function(t){e.__deleteSearchNode(e,r,t,i)})))},a.prototype._moveKey=function(e,t,r,n){1===r&&t--;var i=this;i._diskRead(e.children[t],function(o){i._diskRead(e.children[t+1],function(a){if(-1==r){o.keys[o.numberActives]=e.keys[t],o.children[o.numberActives+1]=a.children[0],a.children[0]=null,o.numberActives++,e.keys[t]=a.keys[0];for(var s=1;s<a.numberActives;s++)a.keys[s-1]=a.keys[s],a.children[s-1]=a.children[s];a.children[a.numberActives-1]=a.children[a.numberActives],a.numberActives--}else{a.children[a.numberActives+1]=a.children[a.numberActives];for(var s=a.numberActives;s>0;s--)a.children[s]=a.children[s-1],a.keys[s]=a.keys[s-1];a.keys[0]=null,a.children[0]=null,a.children[0]=o.children[o.numberActives],a.keys[0]=e.keys[t],a.numberActives++,o.children[o.numberActives]=null,e.keys[t]=o.keys[o.numberActives-1],o.keys[o.numberActives-1]=null,o.numberActives--}i._diskWrite(o,function(t){i._diskWrite(a,function(t){i._diskWrite(e,function(e){return n(e)})})})})})},a.prototype._mergeSiblings=function(e,t,r,n){var i,o,a,s;t===e.numberActives?(t--,a=e.children[e.numberActives-1],s=e.children[e.numberActives]):(a=e.children[t],s=e.children[t+1]);var l=this;l._diskRead(a,function(r){l._diskRead(s,function(a){var s=l._allocateNode();for(s.isLeaf=r.isLeaf,s.level=r.level,o=0;o<l.order-1;o++)s.keys[o]=r.keys[o],s.children[o]=r.children[o];for(s.keys[l.order-1]=e.keys[t],s.children[l.order-1]=r.children[l.order-1],o=0;o<l.order-1;o++)s.keys[o+l.order]=a.keys[o],s.children[o+l.order]=a.children[o];for(s.children[2*l.order-1]=a.children[l.order-1],e.children[t]=s,o=t;o<e.numberActives;o++)e.keys[o]=e.keys[o+1],e.children[o+1]=e.children[o+2];for(s.numberActives=r.numberActives+a.numberActives+1,e.numberActives--,i=e.numberActives;i<2*l.order-1;i++)e.keys[i]=null;0===e.numberActives&&l.root===e&&(l.root=s,s.level?s.isLeaf=!1:s.isLeaf=!0),l._diskWrite(s,function(t){l._diskWrite(e,function(e){l._diskDelete(r,function(){l._diskDelete(a,function(){if(l.root!==t)return n(t);l._updateRootNode(l.root,function(){return n(t)})})})})})})})},a.prototype._deleteKeyFromNode=function(e,t,r){var n=2*this.order-1;e.numberActives<n&&(n=e.numberActives);var i;if(!1===e.isLeaf)return!1;e.keys[t];for(i=t;i<n-1;i++)e.keys[i]=e.keys[i+1];e.keys.pop(),e.numberActives--,this._diskWrite(e,function(e){return r(e)})},a.prototype._mergeNodes=function(e,t,r,n){var i,o;for(i=this._allocateNode(),i.isLeaf=!0,o=0;o<e.numberActives;o++)i.keys[o]=e.keys[o],i.children[o]=e.children[o];for(i.children[e.numberActives]=e.children[e.numberActives],i.keys[e.numberActives]=t,o=0;o<r.numberActives;o++)i.keys[o+e.numberActives+1]=r.keys[o],i.children[o+e.numberActives+1]=r.children[o];i.children[2*this.order-1]=r.children[r.numberActives],i.numberActives=e.numberActives+r.numberActives+1,i.isLeaf=e.isLeaf,i.level=e.level;var a=this;this._diskWrite(i,function(t){a._diskDelete(e,function(){a._diskDelete(r,function(){return n(t)})})})},a.prototype.audit=function(e){var t=[],r=[],n=this,i=function(i){for(var o=0;o<r.length;o++)if(0===n.comparator(r[o],i)){var a=" !!! duplicated key "+i;!0===e&&console.log(a),t.push(a)}},o=null,n=this;return this.walkNodes(function(a){!0===e&&(console.log("--- Node at "+a.level+" level"),console.log(" - leaf? "+a.isLeaf),console.log(" - num actives? "+a.numberActives),console.log(" - keys: "));for(var s=a.numberActives;s<a.keys.length;s++)null!=a.keys[s]&&!0===e&&(console.log(" * warning : redundant key data"),t.push(" * warning : redundant key data"));for(var s=a.numberActives+1;s<a.children.length;s++)null!=a.children[s]&&!0===e&&(console.log(" * warning : redundant children data"),t.push(" * warning : redundant key data"));if(!1===a.isLeaf)for(var s=0;s<a.numberActives;s++){var l=this._diskRead(a.children[s]).keys[this._diskRead(a.children[s]).numberActives-1].key,u=this._diskRead(a.children[s+1]).keys[0].key;if(!0===e&&console.log("   "+a.keys[s].key+"("+l+","+u+")"),-1===n.comparator(a.keys[s].key,l)){var c=" !!! value max left "+l+" > key "+a.keys[s].key;!0===e&&console.log(c),t.push(c)}if(1===n.comparator(a.keys[s].key,u)){var c=" !!! value min right "+u+" < key "+a.keys[s].key;!0===e&&console.log(c),t.push(c)}i(a.keys[s].key),r.push(a.keys[s].key)}else{if(null===o)o=a.level;else if(o!=a.level){var c=" !!! Leaf node with wrong level value";!0===e&&console.log(c),t.push(c)}for(var s=0;s<a.numberActives;s++)!0===e&&console.log(" "+a.keys[s].key),i(a.keys[s].key),r.push(a.keys[s].key)}if(a!=n.root){if(a.numberActives>2*n.order-1){if(!0===e)var c=" !!!! MAX num keys restriction violated ";console.log(c),t.push(c)}if(a.numberActives<n.order-1){if(!0===e)var c=" !!!! MIN num keys restriction violated ";console.log(c),t.push(c)}}}),t},a.prototype._getMaxKeyPos=function(e,t,r){var n={};return null===t?r(null):!0===t.isLeaf?(n.node=t,n.index=t.numberActives-1,r(n)):(n.node=t,n.index=t.numberActives-1,e._diskRead(t.children[t.numberActives],function(t){return e._getMaxKeyPos(e,t,r)}),void 0)},a.prototype._getMinKeyPos=function(e,t,r){var n={};if(null===t&&r(null),!0===t.isLeaf)return n.node=t,n.index=0,r(n);n.node=t,n.index=0,e._diskRead(t.children[0],function(t){return e._getMinKeyPos(e,t,r)})};var s=function(){this.numberActives=0,this.isLeaf=null,this.keys=[],this.children=[],this.level=0};e.exports={Tree:a,Node:s}},function(e,t,r){var n=r(10),i=r(213).QueryFilters;RDFModel={},RDFModel.defaultContext={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",owl:"http://www.w3.org/2002/07/owl#",xsd:"http://www.w3.org/2001/XMLSchema#",dcterms:"http://purl.org/dc/terms/",foaf:"http://xmlns.com/foaf/0.1/",cal:"http://www.w3.org/2002/12/cal/ical#",vcard:"http://www.w3.org/2006/vcard/ns# ",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",cc:"http://creativecommons.org/ns#",sioc:"http://rdfs.org/sioc/ns#",doap:"http://usefulinc.com/ns/doap#",com:"http://purl.org/commerce#",ps:"http://purl.org/payswarm#",gr:"http://purl.org/goodrelations/v1#",sig:"http://purl.org/signature#",ccard:"http://purl.org/commerce/creditcard#",ldp:"http://www.w3.org/ns/ldp#"},RDFModel.UrisMap=function(){this.defaultNs="",this.interfaceProperties=["get","remove","set","setDefault","addAll","resolve","shrink"]},RDFModel.UrisMap.prototype.values=function(){var e={};for(var t in this)n.include(this.interfaceProperties,t)||"function"==typeof this[t]||"defaultNs"===t||"interfaceProperties"===t||(e[t]=this[t]);return e},RDFModel.UrisMap.prototype.get=function(e){if(-1!=e.indexOf(" "))throw"Prefix must not contain any whitespaces";return this[e]},RDFModel.UrisMap.prototype.remove=function(e){if(-1!=e.indexOf(" "))throw"Prefix must not contain any whitespaces";return delete this[e],null},RDFModel.UrisMap.prototype.set=function(e,t){if(-1!=e.indexOf(" "))throw"Prefix must not contain any whitespaces";this[e]=t},RDFModel.UrisMap.prototype.setDefault=function(e){this.defaultNs=e},RDFModel.UrisMap.prototype.addAll=function(e,t){for(var r in e)n.include(this.interfaceProperties,r)||(null!=this[r]?!0===t&&(this[r]=e[r]):this[r]=e[r]);return this},RDFModel.UrisMap.prototype.resolve=function(e){var t=e.split(":"),r=t[0],n=t[1];return""===r?null==this.defaultNs?null:this.defaultNs+n:null!=this[r]?this[r]+n:null},RDFModel.UrisMap.prototype.shrink=function(e){for(var t in this){var r=this[t];if(0===e.indexOf(r)&&""!==r&&"defaultNs"!=t){return t+":"+e.split(r)[1]}}return e},RDFModel.Profile=function(){this.prefixes=new RDFModel.UrisMap,this.terms=new RDFModel.UrisMap},RDFModel.Profile.prototype.importProfile=function(e,t){this.prefixes.addAll(e.prefixes,t),this.terms.addAll(e.terms,t)},RDFModel.Profile.prototype.resolve=function(e){return-1!=e.indexOf(":")?this.prefixes.resolve(e):null!=this.terms[e]?this.terms.resolve(e):null},RDFModel.Profile.prototype.setDefaultPrefix=function(e){this.prefixes.setDefault(e)},RDFModel.Profile.prototype.setDefaultVocabulary=function(e){this.terms.setDefault(e)},RDFModel.Profile.prototype.setPrefix=function(e,t){this.prefixes.set(e,t)},RDFModel.Profile.prototype.setTerm=function(e,t){this.terms.set(e,t)},RDFModel.RDFEnvironment=function(){RDFModel.Profile.call(this),this.blankNodeCounter=0;var e=this;this.filters={s:function(e){return function(t){return t.subject.equals(e)}},p:function(e){return function(t){return t.predicate.equals(e)}},o:function(e){return function(t){return t.object.equals(e)}},sp:function(e,t){return function(r){return r.subject.equals(e)&&r.predicate.equals(t)}},so:function(e,t){return function(r){return r.subject.equals(e)&&r.object.equals(t)}},po:function(e,t){return function(r){return r.predicate.equals(e)&&r.object.equals(t)}},spo:function(e,t,r){return function(n){return n.subject.equals(e)&&n.predicate.equals(t)&&n.object.equals(r)}},describes:function(e){return function(t){return t.subject.equals(e)||t.object.equals(e)}},type:function(t){var r=e.resolve("rdf:type");return function(e){return e.predicate.equals(r)&&e.object.equals(t)}}};for(var t in RDFModel.defaultContext)this.prefixes.set(t,RDFModel.defaultContext[t])},RDFModel.RDFEnvironment.prototype=n.create(RDFModel.Profile.prototype,{constructor:RDFModel.RDFEnvironment}),RDFModel.RDFEnvironment.prototype.createBlankNode=function(){var e=new RDFModel.BlankNode(this.blankNodeCounter);return this.blankNodeCounter++,e},RDFModel.RDFEnvironment.prototype.createNamedNode=function(e){var t=this.resolve(e);return null!=t?new RDFModel.NamedNode(t):new RDFModel.NamedNode(e)},RDFModel.RDFEnvironment.prototype.createLiteral=function(e,t,r){return null!=r?new RDFModel.Literal(e,t,r.toString()):new RDFModel.Literal(e,t,r)},RDFModel.RDFEnvironment.prototype.createTriple=function(e,t,r){return new RDFModel.Triple(e,t,r)},RDFModel.RDFEnvironment.prototype.createGraph=function(e){var t=new RDFModel.Graph;if(null!=e)for(var r=0;r<e.length;r++)t.add(e[r]);return t},RDFModel.RDFEnvironment.prototype.createAction=function(e,t){return function(r){return e(r)?t(r):r}},RDFModel.RDFEnvironment.prototype.createProfile=function(e){if(!0===e)return new RDFModel.RDFEnvironment.Profile;var t=new RDFModel.RDFEnvironment.Profile;return t.importProfile(this),t},RDFModel.RDFEnvironment.prototype.createTermMap=function(e){if(!0===e)return new RDFModel.UrisMap;var t=this.terms.values(),r=new RDFModel.UrisMap;for(var n in t)r[n]=t[n];return r},RDFModel.RDFEnvironment.prototype.createPrefixMap=function(e){if(!0===e)return new RDFModel.UrisMap;var t=this.prefixes.values(),r=new RDFModel.UrisMap;for(var n in t)r[n]=t[n];return r},RDFModel.RDFNode=function(e){this.interfaceName=e,this.attributes=["interfaceName","nominalValue"]},RDFModel.RDFNode.prototype.equals=function(e){if(null==e.interfaceName)return this.valueOf()==e;for(var t in this.attributes){var r=this.attributes[t];if(this[r]!=e[r])return!1}return!0},RDFModel.BlankNode=function(e){RDFModel.RDFNode.call(this,"BlankNode"),this.nominalValue="_:"+e,this.bnodeId=e},RDFModel.BlankNode.prototype=n.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.BlankNode}),RDFModel.BlankNode.prototype.toString=function(){return this.nominalValue},RDFModel.BlankNode.prototype.toNT=function(){return this.nominalValue},RDFModel.BlankNode.prototype.valueOf=function(){return this.nominalValue},RDFModel.Literal=function(e,t,r){RDFModel.RDFNode.call(this,"Literal"),this.nominalValue=e,null!=t?this.language=t:null!=r&&(this.datatype=r)},RDFModel.Literal.prototype=n.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.Literal}),RDFModel.Literal.prototype.toString=function(){var e='"'+this.nominalValue+'"';return null!=this.language?e=e+"@"+this.language:(null!=this.datatype||this.type)&&(e=e+"^^<"+(this.datatype||this.type)+">"),e},RDFModel.Literal.prototype.toNT=function(){return this.toString()},RDFModel.Literal.prototype.valueOf=function(){return i.effectiveTypeValue({token:"literal",type:this.type||this.datatype,value:this.nominalValue,language:this.language})},RDFModel.NamedNode=function(e){RDFModel.RDFNode.call(this,"NamedNode"),null!=e.value?this.nominalValue=e.value:this.nominalValue=e},RDFModel.NamedNode.prototype=n.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.NamedNode}),RDFModel.NamedNode.prototype.toString=function(){return this.nominalValue},RDFModel.NamedNode.prototype.toNT=function(){return"<"+this.toString()+">"},RDFModel.NamedNode.prototype.valueOf=function(){return this.nominalValue},RDFModel.Triple=function(e,t,r){this.subject=e,this.predicate=t,this.object=r},RDFModel.Triple.prototype.equals=function(e){return this.subject.equals(e.subject)&&this.predicate.equals(e.predicate)&&this.object.equals(e.object)},RDFModel.Triple.prototype.toString=function(){return this.subject.toNT()+" "+this.predicate.toNT()+" "+this.object.toNT()+" . \r\n"},RDFModel.Graph=function(){this.triples=[],this.duplicates={},this.actions=[],this.length=0},RDFModel.Graph.prototype.add=function(e){for(var t=0;t<this.actions.length;t++)e=this.actions[t](e);var r=e.subject.toString()+e.predicate.toString()+e.object.toString();return this.duplicates[r]||(this.duplicates[r]=!0,this.triples.push(e)),this.length=this.triples.length,this},RDFModel.Graph.prototype.addAction=function(e,t){if(this.actions.push(e),1==t)for(var r=0;r<this.triples.length;r++)this.triples[r]=e(this.triples[r]);return this},RDFModel.Graph.prototype.addAll=function(e){for(var t=e.toArray(),r=0;r<t.length;r++)this.add(t[r]);return this.length=this.triples.length,this},RDFModel.Graph.prototype.remove=function(e){for(var t=null,r=0;r<this.triples.length;r++)if(this.triples[r].equals(e)){var n=e.subject.toString()+e.predicate.toString()+e.object.toString();delete this.duplicates[n],t=r;break}return null!=t&&this.triples.splice(t,1),this.length=this.triples.length,this},RDFModel.Graph.prototype.toArray=function(){return this.triples},RDFModel.Graph.prototype.some=function(e){for(var t=0;t<this.triples.length;t++)if(!0===e(this.triples[t],this))return!0;return!1},RDFModel.Graph.prototype.every=function(e){for(var t=0;t<this.triples.length;t++)if(!1===e(this.triples[t],this))return!1;return!0},RDFModel.Graph.prototype.filter=function(e){for(var t=new RDFModel.Graph,r=0;r<this.triples.length;r++)!0===e(this.triples[r],this)&&t.add(this.triples[r]);return t},RDFModel.Graph.prototype.forEach=function(e){for(var t=0;t<this.triples.length;t++)e(this.triples[t],this)},RDFModel.Graph.prototype.merge=function(e){for(var t=new RDFModel.Graph,r=0;r<this.triples.length;r++)t.add(this.triples[r]);return t},RDFModel.Graph.prototype.match=function(e,t,r,n){for(var i=new RDFModel.Graph,o=0,a=0;a<this.triples.length;a++){var s=this.triples[a];if((null==e||s.subject.equals(e))&&(null==t||s.predicate.equals(t))&&(null==r||s.object.equals(r))){if(!(null==n||o<n))return i;o++,i.add(s)}}return i},RDFModel.Graph.prototype.removeMatches=function(e,t,r){for(var n=[],i=0;i<this.triples.length;i++){var o=this.triples[i];(null==e||o.subject.equals(e))&&(null==t||o.predicate.equals(t))&&(null==r||o.object.equals(r))&&n.push(o)}for(var i=0;i<n.length;i++)this.remove(n[i]);return this},RDFModel.Graph.prototype.toNT=function(){var e="";return this.forEach(function(t){e+=t.toString()}),e},RDFModel.buildRDFResource=function(e,t,r,n){if("blank"===e.token)return RDFModel.buildBlankNode(e,t,r,n);if("literal"===e.token)return RDFModel.buildLiteral(e,t,r,n);if("uri"===e.token)return RDFModel.buildNamedNode(e,t,r,n);if("var"===e.token){var i=t[e.value];return null!=i?RDFModel.buildRDFResource(i,t,r,n):null}return null},RDFModel.buildBlankNode=function(e,t,r,n){return null!=e.valuetmp&&(e.value=e.valuetmp),0===e.value.indexOf("_:")&&(e.value=e.value.split("_:")[1]),new RDFModel.BlankNode(e.value)},RDFModel.buildLiteral=function(e,t,r,n){return new RDFModel.Literal(e.value,e.lang,e.type)},RDFModel.buildNamedNode=function(e,t,r,n){if(null!=e.value)return new RDFModel.NamedNode(e);if(null!=e.prefix){var i=r.resolveNsInEnvironment(e.prefix,n);return e.value=i+e.suffix,new RDFModel.NamedNode(e)}return new RDFModel.NamedNode(e)},RDFModel.rdf=new RDFModel.RDFEnvironment,e.exports=RDFModel},function(e,t){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function i(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!i(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,r,i,s,l,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(r=this._events[e],a(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),r.apply(this,s)}else if(o(r))for(s=Array.prototype.slice.call(arguments,1),u=r.slice(),i=u.length,l=0;l<i;l++)u[l].apply(this,s);return!0},r.prototype.addListener=function(e,t){var i;if(!n(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(i=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function r(){this.removeListener(e,r),i||(i=!0,t.apply(this,arguments))}if(!n(t))throw TypeError("listener must be a function");var i=!1;return r.listener=t,this.on(e,r),this},r.prototype.removeListener=function(e,t){var r,i,a,s;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],a=r.length,i=-1,r===t||n(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(r)){for(s=a;s-- >0;)if(r[s]===t||r[s].listener&&r[s].listener===t){i=s;break}if(i<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],n(r))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){return this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,r){function n(e,t){for(var r in e)t[r]=e[r]}function i(e,t,r){return a(e,t,r)}var o=r(59),a=o.Buffer;a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?e.exports=o:(n(o,t),t.Buffer=i),n(a,i),i.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return a(e,t,r)},i.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=a(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},i.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return a(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o.SlowBuffer(e)}},function(e,t,r){"use strict";(function(t,n){function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){A(t,e)}}function o(e){return O.from(e)}function a(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)||O.isBuffer(e)}function s(){}function l(e,t){L=L||r(47),e=e||{},this.objectMode=!!e.objectMode,t instanceof L&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var n=e.highWaterMark,o=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:o,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===e.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){m(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function u(e){if(L=L||r(47),!(D.call(u,this)||this instanceof L))return new u(e);this._writableState=new l(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),k.call(this)}function c(e,t){var r=new Error("write after end");e.emit("error",r),I(t,r)}function p(e,t,r,n){var i=!0,o=!1;return null===r?o=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),I(n,o),i=!1),i}function d(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=O.from(t,r)),t}function f(e,t,r,n,i,o){if(!r){var a=d(t,n,i);n!==a&&(r=!0,i="buffer",n=a)}var s=t.objectMode?1:n.length;t.length+=s;var l=t.length<t.highWaterMark;if(l||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else h(e,t,!1,s,n,i,o);return l}function h(e,t,r,n,i,o,a){t.writelen=n,t.writecb=a,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function g(e,t,r,n,i){--t.pendingcb,r?(I(i,n),I(w,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(i(n),e._writableState.errorEmitted=!0,e.emit("error",n),w(e,t))}function v(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function m(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(v(r),t)g(e,r,n,t,i);else{var o=x(r);o||r.corked||r.bufferProcessing||!r.bufferedRequest||E(e,r),n?N(y,e,r,o,i):y(e,r,o,i)}}function y(e,t,r,n){r||b(e,t),t.pendingcb--,n(),w(e,t)}function b(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function E(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,o=new Array(n),a=t.corkedRequestsFree;a.entry=r;for(var s=0,l=!0;r;)o[s]=r,r.isBuf||(l=!1),r=r.next,s+=1;o.allBuffers=l,h(e,t,!0,t.length,o,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new i(t)}else{for(;r;){var u=r.chunk,c=r.encoding,p=r.callback;if(h(e,t,!1,t.objectMode?1:u.length,u,c,p),r=r.next,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=r,t.bufferProcessing=!1}function x(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function S(e,t){e._final(function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),w(e,t)})}function C(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,I(S,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function w(e,t){var r=x(t);return r&&(C(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}function T(e,t,r){t.ending=!0,w(e,t),r&&(t.finished?I(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function A(e,t,r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}var I=r(103);e.exports=u;var L,N=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?n:I;u.WritableState=l;var R=r(78);R.inherits=r(35);var _={deprecate:r(383)},k=r(218),O=r(148).Buffer,P=r(219);R.inherits(u,k),l.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(l.prototype,"buffer",{get:_.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}();var D;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(D=Function.prototype[Symbol.hasInstance],Object.defineProperty(u,Symbol.hasInstance,{value:function(e){return!!D.call(this,e)||e&&e._writableState instanceof l}})):D=function(e){return e instanceof this},u.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},u.prototype.write=function(e,t,r){var n=this._writableState,i=!1,l=a(e)&&!n.objectMode;return l&&!O.isBuffer(e)&&(e=o(e)),"function"==typeof t&&(r=t,t=null),l?t="buffer":t||(t=n.defaultEncoding),"function"!=typeof r&&(r=s),n.ended?c(this,r):(l||p(this,n,e,r))&&(n.pendingcb++,i=f(this,n,l,e,t,r)),i},u.prototype.cork=function(){this._writableState.corked++},u.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||E(this,e))},u.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},u.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},u.prototype._writev=null,u.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!==e&&void 0!==e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||T(this,n,r)},Object.defineProperty(u.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),u.prototype.destroy=P.destroy,u.prototype._undestroy=P.undestroy,u.prototype._destroy=function(e,t){this.end(),t(e)}}).call(t,r(28),r(104).setImmediate)},function(e,t,r){(function(t){function r(e){if(!(this instanceof r))return new r(e);if(e&&e.lineMode){this._tripleQuotedString=this._number=this._boolean=/$0^/;var t=this;this._tokenize=this.tokenize,this.tokenize=function(e,r){this._tokenize(e,function(e,n){!e&&/^(?:IRI|prefixed|literal|langcode|type|\.|eof)$/.test(n.type)?r&&r(e,n):r&&r(e||t._syntaxError(n.type,r=null))})}}}var n=String.fromCharCode,i="function"==typeof t?t:function(e){setTimeout(e,0)},o=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\[uU]|\\(.)/g,a={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},s=/[\x00-\x20<>\\"\{\}\|\^\`]/;r.prototype={_iri:/^<((?:[^>\\]|\\[uU])+)>/,_unescapedIri:/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>/,_unescapedString:/^"[^"\\]+"(?=[^"\\])/,_singleQuotedString:/^"[^"\\]*(?:\\.[^"\\]*)*"(?=[^"\\])|^'[^'\\]*(?:\\.[^'\\]*)*'(?=[^'\\])/,_tripleQuotedString:/^""("[^"\\]*(?:(?:\\.|"(?!""))[^"\\]*)*")""|^''('[^'\\]*(?:(?:\\.|'(?!''))[^'\\]*)*')''/,_langcode:/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,_prefix:/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,_prefixed:/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?=\.?[,;\s#()\[\]\{\}"'<])/,_blank:/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=\.?[,;:\s#()\[\]\{\}"'<])/,_number:/^[\-+]?(?:\d+\.?\d*([eE](?:[\-\+])?\d+)|\d*\.?\d+)(?=[.,;:\s#()\[\]\{\}"'<])/,_boolean:/^(?:true|false)(?=[.,;:\s#()\[\]\{\}"'<])/,_keyword:/^@[a-z]+(?=[\s#<:])/,_sparqlKeyword:/^(?:PREFIX|BASE|GRAPH)(?=[\s#<:])/i,_shortPredicates:/^a(?=\s+|<)/,_newline:/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,_whitespace:/^[ \t]+/,_endOfFile:/^(?:#[^\n\r]*)?$/,_tokenizeToEnd:function(e,t){function r(t){e(t._syntaxError(/^\S*/.exec(n)[0]))}for(var n=this._input;;){for(var i;i=this._newline.exec(n);)n=n.substr(i[0].length,n.length),this._line++;if((i=this._whitespace.exec(n))&&(n=n.substr(i[0].length,n.length)),this._endOfFile.test(n))return t&&e(n=null,{line:this._line,type:"eof",value:"",prefix:""}),this._input=n;var o,a=this._line,l="",u="",c="",p=n[0],d=null,f=0,h=!1;switch(p){case"^":if(1===n.length)break;if("^"!==n[1])return r(this);if(this._prevTokenType="^",n=n.substr(2),"<"!==n[0]){h=!0;break}case"<":if(d=this._unescapedIri.exec(n))l="IRI",u=d[1];else if(d=this._iri.exec(n)){if(null===(o=this._unescape(d[1]))||s.test(o))return r(this);l="IRI",u=o}break;case"_":((d=this._blank.exec(n))||t&&(d=this._blank.exec(n+" ")))&&(l="prefixed",c="_",u=d[1]);break;case'"':case"'":if(d=this._unescapedString.exec(n))l="literal",u=d[0];else if(d=this._singleQuotedString.exec(n)){if(null===(o=this._unescape(d[0])))return r(this);l="literal",u=o.replace(/^'|'$/g,'"')}else if(d=this._tripleQuotedString.exec(n)){if(o=d[1]||d[2],this._line+=o.split(/\r\n|\r|\n/).length-1,null===(o=this._unescape(o)))return r(this);l="literal",u=o.replace(/^'|'$/g,'"')}break;case"@":"literal"===this._prevTokenType&&(d=this._langcode.exec(n))?(l="langcode",u=d[1]):(d=this._keyword.exec(n))&&(l=d[0]);break;case".":if(1===n.length?t:n[1]<"0"||n[1]>"9"){l=".",f=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(d=this._number.exec(n))&&(l="literal",u='"'+d[0]+'"^^http://www.w3.org/2001/XMLSchema#'+(d[1]?"double":/^[+\-]?\d+$/.test(d[0])?"integer":"decimal"));break;case"B":case"b":case"p":case"P":case"G":case"g":(d=this._sparqlKeyword.exec(n))?l=d[0].toUpperCase():h=!0;break;case"f":case"t":(d=this._boolean.exec(n))?(l="literal",u='"'+d[0]+'"^^http://www.w3.org/2001/XMLSchema#boolean'):h=!0;break;case"a":(d=this._shortPredicates.exec(n))?(l="abbreviation",u="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"):h=!0;break;case",":case";":case"[":case"]":case"(":case")":case"{":case"}":f=1,l=p;break;default:h=!0}if(h&&("@prefix"!==this._prevTokenType&&"PREFIX"!==this._prevTokenType||!(d=this._prefix.exec(n))?((d=this._prefixed.exec(n))||t&&(d=this._prefixed.exec(n+" ")))&&(l="prefixed",c=d[1]||"",u=this._unescape(d[2])):(l="prefix",u=d[1]||"")),"^"===this._prevTokenType&&(l="IRI"===l||"prefixed"===l?"type":""),!l)return t||!/^'''|^"""/.test(n)&&/\n|\r/.test(n)?r(this):this._input=n;e(null,{line:a,type:l,value:u,prefix:c}),this._prevTokenType=l,n=n.substr(f||d[0].length,n.length)}},_unescape:function(e){try{return e.replace(o,function(e,t,r,i){var o;if(t){if(o=parseInt(t,16),isNaN(o))throw new Error;return n(o)}if(r){if(o=parseInt(r,16),isNaN(o))throw new Error;return o<=65535?n(o):n(55296+(o-=65536)/1024,56320+(1023&o))}var s=a[i];if(!s)throw new Error;return s})}catch(e){return null}},_syntaxError:function(e){return this._input=null,new Error('Syntax error: unexpected "'+e+'" on line '+this._line+".")},tokenize:function(e,t){function r(e){null!==o._input&&(o._input+=e,o._tokenizeToEnd(t,!1))}function n(){null!==o._input&&o._tokenizeToEnd(t,!0)}var o=this;this._line=1,"string"==typeof e?(this._input=e,i(function(){o._tokenizeToEnd(t,!0)})):(this._input="",e&&"function"!=typeof e?("function"==typeof e.setEncoding&&e.setEncoding("utf8"),e.on("data",r),e.on("end",n)):(this.addChunk=r,this.end=n,t||(t=e)))}},e.exports=r}).call(t,r(104).setImmediate)},function(e,t,r){function n(e){if(!(this instanceof n))return new n(e);this._tripleStack=[],this._graph=null,e=e||{},this._setBase(e.documentIRI);var t="string"==typeof e.format&&e.format.match(/\w*$/)[0].toLowerCase(),r="turtle"===t,a="trig"===t,s=/triple/.test(t),l=/quad/.test(t),u=s||l;(this._supportsNamedGraphs=!r)||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(r||a||s),u&&(this._base="",this._resolveIRI=function(e){return this._error("Disallowed relative IRI",e),this._callback=i,this._subject=null}),this._blankNodePrefix="string"!=typeof e.blankNodePrefix?"":"_:"+e.blankNodePrefix.replace(/^_:/,""),this._lexer=e.lexer||new o({lineMode:u})}function i(){}var o=r(150),a="http://www.w3.org/1999/02/22-rdf-syntax-ns#",s=a+"nil",l=a+"first",u=/^[a-z][a-z0-9+.-]*:/i,c=/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i,p=/(?:^|\/)\.\.?(?:$|[\/#?])/,d=0,f=0;n._resetBlankNodeIds=function(){d=f=0},n.prototype={_setBase:function(e){if(e){if(e.indexOf("#")>=0)throw new Error("Invalid base IRI "+e)}else e=null;(this._base=e)&&(this._basePath=e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(c),this._baseRoot=e[0],this._baseScheme=e[1])},_readInTopContext:function(e){switch(e.type){case"eof":return null!==this._graph?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"@prefix":return this._sparqlStyle=!1,this._readPrefix;case"PREFIX":return this._sparqlStyle=!0,this._readPrefix;case"@base":return this._sparqlStyle=!1,this._readBaseIRI;case"BASE":return this._sparqlStyle=!0,this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}},_readSubject:function(e){switch(this._predicate=null,e.type){case"IRI":null===this._base||u.test(e.value)?this._subject=e.value:this._subject=this._resolveIRI(e);break;case"prefixed":var t=this._prefixes[e.prefix];if(void 0===t)return this._error('Undefined prefix "'+e.prefix+':"',e);this._subject=t+e.value;break;case"[":return this._subject="_:b"+f++,this._tripleStack.push({subject:this._subject,predicate:null,object:null,type:"blank"}),this._readBlankNodeHead;case"(":return this._tripleStack.push({subject:s,predicate:null,object:null,type:"list"}),this._subject=null,this._readListItem;case"}":return this._readPunctuation(e);default:return this._error("Expected subject but got "+e.type,e)}return this._readPredicateOrNamedGraph},_readPredicate:function(e){var t=e.type;switch(t){case"IRI":case"abbreviation":null===this._base||u.test(e.value)?this._predicate=e.value:this._predicate=this._resolveIRI(e);break;case"prefixed":if("_"===e.prefix)return this._error("Disallowed blank node as predicate",e);var r=this._prefixes[e.prefix];if(void 0===r)return this._error('Undefined prefix "'+e.prefix+':"',e);this._predicate=r+e.value;break;case".":case"]":case"}":return null===this._predicate?this._error("Unexpected "+t,e):(this._subject=null,"]"===t?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return this._readPredicate;default:return this._error('Expected predicate to follow "'+this._subject+'"',e)}return this._readObject},_readObject:function(e){switch(e.type){case"IRI":null===this._base||u.test(e.value)?this._object=e.value:this._object=this._resolveIRI(e);break;case"prefixed":var t=this._prefixes[e.prefix];if(void 0===t)return this._error('Undefined prefix "'+e.prefix+':"',e);this._object=t+e.value;break;case"literal":return this._object=e.value,this._readDataTypeOrLang;case"[":var r="_:b"+f++;return this._tripleStack.push({subject:this._subject,predicate:this._predicate,object:r,type:"blank"}),this._subject=r,this._readBlankNodeHead;case"(":return this._tripleStack.push({subject:this._subject,predicate:this._predicate,object:s,type:"list"}),this._subject=null,this._readListItem;default:return this._error('Expected object to follow "'+this._predicate+'"',e)}return this._getTripleEndReader()},_readPredicateOrNamedGraph:function(e){return"{"===e.type?this._readGraph(e):this._readPredicate(e)},_readGraph:function(e){return"{"!==e.type?this._error("Expected graph but got "+e.type,e):(this._graph=this._subject,this._subject=null,this._readSubject)},_readBlankNodeHead:function(e){return"]"===e.type?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))},_readBlankNodeTail:function(e){if("]"!==e.type)return this._readBlankNodePunctuation(e);null!==this._subject&&this._callback(null,{subject:this._subject,predicate:this._predicate,object:this._object,graph:this._graph||""});var t=this._tripleStack.pop();return this._subject=t.subject,null!==t.object?(this._predicate=t.predicate,this._object=t.object,this._getTripleEndReader()):null!==this._predicate?this._readPredicate:this._readPredicateOrNamedGraph},_readDataTypeOrLang:function(e){switch(e.type){case"type":var t;if(""===e.prefix)t=null===this._base||u.test(e.value)?e.value:this._resolveIRI(e);else{var r=this._prefixes[e.prefix];if(void 0===r)return this._error('Undefined prefix "'+e.prefix+':"',e);t=r+e.value}return this._object+="^^"+t,this._getTripleEndReader();case"langcode":return this._object+="@"+e.value.toLowerCase(),this._getTripleEndReader();default:return this._getTripleEndReader().call(this,e)}},_readListItem:function(e){var t=null,r=null,n=this._subject,i=this._tripleStack,o=i[i.length-1],a=this._readListItem;switch(e.type){case"IRI":t=null===this._base||u.test(e.value)?e.value:this._resolveIRI(e);break;case"prefixed":var c=this._prefixes[e.prefix];if(void 0===c)return this._error('Undefined prefix "'+e.prefix+':"',e);t=c+e.value;break;case"literal":t=e.value,a=this._readDataTypeOrLang;break;case"[":r="_:b"+f++,t="_:b"+f++,i.push({subject:r,predicate:l,object:t,type:"blank"}),this._subject=t,a=this._readBlankNodeHead;break;case"(":r="_:b"+f++,i.push({subject:r,predicate:l,object:s,type:"list"}),this._subject=null,a=this._readListItem;break;case")":if(i.pop(),0!==i.length&&"list"===i[i.length-1].type&&this._callback(null,{subject:o.subject,predicate:o.predicate,object:o.object,graph:this._graph||""}),this._subject=o.subject,null===o.predicate){if(a=this._readPredicate,o.subject===s)return a}else if(this._predicate=o.predicate,this._object=o.object,a=this._getTripleEndReader(),o.object===s)return a;r=s;break;default:return this._error('Expected list item instead of "'+e.type+'"',e)}return null===r&&(this._subject=r="_:b"+f++),null===n?o.object===s?o.object=r:o.subject=r:this._callback(null,{subject:n,predicate:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest",object:r,graph:this._graph||""}),null!==t&&this._callback(null,{subject:r,predicate:l,object:t,graph:this._graph||""}),a},_readPunctuation:function(e){var t,r=this._subject,n=this._graph;switch(e.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",e);this._graph=null;case".":this._subject=null,t=this._readInTopContext;break;case";":t=this._readPredicate;break;case",":t=this._readObject;break;case"IRI":if(this._supportsQuads&&null===this._graph){n=null===this._base||u.test(e.value)?e.value:this._resolveIRI(e),r=this._subject,t=this._readQuadPunctuation;break}case"prefixed":if(this._supportsQuads&&null===this._graph){var i=this._prefixes[e.prefix];if(void 0===i)return this._error('Undefined prefix "'+e.prefix+':"',e);n=i+e.value,t=this._readQuadPunctuation;break}default:return this._error('Expected punctuation to follow "'+this._object+'"',e)}return null!==r&&this._callback(null,{subject:r,predicate:this._predicate,object:this._object,graph:n||""}),t},_readBlankNodePunctuation:function(e){var t;switch(e.type){case";":t=this._readPredicate;break;case",":t=this._readObject;break;default:return this._error('Expected punctuation to follow "'+this._object+'"',e)}return this._callback(null,{subject:this._subject,predicate:this._predicate,object:this._object,graph:this._graph||""}),t},_readQuadPunctuation:function(e){return"."!==e.type?this._error("Expected dot to follow quad",e):this._readInTopContext},_readPrefix:function(e){return"prefix"!==e.type?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)},_readPrefixIRI:function(e){if("IRI"!==e.type)return this._error('Expected IRI to follow prefix "'+this._prefix+':"',e);var t;return t=null===this._base||u.test(e.value)?e.value:this._resolveIRI(e),this._prefixes[this._prefix]=t,this._prefixCallback(this._prefix,t),this._readDeclarationPunctuation},_readBaseIRI:function(e){if("IRI"!==e.type)return this._error("Expected IRI to follow base declaration",e);try{this._setBase(null===this._base||u.test(e.value)?e.value:this._resolveIRI(e))}catch(t){this._error(t.message,e)}return this._readDeclarationPunctuation},_readNamedGraphLabel:function(e){switch(e.type){case"IRI":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}},_readNamedGraphBlankLabel:function(e){return"]"!==e.type?this._error("Invalid graph label",e):(this._subject="_:b"+f++,this._readGraph)},_readDeclarationPunctuation:function(e){return this._sparqlStyle?this._readInTopContext(e):"."!==e.type?this._error("Expected declaration to end with a dot",e):this._readInTopContext},_getTripleEndReader:function(){var e=this._tripleStack;if(0===e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem}},_error:function(e,t){this._callback(new Error(e+" at line "+t.line+"."))},_resolveIRI:function(e){var t=e.value;switch(t[0]){case void 0:return this._base;case"#":return this._base+t;case"?":return this._base.replace(/(?:\?.*)?$/,t);case"/":return("/"===t[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(t);default:return this._removeDotSegments(this._basePath+t)}},_removeDotSegments:function(e){if(!p.test(e))return e;for(var t="",r=e.length,n=-1,i=-1,o=0,a="/";n<r;){switch(a){case":":if(i<0&&"/"===e[++n]&&"/"===e[++n])for(;(i=n+1)<r&&"/"!==e[i];)n=i;break;case"?":case"#":n=r;break;case"/":if("."===e[n+1])switch(a=e[++n+1]){case"/":t+=e.substring(o,n-1),o=n+1;break;case void 0:case"?":case"#":return t+e.substring(o,n)+e.substr(n+1);case".":if(void 0===(a=e[++n+1])||"/"===a||"?"===a||"#"===a){if(t+=e.substring(o,n-2),(o=t.lastIndexOf("/"))>=i&&(t=t.substr(0,o)),"/"!==a)return t+"/"+e.substr(n+1);o=n+1}}}a=e[++n]}return t+e.substring(o)},parse:function(e,t,r){this._readCallback=this._readInTopContext,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix||"_:b"+d+++"_","function"==typeof e&&(r=t,t=e,e=null),this._callback=t||i,this._prefixCallback=r||i;var n=this;this._lexer.tokenize(e,function(e,t){null!==e?(n._callback(e),n._callback=i):void 0!==n._readCallback&&(n._readCallback=n._readCallback(t))}),e||(this.addChunk=this._lexer.addChunk,this.end=this._lexer.end)}},e.exports=n},function(e,t){function r(e,t){for(var r in i)t?e.prototype[r]=n(i[r]):e[r]=i[r];return e}function n(e){return function(t){return e(this,t)}}var i={isIRI:function(e){if(!e)return e;var t=e[0];return'"'!==t&&"_"!==t},isLiteral:function(e){return e&&'"'===e[0]},isBlank:function(e){return e&&"_:"===e.substr(0,2)},getLiteralValue:function(e){var t=/^"([^]*)"/.exec(e);if(!t)throw new Error(e+" is not a literal");return t[1]},getLiteralType:function(e){var t=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(e);if(!t)throw new Error(e+" is not a literal");return t[1]||(t[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")},getLiteralLanguage:function(e){var t=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(e);if(!t)throw new Error(e+" is not a literal");return t[1]?t[1].toLowerCase():""},isPrefixedName:function(e){return e&&/^[^:\/"']*:[^:\/"']+$/.test(e)},expandPrefixedName:function(e,t){var r,n,i,o=/(?:^|"\^\^)([^:\/#"'\^_]*):[^\/]*$/.exec(e);return o&&(r=o[1],n=t[r],i=o.index),void 0===n?e:0===i?n+e.substr(r.length+1):e.substr(0,i+3)+n+e.substr(i+r.length+4)},createIRI:function(e){return e&&'"'===e[0]?i.getLiteralValue(e):e},createLiteral:function(e,t){if(!t)switch(typeof e){case"boolean":t="http://www.w3.org/2001/XMLSchema#boolean";break;case"number":if(isFinite(e)){t=e%1==0?"http://www.w3.org/2001/XMLSchema#integer":"http://www.w3.org/2001/XMLSchema#decimal";break}default:return'"'+e+'"'}return'"'+e+(/^[a-z]+(-[a-z0-9]+)*$/i.test(t)?'"@'+t.toLowerCase():'"^^'+t)},prefix:function(e){return i.prefixes({"":e})("")},prefixes:function(e){function t(e,t){if(t||!(e in r)){var n=Object.create(null);t=t||"",r[e]=function(e){return n[e]||(n[e]=t+e)}}return r[e]}var r=Object.create(null);for(var n in e)t(n,e[n]);return t}};e.exports=r(r)},function(e,t){function r(e,t){if(!(this instanceof r))return new r(e,t);if(e&&"function"!=typeof e.write&&(t=e,e=null),t=t||{},e)this._outputStream=e,this._endStream=void 0===t.end||!!t.end;else{var n="";this._outputStream={write:function(e,t,r){n+=e,r&&r()},end:function(e){e&&e(null,n)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(t.format)?this._writeTriple=this._writeTripleLine:(this._graph="",this._prefixIRIs=Object.create(null),t.prefixes&&this.addPrefixes(t.prefixes))}function n(e){var t=s[e];return void 0===t&&(1===e.length?(t=e.charCodeAt(0).toString(16),t="\\u0000".substr(0,6-t.length)+t):(t=(1024*(e.charCodeAt(0)-55296)+e.charCodeAt(1)+9216).toString(16),t="\\U00000000".substr(0,10-t.length)+t)),t}var i=/^"([^]*)"(?:\^\^(.+)|@([\-a-z]+))?$/i,o=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,a=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,s={"\\":"\\\\",'"':'\\"',"\t":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};r.prototype={_write:function(e,t){this._outputStream.write(e,"utf8",t)},_writeTriple:function(e,t,r,n,i){try{this._graph!==n&&(this._write((null===this._subject?"":this._graph?"\n}\n":".\n")+(n?this._encodeIriOrBlankNode(n)+" {\n":"")),this._subject=null,this._graph="["!==n[0]?n:"]"),this._subject===e?this._predicate===t?this._write(", "+this._encodeObject(r),i):this._write(";\n    "+this._encodePredicate(this._predicate=t)+" "+this._encodeObject(r),i):this._write((null===this._subject?"":".\n")+this._encodeSubject(this._subject=e)+" "+this._encodePredicate(this._predicate=t)+" "+this._encodeObject(r),i)}catch(e){i&&i(e)}},_writeTripleLine:function(e,t,r,n,i){delete this._prefixMatch;try{this._write(this._encodeIriOrBlankNode(e)+" "+this._encodeIriOrBlankNode(t)+" "+this._encodeObject(r)+(n?" "+this._encodeIriOrBlankNode(n)+".\n":".\n"),i)}catch(e){i&&i(e)}},_encodeIriOrBlankNode:function(e){var t=e[0];if("["===t||"("===t||"_"===t&&":"===e[1])return e;o.test(e)&&(e=e.replace(a,n));var r=this._prefixRegex.exec(e);return r?r[1]?this._prefixIRIs[r[1]]+r[2]:e:"<"+e+">"},_encodeLiteral:function(e,t,r){return o.test(e)&&(e=e.replace(a,n)),r?'"'+e+'"@'+r:t?'"'+e+'"^^'+this._encodeIriOrBlankNode(t):'"'+e+'"'},_encodeSubject:function(e){if('"'===e[0])throw new Error("A literal as subject is not allowed: "+e);return"["===e[0]&&(this._subject="]"),this._encodeIriOrBlankNode(e)},_encodePredicate:function(e){if('"'===e[0])throw new Error("A literal as predicate is not allowed: "+e);return"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"===e?"a":this._encodeIriOrBlankNode(e)},_encodeObject:function(e){if('"'!==e[0])return this._encodeIriOrBlankNode(e);var t=i.exec(e);if(!t)throw new Error("Invalid literal: "+e);return this._encodeLiteral(t[1],t[2],t[3])},_blockedWrite:function(){throw new Error("Cannot write because the writer has been closed.")},addTriple:function(e,t,r,n,i){void 0===r?this._writeTriple(e.subject,e.predicate,e.object,e.graph||"",t):"string"!=typeof n?this._writeTriple(e,t,r,"",n):this._writeTriple(e,t,r,n,i)},addTriples:function(e){for(var t=0;t<e.length;t++)this.addTriple(e[t])},addPrefix:function(e,t,r){var n={};n[e]=t,this.addPrefixes(n,r)},addPrefixes:function(e,t){var r=this._prefixIRIs,n=!1;for(var i in e){var o=e[i];/[#\/]$/.test(o)&&r[o]!==(i+=":")&&(n=!0,r[o]=i,null!==this._subject&&(this._write(this._graph?"\n}\n":".\n"),this._subject=null,this._graph=""),this._write("@prefix "+i+" <"+o+">.\n"))}if(n){var a="",s="";for(var l in r)a+=a?"|"+l:l,s+=(s?"|":"")+r[l];a=a.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&"),this._prefixRegex=new RegExp("^(?:"+s+")[^/]*$|^("+a+")([a-zA-Z][\\-_a-zA-Z0-9]*)$")}this._write(n?"\n":"",t)},blank:function(e,t){var r,n,i=e;switch(void 0===e?i=[]:"string"==typeof e?i=[{predicate:e,object:t}]:"length"in e||(i=[e]),n=i.length){case 0:return"[]";case 1:if(r=i[0],"["!==r.object[0])return"[ "+this._encodePredicate(r.predicate)+" "+this._encodeObject(r.object)+" ]";default:for(var o="[",a=0;a<n;a++)r=i[a],r.predicate===e?o+=", "+this._encodeObject(r.object):(o+=(a?";\n  ":"\n  ")+this._encodePredicate(r.predicate)+" "+this._encodeObject(r.object),e=r.predicate);return o+"\n]"}},list:function(e){for(var t=e&&e.length||0,r=new Array(t),n=0;n<t;n++)r[n]=this._encodeObject(e[n]);return"("+r.join(" ")+")"},_prefixRegex:/$0^/,end:function(e){null!==this._subject&&(this._write(this._graph?"\n}\n":".\n"),this._subject=null),this._write=this._blockedWrite;var t=e&&function(r,n){t=null,e(r,n)};if(this._endStream)try{return this._outputStream.end(t)}catch(e){}t&&t()}},e.exports=r},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectSourcesViewComponent=t.ProjectSourceInfo=t.ProjectSourcesViewComponentController=void 0;var i=r(1),o=n(i),a=r(2),s=n(a),l=r(0),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(l),c=t.ProjectSourcesViewComponentController=function(){function e(t,r,n){(0,o.default)(this,e),this.$state=t,this.projectSources=n.getProjectSources(),r.sourceId&&r.sparqlEndpoint&&r.type&&(this.projectSources.push(new p(r.sourceId,r.sparqlEndpoint,r.updateEndpoint?r.updateEndpoint:r.sparqlEndpoint,r.graphStoreEndpoint?r.graphStoreEndpoint:r.sparqlEndpoint,r.graph?r.graph:"",r.type)),t.go("projects"))}return e.$inject=["$state","$stateParams","projectService"],(0,s.default)(e,[{key:"deleteProjectSource",value:function(e){this.projectSources.splice(e,1)}},{key:"addNewProjectSource",value:function(){this.projectSources.push(new p("","","","","",""))}}]),e}(),p=t.ProjectSourceInfo=function e(t,r,n,i,a,s){(0,o.default)(this,e),this.id=t,this.sparqlEndpoint=r,this.updateEndpoint=n,this.graphStoreEndpoint=i,this.graph=a,this.type=s},d=t.ProjectSourcesViewComponent=function e(){(0,o.default)(this,e),this.controller=c,this.template=r(416)()};u.module("fibra.components.project-sources-view",["fibra.services"]).component("projectSourcesView",new d)},function(e,t,r){!function(n,i){e.exports=t=i(r(4))}(0,function(e){return function(){var t=e,r=t.lib,n=r.WordArray,i=r.Hasher,o=t.algo,a=[],s=o.SHA1=i.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],i=r[1],o=r[2],s=r[3],l=r[4],u=0;u<80;u++){if(u<16)a[u]=0|e[t+u];else{var c=a[u-3]^a[u-8]^a[u-14]^a[u-16];a[u]=c<<1|c>>>31}var p=(n<<5|n>>>27)+l+a[u];p+=u<20?1518500249+(i&o|~i&s):u<40?1859775393+(i^o^s):u<60?(i&o|i&s|o&s)-1894007588:(i^o^s)-899497514,l=s,s=o,o=i<<30|i>>>2,i=n,n=p}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+o|0,r[3]=r[3]+s|0,r[4]=r[4]+l|0},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=Math.floor(r/4294967296),t[15+(n+64>>>9<<4)]=r,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA1=i._createHelper(s),t.HmacSHA1=i._createHmacHelper(s)}(),e.SHA1})},function(e,t,r){!function(n,i){e.exports=t=i(r(4))}(0,function(e){!function(){var t=e,r=t.lib,n=r.Base,i=t.enc,o=i.Utf8,a=t.algo;a.HMAC=n.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=o.parse(t));var r=e.blockSize,n=4*r;t.sigBytes>n&&(t=e.finalize(t)),t.clamp();for(var i=this._oKey=t.clone(),a=this._iKey=t.clone(),s=i.words,l=a.words,u=0;u<r;u++)s[u]^=1549556828,l[u]^=909522486;i.sigBytes=a.sigBytes=n,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,r=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(r))}})}()})},function(e,t,r){window.console=window.console||{log:function(){}},e.exports={storage:r(546),svg:r(558),version:{"yasgui-utils":r(559).version},nestedExists:function(e){for(var t=Array.prototype.slice.call(arguments,1),r=0;r<t.length;r++){if(!e||!e.hasOwnProperty(t[r]))return!1;e=e[t[r]]}return!0}}},function(e,t,r){"use strict";var n=function(e,t){var r=e.getPrefixesFromQuery();if("string"==typeof t)i(e,t);else for(var n in t)n in r||i(e,n+": <"+t[n]+">");e.collapsePrefixes(!1)},i=function(e,t){for(var r=null,n=0,i=e.lineCount(),o=0;o<i;o++){var a=e.getNextNonWsToken(o);null==a||"PREFIX"!=a.string&&"BASE"!=a.string||(r=a,n=o)}if(null==r)e.replaceRange("PREFIX "+t+"\n",{line:0,ch:0});else{var l=s(e,n);e.replaceRange("\n"+l+"PREFIX "+t,{line:n})}e.collapsePrefixes(!1)},o=function(e,t){for(var r in t)e.setValue(e.getValue().replace(new RegExp("PREFIX\\s*"+r+":\\s*"+function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}("<"+t[r]+">")+"\\s*","ig"),""));e.collapsePrefixes(!1)},a=function(e){return e.getTokenAt({line:e.lastLine(),ch:e.getLine(e.lastLine()).length},!0).state.prefixes},s=function(e,t,r){void 0==r&&(r=1);var n=e.getTokenAt({line:t,ch:r});return null==n||void 0==n||"ws"!=n.type?"":n.string+s(e,t,n.end+1)};e.exports={addPrefixes:n,getPrefixesFromQuery:a,removePrefixes:o}},function(e,t){function r(e){return i(e)&&h.call(e,"callee")&&(!v.call(e,"callee")||g.call(e)==c)}function n(e){return null!=e&&a(e.length)&&!o(e)}function i(e){return l(e)&&n(e)}function o(e){var t=s(e)?g.call(e):"";return t==p||t==d}function a(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=u}function s(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function l(e){return!!e&&"object"==typeof e}var u=9007199254740991,c="[object Arguments]",p="[object Function]",d="[object GeneratorFunction]",f=Object.prototype,h=f.hasOwnProperty,g=f.toString,v=f.propertyIsEnumerable;e.exports=r},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return t.project===e.frontend.project.project?null:new y(e.frontend.project.project)}Object.defineProperty(t,"__esModule",{value:!0}),t.BackendRootState=void 0;var o=r(1),a=n(o);t.convertToBackendState=i;var s=r(109),l=r(273),u=n(l),c=r(274),p=n(c),d=r(313),f=n(d),h=r(314),g=n(h),v=r(315),m=n(v),y=t.BackendRootState=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en";(0,a.default)(this,e),this.project=t,this.language=r};t.default=(0,s.combineReducers)({verify:u.default,types:p.default,items:f.default,models:g.default,frontend:m.default})},function(e,t,r){"use strict";function n(e,t,r){function o(){m===v&&(m=v.slice())}function l(){return g}function u(e){if("function"!=typeof e)throw new Error("Expected listener to be a function.");var t=!0;return o(),m.push(e),function(){if(t){t=!1,o();var r=m.indexOf(e);m.splice(r,1)}}}function c(e){if(!Object(i.a)(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(y)throw new Error("Reducers may not dispatch actions.");try{y=!0,g=h(g,e)}finally{y=!1}for(var t=v=m,r=0;r<t.length;r++){(0,t[r])()}return e}function p(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");h=e,c({type:s.INIT})}function d(){var e,t=u;return e={subscribe:function(e){function r(){e.next&&e.next(l())}if("object"!=typeof e)throw new TypeError("Expected the observer to be an object.");return r(),{unsubscribe:t(r)}}},e[a.a]=function(){return this},e}var f;if("function"==typeof t&&void 0===r&&(r=t,t=void 0),void 0!==r){if("function"!=typeof r)throw new Error("Expected the enhancer to be a function.");return r(n)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var h=e,g=t,v=[],m=v,y=!1;return c({type:s.INIT}),f={dispatch:c,subscribe:u,getState:l,replaceReducer:p},f[a.a]=d,f}r.d(t,"a",function(){return s}),t.b=n;var i=r(162),o=r(267),a=r.n(o),s={INIT:"@@redux/INIT"}},function(e,t,r){"use strict";function n(e){if(!Object(a.a)(e)||Object(i.a)(e)!=s)return!1;var t=Object(o.a)(e);if(null===t)return!0;var r=p.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&c.call(r)==d}var i=r(259),o=r(264),a=r(266),s="[object Object]",l=Function.prototype,u=Object.prototype,c=l.toString,p=u.hasOwnProperty,d=c.call(Object);t.a=n},function(e,t,r){"use strict";var n=r(260),i=n.a.Symbol;t.a=i},function(e,t,r){"use strict"},function(e,t,r){"use strict";function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}t.a=n},function(e,t,r){e.exports=!r(27)&&!r(38)(function(){return 7!=Object.defineProperty(r(111)("div"),"a",{get:function(){return 7}}).a})},function(e,t,r){var n=r(39),i=r(40),o=r(278)(!1),a=r(116)("IE_PROTO");e.exports=function(e,t){var r,s=i(e),l=0,u=[];for(r in s)r!=a&&n(s,r)&&u.push(r);for(;t.length>l;)n(s,r=t[l++])&&(~o(u,r)||u.push(r));return u}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,r){e.exports=r(31)},function(e,t,r){var n=r(17).document;e.exports=n&&n.documentElement},function(e,t,r){var n=r(39),i=r(52),o=r(116)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),n(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,r){var n=r(66);e.exports=Array.isArray||function(e){return"Array"==n(e)}},function(e,t,r){var n=r(40),i=r(174).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return i(e)}catch(e){return a.slice()}};e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?s(e):i(n(e))}},function(e,t,r){var n=r(167),i=r(118).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},function(e,t,r){e.exports={default:r(304),__esModule:!0}},function(e,t,r){var n=r(25);e.exports=function(e,t,r,i){try{return i?t(n(r)[0],r[1]):t(r)}catch(t){var o=e.return;throw void 0!==o&&n(o.call(e)),t}}},function(e,t,r){var n=r(53),i=r(14)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||o[i]===e)}},function(e,t,r){var n=r(25),i=r(63),o=r(14)("species");e.exports=function(e,t){var r,a=n(e).constructor;return void 0===a||void 0==(r=n(a)[o])?t:i(r)}},function(e,t,r){var n,i,o,a=r(29),s=r(319),l=r(170),u=r(111),c=r(17),p=c.process,d=c.setImmediate,f=c.clearImmediate,h=c.MessageChannel,g=c.Dispatch,v=0,m={},y=function(){var e=+this;if(m.hasOwnProperty(e)){var t=m[e];delete m[e],t()}},b=function(e){y.call(e.data)};d&&f||(d=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return m[++v]=function(){s("function"==typeof e?e:Function(e),t)},n(v),v},f=function(e){delete m[e]},"process"==r(66)(p)?n=function(e){p.nextTick(a(y,e,1))}:g&&g.now?n=function(e){g.now(a(y,e,1))}:h?(i=new h,o=i.port2,i.port1.onmessage=b,n=a(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(n=function(e){c.postMessage(e+"","*")},c.addEventListener("message",b,!1)):n="onreadystatechange"in u("script")?function(e){l.appendChild(u("script")).onreadystatechange=function(){l.removeChild(this),y.call(e)}}:function(e){setTimeout(a(y,e,1),0)}),e.exports={set:d,clear:f}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,r){var n=r(25),i=r(26),o=r(134);e.exports=function(e,t){if(n(e),i(t)&&t.constructor===e)return t;var r=o.f(e);return(0,r.resolve)(t),r.promise}},function(e,t,r){"use strict";var n=r(17),i=r(9),o=r(24),a=r(27),s=r(14)("species");e.exports=function(e){var t="function"==typeof i[e]?i[e]:n[e];a&&t&&!t[s]&&o.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,r){var n=r(14)("iterator"),i=!1;try{var o=[7][n]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var r=!1;try{var o=[7],a=o[n]();a.next=function(){return{done:r=!0}},o[n]=function(){return a},e(o)}catch(e){}return r}},function(e,t,r){"use strict";function n(e){return function(t){return a.default.resolve(t({type:s,payload:e}))}}function i(e,t){return function(r){return a.default.resolve(r({type:l,payload:{clss:e,property:t}}))}}Object.defineProperty(t,"__esModule",{value:!0}),t.SET_FILTER_FOR_CLASS_AND_PROP=t.SET_FILTER_DIVIDER_PERCENTAGE=void 0;var o=r(132),a=function(e){return e&&e.__esModule?e:{default:e}}(o);t.setFilterDividerPercentage=n,t.setFilter=i;var s=t.SET_FILTER_DIVIDER_PERCENTAGE="SET_FILTER_DIVIDER_PERCENTAGE",l=t.SET_FILTER_FOR_CLASS_AND_PROP="SET_FILTER_FOR_CLASS_AND_PROP"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SET_ACTIVE_DIVIDER_PERCENTAGE=t.ADD_ITEM_TO_CURRENT_LAYOUT=void 0;var n=r(132),i=function(e){return e&&e.__esModule?e:{default:e}}(n),o=t.ADD_ITEM_TO_CURRENT_LAYOUT="ADD_ITEM_TO_CURRENT_LAYOUT",a=t.SET_ACTIVE_DIVIDER_PERCENTAGE="SET_ACTIVE_DIVIDER_PERCENTAGE";t.default={addItemToCurrentLayout:function(e){return function(t){return i.default.resolve(t({type:o,payload:e}))}},setActiveDividerPercentage:function(e){return function(t){return i.default.resolve(t({type:a,payload:e}))}}}},function(e,t,r){"use strict";function n(e){return void 0===e&&(e=!1),function(t,r){var n=e?-1:1,i=(t.node.state.path.length-r.node.state.path.length)*n;return 0!==i?i:r.hook.priority-t.hook.priority}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(3),o=r(5),a=r(56),s=r(74),l=function(){function e(e){this.transition=e}return e.prototype.buildHooksForPhase=function(e){var t=this;return this.transition.router.transitionService._pluginapi._getEvents(e).map(function(e){return t.buildHooks(e)}).reduce(i.unnestR,[]).filter(i.identity)},e.prototype.buildHooks=function(e){var t=this.transition,r=t.treeChanges(),o=this.getMatchingHooks(e,r);if(!o)return[];var l={transition:t,current:t.options().current},u=function(n){return n.matches(r)[e.criteriaMatchPath.name].map(function(r){var o=i.extend({bind:n.bind,traceData:{hookType:e.name,context:r}},l),u=e.criteriaMatchPath.scope===a.TransitionHookScope.STATE?r.state.self:null,c=new s.TransitionHook(t,u,n,o);return{hook:n,node:r,transitionHook:c}})};return o.map(u).reduce(i.unnestR,[]).sort(n(e.reverseSort)).map(function(e){return e.transitionHook})},e.prototype.getMatchingHooks=function(e,t){var r=e.hookPhase===a.TransitionHookPhase.CREATE,n=this.transition.router.transitionService;return(r?[n]:[this.transition,n]).map(function(t){return t.getHooks(e.name)}).filter(i.assertPredicate(o.isArray,"broken event named: "+e.name)).reduce(i.unnestR,[]).filter(function(e){return e.matches(t)})},e}();t.HookBuilder=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolvePolicies={when:{LAZY:"LAZY",EAGER:"EAGER"},async:{WAIT:"WAIT",NOWAIT:"NOWAIT",RXWAIT:"RXWAIT"}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(5),o=r(6),a=r(16),s=r(140),l=function(){function e(){this.enqueue=!0,this.typeQueue=[],this.defaultTypes=n.pick(e.prototype,["hash","string","query","path","int","bool","date","json","any"]);var t=function(e,t){return new s.ParamType(n.extend({name:t},e))};this.types=n.inherit(n.map(this.defaultTypes,t),{})}return e.prototype.dispose=function(){this.types={}},e.prototype.type=function(e,t,r){if(!i.isDefined(t))return this.types[e];if(this.types.hasOwnProperty(e))throw new Error("A type named '"+e+"' has already been defined.");return this.types[e]=new s.ParamType(n.extend({name:e},t)),r&&(this.typeQueue.push({name:e,def:r}),this.enqueue||this._flushTypeQueue()),this},e.prototype._flushTypeQueue=function(){for(;this.typeQueue.length;){var e=this.typeQueue.shift();if(e.pattern)throw new Error("You cannot override a type's .pattern at runtime.");n.extend(this.types[e.name],a.services.$injector.invoke(e.def))}},e}();t.ParamTypes=l,function(){var e=function(e){var t=function(e){return null!=e?e.toString():e},r={encode:t,decode:t,is:o.is(String),pattern:/.*/,equals:function(e,t){return e==t}};return n.extend({},r,e)};n.extend(l.prototype,{string:e({}),path:e({pattern:/[^\/]*/}),query:e({}),hash:e({inherit:!1}),int:e({decode:function(e){return parseInt(e,10)},is:function(e){return!i.isNullOrUndefined(e)&&this.decode(e.toString())===e},pattern:/-?\d+/}),bool:e({encode:function(e){return e&&1||0},decode:function(e){return 0!==parseInt(e,10)},is:o.is(Boolean),pattern:/0|1/}),date:e({encode:function(e){return this.is(e)?[e.getFullYear(),("0"+(e.getMonth()+1)).slice(-2),("0"+e.getDate()).slice(-2)].join("-"):void 0},decode:function(e){if(this.is(e))return e;var t=this.capture.exec(e);return t?new Date(t[1],t[2]-1,t[3]):void 0},is:function(e){return e instanceof Date&&!isNaN(e.valueOf())},equals:function(e,t){return["getFullYear","getMonth","getDate"].reduce(function(r,n){return r&&e[n]()===t[n]()},!0)},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/}),json:e({encode:n.toJson,decode:n.fromJson,is:o.is(Object),equals:n.equals,pattern:/[^\/]*/}),any:e({encode:n.identity,decode:n.identity,is:function(){return!0},equals:n.equals})})}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=function(){function e(e){void 0===e&&(e={}),n.extend(this,e)}return e.prototype.$inherit=function(e,t,r){var i,o=n.ancestors(t,r),a={},s=[];for(var l in o)if(o[l]&&o[l].params&&(i=Object.keys(o[l].params),i.length))for(var u in i)s.indexOf(i[u])>=0||(s.push(i[u]),a[i[u]]=this[i[u]]);return n.extend({},a,e)},e}();t.StateParams=i},function(e,t,r){"use strict";function n(e){return e.name}function i(e){return e.self.$$state=function(){return e},e.self}function o(e){return e.parent&&e.parent.data&&(e.data=e.self.data=u.inherit(e.parent.data,e.data)),e.data}function a(e){return e.parent?e.parent.path.concat(e):[e]}function s(e){var t=e.parent?u.extend({},e.parent.includes):{};return t[e.name]=!0,t}function l(e){var t=function(e){var t=h.services.$injector;return e.$inject||t&&t.annotate(e,t.strictDi)||"deferred"},r=function(e){return!(!e.token||!e.resolveFn)},n=function(e){return!(!e.provide&&!e.token||!(e.useValue||e.useFactory||e.useExisting||e.useClass))},i=function(e){return!!(e&&e.val&&(c.isString(e.val)||c.isArray(e.val)||c.isFunction(e.val)))},o=function(e){return e.provide||e.token},a=d.pattern([[d.prop("resolveFn"),function(e){return new f.Resolvable(o(e),e.resolveFn,e.deps,e.policy)}],[d.prop("useFactory"),function(e){return new f.Resolvable(o(e),e.useFactory,e.deps||e.dependencies,e.policy)}],[d.prop("useClass"),function(e){return new f.Resolvable(o(e),function(){return new e.useClass},[],e.policy)}],[d.prop("useValue"),function(e){return new f.Resolvable(o(e),function(){return e.useValue},[],e.policy,e.useValue)}],[d.prop("useExisting"),function(e){return new f.Resolvable(o(e),u.identity,[e.useExisting],e.policy)}]]),s=d.pattern([[d.pipe(d.prop("val"),c.isString),function(e){return new f.Resolvable(e.token,u.identity,[e.val],e.policy)}],[d.pipe(d.prop("val"),c.isArray),function(e){return new f.Resolvable(e.token,u.tail(e.val),e.val.slice(0,-1),e.policy)}],[d.pipe(d.prop("val"),c.isFunction),function(e){return new f.Resolvable(e.token,e.val,t(e.val),e.policy)}]]),l=d.pattern([[d.is(f.Resolvable),function(e){return e}],[r,a],[n,a],[i,s],[d.val(!0),function(e){throw new Error("Invalid resolve value: "+p.stringify(e))}]]),g=e.resolve;return(c.isArray(g)?g:function(e,t){return Object.keys(e||{}).map(function(r){return{token:r,val:e[r],deps:void 0,policy:t[r]}})}(g,e.resolvePolicy||{})).map(l)}Object.defineProperty(t,"__esModule",{value:!0});var u=r(3),c=r(5),p=r(33),d=r(6),f=r(75),h=r(16),g=function(e){if(!c.isString(e))return!1;var t="^"===e.charAt(0);return{val:t?e.substring(1):e,root:t}},v=function(e,t){return function(r){var n=r;n&&n.url&&n.name&&n.name.match(/\.\*\*$/)&&(n.url+="{remainder:any}");var i=g(n.url),o=r.parent,a=i?e.compile(i.val,{params:r.params||{},paramMap:function(e,t){return!1===n.reloadOnSearch&&t&&(e=u.extend(e||{},{dynamic:!0})),e}}):n.url;if(!a)return null;if(!e.isMatcher(a))throw new Error("Invalid url '"+a+"' in state '"+r+"'");return i&&i.root?a:(o&&o.navigable||t()).url.append(a)}},m=function(e){return function(t){return!e(t)&&t.url?t:t.parent?t.parent.navigable:null}},y=function(e){return function(t){var r=function(t,r){return e.fromConfig(r,null,t)},n=t.url&&t.url.parameters({inherit:!1})||[],i=u.values(u.mapObj(u.omit(t.params||{},n.map(d.prop("id"))),r));return n.concat(i).map(function(e){return[e.id,e]}).reduce(u.applyPairs,{})}};t.resolvablesBuilder=l;var b=function(){function e(e,t){function r(t){return p(t)?null:e.find(u.parentName(t))||c()}this.matcher=e;var u=this,c=function(){return e.find("")},p=function(e){return""===e.name};this.builders={name:[n],self:[i],parent:[r],data:[o],url:[v(t,c)],navigable:[m(p)],params:[y(t.paramFactory)],views:[],path:[a],includes:[s],resolvables:[l]}}return e.prototype.builder=function(e,t){var r=this.builders,n=r[e]||[];return c.isString(e)&&!c.isDefined(t)?n.length>1?n:n[0]:c.isString(e)&&c.isFunction(t)?(r[e]=n,r[e].push(t),function(){return r[e].splice(r[e].indexOf(t,1))&&null}):void 0},e.prototype.build=function(e){var t=this,r=t.matcher,n=t.builders,i=this.parentName(e);if(i&&!r.find(i,void 0,!1))return null;for(var o in n)if(n.hasOwnProperty(o)){var a=n[o].reduce(function(e,t){return function(r){return t(r,e)}},u.noop);e[o]=a(e)}return e},e.prototype.parentName=function(e){var t=e.name||"",r=t.split(".");if(r.length>1){if(e.parent)throw new Error("States that specify the 'parent:' property should not have a '.' in their name ("+t+")");return"**"===r.pop()&&r.pop(),r.join(".")}return e.parent?c.isString(e.parent)?e.parent:e.parent.name:""},e.prototype.name=function(e){var t=e.name;if(-1!==t.indexOf(".")||!e.parent)return t;var r=c.isString(e.parent)?e.parent:e.parent.name;return r?r+"."+t:t},e}();t.StateBuilder=b},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(5),i=r(3),o=function(){function e(e){this._states=e}return e.prototype.isRelative=function(e){return e=e||"",0===e.indexOf(".")||0===e.indexOf("^")},e.prototype.find=function(e,t,r){if(void 0===r&&(r=!0),e||""===e){var o=n.isString(e),a=o?e:e.name;this.isRelative(a)&&(a=this.resolvePath(a,t));var s=this._states[a];if(s&&(o||!(o||s!==e&&s.self!==e)))return s;if(o&&r){var l=i.values(this._states),u=l.filter(function(e){return e.__stateObjectCache.nameGlob&&e.__stateObjectCache.nameGlob.matches(a)});return u.length>1&&console.log("stateMatcher.find: Found multiple matches for "+a+" using glob: ",u.map(function(e){return e.name})),u[0]}}},e.prototype.resolvePath=function(e,t){if(!t)throw new Error("No reference point given for path '"+e+"'");for(var r=this.find(t),n=e.split("."),i=0,o=n.length,a=r;i<o;i++)if(""!==n[i]||0!==i){if("^"!==n[i])break;if(!a.parent)throw new Error("Path '"+e+"' not valid for state '"+r.name+"'");a=a.parent}else a=r;var s=n.slice(i).join(".");return a.name+(a.name&&s?".":"")+s},e}();t.StateMatcher=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(5),o=r(136),a=r(6),s=function(){function e(e,t,r,n,i){this.$registry=e,this.$urlRouter=t,this.states=r,this.builder=n,this.listeners=i,this.queue=[],this.matcher=e.matcher}return e.prototype.dispose=function(){this.queue=[]},e.prototype.register=function(e){var t=this.queue,r=o.StateObject.create(e),s=r.name;if(!i.isString(s))throw new Error("State must have a valid name");if(this.states.hasOwnProperty(s)||n.inArray(t.map(a.prop("name")),s))throw new Error("State '"+s+"' is already defined");return t.push(r),this.flush(),r},e.prototype.flush=function(){for(var e=this,t=this,r=t.queue,n=t.states,i=t.builder,o=[],a=[],s={},l=function(t){return e.states.hasOwnProperty(t)&&e.states[t]};r.length>0;){var u=r.shift(),c=u.name,p=i.build(u),d=a.indexOf(u);if(p){var f=l(c);if(f&&f.name===c)throw new Error("State '"+c+"' is already defined");var h=l(c+".**");h&&this.$registry.deregister(h),n[c]=u,this.attachRoute(u),d>=0&&a.splice(d,1),o.push(u)}else{var g=s[c];if(s[c]=r.length,d>=0&&g===r.length)return r.push(u),n;d<0&&a.push(u),r.push(u)}}return o.length&&this.listeners.forEach(function(e){return e("registered",o.map(function(e){return e.self}))}),n},e.prototype.attachRoute=function(e){!e.abstract&&e.url&&this.$urlRouter.rule(this.$urlRouter.urlRuleFactory.create(e))},e}();t.StateQueueManager=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(191),i=r(190),o=r(192),a=r(3),s=r(6),l=function(){function e(e){this._router=e,this.states={},this.listeners=[],this.matcher=new n.StateMatcher(this.states),this.builder=new i.StateBuilder(this.matcher,e.urlMatcherFactory),this.stateQueue=new o.StateQueueManager(this,e.urlRouter,this.states,this.builder,this.listeners),this._registerRoot()}return e.prototype._registerRoot=function(){var e={name:"",url:"^",views:null,params:{"#":{value:null,type:"hash",dynamic:!0}},abstract:!0};(this._root=this.stateQueue.register(e)).navigable=null},e.prototype.dispose=function(){var e=this;this.stateQueue.dispose(),this.listeners=[],this.get().forEach(function(t){return e.get(t)&&e.deregister(t)})},e.prototype.onStatesChanged=function(e){return this.listeners.push(e),function(){a.removeFrom(this.listeners)(e)}.bind(this)},e.prototype.root=function(){return this._root},e.prototype.register=function(e){return this.stateQueue.register(e)},e.prototype._deregisterTree=function(e){var t=this,r=this.get().map(function(e){return e.$$state()}),n=function(e){var t=r.filter(function(t){return-1!==e.indexOf(t.parent)});return 0===t.length?t:t.concat(n(t))},i=n([e]),o=[e].concat(i).reverse();return o.forEach(function(e){var r=t._router.urlRouter;r.rules().filter(s.propEq("state",e)).forEach(r.removeRule.bind(r)),delete t.states[e.name]}),o},e.prototype.deregister=function(e){var t=this.get(e);if(!t)throw new Error("Can't deregister state; not found: "+e);var r=this._deregisterTree(t.$$state());return this.listeners.forEach(function(e){return e("deregistered",r.map(function(e){return e.self}))}),r},e.prototype.get=function(e,t){var r=this;if(0===arguments.length)return Object.keys(this.states).map(function(e){return r.states[e].self});var n=this.matcher.find(e,t);return n&&n.self||null},e.prototype.decorator=function(e,t){return this.builder.builder(e,t)},e}();t.StateRegistry=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(5),o=r(137),a=r(16),s=r(98),l=r(139),u=r(141),c=r(73),p=r(46),d=r(57),f=r(96),h=r(99),g=r(202),v=r(6),m=function(){function e(t){this.router=t,this.invalidCallbacks=[],this._defaultErrorHandler=function(e){e instanceof Error&&e.stack?(console.error(e),console.error(e.stack)):e instanceof c.Rejection?(console.error(e.toString()),e.detail&&e.detail.stack&&console.error(e.detail.stack)):console.error(e)};var r=["current","$current","params","transition"],i=Object.keys(e.prototype).filter(v.not(n.inArray(r)));n.createProxyFunctions(v.val(e.prototype),this,v.val(this),i)}return Object.defineProperty(e.prototype,"transition",{get:function(){return this.router.globals.transition},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"params",{get:function(){return this.router.globals.params},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"current",{get:function(){return this.router.globals.current},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"$current",{get:function(){return this.router.globals.$current},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.defaultErrorHandler(n.noop),this.invalidCallbacks=[]},e.prototype._handleInvalidTargetState=function(e,t){function r(){var e=f.dequeue();return void 0===e?c.Rejection.invalid(t.error()).toPromise():a.services.$q.when(e(t,i,g)).then(v).then(function(e){return e||r()})}var n=this,i=s.PathUtils.makeTargetState(e),l=this.router.globals,u=function(){return l.transitionHistory.peekTail()},d=u(),f=new o.Queue(this.invalidCallbacks.slice()),g=new h.ResolveContext(e).injector(),v=function(e){if(e instanceof p.TargetState){var t=e;return t=n.target(t.identifier(),t.params(),t.options()),t.valid()?u()!==d?c.Rejection.superseded().toPromise():n.transitionTo(t.identifier(),t.params(),t.options()):c.Rejection.invalid(t.error()).toPromise()}};return r()},e.prototype.onInvalid=function(e){return this.invalidCallbacks.push(e),function(){n.removeFrom(this.invalidCallbacks)(e)}.bind(this)},e.prototype.reload=function(e){return this.transitionTo(this.current,this.params,{reload:!i.isDefined(e)||e,inherit:!1,notify:!1})},e.prototype.go=function(e,t,r){var i={relative:this.$current,inherit:!0},o=n.defaults(r,i,u.defaultTransOpts);return this.transitionTo(e,t,o)},e.prototype.target=function(e,t,r){if(void 0===r&&(r={}),i.isObject(r.reload)&&!r.reload.name)throw new Error("Invalid reload state object");var n=this.router.stateRegistry;if(r.reloadState=!0===r.reload?n.root():n.matcher.find(r.reload,r.relative),r.reload&&!r.reloadState)throw new Error("No such reload state '"+(i.isString(r.reload)?r.reload:r.reload.name)+"'");var o=n.matcher.find(e,r.relative);return new p.TargetState(e,o,t,r)},e.prototype.getCurrentPath=function(){var e=this,t=this.router.globals,r=t.successfulTransitions.peekTail();return r?r.treeChanges().to:function(){return[new l.PathNode(e.router.stateRegistry.root())]}()},e.prototype.transitionTo=function(e,t,r){var i=this;void 0===t&&(t={}),void 0===r&&(r={});var o=this.router,s=o.globals;r=n.defaults(r,u.defaultTransOpts);var l=function(){return s.transition};r=n.extend(r,{current:l});var d=this.target(e,t,r),f=this.getCurrentPath();if(!d.exists())return this._handleInvalidTargetState(f,d);if(!d.valid())return n.silentRejection(d.error());var h=function(e){return function(t){if(t instanceof c.Rejection){var r=o.globals.lastStartedTransitionId===e.$id;if(t.type===c.RejectType.IGNORED)return r&&o.urlRouter.update(),a.services.$q.when(s.current);var n=t.detail;if(t.type===c.RejectType.SUPERSEDED&&t.redirected&&n instanceof p.TargetState){var l=e.redirect(n);return l.run().catch(h(l))}if(t.type===c.RejectType.ABORTED)return r&&o.urlRouter.update(),a.services.$q.reject(t)}return i.defaultErrorHandler()(t),a.services.$q.reject(t)}},g=this.router.transitionService.create(f,d),v=g.run().catch(h(g));return n.silenceUncaughtInPromise(v),n.extend(v,{transition:g})},e.prototype.is=function(e,t,r){r=n.defaults(r,{relative:this.$current});var o=this.router.stateRegistry.matcher.find(e,r.relative);if(i.isDefined(o)){if(this.$current!==o)return!1;if(!t)return!0;var a=o.parameters({inherit:!0,matchingKeys:t});return d.Param.equals(a,d.Param.values(a,t),this.params)}},e.prototype.includes=function(e,t,r){r=n.defaults(r,{relative:this.$current});var o=i.isString(e)&&f.Glob.fromString(e);if(o){if(!o.matches(this.$current.name))return!1;e=this.$current.name}var a=this.router.stateRegistry.matcher.find(e,r.relative),s=this.$current.includes;if(i.isDefined(a)){if(!i.isDefined(s[a.name]))return!1;if(!t)return!0;var l=a.parameters({inherit:!0,matchingKeys:t});return d.Param.equals(l,d.Param.values(l,t),this.params)}},e.prototype.href=function(e,t,r){var o={lossy:!0,inherit:!0,absolute:!1,relative:this.$current};r=n.defaults(r,o),t=t||{};var a=this.router.stateRegistry.matcher.find(e,r.relative);if(!i.isDefined(a))return null;r.inherit&&(t=this.params.$inherit(t,this.$current,a));var s=a&&r.lossy?a.navigable:a;return s&&void 0!==s.url&&null!==s.url?this.router.urlRouter.href(s.url,t,{absolute:r.absolute}):null},e.prototype.defaultErrorHandler=function(e){return this._defaultErrorHandler=e||this._defaultErrorHandler},e.prototype.get=function(e,t){var r=this.router.stateRegistry;return 0===arguments.length?r.get():r.get(e,t||this.$current)},e.prototype.lazyLoad=function(e,t){var r=this.get(e);if(!r||!r.lazyLoad)throw new Error("Can not lazy load "+e);var n=this.getCurrentPath(),i=s.PathUtils.makeTargetState(n);return t=t||this.router.transitionService.create(n,i),g.lazyLoadState(t,r)},e}();t.StateService=m},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(196),i=r(197),o=r(141),a=r(199),s=r(193),l=r(194),u=r(200),c=r(3),p=r(5),d=r(201),f=r(34),h=0,g=function(){function e(e,t){void 0===e&&(e=d.UrlService.locationServiceStub),void 0===t&&(t=d.UrlService.locationConfigStub),this.locationService=e,this.locationConfig=t,this.$id=h++,this._disposed=!1,this._disposables=[],this.trace=f.trace,this.viewService=new a.ViewService,this.transitionService=new o.TransitionService(this),this.globals=new u.UIRouterGlobals,this.urlMatcherFactory=new n.UrlMatcherFactory,this.urlRouter=new i.UrlRouter(this),this.stateRegistry=new s.StateRegistry(this),this.stateService=new l.StateService(this),this.urlService=new d.UrlService(this),this._plugins={},this.viewService._pluginapi._rootViewContext(this.stateRegistry.root()),this.globals.$current=this.stateRegistry.root(),this.globals.current=this.globals.$current.self,this.disposable(this.globals),this.disposable(this.stateService),this.disposable(this.stateRegistry),this.disposable(this.transitionService),this.disposable(this.urlRouter),this.disposable(e),this.disposable(t)}return e.prototype.disposable=function(e){this._disposables.push(e)},e.prototype.dispose=function(e){var t=this;if(e&&p.isFunction(e.dispose))return void e.dispose(this);this._disposed=!0,this._disposables.slice().forEach(function(e){try{"function"==typeof e.dispose&&e.dispose(t),c.removeFrom(t._disposables,e)}catch(e){}})},e.prototype.plugin=function(e,t){void 0===t&&(t={});var r=new e(this,t);if(!r.name)throw new Error("Required property `name` missing on plugin: "+r);return this._disposables.push(r),this._plugins[r.name]=r},e.prototype.getPlugin=function(e){return e?this._plugins[e]:c.values(this._plugins)},e}();t.UIRouter=g},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(5),o=r(100),a=r(57),s=r(188),l=function(){function e(){var e=this;this.paramTypes=new s.ParamTypes,this._isCaseInsensitive=!1,this._isStrictMode=!0,this._defaultSquashPolicy=!1,this._getConfig=function(t){return n.extend({strict:e._isStrictMode,caseInsensitive:e._isCaseInsensitive},t)},this.paramFactory={fromConfig:function(t,r,n){return new a.Param(t,r,n,a.DefType.CONFIG,e)},fromPath:function(t,r,n){return new a.Param(t,r,n,a.DefType.PATH,e)},fromSearch:function(t,r,n){return new a.Param(t,r,n,a.DefType.SEARCH,e)}},n.extend(this,{UrlMatcher:o.UrlMatcher,Param:a.Param})}return e.prototype.caseInsensitive=function(e){return this._isCaseInsensitive=i.isDefined(e)?e:this._isCaseInsensitive},e.prototype.strictMode=function(e){return this._isStrictMode=i.isDefined(e)?e:this._isStrictMode},e.prototype.defaultSquashPolicy=function(e){if(i.isDefined(e)&&!0!==e&&!1!==e&&!i.isString(e))throw new Error("Invalid squash policy: "+e+". Valid policies: false, true, arbitrary-string");return this._defaultSquashPolicy=i.isDefined(e)?e:this._defaultSquashPolicy},e.prototype.compile=function(e,t){return new o.UrlMatcher(e,this.paramTypes,this.paramFactory,this._getConfig(t))},e.prototype.isMatcher=function(e){if(!i.isObject(e))return!1;var t=!0;return n.forEach(o.UrlMatcher.prototype,function(r,n){i.isFunction(r)&&(t=t&&i.isDefined(e[n])&&i.isFunction(e[n]))}),t},e.prototype.type=function(e,t,r){var n=this.paramTypes.type(e,t,r);return i.isDefined(t)?this:n},e.prototype.$get=function(){return this.paramTypes.enqueue=!1,this.paramTypes._flushTypeQueue(),this},e.prototype.dispose=function(){this.paramTypes.dispose()},e}();t.UrlMatcherFactory=l},function(e,t,r){"use strict";function n(e,t,r,n){return"/"===n?e:t?n.slice(0,-1)+e:r?n.slice(1)+e:e}function i(e){if(!(s.isFunction(e)||s.isString(e)||u.is(p.TargetState)(e)||p.TargetState.isDef(e)))throw new Error("'handler' must be a string, function, TargetState, or have a state: 'newtarget' property");return s.isFunction(e)?e:u.val(e)}Object.defineProperty(t,"__esModule",{value:!0});var o,a=r(3),s=r(5),l=r(100),u=r(6),c=r(198),p=r(46),d=u.prop("urlMatcher");o=a.composeSort(a.sortBy(u.pipe(u.prop("priority"),function(e){return-e})),a.sortBy(u.pipe(u.prop("type"),function(e){return{STATE:4,URLMATCHER:4,REGEXP:3,RAW:2,OTHER:1}[e]})),function(e,t){return d(e)&&d(t)?l.UrlMatcher.compare(d(e),d(t)):0},a.sortBy(u.prop("$id"),a.inArray(["REGEXP","RAW","OTHER"])));var f=function(){function e(t){this._sortFn=o,this._rules=[],this.interceptDeferred=!1,this._id=0,this._sorted=!1,this._router=t,this.urlRuleFactory=new c.UrlRuleFactory(t),a.createProxyFunctions(u.val(e.prototype),this,u.val(this))}return e.prototype.dispose=function(){this.listen(!1),this._rules=[],delete this._otherwiseFn},e.prototype.sort=function(e){this._rules.sort(this._sortFn=e||this._sortFn),this._sorted=!0},e.prototype.ensureSorted=function(){this._sorted||this.sort()},e.prototype.match=function(e){var t=this;this.ensureSorted(),e=a.extend({path:"",search:{},hash:""},e);var r=this.rules();this._otherwiseFn&&r.push(this._otherwiseFn);for(var n,i=0;i<r.length&&(!n||0===this._sortFn(r[i],n.rule));i++){var o=function(r){var n=r.match(e,t._router);return n&&{match:n,rule:r,weight:r.matchPriority(n)}}(r[i]);n=!n||o&&o.weight>n.weight?o:n}return n},e.prototype.sync=function(e){if(!e||!e.defaultPrevented){var t=this._router,r=t.urlService,n=t.stateService,i={path:r.path(),search:r.search(),hash:r.hash()},o=this.match(i);u.pattern([[s.isString,function(e){return r.url(e,!0)}],[p.TargetState.isDef,function(e){return n.go(e.state,e.params,e.options)}],[u.is(p.TargetState),function(e){return n.go(e.state(),e.params(),e.options())}]])(o&&o.rule.handler(o.match,i,t))}},e.prototype.listen=function(e){var t=this;if(!1!==e)return this._stopFn=this._stopFn||this._router.urlService.onChange(function(e){return t.sync(e)});this._stopFn&&this._stopFn(),delete this._stopFn},e.prototype.update=function(e){var t=this._router.locationService;if(e)return void(this.location=t.path());t.path()!==this.location&&t.url(this.location,!0)},e.prototype.push=function(e,t,r){var n=r&&!!r.replace;this._router.urlService.url(e.format(t||{}),n)},e.prototype.href=function(e,t,r){var i=e.format(t);if(null==i)return null;r=r||{absolute:!1};var o=this._router.urlService.config,a=o.html5Mode();if(a||null===i||(i="#"+o.hashPrefix()+i),i=n(i,a,r.absolute,o.baseHref()),!r.absolute||!i)return i;var s=!a&&i?"/":"",l=o.port();return l=80===l||443===l?"":":"+l,[o.protocol(),"://",o.host(),l,s,i].join("")},e.prototype.rule=function(e){var t=this;if(!c.UrlRuleFactory.isUrlRule(e))throw new Error("invalid rule");return e.$id=this._id++,e.priority=e.priority||0,this._rules.push(e),this._sorted=!1,function(){return t.removeRule(e)}},e.prototype.removeRule=function(e){a.removeFrom(this._rules,e)},e.prototype.rules=function(){return this.ensureSorted(),this._rules.slice()},e.prototype.otherwise=function(e){var t=i(e);this._otherwiseFn=this.urlRuleFactory.create(u.val(!0),t),this._sorted=!1},e.prototype.initial=function(e){var t=i(e),r=function(e,t){return 0===t.globals.transitionHistory.size()&&!!/^\/?$/.exec(e.path)};this.rule(this.urlRuleFactory.create(r,t))},e.prototype.when=function(e,t,r){var n=this.urlRuleFactory.create(e,t);return s.isDefined(r&&r.priority)&&(n.priority=r.priority),this.rule(n),n},e.prototype.deferIntercept=function(e){void 0===e&&(e=!0),this.interceptDeferred=e},e}();t.UrlRouter=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(100),i=r(5),o=r(3),a=r(6),s=function(){function e(e){this.router=e}return e.prototype.compile=function(e){return this.router.urlMatcherFactory.compile(e)},e.prototype.create=function(e,t){var r=this,o=a.pattern([[i.isString,function(e){return o(r.compile(e))}],[a.is(n.UrlMatcher),function(e){return r.fromUrlMatcher(e,t)}],[i.isState,function(e){return r.fromState(e,r.router)}],[a.is(RegExp),function(e){return r.fromRegExp(e,t)}],[i.isFunction,function(e){return new l(e,t)}]]),s=o(e);if(!s)throw new Error("invalid 'what' in when()");return s},e.prototype.fromUrlMatcher=function(e,t){function r(t){var r=e.exec(t.path,t.search,t.hash);return e.validates(r)&&r}function s(t){var r=e.parameters().filter(function(e){return e.isOptional});return r.length?r.filter(function(e){return t[e.id]}).length/r.length:1e-6}var u=t;i.isString(t)&&(t=this.router.urlMatcherFactory.compile(t)),a.is(n.UrlMatcher)(t)&&(u=function(e){return t.format(e)});var c={urlMatcher:e,matchPriority:s,type:"URLMATCHER"};return o.extend(new l(r,u),c)},e.prototype.fromState=function(e,t){var r=function(r){var n=t.stateService,i=t.globals;n.href(e,r)!==n.href(i.current,i.params)&&n.transitionTo(e,r,{inherit:!0,source:"url"})},n={state:e,type:"STATE"};return o.extend(this.fromUrlMatcher(e.url,r),n)},e.prototype.fromRegExp=function(e,t){if(e.global||e.sticky)throw new Error("Rule RegExp must not be global or sticky");var r=function(e){return t.replace(/\$(\$|\d{1,2})/,function(t,r){return e["$"===r?0:Number(r)]})},n=i.isString(t)?r:t,a=function(t){return e.exec(t.path)},s={regexp:e,type:"REGEXP"};return o.extend(new l(a,n),s)},e}();s.isUrlRule=function(e){return e&&["type","match","handler"].every(function(t){return i.isDefined(e[t])})},t.UrlRuleFactory=s;var l=function(){function e(e,t){var r=this;this.match=e,this.type="RAW",this.matchPriority=function(e){return 0-r.$id},this.handler=t||o.identity}return e}();t.BaseUrlRule=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(6),o=r(5),a=r(34),s=function(){function e(){var e=this;this._uiViews=[],this._viewConfigs=[],this._viewConfigFactories={},this._pluginapi={_rootViewContext:this._rootViewContext.bind(this),_viewConfigFactory:this._viewConfigFactory.bind(this),_registeredUIViews:function(){return e._uiViews},_activeViewConfigs:function(){return e._viewConfigs}}}return e.prototype._rootViewContext=function(e){return this._rootContext=e||this._rootContext},e.prototype._viewConfigFactory=function(e,t){this._viewConfigFactories[e]=t},e.prototype.createViewConfig=function(e,t){var r=this._viewConfigFactories[t.$type];if(!r)throw new Error("ViewService: No view config factory registered for type "+t.$type);var n=r(e,t);return o.isArray(n)?n:[n]},e.prototype.deactivateViewConfig=function(e){a.trace.traceViewServiceEvent("<- Removing",e),n.removeFrom(this._viewConfigs,e)},e.prototype.activateViewConfig=function(e){a.trace.traceViewServiceEvent("-> Registering",e),this._viewConfigs.push(e)},e.prototype.sync=function(){function t(e){var t=function(e){return e&&e.parent?t(e.parent)+1:1};return 1e4*e.fqn.split(".").length+t(e.creationContext)}function r(e){for(var t=e.viewDecl.$context,r=0;++r&&t.parent;)t=t.parent;return r}var o=this,a=this._uiViews.map(function(e){return[e.fqn,e]}).reduce(n.applyPairs,{}),s=i.curry(function(e,t,r,n){return t*(e(r)-e(n))}),l=function(t){var n=o._viewConfigs.filter(e.matches(a,t));return n.length>1&&n.sort(s(r,-1)),[t,n[0]]},u=function(e){var t=e[0],r=e[1];-1!==o._uiViews.indexOf(t)&&t.configUpdated(r)};this._uiViews.sort(s(t,1)).map(l).forEach(u)},e.prototype.registerUIView=function(e){a.trace.traceViewServiceUIViewEvent("-> Registering",e);var t=this._uiViews,r=function(t){return t.fqn===e.fqn};return t.filter(r).length&&a.trace.traceViewServiceUIViewEvent("!!!! duplicate uiView named:",e),t.push(e),this.sync(),function(){if(-1===t.indexOf(e))return void a.trace.traceViewServiceUIViewEvent("Tried removing non-registered uiView",e);a.trace.traceViewServiceUIViewEvent("<- Deregistering",e),n.removeFrom(t)(e)}},e.prototype.available=function(){return this._uiViews.map(i.prop("fqn"))},e.prototype.active=function(){return this._uiViews.filter(i.prop("$config")).map(i.prop("name"))},e.normalizeUIViewTarget=function(e,t){void 0===t&&(t="");var r=t.split("@"),n=r[0]||"$default",i=o.isString(r[1])?r[1]:"^",a=/^(\^(?:\.\^)*)\.(.*$)/.exec(n);(a&&(i=a[1],n=a[2]),"!"===n.charAt(0)&&(n=n.substr(1),i=""),/^(\^(?:\.\^)*)$/.exec(i))?i=i.split(".").reduce(function(e,t){return e.parent},e).name:"."===i&&(i=e.name);return{uiViewName:n,uiViewContextAnchor:i}},e}();s.matches=function(e,t){return function(r){if(t.$type!==r.viewDecl.$type)return!1;var i=r.viewDecl,o=i.$uiViewName.split("."),a=t.fqn.split(".");if(!n.equals(o,a.slice(0-o.length)))return!1;var s=1-o.length||void 0,l=a.slice(0,s).join("."),u=e[l].creationContext;return i.$uiViewContextAnchor===(u&&u.name)}},t.ViewService=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(189),i=r(137),o=function(){function e(){this.params=new n.StateParams,this.lastStartedTransitionId=-1,this.transitionHistory=new i.Queue([],1),this.successfulTransitions=new i.Queue([],1)}return e.prototype.dispose=function(){this.transitionHistory.clear(),this.successfulTransitions.clear(),this.transition=null},e}();t.UIRouterGlobals=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(16),i=r(3),o=function(e){return e.reduce(function(e,t){return e[t]=n.notImplemented(t),e},{dispose:i.noop})},a=["url","path","search","hash","onChange"],s=["port","protocol","host","baseHref","html5Mode","hashPrefix"],l=["type","caseInsensitive","strictMode","defaultSquashPolicy"],u=["sort","when","initial","otherwise","rules","rule","removeRule"],c=["deferIntercept","listen","sync","match"],p=function(){function e(e,t){void 0===t&&(t=!0),this.router=e,this.rules={},this.config={};var r=function(){return e.locationService};i.createProxyFunctions(r,this,r,a,t);var n=function(){return e.locationConfig};i.createProxyFunctions(n,this.config,n,s,t);var o=function(){return e.urlMatcherFactory};i.createProxyFunctions(o,this.config,o,l);var p=function(){return e.urlRouter};i.createProxyFunctions(p,this.rules,p,u),i.createProxyFunctions(p,this,p,c)}return e.prototype.url=function(e,t,r){},e.prototype.path=function(){},e.prototype.search=function(){},e.prototype.hash=function(){},e.prototype.onChange=function(e){},e.prototype.parts=function(){return{path:this.path(),search:this.search(),hash:this.hash()}},e.prototype.dispose=function(){},e.prototype.sync=function(e){},e.prototype.listen=function(e){},e.prototype.deferIntercept=function(e){},e.prototype.match=function(e){},e}();p.locationServiceStub=o(a),p.locationConfigStub=o(s),t.UrlService=p},function(e,t,r){"use strict";function n(e,t){function r(t){return t&&Array.isArray(t.states)&&t.states.forEach(function(t){return e.router.stateRegistry.register(t)}),t}var n=t.$$state().lazyLoad,o=n._promise;if(!o){var a=function(e){return delete t.lazyLoad,delete t.$$state().lazyLoad,delete n._promise,e},s=function(e){return delete n._promise,i.services.$q.reject(e)};o=n._promise=i.services.$q.when(n(e,t)).then(r).then(a,s)}return o}Object.defineProperty(t,"__esModule",{value:!0});var i=r(16),o=function(e){function t(){if("url"!==e.originalTransition().options().source){var t=e.targetState();return r.stateService.target(t.identifier(),t.params(),t.options())}var n=r.urlService,i=n.match(n.parts()),o=i&&i.rule;if(o&&"STATE"===o.type){var a=o.state,s=i.match;return r.stateService.target(a,s,e.options())}r.urlService.sync()}var r=e.router,o=e.entering().filter(function(e){return!!e.$$state().lazyLoad}).map(function(t){return n(e,t)});return i.services.$q.all(o).then(t)};t.registerLazyLoadHook=function(e){return e.onBefore({entering:function(e){return!!e.lazyLoad}},o)},t.lazyLoadState=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(74),i=function(){function e(e,t,r,i,o,a,s,l){void 0===o&&(o=!1),void 0===a&&(a=n.TransitionHook.HANDLE_RESULT),void 0===s&&(s=n.TransitionHook.REJECT_ERROR),void 0===l&&(l=!1),this.name=e,this.hookPhase=t,this.hookOrder=r,this.criteriaMatchPath=i,this.reverseSort=o,this.getResultHandler=a,this.getErrorHandler=s,this.synchronous=l}return e}();t.TransitionEventType=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(95);t.$q={when:function(e){return new Promise(function(t,r){return t(e)})},reject:function(e){return new Promise(function(t,r){r(e)})},defer:function(){var e={};return e.promise=new Promise(function(t,r){e.resolve=t,e.reject=r}),e},all:function(e){if(n.isArray(e))return Promise.all(e);if(n.isObject(e)){var r=Object.keys(e).map(function(t){return e[t].then(function(e){return{key:t,val:e}})});return t.$q.all(r).then(function(e){return e.reduce(function(e,t){return e[t.key]=t.val,e},{})})}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(95),i={},o=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,a=/([^\s,]+)/g;t.$injector={get:function(e){return i[e]},has:function(e){return null!=t.$injector.get(e)},invoke:function(e,r,o){var a=n.extend({},i,o||{}),s=t.$injector.annotate(e),l=n.assertPredicate(function(e){return a.hasOwnProperty(e)},function(e){return"DI can't find injectable: '"+e+"'"}),u=s.filter(l).map(function(e){return a[e]});return n.isFunction(e)?e.apply(r,u):e.slice(-1)[0].apply(r,u)},annotate:function(e){if(!n.isInjectable(e))throw new Error("Not an injectable function: "+e);if(e&&e.$inject)return e.$inject;if(n.isArray(e))return e.slice(0,-1);var t=e.toString().replace(o,"");return t.slice(t.indexOf("(")+1,t.indexOf(")")).match(a)||[]}}},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(76),o=r(101),a=function(e){function t(t){var r=e.call(this,t,!1)||this;return window.addEventListener("hashchange",r._listener,!1),r}return n(t,e),t.prototype._get=function(){return i.trimHashVal(this._location.hash)},t.prototype._set=function(e,t,r,n){this._location.hash=r},t.prototype.dispose=function(t){e.prototype.dispose.call(this,t),window.removeEventListener("hashchange",this._listener)},t}(o.BaseLocationServices);t.HashLocationService=a},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(101),o=function(e){function t(t){return e.call(this,t,!0)||this}return n(t,e),t.prototype._get=function(){return this._url},t.prototype._set=function(e,t,r,n){this._url=r},t}(i.BaseLocationServices);t.MemoryLocationService=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(76),o=r(101),a=function(e){function t(t){var r=e.call(this,t,!0)||this;return r._config=t.urlService.config,window.addEventListener("popstate",r._listener,!1),r}return n(t,e),t.prototype._get=function(){var e=this._location,t=e.pathname,r=e.hash,n=e.search;return n=i.splitQuery(n)[1],r=i.splitHash(r)[1],t+(n?"?"+n:"")+(r?"$"+n:"")},t.prototype._set=function(e,t,r,n){var i=this,o=i._config,a=i._history,s=o.baseHref()+r;n?a.replaceState(e,t,s):a.pushState(e,t,s)},t.prototype.dispose=function(t){e.prototype.dispose.call(this,t),window.removeEventListener("popstate",this._listener)},t}(o.BaseLocationServices);t.PushStateLocationService=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(5),i=r(3),o=function(){function e(){var e=this;this._baseHref="",this._port=80,this._protocol="http",this._host="localhost",this._hashPrefix="",this.port=function(){return e._port},this.protocol=function(){return e._protocol},this.host=function(){return e._host},this.baseHref=function(){return e._baseHref},this.html5Mode=function(){return!1},this.hashPrefix=function(t){return n.isDefined(t)?e._hashPrefix=t:e._hashPrefix},this.dispose=i.noop}return e}();t.MemoryLocationConfig=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(5),i=function(){function e(e,t){void 0===t&&(t=!1),this._isHtml5=t,this._baseHref=void 0,this._hashPrefix=""}return e.prototype.port=function(){return location.port?Number(location.port):"https"===this.protocol()?443:80},e.prototype.protocol=function(){return location.protocol.replace(/:/g,"")},e.prototype.host=function(){return location.host},e.prototype.html5Mode=function(){return this._isHtml5},e.prototype.hashPrefix=function(e){return n.isDefined(e)?this._hashPrefix=e:this._hashPrefix},e.prototype.baseHref=function(e){return n.isDefined(e)?this._baseHref=e:this._baseHref||this.applyDocumentBaseHref()},e.prototype.applyDocumentBaseHref=function(){var e=document.getElementsByTagName("base");return this._baseHref=e.length?e[0].href.substr(location.origin.length):""},e.prototype.dispose=function(){},e}();t.BrowserLocationConfig=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(22),i=function(){function e(t,r){this.stateRegistry=t,this.stateService=r,n.createProxyFunctions(n.val(e.prototype),this,n.val(this))}return e.prototype.decorator=function(e,t){return this.stateRegistry.decorator(e,t)||this},e.prototype.state=function(e,t){return n.isObject(e)?t=e:t.name=e,this.stateRegistry.register(t),this},e.prototype.onInvalid=function(e){return this.stateService.onInvalid(e)},e}();t.StateProvider=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(22),i=r(22),o=function(){function e(e){this._router=e,this._urlRouter=e.urlRouter}return e.prototype.$get=function(){var e=this._urlRouter;return e.update(!0),e.interceptDeferred||e.listen(),e},e.prototype.rule=function(e){var t=this;if(!i.isFunction(e))throw new Error("'rule' must be a function");var r=function(){return e(i.services.$injector,t._router.locationService)},o=new n.BaseUrlRule(r,i.identity);return this._urlRouter.rule(o),this},e.prototype.otherwise=function(e){var t=this,r=this._urlRouter;if(i.isString(e))r.otherwise(e);else{if(!i.isFunction(e))throw new Error("'rule' must be a string or function");r.otherwise(function(){return e(i.services.$injector,t._router.locationService)})}return this},e.prototype.when=function(t,r){return(i.isArray(r)||i.isFunction(r))&&(r=e.injectableHandler(this._router,r)),this._urlRouter.when(t,r),this},e.injectableHandler=function(e,t){return function(r){return i.services.$injector.invoke(t,null,{$match:r,$stateParams:e.globals.params})}},e.prototype.deferIntercept=function(e){this._urlRouter.deferIntercept(e)},e}();t.UrlRouterProvider=o},function(e,t,r){var n=r(10),i=n,o=r(10);QueryFilters={};var a="http://www.w3.org/2001/XMLSchema#";QueryFilters.checkFilters=function(e,t,r,n,i,a,s){var l=[];e.filter&&"function"!=typeof e.filter&&(l=e.filter);var u=[];if(null==l||0===l.length||null!=e.length)return s(t);QueryFilters.preprocessExistentialFilters(l,t,a,n,i,function(e){o.eachSeries(e,function(e,o){QueryFilters.run(e.value,t,r,n,i,a,function(e){for(var r=[],n=0;n<e.length;n++){var i=e[n];null!=i.__nullify__?u.push(i):r.push(i)}t=r,o()})},function(){s(t.concat(u))})})},QueryFilters.preprocessExistentialFilters=function(e,t,r,n,a,s){var l=[];o.eachSeries(e,function(e,s){if("builtincall"!==e.value.expressionType||"exists"!==e.value.builtincall&&"notexists"!==e.value.builtincall)if("conditionalor"===e.value.expressionType||"conditionaland"===e.value.expressionType){var u=i.map(e.value.operands,function(e){return{value:e}});QueryFilters.preprocessExistentialFilters(u,t,r,n,a,function(t){e.value.operands=t.map(function(e){return e.value}),l.push(e),s()})}else if("multiplicativeexpression"===e.value.expressionType){var u=i.map(e.value.factors,function(e){return{value:e}});QueryFilters.preprocessExistentialFilters(u,t,r,n,a,function(t){e.value.factors=t.map(function(e){return e.value}),l.push(e),s()})}else if("additiveexpression"===e.value.expressionType){var u=i.map(e.value.summands,function(e){return{value:e}});QueryFilters.preprocessExistentialFilters(u,t,r,n,a,function(t){e.value.summands=t.map(function(e){return e.value}),l.push(e),s()})}else if("relationalexpression"===e.value.expressionType){var u=[{value:e.value.op1},{value:e.value.op2}];QueryFilters.preprocessExistentialFilters(u,t,r,n,a,function(t){e.value.op1=t[0].value,e.value.op2=t[1].value,l.push(e),s()})}else if("irireforfunction"===e.value.expressionType||"custom"===e.value.expressionType)if(null!=e.value.args){var u=i.map(e.value.args,function(e){return{value:e}});QueryFilters.preprocessExistentialFilters(u,t,r,n,a,function(t){e.value.args=t.map(function(e){return e.value}),l.push(e),s()})}else l.push(e),s();else l.push(e),s();else{var c=e.value.builtincall,p=e.value.args,d={};r.copyDenormalizedBindings(t,a.outCache,function(t){o.eachSeries(t,function(e,t){var o=i.clone(p[0],!0),s=r.abstractQueryTree.parseSelect({pattern:o},e);s=r.abstractQueryTree.bind(s.pattern,e),r.executeSelectUnit([{kind:"*"}],n,s,a,function(r){var n=null;n="exists"===c?QueryFilters.ebvBoolean(0!==r.length):QueryFilters.ebvBoolean(0===r.length);var i=[];for(var o in e)i.push(JSON.stringify(e[o]));i=i.sort().join(""),d[i]=n,t()})},function(){e.value.origArgs=e.value.args,e.value.args=d,l.push(e),s()})})}},function(){s(l)})},QueryFilters.boundVars=function(e){if(null==e.expressionType)throw"Cannot find bound expressions in a no expression token";var t=e.expressionType;if("relationalexpression"==t){var r=e.op1,n=e.op2;return QueryFilters.boundVars(r)+QueryFilters.boundVars(n)}if("conditionalor"==t||"conditionaland"==t){for(var i=[],o=0;o<e.operands;o++)i=i.concat(QueryFilters.boundVars(e.operands[o]));return i}if("builtincall"==t){if(null==e.args)return[];for(var a=[],o=0;o<e.args.length;o++)a=a.concat(QueryFilters.boundVars(e.args[o]));return a}if("multiplicativeexpression"==t){for(var a=QueryFilters.boundVars(e.factor),o=0;o<e.factors.length;o++)a=a.concat(QueryFilters.boundVars(e.factors[o].expression));return a}if("additiveexpression"==t){for(var a=QueryFilters.boundVars(e.summand),o=0;o<e.summands.length;o++)a=a.concat(QueryFilters.boundVars(e.summands[o].expression));return a}if("regex"==t){var a=QueryFilters.boundVars(e.expression1);return a.concat(QueryFilters.boundVars(e.expression2))}return"unaryexpression"==t?QueryFilters.boundVars(e.expression):"atomic"==t?"var"==e.primaryexpression?[e.value]:[]:void 0},QueryFilters.run=function(e,t,r,n,i,o,a){o.copyDenormalizedBindings(t,i.outCache,function(s){for(var l=[],u=0;u<t.length;u++){var c=s[u],p=QueryFilters.runFilter(e,c,o,n,i),p=QueryFilters.ebv(p);if(QueryFilters.isEbvError(p)){if(r){var d={__nullify__:!0,bindings:t[u]};l.push(d)}}else if(!0===p)l.push(t[u]);else if(r){var d={__nullify__:!0,bindings:t[u]};l.push(d)}}a(l)})},QueryFilters.collect=function(e,t,r,n,i,o){i.copyDenormalizedBindings(t,n.outCache,function(a){for(var s=[],l=0;l<a.length;l++){var u=a[l],c=QueryFilters.runFilter(e,u,i,r,n);s.push({binding:t[l],value:c})}return o(s)})},QueryFilters.runDistinct=function(e,t){},QueryFilters.runAggregator=function(e,t,r,i,o){if(null==t||0===t.length)return QueryFilters.ebvError();if("variable"===e.token&&"var"==e.kind)return t[0][e.value.value];if("variable"===e.token&&"aliased"===e.kind){if("atomic"===e.expression.expressionType&&"var"===e.expression.primaryexpression)return t[0][e.expression.value.value];if("aggregate"===e.expression.expressionType){if("max"===e.expression.aggregateType){for(var s=null,l=0;l<t.length;l++){var u=t[l],c=QueryFilters.runFilter(e.expression.expression,u,r,i,o);QueryFilters.isEbvError(c)||(null===s?s=c:!0===QueryFilters.runLtFunction(s,c).value&&(s=c))}return null===s?QueryFilters.ebvError():s}if("min"===e.expression.aggregateType){for(var p=null,l=0;l<t.length;l++){var u=t[l],c=QueryFilters.runFilter(e.expression.expression,u,r,i,o);QueryFilters.isEbvError(c)||(null===p?p=c:!0===QueryFilters.runGtFunction(p,c).value&&(p=c))}return null===p?QueryFilters.ebvError():p}if("count"===e.expression.aggregateType){var d={},f=0;if("*"===e.expression.expression)if(null!=e.expression.distinct&&""!=e.expression.distinct)for(var l=0;l<t.length;l++){var u=t[l],h=n.hashTerm(u);null==d[h]&&(d[h]=!0,f++)}else f=t.length;else for(var l=0;l<t.length;l++){var u=t[l],c=QueryFilters.runFilter(e.expression.expression,u,r,i,o);if(!QueryFilters.isEbvError(c))if(null!=e.expression.distinct&&""!=e.expression.distinct){var h=n.hashTerm(c);null==d[h]&&(d[h]=!0,f++)}else f++}return{token:"literal",type:a+"integer",value:""+f}}if("avg"===e.expression.aggregateType){for(var d={},g={token:"literal",type:a+"integer",value:"0"},f=0,l=0;l<t.length;l++){var u=t[l],c=QueryFilters.runFilter(e.expression.expression,u,r,i,o);if(!QueryFilters.isEbvError(c))if(null!=e.expression.distinct&&""!=e.expression.distinct){var h=n.hashTerm(c);null==d[h]&&(d[h]=!0,QueryFilters.isNumeric(c)&&(g=QueryFilters.runSumFunction(g,c),f++))}else QueryFilters.isNumeric(c)&&(g=QueryFilters.runSumFunction(g,c),f++)}var v=QueryFilters.runDivFunction(g,{token:"literal",type:a+"integer",value:""+f});return v.value=""+v.value,v}if("sum"===e.expression.aggregateType){for(var d={},g={token:"literal",type:a+"integer",value:"0"},l=0;l<t.length;l++){var u=t[l],c=QueryFilters.runFilter(e.expression.expression,u,r,i,o);if(!QueryFilters.isEbvError(c))if(null!=e.expression.distinct&&""!=e.expression.distinct){var h=n.hashTerm(c);null==d[h]&&(d[h]=!0,QueryFilters.isNumeric(c)&&(g=QueryFilters.runSumFunction(g,c)))}else QueryFilters.isNumeric(c)&&(g=QueryFilters.runSumFunction(g,c))}return g.value=""+g.value,g}var c=QueryFilters.runFilter(aggregate.expression,t[0],i,{blanks:{},outCache:{}});return c}}},QueryFilters.runFilter=function(e,t,r,i,o){if(null!=e.expressionType){var a=e.expressionType;if("relationalexpression"==a){var s=QueryFilters.runFilter(e.op1,t,r,i,o),l=QueryFilters.runFilter(e.op2,t,r,i,o);return QueryFilters.runRelationalFilter(e,s,l,t,r,i,o)}if("conditionalor"==a)return QueryFilters.runOrFunction(e,t,r,i,o);if("conditionaland"==a)return QueryFilters.runAndFunction(e,t,r,i,o);if("additiveexpression"==a)return QueryFilters.runAddition(e.summand,e.summands,t,r,i,o);if("builtincall"==a)return QueryFilters.runBuiltInCall(e.builtincall,e.args,t,r,i,o);if("multiplicativeexpression"==a)return QueryFilters.runMultiplication(e.factor,e.factors,t,r,i,o);if("unaryexpression"==a)return QueryFilters.runUnaryExpression(e.unaryexpression,e.expression,t,r,i,o);if("irireforfunction"==a)return QueryFilters.runIriRefOrFunction(e.iriref,e.args,t,r,i,o);if("regex"==a)return QueryFilters.runRegex(e.text,e.pattern,e.flags,t,r,i,o);if("custom"==a)return QueryFilters.runBuiltInCall(e.name,e.args,t,r,i,o);if("atomic"==a)return"var"==e.primaryexpression?t[e.value.value]:"object"!=typeof e.value?e.value:null==e.value.type||"object"!=typeof e.value.type?e.value:(e.value.type=n.lexicalFormBaseUri(e.value.type,o),e.value);throw"Unknown filter expression type"}throw"Cannot find bound expressions in a no expression token"},QueryFilters.isRDFTerm=function(e){return null!=e&&!!(e.token&&"literal"==e.token||e.token&&"uri"==e.token||e.token&&"blank"==e.token)},QueryFilters.RDFTermEquality=function(e,t,r,i){return"literal"===e.token&&"literal"===t.token?e.lang==t.lang&&e.type==t.type&&e.value==t.value||(null!=e.type&&null!=t.type?QueryFilters.ebvError():QueryFilters.isSimpleLiteral(e)&&null!=t.type?QueryFilters.ebvError():!(!QueryFilters.isSimpleLiteral(t)||null==e.type)&&QueryFilters.ebvError()):"uri"===e.token&&"uri"===t.token?n.lexicalFormBaseUri(e,i)==n.lexicalFormBaseUri(t,i):"blank"===e.token&&"blank"===t.token&&e.value==t.value},QueryFilters.isInteger=function(e){return null!=e&&("literal"===e.token&&(e.type==a+"integer"||e.type==a+"decimal"||e.type==a+"double"||e.type==a+"nonPositiveInteger"||e.type==a+"negativeInteger"||e.type==a+"long"||e.type==a+"int"||e.type==a+"short"||e.type==a+"byte"||e.type==a+"nonNegativeInteger"||e.type==a+"unsignedLong"||e.type==a+"unsignedInt"||e.type==a+"unsignedShort"||e.type==a+"unsignedByte"||e.type==a+"positiveInteger"))},QueryFilters.isFloat=function(e){return null!=e&&("literal"===e.token&&e.type==a+"float")},QueryFilters.isDecimal=function(e){return null!=e&&("literal"===e.token&&e.type==a+"decimal")},QueryFilters.isDouble=function(e){return null!=e&&("literal"===e.token&&e.type==a+"double")},QueryFilters.isNumeric=function(e){return null!=e&&("literal"===e.token&&(e.type==a+"integer"||e.type==a+"decimal"||e.type==a+"float"||e.type==a+"double"||e.type==a+"nonPositiveInteger"||e.type==a+"negativeInteger"||e.type==a+"long"||e.type==a+"int"||e.type==a+"short"||e.type==a+"byte"||e.type==a+"nonNegativeInteger"||e.type==a+"unsignedLong"||e.type==a+"unsignedInt"||e.type==a+"unsignedShort"||e.type==a+"unsignedByte"||e.type==a+"positiveInteger"))},QueryFilters.isSimpleLiteral=function(e){return!(!e||"literal"!=e.token)&&(null==e.type&&null==e.lang)},QueryFilters.isXsdType=function(e,t){return!(!t||"literal"!=t.token)&&t.type==a+""+e},QueryFilters.ebv=function(e){if(null==e||QueryFilters.isEbvError(e))return QueryFilters.ebvError();if(e.token&&"literal"===e.token){if(e.type==a+"integer"||e.type==a+"decimal"||e.type==a+"double"||e.type==a+"nonPositiveInteger"||e.type==a+"negativeInteger"||e.type==a+"long"||e.type==a+"int"||e.type==a+"short"||e.type==a+"byte"||e.type==a+"nonNegativeInteger"||e.type==a+"unsignedLong"||e.type==a+"unsignedInt"||e.type==a+"unsignedShort"||e.type==a+"unsignedByte"||e.type==a+"positiveInteger"){var t=parseFloat(e.value);return!isNaN(t)&&0!=parseFloat(e.value)}return e.type===a+"boolean"?"true"===e.value||!0===e.value||"True"===e.value:e.type===a+"string"?""!=e.value:e.type===a+"dateTime"?null!=new Date(e.value):QueryFilters.isEbvError(e)?e:null==e.type?""!=e.value:QueryFilters.ebvError()}return!0===e.value},QueryFilters.effectiveBooleanValue=QueryFilters.ebv,QueryFilters.ebvTrue=function(){return{token:"literal",type:a+"boolean",value:!0}},QueryFilters.ebvFalse=function(){return{token:"literal",type:a+"boolean",value:!1}},QueryFilters.ebvError=function(){return{token:"literal",type:"https://github.com/antoniogarrote/js-tools/types#error",value:null}},QueryFilters.isEbvError=function(e){return"object"==typeof e&&null!=e&&"https://github.com/antoniogarrote/js-tools/types#error"===e.type},QueryFilters.ebvBoolean=function(e){return QueryFilters.isEbvError(e)?e:!0===e?QueryFilters.ebvTrue():QueryFilters.ebvFalse()},QueryFilters.runRelationalFilter=function(e,t,r,n,i,o,a){var s=e.operator;if("="===s)return QueryFilters.runEqualityFunction(t,r,n,i,o,a);if("!="===s){var l=QueryFilters.runEqualityFunction(t,r,n,i,o,a);return QueryFilters.isEbvError(l)?l:(l.value=!l.value,l)}if("<"===s)return QueryFilters.runLtFunction(t,r,n);if(">"===s)return QueryFilters.runGtFunction(t,r,n);if("<="===s)return QueryFilters.runLtEqFunction(t,r,n);if(">="===s)return QueryFilters.runGtEqFunction(t,r,n);throw"Error applying relational filter, unknown operator"},QueryFilters.effectiveTypeValue=function(e){if("literal"!=e.token)throw console.log("not implemented yet"),console.log(e),"value not supported in operations yet";if(e.type==a+"integer"){var t=parseInt(e.value);return t}if(e.type==a+"decimal"){var t=parseFloat(e.value);return t}if(e.type==a+"float"){var t=parseFloat(e.value);return t}if(e.type==a+"double"){var t=parseFloat(e.value);return t}if(e.type==a+"nonPositiveInteger"){var t=parseFloat(e.value);return t}if(e.type==a+"negativeInteger"){var t=parseInt(e.value);return t}if(e.type==a+"long"){var t=parseInt(e.value);return t}if(e.type==a+"int"){var t=parseInt(e.value);return t}if(e.type==a+"short"){var t=parseInt(e.value);return t}if(e.type==a+"byte"){var t=parseInt(e.value);return t}if(e.type==a+"nonNegativeInteger"){var t=parseInt(e.value);return t}if(e.type==a+"unsignedLong"){var t=parseInt(e.value);return t}if(e.type==a+"unsignedInt"){var t=parseInt(e.value);return t}if(e.type==a+"unsignedShort"){var t=parseInt(e.value);return t}if(e.type==a+"unsignedByte"){var t=parseInt(e.value);return t}if(e.type==a+"positiveInteger"){var t=parseInt(e.value);return t}if(e.type!=a+"date"&&e.type!=a+"dateTime")return e.type==a+"boolean"?!0===e.value||"true"===e.value||"1"===e.value||1===e.value||!0===e.value||!1!==e.value&&"false"!==e.value&&"0"!==e.value&&0!==e.value&&!1!==e.value&&void 0:e.type==a+"string"?null===e.value||void 0===e.value?void 0:""+e.value:(e.type,e.value);try{return n.parseISO8601(e.value)}catch(e){return null}},QueryFilters.runOrFunction=function(e,t,r,n,i){for(var o=null,a=0;a<e.operands.length;a++){var s=QueryFilters.runFilter(e.operands[a],t,r,n,i);0==QueryFilters.isEbvError(s)&&(s=QueryFilters.ebv(s)),null==o?o=s:QueryFilters.isEbvError(s)?o=QueryFilters.isEbvError(o)?QueryFilters.ebvError():!0===o||QueryFilters.ebvError():!0===s?o=!0:QueryFilters.isEbvError(o)&&(o=QueryFilters.ebvError())}return QueryFilters.ebvBoolean(o)},QueryFilters.runAndFunction=function(e,t,r,n,i){for(var o=null,a=0;a<e.operands.length;a++){var s=QueryFilters.runFilter(e.operands[a],t,r,n,i);0==QueryFilters.isEbvError(s)&&(s=QueryFilters.ebv(s)),null==o?o=s:QueryFilters.isEbvError(s)?o=QueryFilters.isEbvError(o)?QueryFilters.ebvError():!0===o&&QueryFilters.ebvError():!0===s?QueryFilters.isEbvError(o)&&(o=QueryFilters.ebvError()):o=!1}return QueryFilters.ebvBoolean(o)},QueryFilters.runEqualityFunction=function(e,t,r,i,o,a){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(t)){var s=QueryFilters.effectiveTypeValue(e),l=QueryFilters.effectiveTypeValue(t);return isNaN(s)||isNaN(l)?QueryFilters.ebvBoolean(QueryFilters.RDFTermEquality(e,t,i,a)):QueryFilters.ebvBoolean(s==l)}if((QueryFilters.isSimpleLiteral(e)||QueryFilters.isXsdType("string",e))&&(QueryFilters.isSimpleLiteral(t)||QueryFilters.isXsdType("string",t)))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)==QueryFilters.effectiveTypeValue(t));if(QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)==QueryFilters.effectiveTypeValue(t));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",t)||QueryFilters.isXsdType("date",t))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",t))return QueryFilters.ebvFalse();if(QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",t))return QueryFilters.ebvFalse();var u=n.compareDateComponents(e.value,t.value);return null!=u?0==u?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.isRDFTerm(e)&&QueryFilters.isRDFTerm(t)?QueryFilters.ebvBoolean(QueryFilters.RDFTermEquality(e,t,i,a)):QueryFilters.ebvFalse()},QueryFilters.runGtFunction=function(e,t,r){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>QueryFilters.effectiveTypeValue(t));if(QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>QueryFilters.effectiveTypeValue(t));if(QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>QueryFilters.effectiveTypeValue(t));if(QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>QueryFilters.effectiveTypeValue(t));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",t)||QueryFilters.isXsdType("date",t))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",t))return QueryFilters.ebvFalse();if(QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",t))return QueryFilters.ebvFalse();var i=n.compareDateComponents(e.value,t.value);return null!=i?1==i?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runTotalGtFunction=function(e,t){return QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t)?QueryFilters.ebvError():QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(t)||QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(t)||QueryFilters.isXsdType("string",e)&&QueryFilters.isSimpleLiteral("string",t)||QueryFilters.isXsdType("boolean",e)&&QueryFilters.isSimpleLiteral("boolean",t)||QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isSimpleLiteral("dateTime",t)?QueryFilters.runGtFunction(e,t,[]):e.token&&"uri"===e.token&&t.token&&"uri"===t.token?QueryFilters.ebvBoolean(e.value>t.value):e.token&&"literal"===e.token&&t.token&&"literal"===t.token?QueryFilters.ebvBoolean(""+e.value+e.type+e.lang>""+t.value+t.type+t.lang):e.token&&"blank"===e.token&&t.token&&"blank"===t.token?QueryFilters.ebvBoolean(e.value>t.value):e.value&&t.value?QueryFilters.ebvBoolean(e.value>t.value):QueryFilters.ebvTrue()},QueryFilters.runLtFunction=function(e,t,r){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<QueryFilters.effectiveTypeValue(t));if(QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<QueryFilters.effectiveTypeValue(t));if(QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<QueryFilters.effectiveTypeValue(t));if(QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<QueryFilters.effectiveTypeValue(t));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",t)||QueryFilters.isXsdType("date",t))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",t))return QueryFilters.ebvFalse();if(QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",t))return QueryFilters.ebvFalse();var i=n.compareDateComponents(e.value,t.value);return null!=i?-1==i?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runGtEqFunction=function(e,t,r){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>=QueryFilters.effectiveTypeValue(t));if(QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>=QueryFilters.effectiveTypeValue(t));if(QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>=QueryFilters.effectiveTypeValue(t));if(QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)>=QueryFilters.effectiveTypeValue(t));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",t)||QueryFilters.isXsdType("date",t))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",t))return QueryFilters.ebvFalse();if(QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",t))return QueryFilters.ebvFalse();var i=n.compareDateComponents(e.value,t.value);return null!=i?-1!=i?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runLtEqFunction=function(e,t,r){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t))return QueryFilters.ebvError();if(QueryFilters.isNumeric(e)&&QueryFilters.isNumeric(t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<=QueryFilters.effectiveTypeValue(t));if(QueryFilters.isSimpleLiteral(e)&&QueryFilters.isSimpleLiteral(t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<=QueryFilters.effectiveTypeValue(t));if(QueryFilters.isXsdType("string",e)&&QueryFilters.isXsdType("string",t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<=QueryFilters.effectiveTypeValue(t));if(QueryFilters.isXsdType("boolean",e)&&QueryFilters.isXsdType("boolean",t))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(e)<=QueryFilters.effectiveTypeValue(t));if((QueryFilters.isXsdType("dateTime",e)||QueryFilters.isXsdType("date",e))&&(QueryFilters.isXsdType("dateTime",t)||QueryFilters.isXsdType("date",t))){if(QueryFilters.isXsdType("dateTime",e)&&QueryFilters.isXsdType("date",t))return QueryFilters.ebvFalse();if(QueryFilters.isXsdType("date",e)&&QueryFilters.isXsdType("dateTime",t))return QueryFilters.ebvFalse();var i=n.compareDateComponents(e.value,t.value);return null!=i?1!=i?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runAddition=function(e,t,r,n,i,o){var a=QueryFilters.runFilter(e,r,n,i,o);if(QueryFilters.isEbvError(a))return QueryFilters.ebvError();var s=a;if(QueryFilters.isNumeric(a)){for(var l=0;l<t.length;l++){var u=QueryFilters.runFilter(t[l].expression,r,n,i,o);if(!QueryFilters.isNumeric(u))return QueryFilters.ebvFalse();"+"===t[l].operator?s=QueryFilters.runSumFunction(s,u):"-"===t[l].operator&&(s=QueryFilters.runSubFunction(s,u))}return s}return QueryFilters.ebvFalse()},QueryFilters.runSumFunction=function(e,t){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t))return QueryFilters.ebvError();var r=QueryFilters.effectiveTypeValue(e)+QueryFilters.effectiveTypeValue(t);return QueryFilters.isDouble(e)||QueryFilters.isDouble(t)?{token:"literal",type:a+"double",value:r}:QueryFilters.isFloat(e)||QueryFilters.isFloat(t)?{token:"literal",type:a+"float",value:r}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(t)?{token:"literal",type:a+"decimal",value:r}:{token:"literal",type:a+"integer",value:r}},QueryFilters.runSubFunction=function(e,t){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t))return QueryFilters.ebvError();var r=QueryFilters.effectiveTypeValue(e)-QueryFilters.effectiveTypeValue(t);return QueryFilters.isDouble(e)||QueryFilters.isDouble(t)?{token:"literal",type:a+"double",value:r}:QueryFilters.isFloat(e)||QueryFilters.isFloat(t)?{token:"literal",type:a+"float",value:r}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(t)?{token:"literal",type:a+"decimal",value:r}:{token:"literal",type:a+"integer",value:r}},QueryFilters.runMultiplication=function(e,t,r,n,i,o){var a=QueryFilters.runFilter(e,r,n,i,o);if(QueryFilters.isEbvError(a))return a;var s=a;if(QueryFilters.isNumeric(a)){for(var l=0;l<t.length;l++){var u=QueryFilters.runFilter(t[l].expression,r,n,i,o);if(QueryFilters.isEbvError(u))return a;if(!QueryFilters.isNumeric(u))return QueryFilters.ebvFalse();"*"===t[l].operator?s=QueryFilters.runMulFunction(s,u):"/"===t[l].operator&&(s=QueryFilters.runDivFunction(s,u))}return s}return QueryFilters.ebvFalse()},QueryFilters.runMulFunction=function(e,t){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t))return QueryFilters.ebvError();var r=QueryFilters.effectiveTypeValue(e)*QueryFilters.effectiveTypeValue(t);return QueryFilters.isDouble(e)||QueryFilters.isDouble(t)?{token:"literal",type:a+"double",value:r}:QueryFilters.isFloat(e)||QueryFilters.isFloat(t)?{token:"literal",type:a+"float",value:r}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(t)?{token:"literal",type:a+"decimal",value:r}:{token:"literal",type:a+"integer",value:r}},QueryFilters.runDivFunction=function(e,t){if(QueryFilters.isEbvError(e)||QueryFilters.isEbvError(t))return QueryFilters.ebvError();var r=QueryFilters.effectiveTypeValue(e)/QueryFilters.effectiveTypeValue(t);return QueryFilters.isDouble(e)||QueryFilters.isDouble(t)?{token:"literal",type:a+"double",value:r}:QueryFilters.isFloat(e)||QueryFilters.isFloat(t)?{token:"literal",type:a+"float",value:r}:QueryFilters.isDecimal(e)||QueryFilters.isDecimal(t)?{token:"literal",type:a+"decimal",value:r}:{token:"literal",type:a+"integer",value:r}},QueryFilters.runBuiltInCall=function(e,t,r,n,i,o){if("notexists"===e||"exists"===e){var a=[];for(var s in r)a.push(JSON.stringify(r[s]));return a=a.sort().join(""),t[a]}for(var l=[],u=0;u<t.length;u++)if("var"===t[u].token)l.push(t[u]);else{var c=QueryFilters.runFilter(t[u],r,n,i,o);if(QueryFilters.isEbvError(c))return c;l.push(c)}if("str"===e)return"literal"===l[0].token?{token:"literal",type:null,value:""+l[0].value}:"uri"===l[0].token?{token:"literal",type:null,value:l[0].value}:QueryFilters.ebvFalse();if("lang"===e)return"literal"===l[0].token?null!=l[0].lang?{token:"literal",value:""+l[0].lang}:{token:"literal",value:""}:QueryFilters.ebvError();if("datatype"===e){if("literal"===l[0].token){var p=l[0];return null!=p.type?"string"==typeof p.type?{token:"uri",value:p.type,prefix:null,suffix:null}:p.type:null==p.lang?{token:"uri",value:"http://www.w3.org/2001/XMLSchema#string",prefix:null,suffix:null}:QueryFilters.ebvError()}return QueryFilters.ebvError()}if("isliteral"===e)return"literal"===l[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("isblank"===e)return"blank"===l[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("isuri"===e||"isiri"===e)return"uri"===l[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("sameterm"===e){var d=l[0],f=l[1],h=QueryFilters.RDFTermEquality(d,f,n,o);return QueryFilters.isEbvError(h)&&(h=!1),QueryFilters.ebvBoolean(h)}if("langmatches"===e){var g=l[0],v=l[1];return"literal"===g.token&&"literal"===v.token?"*"===v.value&&""!=g.value?QueryFilters.ebvTrue():QueryFilters.ebvBoolean(0===g.value.toLowerCase().indexOf(v.value.toLowerCase())):QueryFilters.ebvError()}if("bound"===e){var m=l[0].value;return null==m?QueryFilters.ebvError():null!=r[m]?QueryFilters.ebvTrue():QueryFilters.ebvFalse()}if(null!=n.customFns[e])return n.customFns[e](QueryFilters,l);throw"Builtin call "+e+" not implemented yet"},QueryFilters.runUnaryExpression=function(e,t,r,n,i,o){var a=QueryFilters.runFilter(t,r,n,i,o);if(QueryFilters.isEbvError(a))return a;if("!"===e){var s=QueryFilters.ebv(a);return QueryFilters.isEbvError(s)?QueryFilters.ebvFalse():(s=!s,QueryFilters.ebvBoolean(s))}if("+"===e)return QueryFilters.isNumeric(a)?a:QueryFilters.ebvError();if("-"===e){if(QueryFilters.isNumeric(a)){var l={};for(var u in a)l[u]=a[u];return l.value=-l.value,l}return QueryFilters.ebvError()}},QueryFilters.runRegex=function(e,t,r,n,i,o,a){if(null==e)return QueryFilters.ebvError();if(e=QueryFilters.runFilter(e,n,i,o,a),null==t)return QueryFilters.ebvError();if(t=QueryFilters.runFilter(t,n,i,o,a),null!=r&&(r=QueryFilters.runFilter(r,n,i,o,a)),null==t||"literal"!==t.token||null!=r&&"literal"!==r.token)return QueryFilters.ebvError();if(t=t.value,r=null==r?null:r.value,null!=e&&"var"==e.token){if(null==n[e.value])return QueryFilters.ebvError();e=n[e.value]}else{if(null==e||"literal"!==e.token)return QueryFilters.ebvError();if(null!=e.type&&!QueryFilters.isXsdType("string",e))return QueryFilters.ebvError();e=e.value}var s;return s=null==r?new RegExp(t):new RegExp(t,r.toLowerCase()),s.exec(e)?QueryFilters.ebvTrue():QueryFilters.ebvFalse()},QueryFilters.normalizeLiteralDatatype=function(e,t,r){return null==e.value.type||"object"!=typeof e.value.type?e:(e.value.type=n.lexicalFormBaseUri(e.value.type,r),e)},QueryFilters.runIriRefOrFunction=function(e,t,r,i,o,s){if(null==t)return e;for(var l=[],u=0;u<t.length;u++)l.push(QueryFilters.runFilter(t[u],r,i,o,s));var c=n.lexicalFormBaseUri(e,s);if(c==a+"integer"||c==a+"decimal"||c==a+"double"||c==a+"nonPositiveInteger"||c==a+"negativeInteger"||c==a+"long"||c==a+"int"||c==a+"short"||c==a+"byte"||c==a+"nonNegativeInteger"||c==a+"unsignedLong"||c==a+"unsignedInt"||c==a+"unsignedShort"||c==a+"unsignedByte"||c==a+"positiveInteger"){var p=l[0];if("literal"!==p.token)return QueryFilters.ebvError();if(p=QueryFilters.normalizeLiteralDatatype(p,i,s),p.type==a+"integer"||p.type==a+"decimal"||p.type==a+"double"||p.type==a+"nonPositiveInteger"||p.type==a+"negativeInteger"||p.type==a+"long"||p.type==a+"int"||p.type==a+"short"||p.type==a+"byte"||p.type==a+"nonNegativeInteger"||p.type==a+"unsignedLong"||p.type==a+"unsignedInt"||p.type==a+"unsignedShort"||p.type==a+"unsignedByte"||p.type==a+"positiveInteger")return p.type=c,p;if("http://www.w3.org/2001/XMLSchema#boolean"==p.type)return 1==QueryFilters.ebv(p)?(p.type=c,p.value=1):(p.type=c,p.value=0),p;if("http://www.w3.org/2001/XMLSchema#float"==p.type||"http://www.w3.org/2001/XMLSchema#double"==p.type)return p.type=c,p.value=parseInt(p.value),p;if("http://www.w3.org/2001/XMLSchema#string"!=p.type&&null!=p.type)return QueryFilters.ebvError();if(p.value.split(".").length>2)return QueryFilters.ebvError();if(p.value.split("-").length>2)return QueryFilters.ebvError();if(p.value.split("/").length>2)return QueryFilters.ebvError();if(p.value.split("+").length>2)return QueryFilters.ebvError();if(c==a+"decimal"&&(-1!=p.value.indexOf("e")||-1!=p.value.indexOf("E")))return QueryFilters.ebvError();if(!(c!=a+"int"&&c!=a+"integer"||-1==p.value.indexOf("e")&&-1==p.value.indexOf("E")&&-1==p.value.indexOf(".")))return QueryFilters.ebvError();try{return p.value=parseInt(parseFloat(p.value)),isNaN(p.value)?QueryFilters.ebvError():(p.type=c,p)}catch(e){return QueryFilters.ebvError()}}else{if(c==a+"boolean"){var p=l[0];return"literal"===p.token&&null==p.type?"true"===p.value||"1"===p.value?QueryFilters.ebvTrue():"false"===p.value||"0"===p.value?QueryFilters.ebvFalse():QueryFilters.ebvError():"literal"===p.token?QueryFilters.isEbvError(p)?p:QueryFilters.ebvBoolean(p):QueryFilters.ebvError()}if(c==a+"string"){var p=l[0];return"literal"===p.token?(p=QueryFilters.normalizeLiteralDatatype(p,i,s),p.type==a+"integer"||p.type==a+"decimal"||p.type==a+"double"||p.type==a+"nonPositiveInteger"||p.type==a+"negativeInteger"||p.type==a+"long"||p.type==a+"int"||p.type==a+"short"||p.type==a+"byte"||p.type==a+"nonNegativeInteger"||p.type==a+"unsignedLong"||p.type==a+"unsignedInt"||p.type==a+"unsignedShort"||p.type==a+"unsignedByte"||p.type==a+"positiveInteger"||p.type==a+"float"?(p.type=c,p.value=""+p.value,p):p.type==a+"string"?p:p.type==a+"boolean"?(QueryFilters.ebv(p)?(p.type=c,p.value="true"):(p.type=c,p.value="false"),p):p.type==a+"dateTime"||p.type==a+"date"?(p.type=c,"string"!=typeof p.value&&(p.value=n.iso8601(p.value)),p):null==p.type?(p.value=""+p.value,p.type=c,p):QueryFilters.ebvError()):"uri"===p.token?{token:"literal",value:n.lexicalFormBaseUri(p,s),type:c,lang:null}:QueryFilters.ebvError()}if(c==a+"dateTime"||c==a+"date"){if(p=l[0],p.type==a+"dateTime"||p.type==a+"date")return p;if(p.type!=a+"string"&&null!=p.type)return QueryFilters.ebvError();try{return p.value=n.iso8601(n.parseISO8601(p.value)),p.type=c,p}catch(e){return QueryFilters.ebvError()}}else{if(c!=a+"float")return null!=i.customFns[c]?i.customFns[c](QueryFilters,l):QueryFilters.ebvError();var p=l[0];if("literal"!==p.token)return QueryFilters.ebvError();if(p=QueryFilters.normalizeLiteralDatatype(p,i,s),"http://www.w3.org/2001/XMLSchema#decimal"==p.type||"http://www.w3.org/2001/XMLSchema#int"==p.type)return p.type=c,p.value=parseFloat(p.value),p;if("http://www.w3.org/2001/XMLSchema#boolean"==p.type)return 1==QueryFilters.ebv(p)?(p.type=c,p.value=1):(p.type=c,p.value=0),p;if("http://www.w3.org/2001/XMLSchema#float"==p.type||"http://www.w3.org/2001/XMLSchema#double"==p.type)return p.type=c,p.value=parseFloat(p.value),p;if("http://www.w3.org/2001/XMLSchema#string"==p.type)try{return p.value=parseFloat(p.value),isNaN(p.value)?QueryFilters.ebvError():(p.type=c,p)}catch(e){return QueryFilters.ebvError()}else{if(null!=p.type)return QueryFilters.ebvError();if(p.value.split(".").length>2)return QueryFilters.ebvError();if(p.value.split("-").length>2)return QueryFilters.ebvError();if(p.value.split("/").length>2)return QueryFilters.ebvError();if(p.value.split("+").length>2)return QueryFilters.ebvError();try{return p.value=parseFloat(p.value),isNaN(p.value)?QueryFilters.ebvError():(p.type=c,p)}catch(e){return QueryFilters.ebvError()}}}}},e.exports={QueryFilters:QueryFilters}},function(e,t,r){(function(e){var n=r(376),i=r(386),o=r(387),a=r(222),s=t;s.request=function(t,r){t="string"==typeof t?a.parse(t):i(t);var o=-1===e.location.protocol.search(/^https?:$/)?"http:":"",s=t.protocol||o,l=t.hostname||t.host,u=t.port,c=t.path||"/";l&&-1!==l.indexOf(":")&&(l="["+l+"]"),t.url=(l?s+"//"+l:"")+(u?":"+u:"")+c,t.method=(t.method||"GET").toUpperCase(),t.headers=t.headers||{};var p=new n(t);return r&&p.on("response",r),p},s.get=function(e,t){var r=s.request(e,t);return r.end(),r},s.Agent=function(){},s.Agent.defaultMaxSockets=4,s.STATUS_CODES=o,s.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(t,r(11))},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){(function(e){function r(){if(void 0!==o)return o;if(e.XMLHttpRequest){o=new e.XMLHttpRequest;try{o.open("GET",e.XDomainRequest?"/":"https://example.com")}catch(e){o=null}}else o=null;return o}function n(e){var t=r();if(!t)return!1;try{return t.responseType=e,t.responseType===e}catch(e){}return!1}function i(e){return"function"==typeof e}t.fetch=i(e.fetch)&&i(e.ReadableStream),t.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),t.blobConstructor=!0}catch(e){}var o,a=void 0!==e.ArrayBuffer,s=a&&i(e.ArrayBuffer.prototype.slice);t.arraybuffer=t.fetch||a&&n("arraybuffer"),t.msstream=!t.fetch&&s&&n("ms-stream"),t.mozchunkedarraybuffer=!t.fetch&&a&&n("moz-chunked-arraybuffer"),t.overrideMimeType=t.fetch||!!r()&&i(r().overrideMimeType),t.vbArray=i(e.VBArray),o=null}).call(t,r(11))},function(e,t,r){"use strict";(function(t){function n(e){return F.from(e)}function i(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)||F.isBuffer(e)}function o(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?O(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}function a(e,t){k=k||r(47),e=e||{},this.objectMode=!!e.objectMode,t instanceof k&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new B,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(G||(G=r(220).StringDecoder),this.decoder=new G(e.encoding),this.encoding=e.encoding)}function s(e){if(k=k||r(47),!(this instanceof s))return new s(e);this._readableState=new a(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),D.call(this)}function l(e,t,r,i,o){var a=e._readableState;if(null===t)a.reading=!1,h(e,a);else{var s;o||(s=c(a,t)),s?e.emit("error",s):a.objectMode||t&&t.length>0?("string"==typeof t||Object.getPrototypeOf(t)===F.prototype||a.objectMode||(t=n(t)),i?a.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):u(e,a,t,!0):a.ended?e.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!r?(t=a.decoder.write(t),a.objectMode||0!==t.length?u(e,a,t,!1):m(e,a)):u(e,a,t,!1))):i||(a.reading=!1)}return p(a)}function u(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&g(e)),m(e,t)}function c(e,t){var r;return i(t)||"string"==typeof t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}function p(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function d(e){return e>=V?e=V:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function f(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=d(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function h(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,g(e)}}function g(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||($("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?_(v,e):v(e))}function v(e){$("emit readable"),e.emit("readable"),C(e)}function m(e,t){t.readingMore||(t.readingMore=!0,_(y,e,t))}function y(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&($("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function b(e){return function(){var t=e._readableState;$("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&P(e,"data")&&(t.flowing=!0,C(e))}}function E(e){$("readable nexttick read 0"),e.read(0)}function x(e,t){t.resumeScheduled||(t.resumeScheduled=!0,_(S,e,t))}function S(e,t){t.reading||($("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),C(e),t.flowing&&!t.reading&&e.read(0)}function C(e){var t=e._readableState;for($("flow",t.flowing);t.flowing&&null!==e.read(););}function w(e,t){if(0===t.length)return null;var r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=T(e,t.buffer,t.decoder),r}function T(e,t,r){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?A(e,t):I(e,t),n}function A(e,t){var r=t.head,n=1,i=r.data;for(e-=i.length;r=r.next;){var o=r.data,a=e>o.length?o.length:e;if(a===o.length?i+=o:i+=o.slice(0,e),0===(e-=a)){a===o.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(a));break}++n}return t.length-=n,i}function I(e,t){var r=F.allocUnsafe(e),n=t.head,i=1;for(n.data.copy(r),e-=n.data.length;n=n.next;){var o=n.data,a=e>o.length?o.length:e;if(o.copy(r,r.length-e,0,a),0===(e-=a)){a===o.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(a));break}++i}return t.length-=i,r}function L(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,_(N,t,e))}function N(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function R(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}var _=r(103);e.exports=s;var k,O=r(215);s.ReadableState=a;var P=(r(147).EventEmitter,function(e,t){return e.listeners(t).length}),D=r(218),F=r(148).Buffer,M=r(78);M.inherits=r(35);var j=r(380),$=void 0;$=j&&j.debuglog?j.debuglog("stream"):function(){};var G,B=r(381),H=r(219);M.inherits(s,D);var U=["error","close","destroy","pause","resume"];Object.defineProperty(s.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),s.prototype.destroy=H.destroy,s.prototype._undestroy=H.undestroy,s.prototype._destroy=function(e,t){this.push(null),t(e)},s.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&(t=t||n.defaultEncoding,t!==n.encoding&&(e=F.from(e,t),t=""),r=!0),l(this,e,t,!1,r)},s.prototype.unshift=function(e){return l(this,e,null,!0,!1)},s.prototype.isPaused=function(){return!1===this._readableState.flowing},s.prototype.setEncoding=function(e){return G||(G=r(220).StringDecoder),this._readableState.decoder=new G(e),this._readableState.encoding=e,this};var V=8388608;s.prototype.read=function(e){$("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return $("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?L(this):g(this),null;if(0===(e=f(e,t))&&t.ended)return 0===t.length&&L(this),null;var n=t.needReadable;$("need readable",n),(0===t.length||t.length-e<t.highWaterMark)&&(n=!0,$("length less than watermark",n)),t.ended||t.reading?(n=!1,$("reading or ended",n)):n&&($("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=f(r,t)));var i;return i=e>0?w(e,t):null,null===i?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&L(this)),null!==i&&this.emit("data",i),i},s.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},s.prototype.pipe=function(e,r){function n(e,t){$("onunpipe"),e===d&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,a())}function i(){$("onend"),e.end()}function a(){$("cleanup"),e.removeListener("close",u),e.removeListener("finish",c),e.removeListener("drain",v),e.removeListener("error",l),e.removeListener("unpipe",n),d.removeListener("end",i),d.removeListener("end",p),d.removeListener("data",s),m=!0,!f.awaitDrain||e._writableState&&!e._writableState.needDrain||v()}function s(t){$("ondata"),y=!1,!1!==e.write(t)||y||((1===f.pipesCount&&f.pipes===e||f.pipesCount>1&&-1!==R(f.pipes,e))&&!m&&($("false write response, pause",d._readableState.awaitDrain),d._readableState.awaitDrain++,y=!0),d.pause())}function l(t){$("onerror",t),p(),e.removeListener("error",l),0===P(e,"error")&&e.emit("error",t)}function u(){e.removeListener("finish",c),p()}function c(){$("onfinish"),e.removeListener("close",u),p()}function p(){$("unpipe"),d.unpipe(e)}var d=this,f=this._readableState;switch(f.pipesCount){case 0:f.pipes=e;break;case 1:f.pipes=[f.pipes,e];break;default:f.pipes.push(e)}f.pipesCount+=1,$("pipe count=%d opts=%j",f.pipesCount,r);var h=(!r||!1!==r.end)&&e!==t.stdout&&e!==t.stderr,g=h?i:p;f.endEmitted?_(g):d.once("end",g),e.on("unpipe",n);var v=b(d);e.on("drain",v);var m=!1,y=!1;return d.on("data",s),o(e,"error",l),e.once("close",u),e.once("finish",c),e.emit("pipe",d),f.flowing||($("pipe resume"),d.resume()),e},s.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r),this);if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,r);return this}var a=R(t.pipes,e);return-1===a?this:(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r),this)},s.prototype.on=function(e,t){var r=D.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&g(this):_(E,this))}return r},s.prototype.addListener=s.prototype.on,s.prototype.resume=function(){var e=this._readableState;return e.flowing||($("resume"),e.flowing=!0,x(this,e)),this},s.prototype.pause=function(){return $("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&($("pause"),this._readableState.flowing=!1,this.emit("pause")),this},s.prototype.wrap=function(e){var t=this._readableState,r=!1,n=this;e.on("end",function(){if($("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&n.push(e)}n.push(null)}),e.on("data",function(i){if($("wrapped data"),t.decoder&&(i=t.decoder.write(i)),(!t.objectMode||null!==i&&void 0!==i)&&(t.objectMode||i&&i.length)){n.push(i)||(r=!0,e.pause())}});for(var i in e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<U.length;o++)e.on(U[o],n.emit.bind(n,U[o]));return n._read=function(t){$("wrapped _read",t),r&&(r=!1,e.resume())},n},s._fromList=w}).call(t,r(28))},function(e,t,r){e.exports=r(147).EventEmitter},function(e,t,r){"use strict";function n(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;if(n||i)return void(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||a(o,this,e));this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(a(o,r,e),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(e)})}function i(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function o(e,t){e.emit("error",t)}var a=r(103);e.exports={destroy:n,undestroy:i}},function(e,t,r){function n(e){if(e&&!l(e))throw new Error("Unknown encoding: "+e)}function i(e){return e.toString(this.encoding)}function o(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function a(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var s=r(59).Buffer,l=s.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},u=t.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),n(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=a;break;default:return void(this.write=i)}this.charBuffer=new s(6),this.charReceived=0,this.charLength=0};u.prototype.write=function(e){for(var t="";this.charLength;){var r=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";e=e.slice(r,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var n=t.charCodeAt(t.length-1);if(!(n>=55296&&n<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var i=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,i),i-=this.charReceived),t+=e.toString(this.encoding,0,i);var i=t.length-1,n=t.charCodeAt(i);if(n>=55296&&n<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),e.copy(this.charBuffer,0,0,o),t.substring(0,i)}return t},u.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var r=e[e.length-t];if(1==t&&r>>5==6){this.charLength=2;break}if(t<=2&&r>>4==14){this.charLength=3;break}if(t<=3&&r>>3==30){this.charLength=4;break}}this.charReceived=t},u.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var r=this.charReceived,n=this.charBuffer,i=this.encoding;t+=n.slice(0,r).toString(i)}return t}},function(e,t,r){"use strict";function n(e){this.afterTransform=function(t,r){return i(e,t,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function i(e,t,r){var n=e._transformState;n.transforming=!1;var i=n.writecb;if(!i)return e.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!==r&&void 0!==r&&e.push(r),i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);s.call(this,e),this._transformState=new n(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e,r){a(t,e,r)}):a(t)})}function a(e,t,r){if(t)return e.emit("error",t);null!==r&&void 0!==r&&e.push(r);var n=e._writableState,i=e._transformState;if(n.length)throw new Error("Calling transform done when ws.length != 0");if(i.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}e.exports=o;var s=r(47),l=r(78);l.inherits=r(35),l.inherits(o,s),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")},o.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},o.prototype._destroy=function(e,t){var r=this;s.prototype._destroy.call(this,e,function(e){t(e),r.emit("close")})}},function(e,t,r){"use strict";function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(e,t,r){if(e&&u.isObject(e)&&e instanceof n)return e;var i=new n;return i.parse(e,t,r),i}function o(e){return u.isString(e)&&(e=i(e)),e instanceof n?e.format():n.prototype.format.call(e)}function a(e,t){return i(e,!1,!0).resolve(t)}function s(e,t){return e?i(e,!1,!0).resolveObject(t):t}var l=r(388),u=r(389);t.parse=i,t.resolve=a,t.resolveObject=s,t.format=o,t.Url=n;var c=/^([a-z0-9.+-]+:)/i,p=/:[0-9]*$/,d=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,f=["<",">",'"',"`"," ","\r","\n","\t"],h=["{","}","|","\\","^","`"].concat(f),g=["'"].concat(h),v=["%","/","?",";","#"].concat(g),m=["/","?","#"],y=/^[+a-z0-9A-Z_-]{0,63}$/,b=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,E={javascript:!0,"javascript:":!0},x={javascript:!0,"javascript:":!0},S={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},C=r(390);n.prototype.parse=function(e,t,r){if(!u.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),i=-1!==n&&n<e.indexOf("#")?"?":"#",o=e.split(i),a=/\\/g;o[0]=o[0].replace(a,"/"),e=o.join(i);var s=e;if(s=s.trim(),!r&&1===e.split("#").length){var p=d.exec(s);if(p)return this.path=s,this.href=s,this.pathname=p[1],p[2]?(this.search=p[2],this.query=t?C.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var f=c.exec(s);if(f){f=f[0];var h=f.toLowerCase();this.protocol=h,s=s.substr(f.length)}if(r||f||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var w="//"===s.substr(0,2);!w||f&&x[f]||(s=s.substr(2),this.slashes=!0)}if(!x[f]&&(w||f&&!S[f])){for(var T=-1,A=0;A<m.length;A++){var I=s.indexOf(m[A]);-1!==I&&(-1===T||I<T)&&(T=I)}var L,N;N=-1===T?s.lastIndexOf("@"):s.lastIndexOf("@",T),-1!==N&&(L=s.slice(0,N),s=s.slice(N+1),this.auth=decodeURIComponent(L)),T=-1;for(var A=0;A<v.length;A++){var I=s.indexOf(v[A]);-1!==I&&(-1===T||I<T)&&(T=I)}-1===T&&(T=s.length),this.host=s.slice(0,T),s=s.slice(T),this.parseHost(),this.hostname=this.hostname||"";var R="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!R)for(var _=this.hostname.split(/\./),A=0,k=_.length;A<k;A++){var O=_[A];if(O&&!O.match(y)){for(var P="",D=0,F=O.length;D<F;D++)O.charCodeAt(D)>127?P+="x":P+=O[D];if(!P.match(y)){var M=_.slice(0,A),j=_.slice(A+1),$=O.match(b);$&&(M.push($[1]),j.unshift($[2])),j.length&&(s="/"+j.join(".")+s),this.hostname=M.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),R||(this.hostname=l.toASCII(this.hostname));var G=this.port?":"+this.port:"",B=this.hostname||"";this.host=B+G,this.href+=this.host,R&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!E[h])for(var A=0,k=g.length;A<k;A++){var H=g[A];if(-1!==s.indexOf(H)){var U=encodeURIComponent(H);U===H&&(U=escape(H)),s=s.split(H).join(U)}}var V=s.indexOf("#");-1!==V&&(this.hash=s.substr(V),s=s.slice(0,V));var q=s.indexOf("?");if(-1!==q?(this.search=s.substr(q),this.query=s.substr(q+1),t&&(this.query=C.parse(this.query)),s=s.slice(0,q)):t&&(this.search="",this.query={}),s&&(this.pathname=s),S[h]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var G=this.pathname||"",z=this.search||"";this.path=G+z}return this.href=this.format(),this},n.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&u.isObject(this.query)&&Object.keys(this.query).length&&(o=C.stringify(this.query));var a=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||S[t])&&!1!==i?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),a=a.replace("#","%23"),t+i+r+a+n},n.prototype.resolve=function(e){return this.resolveObject(i(e,!1,!0)).format()},n.prototype.resolveObject=function(e){if(u.isString(e)){var t=new n;t.parse(e,!1,!0),e=t}for(var r=new n,i=Object.keys(this),o=0;o<i.length;o++){var a=i[o];r[a]=this[a]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),l=0;l<s.length;l++){var c=s[l];"protocol"!==c&&(r[c]=e[c])}return S[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!S[e.protocol]){for(var p=Object.keys(e),d=0;d<p.length;d++){var f=p[d];r[f]=e[f]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||x[e.protocol])r.pathname=e.pathname;else{for(var h=(e.pathname||"").split("/");h.length&&!(e.host=h.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==h[0]&&h.unshift(""),h.length<2&&h.unshift(""),r.pathname=h.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var g=r.pathname||"",v=r.search||"";r.path=g+v}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var m=r.pathname&&"/"===r.pathname.charAt(0),y=e.host||e.pathname&&"/"===e.pathname.charAt(0),b=y||m||r.host&&e.pathname,E=b,C=r.pathname&&r.pathname.split("/")||[],h=e.pathname&&e.pathname.split("/")||[],w=r.protocol&&!S[r.protocol];if(w&&(r.hostname="",r.port=null,r.host&&(""===C[0]?C[0]=r.host:C.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===h[0]?h[0]=e.host:h.unshift(e.host)),e.host=null),b=b&&(""===h[0]||""===C[0])),y)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,C=h;else if(h.length)C||(C=[]),C.pop(),C=C.concat(h),r.search=e.search,r.query=e.query;else if(!u.isNullOrUndefined(e.search)){if(w){r.hostname=r.host=C.shift();var T=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");T&&(r.auth=T.shift(),r.host=r.hostname=T.shift())}return r.search=e.search,r.query=e.query,u.isNull(r.pathname)&&u.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!C.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var A=C.slice(-1)[0],I=(r.host||e.host||C.length>1)&&("."===A||".."===A)||""===A,L=0,N=C.length;N>=0;N--)A=C[N],"."===A?C.splice(N,1):".."===A?(C.splice(N,1),L++):L&&(C.splice(N,1),L--);if(!b&&!E)for(;L--;L)C.unshift("..");!b||""===C[0]||C[0]&&"/"===C[0].charAt(0)||C.unshift(""),I&&"/"!==C.join("/").substr(-1)&&C.push("");var R=""===C[0]||C[0]&&"/"===C[0].charAt(0);if(w){r.hostname=r.host=R?"":C.length?C.shift():"";var T=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");T&&(r.auth=T.shift(),r.host=r.hostname=T.shift())}return b=b||r.host&&C.length,b&&!R&&C.unshift(""),C.length?r.pathname=C.join("/"):(r.pathname=null,r.path=null),u.isNull(r.pathname)&&u.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},n.prototype.parseHost=function(){var e=this.host,t=p.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,r){function n(e,t){if(!(this instanceof n))return new n(e,t);this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._ids["><"]=0,this._entities=Object.create(null),this._blankNodeIndex=0,t||!e||e[0]||(t=e,e=null),t=t||{},this._prefixes=Object.create(null),t.prefixes&&this.addPrefixes(t.prefixes),this.defaultGraph=t.defaultGraph||"http://example.org/#defaultGraph",e&&this.addTriples(e)}var i=r(152).expandPrefixedName;n.prototype={get size(){var e=this._size;if(null!==e)return e;var t,r,n=this._graphs;for(var i in n)for(var o in t=n[i].subjects)for(var a in r=t[o])e+=Object.keys(r[a]).length;return this._size=e},_addToIndex:function(e,t,r,n){var i=e[t]||(e[t]={}),o=i[r]||(i[r]={}),a=n in o;return a||(o[n]=null),!a},_removeFromIndex:function(e,t,r,n){var i,o=e[t],a=o[r];delete a[n];for(i in a)return;delete o[r];for(i in o)return;delete e[t]},_findInIndex:function(e,t,r,n,i,o,a,s){var l,u,c,p=[],d=!t+!r+!n,f=d>1?Object.keys(this._ids):this._entities;t&&((l=e,e={})[t]=l[t]);for(var h in e){var g=f[h];if(u=e[h]){r&&((l=u,u={})[r]=l[r]);for(var v in u){var m=f[v];if(c=u[v])for(var y=(n?n in c?[n]:[]:Object.keys(c)),b=y.length-1;b>=0;b--){var E={subject:"",predicate:"",object:"",graph:s};E[i]=g,E[o]=m,E[a]=f[y[b]],p.push(E)}}}}return p},_countInIndex:function(e,t,r,n){var i,o,a,s=0;t&&((i=e,e={})[t]=i[t]);for(var l in e)if(o=e[l]){r&&((i=o,o={})[r]=i[r]);for(var u in o)(a=o[u])&&(n?n in a&&s++:s+=Object.keys(a).length)}return s},addTriple:function(e,t,r,n){t||(n=e.graph,r=e.object,t=e.predicate,e=e.subject),n=n||this.defaultGraph;var i=this._graphs[n];i||(i=this._graphs[n]={subjects:{},predicates:{},objects:{}},Object.freeze(i));var o=this._ids,a=this._entities;e=o[e]||(o[a[++this._id]=e]=this._id),t=o[t]||(o[a[++this._id]=t]=this._id),r=o[r]||(o[a[++this._id]=r]=this._id);var s=this._addToIndex(i.subjects,e,t,r);return this._addToIndex(i.predicates,t,r,e),this._addToIndex(i.objects,r,e,t),this._size=null,s},addTriples:function(e){for(var t=e.length-1;t>=0;t--)this.addTriple(e[t])},addPrefix:function(e,t){this._prefixes[e]=t},addPrefixes:function(e){for(var t in e)this.addPrefix(t,e[t])},removeTriple:function(e,t,r,n){t||(n=e.graph,r=e.object,t=e.predicate,e=e.subject),n=n||this.defaultGraph;var i,o=this._ids,a=this._graphs;if(!(e=o[e]))return!1;if(!(t=o[t]))return!1;if(!(r=o[r]))return!1;if(!(i=a[n]))return!1;var s,l;if(!(s=i.subjects[e]))return!1;if(!(l=s[t]))return!1;if(!(r in l))return!1;this._removeFromIndex(i.subjects,e,t,r),this._removeFromIndex(i.predicates,t,r,e),this._removeFromIndex(i.objects,r,e,t),null!==this._size&&this._size--;for(e in i.subjects)return!0;return delete a[n],!0},removeTriples:function(e){for(var t=e.length-1;t>=0;t--)this.removeTriple(e[t])},find:function(e,t,r,n){var o=this._prefixes;return this.findByIRI(i(e,o),i(t,o),i(r,o),i(n,o))},findByIRI:function(e,t,r,n){var i,o,a,s,l=[],u={},c=this._ids;n?u[n]=this._graphs[n]:u=this._graphs;for(var p in u)if(i=u[p]){if(e&&!(o=c[e]))return l;if(t&&!(a=c[t]))return l;if(r&&!(s=c[r]))return l;o?s?l.push(this._findInIndex(i.objects,s,o,a,"object","subject","predicate",p)):l.push(this._findInIndex(i.subjects,o,a,null,"subject","predicate","object",p)):a?l.push(this._findInIndex(i.predicates,a,s,null,"predicate","object","subject",p)):s?l.push(this._findInIndex(i.objects,s,null,null,"object","subject","predicate",p)):l.push(this._findInIndex(i.subjects,null,null,null,"subject","predicate","object",p))}return 1===l.length?l[0]:l.concat.apply([],l)},count:function(e,t,r,n){var o=this._prefixes;return this.countByIRI(i(e,o),i(t,o),i(r,o),i(n,o))},countByIRI:function(e,t,r,n){n=n||this.defaultGraph;var i=this._graphs[n],o=this._ids;return i?e&&!(e=o[e])?0:t&&!(t=o[t])?0:r&&!(r=o[r])?0:e?r?this._countInIndex(i.objects,r,e,t):this._countInIndex(i.subjects,e,t,r):t?this._countInIndex(i.predicates,t,r,e):this._countInIndex(i.objects,r,e,t):0},createBlankNode:function(e){var t,r;if(e)for(t=e="_:"+e,r=1;this._ids[t];)t=e+r++;else do{t="_:b"+this._blankNodeIndex++}while(this._ids[t]);return this._ids[t]=++this._id,t}},e.exports=n},function(e,t,r){function n(e){if(!(this instanceof n))return new n(e);i.call(this,{decodeStrings:!0}),this._readableState.objectMode=!0;var t=this,r=new a(e);r.parse(function(e,r){r&&t.push(r)||e&&t.emit("error",e)},this.emit.bind(this,"prefix")),this._transform=function(e,t,n){r.addChunk(e),n()},this._flush=function(e){r.end(),e()}}var i=r(225).Transform,o=r(226),a=r(151);o.inherits(n,i),e.exports=n},function(e,t,r){function n(){i.call(this)}e.exports=n;var i=r(147).EventEmitter;r(35)(n,i),n.Readable=r(77),n.Writable=r(397),n.Duplex=r(398),n.Transform=r(399),n.PassThrough=r(400),n.Stream=n,n.prototype.pipe=function(e,t){function r(t){e.writable&&!1===e.write(t)&&u.pause&&u.pause()}function n(){u.readable&&u.resume&&u.resume()}function o(){c||(c=!0,e.end())}function a(){c||(c=!0,"function"==typeof e.destroy&&e.destroy())}function s(e){if(l(),0===i.listenerCount(this,"error"))throw e}function l(){u.removeListener("data",r),e.removeListener("drain",n),u.removeListener("end",o),u.removeListener("close",a),u.removeListener("error",s),e.removeListener("error",s),u.removeListener("end",l),u.removeListener("close",l),e.removeListener("close",l)}var u=this;u.on("data",r),e.on("drain",n),e._isStdio||t&&!1===t.end||(u.on("end",o),u.on("close",a));var c=!1;return u.on("error",s),e.on("error",s),u.on("end",l),u.on("close",l),e.on("close",l),e.emit("pipe",u),e}},function(e,t,r){(function(e,n){function i(e,r){var n={seen:[],stylize:a};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),g(r)?n.showHidden=r:r&&t._extend(n,r),x(n.showHidden)&&(n.showHidden=!1),x(n.depth)&&(n.depth=2),x(n.colors)&&(n.colors=!1),x(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=o),l(n,e,n.depth)}function o(e,t){var r=i.styles[t];return r?"["+i.colors[r][0]+"m"+e+"["+i.colors[r][1]+"m":e}function a(e,t){return e}function s(e){var t={};return e.forEach(function(e,r){t[e]=!0}),t}function l(e,r,n){if(e.customInspect&&r&&A(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var i=r.inspect(n,e);return b(i)||(i=l(e,i,n)),i}var o=u(e,r);if(o)return o;var a=Object.keys(r),g=s(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(r)),T(r)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return c(r);if(0===a.length){if(A(r)){var v=r.name?": "+r.name:"";return e.stylize("[Function"+v+"]","special")}if(S(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(w(r))return e.stylize(Date.prototype.toString.call(r),"date");if(T(r))return c(r)}var m="",y=!1,E=["{","}"];if(h(r)&&(y=!0,E=["[","]"]),A(r)){m=" [Function"+(r.name?": "+r.name:"")+"]"}if(S(r)&&(m=" "+RegExp.prototype.toString.call(r)),w(r)&&(m=" "+Date.prototype.toUTCString.call(r)),T(r)&&(m=" "+c(r)),0===a.length&&(!y||0==r.length))return E[0]+m+E[1];if(n<0)return S(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special");e.seen.push(r);var x;return x=y?p(e,r,n,g,a):a.map(function(t){return d(e,r,n,g,t,y)}),e.seen.pop(),f(x,m,E)}function u(e,t){if(x(t))return e.stylize("undefined","undefined");if(b(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return y(t)?e.stylize(""+t,"number"):g(t)?e.stylize(""+t,"boolean"):v(t)?e.stylize("null","null"):void 0}function c(e){return"["+Error.prototype.toString.call(e)+"]"}function p(e,t,r,n,i){for(var o=[],a=0,s=t.length;a<s;++a)_(t,String(a))?o.push(d(e,t,r,n,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(d(e,t,r,n,i,!0))}),o}function d(e,t,r,n,i,o){var a,s,u;if(u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},u.get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),_(n,i)||(a="["+i+"]"),s||(e.seen.indexOf(u.value)<0?(s=v(r)?l(e,u.value,null):l(e,u.value,r-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n"))):s=e.stylize("[Circular]","special")),x(a)){if(o&&i.match(/^\d+$/))return s;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function f(e,t,r){var n=0;return e.reduce(function(e,t){return n++,t.indexOf("\n")>=0&&n++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function h(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function v(e){return null===e}function m(e){return null==e}function y(e){return"number"==typeof e}function b(e){return"string"==typeof e}function E(e){return"symbol"==typeof e}function x(e){return void 0===e}function S(e){return C(e)&&"[object RegExp]"===L(e)}function C(e){return"object"==typeof e&&null!==e}function w(e){return C(e)&&"[object Date]"===L(e)}function T(e){return C(e)&&("[object Error]"===L(e)||e instanceof Error)}function A(e){return"function"==typeof e}function I(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function L(e){return Object.prototype.toString.call(e)}function N(e){return e<10?"0"+e.toString(10):e.toString(10)}function R(){var e=new Date,t=[N(e.getHours()),N(e.getMinutes()),N(e.getSeconds())].join(":");return[e.getDate(),D[e.getMonth()],t].join(" ")}function _(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var k=/%[sdj%]/g;t.format=function(e){if(!b(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(i(arguments[r]));return t.join(" ")}for(var r=1,n=arguments,o=n.length,a=String(e).replace(k,function(e){if("%%"===e)return"%";if(r>=o)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}}),s=n[r];r<o;s=n[++r])v(s)||!C(s)?a+=" "+s:a+=" "+i(s);return a},t.deprecate=function(r,i){function o(){if(!a){if(n.throwDeprecation)throw new Error(i);n.traceDeprecation?console.trace(i):console.error(i),a=!0}return r.apply(this,arguments)}if(x(e.process))return function(){return t.deprecate(r,i).apply(this,arguments)};if(!0===n.noDeprecation)return r;var a=!1;return o};var O,P={};t.debuglog=function(e){if(x(O)&&(O=n.env.NODE_DEBUG||""),e=e.toUpperCase(),!P[e])if(new RegExp("\\b"+e+"\\b","i").test(O)){var r=n.pid;P[e]=function(){var n=t.format.apply(t,arguments);console.error("%s %d: %s",e,r,n)}}else P[e]=function(){};return P[e]},t.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=h,t.isBoolean=g,t.isNull=v,t.isNullOrUndefined=m,t.isNumber=y,t.isString=b,t.isSymbol=E,t.isUndefined=x,t.isRegExp=S,t.isObject=C,t.isDate=w,t.isError=T,t.isFunction=A,t.isPrimitive=I,t.isBuffer=r(401);var D=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.log=function(){console.log("%s - %s",R(),t.format.apply(t,arguments))},t.inherits=r(402),t._extend=function(e,t){if(!t||!C(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}}).call(t,r(11),r(28))},function(e,t,r){function n(e){if(!(this instanceof n))return new n(e);i.call(this,{encoding:"utf8"}),this._writableState.objectMode=!0;var t=this,r=new a({write:function(e,r,n){t.push(e),n&&n()},end:function(e){t.push(null),e&&e()}},e);this._transform=function(e,t,n){r.addTriple(e,n)},this._flush=function(e){r.end(e)}}var i=r(225).Transform,o=r(226),a=r(153);o.inherits(n,i),e.exports=n},function(e,t,r){(function(n,i,o){var a;/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE
 * @version   2.3.0
 */
(function(){"use strict";function s(e){return"function"==typeof e||"object"==typeof e&&null!==e}function l(e){return"function"==typeof e}function u(e){return"object"==typeof e&&null!==e}function c(e){V=e}function p(e){W=e}function d(){return function(){U(h)}}function f(){return function(){setTimeout(h,1)}}function h(){for(var e=0;e<Q;e+=2){(0,ee[e])(ee[e+1]),ee[e]=void 0,ee[e+1]=void 0}Q=0}function g(){}function v(){return new TypeError("You cannot resolve a promise with itself")}function m(){return new TypeError("A promises callback cannot return that same promise.")}function y(e){try{return e.then}catch(e){return ie.error=e,ie}}function b(e,t,r,n){try{e.call(t,r,n)}catch(e){return e}}function E(e,t,r){W(function(e){var n=!1,i=b(r,t,function(r){n||(n=!0,t!==r?C(e,r):T(e,r))},function(t){n||(n=!0,A(e,t))},"Settle: "+(e._label||" unknown promise"));!n&&i&&(n=!0,A(e,i))},e)}function x(e,t){t._state===re?T(e,t._result):t._state===ne?A(e,t._result):I(t,void 0,function(t){C(e,t)},function(t){A(e,t)})}function S(e,t){if(t.constructor===e.constructor)x(e,t);else{var r=y(t);r===ie?A(e,ie.error):void 0===r?T(e,t):l(r)?E(e,t,r):T(e,t)}}function C(e,t){e===t?A(e,v()):s(t)?S(e,t):T(e,t)}function w(e){e._onerror&&e._onerror(e._result),L(e)}function T(e,t){e._state===te&&(e._result=t,e._state=re,0!==e._subscribers.length&&W(L,e))}function A(e,t){e._state===te&&(e._state=ne,e._result=t,W(w,e))}function I(e,t,r,n){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+re]=r,i[o+ne]=n,0===o&&e._state&&W(L,e)}function L(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var n,i,o=e._result,a=0;a<t.length;a+=3)n=t[a],i=t[a+r],n?_(r,n,i,o):i(o);e._subscribers.length=0}}function N(){this.error=null}function R(e,t){try{return e(t)}catch(e){return oe.error=e,oe}}function _(e,t,r,n){var i,o,a,s,u=l(r);if(u){if(i=R(r,n),i===oe?(s=!0,o=i.error,i=null):a=!0,t===i)return void A(t,m())}else i=n,a=!0;t._state!==te||(u&&a?C(t,i):s?A(t,o):e===re?T(t,i):e===ne&&A(t,i))}function k(e,t){try{t(function(t){C(e,t)},function(t){A(e,t)})}catch(t){A(e,t)}}function O(e,t){var r=this;r._instanceConstructor=e,r.promise=new e(g),r._validateInput(t)?(r._input=t,r.length=t.length,r._remaining=t.length,r._init(),0===r.length?T(r.promise,r._result):(r.length=r.length||0,r._enumerate(),0===r._remaining&&T(r.promise,r._result))):A(r.promise,r._validationError())}function P(e){return new ae(this,e).promise}function D(e){function t(e){C(i,e)}function r(e){A(i,e)}var n=this,i=new n(g);if(!z(e))return A(i,new TypeError("You must pass an array to race.")),i;for(var o=e.length,a=0;i._state===te&&a<o;a++)I(n.resolve(e[a]),void 0,t,r);return i}function F(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var r=new t(g);return C(r,e),r}function M(e){var t=this,r=new t(g);return A(r,e),r}function j(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function $(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function G(e){this._id=pe++,this._state=void 0,this._result=void 0,this._subscribers=[],g!==e&&(l(e)||j(),this instanceof G||$(),k(this,e))}function B(){var e;if(void 0!==o)e=o;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;t&&"[object Promise]"===Object.prototype.toString.call(t.resolve())&&!t.cast||(e.Promise=de)}var H;H=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var U,V,q,z=H,Q=0,W=function(e,t){ee[Q]=e,ee[Q+1]=t,2===(Q+=2)&&(V?V(h):q())},X="undefined"!=typeof window?window:void 0,Y=X||{},K=Y.MutationObserver||Y.WebKitMutationObserver,J=void 0!==n&&"[object process]"==={}.toString.call(n),Z="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,ee=new Array(1e3);q=J?function(){var e=n.nextTick,t=n.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);return Array.isArray(t)&&"0"===t[1]&&"10"===t[2]&&(e=i),function(){e(h)}}():K?function(){var e=0,t=new K(h),r=document.createTextNode("");return t.observe(r,{characterData:!0}),function(){r.data=e=++e%2}}():Z?function(){var e=new MessageChannel;return e.port1.onmessage=h,function(){e.port2.postMessage(0)}}():void 0===X?function(){try{var e=r(405);return U=e.runOnLoop||e.runOnContext,d()}catch(e){return f()}}():f();var te=void 0,re=1,ne=2,ie=new N,oe=new N;O.prototype._validateInput=function(e){return z(e)},O.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},O.prototype._init=function(){this._result=new Array(this.length)};var ae=O;O.prototype._enumerate=function(){for(var e=this,t=e.length,r=e.promise,n=e._input,i=0;r._state===te&&i<t;i++)e._eachEntry(n[i],i)},O.prototype._eachEntry=function(e,t){var r=this,n=r._instanceConstructor;u(e)?e.constructor===n&&e._state!==te?(e._onerror=null,r._settledAt(e._state,t,e._result)):r._willSettleAt(n.resolve(e),t):(r._remaining--,r._result[t]=e)},O.prototype._settledAt=function(e,t,r){var n=this,i=n.promise;i._state===te&&(n._remaining--,e===ne?A(i,r):n._result[t]=r),0===n._remaining&&T(i,n._result)},O.prototype._willSettleAt=function(e,t){var r=this;I(e,void 0,function(e){r._settledAt(re,t,e)},function(e){r._settledAt(ne,t,e)})};var se=P,le=D,ue=F,ce=M,pe=0,de=G;G.all=se,G.race=le,G.resolve=ue,G.reject=ce,G._setScheduler=c,G._setAsap=p,G._asap=W,G.prototype={constructor:G,then:function(e,t){var r=this,n=r._state;if(n===re&&!e||n===ne&&!t)return this;var i=new this.constructor(g),o=r._result;if(n){var a=arguments[n-1];W(function(){_(n,i,a,o)})}else I(r,i,e,t);return i},catch:function(e){return this.then(null,e)}};var fe=B,he={Promise:de,polyfill:fe};void 0!==(a=function(){return he}.call(t,r,t,e))&&(e.exports=a),fe()}).call(this)}).call(t,r(28),r(104).setImmediate,r(11))},function(e,t,r){var n=r(10),i=r(145).Tree;Lexicon=function(e){var t=this;this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri},this.oidCounter=1,n.seq(function(e){new i(2,function(r){t.uris=r,e()})},function(e){new i(2,function(r){t.literals=r,e()})},function(e){new i(2,function(r){t.knownGraphs=r,e()})},function(e){new i(2,function(r){t.oidUris=r,e()})},function(e){new i(2,function(r){t.oidLiterals=r,e()})},function(e){new i(2,function(r){t.oidBlanks=r,e()})})(function(){null!=e&&e(t)})},Lexicon.prototype.registerGraph=function(e,t,r){e!=this.defaultGraphOid?this.knownGraphs.insert(e,t,function(){r()}):r()},Lexicon.prototype.registeredGraphs=function(e,t){var r=[];this.knownGraphs.walk(function(t){!0===e?r.push(t.data):r.push(t.key)},function(){t(r)})},Lexicon.prototype.registerUri=function(e,t){var r=this;e===this.defaultGraphUri?t(this.defaultGraphOid):this.uris.search(e,function(i){if(null==i){var o=r.oidCounter,a="u"+o;r.oidCounter++,n.seq(function(t){r.uris.insert(e,[o,0],function(){t()})},function(t){r.oidUris.insert(a,e,function(){t()})})(function(){t(o)})}else o=i[0],i[1]=i[1]+1,t(o)})},Lexicon.prototype.resolveUri=function(e,t){e===this.defaultGraphUri?t(this.defaultGraphOid):this.uris.search(e,function(e){t(null!=e?e[0]:-1)})},Lexicon.prototype.resolveUriCost=function(e,t){e===this.defaultGraphUri?t(0):this.uris.search(e,function(e){t(null!=e?e[1]:-1)})},Lexicon.prototype.registerBlank=function(e){var t=this.oidCounter;this.oidCounter++;var r=""+t;this.oidBlanks.insert(r,r,function(){e(t)})},Lexicon.prototype.resolveBlank=function(e,t){var r=this;this.oidBlanks.search(e,function(e){if(null!=e)t(e);else{var n=r.oidCounter;this.oidCounter++,t(""+n)}})},Lexicon.prototype.resolveBlankCost=function(e,t){t(0)},Lexicon.prototype.registerLiteral=function(e,t){var r=this;this.literals.search(e,function(i){if(null==i){var o=r.oidCounter,a="l"+o;r.oidCounter++,n.seq(function(t){r.literals.insert(e,[o,0],function(){t()})},function(t){r.oidLiterals.insert(a,e,function(){t()})})(function(){t(o)})}else{var o=i[0];i[1]=i[1]+1,t(o)}})},Lexicon.prototype.resolveLiteral=function(e,t){this.literals.search(e,function(e){t(null!=e?e[0]:-1)})},Lexicon.prototype.resolveLiteralCost=function(e,t){this.literals.search(e,function(e){t(null!=e?e[1]:-1)})},Lexicon.prototype.parseLiteral=function(e){var t=e.lastIndexOf("@");if(-1!=t&&'"'===e[t-1]&&null!=e.substring(t,e.length).match(/^@[a-zA-Z\-]+$/g)){var r=e.substring(1,t-1);return{token:"literal",value:r,lang:e.substring(t+1,e.length)}}var t=e.lastIndexOf("^^");if(-1!=t&&'"'===e[t-1]&&"<"===e[t+2]&&">"===e[e.length-1]){var r=e.substring(1,t-1);return{token:"literal",value:r,type:e.substring(t+3,e.length-1)}}var r=e.substring(1,e.length-1);return{token:"literal",value:r}},Lexicon.prototype.parseUri=function(e){return{token:"uri",value:e}},Lexicon.prototype.retrieve=function(e,t){var r=this;e===this.defaultGraphOid?t({token:"uri",value:this.defaultGraphUri,prefix:null,suffix:null,defaultGraph:!0}):n.seq(function(t,n){r.oidUris.search("u"+e,function(e){null!=e?n(null,r.parseUri(e)):n(null,null)})},function(t,n){null==t?r.oidLiterals.search("l"+e,function(e){null!=e?n(null,r.parseLiteral(e)):n(null,null)}):n(null,t)},function(t,n){null==t?r.oidBlanks.search(""+e,function(t){null!=t?n(null,{token:"blank",value:"_:"+e}):n(null,null)}):n(null,t)})(null,function(e,r){t(r)})},Lexicon.prototype.clear=function(e){var t=this;this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri},this.oidCounter=1,n.seq(function(e){new i(2,function(r){t.uris=r,e()})},function(e){new i(2,function(r){t.literals=r,e()})},function(e){new i(2,function(r){t.knownGraphs=r,e()})},function(e){new i(2,function(r){t.oidUris=r,e()})},function(e){new i(2,function(r){t.oidLiterals=r,e()})},function(e){new i(2,function(r){t.oidBlanks=r,e()})})(function(){null!=e&&e()})},Lexicon.prototype.unregister=function(e,t,r){var i=this;n.seq(function(r){i._unregisterTerm(e.subject.token,t.subject,r)},function(r){i._unregisterTerm(e.predicate.token,t.predicate,r)},function(r){i._unregisterTerm(e.object.token,t.object,r)},function(r){null!=e.graph?i._unregisterTerm(e.graph.token,t.graph,r):r()})(function(){r(!0)})},Lexicon.prototype._unregisterTerm=function(e,t,r){var i=this;if("uri"===e)if(t!=this.defaultGraphOid){var o="u"+t;i.oidUris.search(o,function(e){i.uris.search(e,function(a){var s=a[1];""+a[0]==""+t?0===s?n.seq(function(e){i.oidUris.delete(o,function(){e()})},function(t){i.uris.delete(e,function(){t()})},function(e){i.knownGraphs.delete(t,function(){e()})})(function(){r()}):i.uris.insert(e,[t,s-1],function(){r()}):r()})})}else r();else if("literal"===e){this.oidCounter++;var o="l"+t;i.oidLiterals.search(o,function(e){i.literals.search(e,function(a){var s=a[1];""+a[0]==""+t?0===s?n.seq(function(e){i.oidLiterals.delete(o,function(){e()})},function(t){i.literals.delete(e,function(){t()})})(function(){r()}):i.literals.insert(e,[t,s-1],function(){r()}):r()})})}else"blank"===e?i.oidBlanks.delete(""+t,function(){r()}):r()},e.exports={Lexicon:Lexicon}},function(e,t,r){!function(n,i){e.exports=t=i(r(4))}(0,function(e){return function(t){var r=e,n=r.lib,i=n.WordArray,o=n.Hasher,a=r.algo,s=[],l=[];!function(){function e(e){return 4294967296*(e-(0|e))|0}for(var r=2,n=0;n<64;)(function(e){for(var r=t.sqrt(e),n=2;n<=r;n++)if(!(e%n))return!1;return!0})(r)&&(n<8&&(s[n]=e(t.pow(r,.5))),l[n]=e(t.pow(r,1/3)),n++),r++}();var u=[],c=a.SHA256=o.extend({_doReset:function(){this._hash=new i.init(s.slice(0))},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],i=r[1],o=r[2],a=r[3],s=r[4],c=r[5],p=r[6],d=r[7],f=0;f<64;f++){if(f<16)u[f]=0|e[t+f];else{var h=u[f-15],g=(h<<25|h>>>7)^(h<<14|h>>>18)^h>>>3,v=u[f-2],m=(v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10;u[f]=g+u[f-7]+m+u[f-16]}var y=s&c^~s&p,b=n&i^n&o^i&o,E=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),x=(s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25),S=d+x+y+l[f]+u[f],C=E+b;d=p,p=c,c=s,s=a+S|0,a=o,o=i,i=n,n=S+C|0}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+o|0,r[3]=r[3]+a|0,r[4]=r[4]+s|0,r[5]=r[5]+c|0,r[6]=r[6]+p|0,r[7]=r[7]+d|0},_doFinalize:function(){var e=this._data,r=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;return r[i>>>5]|=128<<24-i%32,r[14+(i+64>>>9<<4)]=t.floor(n/4294967296),r[15+(i+64>>>9<<4)]=n,e.sigBytes=4*r.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});r.SHA256=o._createHelper(c),r.HmacSHA256=o._createHmacHelper(c)}(Math),e.SHA256})},function(e,t,r){!function(n,i,o){e.exports=t=i(r(4),r(105))}(0,function(e){return function(){function t(){return a.create.apply(a,arguments)}var r=e,n=r.lib,i=n.Hasher,o=r.x64,a=o.Word,s=o.WordArray,l=r.algo,u=[t(1116352408,3609767458),t(1899447441,602891725),t(3049323471,3964484399),t(3921009573,2173295548),t(961987163,4081628472),t(1508970993,3053834265),t(2453635748,2937671579),t(2870763221,3664609560),t(3624381080,2734883394),t(310598401,1164996542),t(607225278,1323610764),t(1426881987,3590304994),t(1925078388,4068182383),t(2162078206,991336113),t(2614888103,633803317),t(3248222580,3479774868),t(3835390401,2666613458),t(4022224774,944711139),t(264347078,2341262773),t(604807628,2007800933),t(770255983,1495990901),t(1249150122,1856431235),t(1555081692,3175218132),t(1996064986,2198950837),t(2554220882,3999719339),t(2821834349,766784016),t(2952996808,2566594879),t(3210313671,3203337956),t(3336571891,1034457026),t(3584528711,2466948901),t(113926993,3758326383),t(338241895,168717936),t(666307205,1188179964),t(773529912,1546045734),t(1294757372,1522805485),t(1396182291,2643833823),t(1695183700,2343527390),t(1986661051,1014477480),t(2177026350,1206759142),t(2456956037,344077627),t(2730485921,1290863460),t(2820302411,3158454273),t(3259730800,3505952657),t(3345764771,106217008),t(3516065817,3606008344),t(3600352804,1432725776),t(4094571909,1467031594),t(275423344,851169720),t(430227734,3100823752),t(506948616,1363258195),t(659060556,3750685593),t(883997877,3785050280),t(958139571,3318307427),t(1322822218,3812723403),t(1537002063,2003034995),t(1747873779,3602036899),t(1955562222,1575990012),t(2024104815,1125592928),t(2227730452,2716904306),t(2361852424,442776044),t(2428436474,593698344),t(2756734187,3733110249),t(3204031479,2999351573),t(3329325298,3815920427),t(3391569614,3928383900),t(3515267271,566280711),t(3940187606,3454069534),t(4118630271,4000239992),t(116418474,1914138554),t(174292421,2731055270),t(289380356,3203993006),t(460393269,320620315),t(685471733,587496836),t(852142971,1086792851),t(1017036298,365543100),t(1126000580,2618297676),t(1288033470,3409855158),t(1501505948,4234509866),t(1607167915,987167468),t(1816402316,1246189591)],c=[];!function(){for(var e=0;e<80;e++)c[e]=t()}();var p=l.SHA512=i.extend({_doReset:function(){this._hash=new s.init([new a.init(1779033703,4089235720),new a.init(3144134277,2227873595),new a.init(1013904242,4271175723),new a.init(2773480762,1595750129),new a.init(1359893119,2917565137),new a.init(2600822924,725511199),new a.init(528734635,4215389547),new a.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],i=r[1],o=r[2],a=r[3],s=r[4],l=r[5],p=r[6],d=r[7],f=n.high,h=n.low,g=i.high,v=i.low,m=o.high,y=o.low,b=a.high,E=a.low,x=s.high,S=s.low,C=l.high,w=l.low,T=p.high,A=p.low,I=d.high,L=d.low,N=f,R=h,_=g,k=v,O=m,P=y,D=b,F=E,M=x,j=S,$=C,G=w,B=T,H=A,U=I,V=L,q=0;q<80;q++){var z=c[q];if(q<16)var Q=z.high=0|e[t+2*q],W=z.low=0|e[t+2*q+1];else{var X=c[q-15],Y=X.high,K=X.low,J=(Y>>>1|K<<31)^(Y>>>8|K<<24)^Y>>>7,Z=(K>>>1|Y<<31)^(K>>>8|Y<<24)^(K>>>7|Y<<25),ee=c[q-2],te=ee.high,re=ee.low,ne=(te>>>19|re<<13)^(te<<3|re>>>29)^te>>>6,ie=(re>>>19|te<<13)^(re<<3|te>>>29)^(re>>>6|te<<26),oe=c[q-7],ae=oe.high,se=oe.low,le=c[q-16],ue=le.high,ce=le.low,W=Z+se,Q=J+ae+(W>>>0<Z>>>0?1:0),W=W+ie,Q=Q+ne+(W>>>0<ie>>>0?1:0),W=W+ce,Q=Q+ue+(W>>>0<ce>>>0?1:0);z.high=Q,z.low=W}var pe=M&$^~M&B,de=j&G^~j&H,fe=N&_^N&O^_&O,he=R&k^R&P^k&P,ge=(N>>>28|R<<4)^(N<<30|R>>>2)^(N<<25|R>>>7),ve=(R>>>28|N<<4)^(R<<30|N>>>2)^(R<<25|N>>>7),me=(M>>>14|j<<18)^(M>>>18|j<<14)^(M<<23|j>>>9),ye=(j>>>14|M<<18)^(j>>>18|M<<14)^(j<<23|M>>>9),be=u[q],Ee=be.high,xe=be.low,Se=V+ye,Ce=U+me+(Se>>>0<V>>>0?1:0),Se=Se+de,Ce=Ce+pe+(Se>>>0<de>>>0?1:0),Se=Se+xe,Ce=Ce+Ee+(Se>>>0<xe>>>0?1:0),Se=Se+W,Ce=Ce+Q+(Se>>>0<W>>>0?1:0),we=ve+he,Te=ge+fe+(we>>>0<ve>>>0?1:0);U=B,V=H,B=$,H=G,$=M,G=j,j=F+Se|0,M=D+Ce+(j>>>0<F>>>0?1:0)|0,D=O,F=P,O=_,P=k,_=N,k=R,R=Se+we|0,N=Ce+Te+(R>>>0<Se>>>0?1:0)|0}h=n.low=h+R,n.high=f+N+(h>>>0<R>>>0?1:0),v=i.low=v+k,i.high=g+_+(v>>>0<k>>>0?1:0),y=o.low=y+P,o.high=m+O+(y>>>0<P>>>0?1:0),E=a.low=E+F,a.high=b+D+(E>>>0<F>>>0?1:0),S=s.low=S+j,s.high=x+M+(S>>>0<j>>>0?1:0),w=l.low=w+G,l.high=C+$+(w>>>0<G>>>0?1:0),A=p.low=A+H,p.high=T+B+(A>>>0<H>>>0?1:0),L=d.low=L+V,d.high=I+U+(L>>>0<V>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[30+(n+128>>>10<<5)]=Math.floor(r/4294967296),t[31+(n+128>>>10<<5)]=r,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});r.SHA512=i._createHelper(p),r.HmacSHA512=i._createHmacHelper(p)}(),e.SHA512})},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.PropertyPopoverComponentController=t.PropertyPopoverComponent=t.PropertyPopover=void 0;var o=r(1),a=i(o),s=r(2),l=i(s),u=r(50),c=n(u),p=r(21),d=r(7),f=r(0),h=n(f),g=r(41),v=n(g),m=r(45),y=n(m),b=(t.PropertyPopover=function(){function e(t,r,n,i){(0,a.default)(this,e),this.$element=t,this.$scope=r,this.fibraService=n,this.$compile=i,this.propertyPopover=c.select(t[0]).append("div").classed("property-popover",!0)}return e.$inject=["$element","$scope","fibraService","$compile"],(0,l.default)(e,[{key:"addPopover",value:function(e,t,r,n,i){var o=c.select(t.node().parentElement.parentElement).select("div.property-popover");o.select("property-popover").remove(),o.style("left",r.fx-3+"px").style("top",r.fy+12+"px");var a=e.$new(!0);a.node=r,a.close=function(){o.style("visibility","hidden")},o.node().appendChild(this.$compile('<property-popover node="node" types="types" close="close"></property-popover>')(a)[0]),o.style("visibility","visible")}},{key:"hidePopover",value:function(){this.propertyPopover.style("visibility","hidden")}}]),e}(),t.PropertyPopoverComponent=function e(){(0,a.default)(this,e),this.bindings={node:"=",close:"="},this.template=r(456)(),this.controller=E}),E=t.PropertyPopoverComponentController=function(){function e(t,r,n,i,o){var s=this;(0,a.default)(this,e),this.fibraService=t,this.sparqlItemService=r,this.$scope=n,this.$q=i,this.$ngRedux=o,this.thingType=d.OWL.Thing.value,this.showTypeCreate=!1,this.typeQuery="",this.typeQueryGS=function(e){return void 0!==e&&(s.typeQuery=e),s.typeQuery};var l=o.connect(this.mapTypesToThis,v)(this),u=o.connect(this.mapItemsToThis,y)(this);this.unsubscribe=function(){l(),u()},this.getTypes=function(){return s.types.types.concat(s.types.userTypes)}}return e.$inject=["fibraService","sparqlItemService","$scope","$q","$ngRedux"],(0,l.default)(e,[{key:"$onDestroy",value:function(){this.unsubscribe()}},{key:"$postLink",value:function(){this.label=this.node.label;var e=this.node.localProperties.filter(function(e){return"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"===e.value})[0].values[0].value.value;this.chosenType=this.types.types.filter(function(t){return t.id===e})[0],this.chosenType&&(this.typeQuery=this.chosenType.label)}},{key:"typeCreate",value:function(e){var t=this;e&&!this.types.types.filter(function(t){return t.label===e})[0]&&this.createType(e,this.sparqlItemService).then(function(){var r=t.types.userTypes.filter(function(t){return t.label===e})[0];return r?t.typeChange(r):t.$q.resolve({})})}},{key:"mapTypesToThis",value:function(e){return{types:e.types}}},{key:"mapItemsToThis",value:function(e){return{items:e.items}}},{key:"typeEvaluate",value:function(e){e&&!this.getTypes().filter(function(t){return t.label===e})[0]?this.showTypeCreate=!0:this.showTypeCreate=!1}},{key:"typeChange",value:function(e){var t=this;this.chosenType=e;var r=this.node.localProperties.filter(function(e){return e.value===d.RDF.type.value})[0].values.map(function(e){return new p.PropertyAndValue(d.RDF.type,e.value)}),n=new d.NamedNode(e.id);return this.showTypeCreate=!1,this.itemProperty(this.sparqlItemService,this.node,[new p.PropertyAndValue(d.RDF.type,n)],r).then(function(){var r=t.types.displayTypes;if(!r[0]&&e)return t.setOrderedTypes([e]);if(!r[1]&&e&&r[0]!==e){var n=r.concat([]);return n.push(e),t.setOrderedTypes(n)}})}},{key:"labelChange",value:function(){var e=this.node.localProperties.filter(function(e){return e.value===d.SKOS.prefLabel.value})[0].values.map(function(e){return new p.PropertyAndValue(d.SKOS.prefLabel,e.value)});this.itemProperty(this.sparqlItemService,this.node,[new p.PropertyAndValue(d.SKOS.prefLabel,d.DataFactory.instance.literal(this.label))],e)}},{key:"deleteAndClose",value:function(){var e=this;this.deleteItem(this.$q,this.sparqlItemService,this.node).then(function(){e.fibraService.dispatch("change"),e.close()})}},{key:"closePopover",value:function(){this.close(),this.fibraService.dispatch("change")}}]),e}();h.module("fibra.components.property-popover",["fibra.services","ui.bootstrap"]).component("propertyPopover",new b)},function(e,t,r){var n=r(0);e.exports="filearts.dragDrop";var i=n.module(e.exports,[]);i.factory("dragContext",[function(){function e(){return n.extend(r,{data:null,reset:e,start:t})}function t(e){return r.data=e,e}var r={};return e()}]),i.run(["$document","$rootElement","$timeout",function(e,t,r){function n(){o()}function i(){o()}function o(){r(function(){t.removeClass("drag-active")})}t[0].addEventListener("dragend",n,!0),t[0].addEventListener("drop",i,!0),function(e,t){t||(t=document);var r=t.head||t.getElementsByTagName("head")[0];if(!r){r=t.createElement("head");var n=t.body||t.getElementsByTagName("body")[0];n?n.parentNode.insertBefore(r,n):t.documentElement.appendChild(r)}var i=t.createElement("style");i.type="text/css",i.styleSheet?i.styleSheet.cssText=e:i.appendChild(t.createTextNode(e)),r.appendChild(i)}('.drag-active .drop-container{position:relative}.drag-active .drop-container *{pointer-events:none}.drag-active .drop-container:before{position:absolute;top:0;right:0;bottom:0;left:0;z-index:9999;content:""}',e[0])}]),i.directive("dragContainer",["$rootElement","$parse","$timeout","dragContext",function(e,t,r,n){return{restrict:"A",link:function(i,o,a){function s(t){if(r(function(){e.addClass("drag-active")},0,!1),n.start(a.dragData?i.$eval(a.dragData):o),o.addClass("drag-container-active"),u){var s={$event:t,$dragData:n.data};i.$apply(function(){u(i,s)})}var l=t.originalEvent||t;l.dataTransfer&&(l.dataTransfer.items&&l.dataTransfer.items.length||l.dataTransfer.files&&l.dataTransfer.files.length||l.dataTransfer.setData("text",""))}function l(t){if(r(function(){e.removeClass("drag-active")},0,!1),n.reset(),o.removeClass("drag-container-active"),c){var a={$event:t,$dragData:n.data};i.$apply(function(){c(i,a)})}n.lastTarget&&n.lastTarget.$attrs.$removeClass("drag-over")}var u=a.onDragStart?t(a.onDragStart):null,c=a.onDragEnd?t(a.onDragEnd):null;a.$addClass("drag-container"),i.$watch(a.dragContainer,function(e){a.$set("draggable",void 0===e||e)}),o.on("dragstart",s),o.on("dragend",l)}}}]),i.directive("dropContainer",["$document","$parse","$window","dragContext",function(e,t,r,i){function o(e){return e[0]||e}function a(t){t=o(t);var i=t.getBoundingClientRect();return{width:Math.round(n.isNumber(i.width)?i.width:t.offsetWidth),height:Math.round(n.isNumber(i.height)?i.height:t.offsetHeight),top:Math.round(i.top+(r.pageYOffset||e[0].documentElement.scrollTop)),left:Math.round(i.left+(r.pageXOffset||e[0].documentElement.scrollLeft))}}return{restrict:"A",require:"dropContainer",controller:"DropContainerController",controllerAs:"dropContainer",link:function(e,r,o,s){function l(t){i.lastTarget&&i.lastTarget!==r&&i.lastTarget.$attrs.$removeClass("drag-over"),i.lastTarget={$attrs:o,$element:r};var n={$event:t,$dragData:i.data};d(e,n)&&(t.preventDefault(),o.$addClass("drag-over"),f&&e.$apply(function(){f(e,n)}))}function u(t){var l={$event:t,$dragData:i.data};if(d(e,l)){t.preventDefault();var u=a(r);o.$addClass("drag-over");var c=Number.MAX_VALUE,p=u.width,f=u.height,g=t.pageX-u.left,v=t.pageY-u.top,m=s.lastTarget;n.forEach(s.targets,function(e,t){var r=p/2,n=f/2;t.indexOf("left")>=0&&(r=1*p/4),t.indexOf("top")>=0&&(n=1*f/4),t.indexOf("right")>=0&&(r=3*p/4),t.indexOf("bottom")>=0&&(n=3*f/4);var i=Math.pow(r-g,2)+Math.pow(n-v,2);i<c&&(m=e,c=i)}),e.$apply(function(){h&&h(e,l),m&&(m!==s.lastTarget&&(s.lastTarget&&o.$removeClass("drop-container-"+s.lastTarget.anchor),o.$addClass("drop-container-"+m.anchor),s.lastTarget&&s.lastTarget.handleDragLeave(t,l),m.handleDragEnter(t,l),s.lastTarget=m),m.handleDragOver(t))})}}function c(t){o.$removeClass("drag-over");var r={$event:t,$dragData:i.data};e.$apply(function(){g&&g(e,r),s.lastTarget&&s.lastTarget.handleDragLeave(t,r),s.lastTarget&&(o.$removeClass("drop-container-"+s.lastTarget.anchor),s.lastTarget=null)})}function p(t){i.lastTarget&&i.lastTarget.$attrs.$removeClass("drag-over");var r={$event:t,$dragData:i.data};d(e,r)&&(t.preventDefault(),i.reset(),e.$apply(function(){v&&v(e,r),s.lastTarget&&s.lastTarget.handleDrop(t,r)})),s.lastTarget&&o.$removeClass("drop-container-"+s.lastTarget.anchor),s.lastTarget=null}var d=o.dropAccepts?t(o.dropAccepts):function(e,t){return void 0!==t.$dragData},f=o.onDragEnter?t(o.onDragEnter):null,h=o.onDragOver?t(o.onDragOver):null,g=o.onDragLeave?t(o.onDragLeave):null,v=o.onDrop?t(o.onDrop):null;o.$addClass("drop-container"),r.on("dragover",u),r.on("dragenter",l),r.on("dragleave",c),r.on("drop",p)}}}]),i.controller("DropContainerController",[function(){var e=this,t="center top top-right right bottom-right bottom bottom-left left top-left".split(" ");e.targets={},e.lastTarget=null,e.attach=function(r){var n=r.anchor;if(t.indexOf(n)<0)throw new Error("Invalid drop target anchor `"+n+"`.");return e.targets[n]=r,r},e.detach=function(r){var n=r.anchor;if(t.indexOf(n)<0)throw new Error("Invalid drop target anchor `"+n+"`.");if(!e.targets[n]===r)throw new Error("The indicated drop target is not attached at the anchor `"+n+"`.");return delete e.targets[n],r}}]),i.directive("dropTarget",["$parse","dragContext",function(e,t){return{restrict:"A",require:["^dropContainer","dropTarget"],scope:!0,bindToController:{anchor:"@dropTarget"},controller:n.noop,controllerAs:"dropTarget",link:function(t,r,i,o){var a=o[0],s=o[1];i.$addClass("drop-target"),s.$attrs=i,s.$scope=t,i.$addClass("drop-target drop-target-"+s.anchor),a.attach(s);var l=s.$attrs.onDragEnter?e(s.$attrs.onDragEnter):n.noop,u=s.$attrs.onDragLeave?e(s.$attrs.onDragLeave):n.noop,c=s.$attrs.onDragOver?e(s.$attrs.onDragOver):n.noop,p=s.$attrs.onDrop?e(s.$attrs.onDrop):n.noop;s.handleDragEnter=function(e,t){l(s.$scope,t)},s.handleDragLeave=function(e,t){u(s.$scope,t)},s.handleDragOver=function(e,t){c(s.$scope,t)},s.handleDrop=function(e,t){p(s.$scope,t)},t.$on("$destroy",function(){a.detach(s)})}}}])},function(e,t,r){r(486),e.exports="ui.grid"},function(e,t,r){"use strict";function n(e,t){this._container=e,t&&(this._pMenu=t)}t.a=n;var i=r(488),o=r(506),a=r(507),s=r(508);n.prototype={constructor:n,config:i.a,show:o.a,hide:a.a,styles:s.a}},function(e,t,r){"use strict";t.b=10,t.a=function(e){var t=e.diameter,r=-e.diameter/2;return t+="px",r+="px",{width:t,height:t,marginRight:r,marginBottom:r}}},function(e,t,r){"use strict";var n={_current:0,getNew:function(){return++this._current}};t.a=function(e,t,r,i){var o=e,a=document.head||document.getElementsByTagName("head")[0],s=document.getElementById("sheetStyles")||document.createElement("style");s.id="sheetStyles";var l="s-S"+n.getNew();return o.className+=" "+l,s.innerHTML+=" ."+l+(i?":"+i:"")+"{"+t+":"+r+"}",a.appendChild(s),this}},function(e,t,r){"use strict";function n(e,t,r,n){e.addEventListener(t,function(e){r.call(this,e,n)})}t.a=n},function(e,t,r){"use strict";function n(e){return void 0!==e&&("string"==typeof e?""!==e:e.length&&""!==e[0])}function i(e){return"string"==typeof e?e:e[0]}function o(e){return"string"==typeof e?null:e[1]}t.b=n;var a=r(36),s=r(37);t.a=function(e,t,r){if(n(t.icon)){var l=document.createElement("span"),u=i(t.icon),c=o(t.icon);Object(s.a)(l,u+" cm-icon",!0),Object(a.a)(l,"color",c);var p=.65*this._calc.clickZoneRadius-13+"px",d=.2*this._calc.clickZoneRadius-13+"px";Object(a.a)(l,"width",p),Object(a.a)(l,"height",p),Object(a.a)(l,"font-size",p),Object(a.a)(l,"margin-top",d),e.appendChild(l)}}},function(e,t,r){"use strict";t.a=function(){var e={},t=!1,r=0,n=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(t=arguments[0],r++);for(;r<n;r++){var i=arguments[r];!function(r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t&&"[object Object]"===Object.prototype.toString.call(r[n])?e[n]=extend(!0,e[n],r[n]):e[n]=r[n])}(i)}return e}},function(e,t,r){var n=r(26);e.exports=function(e,t){if(!n(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,r){"use strict";function n(e,t){var r=null,n=null,i=e.find(function(e){return""===e.language?r=e.value:n=e.value,e.language===t});return i?i.value:r||n}Object.defineProperty(t,"__esModule",{value:!0}),t.getPrefLangString=n;var i=r(0);(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t})(i).module("fibra.filters.pref-lang",[]).filter("prefLang",["fibraService",function(e){return function(t){return n(t,e.getState().language)}}])},function(e,t,r){"use strict";e.exports={query:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 80 80"><path d="M64.622 2.41H14.995c-6.627 0-12 5.374-12 12V64.31c0 6.627 5.373 12 12 12h49.627c6.627 0 12-5.373 12-12V14.41c0-6.627-5.373-12-12-12zM24.125 63.907V15.093L61 39.168 24.125 63.906z"/></svg>',queryInvalid:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 73.627 73.897"><path d="M61.627 0H12C5.373 0 0 5.373 0 12v49.897c0 6.627 5.373 12 12 12h49.627c6.627 0 12-5.373 12-12V12c0-6.628-5.373-12-12-12zM21.13 61.495V12.682l36.875 24.075L21.13 61.495z"/><path d="M66.13 65.904H49.77c-1.647 0-2.89-.58-3.5-1.636-.608-1.056-.49-2.422.334-3.848l8.18-14.167c.822-1.427 1.947-2.212 3.165-2.212s2.342.786 3.165 2.213l8.18 14.167c.824 1.426.942 2.792.333 3.848-.61 1.055-1.852 1.636-3.5 1.636zm-6.51-4.986c0-.85-.69-1.54-1.54-1.54-.85 0-1.54.69-1.54 1.54 0 .85.69 1.54 1.54 1.54.85 0 1.54-.69 1.54-1.54zm.04-9.266c0-.873-.708-1.58-1.58-1.58-.874 0-1.582.707-1.582 1.58l.374 5.61h.005c.054.62.568 1.108 1.202 1.108.586 0 1.075-.415 1.188-.968.01-.045.01-.093.014-.14h.01l.368-5.61z" fill="#a80"/></svg>',download:'<svg xmlns="http://www.w3.org/2000/svg" baseProfile="tiny" viewBox="0 0 100 100"><path fill-rule="evenodd" d="M88 84v-2c0-2.96-.86-4-4-4H16c-2.96 0-4 .98-4 4v2c0 3.102 1.04 4 4 4h68c3.02 0 4-.96 4-4zM58 12H42c-5 0-6 .94-6 6v22H16l34 34 34-34H64V18c0-5.06-1.06-6-6-6z"/></svg>',share:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path d="M36.764 50c0 .308-.07.598-.088.905l32.247 16.12c2.76-2.34 6.293-3.798 10.195-3.798C87.89 63.227 95 70.337 95 79.11 95 87.89 87.89 95 79.118 95c-8.78 0-15.882-7.11-15.882-15.89 0-.317.07-.6.088-.906l-32.247-16.12c-2.77 2.33-6.293 3.79-10.195 3.79C12.11 65.873 5 58.77 5 50c0-8.78 7.11-15.89 15.882-15.89 3.902 0 7.427 1.467 10.195 3.796l32.247-16.12c-.018-.307-.088-.597-.088-.913C63.236 12.11 70.338 5 79.118 5 87.89 5 95 12.11 95 20.873c0 8.78-7.11 15.89-15.882 15.89-3.91 0-7.436-1.467-10.195-3.805L36.676 49.086c.017.308.088.598.088.914z"/></svg>',warning:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 66.399998 66.399998"><g fill="red"><path d="M33.2 0C14.9 0 0 14.9 0 33.2c0 18.3 14.9 33.2 33.2 33.2 18.3 0 33.2-14.9 33.2-33.2C66.4 14.9 51.5 0 33.2 0zm0 59.4C18.7 59.4 7 47.6 7 33.2 7 18.7 18.8 7 33.2 7c14.4 0 26.2 11.8 26.2 26.2 0 14.4-11.8 26.2-26.2 26.2z"/><path d="M33.1 45.6c-1.4 0-2.5.5-3.5 1.5-.9 1-1.4 2.2-1.4 3.6 0 1.6.5 2.8 1.5 3.8 1 .9 2.1 1.3 3.4 1.3 1.3 0 2.4-.5 3.4-1.4 1-.9 1.5-2.2 1.5-3.7 0-1.4-.5-2.6-1.4-3.6-.9-1-2.1-1.5-3.5-1.5zM33.3 12.4c-1.5 0-2.8.5-3.7 1.6-.9 1-1.4 2.4-1.4 4.2 0 1.1.1 2.9.2 5.6l.8 13.1c.2 1.8.4 3.2.9 4.1.5 1.2 1.5 1.8 2.9 1.8 1.3 0 2.3-.7 2.9-1.9.5-1 .7-2.3.9-4l1.1-13.4c.1-1.3.2-2.5.2-3.8 0-2.2-.3-3.9-.8-5.1-.5-1-1.6-2.2-4-2.2z"/></g></svg>',fullscreen:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="5 -10 100 100"><path d="M5-10v38.89L21.667 12.22 38.334 28.89l5.555-5.556L27.22 6.667 43.89-10H5zM105-10v38.89L88.333 12.22 71.667 28.89l-5.556-5.556L82.778 6.667 66.11-10H105zM5 90V51.11l16.667 16.667L38.334 51.11l5.555 5.557L27.22 73.333 43.89 90H5zM105 90V51.11L88.333 67.778 71.667 51.11l-5.556 5.557 16.667 16.666L66.11 90H105z" fill="#010101"/></svg>',smallscreen:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="5 -10 100 100"><path d="M43.89 28.89V-10L27.22 6.667 10.555-10 5-4.445l16.667 16.667L5 28.89h38.89zM66.11 28.89V-10L82.78 6.667 99.444-10 105-4.445 88.334 12.222 105 28.89H66.11zM43.89 51.11V90L27.22 73.334 10.555 90 5 84.444l16.667-16.666L5 51.11h38.89zM66.11 51.11V90L82.78 73.334 99.444 90 105 84.444 88.334 67.778 105 51.11H66.11z" fill="#010101"/></svg>'}},function(e,t,r){!function(e){e(r(23))}(function(e){"use strict";function t(t,i,o,a){function s(e){var r=l(t,i);if(!r||r.to.line-r.from.line<u)return null;for(var n=t.findMarksAt(r.from),o=0;o<n.length;++o)if(n[o].__isFold&&"fold"!==a){if(!e)return null;r.cleared=!0,n[o].clear()}return r}if(o&&o.call){var l=o;o=null}else var l=n(t,o,"rangeFinder");"number"==typeof i&&(i=e.Pos(i,0));var u=n(t,o,"minFoldSize"),c=s(!0);if(n(t,o,"scanUp"))for(;!c&&i.line>t.firstLine();)i=e.Pos(i.line-1,0),c=s(!1);if(c&&!c.cleared&&"unfold"!==a){var p=r(t,o);e.on(p,"mousedown",function(t){d.clear(),e.e_preventDefault(t)});var d=t.markText(c.from,c.to,{replacedWith:p,clearOnEnter:n(t,o,"clearOnEnter"),__isFold:!0});d.on("clear",function(r,n){e.signal(t,"unfold",t,r,n)}),e.signal(t,"fold",t,c.from,c.to)}}function r(e,t){var r=n(e,t,"widget");if("string"==typeof r){var i=document.createTextNode(r);r=document.createElement("span"),r.appendChild(i),r.className="CodeMirror-foldmarker"}return r}function n(e,t,r){if(t&&void 0!==t[r])return t[r];var n=e.options.foldOptions;return n&&void 0!==n[r]?n[r]:i[r]}e.newFoldFunction=function(e,r){return function(n,i){t(n,i,{rangeFinder:e,widget:r})}},e.defineExtension("foldCode",function(e,r,n){t(this,e,r,n)}),e.defineExtension("isFolded",function(e){for(var t=this.findMarksAt(e),r=0;r<t.length;++r)if(t[r].__isFold)return!0}),e.commands.toggleFold=function(e){e.foldCode(e.getCursor())},e.commands.fold=function(e){e.foldCode(e.getCursor(),null,"fold")},e.commands.unfold=function(e){e.foldCode(e.getCursor(),null,"unfold")},e.commands.foldAll=function(t){t.operation(function(){for(var r=t.firstLine(),n=t.lastLine();r<=n;r++)t.foldCode(e.Pos(r,0),null,"fold")})},e.commands.unfoldAll=function(t){t.operation(function(){for(var r=t.firstLine(),n=t.lastLine();r<=n;r++)t.foldCode(e.Pos(r,0),null,"unfold")})},e.registerHelper("fold","combine",function(){var e=Array.prototype.slice.call(arguments,0);return function(t,r){for(var n=0;n<e.length;++n){var i=e[n](t,r);if(i)return i}}}),e.registerHelper("fold","auto",function(e,t){for(var r=e.getHelpers(t,"fold"),n=0;n<r.length;n++){var i=r[n](e,t);if(i)return i}});var i={rangeFinder:e.fold.auto,widget:"",minFoldSize:0,scanUp:!1,clearOnEnter:!0};e.defineOption("foldOptions",null),e.defineExtension("foldOption",function(e,t){return n(this,e,t)})})},function(e,t,r){function n(e,t,r,n){r||(r=0),n||(n=e.getLine(t)),n=n.toUpperCase();for(var o=r,s=0;;){var l=n.indexOf(a,o);if(-1!=l){if(1==s&&l<r)break;if(!/^(comment|string)/.test(e.getTokenTypeAt(i.Pos(t,l+1))))return l+1;if((o=l-1)===s)break}else{if(1==s)break;s=1,o=n.length}}}var i=r(23),o=r(108),a="PREFIX";e.exports={findFirstPrefixLine:function(e){for(var t=e.lastLine(),r=0;r<=t;++r)if(n(e,r)>=0)return r}},i.registerHelper("fold","prefix",function(e,t){var r=t.line,s=e.getLine(r),l=function(t,r){var n=e.getTokenAt(i.Pos(t,r+1));if(!n||"keyword"!=n.type)return-1;var a=o.getNextNonWsToken(e,t,n.end+1);if(!a||"string-2"!=a.type)return-1;var s=o.getNextNonWsToken(e,t,a.end+1);return s&&"variable-3"==s.type?s.end:-1};if(!function(){for(var t=!1,n=r-1;n>=0;n--)if(e.getLine(n).toUpperCase().indexOf(a)>=0){t=!0;break}return t}()){var u=n(e,r,t.ch,s);if(null!=u){for(var c,p=!1,d=e.lastLine(),f=l(r,u),h=r,g=r;g<=d&&!p;++g)for(var v=e.getLine(g),m=g==r?u+1:0;;){!p&&v.indexOf("{")>=0&&(p=!0);var y=v.toUpperCase().indexOf(a,m);if(!(y>=0))break;(c=l(g,y))>0&&(f=c,h=g,m=f),m++}return{from:i.Pos(r,u+a.length),to:i.Pos(h,f)}}}})},function(e,t,r){"use strict";var n=r(20);r(107);e.exports=function(e,t,r){var i,t=n(t);t.hover(function(){"function"==typeof r&&(r=r()),i=n("<div>").addClass("yasqe_tooltip").html(r).appendTo(t),o()},function(){n(".yasqe_tooltip").remove()});var o=function(){n(e.getWrapperElement()).offset().top>=i.offset().top&&(i.css("bottom","auto"),i.css("top","26px"))}}},function(e,t,r){"use strict";var n=r(20),i=r(107),o=r(79);o.getAjaxConfig=function(e,t){var i="function"==typeof t?t:null,s="object"==typeof t?t:{};if(e.options.sparql&&(s=n.extend({},e.options.sparql,s)),s.handlers&&n.extend(!0,s.callbacks,s.handlers),s.endpoint&&0!=s.endpoint.length){var l=e.getQueryMode(),u={url:"function"==typeof s.endpoint?s.endpoint(e):s.endpoint,type:"update"==l?"POST":"function"==typeof s.requestMethod?s.requestMethod(e):s.requestMethod,headers:{Accept:a(e,s)}};s.xhrFields&&(u.xhrFields=s.xhrFields);var c=!1;if(s.callbacks)for(var p in s.callbacks)s.callbacks[p]&&(c=!0,u[p]=s.callbacks[p]);if("GET"===u.type){var d=!0;n.each(e.getUrlArguments(s),function(e,t){u.url+=(d?"?":"&")+t.name+"="+encodeURIComponent(t.value),d=!1})}else u.data=e.getUrlArguments(s);if(c||i){i&&(u.complete=i),s.headers&&!n.isEmptyObject(s.headers)&&n.extend(u.headers,s.headers);var f=new Date,h=function(){e.lastQueryDuration=new Date-f,o.updateQueryButton(e),e.setBackdrop(!1)},g=[function(){r(79).signal(e,"queryFinish",arguments)},h];return u.complete&&g.push(u.complete),u.complete=g,u}}},o.executeQuery=function(e,t){o.signal(e,"query",e,t),o.updateQueryButton(e,"busy"),e.setBackdrop(!0),e.xhr=n.ajax(o.getAjaxConfig(e,t))},o.getUrlArguments=function(e,t){var r=e.getQueryMode(),o=[{name:i.getString(e,e.options.sparql.queryName),value:t.getQueryForAjax?t.getQueryForAjax(e):e.getValue()}];if(t.namedGraphs&&t.namedGraphs.length>0)for(var a="query"==r?"named-graph-uri":"using-named-graph-uri ",s=0;s<t.namedGraphs.length;s++)o.push({name:a,value:t.namedGraphs[s]});if(t.defaultGraphs&&t.defaultGraphs.length>0)for(var a="query"==r?"default-graph-uri":"using-graph-uri ",s=0;s<t.defaultGraphs.length;s++)o.push({name:a,value:t.defaultGraphs[s]});return t.args&&t.args.length>0&&n.merge(o,t.args),o};var a=function(e,t){var r=null;if(!t.acceptHeader||t.acceptHeaderGraph||t.acceptHeaderSelect||t.acceptHeaderUpdate)if("update"==e.getQueryMode())r="function"==typeof t.acceptHeader?t.acceptHeaderUpdate(e):t.acceptHeaderUpdate;else{var n=e.getQueryType();r="DESCRIBE"==n||"CONSTRUCT"==n?"function"==typeof t.acceptHeaderGraph?t.acceptHeaderGraph(e):t.acceptHeaderGraph:"function"==typeof t.acceptHeaderSelect?t.acceptHeaderSelect(e):t.acceptHeaderSelect}else r="function"==typeof t.acceptHeader?t.acceptHeader(e):t.acceptHeader;return r};e.exports={getAjaxConfig:o.getAjaxConfig}},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}var i=r(0),o=n(i),a=r(249),s=n(a),l=r(250),u=function(e){return e&&e.__esModule?e:{default:e}}(l);r(326),r(327),r(356),r(358),r(360),r(362),r(363),r(364),r(365),r(414),r(528),r(530),r(545),r(580),r(581);var c=o.module("fibra",["fibra.services","fibra.actions","fibra.components","fibra.filters","http-auth-interceptor","ngStorage","ui.router","ui.bootstrap","ui.bootstrap.tpls","ngAnimate","fi.seco.yasqe","toastr","fi.seco.sparql","ui.codemirror","ngFileSaver","ngRedux"]).constant("version","0.5.0");c.value("workerServiceConfiguration",{appName:"fibra",workerThreads:1,importScripts:["https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js","worker-bundle.js"]}),c.config(u.default).config(s.toastConfig).config(s.uiConfig).config(s.localStorageConfig).run(s.uiRun)},function(e,t,r){"use strict";function n(e){"ngInject";l.extend(e,{positionClass:"toast-top-full-width"})}function i(e,t,r,n){"ngInject";t.rules.otherwise(function(e,t,r){var i=t.search;window.location.search.replace("?","").split("&").forEach(function(e){var t=e.split("=");i[t[0]]=t[1]}),i.code?n.stateService.go("callback",i):n.stateService.go("projects")}),e.state("projects",{url:"/projects",template:"<projects-view></projects-view>"}),e.state("rdfstoreTest",{url:"/rdfstore-test",template:"<rdfstore-test-view></rdfstore-test-view>"}),e.state("projectSources",{url:"/project-sources?sourceId&sparqlEndpoint&updateEndpoint&graphStoreEndpoint&graph&type",template:"<project-sources-view></project-sources-view>"}),e.state("projectSourceConfigurations",{url:"/project-source-configurations?sourceId",template:"<project-source-configurations-view></project-source-configurations-view>"}),e.state("editPrimaryEndpointConfiguration",{url:"/edit-primary-endpoint-configuration?sourceId&id",template:"<edit-primary-endpoint-configuration-view></edit-primary-endpoint-configuration-view>"}),e.state("editRemoteEndpointConfiguration",{url:"/edit-remote-endpoint-configuration?sourceId&id",template:"<edit-remote-endpoint-configuration-view></edit-remote-endpoint-configuration-view>"}),e.state("editSchema",{url:"/edit-schema?sourceId&id",template:"<edit-schema-view></edit-schema-view>"}),e.state("configure",{url:"/configure?sourceId&id",template:"<configure-view></configure-view>"}),e.state("construct",{url:"/construct?id&sparqlEndpoint&graph",resolve:{project:["projectService","fibraService","$stateParams",function(e,t,r){return e.loadProject({sparqlEndpoint:r.sparqlEndpoint,graph:r.graph},r.id,!0).then(function(e){return t.dispatchAction(t.setProject(e))})}]},template:"<construct-view></construct-view>"}),e.state("author",{url:"/author?id&sparqlEndpoint&graph",resolve:{project:["projectService","fibraService","$stateParams",function(e,t,r){return e.loadProject({sparqlEndpoint:r.sparqlEndpoint,graph:r.graph},r.id,!0).then(function(e){return t.dispatchAction(t.setProject(e))})}]},template:"<author-view></author-view>"}),e.state("login",{url:"/login",template:"<login></login>",params:{redirect_hash:{type:"string",value:""}}}),e.state("callback",{url:"/callback",template:"<callback></callback>",params:{code:{type:"string",array:!1,value:""}}}),e.state("project",{url:"/project/:view?id&sparqlEndpoint&graph",params:{id:{type:"string",array:!1,value:""},sparqlEndpoint:{type:"string",array:!1,value:""},graph:{type:"string",array:!1,value:""},view:{type:"string",array:!1,value:"sources"}},template:"<project></project>"})}function o(e){"ngInject";e.setKeyPrefix("fibra-")}function a(e,t,r,n,i,o,a,s,l,u){"ngInject";e.authInfo={authOpen:!1,username:void 0,password:void 0},t.authorization&&(r.defaults.headers.common.Authorization=t.authorization,a.$broadcast("main:auth-loginAuthInfo",t.authorization)),e.setAuth=function(){e.authInfo.authOpen=!1,t.authorization="Basic "+btoa(e.authInfo.username+":"+e.authInfo.password),r.defaults.headers.common.Authorization=t.authorization,a.$broadcast("main:auth-loginAuthInfo",t.authorization),i.loginConfirmed()},e.dismissAuth=function(){e.authInfo.authOpen=!1,i.loginCancelled({status:401},"Authentication required")},e.$on("event:auth-loginRequired",function(){return e.authInfo.authOpen=!0});var c={to:function(e){return e.data&&e.data.requiresAuth}},p=function(e){if(!s.isAuthenticated())return e.router.stateService.target("login",{redirect_hash:window.location.hash})};e.socialAuthService=s,u.onBefore(c,p,{priority:10})}Object.defineProperty(t,"__esModule",{value:!0}),t.toastConfig=n,t.uiConfig=i,t.localStorageConfig=o,t.uiRun=a;var s=r(0),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(s);a.$inject=["$rootScope","$localStorage","$http","$state","authService","$location","workerService","socialAuthService","$window","$transitions"],o.$inject=["$localStorageProvider"],i.$inject=["$stateProvider","$urlServiceProvider","$locationProvider","$uiRouterProvider"],n.$inject=["toastrConfig"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){e.createStoreWith(p.default,[s.default,u.default,(0,o.createLogger)()],[])}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var o=r(251),a=r(252),s=n(a),l=r(253),u=n(l),c=r(160),p=n(c);i.$inject=["$ngReduxProvider"]},function(e,t,r){(function(e){!function(e,r){r(t)}(0,function(t){"use strict";function r(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function n(e,t){Object.defineProperty(this,"kind",{value:e,enumerable:!0}),t&&t.length&&Object.defineProperty(this,"path",{value:t,enumerable:!0})}function i(e,t,r){i.super_.call(this,"E",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0}),Object.defineProperty(this,"rhs",{value:r,enumerable:!0})}function o(e,t){o.super_.call(this,"N",e),Object.defineProperty(this,"rhs",{value:t,enumerable:!0})}function a(e,t){a.super_.call(this,"D",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0})}function s(e,t,r){s.super_.call(this,"A",e),Object.defineProperty(this,"index",{value:t,enumerable:!0}),Object.defineProperty(this,"item",{value:r,enumerable:!0})}function l(e,t,r){var n=e.slice((r||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,n),e}function u(e){var t=void 0===e?"undefined":R(e);return"object"!==t?t:e===Math?"math":null===e?"null":Array.isArray(e)?"array":"[object Date]"===Object.prototype.toString.call(e)?"date":"function"==typeof e.toString&&/^\/.*\//.test(e.toString())?"regexp":"object"}function c(e,t,r,n,p,d,f){p=p||[],f=f||[];var h=p.slice(0);if(void 0!==d){if(n){if("function"==typeof n&&n(h,d))return;if("object"===(void 0===n?"undefined":R(n))){if(n.prefilter&&n.prefilter(h,d))return;if(n.normalize){var g=n.normalize(h,d,e,t);g&&(e=g[0],t=g[1])}}}h.push(d)}"regexp"===u(e)&&"regexp"===u(t)&&(e=e.toString(),t=t.toString());var v=void 0===e?"undefined":R(e),m=void 0===t?"undefined":R(t),y="undefined"!==v||f&&f[f.length-1].lhs&&f[f.length-1].lhs.hasOwnProperty(d),b="undefined"!==m||f&&f[f.length-1].rhs&&f[f.length-1].rhs.hasOwnProperty(d);if(!y&&b)r(new o(h,t));else if(!b&&y)r(new a(h,e));else if(u(e)!==u(t))r(new i(h,e,t));else if("date"===u(e)&&e-t!=0)r(new i(h,e,t));else if("object"===v&&null!==e&&null!==t)if(f.filter(function(t){return t.lhs===e}).length)e!==t&&r(new i(h,e,t));else{if(f.push({lhs:e,rhs:t}),Array.isArray(e)){var E;for(e.length,E=0;E<e.length;E++)E>=t.length?r(new s(h,E,new a(void 0,e[E]))):c(e[E],t[E],r,n,h,E,f);for(;E<t.length;)r(new s(h,E,new o(void 0,t[E++])))}else{var x=Object.keys(e),S=Object.keys(t);x.forEach(function(i,o){var a=S.indexOf(i);a>=0?(c(e[i],t[i],r,n,h,i,f),S=l(S,a)):c(e[i],void 0,r,n,h,i,f)}),S.forEach(function(e){c(void 0,t[e],r,n,h,e,f)})}f.length=f.length-1}else e!==t&&("number"===v&&isNaN(e)&&isNaN(t)||r(new i(h,e,t)))}function p(e,t,r,n){return n=n||[],c(e,t,function(e){e&&n.push(e)},r),n.length?n:void 0}function d(e,t,r){if(r.path&&r.path.length){var n,i=e[t],o=r.path.length-1;for(n=0;n<o;n++)i=i[r.path[n]];switch(r.kind){case"A":d(i[r.path[n]],r.index,r.item);break;case"D":delete i[r.path[n]];break;case"E":case"N":i[r.path[n]]=r.rhs}}else switch(r.kind){case"A":d(e[t],r.index,r.item);break;case"D":e=l(e,t);break;case"E":case"N":e[t]=r.rhs}return e}function f(e,t,r){if(e&&t&&r&&r.kind){for(var n=e,i=-1,o=r.path?r.path.length-1:0;++i<o;)void 0===n[r.path[i]]&&(n[r.path[i]]="number"==typeof r.path[i]?[]:{}),n=n[r.path[i]];switch(r.kind){case"A":d(r.path?n[r.path[i]]:n,r.index,r.item);break;case"D":delete n[r.path[i]];break;case"E":case"N":n[r.path[i]]=r.rhs}}}function h(e,t,r){if(r.path&&r.path.length){var n,i=e[t],o=r.path.length-1;for(n=0;n<o;n++)i=i[r.path[n]];switch(r.kind){case"A":h(i[r.path[n]],r.index,r.item);break;case"D":case"E":i[r.path[n]]=r.lhs;break;case"N":delete i[r.path[n]]}}else switch(r.kind){case"A":h(e[t],r.index,r.item);break;case"D":case"E":e[t]=r.lhs;break;case"N":e=l(e,t)}return e}function g(e,t,r){if(e&&t&&r&&r.kind){var n,i,o=e;for(i=r.path.length-1,n=0;n<i;n++)void 0===o[r.path[n]]&&(o[r.path[n]]={}),o=o[r.path[n]];switch(r.kind){case"A":h(o[r.path[n]],r.index,r.item);break;case"D":case"E":o[r.path[n]]=r.lhs;break;case"N":delete o[r.path[n]]}}}function v(e,t,r){if(e&&t){c(e,t,function(n){r&&!r(e,t,n)||f(e,t,n)})}}function m(e){return"color: "+O[e].color+"; font-weight: bold"}function y(e){var t=e.kind,r=e.path,n=e.lhs,i=e.rhs,o=e.index,a=e.item;switch(t){case"E":return[r.join("."),n,"",i];case"N":return[r.join("."),i];case"D":return[r.join(".")];case"A":return[r.join(".")+"["+o+"]",a];default:return[]}}function b(e,t,r,n){var i=p(e,t);try{n?r.groupCollapsed("diff"):r.group("diff")}catch(e){r.log("diff")}i?i.forEach(function(e){var t=e.kind,n=y(e);r.log.apply(r,["%c "+O[t].text,m(t)].concat(_(n)))}):r.log(" no diff ");try{r.groupEnd()}catch(e){r.log(" diff end  ")}}function E(e,t,r,n){switch(void 0===e?"undefined":R(e)){case"object":return"function"==typeof e[n]?e[n].apply(e,_(r)):e[n];case"function":return e(t);default:return e}}function x(e){var t=e.timestamp,r=e.duration;return function(e,n,i){var o=["action"];return o.push("%c"+String(e.type)),t&&o.push("%c@ "+n),r&&o.push("%c(in "+i.toFixed(2)+" ms)"),o.join(" ")}}function S(e,t){var r=t.logger,n=t.actionTransformer,i=t.titleFormatter,o=void 0===i?x(t):i,a=t.collapsed,s=t.colors,l=t.level,u=t.diff,c=void 0===t.titleFormatter;e.forEach(function(i,p){var d=i.started,f=i.startedTime,h=i.action,g=i.prevState,v=i.error,m=i.took,y=i.nextState,x=e[p+1];x&&(y=x.prevState,m=x.started-d);var S=n(h),C="function"==typeof a?a(function(){return y},h,i):a,w=L(f),T=s.title?"color: "+s.title(S)+";":"",A=["color: gray; font-weight: lighter;"];A.push(T),t.timestamp&&A.push("color: gray; font-weight: lighter;"),t.duration&&A.push("color: gray; font-weight: lighter;");var I=o(S,w,m);try{C?s.title&&c?r.groupCollapsed.apply(r,["%c "+I].concat(A)):r.groupCollapsed(I):s.title&&c?r.group.apply(r,["%c "+I].concat(A)):r.group(I)}catch(e){r.log(I)}var N=E(l,S,[g],"prevState"),R=E(l,S,[S],"action"),_=E(l,S,[v,g],"error"),k=E(l,S,[y],"nextState");if(N)if(s.prevState){var O="color: "+s.prevState(g)+"; font-weight: bold";r[N]("%c prev state",O,g)}else r[N]("prev state",g);if(R)if(s.action){var P="color: "+s.action(S)+"; font-weight: bold";r[R]("%c action    ",P,S)}else r[R]("action    ",S);if(v&&_)if(s.error){var D="color: "+s.error(v,g)+"; font-weight: bold;";r[_]("%c error     ",D,v)}else r[_]("error     ",v);if(k)if(s.nextState){var F="color: "+s.nextState(y)+"; font-weight: bold";r[k]("%c next state",F,y)}else r[k]("next state",y);u&&b(g,y,r,C);try{r.groupEnd()}catch(e){r.log(" log end ")}})}function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},P,e),r=t.logger,n=t.stateTransformer,i=t.errorTransformer,o=t.predicate,a=t.logErrors,s=t.diffPredicate;if(void 0===r)return function(){return function(e){return function(t){return e(t)}}};if(e.getState&&e.dispatch)return console.error("[redux-logger] redux-logger not installed. Make sure to pass logger instance as middleware:\n// Logger with default options\nimport { logger } from 'redux-logger'\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n// Or you can create your own logger with custom options http://bit.ly/redux-logger-options\nimport createLogger from 'redux-logger'\nconst logger = createLogger({\n  // ...options\n});\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n"),function(){return function(e){return function(t){return e(t)}}};var l=[];return function(e){var r=e.getState;return function(e){return function(u){if("function"==typeof o&&!o(r,u))return e(u);var c={};l.push(c),c.started=N.now(),c.startedTime=new Date,c.prevState=n(r()),c.action=u;var p=void 0;if(a)try{p=e(u)}catch(e){c.error=i(e)}else p=e(u);c.took=N.now()-c.started,c.nextState=n(r());var d=t.diff&&"function"==typeof s?s(r,u):t.diff;if(S(l,Object.assign({},t,{diff:d})),l.length=0,c.error)throw c.error;return p}}}}var w,T,A=function(e,t){return new Array(t+1).join(e)},I=function(e,t){return A("0",t-e.toString().length)+e},L=function(e){return I(e.getHours(),2)+":"+I(e.getMinutes(),2)+":"+I(e.getSeconds(),2)+"."+I(e.getMilliseconds(),3)},N="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance:Date,R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)},k=[];w="object"===(void 0===e?"undefined":R(e))&&e?e:"undefined"!=typeof window?window:{},T=w.DeepDiff,T&&k.push(function(){void 0!==T&&w.DeepDiff===p&&(w.DeepDiff=T,T=void 0)}),r(i,n),r(o,n),r(a,n),r(s,n),Object.defineProperties(p,{diff:{value:p,enumerable:!0},observableDiff:{value:c,enumerable:!0},applyDiff:{value:v,enumerable:!0},applyChange:{value:f,enumerable:!0},revertChange:{value:g,enumerable:!0},isConflict:{value:function(){return void 0!==T},enumerable:!0},noConflict:{value:function(){return k&&(k.forEach(function(e){e()}),k=null),p},enumerable:!0}});var O={E:{color:"#2196F3",text:"CHANGED:"},N:{color:"#4CAF50",text:"ADDED:"},D:{color:"#F44336",text:"DELETED:"},A:{color:"#2196F3",text:"ARRAY:"}},P={level:"log",logger:console,logErrors:!0,collapsed:void 0,predicate:void 0,duration:!1,timestamp:!0,stateTransformer:function(e){return e},actionTransformer:function(e){return e},errorTransformer:function(e){return e},colors:{title:function(){return"inherit"},prevState:function(){return"#9E9E9E"},action:function(){return"#03A9F4"},nextState:function(){return"#4CAF50"},error:function(){return"#F20404"}},diff:!1,diffPredicate:void 0,transformer:void 0},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dispatch,r=e.getState;return"function"==typeof t||"function"==typeof r?C()({dispatch:t,getState:r}):void console.error("\n[redux-logger v3] BREAKING CHANGE\n[redux-logger v3] Since 3.0.0 redux-logger exports by default logger with default settings.\n[redux-logger v3] Change\n[redux-logger v3] import createLogger from 'redux-logger'\n[redux-logger v3] to\n[redux-logger v3] import { createLogger } from 'redux-logger'\n")};t.defaults=P,t.createLogger=C,t.logger=D,t.default=D,Object.defineProperty(t,"__esModule",{value:!0})})}).call(t,r(11))},function(e,t,r){"use strict";function n(e){return function(t){var r=t.dispatch,n=t.getState;return function(t){return function(i){return"function"==typeof i?i(r,n,e):t(i)}}}}t.__esModule=!0;var i=n();i.withExtraArgument=n,t.default=i},function(e,t,r){"use strict";function n(e){return e&&"function"==typeof e.then}function i(e){var t=e.dispatch;return function(e){return function(r){return a.isFSA(r)?n(r.payload)?r.payload.then(function(e){return t(o({},r,{payload:e}))},function(e){return t(o({},r,{payload:e,error:!0}))}):e(r):n(r)?r.then(t):e(r)}}}t.__esModule=!0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.default=i;var a=r(254);e.exports=t.default},function(e,t,r){"use strict";function n(e){return l.indexOf(e)>-1}function i(e){return s.default(e)&&void 0!==e.type&&Object.keys(e).every(n)}function o(e){return!0===e.error}t.__esModule=!0,t.isFSA=i,t.isError=o;var a=r(255),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=["type","payload","error","meta"]},function(e,t,r){function n(e){return!!e&&"object"==typeof e}function i(e,t){return a(e,t,l)}function o(e){var t;if(!n(e)||d.call(e)!=u||s(e)||!p.call(e,"constructor")&&"function"==typeof(t=e.constructor)&&!(t instanceof t))return!1;var r;return i(e,function(e,t){r=t}),void 0===r||p.call(e,r)}var a=r(256),s=r(159),l=r(257),u="[object Object]",c=Object.prototype,p=c.hasOwnProperty,d=c.toString;e.exports=o},function(e,t){var r=function(e){return function(t,r,n){for(var i=-1,o=Object(t),a=n(t),s=a.length;s--;){var l=a[e?s:++i];if(!1===r(o[l],l,o))break}return t}}();e.exports=r},function(e,t,r){function n(e,t){return e="number"==typeof e||u.test(e)?+e:-1,t=null==t?d:t,e>-1&&e%1==0&&e<t}function i(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=d}function o(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function a(e){if(null==e)return[];o(e)||(e=Object(e));var t=e.length;t=t&&i(t)&&(l(e)||s(e))&&t||0;for(var r=e.constructor,a=-1,u="function"==typeof r&&r.prototype===e,c=Array(t),d=t>0;++a<t;)c[a]=a+"";for(var f in e)d&&n(f,t)||"constructor"==f&&(u||!p.call(e,f))||c.push(f);return c}var s=r(159),l=r(258),u=/^\d+$/,c=Object.prototype,p=c.hasOwnProperty,d=9007199254740991;e.exports=a},function(e,t){function r(e){return!!e&&"object"==typeof e}function n(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=g}function i(e){return o(e)&&d.call(e)==s}function o(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function a(e){return null!=e&&(i(e)?f.test(c.call(e)):r(e)&&l.test(e))}var s="[object Function]",l=/^\[object .+?Constructor\]$/,u=Object.prototype,c=Function.prototype.toString,p=u.hasOwnProperty,d=u.toString,f=RegExp("^"+c.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),h=function(e,t){var r=null==e?void 0:e[t];return a(r)?r:void 0}(Array,"isArray"),g=9007199254740991,v=h||function(e){return r(e)&&n(e.length)&&"[object Array]"==d.call(e)};e.exports=v},function(e,t,r){"use strict";function n(e){return null==e?void 0===e?l:s:u&&u in Object(e)?Object(o.a)(e):Object(a.a)(e)}var i=r(163),o=r(262),a=r(263),s="[object Null]",l="[object Undefined]",u=i.a?i.a.toStringTag:void 0;t.a=n},function(e,t,r){"use strict";var n=r(261),i="object"==typeof self&&self&&self.Object===Object&&self,o=n.a||i||Function("return this")();t.a=o},function(e,t,r){"use strict";(function(e){var r="object"==typeof e&&e&&e.Object===Object&&e;t.a=r}).call(t,r(11))},function(e,t,r){"use strict";function n(e){var t=a.call(e,l),r=e[l];try{e[l]=void 0;var n=!0}catch(e){}var i=s.call(e);return n&&(t?e[l]=r:delete e[l]),i}var i=r(163),o=Object.prototype,a=o.hasOwnProperty,s=o.toString,l=i.a?i.a.toStringTag:void 0;t.a=n},function(e,t,r){"use strict";function n(e){return o.call(e)}var i=Object.prototype,o=i.toString;t.a=n},function(e,t,r){"use strict";var n=r(265),i=Object(n.a)(Object.getPrototypeOf,Object);t.a=i},function(e,t,r){"use strict";function n(e,t){return function(r){return e(t(r))}}t.a=n},function(e,t,r){"use strict";function n(e){return null!=e&&"object"==typeof e}t.a=n},function(e,t,r){e.exports=r(268)},function(e,t,r){"use strict";(function(e,n){Object.defineProperty(t,"__esModule",{value:!0});var i,o=r(269),a=function(e){return e&&e.__esModule?e:{default:e}}(o);i="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:n;var s=(0,a.default)(i);t.default=s}).call(t,r(11),r(110)(e))},function(e,t,r){"use strict";function n(e){var t,r=e.Symbol;return"function"==typeof r?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,r){"use strict";function n(e,t){var r=t&&t.type;return"Given action "+(r&&'"'+r.toString()+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function i(e){Object.keys(e).forEach(function(t){var r=e[t];if(void 0===r(void 0,{type:a.a.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===r(void 0,{type:"@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".")}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+a.a.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}function o(e){for(var t=Object.keys(e),r={},o=0;o<t.length;o++){var a=t[o];"function"==typeof e[a]&&(r[a]=e[a])}var s=Object.keys(r),l=void 0;try{i(r)}catch(e){l=e}return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];if(l)throw l;for(var i=!1,o={},a=0;a<s.length;a++){var u=s[a],c=r[u],p=e[u],d=c(p,t);if(void 0===d){var f=n(u,t);throw new Error(f)}o[u]=d,i=i||d!==p}return i?o:e}}t.a=o;var a=r(161);r(162),r(164)},function(e,t,r){"use strict";function n(e,t){return function(){return t(e.apply(void 0,arguments))}}function i(e,t){if("function"==typeof e)return n(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var r=Object.keys(e),i={},o=0;o<r.length;o++){var a=r[o],s=e[a];"function"==typeof s&&(i[a]=n(s,t))}return i}t.a=i},function(e,t,r){"use strict";function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return function(r,n,a){var s=e(r,n,a),l=s.dispatch,u=[],c={getState:s.getState,dispatch:function(e){return l(e)}};return u=t.map(function(e){return e(c)}),l=i.a.apply(void 0,u)(s.dispatch),o({},s,{dispatch:l})}}}t.a=n;var i=r(165),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}},function(e,t,r){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments[1];switch(t.type){case i.VERIFY_ITEM:return t.payload;default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var i=r(80)},function(e,t,r){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{userTypes:[],types:[],displayTypes:[]},t=arguments[1];switch(t.type){case a.ADD_TYPE:var r=e.userTypes.filter(function(e){return e.id===t.payload.id})[0],n=e.userTypes.slice(0);r&&n.splice(e.userTypes.indexOf(r),1);var i=e.types.slice(0);return i.push(t.payload),(0,o.default)({},e,{types:i,userTypes:n});case a.CLEAR_TYPES:return(0,o.default)({},e,{types:[]});case a.SET_ORDERED_TYPES:return(0,o.default)({},e,{displayTypes:t.payload});case a.TYPE_CREATED:var l=new s.TreeNode(t.payload.node.value,t.payload.label),u=e.userTypes.slice(0);return u.push(l),(0,o.default)({},e,{userTypes:u});default:return e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(30),o=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=n;var a=r(41),s=r(128)},function(e,t,r){r(276),e.exports=r(9).Object.assign},function(e,t,r){var n=r(13);n(n.S+n.F,"Object",{assign:r(277)})},function(e,t,r){"use strict";var n=r(65),i=r(119),o=r(83),a=r(52),s=r(113),l=Object.assign;e.exports=!l||r(38)(function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(e){t[e]=e}),7!=l({},e)[r]||Object.keys(l({},t)).join("")!=n})?function(e,t){for(var r=a(e),l=arguments.length,u=1,c=i.f,p=o.f;l>u;)for(var d,f=s(arguments[u++]),h=c?n(f).concat(c(f)):n(f),g=h.length,v=0;g>v;)p.call(f,d=h[v++])&&(r[d]=f[d]);return r}:l},function(e,t,r){var n=r(40),i=r(81),o=r(279);e.exports=function(e){return function(t,r,a){var s,l=n(t),u=i(l.length),c=o(a,u);if(e&&r!=r){for(;u>c;)if((s=l[c++])!=s)return!0}else for(;u>c;c++)if((e||c in l)&&l[c]===r)return e||c||0;return!e&&-1}}},function(e,t,r){var n=r(115),i=Math.max,o=Math.min;e.exports=function(e,t){return e=n(e),e<0?i(e+t,0):o(e,t)}},function(e,t,r){r(67),r(54),e.exports=r(286)},function(e,t,r){"use strict";var n=r(282),i=r(168),o=r(53),a=r(40);e.exports=r(120)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,i(1)):"keys"==t?i(0,r):"values"==t?i(0,e[r]):i(0,[r,e[r]])},"values"),o.Arguments=o.Array,n("keys"),n("values"),n("entries")},function(e,t){e.exports=function(){}},function(e,t,r){"use strict";var n=r(85),i=r(64),o=r(68),a={};r(31)(a,r(14)("iterator"),function(){return this}),e.exports=function(e,t,r){e.prototype=n(a,{next:i(1,r)}),o(e,t+" Iterator")}},function(e,t,r){var n=r(24),i=r(25),o=r(65);e.exports=r(27)?Object.defineProperties:function(e,t){i(e);for(var r,a=o(t),s=a.length,l=0;s>l;)n.f(e,r=a[l++],t[r]);return e}},function(e,t,r){var n=r(115),i=r(114);e.exports=function(e){return function(t,r){var o,a,s=String(i(t)),l=n(r),u=s.length;return l<0||l>=u?e?"":void 0:(o=s.charCodeAt(l),o<55296||o>56319||l+1===u||(a=s.charCodeAt(l+1))<56320||a>57343?e?s.charAt(l):o:e?s.slice(l,l+2):a-56320+(o-55296<<10)+65536)}}},function(e,t,r){var n=r(25),i=r(121);e.exports=r(9).getIterator=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return n(t.call(e))}},function(e,t,r){r(288),e.exports=r(9).Object.getPrototypeOf},function(e,t,r){var n=r(52),i=r(171);r(87)("getPrototypeOf",function(){return function(e){return i(n(e))}})},function(e,t,r){e.exports={default:r(290),__esModule:!0}},function(e,t,r){r(54),r(67),e.exports=r(122).f("iterator")},function(e,t,r){e.exports={default:r(292),__esModule:!0}},function(e,t,r){r(293),r(126),r(295),r(296),e.exports=r(9).Symbol},function(e,t,r){"use strict";var n=r(17),i=r(39),o=r(27),a=r(13),s=r(169),l=r(123).KEY,u=r(38),c=r(117),p=r(68),d=r(82),f=r(14),h=r(122),g=r(124),v=r(294),m=r(172),y=r(25),b=r(40),E=r(112),x=r(64),S=r(85),C=r(173),w=r(125),T=r(24),A=r(65),I=w.f,L=T.f,N=C.f,R=n.Symbol,_=n.JSON,k=_&&_.stringify,O=f("_hidden"),P=f("toPrimitive"),D={}.propertyIsEnumerable,F=c("symbol-registry"),M=c("symbols"),j=c("op-symbols"),$=Object.prototype,G="function"==typeof R,B=n.QObject,H=!B||!B.prototype||!B.prototype.findChild,U=o&&u(function(){return 7!=S(L({},"a",{get:function(){return L(this,"a",{value:7}).a}})).a})?function(e,t,r){var n=I($,t);n&&delete $[t],L(e,t,r),n&&e!==$&&L($,t,n)}:L,V=function(e){var t=M[e]=S(R.prototype);return t._k=e,t},q=G&&"symbol"==typeof R.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof R},z=function(e,t,r){return e===$&&z(j,t,r),y(e),t=E(t,!0),y(r),i(M,t)?(r.enumerable?(i(e,O)&&e[O][t]&&(e[O][t]=!1),r=S(r,{enumerable:x(0,!1)})):(i(e,O)||L(e,O,x(1,{})),e[O][t]=!0),U(e,t,r)):L(e,t,r)},Q=function(e,t){y(e);for(var r,n=v(t=b(t)),i=0,o=n.length;o>i;)z(e,r=n[i++],t[r]);return e},W=function(e,t){return void 0===t?S(e):Q(S(e),t)},X=function(e){var t=D.call(this,e=E(e,!0));return!(this===$&&i(M,e)&&!i(j,e))&&(!(t||!i(this,e)||!i(M,e)||i(this,O)&&this[O][e])||t)},Y=function(e,t){if(e=b(e),t=E(t,!0),e!==$||!i(M,t)||i(j,t)){var r=I(e,t);return!r||!i(M,t)||i(e,O)&&e[O][t]||(r.enumerable=!0),r}},K=function(e){for(var t,r=N(b(e)),n=[],o=0;r.length>o;)i(M,t=r[o++])||t==O||t==l||n.push(t);return n},J=function(e){for(var t,r=e===$,n=N(r?j:b(e)),o=[],a=0;n.length>a;)!i(M,t=n[a++])||r&&!i($,t)||o.push(M[t]);return o};G||(R=function(){if(this instanceof R)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0),t=function(r){this===$&&t.call(j,r),i(this,O)&&i(this[O],e)&&(this[O][e]=!1),U(this,e,x(1,r))};return o&&H&&U($,e,{configurable:!0,set:t}),V(e)},s(R.prototype,"toString",function(){return this._k}),w.f=Y,T.f=z,r(174).f=C.f=K,r(83).f=X,r(119).f=J,o&&!r(84)&&s($,"propertyIsEnumerable",X,!0),h.f=function(e){return V(f(e))}),a(a.G+a.W+a.F*!G,{Symbol:R});for(var Z="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ee=0;Z.length>ee;)f(Z[ee++]);for(var te=A(f.store),re=0;te.length>re;)g(te[re++]);a(a.S+a.F*!G,"Symbol",{for:function(e){return i(F,e+="")?F[e]:F[e]=R(e)},keyFor:function(e){if(!q(e))throw TypeError(e+" is not a symbol!");for(var t in F)if(F[t]===e)return t},useSetter:function(){H=!0},useSimple:function(){H=!1}}),a(a.S+a.F*!G,"Object",{create:W,defineProperty:z,defineProperties:Q,getOwnPropertyDescriptor:Y,getOwnPropertyNames:K,getOwnPropertySymbols:J}),_&&a(a.S+a.F*(!G||u(function(){var e=R();return"[null]"!=k([e])||"{}"!=k({a:e})||"{}"!=k(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!q(e)){for(var t,r,n=[e],i=1;arguments.length>i;)n.push(arguments[i++]);return t=n[1],"function"==typeof t&&(r=t),!r&&m(t)||(t=function(e,t){if(r&&(t=r.call(this,e,t)),!q(t))return t}),n[1]=t,k.apply(_,n)}}}),R.prototype[P]||r(31)(R.prototype,P,R.prototype.valueOf),p(R,"Symbol"),p(Math,"Math",!0),p(n.JSON,"JSON",!0)},function(e,t,r){var n=r(65),i=r(119),o=r(83);e.exports=function(e){var t=n(e),r=i.f;if(r)for(var a,s=r(e),l=o.f,u=0;s.length>u;)l.call(e,a=s[u++])&&t.push(a);return t}},function(e,t,r){r(124)("asyncIterator")},function(e,t,r){r(124)("observable")},function(e,t,r){e.exports={default:r(298),__esModule:!0}},function(e,t,r){r(299),e.exports=r(9).Object.setPrototypeOf},function(e,t,r){var n=r(13);n(n.S,"Object",{setPrototypeOf:r(300).set})},function(e,t,r){var n=r(26),i=r(25),o=function(e,t){if(i(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{n=r(29)(Function.call,r(125).f(Object.prototype,"__proto__").set,2),n(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,r){return o(e,r),t?e.__proto__=r:n(e,r),e}}({},!1):void 0),check:o}},function(e,t,r){e.exports={default:r(302),__esModule:!0}},function(e,t,r){r(303);var n=r(9).Object;e.exports=function(e,t){return n.create(e,t)}},function(e,t,r){var n=r(13);n(n.S,"Object",{create:r(85)})},function(e,t,r){r(305);var n=r(9).Object;e.exports=function(e,t,r){return n.defineProperty(e,t,r)}},function(e,t,r){var n=r(13);n(n.S+n.F*!r(27),"Object",{defineProperty:r(24).f})},function(e,t,r){e.exports={default:r(307),__esModule:!0}},function(e,t,r){r(308);var n=r(9).Object;e.exports=function(e,t){return n.getOwnPropertyDescriptor(e,t)}},function(e,t,r){var n=r(40),i=r(125).f;r(87)("getOwnPropertyDescriptor",function(){return function(e,t){return i(n(e),t)}})},function(e,t,r){e.exports={default:r(310),__esModule:!0}},function(e,t,r){r(311);var n=r(9).Object;e.exports=function(e){return n.getOwnPropertyNames(e)}},function(e,t,r){r(87)("getOwnPropertyNames",function(){return r(173).f})},function(e,t,r){"use strict";var n=r(127),i=r(91),o=r(129),a=r(130),s=r(55),l=r(7),u=r(44),c=r(32),p=r(128),d=r(21),f=r(89),h=r(0);(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t})(h).module("fibra.services.worker-service-prototype-mapping-configuration",[]).config(["$provide",function(e){e.service("workerServicePrototypeMappingConfiguration",function(){var e={Project:n.Project,CNode:l.CNode,NamedNode:l.NamedNode,Citable:u.Citable,FMap:c.FMap,Class:s.Class,Property:s.Property,TreeNode:p.TreeNode,PrimaryEndpointConfiguration:i.PrimaryEndpointConfiguration,RemoteEndpointConfiguration:o.RemoteEndpointConfiguration,Schema:a.Schema,PropertyAndValue:d.PropertyAndValue,Item:d.Item,PropertyToValues:d.PropertyToValues,FullRichNodeFromNode:f.FullRichNodeFromNode};for(var t in e)e[t].__name=t;e.Object=Object;var r={};for(var h in e)r[h]=e[h].prototype;return r})}])},function(e,t,r){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{items:[],itemIndex:{},localItems:[],allItems:[]},t=arguments[1];switch(t.type){case a.ITEM_PROPERTIES:return e;case a.DISPLAY_ITEMS:var r=e.items.slice(0),n=(0,o.default)({},e.itemIndex);return t.payload.items.forEach(function(e,i){n[e.value]||(r.push(e),n[e.value]=e,t.payload.coordinates&&t.payload.coordinates[i]&&t.payload.coordinates[i][0]&&t.payload.coordinates[i][1]&&(n[e.value].x=t.payload.coordinates[i][0],n[e.value].y=t.payload.coordinates[i][1]))}),(0,o.default)({},e,{items:r,itemIndex:n});case a.ALL_ITEMS_LOADED:return(0,o.default)({},e,{allItems:t.payload.items});case a.ITEMS_CREATED:case a.ITEMS_DELETED:return e;case a.HIDE_ITEM:var i=e.itemIndex[t.payload.value],s=e.items.slice(0),l=(0,o.default)({},e.itemIndex);return i&&(s.splice(s.indexOf(i),1),delete l[t.payload.value]),(0,o.default)({},e,{items:s,itemIndex:l});default:return e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(30),o=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=n;var a=r(45)},function(e,t,r){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return arguments[1].type,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(109),o=r(316),a=n(o),s=r(323),l=n(s),u=r(324),c=n(u),p=r(325),d=n(p);t.default=(0,i.combineReducers)({project:a.default,filter:l.default,active:c.default,sources:d.default})},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments[1];switch(t.type){case u.SET_PROJECT:var r=t.payload,n=r.archiveEndpoints.concat(r.authorityEndpoints).map(function(e,t){return{id:e.id,description:e.labels.filter(function(e){return"en"===e.language})[0].value,classList:[{description:"Concept"},{description:"Document"},{description:"Person"},{description:"Organization"},{description:"CorporateBody"},{description:"Place"}]}});return(0,a.default)({},e,{project:r,id:t.payload.id,sources:n,description:t.payload.labels[0].value});case u.SET_ALL_ITEM_COUNT:return(0,a.default)({},e,{allItemsCount:t.payload});case u.SET_FILTERED_ITEM_COUNT:return(0,a.default)({},e,{filteredItemsCount:t.payload});case u.SET_ACTIVE_ITEM_COUNT:return(0,a.default)({},e,{activeItemsCount:t.payload});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectState=void 0;var o=r(30),a=n(o),s=r(1),l=n(s);t.default=i;var u=r(93),c=t.ProjectState=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;(0,l.default)(this,e),this.project=t,this.id=r,this.sources=n,this.description=i,this.allItemsCount=o,this.filteredItemsCount=a,this.activeItemsCount=s},p=new c},function(e,t,r){r(126),r(54),r(67),r(318),r(321),r(322),e.exports=r(9).Promise},function(e,t,r){"use strict";var n,i,o,a,s=r(84),l=r(17),u=r(29),c=r(86),p=r(13),d=r(26),f=r(63),h=r(133),g=r(72),v=r(178),m=r(179).set,y=r(320)(),b=r(134),E=r(180),x=r(181),S=l.TypeError,C=l.process,w=l.Promise,T="process"==c(C),A=function(){},I=i=b.f,L=!!function(){try{var e=w.resolve(1),t=(e.constructor={})[r(14)("species")]=function(e){e(A,A)};return(T||"function"==typeof PromiseRejectionEvent)&&e.then(A)instanceof t}catch(e){}}(),N=function(e){var t;return!(!d(e)||"function"!=typeof(t=e.then))&&t},R=function(e,t){if(!e._n){e._n=!0;var r=e._c;y(function(){for(var n=e._v,i=1==e._s,o=0;r.length>o;)!function(t){var r,o,a=i?t.ok:t.fail,s=t.resolve,l=t.reject,u=t.domain;try{a?(i||(2==e._h&&O(e),e._h=1),!0===a?r=n:(u&&u.enter(),r=a(n),u&&u.exit()),r===t.promise?l(S("Promise-chain cycle")):(o=N(r))?o.call(r,s,l):s(r)):l(n)}catch(e){l(e)}}(r[o++]);e._c=[],e._n=!1,t&&!e._h&&_(e)})}},_=function(e){m.call(l,function(){var t,r,n,i=e._v,o=k(e);if(o&&(t=E(function(){T?C.emit("unhandledRejection",i,e):(r=l.onunhandledrejection)?r({promise:e,reason:i}):(n=l.console)&&n.error&&n.error("Unhandled promise rejection",i)}),e._h=T||k(e)?2:1),e._a=void 0,o&&t.e)throw t.v})},k=function(e){if(1==e._h)return!1;for(var t,r=e._a||e._c,n=0;r.length>n;)if(t=r[n++],t.fail||!k(t.promise))return!1;return!0},O=function(e){m.call(l,function(){var t;T?C.emit("rejectionHandled",e):(t=l.onrejectionhandled)&&t({promise:e,reason:e._v})})},P=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),R(t,!0))},D=function(e){var t,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw S("Promise can't be resolved itself");(t=N(e))?y(function(){var n={_w:r,_d:!1};try{t.call(e,u(D,n,1),u(P,n,1))}catch(e){P.call(n,e)}}):(r._v=e,r._s=1,R(r,!1))}catch(e){P.call({_w:r,_d:!1},e)}}};L||(w=function(e){h(this,w,"Promise","_h"),f(e),n.call(this);try{e(u(D,this,1),u(P,this,1))}catch(e){P.call(this,e)}},n=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},n.prototype=r(135)(w.prototype,{then:function(e,t){var r=I(v(this,w));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=T?C.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&R(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new n;this.promise=e,this.resolve=u(D,e,1),this.reject=u(P,e,1)},b.f=I=function(e){return e===w||e===a?new o(e):i(e)}),p(p.G+p.W+p.F*!L,{Promise:w}),r(68)(w,"Promise"),r(182)("Promise"),a=r(9).Promise,p(p.S+p.F*!L,"Promise",{reject:function(e){var t=I(this);return(0,t.reject)(e),t.promise}}),p(p.S+p.F*(s||!L),"Promise",{resolve:function(e){return x(s&&this===a?w:this,e)}}),p(p.S+p.F*!(L&&r(183)(function(e){w.all(e).catch(A)})),"Promise",{all:function(e){var t=this,r=I(t),n=r.resolve,i=r.reject,o=E(function(){var r=[],o=0,a=1;g(e,!1,function(e){var s=o++,l=!1;r.push(void 0),a++,t.resolve(e).then(function(e){l||(l=!0,r[s]=e,--a||n(r))},i)}),--a||n(r)});return o.e&&i(o.v),r.promise},race:function(e){var t=this,r=I(t),n=r.reject,i=E(function(){g(e,!1,function(e){t.resolve(e).then(r.resolve,n)})});return i.e&&n(i.v),r.promise}})},function(e,t){e.exports=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},function(e,t,r){var n=r(17),i=r(179).set,o=n.MutationObserver||n.WebKitMutationObserver,a=n.process,s=n.Promise,l="process"==r(66)(a);e.exports=function(){var e,t,r,u=function(){var n,i;for(l&&(n=a.domain)&&n.exit();e;){i=e.fn,e=e.next;try{i()}catch(n){throw e?r():t=void 0,n}}t=void 0,n&&n.enter()};if(l)r=function(){a.nextTick(u)};else if(o){var c=!0,p=document.createTextNode("");new o(u).observe(p,{characterData:!0}),r=function(){p.data=c=!c}}else if(s&&s.resolve){var d=s.resolve();r=function(){d.then(u)}}else r=function(){i.call(n,u)};return function(n){var i={fn:n,next:void 0};t&&(t.next=i),e||(e=i,r()),t=i}}},function(e,t,r){"use strict";var n=r(13),i=r(9),o=r(17),a=r(178),s=r(181);n(n.P+n.R,"Promise",{finally:function(e){var t=a(this,i.Promise||o.Promise),r="function"==typeof e;return this.then(r?function(r){return s(t,e()).then(function(){return r})}:e,r?function(r){return s(t,e()).then(function(){throw r})}:e)}})},function(e,t,r){"use strict";var n=r(13),i=r(134),o=r(180);n(n.S,"Promise",{try:function(e){var t=i.f(this),r=o(e);return(r.e?t.reject:t.resolve)(r.v),t.promise}})},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments[1];switch(t.type){case u.SET_FILTER_DIVIDER_PERCENTAGE:return(0,l.default)({},e,{dividerPercent:t.payload});case u.SET_FILTER_FOR_CLASS_AND_PROP:return(0,l.default)({},e,{filtersByClass:(0,l.default)({},e.filtersByClass,(0,a.default)({},t.payload.clss.id.value,(0,l.default)({},e.filtersByClass[t.payload.clss.id.value],(0,a.default)({},t.payload.property.id.value,{type:"TIMELINE",description:"Timeline",domain:[0,2500],selection:[0,2500]}))))});default:return e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(94),a=n(o),s=r(30),l=n(s);t.default=i;var u=r(184),c={dividerPercent:0,filtersByClass:{}}},function(e,t,r){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1];switch(t.type){case a.ADD_ITEM_TO_CURRENT_LAYOUT:var r=e.activeLayout.items.slice(0);return r.push(t.payload),(0,o.default)({},e,{activeLayout:(0,o.default)({},e.activeLayout,{items:r})});case a.SET_ACTIVE_DIVIDER_PERCENTAGE:return(0,o.default)({},e,{dividerPercent:t.payload});default:return e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(30),o=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=n;var a=r(185),s={activeLayout:{items:[]},dividerPercent:0}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments[1];switch(t.type){case u.SET_SOURCE_CLASS_ACTIVE:return(0,l.default)({},e,{sourceClassToggle:(0,l.default)({},e.sourceClassToggle,(0,a.default)({},t.payload.source,(0,l.default)({},e.sourceClassToggle[t.payload.source],(0,a.default)({},t.payload.clss,t.payload.status))))});case u.ADD_SOURCE:var r=e.sources.slice();return r.push(t.payload),(0,l.default)({},e,{sources:r});default:return e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(94),a=n(o),s=r(30),l=n(s);t.default=i;var u=r(131),c={sources:[],sourceClassToggle:{"http://ldf.fi/fibra/viafCidocLiteEndpointConfiguration":{"http://www.cidoc-crm.org/cidoc-crm/E21_Person":!0,"http://www.cidoc-crm.org/cidoc-crm/E53_Place":!0},"http://ldf.fi/fibra/geonamesCidocLiteEndpointConfiguration":{"http://www.cidoc-crm.org/cidoc-crm/E21_Person":!0,"http://www.cidoc-crm.org/cidoc-crm/E53_Place":!0}}}},function(e,t){/**
 * @license HTTP Auth Interceptor Module for AngularJS
 * (c) 2012 Witold Szczerba
 * License: MIT
 */
!function(){"use strict";angular.module("http-auth-interceptor",["http-auth-interceptor-buffer"]).factory("authService",["$rootScope","httpBuffer",function(e,t){return{loginConfirmed:function(r,n){var i=n||function(e){return e};e.$broadcast("event:auth-loginConfirmed",r),t.retryAll(i)},loginCancelled:function(r,n){t.rejectAll(n),e.$broadcast("event:auth-loginCancelled",r)}}}]).config(["$httpProvider",function(e){e.interceptors.push(["$rootScope","$q","httpBuffer",function(e,t,r){return{responseError:function(n){var i=n.config||{};if(!i.ignoreAuthModule)switch(n.status){case 401:var o=t.defer();return 1===r.append(i,o)&&e.$broadcast("event:auth-loginRequired",n),o.promise;case 403:e.$broadcast("event:auth-forbidden",n)}return t.reject(n)}}}])}]),angular.module("http-auth-interceptor-buffer",[]).factory("httpBuffer",["$injector",function(e){function t(t,n){function i(e){n.resolve(e)}function o(e){n.reject(e)}r=r||e.get("$http"),r(t).then(i,o)}var r,n=[];return{append:function(e,t){return n.push({config:e,deferred:t})},rejectAll:function(e){if(e)for(var t=0;t<n.length;++t)n[t].deferred.reject(e);n=[]},retryAll:function(e){for(var r=0;r<n.length;++r){var i=e(n[r].config);!1!==i&&t(i,n[r].deferred)}n=[]}}}])}(),void 0!==e&&void 0!==t&&e.exports===t&&(e.exports="http-auth-interceptor")},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0});var i=r(22);t.core=i,n(r(22)),n(r(142)),n(r(143)),n(r(211)),n(r(212)),r(351),r(352),r(353),r(354),r(355),t.default="ui.router"},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(57)),n(r(188)),n(r(189)),n(r(140))},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(139)),n(r(98))},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(187)),n(r(75)),n(r(99))},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(190)),n(r(136)),n(r(191)),n(r(192)),n(r(193)),n(r(194)),n(r(46))},function(e,t,r){"use strict";function n(e){e.addResolvable({token:o.UIRouter,deps:[],resolveFn:function(){return e.router},data:e.router},""),e.addResolvable({token:i.Transition,deps:[],resolveFn:function(){return e},data:e},""),e.addResolvable({token:"$transition$",deps:[],resolveFn:function(){return e},data:e},""),e.addResolvable({token:"$stateParams",deps:[],resolveFn:function(){return e.params()},data:e.params()},""),e.entering().forEach(function(t){e.addResolvable({token:"$state$",deps:[],resolveFn:function(){return t},data:t},t)})}Object.defineProperty(t,"__esModule",{value:!0});var i=r(97),o=r(195);t.registerAddCoreResolvables=function(e){return e.onCreate({},n)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(5),i=r(16),o=r(46),a=function(e){function t(t){if(t)return t instanceof o.TargetState?t:n.isString(t)?a.target(t,e.params(),e.options()):t.state||t.params?a.target(t.state||e.to(),t.params||e.params(),e.options()):void 0}var r=e.to().redirectTo;if(r){var a=e.router.stateService;return n.isFunction(r)?i.services.$q.when(r(e)).then(t):t(r)}};t.registerRedirectToHook=function(e){return e.onStart({to:function(e){return!!e.redirectTo}},a)}},function(e,t,r){"use strict";function n(e){return function(t,r){return(0,r.$$state()[e])(t,r)}}Object.defineProperty(t,"__esModule",{value:!0});var i=n("onExit");t.registerOnExitHook=function(e){return e.onExit({exiting:function(e){return!!e.onExit}},i)};var o=n("onRetain");t.registerOnRetainHook=function(e){return e.onRetain({retained:function(e){return!!e.onRetain}},o)};var a=n("onEnter");t.registerOnEnterHook=function(e){return e.onEnter({entering:function(e){return!!e.onEnter}},a)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(99),o=r(6),a=function(e){return new i.ResolveContext(e.treeChanges().to).resolvePath("EAGER",e).then(n.noop)};t.registerEagerResolvePath=function(e){return e.onStart({},a,{priority:1e3})};var s=function(e,t){return new i.ResolveContext(e.treeChanges().to).subContext(t.$$state()).resolvePath("LAZY",e).then(n.noop)};t.registerLazyResolveState=function(e){return e.onEnter({entering:o.val(!0)},s,{priority:1e3})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(16),o=function(e){var t=i.services.$q,r=e.views("entering");if(r.length)return t.all(r.map(function(e){return t.when(e.load())})).then(n.noop)};t.registerLoadEnteringViews=function(e){return e.onFinish({},o)};var a=function(e){var t=e.views("entering"),r=e.views("exiting");if(t.length||r.length){var n=e.router.viewService;r.forEach(function(e){return n.deactivateViewConfig(e)}),t.forEach(function(e){return n.activateViewConfig(e)}),n.sync()}};t.registerActivateViews=function(e){return e.onSuccess({},a)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=function(e){var t=e.router.globals,r=function(){t.successfulTransitions.enqueue(e),t.$current=e.$to(),t.current=t.$current.self,n.copy(e.params(),t.params)},i=function(){t.transition===e&&(t.transition=null)};e.onSuccess({},r,{priority:1e4}),e.promise.then(i,i)};t.registerUpdateGlobalState=function(e){return e.onCreate({},i)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){var t=e.options(),r=e.router.stateService,n=e.router.urlRouter;if("url"!==t.source&&t.location&&r.$current.navigable){var i={replace:"replace"===t.location};n.push(r.$current.navigable.url,r.params,i)}n.update(!0)};t.registerUpdateUrl=function(e){return e.onSuccess({},n,{priority:9999})}},function(e,t,r){"use strict";function n(e){var t=e._ignoredReason();if(t){i.trace.traceTransitionIgnored(e);var r=e.router.globals.transition;return"SameAsCurrent"===t&&r&&r.abort(),o.Rejection.ignored().toPromise()}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(34),o=r(73);t.registerIgnoredTransitionHook=function(e){return e.onBefore({},n,{priority:-9999})}},function(e,t,r){"use strict";function n(e){if(!e.valid())throw new Error(e.error())}Object.defineProperty(t,"__esModule",{value:!0}),t.registerInvalidTransitionHook=function(e){return e.onBefore({},n,{priority:-1e4})}},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(56)),n(r(186)),n(r(138)),n(r(73)),n(r(97)),n(r(74)),n(r(203)),n(r(141))},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(100)),n(r(196)),n(r(197)),n(r(198)),n(r(201))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(199))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(345))},function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(204)),n(r(205)),n(r(101)),n(r(206)),n(r(207)),n(r(208)),n(r(209)),n(r(210)),n(r(76)),n(r(346))},function(e,t,r){"use strict";function n(e){return d.services.$injector=c.$injector,d.services.$q=p.$q,{name:"vanilla.services",$q:p.$q,$injector:c.$injector,dispose:function(){return null}}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(210),o=r(206),a=r(76),s=r(208),l=r(207),u=r(209),c=r(205),p=r(204),d=r(16);t.servicesPlugin=n,t.hashLocationPlugin=a.locationPluginFactory("vanilla.hashBangLocation",!1,o.HashLocationService,i.BrowserLocationConfig),t.pushStateLocationPlugin=a.locationPluginFactory("vanilla.pushStateLocation",!0,s.PushStateLocationService,i.BrowserLocationConfig),t.memoryLocationPlugin=a.locationPluginFactory("vanilla.memoryLocation",!1,l.MemoryLocationService,u.MemoryLocationConfig)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.prototype.dispose=function(e){},e}();t.UIRouterPluginBase=n},function(e,t,r){"use strict";function n(e){var t=o.services.$injector.get(e+"Directive");if(!t||!t.length)throw new Error("Unable to find component named '"+e+"'");return t.map(s).reduce(o.unnestR,[])}Object.defineProperty(t,"__esModule",{value:!0});var i=r(58),o=r(22),a=function(){function e(){var e=this;this._useHttp=i.ng.version.minor<3,this.$get=["$http","$templateCache","$injector",function(t,r,n){return e.$templateRequest=n.has&&n.has("$templateRequest")&&n.get("$templateRequest"),e.$http=t,e.$templateCache=r,e}]}return e.prototype.useHttpService=function(e){this._useHttp=e},e.prototype.fromConfig=function(e,t,r){var n=function(e){return o.services.$q.when(e).then(function(e){return{template:e}})},i=function(e){return o.services.$q.when(e).then(function(e){return{component:e}})};return o.isDefined(e.template)?n(this.fromString(e.template,t)):o.isDefined(e.templateUrl)?n(this.fromUrl(e.templateUrl,t)):o.isDefined(e.templateProvider)?n(this.fromProvider(e.templateProvider,t,r)):o.isDefined(e.component)?i(e.component):o.isDefined(e.componentProvider)?i(this.fromComponentProvider(e.componentProvider,t,r)):n("<ui-view></ui-view>")},e.prototype.fromString=function(e,t){return o.isFunction(e)?e(t):e},e.prototype.fromUrl=function(e,t){return o.isFunction(e)&&(e=e(t)),null==e?null:this._useHttp?this.$http.get(e,{cache:this.$templateCache,headers:{Accept:"text/html"}}).then(function(e){return e.data}):this.$templateRequest(e)},e.prototype.fromProvider=function(e,t,r){var n=o.services.$injector.annotate(e),i=o.isArray(e)?o.tail(e):e;return new o.Resolvable("",i,n).get(r)},e.prototype.fromComponentProvider=function(e,t,r){var n=o.services.$injector.annotate(e),i=o.isArray(e)?o.tail(e):e;return new o.Resolvable("",i,n).get(r)},e.prototype.makeComponentTemplate=function(e,t,r,a){a=a||{};var s=i.ng.version.minor>=3?"::":"",l=function(e){var t=o.kebobString(e);return/^(x|data)-/.exec(t)?"x-"+t:t},u=function(r){var n=r.name,i=r.type,u=l(n);if(e.attr(u)&&!a[n])return u+"='"+e.attr(u)+"'";var c=a[n]||n;if("@"===i)return u+"='{{"+s+"$resolve."+c+"}}'";if("&"===i){var p=t.getResolvable(c),d=p&&p.data,f=d&&o.services.$injector.annotate(d)||[];return u+"='$resolve."+c+(o.isArray(d)?"["+(d.length-1)+"]":"")+"("+f.join(",")+")'"}return u+"='"+s+"$resolve."+c+"'"},c=n(r).map(u).join(" "),p=l(r);return"<"+p+" "+c+"></"+p+">"},e}();t.TemplateFactory=a;var s=function(e){return l(o.isObject(e.bindToController)?e.bindToController:e.scope)},l=function(e){return Object.keys(e||{}).map(function(t){return[t,/^([=<@&])[?]?(.*)/.exec(e[t])]}).filter(function(e){return o.isDefined(e)&&o.isArray(e[1])}).map(function(e){return{name:e[1][2]||e[0],type:e[1][1]}})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(22),i=r(142);t.getStateHookBuilder=function(e){return function(t,r){function o(e,t){var r=new n.ResolveContext(e.treeChanges(s)),o=n.extend(i.getLocals(r),{$state$:t,$transition$:e});return n.services.$injector.invoke(a,this,o)}var a=t[e],s="onExit"===e?"from":"to";return a?o:void 0}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(22),i=function(){function e(e){this._urlListeners=[],this.$locationProvider=e;var t=n.val(e);n.createProxyFunctions(t,this,t,["hashPrefix"])}return e.prototype.dispose=function(){},e.prototype.onChange=function(e){var t=this;return this._urlListeners.push(e),function(){return n.removeFrom(t._urlListeners)(e)}},e.prototype.html5Mode=function(){var e=this.$locationProvider.html5Mode();return(e=n.isObject(e)?e.enabled:e)&&this.$sniffer.history},e.prototype.url=function(e,t,r){return void 0===t&&(t=!1),e&&this.$location.url(e),t&&this.$location.replace(),r&&this.$location.state(r),this.$location.url()},e.prototype._runtimeServices=function(e,t,r,i){var o=this;this.$location=t,this.$sniffer=r,e.$on("$locationChangeSuccess",function(e){return o._urlListeners.forEach(function(t){return t(e)})});var a=n.val(t),s=n.val(i);n.createProxyFunctions(a,this,a,["replace","path","search","hash"]),n.createProxyFunctions(a,this,a,["port","protocol","host"]),n.createProxyFunctions(s,this,s,["baseHref"])},e.monkeyPatchPathParameterType=function(e){var t=e.urlMatcherFactory.type("path");t.encode=function(e){return null!=e?e.toString().replace(/(~|\/)/g,function(e){return{"~":"~~","/":"~2F"}[e]}):e},t.decode=function(e){return null!=e?e.toString().replace(/(~~|~2F)/g,function(e){return{"~~":"~","~2F":"/"}[e]}):e}},e}();t.Ng1LocationServices=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,r){"use strict";function n(e){var t,r=e.match(/^\s*({[^}]*})\s*$/);if(r&&(e="("+r[1]+")"),!(t=e.replace(/\n/g," ").match(/^\s*([^(]*?)\s*(\((.*)\))?\s*$/))||4!==t.length)throw new Error("Invalid state ref '"+e+"'");return{state:t[1]||null,paramExpr:t[3]||null}}function i(e){var t=e.parent().inheritedData("$uiView"),r=d.parse("$cfg.path")(t);return r?d.tail(r).state.name:void 0}function o(e,t,r){var n=r.uiState||e.current.name,i=d.extend(l(t,e),r.uiStateOpts||{}),o=e.href(n,r.uiStateParams,i);return{uiState:n,uiStateParams:r.uiStateParams,uiStateOpts:i,href:o}}function a(e){var t="[object SVGAnimatedString]"===Object.prototype.toString.call(e.prop("href")),r="FORM"===e[0].nodeName;return{attr:r?"action":t?"xlink:href":"href",isAnchor:"A"===e.prop("tagName").toUpperCase(),clickable:!r}}function s(e,t,r,n,i){return function(o){var a=o.which||o.button,s=i();if(!(a>1||o.ctrlKey||o.metaKey||o.shiftKey||e.attr("target"))){var l=r(function(){t.go(s.uiState,s.uiStateParams,s.uiStateOpts)});o.preventDefault();var u=n.isAnchor&&!s.href?1:0;o.preventDefault=function(){u--<=0&&r.cancel(l)}}}}function l(e,t){return{relative:i(e)||t.$current,inherit:!0,source:"sref"}}function u(e,t,r,n){var i;n&&(i=n.events),d.isArray(i)||(i=["click"]);for(var o=e.on?"on":"bind",a=0,s=i;a<s.length;a++){var l=s[a];e[o](l,r)}t.$on("$destroy",function(){for(var t=e.off?"off":"unbind",n=0,o=i;n<o.length;n++){var a=o[n];e[t](a,r)}})}Object.defineProperty(t,"__esModule",{value:!0});var c,p=r(58),d=r(22);c=["$uiRouter","$timeout",function(e,t){var r=e.stateService;return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(i,l,c,p){function f(){var e=b();m&&m(),v&&(m=v.$$addStateInfo(e.uiState,e.uiStateParams)),null!=e.href&&c.$set(g.attr,e.href)}var h,g=a(l),v=p[1]||p[0],m=null,y={},b=function(){return o(r,l,y)},E=n(c.uiSref);y.uiState=E.state,y.uiStateOpts=c.uiSrefOpts?i.$eval(c.uiSrefOpts):{},E.paramExpr&&(i.$watch(E.paramExpr,function(e){y.uiStateParams=d.extend({},e),f()},!0),y.uiStateParams=d.extend({},i.$eval(E.paramExpr))),f(),i.$on("$destroy",e.stateRegistry.onStatesChanged(f)),i.$on("$destroy",e.transitionService.onSuccess({},f)),g.clickable&&(h=s(l,r,t,g,b),u(l,i,h,y.uiStateOpts))}}}];var f;f=["$uiRouter","$timeout",function(e,t){var r=e.stateService;return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(n,i,l,c){function p(){var e=y();v&&v(),g&&(v=g.$$addStateInfo(e.uiState,e.uiStateParams)),null!=e.href&&l.$set(h.attr,e.href)}var f,h=a(i),g=c[1]||c[0],v=null,m={},y=function(){return o(r,i,m)},b=["uiState","uiStateParams","uiStateOpts"],E=b.reduce(function(e,t){return e[t]=d.noop,e},{});b.forEach(function(e){m[e]=l[e]?n.$eval(l[e]):null,l.$observe(e,function(t){E[e](),E[e]=n.$watch(t,function(t){m[e]=t,p()},!0)})}),p(),n.$on("$destroy",e.stateRegistry.onStatesChanged(p)),n.$on("$destroy",e.transitionService.onSuccess({},p)),h.clickable&&(f=s(i,r,t,h,y),u(i,n,f,m.uiStateOpts))}}}];var h;h=["$state","$stateParams","$interpolate","$uiRouter",function(e,t,r,o){return{restrict:"A",controller:["$scope","$element","$attrs",function(t,a,s){function l(e){e.promise.then(c)}function u(t,r,n){var o=e.get(t,i(a)),s={state:o||{name:t},params:r,activeClass:n};return h.push(s),function(){d.removeFrom(h)(s)}}function c(){var r=function(e){return e.split(/\s/).filter(d.identity)},n=function(e){return e.map(function(e){return e.activeClass}).map(r).reduce(d.unnestR,[])},i=n(h).concat(r(p)).reduce(d.uniqR,[]),o=n(h.filter(function(t){return e.includes(t.state.name,t.params)})),s=!!h.filter(function(t){return e.is(t.state.name,t.params)}).length,l=s?r(p):[],u=o.concat(l).reduce(d.uniqR,[]),c=i.filter(function(e){return!d.inArray(u,e)});t.$evalAsync(function(){u.forEach(function(e){return a.addClass(e)}),c.forEach(function(e){return a.removeClass(e)})})}var p,f,h=[];p=r(s.uiSrefActiveEq||"",!1)(t);try{f=t.$eval(s.uiSrefActive)}catch(e){}f=f||r(s.uiSrefActive||"",!1)(t),d.isObject(f)&&d.forEach(f,function(e,r){if(d.isString(e)){var i=n(e);u(i.state,t.$eval(i.paramExpr),r)}}),this.$$addStateInfo=function(e,t){if(!(d.isObject(f)&&h.length>0)){var r=u(e,t,f);return c(),r}},t.$on("$stateChangeSuccess",c),t.$on("$destroy",o.transitionService.onStart({},l)),o.globals.transition&&l(o.globals.transition),c()}]}}],p.ng.module("ui.router.state").directive("uiSref",c).directive("uiSrefActive",h).directive("uiSrefActiveEq",h).directive("uiState",f)},function(e,t,r){"use strict";function n(e){var t=function(t,r,n){return e.is(t,r,n)};return t.$stateful=!0,t}function i(e){var t=function(t,r,n){return e.includes(t,r,n)};return t.$stateful=!0,t}Object.defineProperty(t,"__esModule",{value:!0});var o=r(58);n.$inject=["$state"],t.$IsStateFilter=n,i.$inject=["$state"],t.$IncludedByStateFilter=i,o.ng.module("ui.router.state").filter("isState",n).filter("includedByState",i)},function(e,t,r){"use strict";function n(e,t,r,n,l,c){var p=s.parse("viewDecl.controllerAs"),d=s.parse("viewDecl.resolveAs");return{restrict:"ECA",priority:-400,compile:function(n){var c=n.html();return n.empty(),function(n,f){var h=f.data("$uiView");if(!h)return f.html(c),void e(f.contents())(n);var g=h.$cfg||{viewDecl:{},getTemplate:a.noop},v=g.path&&new s.ResolveContext(g.path);f.html(g.getTemplate(f,v)||c),s.trace.traceUIViewFill(h.$uiView,f.html());var m=e(f.contents()),y=g.controller,b=p(g),E=d(g),x=v&&u.getLocals(v);if(n[E]=x,y){var S=t(y,s.extend({},x,{$scope:n,$element:f}));b&&(n[b]=S,n[b][E]=x),f.data("$ngControllerController",S),f.children().data("$ngControllerController",S),i(l,r,S,n,g)}if(s.isString(g.viewDecl.component))var C=g.viewDecl.component,w=s.kebobString(C),T=new RegExp("^(x-|data-)?"+w+"$","i"),A=function(){var e=[].slice.call(f[0].children).filter(function(e){return e&&e.tagName&&T.exec(e.tagName)});return e&&o.ng.element(e).data("$"+C+"Controller")},I=n.$watch(A,function(e){e&&(i(l,r,e,n,g),I())});m(n)}}}}function i(e,t,r,n,i){!s.isFunction(r.$onInit)||i.viewDecl.component&&c||r.$onInit();var o=s.tail(i.path).state.self,a={bind:r};if(s.isFunction(r.uiOnParamsChanged)){var l=new s.ResolveContext(i.path),u=l.getResolvable("$transition$").data,d=function(e){if(e!==u&&-1===e.exiting().indexOf(o)){var t=e.params("to"),n=e.params("from"),i=e.treeChanges().to.map(function(e){return e.paramSchema}).reduce(s.unnestR,[]),a=e.treeChanges().from.map(function(e){return e.paramSchema}).reduce(s.unnestR,[]),l=i.filter(function(e){var r=a.indexOf(e);return-1===r||!a[r].type.equals(t[e.id],n[e.id])});if(l.length){var c=l.map(function(e){return e.id}),p=s.filter(t,function(e,t){return-1!==c.indexOf(t)});r.uiOnParamsChanged(p,e)}}};n.$on("$destroy",t.onSuccess({},d,a))}if(s.isFunction(r.uiCanExit)){var f=p++,h=function(e){return!!e&&(e._uiCanExitIds&&!0===e._uiCanExitIds[f]||h(e.redirectedFrom()))},g=function(t){var n,i=t._uiCanExitIds=t._uiCanExitIds||{};return h(t)||(n=e.when(r.uiCanExit(t)),n.then(function(e){return i[f]=!1!==e})),n},v={exiting:o.name};n.$on("$destroy",t.onBefore(v,g,a))}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(58),a=r(0),s=r(22),l=r(143),u=r(142);t.uiView=["$view","$animate","$uiViewScroll","$interpolate","$q",function(e,t,r,n,i){function a(e,r){return{enter:function(e,r,n){o.ng.version.minor>2?t.enter(e,null,r).then(n):t.enter(e,null,r,n)},leave:function(e,r){o.ng.version.minor>2?t.leave(e).then(r):t.leave(e,r)}}}function u(e,t){return e===t}var c={$cfg:{viewDecl:{$context:e._pluginapi._rootViewContext()}},$uiView:{}},p={count:0,restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(t,o,d){return function(t,o,f){function h(e){(!e||e instanceof l.Ng1ViewConfig)&&(u(w,e)||(s.trace.traceUIViewConfigUpdated(I,e&&e.viewDecl&&e.viewDecl.$context),w=e,v(e)))}function g(){if(m&&(s.trace.traceUIViewEvent("Removing (previous) el",m.data("$uiView")),m.remove(),m=null),b&&(s.trace.traceUIViewEvent("Destroying scope",I),b.$destroy(),b=null),y){var e=y.data("$uiViewAnim");s.trace.traceUIViewEvent("Animate out",e),C.leave(y,function(){e.$$animLeave.resolve(),m=null}),m=y,y=null}}function v(e){var n=t.$new(),a=i.defer(),l=i.defer(),u={$cfg:e,$uiView:I},c={$animEnter:a.promise,$animLeave:l.promise,$$animLeave:l};n.$emit("$viewContentLoading",A);var p=d(n,function(e){e.data("$uiViewAnim",c),e.data("$uiView",u),C.enter(e,o,function(){a.resolve(),b&&b.$emit("$viewContentAnimationEnded"),(s.isDefined(S)&&!S||t.$eval(S))&&r(e)}),g()});y=p,b=n,b.$emit("$viewContentLoaded",e||w),b.$eval(x)}var m,y,b,E,x=f.onload||"",S=f.autoscroll,C=a(f,t),w=void 0,T=o.inheritedData("$uiView")||c,A=n(f.uiView||f.name||"")(t)||"$default",I={$type:"ng1",id:p.count++,name:A,fqn:T.$uiView.fqn?T.$uiView.fqn+"."+A:A,config:null,configUpdated:h,get creationContext(){var e=s.parse("$cfg.viewDecl.$context")(T),t=s.parse("$uiView.creationContext")(T);return e||t}};s.trace.traceUIViewEvent("Linking",I),o.data("$uiView",{$uiView:I}),v(),E=e.registerUIView(I),t.$on("$destroy",function(){s.trace.traceUIViewEvent("Destroying/Unregistering",I),E()})}}};return p}],n.$inject=["$compile","$controller","$transitions","$view","$q","$timeout"];var c="function"==typeof o.ng.module("ui.router").component,p=0;o.ng.module("ui.router.state").directive("uiView",t.uiView),o.ng.module("ui.router.state").directive("uiView",n)},function(e,t,r){"use strict";function n(){var e=!1;this.useAnchorScroll=function(){e=!0},this.$get=["$anchorScroll","$timeout",function(t,r){return e?t:function(e){return r(function(){e[0].scrollIntoView()},0,!1)}}]}Object.defineProperty(t,"__esModule",{value:!0}),r(58).ng.module("ui.router.state").provider("$uiViewScroll",n)},function(e,t,r){r(357),e.exports="ngAnimate"},function(e,t){/**
 * @license AngularJS v1.6.6
 * (c) 2010-2017 Google, Inc. http://angularjs.org
 * License: MIT
 */
!function(e,t){"use strict";function r(e,t,r){if(!e)throw le("areq","Argument '{0}' is {1}",t||"?",r||"required");return e}function n(e,t){return e||t?e?t?(z(e)&&(e=e.join(" ")),z(t)&&(t=t.join(" ")),e+" "+t):e:t:""}function i(e){var t={};return e&&(e.to||e.from)&&(t.to=e.to,t.from=e.from),t}function o(e,t,r){var n="";return e=z(e)?e:e&&K(e)&&e.length?e.split(/\s+/):[],q(e,function(e,i){e&&e.length>0&&(n+=i>0?" ":"",n+=r?t+e:e+t)}),n}function a(e,t){var r=e.indexOf(t);t>=0&&e.splice(r,1)}function s(e){if(e instanceof Z)switch(e.length){case 0:return e;case 1:if(e[0].nodeType===M)return e;break;default:return Z(l(e))}if(e.nodeType===M)return Z(e)}function l(e){if(!e[0])return e;for(var t=0;t<e.length;t++){var r=e[t];if(r.nodeType===M)return r}}function u(e,t,r){q(t,function(t){e.addClass(t,r)})}function c(e,t,r){q(t,function(t){e.removeClass(t,r)})}function p(e){return function(t,r){r.addClass&&(u(e,t,r.addClass),r.addClass=null),r.removeClass&&(c(e,t,r.removeClass),r.removeClass=null)}}function d(e){if(e=e||{},!e.$$prepared){var t=e.domOperation||ee;e.domOperation=function(){e.$$domOperationFired=!0,t(),t=ee},e.$$prepared=!0}return e}function f(e,t){h(e,t),g(e,t)}function h(e,t){t.from&&(e.css(t.from),t.from=null)}function g(e,t){t.to&&(e.css(t.to),t.to=null)}function v(e,t,r){var n=t.options||{},i=r.options||{},o=(n.addClass||"")+" "+(i.addClass||""),a=(n.removeClass||"")+" "+(i.removeClass||""),s=m(e.attr("class"),o,a);i.preparationClasses&&(n.preparationClasses=w(i.preparationClasses,n.preparationClasses),delete i.preparationClasses);var l=n.domOperation!==ee?n.domOperation:null;return V(n,i),l&&(n.domOperation=l),s.addClass?n.addClass=s.addClass:n.addClass=null,s.removeClass?n.removeClass=s.removeClass:n.removeClass=null,t.addClass=n.addClass,t.removeClass=n.removeClass,n}function m(e,t,r){function n(e){K(e)&&(e=e.split(" "));var t={};return q(e,function(e){e.length&&(t[e]=!0)}),t}var i={};e=n(e),t=n(t),q(t,function(e,t){i[t]=1}),r=n(r),q(r,function(e,t){i[t]=1===i[t]?null:-1});var o={addClass:"",removeClass:""};return q(i,function(t,r){var n,i;1===t?(n="addClass",i=!e[r]||e[r+$]):-1===t&&(n="removeClass",i=e[r]||e[r+j]),i&&(o[n].length&&(o[n]+=" "),o[n]+=r)}),o}function y(e){return e instanceof Z?e[0]:e}function b(e,t,r){var n="";t&&(n=o(t,G,!0)),r.addClass&&(n=w(n,o(r.addClass,j))),r.removeClass&&(n=w(n,o(r.removeClass,$))),n.length&&(r.preparationClasses=n,e.addClass(n))}function E(e,t){t.preparationClasses&&(e.removeClass(t.preparationClasses),t.preparationClasses=null),t.activeClasses&&(e.removeClass(t.activeClasses),t.activeClasses=null)}function x(e,t){var r=t?"-"+t+"s":"";return C(e,[ae,r]),[ae,r]}function S(e,t){var r=t?"paused":"",n=D+ne;return C(e,[n,r]),[n,r]}function C(e,t){var r=t[0],n=t[1];e.style[r]=n}function w(e,t){return e?t?e+" "+t:e:t}function T(e){return[oe,e+"s"]}function A(e,t){return[t?ie:ae,e+"s"]}function I(e,t,r){var n=Object.create(null),i=e.getComputedStyle(t)||{};return q(r,function(e,t){var r=i[e];if(r){var o=r.charAt(0);("-"===o||"+"===o||o>=0)&&(r=L(r)),0===r&&(r=null),n[t]=r}}),n}function L(e){var t=0,r=e.split(/\s*,\s*/);return q(r,function(e){"s"===e.charAt(e.length-1)&&(e=e.substring(0,e.length-1)),e=parseFloat(e)||0,t=t?Math.max(e,t):e}),t}function N(e){return 0===e||null!=e}function R(e,t){var r=O,n=e+"s";return t?r+=te:n+=" linear all",[r,n]}function _(){var e=Object.create(null);return{flush:function(){e=Object.create(null)},count:function(t){var r=e[t];return r?r.total:0},get:function(t){var r=e[t];return r&&r.value},put:function(t,r){e[t]?e[t].total++:e[t]={total:1,value:r}}}}function k(e,t,r){q(r,function(r){e[r]=Q(e[r])?e[r]:t.style.getPropertyValue(r)})}var O,P,D,F,M=1,j="-add",$="-remove",G="ng-",B="ng-animate",H="$$ngAnimateChildren";void 0===e.ontransitionend&&void 0!==e.onwebkittransitionend?("-webkit-",O="WebkitTransition",P="webkitTransitionEnd transitionend"):(O="transition",P="transitionend"),void 0===e.onanimationend&&void 0!==e.onwebkitanimationend?("-webkit-",D="WebkitAnimation",F="webkitAnimationEnd animationend"):(D="animation",F="animationend");var U,V,q,z,Q,W,X,Y,K,J,Z,ee,te="Duration",re="TimingFunction",ne="PlayState",ie=D+"Delay",oe=D+te,ae=O+"Delay",se=O+te,le=t.$$minErr("ng"),ue=["$$rAF",function(e){function t(e){n=n.concat(e),r()}function r(){if(n.length){for(var t=n.shift(),o=0;o<t.length;o++)t[o]();i||e(function(){i||r()})}}var n,i;return n=t.queue=[],t.waitUntilQuiet=function(t){i&&i(),i=e(function(){i=null,t(),r()})},t}],ce=["$interpolate",function(e){return{link:function(t,r,n){function i(e){e="on"===e||"true"===e,r.data(H,e)}var o=n.ngAnimateChildren;K(o)&&0===o.length?r.data(H,!0):(i(e(o)(t)),n.$observe("ngAnimateChildren",i))}}}],pe="$$animateCss",de=1e3,fe=3,he=1.5,ge={transitionDuration:se,transitionDelay:ae,transitionProperty:O+"Property",animationDuration:oe,animationDelay:ie,animationIterationCount:D+"IterationCount"},ve={transitionDuration:se,transitionDelay:ae,animationDuration:oe,animationDelay:ie},me=["$animateProvider",function(e){var t=_(),r=_();this.$get=["$window","$$jqLite","$$AnimateRunner","$timeout","$$forceReflow","$sniffer","$$rAFScheduler","$$animateQueue",function(e,n,s,l,u,c,v,m){function b(e,t){var r="$$ngAnimateParentKey",n=e.parentNode;return(n[r]||(n[r]=++B))+"-"+e.getAttribute("class")+"-"+t}function E(r,n,i,o){var a=t.get(i);return a||(a=I(e,r,o),"infinite"===a.animationIterationCount&&(a.animationIterationCount=1)),t.put(i,a),a}function w(i,a,s,l){var u;if(t.count(s)>0&&!(u=r.get(s))){var c=o(a,"-stagger");n.addClass(i,c),u=I(e,i,l),u.animationDuration=Math.max(u.animationDuration,0),u.transitionDuration=Math.max(u.transitionDuration,0),n.removeClass(i,c),r.put(s,u)}return u||{}}function L(e){H.push(e),v.waitUntilQuiet(function(){t.flush(),r.flush();for(var e=u(),n=0;n<H.length;n++)H[n](e);H.length=0})}function _(e,t,r){var n=E(e,t,r,ge),i=n.animationDelay,o=n.transitionDelay;return n.maxDelay=i&&o?Math.max(i,o):i||o,n.maxDuration=Math.max(n.animationDuration*n.animationIterationCount,n.transitionDuration),n}var M=p(n),B=0,H=[];return function(e,r){function u(){v()}function p(){v(!0)}function v(t){if(!(X||K&&Y)){X=!0,Y=!1,V.$$skipPreparationClasses||n.removeClass(e,Ee),n.removeClass(e,Se),S(W,!1),x(W,!1),q(se,function(e){W.style[e[0]]=""}),M(e,V),f(e,V),Object.keys(Q).length&&q(Q,function(e,t){e?W.style.setProperty(t,e):W.style.removeProperty(t)}),V.onDone&&V.onDone(),ce&&ce.length&&e.off(ce.join(" "),B);var r=e.data(pe);r&&(l.cancel(r[0].timer),e.removeData(pe)),J&&J.complete(!t)}}function E(e){De.blockTransition&&x(W,e),De.blockKeyframeAnimation&&S(W,!!e)}function I(){return J=new s({end:u,cancel:p}),L(ee),v(),{$$willAnimate:!1,start:function(){return J},end:u}}function B(e){e.stopPropagation();var t=e.originalEvent||e,r=t.$manualTimeStamp||Date.now(),n=parseFloat(t.elapsedTime.toFixed(fe));Math.max(r-ae,0)>=ne&&n>=ie&&(K=!0,v())}function H(){function t(){if(!X){if(E(!1),q(se,function(e){var t=e[0],r=e[1];W.style[t]=r}),M(e,V),n.addClass(e,Se),De.recalculateTimingStyles){if(xe=W.getAttribute("class")+" "+Ee,we=b(W,xe),Oe=_(W,xe,we),Pe=Oe.maxDelay,te=Math.max(Pe,0),0===(ie=Oe.maxDuration))return void v();De.hasTransitions=Oe.transitionDuration>0,De.hasAnimations=Oe.animationDuration>0}if(De.applyAnimationDelay&&(Pe="boolean"!=typeof V.delay&&N(V.delay)?parseFloat(V.delay):Pe,te=Math.max(Pe,0),Oe.animationDelay=Pe,Fe=A(Pe,!0),se.push(Fe),W.style[Fe[0]]=Fe[1]),ne=te*de,oe=ie*de,V.easing){var t,i=V.easing;De.hasTransitions&&(t=O+re,se.push([t,i]),W.style[t]=i),De.hasAnimations&&(t=D+re,se.push([t,i]),W.style[t]=i)}Oe.transitionDuration&&ce.push(P),Oe.animationDuration&&ce.push(F),ae=Date.now();var o=ne+he*oe,a=ae+o,s=e.data(pe)||[],u=!0;if(s.length){var c=s[0];u=a>c.expectedEndTime,u?l.cancel(c.timer):s.push(v)}if(u){var p=l(r,o,!1);s[0]={timer:p,expectedEndTime:a},s.push(v),e.data(pe,s)}ce.length&&e.on(ce.join(" "),B),V.to&&(V.cleanupStyles&&k(Q,W,Object.keys(V.to)),g(e,V))}}function r(){var t=e.data(pe);if(t){for(var r=1;r<t.length;r++)t[r]();e.removeData(pe)}}if(!X){if(!W.parentNode)return void v();var i=function(e){if(K)Y&&e&&(Y=!1,v());else if(Y=!e,Oe.animationDuration){var t=S(W,Y);Y?se.push(t):a(se,t)}},o=_e>0&&(Oe.transitionDuration&&0===Te.transitionDuration||Oe.animationDuration&&0===Te.animationDuration)&&Math.max(Te.animationDelay,Te.transitionDelay);o?l(t,Math.floor(o*_e*de),!1):t(),Z.resume=function(){i(!0)},Z.pause=function(){i(!1)}}}var V=r||{};V.$$prepared||(V=d(U(V)));var Q={},W=y(e);if(!W||!W.parentNode||!m.enabled())return I();var X,Y,K,J,Z,te,ne,ie,oe,ae,se=[],le=e.attr("class"),ue=i(V),ce=[];if(0===V.duration||!c.animations&&!c.transitions)return I();var ge=V.event&&z(V.event)?V.event.join(" "):V.event,me=ge&&V.structural,ye="",be="";me?ye=o(ge,G,!0):ge&&(ye=ge),V.addClass&&(be+=o(V.addClass,j)),V.removeClass&&(be.length&&(be+=" "),be+=o(V.removeClass,$)),V.applyClassesEarly&&be.length&&M(e,V);var Ee=[ye,be].join(" ").trim(),xe=le+" "+Ee,Se=o(Ee,"-active"),Ce=ue.to&&Object.keys(ue.to).length>0;if(!((V.keyframeStyle||"").length>0||Ce||Ee))return I();var we,Te;if(V.stagger>0){var Ae=parseFloat(V.stagger);Te={transitionDelay:Ae,animationDelay:Ae,transitionDuration:0,animationDuration:0}}else we=b(W,xe),Te=w(W,Ee,we,ve);V.$$skipPreparationClasses||n.addClass(e,Ee);var Ie;if(V.transitionStyle){var Le=[O,V.transitionStyle];C(W,Le),se.push(Le)}if(V.duration>=0){Ie=W.style[O].length>0;var Ne=R(V.duration,Ie);C(W,Ne),se.push(Ne)}if(V.keyframeStyle){var Re=[D,V.keyframeStyle];C(W,Re),se.push(Re)}var _e=Te?V.staggerIndex>=0?V.staggerIndex:t.count(we):0,ke=0===_e;ke&&!V.skipBlocking&&x(W,9999);var Oe=_(W,xe,we),Pe=Oe.maxDelay;te=Math.max(Pe,0),ie=Oe.maxDuration;var De={};if(De.hasTransitions=Oe.transitionDuration>0,De.hasAnimations=Oe.animationDuration>0,De.hasTransitionAll=De.hasTransitions&&"all"===Oe.transitionProperty,De.applyTransitionDuration=Ce&&(De.hasTransitions&&!De.hasTransitionAll||De.hasAnimations&&!De.hasTransitions),De.applyAnimationDuration=V.duration&&De.hasAnimations,De.applyTransitionDelay=N(V.delay)&&(De.applyTransitionDuration||De.hasTransitions),De.applyAnimationDelay=N(V.delay)&&De.hasAnimations,De.recalculateTimingStyles=be.length>0,(De.applyTransitionDuration||De.applyAnimationDuration)&&(ie=V.duration?parseFloat(V.duration):ie,De.applyTransitionDuration&&(De.hasTransitions=!0,Oe.transitionDuration=ie,Ie=W.style[O+"Property"].length>0,se.push(R(ie,Ie))),De.applyAnimationDuration&&(De.hasAnimations=!0,Oe.animationDuration=ie,se.push(T(ie)))),0===ie&&!De.recalculateTimingStyles)return I();if(null!=V.delay){var Fe;"boolean"!=typeof V.delay&&(Fe=parseFloat(V.delay),te=Math.max(Fe,0)),De.applyTransitionDelay&&se.push(A(Fe)),De.applyAnimationDelay&&se.push(A(Fe,!0))}return null==V.duration&&Oe.transitionDuration>0&&(De.recalculateTimingStyles=De.recalculateTimingStyles||ke),ne=te*de,oe=ie*de,V.skipBlocking||(De.blockTransition=Oe.transitionDuration>0,De.blockKeyframeAnimation=Oe.animationDuration>0&&Te.animationDelay>0&&0===Te.animationDuration),V.from&&(V.cleanupStyles&&k(Q,W,Object.keys(V.from)),h(e,V)),De.blockTransition||De.blockKeyframeAnimation?E(ie):V.skipBlocking||x(W,!1),{$$willAnimate:!0,end:u,start:function(){if(!X)return Z={end:u,cancel:p,resume:null,pause:null},J=new s(Z),L(H),J}}}}]}],ye=["$$animationProvider",function(e){function t(e){return e.parentNode&&11===e.parentNode.nodeType}e.drivers.push("$$animateCssDriver");var r="ng-animate-shim",n="ng-anchor-out";this.$get=["$animateCss","$rootScope","$$AnimateRunner","$rootElement","$sniffer","$$jqLite","$document",function(e,i,o,a,s,l,u){function c(e){return e.replace(/\bng-\S+\b/g,"")}function p(e,t){return K(e)&&(e=e.split(" ")),K(t)&&(t=t.split(" ")),e.filter(function(e){return-1===t.indexOf(e)}).join(" ")}function d(t,i,a){function s(e){var t={},r=y(e).getBoundingClientRect();return q(["width","height","top","left"],function(e){var n=r[e];switch(e){case"top":n+=g.scrollTop;break;case"left":n+=g.scrollLeft}t[e]=Math.floor(n)+"px"}),t}function l(e){return e.attr("class")||""}function u(){var t=c(l(a)),r=p(t,h),i=p(h,t),o=e(f,{to:s(a),addClass:"ng-anchor-in "+r,removeClass:n+" "+i,delay:!0});return o.$$willAnimate?o:null}function d(){f.remove(),i.removeClass(r),a.removeClass(r)}var f=Z(y(i).cloneNode(!0)),h=c(l(f));i.addClass(r),a.addClass(r),f.addClass("ng-anchor"),m.append(f);var v,b=function(){var t=e(f,{addClass:n,delay:!0,from:s(i)});return t.$$willAnimate?t:null}();if(!b&&!(v=u()))return d();var E=b||v;return{start:function(){function e(){r&&r.end()}var t,r=E.start();return r.done(function(){if(r=null,!v&&(v=u()))return r=v.start(),r.done(function(){r=null,d(),t.complete()}),r;d(),t.complete()}),t=new o({end:e,cancel:e})}}}function f(e,t,r,n){var i=h(e),a=h(t),s=[];if(q(n,function(e){var t=e.out,n=e.in,i=d(r,t,n);i&&s.push(i)}),i||a||0!==s.length)return{start:function(){function e(){q(t,function(e){e.end()})}var t=[];i&&t.push(i.start()),a&&t.push(a.start()),q(s,function(e){t.push(e.start())});var r=new o({end:e,cancel:e});return o.all(t,function(e){r.complete(e)}),r}}}function h(t){var r=t.element,n=t.options||{};t.structural&&(n.event=t.event,n.structural=!0,n.applyClassesEarly=!0,"leave"===t.event&&(n.onDone=n.domOperation)),n.preparationClasses&&(n.event=w(n.event,n.preparationClasses));var i=e(r,n);return i.$$willAnimate?i:null}if(!s.animations&&!s.transitions)return ee;var g=u[0].body,v=y(a),m=Z(t(v)||g.contains(v)?v:g);return function(e){return e.from&&e.to?f(e.from,e.to,e.classes,e.anchors):h(e)}}]}],be=["$animateProvider",function(e){this.$get=["$injector","$$AnimateRunner","$$jqLite",function(t,r,n){function i(r){r=z(r)?r:r.split(" ");for(var n=[],i={},o=0;o<r.length;o++){var a=r[o],s=e.$$registeredAnimations[a];s&&!i[a]&&(n.push(t.get(s)),i[a]=!0)}return n}var o=p(n);return function(e,t,n,a){function s(){a.domOperation(),o(e,a)}function l(){h=!0,s(),f(e,a)}function u(e,t,n,i,o){var a;switch(n){case"animate":a=[t,i.from,i.to,o];break;case"setClass":a=[t,m,y,o];break;case"addClass":a=[t,m,o];break;case"removeClass":a=[t,y,o];break;default:a=[t,o]}a.push(i);var s=e.apply(e,a);if(s)if(X(s.start)&&(s=s.start()),s instanceof r)s.done(o);else if(X(s))return s;return ee}function c(e,t,n,i,o){var a=[];return q(i,function(i){var s=i[o];s&&a.push(function(){var i,o,a=!1,l=function(e){a||(a=!0,(o||ee)(e),i.complete(!e))};return i=new r({end:function(){l()},cancel:function(){l(!0)}}),o=u(s,e,t,n,function(e){l(!1===e)}),i})}),a}function p(e,t,n,i,o){var a=c(e,t,n,i,o);if(0===a.length){var s,l;"beforeSetClass"===o?(s=c(e,"removeClass",n,i,"beforeRemoveClass"),l=c(e,"addClass",n,i,"beforeAddClass")):"setClass"===o&&(s=c(e,"removeClass",n,i,"removeClass"),l=c(e,"addClass",n,i,"addClass")),s&&(a=a.concat(s)),l&&(a=a.concat(l))}if(0!==a.length)return function(e){var t=[];return a.length&&q(a,function(e){t.push(e())}),t.length?r.all(t,e):e(),function(e){q(t,function(t){e?t.cancel():t.end()})}}}var h=!1;3===arguments.length&&Y(n)&&(a=n,n=null),a=d(a),n||(n=e.attr("class")||"",a.addClass&&(n+=" "+a.addClass),a.removeClass&&(n+=" "+a.removeClass));var g,v,m=a.addClass,y=a.removeClass,b=i(n);if(b.length){var E,x;"leave"===t?(x="leave",E="afterLeave"):(x="before"+t.charAt(0).toUpperCase()+t.substr(1),E=t),"enter"!==t&&"move"!==t&&(g=p(e,t,a,b,x)),v=p(e,t,a,b,E)}if(g||v){var S;return{$$willAnimate:!0,end:function(){return S?S.end():(l(),S=new r,S.complete(!0)),S},start:function(){function e(e){l(e),S.complete(e)}function t(t){h||((n||ee)(t),e(t))}if(S)return S;S=new r;var n,i=[];return g&&i.push(function(e){n=g(e)}),i.length?i.push(function(e){s(),e(!0)}):s(),v&&i.push(function(e){n=v(e)}),S.setHost({end:function(){t()},cancel:function(){t(!0)}}),r.chain(i,e),S}}}}}]}],Ee=["$$animationProvider",function(e){e.drivers.push("$$animateJsDriver"),this.$get=["$$animateJs","$$AnimateRunner",function(e,t){function r(t){var r=t.element,n=t.event,i=t.options,o=t.classes;return e(r,n,o,i)}return function(e){if(e.from&&e.to){var n=r(e.from),i=r(e.to);if(!n&&!i)return;return{start:function(){function e(){return function(){q(o,function(e){e.end()})}}function r(e){a.complete(e)}var o=[];n&&o.push(n.start()),i&&o.push(i.start()),t.all(o,r);var a=new t({end:e(),cancel:e()});return a}}}return r(e)}}]}],xe="data-ng-animate",Se="$ngAnimatePin",Ce=["$animateProvider",function(t){function n(e){if(!e)return null;var t=e.split(h),r=Object.create(null);return q(t,function(e){r[e]=!0}),r}function i(e,t){if(e&&t){var r=n(t);return e.split(h).some(function(e){return r[e]})}}function o(e,t,r){return g[e].some(function(e){return e(t,r)})}function a(e,t){var r=(e.addClass||"").length>0,n=(e.removeClass||"").length>0;return t?r&&n:r||n}var u=1,c=2,h=" ",g=this.rules={skip:[],cancel:[],join:[]};g.join.push(function(e,t){return!e.structural&&a(e)}),g.skip.push(function(e,t){return!e.structural&&!a(e)}),g.skip.push(function(e,t){return"leave"===t.event&&e.structural}),g.skip.push(function(e,t){return t.structural&&t.state===c&&!e.structural}),g.cancel.push(function(e,t){return t.structural&&e.structural}),g.cancel.push(function(e,t){return t.state===c&&e.structural}),g.cancel.push(function(e,t){if(t.structural)return!1;var r=e.addClass,n=e.removeClass,o=t.addClass,a=t.removeClass;return!(J(r)&&J(n)||J(o)&&J(a))&&(i(r,a)||i(n,o))}),this.$get=["$$rAF","$rootScope","$rootElement","$document","$$Map","$$animation","$$AnimateRunner","$templateRequest","$$jqLite","$$forceReflow","$$isDocumentHidden",function(n,i,h,g,m,x,S,C,w,T,A){function I(){var e=!1;return function(t){e?t():i.$$postDigest(function(){e=!0,t()})}}function L(e,t){return v(e,t,{})}function N(e,t,r){var n=[],i=X[r];return i&&q(i,function(i){ae.call(i.node,t)?n.push(i.callback):"leave"===r&&ae.call(i.node,e)&&n.push(i.callback)}),n}function R(e,t,r){var n=l(t);return e.filter(function(e){return!(e.node===n&&(!r||e.callback===r))})}function _(e,t){"close"!==e||t.parentNode||se.off(t)}function k(e,t,r){function l(e,t,r,i){T(function(){var e=N(C,m,t);e.length?n(function(){q(e,function(e){e(g,r,i)}),_(r,m)}):_(r,m)}),e.progress(t,r,i)}function p(e){E(g,h),oe(g,h),f(g,h),h.domOperation(),w.complete(!e)}var h=U(r),g=s(e),m=y(g),C=m&&m.parentNode;h=d(h);var w=new S,T=I();if(z(h.addClass)&&(h.addClass=h.addClass.join(" ")),h.addClass&&!K(h.addClass)&&(h.addClass=null),z(h.removeClass)&&(h.removeClass=h.removeClass.join(" ")),h.removeClass&&!K(h.removeClass)&&(h.removeClass=null),h.from&&!Y(h.from)&&(h.from=null),h.to&&!Y(h.to)&&(h.to=null),!(G&&m&&ne(m,t,r)&&ie(m,h)))return p(),w;var R=["enter","move","leave"].indexOf(t)>=0,k=A(),M=k||$.get(m),B=!M&&j.get(m)||{},H=!!B.state;if(M||H&&B.state===u||(M=!D(m,C,t)),M)return k&&l(w,t,"start"),p(),k&&l(w,t,"close"),w;R&&O(m);var V={structural:R,element:g,event:t,addClass:h.addClass,removeClass:h.removeClass,close:p,options:h,runner:w};if(H){if(o("skip",V,B))return B.state===c?(p(),w):(v(g,B,V),B.runner);if(o("cancel",V,B))if(B.state===c)B.runner.end();else{if(!B.structural)return v(g,B,V),B.runner;B.close()}else{if(o("join",V,B)){if(B.state!==c)return b(g,R?t:null,h),t=V.event=B.event,h=v(g,B,V),B.runner;L(g,V)}}}else L(g,V);var Q=V.structural;if(Q||(Q="animate"===V.event&&Object.keys(V.options.to||{}).length>0||a(V)),!Q)return p(),P(m),w;var W=(B.counter||0)+1;return V.counter=W,F(m,u,V),i.$$postDigest(function(){g=s(e);var r=j.get(m),n=!r;r=r||{};var i=g.parent()||[],o=i.length>0&&("animate"===r.event||r.structural||a(r));if(n||r.counter!==W||!o)return n&&(oe(g,h),f(g,h)),(n||R&&r.event!==t)&&(h.domOperation(),w.end()),void(o||P(m));t=!r.structural&&a(r,!0)?"setClass":r.event,F(m,c);var u=x(g,t,r.options);w.setHost(u),l(w,t,"start",{}),u.done(function(e){p(!e);var r=j.get(m);r&&r.counter===W&&P(m),l(w,t,"close",{})})}),w}function O(e){var t=e.querySelectorAll("["+xe+"]");q(t,function(e){var t=parseInt(e.getAttribute(xe),10),r=j.get(e);if(r)switch(t){case c:r.runner.end();case u:j.delete(e)}})}function P(e){e.removeAttribute(xe),j.delete(e)}function D(e,t,r){var n,i=g[0].body,o=y(h),a=e===i||"HTML"===e.nodeName,s=e===o,l=!1,u=$.get(e),c=Z.data(e,Se);for(c&&(t=y(c));t&&(s||(s=t===o),t.nodeType===M);){var p=j.get(t)||{};if(!l){var d=$.get(t);if(!0===d&&!1!==u){u=!0;break}!1===d&&(u=!1),l=p.structural}if(J(n)||!0===n){var f=Z.data(t,H);Q(f)&&(n=f)}if(l&&!1===n)break;if(a||(a=t===i),a&&s)break;t=s||!(c=Z.data(t,Se))?t.parentNode:y(c)}return(!l||n)&&!0!==u&&s&&a}function F(e,t,r){r=r||{},r.state=t,e.setAttribute(xe,t);var n=j.get(e),i=n?V(n,r):r;j.set(e,i)}var j=new m,$=new m,G=null,B=i.$watch(function(){return 0===C.totalPendingRequests},function(e){e&&(B(),i.$$postDigest(function(){i.$$postDigest(function(){null===G&&(G=!0)})}))}),X=Object.create(null),ee=t.customFilter(),te=t.classNameFilter(),re=function(){return!0},ne=ee||re,ie=te?function(e,t){var r=[e.getAttribute("class"),t.addClass,t.removeClass].join(" ");return te.test(r)}:re,oe=p(w),ae=e.Node.prototype.contains||function(e){return this===e||!!(16&this.compareDocumentPosition(e))},se={on:function(e,t,r){var n=l(t);X[e]=X[e]||[],X[e].push({node:n,callback:r}),Z(t).on("$destroy",function(){j.get(n)||se.off(e,t,r)})},off:function(e,t,r){if(1!==arguments.length||K(arguments[0])){var n=X[e];n&&(X[e]=1===arguments.length?null:R(n,t,r))}else{t=arguments[0];for(var i in X)X[i]=R(X[i],t)}},pin:function(e,t){r(W(e),"element","not an element"),r(W(t),"parentElement","not an element"),e.data(Se,t)},push:function(e,t,r,n){return r=r||{},r.domOperation=n,k(e,t,r)},enabled:function(e,t){var r=arguments.length;if(0===r)t=!!G;else{if(W(e)){var n=y(e);1===r?t=!$.get(n):$.set(n,!t)}else t=G=!!e}return t}};return se}]}],we=["$animateProvider",function(e){function t(e,t){e.data(s,t)}function r(e){e.removeData(s)}function i(e){return e.data(s)}var o="ng-animate-ref",a=this.drivers=[],s="$$animationRunner";this.$get=["$$jqLite","$rootScope","$injector","$$AnimateRunner","$$Map","$$rAFScheduler",function(e,s,l,u,c,h){function g(e){function t(e){if(e.processed)return e;e.processed=!0;var r=e.domNode,o=r.parentNode;i.set(r,e);for(var a;o;){if(a=i.get(o)){a.processed||(a=t(a));break}o=o.parentNode}return(a||n).children.push(e),e}var r,n={children:[]},i=new c;for(r=0;r<e.length;r++){var o=e[r];i.set(o.domNode,e[r]={domNode:o.domNode,fn:o.fn,children:[]})}for(r=0;r<e.length;r++)t(e[r]);return function(e){var t,r=[],n=[];for(t=0;t<e.children.length;t++)n.push(e.children[t]);var i=n.length,o=0,a=[];for(t=0;t<n.length;t++){var s=n[t];i<=0&&(i=o,o=0,r.push(a),a=[]),a.push(s.fn),s.children.forEach(function(e){o++,n.push(e)}),i--}return a.length&&r.push(a),r}(n)}var v=[],m=p(e);return function(c,p,b){function E(e){var t="["+o+"]",r=e.hasAttribute(o)?[e]:e.querySelectorAll(t),n=[];return q(r,function(e){var t=e.getAttribute(o);t&&t.length&&n.push(e)}),n}function x(e){var t=[],r={};q(e,function(e,n){var i=e.element,a=y(i),s=e.event,l=["enter","move"].indexOf(s)>=0,u=e.structural?E(a):[];if(u.length){var c=l?"to":"from";q(u,function(e){var t=e.getAttribute(o);r[t]=r[t]||{},r[t][c]={animationID:n,element:Z(e)}})}else t.push(e)});var n={},i={};return q(r,function(r,o){var a=r.from,s=r.to;if(!a||!s){var l=a?a.animationID:s.animationID,u=l.toString();return void(n[u]||(n[u]=!0,t.push(e[l])))}var c=e[a.animationID],p=e[s.animationID],d=a.animationID.toString();if(!i[d]){var f=i[d]={structural:!0,beforeStart:function(){c.beforeStart(),p.beforeStart()},close:function(){c.close(),p.close()},classes:S(c.classes,p.classes),from:c,to:p,anchors:[]};f.classes.length?t.push(f):(t.push(c),t.push(p))}i[d].anchors.push({out:a.element,in:s.element})}),t}function S(e,t){e=e.split(" "),t=t.split(" ");for(var r=[],n=0;n<e.length;n++){var i=e[n];if("ng-"!==i.substring(0,3))for(var o=0;o<t.length;o++)if(i===t[o]){r.push(i);break}}return r.join(" ")}function C(e){for(var t=a.length-1;t>=0;t--){var r=a[t],n=l.get(r),i=n(e);if(i)return i}}function w(){c.addClass(B),_&&e.addClass(c,_),k&&(e.removeClass(c,k),k=null)}function T(e,t){function r(e){var r=i(e);r&&r.setHost(t)}e.from&&e.to?(r(e.from.element),r(e.to.element)):r(e.element)}function A(){var e=i(c);!e||"leave"===p&&b.$$domOperationFired||e.end()}function I(t){c.off("$destroy",A),r(c),m(c,b),f(c,b),b.domOperation(),_&&e.removeClass(c,_),c.removeClass(B),N.complete(!t)}b=d(b);var L=["enter","move","leave"].indexOf(p)>=0,N=new u({end:function(){I()},cancel:function(){I(!0)}});if(!a.length)return I(),N;t(c,N);var R=n(c.attr("class"),n(b.addClass,b.removeClass)),_=b.tempClasses;_&&(R+=" "+_,b.tempClasses=null);var k;return L&&(k="ng-"+p+"-prepare",e.addClass(c,k)),v.push({element:c,classes:R,event:p,structural:L,options:b,beforeStart:w,close:I}),c.on("$destroy",A),v.length>1?N:(s.$$postDigest(function(){var e=[];q(v,function(t){i(t.element)?e.push(t):t.close()}),v.length=0;var t=x(e),r=[];q(t,function(e){r.push({domNode:y(e.from?e.from.element:e.element),fn:function(){e.beforeStart();var t,r=e.close;if(i(e.anchors?e.from.element||e.to.element:e.element)){var n=C(e);n&&(t=n.start)}if(t){var o=t();o.done(function(e){r(!e)}),T(e,o)}else r()}})}),h(g(r))}),N)}}]}],Te=["$animate","$rootScope",function(e,t){return{restrict:"A",transclude:"element",terminal:!0,priority:600,link:function(t,r,n,i,o){var a,s;t.$watchCollection(n.ngAnimateSwap||n.for,function(n){a&&e.leave(a),s&&(s.$destroy(),s=null),(n||0===n)&&(s=t.$new(),o(s,function(t){a=t,e.enter(t,null,r)}))})}}}];t.module("ngAnimate",[],function(){ee=t.noop,U=t.copy,V=t.extend,Z=t.element,q=t.forEach,z=t.isArray,K=t.isString,Y=t.isObject,J=t.isUndefined,Q=t.isDefined,X=t.isFunction,W=t.isElement}).info({angularVersion:"1.6.6"}).directive("ngAnimateSwap",Te).directive("ngAnimateChildren",ce).factory("$$rAFScheduler",ue).provider("$$animateQueue",Ce).provider("$$animation",we).provider("$animateCss",me).provider("$$animateCssDriver",ye).provider("$$animateJs",be).provider("$$animateJsDriver",Ee)}(window,window.angular)},function(e,t,r){r(359),e.exports="ui.bootstrap"},function(e,t){angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.collapse","ui.bootstrap.tabindex","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.isClass","ui.bootstrap.datepicker","ui.bootstrap.position","ui.bootstrap.datepickerPopup","ui.bootstrap.debounce","ui.bootstrap.multiMap","ui.bootstrap.dropdown","ui.bootstrap.stackedMap","ui.bootstrap.modal","ui.bootstrap.paging","ui.bootstrap.pager","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["uib/template/accordion/accordion-group.html","uib/template/accordion/accordion.html","uib/template/alert/alert.html","uib/template/carousel/carousel.html","uib/template/carousel/slide.html","uib/template/datepicker/datepicker.html","uib/template/datepicker/day.html","uib/template/datepicker/month.html","uib/template/datepicker/year.html","uib/template/datepickerPopup/popup.html","uib/template/modal/window.html","uib/template/pager/pager.html","uib/template/pagination/pagination.html","uib/template/tooltip/tooltip-html-popup.html","uib/template/tooltip/tooltip-popup.html","uib/template/tooltip/tooltip-template-popup.html","uib/template/popover/popover-html.html","uib/template/popover/popover-template.html","uib/template/popover/popover.html","uib/template/progressbar/bar.html","uib/template/progressbar/progress.html","uib/template/progressbar/progressbar.html","uib/template/rating/rating.html","uib/template/tabs/tab.html","uib/template/tabs/tabset.html","uib/template/timepicker/timepicker.html","uib/template/typeahead/typeahead-match.html","uib/template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.collapse",[]).directive("uibCollapse",["$animate","$q","$parse","$injector",function(e,t,r,n){var i=n.has("$animateCss")?n.get("$animateCss"):null;return{link:function(n,o,a){function s(e){return v?{width:e.scrollWidth+"px"}:{height:e.scrollHeight+"px"}}function l(){o.hasClass("collapse")&&o.hasClass("in")||t.resolve(d(n)).then(function(){o.removeClass("collapse").addClass("collapsing").attr("aria-expanded",!0).attr("aria-hidden",!1),i?i(o,{addClass:"in",easing:"ease",css:{overflow:"hidden"},to:s(o[0])}).start().finally(u):e.addClass(o,"in",{css:{overflow:"hidden"},to:s(o[0])}).then(u)},angular.noop)}function u(){o.removeClass("collapsing").addClass("collapse").css(m),f(n)}function c(){if(!o.hasClass("collapse")&&!o.hasClass("in"))return p();t.resolve(h(n)).then(function(){o.css(s(o[0])).removeClass("collapse").addClass("collapsing").attr("aria-expanded",!1).attr("aria-hidden",!0),i?i(o,{removeClass:"in",to:y}).start().finally(p):e.removeClass(o,"in",{to:y}).then(p)},angular.noop)}function p(){o.css(y),o.removeClass("collapsing").addClass("collapse"),g(n)}var d=r(a.expanding),f=r(a.expanded),h=r(a.collapsing),g=r(a.collapsed),v=!1,m={},y={};!function(){v=!!("horizontal"in a),v?(m={width:""},y={width:"0"}):(m={height:""},y={height:"0"}),n.$eval(a.uibCollapse)||o.addClass("in").addClass("collapse").attr("aria-expanded",!0).attr("aria-hidden",!1).css(m)}(),n.$watch(a.uibCollapse,function(e){e?c():l()})}}}]),angular.module("ui.bootstrap.tabindex",[]).directive("uibTabindexToggle",function(){return{restrict:"A",link:function(e,t,r){r.$observe("disabled",function(e){r.$set("tabindex",e?-1:null)})}}}),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse","ui.bootstrap.tabindex"]).constant("uibAccordionConfig",{closeOthers:!0}).controller("UibAccordionController",["$scope","$attrs","uibAccordionConfig",function(e,t,r){this.groups=[],this.closeOthers=function(n){(angular.isDefined(t.closeOthers)?e.$eval(t.closeOthers):r.closeOthers)&&angular.forEach(this.groups,function(e){e!==n&&(e.isOpen=!1)})},this.addGroup=function(e){var t=this;this.groups.push(e),e.$on("$destroy",function(r){t.removeGroup(e)})},this.removeGroup=function(e){var t=this.groups.indexOf(e);-1!==t&&this.groups.splice(t,1)}}]).directive("uibAccordion",function(){return{controller:"UibAccordionController",controllerAs:"accordion",transclude:!0,templateUrl:function(e,t){return t.templateUrl||"uib/template/accordion/accordion.html"}}}).directive("uibAccordionGroup",function(){return{require:"^uibAccordion",transclude:!0,restrict:"A",templateUrl:function(e,t){return t.templateUrl||"uib/template/accordion/accordion-group.html"},scope:{heading:"@",panelClass:"@?",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(e){this.heading=e}},link:function(e,t,r,n){t.addClass("panel"),n.addGroup(e),e.openClass=r.openClass||"panel-open",e.panelClass=r.panelClass||"panel-default",e.$watch("isOpen",function(r){t.toggleClass(e.openClass,!!r),r&&n.closeOthers(e)}),e.toggleOpen=function(t){e.isDisabled||t&&32!==t.which||(e.isOpen=!e.isOpen)};var i="accordiongroup-"+e.$id+"-"+Math.floor(1e4*Math.random());e.headingId=i+"-tab",e.panelId=i+"-panel"}}}).directive("uibAccordionHeading",function(){return{transclude:!0,template:"",replace:!0,require:"^uibAccordionGroup",link:function(e,t,r,n,i){n.setHeading(i(e,angular.noop))}}}).directive("uibAccordionTransclude",function(){return{require:"^uibAccordionGroup",link:function(e,t,r,n){e.$watch(function(){return n[r.uibAccordionTransclude]},function(e){if(e){var r=angular.element(t[0].querySelector("uib-accordion-header,data-uib-accordion-header,x-uib-accordion-header,uib\\:accordion-header,[uib-accordion-header],[data-uib-accordion-header],[x-uib-accordion-header]"));r.html(""),r.append(e)}})}}}),angular.module("ui.bootstrap.alert",[]).controller("UibAlertController",["$scope","$element","$attrs","$interpolate","$timeout",function(e,t,r,n,i){e.closeable=!!r.close,t.addClass("alert"),r.$set("role","alert"),e.closeable&&t.addClass("alert-dismissible");var o=angular.isDefined(r.dismissOnTimeout)?n(r.dismissOnTimeout)(e.$parent):null;o&&i(function(){e.close()},parseInt(o,10))}]).directive("uibAlert",function(){return{controller:"UibAlertController",controllerAs:"alert",restrict:"A",templateUrl:function(e,t){return t.templateUrl||"uib/template/alert/alert.html"},transclude:!0,scope:{close:"&"}}}),angular.module("ui.bootstrap.buttons",[]).constant("uibButtonConfig",{activeClass:"active",toggleEvent:"click"}).controller("UibButtonsController",["uibButtonConfig",function(e){this.activeClass=e.activeClass||"active",this.toggleEvent=e.toggleEvent||"click"}]).directive("uibBtnRadio",["$parse",function(e){return{require:["uibBtnRadio","ngModel"],controller:"UibButtonsController",controllerAs:"buttons",link:function(t,r,n,i){var o=i[0],a=i[1],s=e(n.uibUncheckable);r.find("input").css({display:"none"}),a.$render=function(){r.toggleClass(o.activeClass,angular.equals(a.$modelValue,t.$eval(n.uibBtnRadio)))},r.on(o.toggleEvent,function(){if(!n.disabled){var e=r.hasClass(o.activeClass);e&&!angular.isDefined(n.uncheckable)||t.$apply(function(){a.$setViewValue(e?null:t.$eval(n.uibBtnRadio)),a.$render()})}}),n.uibUncheckable&&t.$watch(s,function(e){n.$set("uncheckable",e?"":void 0)})}}}]).directive("uibBtnCheckbox",function(){return{require:["uibBtnCheckbox","ngModel"],controller:"UibButtonsController",controllerAs:"button",link:function(e,t,r,n){function i(){return a(r.btnCheckboxTrue,!0)}function o(){return a(r.btnCheckboxFalse,!1)}function a(t,r){return angular.isDefined(t)?e.$eval(t):r}var s=n[0],l=n[1];t.find("input").css({display:"none"}),l.$render=function(){t.toggleClass(s.activeClass,angular.equals(l.$modelValue,i()))},t.on(s.toggleEvent,function(){r.disabled||e.$apply(function(){l.$setViewValue(t.hasClass(s.activeClass)?o():i()),l.$render()})})}}}),angular.module("ui.bootstrap.carousel",[]).controller("UibCarouselController",["$scope","$element","$interval","$timeout","$animate",function(e,t,r,n,i){function o(e){for(var t=0;t<g.length;t++)g[t].slide.active=t===e}function a(r,n,a){if(!y){if(angular.extend(r,{direction:a}),angular.extend(g[m].slide||{},{direction:a}),i.enabled(t)&&!e.$currentTransition&&g[n].element&&h.slides.length>1){g[n].element.data(v,r.direction);var s=h.getCurrentIndex();angular.isNumber(s)&&g[s].element&&g[s].element.data(v,r.direction),e.$currentTransition=!0,i.on("addClass",g[n].element,function(t,r){"close"===r&&(e.$currentTransition=null,i.off("addClass",t))})}e.active=r.index,m=r.index,o(n),c()}}function s(e){for(var t=0;t<g.length;t++)if(g[t].slide===e)return t}function l(){d&&(r.cancel(d),d=null)}function u(t){t.length||(e.$currentTransition=null)}function c(){l();var t=+e.interval;!isNaN(t)&&t>0&&(d=r(p,t))}function p(){var t=+e.interval;f&&!isNaN(t)&&t>0&&g.length?e.next():e.pause()}var d,f,h=this,g=h.slides=e.slides=[],v="uib-slideDirection",m=e.active,y=!1;t.addClass("carousel"),h.addSlide=function(t,r){g.push({slide:t,element:r}),g.sort(function(e,t){return+e.slide.index-+t.slide.index}),(t.index===e.active||1===g.length&&!angular.isNumber(e.active))&&(e.$currentTransition&&(e.$currentTransition=null),m=t.index,e.active=t.index,o(m),h.select(g[s(t)]),1===g.length&&e.play())},h.getCurrentIndex=function(){for(var e=0;e<g.length;e++)if(g[e].slide.index===m)return e},h.next=e.next=function(){var t=(h.getCurrentIndex()+1)%g.length;return 0===t&&e.noWrap()?void e.pause():h.select(g[t],"next")},h.prev=e.prev=function(){var t=h.getCurrentIndex()-1<0?g.length-1:h.getCurrentIndex()-1;return e.noWrap()&&t===g.length-1?void e.pause():h.select(g[t],"prev")},h.removeSlide=function(t){var r=s(t);g.splice(r,1),g.length>0&&m===r?r>=g.length?(m=g.length-1,e.active=m,o(m),h.select(g[g.length-1])):(m=r,e.active=m,o(m),h.select(g[r])):m>r&&(m--,e.active=m),0===g.length&&(m=null,e.active=null)},h.select=e.select=function(t,r){var n=s(t.slide);void 0===r&&(r=n>h.getCurrentIndex()?"next":"prev"),t.slide.index===m||e.$currentTransition||a(t.slide,n,r)},e.indexOfSlide=function(e){return+e.slide.index},e.isActive=function(t){return e.active===t.slide.index},e.isPrevDisabled=function(){return 0===e.active&&e.noWrap()},e.isNextDisabled=function(){return e.active===g.length-1&&e.noWrap()},e.pause=function(){e.noPause||(f=!1,l())},e.play=function(){f||(f=!0,c())},t.on("mouseenter",e.pause),t.on("mouseleave",e.play),e.$on("$destroy",function(){y=!0,l()}),e.$watch("noTransition",function(e){i.enabled(t,!e)}),e.$watch("interval",c),e.$watchCollection("slides",u),e.$watch("active",function(e){if(angular.isNumber(e)&&m!==e){for(var t=0;t<g.length;t++)if(g[t].slide.index===e){e=t;break}g[e]&&(o(e),h.select(g[e]),m=e)}})}]).directive("uibCarousel",function(){return{transclude:!0,controller:"UibCarouselController",controllerAs:"carousel",restrict:"A",templateUrl:function(e,t){return t.templateUrl||"uib/template/carousel/carousel.html"},scope:{active:"=",interval:"=",noTransition:"=",noPause:"=",noWrap:"&"}}}).directive("uibSlide",["$animate",function(e){return{require:"^uibCarousel",restrict:"A",transclude:!0,templateUrl:function(e,t){return t.templateUrl||"uib/template/carousel/slide.html"},scope:{actual:"=?",index:"=?"},link:function(t,r,n,i){r.addClass("item"),i.addSlide(t,r),t.$on("$destroy",function(){i.removeSlide(t)}),t.$watch("active",function(t){e[t?"addClass":"removeClass"](r,"active")})}}}]).animation(".item",["$animateCss",function(e){function t(e,t,r){e.removeClass(t),r&&r()}return{beforeAddClass:function(r,n,i){if("active"===n){var o=!1,a=r.data("uib-slideDirection"),s="next"===a?"left":"right",l=t.bind(this,r,s+" "+a,i);return r.addClass(a),e(r,{addClass:s}).start().done(l),function(){o=!0}}i()},beforeRemoveClass:function(r,n,i){if("active"===n){var o=!1,a=r.data("uib-slideDirection"),s="next"===a?"left":"right",l=t.bind(this,r,s,i);return e(r,{addClass:s}).start().done(l),function(){o=!0}}i()}}}]),angular.module("ui.bootstrap.dateparser",[]).service("uibDateParser",["$log","$locale","dateFilter","orderByFilter","filterFilter",function(e,t,r,n,i){function o(e){return i(y,{key:e},!0)[0]}function a(e){var t=[],r=e.split(""),i=e.indexOf("'");if(i>-1){var o=!1;e=e.split("");for(var a=i;a<e.length;a++)o?("'"===e[a]&&(a+1<e.length&&"'"===e[a+1]?(e[a+1]="$",r[a+1]=""):(r[a]="",o=!1)),e[a]="$"):"'"===e[a]&&(e[a]="$",r[a]="",o=!0);e=e.join("")}return angular.forEach(y,function(n){var i=e.indexOf(n.key);if(i>-1){e=e.split(""),r[i]="("+n.regex+")",e[i]="$";for(var o=i+1,a=i+n.key.length;o<a;o++)r[o]="",e[o]="$";e=e.join(""),t.push({index:i,key:n.key,apply:n.apply,matcher:n.regex})}}),{regex:new RegExp("^"+r.join("")+"$"),map:n(t,"index")}}function s(e){for(var t,r,n=[],i=0;i<e.length;)if(angular.isNumber(r)){if("'"===e.charAt(i))(i+1>=e.length||"'"!==e.charAt(i+1))&&(n.push(l(e,r,i)),r=null);else if(i===e.length)for(;r<e.length;)t=u(e,r),n.push(t),r=t.endIdx;i++}else"'"!==e.charAt(i)?(t=u(e,i),n.push(t.parser),i=t.endIdx):(r=i,i++);return n}function l(e,t,r){return function(){return e.substr(t+1,r-t-1)}}function u(e,t){for(var r=e.substr(t),n=0;n<y.length;n++)if(new RegExp("^"+y[n].key).test(r)){var i=y[n];return{endIdx:t+i.key.length,parser:i.formatter}}return{endIdx:t+1,parser:function(){return r.charAt(0)}}}function c(e,t,r){return!(r<1)&&(1===t&&r>28?29===r&&(e%4==0&&e%100!=0||e%400==0):3!==t&&5!==t&&8!==t&&10!==t||r<31)}function p(e){return parseInt(e,10)}function d(e,t){return e&&t?v(e,t):e}function f(e,t){return e&&t?v(e,t,!0):e}function h(e,t){e=e.replace(/:/g,"");var r=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(r)?t:r}function g(e,t){return e=new Date(e.getTime()),e.setMinutes(e.getMinutes()+t),e}function v(e,t,r){r=r?-1:1;var n=e.getTimezoneOffset();return g(e,r*(h(t,n)-n))}var m,y,b=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;this.init=function(){m=t.id,this.parsers={},this.formatters={},y=[{key:"yyyy",regex:"\\d{4}",apply:function(e){this.year=+e},formatter:function(e){var t=new Date;return t.setFullYear(Math.abs(e.getFullYear())),r(t,"yyyy")}},{key:"yy",regex:"\\d{2}",apply:function(e){e=+e,this.year=e<69?e+2e3:e+1900},formatter:function(e){var t=new Date;return t.setFullYear(Math.abs(e.getFullYear())),r(t,"yy")}},{key:"y",regex:"\\d{1,4}",apply:function(e){this.year=+e},formatter:function(e){var t=new Date;return t.setFullYear(Math.abs(e.getFullYear())),r(t,"y")}},{key:"M!",regex:"0?[1-9]|1[0-2]",apply:function(e){this.month=e-1},formatter:function(e){return/^[0-9]$/.test(e.getMonth())?r(e,"MM"):r(e,"M")}},{key:"MMMM",regex:t.DATETIME_FORMATS.MONTH.join("|"),apply:function(e){this.month=t.DATETIME_FORMATS.MONTH.indexOf(e)},formatter:function(e){return r(e,"MMMM")}},{key:"MMM",regex:t.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(e){this.month=t.DATETIME_FORMATS.SHORTMONTH.indexOf(e)},formatter:function(e){return r(e,"MMM")}},{key:"MM",regex:"0[1-9]|1[0-2]",apply:function(e){this.month=e-1},formatter:function(e){return r(e,"MM")}},{key:"M",regex:"[1-9]|1[0-2]",apply:function(e){this.month=e-1},formatter:function(e){return r(e,"M")}},{key:"d!",regex:"[0-2]?[0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e},formatter:function(e){return/^[1-9]$/.test(e.getDate())?r(e,"dd"):r(e,"d")}},{key:"dd",regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e},formatter:function(e){return r(e,"dd")}},{key:"d",regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e},formatter:function(e){return r(e,"d")}},{key:"EEEE",regex:t.DATETIME_FORMATS.DAY.join("|"),formatter:function(e){return r(e,"EEEE")}},{key:"EEE",regex:t.DATETIME_FORMATS.SHORTDAY.join("|"),formatter:function(e){return r(e,"EEE")}},{key:"HH",regex:"(?:0|1)[0-9]|2[0-3]",apply:function(e){this.hours=+e},formatter:function(e){return r(e,"HH")}},{key:"hh",regex:"0[0-9]|1[0-2]",apply:function(e){this.hours=+e},formatter:function(e){return r(e,"hh")}},{key:"H",regex:"1?[0-9]|2[0-3]",apply:function(e){this.hours=+e},formatter:function(e){return r(e,"H")}},{key:"h",regex:"[0-9]|1[0-2]",apply:function(e){this.hours=+e},formatter:function(e){return r(e,"h")}},{key:"mm",regex:"[0-5][0-9]",apply:function(e){this.minutes=+e},formatter:function(e){return r(e,"mm")}},{key:"m",regex:"[0-9]|[1-5][0-9]",apply:function(e){this.minutes=+e},formatter:function(e){return r(e,"m")}},{key:"sss",regex:"[0-9][0-9][0-9]",apply:function(e){this.milliseconds=+e},formatter:function(e){return r(e,"sss")}},{key:"ss",regex:"[0-5][0-9]",apply:function(e){this.seconds=+e},formatter:function(e){return r(e,"ss")}},{key:"s",regex:"[0-9]|[1-5][0-9]",apply:function(e){this.seconds=+e},formatter:function(e){return r(e,"s")}},{key:"a",regex:t.DATETIME_FORMATS.AMPMS.join("|"),apply:function(e){12===this.hours&&(this.hours=0),"PM"===e&&(this.hours+=12)},formatter:function(e){return r(e,"a")}},{key:"Z",regex:"[+-]\\d{4}",apply:function(e){var t=e.match(/([+-])(\d{2})(\d{2})/),r=t[1],n=t[2],i=t[3];this.hours+=p(r+n),this.minutes+=p(r+i)},formatter:function(e){return r(e,"Z")}},{key:"ww",regex:"[0-4][0-9]|5[0-3]",formatter:function(e){return r(e,"ww")}},{key:"w",regex:"[0-9]|[1-4][0-9]|5[0-3]",formatter:function(e){return r(e,"w")}},{key:"GGGG",regex:t.DATETIME_FORMATS.ERANAMES.join("|").replace(/\s/g,"\\s"),formatter:function(e){return r(e,"GGGG")}},{key:"GGG",regex:t.DATETIME_FORMATS.ERAS.join("|"),formatter:function(e){return r(e,"GGG")}},{key:"GG",regex:t.DATETIME_FORMATS.ERAS.join("|"),formatter:function(e){return r(e,"GG")}},{key:"G",regex:t.DATETIME_FORMATS.ERAS.join("|"),formatter:function(e){return r(e,"G")}}],angular.version.major>=1&&angular.version.minor>4&&y.push({key:"LLLL",regex:t.DATETIME_FORMATS.STANDALONEMONTH.join("|"),apply:function(e){this.month=t.DATETIME_FORMATS.STANDALONEMONTH.indexOf(e)},formatter:function(e){return r(e,"LLLL")}})},this.init(),this.getParser=function(e){var t=o(e);return t&&t.apply||null},this.overrideParser=function(e,t){var r=o(e);r&&angular.isFunction(t)&&(this.parsers={},r.apply=t)}.bind(this),this.filter=function(e,r){return angular.isDate(e)&&!isNaN(e)&&r?(r=t.DATETIME_FORMATS[r]||r,t.id!==m&&this.init(),this.formatters[r]||(this.formatters[r]=s(r)),this.formatters[r].reduce(function(t,r){return t+r(e)},"")):""},this.parse=function(r,n,i){if(!angular.isString(r)||!n)return r;n=t.DATETIME_FORMATS[n]||n,n=n.replace(b,"\\$&"),t.id!==m&&this.init(),this.parsers[n]||(this.parsers[n]=a(n));var o=this.parsers[n],s=o.regex,l=o.map,u=r.match(s),p=!1;if(u&&u.length){var d,f;angular.isDate(i)&&!isNaN(i.getTime())?d={year:i.getFullYear(),month:i.getMonth(),date:i.getDate(),hours:i.getHours(),minutes:i.getMinutes(),seconds:i.getSeconds(),milliseconds:i.getMilliseconds()}:(i&&e.warn("dateparser:","baseDate is not a valid date"),d={year:1900,month:0,date:1,hours:0,minutes:0,seconds:0,milliseconds:0});for(var h=1,g=u.length;h<g;h++){var v=l[h-1];"Z"===v.matcher&&(p=!0),v.apply&&v.apply.call(d,u[h])}var y=p?Date.prototype.setUTCFullYear:Date.prototype.setFullYear,E=p?Date.prototype.setUTCHours:Date.prototype.setHours;return c(d.year,d.month,d.date)&&(!angular.isDate(i)||isNaN(i.getTime())||p?(f=new Date(0),y.call(f,d.year,d.month,d.date),E.call(f,d.hours||0,d.minutes||0,d.seconds||0,d.milliseconds||0)):(f=new Date(i),y.call(f,d.year,d.month,d.date),E.call(f,d.hours,d.minutes,d.seconds,d.milliseconds))),f}},this.toTimezone=d,this.fromTimezone=f,this.timezoneToOffset=h,this.addDateMinutes=g,this.convertTimezoneToLocal=v}]),angular.module("ui.bootstrap.isClass",[]).directive("uibIsClass",["$animate",function(e){var t=/^\s*([\s\S]+?)\s+on\s+([\s\S]+?)\s*$/,r=/^\s*([\s\S]+?)\s+for\s+([\s\S]+?)\s*$/;return{restrict:"A",compile:function(n,i){function o(e,t,r){l.push(e),u.push({scope:e,element:t}),h.forEach(function(t,r){a(t,e)}),e.$on("$destroy",s)}function a(t,n){var i=t.match(r),o=n.$eval(i[1]),a=i[2],s=c[t];if(!s){var l=function(t){var r=null;u.some(function(e){if(e.scope.$eval(d)===t)return r=e,!0}),s.lastActivated!==r&&(s.lastActivated&&e.removeClass(s.lastActivated.element,o),r&&e.addClass(r.element,o),s.lastActivated=r)};c[t]=s={lastActivated:null,scope:n,watchFn:l,compareWithExp:a,watcher:n.$watch(a,l)}}s.watchFn(n.$eval(a))}function s(e){var t=e.targetScope,r=l.indexOf(t);if(l.splice(r,1),u.splice(r,1),l.length){var n=l[0];angular.forEach(c,function(e){e.scope===t&&(e.watcher=n.$watch(e.compareWithExp,e.watchFn),e.scope=n)})}else c={}}var l=[],u=[],c={},p=i.uibIsClass.match(t),d=p[2],f=p[1],h=f.split(",");return o}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.isClass"]).value("$datepickerSuppressError",!1).value("$datepickerLiteralWarning",!0).constant("uibDatepickerConfig",{datepickerMode:"day",formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",maxDate:null,maxMode:"year",minDate:null,minMode:"day",monthColumns:3,ngModelOptions:{},shortcutPropagation:!1,showWeeks:!0,yearColumns:5,yearRows:4}).controller("UibDatepickerController",["$scope","$element","$attrs","$parse","$interpolate","$locale","$log","dateFilter","uibDatepickerConfig","$datepickerLiteralWarning","$datepickerSuppressError","uibDateParser",function(e,t,r,n,i,o,a,s,l,u,c,p){function d(t){e.datepickerMode=t,e.datepickerOptions.datepickerMode=t}function f(t){var r;if(angular.version.minor<6)r=t.$options||e.datepickerOptions.ngModelOptions||l.ngModelOptions||{},r.getOption=function(e){return r[e]};else{var n=t.$options.getOption("timezone")||(e.datepickerOptions.ngModelOptions?e.datepickerOptions.ngModelOptions.timezone:null)||(l.ngModelOptions?l.ngModelOptions.timezone:null);r=t.$options.createChild(l.ngModelOptions).createChild(e.datepickerOptions.ngModelOptions).createChild(t.$options).createChild({timezone:n})}return r}var h=this,g={$setViewValue:angular.noop},v={},m=[];t.addClass("uib-datepicker"),r.$set("role","application"),e.datepickerOptions||(e.datepickerOptions={}),this.modes=["day","month","year"],["customClass","dateDisabled","datepickerMode","formatDay","formatDayHeader","formatDayTitle","formatMonth","formatMonthTitle","formatYear","maxDate","maxMode","minDate","minMode","monthColumns","showWeeks","shortcutPropagation","startingDay","yearColumns","yearRows"].forEach(function(t){switch(t){case"customClass":case"dateDisabled":e[t]=e.datepickerOptions[t]||angular.noop;break;case"datepickerMode":e.datepickerMode=angular.isDefined(e.datepickerOptions.datepickerMode)?e.datepickerOptions.datepickerMode:l.datepickerMode;break;case"formatDay":case"formatDayHeader":case"formatDayTitle":case"formatMonth":case"formatMonthTitle":case"formatYear":h[t]=angular.isDefined(e.datepickerOptions[t])?i(e.datepickerOptions[t])(e.$parent):l[t];break;case"monthColumns":case"showWeeks":case"shortcutPropagation":case"yearColumns":case"yearRows":h[t]=angular.isDefined(e.datepickerOptions[t])?e.datepickerOptions[t]:l[t];break;case"startingDay":angular.isDefined(e.datepickerOptions.startingDay)?h.startingDay=e.datepickerOptions.startingDay:angular.isNumber(l.startingDay)?h.startingDay=l.startingDay:h.startingDay=(o.DATETIME_FORMATS.FIRSTDAYOFWEEK+8)%7;break;case"maxDate":case"minDate":e.$watch("datepickerOptions."+t,function(e){e?angular.isDate(e)?h[t]=p.fromTimezone(new Date(e),v.getOption("timezone")):(u&&a.warn("Literal date support has been deprecated, please switch to date object usage"),h[t]=new Date(s(e,"medium"))):h[t]=l[t]?p.fromTimezone(new Date(l[t]),v.getOption("timezone")):null,h.refreshView()});break;case"maxMode":case"minMode":e.datepickerOptions[t]?e.$watch(function(){return e.datepickerOptions[t]},function(r){h[t]=e[t]=angular.isDefined(r)?r:e.datepickerOptions[t],("minMode"===t&&h.modes.indexOf(e.datepickerOptions.datepickerMode)<h.modes.indexOf(h[t])||"maxMode"===t&&h.modes.indexOf(e.datepickerOptions.datepickerMode)>h.modes.indexOf(h[t]))&&(e.datepickerMode=h[t],e.datepickerOptions.datepickerMode=h[t])}):h[t]=e[t]=l[t]||null}}),e.uniqueId="datepicker-"+e.$id+"-"+Math.floor(1e4*Math.random()),e.disabled=angular.isDefined(r.disabled)||!1,angular.isDefined(r.ngDisabled)&&m.push(e.$parent.$watch(r.ngDisabled,function(t){e.disabled=t,h.refreshView()})),e.isActive=function(t){return 0===h.compare(t.date,h.activeDate)&&(e.activeDateId=t.uid,!0)},this.init=function(t){g=t,v=f(g),e.datepickerOptions.initDate?(h.activeDate=p.fromTimezone(e.datepickerOptions.initDate,v.getOption("timezone"))||new Date,e.$watch("datepickerOptions.initDate",function(e){e&&(g.$isEmpty(g.$modelValue)||g.$invalid)&&(h.activeDate=p.fromTimezone(e,v.getOption("timezone")),h.refreshView())})):h.activeDate=new Date;var r=g.$modelValue?new Date(g.$modelValue):new Date;this.activeDate=isNaN(r)?p.fromTimezone(new Date,v.getOption("timezone")):p.fromTimezone(r,v.getOption("timezone")),g.$render=function(){h.render()}},this.render=function(){if(g.$viewValue){var e=new Date(g.$viewValue);!isNaN(e)?this.activeDate=p.fromTimezone(e,v.getOption("timezone")):c||a.error('Datepicker directive: "ng-model" value must be a Date object')}this.refreshView()},this.refreshView=function(){if(this.element){e.selectedDt=null,this._refreshView(),e.activeDt&&(e.activeDateId=e.activeDt.uid);var t=g.$viewValue?new Date(g.$viewValue):null;t=p.fromTimezone(t,v.getOption("timezone")),g.$setValidity("dateDisabled",!t||this.element&&!this.isDisabled(t))}},this.createDateObject=function(t,r){var n=g.$viewValue?new Date(g.$viewValue):null;n=p.fromTimezone(n,v.getOption("timezone"));var i=new Date;i=p.fromTimezone(i,v.getOption("timezone"));var o=this.compare(t,i),a={date:t,label:p.filter(t,r),selected:n&&0===this.compare(t,n),disabled:this.isDisabled(t),past:o<0,current:0===o,future:o>0,customClass:this.customClass(t)||null};return n&&0===this.compare(t,n)&&(e.selectedDt=a),h.activeDate&&0===this.compare(a.date,h.activeDate)&&(e.activeDt=a),a},this.isDisabled=function(t){return e.disabled||this.minDate&&this.compare(t,this.minDate)<0||this.maxDate&&this.compare(t,this.maxDate)>0||e.dateDisabled&&e.dateDisabled({date:t,mode:e.datepickerMode})},this.customClass=function(t){return e.customClass({date:t,mode:e.datepickerMode})},this.split=function(e,t){for(var r=[];e.length>0;)r.push(e.splice(0,t));return r},e.select=function(t){if(e.datepickerMode===h.minMode){var r=g.$viewValue?p.fromTimezone(new Date(g.$viewValue),v.getOption("timezone")):new Date(0,0,0,0,0,0,0);r.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),r=p.toTimezone(r,v.getOption("timezone")),g.$setViewValue(r),g.$render()}else h.activeDate=t,d(h.modes[h.modes.indexOf(e.datepickerMode)-1]),e.$emit("uib:datepicker.mode");e.$broadcast("uib:datepicker.focus")},e.move=function(e){var t=h.activeDate.getFullYear()+e*(h.step.years||0),r=h.activeDate.getMonth()+e*(h.step.months||0);h.activeDate.setFullYear(t,r,1),h.refreshView()},e.toggleMode=function(t){t=t||1,e.datepickerMode===h.maxMode&&1===t||e.datepickerMode===h.minMode&&-1===t||(d(h.modes[h.modes.indexOf(e.datepickerMode)+t]),e.$emit("uib:datepicker.mode"))},e.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var y=function(){h.element[0].focus()};e.$on("uib:datepicker.focus",y),e.keydown=function(t){var r=e.keys[t.which];if(r&&!t.shiftKey&&!t.altKey&&!e.disabled)if(t.preventDefault(),h.shortcutPropagation||t.stopPropagation(),"enter"===r||"space"===r){if(h.isDisabled(h.activeDate))return;e.select(h.activeDate)}else!t.ctrlKey||"up"!==r&&"down"!==r?(h.handleKeyDown(r,t),h.refreshView()):e.toggleMode("up"===r?1:-1)},t.on("keydown",function(t){e.$apply(function(){e.keydown(t)})}),e.$on("$destroy",function(){for(;m.length;)m.shift()()})}]).controller("UibDaypickerController",["$scope","$element","dateFilter",function(e,t,r){function n(e,t){return 1!==t||e%4!=0||e%100==0&&e%400!=0?o[t]:29}function i(e){var t=new Date(e);t.setDate(t.getDate()+4-(t.getDay()||7));var r=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((r-t)/864e5)/7)+1}var o=[31,28,31,30,31,30,31,31,30,31,30,31];this.step={months:1},this.element=t,this.init=function(t){angular.extend(t,this),e.showWeeks=t.showWeeks,t.refreshView()},this.getDates=function(e,t){for(var r,n=new Array(t),i=new Date(e),o=0;o<t;)r=new Date(i),n[o++]=r,i.setDate(i.getDate()+1);return n},this._refreshView=function(){var t=this.activeDate.getFullYear(),n=this.activeDate.getMonth(),o=new Date(this.activeDate);o.setFullYear(t,n,1);var a=this.startingDay-o.getDay(),s=a>0?7-a:-a,l=new Date(o);s>0&&l.setDate(1-s);for(var u=this.getDates(l,42),c=0;c<42;c++)u[c]=angular.extend(this.createDateObject(u[c],this.formatDay),{secondary:u[c].getMonth()!==n,uid:e.uniqueId+"-"+c});e.labels=new Array(7);for(var p=0;p<7;p++)e.labels[p]={abbr:r(u[p].date,this.formatDayHeader),full:r(u[p].date,"EEEE")};if(e.title=r(this.activeDate,this.formatDayTitle),e.rows=this.split(u,7),e.showWeeks){e.weekNumbers=[];for(var d=(11-this.startingDay)%7,f=e.rows.length,h=0;h<f;h++)e.weekNumbers.push(i(e.rows[h][d].date))}},this.compare=function(e,t){var r=new Date(e.getFullYear(),e.getMonth(),e.getDate()),n=new Date(t.getFullYear(),t.getMonth(),t.getDate());return r.setFullYear(e.getFullYear()),n.setFullYear(t.getFullYear()),r-n},this.handleKeyDown=function(e,t){var r=this.activeDate.getDate();if("left"===e)r-=1;else if("up"===e)r-=7;else if("right"===e)r+=1;else if("down"===e)r+=7;else if("pageup"===e||"pagedown"===e){var i=this.activeDate.getMonth()+("pageup"===e?-1:1);this.activeDate.setMonth(i,1),r=Math.min(n(this.activeDate.getFullYear(),this.activeDate.getMonth()),r)}else"home"===e?r=1:"end"===e&&(r=n(this.activeDate.getFullYear(),this.activeDate.getMonth()));this.activeDate.setDate(r)}}]).controller("UibMonthpickerController",["$scope","$element","dateFilter",function(e,t,r){this.step={years:1},this.element=t,this.init=function(e){angular.extend(e,this),e.refreshView()},this._refreshView=function(){for(var t,n=new Array(12),i=this.activeDate.getFullYear(),o=0;o<12;o++)t=new Date(this.activeDate),t.setFullYear(i,o,1),n[o]=angular.extend(this.createDateObject(t,this.formatMonth),{uid:e.uniqueId+"-"+o});e.title=r(this.activeDate,this.formatMonthTitle),e.rows=this.split(n,this.monthColumns),e.yearHeaderColspan=this.monthColumns>3?this.monthColumns-2:1},this.compare=function(e,t){var r=new Date(e.getFullYear(),e.getMonth()),n=new Date(t.getFullYear(),t.getMonth());return r.setFullYear(e.getFullYear()),n.setFullYear(t.getFullYear()),r-n},this.handleKeyDown=function(e,t){var r=this.activeDate.getMonth();if("left"===e)r-=1;else if("up"===e)r-=this.monthColumns;else if("right"===e)r+=1;else if("down"===e)r+=this.monthColumns;else if("pageup"===e||"pagedown"===e){var n=this.activeDate.getFullYear()+("pageup"===e?-1:1);this.activeDate.setFullYear(n)}else"home"===e?r=0:"end"===e&&(r=11);this.activeDate.setMonth(r)}}]).controller("UibYearpickerController",["$scope","$element","dateFilter",function(e,t,r){function n(e){return parseInt((e-1)/o,10)*o+1}var i,o;this.element=t,this.yearpickerInit=function(){i=this.yearColumns,o=this.yearRows*i,this.step={years:o}},this._refreshView=function(){for(var t,r=new Array(o),a=0,s=n(this.activeDate.getFullYear());a<o;a++)t=new Date(this.activeDate),t.setFullYear(s+a,0,1),r[a]=angular.extend(this.createDateObject(t,this.formatYear),{uid:e.uniqueId+"-"+a});e.title=[r[0].label,r[o-1].label].join(" - "),e.rows=this.split(r,i),e.columns=i},this.compare=function(e,t){return e.getFullYear()-t.getFullYear()},this.handleKeyDown=function(e,t){var r=this.activeDate.getFullYear();"left"===e?r-=1:"up"===e?r-=i:"right"===e?r+=1:"down"===e?r+=i:"pageup"===e||"pagedown"===e?r+=("pageup"===e?-1:1)*o:"home"===e?r=n(this.activeDate.getFullYear()):"end"===e&&(r=n(this.activeDate.getFullYear())+o-1),this.activeDate.setFullYear(r)}}]).directive("uibDatepicker",function(){return{templateUrl:function(e,t){return t.templateUrl||"uib/template/datepicker/datepicker.html"},scope:{datepickerOptions:"=?"},require:["uibDatepicker","^ngModel"],restrict:"A",controller:"UibDatepickerController",controllerAs:"datepicker",link:function(e,t,r,n){var i=n[0],o=n[1];i.init(o)}}}).directive("uibDaypicker",function(){return{templateUrl:function(e,t){return t.templateUrl||"uib/template/datepicker/day.html"},require:["^uibDatepicker","uibDaypicker"],restrict:"A",controller:"UibDaypickerController",link:function(e,t,r,n){var i=n[0];n[1].init(i)}}}).directive("uibMonthpicker",function(){return{templateUrl:function(e,t){return t.templateUrl||"uib/template/datepicker/month.html"},require:["^uibDatepicker","uibMonthpicker"],restrict:"A",controller:"UibMonthpickerController",link:function(e,t,r,n){var i=n[0];n[1].init(i)}}}).directive("uibYearpicker",function(){return{templateUrl:function(e,t){return t.templateUrl||"uib/template/datepicker/year.html"},require:["^uibDatepicker","uibYearpicker"],restrict:"A",controller:"UibYearpickerController",link:function(e,t,r,n){var i=n[0];angular.extend(i,n[1]),i.yearpickerInit(),i.refreshView()}}}),angular.module("ui.bootstrap.position",[]).factory("$uibPosition",["$document","$window",function(e,t){var r,n,i={normal:/(auto|scroll)/,hidden:/(auto|scroll|hidden)/},o={auto:/\s?auto?\s?/i,primary:/^(top|bottom|left|right)$/,secondary:/^(top|bottom|left|right|center)$/,vertical:/^(top|bottom)$/},a=/(HTML|BODY)/;return{getRawNode:function(e){return e.nodeName?e:e[0]||e},parseStyle:function(e){return e=parseFloat(e),isFinite(e)?e:0},offsetParent:function(r){r=this.getRawNode(r);for(var n=r.offsetParent||e[0].documentElement;n&&n!==e[0].documentElement&&function(e){return"static"===(t.getComputedStyle(e).position||"static")}(n);)n=n.offsetParent;return n||e[0].documentElement},scrollbarWidth:function(i){if(i){if(angular.isUndefined(n)){var o=e.find("body");o.addClass("uib-position-body-scrollbar-measure"),n=t.innerWidth-o[0].clientWidth,n=isFinite(n)?n:0,o.removeClass("uib-position-body-scrollbar-measure")}return n}if(angular.isUndefined(r)){var a=angular.element('<div class="uib-position-scrollbar-measure"></div>');e.find("body").append(a),r=a[0].offsetWidth-a[0].clientWidth,r=isFinite(r)?r:0,a.remove()}return r},scrollbarPadding:function(e){e=this.getRawNode(e);var r=t.getComputedStyle(e),n=this.parseStyle(r.paddingRight),i=this.parseStyle(r.paddingBottom),o=this.scrollParent(e,!1,!0),s=this.scrollbarWidth(a.test(o.tagName));return{scrollbarWidth:s,widthOverflow:o.scrollWidth>o.clientWidth,right:n+s,originalRight:n,heightOverflow:o.scrollHeight>o.clientHeight,bottom:i+s,originalBottom:i}},isScrollable:function(e,r){e=this.getRawNode(e);var n=r?i.hidden:i.normal,o=t.getComputedStyle(e);return n.test(o.overflow+o.overflowY+o.overflowX)},scrollParent:function(r,n,o){r=this.getRawNode(r);var a=n?i.hidden:i.normal,s=e[0].documentElement,l=t.getComputedStyle(r);if(o&&a.test(l.overflow+l.overflowY+l.overflowX))return r;var u="absolute"===l.position,c=r.parentElement||s;if(c===s||"fixed"===l.position)return s;for(;c.parentElement&&c!==s;){var p=t.getComputedStyle(c);if(u&&"static"!==p.position&&(u=!1),!u&&a.test(p.overflow+p.overflowY+p.overflowX))break;c=c.parentElement}return c},position:function(r,n){r=this.getRawNode(r);var i=this.offset(r);if(n){var o=t.getComputedStyle(r);i.top-=this.parseStyle(o.marginTop),i.left-=this.parseStyle(o.marginLeft)}var a=this.offsetParent(r),s={top:0,left:0};return a!==e[0].documentElement&&(s=this.offset(a),s.top+=a.clientTop-a.scrollTop,s.left+=a.clientLeft-a.scrollLeft),{width:Math.round(angular.isNumber(i.width)?i.width:r.offsetWidth),height:Math.round(angular.isNumber(i.height)?i.height:r.offsetHeight),top:Math.round(i.top-s.top),left:Math.round(i.left-s.left)}},offset:function(r){r=this.getRawNode(r);var n=r.getBoundingClientRect();return{width:Math.round(angular.isNumber(n.width)?n.width:r.offsetWidth),height:Math.round(angular.isNumber(n.height)?n.height:r.offsetHeight),top:Math.round(n.top+(t.pageYOffset||e[0].documentElement.scrollTop)),left:Math.round(n.left+(t.pageXOffset||e[0].documentElement.scrollLeft))}},viewportOffset:function(r,n,i){r=this.getRawNode(r),i=!1!==i;var o=r.getBoundingClientRect(),a={top:0,left:0,bottom:0,right:0},s=n?e[0].documentElement:this.scrollParent(r),l=s.getBoundingClientRect();if(a.top=l.top+s.clientTop,a.left=l.left+s.clientLeft,s===e[0].documentElement&&(a.top+=t.pageYOffset,a.left+=t.pageXOffset),a.bottom=a.top+s.clientHeight,a.right=a.left+s.clientWidth,i){var u=t.getComputedStyle(s);a.top+=this.parseStyle(u.paddingTop),a.bottom-=this.parseStyle(u.paddingBottom),a.left+=this.parseStyle(u.paddingLeft),a.right-=this.parseStyle(u.paddingRight)}return{top:Math.round(o.top-a.top),bottom:Math.round(a.bottom-o.bottom),left:Math.round(o.left-a.left),right:Math.round(a.right-o.right)}},parsePlacement:function(e){var t=o.auto.test(e);return t&&(e=e.replace(o.auto,"")),e=e.split("-"),e[0]=e[0]||"top",o.primary.test(e[0])||(e[0]="top"),e[1]=e[1]||"center",o.secondary.test(e[1])||(e[1]="center"),e[2]=!!t,e},positionElements:function(e,r,n,i){e=this.getRawNode(e),r=this.getRawNode(r);var a=angular.isDefined(r.offsetWidth)?r.offsetWidth:r.prop("offsetWidth"),s=angular.isDefined(r.offsetHeight)?r.offsetHeight:r.prop("offsetHeight");n=this.parsePlacement(n);var l=i?this.offset(e):this.position(e),u={top:0,left:0,placement:""};if(n[2]){var c=this.viewportOffset(e,i),p=t.getComputedStyle(r),d={width:a+Math.round(Math.abs(this.parseStyle(p.marginLeft)+this.parseStyle(p.marginRight))),height:s+Math.round(Math.abs(this.parseStyle(p.marginTop)+this.parseStyle(p.marginBottom)))};if(n[0]="top"===n[0]&&d.height>c.top&&d.height<=c.bottom?"bottom":"bottom"===n[0]&&d.height>c.bottom&&d.height<=c.top?"top":"left"===n[0]&&d.width>c.left&&d.width<=c.right?"right":"right"===n[0]&&d.width>c.right&&d.width<=c.left?"left":n[0],n[1]="top"===n[1]&&d.height-l.height>c.bottom&&d.height-l.height<=c.top?"bottom":"bottom"===n[1]&&d.height-l.height>c.top&&d.height-l.height<=c.bottom?"top":"left"===n[1]&&d.width-l.width>c.right&&d.width-l.width<=c.left?"right":"right"===n[1]&&d.width-l.width>c.left&&d.width-l.width<=c.right?"left":n[1],"center"===n[1])if(o.vertical.test(n[0])){var f=l.width/2-a/2;c.left+f<0&&d.width-l.width<=c.right?n[1]="left":c.right+f<0&&d.width-l.width<=c.left&&(n[1]="right")}else{var h=l.height/2-d.height/2;c.top+h<0&&d.height-l.height<=c.bottom?n[1]="top":c.bottom+h<0&&d.height-l.height<=c.top&&(n[1]="bottom")}}switch(n[0]){case"top":u.top=l.top-s;break;case"bottom":u.top=l.top+l.height;break;case"left":u.left=l.left-a;break;case"right":u.left=l.left+l.width}switch(n[1]){case"top":u.top=l.top;break;case"bottom":u.top=l.top+l.height-s;break;case"left":u.left=l.left;break;case"right":u.left=l.left+l.width-a;break;case"center":o.vertical.test(n[0])?u.left=l.left+l.width/2-a/2:u.top=l.top+l.height/2-s/2}return u.top=Math.round(u.top),u.left=Math.round(u.left),u.placement="center"===n[1]?n[0]:n[0]+"-"+n[1],u},adjustTop:function(e,t,r,n){if(-1!==e.indexOf("top")&&r!==n)return{top:t.top-n+"px"}},positionArrow:function(e,r){e=this.getRawNode(e);var n=e.querySelector(".tooltip-inner, .popover-inner");if(n){var i=angular.element(n).hasClass("tooltip-inner"),a=i?e.querySelector(".tooltip-arrow"):e.querySelector(".arrow");if(a){var s={top:"",bottom:"",left:"",right:""};if(r=this.parsePlacement(r),"center"===r[1])return void angular.element(a).css(s);var l="border-"+r[0]+"-width",u=t.getComputedStyle(a)[l],c="border-";o.vertical.test(r[0])?c+=r[0]+"-"+r[1]:c+=r[1]+"-"+r[0],c+="-radius";var p=t.getComputedStyle(i?n:e)[c];switch(r[0]){case"top":s.bottom=i?"0":"-"+u;break;case"bottom":s.top=i?"0":"-"+u;break;case"left":s.right=i?"0":"-"+u;break;case"right":s.left=i?"0":"-"+u}s[r[1]]=p,angular.element(a).css(s)}}}}}]),angular.module("ui.bootstrap.datepickerPopup",["ui.bootstrap.datepicker","ui.bootstrap.position"]).value("$datepickerPopupLiteralWarning",!0).constant("uibDatepickerPopupConfig",{altInputFormats:[],appendToBody:!1,clearText:"Clear",closeOnDateSelection:!0,closeText:"Done",currentText:"Today",datepickerPopup:"yyyy-MM-dd",datepickerPopupTemplateUrl:"uib/template/datepickerPopup/popup.html",datepickerTemplateUrl:"uib/template/datepicker/datepicker.html",html5Types:{date:"yyyy-MM-dd","datetime-local":"yyyy-MM-ddTHH:mm:ss.sss",month:"yyyy-MM"},onOpenFocus:!0,showButtonBar:!0,placement:"auto bottom-left"}).controller("UibDatepickerPopupController",["$scope","$element","$attrs","$compile","$log","$parse","$window","$document","$rootScope","$uibPosition","dateFilter","uibDateParser","uibDatepickerPopupConfig","$timeout","uibDatepickerConfig","$datepickerPopupLiteralWarning",function(e,t,r,n,i,o,a,s,l,u,c,p,d,f,h,g){function v(t){var r=p.parse(t,C,e.date);if(isNaN(r))for(var n=0;n<D.length;n++)if(r=p.parse(t,D[n],e.date),!isNaN(r))return r;return r}function m(e){if(angular.isNumber(e)&&(e=new Date(e)),!e)return null;if(angular.isDate(e)&&!isNaN(e))return e;if(angular.isString(e)){var t=v(e);if(!isNaN(t))return p.toTimezone(t,O.getOption("timezone"))}return O.getOption("allowInvalid")?e:void 0}function y(e,t){var n=e||t;return!r.ngRequired&&!n||(angular.isNumber(n)&&(n=new Date(n)),!n||(!(!angular.isDate(n)||isNaN(n))||!!angular.isString(n)&&!isNaN(v(n))))}function b(r){if(e.isOpen||!e.disabled){var n=P[0],i=t[0].contains(r.target),o=void 0!==n.contains&&n.contains(r.target);!e.isOpen||i||o||e.$apply(function(){e.isOpen=!1})}}function E(r){27===r.which&&e.isOpen?(r.preventDefault(),r.stopPropagation(),e.$apply(function(){e.isOpen=!1}),t[0].focus()):40!==r.which||e.isOpen||(r.preventDefault(),r.stopPropagation(),e.$apply(function(){e.isOpen=!0}))}function x(){if(e.isOpen){var n=angular.element(P[0].querySelector(".uib-datepicker-popup")),i=r.popupPlacement?r.popupPlacement:d.placement,o=u.positionElements(t,n,i,T);n.css({top:o.top+"px",left:o.left+"px"}),n.hasClass("uib-position-measure")&&n.removeClass("uib-position-measure")}}function S(e){var t;return angular.version.minor<6?(t=angular.isObject(e.$options)?e.$options:{timezone:null},t.getOption=function(e){return t[e]}):t=e.$options,t}var C,w,T,A,I,L,N,R,_,k,O,P,D,F=!1,M=[];this.init=function(i){if(k=i,O=S(k),w=angular.isDefined(r.closeOnDateSelection)?e.$parent.$eval(r.closeOnDateSelection):d.closeOnDateSelection,T=angular.isDefined(r.datepickerAppendToBody)?e.$parent.$eval(r.datepickerAppendToBody):d.appendToBody,A=angular.isDefined(r.onOpenFocus)?e.$parent.$eval(r.onOpenFocus):d.onOpenFocus,I=angular.isDefined(r.datepickerPopupTemplateUrl)?r.datepickerPopupTemplateUrl:d.datepickerPopupTemplateUrl,L=angular.isDefined(r.datepickerTemplateUrl)?r.datepickerTemplateUrl:d.datepickerTemplateUrl,D=angular.isDefined(r.altInputFormats)?e.$parent.$eval(r.altInputFormats):d.altInputFormats,e.showButtonBar=angular.isDefined(r.showButtonBar)?e.$parent.$eval(r.showButtonBar):d.showButtonBar,d.html5Types[r.type]?(C=d.html5Types[r.type],F=!0):(C=r.uibDatepickerPopup||d.datepickerPopup,r.$observe("uibDatepickerPopup",function(e,t){var r=e||d.datepickerPopup;if(r!==C&&(C=r,k.$modelValue=null,!C))throw new Error("uibDatepickerPopup must have a date format specified.")})),!C)throw new Error("uibDatepickerPopup must have a date format specified.");if(F&&r.uibDatepickerPopup)throw new Error("HTML5 date input types do not support custom formats.");N=angular.element("<div uib-datepicker-popup-wrap><div uib-datepicker></div></div>"),N.attr({"ng-model":"date","ng-change":"dateSelection(date)","template-url":I}),R=angular.element(N.children()[0]),R.attr("template-url",L),e.datepickerOptions||(e.datepickerOptions={}),F&&"month"===r.type&&(e.datepickerOptions.datepickerMode="month",e.datepickerOptions.minMode="month"),R.attr("datepicker-options","datepickerOptions"),F?k.$formatters.push(function(t){return e.date=p.fromTimezone(t,O.getOption("timezone")),t}):(k.$$parserName="date",k.$validators.date=y,k.$parsers.unshift(m),k.$formatters.push(function(t){return k.$isEmpty(t)?(e.date=t,t):(angular.isNumber(t)&&(t=new Date(t)),e.date=p.fromTimezone(t,O.getOption("timezone")),p.filter(e.date,C))})),k.$viewChangeListeners.push(function(){e.date=v(k.$viewValue)}),t.on("keydown",E),P=n(N)(e),N.remove(),T?s.find("body").append(P):t.after(P),e.$on("$destroy",function(){for(!0===e.isOpen&&(l.$$phase||e.$apply(function(){e.isOpen=!1})),P.remove(),t.off("keydown",E),s.off("click",b),_&&_.off("scroll",x),angular.element(a).off("resize",x);M.length;)M.shift()()})},e.getText=function(t){return e[t+"Text"]||d[t+"Text"]},e.isDisabled=function(t){"today"===t&&(t=p.fromTimezone(new Date,O.getOption("timezone")));var r={};return angular.forEach(["minDate","maxDate"],function(t){e.datepickerOptions[t]?angular.isDate(e.datepickerOptions[t])?r[t]=new Date(e.datepickerOptions[t]):(g&&i.warn("Literal date support has been deprecated, please switch to date object usage"),r[t]=new Date(c(e.datepickerOptions[t],"medium"))):r[t]=null}),e.datepickerOptions&&r.minDate&&e.compare(t,r.minDate)<0||r.maxDate&&e.compare(t,r.maxDate)>0},e.compare=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate())-new Date(t.getFullYear(),t.getMonth(),t.getDate())},e.dateSelection=function(r){e.date=r;var n=e.date?p.filter(e.date,C):null;t.val(n),k.$setViewValue(n),w&&(e.isOpen=!1,t[0].focus())},e.keydown=function(r){27===r.which&&(r.stopPropagation(),e.isOpen=!1,t[0].focus())},e.select=function(t,r){if(r.stopPropagation(),"today"===t){var n=new Date;angular.isDate(e.date)?(t=new Date(e.date),t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate())):(t=p.fromTimezone(n,O.getOption("timezone")),t.setHours(0,0,0,0))}e.dateSelection(t)},e.close=function(r){r.stopPropagation(),e.isOpen=!1,t[0].focus()},e.disabled=angular.isDefined(r.disabled)||!1,r.ngDisabled&&M.push(e.$parent.$watch(o(r.ngDisabled),function(t){e.disabled=t})),e.$watch("isOpen",function(n){n?e.disabled?e.isOpen=!1:f(function(){x(),A&&e.$broadcast("uib:datepicker.focus"),s.on("click",b);var n=r.popupPlacement?r.popupPlacement:d.placement;T||u.parsePlacement(n)[2]?(_=_||angular.element(u.scrollParent(t)))&&_.on("scroll",x):_=null,angular.element(a).on("resize",x)},0,!1):(s.off("click",b),_&&_.off("scroll",x),angular.element(a).off("resize",x))}),e.$on("uib:datepicker.mode",function(){f(x,0,!1)})}]).directive("uibDatepickerPopup",function(){return{require:["ngModel","uibDatepickerPopup"],controller:"UibDatepickerPopupController",scope:{datepickerOptions:"=?",isOpen:"=?",currentText:"@",clearText:"@",closeText:"@"},link:function(e,t,r,n){var i=n[0];n[1].init(i)}}}).directive("uibDatepickerPopupWrap",function(){return{restrict:"A",transclude:!0,templateUrl:function(e,t){return t.templateUrl||"uib/template/datepickerPopup/popup.html"}}}),angular.module("ui.bootstrap.debounce",[]).factory("$$debounce",["$timeout",function(e){return function(t,r){var n;return function(){var i=this,o=Array.prototype.slice.call(arguments);n&&e.cancel(n),n=e(function(){t.apply(i,o)},r)}}}]),angular.module("ui.bootstrap.multiMap",[]).factory("$$multiMap",function(){return{createNew:function(){var e={};return{entries:function(){return Object.keys(e).map(function(t){return{key:t,value:e[t]}})},get:function(t){return e[t]},hasKey:function(t){return!!e[t]},keys:function(){return Object.keys(e)},put:function(t,r){e[t]||(e[t]=[]),e[t].push(r)},remove:function(t,r){var n=e[t];if(n){var i=n.indexOf(r);-1!==i&&n.splice(i,1),n.length||delete e[t]}}}}}}),angular.module("ui.bootstrap.dropdown",["ui.bootstrap.multiMap","ui.bootstrap.position"]).constant("uibDropdownConfig",{appendToOpenClass:"uib-dropdown-open",openClass:"open"}).service("uibDropdownService",["$document","$rootScope","$$multiMap",function(e,t,r){var n=null,i=r.createNew();this.isOnlyOpen=function(e,t){var r=i.get(t);if(r){if(r.reduce(function(t,r){return r.scope===e?r:t},{}))return 1===r.length}return!1},this.open=function(t,r,a){if(n||e.on("click",o),n&&n!==t&&(n.isOpen=!1),n=t,a){var s=i.get(a);if(s){-1===s.map(function(e){return e.scope}).indexOf(t)&&i.put(a,{scope:t})}else i.put(a,{scope:t})}},this.close=function(t,r,a){if(n===t&&(e.off("click",o),e.off("keydown",this.keybindFilter),n=null),a){var s=i.get(a);if(s){var l=s.reduce(function(e,r){return r.scope===t?r:e},{});l&&i.remove(a,l)}}};var o=function(e){if(n&&n.isOpen&&!(e&&"disabled"===n.getAutoClose()||e&&3===e.which)){var r=n.getToggleElement();if(!(e&&r&&r[0].contains(e.target))){var i=n.getDropdownElement();e&&"outsideClick"===n.getAutoClose()&&i&&i[0].contains(e.target)||(n.focusToggleElement(),n.isOpen=!1,t.$$phase||n.$apply())}}};this.keybindFilter=function(e){if(n){var t=n.getDropdownElement(),r=n.getToggleElement(),i=t&&t[0].contains(e.target),a=r&&r[0].contains(e.target);27===e.which?(e.stopPropagation(),n.focusToggleElement(),o()):n.isKeynavEnabled()&&-1!==[38,40].indexOf(e.which)&&n.isOpen&&(i||a)&&(e.preventDefault(),e.stopPropagation(),n.focusDropdownEntry(e.which))}}}]).controller("UibDropdownController",["$scope","$element","$attrs","$parse","uibDropdownConfig","uibDropdownService","$animate","$uibPosition","$document","$compile","$templateRequest",function(e,t,r,n,i,o,a,s,l,u,c){function p(){t.append(h.dropdownMenu)}var d,f,h=this,g=e.$new(),v=i.appendToOpenClass,m=i.openClass,y=angular.noop,b=r.onToggle?n(r.onToggle):angular.noop,E=!1,x=l.find("body");t.addClass("dropdown"),this.init=function(){r.isOpen&&(f=n(r.isOpen),y=f.assign,e.$watch(f,function(e){g.isOpen=!!e})),E=angular.isDefined(r.keyboardNav)},this.toggle=function(e){return g.isOpen=arguments.length?!!e:!g.isOpen,angular.isFunction(y)&&y(g,g.isOpen),g.isOpen},this.isOpen=function(){return g.isOpen},g.getToggleElement=function(){return h.toggleElement},g.getAutoClose=function(){return r.autoClose||"always"},g.getElement=function(){return t},g.isKeynavEnabled=function(){return E},g.focusDropdownEntry=function(e){var r=h.dropdownMenu?angular.element(h.dropdownMenu).find("a"):t.find("ul").eq(0).find("a");switch(e){case 40:angular.isNumber(h.selectedOption)?h.selectedOption=h.selectedOption===r.length-1?h.selectedOption:h.selectedOption+1:h.selectedOption=0;break;case 38:angular.isNumber(h.selectedOption)?h.selectedOption=0===h.selectedOption?0:h.selectedOption-1:h.selectedOption=r.length-1}r[h.selectedOption].focus()},g.getDropdownElement=function(){return h.dropdownMenu},g.focusToggleElement=function(){h.toggleElement&&h.toggleElement[0].focus()},g.$watch("isOpen",function(i,f){var E=null,S=!1;if(angular.isDefined(r.dropdownAppendTo)){var C=n(r.dropdownAppendTo)(g);C&&(E=angular.element(C))}if(angular.isDefined(r.dropdownAppendToBody)){!1!==n(r.dropdownAppendToBody)(g)&&(S=!0)}if(S&&!E&&(E=x),E&&h.dropdownMenu&&(i?(E.append(h.dropdownMenu),t.on("$destroy",p)):(t.off("$destroy",p),p())),E&&h.dropdownMenu){var w,T,A,I=s.positionElements(t,h.dropdownMenu,"bottom-left",!0),L=0;if(w={top:I.top+"px",display:i?"block":"none"},T=h.dropdownMenu.hasClass("dropdown-menu-right"),T?(w.left="auto",A=s.scrollbarPadding(E),A.heightOverflow&&A.scrollbarWidth&&(L=A.scrollbarWidth),w.right=window.innerWidth-L-(I.left+t.prop("offsetWidth"))+"px"):(w.left=I.left+"px",w.right="auto"),!S){var N=s.offset(E);w.top=I.top-N.top+"px",T?w.right=window.innerWidth-(I.left-N.left+t.prop("offsetWidth"))+"px":w.left=I.left-N.left+"px"}h.dropdownMenu.css(w)}var R=E||t,_=E?v:m,k=R.hasClass(_),O=o.isOnlyOpen(e,E);if(k===!i){var P;P=E?O?"removeClass":"addClass":i?"addClass":"removeClass",a[P](R,_).then(function(){angular.isDefined(i)&&i!==f&&b(e,{open:!!i})})}if(i)h.dropdownMenuTemplateUrl?c(h.dropdownMenuTemplateUrl).then(function(e){d=g.$new(),u(e.trim())(d,function(e){var t=e;h.dropdownMenu.replaceWith(t),h.dropdownMenu=t,l.on("keydown",o.keybindFilter)})}):l.on("keydown",o.keybindFilter),g.focusToggleElement(),o.open(g,t,E);else{if(o.close(g,t,E),h.dropdownMenuTemplateUrl){d&&d.$destroy();var D=angular.element('<ul class="dropdown-menu"></ul>');h.dropdownMenu.replaceWith(D),h.dropdownMenu=D}h.selectedOption=null}angular.isFunction(y)&&y(e,i)})}]).directive("uibDropdown",function(){return{controller:"UibDropdownController",link:function(e,t,r,n){n.init()}}}).directive("uibDropdownMenu",function(){return{restrict:"A",require:"?^uibDropdown",link:function(e,t,r,n){if(n&&!angular.isDefined(r.dropdownNested)){t.addClass("dropdown-menu");var i=r.templateUrl;i&&(n.dropdownMenuTemplateUrl=i),n.dropdownMenu||(n.dropdownMenu=t)}}}}).directive("uibDropdownToggle",function(){return{require:"?^uibDropdown",link:function(e,t,r,n){if(n){t.addClass("dropdown-toggle"),n.toggleElement=t;var i=function(i){i.preventDefault(),t.hasClass("disabled")||r.disabled||e.$apply(function(){n.toggle()})};t.on("click",i),t.attr({"aria-haspopup":!0,"aria-expanded":!1}),e.$watch(n.isOpen,function(e){t.attr("aria-expanded",!!e)}),e.$on("$destroy",function(){t.off("click",i)})}}}}),angular.module("ui.bootstrap.stackedMap",[]).factory("$$stackedMap",function(){return{createNew:function(){var e=[];return{add:function(t,r){e.push({key:t,value:r})},get:function(t){for(var r=0;r<e.length;r++)if(t===e[r].key)return e[r]},keys:function(){for(var t=[],r=0;r<e.length;r++)t.push(e[r].key);return t},top:function(){return e[e.length-1]},remove:function(t){for(var r=-1,n=0;n<e.length;n++)if(t===e[n].key){r=n;break}return e.splice(r,1)[0]},removeTop:function(){return e.pop()},length:function(){return e.length}}}}}),angular.module("ui.bootstrap.modal",["ui.bootstrap.multiMap","ui.bootstrap.stackedMap","ui.bootstrap.position"]).provider("$uibResolve",function(){var e=this;this.resolver=null,this.setResolver=function(e){this.resolver=e},this.$get=["$injector","$q",function(t,r){var n=e.resolver?t.get(e.resolver):null;return{resolve:function(e,i,o,a){if(n)return n.resolve(e,i,o,a);var s=[];return angular.forEach(e,function(e){angular.isFunction(e)||angular.isArray(e)?s.push(r.resolve(t.invoke(e))):angular.isString(e)?s.push(r.resolve(t.get(e))):s.push(r.resolve(e))}),r.all(s).then(function(t){var r={},n=0;return angular.forEach(e,function(e,i){r[i]=t[n++]}),r})}}}]}).directive("uibModalBackdrop",["$animate","$injector","$uibModalStack",function(e,t,r){function n(t,n,i){i.modalInClass&&(e.addClass(n,i.modalInClass),t.$on(r.NOW_CLOSING_EVENT,function(r,o){var a=o();t.modalOptions.animation?e.removeClass(n,i.modalInClass).then(a):a()}))}return{restrict:"A",compile:function(e,t){return e.addClass(t.backdropClass),n}}}]).directive("uibModalWindow",["$uibModalStack","$q","$animateCss","$document",function(e,t,r,n){return{scope:{index:"@"},restrict:"A",transclude:!0,templateUrl:function(e,t){return t.templateUrl||"uib/template/modal/window.html"},link:function(i,o,a){o.addClass(a.windowTopClass||""),i.size=a.size,i.close=function(t){var r=e.getTop();r&&r.value.backdrop&&"static"!==r.value.backdrop&&t.target===t.currentTarget&&(t.preventDefault(),t.stopPropagation(),e.dismiss(r.key,"backdrop click"))},o.on("click",i.close),i.$isRendered=!0;var s=t.defer();i.$$postDigest(function(){s.resolve()}),s.promise.then(function(){var s=null;a.modalInClass&&(s=r(o,{addClass:a.modalInClass}).start(),i.$on(e.NOW_CLOSING_EVENT,function(e,t){var n=t();r(o,{removeClass:a.modalInClass}).start().then(n)})),t.when(s).then(function(){var t=e.getTop();if(t&&e.modalRendered(t.key),!n[0].activeElement||!o[0].contains(n[0].activeElement)){var r=o[0].querySelector("[autofocus]");r?r.focus():o[0].focus()}})})}}}]).directive("uibModalAnimationClass",function(){return{compile:function(e,t){t.modalAnimation&&e.addClass(t.uibModalAnimationClass)}}}).directive("uibModalTransclude",["$animate",function(e){return{link:function(t,r,n,i,o){o(t.$parent,function(t){r.empty(),e.enter(t,r)})}}}]).factory("$uibModalStack",["$animate","$animateCss","$document","$compile","$rootScope","$q","$$multiMap","$$stackedMap","$uibPosition",function(e,t,r,n,i,o,a,s,l){function u(e){return e.replace(N,function(e,t){return(t?"-":"")+e.toLowerCase()})}function c(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}function p(){for(var e=-1,t=C.keys(),r=0;r<t.length;r++)C.get(t[r]).value.backdrop&&(e=r);return e>-1&&e<A&&(e=A),e}function d(e,t){var r=C.get(e).value,n=r.appendTo;C.remove(e),I=C.top(),I&&(A=parseInt(I.value.modalDomEl.attr("index"),10)),g(r.modalDomEl,r.modalScope,function(){var t=r.openedClass||S;w.remove(t,e);var i=w.hasKey(t);n.toggleClass(t,i),!i&&x&&x.heightOverflow&&x.scrollbarWidth&&(x.originalRight?n.css({paddingRight:x.originalRight+"px"}):n.css({paddingRight:""}),x=null),f(!0)},r.closedDeferred),h(),t&&t.focus?t.focus():n.focus&&n.focus()}function f(e){var t;C.length()>0&&(t=C.top().value,t.modalDomEl.toggleClass(t.windowTopClass||"",e))}function h(){if(b&&-1===p()){var e=E;g(b,E,function(){e=null}),b=void 0,E=void 0}}function g(t,r,n,i){function a(){a.done||(a.done=!0,e.leave(t).then(function(){n&&n(),t.remove(),i&&i.resolve()}),r.$destroy())}var s,l=null,u=function(){return s||(s=o.defer(),l=s.promise),function(){s.resolve()}};return r.$broadcast(T.NOW_CLOSING_EVENT,u),o.when(l).then(a)}function v(e){if(e.isDefaultPrevented())return e;var t=C.top();if(t)switch(e.which){case 27:t.value.keyboard&&(e.preventDefault(),i.$apply(function(){T.dismiss(t.key,"escape key press")}));break;case 9:var r=T.loadFocusElementList(t),n=!1;e.shiftKey?(T.isFocusInFirstItem(e,r)||T.isModalFocused(e,t))&&(n=T.focusLastFocusableElement(r)):T.isFocusInLastItem(e,r)&&(n=T.focusFirstFocusableElement(r)),n&&(e.preventDefault(),e.stopPropagation())}}function m(e,t,r){return!e.value.modalScope.$broadcast("modal.closing",t,r).defaultPrevented}function y(){Array.prototype.forEach.call(document.querySelectorAll("["+L+"]"),function(e){var t=parseInt(e.getAttribute(L),10),r=t-1;e.setAttribute(L,r),r||(e.removeAttribute(L),e.removeAttribute("aria-hidden"))})}var b,E,x,S="modal-open",C=s.createNew(),w=a.createNew(),T={NOW_CLOSING_EVENT:"modal.stack.now-closing"},A=0,I=null,L="data-bootstrap-modal-aria-hidden-count",N=/[A-Z]/g;return i.$watch(p,function(e){E&&(E.index=e)}),r.on("keydown",v),i.$on("$destroy",function(){r.off("keydown",v)}),T.open=function(t,o){function a(e){if(e&&"BODY"!==e[0].tagName)return function(e){var t=e.parent()?e.parent().children():[];return Array.prototype.filter.call(t,function(t){return t!==e[0]})}(e).forEach(function(e){var t="true"===e.getAttribute("aria-hidden"),r=parseInt(e.getAttribute(L),10);r||(r=t?1:0),e.setAttribute(L,r+1),e.setAttribute("aria-hidden","true")}),a(e.parent())}var s=r[0].activeElement,c=o.openedClass||S;f(!1),I=C.top(),C.add(t,{deferred:o.deferred,renderDeferred:o.renderDeferred,closedDeferred:o.closedDeferred,modalScope:o.scope,backdrop:o.backdrop,keyboard:o.keyboard,openedClass:o.openedClass,windowTopClass:o.windowTopClass,animation:o.animation,appendTo:o.appendTo}),w.put(c,t);var d=o.appendTo,h=p();h>=0&&!b&&(E=i.$new(!0),E.modalOptions=o,E.index=h,b=angular.element('<div uib-modal-backdrop="modal-backdrop"></div>'),b.attr({class:"modal-backdrop","ng-style":"{'z-index': 1040 + (index && 1 || 0) + index*10}","uib-modal-animation-class":"fade","modal-in-class":"in"}),o.backdropClass&&b.addClass(o.backdropClass),o.animation&&b.attr("modal-animation","true"),n(b)(E),e.enter(b,d),l.isScrollable(d)&&(x=l.scrollbarPadding(d),x.heightOverflow&&x.scrollbarWidth&&d.css({paddingRight:x.right+"px"})));var g;o.component?(g=document.createElement(u(o.component.name)),g=angular.element(g),g.attr({resolve:"$resolve","modal-instance":"$uibModalInstance",close:"$close($value)",dismiss:"$dismiss($value)"})):g=o.content,A=I?parseInt(I.value.modalDomEl.attr("index"),10)+1:0;var v=angular.element('<div uib-modal-window="modal-window"></div>');v.attr({class:"modal","template-url":o.windowTemplateUrl,"window-top-class":o.windowTopClass,role:"dialog","aria-labelledby":o.ariaLabelledBy,"aria-describedby":o.ariaDescribedBy,size:o.size,index:A,animate:"animate","ng-style":"{'z-index': 1050 + $$topModalIndex*10, display: 'block'}",tabindex:-1,"uib-modal-animation-class":"fade","modal-in-class":"in"}).append(g),o.windowClass&&v.addClass(o.windowClass),o.animation&&v.attr("modal-animation","true"),d.addClass(c),o.scope&&(o.scope.$$topModalIndex=A),e.enter(n(v)(o.scope),d),C.top().value.modalDomEl=v,C.top().value.modalOpener=s,a(v)},T.close=function(e,t){var r=C.get(e);return y(),r&&m(r,t,!0)?(r.value.modalScope.$$uibDestructionScheduled=!0,r.value.deferred.resolve(t),d(e,r.value.modalOpener),!0):!r},T.dismiss=function(e,t){var r=C.get(e);return y(),r&&m(r,t,!1)?(r.value.modalScope.$$uibDestructionScheduled=!0,r.value.deferred.reject(t),d(e,r.value.modalOpener),!0):!r},T.dismissAll=function(e){for(var t=this.getTop();t&&this.dismiss(t.key,e);)t=this.getTop()},T.getTop=function(){return C.top()},T.modalRendered=function(e){var t=C.get(e);t&&t.value.renderDeferred.resolve()},T.focusFirstFocusableElement=function(e){return e.length>0&&(e[0].focus(),!0)},T.focusLastFocusableElement=function(e){return e.length>0&&(e[e.length-1].focus(),!0)},T.isModalFocused=function(e,t){if(e&&t){var r=t.value.modalDomEl;if(r&&r.length)return(e.target||e.srcElement)===r[0]}return!1},T.isFocusInFirstItem=function(e,t){return t.length>0&&(e.target||e.srcElement)===t[0]},T.isFocusInLastItem=function(e,t){return t.length>0&&(e.target||e.srcElement)===t[t.length-1]},T.loadFocusElementList=function(e){if(e){var t=e.value.modalDomEl;if(t&&t.length){var r=t[0].querySelectorAll("a[href], area[href], input:not([disabled]):not([tabindex='-1']), button:not([disabled]):not([tabindex='-1']),select:not([disabled]):not([tabindex='-1']), textarea:not([disabled]):not([tabindex='-1']), iframe, object, embed, *[tabindex]:not([tabindex='-1']), *[contenteditable=true]");return r?Array.prototype.filter.call(r,function(e){return c(e)}):r}}},T}]).provider("$uibModal",function(){var e={options:{animation:!0,backdrop:!0,keyboard:!0},$get:["$rootScope","$q","$document","$templateRequest","$controller","$uibResolve","$uibModalStack",function(t,r,n,i,o,a,s){function l(e){return e.template?r.when(e.template):i(angular.isFunction(e.templateUrl)?e.templateUrl():e.templateUrl)}var u={},c=null;return u.getPromiseChain=function(){return c},u.open=function(i){function u(){return v}var p=r.defer(),d=r.defer(),f=r.defer(),h=r.defer(),g={result:p.promise,opened:d.promise,closed:f.promise,rendered:h.promise,close:function(e){return s.close(g,e)},dismiss:function(e){return s.dismiss(g,e)}};if(i=angular.extend({},e.options,i),i.resolve=i.resolve||{},i.appendTo=i.appendTo||n.find("body").eq(0),!i.appendTo.length)throw new Error("appendTo element not found. Make sure that the element passed is in DOM.");if(!i.component&&!i.template&&!i.templateUrl)throw new Error("One of component or template or templateUrl options is required.");var v;v=i.component?r.when(a.resolve(i.resolve,{},null,null)):r.all([l(i),a.resolve(i.resolve,{},null,null)]);var m;return m=c=r.all([c]).then(u,u).then(function(e){function r(t,r,n,i){t.$scope=a,t.$scope.$resolve={},n?t.$scope.$uibModalInstance=g:t.$uibModalInstance=g;var o=r?e[1]:e;angular.forEach(o,function(e,r){i&&(t[r]=e),t.$scope.$resolve[r]=e})}var n=i.scope||t,a=n.$new();a.$close=g.close,a.$dismiss=g.dismiss,a.$on("$destroy",function(){a.$$uibDestructionScheduled||a.$dismiss("$uibUnscheduledDestruction")});var l,u,c={scope:a,deferred:p,renderDeferred:h,closedDeferred:f,animation:i.animation,backdrop:i.backdrop,keyboard:i.keyboard,backdropClass:i.backdropClass,windowTopClass:i.windowTopClass,windowClass:i.windowClass,windowTemplateUrl:i.windowTemplateUrl,ariaLabelledBy:i.ariaLabelledBy,ariaDescribedBy:i.ariaDescribedBy,size:i.size,openedClass:i.openedClass,appendTo:i.appendTo},v={},m={};i.component?(r(v,!1,!0,!1),v.name=i.component,c.component=v):i.controller&&(r(m,!0,!1,!0),u=o(i.controller,m,!0,i.controllerAs),i.controllerAs&&i.bindToController&&(l=u.instance,l.$close=a.$close,l.$dismiss=a.$dismiss,angular.extend(l,{$resolve:m.$scope.$resolve},n)),l=u(),angular.isFunction(l.$onInit)&&l.$onInit()),i.component||(c.content=e[0]),s.open(g,c),d.resolve(!0)},function(e){d.reject(e),p.reject(e)}).finally(function(){c===m&&(c=null)}),g},u}]};return e}),angular.module("ui.bootstrap.paging",[]).factory("uibPaging",["$parse",function(e){return{create:function(t,r,n){t.setNumPages=n.numPages?e(n.numPages).assign:angular.noop,t.ngModelCtrl={$setViewValue:angular.noop},t._watchers=[],t.init=function(e,i){t.ngModelCtrl=e,t.config=i,e.$render=function(){t.render()},n.itemsPerPage?t._watchers.push(r.$parent.$watch(n.itemsPerPage,function(e){t.itemsPerPage=parseInt(e,10),r.totalPages=t.calculateTotalPages(),t.updatePage()})):t.itemsPerPage=i.itemsPerPage,r.$watch("totalItems",function(e,n){(angular.isDefined(e)||e!==n)&&(r.totalPages=t.calculateTotalPages(),t.updatePage())})},t.calculateTotalPages=function(){var e=t.itemsPerPage<1?1:Math.ceil(r.totalItems/t.itemsPerPage);return Math.max(e||0,1)},t.render=function(){r.page=parseInt(t.ngModelCtrl.$viewValue,10)||1},r.selectPage=function(e,n){n&&n.preventDefault(),(!r.ngDisabled||!n)&&r.page!==e&&e>0&&e<=r.totalPages&&(n&&n.target&&n.target.blur(),t.ngModelCtrl.$setViewValue(e),t.ngModelCtrl.$render())},r.getText=function(e){return r[e+"Text"]||t.config[e+"Text"]},r.noPrevious=function(){return 1===r.page},r.noNext=function(){return r.page===r.totalPages},t.updatePage=function(){t.setNumPages(r.$parent,r.totalPages),r.page>r.totalPages?r.selectPage(r.totalPages):t.ngModelCtrl.$render()},r.$on("$destroy",function(){for(;t._watchers.length;)t._watchers.shift()()})}}}]),angular.module("ui.bootstrap.pager",["ui.bootstrap.paging","ui.bootstrap.tabindex"]).controller("UibPagerController",["$scope","$attrs","uibPaging","uibPagerConfig",function(e,t,r,n){e.align=angular.isDefined(t.align)?e.$parent.$eval(t.align):n.align,r.create(this,e,t)}]).constant("uibPagerConfig",{itemsPerPage:10,previousText:" Previous",nextText:"Next ",align:!0}).directive("uibPager",["uibPagerConfig",function(e){return{scope:{totalItems:"=",previousText:"@",nextText:"@",ngDisabled:"="},require:["uibPager","?ngModel"],restrict:"A",controller:"UibPagerController",controllerAs:"pager",templateUrl:function(e,t){return t.templateUrl||"uib/template/pager/pager.html"},link:function(t,r,n,i){r.addClass("pager");var o=i[0],a=i[1];a&&o.init(a,e)}}}]),angular.module("ui.bootstrap.pagination",["ui.bootstrap.paging","ui.bootstrap.tabindex"]).controller("UibPaginationController",["$scope","$attrs","$parse","uibPaging","uibPaginationConfig",function(e,t,r,n,i){function o(e,t,r){return{number:e,text:t,active:r}}function a(e,t){var r=[],n=1,i=t,a=angular.isDefined(l)&&l<t;a&&(u?(n=Math.max(e-Math.floor(l/2),1),(i=n+l-1)>t&&(i=t,n=i-l+1)):(n=(Math.ceil(e/l)-1)*l+1,i=Math.min(n+l-1,t)));for(var s=n;s<=i;s++){var f=o(s,d(s),s===e);r.push(f)}if(a&&l>0&&(!u||c||p)){if(n>1){if(!p||n>3){var h=o(n-1,"...",!1);r.unshift(h)}if(p){if(3===n){var g=o(2,"2",!1);r.unshift(g)}var v=o(1,"1",!1);r.unshift(v)}}if(i<t){if(!p||i<t-2){var m=o(i+1,"...",!1);r.push(m)}if(p){if(i===t-2){var y=o(t-1,t-1,!1);r.push(y)}var b=o(t,t,!1);r.push(b)}}}return r}var s=this,l=angular.isDefined(t.maxSize)?e.$parent.$eval(t.maxSize):i.maxSize,u=angular.isDefined(t.rotate)?e.$parent.$eval(t.rotate):i.rotate,c=angular.isDefined(t.forceEllipses)?e.$parent.$eval(t.forceEllipses):i.forceEllipses,p=angular.isDefined(t.boundaryLinkNumbers)?e.$parent.$eval(t.boundaryLinkNumbers):i.boundaryLinkNumbers,d=angular.isDefined(t.pageLabel)?function(r){return e.$parent.$eval(t.pageLabel,{$page:r})}:angular.identity;e.boundaryLinks=angular.isDefined(t.boundaryLinks)?e.$parent.$eval(t.boundaryLinks):i.boundaryLinks,e.directionLinks=angular.isDefined(t.directionLinks)?e.$parent.$eval(t.directionLinks):i.directionLinks,t.$set("role","menu"),n.create(this,e,t),t.maxSize&&s._watchers.push(e.$parent.$watch(r(t.maxSize),function(e){l=parseInt(e,10),s.render()}));var f=this.render;this.render=function(){f(),e.page>0&&e.page<=e.totalPages&&(e.pages=a(e.page,e.totalPages))}}]).constant("uibPaginationConfig",{itemsPerPage:10,boundaryLinks:!1,boundaryLinkNumbers:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0,forceEllipses:!1}).directive("uibPagination",["$parse","uibPaginationConfig",function(e,t){return{scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@",ngDisabled:"="},require:["uibPagination","?ngModel"],restrict:"A",controller:"UibPaginationController",controllerAs:"pagination",templateUrl:function(e,t){return t.templateUrl||"uib/template/pagination/pagination.html"},link:function(e,r,n,i){r.addClass("pagination");var o=i[0],a=i[1];a&&o.init(a,t)}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.stackedMap"]).provider("$uibTooltip",function(){function e(e){var t=/[A-Z]/g;return e.replace(t,function(e,t){return(t?"-":"")+e.toLowerCase()})}var t={placement:"top",placementClassPrefix:"",animation:!0,popupDelay:0,popupCloseDelay:0,useContentExp:!1},r={mouseenter:"mouseleave",click:"click",outsideClick:"outsideClick",focus:"blur",none:""},n={};this.options=function(e){angular.extend(n,e)},this.setTriggers=function(e){angular.extend(r,e)},this.$get=["$window","$compile","$timeout","$document","$uibPosition","$interpolate","$rootScope","$parse","$$stackedMap",function(i,o,a,s,l,u,c,p,d){function f(e){if(27===e.which){var t=h.top();t&&(t.value.close(),t=null)}}var h=d.createNew();return s.on("keyup",f),c.$on("$destroy",function(){s.off("keyup",f)}),function(i,c,d,f){function g(e){var t=(e||f.trigger||d).split(" ");return{show:t,hide:t.map(function(e){return r[e]||e})}}f=angular.extend({},t,n,f);var v=e(i),m=u.startSymbol(),y=u.endSymbol(),b="<div "+v+'-popup uib-title="'+m+"title"+y+'" '+(f.useContentExp?'content-exp="contentExp()" ':'content="'+m+"content"+y+'" ')+'origin-scope="origScope" class="uib-position-measure '+c+'" tooltip-animation-class="fade"uib-tooltip-classes ng-class="{ in: isOpen }" ></div>';return{compile:function(e,t){var r=o(b);return function(e,t,n,o){function u(){G.isOpen?v():d()}function d(){$&&!e.$eval(n[c+"Enable"])||(E(),C(),G.popupDelay?k||(k=a(m,G.popupDelay,!1)):m())}function v(){y(),G.popupCloseDelay?O||(O=a(b,G.popupCloseDelay,!1)):b()}function m(){if(y(),E(),!G.content)return angular.noop;x(),G.$evalAsync(function(){G.isOpen=!0,w(!0),q()})}function y(){k&&(a.cancel(k),k=null),P&&(a.cancel(P),P=null)}function b(){G&&G.$evalAsync(function(){G&&(G.isOpen=!1,w(!1),G.animation?_||(_=a(S,150,!1)):S())})}function E(){O&&(a.cancel(O),O=null),_&&(a.cancel(_),_=null)}function x(){N||(R=G.$new(),N=r(R,function(e){M?s.find("body").append(e):t.after(e)}),h.add(G,{close:b}),T())}function S(){y(),E(),A(),N&&(N.remove(),N=null,D&&a.cancel(D)),h.remove(G),R&&(R.$destroy(),R=null)}function C(){G.title=n[c+"Title"],G.content=U?U(e):n[i],G.popupClass=n[c+"Class"],G.placement=angular.isDefined(n[c+"Placement"])?n[c+"Placement"]:f.placement;var t=l.parsePlacement(G.placement);F=t[1]?t[0]+"-"+t[1]:t[0];var r=parseInt(n[c+"PopupDelay"],10),o=parseInt(n[c+"PopupCloseDelay"],10);G.popupDelay=isNaN(r)?f.popupDelay:r,G.popupCloseDelay=isNaN(o)?f.popupCloseDelay:o}function w(t){H&&angular.isFunction(H.assign)&&H.assign(e,t)}function T(){V.length=0,U?(V.push(e.$watch(U,function(e){G.content=e,!e&&G.isOpen&&b()})),V.push(R.$watch(function(){B||(B=!0,R.$$postDigest(function(){B=!1,G&&G.isOpen&&q()}))}))):V.push(n.$observe(i,function(e){G.content=e,!e&&G.isOpen?b():q()})),V.push(n.$observe(c+"Title",function(e){G.title=e,G.isOpen&&q()})),V.push(n.$observe(c+"Placement",function(e){G.placement=e||f.placement,G.isOpen&&q()}))}function A(){V.length&&(angular.forEach(V,function(e){e()}),V.length=0)}function I(e){G&&G.isOpen&&N&&(t[0].contains(e.target)||N[0].contains(e.target)||v())}function L(e){27===e.which&&v()}var N,R,_,k,O,P,D,F,M=!!angular.isDefined(f.appendToBody)&&f.appendToBody,j=g(void 0),$=angular.isDefined(n[c+"Enable"]),G=e.$new(!0),B=!1,H=!!angular.isDefined(n[c+"IsOpen"])&&p(n[c+"IsOpen"]),U=!!f.useContentExp&&p(n[i]),V=[],q=function(){N&&N.html()&&(P||(P=a(function(){var e=l.positionElements(t,N,G.placement,M),r=angular.isDefined(N.offsetHeight)?N.offsetHeight:N.prop("offsetHeight"),n=M?l.offset(t):l.position(t);N.css({top:e.top+"px",left:e.left+"px"});var i=e.placement.split("-");N.hasClass(i[0])||(N.removeClass(F.split("-")[0]),N.addClass(i[0])),N.hasClass(f.placementClassPrefix+e.placement)||(N.removeClass(f.placementClassPrefix+F),N.addClass(f.placementClassPrefix+e.placement)),D=a(function(){var e=angular.isDefined(N.offsetHeight)?N.offsetHeight:N.prop("offsetHeight"),t=l.adjustTop(i,n,r,e);t&&N.css(t),D=null},0,!1),N.hasClass("uib-position-measure")?(l.positionArrow(N,e.placement),N.removeClass("uib-position-measure")):F!==e.placement&&l.positionArrow(N,e.placement),F=e.placement,P=null},0,!1)))};G.origScope=e,G.isOpen=!1,G.contentExp=function(){return G.content},n.$observe("disabled",function(e){e&&y(),e&&G.isOpen&&b()}),H&&e.$watch(H,function(e){G&&!e===G.isOpen&&u()});var z=function(){j.show.forEach(function(e){"outsideClick"===e?t.off("click",u):(t.off(e,d),t.off(e,u)),t.off("keypress",L)}),j.hide.forEach(function(e){"outsideClick"===e?s.off("click",I):t.off(e,v)})};!function(){var r=[],i=[],o=e.$eval(n[c+"Trigger"]);z(),angular.isObject(o)?(Object.keys(o).forEach(function(e){r.push(e),i.push(o[e])}),j={show:r,hide:i}):j=g(o),"none"!==j.show&&j.show.forEach(function(e,r){"outsideClick"===e?(t.on("click",u),s.on("click",I)):e===j.hide[r]?t.on(e,u):e&&(t.on(e,d),t.on(j.hide[r],v)),t.on("keypress",L)})}();var Q=e.$eval(n[c+"Animation"]);G.animation=angular.isDefined(Q)?!!Q:f.animation;var W,X=c+"AppendToBody";W=X in n&&void 0===n[X]||e.$eval(n[X]),M=angular.isDefined(W)?W:M,e.$on("$destroy",function(){z(),S(),G=null})}}}}}]}).directive("uibTooltipTemplateTransclude",["$animate","$sce","$compile","$templateRequest",function(e,t,r,n){return{link:function(i,o,a){var s,l,u,c=i.$eval(a.tooltipTemplateTranscludeScope),p=0,d=function(){l&&(l.remove(),l=null),s&&(s.$destroy(),s=null),u&&(e.leave(u).then(function(){l=null}),l=u,u=null)};i.$watch(t.parseAsResourceUrl(a.uibTooltipTemplateTransclude),function(t){var a=++p;t?(n(t,!0).then(function(n){if(a===p){var i=c.$new(),l=n,f=r(l)(i,function(t){d(),e.enter(t,o)});s=i,u=f,s.$emit("$includeContentLoaded",t)}},function(){a===p&&(d(),i.$emit("$includeContentError",t))}),i.$emit("$includeContentRequested",t)):d()}),i.$on("$destroy",d)}}}]).directive("uibTooltipClasses",["$uibPosition",function(e){return{restrict:"A",link:function(t,r,n){if(t.placement){var i=e.parsePlacement(t.placement);r.addClass(i[0])}t.popupClass&&r.addClass(t.popupClass),t.animation&&r.addClass(n.tooltipAnimationClass)}}}]).directive("uibTooltipPopup",function(){return{restrict:"A",scope:{content:"@"},templateUrl:"uib/template/tooltip/tooltip-popup.html"}}).directive("uibTooltip",["$uibTooltip",function(e){return e("uibTooltip","tooltip","mouseenter")}]).directive("uibTooltipTemplatePopup",function(){return{restrict:"A",scope:{contentExp:"&",originScope:"&"},templateUrl:"uib/template/tooltip/tooltip-template-popup.html"}}).directive("uibTooltipTemplate",["$uibTooltip",function(e){return e("uibTooltipTemplate","tooltip","mouseenter",{useContentExp:!0})}]).directive("uibTooltipHtmlPopup",function(){return{restrict:"A",scope:{contentExp:"&"},templateUrl:"uib/template/tooltip/tooltip-html-popup.html"}}).directive("uibTooltipHtml",["$uibTooltip",function(e){return e("uibTooltipHtml","tooltip","mouseenter",{useContentExp:!0})}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("uibPopoverTemplatePopup",function(){return{restrict:"A",scope:{uibTitle:"@",contentExp:"&",originScope:"&"},templateUrl:"uib/template/popover/popover-template.html"}}).directive("uibPopoverTemplate",["$uibTooltip",function(e){return e("uibPopoverTemplate","popover","click",{useContentExp:!0})}]).directive("uibPopoverHtmlPopup",function(){return{restrict:"A",scope:{contentExp:"&",uibTitle:"@"},templateUrl:"uib/template/popover/popover-html.html"}}).directive("uibPopoverHtml",["$uibTooltip",function(e){return e("uibPopoverHtml","popover","click",{useContentExp:!0})}]).directive("uibPopoverPopup",function(){return{restrict:"A",scope:{uibTitle:"@",content:"@"},templateUrl:"uib/template/popover/popover.html"}}).directive("uibPopover",["$uibTooltip",function(e){return e("uibPopover","popover","click")}]),angular.module("ui.bootstrap.progressbar",[]).constant("uibProgressConfig",{animate:!0,max:100}).controller("UibProgressController",["$scope","$attrs","uibProgressConfig",function(e,t,r){function n(){return angular.isDefined(e.maxParam)?e.maxParam:r.max}var i=this,o=angular.isDefined(t.animate)?e.$parent.$eval(t.animate):r.animate;this.bars=[],e.max=n(),this.addBar=function(e,t,r){o||t.css({transition:"none"}),this.bars.push(e),e.max=n(),e.title=r&&angular.isDefined(r.title)?r.title:"progressbar",e.$watch("value",function(t){e.recalculatePercentage()}),e.recalculatePercentage=function(){var t=i.bars.reduce(function(e,t){return t.percent=+(100*t.value/t.max).toFixed(2),e+t.percent},0);t>100&&(e.percent-=t-100)},e.$on("$destroy",function(){t=null,i.removeBar(e)})},this.removeBar=function(e){this.bars.splice(this.bars.indexOf(e),1),this.bars.forEach(function(e){e.recalculatePercentage()})},e.$watch("maxParam",function(e){i.bars.forEach(function(e){e.max=n(),e.recalculatePercentage()})})}]).directive("uibProgress",function(){return{replace:!0,transclude:!0,controller:"UibProgressController",require:"uibProgress",scope:{maxParam:"=?max"},templateUrl:"uib/template/progressbar/progress.html"}}).directive("uibBar",function(){return{replace:!0,transclude:!0,require:"^uibProgress",scope:{value:"=",type:"@"},templateUrl:"uib/template/progressbar/bar.html",link:function(e,t,r,n){n.addBar(e,t,r)}}}).directive("uibProgressbar",function(){return{replace:!0,transclude:!0,controller:"UibProgressController",scope:{value:"=",maxParam:"=?max",type:"@"},templateUrl:"uib/template/progressbar/progressbar.html",link:function(e,t,r,n){n.addBar(e,angular.element(t.children()[0]),{title:r.title})}}}),angular.module("ui.bootstrap.rating",[]).constant("uibRatingConfig",{max:5,stateOn:null,stateOff:null,enableReset:!0,titles:["one","two","three","four","five"]}).controller("UibRatingController",["$scope","$attrs","uibRatingConfig",function(e,t,r){var n={$setViewValue:angular.noop},i=this;this.init=function(i){n=i,n.$render=this.render,n.$formatters.push(function(e){return angular.isNumber(e)&&e<<0!==e&&(e=Math.round(e)),e}),this.stateOn=angular.isDefined(t.stateOn)?e.$parent.$eval(t.stateOn):r.stateOn,this.stateOff=angular.isDefined(t.stateOff)?e.$parent.$eval(t.stateOff):r.stateOff,this.enableReset=angular.isDefined(t.enableReset)?e.$parent.$eval(t.enableReset):r.enableReset;var o=angular.isDefined(t.titles)?e.$parent.$eval(t.titles):r.titles;this.titles=angular.isArray(o)&&o.length>0?o:r.titles;var a=angular.isDefined(t.ratingStates)?e.$parent.$eval(t.ratingStates):new Array(angular.isDefined(t.max)?e.$parent.$eval(t.max):r.max);e.range=this.buildTemplateObjects(a)},this.buildTemplateObjects=function(e){for(var t=0,r=e.length;t<r;t++)e[t]=angular.extend({index:t},{stateOn:this.stateOn,stateOff:this.stateOff,title:this.getTitle(t)},e[t]);return e},this.getTitle=function(e){return e>=this.titles.length?e+1:this.titles[e]},e.rate=function(t){if(!e.readonly&&t>=0&&t<=e.range.length){var r=i.enableReset&&n.$viewValue===t?0:t;n.$setViewValue(r),n.$render()}},e.enter=function(t){e.readonly||(e.value=t),e.onHover({value:t})},e.reset=function(){e.value=n.$viewValue,e.onLeave()},e.onKeydown=function(t){/(37|38|39|40)/.test(t.which)&&(t.preventDefault(),t.stopPropagation(),e.rate(e.value+(38===t.which||39===t.which?1:-1)))},this.render=function(){e.value=n.$viewValue,e.title=i.getTitle(e.value-1)}}]).directive("uibRating",function(){return{require:["uibRating","ngModel"],restrict:"A",scope:{readonly:"=?readOnly",onHover:"&",onLeave:"&"},controller:"UibRatingController",templateUrl:"uib/template/rating/rating.html",link:function(e,t,r,n){var i=n[0],o=n[1];i.init(o)}}}),angular.module("ui.bootstrap.tabs",[]).controller("UibTabsetController",["$scope",function(e){function t(e){for(var t=0;t<n.tabs.length;t++)if(n.tabs[t].index===e)return t}var r,n=this;n.tabs=[],n.select=function(e,o){if(!i){var a=t(r),s=n.tabs[a];if(s){if(s.tab.onDeselect({$event:o,$selectedIndex:e}),o&&o.isDefaultPrevented())return;s.tab.active=!1}var l=n.tabs[e];l?(l.tab.onSelect({$event:o}),l.tab.active=!0,n.active=l.index,r=l.index):!l&&angular.isDefined(r)&&(n.active=null,r=null)}},n.addTab=function(e){if(n.tabs.push({tab:e,index:e.index}),n.tabs.sort(function(e,t){return e.index>t.index?1:e.index<t.index?-1:0}),e.index===n.active||!angular.isDefined(n.active)&&1===n.tabs.length){var r=t(e.index);n.select(r)}},n.removeTab=function(e){for(var t,r=0;r<n.tabs.length;r++)if(n.tabs[r].tab===e){t=r;break}if(n.tabs[t].index===n.active){var i=t===n.tabs.length-1?t-1:t+1%n.tabs.length;n.select(i)}n.tabs.splice(t,1)},e.$watch("tabset.active",function(e){angular.isDefined(e)&&e!==r&&n.select(t(e))});var i;e.$on("$destroy",function(){i=!0})}]).directive("uibTabset",function(){return{transclude:!0,replace:!0,scope:{},bindToController:{active:"=?",type:"@"},controller:"UibTabsetController",controllerAs:"tabset",templateUrl:function(e,t){return t.templateUrl||"uib/template/tabs/tabset.html"},link:function(e,t,r){e.vertical=!!angular.isDefined(r.vertical)&&e.$parent.$eval(r.vertical),e.justified=!!angular.isDefined(r.justified)&&e.$parent.$eval(r.justified)}}}).directive("uibTab",["$parse",function(e){return{require:"^uibTabset",replace:!0,templateUrl:function(e,t){return t.templateUrl||"uib/template/tabs/tab.html"},transclude:!0,scope:{heading:"@",index:"=?",classes:"@?",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},controllerAs:"tab",link:function(t,r,n,i,o){t.disabled=!1,n.disable&&t.$parent.$watch(e(n.disable),function(e){t.disabled=!!e}),angular.isUndefined(n.index)&&(i.tabs&&i.tabs.length?t.index=Math.max.apply(null,i.tabs.map(function(e){return e.index}))+1:t.index=0),angular.isUndefined(n.classes)&&(t.classes=""),t.select=function(e){if(!t.disabled){for(var r,n=0;n<i.tabs.length;n++)if(i.tabs[n].tab===t){r=n;break}i.select(r,e)}},i.addTab(t),t.$on("$destroy",function(){i.removeTab(t)}),t.$transcludeFn=o}}}]).directive("uibTabHeadingTransclude",function(){return{restrict:"A",require:"^uibTab",link:function(e,t){e.$watch("headingElement",function(e){e&&(t.html(""),t.append(e))})}}}).directive("uibTabContentTransclude",function(){function e(e){return e.tagName&&(e.hasAttribute("uib-tab-heading")||e.hasAttribute("data-uib-tab-heading")||e.hasAttribute("x-uib-tab-heading")||"uib-tab-heading"===e.tagName.toLowerCase()||"data-uib-tab-heading"===e.tagName.toLowerCase()||"x-uib-tab-heading"===e.tagName.toLowerCase()||"uib:tab-heading"===e.tagName.toLowerCase())}return{restrict:"A",require:"^uibTabset",link:function(t,r,n){var i=t.$eval(n.uibTabContentTransclude).tab;i.$transcludeFn(i.$parent,function(t){angular.forEach(t,function(t){e(t)?i.headingElement=t:r.append(t)})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("uibTimepickerConfig",{hourStep:1,minuteStep:1,secondStep:1,showMeridian:!0,showSeconds:!1,meridians:null,readonlyInput:!1,mousewheel:!0,arrowkeys:!0,showSpinners:!0,templateUrl:"uib/template/timepicker/timepicker.html"}).controller("UibTimepickerController",["$scope","$element","$attrs","$parse","$log","$locale","uibTimepickerConfig",function(e,t,r,n,i,o,a){function s(){var t=+e.hours;if((e.showMeridian?t>0&&t<13:t>=0&&t<24)&&""!==e.hours)return e.showMeridian&&(12===t&&(t=0),e.meridian===w[1]&&(t+=12)),t}function l(){var t=+e.minutes;if(t>=0&&t<60&&""!==e.minutes)return t}function u(){var t=+e.seconds;return t>=0&&t<60?t:void 0}function c(e,t){return null===e?"":angular.isDefined(e)&&e.toString().length<2&&!t?"0"+e:e.toString()}function p(e){d(),C.$setViewValue(new Date(x)),f(e)}function d(){y&&y.$setValidity("hours",!0),b&&b.$setValidity("minutes",!0),E&&E.$setValidity("seconds",!0),C.$setValidity("time",!0),e.invalidHours=!1,e.invalidMinutes=!1,e.invalidSeconds=!1}function f(t){if(C.$modelValue){var r=x.getHours(),n=x.getMinutes(),i=x.getSeconds();e.showMeridian&&(r=0===r||12===r?12:r%12),e.hours="h"===t?r:c(r,!T),"m"!==t&&(e.minutes=c(n)),e.meridian=x.getHours()<12?w[0]:w[1],"s"!==t&&(e.seconds=c(i)),e.meridian=x.getHours()<12?w[0]:w[1]}else e.hours=null,e.minutes=null,e.seconds=null,e.meridian=w[0]}function h(e){x=v(x,e),p()}function g(e,t){return v(e,60*t)}function v(e,t){var r=new Date(e.getTime()+1e3*t),n=new Date(e);return n.setHours(r.getHours(),r.getMinutes(),r.getSeconds()),n}function m(){return(null===e.hours||""===e.hours)&&(null===e.minutes||""===e.minutes)&&(!e.showSeconds||e.showSeconds&&(null===e.seconds||""===e.seconds))}var y,b,E,x=new Date,S=[],C={$setViewValue:angular.noop},w=angular.isDefined(r.meridians)?e.$parent.$eval(r.meridians):a.meridians||o.DATETIME_FORMATS.AMPMS,T=!angular.isDefined(r.padHours)||e.$parent.$eval(r.padHours);e.tabindex=angular.isDefined(r.tabindex)?r.tabindex:0,t.removeAttr("tabindex"),this.init=function(t,n){C=t,C.$render=this.render,C.$formatters.unshift(function(e){return e?new Date(e):null});var i=n.eq(0),o=n.eq(1),s=n.eq(2);y=i.controller("ngModel"),b=o.controller("ngModel"),E=s.controller("ngModel"),(angular.isDefined(r.mousewheel)?e.$parent.$eval(r.mousewheel):a.mousewheel)&&this.setupMousewheelEvents(i,o,s),(angular.isDefined(r.arrowkeys)?e.$parent.$eval(r.arrowkeys):a.arrowkeys)&&this.setupArrowkeyEvents(i,o,s),e.readonlyInput=angular.isDefined(r.readonlyInput)?e.$parent.$eval(r.readonlyInput):a.readonlyInput,this.setupInputEvents(i,o,s)};var A=a.hourStep;r.hourStep&&S.push(e.$parent.$watch(n(r.hourStep),function(e){A=+e}));var I=a.minuteStep;r.minuteStep&&S.push(e.$parent.$watch(n(r.minuteStep),function(e){I=+e}));var L;S.push(e.$parent.$watch(n(r.min),function(e){var t=new Date(e);L=isNaN(t)?void 0:t}));var N;S.push(e.$parent.$watch(n(r.max),function(e){var t=new Date(e);N=isNaN(t)?void 0:t}));var R=!1;r.ngDisabled&&S.push(e.$parent.$watch(n(r.ngDisabled),function(e){R=e})),e.noIncrementHours=function(){var e=g(x,60*A);return R||e>N||e<x&&e<L},e.noDecrementHours=function(){var e=g(x,60*-A);return R||e<L||e>x&&e>N},e.noIncrementMinutes=function(){var e=g(x,I);return R||e>N||e<x&&e<L},e.noDecrementMinutes=function(){var e=g(x,-I);return R||e<L||e>x&&e>N},e.noIncrementSeconds=function(){var e=v(x,_);return R||e>N||e<x&&e<L},e.noDecrementSeconds=function(){var e=v(x,-_);return R||e<L||e>x&&e>N},e.noToggleMeridian=function(){return x.getHours()<12?R||g(x,720)>N:R||g(x,-720)<L};var _=a.secondStep;r.secondStep&&S.push(e.$parent.$watch(n(r.secondStep),function(e){_=+e})),e.showSeconds=a.showSeconds,r.showSeconds&&S.push(e.$parent.$watch(n(r.showSeconds),function(t){e.showSeconds=!!t})),e.showMeridian=a.showMeridian,r.showMeridian&&S.push(e.$parent.$watch(n(r.showMeridian),function(t){if(e.showMeridian=!!t,C.$error.time){var r=s(),n=l();angular.isDefined(r)&&angular.isDefined(n)&&(x.setHours(r),p())}else f()})),this.setupMousewheelEvents=function(t,r,n){var i=function(e){e.originalEvent&&(e=e.originalEvent);var t=e.wheelDelta?e.wheelDelta:-e.deltaY;return e.detail||t>0};t.on("mousewheel wheel",function(t){R||e.$apply(i(t)?e.incrementHours():e.decrementHours()),t.preventDefault()}),r.on("mousewheel wheel",function(t){R||e.$apply(i(t)?e.incrementMinutes():e.decrementMinutes()),t.preventDefault()}),n.on("mousewheel wheel",function(t){R||e.$apply(i(t)?e.incrementSeconds():e.decrementSeconds()),t.preventDefault()})},this.setupArrowkeyEvents=function(t,r,n){t.on("keydown",function(t){R||(38===t.which?(t.preventDefault(),e.incrementHours(),e.$apply()):40===t.which&&(t.preventDefault(),e.decrementHours(),e.$apply()))}),r.on("keydown",function(t){R||(38===t.which?(t.preventDefault(),e.incrementMinutes(),e.$apply()):40===t.which&&(t.preventDefault(),e.decrementMinutes(),e.$apply()))}),n.on("keydown",function(t){R||(38===t.which?(t.preventDefault(),e.incrementSeconds(),e.$apply()):40===t.which&&(t.preventDefault(),e.decrementSeconds(),e.$apply()))})},this.setupInputEvents=function(t,r,n){if(e.readonlyInput)return e.updateHours=angular.noop,e.updateMinutes=angular.noop,void(e.updateSeconds=angular.noop);var i=function(t,r,n){C.$setViewValue(null),C.$setValidity("time",!1),angular.isDefined(t)&&(e.invalidHours=t,y&&y.$setValidity("hours",!1)),angular.isDefined(r)&&(e.invalidMinutes=r,b&&b.$setValidity("minutes",!1)),angular.isDefined(n)&&(e.invalidSeconds=n,E&&E.$setValidity("seconds",!1))};e.updateHours=function(){var e=s(),t=l();C.$setDirty(),angular.isDefined(e)&&angular.isDefined(t)?(x.setHours(e),x.setMinutes(t),x<L||x>N?i(!0):p("h")):i(!0)},t.on("blur",function(t){C.$setTouched(),m()?d():null===e.hours||""===e.hours?i(!0):!e.invalidHours&&e.hours<10&&e.$apply(function(){e.hours=c(e.hours,!T)})}),e.updateMinutes=function(){var e=l(),t=s();C.$setDirty(),angular.isDefined(e)&&angular.isDefined(t)?(x.setHours(t),x.setMinutes(e),x<L||x>N?i(void 0,!0):p("m")):i(void 0,!0)},r.on("blur",function(t){C.$setTouched(),m()?d():null===e.minutes?i(void 0,!0):!e.invalidMinutes&&e.minutes<10&&e.$apply(function(){e.minutes=c(e.minutes)})}),e.updateSeconds=function(){var e=u();C.$setDirty(),angular.isDefined(e)?(x.setSeconds(e),p("s")):i(void 0,void 0,!0)},n.on("blur",function(t){m()?d():!e.invalidSeconds&&e.seconds<10&&e.$apply(function(){e.seconds=c(e.seconds)})})},this.render=function(){var t=C.$viewValue;isNaN(t)?(C.$setValidity("time",!1),i.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(t&&(x=t),x<L||x>N?(C.$setValidity("time",!1),e.invalidHours=!0,e.invalidMinutes=!0):d(),f())},e.showSpinners=angular.isDefined(r.showSpinners)?e.$parent.$eval(r.showSpinners):a.showSpinners,e.incrementHours=function(){e.noIncrementHours()||h(60*A*60)},e.decrementHours=function(){e.noDecrementHours()||h(60*-A*60)},e.incrementMinutes=function(){e.noIncrementMinutes()||h(60*I)},e.decrementMinutes=function(){e.noDecrementMinutes()||h(60*-I)},e.incrementSeconds=function(){e.noIncrementSeconds()||h(_)},e.decrementSeconds=function(){e.noDecrementSeconds()||h(-_)},e.toggleMeridian=function(){var t=l(),r=s();e.noToggleMeridian()||(angular.isDefined(t)&&angular.isDefined(r)?h(720*(x.getHours()<12?60:-60)):e.meridian=e.meridian===w[0]?w[1]:w[0])},e.blur=function(){C.$setTouched()},e.$on("$destroy",function(){for(;S.length;)S.shift()()})}]).directive("uibTimepicker",["uibTimepickerConfig",function(e){return{require:["uibTimepicker","?^ngModel"],restrict:"A",controller:"UibTimepickerController",controllerAs:"timepicker",scope:{},templateUrl:function(t,r){return r.templateUrl||e.templateUrl},link:function(e,t,r,n){var i=n[0],o=n[1];o&&i.init(o,t.find("input"))}}}]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.debounce","ui.bootstrap.position"]).factory("uibTypeaheadParser",["$parse",function(e){var t=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(r){var n=r.match(t);if(!n)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+r+'".');return{itemName:n[3],source:e(n[4]),viewMapper:e(n[2]||n[1]),modelMapper:e(n[1])}}}}]).controller("UibTypeaheadController",["$scope","$element","$attrs","$compile","$parse","$q","$timeout","$document","$window","$rootScope","$$debounce","$uibPosition","uibTypeaheadParser",function(e,t,r,n,i,o,a,s,l,u,c,p,d){function f(){G.moveInProgress||(G.moveInProgress=!0,G.$digest()),K()}function h(){G.position=R?p.offset(t):p.position(t),G.position.top+=t.prop("offsetHeight")}function g(e){var t;return angular.version.minor<6?(t=e.$options||{},t.getOption=function(e){return t[e]}):t=e.$options,t}var v,m,y=[9,13,27,38,40],b=e.$eval(r.typeaheadMinLength);b||0===b||(b=1),e.$watch(r.typeaheadMinLength,function(e){b=e||0===e?e:1});var E=e.$eval(r.typeaheadWaitMs)||0,x=!1!==e.$eval(r.typeaheadEditable);e.$watch(r.typeaheadEditable,function(e){x=!1!==e});var S,C,w=i(r.typeaheadLoading).assign||angular.noop,T=r.typeaheadShouldSelect?i(r.typeaheadShouldSelect):function(e,t){var r=t.$event;return 13===r.which||9===r.which},A=i(r.typeaheadOnSelect),I=!!angular.isDefined(r.typeaheadSelectOnBlur)&&e.$eval(r.typeaheadSelectOnBlur),L=i(r.typeaheadNoResults).assign||angular.noop,N=r.typeaheadInputFormatter?i(r.typeaheadInputFormatter):void 0,R=!!r.typeaheadAppendToBody&&e.$eval(r.typeaheadAppendToBody),_=r.typeaheadAppendTo?e.$eval(r.typeaheadAppendTo):null,k=!1!==e.$eval(r.typeaheadFocusFirst),O=!!r.typeaheadSelectOnExact&&e.$eval(r.typeaheadSelectOnExact),P=i(r.typeaheadIsOpen).assign||angular.noop,D=e.$eval(r.typeaheadShowHint)||!1,F=i(r.ngModel),M=i(r.ngModel+"($$$p)"),j=function(t,r){return angular.isFunction(F(e))&&m.getOption("getterSetter")?M(t,{$$$p:r}):F.assign(t,r)},$=d.parse(r.uibTypeahead),G=e.$new(),B=e.$on("$destroy",function(){G.$destroy()});G.$on("$destroy",B);var H="typeahead-"+G.$id+"-"+Math.floor(1e4*Math.random());t.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":H});var U,V;D&&(U=angular.element("<div></div>"),U.css("position","relative"),t.after(U),V=t.clone(),V.attr("placeholder",""),V.attr("tabindex","-1"),V.val(""),V.css({position:"absolute",top:"0px",left:"0px","border-color":"transparent","box-shadow":"none",opacity:1,background:"none 0% 0% / auto repeat scroll padding-box border-box rgb(255, 255, 255)",color:"#999"}),t.css({position:"relative","vertical-align":"top","background-color":"transparent"}),V.attr("id")&&V.removeAttr("id"),U.append(V),V.after(t));var q=angular.element("<div uib-typeahead-popup></div>");q.attr({id:H,matches:"matches",active:"activeIdx",select:"select(activeIdx, evt)","move-in-progress":"moveInProgress",query:"query",position:"position","assign-is-open":"assignIsOpen(isOpen)",debounce:"debounceUpdate"}),angular.isDefined(r.typeaheadTemplateUrl)&&q.attr("template-url",r.typeaheadTemplateUrl),angular.isDefined(r.typeaheadPopupTemplateUrl)&&q.attr("popup-template-url",r.typeaheadPopupTemplateUrl);var z=function(){D&&V.val("")},Q=function(){G.matches=[],G.activeIdx=-1,t.attr("aria-expanded",!1),z()},W=function(e){return H+"-option-"+e};G.$watch("activeIdx",function(e){e<0?t.removeAttr("aria-activedescendant"):t.attr("aria-activedescendant",W(e))});var X=function(e,t){return!!(G.matches.length>t&&e)&&e.toUpperCase()===G.matches[t].label.toUpperCase()},Y=function(r,n){var i={$viewValue:r};w(e,!0),L(e,!1),o.when($.source(e,i)).then(function(o){var a=r===v.$viewValue;if(a&&S)if(o&&o.length>0){G.activeIdx=k?0:-1,L(e,!1),G.matches.length=0;for(var s=0;s<o.length;s++)i[$.itemName]=o[s],G.matches.push({id:W(s),label:$.viewMapper(G,i),model:o[s]});if(G.query=r,h(),t.attr("aria-expanded",!0),O&&1===G.matches.length&&X(r,0)&&(angular.isNumber(G.debounceUpdate)||angular.isObject(G.debounceUpdate)?c(function(){G.select(0,n)},angular.isNumber(G.debounceUpdate)?G.debounceUpdate:G.debounceUpdate.default):G.select(0,n)),D){var l=G.matches[0].label;angular.isString(r)&&r.length>0&&l.slice(0,r.length).toUpperCase()===r.toUpperCase()?V.val(r+l.slice(r.length)):V.val("")}}else Q(),L(e,!0);a&&w(e,!1)},function(){Q(),w(e,!1),L(e,!0)})};R&&(angular.element(l).on("resize",f),s.find("body").on("scroll",f));var K=c(function(){G.matches.length&&h(),G.moveInProgress=!1},200);G.moveInProgress=!1,G.query=void 0;var J,Z=function(e){J=a(function(){Y(e)},E)},ee=function(){J&&a.cancel(J)};Q(),G.assignIsOpen=function(t){P(e,t)},G.select=function(n,i){var o,s,l={};C=!0,l[$.itemName]=s=G.matches[n].model,o=$.modelMapper(e,l),j(e,o),v.$setValidity("editable",!0),v.$setValidity("parse",!0),A(e,{$item:s,$model:o,$label:$.viewMapper(e,l),$event:i}),Q(),!1!==G.$eval(r.typeaheadFocusOnSelect)&&a(function(){t[0].focus()},0,!1)},t.on("keydown",function(t){if(0!==G.matches.length&&-1!==y.indexOf(t.which)){var r=T(e,{$event:t});if(-1===G.activeIdx&&r||9===t.which&&t.shiftKey)return Q(),void G.$digest();t.preventDefault();var n;switch(t.which){case 27:t.stopPropagation(),Q(),e.$digest();break;case 38:G.activeIdx=(G.activeIdx>0?G.activeIdx:G.matches.length)-1,G.$digest(),n=q[0].querySelectorAll(".uib-typeahead-match")[G.activeIdx],n.parentNode.scrollTop=n.offsetTop;break;case 40:G.activeIdx=(G.activeIdx+1)%G.matches.length,G.$digest(),n=q[0].querySelectorAll(".uib-typeahead-match")[G.activeIdx],n.parentNode.scrollTop=n.offsetTop;break;default:r&&G.$apply(function(){angular.isNumber(G.debounceUpdate)||angular.isObject(G.debounceUpdate)?c(function(){G.select(G.activeIdx,t)},angular.isNumber(G.debounceUpdate)?G.debounceUpdate:G.debounceUpdate.default):G.select(G.activeIdx,t)})}}}),t.on("focus",function(e){S=!0,0!==b||v.$viewValue||a(function(){Y(v.$viewValue,e)},0)}),t.on("blur",function(e){I&&G.matches.length&&-1!==G.activeIdx&&!C&&(C=!0,G.$apply(function(){angular.isObject(G.debounceUpdate)&&angular.isNumber(G.debounceUpdate.blur)?c(function(){G.select(G.activeIdx,e)},G.debounceUpdate.blur):G.select(G.activeIdx,e)})),!x&&v.$error.editable&&(v.$setViewValue(),G.$apply(function(){v.$setValidity("editable",!0),v.$setValidity("parse",!0)}),t.val("")),S=!1,C=!1});var te=function(r){t[0]!==r.target&&3!==r.which&&0!==G.matches.length&&(Q(),u.$$phase||e.$digest())};s.on("click",te),e.$on("$destroy",function(){s.off("click",te),(R||_)&&re.remove(),R&&(angular.element(l).off("resize",f),s.find("body").off("scroll",f)),q.remove(),D&&U.remove()});var re=n(q)(G);R?s.find("body").append(re):_?angular.element(_).eq(0).append(re):t.after(re),this.init=function(t){v=t,m=g(v),G.debounceUpdate=i(m.getOption("debounce"))(e),v.$parsers.unshift(function(t){return S=!0,0===b||t&&t.length>=b?E>0?(ee(),Z(t)):Y(t):(w(e,!1),ee(),Q()),x?t:t?void v.$setValidity("editable",!1):(v.$setValidity("editable",!0),null)}),v.$formatters.push(function(t){var r,n,i={};return x||v.$setValidity("editable",!0),N?(i.$model=t,N(e,i)):(i[$.itemName]=t,r=$.viewMapper(e,i),i[$.itemName]=void 0,n=$.viewMapper(e,i),r!==n?r:t)})}}]).directive("uibTypeahead",function(){return{controller:"UibTypeaheadController",require:["ngModel","uibTypeahead"],link:function(e,t,r,n){n[1].init(n[0])}}}).directive("uibTypeaheadPopup",["$$debounce",function(e){return{scope:{matches:"=",query:"=",active:"=",position:"&",moveInProgress:"=",select:"&",assignIsOpen:"&",debounce:"&"},replace:!0,templateUrl:function(e,t){return t.popupTemplateUrl||"uib/template/typeahead/typeahead-popup.html"},link:function(t,r,n){t.templateUrl=n.templateUrl,t.isOpen=function(){var e=t.matches.length>0;return t.assignIsOpen({isOpen:e}),e},t.isActive=function(e){return t.active===e},t.selectActive=function(e){t.active=e},t.selectMatch=function(r,n){var i=t.debounce();angular.isNumber(i)||angular.isObject(i)?e(function(){t.select({activeIdx:r,evt:n})},angular.isNumber(i)?i:i.default):t.select({activeIdx:r,evt:n})}}}}]).directive("uibTypeaheadMatch",["$templateRequest","$compile","$parse",function(e,t,r){return{scope:{index:"=",match:"=",query:"="},link:function(n,i,o){var a=r(o.templateUrl)(n.$parent)||"uib/template/typeahead/typeahead-match.html";e(a).then(function(e){var r=angular.element(e.trim());i.replaceWith(r),t(r)(n)})}}}]).filter("uibTypeaheadHighlight",["$sce","$injector","$log",function(e,t,r){function n(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}function i(e){return/<.*>/g.test(e)}var o;return o=t.has("$sanitize"),function(t,a){return!o&&i(t)&&r.warn("Unsafe use of typeahead please use ngSanitize"),t=a?(""+t).replace(new RegExp(n(a),"gi"),"<strong>$&</strong>"):t,o||(t=e.trustAsHtml(t)),t}}]),angular.module("uib/template/accordion/accordion-group.html",[]).run(["$templateCache",function(e){e.put("uib/template/accordion/accordion-group.html",'<div role="tab" id="{{::headingId}}" aria-selected="{{isOpen}}" class="panel-heading" ng-keypress="toggleOpen($event)">\n  <h4 class="panel-title">\n    <a role="button" data-toggle="collapse" href aria-expanded="{{isOpen}}" aria-controls="{{::panelId}}" tabindex="0" class="accordion-toggle" ng-click="toggleOpen()" uib-accordion-transclude="heading" ng-disabled="isDisabled" uib-tabindex-toggle><span uib-accordion-header ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></a>\n  </h4>\n</div>\n<div id="{{::panelId}}" aria-labelledby="{{::headingId}}" aria-hidden="{{!isOpen}}" role="tabpanel" class="panel-collapse collapse" uib-collapse="!isOpen">\n  <div class="panel-body" ng-transclude></div>\n</div>\n')}]),angular.module("uib/template/accordion/accordion.html",[]).run(["$templateCache",function(e){e.put("uib/template/accordion/accordion.html",'<div role="tablist" class="panel-group" ng-transclude></div>')}]),angular.module("uib/template/alert/alert.html",[]).run(["$templateCache",function(e){e.put("uib/template/alert/alert.html",'<button ng-show="closeable" type="button" class="close" ng-click="close({$event: $event})">\n  <span aria-hidden="true">&times;</span>\n  <span class="sr-only">Close</span>\n</button>\n<div ng-transclude></div>\n')}]),angular.module("uib/template/carousel/carousel.html",[]).run(["$templateCache",function(e){e.put("uib/template/carousel/carousel.html",'<div class="carousel-inner" ng-transclude></div>\n<a role="button" href class="left carousel-control" ng-click="prev()" ng-class="{ disabled: isPrevDisabled() }" ng-show="slides.length > 1">\n  <span aria-hidden="true" class="glyphicon glyphicon-chevron-left"></span>\n  <span class="sr-only">previous</span>\n</a>\n<a role="button" href class="right carousel-control" ng-click="next()" ng-class="{ disabled: isNextDisabled() }" ng-show="slides.length > 1">\n  <span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>\n  <span class="sr-only">next</span>\n</a>\n<ol class="carousel-indicators" ng-show="slides.length > 1">\n  <li ng-repeat="slide in slides | orderBy:indexOfSlide track by $index" ng-class="{ active: isActive(slide) }" ng-click="select(slide)">\n    <span class="sr-only">slide {{ $index + 1 }} of {{ slides.length }}<span ng-if="isActive(slide)">, currently active</span></span>\n  </li>\n</ol>\n')}]),angular.module("uib/template/carousel/slide.html",[]).run(["$templateCache",function(e){e.put("uib/template/carousel/slide.html",'<div class="text-center" ng-transclude></div>\n')}]),angular.module("uib/template/datepicker/datepicker.html",[]).run(["$templateCache",function(e){e.put("uib/template/datepicker/datepicker.html",'<div ng-switch="datepickerMode">\n  <div uib-daypicker ng-switch-when="day" tabindex="0" class="uib-daypicker"></div>\n  <div uib-monthpicker ng-switch-when="month" tabindex="0" class="uib-monthpicker"></div>\n  <div uib-yearpicker ng-switch-when="year" tabindex="0" class="uib-yearpicker"></div>\n</div>\n')}]),angular.module("uib/template/datepicker/day.html",[]).run(["$templateCache",function(e){e.put("uib/template/datepicker/day.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-left"></i><span class="sr-only">previous</span></button></th>\n      <th colspan="{{::5 + showWeeks}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-right"></i><span class="sr-only">next</span></button></th>\n    </tr>\n    <tr>\n      <th ng-if="showWeeks" class="text-center"></th>\n      <th ng-repeat="label in ::labels track by $index" class="text-center"><small aria-label="{{::label.full}}">{{::label.abbr}}</small></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-weeks" ng-repeat="row in rows track by $index" role="row">\n      <td ng-if="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n      <td ng-repeat="dt in row" class="uib-day text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" class="btn btn-default btn-sm"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/datepicker/month.html",[]).run(["$templateCache",function(e){e.put("uib/template/datepicker/month.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-left"></i><span class="sr-only">previous</span></button></th>\n      <th colspan="{{::yearHeaderColspan}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-right"></i><span class="sr-only">next</span></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-months" ng-repeat="row in rows track by $index" role="row">\n      <td ng-repeat="dt in row" class="uib-month text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" class="btn btn-default"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/datepicker/popup.html",[]).run(["$templateCache",function(e){e.put("uib/template/datepicker/popup.html",'<div>\n  <ul class="uib-datepicker-popup dropdown-menu uib-position-measure" dropdown-nested ng-if="isOpen" ng-keydown="keydown($event)" ng-click="$event.stopPropagation()">\n    <li ng-transclude></li>\n    <li ng-if="showButtonBar" class="uib-button-bar">\n      <span class="btn-group pull-left">\n        <button type="button" class="btn btn-sm btn-info uib-datepicker-current" ng-click="select(\'today\', $event)" ng-disabled="isDisabled(\'today\')">{{ getText(\'current\') }}</button>\n        <button type="button" class="btn btn-sm btn-danger uib-clear" ng-click="select(null, $event)">{{ getText(\'clear\') }}</button>\n      </span>\n      <button type="button" class="btn btn-sm btn-success pull-right uib-close" ng-click="close($event)">{{ getText(\'close\') }}</button>\n    </li>\n  </ul>\n</div>\n')}]),angular.module("uib/template/datepicker/year.html",[]).run(["$templateCache",function(e){e.put("uib/template/datepicker/year.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-left"></i><span class="sr-only">previous</span></button></th>\n      <th colspan="{{::columns - 2}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-right"></i><span class="sr-only">next</span></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-years" ng-repeat="row in rows track by $index" role="row">\n      <td ng-repeat="dt in row" class="uib-year text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" class="btn btn-default"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/datepickerPopup/popup.html",[]).run(["$templateCache",function(e){e.put("uib/template/datepickerPopup/popup.html",'<ul role="presentation" class="uib-datepicker-popup dropdown-menu uib-position-measure" dropdown-nested ng-if="isOpen" ng-keydown="keydown($event)" ng-click="$event.stopPropagation()">\n  <li ng-transclude></li>\n  <li ng-if="showButtonBar" class="uib-button-bar">\n    <span class="btn-group pull-left">\n      <button type="button" class="btn btn-sm btn-info uib-datepicker-current" ng-click="select(\'today\', $event)" ng-disabled="isDisabled(\'today\')">{{ getText(\'current\') }}</button>\n      <button type="button" class="btn btn-sm btn-danger uib-clear" ng-click="select(null, $event)">{{ getText(\'clear\') }}</button>\n    </span>\n    <button type="button" class="btn btn-sm btn-success pull-right uib-close" ng-click="close($event)">{{ getText(\'close\') }}</button>\n  </li>\n</ul>\n')}]),angular.module("uib/template/modal/backdrop.html",[]).run(["$templateCache",function(e){e.put("uib/template/modal/backdrop.html",'<div class="modal-backdrop"\n     uib-modal-animation-class="fade"\n     modal-in-class="in"\n     ng-style="{\'z-index\': 1040 + (index && 1 || 0) + index*10}"\n></div>\n')}]),angular.module("uib/template/modal/window.html",[]).run(["$templateCache",function(e){e.put("uib/template/modal/window.html","<div class=\"modal-dialog {{size ? 'modal-' + size : ''}}\"><div class=\"modal-content\" uib-modal-transclude></div></div>\n")}]),angular.module("uib/template/pager/pager.html",[]).run(["$templateCache",function(e){e.put("uib/template/pager/pager.html",'<li ng-class="{disabled: noPrevious()||ngDisabled, previous: align}"><a href ng-click="selectPage(page - 1, $event)" ng-disabled="noPrevious()||ngDisabled" uib-tabindex-toggle>{{::getText(\'previous\')}}</a></li>\n<li ng-class="{disabled: noNext()||ngDisabled, next: align}"><a href ng-click="selectPage(page + 1, $event)" ng-disabled="noNext()||ngDisabled" uib-tabindex-toggle>{{::getText(\'next\')}}</a></li>\n')}]),angular.module("uib/template/pagination/pagination.html",[]).run(["$templateCache",function(e){e.put("uib/template/pagination/pagination.html",'<li role="menuitem" ng-if="::boundaryLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-first"><a href ng-click="selectPage(1, $event)" ng-disabled="noPrevious()||ngDisabled" uib-tabindex-toggle>{{::getText(\'first\')}}</a></li>\n<li role="menuitem" ng-if="::directionLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-prev"><a href ng-click="selectPage(page - 1, $event)" ng-disabled="noPrevious()||ngDisabled" uib-tabindex-toggle>{{::getText(\'previous\')}}</a></li>\n<li role="menuitem" ng-repeat="page in pages track by $index" ng-class="{active: page.active,disabled: ngDisabled&&!page.active}" class="pagination-page"><a href ng-click="selectPage(page.number, $event)" ng-disabled="ngDisabled&&!page.active" uib-tabindex-toggle>{{page.text}}</a></li>\n<li role="menuitem" ng-if="::directionLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-next"><a href ng-click="selectPage(page + 1, $event)" ng-disabled="noNext()||ngDisabled" uib-tabindex-toggle>{{::getText(\'next\')}}</a></li>\n<li role="menuitem" ng-if="::boundaryLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-last"><a href ng-click="selectPage(totalPages, $event)" ng-disabled="noNext()||ngDisabled" uib-tabindex-toggle>{{::getText(\'last\')}}</a></li>\n')}]),angular.module("uib/template/tooltip/tooltip-html-popup.html",[]).run(["$templateCache",function(e){e.put("uib/template/tooltip/tooltip-html-popup.html",'<div class="tooltip-arrow"></div>\n<div class="tooltip-inner" ng-bind-html="contentExp()"></div>\n')}]),angular.module("uib/template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(e){e.put("uib/template/tooltip/tooltip-popup.html",'<div class="tooltip-arrow"></div>\n<div class="tooltip-inner" ng-bind="content"></div>\n')}]),angular.module("uib/template/tooltip/tooltip-template-popup.html",[]).run(["$templateCache",function(e){e.put("uib/template/tooltip/tooltip-template-popup.html",'<div class="tooltip-arrow"></div>\n<div class="tooltip-inner"\n  uib-tooltip-template-transclude="contentExp()"\n  tooltip-template-transclude-scope="originScope()"></div>\n')}]),angular.module("uib/template/popover/popover-html.html",[]).run(["$templateCache",function(e){e.put("uib/template/popover/popover-html.html",'<div class="arrow"></div>\n\n<div class="popover-inner">\n    <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n    <div class="popover-content" ng-bind-html="contentExp()"></div>\n</div>\n')}]),angular.module("uib/template/popover/popover-template.html",[]).run(["$templateCache",function(e){e.put("uib/template/popover/popover-template.html",'<div class="arrow"></div>\n\n<div class="popover-inner">\n    <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n    <div class="popover-content"\n      uib-tooltip-template-transclude="contentExp()"\n      tooltip-template-transclude-scope="originScope()"></div>\n</div>\n')}]),angular.module("uib/template/popover/popover.html",[]).run(["$templateCache",function(e){e.put("uib/template/popover/popover.html",'<div class="arrow"></div>\n\n<div class="popover-inner">\n    <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n    <div class="popover-content" ng-bind="content"></div>\n</div>\n')}]),angular.module("uib/template/progressbar/bar.html",[]).run(["$templateCache",function(e){e.put("uib/template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" ng-transclude></div>\n')}]),angular.module("uib/template/progressbar/progress.html",[]).run(["$templateCache",function(e){e.put("uib/template/progressbar/progress.html",'<div class="progress" ng-transclude aria-labelledby="{{::title}}"></div>')}]),angular.module("uib/template/progressbar/progressbar.html",[]).run(["$templateCache",function(e){e.put("uib/template/progressbar/progressbar.html",'<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" ng-transclude></div>\n</div>\n')}]),angular.module("uib/template/rating/rating.html",[]).run(["$templateCache",function(e){e.put("uib/template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}" aria-valuetext="{{title}}">\n    <span ng-repeat-start="r in range track by $index" class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    <i ng-repeat-end ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')" ng-attr-title="{{r.title}}"></i>\n</span>\n')}]),angular.module("uib/template/tabs/tab.html",[]).run(["$templateCache",function(e){e.put("uib/template/tabs/tab.html",'<li ng-class="[{active: active, disabled: disabled}, classes]" class="uib-tab nav-item">\n  <a href ng-click="select($event)" class="nav-link" uib-tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("uib/template/tabs/tabset.html",[]).run(["$templateCache",function(e){e.put("uib/template/tabs/tabset.html",'<div>\n  <ul class="nav nav-{{tabset.type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane"\n         ng-repeat="tab in tabset.tabs"\n         ng-class="{active: tabset.active === tab.index}"\n         uib-tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("uib/template/timepicker/timepicker.html",[]).run(["$templateCache",function(e){e.put("uib/template/timepicker/timepicker.html",'<table class="uib-timepicker">\n  <tbody>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td class="uib-increment hours"><a ng-click="incrementHours()" ng-class="{disabled: noIncrementHours()}" class="btn btn-link" ng-disabled="noIncrementHours()" tabindex="-1"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td>&nbsp;</td>\n      <td class="uib-increment minutes"><a ng-click="incrementMinutes()" ng-class="{disabled: noIncrementMinutes()}" class="btn btn-link" ng-disabled="noIncrementMinutes()" tabindex="-1"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td ng-show="showSeconds">&nbsp;</td>\n      <td ng-show="showSeconds" class="uib-increment seconds"><a ng-click="incrementSeconds()" ng-class="{disabled: noIncrementSeconds()}" class="btn btn-link" ng-disabled="noIncrementSeconds()" tabindex="-1"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n    <tr>\n      <td class="form-group uib-time hours" ng-class="{\'has-error\': invalidHours}">\n        <input type="text" placeholder="HH" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementHours()" ng-blur="blur()">\n      </td>\n      <td class="uib-separator">:</td>\n      <td class="form-group uib-time minutes" ng-class="{\'has-error\': invalidMinutes}">\n        <input type="text" placeholder="MM" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementMinutes()" ng-blur="blur()">\n      </td>\n      <td ng-show="showSeconds" class="uib-separator">:</td>\n      <td class="form-group uib-time seconds" ng-class="{\'has-error\': invalidSeconds}" ng-show="showSeconds">\n        <input type="text" placeholder="SS" ng-model="seconds" ng-change="updateSeconds()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementSeconds()" ng-blur="blur()">\n      </td>\n      <td ng-show="showMeridian" class="uib-time am-pm"><button type="button" ng-class="{disabled: noToggleMeridian()}" class="btn btn-default text-center" ng-click="toggleMeridian()" ng-disabled="noToggleMeridian()" tabindex="{{::tabindex}}">{{meridian}}</button></td>\n    </tr>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td class="uib-decrement hours"><a ng-click="decrementHours()" ng-class="{disabled: noDecrementHours()}" class="btn btn-link" ng-disabled="noDecrementHours()" tabindex="-1"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td>&nbsp;</td>\n      <td class="uib-decrement minutes"><a ng-click="decrementMinutes()" ng-class="{disabled: noDecrementMinutes()}" class="btn btn-link" ng-disabled="noDecrementMinutes()" tabindex="-1"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td ng-show="showSeconds">&nbsp;</td>\n      <td ng-show="showSeconds" class="uib-decrement seconds"><a ng-click="decrementSeconds()" ng-class="{disabled: noDecrementSeconds()}" class="btn btn-link" ng-disabled="noDecrementSeconds()" tabindex="-1"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(e){e.put("uib/template/typeahead/typeahead-match.html",'<a href\n   tabindex="-1"\n   ng-bind-html="match.label | uibTypeaheadHighlight:query"\n   ng-attr-title="{{match.label}}"></a>\n')}]),angular.module("uib/template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(e){e.put("uib/template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-show="isOpen() && !moveInProgress" ng-style="{top: position().top+\'px\', left: position().left+\'px\'}" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li class="uib-typeahead-match" ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index, $event)" role="option" id="{{::match.id}}">\n        <div uib-typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n')}]),angular.module("ui.bootstrap.carousel").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibCarouselCss&&angular.element(document).find("head").prepend('<style type="text/css">.ng-animate.item:not(.left):not(.right){-webkit-transition:0s ease-in-out left;transition:0s ease-in-out left}</style>'),angular.$$uibCarouselCss=!0}),angular.module("ui.bootstrap.datepicker").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibDatepickerCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-datepicker .uib-title{width:100%;}.uib-day button,.uib-month button,.uib-year button{min-width:100%;}.uib-left,.uib-right{width:100%}</style>'),angular.$$uibDatepickerCss=!0}),angular.module("ui.bootstrap.position").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibPositionCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-position-measure{display:block !important;visibility:hidden !important;position:absolute !important;top:-9999px !important;left:-9999px !important;}.uib-position-scrollbar-measure{position:absolute !important;top:-9999px !important;width:50px !important;height:50px !important;overflow:scroll !important;}.uib-position-body-scrollbar-measure{overflow:scroll !important;}</style>'),angular.$$uibPositionCss=!0}),angular.module("ui.bootstrap.datepickerPopup").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibDatepickerpopupCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-datepicker-popup.dropdown-menu{display:block;float:none;margin:0;}.uib-button-bar{padding:10px 9px 2px;}</style>'),angular.$$uibDatepickerpopupCss=!0}),angular.module("ui.bootstrap.tooltip").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibTooltipCss&&angular.element(document).find("head").prepend('<style type="text/css">[uib-tooltip-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-popup].tooltip.right-bottom > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.right-bottom > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.right-bottom > .tooltip-arrow,[uib-popover-popup].popover.top-left > .arrow,[uib-popover-popup].popover.top-right > .arrow,[uib-popover-popup].popover.bottom-left > .arrow,[uib-popover-popup].popover.bottom-right > .arrow,[uib-popover-popup].popover.left-top > .arrow,[uib-popover-popup].popover.left-bottom > .arrow,[uib-popover-popup].popover.right-top > .arrow,[uib-popover-popup].popover.right-bottom > .arrow,[uib-popover-html-popup].popover.top-left > .arrow,[uib-popover-html-popup].popover.top-right > .arrow,[uib-popover-html-popup].popover.bottom-left > .arrow,[uib-popover-html-popup].popover.bottom-right > .arrow,[uib-popover-html-popup].popover.left-top > .arrow,[uib-popover-html-popup].popover.left-bottom > .arrow,[uib-popover-html-popup].popover.right-top > .arrow,[uib-popover-html-popup].popover.right-bottom > .arrow,[uib-popover-template-popup].popover.top-left > .arrow,[uib-popover-template-popup].popover.top-right > .arrow,[uib-popover-template-popup].popover.bottom-left > .arrow,[uib-popover-template-popup].popover.bottom-right > .arrow,[uib-popover-template-popup].popover.left-top > .arrow,[uib-popover-template-popup].popover.left-bottom > .arrow,[uib-popover-template-popup].popover.right-top > .arrow,[uib-popover-template-popup].popover.right-bottom > .arrow{top:auto;bottom:auto;left:auto;right:auto;margin:0;}[uib-popover-popup].popover,[uib-popover-html-popup].popover,[uib-popover-template-popup].popover{display:block !important;}</style>'),angular.$$uibTooltipCss=!0}),angular.module("ui.bootstrap.timepicker").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibTimepickerCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-time input{width:50px;}</style>'),angular.$$uibTimepickerCss=!0}),angular.module("ui.bootstrap.typeahead").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibTypeaheadCss&&angular.element(document).find("head").prepend('<style type="text/css">[uib-typeahead-popup].dropdown-menu{display:block;}</style>'),angular.$$uibTypeaheadCss=!0})},function(e,t,r){r(361),e.exports="toastr"},function(e,t){!function(){"use strict";function e(e,t,r,n,i,o,a){function s(){return x.length}function l(e){if(1!==arguments.length||e)if(e)h(e.toastId);else for(var t=0;t<x.length;t++)h(x[t].toastId)}function u(e,t,r){return g(v().iconClasses.error,e,t,r)}function c(e,t,r){return g(v().iconClasses.info,e,t,r)}function p(e,t,r){return g(v().iconClasses.success,e,t,r)}function d(e,t,r){return g(v().iconClasses.warning,e,t,r)}function f(e,t){e&&e.isOpened&&x.indexOf(e)>=0&&e.scope.refreshTimer(t)}function h(t,r){function n(){return!x.length}var i=function(e){for(var t=0;t<x.length;t++)if(x[t].toastId===e)return x[t]}(t);i&&!i.deleting&&(i.deleting=!0,i.isOpened=!1,e.leave(i.el).then(function(){i.scope.options.onHidden&&i.scope.options.onHidden(!!r,i),i.scope.$destroy();var e=x.indexOf(i);delete C[i.scope.message],x.splice(e,1);var t=o.maxOpened;t&&x.length>=t&&x[t-1].open.resolve(),n()&&(b.remove(),b=null,w=a.defer())}))}function g(e,t,r,n){return angular.isObject(r)&&(n=r,r=null),y({iconClass:e,message:t,optionsOverride:n,title:r})}function v(){return angular.extend({},o)}function m(t){if(b)return w.promise;b=angular.element("<div></div>"),b.attr("id",t.containerId),b.addClass(t.positionClass),b.css({"pointer-events":"auto"});var r=angular.element(document.querySelector(t.target));if(!r||!r.length)throw"Target for toasts doesn't exist";return e.enter(b,r).then(function(){w.resolve()}),w.promise}function y(r){function o(e,t,r){function n(t){if(r[t])return function(){r[t](e)}}r.allowHtml?(e.scope.allowHtml=!0,e.scope.title=i.trustAsHtml(t.title),e.scope.message=i.trustAsHtml(t.message)):(e.scope.title=t.title,e.scope.message=t.message),e.scope.toastType=e.iconClass,e.scope.toastId=e.toastId,e.scope.extraData=r.extraData,e.scope.options={extendedTimeOut:r.extendedTimeOut,messageClass:r.messageClass,onHidden:r.onHidden,onShown:n("onShown"),onTap:n("onTap"),progressBar:r.progressBar,tapToDismiss:r.tapToDismiss,timeOut:r.timeOut,titleClass:r.titleClass,toastClass:r.toastClass},r.closeButton&&(e.scope.options.closeHtml=r.closeHtml)}function s(e){var r=angular.element("<div toast></div>");return t.get("$compile")(r)(e)}var l=v();if(!function(){var e=l.preventDuplicates&&r.message===S,t=l.preventOpenDuplicates&&C[r.message];return!(!e&&!t)||(S=r.message,C[r.message]=!0,!1)}()){var u=function(){var e={toastId:E++,isOpened:!1,scope:n.$new(),open:a.defer()};return e.iconClass=r.iconClass,r.optionsOverride&&(angular.extend(l,function(e){for(var t=["containerId","iconClasses","maxOpened","newestOnTop","positionClass","preventDuplicates","preventOpenDuplicates","templates"],r=0,n=t.length;r<n;r++)delete e[t[r]];return e}(r.optionsOverride)),e.iconClass=r.optionsOverride.iconClass||e.iconClass),o(e,r,l),e.el=s(e.scope),e}();if(x.push(u),function(){return l.autoDismiss&&l.maxOpened&&x.length>l.maxOpened}())for(var c=x.slice(0,x.length-l.maxOpened),p=0,d=c.length;p<d;p++)h(c[p].toastId);return function(){return l.maxOpened&&x.length<=l.maxOpened||!l.maxOpened}()&&u.open.resolve(),u.open.promise.then(function(){m(l).then(function(){if(u.isOpened=!0,l.newestOnTop)e.enter(u.el,b).then(function(){u.scope.init()});else{var t=b[0].lastChild?angular.element(b[0].lastChild):null;e.enter(u.el,b,t).then(function(){u.scope.init()})}})}),u}}var b,E=0,x=[],S="",C={},w=a.defer();return{active:s,clear:l,error:u,info:c,remove:h,success:p,warning:d,refreshTimer:f}}angular.module("toastr",[]).factory("toastr",e),e.$inject=["$animate","$injector","$document","$rootScope","$sce","toastrConfig","$q"]}(),function(){"use strict";angular.module("toastr").constant("toastrConfig",{allowHtml:!1,autoDismiss:!1,closeButton:!1,closeHtml:"<button>&times;</button>",containerId:"toast-container",extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},maxOpened:0,messageClass:"toast-message",newestOnTop:!0,onHidden:null,onShown:null,onTap:null,positionClass:"toast-top-right",preventDuplicates:!1,preventOpenDuplicates:!1,progressBar:!1,tapToDismiss:!0,target:"body",templates:{toast:"directives/toast/toast.html",progressbar:"directives/progressbar/progressbar.html"},timeOut:5e3,titleClass:"toast-title",toastClass:"toast"})}(),function(){"use strict";function e(e){function t(e,t,r,n){function i(){var e=(s-(new Date).getTime())/a*100;t.css("width",e+"%")}var o,a,s;n.progressBar=e,e.start=function(e){o&&clearInterval(o),a=parseFloat(e),s=(new Date).getTime()+a,o=setInterval(i,10)},e.stop=function(){o&&clearInterval(o)},e.$on("$destroy",function(){clearInterval(o)})}return{require:"^toast",templateUrl:function(){return e.templates.progressbar},link:t}}angular.module("toastr").directive("progressBar",e),e.$inject=["toastrConfig"]}(),function(){"use strict";function e(){this.progressBar=null,this.startProgressBar=function(e){this.progressBar&&this.progressBar.start(e)},this.stopProgressBar=function(){this.progressBar&&this.progressBar.stop()}}angular.module("toastr").controller("ToastController",e)}(),function(){"use strict";function e(e,t,r,n){function i(r,i,o,a){function s(e){return a.startProgressBar(e),t(function(){a.stopProgressBar(),n.remove(r.toastId)},e,1)}function l(){r.progressBar=!1,a.stopProgressBar()}var u;if(r.toastClass=r.options.toastClass,r.titleClass=r.options.titleClass,r.messageClass=r.options.messageClass,r.progressBar=r.options.progressBar,function(){return r.options.closeHtml}()){var c=angular.element(r.options.closeHtml),p=e.get("$compile");c.addClass("toast-close-button"),c.attr("ng-click","close(true, $event)"),p(c)(r),i.children().prepend(c)}r.init=function(){r.options.timeOut&&(u=s(r.options.timeOut)),r.options.onShown&&r.options.onShown()},i.on("mouseenter",function(){l(),u&&t.cancel(u)}),r.tapToast=function(){angular.isFunction(r.options.onTap)&&r.options.onTap(),r.options.tapToDismiss&&r.close(!0)},r.close=function(e,t){t&&angular.isFunction(t.stopPropagation)&&t.stopPropagation(),n.remove(r.toastId,e)},r.refreshTimer=function(e){u&&(t.cancel(u),u=s(e||r.options.timeOut))},i.on("mouseleave",function(){0===r.options.timeOut&&0===r.options.extendedTimeOut||(r.$apply(function(){r.progressBar=r.options.progressBar}),u=s(r.options.extendedTimeOut))})}return{templateUrl:function(){return r.templates.toast},controller:"ToastController",link:i}}angular.module("toastr").directive("toast",e),e.$inject=["$injector","$interval","toastrConfig","toastr"]}(),angular.module("toastr").run(["$templateCache",function(e){e.put("directives/progressbar/progressbar.html",'<div class="toast-progress"></div>\n'),e.put("directives/toast/toast.html",'<div class="{{toastClass}} {{toastType}}" ng-click="tapToast()">\n  <div ng-switch on="allowHtml">\n    <div ng-switch-default ng-if="title" class="{{titleClass}}" aria-label="{{title}}">{{title}}</div>\n    <div ng-switch-default class="{{messageClass}}" aria-label="{{message}}">{{message}}</div>\n    <div ng-switch-when="true" ng-if="title" class="{{titleClass}}" ng-bind-html="title"></div>\n    <div ng-switch-when="true" class="{{messageClass}}" ng-bind-html="message"></div>\n  </div>\n  <progress-bar ng-if="progressBar"></progress-bar>\n</div>\n')}])},function(e,t,r){!function(t,r){e.exports=r()}(0,function(){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";e.exports="ngFileSaver",angular.module("ngFileSaver",[]).factory("FileSaver",["Blob","SaveAs","FileSaverUtils",r(1)]).factory("FileSaverUtils",[r(2)]).factory("Blob",["$window",r(3)]).factory("SaveAs",[r(5)])},function(e,t){"use strict";e.exports=function(e,t,r){function n(e,n,i){try{t(e,n,i)}catch(e){r.handleErrors(e.message)}}return{saveAs:function(e,t,i){return r.isBlobInstance(e)||r.handleErrors("Data argument should be a blob instance"),r.isString(t)||r.handleErrors("Filename argument should be a string"),n(e,t,i)}}}},function(e,t){"use strict";e.exports=function(){return{handleErrors:function(e){throw new Error(e)},isString:function(e){return"string"==typeof e||e instanceof String},isUndefined:function(e){return void 0===e},isBlobInstance:function(e){return e instanceof Blob}}}},function(e,t,r){"use strict";r(4),e.exports=function(e){return e.Blob}},function(e,t){/*! @source http://purl.eligrey.com/github/Blob.js/blob/master/Blob.js */
!function(e){"use strict";if(e.URL=e.URL||e.webkitURL,e.Blob&&e.URL)try{return void new Blob}catch(e){}var t=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||function(e){var t=function(e){return Object.prototype.toString.call(e).match(/^\[object\s(.*)\]$/)[1]},r=function(){this.data=[]},n=function(e,t,r){this.data=e,this.size=e.length,this.type=t,this.encoding=r},i=r.prototype,o=n.prototype,a=e.FileReaderSync,s=function(e){this.code=this[this.name=e]},l="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),u=l.length,c=e.URL||e.webkitURL||e,p=c.createObjectURL,d=c.revokeObjectURL,f=c,h=e.btoa,g=e.atob,v=e.ArrayBuffer,m=e.Uint8Array,y=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(n.fake=o.fake=!0;u--;)s.prototype[l[u]]=u+1;return c.createObjectURL||(f=e.URL=function(e){var t,r=document.createElementNS("http://www.w3.org/1999/xhtml","a");return r.href=e,"origin"in r||("data:"===r.protocol.toLowerCase()?r.origin=null:(t=e.match(y),r.origin=t&&t[1])),r}),f.createObjectURL=function(e){var t,r=e.type;return null===r&&(r="application/octet-stream"),e instanceof n?(t="data:"+r,"base64"===e.encoding?t+";base64,"+e.data:"URI"===e.encoding?t+","+decodeURIComponent(e.data):h?t+";base64,"+h(e.data):t+","+encodeURIComponent(e.data)):p?p.call(c,e):void 0},f.revokeObjectURL=function(e){"data:"!==e.substring(0,5)&&d&&d.call(c,e)},i.append=function(e){var r=this.data;if(m&&(e instanceof v||e instanceof m)){for(var i="",o=new m(e),l=0,u=o.length;l<u;l++)i+=String.fromCharCode(o[l]);r.push(i)}else if("Blob"===t(e)||"File"===t(e)){if(!a)throw new s("NOT_READABLE_ERR");var c=new a;r.push(c.readAsBinaryString(e))}else e instanceof n?"base64"===e.encoding&&g?r.push(g(e.data)):"URI"===e.encoding?r.push(decodeURIComponent(e.data)):"raw"===e.encoding&&r.push(e.data):("string"!=typeof e&&(e+=""),r.push(unescape(encodeURIComponent(e))))},i.getBlob=function(e){return arguments.length||(e=null),new n(this.data.join(""),e,"raw")},i.toString=function(){return"[object BlobBuilder]"},o.slice=function(e,t,r){var i=arguments.length;return i<3&&(r=null),new n(this.data.slice(e,i>1?t:this.data.length),r,this.encoding)},o.toString=function(){return"[object Blob]"},o.close=function(){this.size=0,delete this.data},r}(e);e.Blob=function(e,r){var n=r?r.type||"":"",i=new t;if(e)for(var o=0,a=e.length;o<a;o++)Uint8Array&&e[o]instanceof Uint8Array?i.append(e[o].buffer):i.append(e[o]);var s=i.getBlob(n);return!s.slice&&s.webkitSlice&&(s.slice=s.webkitSlice),s};var r=Object.getPrototypeOf||function(e){return e.__proto__};e.Blob.prototype=r(new e.Blob)}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content||this)},function(e,t,r){"use strict";e.exports=function(){return r(6).saveAs||function(){}}},function(e,t,r){var n,i=i||function(e){"use strict";if(!(void 0===e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=e.document,r=function(){return e.URL||e.webkitURL||e},n=t.createElementNS("http://www.w3.org/1999/xhtml","a"),i="download"in n,o=function(e){var t=new MouseEvent("click");e.dispatchEvent(t)},a=/constructor/i.test(e.HTMLElement)||e.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent),l=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},u=function(e){var t=function(){"string"==typeof e?r().revokeObjectURL(e):e.remove()};setTimeout(t,4e4)},c=function(e,t,r){t=[].concat(t);for(var n=t.length;n--;){var i=e["on"+t[n]];if("function"==typeof i)try{i.call(e,r||e)}catch(e){l(e)}}},p=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},d=function(t,l,d){d||(t=p(t));var f,h=this,g=t.type,v="application/octet-stream"===g,m=function(){c(h,"writestart progress write writeend".split(" "))};if(h.readyState=h.INIT,i)return f=r().createObjectURL(t),void setTimeout(function(){n.href=f,n.download=l,o(n),m(),u(f),h.readyState=h.DONE});!function(){if((s||v&&a)&&e.FileReader){var n=new FileReader;return n.onloadend=function(){var t=s?n.result:n.result.replace(/^data:[^;]*;/,"data:attachment/file;");e.open(t,"_blank")||(e.location.href=t),t=void 0,h.readyState=h.DONE,m()},n.readAsDataURL(t),void(h.readyState=h.INIT)}if(f||(f=r().createObjectURL(t)),v)e.location.href=f;else{e.open(f,"_blank")||(e.location.href=f)}h.readyState=h.DONE,m(),u(f)}()},f=d.prototype,h=function(e,t,r){return new d(e,t||e.name||"download",r)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,r){return t=t||e.name||"download",r||(e=p(e)),navigator.msSaveOrOpenBlob(e,t)}:(f.abort=function(){},f.readyState=f.INIT=0,f.WRITING=1,f.DONE=2,f.error=f.onwritestart=f.onprogress=f.onwrite=f.onabort=f.onerror=f.onwriteend=null,h)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);void 0!==e&&e.exports?e.exports.saveAs=i:null!==r(7)&&null!==r(8)&&void 0!==(n=function(){return i}.call(t,r,t,e))&&(e.exports=n)},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t){(function(t){e.exports=t}).call(t,{})}])})},function(e,t){},function(e,t,r){"use strict";var n=r(0),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(n);r(93),i.module("fibra.actions",["fibra.actions.project"])},function(e,t,r){"use strict";var n=r(0),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(n);r(366),r(90),r(367),r(368),r(369),r(21),r(71),r(70),r(412),r(413),i.module("fibra.services",["fibra.services.social-auth-service","fibra.services.worker-service","fibra.services.project-service","fibra.services.fibra-service","fibra.services.fibra-sparql-service","fibra.services.sparql-item-service","fibra.services.sparql-tree-service","fibra.services.sparql-autocomplete-service","fibra.services.search-service","fibra.services.items-service"])},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SocialAuthService=void 0;var i=r(1),o=n(i),a=r(2),s=n(a),l=r(0),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(l),c=t.SocialAuthService=function(){function e(t,r){(0,o.default)(this,e),this.$localStorage=t,this.$state=r}return e.$inject=["$localStorage","$state"],(0,s.default)(e,[{key:"loginState",value:function(){return this.$localStorage.user_email?this.$localStorage.user_email+" (via "+this.$localStorage.login_provider+")":"Not logged in"}},{key:"isLoggedIn",value:function(){return null!==this.$localStorage.user_email&&void 0!==this.$localStorage.user_email}},{key:"isAuthenticated",value:function(){return!!this.$localStorage.access_token}},{key:"logout",value:function(){this.$localStorage.access_token=null,this.$localStorage.login_provider=null,this.$localStorage.user_email=null,this.$state.go("projects")}}]),e}();u.module("fibra.services.social-auth-service",[]).config(["$provide",function(e){e.service("socialAuthService",c)}])},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectWorkerService=t.ProjectService=void 0;var i=r(1),o=n(i),a=r(2),s=n(a),l=r(0),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(l),c=r(44),p=r(127),d=r(43),f=r(91),h=r(129),g=r(130),v=r(32),m=r(92),y=r(7),b=r(55),E=t.ProjectService=function(){function e(t,r,n,i){(0,o.default)(this,e),this.workerService=t,this.fibraService=r,this.fibraSparqlService=n,this.$localStorage=i,i.projectSources?i.projectSources.forEach(function(e){e.sparqlEndpoint||(e.sparqlEndpoint=e.endpoint,e.updateEndpoint=e.endpoint,e.graphStoreEndpoint=e.endpoint)}):i.projectSources=[]}return e.$inject=["workerService","fibraService","fibraSparqlService","$localStorage"],(0,s.default)(e,[{key:"getCurrentProject",value:function(){return this.fibraService.getState().project}},{key:"setCurrentProject",value:function(e){return this.fibraService.dispatchAction(this.fibraService.setProject(e))}},{key:"getProjectSources",value:function(){return this.$localStorage.projectSources}},{key:"listPrimaryEndpointConfigurations",value:function(e){return this.workerService.call("projectWorkerService","listPrimaryEndpointConfigurations",[e])}},{key:"loadPrimaryEndpointConfiguration",value:function(e,t){return this.workerService.call("projectWorkerService","loadPrimaryEndpointConfiguration",[e,t])}},{key:"listArchiveEndpointConfigurations",value:function(e){return this.workerService.call("projectWorkerService","listArchiveEndpointConfigurations",[e])}},{key:"listAuthorityEndpointConfigurations",value:function(e){return this.workerService.call("projectWorkerService","listAuthorityEndpointConfigurations",[e])}},{key:"loadRemoteEndpointConfiguration",value:function(e,t){return this.workerService.call("projectWorkerService","loadRemoteEndpointConfiguration",[e,t])}},{key:"listSchemas",value:function(e){return this.workerService.call("projectWorkerService","listSchemas",[e])}},{key:"loadSchema",value:function(e,t){return this.workerService.call("projectWorkerService","loadSchema",[e,t])}},{key:"listProjects",value:function(e){return this.workerService.call("projectWorkerService","listProjects",[e])}},{key:"loadProject",value:function(e,t,r){return this.workerService.call("projectWorkerService","loadProject",[e,t,r])}},{key:"deleteCitable",value:function(e,t){return this.deleteObject(e,t.id,t.source.graph)}},{key:"deleteObjects",value:function(t,r,n){var i=n?e.deleteQuery.replace(/# STARTGRAPH/g,"GRAPH <"+n+"> {").replace(/# ENDGRAPH/g,"}"):e.deleteQuery.replace(/.*# STARTGRAPH\n/g,"").replace(/.*# ENDGRAPH\n/g,"");return i=i.replace(/# PATTERNS/g,r.reduce(function(e,t,r){return e+" <"+t+"> ?p"+r+" ?o"+r+" ."},"")),this.fibraSparqlService.update(t,i)}},{key:"deleteObject",value:function(e,t,r){return this.deleteObjects(e,[t],r)}},{key:"saveCitable",value:function(e,t,r){var n=this,i=new v.FMap,o={};return r.toTurtle(i,o),console.log(r,i,o),this.deleteObjects(e,i.keys(),r.source.graph).then(function(){return n.fibraSparqlService.post(t,(0,m.toTurtle)(o,i),r.source.graph)})}}],[{key:"orderCitables",value:function(e){e.sort(function(e,t){return(e.order?e.order:Number.MAX_VALUE)-(t.order?t.order:Number.MAX_VALUE)}),e.forEach(function(e){return delete e.order})}}]),e}();E.deleteQuery="DELETE {\n# STARTGRAPH\n  # PATTERNS\n# ENDGRAPH\n}\nWHERE {\n# STARTGRAPH\n  # PATTERNS\n# ENDGRAPH\n}";var x=t.ProjectWorkerService=function(){function e(t,r){(0,o.default)(this,e),this.fibraSparqlService=t,this.$q=r}return e.$inject=["fibraSparqlService","$q"],(0,s.default)(e,[{key:"loadPrimaryEndpointConfiguration",value:function(e,t){return this.runSingleQuery(e,f.PrimaryEndpointConfiguration.primaryEndpointConfigurationQuery,t,new f.PrimaryEndpointConfiguration(t,e))}},{key:"listPrimaryEndpointConfigurations",value:function(e){return this.runListQuery(e,f.PrimaryEndpointConfiguration.listPrimaryEndpointConfigurationsQuery,function(t){return new f.PrimaryEndpointConfiguration(t,e)})}},{key:"loadRemoteEndpointConfiguration",value:function(e,t){return this.runSingleQuery(e,h.RemoteEndpointConfiguration.remoteEndpointConfigurationQuery,t,new h.RemoteEndpointConfiguration(t,e))}},{key:"listArchiveEndpointConfigurations",value:function(e){return this.runListQuery(e,h.RemoteEndpointConfiguration.listArchiveEndpointConfigurationsQuery,function(t){return new h.RemoteEndpointConfiguration(t,e)})}},{key:"listAuthorityEndpointConfigurations",value:function(e){return this.runListQuery(e,h.RemoteEndpointConfiguration.listAuthorityEndpointConfigurationsQuery,function(t){return new h.RemoteEndpointConfiguration(t,e)})}},{key:"listProjects",value:function(e){return this.runListQuery(e,p.Project.listProjectsQuery,function(t){return new p.Project(t,e)})}},{key:"listSchemas",value:function(e){return this.runListQuery(e,g.Schema.listSchemasQuery,function(t){return new g.Schema(t,e)})}},{key:"loadSchema",value:function(e,t){return this.runSingleQuery(e,g.Schema.schemaQuery,t,new g.Schema(t,e))}},{key:"loadDataModel",value:function(e){var t=this,r=new b.DataModel,n=new v.EMap(function(e){var t=new b.Class(y.DataFactory.namedNode(e));return r.classMap.set(e,t),t}),i=new v.EMap(function(e){var t=new b.Property(y.DataFactory.namedNode(e));return r.propertyMap.set(e,t),t}),o=[];return e.forEach(function(e){o.push(t.fibraSparqlService.query(e.endpoint,e.classQuery).then(function(e){var t={bindingTypes:{types:"uniqueArray"},bindingConverters:{superClasses:function(e){return n.goc(e.value)},subClasses:function(e){return n.goc(e.value)},types:function(e){return n.goc(e.value)},labels:function(e){return y.DataFactory.nodeFromBinding(e)},descriptions:function(e){return y.DataFactory.nodeFromBinding(e)}}},r=new d.UniqueObjectTracker;e.results.bindings.forEach(function(e){return d.SparqlService.bindingsToObject(e,n.goc(e.id.value),t,r)})})),o.push(t.fibraSparqlService.query(e.endpoint,e.propertyQuery).then(function(e){var t={bindingTypes:{types:"uniqueArray"},bindingConverters:{superProperties:function(e){return i.goc(e.value)},subProperties:function(e){return i.goc(e.value)},inverseProperty:function(e){return i.goc(e.value)},types:function(e){return n.goc(e.value)},domains:function(e){return n.goc(e.value)},ranges:function(e){return n.goc(e.value)},labels:function(e){return y.DataFactory.nodeFromBinding(e)},descriptions:function(e){return y.DataFactory.nodeFromBinding(e)}}},r=new d.UniqueObjectTracker;e.results.bindings.forEach(function(e){return d.SparqlService.bindingsToObject(e,i.goc(e.id.value),t,r)})}))}),this.$q.all(o).then(function(){return n.values().forEach(function(e){e.buildAsNodes(),e.superClasses.filter(function(t){return!t.subClasses.find(function(t){return t===e})}).forEach(function(t){return t.subClasses.push(e)}),e.subClasses.filter(function(t){return!t.superClasses.find(function(t){return t===e})}).forEach(function(t){return t.superClasses.push(e)})}),n.values().forEach(function(e){0===e.superClasses.length&&r.rootClasses.push(e)}),i.values().forEach(function(e){e.buildAsNodes(),e.inverseProperty&&(e.inverseProperty.inverseProperty=e),e.superProperties.filter(function(t){return!t.subProperties.find(function(t){return t===e})}).forEach(function(t){return t.subProperties.push(e)}),e.subProperties.filter(function(t){return!t.superProperties.find(function(t){return t===e})}).forEach(function(t){return t.superProperties.push(e)}),e.domains.forEach(function(t){return t.properties.push(e)}),e.ranges.forEach(function(t){return t.inverseProperties.push(e)})}),i.values().forEach(function(e){0===e.superProperties.length&&r.rootProperties.push(e)}),r})}},{key:"loadProject",value:function(e,t,r){var n=this,i=this.runSingleQuery(e,p.Project.projectQuery,t,new p.Project(t,e));return r?i.then(function(e){var t=[];t.push(n.$q.all(e.schemas.map(function(e){return n.loadSchema(e.source,e.id)})).then(function(t){return e.schemas=t,n.loadDataModel(t).then(function(t){return e.dataModel=t})}));var r=[],i=[];return e.archiveEndpoints.forEach(function(e){return t.push(n.loadRemoteEndpointConfiguration(e.source,e.id).then(function(e){return r.push(e)}))}),e.authorityEndpoints.forEach(function(e){return t.push(n.loadRemoteEndpointConfiguration(e.source,e.id).then(function(e){return i.push(e)}))}),n.$q.all(t).then(function(){return e.archiveEndpoints=r,e.authorityEndpoints=i,console.log(e),e})}):i}},{key:"runSingleQuery",value:function(e,t,r,n){t=e.graph?t.replace(/# STARTGRAPH/g,"GRAPH <"+e.graph+"> {").replace(/# ENDGRAPH/g,"}"):t.replace(/.*# STARTGRAPH\n/g,"").replace(/.*# ENDGRAPH\n/g,""),t=t.replace(/<ID>/g,"<"+r+">");var i=this.$q.defer();return this.fibraSparqlService.query(e.sparqlEndpoint,t).then(function(t){var r={bindingTypes:{rightsHolders:"uniqueArray",schemas:"uniqueArray",authorityEndpoints:"uniqueArray",archiveEndpoints:"uniqueArray"},bindingConverters:{dateCreated:function(e){return new Date(e.value)},types:function(e){return y.DataFactory.nodeFromBinding(e)},labels:function(e){return y.DataFactory.nodeFromBinding(e)},descriptions:function(e){return y.DataFactory.nodeFromBinding(e)},schemas:function(t){return new g.Schema(t.value,c.CitableSource.clone(e))},authorityEndpoints:function(t){return new h.RemoteEndpointConfiguration(t.value,c.CitableSource.clone(e))},archiveEndpoints:function(t){return new h.RemoteEndpointConfiguration(t.value,c.CitableSource.clone(e))},rightsHolders_labels:function(e){return y.DataFactory.nodeFromBinding(e)},rightsHolders_descriptions:function(e){return y.DataFactory.nodeFromBinding(e)},rightsHolders:function(t){return new c.Citable(t.value,e)}}},o=new d.UniqueObjectTracker;t.results.bindings.forEach(function(e){return d.SparqlService.bindingsToObject(e,n,r,o)}),E.orderCitables(n.rightsHolders),i.resolve(n)}),i.promise}},{key:"runListQuery",value:function(e,t,r){return t=e.graph?t.replace(/# STARTGRAPH/g,"GRAPH <"+e.graph+"> {").replace(/# ENDGRAPH/g,"}"):t.replace(/.*# STARTGRAPH\n/g,"").replace(/.*# ENDGRAPH\n/g,""),this.fibraSparqlService.query(e.sparqlEndpoint,t).then(function(t){var n=new v.EMap(r),i={bindingTypes:{rightsHolders:"uniqueArray",schemas:"uniqueArray",authorityEndpoints:"uniqueArray",archiveEndpoints:"uniqueArray"},bindingConverters:{dateCreated:function(e){return new Date(e.value)},types:function(e){return y.DataFactory.nodeFromBinding(e)},labels:function(e){return y.DataFactory.nodeFromBinding(e)},descriptions:function(e){return y.DataFactory.nodeFromBinding(e)},schemas:function(t){return new g.Schema(t.value,c.CitableSource.clone(e))},authorityEndpoints:function(t){return new h.RemoteEndpointConfiguration(t.value,c.CitableSource.clone(e))},archiveEndpoints:function(t){return new h.RemoteEndpointConfiguration(t.value,c.CitableSource.clone(e))},rightsHolders_labels:function(e){return y.DataFactory.nodeFromBinding(e)},rightsHolders_descriptions:function(e){return y.DataFactory.nodeFromBinding(e)},rightsHolders:function(t){return new c.Citable(t.value,e)}}},o=new d.UniqueObjectTracker;return t.results.bindings.forEach(function(e){return d.SparqlService.bindingsToObject(e,n.goc(e.id.value),i,o)}),n.values().forEach(function(e){return E.orderCitables(e.rightsHolders)}),n.values()})}}]),e}();u.module("fibra.services.project-service",["fibra.services.fibra-service","fibra.services.fibra-sparql-service"]).config(["$provide",function(e){e.service("projectService",E),e.service("projectWorkerService",x)}])},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.FibraService=t.UIState=t.ConstructState=t.CommonState=void 0;var i=r(15),o=n(i),a=r(2),s=n(a),l=r(18),u=n(l),c=r(19),p=n(c),d=r(1),f=n(d),h=r(0),g=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(h),v=r(90),m=t.CommonState=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en";(0,f.default)(this,e),this.project=t,this.language=r},y=t.ConstructState=function e(){(0,f.default)(this,e),this.types=[],this.userTypes=[],this.displayTypes=[],this.items=[],this.itemIndex={},this.localItems=[]},b=t.UIState=function(e){function t(){(0,f.default)(this,t);var e=(0,u.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments));return e.construct=new y,e.actionsRunning=0,e}return(0,p.default)(t,e),(0,s.default)(t,[{key:"toCommonState",value:function(){return new m(this.project,this.language)}}]),t}(m),E=new b,x={type:"",payload:null},S=t.FibraService=function(){function e(t,r,n,i){(0,f.default)(this,e),this.$q=t,this.workerService=r,this.sparqlItemService=n,this.sparqlTreeService=i,this.callbacks={},this.createState()}return e.$inject=["$q","workerService","sparqlItemService","sparqlTreeService"],(0,s.default)(e,[{key:"on",value:function(e,t){var r=this;return void 0===this.callbacks[e]&&(this.callbacks[e]=Array()),this.callbacks[e].push(t),function(){-1!==r.callbacks[e].indexOf(t)&&r.callbacks[e].splice(r.callbacks[e].indexOf(t),1)}}},{key:"dispatch",value:function(e){void 0===this.callbacks[e]&&(this.callbacks[e]=Array());var t=this.callbacks[e].map(function(e){return e()});return this.$q.all(t)}},{key:"createState",value:function(){this.state=E,this.store||this.createStore()}},{key:"createStore",value:function(){this.store=[this.state]}},{key:"placeHolderAction",value:function(e){return{type:"PLACEHOLDER",payload:e}}},{key:"setLanguage",value:function(e){return{type:"SET_LANGUAGE",payload:e}}},{key:"setProject",value:function(e){return{type:"SET_PROJECT",payload:e}}},{key:"sessionReducer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x;switch(t.type){case"SET_LANGUAGE":return e.language=t.payload,this.$q.resolve(e);case"SET_PROJECT":return e.project=t.payload,this.$q.resolve(e);default:return this.$q.resolve(e)}}},{key:"constructReducer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x;switch(t.type){case"PLACEHOLDER":return t.payload.then(function(){return e});default:return this.$q.resolve(e)}}},{key:"dispatchAction",value:function(e){var t=this;this.state.actionsRunning=this.state.actionsRunning+1,console.log(e.type,this.state.actionsRunning),this.dispatch("action");var r=this.state.toCommonState();return this.constructReducer(this.state,e).then(function(r){return t.sessionReducer(r,e)}).then(function(e){if(e.language!==r.language||e.project!==r.project){var n=e.toCommonState();v.WorkerService.savePrototypes(n),t.workerService.callAll("stateWorkerService","setState",[n])}return t.state=e,t.state.actionsRunning=t.state.actionsRunning-1,e})}},{key:"getState",value:function(){return this.state}},{key:"undo",value:function(){}}]),e}();g.module("fibra.services.fibra-service",[]).config(["$provide",function(e){e.service("fibraService",S)}])},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.RDFStoreInternalSparqlService=t.FibraSparqlService=t.SparqlServiceDefinition=void 0;var i=r(2),o=n(i),a=r(1),s=n(a),l=r(0),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(l),c=r(370),p=r(32),d=(t.SparqlServiceDefinition=function e(t,r){(0,s.default)(this,e),this.type=t,this.id=r},function(){function e(t,r){var n=this;(0,s.default)(this,e),this.sparqlService=t,this.$q=r,this.services=new p.EMap(function(e){if(0===e.indexOf("local:")){var t=n.$q.defer();return new c.Store({name:e,persistent:!0},function(e,r){e?t.reject(e):t.resolve(new h(r,n.$q))}),t.promise}return n.$q.resolve(new f(n.sparqlService,e))})}return e.$inject=["sparqlService","$q"],(0,o.default)(e,[{key:"query",value:function(e,t,r){return this.services.goc(e).then(function(e){return e.query(t,r)})}},{key:"update",value:function(e,t,r){return this.services.goc(e).then(function(e){return e.update(t,r)})}},{key:"get",value:function(e,t,r){return this.services.goc(e).then(function(e){return e.get(t,r)})}},{key:"put",value:function(e,t,r,n){return this.services.goc(e).then(function(e){return e.put(t,r,n)})}},{key:"post",value:function(e,t,r,n){return this.services.goc(e).then(function(e){return e.post(t,r,n)})}}]),e}());t.FibraSparqlService=d;var f=function(){function e(t,r){(0,s.default)(this,e),this.s=t,this.endpoint=r}return(0,o.default)(e,[{key:"query",value:function(e,t){return this.s.query(this.endpoint,e,t).then(function(e){return e.data})}},{key:"update",value:function(e,t){return this.s.update(this.endpoint,e,t).then(function(e){return e.data})}},{key:"get",value:function(e,t){return this.s.get(this.endpoint,e,t).then(function(e){return e.data})}},{key:"post",value:function(e,t,r){return this.s.post(this.endpoint,e,t,r).then(function(e){return e.data})}},{key:"put",value:function(e,t,r){return this.s.put(this.endpoint,e,t,r).then(function(e){return e.data})}}]),e}(),h=function(){function e(t,r){(0,s.default)(this,e),this.s=t,this.$q=r}return(0,o.default)(e,[{key:"query",value:function(t,r){var n=this,i=this.$q.defer();try{this.s.execute(t,function(r,o){if(r)console.log("Error executing",n.s,t,r),i.reject(r);else{var a={head:{vars:[]},results:{bindings:[]}},s=new p.StringSet;a.results.bindings=o.map(function(t){var r={};for(var n in t)s.add(n),null!==t[n]&&(r[n]=e.convertBinding(t[n]));return r}),a.head.vars=s.values(),i.resolve(a)}})}catch(e){throw console.log("Exception executing",this.s,t,e),e}return i.promise}},{key:"update",value:function(e,t){var r=this.$q.defer();return this.s.execute(e,function(e,t){e?r.reject(e):r.resolve(t)}),r.promise}},{key:"get",value:function(e,t){var r=this.$q.defer();return this.s.graph(e,function(e,t){e?r.reject(e):r.resolve(t.toNT())}),r.promise}},{key:"post",value:function(e,t,r){var n=this.$q.defer(),i=function(e,t){e?n.reject(e):n.resolve()};return t?this.s.load("text/turtle",e,t,i):this.s.load("text/turtle",e,i),n.promise}},{key:"put",value:function(e,t,r){var n=this,i=this.$q.defer(),o=function(r){r&&i.reject(r);var o=function(e,t){e?i.reject(e):i.resolve()};t?n.s.load("text/turtle",e,t,o):n.s.load("text/turtle",e,o)};return t?this.s.clear(t,o):this.s.clear(o),i.promise}}],[{key:"convertBinding",value:function(e){switch(e.token){case"uri":return{type:"uri",value:e.value};case"blank":return{type:"bnode",value:e.value};case"literal":return{type:"literal",value:e.value,"xml:lang":e.lang,datatype:e.type};default:throw"Unknown binding type "+e.token}}}]),e}();t.RDFStoreInternalSparqlService=h,u.module("fibra.services.fibra-sparql-service",[]).config(["$provide",function(e){e.service("fibraSparqlService",d)}])},function(e,t,r){var n=r(371).QueryEngine,i=r(409).QuadBackend,o=r(410).PersistentQuadBackend,a=r(229).Lexicon,s=r(411).PersistentLexicon,l=r(146),u=r(10);Store=function(e,t){var r=null,l=null;if(0==arguments.length)l={};else if(1==arguments.length)l={},r=e;else{if(!(arguments.length>1))throw"An optional argument map and a callback must be provided";l=e,r=t}null==l.treeOrder&&(l.treeOrder=15);var u=a,c=i;!0===l.persistent&&(u=s,c=o),this.functionMap={};var p=this;this.customFns={},new u(function(e){var t=function(){new c(l,function(t){var i=function(){l.backend=t,l.lexicon=e,p.engine=new n(l),r(null,p)};l.overwrite?t.clear(i):i()})};!0===l.overwrite?e.clear(t):t()},l.name)},Store.prototype.rdf=l.rdf,Store.prototype.rdf.api=l,Store.prototype.registerCustomFunction=function(e,t){this.customFns[e]=t,this.engine.setCustomFunctions(this.customFns)},Store.prototype.execute=function(){if(3===arguments.length)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2]);else if(4===arguments.length)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2],arguments[3]);else{var e,t;if(1===arguments.length){e=arguments[0];var t=function(){}}else 2===arguments.length&&(e=arguments[0],t=arguments[1]);this.engine.execute(e,t)}},Store.prototype.executeWithEnvironment=function(){var e,t,r;if(3===arguments.length){e=arguments[0];var n=function(){};t=arguments[1],r=arguments[2]}else if(4===arguments.length){e=arguments[0];var n=arguments[3];t=arguments[1],r=arguments[2]}t=u.map(t,function(e){return{token:"uri",value:e}}),r=u.map(r,function(e){return{token:"uri",value:e}}),this.engine.execute(e,n,t,r)},Store.prototype.graph=function(){var e=null,t=null;if(1===arguments.length)t=arguments[0]||function(){},e=this.engine.lexicon.defaultGraphUri;else{if(2!==arguments.length)throw"An optional graph URI and a callback function must be provided";t=arguments[1]||function(){},e=arguments[0]}null!=this.rdf.resolve(e)&&(e=this.rdf.resolve(e)),this.engine.execute("CONSTRUCT { ?s ?p ?o } WHERE { GRAPH <"+e+"> { ?s ?p ?o } }",t)},Store.prototype.node=function(){var e=null,t=null,r=null;if(2===arguments.length)r=arguments[0],t=arguments[1]||function(){},e=this.engine.lexicon.defaultGraphUri;else{if(3!==arguments.length)throw"An optional graph URI, node URI and a callback function must be provided";r=arguments[0],e=arguments[1],t=arguments[2]||function(){}}null!=this.rdf.resolve(e)&&(e=this.rdf.resolve(e)),null!=this.rdf.resolve(r)&&(r=this.rdf.resolve(r)),this.engine.execute("CONSTRUCT { <"+r+"> ?p ?o } WHERE { GRAPH <"+e+"> { <"+r+"> ?p ?o } }",t)},Store.prototype.startObservingNode=function(){var e,t,r;2===arguments.length?(e=arguments[0],r=arguments[1],this.engine.callbacksBackend.observeNode(e,r,function(){})):3===arguments.length&&(e=arguments[0],t=arguments[1],r=arguments[2],this.engine.callbacksBackend.observeNode(e,t,r,function(){}))},Store.prototype.stopObservingNode=function(e){this.engine.callbacksBackend.stopObservingNode(e)},Store.prototype.startObservingQuery=function(){var e=arguments[0],t=arguments[1],r=arguments[2];null!=r?this.engine.callbacksBackend.observeQuery(e,t,r):this.engine.callbacksBackend.observeQuery(e,t,function(){})},Store.prototype.stopObservingQuery=function(e){this.engine.callbacksBackend.stopObservingQuery(e)},Store.prototype.subscribe=function(e,t,r,n,i){var o=this,a=function(e,t){var r=[],n={blanks:{},outCache:{}},a=[];u.each(t,function(e){var t=l.buildRDFResource(e.subject,a,o.engine,n),i=l.buildRDFResource(e.predicate,a,o.engine,n),s=l.buildRDFResource(e.object,a,o.engine,n);null!=t&&null!=i&&null!=s&&(e=new l.Triple(t,i,s),r.push(e))}),i(e,r)};this.functionMap[i]=a,this.engine.callbacksBackend.subscribe(e,t,r,n,a,function(){})},Store.prototype.unsubscribe=function(e){var t=this.functionMap[e];this.engine.callbacksBackend.unsubscribe(t),delete this.functionMap[e]},Store.prototype.setPrefix=function(e,t){this.rdf.setPrefix(e,t)},Store.prototype.setDefaultPrefix=function(e){this.rdf.setDefaultPrefix(e)},Store.prototype.insert=function(){var e,t,r;if(1===arguments.length)t=arguments[0],r=function(){};else if(2===arguments.length)t=arguments[0],r=arguments[1]||function(){};else{if(3!==arguments.length)throw"The triples to insert, an optional graph and callback must be provided";t=arguments[0],e=this.rdf.createNamedNode(arguments[1]),r=arguments[2]||function(){}}var n="",i=this;t.forEach(function(e){n=n+i._nodeToQuery(e.subject)+i._nodeToQuery(e.predicate)+i._nodeToQuery(e.object)+"."}),n=null!=e?"INSERT DATA { GRAPH "+this._nodeToQuery(e)+" { "+n+" } }":"INSERT DATA { "+n+" }",this.engine.execute(n,r)},Store.prototype._nodeToQuery=function(e){if("NamedNode"===e.interfaceName){var t=this.rdf.resolve(e.valueOf());return null!=t?"<"+t+">":"<"+e.valueOf()+">"}return e.toString()},Store.prototype.delete=function(){var e,t,r;if(1===arguments.length)t=arguments[0],r=function(){};else if(2===arguments.length)t=arguments[0],r=arguments[1]||function(){};else{if(3!==arguments.length)throw"The triples to delete, an optional graph and callback must be provided";t=arguments[0],e=this.rdf.createNamedNode(arguments[1]),r=arguments[2]||function(){}}var n="",i=this;t.forEach(function(e){n=n+i._nodeToQuery(e.subject)+i._nodeToQuery(e.predicate)+i._nodeToQuery(e.object)+"."}),n=null!=e?"DELETE DATA { GRAPH "+this._nodeToQuery(e)+" { "+n+" } }":"DELETE DATA { "+n+" }",this.engine.execute(n,r)},Store.prototype.clear=function(){var e,t;if(0===arguments.length){e=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri);var t=function(){}}else if(1===arguments.length)e=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),t=arguments[0]||function(){};else{if(2!==arguments.length)throw"The optional graph and a callback must be provided";e=this.rdf.createNamedNode(arguments[0]),t=arguments[1]||function(){}}var r="CLEAR GRAPH "+this._nodeToQuery(e);this.engine.execute(r,t)},Store.prototype.setBatchLoadEvents=function(e){this.engine.eventsOnBatchLoad=e},Store.prototype.registerDefaultNamespace=function(e,t){this.rdf.prefixes.set(e,t),this.engine.registerDefaultNamespace(e,t)},Store.prototype.registerDefaultProfileNamespaces=function(){var e=this.rdf.prefixes.values();for(var t in e)this.registerDefaultNamespace(t,e[t])},Store.prototype.load=function(){var e,t,r,n,i={};if(3===arguments.length)r=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),e=arguments[0],t=arguments[1],n=arguments[2]||function(){};else if(4===arguments.length)e=arguments[0],t=arguments[1],i=arguments[2],"string"==typeof i?(r=this.rdf.createNamedNode(i),i={}):(r=this.rdf.createNamedNode(i.graph||this.engine.lexicon.defaultGraphUri),delete i.graph),n=arguments[3]||function(){};else if(2===arguments.length)throw"The mediaType of the parser, the data a callback and an optional graph must be provided";if("remote"===e){t=this.rdf.createNamedNode(t);var o="LOAD <"+t.valueOf()+"> INTO GRAPH <"+r.valueOf()+">";this.engine.execute(o,n)}else{var a=this,s=this.engine.rdfLoader.parsers[e];if(!s)return n(new Error("Cannot find parser for the provided media type:"+e));var l=function(e,t){e?n(e,t):a.engine.batchLoad(t,function(e){null!=e?n(null,e):n(new Error("Erro batch-loading triples."))})},u=[s,{token:"uri",value:r.valueOf()},t,i,l];t&&"string"==typeof t&&0===t.indexOf("file://")?this.engine.rdfLoader.loadFromFile.apply(null,u):this.engine.rdfLoader.tryToParse.apply(null,u)}},Store.prototype.registerParser=function(e,t){this.engine.rdfLoader.registerParser(e,t)},Store.prototype.registeredGraphs=function(e){this.engine.lexicon.registeredGraphs(!0,function(t){var r=u.map(t,function(e){return new l.NamedNode(e)});e(null,r)})},Store.prototype.getNetworkTransport=function(){return NetworkTransport},Store.prototype.setNetworkTransport=function(e){NetworkTransport=e},Store.prototype.close=function(e){null==e&&(e=function(){}),this.engine.close?this.engine.close(e):e()},Store.VERSION="0.9.17";var c=function(){var e;(e=1==arguments.length?arguments[0]:2==arguments.length?arguments[1]:arguments[2])(new Error("Store#connect is not supported in the 0.9.X series of the library"))},p=function(){return 1==arguments.length?new Store(arguments[0]):2==arguments.length?new Store(arguments[0],arguments[1]):new Store};Store.yieldFrequency=function(e){u.yieldFrequency(e)},e.exports.Store=Store,e.exports.create=p,e.exports.connect=c},function(e,t,r){function n(e,t,r){this.name="BindExpressionError",this.bind=t,this.error=r,this.message=e}var i=r(144).AbstractQueryTree,o=r(144).NonSupportedSparqlFeatureError,a=r(10),s=r(102),l=r(373).QueryPlan,u=r(213).QueryFilters,c=r(146),p=r(374).RDFLoader,d=r(408).CallbacksBackend,f=r(10),h=r(10);n.prototype=new Error,n.constructor=n,QueryEngine=function(e){0!=arguments.length&&(this.backend=e.backend,this.lexicon=e.lexicon,this.eventsOnBatchLoad=e.eventsOnBatchLoad||!1,this.defaultPrefixes={},this.abstractQueryTree=new i,this.rdfLoader=new p(e.communication),this.callbacksBackend=new d(this),this.customFns=e.customFns||{})},QueryEngine.prototype.setCustomFunctions=function(e){this.customFns=e},QueryEngine.prototype.registerNsInEnvironment=function(e,t){var r=[];null!=e&&null!=e.prefixes&&(r=e.prefixes);var n={};for(var i in this.defaultPrefixes)n[i]=this.defaultPrefixes[i];for(var o=0;o<r.length;o++){var a=r[o];"prefix"===a.token&&(n[a.prefix]=a.local)}t.namespaces=n,null!=e&&e.base&&"object"==typeof e.base?t.base=e.base.value:t.base=null},QueryEngine.prototype.applyModifier=function(e,t){if("DISTINCT"==e){for(var r={},n=[],i=0;i<t.length;i++){var o=t[i],a="";for(var s in o){var l=o[s];null==l?a=a+s+"null":"literal"==l.token?(null!=l.value&&(a+=l.value),null!=l.lang&&(a+=l.lang),null!=l.type&&(a+=l.type)):a=l.value?a+s+l.value:a+s+l}null==r[a]&&(n.push(o),r[a]=!0)}return n}return t},QueryEngine.prototype.applyLimitOffset=function(e,t,r){return null==t&&null==e?r:(null==e&&(e=0),t=null==t?r.length:e+t,r.slice(e,t))},QueryEngine.prototype.applySingleOrderBy=function(e,t,r,n,i){var o=[],a=this;f.eachSeries(e,function(e,i){u.collect(e.expression,[t],r,n,a,function(e){o.push(e[0].value),i()})},function(){i({binding:t,value:o})})},QueryEngine.prototype.applyOrderBy=function(e,t,r,n,i){var o=this,a=[];null!=e&&e.length>0?f.eachSeries(t,function(t,i){o.applySingleOrderBy(e,t,r,n,function(e){a.push(e),i()})},function(){a.sort(function(t,r){return o.compareFilteredBindings(t,r,e,n)});for(var t=[],r=0;r<a.length;r++)t.push(a[r].binding);i(t)}):i(t)},QueryEngine.prototype.compareFilteredBindings=function(e,t,r,n){for(var i=0;;){if(i==e.value.length)return 0;var o,a=r[i].direction;if(null!=e.value[i]||null!=t.value[i]){if(null==e.value[i])o={value:!1};else if(null==t.value[i])o={value:!0};else{if("blank"===e.value[i].token&&"blank"===t.value[i].token){i++;continue}if("blank"===e.value[i].token)o={value:!1};else if("blank"===t.value[i].token)o={value:!0};else if("uri"===e.value[i].token&&"uri"===t.value[i].token){if(1==u.runEqualityFunction(e.value[i],t.value[i],[],this,n).value){i++;continue}o=u.runTotalGtFunction(e.value[i],t.value[i],[])}else if("uri"===e.value[i].token)o={value:!1};else if("uri"===t.value[i].token)o={value:!0};else if("literal"===e.value[i].token&&"literal"===t.value[i].token&&null==e.value[i].type&&null==t.value[i].type){if(1==u.runEqualityFunction(e.value[i],t.value[i],[],this,n).value){i++;continue}o=u.runTotalGtFunction(e.value[i],t.value[i],[])}else if("literal"===e.value[i].token&&null==e.value[i].type)o={value:!1};else if("literal"===t.value[i].token&&null==t.value[i].type)o={value:!0};else{if(1==u.runEqualityFunction(e.value[i],t.value[i],[],this,n).value){i++;continue}o=u.runTotalGtFunction(e.value[i],t.value[i],[])}}return 1==o.value?"ASC"===a?1:-1:"ASC"===a?-1:1}i++}},QueryEngine.prototype.removeDefaultGraphBindings=function(e,t){for(var r=[],n={},i=0;i<t.named.length;i++)n[t.named[i].oid]=!0;for(i=0;i<t.implicit.length;i++)null==n[t.implicit[i].oid]&&r.push(t.implicit[i].oid);var o=[];for(i=0;i<e.length;i++){var a=e[i],s=!1;for(var l in a){for(var u=0;u<n.length;u++)if(a[l]===n[u]){s=!0;break}if(s)break}s||o.push(a)}return o},QueryEngine.prototype.aggregateBindings=function(e,t,r,n,i){this.copyDenormalizedBindings(t,n.outCache,function(t){for(var o={},a=0;a<e.length;a++){var s=u.runAggregator(e[a],t,this,r,n);e[a].alias?o[e[a].alias.value]=s:o[e[a].value.value]=s}i(o)})},QueryEngine.prototype.projectBindings=function(e,t,r){if("*"===e[0].kind)return t;for(var n=[],i=0;i<t.length;i++){for(var o=t[i],a={},s=!0,l=0;l<e.length;l++)if("variable"==e[l].token&&"aliased"!=e[l].kind)a[e[l].value.value]=o[e[l].value.value];else if("variable"==e[l].token&&"aliased"==e[l].kind){var c=u.runFilter(e[l].expression,o,this,r,{blanks:{},outCache:{}});if(u.isEbvError(c)){s=!1;break}a[e[l].alias.value]=c}!0===s&&n.push(a)}return n},QueryEngine.prototype.resolveNsInEnvironment=function(e,t){return t.namespaces[e]},QueryEngine.prototype.normalizeTerm=function(e,t,r,n){if("uri"===e.token){var i=a.lexicalFormBaseUri(e,t);null==i?n(null):r?this.lexicon.registerUri(i,n):this.lexicon.resolveUri(i,n)}else if("literal"===e.token){var o=a.lexicalFormLiteral(e,t);r?this.lexicon.registerLiteral(o,n):this.lexicon.resolveLiteral(o,n)}else if("blank"===e.token){var s=e.value,l=t.blanks[s];null!=l?n(l):r?this.lexicon.registerBlank(function(e){t.blanks[s]=e,n(e)}):this.lexicon.resolveBlank(function(e){t.blanks[s]=e,n(e)})}else n("var"===e.token?e.value:null)},QueryEngine.prototype.normalizeDatasets=function(e,t,r){var n=this;f.eachSeries(e,function(e,r){e.value===n.lexicon.defaultGraphUri?(e.oid=n.lexicon.defaultGraphOid,r()):n.normalizeTerm(e,t,!1,function(t){null!=t&&(e.oid=t),r()})},function(){r(!0)})},QueryEngine.prototype.normalizeQuad=function(e,t,r,n){var i=null,o=null,s=null,l=null,u=this,c=!1;f.seq(function(n){if(null==e.graph||e.graph.value===u.lexicon.defaultGraphUri)l=0,n();else{var i=a.lexicalFormBaseUri(e.graph,t);u.normalizeTerm(e.graph,t,r,function(t){null!=t?(l=t,!0===r&&"var"!=e.graph.token?u.lexicon.registerGraph(t,i,function(){n()}):n()):(c=!0,n())})}},function(n){!1===c?u.normalizeTerm(e.subject,t,r,function(e){null!=e?(i=e,n()):(c=!0,n())}):n()},function(n){!1===c?u.normalizeTerm(e.predicate,t,r,function(e){null!=e?(o=e,n()):(c=!0,n())}):n()},function(n){!1===c?u.normalizeTerm(e.object,t,r,function(e){null!=e?(s=e,n()):(c=!0,n())}):n()})(function(){n(!0===c?null:{subject:i,predicate:o,object:s,graph:l})})},QueryEngine.prototype.denormalizeBindingsList=function(e,t,r){var n=this,i=[];f.eachSeries(e,function(e,r){n.denormalizeBindings(e,t,function(e){i.push(e),r()})},function(){r(i)})},QueryEngine.prototype.copyDenormalizedBindings=function(e,t,r){var n=this,i=[];f.eachSeries(e,function(e,r){var o={},a=h.keys(e);f.eachSeries(a,function(r,i){var a=e[r];if(null==a)o[r]=null,i();else if("object"==typeof a)o[r]=a,i();else{var s=t[a];null!=s?(o[r]=s,i()):n.lexicon.retrieve(a,function(e){t[a]=e,o[r]=e,i()})}},function(){i.push(o),r()})},function(){r(i)})},QueryEngine.prototype.denormalizeBindings=function(e,t,r){var n=h.keys(e),i=t.outCache,o=this;f.eachSeries(n,function(r,n){var a=e[r];null==a?(e[r]=null,n()):"object"==typeof a?n():null!=i[a]?(e[r]=i[a],n()):o.lexicon.retrieve(a,function(i){e[r]=i,"blank"===i.token&&(t.blanks[i.value]=a),n()})},function(){r(e)})},QueryEngine.prototype.execute=function(e,t,r,n){e=a.normalizeUnicodeLiterals(e);var i=this.abstractQueryTree.parseQueryString(e);if(null==i)t(!1,"Error parsing query string");else if("query"===i.token&&"update"==i.kind){this.callbacksBackend.startGraphModification();var o=this;this.executeUpdate(i,function(e,r){o.lexicon.updateAfterWrite&&o.lexicon.updateAfterWrite(),e?(o.callbacksBackend.cancelGraphModification(),t(e,r)):o.callbacksBackend.endGraphModification(function(){t(e,r)})})}else"query"===i.token&&"query"==i.kind&&this.executeQuery(i,t,r,n)},QueryEngine.prototype.executeQuery=function(e,t,r,n){var i=e.prologue,o=e.units,a=this,s={blanks:{},outCache:{}};this.registerNsInEnvironment(i,s);var l=a.abstractQueryTree.parseExecutableUnit(o[0]);"select"===l.kind?this.executeSelect(l,s,r,n,function(e,r){null==e?"object"==typeof r&&!0===r.denorm?t(null,r.bindings):a.denormalizeBindingsList(r,s,function(e){t(null,e)}):t(e)}):"ask"===l.kind?(l.projection=[{token:"variable",kind:"*"}],this.executeSelect(l,s,r,n,function(e,r){null==e?r.length>0?t(null,!0):t(null,!1):t(e)})):"construct"===l.kind&&(l.projection=[{token:"variable",kind:"*"}],a=this,this.executeSelect(l,s,r,n,function(e,r){null==e?a.denormalizeBindingsList(r,s,function(e){if(null!=e){var r=new c.Graph;null==l.template&&(l.template={triplesContext:l.pattern});for(var n=1,i=[],o=0;o<e.length;o++){for(var u=e[o],p=0;p<i.length;p++)delete i[p].valuetmp;for(var p=0;p<l.template.triplesContext.length;p++){for(var d=["subject","predicate","object"],f=l.template.triplesContext[p],h=0;h<d.length;h++){var g=d[h];if("blank"===f[g].token)if(f[g].valuetmp&&null!=f[g].valuetmp);else{var v="_:b"+n;n++,f[g].valuetmp=v,i.push(f[g])}}var m=c.buildRDFResource(f.subject,u,a,s),h=c.buildRDFResource(f.predicate,u,a,s),y=c.buildRDFResource(f.object,u,a,s);if(null!=m&&null!=h&&null!=y){var b=new c.Triple(m,h,y);r.add(b)}}}t(null,r)}else t(new Error("Error denormalizing bindings."))}):t(e)}))},QueryEngine.prototype.executeSelect=function(e,t,r,n,i){if("select"===e.kind||"ask"===e.kind||"construct"===e.kind||"modify"===e.kind){var o=e.projection,a=e.dataset,s=e.modifier,l=e.limit,u=e.offset,c=e.order,p=this;null==r&&null==n||(a.implicit=r||[],a.named=n||[]),null!=a.implicit&&0===a.implicit.length&&null!=a.named&&0===a.named.length&&a.implicit.push(this.lexicon.defaultGraphUriTerm),p.normalizeDatasets(a.implicit.concat(a.named),t,function(){try{p.executeSelectUnit(o,a,e.pattern,t,function(r){if(null!=r){if(null!=e.group&&""===e.group){for(var n=!1,d=0;d<e.projection.length;d++)if(null!=e.projection[d].expression&&"aggregate"===e.projection[d].expression.expressionType){n=!0;break}!0===n&&(e.group="singleGroup")}e.group&&""!=e.group?p.checkGroupSemantics(e.group,o)?p.groupSolution(r,e.group,a,t,function(e){var r=[];f.eachSeries(e,function(e,n){p.aggregateBindings(o,e,a,t,function(e){r.push(e),n()})},function(){i(null,{bindings:r,denorm:!0})})}):i(new Error("Incompatible Group and Projection variables")):p.applyOrderBy(c,r,a,t,function(e){var t=p.projectBindings(o,e,a),r=p.applyModifier(s,t),n=p.applyLimitOffset(u,l,r),c=p.removeDefaultGraphBindings(n,a);i(null,c)})}else i(new Error("Error executing SELECT query."))})}catch(e){i(e)}})}else i(new Error("Cannot execute "+e.kind+" query as a select query"))},QueryEngine.prototype.groupSolution=function(e,t,r,n,i){var o=[],a=[],s=!1,l=this;"singleGroup"===t?i([e]):f.eachSeries(e,function(e,i){var c=!0;f.eachSeries(t,function(t,i){var a=null;if("var"===t.token)a=t.value,0==s&&o.push(a),i();else if("aliased_expression"===t.token){if(a=t.alias.value,0==s&&o.push(a),"var"===t.expression.primaryexpression)e[t.alias.value]=e[t.expression.value.value];else{var p=l.copyDenormalizedBindings([e],n.outCache),d=u.runFilter(t.expression,p[0],l,r,n);u.isEbvError(d)?c=!1:(null!=d.value&&(d.value=""+d.value),e[t.alias.value]=d)}i()}else l.copyDenormalizedBindings([e],n.outCache,function(r){var p=u.runFilter(t,r[0],l,n);u.isEbvError(p)?c=!1:(e["groupCondition"+env._i]=p,a="groupCondition"+env._i,0==s&&o.push(a)),i()})},function(){0==s&&(s=!0),!0===c&&a.push(e),i()})},function(){for(var e={},t={},r=0;r<a.length;r++){for(var n=a[r],s="",l=0;l<o.length;l++){var u=n[o[l]];s+="object"==typeof u?u.value:u}null==e[s]?(t[s]=0,e[s]=[n]):e[s].push(n)}var c=[];for(var p in e)c.push(e[p]);i(c)})},QueryEngine.prototype.executeSelectUnit=function(e,t,r,n,i){if("BGP"===r.kind)this.executeAndBGP(e,t,r,n,i);else if("UNION"===r.kind)this.executeUNION(e,t,r.value,n,i);else if("JOIN"===r.kind)this.executeJOIN(e,t,r,n,i);else if("LEFT_JOIN"===r.kind)this.executeLEFT_JOIN(e,t,r,n,i);else if("FILTER"===r.kind){var a=this;this.executeSelectUnit(e,t,r.value,n,function(e){null!=e?u.checkFilters(r,e,!1,t,n,a,i):i([])})}else{if("EMPTY_PATTERN"!==r.kind)throw new o(r.kind);i([])}},QueryEngine.prototype.executeUNION=function(e,t,r,i,o){var a,s,c=r[0],p=r[1],d=null;if(2!=r.length)throw"SPARQL algebra UNION with more than two components";var h=this;f.seq(function(r){try{h.executeSelectUnit(e,t,c,i,function(e){a=e,r()})}catch(e){d=e,r()}},function(r){if(null==d)try{h.executeSelectUnit(e,t,p,i,function(e){s=e,r()})}catch(e){d=e,r()}else r()})(function(){if(null!=d)o(d);else{var e=l.unionBindings(a,s);h.runBinds(r.binds,e,t,i,function(e,a){if(null!=e)throw new n("Error processing bind expressions",r.binds,e);u.checkFilters(r,a,!1,t,i,h,o)})}})},QueryEngine.prototype.executeAndBGP=function(e,t,r,i,o){var a=this;l.executeAndBGPsDPSize(r.value,t,this,i,function(e){null!=e?a.runBinds(r.binds,e,t,i,function(e,s){if(null!=e)throw new n("Error processing bind expressions",r.binds,e);u.checkFilters(r,s,!1,t,i,a,o)}):o(null)})},QueryEngine.prototype.executeLEFT_JOIN=function(e,t,r,i,o){var a=r.lvalue,s=r.rvalue;if("EMPTY_PATTERN"===a.kind)this.executeSelectUnit(e,t,s,i,o);else{var c,p,d=null,h=null,g=null,v=this;f.seq(function(r){try{v.executeSelectUnit(e,t,a,i,function(e){d=e,r()})}catch(e){g=e,r()}},function(r){if(null!=g)r();else try{v.executeSelectUnit(e,t,s,i,function(e){h=e,r()})}catch(e){g=e,r()}})(function(){if(null!=g)o(g);else{var e=l.leftOuterJoinBindings(d,h);v.runBinds(r.binds,e,t,i,function(a,s){if(null!=a)throw new n("Error processing bind expressions",r.binds,a);u.checkFilters(r,e,!0,t,i,v,function(e){if(d.length>1&&h.length>1){var t=[],r={};for(var n in d[0])r[n]=!0;for(n in h[0])1!=r[n]&&t.push(n);c=[],p={};for(var i=0;i<e.length;i++)if(!0===e[i].__nullify__){for(var a=0;a<t.length;a++)e[i].bindings[t[a]]=null;var s=[],l=[];for(var n in e[i].bindings)null!=e[i].bindings[n]&&(s.push(n+e[i].bindings[n]),s.sort(),l.push(s.join("")));if(null==p[s.join("")]){for(a=0;a<l.length;a++)p[l[a]]=!0;c.push(e[i].bindings)}}else{c.push(e[i]);var s=[],l=[];for(var n in e[i])s.push(n+e[i][n]),s.sort(),p[s.join("")]=!0}o(c)}else o(e)})})}})}},QueryEngine.prototype.executeJOIN=function(e,t,r,i,o){var a=r.lvalue,s=r.rvalue,c=null,p=null,d=null,h=this;f.seq(function(r){try{h.executeSelectUnit(e,t,a,i,function(e){c=e,r()})}catch(e){d=e,r()}},function(r){if(null!=d)r();else try{h.executeSelectUnit(e,t,s,i,function(e){p=e,r()})}catch(e){d=e,r()}})(function(){var e=null;if(null!=d)o(d);else if(0===c.length||0===p.length)o([]);else{var f={},g=[];for(var v in c[0])f[v]=!1;for(var v in p[0])!1===f[v]&&g.push(v);e=0==g.length?l.joinBindings(c,p):h.abstractQueryTree.treeWithUnion(a)||h.abstractQueryTree.treeWithUnion(s)?l.joinBindings(c,p):l.joinBindings2(g,c,p),h.runBinds(r.binds,e,t,i,function(e,a){if(null!=e)throw new n("Error processing bind expressions",r.binds,e);u.checkFilters(r,a,!1,t,i,h,o)})}})},QueryEngine.prototype.rangeQuery=function(e,t,r){var n=this;n.normalizeQuad(e,t,!1,function(e){null!=e?n.backend.range(new s.Pattern(e),function(e){r(null==e||0==e.length?[]:e)}):r(null)})},QueryEngine.prototype.executeUpdate=function(e,t){var r=e.prologue,n=e.units,i=this,o={blanks:{},outCache:{}};this.registerNsInEnvironment(r,o);for(var s=0;s<n.length;s++){var l=i.abstractQueryTree.parseExecutableUnit(n[s]);if("insertdata"===l.kind){var u=null;f.eachSeries(l.quads,function(e,t){null===u?i._executeQuadInsert(e,o,function(e){null!=e&&(u=e),t()}):t()},function(){null===u?t(null,!0):t(u)})}else if("deletedata"===l.kind){var u=null;f.eachSeries(l.quads,function(e,t){null===u?i._executeQuadDelete(e,o,function(e){null!=e&&(u=e),t()}):t()},function(){null===u?t(null,!0):t(u)})}else if("modify"===l.kind)this._executeModifyQuery(l,o,t);else if("create"===l.kind)t(!0);else if("load"===l.kind){var c={uri:a.lexicalFormBaseUri(l.sourceGraph,o)};null!=l.destinyGraph&&(c={uri:a.lexicalFormBaseUri(l.destinyGraph,o)});var i=this;this.rdfLoader.load(l.sourceGraph.value,c,function(e,r){e?t(new Error("error batch loading quads")):i.batchLoad(r,function(e){null!==e?t(null,e):t(new Error("Error batch loading quads"))})})}else if("drop"===l.kind)this._executeClearGraph(l.destinyGraph,o,t);else{if("clear"!==l.kind)throw new Error("not supported execution unit");this._executeClearGraph(l.destinyGraph,o,t)}}},QueryEngine.prototype.batchLoad=function(e,t){var r=0,n={},i=this;this.eventsOnBatchLoad&&this.callbacksBackend.startGraphModification();var o=function(e,t,r,o){var a,e;if(e[t].uri||"uri"===e[t].token){var s=e[t].uri||e[t].value;i.lexicon.registerUri(s,function(n){var a=function(){null!=e[t].uri&&(e[t]={token:"uri",value:e[t].uri},delete e[t].uri),r[t]=n,o()};"graph"===t?i.lexicon.registerGraph(n,s,function(){a()}):a()})}else e[t].literal||"literal"===e[t].token?i.lexicon.registerLiteral(e[t].literal||e[t].value,function(n){null!=e[t].literal&&(e[t]=i.lexicon.parseLiteral(e[t].literal),delete e[t].literal),r[t]=n,o()}):(a=n[e[t].blank||e[t].value],null==a?i.lexicon.registerBlank(function(i){n[e[t].blank||e[t].value]=i,null==e[t].token&&(e[t].token="blank",e[t].value=e[t].blank,delete e[t].blank),r[t]=i,o()}):(null==e[t].token&&(e[t].token="blank",e[t].value=e[t].blank,delete e[t].blank),r[t]=a,o()))};f.eachSeries(e,function(e,t){var n={};f.eachSeries(["subject","predicate","object","graph"],function(t,r){o(e,t,n,r)},function(){var o=e;e=n;var a=new s.NodeKey(e);i.backend.search(a,function(n){n?t():i.backend.index(a,function(n){n&&(i.eventsOnBatchLoad&&i.callbacksBackend.nextGraphModification(d.added,[o,e]),r+=1),t()})})})},function(){null!=i.lexicon.updateAfterWrite&&i.lexicon.updateAfterWrite();var e=function(){t(r)};i.eventsOnBatchLoad?i.callbacksBackend.endGraphModification(e()):e()})},QueryEngine.prototype._executeModifyQuery=function(e,t,r){var n=this,i=!0,o=new Error("Error executing modify query"),a=null,s=["subject","predicate","object","graph"];e.insert=null==e.insert?[]:e.insert,e.delete=null==e.delete?[]:e.delete,f.seq(function(r){var s=[],l=[];if(null!=e.with&&s.push(e.with),null!=e.using){l=[];for(var u=0;u<e.using.length;u++){var c=e.using[u];"named"===c.kind?l.push(c.uri):s.push(c.uri)}}e.dataset={},e.projection=[{token:"variable",kind:"*"}],n.executeSelect(e,t,s,l,function(e,s){if(e)return o=e,i=!1,r();n.denormalizeBindingsList(s,t,function(e){null!=e?a=e:(o=new Error("Error denormalizing bindings list"),i=!1),r()})})},function(r){var o=e.with;if(i){for(var l=[],u=0;u<e.delete.length;u++)for(var c=e.delete[u],p=0;p<a.length;p++){for(var d={},h=a[p],g=0;g<s.length;g++){var v=s[g];"graph"==v&&null==c[v]?d.graph=o:"var"===c[v].token?d[v]=h[c[v].value]:d[v]=c[v]}l.push(d)}f.eachSeries(l,function(e,r){n._executeQuadDelete(e,t,function(){r()})},function(){r()})}else r()},function(r){var o=e.with;if(i){for(var l=[],u=0;u<e.insert.length;u++)for(var c=e.insert[u],p=0;p<a.length;p++){for(var d={},h=a[p],g=0;g<s.length;g++){var v=s[g];"graph"==v&&null==c[v]?d.graph=o:"var"===c[v].token?d[v]=h[c[v].value]:d[v]=c[v]}l.push(d)}f.eachSeries(l,function(e,r){n._executeQuadInsert(e,t,function(){r()})},function(){r()})}else r()})(function(){r(i?null:o)})},QueryEngine.prototype._executeQuadInsert=function(e,t,r){var n,i=this,o=!1,a=null;f.seq(function(r){i.normalizeQuad(e,t,!0,function(e){null!=e?n=e:(o=!0,a="Error normalizing quad."),r()})},function(t){if(!1===o){var r=new s.NodeKey(n);i.backend.search(r,function(o){!0===o?t():i.backend.index(r,function(){i.callbacksBackend.nextGraphModification(d.added,[e,n]),t()})})}else t()})(function(){o?r(new Error(a)):r(null,!0)})},QueryEngine.prototype._executeQuadDelete=function(e,t,r){var n,i,o,a=this,l=!1;f.seq(function(r){a.normalizeQuad(e,t,!0,function(e){null!=e?n=e:(l=!0,i="Error normalizing quad."),r()})},function(e){!1===l?(o=new s.NodeKey(n),a.backend.delete(o,function(){e()})):e()},function(t){!1===l?a.lexicon.unregister(e,o,function(){a.callbacksBackend.nextGraphModification(d.deleted,[e,n]),t()}):t()})(function(){l?r(new Error(i)):r(null,!0)})},QueryEngine.prototype._executeClearGraph=function(e,t,r){var n=this;if("default"===e)this.execute("DELETE { ?s ?p ?o } WHERE { ?s ?p ?o }",r);else if("named"===e)n.lexicon.registeredGraphs(!0,function(e){if(null!=e){var t=!1;f.eachSeries(e,function(e,r){t?r():n.execute("DELETE { GRAPH <"+e+"> { ?s ?p ?o } } WHERE { GRAPH <"+e+"> { ?s ?p ?o } }",function(i,o){i?(t=i,r()):n.lexicon.resolveUri(e,function(i){-1!=i?n.lexicon.knownGraphs.delete(i,function(){r()}):(t="Cannot find graph "+e+" to clear it",r())})})},function(){r(!t)})}else r(!1,"Error deleting named graphs")});else if("all"===e){var n=this;this.execute("CLEAR DEFAULT",function(e,t){e?r(!1,t):n.execute("CLEAR NAMED",r)})}else if("uri"==e.token){var i=a.lexicalFormBaseUri(e,t);null!=i?(this.callbacksBackend.ongoingModification=!0,this.execute("DELETE { GRAPH <"+i+"> { ?s ?p ?o } } WHERE { GRAPH <"+i+"> { ?s ?p ?o } }",function(e){n.callbacksBackend.ongoingModification=!1,r(e)})):r(!1,"wrong graph URI")}else r(!1,"wrong graph URI")},QueryEngine.prototype.checkGroupSemantics=function(e,t){if("singleGroup"===e)return!0;for(var r={},n=0;n<e.length;n++){var i=e[n];"var"===i.token?r[i.value]=!0:"aliased_expression"===i.token&&(r[i.alias.value]=!0)}for(n=0;n<t.length;n++){var o=t[n];if("var"===o.kind){if(null==r[o.value.value])return!1}else if("aliased"===o.kind&&o.expression&&"var"===o.expression.primaryexpression&&null==r[o.expression.value.value])return!1}return!0},QueryEngine.prototype.runBinds=function(e,t,r,n,i){var o=this,a=t;null!=e&&e.length>0?o.copyDenormalizedBindings(t,n.outCache,function(s){for(var l=0;l<t.length;l++)for(var c=0;c<e.length;c++){var p=e[c],d=s[l],f=u.runFilter(p.expression,d,o,r,n);u.isEbvError(f)?i(f):a[l][p.as.value]=f}i(null,t)}):i(null,t)},QueryEngine.prototype.computeCosts=function(e,t,r){for(var n=0;n<e.length;n++)e[n]._cost=this.quadCost(e[n],t);r(e)},QueryEngine.prototype.quadCost=function(e,t){return 1},QueryEngine.prototype.registerDefaultNamespace=function(e,t){this.defaultPrefixes[e]=t},e.exports={QueryEngine:QueryEngine}},function(e,t){e.exports=function(){"use strict";function e(t,r,n,i){this.message=t,this.expected=r,this.found=n,this.location=i,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}function t(t,r){function n(e,t){return{type:"literal",text:e,ignoreCase:t}}function i(e,t,r){return{type:"class",parts:e,inverted:t,ignoreCase:r}}function o(e){return{type:"other",description:e}}function a(e){var r,n=Kv[e];if(n)return n;for(r=e-1;!Kv[r];)r--;for(n=Kv[r],n={line:n.line,column:n.column};r<e;)10===t.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return Kv[e]=n,n}function s(e,t){var r=a(e),n=a(t);return{start:{offset:e,line:r.line,column:r.column},end:{offset:t,line:n.line,column:n.column}}}function l(e){Xv<Jv||(Xv>Jv&&(Jv=Xv,Zv=[]),Zv.push(e))}function u(t,r,n){return new e(e.buildMessage(t,r),t,r,n)}function c(){return p()}function p(){var e;return e=d(),e===Sr&&(e=B()),e}function d(){var e;return em++,e=f(),em--,e===Sr&&(Sr,0===em&&l(Tr)),e}function f(){var e,t,r,n;return em++,e=Xv,t=h(),t!==Sr?(r=m(),r===Sr&&(r=E())===Sr&&(r=x())===Sr&&(r=S()),r!==Sr?(n=G(),n!==Sr?(Yv=e,t=Ir(t,r,n),e=t):(Xv=e,e=Sr)):(Xv=e,e=Sr)):(Xv=e,e=Sr),em--,e===Sr&&(t=Sr,0===em&&l(Ar)),e}function h(){var e,t,r,n,i;if(em++,e=Xv,t=g(),t===Sr&&(t=null),t!==Sr){for(r=[],n=lr();n!==Sr;)r.push(n),n=lr();if(r!==Sr){for(n=[],i=v();i!==Sr;)n.push(i),i=v();n!==Sr?(Yv=e,t=Nr(t,n),e=t):(Xv=e,e=Sr)}else Xv=e,e=Sr}else Xv=e,e=Sr;return em--,e===Sr&&(t=Sr,0===em&&l(Lr)),e}function g(){var e,r,n,i,o;for(em++,e=Xv,r=[],n=lr();n!==Sr;)r.push(n),n=lr();if(r!==Sr)if(t.substr(Xv,4)===_r?(n=_r,Xv+=4):(n=Sr,0===em&&l(kr)),n===Sr&&(t.substr(Xv,4)===Or?(n=Or,Xv+=4):(n=Sr,0===em&&l(Pr))),n!==Sr){for(i=[],o=lr();o!==Sr;)i.push(o),o=lr();i!==Sr?(o=$t(),o!==Sr?(Yv=e,r=Dr(o),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(Rr)),e}function v(){var e,r,n,i,o,a,s;for(em++,e=Xv,r=[],n=lr();n!==Sr;)r.push(n),n=lr();if(r!==Sr)if(t.substr(Xv,6)===Mr?(n=Mr,Xv+=6):(n=Sr,0===em&&l(jr)),n===Sr&&(t.substr(Xv,6)===$r?(n=$r,Xv+=6):(n=Sr,0===em&&l(Gr))),n!==Sr){for(i=[],o=lr();o!==Sr;)i.push(o),o=lr();if(i!==Sr)if((o=Gt())!==Sr){for(a=[],s=lr();s!==Sr;)a.push(s),s=lr();a!==Sr?(s=$t(),s!==Sr?(Yv=e,r=Br(o,s),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(Fr)),e}function m(){var e,t,r,n,i,o,a,s,u,c;if(em++,e=Xv,(t=b())!==Sr){for(r=[],n=lr();n!==Sr;)r.push(n),n=lr();if(r!==Sr){for(n=[],i=C();i!==Sr;)n.push(i),i=C();if(n!==Sr){for(i=[],o=lr();o!==Sr;)i.push(o),o=lr();if(i!==Sr)if((o=I())!==Sr){for(a=[],s=lr();s!==Sr;)a.push(s),s=lr();if(a!==Sr)if((s=L())!==Sr){for(u=[],c=lr();c!==Sr;)u.push(c),c=lr();u!==Sr?(c=j(),c!==Sr?(Yv=e,t=Ur(t,n,o,s),e=t):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr}else Xv=e,e=Sr}else Xv=e,e=Sr;return em--,e===Sr&&(t=Sr,0===em&&l(Hr)),e}function y(){var e,t,r,n;return em++,e=Xv,t=b(),t!==Sr?(r=I(),r!==Sr?(n=L(),n!==Sr?(Yv=e,t=qr(t,r,n),e=t):(Xv=e,e=Sr)):(Xv=e,e=Sr)):(Xv=e,e=Sr),em--,e===Sr&&(t=Sr,0===em&&l(Vr)),e}function b(){var e,r,n,i,o,a,s,u,c,p,d,f,h,g,v,m,y,b,E,x;for(em++,e=Xv,r=[],n=lr();n!==Sr;)r.push(n),n=lr();if(r!==Sr)if(t.substr(Xv,6)===Qr?(n=Qr,Xv+=6):(n=Sr,0===em&&l(Wr)),n===Sr&&(t.substr(Xv,6)===Xr?(n=Xr,Xv+=6):(n=Sr,0===em&&l(Yr))),n!==Sr){for(i=[],o=lr();o!==Sr;)i.push(o),o=lr();if(i!==Sr)if(t.substr(Xv,8)===Kr?(o=Kr,Xv+=8):(o=Sr,0===em&&l(Jr)),o===Sr&&(t.substr(Xv,8)===Zr?(o=Zr,Xv+=8):(o=Sr,0===em&&l(en))),o===Sr&&(t.substr(Xv,7)===tn?(o=tn,Xv+=7):(o=Sr,0===em&&l(rn)),o===Sr&&(t.substr(Xv,7)===nn?(o=nn,Xv+=7):(o=Sr,0===em&&l(on)))),o===Sr&&(o=null),o!==Sr){for(a=[],s=lr();s!==Sr;)a.push(s),s=lr();if(a!==Sr){for(s=[],u=Xv,c=[],p=lr();p!==Sr;)c.push(p),p=lr();if(c!==Sr)if((p=ct())!==Sr){for(d=[],f=lr();f!==Sr;)d.push(f),f=lr();d!==Sr?(c=[c,p,d],u=c):(Xv=u,u=Sr)}else Xv=u,u=Sr;else Xv=u,u=Sr;if(u===Sr){for(u=Xv,c=[],p=lr();p!==Sr;)c.push(p),p=lr();if(c!==Sr)if(40===t.charCodeAt(Xv)?(p=an,Xv++):(p=Sr,0===em&&l(sn)),p!==Sr){for(d=[],f=lr();f!==Sr;)d.push(f),f=lr();if(d!==Sr)if((f=dt())!==Sr){for(h=[],g=lr();g!==Sr;)h.push(g),g=lr();if(h!==Sr)if(t.substr(Xv,2)===ln?(g=ln,Xv+=2):(g=Sr,0===em&&l(un)),g===Sr&&(t.substr(Xv,2)===cn?(g=cn,Xv+=2):(g=Sr,0===em&&l(pn))),g!==Sr){for(v=[],m=lr();m!==Sr;)v.push(m),m=lr();if(v!==Sr)if((m=ct())!==Sr){for(y=[],b=lr();b!==Sr;)y.push(b),b=lr();if(y!==Sr)if(41===t.charCodeAt(Xv)?(b=dn,Xv++):(b=Sr,0===em&&l(fn)),b!==Sr){for(E=[],x=lr();x!==Sr;)E.push(x),x=lr();E!==Sr?(c=[c,p,d,f,h,g,v,m,y,b,E],u=c):(Xv=u,u=Sr)}else Xv=u,u=Sr;else Xv=u,u=Sr}else Xv=u,u=Sr;else Xv=u,u=Sr}else Xv=u,u=Sr;else Xv=u,u=Sr}else Xv=u,u=Sr;else Xv=u,u=Sr}else Xv=u,u=Sr;else Xv=u,u=Sr}if(u!==Sr)for(;u!==Sr;){for(s.push(u),u=Xv,c=[],p=lr();p!==Sr;)c.push(p),p=lr();if(c!==Sr)if((p=ct())!==Sr){for(d=[],f=lr();f!==Sr;)d.push(f),f=lr();d!==Sr?(c=[c,p,d],u=c):(Xv=u,u=Sr)}else Xv=u,u=Sr;else Xv=u,u=Sr;if(u===Sr){for(u=Xv,c=[],p=lr();p!==Sr;)c.push(p),p=lr();if(c!==Sr)if(40===t.charCodeAt(Xv)?(p=an,Xv++):(p=Sr,0===em&&l(sn)),p!==Sr){for(d=[],f=lr();f!==Sr;)d.push(f),f=lr();if(d!==Sr)if((f=dt())!==Sr){for(h=[],g=lr();g!==Sr;)h.push(g),g=lr();if(h!==Sr)if(t.substr(Xv,2)===ln?(g=ln,Xv+=2):(g=Sr,0===em&&l(un)),g===Sr&&(t.substr(Xv,2)===cn?(g=cn,Xv+=2):(g=Sr,0===em&&l(pn))),g!==Sr){for(v=[],m=lr();m!==Sr;)v.push(m),m=lr();if(v!==Sr)if((m=ct())!==Sr){for(y=[],b=lr();b!==Sr;)y.push(b),b=lr();if(y!==Sr)if(41===t.charCodeAt(Xv)?(b=dn,Xv++):(b=Sr,0===em&&l(fn)),b!==Sr){for(E=[],x=lr();x!==Sr;)E.push(x),x=lr();E!==Sr?(c=[c,p,d,f,h,g,v,m,y,b,E],u=c):(Xv=u,u=Sr)}else Xv=u,u=Sr;else Xv=u,u=Sr}else Xv=u,u=Sr;else Xv=u,u=Sr}else Xv=u,u=Sr;else Xv=u,u=Sr}else Xv=u,u=Sr;else Xv=u,u=Sr}else Xv=u,u=Sr;else Xv=u,u=Sr}}else s=Sr;if(s===Sr){for(s=Xv,u=[],c=lr();c!==Sr;)u.push(c),c=lr();if(u!==Sr)if(42===t.charCodeAt(Xv)?(c=hn,Xv++):(c=Sr,0===em&&l(gn)),c!==Sr){for(p=[],d=lr();d!==Sr;)p.push(d),d=lr();p!==Sr?(u=[u,c,p],s=u):(Xv=s,s=Sr)}else Xv=s,s=Sr;else Xv=s,s=Sr}s!==Sr?(Yv=e,r=vn(o,s),e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(zr)),e}function E(){var e,r,n,i,o,a,s,u,c,p,d,f,h,g,v;for(em++,e=Xv,r=[],n=lr();n!==Sr;)r.push(n),n=lr();if(r!==Sr)if(t.substr(Xv,9)===yn?(n=yn,Xv+=9):(n=Sr,0===em&&l(bn)),n===Sr&&(t.substr(Xv,9)===En?(n=En,Xv+=9):(n=Sr,0===em&&l(xn))),n!==Sr){for(i=[],o=lr();o!==Sr;)i.push(o),o=lr();if(i!==Sr)if((o=Le())!==Sr){for(a=[],s=lr();s!==Sr;)a.push(s),s=lr();if(a!==Sr){for(s=[],u=C();u!==Sr;)s.push(u),u=C();if(s!==Sr){for(u=[],c=lr();c!==Sr;)u.push(c),c=lr();if(u!==Sr)if((c=I())!==Sr){for(p=[],d=lr();d!==Sr;)p.push(d),d=lr();p!==Sr?(d=L(),d!==Sr?(Yv=e,r=Sn(o,s,c,d),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr}else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr;if(e===Sr){for(e=Xv,r=[],n=lr();n!==Sr;)r.push(n),n=lr();if(r!==Sr)if(t.substr(Xv,9)===yn?(n=yn,Xv+=9):(n=Sr,0===em&&l(bn)),n===Sr&&(t.substr(Xv,9)===En?(n=En,Xv+=9):(n=Sr,0===em&&l(xn))),n!==Sr){for(i=[],o=lr();o!==Sr;)i.push(o),o=lr();if(i!==Sr){for(o=[],a=C();a!==Sr;)o.push(a),a=C();if(o!==Sr){for(a=[],s=lr();s!==Sr;)a.push(s),s=lr();if(a!==Sr)if(t.substr(Xv,5)===Cn?(s=Cn,Xv+=5):(s=Sr,0===em&&l(wn)),s===Sr&&(t.substr(Xv,5)===Tn?(s=Tn,Xv+=5):(s=Sr,0===em&&l(An))),s!==Sr){for(u=[],c=lr();c!==Sr;)u.push(c),c=lr();if(u!==Sr)if(123===t.charCodeAt(Xv)?(c=In,Xv++):(c=Sr,0===em&&l(Ln)),c!==Sr){for(p=[],d=lr();d!==Sr;)p.push(d),d=lr();if(p!==Sr)if(d=se(),d===Sr&&(d=null),d!==Sr){for(f=[],h=lr();h!==Sr;)f.push(h),h=lr();if(f!==Sr)if(125===t.charCodeAt(Xv)?(h=Nn,Xv++):(h=Sr,0===em&&l(Rn)),h!==Sr){for(g=[],v=lr();v!==Sr;)g.push(v),v=lr();g!==Sr?(v=L(),v!==Sr?(Yv=e,r=_n(o,d,v),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr}else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}return em--,e===Sr&&(r=Sr,0===em&&l(mn)),e}function x(){var e,r,n,i,o,a;if(em++,e=Xv,t.substr(Xv,8)===On?(r=On,Xv+=8):(r=Sr,0===em&&l(Pn)),r!==Sr){if(n=[],(i=ut())!==Sr)for(;i!==Sr;)n.push(i),i=ut();else n=Sr;if(n===Sr&&(42===t.charCodeAt(Xv)?(n=hn,Xv++):(n=Sr,0===em&&l(gn))),n!==Sr){for(i=[],o=C();o!==Sr;)i.push(o),o=C();i!==Sr?(o=I(),o===Sr&&(o=null),o!==Sr?(a=L(),a!==Sr?(r=[r,n,i,o,a],e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(kn)),e}function S(){var e,r,n,i,o,a,s;for(em++,e=Xv,r=[],n=lr();n!==Sr;)r.push(n),n=lr();if(r!==Sr)if(t.substr(Xv,3)===Fn?(n=Fn,Xv+=3):(n=Sr,0===em&&l(Mn)),n===Sr&&(t.substr(Xv,3)===jn?(n=jn,Xv+=3):(n=Sr,0===em&&l($n))),n!==Sr){for(i=[],o=lr();o!==Sr;)i.push(o),o=lr();if(i!==Sr){for(o=[],a=C();a!==Sr;)o.push(a),a=C();if(o!==Sr){for(a=[],s=lr();s!==Sr;)a.push(s),s=lr();a!==Sr?(s=I(),s!==Sr?(Yv=e,r=Gn(o,s),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr}else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(Dn)),e}function C(){var e,r,n,i,o,a;if(em++,e=Xv,t.substr(Xv,4)===Hn?(r=Hn,Xv+=4):(r=Sr,0===em&&l(Un)),r===Sr&&(t.substr(Xv,4)===Vn?(r=Vn,Xv+=4):(r=Sr,0===em&&l(qn))),r!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();if(n!==Sr)if(i=w(),i===Sr&&(i=T()),i!==Sr){for(o=[],a=lr();a!==Sr;)o.push(a),a=lr();o!==Sr?(Yv=e,r=zn(i),e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(Bn)),e}function w(){var e,t,r;for(em++,e=Xv,t=[],r=lr();r!==Sr;)t.push(r),r=lr();return t!==Sr?(r=A(),r!==Sr?(Yv=e,t=Wn(r),e=t):(Xv=e,e=Sr)):(Xv=e,e=Sr),em--,e===Sr&&(t=Sr,0===em&&l(Qn)),e}function T(){var e,r,n,i;if(em++,e=Xv,t.substr(Xv,5)===Yn?(r=Yn,Xv+=5):(r=Sr,0===em&&l(Kn)),r===Sr&&(t.substr(Xv,5)===Jn?(r=Jn,Xv+=5):(r=Sr,0===em&&l(Zn))),r!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();n!==Sr?(i=A(),i!==Sr?(Yv=e,r=ei(i),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(Xn)),e}function A(){var e;return em++,e=Ft(),em--,e===Sr&&(Sr,0===em&&l(ti)),e}function I(){var e,r,n,i,o,a;if(em++,e=Xv,t.substr(Xv,5)===Cn?(r=Cn,Xv+=5):(r=Sr,0===em&&l(wn)),r===Sr&&(t.substr(Xv,5)===Tn?(r=Tn,Xv+=5):(r=Sr,0===em&&l(An))),r===Sr&&(r=null),r!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();if(n!==Sr)if((i=le())!==Sr){for(o=[],a=lr();a!==Sr;)o.push(a),a=lr();o!==Sr?(Yv=e,r=ni(i),e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(ri)),e}function L(){var e,t,r,n,i;return em++,e=Xv,t=N(),t===Sr&&(t=null),t!==Sr?(r=_(),r===Sr&&(r=null),r!==Sr?(n=O(),n===Sr&&(n=null),n!==Sr?(i=D(),i===Sr&&(i=null),i!==Sr?(Yv=e,t=oi(t,n,i),e=t):(Xv=e,e=Sr)):(Xv=e,e=Sr)):(Xv=e,e=Sr)):(Xv=e,e=Sr),em--,e===Sr&&(t=Sr,0===em&&l(ii)),e}function N(){var e,r,n,i,o,a,s;if(em++,e=Xv,t.substr(Xv,5)===si?(r=si,Xv+=5):(r=Sr,0===em&&l(li)),r===Sr&&(t.substr(Xv,5)===ui?(r=ui,Xv+=5):(r=Sr,0===em&&l(ci))),r!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();if(n!==Sr)if(t.substr(Xv,2)===pi?(i=pi,Xv+=2):(i=Sr,0===em&&l(di)),i===Sr&&(t.substr(Xv,2)===fi?(i=fi,Xv+=2):(i=Sr,0===em&&l(hi))),i!==Sr){for(o=[],a=lr();a!==Sr;)o.push(a),a=lr();if(o!==Sr){if(a=[],(s=R())!==Sr)for(;s!==Sr;)a.push(s),s=R();else a=Sr;a!==Sr?(Yv=e,r=gi(a),e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(ai)),e}function R(){var e,r,n,i,o,a,s,u,c,p,d;for(em++,e=Xv,r=[],n=lr();n!==Sr;)r.push(n),n=lr();if(r!==Sr)if((n=Ct())!==Sr){for(i=[],o=lr();o!==Sr;)i.push(o),o=lr();i!==Sr?(Yv=e,r=mi(n),e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr;if(e===Sr){for(e=Xv,r=[],n=lr();n!==Sr;)r.push(n),n=lr();if(r!==Sr)if((n=Te())!==Sr){for(i=[],o=lr();o!==Sr;)i.push(o),o=lr();i!==Sr?(Yv=e,r=yi(n),e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr;if(e===Sr){for(e=Xv,r=[],n=lr();n!==Sr;)r.push(n),n=lr();if(r!==Sr)if(40===t.charCodeAt(Xv)?(n=an,Xv++):(n=Sr,0===em&&l(sn)),n!==Sr){for(i=[],o=lr();o!==Sr;)i.push(o),o=lr();if(i!==Sr)if((o=dt())!==Sr){for(a=[],s=lr();s!==Sr;)a.push(s),s=lr();if(a!==Sr){if(s=Xv,t.substr(Xv,2)===ln?(u=ln,Xv+=2):(u=Sr,0===em&&l(un)),u===Sr&&(t.substr(Xv,2)===cn?(u=cn,Xv+=2):(u=Sr,0===em&&l(pn))),u!==Sr){for(c=[],p=lr();p!==Sr;)c.push(p),p=lr();c!==Sr?(p=ct(),p!==Sr?(u=[u,c,p],s=u):(Xv=s,s=Sr)):(Xv=s,s=Sr)}else Xv=s,s=Sr;if(s===Sr&&(s=null),s!==Sr){for(u=[],c=lr();c!==Sr;)u.push(c),c=lr();if(u!==Sr)if(41===t.charCodeAt(Xv)?(c=dn,Xv++):(c=Sr,0===em&&l(fn)),c!==Sr){for(p=[],d=lr();d!==Sr;)p.push(d),d=lr();p!==Sr?(Yv=e,r=bi(o,s),e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr}else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr;if(e===Sr){for(e=Xv,r=[],n=lr();n!==Sr;)r.push(n),n=lr();if(r!==Sr)if((n=ct())!==Sr){for(i=[],o=lr();o!==Sr;)i.push(o),o=lr();i!==Sr?(Yv=e,r=Ei(n),e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr}}}return em--,e===Sr&&(r=Sr,0===em&&l(vi)),e}function _(){var e,r,n,i;if(em++,e=Xv,t.substr(Xv,6)===Si?(r=Si,Xv+=6):(r=Sr,0===em&&l(Ci)),r!==Sr){if(n=[],(i=k())!==Sr)for(;i!==Sr;)n.push(i),i=k();else n=Sr;n!==Sr?(r=[r,n],e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(xi)),e}function k(){var e;return em++,e=be(),em--,e===Sr&&(Sr,0===em&&l(wi)),e}function O(){var e,r,n,i,o,a,s,u;if(em++,e=Xv,t.substr(Xv,5)===Ai?(r=Ai,Xv+=5):(r=Sr,0===em&&l(Ii)),r===Sr&&(t.substr(Xv,5)===Li?(r=Li,Xv+=5):(r=Sr,0===em&&l(Ni))),r!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();if(n!==Sr)if(t.substr(Xv,2)===pi?(i=pi,Xv+=2):(i=Sr,0===em&&l(di)),i===Sr&&(t.substr(Xv,2)===fi?(i=fi,Xv+=2):(i=Sr,0===em&&l(hi))),i!==Sr){for(o=[],a=lr();a!==Sr;)o.push(a),a=lr();if(o!==Sr){if(a=[],(s=P())!==Sr)for(;s!==Sr;)a.push(s),s=P();else a=Sr;if(a!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();s!==Sr?(Yv=e,r=Ri(a),e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr}else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(Ti)),e}function P(){var e,r,n,i,o,a;if(em++,e=Xv,t.substr(Xv,3)===ki?(r=ki,Xv+=3):(r=Sr,0===em&&l(Oi)),r===Sr&&(t.substr(Xv,3)===Pi?(r=Pi,Xv+=3):(r=Sr,0===em&&l(Di)),r===Sr&&(t.substr(Xv,4)===Fi?(r=Fi,Xv+=4):(r=Sr,0===em&&l(Mi)),r===Sr&&(t.substr(Xv,4)===ji?(r=ji,Xv+=4):(r=Sr,0===em&&l($i))))),r!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();if(n!==Sr)if((i=St())!==Sr){for(o=[],a=lr();a!==Sr;)o.push(a),a=lr();o!==Sr?(Yv=e,r=Gi(r,i),e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;if(e===Sr)if(e=Xv,r=be(),r===Sr&&(r=ct()),r!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();n!==Sr?(Yv=e,r=Bi(r),e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(_i)),e}function D(){var e,t,r,n;return em++,e=Xv,t=Xv,r=F(),r!==Sr?(n=M(),n===Sr&&(n=null),n!==Sr?(r=[r,n],t=r):(Xv=t,t=Sr)):(Xv=t,t=Sr),t===Sr&&(t=Xv,r=M(),r!==Sr?(n=F(),n===Sr&&(n=null),n!==Sr?(r=[r,n],t=r):(Xv=t,t=Sr)):(Xv=t,t=Sr)),t!==Sr&&(Yv=e,t=Ui(t)),e=t,em--,e===Sr&&(t=Sr,0===em&&l(Hi)),e}function F(){var e,r,n,i,o,a;if(em++,e=Xv,t.substr(Xv,5)===qi?(r=qi,Xv+=5):(r=Sr,0===em&&l(zi)),r===Sr&&(t.substr(Xv,5)===Qi?(r=Qi,Xv+=5):(r=Sr,0===em&&l(Wi))),r!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();if(n!==Sr)if((i=zt())!==Sr){for(o=[],a=lr();a!==Sr;)o.push(a),a=lr();o!==Sr?(Yv=e,r=Xi(i),e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(Vi)),e}function M(){var e,r,n,i,o,a;if(em++,e=Xv,t.substr(Xv,6)===Ki?(r=Ki,Xv+=6):(r=Sr,0===em&&l(Ji)),r===Sr&&(t.substr(Xv,6)===Zi?(r=Zi,Xv+=6):(r=Sr,0===em&&l(eo))),r!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();if(n!==Sr)if((i=zt())!==Sr){for(o=[],a=lr();a!==Sr;)o.push(a),a=lr();o!==Sr?(Yv=e,r=to(i),e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(Yi)),e}function j(){var e,r,n,i,o,a,s,u,c;if(em++,e=Xv,t.substr(Xv,8)===no?(r=no,Xv+=8):(r=Sr,0===em&&l(io)),r!==Sr){for(n=[],i=ct();i!==Sr;)n.push(i),i=ct();if(n!==Sr)if(123===t.charCodeAt(Xv)?(i=In,Xv++):(i=Sr,0===em&&l(Ln)),i!==Sr){if(o=[],a=Xv,40===t.charCodeAt(Xv)?(s=an,Xv++):(s=Sr,0===em&&l(sn)),s!==Sr){if(u=[],(c=$())!==Sr)for(;c!==Sr;)u.push(c),c=$();else u=Sr;u!==Sr?(41===t.charCodeAt(Xv)?(c=dn,Xv++):(c=Sr,0===em&&l(fn)),c!==Sr?(s=[s,u,c],a=s):(Xv=a,a=Sr)):(Xv=a,a=Sr)}else Xv=a,a=Sr;for(a===Sr&&(a=sr());a!==Sr;){if(o.push(a),a=Xv,40===t.charCodeAt(Xv)?(s=an,Xv++):(s=Sr,0===em&&l(sn)),s!==Sr){if(u=[],(c=$())!==Sr)for(;c!==Sr;)u.push(c),c=$();else u=Sr;u!==Sr?(41===t.charCodeAt(Xv)?(c=dn,Xv++):(c=Sr,0===em&&l(fn)),c!==Sr?(s=[s,u,c],a=s):(Xv=a,a=Sr)):(Xv=a,a=Sr)}else Xv=a,a=Sr;a===Sr&&(a=sr())}o!==Sr?(125===t.charCodeAt(Xv)?(a=Nn,Xv++):(a=Sr,0===em&&l(Rn)),a!==Sr?(r=[r,n,i,o,a],e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;return e===Sr&&(e=null),em--,e===Sr&&(r=Sr,0===em&&l(ro)),e}function $(){var e;return em++,e=Ft(),e===Sr&&(e=Nt())===Sr&&(e=Rt())===Sr&&(e=Pt())===Sr&&(t.substr(Xv,5)===ao?(e=ao,Xv+=5):(e=Sr,0===em&&l(so))),em--,e===Sr&&(Sr,0===em&&l(oo)),e}function G(){var e,r,n,i;return em++,e=Xv,r=Xv,t.substr(Xv,6)===uo?(n=uo,Xv+=6):(n=Sr,0===em&&l(co)),n===Sr&&(t.substr(Xv,6)===po?(n=po,Xv+=6):(n=Sr,0===em&&l(fo))),n!==Sr?(i=xe(),i!==Sr?(n=[n,i],r=n):(Xv=r,r=Sr)):(Xv=r,r=Sr),r===Sr&&(r=null),r!==Sr&&(Yv=e,r=ho(r)),e=r,em--,e===Sr&&(r=Sr,0===em&&l(lo)),e}function B(){var e;return em++,e=H(),em--,e===Sr&&(Sr,0===em&&l(go)),e}function H(){var e,r,n,i,o,a,s,u,c;if(em++,e=Xv,(r=h())!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();if(n!==Sr)if((i=U())!==Sr){for(o=Xv,a=[],s=lr();s!==Sr;)a.push(s),s=lr();if(a!==Sr)if(59===t.charCodeAt(Xv)?(s=mo,Xv++):(s=Sr,0===em&&l(yo)),s!==Sr){for(u=[],c=lr();c!==Sr;)u.push(c),c=lr();u!==Sr?(c=H(),c===Sr&&(c=null),c!==Sr?(a=[a,s,u,c],o=a):(Xv=o,o=Sr)):(Xv=o,o=Sr)}else Xv=o,o=Sr;else Xv=o,o=Sr;o===Sr&&(o=null),o!==Sr?(Yv=e,r=bo(r,i,o),e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(vo)),e}function U(){var e;return em++,e=V(),e===Sr&&(e=q())===Sr&&(e=z())===Sr&&(e=Q())===Sr&&(e=W())===Sr&&(e=X())===Sr&&(e=Y())===Sr&&(e=K()),em--,e===Sr&&(Sr,0===em&&l(Eo)),e}function V(){var e,r,n,i,o,a,s,u,c;if(em++,e=Xv,t.substr(Xv,4)===So?(r=So,Xv+=4):(r=Sr,0===em&&l(Co)),r===Sr&&(t.substr(Xv,4)===wo?(r=wo,Xv+=4):(r=Sr,0===em&&l(To))),r!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();if(n!==Sr)if((i=Ft())!==Sr){for(o=[],a=lr();a!==Sr;)o.push(a),a=lr();if(o!==Sr){if(a=Xv,t.substr(Xv,4)===Ao?(s=Ao,Xv+=4):(s=Sr,0===em&&l(Io)),s===Sr&&(t.substr(Xv,4)===Lo?(s=Lo,Xv+=4):(s=Sr,0===em&&l(No))),s!==Sr){for(u=[],c=lr();c!==Sr;)u.push(c),c=lr();u!==Sr?(c=te(),c!==Sr?(s=[s,u,c],a=s):(Xv=a,a=Sr)):(Xv=a,a=Sr)}else Xv=a,a=Sr;a===Sr&&(a=null),a!==Sr?(Yv=e,r=Ro(i,a),e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(xo)),e}function q(){var e,r,n,i,o,a;if(em++,e=Xv,t.substr(Xv,5)===ko?(r=ko,Xv+=5):(r=Sr,0===em&&l(Oo)),r===Sr&&(t.substr(Xv,5)===Po?(r=Po,Xv+=5):(r=Sr,0===em&&l(Do))),r!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();if(n!==Sr)if(t.substr(Xv,6)===Fo?(i=Fo,Xv+=6):(i=Sr,0===em&&l(Mo)),i===Sr&&(t.substr(Xv,6)===jo?(i=jo,Xv+=6):(i=Sr,0===em&&l($o))),i===Sr&&(i=null),i!==Sr){for(o=[],a=lr();a!==Sr;)o.push(a),a=lr();o!==Sr?(a=re(),a!==Sr?(Yv=e,r=Go(a),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(_o)),e}function z(){var e,r,n,i,o,a;if(em++,e=Xv,t.substr(Xv,4)===Ho?(r=Ho,Xv+=4):(r=Sr,0===em&&l(Uo)),r===Sr&&(t.substr(Xv,4)===Vo?(r=Vo,Xv+=4):(r=Sr,0===em&&l(qo))),r!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();if(n!==Sr)if(t.substr(Xv,6)===Fo?(i=Fo,Xv+=6):(i=Sr,0===em&&l(Mo)),i===Sr&&(t.substr(Xv,6)===jo?(i=jo,Xv+=6):(i=Sr,0===em&&l($o))),i===Sr&&(i=null),i!==Sr){for(o=[],a=lr();a!==Sr;)o.push(a),a=lr();o!==Sr?(a=re(),a!==Sr?(Yv=e,r=zo(a),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(Bo)),e}function Q(){var e,r,n,i,o,a;if(em++,e=Xv,t.substr(Xv,6)===Wo?(r=Wo,Xv+=6):(r=Sr,0===em&&l(Xo)),r===Sr&&(t.substr(Xv,6)===Yo?(r=Yo,Xv+=6):(r=Sr,0===em&&l(Ko))),r!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();if(n!==Sr)if(t.substr(Xv,6)===Fo?(i=Fo,Xv+=6):(i=Sr,0===em&&l(Mo)),i===Sr&&(t.substr(Xv,6)===jo?(i=jo,Xv+=6):(i=Sr,0===em&&l($o))),i===Sr&&(i=null),i!==Sr){for(o=[],a=lr();a!==Sr;)o.push(a),a=lr();o!==Sr?(a=te(),a!==Sr?(Yv=e,r=Jo(a),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(Qo)),e}function W(){var e,r,n,i,o,a;if(em++,e=Xv,t.substr(Xv,6)===ea?(r=ea,Xv+=6):(r=Sr,0===em&&l(ta)),r===Sr&&(t.substr(Xv,6)===ra?(r=ra,Xv+=6):(r=Sr,0===em&&l(na))),r!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();if(n!==Sr)if(t.substr(Xv,4)===ia?(i=ia,Xv+=4):(i=Sr,0===em&&l(oa)),i===Sr&&(t.substr(Xv,4)===aa?(i=aa,Xv+=4):(i=Sr,0===em&&l(sa))),i!==Sr){for(o=[],a=lr();a!==Sr;)o.push(a),a=lr();o!==Sr?(a=ie(),a!==Sr?(Yv=e,r=la(a),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(Zo)),e}function X(){var e,r,n,i,o;if(em++,e=Xv,t.substr(Xv,6)===ca?(r=ca,Xv+=6):(r=Sr,0===em&&l(pa)),r===Sr&&(t.substr(Xv,6)===da?(r=da,Xv+=6):(r=Sr,0===em&&l(fa))),r!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();n!==Sr?(t.substr(Xv,4)===ia?(i=ia,Xv+=4):(i=Sr,0===em&&l(oa)),i===Sr&&(t.substr(Xv,4)===aa?(i=aa,Xv+=4):(i=Sr,0===em&&l(sa))),i!==Sr?(o=ie(),o!==Sr?(Yv=e,r=ha(o),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(ua)),e}function Y(){var e,r,n,i,o,a;if(em++,e=Xv,t.substr(Xv,6)===ca?(r=ca,Xv+=6):(r=Sr,0===em&&l(pa)),r===Sr&&(t.substr(Xv,6)===da?(r=da,Xv+=6):(r=Sr,0===em&&l(fa))),r!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();if(n!==Sr)if(t.substr(Xv,5)===Cn?(i=Cn,Xv+=5):(i=Sr,0===em&&l(wn)),i===Sr&&(t.substr(Xv,5)===Tn?(i=Tn,Xv+=5):(i=Sr,0===em&&l(An))),i!==Sr){for(o=[],a=lr();a!==Sr;)o.push(a),a=lr();o!==Sr?(a=le(),a!==Sr?(Yv=e,r=va(a),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(ga)),e}function K(){var e,r,n,i,o,a,s,u,c,p,d,f;if(em++,e=Xv,r=Xv,t.substr(Xv,4)===ya?(n=ya,Xv+=4):(n=Sr,0===em&&l(ba)),n===Sr&&(t.substr(Xv,4)===Ea?(n=Ea,Xv+=4):(n=Sr,0===em&&l(xa))),n!==Sr){for(i=[],o=lr();o!==Sr;)i.push(o),o=lr();i!==Sr?(o=Ft(),o!==Sr?(n=[n,i,o],r=n):(Xv=r,r=Sr)):(Xv=r,r=Sr)}else Xv=r,r=Sr;if(r===Sr&&(r=null),r!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();if(n!==Sr){if(i=Xv,(o=J())!==Sr){for(a=[],s=lr();s!==Sr;)a.push(s),s=lr();a!==Sr?(s=Z(),s===Sr&&(s=null),s!==Sr?(o=[o,a,s],i=o):(Xv=i,i=Sr)):(Xv=i,i=Sr)}else Xv=i,i=Sr;if(i===Sr&&(i=Z()),i!==Sr){for(o=[],a=lr();a!==Sr;)o.push(a),a=lr();if(o!==Sr){for(a=[],s=ee();s!==Sr;)a.push(s),s=ee();if(a!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();if(s!==Sr)if(t.substr(Xv,5)===Cn?(u=Cn,Xv+=5):(u=Sr,0===em&&l(wn)),u===Sr&&(t.substr(Xv,5)===Tn?(u=Tn,Xv+=5):(u=Sr,0===em&&l(An))),u!==Sr){for(c=[],p=lr();p!==Sr;)c.push(p),p=lr();if(c!==Sr)if((p=le())!==Sr){for(d=[],f=lr();f!==Sr;)d.push(f),f=lr();d!==Sr?(Yv=e,r=Sa(r,i,a,p),e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr}else Xv=e,e=Sr}else Xv=e,e=Sr}else Xv=e,e=Sr}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(ma)),e}function J(){var e,r,n;return em++,e=Xv,t.substr(Xv,6)===ca?(r=ca,Xv+=6):(r=Sr,0===em&&l(pa)),r===Sr&&(t.substr(Xv,6)===da?(r=da,Xv+=6):(r=Sr,0===em&&l(fa))),r!==Sr?(n=ne(),n!==Sr?(Yv=e,r=wa(n),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr),em--,e===Sr&&(r=Sr,0===em&&l(Ca)),e}function Z(){var e,r,n;return em++,e=Xv,t.substr(Xv,6)===ea?(r=ea,Xv+=6):(r=Sr,0===em&&l(ta)),r===Sr&&(t.substr(Xv,6)===ra?(r=ra,Xv+=6):(r=Sr,0===em&&l(na))),r!==Sr?(n=ne(),n!==Sr?(Yv=e,r=wa(n),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr),em--,e===Sr&&(r=Sr,0===em&&l(Ta)),e}function ee(){var e,r,n,i,o,a,s,u;for(em++,e=Xv,r=[],n=lr();n!==Sr;)r.push(n),n=lr();if(r!==Sr)if(t.substr(Xv,5)===Ia?(n=Ia,Xv+=5):(n=Sr,0===em&&l(La)),n===Sr&&(t.substr(Xv,5)===Na?(n=Na,Xv+=5):(n=Sr,0===em&&l(Ra))),n!==Sr){for(i=[],o=lr();o!==Sr;)i.push(o),o=lr();if(i!==Sr){if((o=Ft())===Sr)if(o=Xv,t.substr(Xv,5)===Yn?(a=Yn,Xv+=5):(a=Sr,0===em&&l(Kn)),a===Sr&&(t.substr(Xv,5)===Jn?(a=Jn,Xv+=5):(a=Sr,0===em&&l(Zn))),a!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();s!==Sr?(u=Ft(),u!==Sr?(a=[a,s,u],o=a):(Xv=o,o=Sr)):(Xv=o,o=Sr)}else Xv=o,o=Sr;o!==Sr?(Yv=e,r=_a(o),e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(Aa)),e}function te(){var e,r,n,i;if(em++,e=Xv,t.substr(Xv,5)===Oa?(r=Oa,Xv+=5):(r=Sr,0===em&&l(Pa)),r===Sr&&(t.substr(Xv,5)===Da?(r=Da,Xv+=5):(r=Sr,0===em&&l(Fa))),r!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();n!==Sr?(i=Ft(),i!==Sr?(Yv=e,r=Ma(i),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(ka)),e}function re(){var e,r;return em++,e=Xv,r=te(),r!==Sr&&(Yv=e,r=ni(r)),e=r,e===Sr&&(e=Xv,t.substr(Xv,7)===$a?(r=$a,Xv+=7):(r=Sr,0===em&&l(Ga)),r===Sr&&(t.substr(Xv,7)===Ba?(r=Ba,Xv+=7):(r=Sr,0===em&&l(Ha))),r!==Sr&&(Yv=e,r=Ua()),(e=r)===Sr&&(e=Xv,t.substr(Xv,5)===Yn?(r=Yn,Xv+=5):(r=Sr,0===em&&l(Kn)),r===Sr&&(t.substr(Xv,5)===Jn?(r=Jn,Xv+=5):(r=Sr,0===em&&l(Zn))),r!==Sr&&(Yv=e,r=Va()),(e=r)===Sr&&(e=Xv,t.substr(Xv,3)===qa?(r=qa,Xv+=3):(r=Sr,0===em&&l(za)),r===Sr&&(t.substr(Xv,3)===Qa?(r=Qa,Xv+=3):(r=Sr,0===em&&l(Wa))),r!==Sr&&(Yv=e,r=Xa()),e=r))),em--,e===Sr&&(r=Sr,0===em&&l(ja)),e}function ne(){var e,r,n,i,o,a,s,u,c;for(em++,e=Xv,r=[],n=lr();n!==Sr;)r.push(n),n=lr();if(r!==Sr)if(123===t.charCodeAt(Xv)?(n=In,Xv++):(n=Sr,0===em&&l(Ln)),n!==Sr){for(i=[],o=lr();o!==Sr;)i.push(o),o=lr();if(i!==Sr)if((o=oe())!==Sr){for(a=[],s=lr();s!==Sr;)a.push(s),s=lr();if(a!==Sr)if(125===t.charCodeAt(Xv)?(s=Nn,Xv++):(s=Sr,0===em&&l(Rn)),s!==Sr){for(u=[],c=lr();c!==Sr;)u.push(c),c=lr();u!==Sr?(Yv=e,r=Ka(o),e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(Ya)),e}function ie(){var e,r,n,i,o,a,s,u,c;for(em++,e=Xv,r=[],n=lr();n!==Sr;)r.push(n),n=lr();if(r!==Sr)if(123===t.charCodeAt(Xv)?(n=In,Xv++):(n=Sr,0===em&&l(Ln)),n!==Sr){for(i=[],o=lr();o!==Sr;)i.push(o),o=lr();if(i!==Sr)if((o=oe())!==Sr){for(a=[],s=lr();s!==Sr;)a.push(s),s=lr();if(a!==Sr)if(125===t.charCodeAt(Xv)?(s=Nn,Xv++):(s=Sr,0===em&&l(Rn)),s!==Sr){for(u=[],c=lr();c!==Sr;)u.push(c),c=lr();u!==Sr?(Yv=e,r=Ka(o),e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(Ja)),e}function oe(){var e,r,n,i,o,a,s;if(em++,e=Xv,r=se(),r===Sr&&(r=null),r!==Sr){for(n=[],i=Xv,o=ae(),o!==Sr?(46===t.charCodeAt(Xv)?(a=es,Xv++):(a=Sr,0===em&&l(ts)),a===Sr&&(a=null),a!==Sr?(s=se(),s===Sr&&(s=null),s!==Sr?(o=[o,a,s],i=o):(Xv=i,i=Sr)):(Xv=i,i=Sr)):(Xv=i,i=Sr);i!==Sr;)n.push(i),i=Xv,o=ae(),o!==Sr?(46===t.charCodeAt(Xv)?(a=es,Xv++):(a=Sr,0===em&&l(ts)),a===Sr&&(a=null),a!==Sr?(s=se(),s===Sr&&(s=null),s!==Sr?(o=[o,a,s],i=o):(Xv=i,i=Sr)):(Xv=i,i=Sr)):(Xv=i,i=Sr);n!==Sr?(Yv=e,r=rs(r,n),e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(Za)),e}function ae(){var e,r,n,i,o,a,s,u,c,p,d,f,h;for(em++,e=Xv,r=[],n=lr();n!==Sr;)r.push(n),n=lr();if(r!==Sr)if(t.substr(Xv,5)===Oa?(n=Oa,Xv+=5):(n=Sr,0===em&&l(Pa)),n===Sr&&(t.substr(Xv,5)===Da?(n=Da,Xv+=5):(n=Sr,0===em&&l(Fa))),n!==Sr){for(i=[],o=lr();o!==Sr;)i.push(o),o=lr();if(i!==Sr)if((o=ut())!==Sr){for(a=[],s=lr();s!==Sr;)a.push(s),s=lr();if(a!==Sr)if(123===t.charCodeAt(Xv)?(s=In,Xv++):(s=Sr,0===em&&l(Ln)),s!==Sr){for(u=[],c=lr();c!==Sr;)u.push(c),c=lr();if(u!==Sr)if(c=se(),c===Sr&&(c=null),c!==Sr){for(p=[],d=lr();d!==Sr;)p.push(d),d=lr();if(p!==Sr)if(125===t.charCodeAt(Xv)?(d=Nn,Xv++):(d=Sr,0===em&&l(Rn)),d!==Sr){for(f=[],h=lr();h!==Sr;)f.push(h),h=lr();f!==Sr?(Yv=e,r=is(o,c),e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(ns)),e}function se(){var e,r,n,i,o,a,s;if(em++,e=Xv,(r=Re())!==Sr){for(n=Xv,i=[],o=lr();o!==Sr;)i.push(o),o=lr();if(i!==Sr)if(46===t.charCodeAt(Xv)?(o=es,Xv++):(o=Sr,0===em&&l(ts)),o!==Sr){for(a=[],s=lr();s!==Sr;)a.push(s),s=lr();a!==Sr?(s=se(),s===Sr&&(s=null),s!==Sr?(i=[i,o,a,s],n=i):(Xv=n,n=Sr)):(Xv=n,n=Sr)}else Xv=n,n=Sr;else Xv=n,n=Sr;n===Sr&&(n=null),n!==Sr?(Yv=e,r=as(r,n),e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(os)),e}function le(){var e,r,n,i,o,a;if(em++,e=Xv,123===t.charCodeAt(Xv)?(r=In,Xv++):(r=Sr,0===em&&l(Ln)),r!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();if(n!==Sr)if((i=y())!==Sr){for(o=[],a=lr();a!==Sr;)o.push(a),a=lr();o!==Sr?(125===t.charCodeAt(Xv)?(a=Nn,Xv++):(a=Sr,0===em&&l(Rn)),a!==Sr?(Yv=e,r=ls(i),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;if(e===Sr)if(e=Xv,123===t.charCodeAt(Xv)?(r=In,Xv++):(r=Sr,0===em&&l(Ln)),r!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();if(n!==Sr)if((i=ue())!==Sr){for(o=[],a=lr();a!==Sr;)o.push(a),a=lr();o!==Sr?(125===t.charCodeAt(Xv)?(a=Nn,Xv++):(a=Sr,0===em&&l(Rn)),a!==Sr?(Yv=e,r=ls(i),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(ss)),e}function ue(){var e,r,n,i,o,a,s,u,c,p;if(em++,e=Xv,r=ce(),r===Sr&&(r=null),r!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();if(n!==Sr){if(i=[],o=Xv,(a=pe())!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();if(s!==Sr)if(46===t.charCodeAt(Xv)?(u=es,Xv++):(u=Sr,0===em&&l(ts)),u===Sr&&(u=null),u!==Sr){for(c=[],p=lr();p!==Sr;)c.push(p),p=lr();c!==Sr?(p=ce(),p===Sr&&(p=null),p!==Sr?(a=[a,s,u,c,p],o=a):(Xv=o,o=Sr)):(Xv=o,o=Sr)}else Xv=o,o=Sr;else Xv=o,o=Sr}else Xv=o,o=Sr;for(;o!==Sr;)if(i.push(o),o=Xv,(a=pe())!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();if(s!==Sr)if(46===t.charCodeAt(Xv)?(u=es,Xv++):(u=Sr,0===em&&l(ts)),u===Sr&&(u=null),u!==Sr){for(c=[],p=lr();p!==Sr;)c.push(p),p=lr();c!==Sr?(p=ce(),p===Sr&&(p=null),p!==Sr?(a=[a,s,u,c,p],o=a):(Xv=o,o=Sr)):(Xv=o,o=Sr)}else Xv=o,o=Sr;else Xv=o,o=Sr}else Xv=o,o=Sr;i!==Sr?(Yv=e,r=cs(r,i),e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(us)),e}function ce(){var e,r,n,i,o,a;if(em++,e=Xv,(r=$e())!==Sr){for(n=Xv,i=[],o=lr();o!==Sr;)i.push(o),o=lr();i!==Sr?(46===t.charCodeAt(Xv)?(o=es,Xv++):(o=Sr,0===em&&l(ts)),o!==Sr?(a=ce(),a===Sr&&(a=null),a!==Sr?(i=[i,o,a],n=i):(Xv=n,n=Sr)):(Xv=n,n=Sr)):(Xv=n,n=Sr),n===Sr&&(n=null),n!==Sr?(Yv=e,r=ds(r,n),e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(ps)),e}function pe(){var e;return em++,e=ve(),e===Sr&&(e=de())===Sr&&(e=ge())===Sr&&(e=fe())===Sr&&(e=he())===Sr&&(e=me())===Sr&&(e=ye())===Sr&&(e=Ee()),em--,e===Sr&&(Sr,0===em&&l(fs)),e}function de(){var e,r,n,i,o;for(em++,e=Xv,r=[],n=lr();n!==Sr;)r.push(n),n=lr();if(r!==Sr)if(t.substr(Xv,8)===gs?(n=gs,Xv+=8):(n=Sr,0===em&&l(vs)),n===Sr&&(t.substr(Xv,8)===ms?(n=ms,Xv+=8):(n=Sr,0===em&&l(ys))),n!==Sr){for(i=[],o=lr();o!==Sr;)i.push(o),o=lr();i!==Sr?(o=le(),o!==Sr?(Yv=e,r=bs(o),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(hs)),e}function fe(){var e,r,n,i,o,a,s;for(em++,e=Xv,r=[],n=lr();n!==Sr;)r.push(n),n=lr();if(r!==Sr)if(t.substr(Xv,5)===Oa?(n=Oa,Xv+=5):(n=Sr,0===em&&l(Pa)),n===Sr&&(t.substr(Xv,5)===Da?(n=Da,Xv+=5):(n=Sr,0===em&&l(Fa))),n!==Sr){for(i=[],o=lr();o!==Sr;)i.push(o),o=lr();if(i!==Sr)if((o=ut())!==Sr){for(a=[],s=lr();s!==Sr;)a.push(s),s=lr();a!==Sr?(s=le(),s!==Sr?(Yv=e,r=xs(o,s),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(Es)),e}function he(){var e,r,n,i;return em++,e=Xv,t.substr(Xv,7)===Cs?(r=Cs,Xv+=7):(r=Sr,0===em&&l(ws)),r!==Sr?(n=ut(),n!==Sr?(i=le(),i!==Sr?(Yv=e,r=Ts(n,i),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)):(Xv=e,e=Sr),em--,e===Sr&&(r=Sr,0===em&&l(Ss)),e}function ge(){var e,r,n,i;if(em++,e=Xv,t.substr(Xv,5)===Is?(r=Is,Xv+=5):(r=Sr,0===em&&l(Ls)),r===Sr&&(t.substr(Xv,5)===Ns?(r=Ns,Xv+=5):(r=Sr,0===em&&l(Rs))),r!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();n!==Sr?(i=le(),i!==Sr?(Yv=e,r=_s(i),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(As)),e}function ve(){var e,r,n,i,o,a,s,u;if(em++,e=Xv,(r=le())!==Sr){for(n=[],i=Xv,o=[],a=lr();a!==Sr;)o.push(a),a=lr();if(o!==Sr)if(t.substr(Xv,5)===Os?(a=Os,Xv+=5):(a=Sr,0===em&&l(Ps)),a===Sr&&(t.substr(Xv,5)===Ds?(a=Ds,Xv+=5):(a=Sr,0===em&&l(Fs))),a!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();s!==Sr?(u=le(),u!==Sr?(o=[o,a,s,u],i=o):(Xv=i,i=Sr)):(Xv=i,i=Sr)}else Xv=i,i=Sr;else Xv=i,i=Sr;for(;i!==Sr;){for(n.push(i),i=Xv,o=[],a=lr();a!==Sr;)o.push(a),a=lr();if(o!==Sr)if(t.substr(Xv,5)===Os?(a=Os,Xv+=5):(a=Sr,0===em&&l(Ps)),a===Sr&&(t.substr(Xv,5)===Ds?(a=Ds,Xv+=5):(a=Sr,0===em&&l(Fs))),a!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();s!==Sr?(u=le(),u!==Sr?(o=[o,a,s,u],i=o):(Xv=i,i=Sr)):(Xv=i,i=Sr)}else Xv=i,i=Sr;else Xv=i,i=Sr}n!==Sr?(Yv=e,r=Ms(r,n),e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(ks)),e}function me(){var e,r,n,i,o;for(em++,e=Xv,r=[],n=lr();n!==Sr;)r.push(n),n=lr();if(r!==Sr)if(t.substr(Xv,6)===$s?(n=$s,Xv+=6):(n=Sr,0===em&&l(Gs)),n===Sr&&(t.substr(Xv,6)===Bs?(n=Bs,Xv+=6):(n=Sr,0===em&&l(Hs))),n!==Sr){for(i=[],o=lr();o!==Sr;)i.push(o),o=lr();i!==Sr?(o=be(),o!==Sr?(Yv=e,r=Us(o),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(js)),e}function ye(){var e,r,n,i,o,a,s,u,c,p,d,f,h;for(em++,e=Xv,r=[],n=lr();n!==Sr;)r.push(n),n=lr();if(r!==Sr)if(t.substr(Xv,4)===qs?(n=qs,Xv+=4):(n=Sr,0===em&&l(zs)),n===Sr&&(t.substr(Xv,4)===Qs?(n=Qs,Xv+=4):(n=Sr,0===em&&l(Ws))),n!==Sr){for(i=[],o=lr();o!==Sr;)i.push(o),o=lr();if(i!==Sr)if(40===t.charCodeAt(Xv)?(o=an,Xv++):(o=Sr,0===em&&l(sn)),o!==Sr){for(a=[],s=lr();s!==Sr;)a.push(s),s=lr();if(a!==Sr)if((s=dt())!==Sr){for(u=[],c=lr();c!==Sr;)u.push(c),c=lr();if(u!==Sr)if(t.substr(Xv,2)===cn?(c=cn,Xv+=2):(c=Sr,0===em&&l(pn)),c===Sr&&(t.substr(Xv,2)===ln?(c=ln,Xv+=2):(c=Sr,0===em&&l(un))),c!==Sr){for(p=[],d=lr();d!==Sr;)p.push(d),d=lr();if(p!==Sr)if((d=ct())!==Sr){for(f=[],h=lr();h!==Sr;)f.push(h),h=lr();f!==Sr?(41===t.charCodeAt(Xv)?(h=dn,Xv++):(h=Sr,0===em&&l(fn)),h!==Sr?(Yv=e,r=Xs(s,d),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(Vs)),e}function be(){var e;return em++,e=St(),e===Sr&&(e=Ct())===Sr&&(e=Te()),em--,e===Sr&&(Sr,0===em&&l(Ys)),e}function Ee(){var e,r,n,i,o;for(em++,e=Xv,r=[],n=lr();n!==Sr;)r.push(n),n=lr();if(r!==Sr)if(t.substr(Xv,6)===uo?(n=uo,Xv+=6):(n=Sr,0===em&&l(co)),n===Sr&&(t.substr(Xv,6)===po?(n=po,Xv+=6):(n=Sr,0===em&&l(fo))),n!==Sr){for(i=[],o=lr();o!==Sr;)i.push(o),o=lr();i!==Sr?(o=xe(),o!==Sr?(Yv=e,r=Js(o),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(Ks)),e}function xe(){var e;return em++,e=Se(),e===Sr&&(e=Ce()),em--,e===Sr&&(Sr,0===em&&l(Zs)),e}function Se(){var e,r,n,i,o,a,s,u;for(em++,e=Xv,r=[],n=lr();n!==Sr;)r.push(n),n=lr();if(r!==Sr)if((n=ct())!==Sr){for(i=[],o=lr();o!==Sr;)i.push(o),o=lr();if(i!==Sr)if(123===t.charCodeAt(Xv)?(o=In,Xv++):(o=Sr,0===em&&l(Ln)),o!==Sr){for(a=[],s=lr();s!==Sr;)a.push(s),s=lr();if(a!==Sr){for(s=[],u=we();u!==Sr;)s.push(u),u=we();s!==Sr?(125===t.charCodeAt(Xv)?(u=Nn,Xv++):(u=Sr,0===em&&l(Rn)),u!==Sr?(Yv=e,r=tl(n,s),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(el)),e}function Ce(){var e,r,n,i,o,a,s,u,c,p,d,f,h,g,v,m;for(em++,e=Xv,r=[],n=lr();n!==Sr;)r.push(n),n=lr();if(r!==Sr){if((n=sr())===Sr)if(n=Xv,40===t.charCodeAt(Xv)?(i=an,Xv++):(i=Sr,0===em&&l(sn)),i!==Sr){for(o=[],a=lr();a!==Sr;)o.push(a),a=lr();if(o!==Sr){for(a=[],s=ct();s!==Sr;)a.push(s),s=ct();if(a!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();s!==Sr?(41===t.charCodeAt(Xv)?(u=dn,Xv++):(u=Sr,0===em&&l(fn)),u!==Sr?(i=[i,o,a,s,u],n=i):(Xv=n,n=Sr)):(Xv=n,n=Sr)}else Xv=n,n=Sr}else Xv=n,n=Sr}else Xv=n,n=Sr;if(n!==Sr){for(i=[],o=lr();o!==Sr;)i.push(o),o=lr();if(i!==Sr)if(123===t.charCodeAt(Xv)?(o=In,Xv++):(o=Sr,0===em&&l(Ln)),o!==Sr){for(a=[],s=lr();s!==Sr;)a.push(s),s=lr();if(a!==Sr){for(s=[],u=Xv,c=[],p=lr();p!==Sr;)c.push(p),p=lr();if(c!==Sr)if(40===t.charCodeAt(Xv)?(p=an,Xv++):(p=Sr,0===em&&l(sn)),p!==Sr){for(d=[],f=lr();f!==Sr;)d.push(f),f=lr();if(d!==Sr){for(f=[],h=we();h!==Sr;)f.push(h),h=we();if(f!==Sr){for(h=[],g=lr();g!==Sr;)h.push(g),g=lr();if(h!==Sr)if(41===t.charCodeAt(Xv)?(g=dn,Xv++):(g=Sr,0===em&&l(fn)),g!==Sr){for(v=[],m=lr();m!==Sr;)v.push(m),m=lr();v!==Sr?(c=[c,p,d,f,h,g,v],u=c):(Xv=u,u=Sr)}else Xv=u,u=Sr;else Xv=u,u=Sr}else Xv=u,u=Sr}else Xv=u,u=Sr}else Xv=u,u=Sr;else Xv=u,u=Sr;for(u===Sr&&(u=sr());u!==Sr;){for(s.push(u),u=Xv,c=[],p=lr();p!==Sr;)c.push(p),p=lr();if(c!==Sr)if(40===t.charCodeAt(Xv)?(p=an,Xv++):(p=Sr,0===em&&l(sn)),p!==Sr){for(d=[],f=lr();f!==Sr;)d.push(f),f=lr();if(d!==Sr){for(f=[],h=we();h!==Sr;)f.push(h),h=we();if(f!==Sr){for(h=[],g=lr();g!==Sr;)h.push(g),g=lr();if(h!==Sr)if(41===t.charCodeAt(Xv)?(g=dn,Xv++):(g=Sr,0===em&&l(fn)),g!==Sr){for(v=[],m=lr();m!==Sr;)v.push(m),m=lr();v!==Sr?(c=[c,p,d,f,h,g,v],u=c):(Xv=u,u=Sr)}else Xv=u,u=Sr;else Xv=u,u=Sr}else Xv=u,u=Sr}else Xv=u,u=Sr}else Xv=u,u=Sr;else Xv=u,u=Sr;u===Sr&&(u=sr())}if(s!==Sr){for(u=[],c=lr();c!==Sr;)u.push(c),c=lr();u!==Sr?(125===t.charCodeAt(Xv)?(c=Nn,Xv++):(c=Sr,0===em&&l(Rn)),c!==Sr?(Yv=e,r=nl(n,s),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr}else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(rl)),e}function we(){var e,r,n,i,o;for(em++,e=Xv,r=[],n=lr();n!==Sr;)r.push(n),n=lr();if(r!==Sr)if(n=$t(),n===Sr&&(n=Nt())===Sr&&(n=Rt())===Sr&&(n=Pt())===Sr&&(t.substr(Xv,5)===ao?(n=ao,Xv+=5):(n=Sr,0===em&&l(so))),n!==Sr){for(i=[],o=lr();o!==Sr;)i.push(o),o=lr();i!==Sr?(Yv=e,r=Ei(n),e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(il)),e}function Te(){var e,t,r,n;if(em++,e=Xv,(t=Ft())!==Sr){for(r=[],n=lr();n!==Sr;)r.push(n),n=lr();r!==Sr?(n=Ae(),n!==Sr?(Yv=e,t=al(t,n),e=t):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;return em--,e===Sr&&(t=Sr,0===em&&l(ol)),e}function Ae(){var e,r,n,i,o,a,s,u,c,p,d,f;if(em++,e=Xv,r=sr(),r!==Sr&&(Yv=e,r=ll()),(e=r)===Sr)if(e=Xv,40===t.charCodeAt(Xv)?(r=an,Xv++):(r=Sr,0===em&&l(sn)),r!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();if(n!==Sr)if(t.substr(Xv,8)===Kr?(i=Kr,Xv+=8):(i=Sr,0===em&&l(Jr)),i===Sr&&(t.substr(Xv,8)===Zr?(i=Zr,Xv+=8):(i=Sr,0===em&&l(en))),i===Sr&&(i=null),i!==Sr){for(o=[],a=lr();a!==Sr;)o.push(a),a=lr();if(o!==Sr)if((a=dt())!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();if(s!==Sr){if(u=[],c=Xv,44===t.charCodeAt(Xv)?(p=ul,Xv++):(p=Sr,0===em&&l(cl)),p!==Sr){for(d=[],f=lr();f!==Sr;)d.push(f),f=lr();d!==Sr?(f=dt(),f!==Sr?(p=[p,d,f],c=p):(Xv=c,c=Sr)):(Xv=c,c=Sr)}else Xv=c,c=Sr;for(;c!==Sr;)if(u.push(c),c=Xv,44===t.charCodeAt(Xv)?(p=ul,Xv++):(p=Sr,0===em&&l(cl)),p!==Sr){for(d=[],f=lr();f!==Sr;)d.push(f),f=lr();d!==Sr?(f=dt(),f!==Sr?(p=[p,d,f],c=p):(Xv=c,c=Sr)):(Xv=c,c=Sr)}else Xv=c,c=Sr;u!==Sr?(41===t.charCodeAt(Xv)?(c=dn,Xv++):(c=Sr,0===em&&l(fn)),c!==Sr?(Yv=e,r=pl(i,a,u),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(sl)),e}function Ie(){var e,r,n,i,o,a,s,u,c,p;if(em++,e=Xv,r=sr(),r!==Sr&&(Yv=e,r=ll()),(e=r)===Sr)if(e=Xv,40===t.charCodeAt(Xv)?(r=an,Xv++):(r=Sr,0===em&&l(sn)),r!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();if(n!==Sr)if(i=Ft(),i===Sr&&(i=dt()),i!==Sr){for(o=[],a=lr();a!==Sr;)o.push(a),a=lr();if(o!==Sr){if(a=[],s=Xv,44===t.charCodeAt(Xv)?(u=ul,Xv++):(u=Sr,0===em&&l(cl)),u!==Sr){for(c=[],p=lr();p!==Sr;)c.push(p),p=lr();c!==Sr?(p=Ft(),p===Sr&&(p=dt()),p!==Sr?(u=[u,c,p],s=u):(Xv=s,s=Sr)):(Xv=s,s=Sr)}else Xv=s,s=Sr;for(;s!==Sr;)if(a.push(s),s=Xv,44===t.charCodeAt(Xv)?(u=ul,Xv++):(u=Sr,0===em&&l(cl)),u!==Sr){for(c=[],p=lr();p!==Sr;)c.push(p),p=lr();c!==Sr?(p=Ft(),p===Sr&&(p=dt()),p!==Sr?(u=[u,c,p],s=u):(Xv=s,s=Sr)):(Xv=s,s=Sr)}else Xv=s,s=Sr;a!==Sr?(41===t.charCodeAt(Xv)?(s=dn,Xv++):(s=Sr,0===em&&l(fn)),s!==Sr?(Yv=e,r=fl(i,a),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(dl)),e}function Le(){var e,r,n,i,o,a;if(em++,e=Xv,123===t.charCodeAt(Xv)?(r=In,Xv++):(r=Sr,0===em&&l(Ln)),r!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();if(n!==Sr)if(i=Ne(),i===Sr&&(i=null),i!==Sr){for(o=[],a=lr();a!==Sr;)o.push(a),a=lr();o!==Sr?(125===t.charCodeAt(Xv)?(a=Nn,Xv++):(a=Sr,0===em&&l(Rn)),a!==Sr?(Yv=e,r=gl(i),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(hl)),e}function Ne(){var e,r,n,i,o,a,s;if(em++,e=Xv,(r=Re())!==Sr){for(n=Xv,i=[],o=lr();o!==Sr;)i.push(o),o=lr();if(i!==Sr)if(46===t.charCodeAt(Xv)?(o=es,Xv++):(o=Sr,0===em&&l(ts)),o!==Sr){for(a=[],s=lr();s!==Sr;)a.push(s),s=lr();a!==Sr?(s=Ne(),s===Sr&&(s=null),s!==Sr?(i=[i,o,a,s],n=i):(Xv=n,n=Sr)):(Xv=n,n=Sr)}else Xv=n,n=Sr;else Xv=n,n=Sr;n===Sr&&(n=null),n!==Sr?(Yv=e,r=ml(r,n),e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(vl)),e}function Re(){var e,t,r,n,i;for(em++,e=Xv,t=[],r=lr();r!==Sr;)t.push(r),r=lr();if(t!==Sr)if((r=lt())!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();n!==Sr?(i=ke(),i!==Sr?(Yv=e,t=bl(r,i),e=t):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr;if(e===Sr){for(e=Xv,t=[],r=lr();r!==Sr;)t.push(r),r=lr();if(t!==Sr)if((r=tt())!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();n!==Sr?(i=Oe(),i!==Sr?(Yv=e,t=El(r,i),e=t):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr}return em--,e===Sr&&(t=Sr,0===em&&l(yl)),e}function _e(){var e,r,n,i,o,a,s,u,c,p,d,f,h;if(em++,e=Xv,r=He(),r===Sr&&(r=Ue()),r!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();if(n!==Sr)if((i=Pe())!==Sr){for(o=[],a=Xv,s=[],u=lr();u!==Sr;)s.push(u),u=lr();if(s!==Sr)if(59===t.charCodeAt(Xv)?(u=mo,Xv++):(u=Sr,0===em&&l(yo)),u!==Sr){for(c=[],p=lr();p!==Sr;)c.push(p),p=lr();if(c!==Sr){if(p=Xv,d=He(),d===Sr&&(d=Ue()),d!==Sr){for(f=[],h=lr();h!==Sr;)f.push(h),h=lr();f!==Sr?(h=De(),h!==Sr?(d=[d,f,h],p=d):(Xv=p,p=Sr)):(Xv=p,p=Sr)}else Xv=p,p=Sr;p===Sr&&(p=null),p!==Sr?(s=[s,u,c,p],a=s):(Xv=a,a=Sr)}else Xv=a,a=Sr}else Xv=a,a=Sr;else Xv=a,a=Sr;for(;a!==Sr;){for(o.push(a),a=Xv,s=[],u=lr();u!==Sr;)s.push(u),u=lr();if(s!==Sr)if(59===t.charCodeAt(Xv)?(u=mo,Xv++):(u=Sr,0===em&&l(yo)),u!==Sr){for(c=[],p=lr();p!==Sr;)c.push(p),p=lr();if(c!==Sr){if(p=Xv,d=He(),d===Sr&&(d=Ue()),d!==Sr){for(f=[],h=lr();h!==Sr;)f.push(h),h=lr();f!==Sr?(h=De(),h!==Sr?(d=[d,f,h],p=d):(Xv=p,p=Sr)):(Xv=p,p=Sr)}else Xv=p,p=Sr;p===Sr&&(p=null),p!==Sr?(s=[s,u,c,p],a=s):(Xv=a,a=Sr)}else Xv=a,a=Sr}else Xv=a,a=Sr;else Xv=a,a=Sr}o!==Sr?(Yv=e,r=Sl(r,i,o),e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(xl)),e}function ke(){var e,r,n,i,o,a,s,u,c,p,d,f,h;if(em++,e=Xv,(r=je())!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();if(n!==Sr)if((i=De())!==Sr){for(o=[],a=Xv,s=[],u=lr();u!==Sr;)s.push(u),u=lr();if(s!==Sr)if(59===t.charCodeAt(Xv)?(u=mo,Xv++):(u=Sr,0===em&&l(yo)),u!==Sr){for(c=[],p=lr();p!==Sr;)c.push(p),p=lr();if(c!==Sr){if(p=Xv,(d=je())!==Sr){for(f=[],h=lr();h!==Sr;)f.push(h),h=lr();f!==Sr?(h=De(),h!==Sr?(d=[d,f,h],p=d):(Xv=p,p=Sr)):(Xv=p,p=Sr)}else Xv=p,p=Sr;p===Sr&&(p=null),p!==Sr?(s=[s,u,c,p],a=s):(Xv=a,a=Sr)}else Xv=a,a=Sr}else Xv=a,a=Sr;else Xv=a,a=Sr;for(;a!==Sr;){for(o.push(a),a=Xv,s=[],u=lr();u!==Sr;)s.push(u),u=lr();if(s!==Sr)if(59===t.charCodeAt(Xv)?(u=mo,Xv++):(u=Sr,0===em&&l(yo)),u!==Sr){for(c=[],p=lr();p!==Sr;)c.push(p),p=lr();if(c!==Sr){if(p=Xv,(d=je())!==Sr){for(f=[],h=lr();h!==Sr;)f.push(h),h=lr();f!==Sr?(h=De(),h!==Sr?(d=[d,f,h],p=d):(Xv=p,p=Sr)):(Xv=p,p=Sr)}else Xv=p,p=Sr;p===Sr&&(p=null),p!==Sr?(s=[s,u,c,p],a=s):(Xv=a,a=Sr)}else Xv=a,a=Sr}else Xv=a,a=Sr;else Xv=a,a=Sr}o!==Sr?(Yv=e,r=wl(r,i,o),e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(Cl)),e}function Oe(){var e;return em++,e=ke(),e===Sr&&(e=null),em--,e===Sr&&(Sr,0===em&&l(Tl)),e}function Pe(){var e,r,n,i,o,a,s,u;if(em++,e=Xv,(r=Fe())!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();if(n!==Sr){if(i=[],o=Xv,44===t.charCodeAt(Xv)?(a=ul,Xv++):(a=Sr,0===em&&l(cl)),a!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();s!==Sr?(u=Fe(),u!==Sr?(a=[a,s,u],o=a):(Xv=o,o=Sr)):(Xv=o,o=Sr)}else Xv=o,o=Sr;for(;o!==Sr;)if(i.push(o),o=Xv,44===t.charCodeAt(Xv)?(a=ul,Xv++):(a=Sr,0===em&&l(cl)),a!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();s!==Sr?(u=Fe(),u!==Sr?(a=[a,s,u],o=a):(Xv=o,o=Sr)):(Xv=o,o=Sr)}else Xv=o,o=Sr;i!==Sr?(Yv=e,r=Il(r,i),e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(Al)),e}function De(){var e,r,n,i,o,a,s,u;if(em++,e=Xv,(r=Me())!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();if(n!==Sr){if(i=[],o=Xv,44===t.charCodeAt(Xv)?(a=ul,Xv++):(a=Sr,0===em&&l(cl)),a!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();s!==Sr?(u=Me(),u!==Sr?(a=[a,s,u],o=a):(Xv=o,o=Sr)):(Xv=o,o=Sr)}else Xv=o,o=Sr;for(;o!==Sr;)if(i.push(o),o=Xv,44===t.charCodeAt(Xv)?(a=ul,Xv++):(a=Sr,0===em&&l(cl)),a!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();s!==Sr?(u=Me(),u!==Sr?(a=[a,s,u],o=a):(Xv=o,o=Sr)):(Xv=o,o=Sr)}else Xv=o,o=Sr;i!==Sr?(Yv=e,r=Nl(r,i),e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(Ll)),e}function Fe(){var e;return em++,e=at(),em--,e===Sr&&(Sr,0===em&&l(Rl)),e}function Me(){var e;return em++,e=st(),em--,e===Sr&&(Sr,0===em&&l(_l)),e}function je(){var e,r;return em++,e=ut(),e===Sr&&(e=Xv,97===t.charCodeAt(Xv)?(r=Ol,Xv++):(r=Sr,0===em&&l(Pl)),r!==Sr&&(Yv=e,r=Dl()),e=r),em--,e===Sr&&(r=Sr,0===em&&l(kl)),e}function $e(){var e,t,r,n,i;for(em++,e=Xv,t=[],r=lr();r!==Sr;)t.push(r),r=lr();if(t!==Sr)if((r=lt())!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();n!==Sr?(i=Ge(),i!==Sr?(Yv=e,t=Ml(r,i),e=t):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr;if(e===Sr){for(e=Xv,t=[],r=lr();r!==Sr;)t.push(r),r=lr();if(t!==Sr)if((r=et())!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();n!==Sr?(i=Be(),i!==Sr?(Yv=e,t=jl(r,i),e=t):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr}return em--,e===Sr&&(t=Sr,0===em&&l(Fl)),e}function Ge(){var e,r,n,i,o,a,s,u,c,p,d,f;if(em++,e=Xv,r=He(),r===Sr&&(r=Ue()),r!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();if(n!==Sr)if((i=Pe())!==Sr){for(o=[],a=Xv,s=[],u=lr();u!==Sr;)s.push(u),u=lr();if(s!==Sr)if(59===t.charCodeAt(Xv)?(u=mo,Xv++):(u=Sr,0===em&&l(yo)),u!==Sr){for(c=[],p=lr();p!==Sr;)c.push(p),p=lr();c!==Sr?(p=Xv,d=He(),d===Sr&&(d=Ue()),d!==Sr?(f=De(),f!==Sr?(d=[d,f],p=d):(Xv=p,p=Sr)):(Xv=p,p=Sr),p===Sr&&(p=null),p!==Sr?(s=[s,u,c,p],a=s):(Xv=a,a=Sr)):(Xv=a,a=Sr)}else Xv=a,a=Sr;else Xv=a,a=Sr;for(;a!==Sr;){for(o.push(a),a=Xv,s=[],u=lr();u!==Sr;)s.push(u),u=lr();if(s!==Sr)if(59===t.charCodeAt(Xv)?(u=mo,Xv++):(u=Sr,0===em&&l(yo)),u!==Sr){for(c=[],p=lr();p!==Sr;)c.push(p),p=lr();c!==Sr?(p=Xv,d=He(),d===Sr&&(d=Ue()),d!==Sr?(f=De(),f!==Sr?(d=[d,f],p=d):(Xv=p,p=Sr)):(Xv=p,p=Sr),p===Sr&&(p=null),p!==Sr?(s=[s,u,c,p],a=s):(Xv=a,a=Sr)):(Xv=a,a=Sr)}else Xv=a,a=Sr;else Xv=a,a=Sr}o!==Sr?(Yv=e,r=Gl(r,i,o),e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l($l)),e}function Be(){var e;return em++,e=_e(),e===Sr&&(e=null),em--,e===Sr&&(Sr,0===em&&l(Bl)),e}function He(){var e,t;return em++,e=Xv,t=Ve(),t!==Sr&&(Yv=e,t=Ul(t)),e=t,em--,e===Sr&&(t=Sr,0===em&&l(Hl)),e}function Ue(){var e;return em++,e=ct(),em--,e===Sr&&(Sr,0===em&&l(Vl)),e}function Ve(){var e;return em++,e=qe(),em--,e===Sr&&(Sr,0===em&&l(ql)),e}function qe(){var e,r,n,i,o,a;if(em++,e=Xv,(r=ze())!==Sr){for(n=[],i=Xv,124===t.charCodeAt(Xv)?(o=Ql,Xv++):(o=Sr,0===em&&l(Wl)),o!==Sr?(a=ze(),a!==Sr?(o=[o,a],i=o):(Xv=i,i=Sr)):(Xv=i,i=Sr);i!==Sr;)n.push(i),i=Xv,124===t.charCodeAt(Xv)?(o=Ql,Xv++):(o=Sr,0===em&&l(Wl)),o!==Sr?(a=ze(),a!==Sr?(o=[o,a],i=o):(Xv=i,i=Sr)):(Xv=i,i=Sr);n!==Sr?(Yv=e,r=Xl(r,n),e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(zl)),e}function ze(){var e,r,n,i,o,a;if(em++,e=Xv,(r=We())!==Sr){for(n=[],i=Xv,47===t.charCodeAt(Xv)?(o=Kl,Xv++):(o=Sr,0===em&&l(Jl)),o!==Sr?(a=We(),a!==Sr?(o=[o,a],i=o):(Xv=i,i=Sr)):(Xv=i,i=Sr);i!==Sr;)n.push(i),i=Xv,47===t.charCodeAt(Xv)?(o=Kl,Xv++):(o=Sr,0===em&&l(Jl)),o!==Sr?(a=We(),a!==Sr?(o=[o,a],i=o):(Xv=i,i=Sr)):(Xv=i,i=Sr);n!==Sr?(Yv=e,r=Zl(r,n),e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(Yl)),e}function Qe(){var e,t,r;return em++,e=Xv,t=Ye(),t!==Sr?(r=Xe(),r===Sr&&(r=null),r!==Sr?(Yv=e,t=tu(t,r),e=t):(Xv=e,e=Sr)):(Xv=e,e=Sr),em--,e===Sr&&(t=Sr,0===em&&l(eu)),e}function We(){var e,r,n;return em++,e=Qe(),e===Sr&&(e=Xv,94===t.charCodeAt(Xv)?(r=nu,Xv++):(r=Sr,0===em&&l(iu)),r!==Sr?(n=Qe(),n!==Sr?(Yv=e,r=ou(n),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)),em--,e===Sr&&(r=Sr,0===em&&l(ru)),e}function Xe(){var e,r,n,i,o,a,s,u,c;return em++,42===t.charCodeAt(Xv)?(e=hn,Xv++):(e=Sr,0===em&&l(gn)),e===Sr&&(63===t.charCodeAt(Xv)?(e=su,Xv++):(e=Sr,0===em&&l(lu)),e===Sr&&(43===t.charCodeAt(Xv)?(e=uu,Xv++):(e=Sr,0===em&&l(cu)),e===Sr&&(e=Xv,123===t.charCodeAt(Xv)?(r=In,Xv++):(r=Sr,0===em&&l(Ln)),r!==Sr?(n=Xv,i=Ze(),i!==Sr?(o=Xv,44===t.charCodeAt(Xv)?(a=ul,Xv++):(a=Sr,0===em&&l(cl)),a!==Sr?(125===t.charCodeAt(Xv)?(s=Nn,Xv++):(s=Sr,0===em&&l(Rn)),s===Sr&&(s=Xv,u=Ze(),u!==Sr?(125===t.charCodeAt(Xv)?(c=Nn,Xv++):(c=Sr,0===em&&l(Rn)),c!==Sr?(u=[u,c],s=u):(Xv=s,s=Sr)):(Xv=s,s=Sr)),s!==Sr?(a=[a,s],o=a):(Xv=o,o=Sr)):(Xv=o,o=Sr),o===Sr&&(125===t.charCodeAt(Xv)?(o=Nn,Xv++):(o=Sr,0===em&&l(Rn))),o!==Sr?(i=[i,o],n=i):(Xv=n,n=Sr)):(Xv=n,n=Sr),n===Sr&&(n=Xv,44===t.charCodeAt(Xv)?(i=ul,Xv++):(i=Sr,0===em&&l(cl)),i!==Sr?(o=Ze(),o!==Sr?(125===t.charCodeAt(Xv)?(a=Nn,Xv++):(a=Sr,0===em&&l(Rn)),a!==Sr?(i=[i,o,a],n=i):(Xv=n,n=Sr)):(Xv=n,n=Sr)):(Xv=n,n=Sr)),n!==Sr?(r=[r,n],e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)))),em--,e===Sr&&(r=Sr,0===em&&l(au)),e}function Ye(){var e,r,n,i;return em++,e=Ft(),e===Sr&&(e=Xv,97===t.charCodeAt(Xv)?(r=Ol,Xv++):(r=Sr,0===em&&l(Pl)),r!==Sr&&(Yv=e,r=Dl()),(e=r)===Sr&&(e=Xv,33===t.charCodeAt(Xv)?(r=du,Xv++):(r=Sr,0===em&&l(fu)),r!==Sr?(n=Ke(),n!==Sr?(r=[r,n],e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr),e===Sr&&(e=Xv,40===t.charCodeAt(Xv)?(r=an,Xv++):(r=Sr,0===em&&l(sn)),r!==Sr?(n=Ve(),n!==Sr?(41===t.charCodeAt(Xv)?(i=dn,Xv++):(i=Sr,0===em&&l(fn)),i!==Sr?(Yv=e,r=ls(n),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)):(Xv=e,e=Sr)))),em--,e===Sr&&(r=Sr,0===em&&l(pu)),e}function Ke(){var e,r,n,i,o,a,s,u;if((e=Je())===Sr)if(e=Xv,40===t.charCodeAt(Xv)?(r=an,Xv++):(r=Sr,0===em&&l(sn)),r!==Sr){if(n=Xv,(i=Je())!==Sr){for(o=[],a=Xv,124===t.charCodeAt(Xv)?(s=Ql,Xv++):(s=Sr,0===em&&l(Wl)),s!==Sr?(u=Je(),u!==Sr?(s=[s,u],a=s):(Xv=a,a=Sr)):(Xv=a,a=Sr);a!==Sr;)o.push(a),a=Xv,124===t.charCodeAt(Xv)?(s=Ql,Xv++):(s=Sr,0===em&&l(Wl)),s!==Sr?(u=Je(),u!==Sr?(s=[s,u],a=s):(Xv=a,a=Sr)):(Xv=a,a=Sr);o!==Sr?(i=[i,o],n=i):(Xv=n,n=Sr)}else Xv=n,n=Sr;n===Sr&&(n=null),n!==Sr?(41===t.charCodeAt(Xv)?(i=dn,Xv++):(i=Sr,0===em&&l(fn)),i!==Sr?(r=[r,n,i],e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;return e}function Je(){var e,r,n;return em++,e=Ft(),e===Sr&&(97===t.charCodeAt(Xv)?(e=Ol,Xv++):(e=Sr,0===em&&l(Pl)),e===Sr&&(e=Xv,94===t.charCodeAt(Xv)?(r=nu,Xv++):(r=Sr,0===em&&l(iu)),r!==Sr?(n=Ft(),n===Sr&&(97===t.charCodeAt(Xv)?(n=Ol,Xv++):(n=Sr,0===em&&l(Pl))),n!==Sr?(r=[r,n],e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr))),em--,e===Sr&&(r=Sr,0===em&&l(hu)),e}function Ze(){var e;return em++,e=zt(),em--,e===Sr&&(Sr,0===em&&l(gu)),e}function et(){var e,t;return em++,e=Xv,t=it(),t!==Sr&&(Yv=e,t=mu(t)),e=t,e===Sr&&(e=rt()),em--,e===Sr&&(t=Sr,0===em&&l(vu)),e}function tt(){var e,t;return em++,e=Xv,t=ot(),t!==Sr&&(Yv=e,t=bu(t)),e=t,e===Sr&&(e=nt()),em--,e===Sr&&(t=Sr,0===em&&l(yu)),e}function rt(){var e,r,n,i,o,a,s,u;for(em++,e=Xv,r=[],n=lr();n!==Sr;)r.push(n),n=lr();if(r!==Sr)if(91===t.charCodeAt(Xv)?(n=xu,Xv++):(n=Sr,0===em&&l(Su)),n!==Sr){for(i=[],o=lr();o!==Sr;)i.push(o),o=lr();if(i!==Sr)if((o=Ge())!==Sr)if(93===t.charCodeAt(Xv)?(a=Cu,Xv++):(a=Sr,0===em&&l(wu)),a!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();s!==Sr?(Yv=e,r=Tu(o),e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(Eu)),e}function nt(){var e,r,n,i,o,a,s,u,c;for(em++,e=Xv,r=[],n=lr();n!==Sr;)r.push(n),n=lr();if(r!==Sr)if(91===t.charCodeAt(Xv)?(n=xu,Xv++):(n=Sr,0===em&&l(Su)),n!==Sr){for(i=[],o=lr();o!==Sr;)i.push(o),o=lr();if(i!==Sr)if((o=ke())!==Sr){for(a=[],s=lr();s!==Sr;)a.push(s),s=lr();if(a!==Sr)if(93===t.charCodeAt(Xv)?(s=Cu,Xv++):(s=Sr,0===em&&l(wu)),s!==Sr){for(u=[],c=lr();c!==Sr;)u.push(c),c=lr();u!==Sr?(Yv=e,r=Iu(o),e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(Au)),e}function it(){var e,r,n,i,o,a,s,u,c;for(em++,e=Xv,r=[],n=lr();n!==Sr;)r.push(n),n=lr();if(r!==Sr)if(40===t.charCodeAt(Xv)?(n=an,Xv++):(n=Sr,0===em&&l(sn)),n!==Sr){for(i=[],o=lr();o!==Sr;)i.push(o),o=lr();if(i!==Sr){if(o=[],(a=at())!==Sr)for(;a!==Sr;)o.push(a),a=at();else o=Sr;if(o!==Sr){for(a=[],s=lr();s!==Sr;)a.push(s),s=lr();if(a!==Sr)if(41===t.charCodeAt(Xv)?(s=dn,Xv++):(s=Sr,0===em&&l(fn)),s!==Sr){for(u=[],c=lr();c!==Sr;)u.push(c),c=lr();u!==Sr?(Yv=e,r=Nu(o),e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr}else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(Lu)),e}function ot(){var e,r,n,i,o,a,s,u,c;for(em++,e=Xv,r=[],n=lr();n!==Sr;)r.push(n),n=lr();if(r!==Sr)if(40===t.charCodeAt(Xv)?(n=an,Xv++):(n=Sr,0===em&&l(sn)),n!==Sr){for(i=[],o=lr();o!==Sr;)i.push(o),o=lr();if(i!==Sr){if(o=[],(a=st())!==Sr)for(;a!==Sr;)o.push(a),a=st();else o=Sr;if(o!==Sr){for(a=[],s=lr();s!==Sr;)a.push(s),s=lr();if(a!==Sr)if(41===t.charCodeAt(Xv)?(s=dn,Xv++):(s=Sr,0===em&&l(fn)),s!==Sr){for(u=[],c=lr();c!==Sr;)u.push(c),c=lr();u!==Sr?(Yv=e,r=Nu(o),e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr}else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(Ru)),e}function at(){var e,t,r,n,i,o;for(em++,e=Xv,t=Xv,r=[],n=lr();n!==Sr;)r.push(n),n=lr();if(r!==Sr)if((n=lt())!==Sr){for(i=[],o=lr();o!==Sr;)i.push(o),o=lr();i!==Sr?(r=[r,n,i],t=r):(Xv=t,t=Sr)}else Xv=t,t=Sr;else Xv=t,t=Sr;if(t===Sr){for(t=Xv,r=[],n=lr();n!==Sr;)r.push(n),n=lr();if(r!==Sr)if((n=et())!==Sr){for(i=[],o=lr();o!==Sr;)i.push(o),o=lr();i!==Sr?(r=[r,n,i],t=r):(Xv=t,t=Sr)}else Xv=t,t=Sr;else Xv=t,t=Sr}return t!==Sr&&(Yv=e,t=ku(t)),e=t,em--,e===Sr&&(t=Sr,0===em&&l(_u)),e}function st(){var e,t,r,n,i,o;for(em++,e=Xv,t=Xv,r=[],n=lr();n!==Sr;)r.push(n),n=lr();if(r!==Sr)if((n=lt())!==Sr){for(i=[],o=lr();o!==Sr;)i.push(o),o=lr();i!==Sr?(r=[r,n,i],t=r):(Xv=t,t=Sr)}else Xv=t,t=Sr;else Xv=t,t=Sr;if(t===Sr){for(t=Xv,r=[],n=lr();n!==Sr;)r.push(n),n=lr();if(r!==Sr)if((n=tt())!==Sr){for(i=[],o=lr();o!==Sr;)i.push(o),o=lr();i!==Sr?(r=[r,n,i],t=r):(Xv=t,t=Sr)}else Xv=t,t=Sr;else Xv=t,t=Sr}return t!==Sr&&(Yv=e,t=ku(t)),e=t,em--,e===Sr&&(t=Sr,0===em&&l(Ou)),e}function lt(){var e;return em++,e=ct(),e===Sr&&(e=pt()),em--,e===Sr&&(Sr,0===em&&l(Pu)),e}function ut(){var e;return em++,e=ct(),e===Sr&&(e=Ft()),em--,e===Sr&&(Sr,0===em&&l(Du)),e}function ct(){var e,t,r,n,i;for(em++,e=Xv,t=[],r=lr();r!==Sr;)t.push(r),r=lr();if(t!==Sr)if(r=Ut(),r===Sr&&(r=Vt()),r!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();n!==Sr?(Yv=e,t=Mu(r),e=t):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr;return em--,e===Sr&&(t=Sr,0===em&&l(Fu)),e}function pt(){var e;return em++,e=Ft(),e===Sr&&(e=Nt())===Sr&&(e=Rt())===Sr&&(e=Pt())===Sr&&(e=jt())===Sr&&(e=sr()),em--,e===Sr&&(Sr,0===em&&l(ju)),e}function dt(){var e;return em++,e=ft(),em--,e===Sr&&(Sr,0===em&&l($u)),e}function ft(){var e,r,n,i,o,a,s,u;if(em++,e=Xv,(r=ht())!==Sr){for(n=[],i=Xv,o=[],a=lr();a!==Sr;)o.push(a),a=lr();if(o!==Sr)if(t.substr(Xv,2)===Bu?(a=Bu,Xv+=2):(a=Sr,0===em&&l(Hu)),a!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();s!==Sr?(u=ht(),u!==Sr?(o=[o,a,s,u],i=o):(Xv=i,i=Sr)):(Xv=i,i=Sr)}else Xv=i,i=Sr;else Xv=i,i=Sr;for(;i!==Sr;){for(n.push(i),i=Xv,o=[],a=lr();a!==Sr;)o.push(a),a=lr();if(o!==Sr)if(t.substr(Xv,2)===Bu?(a=Bu,Xv+=2):(a=Sr,0===em&&l(Hu)),a!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();s!==Sr?(u=ht(),u!==Sr?(o=[o,a,s,u],i=o):(Xv=i,i=Sr)):(Xv=i,i=Sr)}else Xv=i,i=Sr;else Xv=i,i=Sr}n!==Sr?(Yv=e,r=Uu(r,n),e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(Gu)),e}function ht(){var e,r,n,i,o,a,s,u;if(em++,e=Xv,(r=gt())!==Sr){for(n=[],i=Xv,o=[],a=lr();a!==Sr;)o.push(a),a=lr();if(o!==Sr)if(t.substr(Xv,2)===qu?(a=qu,Xv+=2):(a=Sr,0===em&&l(zu)),a!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();s!==Sr?(u=gt(),u!==Sr?(o=[o,a,s,u],i=o):(Xv=i,i=Sr)):(Xv=i,i=Sr)}else Xv=i,i=Sr;else Xv=i,i=Sr;for(;i!==Sr;){for(n.push(i),i=Xv,o=[],a=lr();a!==Sr;)o.push(a),a=lr();if(o!==Sr)if(t.substr(Xv,2)===qu?(a=qu,Xv+=2):(a=Sr,0===em&&l(zu)),a!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();s!==Sr?(u=gt(),u!==Sr?(o=[o,a,s,u],i=o):(Xv=i,i=Sr)):(Xv=i,i=Sr)}else Xv=i,i=Sr;else Xv=i,i=Sr}n!==Sr?(Yv=e,r=Qu(r,n),e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(Vu)),e}function gt(){var e;return em++,e=vt(),em--,e===Sr&&(Sr,0===em&&l(Wu)),e}function vt(){var e,r,n,i,o,a,s,u,c,p,d,f,h;if(em++,e=Xv,(r=mt())!==Sr){for(n=[],i=Xv,o=[],a=lr();a!==Sr;)o.push(a),a=lr();if(o!==Sr)if(61===t.charCodeAt(Xv)?(a=Yu,Xv++):(a=Sr,0===em&&l(Ku)),a!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();s!==Sr?(u=mt(),u!==Sr?(o=[o,a,s,u],i=o):(Xv=i,i=Sr)):(Xv=i,i=Sr)}else Xv=i,i=Sr;else Xv=i,i=Sr;if(i===Sr){for(i=Xv,o=[],a=lr();a!==Sr;)o.push(a),a=lr();if(o!==Sr)if(t.substr(Xv,2)===Ju?(a=Ju,Xv+=2):(a=Sr,0===em&&l(Zu)),a!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();s!==Sr?(u=mt(),u!==Sr?(o=[o,a,s,u],i=o):(Xv=i,i=Sr)):(Xv=i,i=Sr)}else Xv=i,i=Sr;else Xv=i,i=Sr;if(i===Sr){for(i=Xv,o=[],a=lr();a!==Sr;)o.push(a),a=lr();if(o!==Sr)if(60===t.charCodeAt(Xv)?(a=ec,Xv++):(a=Sr,0===em&&l(tc)),a!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();s!==Sr?(u=mt(),u!==Sr?(o=[o,a,s,u],i=o):(Xv=i,i=Sr)):(Xv=i,i=Sr)}else Xv=i,i=Sr;else Xv=i,i=Sr;if(i===Sr){for(i=Xv,o=[],a=lr();a!==Sr;)o.push(a),a=lr();if(o!==Sr)if(62===t.charCodeAt(Xv)?(a=rc,Xv++):(a=Sr,0===em&&l(nc)),a!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();s!==Sr?(u=mt(),u!==Sr?(o=[o,a,s,u],i=o):(Xv=i,i=Sr)):(Xv=i,i=Sr)}else Xv=i,i=Sr;else Xv=i,i=Sr;if(i===Sr){for(i=Xv,o=[],a=lr();a!==Sr;)o.push(a),a=lr();if(o!==Sr)if(t.substr(Xv,2)===ic?(a=ic,Xv+=2):(a=Sr,0===em&&l(oc)),a!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();s!==Sr?(u=mt(),u!==Sr?(o=[o,a,s,u],i=o):(Xv=i,i=Sr)):(Xv=i,i=Sr)}else Xv=i,i=Sr;else Xv=i,i=Sr;if(i===Sr){for(i=Xv,o=[],a=lr();a!==Sr;)o.push(a),a=lr();if(o!==Sr)if(t.substr(Xv,2)===ac?(a=ac,Xv+=2):(a=Sr,0===em&&l(sc)),a!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();s!==Sr?(u=mt(),u!==Sr?(o=[o,a,s,u],i=o):(Xv=i,i=Sr)):(Xv=i,i=Sr)}else Xv=i,i=Sr;else Xv=i,i=Sr;if(i===Sr){for(i=Xv,o=[],a=lr();a!==Sr;)o.push(a),a=lr();if(o!==Sr)if(73===t.charCodeAt(Xv)?(a=lc,Xv++):(a=Sr,0===em&&l(uc)),a===Sr&&(105===t.charCodeAt(Xv)?(a=cc,Xv++):(a=Sr,0===em&&l(pc))),a!==Sr)if(78===t.charCodeAt(Xv)?(s=dc,Xv++):(s=Sr,0===em&&l(fc)),s===Sr&&(110===t.charCodeAt(Xv)?(s=hc,Xv++):(s=Sr,0===em&&l(gc))),s!==Sr){for(u=[],c=lr();c!==Sr;)u.push(c),c=lr();u!==Sr?(c=Ie(),c!==Sr?(o=[o,a,s,u,c],i=o):(Xv=i,i=Sr)):(Xv=i,i=Sr)}else Xv=i,i=Sr;else Xv=i,i=Sr;else Xv=i,i=Sr;if(i===Sr){for(i=Xv,o=[],a=lr();a!==Sr;)o.push(a),a=lr();if(o!==Sr)if(78===t.charCodeAt(Xv)?(a=dc,Xv++):(a=Sr,0===em&&l(fc)),a===Sr&&(110===t.charCodeAt(Xv)?(a=hc,Xv++):(a=Sr,0===em&&l(gc))),a!==Sr)if(79===t.charCodeAt(Xv)?(s=vc,Xv++):(s=Sr,0===em&&l(mc)),s===Sr&&(111===t.charCodeAt(Xv)?(s=yc,Xv++):(s=Sr,0===em&&l(bc))),s!==Sr)if(84===t.charCodeAt(Xv)?(u=Ec,Xv++):(u=Sr,0===em&&l(xc)),u===Sr&&(116===t.charCodeAt(Xv)?(u=Sc,Xv++):(u=Sr,0===em&&l(Cc))),u!==Sr){for(c=[],p=lr();p!==Sr;)c.push(p),p=lr();if(c!==Sr)if(73===t.charCodeAt(Xv)?(p=lc,Xv++):(p=Sr,0===em&&l(uc)),p===Sr&&(105===t.charCodeAt(Xv)?(p=cc,Xv++):(p=Sr,0===em&&l(pc))),p!==Sr)if(78===t.charCodeAt(Xv)?(d=dc,Xv++):(d=Sr,0===em&&l(fc)),d===Sr&&(110===t.charCodeAt(Xv)?(d=hc,Xv++):(d=Sr,0===em&&l(gc))),d!==Sr){for(f=[],h=lr();h!==Sr;)f.push(h),h=lr();f!==Sr?(h=Ie(),h!==Sr?(o=[o,a,s,u,c,p,d,f,h],i=o):(Xv=i,i=Sr)):(Xv=i,i=Sr)}else Xv=i,i=Sr;else Xv=i,i=Sr;else Xv=i,i=Sr}else Xv=i,i=Sr;else Xv=i,i=Sr;else Xv=i,i=Sr;else Xv=i,i=Sr}}}}}}}for(;i!==Sr;){for(n.push(i),i=Xv,o=[],a=lr();a!==Sr;)o.push(a),a=lr();if(o!==Sr)if(61===t.charCodeAt(Xv)?(a=Yu,Xv++):(a=Sr,0===em&&l(Ku)),a!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();s!==Sr?(u=mt(),u!==Sr?(o=[o,a,s,u],i=o):(Xv=i,i=Sr)):(Xv=i,i=Sr)}else Xv=i,i=Sr;else Xv=i,i=Sr;if(i===Sr){for(i=Xv,o=[],a=lr();a!==Sr;)o.push(a),a=lr();if(o!==Sr)if(t.substr(Xv,2)===Ju?(a=Ju,Xv+=2):(a=Sr,0===em&&l(Zu)),a!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();s!==Sr?(u=mt(),u!==Sr?(o=[o,a,s,u],i=o):(Xv=i,i=Sr)):(Xv=i,i=Sr)}else Xv=i,i=Sr;else Xv=i,i=Sr;if(i===Sr){for(i=Xv,o=[],a=lr();a!==Sr;)o.push(a),a=lr();if(o!==Sr)if(60===t.charCodeAt(Xv)?(a=ec,Xv++):(a=Sr,0===em&&l(tc)),a!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();s!==Sr?(u=mt(),u!==Sr?(o=[o,a,s,u],i=o):(Xv=i,i=Sr)):(Xv=i,i=Sr)}else Xv=i,i=Sr;else Xv=i,i=Sr;if(i===Sr){for(i=Xv,o=[],a=lr();a!==Sr;)o.push(a),a=lr();if(o!==Sr)if(62===t.charCodeAt(Xv)?(a=rc,Xv++):(a=Sr,0===em&&l(nc)),a!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();s!==Sr?(u=mt(),u!==Sr?(o=[o,a,s,u],i=o):(Xv=i,i=Sr)):(Xv=i,i=Sr)}else Xv=i,i=Sr;else Xv=i,i=Sr;if(i===Sr){for(i=Xv,o=[],a=lr();a!==Sr;)o.push(a),a=lr();if(o!==Sr)if(t.substr(Xv,2)===ic?(a=ic,Xv+=2):(a=Sr,0===em&&l(oc)),a!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();s!==Sr?(u=mt(),u!==Sr?(o=[o,a,s,u],i=o):(Xv=i,i=Sr)):(Xv=i,i=Sr)}else Xv=i,i=Sr;else Xv=i,i=Sr;if(i===Sr){for(i=Xv,o=[],a=lr();a!==Sr;)o.push(a),a=lr();if(o!==Sr)if(t.substr(Xv,2)===ac?(a=ac,Xv+=2):(a=Sr,0===em&&l(sc)),a!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();s!==Sr?(u=mt(),u!==Sr?(o=[o,a,s,u],i=o):(Xv=i,i=Sr)):(Xv=i,i=Sr)}else Xv=i,i=Sr;else Xv=i,i=Sr;if(i===Sr){for(i=Xv,o=[],a=lr();a!==Sr;)o.push(a),a=lr();if(o!==Sr)if(73===t.charCodeAt(Xv)?(a=lc,Xv++):(a=Sr,0===em&&l(uc)),a===Sr&&(105===t.charCodeAt(Xv)?(a=cc,Xv++):(a=Sr,0===em&&l(pc))),a!==Sr)if(78===t.charCodeAt(Xv)?(s=dc,Xv++):(s=Sr,0===em&&l(fc)),s===Sr&&(110===t.charCodeAt(Xv)?(s=hc,Xv++):(s=Sr,0===em&&l(gc))),s!==Sr){for(u=[],c=lr();c!==Sr;)u.push(c),c=lr();u!==Sr?(c=Ie(),c!==Sr?(o=[o,a,s,u,c],i=o):(Xv=i,i=Sr)):(Xv=i,i=Sr)}else Xv=i,i=Sr;else Xv=i,i=Sr;else Xv=i,i=Sr;if(i===Sr){for(i=Xv,o=[],a=lr();a!==Sr;)o.push(a),a=lr();if(o!==Sr)if(78===t.charCodeAt(Xv)?(a=dc,Xv++):(a=Sr,0===em&&l(fc)),a===Sr&&(110===t.charCodeAt(Xv)?(a=hc,Xv++):(a=Sr,0===em&&l(gc))),a!==Sr)if(79===t.charCodeAt(Xv)?(s=vc,Xv++):(s=Sr,0===em&&l(mc)),s===Sr&&(111===t.charCodeAt(Xv)?(s=yc,Xv++):(s=Sr,0===em&&l(bc))),s!==Sr)if(84===t.charCodeAt(Xv)?(u=Ec,Xv++):(u=Sr,0===em&&l(xc)),u===Sr&&(116===t.charCodeAt(Xv)?(u=Sc,Xv++):(u=Sr,0===em&&l(Cc))),u!==Sr){for(c=[],p=lr();p!==Sr;)c.push(p),p=lr();if(c!==Sr)if(73===t.charCodeAt(Xv)?(p=lc,Xv++):(p=Sr,0===em&&l(uc)),p===Sr&&(105===t.charCodeAt(Xv)?(p=cc,Xv++):(p=Sr,0===em&&l(pc))),p!==Sr)if(78===t.charCodeAt(Xv)?(d=dc,Xv++):(d=Sr,0===em&&l(fc)),d===Sr&&(110===t.charCodeAt(Xv)?(d=hc,Xv++):(d=Sr,0===em&&l(gc))),d!==Sr){for(f=[],h=lr();h!==Sr;)f.push(h),h=lr();f!==Sr?(h=Ie(),h!==Sr?(o=[o,a,s,u,c,p,d,f,h],i=o):(Xv=i,i=Sr)):(Xv=i,i=Sr)}else Xv=i,i=Sr;else Xv=i,i=Sr;else Xv=i,i=Sr}else Xv=i,i=Sr;else Xv=i,i=Sr;else Xv=i,i=Sr;else Xv=i,i=Sr}}}}}}}}n!==Sr?(Yv=e,r=wc(r,n),e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(Xu)),e}function mt(){var e;return em++,e=yt(),em--,e===Sr&&(Sr,0===em&&l(Tc)),e}function yt(){var e,r,n,i,o,a,s,u,c,p;if(em++,e=Xv,(r=bt())!==Sr){for(n=[],i=Xv,o=[],a=lr();a!==Sr;)o.push(a),a=lr();if(o!==Sr)if(43===t.charCodeAt(Xv)?(a=uu,Xv++):(a=Sr,0===em&&l(cu)),a!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();s!==Sr?(u=bt(),u!==Sr?(o=[o,a,s,u],i=o):(Xv=i,i=Sr)):(Xv=i,i=Sr)}else Xv=i,i=Sr;else Xv=i,i=Sr;if(i===Sr){for(i=Xv,o=[],a=lr();a!==Sr;)o.push(a),a=lr();if(o!==Sr)if(45===t.charCodeAt(Xv)?(a=Ic,Xv++):(a=Sr,0===em&&l(Lc)),a!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();s!==Sr?(u=bt(),u!==Sr?(o=[o,a,s,u],i=o):(Xv=i,i=Sr)):(Xv=i,i=Sr)}else Xv=i,i=Sr;else Xv=i,i=Sr;if(i===Sr)if(i=Xv,o=Ot(),o===Sr&&(o=Ot()),o!==Sr){for(a=Xv,s=[],u=lr();u!==Sr;)s.push(u),u=lr();if(s!==Sr)if(42===t.charCodeAt(Xv)?(u=hn,Xv++):(u=Sr,0===em&&l(gn)),u!==Sr){for(c=[],p=lr();p!==Sr;)c.push(p),p=lr();c!==Sr?(p=Et(),p!==Sr?(s=[s,u,c,p],a=s):(Xv=a,a=Sr)):(Xv=a,a=Sr)}else Xv=a,a=Sr;else Xv=a,a=Sr;if(a===Sr){for(a=Xv,s=[],u=lr();u!==Sr;)s.push(u),u=lr();if(s!==Sr)if(47===t.charCodeAt(Xv)?(u=Kl,Xv++):(u=Sr,0===em&&l(Jl)),u!==Sr){for(c=[],p=lr();p!==Sr;)c.push(p),p=lr();c!==Sr?(p=Et(),p!==Sr?(s=[s,u,c,p],a=s):(Xv=a,a=Sr)):(Xv=a,a=Sr)}else Xv=a,a=Sr;else Xv=a,a=Sr}a===Sr&&(a=null),a!==Sr?(o=[o,a],i=o):(Xv=i,i=Sr)}else Xv=i,i=Sr}for(;i!==Sr;){for(n.push(i),i=Xv,o=[],a=lr();a!==Sr;)o.push(a),a=lr();if(o!==Sr)if(43===t.charCodeAt(Xv)?(a=uu,Xv++):(a=Sr,0===em&&l(cu)),a!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();s!==Sr?(u=bt(),u!==Sr?(o=[o,a,s,u],i=o):(Xv=i,i=Sr)):(Xv=i,i=Sr)}else Xv=i,i=Sr;else Xv=i,i=Sr;if(i===Sr){for(i=Xv,o=[],a=lr();a!==Sr;)o.push(a),a=lr();if(o!==Sr)if(45===t.charCodeAt(Xv)?(a=Ic,Xv++):(a=Sr,0===em&&l(Lc)),a!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();s!==Sr?(u=bt(),u!==Sr?(o=[o,a,s,u],i=o):(Xv=i,i=Sr)):(Xv=i,i=Sr)}else Xv=i,i=Sr;else Xv=i,i=Sr;if(i===Sr)if(i=Xv,o=Ot(),o===Sr&&(o=Ot()),o!==Sr){for(a=Xv,s=[],u=lr();u!==Sr;)s.push(u),u=lr();if(s!==Sr)if(42===t.charCodeAt(Xv)?(u=hn,Xv++):(u=Sr,0===em&&l(gn)),u!==Sr){for(c=[],p=lr();p!==Sr;)c.push(p),p=lr();c!==Sr?(p=Et(),p!==Sr?(s=[s,u,c,p],a=s):(Xv=a,a=Sr)):(Xv=a,a=Sr)}else Xv=a,a=Sr;else Xv=a,a=Sr;if(a===Sr){for(a=Xv,s=[],u=lr();u!==Sr;)s.push(u),u=lr();if(s!==Sr)if(47===t.charCodeAt(Xv)?(u=Kl,Xv++):(u=Sr,0===em&&l(Jl)),u!==Sr){for(c=[],p=lr();p!==Sr;)c.push(p),p=lr();c!==Sr?(p=Et(),p!==Sr?(s=[s,u,c,p],a=s):(Xv=a,a=Sr)):(Xv=a,a=Sr)}else Xv=a,a=Sr;else Xv=a,a=Sr}a===Sr&&(a=null),a!==Sr?(o=[o,a],i=o):(Xv=i,i=Sr)}else Xv=i,i=Sr}}n!==Sr?(Yv=e,r=Nc(r,n),e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(Ac)),e}function bt(){var e,r,n,i,o,a,s,u;if(em++,e=Xv,(r=Et())!==Sr){for(n=[],i=Xv,o=[],a=lr();a!==Sr;)o.push(a),a=lr();if(o!==Sr)if(42===t.charCodeAt(Xv)?(a=hn,Xv++):(a=Sr,0===em&&l(gn)),a!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();s!==Sr?(u=Et(),u!==Sr?(o=[o,a,s,u],i=o):(Xv=i,i=Sr)):(Xv=i,i=Sr)}else Xv=i,i=Sr;else Xv=i,i=Sr;if(i===Sr){for(i=Xv,o=[],a=lr();a!==Sr;)o.push(a),a=lr();if(o!==Sr)if(47===t.charCodeAt(Xv)?(a=Kl,Xv++):(a=Sr,0===em&&l(Jl)),a!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();s!==Sr?(u=Et(),u!==Sr?(o=[o,a,s,u],i=o):(Xv=i,i=Sr)):(Xv=i,i=Sr)}else Xv=i,i=Sr;else Xv=i,i=Sr}for(;i!==Sr;){for(n.push(i),i=Xv,o=[],a=lr();a!==Sr;)o.push(a),a=lr();if(o!==Sr)if(42===t.charCodeAt(Xv)?(a=hn,Xv++):(a=Sr,0===em&&l(gn)),a!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();s!==Sr?(u=Et(),u!==Sr?(o=[o,a,s,u],i=o):(Xv=i,i=Sr)):(Xv=i,i=Sr)}else Xv=i,i=Sr;else Xv=i,i=Sr;if(i===Sr){for(i=Xv,o=[],a=lr();a!==Sr;)o.push(a),a=lr();if(o!==Sr)if(47===t.charCodeAt(Xv)?(a=Kl,Xv++):(a=Sr,0===em&&l(Jl)),a!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();s!==Sr?(u=Et(),u!==Sr?(o=[o,a,s,u],i=o):(Xv=i,i=Sr)):(Xv=i,i=Sr)}else Xv=i,i=Sr;else Xv=i,i=Sr}}n!==Sr?(Yv=e,r=_c(r,n),e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(Rc)),e}function Et(){var e,r,n,i;if(em++,e=Xv,33===t.charCodeAt(Xv)?(r=du,Xv++):(r=Sr,0===em&&l(fu)),r!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();n!==Sr?(i=xt(),i!==Sr?(Yv=e,r=Oc(i),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;if(e===Sr){if(e=Xv,43===t.charCodeAt(Xv)?(r=uu,Xv++):(r=Sr,0===em&&l(cu)),r!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();n!==Sr?(i=xt(),i!==Sr?(Yv=e,r=Pc(i),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;if(e===Sr){if(e=Xv,45===t.charCodeAt(Xv)?(r=Ic,Xv++):(r=Sr,0===em&&l(Lc)),r!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();n!==Sr?(i=xt(),i!==Sr?(Yv=e,r=Dc(i),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;e===Sr&&(e=xt())}}return em--,e===Sr&&(r=Sr,0===em&&l(kc)),e}function xt(){var e,t;return em++,e=St(),e===Sr&&(e=Ct())===Sr&&(e=Lt())===Sr&&(e=Xv,t=Nt(),t!==Sr&&(Yv=e,t=Mc(t)),(e=t)===Sr&&(e=Xv,t=Rt(),t!==Sr&&(Yv=e,t=jc(t)),(e=t)===Sr&&(e=Xv,t=Pt(),t!==Sr&&(Yv=e,t=$c(t)),(e=t)===Sr&&(e=It())===Sr&&(e=Xv,t=ct(),t!==Sr&&(Yv=e,t=Gc(t)),e=t)))),em--,e===Sr&&(t=Sr,0===em&&l(Fc)),e}function St(){var e,r,n,i,o,a;if(em++,e=Xv,40===t.charCodeAt(Xv)?(r=an,Xv++):(r=Sr,0===em&&l(sn)),r!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();if(n!==Sr)if((i=dt())!==Sr){for(o=[],a=lr();a!==Sr;)o.push(a),a=lr();o!==Sr?(41===t.charCodeAt(Xv)?(a=dn,Xv++):(a=Sr,0===em&&l(fn)),a!==Sr?(Yv=e,r=Hc(i),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(Bc)),e}function Ct(){var e,r,n,i,o,a,s,u,c,p,d,f,h,g,v,m;if(em++,e=Xv,t.substr(Xv,3)===Vc?(r=Vc,Xv+=3):(r=Sr,0===em&&l(qc)),r===Sr&&(t.substr(Xv,3)===zc?(r=zc,Xv+=3):(r=Sr,0===em&&l(Qc))),r!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();if(n!==Sr)if(40===t.charCodeAt(Xv)?(i=an,Xv++):(i=Sr,0===em&&l(sn)),i!==Sr){for(o=[],a=lr();a!==Sr;)o.push(a),a=lr();if(o!==Sr)if((a=dt())!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();s!==Sr?(41===t.charCodeAt(Xv)?(u=dn,Xv++):(u=Sr,0===em&&l(fn)),u!==Sr?(Yv=e,r=Wc(a),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;if(e===Sr){if(e=Xv,t.substr(Xv,4)===Xc?(r=Xc,Xv+=4):(r=Sr,0===em&&l(Yc)),r===Sr&&(t.substr(Xv,4)===Kc?(r=Kc,Xv+=4):(r=Sr,0===em&&l(Jc))),r!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();if(n!==Sr)if(40===t.charCodeAt(Xv)?(i=an,Xv++):(i=Sr,0===em&&l(sn)),i!==Sr){for(o=[],a=lr();a!==Sr;)o.push(a),a=lr();if(o!==Sr)if((a=dt())!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();s!==Sr?(41===t.charCodeAt(Xv)?(u=dn,Xv++):(u=Sr,0===em&&l(fn)),u!==Sr?(Yv=e,r=Zc(a),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;if(e===Sr){if(e=Xv,t.substr(Xv,11)===ep?(r=ep,Xv+=11):(r=Sr,0===em&&l(tp)),r===Sr&&(t.substr(Xv,11)===rp?(r=rp,Xv+=11):(r=Sr,0===em&&l(np))),r!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();if(n!==Sr)if(40===t.charCodeAt(Xv)?(i=an,Xv++):(i=Sr,0===em&&l(sn)),i!==Sr){for(o=[],a=lr();a!==Sr;)o.push(a),a=lr();if(o!==Sr)if((a=dt())!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();if(s!==Sr)if(44===t.charCodeAt(Xv)?(u=ul,Xv++):(u=Sr,0===em&&l(cl)),u!==Sr){for(c=[],p=lr();p!==Sr;)c.push(p),p=lr();if(c!==Sr)if((p=dt())!==Sr){for(d=[],f=lr();f!==Sr;)d.push(f),f=lr();d!==Sr?(41===t.charCodeAt(Xv)?(f=dn,Xv++):(f=Sr,0===em&&l(fn)),f!==Sr?(Yv=e,r=ip(a,p),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;if(e===Sr){if(e=Xv,t.substr(Xv,8)===op?(r=op,Xv+=8):(r=Sr,0===em&&l(ap)),r===Sr&&(t.substr(Xv,8)===sp?(r=sp,Xv+=8):(r=Sr,0===em&&l(lp))),r!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();if(n!==Sr)if(40===t.charCodeAt(Xv)?(i=an,Xv++):(i=Sr,0===em&&l(sn)),i!==Sr){for(o=[],a=lr();a!==Sr;)o.push(a),a=lr();if(o!==Sr)if((a=dt())!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();s!==Sr?(41===t.charCodeAt(Xv)?(u=dn,Xv++):(u=Sr,0===em&&l(fn)),u!==Sr?(Yv=e,r=up(a),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;if(e===Sr){if(e=Xv,t.substr(Xv,5)===cp?(r=cp,Xv+=5):(r=Sr,0===em&&l(pp)),r===Sr&&(t.substr(Xv,5)===dp?(r=dp,Xv+=5):(r=Sr,0===em&&l(fp))),r!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();if(n!==Sr)if(40===t.charCodeAt(Xv)?(i=an,Xv++):(i=Sr,0===em&&l(sn)),i!==Sr){for(o=[],a=lr();a!==Sr;)o.push(a),a=lr();if(o!==Sr)if((a=ct())!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();s!==Sr?(41===t.charCodeAt(Xv)?(u=dn,Xv++):(u=Sr,0===em&&l(fn)),u!==Sr?(Yv=e,r=hp(a),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;if(e===Sr){if(e=Xv,t.substr(Xv,3)===gp?(r=gp,Xv+=3):(r=Sr,0===em&&l(vp)),r===Sr&&(t.substr(Xv,3)===mp?(r=mp,Xv+=3):(r=Sr,0===em&&l(yp))),r!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();if(n!==Sr)if(40===t.charCodeAt(Xv)?(i=an,Xv++):(i=Sr,0===em&&l(sn)),i!==Sr){for(o=[],a=lr();a!==Sr;)o.push(a),a=lr();if(o!==Sr)if((a=dt())!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();s!==Sr?(41===t.charCodeAt(Xv)?(u=dn,Xv++):(u=Sr,0===em&&l(fn)),u!==Sr?(Yv=e,r=bp(a),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;if(e===Sr){if(e=Xv,t.substr(Xv,3)===Ep?(r=Ep,Xv+=3):(r=Sr,0===em&&l(xp)),r===Sr&&(t.substr(Xv,3)===Sp?(r=Sp,Xv+=3):(r=Sr,0===em&&l(Cp))),r!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();if(n!==Sr)if(40===t.charCodeAt(Xv)?(i=an,Xv++):(i=Sr,0===em&&l(sn)),i!==Sr){for(o=[],a=lr();a!==Sr;)o.push(a),a=lr();if(o!==Sr)if((a=dt())!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();s!==Sr?(41===t.charCodeAt(Xv)?(u=dn,Xv++):(u=Sr,0===em&&l(fn)),u!==Sr?(Yv=e,r=wp(a),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;if(e===Sr){if(e=Xv,t.substr(Xv,5)===Tp?(r=Tp,Xv+=5):(r=Sr,0===em&&l(Ap)),r===Sr&&(t.substr(Xv,5)===Ip?(r=Ip,Xv+=5):(r=Sr,0===em&&l(Lp))),r!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();if(n!==Sr){if(i=Xv,40===t.charCodeAt(Xv)?(o=an,Xv++):(o=Sr,0===em&&l(sn)),o!==Sr){for(a=[],s=lr();s!==Sr;)a.push(s),s=lr();if(a!==Sr)if((s=dt())!==Sr){for(u=[],c=lr();c!==Sr;)u.push(c),c=lr();u!==Sr?(41===t.charCodeAt(Xv)?(c=dn,Xv++):(c=Sr,0===em&&l(fn)),c!==Sr?(o=[o,a,s,u,c],i=o):(Xv=i,i=Sr)):(Xv=i,i=Sr)}else Xv=i,i=Sr;else Xv=i,i=Sr}else Xv=i,i=Sr;i===Sr&&(i=sr()),i!==Sr?(Yv=e,r=Np(i),e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr}else Xv=e,e=Sr;if(e===Sr){if(e=Xv,t.substr(Xv,8)===Rp?(r=Rp,Xv+=8):(r=Sr,0===em&&l(_p)),r===Sr&&(t.substr(Xv,8)===kp?(r=kp,Xv+=8):(r=Sr,0===em&&l(Op))),r!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();n!==Sr?(i=Ie(),i!==Sr?(Yv=e,r=Pp(i),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;if(e===Sr){if(e=Xv,t.substr(Xv,2)===Dp?(r=Dp,Xv+=2):(r=Sr,0===em&&l(Fp)),r===Sr&&(t.substr(Xv,2)===Mp?(r=Mp,Xv+=2):(r=Sr,0===em&&l(jp))),r!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();if(n!==Sr)if(40===t.charCodeAt(Xv)?(i=an,Xv++):(i=Sr,0===em&&l(sn)),i!==Sr){for(o=[],a=lr();a!==Sr;)o.push(a),a=lr();if(o!==Sr)if((a=dt())!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();if(s!==Sr)if(44===t.charCodeAt(Xv)?(u=ul,Xv++):(u=Sr,0===em&&l(cl)),u!==Sr){for(c=[],p=lr();p!==Sr;)c.push(p),p=lr();if(c!==Sr)if((p=dt())!==Sr){for(d=[],f=lr();f!==Sr;)d.push(f),f=lr();if(d!==Sr)if(44===t.charCodeAt(Xv)?(f=ul,Xv++):(f=Sr,0===em&&l(cl)),f!==Sr){for(h=[],g=lr();g!==Sr;)h.push(g),g=lr();if(h!==Sr)if((g=dt())!==Sr){for(v=[],m=lr();m!==Sr;)v.push(m),m=lr();v!==Sr?(41===t.charCodeAt(Xv)?(m=dn,Xv++):(m=Sr,0===em&&l(fn)),m!==Sr?(Yv=e,r=$p(a,p,g),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;if(e===Sr){if(e=Xv,t.substr(Xv,9)===Gp?(r=Gp,Xv+=9):(r=Sr,0===em&&l(Bp)),r===Sr&&(t.substr(Xv,9)===Hp?(r=Hp,Xv+=9):(r=Sr,0===em&&l(Up)),r===Sr&&(t.substr(Xv,9)===Vp?(r=Vp,Xv+=9):(r=Sr,0===em&&l(qp)))),r!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();if(n!==Sr)if(40===t.charCodeAt(Xv)?(i=an,Xv++):(i=Sr,0===em&&l(sn)),i!==Sr){for(o=[],a=lr();a!==Sr;)o.push(a),a=lr();if(o!==Sr)if((a=dt())!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();s!==Sr?(41===t.charCodeAt(Xv)?(u=dn,Xv++):(u=Sr,0===em&&l(fn)),u!==Sr?(Yv=e,r=zp(a),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;if(e===Sr){if(e=Xv,t.substr(Xv,7)===Qp?(r=Qp,Xv+=7):(r=Sr,0===em&&l(Wp)),r===Sr&&(t.substr(Xv,7)===Xp?(r=Xp,Xv+=7):(r=Sr,0===em&&l(Yp)),r===Sr&&(t.substr(Xv,7)===Kp?(r=Kp,Xv+=7):(r=Sr,0===em&&l(Jp)))),r!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();if(n!==Sr)if(40===t.charCodeAt(Xv)?(i=an,Xv++):(i=Sr,0===em&&l(sn)),i!==Sr){for(o=[],a=lr();a!==Sr;)o.push(a),a=lr();if(o!==Sr)if((a=dt())!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();s!==Sr?(41===t.charCodeAt(Xv)?(u=dn,Xv++):(u=Sr,0===em&&l(fn)),u!==Sr?(Yv=e,r=Zp(a),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;if(e===Sr){if(e=Xv,t.substr(Xv,8)===ed?(r=ed,Xv+=8):(r=Sr,0===em&&l(td)),r===Sr&&(t.substr(Xv,8)===rd?(r=rd,Xv+=8):(r=Sr,0===em&&l(nd))),r!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();if(n!==Sr)if(40===t.charCodeAt(Xv)?(i=an,Xv++):(i=Sr,0===em&&l(sn)),i!==Sr){for(o=[],a=lr();a!==Sr;)o.push(a),a=lr();if(o!==Sr)if((a=dt())!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();if(s!==Sr)if(44===t.charCodeAt(Xv)?(u=ul,Xv++):(u=Sr,0===em&&l(cl)),u!==Sr){for(c=[],p=lr();p!==Sr;)c.push(p),p=lr();if(c!==Sr)if((p=dt())!==Sr){for(d=[],f=lr();f!==Sr;)d.push(f),f=lr();d!==Sr?(41===t.charCodeAt(Xv)?(f=dn,Xv++):(f=Sr,0===em&&l(fn)),f!==Sr?(Yv=e,r=id(a,p),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;if(e===Sr){if(e=Xv,t.substr(Xv,5)===od?(r=od,Xv+=5):(r=Sr,0===em&&l(ad)),r===Sr&&(t.substr(Xv,5)===sd?(r=sd,Xv+=5):(r=Sr,0===em&&l(ld)),r===Sr&&(t.substr(Xv,5)===ud?(r=ud,Xv+=5):(r=Sr,0===em&&l(cd)),r===Sr&&(t.substr(Xv,5)===pd?(r=pd,Xv+=5):(r=Sr,0===em&&l(dd)),r===Sr&&(t.substr(Xv,5)===fd?(r=fd,Xv+=5):(r=Sr,0===em&&l(hd)),r===Sr&&(t.substr(Xv,5)===gd?(r=gd,Xv+=5):(r=Sr,0===em&&l(vd))))))),r!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();if(n!==Sr)if(40===t.charCodeAt(Xv)?(i=an,Xv++):(i=Sr,0===em&&l(sn)),i!==Sr){for(o=[],a=lr();a!==Sr;)o.push(a),a=lr();if(o!==Sr)if((a=dt())!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();s!==Sr?(41===t.charCodeAt(Xv)?(u=dn,Xv++):(u=Sr,0===em&&l(fn)),u!==Sr?(Yv=e,r=md(a),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;if(e===Sr){if(e=Xv,t.substr(Xv,7)===yd?(r=yd,Xv+=7):(r=Sr,0===em&&l(bd)),r===Sr&&(t.substr(Xv,7)===Ed?(r=Ed,Xv+=7):(r=Sr,0===em&&l(xd))),r!==Sr){if(n=[],Sd.test(t.charAt(Xv))?(i=t.charAt(Xv),Xv++):(i=Sr,0===em&&l(Cd)),i!==Sr)for(;i!==Sr;)n.push(i),Sd.test(t.charAt(Xv))?(i=t.charAt(Xv),Xv++):(i=Sr,0===em&&l(Cd));else n=Sr;if(n!==Sr){for(i=[],o=lr();o!==Sr;)i.push(o),o=lr();if(i!==Sr)if(40===t.charCodeAt(Xv)?(o=an,Xv++):(o=Sr,0===em&&l(sn)),o!==Sr){for(a=[],s=Xv,u=[],c=lr();c!==Sr;)u.push(c),c=lr();for(u!==Sr?(c=dt(),c!==Sr?(44===t.charCodeAt(Xv)?(p=ul,Xv++):(p=Sr,0===em&&l(cl)),p!==Sr?(u=[u,c,p],s=u):(Xv=s,s=Sr)):(Xv=s,s=Sr)):(Xv=s,s=Sr);s!==Sr;){for(a.push(s),s=Xv,u=[],c=lr();c!==Sr;)u.push(c),c=lr();u!==Sr?(c=dt(),c!==Sr?(44===t.charCodeAt(Xv)?(p=ul,Xv++):(p=Sr,0===em&&l(cl)),p!==Sr?(u=[u,c,p],s=u):(Xv=s,s=Sr)):(Xv=s,s=Sr)):(Xv=s,s=Sr)}if(a!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();if(s!==Sr)if((u=dt())!==Sr){for(c=[],p=lr();p!==Sr;)c.push(p),p=lr();c!==Sr?(41===t.charCodeAt(Xv)?(p=dn,Xv++):(p=Sr,0===em&&l(fn)),p!==Sr?(Yv=e,r=wd(n,a,u),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr}else Xv=e,e=Sr;e===Sr&&(e=wt())===Sr&&(e=Tt())===Sr&&(e=At())}}}}}}}}}}}}}}return em--,e===Sr&&(r=Sr,0===em&&l(Uc)),e}function wt(){var e,r,n,i,o,a,s,u,c,p,d,f,h,g,v;if(em++,e=Xv,t.substr(Xv,5)===Ad?(r=Ad,Xv+=5):(r=Sr,0===em&&l(Id)),r===Sr&&(t.substr(Xv,5)===Ld?(r=Ld,Xv+=5):(r=Sr,0===em&&l(Nd))),r!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();if(n!==Sr)if(40===t.charCodeAt(Xv)?(i=an,Xv++):(i=Sr,0===em&&l(sn)),i!==Sr){for(o=[],a=lr();a!==Sr;)o.push(a),a=lr();if(o!==Sr)if((a=dt())!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();if(s!==Sr)if(44===t.charCodeAt(Xv)?(u=ul,Xv++):(u=Sr,0===em&&l(cl)),u!==Sr){for(c=[],p=lr();p!==Sr;)c.push(p),p=lr();if(c!==Sr)if((p=dt())!==Sr){for(d=[],f=lr();f!==Sr;)d.push(f),f=lr();if(d!==Sr){if(f=Xv,44===t.charCodeAt(Xv)?(h=ul,Xv++):(h=Sr,0===em&&l(cl)),h!==Sr){for(g=[],v=lr();v!==Sr;)g.push(v),v=lr();g!==Sr?(v=dt(),v!==Sr?(h=[h,g,v],f=h):(Xv=f,f=Sr)):(Xv=f,f=Sr)}else Xv=f,f=Sr;if(f===Sr&&(f=null),f!==Sr){for(h=[],g=lr();g!==Sr;)h.push(g),g=lr();h!==Sr?(41===t.charCodeAt(Xv)?(g=dn,Xv++):(g=Sr,0===em&&l(fn)),g!==Sr?(Yv=e,r=Rd(a,p,f),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr}else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(Td)),e}function Tt(){var e,r,n,i;if(em++,e=Xv,t.substr(Xv,6)===kd?(r=kd,Xv+=6):(r=Sr,0===em&&l(Od)),r===Sr&&(t.substr(Xv,6)===Pd?(r=Pd,Xv+=6):(r=Sr,0===em&&l(Dd))),r!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();n!==Sr?(i=le(),i!==Sr?(Yv=e,r=Fd(i),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(_d)),e}function At(){var e,r,n,i,o,a;if(em++,e=Xv,t.substr(Xv,3)===jd?(r=jd,Xv+=3):(r=Sr,0===em&&l($d)),r===Sr&&(t.substr(Xv,3)===Gd?(r=Gd,Xv+=3):(r=Sr,0===em&&l(Bd))),r!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();if(n!==Sr)if(t.substr(Xv,6)===kd?(i=kd,Xv+=6):(i=Sr,0===em&&l(Od)),i===Sr&&(t.substr(Xv,6)===Pd?(i=Pd,Xv+=6):(i=Sr,0===em&&l(Dd))),i!==Sr){for(o=[],a=lr();a!==Sr;)o.push(a),a=lr();o!==Sr?(a=le(),a!==Sr?(Yv=e,r=Hd(a),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(Md)),e}function It(){var e,r,n,i,o,a,s,u,c,p,d,f,h,g,v,m,y,b;if(em++,e=Xv,t.substr(Xv,5)===Vd?(r=Vd,Xv+=5):(r=Sr,0===em&&l(qd)),r===Sr&&(t.substr(Xv,5)===zd?(r=zd,Xv+=5):(r=Sr,0===em&&l(Qd))),r!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();if(n!==Sr)if(40===t.charCodeAt(Xv)?(i=an,Xv++):(i=Sr,0===em&&l(sn)),i!==Sr){for(o=[],a=lr();a!==Sr;)o.push(a),a=lr();if(o!==Sr)if(t.substr(Xv,8)===Kr?(a=Kr,Xv+=8):(a=Sr,0===em&&l(Jr)),a===Sr&&(t.substr(Xv,8)===Zr?(a=Zr,Xv+=8):(a=Sr,0===em&&l(en))),a===Sr&&(a=null),a!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();if(s!==Sr)if(42===t.charCodeAt(Xv)?(u=hn,Xv++):(u=Sr,0===em&&l(gn)),u===Sr&&(u=dt()),u!==Sr){for(c=[],p=lr();p!==Sr;)c.push(p),p=lr();if(c!==Sr)if(41===t.charCodeAt(Xv)?(p=dn,Xv++):(p=Sr,0===em&&l(fn)),p!==Sr){for(d=[],f=lr();f!==Sr;)d.push(f),f=lr();d!==Sr?(Yv=e,r=Wd(a,u),e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;if(e===Sr){if(e=Xv,t.substr(Xv,12)===Xd?(r=Xd,Xv+=12):(r=Sr,0===em&&l(Yd)),r===Sr&&(t.substr(Xv,12)===Kd?(r=Kd,Xv+=12):(r=Sr,0===em&&l(Jd))),r!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();if(n!==Sr)if(40===t.charCodeAt(Xv)?(i=an,Xv++):(i=Sr,0===em&&l(sn)),i!==Sr){for(o=[],a=lr();a!==Sr;)o.push(a),a=lr();if(o!==Sr)if(t.substr(Xv,8)===Kr?(a=Kr,Xv+=8):(a=Sr,0===em&&l(Jr)),a===Sr&&(t.substr(Xv,8)===Zr?(a=Zr,Xv+=8):(a=Sr,0===em&&l(en))),a===Sr&&(a=null),a!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();if(s!==Sr)if((u=dt())!==Sr){if(c=Xv,59===t.charCodeAt(Xv)?(p=mo,Xv++):(p=Sr,0===em&&l(yo)),p!==Sr){for(d=[],f=lr();f!==Sr;)d.push(f),f=lr();if(d!==Sr)if(t.substr(Xv,9)===Zd?(f=Zd,Xv+=9):(f=Sr,0===em&&l(ef)),f!==Sr){for(h=[],g=lr();g!==Sr;)h.push(g),g=lr();if(h!==Sr)if(61===t.charCodeAt(Xv)?(g=Yu,Xv++):(g=Sr,0===em&&l(Ku)),g!==Sr){for(v=[],m=lr();m!==Sr;)v.push(m),m=lr();if(v!==Sr)if((m=Dt())!==Sr){for(y=[],b=lr();b!==Sr;)y.push(b),b=lr();y!==Sr?(p=[p,d,f,h,g,v,m,y],c=p):(Xv=c,c=Sr)}else Xv=c,c=Sr;else Xv=c,c=Sr}else Xv=c,c=Sr;else Xv=c,c=Sr}else Xv=c,c=Sr;else Xv=c,c=Sr}else Xv=c,c=Sr;if(c===Sr&&(c=null),c!==Sr)if(41===t.charCodeAt(Xv)?(p=dn,Xv++):(p=Sr,0===em&&l(fn)),p!==Sr){for(d=[],f=lr();f!==Sr;)d.push(f),f=lr();d!==Sr?(Yv=e,r=tf(a,u,c),e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;if(e===Sr){if(e=Xv,t.substr(Xv,3)===rf?(r=rf,Xv+=3):(r=Sr,0===em&&l(nf)),r===Sr&&(t.substr(Xv,3)===of?(r=of,Xv+=3):(r=Sr,0===em&&l(af))),r!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();if(n!==Sr)if(40===t.charCodeAt(Xv)?(i=an,Xv++):(i=Sr,0===em&&l(sn)),i!==Sr){for(o=[],a=lr();a!==Sr;)o.push(a),a=lr();if(o!==Sr)if(t.substr(Xv,8)===Kr?(a=Kr,Xv+=8):(a=Sr,0===em&&l(Jr)),a===Sr&&(t.substr(Xv,8)===Zr?(a=Zr,Xv+=8):(a=Sr,0===em&&l(en))),a===Sr&&(a=null),a!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();if(s!==Sr)if((u=dt())!==Sr){for(c=[],p=lr();p!==Sr;)c.push(p),p=lr();if(c!==Sr)if(41===t.charCodeAt(Xv)?(p=dn,Xv++):(p=Sr,0===em&&l(fn)),p!==Sr){for(d=[],f=lr();f!==Sr;)d.push(f),f=lr();d!==Sr?(Yv=e,r=sf(a,u),e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;if(e===Sr){if(e=Xv,t.substr(Xv,3)===lf?(r=lf,Xv+=3):(r=Sr,0===em&&l(uf)),r===Sr&&(t.substr(Xv,3)===cf?(r=cf,Xv+=3):(r=Sr,0===em&&l(pf))),r!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();if(n!==Sr)if(40===t.charCodeAt(Xv)?(i=an,Xv++):(i=Sr,0===em&&l(sn)),i!==Sr){for(o=[],a=lr();a!==Sr;)o.push(a),a=lr();if(o!==Sr)if(t.substr(Xv,8)===Kr?(a=Kr,Xv+=8):(a=Sr,0===em&&l(Jr)),a===Sr&&(t.substr(Xv,8)===Zr?(a=Zr,Xv+=8):(a=Sr,0===em&&l(en))),a===Sr&&(a=null),a!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();if(s!==Sr)if((u=dt())!==Sr){for(c=[],p=lr();p!==Sr;)c.push(p),p=lr();if(c!==Sr)if(41===t.charCodeAt(Xv)?(p=dn,Xv++):(p=Sr,0===em&&l(fn)),p!==Sr){for(d=[],f=lr();f!==Sr;)d.push(f),f=lr();d!==Sr?(Yv=e,r=df(a,u),e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;if(e===Sr){if(e=Xv,t.substr(Xv,3)===ff?(r=ff,Xv+=3):(r=Sr,0===em&&l(hf)),r===Sr&&(t.substr(Xv,3)===gf?(r=gf,Xv+=3):(r=Sr,0===em&&l(vf))),r!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();if(n!==Sr)if(40===t.charCodeAt(Xv)?(i=an,Xv++):(i=Sr,0===em&&l(sn)),i!==Sr){for(o=[],a=lr();a!==Sr;)o.push(a),a=lr();if(o!==Sr)if(t.substr(Xv,8)===Kr?(a=Kr,Xv+=8):(a=Sr,0===em&&l(Jr)),a===Sr&&(t.substr(Xv,8)===Zr?(a=Zr,Xv+=8):(a=Sr,0===em&&l(en))),a===Sr&&(a=null),a!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();if(s!==Sr)if((u=dt())!==Sr){for(c=[],p=lr();p!==Sr;)c.push(p),p=lr();if(c!==Sr)if(41===t.charCodeAt(Xv)?(p=dn,Xv++):(p=Sr,0===em&&l(fn)),p!==Sr){for(d=[],f=lr();f!==Sr;)d.push(f),f=lr();d!==Sr?(Yv=e,r=mf(a,u),e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;if(e===Sr)if(e=Xv,t.substr(Xv,3)===yf?(r=yf,Xv+=3):(r=Sr,0===em&&l(bf)),r===Sr&&(t.substr(Xv,3)===Ef?(r=Ef,Xv+=3):(r=Sr,0===em&&l(xf))),r!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();if(n!==Sr)if(40===t.charCodeAt(Xv)?(i=an,Xv++):(i=Sr,0===em&&l(sn)),i!==Sr){for(o=[],a=lr();a!==Sr;)o.push(a),a=lr();if(o!==Sr)if(t.substr(Xv,8)===Kr?(a=Kr,Xv+=8):(a=Sr,0===em&&l(Jr)),a===Sr&&(t.substr(Xv,8)===Zr?(a=Zr,Xv+=8):(a=Sr,0===em&&l(en))),a===Sr&&(a=null),a!==Sr){for(s=[],u=lr();u!==Sr;)s.push(u),u=lr();if(s!==Sr)if((u=dt())!==Sr){for(c=[],p=lr();p!==Sr;)c.push(p),p=lr();if(c!==Sr)if(41===t.charCodeAt(Xv)?(p=dn,Xv++):(p=Sr,0===em&&l(fn)),p!==Sr){for(d=[],f=lr();f!==Sr;)d.push(f),f=lr();d!==Sr?(Yv=e,r=Sf(a,u),e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr;else Xv=e,e=Sr}else Xv=e,e=Sr}}}}return em--,e===Sr&&(r=Sr,0===em&&l(Ud)),e}function Lt(){var e,t,r,n;if(em++,e=Xv,(t=Ft())!==Sr){for(r=[],n=lr();n!==Sr;)r.push(n),n=lr();r!==Sr?(n=Ae(),n===Sr&&(n=null),n!==Sr?(Yv=e,t=wf(t,n),e=t):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;return em--,e===Sr&&(t=Sr,0===em&&l(Cf)),e}function Nt(){var e,r,n,i,o;return em++,e=Xv,r=Dt(),r!==Sr?(n=qt(),n===Sr&&(n=Xv,t.substr(Xv,2)===Af?(i=Af,Xv+=2):(i=Sr,0===em&&l(If)),i!==Sr?(o=Ft(),o!==Sr?(i=[i,o],n=i):(Xv=n,n=Sr)):(Xv=n,n=Sr)),n===Sr&&(n=null),n!==Sr?(Yv=e,r=Lf(r,n),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr),em--,e===Sr&&(r=Sr,0===em&&l(Tf)),e}function Rt(){var e;return em++,e=_t(),e===Sr&&(e=kt())===Sr&&(e=Ot()),em--,e===Sr&&(Sr,0===em&&l(Nf)),e}function _t(){var e;return em++,e=Wt(),e===Sr&&(e=Qt())===Sr&&(e=zt()),em--,e===Sr&&(Sr,0===em&&l(Rf)),e}function kt(){var e;return em++,e=Kt(),e===Sr&&(e=Yt())===Sr&&(e=Xt()),em--,e===Sr&&(Sr,0===em&&l(_f)),e}function Ot(){var e;return em++,e=er(),e===Sr&&(e=Zt())===Sr&&(e=Jt()),em--,e===Sr&&(Sr,0===em&&l(kf)),e}function Pt(){var e,r;return em++,e=Xv,t.substr(Xv,4)===Pf?(r=Pf,Xv+=4):(r=Sr,0===em&&l(Df)),r===Sr&&(t.substr(Xv,4)===Ff?(r=Ff,Xv+=4):(r=Sr,0===em&&l(Mf))),r!==Sr&&(Yv=e,r=jf()),e=r,e===Sr&&(e=Xv,t.substr(Xv,5)===$f?(r=$f,Xv+=5):(r=Sr,0===em&&l(Gf)),r===Sr&&(t.substr(Xv,5)===Bf?(r=Bf,Xv+=5):(r=Sr,0===em&&l(Hf))),r!==Sr&&(Yv=e,r=Uf()),e=r),em--,e===Sr&&(r=Sr,0===em&&l(Of)),e}function Dt(){var e,t;return em++,e=Xv,t=ir(),t!==Sr&&(Yv=e,t=qf(t)),e=t,e===Sr&&(e=Xv,t=or(),t!==Sr&&(Yv=e,t=qf(t)),(e=t)===Sr&&(e=Xv,t=rr(),t!==Sr&&(Yv=e,t=qf(t)),(e=t)===Sr&&(e=Xv,t=nr(),t!==Sr&&(Yv=e,t=qf(t)),e=t))),em--,e===Sr&&(t=Sr,0===em&&l(Vf)),e}function Ft(){var e,t;return em++,e=Xv,t=$t(),t!==Sr&&(Yv=e,t=Qf(t)),e=t,e===Sr&&(e=Xv,t=Mt(),t!==Sr&&(Yv=e,t=Wf(t)),e=t),em--,e===Sr&&(t=Sr,0===em&&l(zf)),e}function Mt(){var e,t;return em++,e=Xv,t=Bt(),t!==Sr&&(Yv=e,t=Yf(t)),e=t,e===Sr&&(e=Xv,t=Gt(),t!==Sr&&(Yv=e,t=Kf(t)),e=t),em--,e===Sr&&(t=Sr,0===em&&l(Xf)),e}function jt(){var e,t;return em++,e=Xv,t=Ht(),t!==Sr&&(Yv=e,t=Zf(t)),e=t,e===Sr&&(e=Xv,t=cr(),t!==Sr&&(Yv=e,t=eh()),e=t),em--,e===Sr&&(t=Sr,0===em&&l(Jf)),e}function $t(){var e,r,n,i;if(em++,e=Xv,60===t.charCodeAt(Xv)?(r=ec,Xv++):(r=Sr,0===em&&l(tc)),r!==Sr){for(n=[],rh.test(t.charAt(Xv))?(i=t.charAt(Xv),Xv++):(i=Sr,0===em&&l(nh));i!==Sr;)n.push(i),rh.test(t.charAt(Xv))?(i=t.charAt(Xv),Xv++):(i=Sr,0===em&&l(nh));n!==Sr?(62===t.charCodeAt(Xv)?(i=rc,Xv++):(i=Sr,0===em&&l(nc)),i!==Sr?(Yv=e,r=ih(n),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(th)),e}function Gt(){var e,r,n;return em++,e=Xv,r=gr(),r===Sr&&(r=null),r!==Sr?(58===t.charCodeAt(Xv)?(n=ah,Xv++):(n=Sr,0===em&&l(sh)),n!==Sr?(Yv=e,r=Wf(r),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr),em--,e===Sr&&(r=Sr,0===em&&l(oh)),e}function Bt(){var e,t,r;return em++,e=Xv,t=Gt(),t!==Sr?(r=vr(),r!==Sr?(Yv=e,t=uh(t,r),e=t):(Xv=e,e=Sr)):(Xv=e,e=Sr),em--,e===Sr&&(t=Sr,0===em&&l(lh)),e}function Ht(){var e,r,n;return em++,e=Xv,t.substr(Xv,2)===ph?(r=ph,Xv+=2):(r=Sr,0===em&&l(dh)),r!==Sr?(n=vr(),n!==Sr?(Yv=e,r=fh(n),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr),em--,e===Sr&&(r=Sr,0===em&&l(ch)),e}function Ut(){var e,r,n;return em++,e=Xv,63===t.charCodeAt(Xv)?(r=su,Xv++):(r=Sr,0===em&&l(lu)),r!==Sr?(n=fr(),n!==Sr?(Yv=e,r=gh(n),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr),em--,e===Sr&&(r=Sr,0===em&&l(hh)),e}function Vt(){var e,r,n;return em++,e=Xv,36===t.charCodeAt(Xv)?(r=mh,Xv++):(r=Sr,0===em&&l(yh)),r!==Sr?(n=fr(),n!==Sr?(Yv=e,r=gh(n),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr),em--,e===Sr&&(r=Sr,0===em&&l(vh)),e}function qt(){var e,r,n,i,o,a,s,u;if(em++,e=Xv,64===t.charCodeAt(Xv)?(r=Eh,Xv++):(r=Sr,0===em&&l(xh)),r!==Sr){if(n=[],Sh.test(t.charAt(Xv))?(i=t.charAt(Xv),Xv++):(i=Sr,0===em&&l(Ch)),i!==Sr)for(;i!==Sr;)n.push(i),Sh.test(t.charAt(Xv))?(i=t.charAt(Xv),Xv++):(i=Sr,0===em&&l(Ch));else n=Sr;if(n!==Sr){if(i=[],o=Xv,45===t.charCodeAt(Xv)?(a=Ic,Xv++):(a=Sr,0===em&&l(Lc)),a!==Sr){if(s=[],wh.test(t.charAt(Xv))?(u=t.charAt(Xv),Xv++):(u=Sr,0===em&&l(Th)),u!==Sr)for(;u!==Sr;)s.push(u),wh.test(t.charAt(Xv))?(u=t.charAt(Xv),Xv++):(u=Sr,0===em&&l(Th));else s=Sr;s!==Sr?(a=[a,s],o=a):(Xv=o,o=Sr)}else Xv=o,o=Sr;for(;o!==Sr;)if(i.push(o),o=Xv,45===t.charCodeAt(Xv)?(a=Ic,Xv++):(a=Sr,0===em&&l(Lc)),a!==Sr){if(s=[],wh.test(t.charAt(Xv))?(u=t.charAt(Xv),Xv++):(u=Sr,0===em&&l(Th)),u!==Sr)for(;u!==Sr;)s.push(u),wh.test(t.charAt(Xv))?(u=t.charAt(Xv),Xv++):(u=Sr,0===em&&l(Th));else s=Sr;s!==Sr?(a=[a,s],o=a):(Xv=o,o=Sr)}else Xv=o,o=Sr;i!==Sr?(Yv=e,r=Ah(n,i),e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(bh)),e}function zt(){var e,r,n;if(em++,e=Xv,r=[],Lh.test(t.charAt(Xv))?(n=t.charAt(Xv),Xv++):(n=Sr,0===em&&l(Nh)),n!==Sr)for(;n!==Sr;)r.push(n),Lh.test(t.charAt(Xv))?(n=t.charAt(Xv),Xv++):(n=Sr,0===em&&l(Nh));else r=Sr;return r!==Sr&&(Yv=e,r=Rh(r)),e=r,em--,e===Sr&&(r=Sr,0===em&&l(Ih)),e}function Qt(){var e,r,n,i,o;if(em++,e=Xv,r=[],Lh.test(t.charAt(Xv))?(n=t.charAt(Xv),Xv++):(n=Sr,0===em&&l(Nh)),n!==Sr)for(;n!==Sr;)r.push(n),Lh.test(t.charAt(Xv))?(n=t.charAt(Xv),Xv++):(n=Sr,0===em&&l(Nh));else r=Sr;if(r!==Sr)if(46===t.charCodeAt(Xv)?(n=es,Xv++):(n=Sr,0===em&&l(ts)),n!==Sr){for(i=[],Lh.test(t.charAt(Xv))?(o=t.charAt(Xv),Xv++):(o=Sr,0===em&&l(Nh));o!==Sr;)i.push(o),Lh.test(t.charAt(Xv))?(o=t.charAt(Xv),Xv++):(o=Sr,0===em&&l(Nh));i!==Sr?(Yv=e,r=kh(r,n,i),e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr;if(e===Sr)if(e=Xv,46===t.charCodeAt(Xv)?(r=es,Xv++):(r=Sr,0===em&&l(ts)),r!==Sr){if(n=[],Lh.test(t.charAt(Xv))?(i=t.charAt(Xv),Xv++):(i=Sr,0===em&&l(Nh)),i!==Sr)for(;i!==Sr;)n.push(i),Lh.test(t.charAt(Xv))?(i=t.charAt(Xv),Xv++):(i=Sr,0===em&&l(Nh));else n=Sr;n!==Sr?(Yv=e,r=Oh(r,n),e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(_h)),e}function Wt(){var e,r,n,i,o;if(em++,e=Xv,r=[],Lh.test(t.charAt(Xv))?(n=t.charAt(Xv),Xv++):(n=Sr,0===em&&l(Nh)),n!==Sr)for(;n!==Sr;)r.push(n),Lh.test(t.charAt(Xv))?(n=t.charAt(Xv),Xv++):(n=Sr,0===em&&l(Nh));else r=Sr;if(r!==Sr)if(46===t.charCodeAt(Xv)?(n=es,Xv++):(n=Sr,0===em&&l(ts)),n!==Sr){for(i=[],Lh.test(t.charAt(Xv))?(o=t.charAt(Xv),Xv++):(o=Sr,0===em&&l(Nh));o!==Sr;)i.push(o),Lh.test(t.charAt(Xv))?(o=t.charAt(Xv),Xv++):(o=Sr,0===em&&l(Nh));i!==Sr?(o=tr(),o!==Sr?(Yv=e,r=Dh(r,n,i,o),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr;if(e===Sr){if(e=Xv,46===t.charCodeAt(Xv)?(r=es,Xv++):(r=Sr,0===em&&l(ts)),r!==Sr){if(n=[],Lh.test(t.charAt(Xv))?(i=t.charAt(Xv),Xv++):(i=Sr,0===em&&l(Nh)),i!==Sr)for(;i!==Sr;)n.push(i),Lh.test(t.charAt(Xv))?(i=t.charAt(Xv),Xv++):(i=Sr,0===em&&l(Nh));else n=Sr;n!==Sr?(i=tr(),i!==Sr?(Yv=e,r=Fh(r,n,i),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;if(e===Sr){if(e=Xv,r=[],Lh.test(t.charAt(Xv))?(n=t.charAt(Xv),Xv++):(n=Sr,0===em&&l(Nh)),n!==Sr)for(;n!==Sr;)r.push(n),Lh.test(t.charAt(Xv))?(n=t.charAt(Xv),Xv++):(n=Sr,0===em&&l(Nh));else r=Sr;r!==Sr?(n=tr(),n!==Sr?(Yv=e,r=Mh(r,n),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}}return em--,e===Sr&&(r=Sr,0===em&&l(Ph)),e}function Xt(){var e,r,n;return em++,e=Xv,43===t.charCodeAt(Xv)?(r=uu,Xv++):(r=Sr,0===em&&l(cu)),r!==Sr?(n=zt(),n!==Sr?(Yv=e,r=$h(n),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr),em--,e===Sr&&(r=Sr,0===em&&l(jh)),e}function Yt(){var e,r,n;return em++,e=Xv,43===t.charCodeAt(Xv)?(r=uu,Xv++):(r=Sr,0===em&&l(cu)),r!==Sr?(n=Qt(),n!==Sr?(Yv=e,r=Bh(n),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr),em--,e===Sr&&(r=Sr,0===em&&l(Gh)),e}function Kt(){var e,r,n;return em++,e=Xv,43===t.charCodeAt(Xv)?(r=uu,Xv++):(r=Sr,0===em&&l(cu)),r!==Sr?(n=Wt(),n!==Sr?(Yv=e,r=Bh(n),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr),em--,e===Sr&&(r=Sr,0===em&&l(Hh)),e}function Jt(){var e,r,n;return em++,e=Xv,45===t.charCodeAt(Xv)?(r=Ic,Xv++):(r=Sr,0===em&&l(Lc)),r!==Sr?(n=zt(),n!==Sr?(Yv=e,r=Vh(n),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr),em--,e===Sr&&(r=Sr,0===em&&l(Uh)),e}function Zt(){var e,r,n;return em++,e=Xv,45===t.charCodeAt(Xv)?(r=Ic,Xv++):(r=Sr,0===em&&l(Lc)),r!==Sr?(n=Qt(),n!==Sr?(Yv=e,r=Vh(n),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr),em--,e===Sr&&(r=Sr,0===em&&l(qh)),e}function er(){var e,r,n;return em++,e=Xv,45===t.charCodeAt(Xv)?(r=Ic,Xv++):(r=Sr,0===em&&l(Lc)),r!==Sr?(n=Wt(),n!==Sr?(Yv=e,r=Vh(n),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr),em--,e===Sr&&(r=Sr,0===em&&l(zh)),e}function tr(){var e,r,n,i,o;if(em++,e=Xv,Wh.test(t.charAt(Xv))?(r=t.charAt(Xv),Xv++):(r=Sr,0===em&&l(Xh)),r!==Sr)if(Yh.test(t.charAt(Xv))?(n=t.charAt(Xv),Xv++):(n=Sr,0===em&&l(Kh)),n===Sr&&(n=null),n!==Sr){if(i=[],Lh.test(t.charAt(Xv))?(o=t.charAt(Xv),Xv++):(o=Sr,0===em&&l(Nh)),o!==Sr)for(;o!==Sr;)i.push(o),Lh.test(t.charAt(Xv))?(o=t.charAt(Xv),Xv++):(o=Sr,0===em&&l(Nh));else i=Sr;i!==Sr?(Yv=e,r=Jh(r,n,i),e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr;else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(Qh)),e}function rr(){var e,r,n,i;if(em++,e=Xv,39===t.charCodeAt(Xv)?(r=eg,Xv++):(r=Sr,0===em&&l(tg)),r!==Sr){for(n=[],rg.test(t.charAt(Xv))?(i=t.charAt(Xv),Xv++):(i=Sr,0===em&&l(ng)),i===Sr&&(i=ar());i!==Sr;)n.push(i),rg.test(t.charAt(Xv))?(i=t.charAt(Xv),Xv++):(i=Sr,0===em&&l(ng)),i===Sr&&(i=ar());n!==Sr?(39===t.charCodeAt(Xv)?(i=eg,Xv++):(i=Sr,0===em&&l(tg)),i!==Sr?(Yv=e,r=ig(n),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(Zh)),e}function nr(){var e,r,n,i;if(em++,e=Xv,34===t.charCodeAt(Xv)?(r=ag,Xv++):(r=Sr,0===em&&l(sg)),r!==Sr){for(n=[],lg.test(t.charAt(Xv))?(i=t.charAt(Xv),Xv++):(i=Sr,0===em&&l(ug)),i===Sr&&(i=ar());i!==Sr;)n.push(i),lg.test(t.charAt(Xv))?(i=t.charAt(Xv),Xv++):(i=Sr,0===em&&l(ug)),i===Sr&&(i=ar());n!==Sr?(34===t.charCodeAt(Xv)?(i=ag,Xv++):(i=Sr,0===em&&l(sg)),i!==Sr?(Yv=e,r=ig(n),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(og)),e}function ir(){var e,r,n,i;if(em++,e=Xv,t.substr(Xv,3)===pg?(r=pg,Xv+=3):(r=Sr,0===em&&l(dg)),r!==Sr){for(n=[],fg.test(t.charAt(Xv))?(i=t.charAt(Xv),Xv++):(i=Sr,0===em&&l(hg)),i===Sr&&(i=ar());i!==Sr;)n.push(i),fg.test(t.charAt(Xv))?(i=t.charAt(Xv),Xv++):(i=Sr,0===em&&l(hg)),i===Sr&&(i=ar());n!==Sr?(t.substr(Xv,3)===pg?(i=pg,Xv+=3):(i=Sr,0===em&&l(dg)),i!==Sr?(Yv=e,r=ig(n),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(cg)),e}function or(){var e,r,n,i;if(em++,e=Xv,t.substr(Xv,3)===vg?(r=vg,Xv+=3):(r=Sr,0===em&&l(mg)),r!==Sr){for(n=[],yg.test(t.charAt(Xv))?(i=t.charAt(Xv),Xv++):(i=Sr,0===em&&l(bg)),i===Sr&&(i=ar());i!==Sr;)n.push(i),yg.test(t.charAt(Xv))?(i=t.charAt(Xv),Xv++):(i=Sr,0===em&&l(bg)),i===Sr&&(i=ar());n!==Sr?(t.substr(Xv,3)===vg?(i=vg,Xv+=3):(i=Sr,0===em&&l(mg)),i!==Sr?(Yv=e,r=ig(n),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(gg)),e}function ar(){var e,r,n;return em++,e=Xv,92===t.charCodeAt(Xv)?(r=xg,Xv++):(r=Sr,0===em&&l(Sg)),r!==Sr?(Cg.test(t.charAt(Xv))?(n=t.charAt(Xv),Xv++):(n=Sr,0===em&&l(wg)),n!==Sr?(r=[r,n],e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr),em--,e===Sr&&(r=Sr,0===em&&l(Eg)),e}function sr(){var e,r,n,i;if(em++,e=Xv,40===t.charCodeAt(Xv)?(r=an,Xv++):(r=Sr,0===em&&l(sn)),r!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();n!==Sr?(41===t.charCodeAt(Xv)?(i=dn,Xv++):(i=Sr,0===em&&l(fn)),i!==Sr?(Yv=e,r=Ag(),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(Tg)),e}function lr(){var e;return em++,Lg.test(t.charAt(Xv))?(e=t.charAt(Xv),Xv++):(e=Sr,0===em&&l(Ng)),e===Sr&&(Rg.test(t.charAt(Xv))?(e=t.charAt(Xv),Xv++):(e=Sr,0===em&&l(_g)),e===Sr&&(kg.test(t.charAt(Xv))?(e=t.charAt(Xv),Xv++):(e=Sr,0===em&&l(Og)),e===Sr&&(Pg.test(t.charAt(Xv))?(e=t.charAt(Xv),Xv++):(e=Sr,0===em&&l(Dg)),e===Sr&&(e=ur())))),em--,e===Sr&&(Sr,0===em&&l(Ig)),e}function ur(){var e,r,n,i;if(em++,e=Xv,35===t.charCodeAt(Xv)?(r=Mg,Xv++):(r=Sr,0===em&&l(jg)),r!==Sr){for(n=[],$g.test(t.charAt(Xv))?(i=t.charAt(Xv),Xv++):(i=Sr,0===em&&l(Gg));i!==Sr;)n.push(i),$g.test(t.charAt(Xv))?(i=t.charAt(Xv),Xv++):(i=Sr,0===em&&l(Gg));n!==Sr?(r=[r,n],e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(Fg)),e}function cr(){var e,r,n,i;if(em++,e=Xv,91===t.charCodeAt(Xv)?(r=xu,Xv++):(r=Sr,0===em&&l(Su)),r!==Sr){for(n=[],i=lr();i!==Sr;)n.push(i),i=lr();n!==Sr?(93===t.charCodeAt(Xv)?(i=Cu,Xv++):(i=Sr,0===em&&l(wu)),i!==Sr?(r=[r,n,i],e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr)}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(Bg)),e}function pr(){var e;return em++,Ug.test(t.charAt(Xv))?(e=t.charAt(Xv),Xv++):(e=Sr,0===em&&l(Vg)),e===Sr&&(qg.test(t.charAt(Xv))?(e=t.charAt(Xv),Xv++):(e=Sr,0===em&&l(zg)),e===Sr&&(Qg.test(t.charAt(Xv))?(e=t.charAt(Xv),Xv++):(e=Sr,0===em&&l(Wg)),e===Sr&&(Xg.test(t.charAt(Xv))?(e=t.charAt(Xv),Xv++):(e=Sr,0===em&&l(Yg)),e===Sr&&(Kg.test(t.charAt(Xv))?(e=t.charAt(Xv),Xv++):(e=Sr,0===em&&l(Jg)),e===Sr&&(Zg.test(t.charAt(Xv))?(e=t.charAt(Xv),Xv++):(e=Sr,0===em&&l(ev)),e===Sr&&(tv.test(t.charAt(Xv))?(e=t.charAt(Xv),Xv++):(e=Sr,0===em&&l(rv)),e===Sr&&(nv.test(t.charAt(Xv))?(e=t.charAt(Xv),Xv++):(e=Sr,0===em&&l(iv)),e===Sr&&(ov.test(t.charAt(Xv))?(e=t.charAt(Xv),Xv++):(e=Sr,0===em&&l(av)),e===Sr&&(sv.test(t.charAt(Xv))?(e=t.charAt(Xv),Xv++):(e=Sr,0===em&&l(lv)),e===Sr&&(uv.test(t.charAt(Xv))?(e=t.charAt(Xv),Xv++):(e=Sr,0===em&&l(cv)),e===Sr&&(pv.test(t.charAt(Xv))?(e=t.charAt(Xv),Xv++):(e=Sr,0===em&&l(dv)),e===Sr&&(fv.test(t.charAt(Xv))?(e=t.charAt(Xv),Xv++):(e=Sr,0===em&&l(hv)),e===Sr&&(gv.test(t.charAt(Xv))?(e=t.charAt(Xv),Xv++):(e=Sr,0===em&&l(vv))))))))))))))),em--,e===Sr&&(Sr,0===em&&l(Hg)),e}function dr(){var e;return em++,e=pr(),e===Sr&&(95===t.charCodeAt(Xv)?(e=yv,Xv++):(e=Sr,0===em&&l(bv))),em--,e===Sr&&(Sr,0===em&&l(mv)),e}function fr(){var e,r,n,i;if(em++,e=Xv,r=dr(),r===Sr&&(Lh.test(t.charAt(Xv))?(r=t.charAt(Xv),Xv++):(r=Sr,0===em&&l(Nh))),r!==Sr){for(n=[],i=dr(),i===Sr&&(Lh.test(t.charAt(Xv))?(i=t.charAt(Xv),Xv++):(i=Sr,0===em&&l(Nh)),i===Sr&&(xv.test(t.charAt(Xv))?(i=t.charAt(Xv),Xv++):(i=Sr,0===em&&l(Sv)),i===Sr&&(Cv.test(t.charAt(Xv))?(i=t.charAt(Xv),Xv++):(i=Sr,0===em&&l(wv)),i===Sr&&(Tv.test(t.charAt(Xv))?(i=t.charAt(Xv),Xv++):(i=Sr,0===em&&l(Av))))));i!==Sr;)n.push(i),(i=dr())===Sr&&(Lh.test(t.charAt(Xv))?(i=t.charAt(Xv),Xv++):(i=Sr,0===em&&l(Nh)),i===Sr&&(xv.test(t.charAt(Xv))?(i=t.charAt(Xv),Xv++):(i=Sr,0===em&&l(Sv)),i===Sr&&(Cv.test(t.charAt(Xv))?(i=t.charAt(Xv),Xv++):(i=Sr,0===em&&l(wv)),i===Sr&&(Tv.test(t.charAt(Xv))?(i=t.charAt(Xv),Xv++):(i=Sr,0===em&&l(Av))))));n!==Sr?(Yv=e,r=Iv(r,n),e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(Ev)),e}function hr(){var e;return em++,e=dr(),e===Sr&&(45===t.charCodeAt(Xv)?(e=Ic,Xv++):(e=Sr,0===em&&l(Lc)),e===Sr&&(Lh.test(t.charAt(Xv))?(e=t.charAt(Xv),Xv++):(e=Sr,0===em&&l(Nh)),e===Sr&&(xv.test(t.charAt(Xv))?(e=t.charAt(Xv),Xv++):(e=Sr,0===em&&l(Sv)),e===Sr&&(Cv.test(t.charAt(Xv))?(e=t.charAt(Xv),Xv++):(e=Sr,0===em&&l(wv)),e===Sr&&(Tv.test(t.charAt(Xv))?(e=t.charAt(Xv),Xv++):(e=Sr,0===em&&l(Av))))))),em--,e===Sr&&(Sr,0===em&&l(Lv)),e}function gr(){var e,r,n,i;if(em++,e=Xv,(r=pr())!==Sr){for(n=[],i=hr(),i===Sr&&(46===t.charCodeAt(Xv)?(i=es,Xv++):(i=Sr,0===em&&l(ts)));i!==Sr;)n.push(i),(i=hr())===Sr&&(46===t.charCodeAt(Xv)?(i=es,Xv++):(i=Sr,0===em&&l(ts)));n!==Sr?(Yv=e,r=Rv(r,n),e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(Nv)),e}function vr(){var e,r,n,i;if(em++,e=Xv,r=dr(),r===Sr&&(Lh.test(t.charAt(Xv))?(r=t.charAt(Xv),Xv++):(r=Sr,0===em&&l(Nh)),r===Sr&&(58===t.charCodeAt(Xv)?(r=ah,Xv++):(r=Sr,0===em&&l(sh)),r===Sr&&(r=mr()))),r!==Sr){for(n=[],i=hr(),i===Sr&&(46===t.charCodeAt(Xv)?(i=es,Xv++):(i=Sr,0===em&&l(ts)),i===Sr&&(58===t.charCodeAt(Xv)?(i=ah,Xv++):(i=Sr,0===em&&l(sh)),i===Sr&&(i=mr())));i!==Sr;)n.push(i),(i=hr())===Sr&&(46===t.charCodeAt(Xv)?(i=es,Xv++):(i=Sr,0===em&&l(ts)),i===Sr&&(58===t.charCodeAt(Xv)?(i=ah,Xv++):(i=Sr,0===em&&l(sh)),i===Sr&&(i=mr())));n!==Sr?(Yv=e,r=kv(r,n),e=r):(Xv=e,e=Sr)}else Xv=e,e=Sr;return em--,e===Sr&&(r=Sr,0===em&&l(_v)),e}function mr(){var e;return em++,e=yr(),e===Sr&&(e=Er()),em--,e===Sr&&(Sr,0===em&&l(Ov)),e}function yr(){var e,r,n,i,o;return em++,e=Xv,r=Xv,37===t.charCodeAt(Xv)?(n=Dv,Xv++):(n=Sr,0===em&&l(Fv)),n!==Sr?(i=br(),i!==Sr?(o=br(),o!==Sr?(n=[n,i,o],r=n):(Xv=r,r=Sr)):(Xv=r,r=Sr)):(Xv=r,r=Sr),r!==Sr&&(Yv=e,r=Mv(r)),e=r,em--,e===Sr&&(r=Sr,0===em&&l(Pv)),e}function br(){var e;return em++,Lh.test(t.charAt(Xv))?(e=t.charAt(Xv),Xv++):(e=Sr,0===em&&l(Nh)),e===Sr&&($v.test(t.charAt(Xv))?(e=t.charAt(Xv),Xv++):(e=Sr,0===em&&l(Gv)),e===Sr&&(Bv.test(t.charAt(Xv))?(e=t.charAt(Xv),Xv++):(e=Sr,0===em&&l(Hv)))),em--,e===Sr&&(Sr,0===em&&l(jv)),e}function Er(){var e,r,n;return em++,e=Xv,92===t.charCodeAt(Xv)?(r=xg,Xv++):(r=Sr,0===em&&l(Sg)),r!==Sr?(95===t.charCodeAt(Xv)?(n=yv,Xv++):(n=Sr,0===em&&l(bv)),n===Sr&&(126===t.charCodeAt(Xv)?(n=Vv,Xv++):(n=Sr,0===em&&l(qv)),n===Sr&&(46===t.charCodeAt(Xv)?(n=es,Xv++):(n=Sr,0===em&&l(ts)),n===Sr&&(45===t.charCodeAt(Xv)?(n=Ic,Xv++):(n=Sr,0===em&&l(Lc)),n===Sr&&(33===t.charCodeAt(Xv)?(n=du,Xv++):(n=Sr,0===em&&l(fu)),n===Sr&&(36===t.charCodeAt(Xv)?(n=mh,Xv++):(n=Sr,0===em&&l(yh)),n===Sr&&(38===t.charCodeAt(Xv)?(n=zv,Xv++):(n=Sr,0===em&&l(Qv)),n===Sr&&(39===t.charCodeAt(Xv)?(n=eg,Xv++):(n=Sr,0===em&&l(tg)),n===Sr&&(40===t.charCodeAt(Xv)?(n=an,Xv++):(n=Sr,0===em&&l(sn)),n===Sr&&(41===t.charCodeAt(Xv)?(n=dn,Xv++):(n=Sr,0===em&&l(fn)),n===Sr&&(42===t.charCodeAt(Xv)?(n=hn,Xv++):(n=Sr,0===em&&l(gn)),n===Sr&&(43===t.charCodeAt(Xv)?(n=uu,Xv++):(n=Sr,0===em&&l(cu)),n===Sr&&(44===t.charCodeAt(Xv)?(n=ul,Xv++):(n=Sr,0===em&&l(cl)),n===Sr&&(59===t.charCodeAt(Xv)?(n=mo,Xv++):(n=Sr,0===em&&l(yo)),n===Sr&&(58===t.charCodeAt(Xv)?(n=ah,Xv++):(n=Sr,0===em&&l(sh)),n===Sr&&(61===t.charCodeAt(Xv)?(n=Yu,Xv++):(n=Sr,0===em&&l(Ku)),n===Sr&&(47===t.charCodeAt(Xv)?(n=Kl,Xv++):(n=Sr,0===em&&l(Jl)),n===Sr&&(63===t.charCodeAt(Xv)?(n=su,Xv++):(n=Sr,0===em&&l(lu)),n===Sr&&(35===t.charCodeAt(Xv)?(n=Mg,Xv++):(n=Sr,0===em&&l(jg)),n===Sr&&(64===t.charCodeAt(Xv)?(n=Eh,Xv++):(n=Sr,0===em&&l(xh)),n===Sr&&(37===t.charCodeAt(Xv)?(n=Dv,Xv++):(n=Sr,0===em&&l(Fv)))))))))))))))))))))),n!==Sr?(Yv=e,r=Wv(n),e=r):(Xv=e,e=Sr)):(Xv=e,e=Sr),em--,e===Sr&&(r=Sr,0===em&&l(Uv)),e}r=void 0!==r?r:{};var xr,Sr={},Cr={DOCUMENT:c},wr=c,Tr=o("[1] QueryUnit"),Ar=o("[2] Query"),Ir=function(e,t,r){return{token:"query",kind:"query",prologue:e,units:[t],inlineData:r}},Lr=o("[3] Prologue"),Nr=function(e,t){return{token:"prologue",base:e,prefixes:t}},Rr=o("[4] BaseDecl"),_r="BASE",kr=n("BASE",!1),Or="base",Pr=n("base",!1),Dr=function(e){om(e);var t={};return t.token="base",t.value=e,t},Fr=o("[5] PrefixDecl"),Mr="PREFIX",jr=n("PREFIX",!1),$r="prefix",Gr=n("prefix",!1),Br=function(e,t){im(e,t);var r={};return r.token="prefix",r.prefix=e,r.local=t,r},Hr=o("[6] SelectQuery"),Ur=function(e,t,r,n){for(var i={named:[],implicit:[]},o=0;o<t.length;o++){var a=t[o];"default"===a.kind?i.implicit.push(a.graph):i.named.push(a.graph)}0===i.named.length&&0===i.implicit.length&&i.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var s={};return s.kind="select",s.token="executableunit",s.dataset=i,s.projection=e.vars,s.modifier=e.modifier,s.pattern=r,null!=n&&null!=n.limit&&(s.limit=n.limit),null!=n&&null!=n.offset&&(s.offset=n.offset),null!=n&&null!=n.order&&""!=n.order&&(s.order=n.order),null!=n&&null!=n.group&&(s.group=n.group),s},Vr=o("[7] SubSelect"),qr=function(e,t,r){var n={};return n.kind="select",n.token="subselect",n.projection=e.vars,n.modifier=e.modifier,n.pattern=t,null!=r&&null!=r.limit&&(n.limit=r.limit),null!=r&&null!=r.offset&&(n.offset=r.offset),null!=r&&null!=r.order&&""!=r.order&&(n.order=r.order),null!=r&&null!=r.group&&(n.group=r.group),n},zr=o("[8] SelectClause"),Qr="SELECT",Wr=n("SELECT",!1),Xr="select",Yr=n("select",!1),Kr="DISTINCT",Jr=n("DISTINCT",!1),Zr="distinct",en=n("distinct",!1),tn="REDUCED",rn=n("REDUCED",!1),nn="reduced",on=n("reduced",!1),an="(",sn=n("(",!1),ln="AS",un=n("AS",!1),cn="as",pn=n("as",!1),dn=")",fn=n(")",!1),hn="*",gn=n("*",!1),vn=function(e,t){var r=[];if(3===t.length&&"*"===t[1])return{vars:[{token:"variable",kind:"*"}],modifier:am(e)};for(var n=0;n<t.length;n++){var i=t[n];3===i.length?r.push({token:"variable",kind:"var",value:i[1]}):r.push({token:"variable",kind:"aliased",expression:i[3],alias:i[7]})}return{vars:r,modifier:am(e)}},mn=o("[9] ConstructQuery"),yn="CONSTRUCT",bn=n("CONSTRUCT",!1),En="construct",xn=n("construct",!1),Sn=function(e,t,r,n){for(var i={named:[],implicit:[]},o=0;o<t.length;o++){var a=t[o];"default"===a.kind?i.implicit.push(a.graph):i.named.push(a.graph)}0===i.named.length&&0===i.implicit.length&&i.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var s={};return s.kind="construct",s.token="executableunit",s.dataset=i,s.template=e,s.pattern=r,null!=n&&null!=n.limit&&(s.limit=n.limit),null!=n&&null!=n.offset&&(s.offset=n.offset),null!=n&&null!=n.order&&""!=n.order&&(s.order=n.order),s},Cn="WHERE",wn=n("WHERE",!1),Tn="where",An=n("where",!1),In="{",Ln=n("{",!1),Nn="}",Rn=n("}",!1),_n=function(e,t,r){for(var n={named:[],implicit:[]},i=0;i<e.length;i++){var o=e[i];"default"===o.kind?n.implicit.push(o.graph):n.named.push(o.graph)}0===n.named.length&&0===n.implicit.length&&n.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var a={};return a.kind="construct",a.token="executableunit",a.dataset=n,a.template=t,a.pattern={token:"basicgraphpattern",triplesContext:t.triplesContext},null!=r&&null!=r.limit&&(a.limit=r.limit),null!=r&&null!=r.offset&&(a.offset=r.offset),null!=r&&null!=r.order&&""!=r.order&&(a.order=r.order),a},kn=o("[10] DescribeQuery"),On="DESCRIBE",Pn=n("DESCRIBE",!1),Dn=o("[11] AskQuery"),Fn="ASK",Mn=n("ASK",!1),jn="ask",$n=n("ask",!1),Gn=function(e,t){for(var r={named:[],implicit:[]},n=0;n<e.length;n++){var i=e[n];"implicit"===i.kind?r.implicit.push(i.graph):r.named.push(i.graph)}0===r.named.length&&0===r.implicit.length&&r.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var o={};return o.kind="ask",o.token="executableunit",o.dataset=r,o.pattern=t,o},Bn=o("[12] DatasetClause"),Hn="FROM",Un=n("FROM",!1),Vn="from",qn=n("from",!1),zn=function(e){return e},Qn=o("[13] DefaultGraphClause"),Wn=function(e){return{graph:e,kind:"default",token:"graphClause"}},Xn=o("[14] NamedGraphClause"),Yn="NAMED",Kn=n("NAMED",!1),Jn="named",Zn=n("named",!1),ei=function(e){return{graph:e,kind:"named",token:"graphCluase"}},ti=o("[15] SourceSelector"),ri=o("[16] WhereClause"),ni=function(e){return e},ii=o("[17] SolutionModifier"),oi=function(e,t,r){var n={};return null!=r&&(null!=r.limit&&(n.limit=r.limit),null!=r.offset&&(n.offset=r.offset)),null!=e&&(n.group=e),n.order=t,n},ai=o("[18] GroupClause"),si="GROUP",li=n("GROUP",!1),ui="group",ci=n("group",!1),pi="BY",di=n("BY",!1),fi="by",hi=n("by",!1),gi=function(e){return e},vi=o("[19] GroupCondition"),mi=function(e){return e},yi=function(e){return e},bi=function(e,t){return 0!=t.length?{token:"aliased_expression",expression:e,alias:t[2]}:e},Ei=function(e){return e},xi=o("[20] HavingClause"),Si="HAVING",Ci=n("HAVING",!1),wi=o("[21] HavingCondition"),Ti=o("[22] OrderClause"),Ai="ORDER",Ii=n("ORDER",!1),Li="order",Ni=n("order",!1),Ri=function(e){return e},_i=o("[23] OrderCondition"),ki="ASC",Oi=n("ASC",!1),Pi="asc",Di=n("asc",!1),Fi="DESC",Mi=n("DESC",!1),ji="desc",$i=n("desc",!1),Gi=function(e,t){return{direction:e.toUpperCase(),expression:t}},Bi=function(e){if("var"===e.token)var e={token:"expression",expressionType:"atomic",primaryexpression:"var",value:e};return{direction:"ASC",expression:e}},Hi=o("[24] LimitOffsetClauses"),Ui=function(e){for(var t={},r=0;r<e.length;r++){var n=e[r];null!=n&&null!=n.limit?t.limit=n.limit:null!=n&&null!=n.offset&&(t.offset=n.offset)}return t},Vi=o("[25] LimitClause"),qi="LIMIT",zi=n("LIMIT",!1),Qi="limit",Wi=n("limit",!1),Xi=function(e){return{limit:parseInt(e.value)}},Yi=o("[26] OffsetClause"),Ki="OFFSET",Ji=n("OFFSET",!1),Zi="offset",eo=n("offset",!1),to=function(e){return{offset:parseInt(e.value)}},ro=o("[27] BindingsClause"),no="BINDINGS",io=n("BINDINGS",!1),oo=o("[28] BindingValue"),ao="UNDEF",so=n("UNDEF",!1),lo=o("[28]\tValuesClause\t  ::=\t( 'VALUES' DataBlock )?"),uo="VALUES",co=n("VALUES",!1),po="values",fo=n("values",!1),ho=function(e){return null!=e?e[1]:null},go=o("[29] UpdateUnit"),vo=o("[30] Update"),mo=";",yo=n(";",!1),bo=function(e,t,r){var n={};n.token="query",n.kind="update",n.prologue=e;var i=[t];return null!=r&&null!=r.length&&null!=r[3]&&null!=r[3].units&&(i=i.concat(r[3].units)),n.units=i,n},Eo=o("[31] Update1"),xo=o("[32] Load"),So="LOAD",Co=n("LOAD",!1),wo="load",To=n("load",!1),Ao="INTO",Io=n("INTO",!1),Lo="into",No=n("into",!1),Ro=function(e,t){var r={};return r.kind="load",r.token="executableunit",r.sourceGraph=e,null!=t&&(r.destinyGraph=t[2]),r},_o=o("[33] Clear"),ko="CLEAR",Oo=n("CLEAR",!1),Po="clear",Do=n("clear",!1),Fo="SILENT",Mo=n("SILENT",!1),jo="silent",$o=n("silent",!1),Go=function(e){var t={};return t.kind="clear",t.token="executableunit",t.destinyGraph=e,t},Bo=o("[34] Drop"),Ho="DROP",Uo=n("DROP",!1),Vo="drop",qo=n("drop",!1),zo=function(e){var t={};return t.kind="drop",t.token="executableunit",t.destinyGraph=e,t},Qo=o("[35] Create"),Wo="CREATE",Xo=n("CREATE",!1),Yo="create",Ko=n("create",!1),Jo=function(e){var t={};return t.kind="create",t.token="executableunit",t.destinyGraph=e,t},Zo=o("[36] InsertData"),ea="INSERT",ta=n("INSERT",!1),ra="insert",na=n("insert",!1),ia="DATA",oa=n("DATA",!1),aa="data",sa=n("data",!1),la=function(e){var t={};return t.kind="insertdata",t.token="executableunit",t.quads=e,t},ua=o("[37] DeleteData"),ca="DELETE",pa=n("DELETE",!1),da="delete",fa=n("delete",!1),ha=function(e){var t={};return t.kind="deletedata",t.token="executableunit",t.quads=e,t},ga=o("[38] DeleteWhere"),va=function(e){var t={};t.kind="modify",t.pattern=e,t.with=null,t.using=null;var r=[],n=e.patterns[0];n=null==n.triplesContext&&null!=n.patterns?n.patterns[0].triplesContext:n.triplesContext;for(var i=0;i<n.length;i++){var o={},a=n[i];o.subject=a.subject,o.predicate=a.predicate,o.object=a.object,o.graph=a.graph,r.push(o)}return t.delete=r,t},ma=o("[39] Modify"),ya="WITH",ba=n("WITH",!1),Ea="with",xa=n("with",!1),Sa=function(e,t,r,n){var i={};return i.kind="modify",i.with=""!=e&&null!=e?e[2]:null,3!==t.length||""!==t[2]&&null!=t[2]?3===t.length&&null!=t[0].length&&null!=t[1].length&&null!=t[2].length?(i.delete=t[0],i.insert=t[2]):(i.insert=t,i.delete=null):(i.delete=t[0],i.insert=null),""!=r&&(i.using=r),i.pattern=n,i},Ca=o("[40] DeleteClause"),wa=function(e){return e},Ta=o("[41] InsertClause"),Aa=o("[42] UsingClause"),Ia="USING",La=n("USING",!1),Na="using",Ra=n("using",!1),_a=function(e){return null!=e.length?{kind:"named",uri:e[2]}:{kind:"default",uri:e}},ka=o("[43] GraphRef"),Oa="GRAPH",Pa=n("GRAPH",!1),Da="graph",Fa=n("graph",!1),Ma=function(e){return e},ja=o("[44] GraphRefAll"),$a="DEFAULT",Ga=n("DEFAULT",!1),Ba="default",Ha=n("default",!1),Ua=function(){return"default"},Va=function(){return"named"},qa="ALL",za=n("ALL",!1),Qa="all",Wa=n("all",!1),Xa=function(){return"all"},Ya=o("[45] QuadPattern"),Ka=function(e){return e.quadsContext},Ja=o("[46] QuadData"),Za=o("[47] Quads"),es=".",ts=n(".",!1),rs=function(e,t){var r=[];if(null!=e&&null!=e.triplesContext)for(var n=0;n<e.triplesContext.length;n++){var i=e.triplesContext[n];i.graph=null,r.push(i)}if(t&&t.length>0&&t[0].length>0&&(r=r.concat(t[0][0].quadsContext),null!=t[0][2]&&null!=t[0][2].triplesContext))for(var n=0;n<t[0][2].triplesContext.length;n++){var i=t[0][2].triplesContext[n];i.graph=null,r.push(i)}return{token:"quads",quadsContext:r}},ns=o("[48] QuadsNotTriples"),is=function(e,t){var r=[];if(null!=t)for(var n=0;n<t.triplesContext.length;n++){var i=t.triplesContext[n];i.graph=e,r.push(i)}return{token:"quadsnottriples",quadsContext:r}},os=o("[49] TriplesTemplate"),as=function(e,t){var r=e.triplesContext;return null!=t&&"object"==typeof t&&null!=t.length&&null!=t[3]&&null!=t[3].triplesContext&&(r=r.concat(t[3].triplesContext)),{token:"triplestemplate",triplesContext:r}},ss=o("[50] GroupGraphPattern"),ls=function(e){return e},us=o("[51] GroupGraphPatternSub"),cs=function(e,t){var r=[];null!=e&&e!=[]&&r.push(e);for(var n=0;n<t.length;n++)for(var i=0;i<t[n].length;i++)null!=t[n][i]&&null!=t[n][i].token&&r.push(t[n][i]);for(var o=[],a=[],s=[],l=[],n=0;n<r.length;n++)if("triplespattern"!==r[n].token&&"filter"!==r[n].token&&"bind"!==r[n].token){if(0!=a.length||0!=s.length){for(var u=[],i=0;i<a.length;i++)u=u.concat(a[i].triplesContext);u.length>0&&o.push({token:"basicgraphpattern",triplesContext:u}),a=[]}o.push(r[n])}else"triplespattern"===r[n].token?a.push(r[n]):"bind"===r[n].token?l.push(r[n]):s.push(r[n]);if(0!=a.length||0!=s.length){for(var u=[],i=0;i<a.length;i++)u=u.concat(a[i].triplesContext);u.length>0&&o.push({token:"basicgraphpattern",triplesContext:u})}return{token:"groupgraphpattern",patterns:o,filters:s,binds:l}},ps=o("[54] TriplesBlock"),ds=function(e,t){var r=e.triplesContext;return null!=t&&"object"==typeof t&&null!=t&&null!=t.length&&null!=t[2]&&null!=t[2].triplesContext&&(r=r.concat(t[2].triplesContext)),{token:"triplespattern",triplesContext:r}},fs=o("[53] GraphPatternNotTriples"),hs=o("[54] OptionalGraphPattern"),gs="OPTIONAL",vs=n("OPTIONAL",!1),ms="optional",ys=n("optional",!1),bs=function(e){return{token:"optionalgraphpattern",value:e}},Es=o("[55] GraphGraphPattern"),xs=function(e,t){for(var r=0;r<t.patterns.length;r++)for(var n=t.patterns[r],i=0;i<n.triplesContext.length;i++){var o=n.triplesContext[i];o.graph=e}return t.token="groupgraphpattern",t},Ss=o("[56] ServiceGraphPattern"),Cs="SERVICE",ws=n("SERVICE",!1),Ts=function(e,t){return{token:"servicegraphpattern",status:"todo",value:[e,t]}},As=o("[57] MinusGraphPattern"),Is="MINUS",Ls=n("MINUS",!1),Ns="minus",Rs=n("minus",!1),_s=function(e){return{token:"minusgraphpattern",status:"todo",value:e}},ks=o("[58] GroupOrUnionGraphPattern"),Os="UNION",Ps=n("UNION",!1),Ds="union",Fs=n("union",!1),Ms=function(e,t){if(0===t.length)return e;for(var r={token:"graphunionpattern",value:[e]},n=0;n<t.length;n++)if(n==t.length-1)r.value.push(t[n][3]);else{r.value.push(t[n][3]);var i={token:"graphunionpattern",value:[r]};r=i}return r},js=o("[59] Filter"),$s="FILTER",Gs=n("FILTER",!1),Bs="filter",Hs=n("filter",!1),Us=function(e){return{token:"filter",value:e}},Vs=o("[60] Bind"),qs="BIND",zs=n("BIND",!1),Qs="bind",Ws=n("bind",!1),Xs=function(e,t){return{token:"bind",expression:e,as:t}},Ys=o("[60] Constraint"),Ks=o("[61] InlineData"),Js=function(e){return e},Zs=o("[62] DataBlock"),el=o("[63] InlineDataOneVar"),tl=function(e,t){return{token:"inlineData",values:[{var:e,value:t}]}},rl=o("[64] InlineDataFull"),nl=function(e,t){return{token:"inlineData",values:[],todo:!0}},il=o("[65] DataBlockValue"),ol=o("[61] FunctionCall"),al=function(e,t){var r={};return r.token="expression",r.expressionType="irireforfunction",r.iriref=e,r.args=t.value,r},sl=o("[62] ArgList"),ll=function(){var e={};return e.token="args",e.value=[],e},ul=",",cl=n(",",!1),pl=function(e,t,r){for(var n=[],i=0;i<r.length;i++)n.push(r[i][2]);var o={};return o.token="args",o.value=[t].concat(n),null!=e&&"DISTINCT"===e.toUpperCase()?o.distinct=!0:o.distinct=!1,o},dl=o("[63] ExpressionList"),fl=function(e,t){for(var r=[],n=0;n<t.length;n++)r.push(t[n][2]);var i={};return i.token="args",i.value=[e].concat(r),i},hl=o("[64] ConstructTemplate"),gl=function(e){return e},vl=o("[65] ConstructTriples"),ml=function(e,t){var r=e.triplesContext;return null!=t&&"object"==typeof t&&null!=t.length&&null!=t[3]&&null!=t[3].triplesContext&&(r=r.concat(t[3].triplesContext)),{token:"triplestemplate",triplesContext:r}},yl=o("[66] TriplesSameSubject"),bl=function(e,t){var r=t.triplesContext,n=e;if(t.pairs)for(var i=0;i<t.pairs.length;i++){var o=t.pairs[i],a=null;null!=o[1].length&&(o[1]=o[1][0]),n.token&&"triplesnodecollection"===n.token?(a={subject:n.chainSubject[0],predicate:o[0],object:o[1]},r.push(a),r=r.concat(n.triplesContext)):(a={subject:n,predicate:o[0],object:o[1]},r.push(a))}var s={};return s.token="triplessamesubject",s.triplesContext=r,s.chainSubject=n,s},El=function(e,t){var r=e.triplesContext,n=e.chainSubject;if(t.pairs)for(var i=0;i<t.pairs.length;i++){var o=t.pairs[i];if(null!=o[1].length&&(o[1]=o[1][0]),"triplesnodecollection"===e.token)for(var a=0;a<n.length;a++){var s=n[a];if(null!=s.triplesContext){var l={subject:s.chainSubject,predicate:o[0],object:o[1]};r.concat(s.triplesContext)}else{var l={subject:n[a],predicate:o[0],object:o[1]};r.push(l)}}else{var l={subject:n,predicate:o[0],object:o[1]};r.push(l)}}var u={};return u.token="triplessamesubject",u.triplesContext=r,u.chainSubject=n,u},xl=o("[83] PropertyListPathNotEmpty"),Sl=function(e,t,r){var n={};n.token="propertylist";for(var i=[],o=[],a=0;a<t.length;a++)null!=t[a].triplesContext?(i=i.concat(t[a].triplesContext),"triplesnodecollection"===t[a].token&&null!=t[a].chainSubject.length?o.push([e,t[a].chainSubject[0]]):o.push([e,t[a].chainSubject])):o.push([e,t[a]]);for(var a=0;a<r.length;a++)for(var s=r[a][3],l=s[0],u=s[2]||[],c=0;c<u.length;c++)null!=u[c].triplesContext?(i=i.concat(u[c].triplesContext),o.push([l,u[c].chainSubject])):o.push([l,u[c]]);return n.pairs=o,n.triplesContext=i,n},Cl=o("[67] PropertyListNotEmpty"),wl=function(e,t,r){var n={};n.token="propertylist";for(var i=[],o=[],a=0;a<t.length;a++)null!=t[a].triplesContext?(i=i.concat(t[a].triplesContext),"triplesnodecollection"===t[a].token&&null!=t[a].chainSubject.length?o.push([e,t[a].chainSubject[0]]):o.push([e,t[a].chainSubject])):o.push([e,t[a]]);for(var a=0;a<r.length;a++)for(var s=r[a][3],l=s[0],u=s[2]||[],c=0;c<u.length;c++)null!=u[c].triplesContext?(i=i.concat(u[c].triplesContext),o.push([l,u[c].chainSubject])):o.push([l,u[c]]);return n.pairs=o,n.triplesContext=i,n},Tl=o("[68] PropertyList"),Al=o("[86] ObjectListPath"),Il=function(e,t){var r=[];r.push(e);for(var n=0;n<t.length;n++)for(var i=0;i<t[n].length;i++)"object"==typeof t[n][i]&&null!=t[n][i].token&&r.push(t[n][i]);return r},Ll=o("[69] ObjectList"),Nl=function(e,t){var r=[];r.push(e);for(var n=0;n<t.length;n++)for(var i=0;i<t[n].length;i++)"object"==typeof t[n][i]&&null!=t[n][i].token&&r.push(t[n][i]);return r},Rl=o("[87] ObjectPath"),_l=o("[70] Object"),kl=o("[71] Verb"),Ol="a",Pl=n("a",!1),Dl=function(){return{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"}},Fl=o("[72] TriplesSameSubjectPath"),Ml=function(e,t){var r=t.triplesContext,n=e;if(t.pairs)for(var i=0;i<t.pairs.length;i++){var o=t.pairs[i],a=null;null!=o[1].length&&(o[1]=o[1][0]),n.token&&"triplesnodecollection"===n.token?(a={subject:n.chainSubject[0],predicate:o[0],object:o[1]},"path"===a.predicate.token&&"element"===a.predicate.kind&&(a.predicate=a.predicate.value),r.push(a),r=r.concat(n.triplesContext)):(a={subject:n,predicate:o[0],object:o[1]},"path"===a.predicate.token&&"element"===a.predicate.kind&&(a.predicate=a.predicate.value),r.push(a))}var s={};return s.token="triplessamesubject",s.triplesContext=r,s.chainSubject=n,s},jl=function(e,t){var r=e.triplesContext,n=e.chainSubject;if(null!=t&&null!=t.pairs)for(var i=0;i<t.pairs.length;i++){var o=t.pairs[i];if(null!=o[1].length&&(o[1]=o[1][0]),"triplesnodecollection"===e.token)for(var a=0;a<n.length;a++){var s=n[a];if(null!=s.triplesContext){var l={subject:s.chainSubject,predicate:o[0],object:o[1]};r.concat(s.triplesContext)}else{var l={subject:n[a],predicate:o[0],object:o[1]};r.push(l)}}else{var l={subject:n,predicate:o[0],object:o[1]};r.push(l)}}var u={};return u.token="triplessamesubject",u.triplesContext=r,u.chainSubject=n,u},$l=o("[73] PropertyListNotEmptyPath"),Gl=function(e,t,r){var n={};n.token="propertylist";for(var i=[],o=[],a=0;a<t.length;a++)null!=t[a].triplesContext?(i=i.concat(t[a].triplesContext),"triplesnodecollection"===t[a].token&&null!=t[a].chainSubject.length?o.push([e,t[a].chainSubject[0]]):o.push([e,t[a].chainSubject])):o.push([e,t[a]]);for(var a=0;a<r.length;a++)for(var s=r[a][3],l=s[0],u=s[1]||[],c=0;c<u.length;c++)null!=u[c].triplesContext?(i=i.concat(u[c].triplesContext),o.push([l,u[c].chainSubject])):o.push([l,u[c]]);return n.pairs=o,n.triplesContext=i,n},Bl=o("[74] PropertyListPath"),Hl=o("[75]"),Ul=function(e){var t={};return t.token="path",t.kind="element",t.value=e,e},Vl=o("[76] VerbSimple"),ql=o("[77] Path"),zl=o("[78] PathAlternative"),Ql="|",Wl=n("|",!1),Xl=function(e,t){if(null==t||0===t.length)return e;for(var r=[],n=0;n<t.length;n++)r.push(t[1]);var i={};return i.token="path",i.kind="alternative",i.value=r,i},Yl=o("[79] PathSequence"),Kl="/",Jl=n("/",!1),Zl=function(e,t){if(null==t||0===t.length)return e;for(var r=[e],n=0;n<t.length;n++)r.push(t[n][1]);var i={};return i.token="path",i.kind="sequence",i.value=r,i},eu=o("[88] PathElt"),tu=function(e,t){if(e.token&&"path"!=e.token&&""==t)return e;if(e.token&&e.token!=r&&""!=t){var r={};return r.token="path",r.kind="element",r.value=e,r.modifier=t,r}return e.modifier=t,e},ru=o("[81] PathEltOrInverse"),nu="^",iu=n("^",!1),ou=function(e){var t={};return t.token="path",t.kind="inversePath",t.value=e,t},au=o("[82] PathMod"),su="?",lu=n("?",!1),uu="+",cu=n("+",!1),pu=o("[83] PathPrimary"),du="!",fu=n("!",!1),hu=o("[85] PathOneInPropertySet"),gu=o("[86] Integer"),vu=o("[100] TriplesNodePath"),mu=function(e){for(var t=[],r=[],n=null,i=0;i<e.length;i++){rm++;var o=null;null==e[i].chainSubject&&null==e[i].triplesContext?o=e[i]:(o=e[i].chainSubject,t=t.concat(e[i].triplesContext)),n={subject:{token:"blank",value:"_:"+rm},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first"},object:o},0==i&&r.push(n.subject),t.push(n),n=i===e.length-1?{subject:{token:"blank",value:"_:"+rm},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}:{subject:{token:"blank",value:"_:"+rm},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"blank",value:"_:"+(rm+1)}},t.push(n)}return{token:"triplesnodecollection",triplesContext:t,chainSubject:r}},yu=o("[87] TriplesNode"),bu=function(e){for(var t=[],r=[],n=null,i=0;i<e.length;i++){rm++;var o=null;null==e[i].chainSubject&&null==e[i].triplesContext?o=e[i]:(o=e[i].chainSubject,t=t.concat(o.triplesContext)),n={subject:{token:"blank",value:"_:"+rm},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first"},object:o},0==i&&r.push(n.subject),t.push(n),n=i===e.length-1?{subject:{token:"blank",value:"_:"+rm},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}:{subject:{token:"blank",value:"_:"+rm},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"blank",value:"_:"+(rm+1)}},t.push(n)}return{token:"triplesnodecollection",triplesContext:t,chainSubject:r}},Eu=o("[101] BlankNodePropertyListPath"),xu="[",Su=n("[",!1),Cu="]",wu=n("]",!1),Tu=function(e){rm++;for(var t={token:"blank",value:"_:"+rm},r=[],n=0;n<e.pairs.length;n++){var i=e.pairs[n],o={};o.subject=t,o.predicate=i[0],null!=i[1].length&&(i[1]=i[1][0]),o.object=i[1],r.push(o)}return{token:"triplesnode",kind:"blanknodepropertylist",triplesContext:e.triplesContext.concat(r),chainSubject:t}},Au=o("[88] BlankNodePropertyList"),Iu=function(e){rm++;for(var t={token:"blank",value:"_:"+rm},r=[],n=0;n<e.pairs.length;n++){var i=e.pairs[n],o={};o.subject=t,o.predicate=i[0],null!=i[1].length&&(i[1]=i[1][0]),o.object=i[1],r.push(o)}return{token:"triplesnode",kind:"blanknodepropertylist",triplesContext:e.triplesContext.concat(r),chainSubject:t}},Lu=o("[103] CollectionPath"),Nu=function(e){return e},Ru=o("[89] Collection"),_u=o("[105] GraphNodePath"),ku=function(e){return e[1]},Ou=o("[90] GraphNode"),Pu=o("[91] VarOrTerm"),Du=o("[92] VarOrIRIref"),Fu=o("[93] Var"),Mu=function(e){var t={};return t.token="var",t.value=e,t},ju=o("[94] GraphTerm"),$u=o("[95] Expression"),Gu=o("[96] ConditionalOrExpression"),Bu="||",Hu=n("||",!1),Uu=function(e,t){if(0===t.length)return e;var r={};r.token="expression",r.expressionType="conditionalor";for(var n=[e],i=0;i<t.length;i++)n.push(t[i][3]);return r.operands=n,r},Vu=o("[97] ConditionalAndExpression"),qu="&&",zu=n("&&",!1),Qu=function(e,t){if(0===t.length)return e;var r={};r.token="expression",r.expressionType="conditionaland";for(var n=[e],i=0;i<t.length;i++)n.push(t[i][3]);return r.operands=n,r},Wu=o("[98] ValueLogical"),Xu=o("[99] RelationalExpression"),Yu="=",Ku=n("=",!1),Ju="!=",Zu=n("!=",!1),ec="<",tc=n("<",!1),rc=">",nc=n(">",!1),ic="<=",oc=n("<=",!1),ac=">=",sc=n(">=",!1),lc="I",uc=n("I",!1),cc="i",pc=n("i",!1),dc="N",fc=n("N",!1),hc="n",gc=n("n",!1),vc="O",mc=n("O",!1),yc="o",bc=n("o",!1),Ec="T",xc=n("T",!1),Sc="t",Cc=n("t",!1),wc=function(e,t){if(0===t.length)return e;if("i"===t[0][1]||"I"===t[0][1]||"n"===t[0][1]||"N"===t[0][1]){var r={};if("i"===t[0][1]||"I"===t[0][1]){var n="=";r.expressionType="conditionalor"}else{var n="!=";r.expressionType="conditionaland"}for(var i=e,o=[],a=0;a<t[0].length;a++)if("args"===t[0][a].token){o=t[0][a].value;break}r.token="expression",r.operands=[];for(var s=0;s<o.length;s++){var l={};l.token="expression",l.expressionType="relationalexpression",l.operator=n,l.op1=i,l.op2=o[s],r.operands.push(l)}return r}var r={};return r.expressionType="relationalexpression",r.operator=t[0][1],r.op1=e,r.op2=t[0][3],r.token="expression",r},Tc=o("[100] NumericExpression"),Ac=o("[101] AdditiveExpression"),Ic="-",Lc=n("-",!1),Nc=function(e,t){if(0===t.length)return e;var r={};r.token="expression",r.expressionType="additiveexpression",r.summand=e,r.summands=[];for(var n=0;n<t.length;n++){var i=t[n],o={};if(4==i.length&&"string"==typeof i[1])o.operator=i[1],o.expression=i[3];else{var a={},s=o[0],l=(o[1][1],o[1][3]);s.value<0?(o.operator="-",s.value=-s.value):o.operator="+",a.token="expression",a.expressionType="multiplicativeexpression",a.operator=s,a.factors=[{operator:null,expression:l}],o.expression=a}r.summands.push(o)}return r},Rc=o("[102] MultiplicativeExpression"),_c=function(e,t){if(0===t.length)return e;var r={};r.token="expression",r.expressionType="multiplicativeexpression",r.factor=e,r.factors=[];for(var n=0;n<t.length;n++){var i=t[n],o={};o.operator=i[1],o.expression=i[3],r.factors.push(o)}return r},kc=o("[103] UnaryExpression"),Oc=function(e){var t={};return t.token="expression",t.expressionType="unaryexpression",t.unaryexpression="!",t.expression=e,t},Pc=function(e){var t={};return t.token="expression",t.expressionType="unaryexpression",t.unaryexpression="+",t.expression=e,t},Dc=function(e){var t={};return t.token="expression",t.expressionType="unaryexpression",t.unaryexpression="-",t.expression=e,t},Fc=o("[104] PrimaryExpression"),Mc=function(e){var t={};return t.token="expression",t.expressionType="atomic",t.primaryexpression="rdfliteral",t.value=e,t},jc=function(e){var t={};return t.token="expression",t.expressionType="atomic",t.primaryexpression="numericliteral",t.value=e,t},$c=function(e){var t={};return t.token="expression",t.expressionType="atomic",t.primaryexpression="booleanliteral",t.value=e,t},Gc=function(e){var t={};return t.token="expression",t.expressionType="atomic",t.primaryexpression="var",t.value=e,t},Bc=o("[105] BrackettedExpression"),Hc=function(e){return e},Uc=o("[106] BuiltInCall"),Vc="STR",qc=n("STR",!1),zc="str",Qc=n("str",!1),Wc=function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="str",t.args=[e],t},Xc="LANG",Yc=n("LANG",!1),Kc="lang",Jc=n("lang",!1),Zc=function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="lang",t.args=[e],t},ep="LANGMATCHES",tp=n("LANGMATCHES",!1),rp="langmatches",np=n("langmatches",!1),ip=function(e,t){var r={};return r.token="expression",r.expressionType="builtincall",r.builtincall="langmatches",r.args=[e,t],r},op="DATATYPE",ap=n("DATATYPE",!1),sp="datatype",lp=n("datatype",!1),up=function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="datatype",t.args=[e],t},cp="BOUND",pp=n("BOUND",!1),dp="bound",fp=n("bound",!1),hp=function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="bound",t.args=[e],t},gp="IRI",vp=n("IRI",!1),mp="iri",yp=n("iri",!1),bp=function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="iri",t.args=[e],t},Ep="URI",xp=n("URI",!1),Sp="uri",Cp=n("uri",!1),wp=function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="uri",t.args=[e],t},Tp="BNODE",Ap=n("BNODE",!1),Ip="bnode",Lp=n("bnode",!1),Np=function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="bnode",5===e.length?t.args=[e[2]]:t.args=null,t},Rp="COALESCE",_p=n("COALESCE",!1),kp="coalesce",Op=n("coalesce",!1),Pp=function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="coalesce",t.args=e,t},Dp="IF",Fp=n("IF",!1),Mp="if",jp=n("if",!1),$p=function(e,t,r){var n={};return n.token="expression",n.expressionType="builtincall",n.builtincall="if",n.args=[e,t,r],n},Gp="ISLITERAL",Bp=n("ISLITERAL",!1),Hp="isliteral",Up=n("isliteral",!1),Vp="isLITERAL",qp=n("isLITERAL",!1),zp=function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="isliteral",t.args=[e],t},Qp="ISBLANK",Wp=n("ISBLANK",!1),Xp="isblank",Yp=n("isblank",!1),Kp="isBLANK",Jp=n("isBLANK",!1),Zp=function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="isblank",t.args=[e],t},ed="SAMETERM",td=n("SAMETERM",!1),rd="sameterm",nd=n("sameterm",!1),id=function(e,t){var r={};return r.token="expression",r.expressionType="builtincall",r.builtincall="sameterm",r.args=[e,t],r},od="ISURI",ad=n("ISURI",!1),sd="isuri",ld=n("isuri",!1),ud="isURI",cd=n("isURI",!1),pd="ISIRI",dd=n("ISIRI",!1),fd="isiri",hd=n("isiri",!1),gd="isIRI",vd=n("isIRI",!1),md=function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="isuri",t.args=[e],t},yd="custom:",bd=n("custom:",!1),Ed="CUSTOM:",xd=n("CUSTOM:",!1),Sd=/^[a-zA-Z0-9_]/,Cd=i([["a","z"],["A","Z"],["0","9"],"_"],!1,!1),wd=function(e,t,r){var n={};n.token="expression",n.expressionType="custom",n.name=e.join("");for(var i=[],o=0;o<t.length;o++)i.push(t[o][1]);return i.push(r),n.args=i,n},Td=o("[107] RegexExpression"),Ad="REGEX",Id=n("REGEX",!1),Ld="regex",Nd=n("regex",!1),Rd=function(e,t,r){var n={};return n.token="expression",n.expressionType="regex",n.text=e,n.pattern=t,null!=r&&(n.flags=r[2]),n},_d=o("[108] ExistsFunc"),kd="EXISTS",Od=n("EXISTS",!1),Pd="exists",Dd=n("exists",!1),Fd=function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="exists",t.args=[e],t},Md=o("[109] NotExistsFunc"),jd="NOT",$d=n("NOT",!1),Gd="not",Bd=n("not",!1),Hd=function(e){var t={};return t.token="expression",t.expressionType="builtincall",t.builtincall="notexists",t.args=[e],t},Ud=o("[110] Aggregate"),Vd="COUNT",qd=n("COUNT",!1),zd="count",Qd=n("count",!1),Wd=function(e,t){var r={};return r.token="expression",r.expressionType="aggregate",r.aggregateType="count",r.distinct=""!=e&&null!=e?"DISTINCT":e,r.expression=t,r},Xd="GROUP_CONCAT",Yd=n("GROUP_CONCAT",!1),Kd="group_concat",Jd=n("group_concat",!1),Zd="SEPARATOR",ef=n("SEPARATOR",!1),tf=function(e,t,r){var n={};return n.token="expression",n.expressionType="aggregate",n.aggregateType="group_concat",n.distinct=""!=e&&null!=e?"DISTINCT":e,n.expression=t,n.separator=r,n},rf="SUM",nf=n("SUM",!1),of="sum",af=n("sum",!1),sf=function(e,t){var r={};return r.token="expression",r.expressionType="aggregate",r.aggregateType="sum",r.distinct=""!=e&&null!=e?"DISTINCT":e,r.expression=t,r},lf="MIN",uf=n("MIN",!1),cf="min",pf=n("min",!1),df=function(e,t){var r={};return r.token="expression",r.expressionType="aggregate",r.aggregateType="min",r.distinct=""!=e&&null!=e?"DISTINCT":e,r.expression=t,r},ff="MAX",hf=n("MAX",!1),gf="max",vf=n("max",!1),mf=function(e,t){var r={};return r.token="expression",r.expressionType="aggregate",r.aggregateType="max",r.distinct=""!=e&&null!=e?"DISTINCT":e,r.expression=t,r},yf="AVG",bf=n("AVG",!1),Ef="avg",xf=n("avg",!1),Sf=function(e,t){var r={};return r.token="expression",r.expressionType="aggregate",r.aggregateType="avg",r.distinct=""!=e&&null!=e?"DISTINCT":e,r.expression=t,r},Cf=o("[117] IRIrefOrFunction"),wf=function(e,t){var r={};return r.token="expression",r.expressionType="irireforfunction",r.iriref=e,r.args=null!=t?t.value:t,r},Tf=o("[112] RDFLiteral"),Af="^^",If=n("^^",!1),Lf=function(e,t){return"string"==typeof t&&t.length>0?{token:"literal",value:e.value,lang:t.slice(1),type:null}:null!=t&&"object"==typeof t?(t.shift(),{token:"literal",value:e.value,lang:null,type:t[0]}):{token:"literal",value:e.value,lang:null,type:null}},Nf=o("[113] NumericLiteral"),Rf=o("[114] NumericLiteralUnsigned"),_f=o("[115] NumericLiteralPositive"),kf=o("[116] NumericLiteralNegative"),Of=o("[117] BooleanLiteral"),Pf="TRUE",Df=n("TRUE",!1),Ff="true",Mf=n("true",!1),jf=function(){var e={};return e.token="literal",e.lang=null,e.type="http://www.w3.org/2001/XMLSchema#boolean",e.value=!0,e},$f="FALSE",Gf=n("FALSE",!1),Bf="false",Hf=n("false",!1),Uf=function(){var e={};return e.token="literal",e.lang=null,e.type="http://www.w3.org/2001/XMLSchema#boolean",e.value=!1,e},Vf=o("[118] String"),qf=function(e){return{token:"string",value:e}},zf=o("[119] IRIref"),Qf=function(e){return{token:"uri",prefix:null,suffix:null,value:e}},Wf=function(e){return e},Xf=o("[120] PrefixedName"),Yf=function(e){return{token:"uri",prefix:e[0],suffix:e[1],value:null}},Kf=function(e){return{token:"uri",prefix:e,suffix:"",value:null}},Jf=o("[121] BlankNode"),Zf=function(e){return{token:"blank",value:e}},eh=function(){return rm++,{token:"blank",value:"_:"+rm}},th=o("[122] IRI_REF"),rh=/^[^<>"{}|\^`\\]/,nh=i(["<",">",'"',"{","}","|","^","`","\\"],!0,!1),ih=function(e){return e.join("")},oh=o("[123] PNAME_NS"),ah=":",sh=n(":",!1),lh=o("[124] PNAME_LN"),uh=function(e,t){return[e,t]},ch=o("[125] BLANK_NODE_LABEL"),ph="_:",dh=n("_:",!1),fh=function(e){return e},hh=o("[126] VAR1"),gh=function(e){return e},vh=o("[127] VAR2"),mh="$",yh=n("$",!1),bh=o("[128] LANGTAG"),Eh="@",xh=n("@",!1),Sh=/^[a-zA-Z]/,Ch=i([["a","z"],["A","Z"]],!1,!1),wh=/^[a-zA-Z0-9]/,Th=i([["a","z"],["A","Z"],["0","9"]],!1,!1),Ah=function(e,t){return 0===t.length?("@"+e.join("")).toLowerCase():("@"+e.join("")+"-"+t[0][1].join("")).toLowerCase()},Ih=o("[129] INTEGER"),Lh=/^[0-9]/,Nh=i([["0","9"]],!1,!1),Rh=function(e){var t={};return t.token="literal",t.lang=null,t.type="http://www.w3.org/2001/XMLSchema#integer",t.value=tm(e),t},_h=o("[130] DECIMAL"),kh=function(e,t,r){var n={};return n.token="literal",n.lang=null,n.type="http://www.w3.org/2001/XMLSchema#decimal",n.value=tm([e,t,r]),n},Oh=function(e,t){var r={};return r.token="literal",r.lang=null,r.type="http://www.w3.org/2001/XMLSchema#decimal",r.value=tm([e,t]),r},Ph=o("[131] DOUBLE"),Dh=function(e,t,r,n){var i={};return i.token="literal",i.lang=null,i.type="http://www.w3.org/2001/XMLSchema#double",i.value=tm([e,t,r,n]),i},Fh=function(e,t,r){var n={};return n.token="literal",n.lang=null,n.type="http://www.w3.org/2001/XMLSchema#double",n.value=tm([e,t,r]),n},Mh=function(e,t){var r={};return r.token="literal",r.lang=null,r.type="http://www.w3.org/2001/XMLSchema#double",r.value=tm([e,t]),r},jh=o("[132] INTEGER_POSITIVE"),$h=function(e){return e.value="+"+e.value,e},Gh=o("[133] DECIMAL_POSITIVE"),Bh=function(e){return e.value="+"+e.value,e},Hh=o("[134] DOUBLE_POSITIVE"),Uh=o("[135] INTEGER_NEGATIVE"),Vh=function(e){return e.value="-"+e.value,e},qh=o("[136] DECIMAL_NEGATIVE"),zh=o("[137] DOUBLE_NEGATIVE"),Qh=o("[138] EXPONENT"),Wh=/^[eE]/,Xh=i(["e","E"],!1,!1),Yh=/^[+\-]/,Kh=i(["+","-"],!1,!1),Jh=function(e,t,r){return tm([e,t,r])},Zh=o("[139] STRING_LITERAL1"),eg="'",tg=n("'",!1),rg=/^[^'\\\n\r]/,ng=i(["'","\\","\n","\r"],!0,!1),ig=function(e){return tm(e)},og=o("[140] STRING_LITERAL2"),ag='"',sg=n('"',!1),lg=/^[^"\\\n\r]/,ug=i(['"',"\\","\n","\r"],!0,!1),cg=o("[141] STRING_LITERAL_LONG1"),pg="'''",dg=n("'''",!1),fg=/^[^'\\]/,hg=i(["'","\\"],!0,!1),gg=o("[142] STRING_LITERAL_LONG2"),vg='"""',mg=n('"""',!1),yg=/^[^"\\]/,bg=i(['"',"\\"],!0,!1),Eg=o("[143] ECHAR"),xg="\\",Sg=n("\\",!1),Cg=/^[tbnrf"']/,wg=i(["t","b","n","r","f",'"',"'"],!1,!1),Tg=o("[144] NIL"),Ag=function(){return{token:"triplesnodecollection",triplesContext:[],chainSubject:[{token:"uri",value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}]}},Ig=o("[145] WS"),Lg=/^[ ]/,Ng=i([" "],!1,!1),Rg=/^[\t]/,_g=i(["\t"],!1,!1),kg=/^[\r]/,Og=i(["\r"],!1,!1),Pg=/^[\n]/,Dg=i(["\n"],!1,!1),Fg=o(" COMMENT"),Mg="#",jg=n("#",!1),$g=/^[^\n\r]/,Gg=i(["\n","\r"],!0,!1),Bg=o("[146] ANON"),Hg=o("[147] PN_CHARS_BASE"),Ug=/^[A-Z]/,Vg=i([["A","Z"]],!1,!1),qg=/^[a-z]/,zg=i([["a","z"]],!1,!1),Qg=/^[\xC0-\xD6]/,Wg=i([["",""]],!1,!1),Xg=/^[\xD8-\xF6]/,Yg=i([["",""]],!1,!1),Kg=/^[\xF8-\u02FF]/,Jg=i([["",""]],!1,!1),Zg=/^[\u0370-\u037D]/,ev=i([["",""]],!1,!1),tv=/^[\u037F-\u1FFF]/,rv=i([["",""]],!1,!1),nv=/^[\u200C-\u200D]/,iv=i([["",""]],!1,!1),ov=/^[\u2070-\u218F]/,av=i([["",""]],!1,!1),sv=/^[\u2C00-\u2FEF]/,lv=i([["",""]],!1,!1),uv=/^[\u3001-\uD7FF]/,cv=i([["",""]],!1,!1),pv=/^[\uF900-\uFDCF]/,dv=i([["",""]],!1,!1),fv=/^[\uFDF0-\uFFFD]/,hv=i([["",""]],!1,!1),gv=/^[\u1000-\uEFFF]/,vv=i([["",""]],!1,!1),mv=o("[148] PN_CHARS_U"),yv="_",bv=n("_",!1),Ev=o("[149] VARNAME"),xv=/^[\xB7]/,Sv=i([""],!1,!1),Cv=/^[\u0300-\u036F]/,wv=i([["",""]],!1,!1),Tv=/^[\u203F-\u2040]/,Av=i([["",""]],!1,!1),Iv=function(e,t){return e+t.join("")},Lv=o("[150] PN_CHARS"),Nv=o("[151] PN_PREFIX"),Rv=function(e,t){if("."==t[t.length-1])throw new Error("Wrong PN_PREFIX, cannot finish with '.'");return e+t.join("")},_v=o("[152] PN_LOCAL"),kv=function(e,t){return e+(t||[]).join("")},Ov=o("[170] PLX"),Pv=o("[171] PERCENT"),Dv="%",Fv=n("%",!1),Mv=function(e){return e.join("")},jv=o("[172] HEX"),$v=/^[A-F]/,Gv=i([["A","F"]],!1,!1),Bv=/^[a-f]/,Hv=i([["a","f"]],!1,!1),Uv=o("[173] PN_LOCAL_ESC"),Vv="~",qv=n("~",!1),zv="&",Qv=n("&",!1),Wv=function(e){return"\\"+e},Xv=0,Yv=0,Kv=[{line:1,column:1}],Jv=0,Zv=[],em=0;if("startRule"in r){if(!(r.startRule in Cr))throw new Error("Can't start parsing from rule \""+r.startRule+'".');wr=Cr[r.startRule]}var tm=function(e){for(var t="",r=0;r<e.length;r++)"string"==typeof e[r]?t+=e[r]:t+=e[r].join("");return t},rm=0,nm={},im=function(e,t){nm[e]=t},om=function(e){nm[null]=e},am=function(e){var t="";if(null==e)return null;for(var r=0;r<e.length;r++)t+=e[r];return t.toUpperCase()};if((xr=wr())!==Sr&&Xv===t.length)return xr;throw xr!==Sr&&Xv<t.length&&l(function(){return{type:"end"}}()),u(Zv,Jv<t.length?t.charAt(Jv):null,Jv<t.length?s(Jv,Jv+1):s(Jv,Jv))}return function(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}(e,Error),e.buildMessage=function(e,t){function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}function n(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}function i(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}function o(e){return a[e.type](e)}var a={literal:function(e){return'"'+n(e.text)+'"'},class:function(e){var t,r="";for(t=0;t<e.parts.length;t++)r+=e.parts[t]instanceof Array?i(e.parts[t][0])+"-"+i(e.parts[t][1]):i(e.parts[t]);return"["+(e.inverted?"^":"")+r+"]"},any:function(e){return"any character"},end:function(e){return"end of input"},other:function(e){return e.description}};return"Expected "+function(e){var t,r,n=new Array(e.length);for(t=0;t<e.length;t++)n[t]=o(e[t]);if(n.sort(),n.length>0){for(t=1,r=1;t<n.length;t++)n[t-1]!==n[t]&&(n[r]=n[t],r++);n.length=r}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}(e)+" but "+function(e){return e?'"'+n(e)+'"':"end of input"}(t)+" found."},{SyntaxError:e,parse:t}}()},function(e,t,r){var n=r(10),i=r(10),o={};o.variablesInBGP=function(e){var t=e.variables;if(t)return t;var r=e.value||e;t=[];for(var n in r)r[n]&&"var"===r[n].token?t.push(r[n].value):r[n]&&"blank"===r[n].token&&t.push("blank:"+r[n].value);return e.variables=t,t},o.connected=function(e,t){for(var r="/"+e.vars.join("/")+"/",n=0;n<t.vars.length;n++)if(-1!=r.indexOf("/"+t.vars[n]+"/"))return!0;return!1};var a=function(e,t){for(var r={},n=0;n<e.lenght;n++)r[e[n]]=1;for(n=0;n<t.length;n++){var i=r[t[n]]||0;i++,r[t[n]]=i}var o=[];for(var a in r)2==r[a]&&o.push(r[a]);return o};o.variablesIntersectionBGP=function(e,t){return a(o.variablesInBGP(e),o.variablesInBGP(t))},o.executeAndBGPsGroups=function(e){for(var t={},r={},i=0,a=0;a<e.length;a++){var s=e[a],l={},u={},c=o.variablesInBGP(s),p={};for(var d in r)!function(e,t){for(var r=0;r<e.length;r++){var n="/"+e[r]+"/";if(-1!=t.indexOf(n))return!0}return!1}(c,r[d])?(l[d]=t[d],u[d]=r[d]):p[d]=!0;0===n.size(p)?(l["g"+i]=[s],u["g"+i]="/"+c.join("/")+"/",i++):function(e,n,i,o){var a=[],s="",l="";for(var u in n)s+=u,a=a.concat(t[u]),l+=r[u];l=l+c.join("/")+"/",a.push(e),i[s]=a,o[s]=l}(s,p,l,u),t=l,r=u}return n.values(t)},o.intersectionSize=function(e,t){for(var r=t.i.split("_"),n=0;n<r.length;n++)if(""!=r[n]&&-1!=e.i.indexOf("_"+r[n]+"_"))return 1;return 0},o.createJoinTree=function(e,t){for(var r="/"+e.vars.join("/")+"/",i=e.vars.concat([]),o=[],a=0;a<t.vars.length;a++)-1!=r.indexOf("/"+t.vars[a]+"/")?0==t.vars[a].indexOf("_:")?o.push("blank:"+t.vars[a]):o.push(t.vars[a]):i.push(t.vars[a]);for(var s=t.i.split("_"),l=e.i.split("_"),u={},a=0;a<s.length;a++)""!=s[a]&&(u[s[a]]=!0);for(var a=0;a<l.length;a++)""!=l[a]&&(u[l[a]]=!0);var c=n.keys(u);return{left:e,right:t,cost:e.cost+t.cost,i:"_"+c.sort().join("_")+"_",vars:i,join:o}},o.executeBushyTree=function(e,t,r,n,i){null==e.left?o.executeEmptyJoinBGP(e.right,t,r,n,i):null==e.right?o.executeEmptyJoinBGP(e.left,t,r,n,i):o.executeBushyTree(e.left,t,r,n,function(a){null!=a?o.executeBushyTree(e.right,t,r,n,function(t){i(null!=t?o.joinBindings2(e.join,a,t):null)}):i(null)})},o.executeAndBGPsDPSize=function(e,t,r,n,a){var s=o.executeAndBGPsGroups(e),l=[];i.eachSeries(s,function(e,t){r.computeCosts(e,n,function(e){var r={},n={},i={},a=1,s=null,u={};i[1]=[];for(var c=0;c<e.length;c++){var p=[];delete e[c].variables;for(var d in e[c])"_cost"!=d&&("var"===e[c][d].token?p.push(e[c][d].value):"blank"===e[c][d].token&&p.push(e[c][d].value));n["_"+c+"_"]={left:e[c],right:null,cost:e[c]._cost,i:"_"+c+"_",vars:p};var f={left:e[c],right:null,cost:e[c]._cost,i:"_"+c+"_",vars:p};r["_"+c+"_"]=f,delete e[c]._cost,u["_"+c+"_"]=!0,i[1].push("_"+c+"_"),(null==s||s.cost>f.cost)&&(s=f)}for(var h=2;h<=e.length;h++)for(var g=1;g<h;g++)for(var v=h-g,m=i[""+g]||[],y=i[""+v]||[],c=0;c<m.length;c++)for(var b=0;b<y.length;b++)if(m[c]!==y[b]){var E=n[m[c]],x=n[y[b]];if(0==o.intersectionSize(E,x)&&o.connected(E,x)){a=h;var S=r[E.i],C=r[x.i],w=o.createJoinTree(S,C);if(!u[w.i]){u[w.i]=!0;var T=w.cost+1;null!=r[w.i]&&(T=r[w.i].cost);var A=i[h]||[];A.push(w.i),n[w.i]=w,i[h]=A,T>w.cost&&(a===h&&(s=w),r[w.i]=w)}}}l.push(s),t()})},function(){var e=null;i.eachSeries(l,function(i,a){o.executeBushyTree(i,t,r,n,function(t){t?null==e?(e=t,a()):(e=o.crossProductBindings(e,t),a()):a("Error executing bushy tree")})},function(t){t?a(null,t):a(e)})})},o.executeEmptyJoinBGP=function(e,t,r,n,i){return o.executeBGPDatasets(e,t,r,n,i)},o.executeBGPDatasets=function(e,t,r,n,a){var s={};if(null==e.graph){var l=[];i.eachSeries(t.implicit,function(t,i){null==s[t.oid]?(s[t.oid]=!0,e.graph=t,r.rangeQuery(e,n,function(t){t=o.buildBindingsFromRange(t,e),l.push(t),i()})):i()},function(){var e=o.unionManyBindings(l);a(e)})}else if("var"===e.graph.token){var u=e.graph.value,l=[];i.eachSeries(t.named,function(t,i){null==s[t.oid]?(s[t.oid]=!0,e.graph=t,null!=l?r.rangeQuery(e,n,function(r){if(null!=r){r=o.buildBindingsFromRange(r,e);for(var n=0;n<r.length;n++)r[n][u]=t.oid;l.push(r)}else l=null;i()}):i()):i()},function(){if(null==l)a(null);else{var e=o.unionManyBindings(l);a(e)}})}else r.rangeQuery(e,n,function(t){null!=t?(t=o.buildBindingsFromRange(t,e),a(t)):a(null)})},o.buildBindingsFromRange=function(e,t){o.variablesInBGP(t);var r=t.value||t,n={};for(c in r)r[c]&&"var"===r[c].token?n[c]=r[c].value:r[c]&&"blank"===r[c].token&&(n[c]="blank:"+r[c].value);var i=[];if(null!=e)for(var a=0;a<e.length;a++){var s={},l=e[a],u=!1;for(var c in n){var p=l[c];if(null!=s[n[c]]&&s[n[c]]!==p){u=!0;break}s[n[c]]=p}u||i.push(s)}return i},o.areCompatibleBindings=function(e,t){for(var r in e)if(null!=t[r]&&t[r]!=e[r])return!1;return!0},o.mergeBindings=function(e,t){var r={};for(var n in e)r[n]=e[n];for(var n in t)r[n]=t[n];return r},o.joinBindings2=function(e,t,r){for(var n,i,a,s,l,u={},c=[],p=0;p<t.length;p++){n=t[p],l=u;for(var d=0;d<e.length;d++)i=e[d],a=n[i],d==e.length-1?(s=l[a]||[],s.push(n),l[a]=s):(s=l[a]||{},l[a]=s,l=s)}for(var p=0;p<r.length;p++){n=r[p],l=u;for(var d=0;d<e.length;d++)if(i=e[d],a=n[i],null!=l[a])if(d==e.length-1)for(var f=0;f<l[a].length;f++)c.push(o.mergeBindings(l[a][f],n));else l=l[a]}return c},o.joinBindings=function(e,t){for(var r=[],n=0;n<e.length;n++)for(var i=e[n],a=0;a<t.length;a++){var s=t[a];o.areCompatibleBindings(i,s)&&r.push(o.mergeBindings(i,s))}return r},o.augmentMissingBindings=function(e,t){for(var r in t)null==e[r]&&(e[r]=null);return e},o.leftOuterJoinBindings=function(e,t){for(var r=[],n=0;n<e.length;n++){for(var i=e[n],a=!1,s=0;s<t.length;s++){var l=t[s];o.areCompatibleBindings(i,l)&&(a=!0,r.push(o.mergeBindings(i,l)))}!1===a&&(o.augmentMissingBindings(i,l),r.push(i))}return r},o.crossProductBindings=function(e,t){for(var r=[],n=0;n<e.length;n++)for(var i=e[n],a=0;a<t.length;a++){var s=t[a];r.push(o.mergeBindings(i,s))}return r},o.unionBindings=function(e,t){return e.concat(t)},o.unionManyBindings=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];t=o.unionBindings(t,n)}return t},e.exports={QueryPlan:o}},function(e,t,r){var n=r(375).NetworkTransport,i=r(394).RVN3Parser,o=r(403).JSONLDParser,a=r(10),s=function(e){if(this.precedences=["text/turtle","text/n3","application/ld+json","application/json"],this.parsers={"text/turtle":i.parser,"text/n3":i.parser,"application/ld+json":o.parser,"application/json":o.parser},"undefined"!=typeof RDFXMLParser&&(this.precedences.push("application/rdf+xml"),this.parsers["application/rdf+xml"]=RDFXMLParser.parser),null!=e)for(var t in e.parsers)this.parsers[t]=e.parsers[t];if(e&&null!=e.precedences){this.precedences=e.precedences;for(var t in e.parsers)a.include(this.precedences,t)||this.precedences.push(t)}this.acceptHeaderValue="";for(var r=0;r<this.precedences.length;r++)this.acceptHeaderValue=0!=r?this.acceptHeaderValue+","+this.precedences[r]:this.acceptHeaderValue+this.precedences[r]};s.prototype.registerParser=function(e,t){this.parsers[e]=t,this.precedences.push(e)},s.prototype.unregisterParser=function(e){delete this.parsers[e];for(var t=[],r=0;r<this.precedences.length;r++)this.precedences[r]!=e&&t.push(this.precedences[r]);this.precedences=t},s.prototype.setAcceptHeaderPrecedence=function(e){this.precedences=e},s.prototype.load=function(e,t,r){var i=this;n.load(e,this.acceptHeaderValue,function(n,o){if(n)r(n);else{var a=o.headers["Content-Type"]||o.headers["content-type"],s=o.data;if(null!=a){a=a.split(";")[0];for(var l in i.parsers)if(-1!=l.indexOf("/")){var u=l.split("/");if("*"===u[1]){if(-1!=a.indexOf(u[0]))return i.tryToParse(i.parsers[l],t,s,{documentURI:e},r)}else{if(-1!=a.indexOf(l))return i.tryToParse(i.parsers[l],t,s,{documentURI:e},r);if(-1!=a.indexOf(u[1]))return i.tryToParse(i.parsers[l],t,s,{documentURI:e},r)}}else if(-1!=a.indexOf(l))return i.tryToParse(i.parsers[l],t,s,{documentURI:e},r);r(new Error("Unknown media type : "+a))}else r(new Error("Uknown media type"))}})},s.prototype.loadFromFile=function(e,t,n,i){try{var o=this;r(407).readFile(n.split("file:/")[1],function(r,a){if(r)i(r);else{var a=a.toString("utf8");o.tryToParse(e,t,a,{documentURI:n},i)}})}catch(e){i(e)}},s.prototype.tryToParse=function(e,t,r,n,i){try{"string"==typeof r&&(r=a.normalizeUnicodeLiterals(r)),e.parse(r,t,n,i)}catch(e){console.log(e.message),console.log(e.stack),i(e)}},e.exports={RDFLoader:s}},function(e,t,r){if(!r(10).isWorker()){var n=r(214),i=r(393),o=r(222);NetworkTransport={load:function(e,t,r,a){var s=null==a?3:a,l=o.parse(e,!0,!0),u={host:l.host,hostname:l.hostname,method:"GET",path:l.path,headers:{host:l.hostname,Accept:t}},c=null;"http:"===l.protocol?(u.port=l.port||80,c=n):"https:"===l.protocol&&(u.port=l.port||443,c=i);var p=c.request(u,function(e){var n=e.headers,i="";if("2"==(""+e.statusCode)[0])e.on("end",function(){r(null,{headers:n,data:i})}),e.on("data",function(e){i+=e});else if("3"==(""+e.statusCode)[0])if(0==s)r(new Error("Too many redirections"));else{var o=n.Location||n.location;null!=o?NetworkTransport.load(o,t,r,s-1):r(new Error("Redirection without location header"))}else r(new Error("HTTP error: "+e.statusCode))});p.on("error",r),p.end()}},e.exports={NetworkTransport:NetworkTransport}}},function(e,t,r){(function(t,n,i){function o(e,t){return s.fetch&&t?"fetch":s.mozchunkedarraybuffer?"moz-chunked-arraybuffer":s.msstream?"ms-stream":s.arraybuffer&&e?"arraybuffer":s.vbArray&&e?"text:vbarray":"text"}function a(e){try{var t=e.status;return null!==t&&0!==t}catch(e){return!1}}var s=r(216),l=r(35),u=r(379),c=r(77),p=r(385),d=u.IncomingMessage,f=u.readyStates,h=e.exports=function(e){var r=this;c.Writable.call(r),r._opts=e,r._body=[],r._headers={},e.auth&&r.setHeader("Authorization","Basic "+new t(e.auth).toString("base64")),Object.keys(e.headers).forEach(function(t){r.setHeader(t,e.headers[t])});var n,i=!0;if("disable-fetch"===e.mode||"timeout"in e)i=!1,n=!0;else if("prefer-streaming"===e.mode)n=!1;else if("allow-wrong-content-type"===e.mode)n=!s.overrideMimeType;else{if(e.mode&&"default"!==e.mode&&"prefer-fast"!==e.mode)throw new Error("Invalid value for opts.mode");n=!0}r._mode=o(n,i),r.on("finish",function(){r._onFinish()})};l(h,c.Writable),h.prototype.setHeader=function(e,t){var r=this,n=e.toLowerCase();-1===g.indexOf(n)&&(r._headers[n]={name:e,value:t})},h.prototype.getHeader=function(e){var t=this._headers[e.toLowerCase()];return t?t.value:null},h.prototype.removeHeader=function(e){delete this._headers[e.toLowerCase()]},h.prototype._onFinish=function(){var e=this;if(!e._destroyed){var r=e._opts,o=e._headers,a=null;"GET"!==r.method&&"HEAD"!==r.method&&(a=s.blobConstructor?new n.Blob(e._body.map(function(e){return p(e)}),{type:(o["content-type"]||{}).value||""}):t.concat(e._body).toString());var l=[];if(Object.keys(o).forEach(function(e){var t=o[e].name,r=o[e].value;Array.isArray(r)?r.forEach(function(e){l.push([t,e])}):l.push([t,r])}),"fetch"===e._mode)n.fetch(e._opts.url,{method:e._opts.method,headers:l,body:a||void 0,mode:"cors",credentials:r.withCredentials?"include":"same-origin"}).then(function(t){e._fetchResponse=t,e._connect()},function(t){e.emit("error",t)});else{var u=e._xhr=new n.XMLHttpRequest;try{u.open(e._opts.method,e._opts.url,!0)}catch(t){return void i.nextTick(function(){e.emit("error",t)})}"responseType"in u&&(u.responseType=e._mode.split(":")[0]),"withCredentials"in u&&(u.withCredentials=!!r.withCredentials),"text"===e._mode&&"overrideMimeType"in u&&u.overrideMimeType("text/plain; charset=x-user-defined"),"timeout"in r&&(u.timeout=r.timeout,u.ontimeout=function(){e.emit("timeout")}),l.forEach(function(e){u.setRequestHeader(e[0],e[1])}),e._response=null,u.onreadystatechange=function(){switch(u.readyState){case f.LOADING:case f.DONE:e._onXHRProgress()}},"moz-chunked-arraybuffer"===e._mode&&(u.onprogress=function(){e._onXHRProgress()}),u.onerror=function(){e._destroyed||e.emit("error",new Error("XHR error"))};try{u.send(a)}catch(t){return void i.nextTick(function(){e.emit("error",t)})}}}},h.prototype._onXHRProgress=function(){var e=this;a(e._xhr)&&!e._destroyed&&(e._response||e._connect(),e._response._onXHRProgress())},h.prototype._connect=function(){var e=this;e._destroyed||(e._response=new d(e._xhr,e._fetchResponse,e._mode),e._response.on("error",function(t){e.emit("error",t)}),e.emit("response",e._response))},h.prototype._write=function(e,t,r){this._body.push(e),r()},h.prototype.abort=h.prototype.destroy=function(){var e=this;e._destroyed=!0,e._response&&(e._response._destroyed=!0),e._xhr&&e._xhr.abort()},h.prototype.end=function(e,t,r){var n=this;"function"==typeof e&&(r=e,e=void 0),c.Writable.prototype.end.call(n,e,t,r)},h.prototype.flushHeaders=function(){},h.prototype.setTimeout=function(){},h.prototype.setNoDelay=function(){},h.prototype.setSocketKeepAlive=function(){};var g=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"]}).call(t,r(59).Buffer,r(11),r(28))},function(e,t,r){"use strict";function n(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function i(e){return 3*e.length/4-n(e)}function o(e){var t,r,i,o,a,s=e.length;o=n(e),a=new p(3*s/4-o),r=o>0?s-4:s;var l=0;for(t=0;t<r;t+=4)i=c[e.charCodeAt(t)]<<18|c[e.charCodeAt(t+1)]<<12|c[e.charCodeAt(t+2)]<<6|c[e.charCodeAt(t+3)],a[l++]=i>>16&255,a[l++]=i>>8&255,a[l++]=255&i;return 2===o?(i=c[e.charCodeAt(t)]<<2|c[e.charCodeAt(t+1)]>>4,a[l++]=255&i):1===o&&(i=c[e.charCodeAt(t)]<<10|c[e.charCodeAt(t+1)]<<4|c[e.charCodeAt(t+2)]>>2,a[l++]=i>>8&255,a[l++]=255&i),a}function a(e){return u[e>>18&63]+u[e>>12&63]+u[e>>6&63]+u[63&e]}function s(e,t,r){for(var n,i=[],o=t;o<r;o+=3)n=(e[o]<<16)+(e[o+1]<<8)+e[o+2],i.push(a(n));return i.join("")}function l(e){for(var t,r=e.length,n=r%3,i="",o=[],a=0,l=r-n;a<l;a+=16383)o.push(s(e,a,a+16383>l?l:a+16383));return 1===n?(t=e[r-1],i+=u[t>>2],i+=u[t<<4&63],i+="=="):2===n&&(t=(e[r-2]<<8)+e[r-1],i+=u[t>>10],i+=u[t>>4&63],i+=u[t<<2&63],i+="="),o.push(i),o.join("")}t.byteLength=i,t.toByteArray=o,t.fromByteArray=l;for(var u=[],c=[],p="undefined"!=typeof Uint8Array?Uint8Array:Array,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,h=d.length;f<h;++f)u[f]=d[f],c[d.charCodeAt(f)]=f;c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,r,n,i){var o,a,s=8*i-n-1,l=(1<<s)-1,u=l>>1,c=-7,p=r?i-1:0,d=r?-1:1,f=e[t+p];for(p+=d,o=f&(1<<-c)-1,f>>=-c,c+=s;c>0;o=256*o+e[t+p],p+=d,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=n;c>0;a=256*a+e[t+p],p+=d,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,n),o-=u}return(f?-1:1)*a*Math.pow(2,o-n)},t.write=function(e,t,r,n,i,o){var a,s,l,u=8*o-i-1,c=(1<<u)-1,p=c>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:o-1,h=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),t+=a+p>=1?d/l:d*Math.pow(2,1-p),t*l>=2&&(a++,l/=2),a+p>=c?(s=0,a=c):a+p>=1?(s=(t*l-1)*Math.pow(2,i),a+=p):(s=t*Math.pow(2,p-1)*Math.pow(2,i),a=0));i>=8;e[r+f]=255&s,f+=h,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[r+f]=255&a,f+=h,a/=256,u-=8);e[r+f-h]|=128*g}},function(e,t,r){(function(e,n,i){var o=r(216),a=r(35),s=r(77),l=t.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},u=t.IncomingMessage=function(t,r,i){function a(){u.read().then(function(e){if(!l._destroyed){if(e.done)return void l.push(null);l.push(new n(e.value)),a()}}).catch(function(e){l.emit("error",e)})}var l=this;if(s.Readable.call(l),l._mode=i,l.headers={},l.rawHeaders=[],l.trailers={},l.rawTrailers=[],l.on("end",function(){e.nextTick(function(){l.emit("close")})}),"fetch"===i){l._fetchResponse=r,l.url=r.url,l.statusCode=r.status,l.statusMessage=r.statusText,r.headers.forEach(function(e,t){l.headers[t.toLowerCase()]=e,l.rawHeaders.push(t,e)});var u=r.body.getReader();a()}else{l._xhr=t,l._pos=0,l.url=t.responseURL,l.statusCode=t.status,l.statusMessage=t.statusText;if(t.getAllResponseHeaders().split(/\r?\n/).forEach(function(e){var t=e.match(/^([^:]+):\s*(.*)/);if(t){var r=t[1].toLowerCase();"set-cookie"===r?(void 0===l.headers[r]&&(l.headers[r]=[]),l.headers[r].push(t[2])):void 0!==l.headers[r]?l.headers[r]+=", "+t[2]:l.headers[r]=t[2],l.rawHeaders.push(t[1],t[2])}}),l._charset="x-user-defined",!o.overrideMimeType){var c=l.rawHeaders["mime-type"];if(c){var p=c.match(/;\s*charset=([^;])(;|$)/);p&&(l._charset=p[1].toLowerCase())}l._charset||(l._charset="utf-8")}}};a(u,s.Readable),u.prototype._read=function(){},u.prototype._onXHRProgress=function(){var e=this,t=e._xhr,r=null;switch(e._mode){case"text:vbarray":if(t.readyState!==l.DONE)break;try{r=new i.VBArray(t.responseBody).toArray()}catch(e){}if(null!==r){e.push(new n(r));break}case"text":try{r=t.responseText}catch(t){e._mode="text:vbarray";break}if(r.length>e._pos){var o=r.substr(e._pos);if("x-user-defined"===e._charset){for(var a=new n(o.length),s=0;s<o.length;s++)a[s]=255&o.charCodeAt(s);e.push(a)}else e.push(o,e._charset);e._pos=r.length}break;case"arraybuffer":if(t.readyState!==l.DONE||!t.response)break;r=t.response,e.push(new n(new Uint8Array(r)));break;case"moz-chunked-arraybuffer":if(r=t.response,t.readyState!==l.LOADING||!r)break;e.push(new n(new Uint8Array(r)));break;case"ms-stream":if(r=t.response,t.readyState!==l.LOADING)break;var u=new i.MSStreamReader;u.onprogress=function(){u.result.byteLength>e._pos&&(e.push(new n(new Uint8Array(u.result.slice(e._pos)))),e._pos=u.result.byteLength)},u.onload=function(){e.push(null)},u.readAsArrayBuffer(r)}e._xhr.readyState===l.DONE&&"ms-stream"!==e._mode&&e.push(null)}}).call(t,r(28),r(59).Buffer,r(11))},function(e,t){},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,r){e.copy(t,r)}var o=r(148).Buffer;e.exports=function(){function e(){n(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},e.prototype.concat=function(e){if(0===this.length)return o.alloc(0);if(1===this.length)return this.head.data;for(var t=o.allocUnsafe(e>>>0),r=this.head,n=0;r;)i(r.data,t,n),n+=r.data.length,r=r.next;return t},e}()},function(e,t,r){(function(e,t){!function(e,r){"use strict";function n(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var n={callback:e,args:t};return u[l]=n,s(l),l++}function i(e){delete u[e]}function o(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(r,n)}}function a(e){if(c)setTimeout(a,0,e);else{var t=u[e];if(t){c=!0;try{o(t)}finally{i(e),c=!1}}}}if(!e.setImmediate){var s,l=1,u={},c=!1,p=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?function(){s=function(e){t.nextTick(function(){a(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?function(){var t="setImmediate$"+Math.random()+"$",r=function(r){r.source===e&&"string"==typeof r.data&&0===r.data.indexOf(t)&&a(+r.data.slice(t.length))};e.addEventListener?e.addEventListener("message",r,!1):e.attachEvent("onmessage",r),s=function(r){e.postMessage(t+r,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){a(e.data)},s=function(t){e.port2.postMessage(t)}}():p&&"onreadystatechange"in p.createElement("script")?function(){var e=p.documentElement;s=function(t){var r=p.createElement("script");r.onreadystatechange=function(){a(t),r.onreadystatechange=null,e.removeChild(r),r=null},e.appendChild(r)}}():function(){s=function(e){setTimeout(a,0,e)}}(),d.setImmediate=n,d.clearImmediate=i}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,r(11),r(28))},function(e,t,r){(function(t){function r(e,t){function r(){if(!i){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),i=!0}return e.apply(this,arguments)}if(n("noDeprecation"))return e;var i=!1;return r}function n(e){try{if(!t.localStorage)return!1}catch(e){return!1}var r=t.localStorage[e];return null!=r&&"true"===String(r).toLowerCase()}e.exports=r}).call(t,r(11))},function(e,t,r){"use strict";function n(e){if(!(this instanceof n))return new n(e);i.call(this,e)}e.exports=n;var i=r(221),o=r(78);o.inherits=r(35),o.inherits(n,i),n.prototype._transform=function(e,t,r){r(null,e)}},function(e,t,r){var n=r(59).Buffer;e.exports=function(e){if(e instanceof Uint8Array){if(0===e.byteOffset&&e.byteLength===e.buffer.byteLength)return e.buffer;if("function"==typeof e.buffer.slice)return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}if(n.isBuffer(e)){for(var t=new Uint8Array(e.length),r=e.length,i=0;i<r;i++)t[i]=e[i];return t.buffer}throw new Error("Argument must be a Buffer")}},function(e,t){function r(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var i in r)n.call(r,i)&&(e[i]=r[i])}return e}e.exports=r;var n=Object.prototype.hasOwnProperty},function(e,t){e.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},function(e,t,r){(function(e,n){var i;!function(o){function a(e){throw new RangeError(k[e])}function s(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function l(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),e=e.replace(_,"."),n+s(e.split("."),t).join(".")}function u(e){for(var t,r,n=[],i=0,o=e.length;i<o;)t=e.charCodeAt(i++),t>=55296&&t<=56319&&i<o?(r=e.charCodeAt(i++),56320==(64512&r)?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--)):n.push(t);return n}function c(e){return s(e,function(e){var t="";return e>65535&&(e-=65536,t+=D(e>>>10&1023|55296),e=56320|1023&e),t+=D(e)}).join("")}function p(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:x}function d(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function f(e,t,r){var n=0;for(e=r?P(e/T):e>>1,e+=P(e/t);e>O*C>>1;n+=x)e=P(e/O);return P(n+(O+1)*e/(e+w))}function h(e){var t,r,n,i,o,s,l,u,d,h,g=[],v=e.length,m=0,y=I,b=A;for(r=e.lastIndexOf(L),r<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&a("not-basic"),g.push(e.charCodeAt(n));for(i=r>0?r+1:0;i<v;){for(o=m,s=1,l=x;i>=v&&a("invalid-input"),u=p(e.charCodeAt(i++)),(u>=x||u>P((E-m)/s))&&a("overflow"),m+=u*s,d=l<=b?S:l>=b+C?C:l-b,!(u<d);l+=x)h=x-d,s>P(E/h)&&a("overflow"),s*=h;t=g.length+1,b=f(m-o,t,0==o),P(m/t)>E-y&&a("overflow"),y+=P(m/t),m%=t,g.splice(m++,0,y)}return c(g)}function g(e){var t,r,n,i,o,s,l,c,p,h,g,v,m,y,b,w=[];for(e=u(e),v=e.length,t=I,r=0,o=A,s=0;s<v;++s)(g=e[s])<128&&w.push(D(g));for(n=i=w.length,i&&w.push(L);n<v;){for(l=E,s=0;s<v;++s)(g=e[s])>=t&&g<l&&(l=g);for(m=n+1,l-t>P((E-r)/m)&&a("overflow"),r+=(l-t)*m,t=l,s=0;s<v;++s)if(g=e[s],g<t&&++r>E&&a("overflow"),g==t){for(c=r,p=x;h=p<=o?S:p>=o+C?C:p-o,!(c<h);p+=x)b=c-h,y=x-h,w.push(D(d(h+b%y,0))),c=P(b/y);w.push(D(d(c,0))),o=f(r,m,n==i),r=0,++n}++r,++t}return w.join("")}function v(e){return l(e,function(e){return N.test(e)?h(e.slice(4).toLowerCase()):e})}function m(e){return l(e,function(e){return R.test(e)?"xn--"+g(e):e})}var y=("object"==typeof t&&t&&t.nodeType,"object"==typeof e&&e&&e.nodeType,"object"==typeof n&&n);var b,E=2147483647,x=36,S=1,C=26,w=38,T=700,A=72,I=128,L="-",N=/^xn--/,R=/[^\x20-\x7E]/,_=/[\x2E\u3002\uFF0E\uFF61]/g,k={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},O=x-S,P=Math.floor,D=String.fromCharCode;b={version:"1.4.1",ucs2:{decode:u,encode:c},decode:h,encode:g,toASCII:m,toUnicode:v},void 0!==(i=function(){return b}.call(t,r,t,e))&&(e.exports=i)}()}).call(t,r(110)(e),r(11))},function(e,t,r){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,r){"use strict";t.decode=t.parse=r(391),t.encode=t.stringify=r(392)},function(e,t,r){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,r,o){t=t||"&",r=r||"=";var a={};if("string"!=typeof e||0===e.length)return a;var s=/\+/g;e=e.split(t);var l=1e3;o&&"number"==typeof o.maxKeys&&(l=o.maxKeys);var u=e.length;l>0&&u>l&&(u=l);for(var c=0;c<u;++c){var p,d,f,h,g=e[c].replace(s,"%20"),v=g.indexOf(r);v>=0?(p=g.substr(0,v),d=g.substr(v+1)):(p=g,d=""),f=decodeURIComponent(p),h=decodeURIComponent(d),n(a,f)?i(a[f])?a[f].push(h):a[f]=[a[f],h]:a[f]=h}return a};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,r){"use strict";function n(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,r,s){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?n(a(e),function(a){var s=encodeURIComponent(i(a))+r;return o(e[a])?n(e[a],function(e){return s+encodeURIComponent(i(e))}).join(t):s+encodeURIComponent(i(e[a]))}).join(t):s?encodeURIComponent(i(s))+r+encodeURIComponent(i(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},function(e,t,r){var n=r(214),i=e.exports;for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o]);i.request=function(e,t){return e||(e={}),e.scheme="https",e.protocol="https:",n.request.call(this,e,t)}},function(e,t,r){function n(e){switch(e[0]){case'"':if(e.indexOf("^^")>0){var t=e.split("^^");return{literal:t[0]+"^^<"+t[1]+">"}}return{literal:e};case"_":return{blank:e.replace("b","")};default:return{token:"uri",value:e,prefix:null,suffix:null}}}var i=r(395).Parser,o={};o.parser={async:!0,parse:function(e,t,r,o){o||(o=r,r=t,t=null),t&&"string"==typeof t&&(t={token:"uri",value:t,prefix:null,suffix:null}),r&&r.baseURI&&(r.documentIRI=r.baseURI);var a=[];new i(r).parse(e,function(e,r){e?o(e):r?a.push({subject:n(r.subject),predicate:n(r.predicate),object:n(r.object),graph:t}):o(!1,a)})},resetBlankNodeIds:function(){i._resetBlankNodeIds()}},e.exports={RVN3Parser:o}},function(e,t,r){var n,n;n=function(){};var t=e.exports={Lexer:n("./lib/N3Lexer"),Parser:n("./lib/N3Parser"),Writer:n("./lib/N3Writer"),Store:n("./lib/N3Store"),StreamParser:n("./lib/N3StreamParser"),StreamWriter:n("./lib/N3StreamWriter"),Util:n("./lib/N3Util")};Object.keys(t).forEach(function(e){Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return delete t[e],t[e]=r(396)("./N3"+e)}})})},function(e,t,r){function n(e){return r(i(e))}function i(e){var t=o[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var o={"./N3Lexer":150,"./N3Lexer.js":150,"./N3Parser":151,"./N3Parser.js":151,"./N3Store":223,"./N3Store.js":223,"./N3StreamParser":224,"./N3StreamParser.js":224,"./N3StreamWriter":227,"./N3StreamWriter.js":227,"./N3Util":152,"./N3Util.js":152,"./N3Writer":153,"./N3Writer.js":153};n.keys=function(){return Object.keys(o)},n.resolve=i,e.exports=n,n.id=396},function(e,t,r){e.exports=r(149)},function(e,t,r){e.exports=r(47)},function(e,t,r){e.exports=r(77).Transform},function(e,t,r){e.exports=r(77).PassThrough},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t,r){var n=r(404),i=function(e,t,r){var i=null;n.normalize(e,{},function(e,n){if(e)r(e);else{var o=function(e){return"blank node"===e.type?{blank:e.value}:"IRI"===e.type?{token:"uri",value:e.value}:"literal"===e.type?null!=e.language?{literal:'"'+e.value+'"@'+e.language}:null!==e.datatype?{literal:'"'+e.value+'"^^<'+e.datatype+">"}:{literal:'"'+e.value+'"'}:void 0};i=[];for(var a in n)for(var s=n[a],l=0;l<s.length;l++){var u=s[l];!function(e,r,n){i.push({subject:o(e),predicate:o(r),object:o(n),graph:t})}(u.subject,u.predicate,u.object)}r(null,i)}})};t.JSONLDParser={};var o=t.JSONLDParser;o.parser={async:!0,parse:function(e,t,r,n){try{"string"==typeof e&&(e=JSON.parse(e)),i(e,t,n)}catch(e){n(e)}}},e.exports={JSONLDParser:o}},function(e,t,r){(function(n,i,o,a){var s,l;/**
 * A JavaScript implementation of the JSON-LD API.
 *
 * @author Dave Longley
 *
 * @license BSD 3-Clause License
 * Copyright (c) 2011-2015 Digital Bazaar, Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * Redistributions of source code must retain the above copyright notice,
 * this list of conditions and the following disclaimer.
 *
 * Redistributions in binary form must reproduce the above copyright
 * notice, this list of conditions and the following disclaimer in the
 * documentation and/or other materials provided with the distribution.
 *
 * Neither the name of the Digital Bazaar, Inc. nor the names of its
 * contributors may be used to endorse or promote products derived from
 * this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
 * IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED
 * TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A
 * PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
 * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
!function(){var u=void 0!==n&&n.versions&&n.versions.node,c=!u&&("undefined"!=typeof window||"undefined"!=typeof self);c&&void 0===i&&("undefined"!=typeof window?i=window:"undefined"!=typeof self?i=self:"undefined"!=typeof $&&(i=$));var p=function(e){function t(){}function s(e){for(var t=[],r=Object.keys(e).sort(),n=0;n<r.length;++n){var i=r[n],o=e[i];B(o)||(o=[o]);for(var a=0;a<o.length;++a){var s=o[a];if(null!==s){if(!U(s))throw new _e("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:e});t.push({"@value":s,"@language":i.toLowerCase()})}}}return t}function l(e,t){if(B(t))for(var r=0;r<t.length;++r)t[r]=l(e,t[r]);else if(J(t))t["@list"]=l(e,t["@list"]);else if($(t)){Z(t)&&(t["@id"]=e.getId(t["@id"]));for(var n=Object.keys(t).sort(),i=0;i<n.length;++i){var o=n[i];"@id"!==o&&(t[o]=l(e,t[o]))}}return t}function p(t,r,n){if(null===n||void 0===n)return null;var i=P(t,r,{vocab:!0});if("@id"===i)return P(t,n,{base:!0});if("@type"===i)return P(t,n,{vocab:!0,base:!0});var o=e.getContextValue(t,r,"@type");if("@id"===o||"@graph"===i&&U(n))return{"@id":P(t,n,{base:!0})};if("@vocab"===o)return{"@id":P(t,n,{vocab:!0,base:!0})};if(j(i))return n;var a={};if(null!==o)a["@type"]=o;else if(U(n)){var s=e.getContextValue(t,r,"@language");null!==s&&(a["@language"]=s)}return-1===["boolean","number","string"].indexOf(typeof n)&&(n=n.toString()),a["@value"]=n,a}function d(e,t,r){for(var n=[],i=Object.keys(e).sort(),o=0;o<i.length;++o)for(var a=i[o],s=e[a],l=Object.keys(s).sort(),u=0;u<l.length;++u){var c=l[u],p=s[c];if("@type"===c)c=we;else if(j(c))continue;for(var d=0;d<p.length;++d){var g=p[d],v={};if(v.type=0===a.indexOf("_:")?"blank node":"IRI",v.value=a,ee(a)){var m={};if(m.type=0===c.indexOf("_:")?"blank node":"IRI",m.value=c,ee(c)&&("blank node"!==m.type||r.produceGeneralizedRdf))if(J(g))f(g["@list"],t,v,m,n);else{var y=h(g);y&&n.push({subject:v,predicate:m,object:y})}}}}return n}function f(e,t,r,n,i){for(var o={type:"IRI",value:xe},a={type:"IRI",value:Se},s={type:"IRI",value:Ce},l=0;l<e.length;++l){var u=e[l],c={type:"blank node",value:t.getId()};i.push({subject:r,predicate:n,object:c}),r=c,n=o;var p=h(u);p&&i.push({subject:r,predicate:n,object:p}),n=a}i.push({subject:r,predicate:n,object:s})}function h(e){var t={};if(K(e)){t.type="literal";var r=e["@value"],n=e["@type"]||null;Q(r)?(t.value=r.toString(),t.datatype=n||ve):q(r)||n===me?(q(r)||(r=parseFloat(r)),t.value=r.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),t.datatype=n||me):V(r)?(t.value=r.toFixed(0),t.datatype=n||ye):"@language"in e?(t.value=r,t.datatype=n||Le,t.language=e["@language"]):(t.value=r,t.datatype=n||be)}else{var i=$(e)?e["@id"]:e;t.type=0===i.indexOf("_:")?"blank node":"IRI",t.value=i}return"IRI"!==t.type||ee(t.value)?t:null}function g(e,t){if("IRI"===e.type||"blank node"===e.type)return{"@id":e.value};var r={"@value":e.value};if(e.language)r["@language"]=e.language;else{var n=e.datatype;if(n||(n=be),t){if(n===ve)"true"===r["@value"]?r["@value"]=!0:"false"===r["@value"]&&(r["@value"]=!1);else if(z(r["@value"]))if(n===ye){var i=parseInt(r["@value"],10);i.toFixed(0)===r["@value"]&&(r["@value"]=i)}else n===me&&(r["@value"]=parseFloat(r["@value"]));-1===[ve,ye,me,be].indexOf(n)&&(r["@type"]=n)}else n!==be&&(r["@type"]=n)}return r}function v(e,t){for(var r=["subject","predicate","object"],n=0;n<r.length;++n){var i=r[n];if(e[i].type!==t[i].type||e[i].value!==t[i].value)return!1}return e.object.language===t.object.language&&e.object.datatype===t.object.datatype}function m(t,r,n,i,o,a){if(B(t))for(var s=0;s<t.length;++s)m(t[s],r,n,i,void 0,a);else{if(!$(t))return void(a&&a.push(t));if(K(t)){if("@type"in t){var l=t["@type"];0===l.indexOf("_:")&&(t["@type"]=l=i.getId(l))}return void(a&&a.push(t))}if("@type"in t)for(var u=t["@type"],s=0;s<u.length;++s){var l=u[s];0===l.indexOf("_:")&&i.getId(l)}W(o)&&(o=Z(t)?i.getId(t["@id"]):t["@id"]),a&&a.push({"@id":o});var c=r[n],p=c[o]=c[o]||{};p["@id"]=o;for(var d=Object.keys(t).sort(),f=0;f<d.length;++f){var h=d[f];if("@id"!==h)if("@reverse"!==h)if("@graph"!==h)if("@type"!==h&&j(h)){if("@index"===h&&h in p&&(t[h]!==p[h]||t[h]["@id"]!==p[h]["@id"]))throw new _e("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:p});p[h]=t[h]}else{var g=t[h];if(0===h.indexOf("_:")&&(h=i.getId(h)),0!==g.length)for(var v=0;v<g.length;++v){var y=g[v];if("@type"===h&&(y=0===y.indexOf("_:")?i.getId(y):y),X(y)||Y(y)){var b=Z(y)?i.getId(y["@id"]):y["@id"];e.addValue(p,h,{"@id":b},{propertyIsArray:!0,allowDuplicate:!1}),m(y,r,n,i,b)}else if(J(y)){var E=[];m(y["@list"],r,n,i,o,E),y={"@list":E},e.addValue(p,h,y,{propertyIsArray:!0,allowDuplicate:!1})}else m(y,r,n,i,o),e.addValue(p,h,y,{propertyIsArray:!0,allowDuplicate:!1})}else e.addValue(p,h,[],{propertyIsArray:!0})}else{o in r||(r[o]={});var x="@merged"===n?n:o;m(t[h],r,x,i)}else{var S={"@id":o},C=t["@reverse"];for(var w in C)for(var T=C[w],A=0;A<T.length;++A){var I=T[A],L=I["@id"];Z(I)&&(L=i.getId(L)),m(I,r,n,i,L),e.addValue(c[L],w,S,{propertyIsArray:!0,allowDuplicate:!1})}}}}}function y(e){for(var t=e["@default"],r=Object.keys(e).sort(),n=0;n<r.length;++n){var i=r[n];if("@default"!==i){var o=e[i],a=t[i];a?"@graph"in a||(a["@graph"]=[]):t[i]=a={"@id":i,"@graph":[]};for(var s=a["@graph"],l=Object.keys(o).sort(),u=0;u<l.length;++u){var c=o[l[u]];Y(c)||s.push(c)}}}return t}function b(e,t,r,n,i){C(r),r=r[0];for(var o=e.options,a={embed:S(r,o,"embed"),explicit:S(r,o,"explicit"),requireAll:S(r,o,"requireAll")},s=w(e,t,r,a),l=Object.keys(s).sort(),u=0;u<l.length;++u){var c=l[u],p=s[c];if("@link"===a.embed&&c in e.link)I(n,i,e.link[c]);else{null===i&&(e.uniqueEmbeds={});var d={};if(d["@id"]=c,e.link[c]=d,"@never"===a.embed||x(p,e.subjectStack))I(n,i,d);else{"@last"===a.embed&&(c in e.uniqueEmbeds&&A(e,c),e.uniqueEmbeds[c]={parent:n,property:i}),e.subjectStack.push(p);for(var f=Object.keys(p).sort(),h=0;h<f.length;h++){var g=f[h];if(j(g))d[g]=te(p[g]);else if(!a.explicit||g in r)for(var v=p[g],m=0;m<v.length;++m){var y=v[m];if(J(y)){var T={"@list":[]};I(d,g,T);var L=y["@list"];for(var N in L)if(y=L[N],Y(y)){var R=g in r?r[g][0]["@list"]:E(a);b(e,[y["@id"]],R,T,"@list")}else I(T,"@list",te(y))}else if(Y(y)){var R=g in r?r[g]:E(a);b(e,[y["@id"]],R,d,g)}else I(d,g,te(y))}}for(var f=Object.keys(r).sort(),h=0;h<f.length;++h){var g=f[h];if(!j(g)){var _=r[g][0];if(!(S(_,o,"omitDefault")||g in d)){var k="@null";"@default"in _&&(k=te(_["@default"])),B(k)||(k=[k]),d[g]=[{"@preserve":k}]}}}I(n,i,d),e.subjectStack.pop()}}}}function E(e){var t={};for(var r in e)void 0!==e[r]&&(t["@"+r]=[e[r]]);return[t]}function x(e,t){for(var r=t.length-1;r>=0;--r)if(t[r]["@id"]===e["@id"])return!0;return!1}function S(e,t,r){var n="@"+r,i=n in e?e[n][0]:t[r];return"embed"===r&&(!0===i?i="@last":!1===i?i="@never":"@always"!==i&&"@never"!==i&&"@link"!==i&&(i="@last")),i}function C(e){if(!B(e)||1!==e.length||!$(e[0]))throw new _e("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:e})}function w(e,t,r,n){for(var i={},o=0;o<t.length;++o){var a=t[o],s=e.subjects[a];T(s,r,n)&&(i[a]=s)}return i}function T(t,r,n){if("@type"in r&&(1!==r["@type"].length||!$(r["@type"][0]))){for(var i=r["@type"],o=0;o<i.length;++o)if(e.hasValue(t,"@type",i[o]))return!0;return!1}var a=!0,s=!1;for(var l in r){if(j(l)){if("@id"!==l&&"@type"!==l)continue;if(a=!1,"@id"===l&&U(r[l])){if(t[l]!==r[l])return!1;s=!0;continue}}if(a=!1,l in t){if(B(r[l])&&0===r[l].length&&void 0!==t[l])return!1;s=!0}else{var u=B(r[l])&&$(r[l][0])&&"@default"in r[l][0];if(n.requireAll&&!u)return!1}}return a||s}function A(t,r){var n=t.uniqueEmbeds,i=n[r],o=i.parent,a=i.property,s={"@id":r};if(B(o)){for(var l=0;l<o.length;++l)if(e.compareValues(o[l],s)){o[l]=s;break}}else{var u=B(o[a]);e.removeValue(o,a,s,{propertyIsArray:u}),e.addValue(o,a,s,{propertyIsArray:u})}var c=function(e){for(var t=Object.keys(n),r=0;r<t.length;++r){var i=t[r];i in n&&$(n[i].parent)&&n[i].parent["@id"]===e&&(delete n[i],c(i))}};c(r)}function I(t,r,n){$(t)?e.addValue(t,r,n,{propertyIsArray:!0}):t.push(n)}/**
 * Removes the @preserve keywords as the last step of the framing algorithm.
 *
 * @param ctx the active context used to compact the input.
 * @param input the framed, compacted output.
 * @param options the compaction options used.
 *
 * @return the resulting output.
 */
function L(t,r,n){if(B(r)){for(var i=[],o=0;o<r.length;++o){var a=L(t,r[o],n);null!==a&&i.push(a)}r=i}else if($(r)){
// remove @preserve
if("@preserve"in r)return"@null"===r["@preserve"]?null:r["@preserve"];if(K(r))return r;if(J(r))return r["@list"]=L(t,r["@list"],n),r;var s=_(t,"@id");if(s in r){var l=r[s];if(l in n.link){var u=n.link[l].indexOf(r);if(-1!==u)return n.link[l][u];n.link[l].push(r)}else n.link[l]=[r]}for(var c in r){var a=L(t,r[c],n),p=e.getContextValue(t,c,"@container");n.compactArrays&&B(a)&&1===a.length&&null===p&&(a=a[0]),r[c]=a}}return r}function N(e,t){return e.length<t.length?-1:t.length<e.length?1:e===t?0:e<t?-1:1}function R(e,t,r,n,i,o){null===o&&(o="@null");var a=[];if("@id"!==o&&"@reverse"!==o||!Y(r))a.push(o);else{"@reverse"===o&&a.push("@reverse");var s=_(e,r["@id"],null,{vocab:!0});s in e.mappings&&e.mappings[s]&&e.mappings[s]["@id"]===r["@id"]?a.push.apply(a,["@vocab","@id"]):a.push.apply(a,["@id","@vocab"])}a.push("@none");for(var l=e.inverse[t],u=0;u<n.length;++u){var c=n[u];if(c in l)for(var p=l[c][i],d=0;d<a.length;++d){var f=a[d];if(f in p)return p[f]}}return null}function _(e,t,r,n,i){if(null===t)return t;W(r)&&(r=null),W(i)&&(i=!1),n=n||{};var o=e.getInverse();if(j(t))return t in o?o[t]["@none"]["@type"]["@none"]:t;if(n.vocab&&t in o){var a=e["@language"]||"@none",s=[];$(r)&&"@index"in r&&s.push("@index");var l="@language",u="@null";if(i)l="@type",u="@reverse",s.push("@set");else if(J(r)){"@index"in r||s.push("@list");for(var c=r["@list"],p=0===c.length?a:null,d=null,f=0;f<c.length;++f){var h=c[f],g="@none",v="@none";if(K(h)?"@language"in h?g=h["@language"]:"@type"in h?v=h["@type"]:g="@null":v="@id",null===p?p=g:g!==p&&K(h)&&(p="@none"),null===d?d=v:v!==d&&(d="@none"),"@none"===p&&"@none"===d)break}p=p||"@none",d=d||"@none","@none"!==d?(l="@type",u=d):u=p}else K(r)?"@language"in r&&!("@index"in r)?(s.push("@language"),u=r["@language"]):"@type"in r&&(l="@type",u=r["@type"]):(l="@type",u="@id"),s.push("@set");s.push("@none");var m=R(e,t,r,s,l,u);if(null!==m)return m}if(n.vocab&&"@vocab"in e){var y=e["@vocab"];if(0===t.indexOf(y)&&t!==y){var b=t.substr(y.length);if(!(b in e.mappings))return b}}for(var E=null,x=0,S=[],C=e.fastCurieMap,w=t.length-1;x<w&&t[x]in C;++x)""in(C=C[t[x]])&&S.push(C[""][0]);for(var f=S.length-1;f>=0;--f)for(var T=S[f],A=T.terms,I=0;I<A.length;++I){var L=A[I]+":"+t.substr(T.iri.length),_=!(L in e.mappings)||null===r&&e.mappings[L]["@id"]===t;_&&(null===E||N(L,E)<0)&&(E=L)}return null!==E?E:n.vocab?t:F(e["@base"],t)}function k(t,r,n){if(K(n)){var i=e.getContextValue(t,r,"@type"),o=e.getContextValue(t,r,"@language"),a=e.getContextValue(t,r,"@container"),s="@index"in n&&"@index"!==a;if(!s&&(n["@type"]===i||n["@language"]===o))return n["@value"];var l=Object.keys(n).length,u=1===l||2===l&&"@index"in n&&!s,c="@language"in t,p=U(n["@value"]),d=t.mappings[r]&&null===t.mappings[r]["@language"];if(u&&(!c||!p||d))return n["@value"];var f={};return s&&(f[_(t,"@index")]=n["@index"]),"@type"in n?f[_(t,"@type")]=_(t,n["@type"],null,{vocab:!0}):"@language"in n&&(f[_(t,"@language")]=n["@language"]),f[_(t,"@value")]=n["@value"],f}var h=P(t,r,{vocab:!0}),i=e.getContextValue(t,r,"@type"),g=_(t,n["@id"],null,{vocab:"@vocab"===i});if("@id"===i||"@vocab"===i||"@graph"===h)return g;var f={};return f[_(t,"@id")]=g,f}function O(e,t,r,n){if(r in n){if(n[r])return;throw new _e("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:t,term:r})}if(n[r]=!1,j(r))throw new _e("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:t,term:r});if(""===r)throw new _e("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:t});e.mappings[r]&&delete e.mappings[r];var i=t[r];if(null===i||$(i)&&null===i["@id"])return e.mappings[r]=null,void(n[r]=!0);if(U(i)&&(i={"@id":i}),!$(i))throw new _e("Invalid JSON-LD syntax; @context property values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:t});var o=e.mappings[r]={};if(o.reverse=!1,"@reverse"in i){if("@id"in i)throw new _e("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});var a=i["@reverse"];if(!U(a))throw new _e("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});var s=P(e,a,{vocab:!0,base:!1},t,n);if(!ee(s))throw new _e("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});o["@id"]=s,o.reverse=!0}else if("@id"in i){var s=i["@id"];if(!U(s))throw new _e("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});if(s!==r){if(s=P(e,s,{vocab:!0,base:!1},t,n),!ee(s)&&!j(s))throw new _e("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});o["@id"]=s}}var l=r.indexOf(":");if(o._termHasColon=-1!==l,!("@id"in o))if(o._termHasColon){var u=r.substr(0,l);if(u in t&&O(e,t,u,n),e.mappings[u]){var c=r.substr(l+1);o["@id"]=e.mappings[u]["@id"]+c}else o["@id"]=r}else{if(!("@vocab"in e))throw new _e("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t,term:r});o["@id"]=e["@vocab"]+r}if(n[r]=!0,"@type"in i){var p=i["@type"];if(!U(p))throw new _e("Invalid JSON-LD syntax; an @context @type values must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:t});if("@id"!==p&&"@vocab"!==p){if(p=P(e,p,{vocab:!0,base:!1},t,n),!ee(p))throw new _e("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:t});if(0===p.indexOf("_:"))throw new _e("Invalid JSON-LD syntax; an @context @type values must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:t})}o["@type"]=p}if("@container"in i){var d=i["@container"];if("@list"!==d&&"@set"!==d&&"@index"!==d&&"@language"!==d)throw new _e("Invalid JSON-LD syntax; @context @container value must be one of the following: @list, @set, @index, or @language.","jsonld.SyntaxError",{code:"invalid container mapping",context:t});if(o.reverse&&"@index"!==d&&"@set"!==d&&null!==d)throw new _e("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});o["@container"]=d}if("@language"in i&&!("@type"in i)){var f=i["@language"];if(null!==f&&!U(f))throw new _e("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:t});null!==f&&(f=f.toLowerCase()),o["@language"]=f}
// disallow aliasing @context and @preserve
var s=o["@id"];if("@context"===s||"@preserve"===s)throw new _e("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:t})}function P(t,r,n,i,o){if(null===r||j(r))return r;if(r=String(r),i&&r in i&&!0!==o[r]&&O(t,i,r,o),n=n||{},n.vocab){var a=t.mappings[r];if(null===a)return null;if(a)return a["@id"]}var s=r.indexOf(":");if(-1!==s){var l=r.substr(0,s),u=r.substr(s+1);if("_"===l||0===u.indexOf("//"))return r;i&&l in i&&O(t,i,l,o);var a=t.mappings[l];return a?a["@id"]+u:r}if(n.vocab&&"@vocab"in t)return t["@vocab"]+r;var c=r;return n.base&&(c=e.prependBase(t["@base"],c)),c}function D(t,r){if(null===t)return r;if(-1!==r.indexOf(":"))return r;U(t)&&(t=e.url.parse(t||""));var n=e.url.parse(r),i={protocol:t.protocol||""};if(null!==n.authority)i.authority=n.authority,i.path=n.path,i.query=n.query;else if(i.authority=t.authority,""===n.path)i.path=t.path,null!==n.query?i.query=n.query:i.query=t.query;else{if(0===n.path.indexOf("/"))i.path=n.path;else{var o=t.path;""!==n.path&&(o=o.substr(0,o.lastIndexOf("/")+1),o.length>0&&"/"!==o.substr(-1)&&(o+="/"),o+=n.path),i.path=o}i.query=n.query}i.path=ue(i.path,!!i.authority);var a=i.protocol;return null!==i.authority&&(a+="//"+i.authority),a+=i.path,null!==i.query&&(a+="?"+i.query),null!==n.fragment&&(a+="#"+n.fragment),""===a&&(a="./"),a}function F(t,r){if(null===t)return r;U(t)&&(t=e.url.parse(t||""));var n="";if(""!==t.href?n+=(t.protocol||"")+"//"+(t.authority||""):r.indexOf("//")&&(n+="//"),0!==r.indexOf(n))return r;for(var i=e.url.parse(r.substr(n.length)),o=t.normalizedPath.split("/"),a=i.normalizedPath.split("/"),s=i.fragment||i.query?0:1;o.length>0&&a.length>s&&o[0]===a[0];)o.shift(),a.shift();var l="";if(o.length>0){o.pop();for(var u=0;u<o.length;++u)l+="../"}return l+=a.join("/"),null!==i.query&&(l+="?"+i.query),null!==i.fragment&&(l+="#"+i.fragment),""===l&&(l="./"),l}function M(t){function r(){var e=this;if(e.inverse)return e.inverse;for(var t=e.inverse={},r=e.fastCurieMap={},o={},a=e["@language"]||"@none",s=e.mappings,l=Object.keys(s).sort(N),u=0;u<l.length;++u){var c=l[u],p=s[c];if(null!==p){var d=p["@container"]||"@none",f=p["@id"];B(f)||(f=[f]);for(var h=0;h<f.length;++h){var g=f[h],v=t[g],m=j(g);if(v)m||p._termHasColon||o[g].push(c);else if(t[g]=v={},!m&&!p._termHasColon){o[g]=[c];var y={iri:g,terms:o[g]};g[0]in r?r[g[0]].push(y):r[g[0]]=[y]}if(v[d]||(v[d]={"@language":{},"@type":{}}),v=v[d],p.reverse)i(p,c,v["@type"],"@reverse");else if("@type"in p)i(p,c,v["@type"],p["@type"]);else if("@language"in p){var b=p["@language"]||"@null";i(p,c,v["@language"],b)}else i(p,c,v["@language"],a),i(p,c,v["@type"],"@none"),i(p,c,v["@language"],"@none")}}}for(var E in r)n(r,E,1);return t}function n(e,t,r){for(var i,o,a=e[t],s=e[t]={},l=0;l<a.length;++l)i=a[l].iri,o=r>=i.length?"":i[r],o in s?s[o].push(a[l]):s[o]=[a[l]];for(var t in s)""!==t&&n(s,t,r+1)}function i(e,t,r,n){n in r||(r[n]=t)}function o(){var e={};return e["@base"]=this["@base"],e.mappings=te(this.mappings),e.clone=this.clone,e.inverse=null,e.getInverse=this.getInverse,"@language"in this&&(e["@language"]=this["@language"]),"@vocab"in this&&(e["@vocab"]=this["@vocab"]),e}return{"@base":e.url.parse(t.base||""),mappings:{},inverse:null,getInverse:r,clone:o}}function j(e){if(!U(e))return!1;switch(e){case"@base":case"@context":case"@container":case"@default":case"@embed":case"@explicit":case"@graph":case"@id":case"@index":case"@language":case"@list":case"@omitDefault":case"@preserve":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@vocab":return!0}return!1}function $(e){return"[object Object]"===Object.prototype.toString.call(e)}function G(e){return $(e)&&0===Object.keys(e).length}function B(e){return Array.isArray(e)}function H(e){if(!U(e)&&!G(e)){var t=!1;if(B(e)){t=!0;for(var r=0;r<e.length;++r)if(!U(e[r])){t=!1;break}}if(!t)throw new _e('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, or an empty object.',"jsonld.SyntaxError",{code:"invalid type value",value:e})}}function U(e){return"string"==typeof e||"[object String]"===Object.prototype.toString.call(e)}function V(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function q(e){return V(e)&&-1!==String(e).indexOf(".")}function z(e){return!isNaN(parseFloat(e))&&isFinite(e)}function Q(e){return"boolean"==typeof e||"[object Boolean]"===Object.prototype.toString.call(e)}function W(e){return void 0===e}function X(e){var t=!1;if($(e)&&!("@value"in e||"@set"in e||"@list"in e)){t=Object.keys(e).length>1||!("@id"in e)}return t}function Y(e){return $(e)&&1===Object.keys(e).length&&"@id"in e}function K(e){return $(e)&&"@value"in e}function J(e){return $(e)&&"@list"in e}function Z(e){var t=!1;return $(e)&&(t="@id"in e?0===e["@id"].indexOf("_:"):0===Object.keys(e).length||!("@value"in e||"@set"in e||"@list"in e)),t}function ee(e){return U(e)&&-1!==e.indexOf(":")}function te(e){if(e&&"object"==typeof e){var t;if(B(e)){t=[];for(var r=0;r<e.length;++r)t[r]=te(e[r])}else if($(e)){t={};for(var n in e)t[n]=te(e[n])}else t=e.toString();return t}return e}function re(t,r,n,i){var o=Object.keys(r).length;if(B(t)){for(var a=0;a<t.length;++a)re(t[a],r,n,i);return o<Object.keys(r).length}if($(t)){for(var s in t)if("@context"===s){var l=t[s];if(B(l))for(var u=l.length,a=0;a<u;++a){var c=l[a];U(c)&&(c=e.prependBase(i,c),n?(c=r[c],B(c)?(Array.prototype.splice.apply(l,[a,1].concat(c)),a+=c.length-1,u=l.length):l[a]=c):c in r||(r[c]=!1))}else U(l)&&(l=e.prependBase(i,l),n?t[s]=r[l]:l in r||(r[l]=!1))}else re(t[s],r,n,i);return o<Object.keys(r).length}return!1}function ne(e,t,r){var n=null,i=t.documentLoader,o=function(e,t,r,i,a){if(Object.keys(t).length>Re)return n=new _e("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"loading remote context failed",max:Re}),a(n);var s={},l=function(){re(e,s,!0,i),a(null,e)};if(!re(e,s,!1,i))return l();var u=[];for(var c in s)!1===s[c]&&u.push(c);for(var p=u.length,d=0;d<u.length;++d)!function(e){if(e in t)return n=new _e("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"recursive context inclusion",url:e}),a(n);var i=te(t);i[e]=!0;var u=function(t,u){if(!n){var c=u?u.document:null;if(!t&&U(c))try{c=JSON.parse(c)}catch(e){t=e}if(t?t=new _e("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:e,cause:t}):$(c)||(t=new _e("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:e,cause:t})),t)return n=t,a(n);c="@context"in c?{"@context":c["@context"]}:{"@context":{}},u.contextUrl&&(B(c["@context"])||(c["@context"]=[c["@context"]]),c["@context"].push(u.contextUrl)),o(c,i,r,e,function(t,r){if(t)return a(t);s[e]=r["@context"],0===(p-=1)&&l()})}},c=r(e,u);c&&"then"in c&&c.then(u.bind(null,null),u)}(u[d])};o(e,{},i,t.base,r)}function ie(e){for(var t=/(?:\r\n)|(?:\n)|(?:\r)/g,r=new RegExp("^[ \\t]*(?:#.*)?$"),n=new RegExp('^[ \\t]*(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z0-9]+)))[ \\t]+(?:<([^:]+:[^>]*)>)[ \\t]+(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z0-9]+))|(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"(?:(?:\\^\\^(?:<([^:]+:[^>]*)>))|(?:@([a-z]+(?:-[a-z0-9]+)*)))?))[ \\t]*(?:\\.|(?:(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z0-9]+)))[ \\t]*\\.))[ \\t]*(?:#.*)?$'),i={},o=e.split(t),a=0,s=0;s<o.length;++s){var l=o[s];if(a++,!r.test(l)){var u=l.match(n);if(null===u)throw new _e("Error while parsing N-Quads; invalid quad.","jsonld.ParseError",{line:a});var c={};if(W(u[1])?c.subject={type:"blank node",value:u[2]}:c.subject={type:"IRI",value:u[1]},c.predicate={type:"IRI",value:u[3]},W(u[4]))if(W(u[5])){c.object={type:"literal"},W(u[7])?W(u[8])?c.object.datatype=be:(c.object.datatype=Le,c.object.language=u[8]):c.object.datatype=u[7];var p=u[6].replace(/\\"/g,'"').replace(/\\t/g,"\t").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\\\/g,"\\");c.object.value=p}else c.object={type:"blank node",value:u[5]};else c.object={type:"IRI",value:u[4]};var d="@default";if(W(u[9])?W(u[10])||(d=u[10]):d=u[9],d in i){for(var f=!0,h=i[d],g=0;f&&g<h.length;++g)v(h[g],c)&&(f=!1);f&&h.push(c)}else i[d]=[c]}}return i}function oe(e){var t=[];for(var r in e)for(var n=e[r],i=0;i<n.length;++i){var o=n[i];"@default"===r&&(r=null),t.push(ae(o,r))}return t.sort().join("")}function ae(e,t){var r=e.subject,n=e.predicate,i=e.object,o=t||null;"name"in e&&e.name&&(o=e.name.value);var a="";if("IRI"===r.type?a+="<"+r.value+">":a+=r.value,a+=" ","IRI"===n.type?a+="<"+n.value+">":a+=n.value,a+=" ","IRI"===i.type)a+="<"+i.value+">";else if("blank node"===i.type)a+=i.value;else{var s=i.value.replace(/\\/g,"\\\\").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\"/g,'\\"');a+='"'+s+'"',i.datatype===Le?i.language&&(a+="@"+i.language):i.datatype!==be&&(a+="^^<"+i.datatype+">")}return null!==o&&void 0!==o&&(0!==o.indexOf("_:")?a+=" <"+o+">":a+=" "+o),a+=" .\n"}function se(e){var t={};t["@default"]=[];for(var r=e.getSubjects(),n=0;n<r.length;++n){var i=r[n];if(null!==i){var o=e.getSubjectTriples(i);if(null!==o){var a=o.predicates;for(var s in a)for(var l=a[s].objects,u=0;u<l.length;++u){var c=l[u],p={};0===i.indexOf("_:")?p.subject={type:"blank node",value:i}:p.subject={type:"IRI",value:i},0===s.indexOf("_:")?p.predicate={type:"blank node",value:s}:p.predicate={type:"IRI",value:s};var d=c.value;if(c.type===Ae){he||Me();var f=new he;d="";for(var h=0;h<c.value.length;h++)c.value[h].nodeType===ge.ELEMENT_NODE?d+=f.serializeToString(c.value[h]):c.value[h].nodeType===ge.TEXT_NODE&&(d+=c.value[h].nodeValue)}p.object={},c.type===Ie?0===c.value.indexOf("_:")?p.object.type="blank node":p.object.type="IRI":(p.object.type="literal",c.type===Te?c.language?(p.object.datatype=Le,p.object.language=c.language):p.object.datatype=be:p.object.datatype=c.type),p.object.value=d,t["@default"].push(p)}}}}return t}function le(e){this.prefix=e,this.counter=0,this.existing={}}function ue(e,t){var r="";0===e.indexOf("/")&&(r="/");for(var n=e.split("/"),i=[];n.length>0;)"."===n[0]||""===n[0]&&n.length>1?n.shift():".."!==n[0]?i.push(n.shift()):(n.shift(),t||i.length>0&&".."!==i[i.length-1]?i.pop():i.push(".."));return r+i.join("/")}e.compact=function(t,r,n,i){function o(e,t,n,o){if(e)return i(e);o.compactArrays&&!o.graph&&B(t)?1===t.length?t=t[0]:0===t.length&&(t={}):o.graph&&$(t)&&(t=[t]),$(r)&&"@context"in r&&(r=r["@context"]),r=te(r),B(r)||(r=[r]);var a=r;r=[];for(var s=0;s<a.length;++s)(!$(a[s])||Object.keys(a[s]).length>0)&&r.push(a[s]);var l=r.length>0;if(1===r.length&&(r=r[0]),B(t)){var u=_(n,"@graph"),c=t;t={},l&&(t["@context"]=r),t[u]=c}else if($(t)&&l){var c=t;t={"@context":r};for(var p in c)t[p]=c[p]}i(null,t,n)}if(arguments.length<2)return e.nextTick(function(){i(new TypeError("Could not compact, too few arguments."))});if("function"==typeof n&&(i=n,n={}),n=n||{},null===r)return e.nextTick(function(){i(new _e("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"}))});if(null===t)return e.nextTick(function(){i(null,null)});"base"in n||(n.base="string"==typeof t?t:""),"compactArrays"in n||(n.compactArrays=!0),"graph"in n||(n.graph=!1),"skipExpansion"in n||(n.skipExpansion=!1),"documentLoader"in n||(n.documentLoader=e.loadDocument),"link"in n||(n.link=!1),n.link&&(n.skipExpansion=!0);!function(t,r,n){if(r.skipExpansion)return e.nextTick(function(){n(null,t)});e.expand(t,r,n)}(t,n,function(t,a){if(t)return i(new _e("Could not expand input before compaction.","jsonld.CompactError",{cause:t}));var s=M(n);e.processContext(s,r,n,function(e,t){if(e)return i(new _e("Could not process context before compaction.","jsonld.CompactError",{cause:e}));var r;try{r=(new ke).compact(t,null,a,n)}catch(e){return i(e)}o(null,r,t,n)})})},e.expand=function(t,r,n){function i(e){"base"in r||(r.base=e.documentUrl||"");var t={document:te(e.document),remoteContext:{"@context":e.contextUrl}};if("expandContext"in r){var i=te(r.expandContext);t.expandContext="object"==typeof i&&"@context"in i?i:{"@context":i}}ne(t,r,function(e,t){if(e)return n(e);var i;try{var o=new ke,a=M(r),s=t.document,l=t.remoteContext["@context"];t.expandContext&&(a=o.processContext(a,t.expandContext["@context"],r)),l&&(a=o.processContext(a,l,r)),i=o.expand(a,null,s,r,!1),$(i)&&"@graph"in i&&1===Object.keys(i).length?i=i["@graph"]:null===i&&(i=[]),B(i)||(i=[i])}catch(e){return n(e)}n(null,i)})}if(arguments.length<1)return e.nextTick(function(){n(new TypeError("Could not expand, too few arguments."))});"function"==typeof r&&(n=r,r={}),r=r||{},"documentLoader"in r||(r.documentLoader=e.loadDocument),"keepFreeFloatingNodes"in r||(r.keepFreeFloatingNodes=!1),e.nextTick(function(){if("string"==typeof t){var e=function(e,t){if(e)return n(e);try{if(!t.document)throw new _e("No remote document found at the given URL.","jsonld.NullRemoteDocument");"string"==typeof t.document&&(t.document=JSON.parse(t.document))}catch(e){return n(new _e("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",cause:e,remoteDoc:t}))}i(t)},o=r.documentLoader(t,e);return void(o&&"then"in o&&o.then(e.bind(null,null),e))}i({contextUrl:null,documentUrl:null,document:t})})},e.flatten=function(t,r,n,i){if(arguments.length<1)return e.nextTick(function(){i(new TypeError("Could not flatten, too few arguments."))});"function"==typeof n?(i=n,n={}):"function"==typeof r&&(i=r,r=null,n={}),n=n||{},"base"in n||(n.base="string"==typeof t?t:""),"documentLoader"in n||(n.documentLoader=e.loadDocument),e.expand(t,n,function(t,o){if(t)return i(new _e("Could not expand input before flattening.","jsonld.FlattenError",{cause:t}));var a;try{a=(new ke).flatten(o)}catch(e){return i(e)}if(null===r)return i(null,a);n.graph=!0,n.skipExpansion=!0,e.compact(a,r,n,function(e,t){if(e)return i(new _e("Could not compact flattened output.","jsonld.FlattenError",{cause:e}));i(null,t)})})},e.frame=function(t,r,n,i){function o(r){var o,a=r.document;a?(o=a["@context"],r.contextUrl?(o?B(o)?o.push(r.contextUrl):o=[o,r.contextUrl]:o=r.contextUrl,a["@context"]=o):o=o||{}):o={},e.expand(t,n,function(t,r){if(t)return i(new _e("Could not expand input before framing.","jsonld.FrameError",{cause:t}));var s=te(n);s.isFrame=!0,s.keepFreeFloatingNodes=!0,e.expand(a,s,function(t,n){if(t)return i(new _e("Could not expand frame before framing.","jsonld.FrameError",{cause:t}));var a;try{a=(new ke).frame(r,n,s)}catch(e){return i(e)}s.graph=!0,s.skipExpansion=!0,s.link={},e.compact(a,o,s,function(e,t,r){if(e)return i(new _e("Could not compact framed output.","jsonld.FrameError",{cause:e}));var n=_(r,"@graph");
// remove @preserve from results
s.link={},t[n]=L(r,t[n],s),i(null,t)})})})}if(arguments.length<2)return e.nextTick(function(){i(new TypeError("Could not frame, too few arguments."))});"function"==typeof n&&(i=n,n={}),n=n||{},"base"in n||(n.base="string"==typeof t?t:""),"documentLoader"in n||(n.documentLoader=e.loadDocument),"embed"in n||(n.embed="@last"),n.explicit=n.explicit||!1,"requireAll"in n||(n.requireAll=!0),n.omitDefault=n.omitDefault||!1,e.nextTick(function(){if("string"==typeof r){var e=function(e,t){if(e)return i(e);try{if(!t.document)throw new _e("No remote document found at the given URL.","jsonld.NullRemoteDocument");"string"==typeof t.document&&(t.document=JSON.parse(t.document))}catch(e){return i(new _e("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",cause:e,remoteDoc:t}))}o(t)},t=n.documentLoader(r,e);return void(t&&"then"in t&&t.then(e.bind(null,null),e))}o({contextUrl:null,documentUrl:null,document:r})})},e.link=function(t,r,n,i){var o={};r&&(o["@context"]=r),o["@embed"]="@link",e.frame(t,o,n,i)},e.objectify=function(t,r,n,i){"function"==typeof n&&(i=n,n={}),n=n||{},"base"in n||(n.base="string"==typeof t?t:""),"documentLoader"in n||(n.documentLoader=e.loadDocument),e.expand(t,n,function(t,o){if(t)return i(new _e("Could not expand input before linking.","jsonld.LinkError",{cause:t}));var a;try{a=(new ke).flatten(o)}catch(e){return i(e)}n.graph=!0,n.skipExpansion=!0,e.compact(a,r,n,function(t,r,n){if(t)return i(new _e("Could not compact flattened output before linking.","jsonld.LinkError",{cause:t}));var o=_(n,"@graph"),a=r[o][0],s=function(t){if($(t)||B(t)){if($(t)){if(s.visited[t["@id"]])return;s.visited[t["@id"]]=!0}for(var r in t){var i=t[r],o="@id"===e.getContextValue(n,r,"@type");if(B(i)||$(i)||o)if(U(i)&&o)t[r]=i=a[i],s(i);else if(B(i))for(var l=0;l<i.length;++l)U(i[l])&&o?i[l]=a[i[l]]:$(i[l])&&"@id"in i[l]&&(i[l]=a[i[l]["@id"]]),s(i[l]);else if($(i)){var u=i["@id"];t[r]=i=a[u],s(i)}}}};s.visited={},s(a),r.of_type={};for(var l in a)if("@type"in a[l]){var u=a[l]["@type"];B(u)||(u=[u]);for(var c=0;c<u.length;++c)u[c]in r.of_type||(r.of_type[u[c]]=[]),r.of_type[u[c]].push(a[l])}i(null,r)})})},e.normalize=function(t,r,n){if(arguments.length<1)return e.nextTick(function(){n(new TypeError("Could not normalize, too few arguments."))});if("function"==typeof r&&(n=r,r={}),r=r||{},"algorithm"in r||(r.algorithm="URGNA2012"),"base"in r||(r.base="string"==typeof t?t:""),"documentLoader"in r||(r.documentLoader=e.loadDocument),"inputFormat"in r){if("application/nquads"!==r.inputFormat)return n(new _e("Unknown normalization input format.","jsonld.NormalizeError"));var i=ie(t);(new ke).normalize(i,r,n)}else{var o=te(r);delete o.format,o.produceGeneralizedRdf=!1,e.toRDF(t,o,function(e,t){if(e)return n(new _e("Could not convert input to RDF dataset before normalization.","jsonld.NormalizeError",{cause:e}));(new ke).normalize(t,r,n)})}},e.fromRDF=function(t,r,n){if(arguments.length<1)return e.nextTick(function(){n(new TypeError("Could not convert from RDF, too few arguments."))});"function"==typeof r&&(n=r,r={}),r=r||{},"useRdfType"in r||(r.useRdfType=!1),"useNativeTypes"in r||(r.useNativeTypes=!1),"format"in r||!U(t)||"format"in r||(r.format="application/nquads"),e.nextTick(function(){function e(e,t,r){(new ke).fromRDF(e,t,r)}var i;if(r.format){if(!(i=r.rdfParser||fe[r.format]))return n(new _e("Unknown input format.","jsonld.UnknownFormat",{format:r.format}))}else i=function(){return t};var o=!1;try{t=i(t,function(t,i){if(o=!0,t)return n(t);e(i,r,n)})}catch(e){if(!o)return n(e);throw e}if(t){if("then"in t)return t.then(function(t){e(t,r,n)},n);e(t,r,n)}})},e.toRDF=function(t,r,n){if(arguments.length<1)return e.nextTick(function(){n(new TypeError("Could not convert to RDF, too few arguments."))});"function"==typeof r&&(n=r,r={}),r=r||{},"base"in r||(r.base="string"==typeof t?t:""),"documentLoader"in r||(r.documentLoader=e.loadDocument),e.expand(t,r,function(e,t){if(e)return n(new _e("Could not expand input before serialization to RDF.","jsonld.RdfError",{cause:e}));var i;try{if(i=ke.prototype.toRDF(t,r),r.format){if("application/nquads"===r.format)return n(null,oe(i));throw new _e("Unknown output format.","jsonld.UnknownFormat",{format:r.format})}}catch(e){return n(e)}n(null,i)})},e.createNodeMap=function(t,r,n){if(arguments.length<1)return e.nextTick(function(){n(new TypeError("Could not create node map, too few arguments."))});"function"==typeof r&&(n=r,r={}),r=r||{},"base"in r||(r.base="string"==typeof t?t:""),"documentLoader"in r||(r.documentLoader=e.loadDocument),e.expand(t,r,function(e,t){if(e)return n(new _e("Could not expand input before creating node map.","jsonld.CreateNodeMapError",{cause:e}));var i;try{i=(new ke).createNodeMap(t,r)}catch(e){return n(e)}n(null,i)})},e.merge=function(t,r,n,i){function o(e,t){if(!l){if(e)return l=e,i(new _e("Could not expand input before flattening.","jsonld.FlattenError",{cause:e}));s.push(t),0==--u&&a(s)}}function a(t){var o=!0;"mergeNodes"in n&&(o=n.mergeNodes);var a,s=n.namer||n.issuer||new le("_:b"),l={"@default":{}};try{for(var u=0;u<t.length;++u){var c=t[u];c=e.relabelBlankNodes(c,{issuer:new le("_:b"+u+"-")});var p=o||0===u?l:{"@default":{}};if(m(c,p,"@default",s),p!==l)for(var d in p){var f=p[d];if(d in l){var h=l[d];for(var g in f)g in h||(h[g]=f[g])}else l[d]=f}}a=y(l)}catch(e){return i(e)}for(var v=[],b=Object.keys(a).sort(),E=0;E<b.length;++E){var x=a[b[E]];Y(x)||v.push(x)}if(null===r)return i(null,v);n.graph=!0,n.skipExpansion=!0,e.compact(v,r,n,function(e,t){if(e)return i(new _e("Could not compact merged output.","jsonld.MergeError",{cause:e}));i(null,t)})}if(arguments.length<1)return e.nextTick(function(){i(new TypeError("Could not merge, too few arguments."))});if(!B(t))return e.nextTick(function(){i(new TypeError('Could not merge, "docs" must be an array.'))});"function"==typeof n?(i=n,n={}):"function"==typeof r&&(i=r,r=null,n={}),n=n||{};for(var s=[],l=null,u=t.length,c=0;c<t.length;++c){var p={};for(var d in n)p[d]=n[d];e.expand(t[c],p,o)}},e.relabelBlankNodes=function(e,t){return t=t||{},l(t.namer||t.issuer||new le("_:b"),e)},e.prependBase=function(e,t){return D(e,t)},e.documentLoader=function(t,r){var n=new _e("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed"});return u?r(n,{contextUrl:null,documentUrl:t,document:null}):e.promisify(function(e){e(n)})},e.loadDocument=function(t,r){var n=e.documentLoader(t,r);n&&"then"in n&&n.then(r.bind(null,null),r)},e.promises=function(t){t=t||{};var n=Array.prototype.slice,o=e.promisify,a=t.api||{},s=t.version||"jsonld.js";"string"==typeof t.api&&(t.version||(s=t.api),a={}),a.expand=function(t){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");return o.apply(null,[e.expand].concat(n.call(arguments)))},a.compact=function(t,r){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");var i=function(t,r,n,i){"function"==typeof n&&(i=n,n={}),n=n||{},e.compact(t,r,n,function(e,t){i(e,t)})};return o.apply(null,[i].concat(n.call(arguments)))},a.flatten=function(t){if(arguments.length<1)throw new TypeError("Could not flatten, too few arguments.");return o.apply(null,[e.flatten].concat(n.call(arguments)))},a.frame=function(t,r){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");return o.apply(null,[e.frame].concat(n.call(arguments)))},a.fromRDF=function(t){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");return o.apply(null,[e.fromRDF].concat(n.call(arguments)))},a.toRDF=function(t){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");return o.apply(null,[e.toRDF].concat(n.call(arguments)))},a.normalize=function(t){if(arguments.length<1)throw new TypeError("Could not normalize, too few arguments.");return o.apply(null,[e.normalize].concat(n.call(arguments)))},"jsonld.js"===s&&(a.link=function(t,r){if(arguments.length<2)throw new TypeError("Could not link, too few arguments.");return o.apply(null,[e.link].concat(n.call(arguments)))},a.objectify=function(t){return o.apply(null,[e.objectify].concat(n.call(arguments)))},a.createNodeMap=function(t){return o.apply(null,[e.createNodeMap].concat(n.call(arguments)))},a.merge=function(t){return o.apply(null,[e.merge].concat(n.call(arguments)))});try{e.Promise=i.Promise||r(228).Promise}catch(e){var l=function(){throw new Error("Unable to find a Promise implementation.")};for(var u in a)a[u]=l}return a},e.promisify=function(t){if(!e.Promise)try{e.Promise=i.Promise||r(228).Promise}catch(e){throw new Error("Unable to find a Promise implementation.")}var n=Array.prototype.slice.call(arguments,1);return new e.Promise(function(e,r){t.apply(null,n.concat(function(t,n){t?r(t):e(n)}))})},e.promises({api:e.promises}),t.prototype=e.promises({version:"json-ld-1.0"}),t.prototype.toString=function(){return this instanceof t?"[object JsonLdProcessor]":"[object JsonLdProcessorPrototype]"},e.JsonLdProcessor=t;var ce=!!Object.defineProperty;if(ce)try{Object.defineProperty({},"x",{})}catch(e){ce=!1}ce&&(Object.defineProperty(t,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(t.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:t})),c&&void 0===i.JsonLdProcessor&&(ce?Object.defineProperty(i,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:t}):i.JsonLdProcessor=t);var pe="function"==typeof o&&o,de=pe?function(e){pe(e)}:function(e){setTimeout(e,0)};"object"==typeof n&&"function"==typeof n.nextTick?e.nextTick=n.nextTick:e.nextTick=de,e.setImmediate=pe?de:e.nextTick,e.parseLinkHeader=function(e){for(var t={},r=e.match(/(?:<[^>]*?>|"[^"]*?"|[^,])+/g),n=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,i=0;i<r.length;++i){var o=r[i].match(n);if(o){for(var a={target:o[1]},s=o[2],l=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g;o=l.exec(s);)a[o[1]]=void 0===o[2]?o[3]:o[2];var u=a.rel||"";B(t[u])?t[u].push(a):t[u]=u in t?[t[u],a]:a}}return t},e.RequestQueue=function(){this._requests={}},e.RequestQueue.prototype.wrapLoader=function(e){return this._loader=e,this._usePromise=1===e.length,this.add.bind(this)},e.RequestQueue.prototype.add=function(t,r){var n=this;if(!r&&!n._usePromise)throw new Error("callback must be specified.");if(n._usePromise)return new e.Promise(function(e,r){var i=n._requests[t];i||(i=n._requests[t]=n._loader(t).then(function(e){return delete n._requests[t],e}).catch(function(e){throw delete n._requests[t],e})),i.then(function(t){e(t)}).catch(function(e){r(e)})});t in n._requests?n._requests[t].push(r):(n._requests[t]=[r],n._loader(t,function(e,r){var i=n._requests[t];delete n._requests[t];for(var o=0;o<i.length;++o)i[o](e,r)}))},e.DocumentCache=function(e){this.order=[],this.cache={},this.size=e||50,this.expires=3e4},e.DocumentCache.prototype.get=function(e){if(e in this.cache){var t=this.cache[e];if(t.expires>=+new Date)return t.ctx;delete this.cache[e],this.order.splice(this.order.indexOf(e),1)}return null},e.DocumentCache.prototype.set=function(e,t){this.order.length===this.size&&delete this.cache[this.order.shift()],this.order.push(e),this.cache[e]={ctx:t,expires:+new Date+this.expires}},e.ActiveContextCache=function(e){this.order=[],this.cache={},this.size=e||100},e.ActiveContextCache.prototype.get=function(e,t){var r=JSON.stringify(e),n=JSON.stringify(t),i=this.cache[r];return i&&n in i?i[n]:null},e.ActiveContextCache.prototype.set=function(e,t,r){if(this.order.length===this.size){var n=this.order.shift();delete this.cache[n.activeCtx][n.localCtx]}var i=JSON.stringify(e),o=JSON.stringify(t);this.order.push({activeCtx:i,localCtx:o}),i in this.cache||(this.cache[i]={}),this.cache[i][o]=te(r)},e.cache={activeCtx:new e.ActiveContextCache},e.documentLoaders={},e.documentLoaders.jquery=function(t,r){function n(n,i){return 0!==n.indexOf("http:")&&0!==n.indexOf("https:")?i(new _e('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:n}),{contextUrl:null,documentUrl:n,document:null}):r.secure&&0!==n.indexOf("https")?i(new _e('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:n}),{contextUrl:null,documentUrl:n,document:null}):void t.ajax({url:n,accepts:{json:"application/ld+json, application/json"},headers:{Accept:"application/ld+json, application/json"},dataType:"json",crossDomain:!0,success:function(t,r,o){var a={contextUrl:null,documentUrl:n,document:t},s=o.getResponseHeader("Content-Type"),l=o.getResponseHeader("Link");if(l&&"application/ld+json"!==s){if(l=e.parseLinkHeader(l)[Ne],B(l))return i(new _e("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:n}),a);l&&(a.contextUrl=l.target)}i(null,a)},error:function(e,t,r){i(new _e("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:n,cause:r}),{contextUrl:null,documentUrl:n,document:null})}})}r=r||{};var i=new e.RequestQueue;return("usePromise"in r?r.usePromise:"undefined"!=typeof Promise)?i.wrapLoader(function(t){return e.promisify(n,t)}):i.wrapLoader(n)},e.documentLoaders.node=function(t){function n(r,u,c){function p(t,i,a){if(d={contextUrl:null,documentUrl:r,document:a||null},t)return c(new _e("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:r,cause:t}),d);var s=l.STATUS_CODES[i.statusCode];if(i.statusCode>=400)return c(new _e("URL could not be dereferenced: "+s,"jsonld.InvalidUrl",{code:"loading document failed",url:r,httpStatusCode:i.statusCode}),d);if(i.headers.link&&"application/ld+json"!==i.headers["content-type"]){var p=e.parseLinkHeader(i.headers.link)[Ne];if(B(p))return c(new _e("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:r}),d);p&&(d.contextUrl=p.target)}if(i.statusCode>=300&&i.statusCode<400&&i.headers.location)return u.length===o?c(new _e("URL could not be dereferenced; there were too many redirects.","jsonld.TooManyRedirects",{code:"loading document failed",url:r,httpStatusCode:i.statusCode,redirects:u}),d):-1!==u.indexOf(r)?c(new _e("URL could not be dereferenced; infinite redirection was detected.","jsonld.InfiniteRedirectDetected",{code:"recursive context inclusion",url:r,httpStatusCode:i.statusCode,redirects:u}),d):(u.push(r),n(i.headers.location,u,c));u.push(r),c(t,d)}if(0!==r.indexOf("http:")&&0!==r.indexOf("https:"))return c(new _e('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:r}),{contextUrl:null,documentUrl:r,document:null});if(t.secure&&0!==r.indexOf("https"))return c(new _e('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:r}),{contextUrl:null,documentUrl:r,document:null});var d=null;if(null!==d)return c(null,d);var f={Accept:s};for(var h in t.headers)f[h]=t.headers[h];a({url:r,headers:f,strictSSL:i,followRedirect:!1},p)}t=t||{};var i=!("strictSSL"in t)||t.strictSSL,o="maxRedirects"in t?t.maxRedirects:-1,a="request"in t?t.request:r(48),s="application/ld+json, application/json",l=r(48),u=new e.RequestQueue;if(t.usePromise)return u.wrapLoader(function(t){return e.promisify(n,t,[])});var c=t.headers||{};if("Accept"in c||"accept"in c)throw new RangeError('Accept header may not be specified as an option; only "'+s+'" is supported.');return u.wrapLoader(function(e,t){n(e,[],t)})},e.documentLoaders.xhr=function(t){function r(r,i){if(0!==r.indexOf("http:")&&0!==r.indexOf("https:"))return i(new _e('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:r}),{contextUrl:null,documentUrl:r,document:null});if(t.secure&&0!==r.indexOf("https"))return i(new _e('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:r}),{contextUrl:null,documentUrl:r,document:null});var o=t.xhr||XMLHttpRequest,a=new o;a.onload=function(){if(a.status>=400)return i(new _e("URL could not be dereferenced: "+a.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:r,httpStatusCode:a.status}),{contextUrl:null,documentUrl:r,document:null});var t,o={contextUrl:null,documentUrl:r,document:a.response},s=a.getResponseHeader("Content-Type");if(n.test(a.getAllResponseHeaders())&&(t=a.getResponseHeader("Link")),t&&"application/ld+json"!==s){if(t=e.parseLinkHeader(t)[Ne],B(t))return i(new _e("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:r}),o);t&&(o.contextUrl=t.target)}i(null,o)},a.onerror=function(){i(new _e("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:r}),{contextUrl:null,documentUrl:r,document:null})},a.open("GET",r,!0),a.setRequestHeader("Accept","application/ld+json, application/json"),a.send()}t=t||{};var n=/(^|(\r\n))link:/i,i=new e.RequestQueue;return("usePromise"in t?t.usePromise:"undefined"!=typeof Promise)?i.wrapLoader(function(t){return e.promisify(r,t)}):i.wrapLoader(r)},e.useDocumentLoader=function(t){if(!(t in e.documentLoaders))throw new _e('Unknown document loader type: "'+t+'"',"jsonld.UnknownDocumentLoader",{type:t});e.documentLoader=e.documentLoaders[t].apply(e,Array.prototype.slice.call(arguments,1))},e.processContext=function(t,r){var n={},i=2;arguments.length>3&&(n=arguments[2]||{},i+=1);var o=arguments[i];if("base"in n||(n.base=""),"documentLoader"in n||(n.documentLoader=e.loadDocument),null===r)return o(null,M(n));r=te(r),$(r)&&"@context"in r||(r={"@context":r}),ne(r,n,function(e,r){if(e)return o(e);try{r=(new ke).processContext(t,r,n)}catch(e){return o(e)}o(null,r)})},e.hasProperty=function(e,t){var r=!1;if(t in e){var n=e[t];r=!B(n)||n.length>0}return r},e.hasValue=function(t,r,n){var i=!1;if(e.hasProperty(t,r)){var o=t[r],a=J(o);if(B(o)||a){a&&(o=o["@list"]);for(var s=0;s<o.length;++s)if(e.compareValues(n,o[s])){i=!0;break}}else B(n)||(i=e.compareValues(n,o))}return i},e.addValue=function(t,r,n,i){if(i=i||{},"propertyIsArray"in i||(i.propertyIsArray=!1),"allowDuplicate"in i||(i.allowDuplicate=!0),B(n)){0!==n.length||!i.propertyIsArray||r in t||(t[r]=[]);for(var o=0;o<n.length;++o)e.addValue(t,r,n[o],i)}else if(r in t){var a=!i.allowDuplicate&&e.hasValue(t,r,n);B(t[r])||a&&!i.propertyIsArray||(t[r]=[t[r]]),a||t[r].push(n)}else t[r]=i.propertyIsArray?[n]:n},e.getValues=function(e,t){var r=e[t]||[];return B(r)||(r=[r]),r},e.removeProperty=function(e,t){delete e[t]},e.removeValue=function(t,r,n,i){"propertyIsArray"in(i=i||{})||(i.propertyIsArray=!1);var o=e.getValues(t,r).filter(function(t){return!e.compareValues(t,n)});0===o.length?e.removeProperty(t,r):1!==o.length||i.propertyIsArray?t[r]=o:t[r]=o[0]},e.compareValues=function(e,t){return e===t||(!(!K(e)||!K(t)||e["@value"]!==t["@value"]||e["@type"]!==t["@type"]||e["@language"]!==t["@language"]||e["@index"]!==t["@index"])||!!($(e)&&"@id"in e&&$(t)&&"@id"in t)&&e["@id"]===t["@id"])},e.getContextValue=function(e,t,r){var n=null;if(null===t)return n;if("@language"===r&&r in e&&(n=e[r]),e.mappings[t]){var i=e.mappings[t];W(r)?n=i:r in i&&(n=i[r])}return n};var fe={};if(e.registerRDFParser=function(e,t){fe[e]=t},e.unregisterRDFParser=function(e){delete fe[e]},u){if(void 0===he)var he=null;if(void 0===ge)var ge={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12}}var ve="http://www.w3.org/2001/XMLSchema#boolean",me="http://www.w3.org/2001/XMLSchema#double",ye="http://www.w3.org/2001/XMLSchema#integer",be="http://www.w3.org/2001/XMLSchema#string",Ee="http://www.w3.org/1999/02/22-rdf-syntax-ns#",xe=Ee+"first",Se=Ee+"rest",Ce=Ee+"nil",we=Ee+"type",Te=Ee+"PlainLiteral",Ae=Ee+"XMLLiteral",Ie=Ee+"object",Le=Ee+"langString",Ne="http://www.w3.org/ns/json-ld#context",Re=10,_e=function(e,t,r){u?(Error.call(this),Error.captureStackTrace(this,this.constructor)):"undefined"!=typeof Error&&(this.stack=(new Error).stack),this.name=t||"jsonld.Error",this.message=e||"An unspecified JSON-LD error occurred.",this.details=r||{}};u?r(48).inherits(_e,Error):"undefined"!=typeof Error&&(_e.prototype=new Error);var ke=function(){};ke.prototype.compact=function(t,r,n,i){if(B(n)){for(var o=[],a=0;a<n.length;++a){var s=this.compact(t,r,n[a],i);null!==s&&o.push(s)}if(i.compactArrays&&1===o.length){var l=e.getContextValue(t,r,"@container");null===l&&(o=o[0])}return o}if($(n)){if(i.link&&"@id"in n&&n["@id"]in i.link)for(var u=i.link[n["@id"]],a=0;a<u.length;++a)if(u[a].expanded===n)return u[a].compacted;if(K(n)||Y(n)){var o=k(t,r,n);return i.link&&Y(n)&&(n["@id"]in i.link||(i.link[n["@id"]]=[]),i.link[n["@id"]].push({expanded:n,compacted:o})),o}var c="@reverse"===r,o={};i.link&&"@id"in n&&(n["@id"]in i.link||(i.link[n["@id"]]=[]),i.link[n["@id"]].push({expanded:n,compacted:o}));for(var p=Object.keys(n).sort(),d=0;d<p.length;++d){var f=p[d],h=n[f];if("@id"!==f&&"@type"!==f)if("@reverse"!==f)if("@index"!==f)if("@graph"!==f&&"@list"!==f&&j(f)){var g=_(t,f);e.addValue(o,g,h)}else{if(0===h.length){var v=_(t,f,h,{vocab:!0},c);e.addValue(o,v,h,{propertyIsArray:!0})}for(var m=0;m<h.length;++m){var y=h[m],v=_(t,f,y,{vocab:!0},c),l=e.getContextValue(t,v,"@container"),b=J(y),E=null;b&&(E=y["@list"]);var x=this.compact(t,v,b?E:y,i);if(b)if(B(x)||(x=[x]),"@list"!==l){var S={};S[_(t,"@list")]=x,x=S,"@index"in y&&(x[_(t,"@index")]=y["@index"])}else if(v in o)throw new _e('JSON-LD compact error; property has a "@list" @container rule but there is more than a single @list that matches the compacted term in the document. Compaction might mix unwanted items into the list.',"jsonld.SyntaxError",{code:"compaction to list of lists"});if("@language"===l||"@index"===l){var C;v in o?C=o[v]:o[v]=C={},"@language"===l&&K(x)&&(x=x["@value"]),e.addValue(C,y[l],x)}else{var w=!i.compactArrays||"@set"===l||"@list"===l||B(x)&&0===x.length||"@list"===f||"@graph"===f;e.addValue(o,v,x,{propertyIsArray:w})}}}else{var l=e.getContextValue(t,r,"@container");if("@index"===l)continue;var g=_(t,f);e.addValue(o,g,h)}else{var T=this.compact(t,"@reverse",h,i);for(var A in T)if(t.mappings[A]&&t.mappings[A].reverse){var I=T[A],l=e.getContextValue(t,A,"@container"),L="@set"===l||!i.compactArrays;e.addValue(o,A,I,{propertyIsArray:L}),delete T[A]}if(Object.keys(T).length>0){var g=_(t,f);e.addValue(o,g,T)}}else{var T;if(U(h))T=_(t,h,null,{vocab:"@type"===f});else{T=[];for(var m=0;m<h.length;++m)T.push(_(t,h[m],null,{vocab:!0}))}var g=_(t,f),w=B(T)&&0===h.length;e.addValue(o,g,T,{propertyIsArray:w})}}return o}return n},ke.prototype.expand=function(t,r,n,i,o){var a=this;if(null===n||void 0===n)return null;if(!B(n)&&!$(n))return o||null!==r&&"@graph"!==P(t,r,{vocab:!0})?p(t,r,n):null;if(B(n)){var l=[],u=e.getContextValue(t,r,"@container");o=o||"@list"===u;for(var c=0;c<n.length;++c){var d=a.expand(t,r,n[c],i);if(o&&(B(d)||J(d)))throw new _e("Invalid JSON-LD syntax; lists of lists are not permitted.","jsonld.SyntaxError",{code:"list of lists"});null!==d&&(B(d)?l=l.concat(d):l.push(d))}return l}"@context"in n&&(t=a.processContext(t,n["@context"],i));for(var f=P(t,r,{vocab:!0}),l={},h=Object.keys(n).sort(),g=0;g<h.length;++g){var v,m=h[g],y=n[m];if("@context"!==m){var b=P(t,m,{vocab:!0});if(null!==b&&(ee(b)||j(b))){if(j(b)){if("@reverse"===f)throw new _e("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:y});if(b in l)throw new _e("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:b})}if("@id"===b&&!U(y)){if(!i.isFrame)throw new _e('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:y});if(!$(y))throw new _e('Invalid JSON-LD syntax; "@id" value must be a string or an object.',"jsonld.SyntaxError",{code:"invalid @id value",value:y})}if("@type"===b&&H(y),"@graph"===b&&!$(y)&&!B(y))throw new _e('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:y});if("@value"===b&&($(y)||B(y)))throw new _e('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:y});if("@language"===b){if(null===y)continue;if(!U(y))throw new _e('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:y});y=y.toLowerCase()}if("@index"===b&&!U(y))throw new _e('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:y});if("@reverse"!==b){var u=e.getContextValue(t,m,"@container");if("@language"===u&&$(y))v=s(y);else if("@index"===u&&$(y))v=function(e){for(var r=[],n=Object.keys(y).sort(),o=0;o<n.length;++o){var s=n[o],l=y[s];B(l)||(l=[l]),l=a.expand(t,e,l,i,!1);for(var u=0;u<l.length;++u){var c=l[u];"@index"in c||(c["@index"]=s),r.push(c)}}return r}(m);else{var E="@list"===b;if(E||"@set"===b){var x=r;if(E&&"@graph"===f&&(x=null),v=a.expand(t,x,y,i,E),E&&J(v))throw new _e("Invalid JSON-LD syntax; lists of lists are not permitted.","jsonld.SyntaxError",{code:"list of lists"})}else v=a.expand(t,m,y,i,!1)}if(null!==v||"@value"===b)if("@list"===b||J(v)||"@list"!==u||(v=B(v)?v:[v],v={"@list":v}),t.mappings[m]&&t.mappings[m].reverse){var S=l["@reverse"]=l["@reverse"]||{};B(v)||(v=[v]);for(var C=0;C<v.length;++C){var w=v[C];if(K(w)||J(w))throw new _e('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:v});e.addValue(S,b,w,{propertyIsArray:!0})}}else{var T=-1===["@index","@id","@type","@value","@language"].indexOf(b);e.addValue(l,b,v,{propertyIsArray:T})}}else{if(!$(y))throw new _e('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:y});if("@reverse"in(v=a.expand(t,"@reverse",y,i)))for(var A in v["@reverse"])e.addValue(l,A,v["@reverse"][A],{propertyIsArray:!0});var S=l["@reverse"]||null;for(var A in v)if("@reverse"!==A){null===S&&(S=l["@reverse"]={}),e.addValue(S,A,[],{propertyIsArray:!0});for(var I=v[A],C=0;C<I.length;++C){var w=I[C];if(K(w)||J(w))throw new _e('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:v});e.addValue(S,A,w,{propertyIsArray:!0})}}}}}}h=Object.keys(l);var L=h.length;if("@value"in l){if("@type"in l&&"@language"in l)throw new _e('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and "@language".',"jsonld.SyntaxError",{code:"invalid value object",element:l});var N=L-1;if("@type"in l&&(N-=1),"@index"in l&&(N-=1),"@language"in l&&(N-=1),0!==N)throw new _e('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and at most one other property which can be "@type" or "@language".',"jsonld.SyntaxError",{code:"invalid value object",element:l});if(null===l["@value"])l=null;else{if("@language"in l&&!U(l["@value"]))throw new _e("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:l});if("@type"in l&&(!ee(l["@type"])||0===l["@type"].indexOf("_:")))throw new _e('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:l})}}else if("@type"in l&&!B(l["@type"]))l["@type"]=[l["@type"]];else if("@set"in l||"@list"in l){if(L>1&&!(2===L&&"@index"in l))throw new _e('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:l});"@set"in l&&(l=l["@set"],h=Object.keys(l),L=h.length)}else 1===L&&"@language"in l&&(l=null);return!$(l)||i.keepFreeFloatingNodes||o||null!==r&&"@graph"!==f||(0===L||"@value"in l||"@list"in l||1===L&&"@id"in l)&&(l=null),l},ke.prototype.createNodeMap=function(e,t){t=t||{};var r=t.namer||t.issuer||new le("_:b"),n={"@default":{}};return m(e,n,"@default",r),y(n)},ke.prototype.flatten=function(e){for(var t=this.createNodeMap(e),r=[],n=Object.keys(t).sort(),i=0;i<n.length;++i){var o=t[n[i]];Y(o)||r.push(o)}return r},ke.prototype.frame=function(e,t,r){var n={options:r,graphs:{"@default":{},"@merged":{}},subjectStack:[],link:{}},i=new le("_:b");m(e,n.graphs,"@merged",i),n.subjects=n.graphs["@merged"];var o=[];return b(n,Object.keys(n.subjects).sort(),t,o,null),o},ke.prototype.normalize=function(e,t,r){return"URDNA2015"===t.algorithm?new Oe(t).main(e,r):"URGNA2012"===t.algorithm?new Pe(t).main(e,r):void r(new Error("Invalid RDF Dataset Normalization algorithm: "+t.algorithm))},ke.prototype.fromRDF=function(t,r,n){var i={},o={"@default":i},a={};for(var s in t){var l=t[s];s in o||(o[s]={}),"@default"===s||s in i||(i[s]={"@id":s});for(var u=o[s],c=0;c<l.length;++c){var p=l[c],d=p.subject.value,f=p.predicate.value,h=p.object;d in u||(u[d]={"@id":d});var v=u[d],m="IRI"===h.type||"blank node"===h.type;if(!m||h.value in u||(u[h.value]={"@id":h.value}),f!==we||r.useRdfType||!m){var y=g(h,r.useNativeTypes);if(e.addValue(v,f,y,{propertyIsArray:!0}),m)if(h.value===Ce){var b=u[h.value];"usages"in b||(b.usages=[]),b.usages.push({node:v,property:f,value:y})}else h.value in a?a[h.value]=!1:a[h.value]={node:v,property:f,value:y}}else e.addValue(v,"@type",h.value,{propertyIsArray:!0})}}for(var s in o){var E=o[s];if(Ce in E){for(var x=E[Ce],S=0;S<x.usages.length;++S){for(var C=x.usages[S],v=C.node,w=C.property,T=C.value,A=[],I=[],L=Object.keys(v).length;w===Se&&$(a[v["@id"]])&&B(v[xe])&&1===v[xe].length&&B(v[Se])&&1===v[Se].length&&(3===L||4===L&&B(v["@type"])&&1===v["@type"].length&&"http://www.w3.org/1999/02/22-rdf-syntax-ns#List"===v["@type"][0])&&(A.push(v[xe][0]),I.push(v["@id"]),C=a[v["@id"]],v=C.node,w=C.property,T=C.value,L=Object.keys(v).length,0===v["@id"].indexOf("_:")););if(w===xe){if(v["@id"]===Ce)continue;T=E[T["@id"]][Se][0],A.pop(),I.pop()}delete T["@id"],T["@list"]=A.reverse();for(var N=0;N<I.length;++N)delete E[I[N]]}delete x.usages}}for(var R=[],_=Object.keys(i).sort(),S=0;S<_.length;++S){var k=_[S],v=i[k];if(k in o)for(var l=v["@graph"]=[],E=o[k],O=Object.keys(E).sort(),P=0;P<O.length;++P){var D=E[O[P]];Y(D)||l.push(D)}Y(v)||R.push(v)}n(null,R)},ke.prototype.toRDF=function(e,t){var r=new le("_:b"),n={"@default":{}};m(e,n,"@default",r);for(var i={},o=Object.keys(n).sort(),a=0;a<o.length;++a){var s=o[a];("@default"===s||ee(s))&&(i[s]=d(n[s],r,t))}return i},ke.prototype.processContext=function(t,r,n){$(r)&&"@context"in r&&B(r["@context"])&&(r=r["@context"]);var i=B(r)?r:[r];if(0===i.length)return t.clone();for(var o=t,a=0;a<i.length;++a){var s=i[a];if(null!==s){if($(s)&&"@context"in s&&(s=s["@context"]),!$(s))throw new _e("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:s});if(e.cache.activeCtx){var l=e.cache.activeCtx.get(t,s);if(l){o=t=l;continue}}t=o,o=o.clone();var u={};if("@base"in s){var c=s["@base"];if(null===c)c=null;else{if(!U(c))throw new _e('Invalid JSON-LD syntax; the value of "@base" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:s});if(""!==c&&!ee(c))throw new _e('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI or the empty string.',"jsonld.SyntaxError",{code:"invalid base IRI",context:s})}null!==c&&(c=e.url.parse(c||"")),o["@base"]=c,u["@base"]=!0}if("@vocab"in s){var p=s["@vocab"];if(null===p)delete o["@vocab"];else{if(!U(p))throw new _e('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:s});if(!ee(p))throw new _e('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:s});o["@vocab"]=p}u["@vocab"]=!0}if("@language"in s){var p=s["@language"];if(null===p)delete o["@language"];else{if(!U(p))throw new _e('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:s});o["@language"]=p.toLowerCase()}u["@language"]=!0}for(var d in s)O(o,s,d,u);e.cache.activeCtx&&e.cache.activeCtx.set(t,s,o)}else o=t=M(n)}return o};var Oe=function(){var t={subject:"s",object:"o",name:"g"},r=function(e){e=e||{},this.name="URDNA2015",this.options=e,this.blankNodeInfo={},this.hashToBlankNodes={},this.canonicalIssuer=new le("_:c14n"),this.quads=[],this.schedule={},this.schedule.MAX_DEPTH="maxCallStackDepth"in e?e.maxCallStackDepth:500,this.schedule.MAX_TOTAL_DEPTH="maxTotalCallStackDepth"in e?e.maxCallStackDepth:4294967295,this.schedule.depth=0,this.schedule.totalDepth=0,this.schedule.timeSlice="timeSlice"in e?e.timeSlice:10};return r.prototype.doWork=function(t,r){var n=this.schedule;if(n.totalDepth>=n.MAX_TOTAL_DEPTH)return r(new Error("Maximum total call stack depth exceeded; normalization aborting."));!function i(){if(n.depth===n.MAX_DEPTH)return n.depth=0,n.running=!1,e.nextTick(i);var o=(new Date).getTime();if(n.running||(n.start=(new Date).getTime(),n.deadline=n.start+n.timeSlice),o<n.deadline)return n.running=!0,n.depth++,n.totalDepth++,t(function(e,t){n.depth--,n.totalDepth--,r(e,t)});n.depth=0,n.running=!1,e.setImmediate(i)}()},r.prototype.forEach=function(e,t,r){var n,i,o=this,a=0;if(B(e))i=e.length,n=function(){return a!==i&&(n.value=e[a++],n.key=a,!0)};else{var s=Object.keys(e);i=s.length,n=function(){return a!==i&&(n.key=s[a++],n.value=e[n.key],!0)}}!function e(i,a){return i?r(i):n()?o.doWork(function(){t(n.value,n.key,e)}):void r()}()},r.prototype.waterfall=function(e,t){var r=this;r.forEach(e,function(e,t,n){r.doWork(e,n)},t)},r.prototype.whilst=function(e,t,r){var n=this;!function i(o){return o?r(o):e()?void n.doWork(t,i):r()}()},r.prototype.main=function(e,t){var r=this;r.schedule.start=(new Date).getTime();var n;if(r.options.format&&"application/nquads"!==r.options.format)return t(new _e("Unknown output format.","jsonld.UnknownFormat",{format:r.options.format}));var i={};r.waterfall([function(t){r.forEach(e,function(e,t,n){"@default"===t&&(t=null),r.forEach(e,function(e,n,o){null!==t&&(0===t.indexOf("_:")?e.name={type:"blank node",value:t}:e.name={type:"IRI",value:t}),r.quads.push(e),r.forEachComponent(e,function(t){if("blank node"===t.type){var n=t.value;n in r.blankNodeInfo?r.blankNodeInfo[n].quads.push(e):(i[n]=!0,r.blankNodeInfo[n]={quads:[e]})}}),o()},n)},t)},function(e){var t=!0;r.whilst(function(){return t},function(e){t=!1,r.hashToBlankNodes={},r.waterfall([function(e){r.forEach(i,function(e,t,n){r.hashFirstDegreeQuads(t,function(e,i){if(e)return n(e);i in r.hashToBlankNodes?r.hashToBlankNodes[i].push(t):r.hashToBlankNodes[i]=[t],n()})},e)},function(e){var n=Object.keys(r.hashToBlankNodes).sort();r.forEach(n,function(e,n,o){var a=r.hashToBlankNodes[e];if(a.length>1)return o();var s=a[0];r.canonicalIssuer.getId(s),delete i[s],delete r.hashToBlankNodes[e],t=!0,o()},e)}],e)},e)},function(e){var t=Object.keys(r.hashToBlankNodes).sort();r.forEach(t,function(e,t,n){var i=[],o=r.hashToBlankNodes[e];r.waterfall([function(e){r.forEach(o,function(e,t,n){if(r.canonicalIssuer.hasId(e))return n();var o=new le("_:b");o.getId(e),r.hashNDegreeQuads(e,o,function(e,t){if(e)return n(e);i.push(t),n()})},e)},function(e){i.sort(function(e,t){return e.hash<t.hash?-1:e.hash>t.hash?1:0}),r.forEach(i,function(e,t,n){for(var i in e.issuer.existing)r.canonicalIssuer.getId(i);n()},e)}],n)},e)},function(e){var t=[];r.waterfall([function(e){r.forEach(r.quads,function(e,n,i){r.forEachComponent(e,function(e){"blank node"===e.type&&0!==e.value.indexOf(r.canonicalIssuer.prefix)&&(e.value=r.canonicalIssuer.getId(e.value))}),t.push(ae(e)),i()},e)},function(e){if(t.sort(),"application/nquads"===r.options.format)return n=t.join(""),e();n=ie(t.join("")),e()}],e)}],function(e){t(e,n)})},r.prototype.hashFirstDegreeQuads=function(e,t){var r=this,n=r.blankNodeInfo[e];if("hash"in n)return t(null,n.hash);var i=[],o=n.quads;r.forEach(o,function(t,n,o){var a={predicate:t.predicate};r.forEachComponent(t,function(t,n){a[n]=r.modifyFirstDegreeComponent(e,t,n)}),i.push(ae(a)),o()},function(e){if(e)return t(e);i.sort(),n.hash=Fe.hashNQuads(r.name,i),t(null,n.hash)})},r.prototype.modifyFirstDegreeComponent=function(e,t){return"blank node"!==t.type?t:(t=te(t),t.value=t.value===e?"_:a":"_:z",t)},r.prototype.hashRelatedBlankNode=function(e,t,r,n,i){var o,a=this;a.waterfall([function(t){return a.canonicalIssuer.hasId(e)?(o=a.canonicalIssuer.getId(e),t()):r.hasId(e)?(o=r.getId(e),t()):void a.hashFirstDegreeQuads(e,function(e,r){if(e)return t(e);o=r,t()})}],function(e){if(e)return i(e);var r=new Fe(a.name);return r.update(n),"g"!==n&&r.update(a.getRelatedPredicate(t)),r.update(o),i(null,r.digest())})},r.prototype.getRelatedPredicate=function(e){return"<"+e.predicate.value+">"},r.prototype.hashNDegreeQuads=function(e,t,r){var n,i=this,o=new Fe(i.name);i.waterfall([function(r){i.createHashToRelated(e,t,function(e,t){if(e)return r(e);n=t,r()})},function(e){var r=Object.keys(n).sort();i.forEach(r,function(e,r,a){o.update(e);var s,l="",u=new De(n[e]);i.whilst(function(){return u.hasNext()},function(e){var r=u.next(),n=t.clone(),o="",a=[];i.waterfall([function(t){i.forEach(r,function(t,r,s){if(i.canonicalIssuer.hasId(t)?o+=i.canonicalIssuer.getId(t):(n.hasId(t)||a.push(t),o+=n.getId(t)),0!==l.length&&o.length>=l.length&&o>l)return e();s()},t)},function(t){i.forEach(a,function(t,r,a){i.hashNDegreeQuads(t,n,function(r,i){return r?a(r):(o+=n.getId(t),o+="<"+i.hash+">",n=i.issuer,0!==l.length&&o.length>=l.length&&o>l?e():void a())})},t)},function(e){(0===l.length||o<l)&&(l=o,s=n),e()}],e)},function(e){if(e)return a(e);o.update(l),t=s,a()})},e)}],function(e){r(e,{hash:o.digest(),issuer:t})})},r.prototype.createHashToRelated=function(e,r,n){var i=this,o={},a=i.blankNodeInfo[e].quads;i.forEach(a,function(n,a,s){i.forEach(n,function(a,s,l){if("predicate"===s||"blank node"!==a.type||a.value===e)return l();var u=a.value,c=t[s];i.hashRelatedBlankNode(u,n,r,c,function(e,t){if(e)return l(e);t in o?o[t].push(u):o[t]=[u],l()})},s)},function(e){n(e,o)})},r.prototype.forEachComponent=function(e,t){for(var r in e)"predicate"!==r&&t(e[r],r,e)},r}(),Pe=function(){var e=function(e){Oe.call(this,e),this.name="URGNA2012"};return e.prototype=new Oe,e.prototype.modifyFirstDegreeComponent=function(e,t,r){return"blank node"!==t.type?t:(t=te(t),t.value="name"===r?"_:g":t.value===e?"_:a":"_:z",t)},e.prototype.getRelatedPredicate=function(e){return e.predicate.value},e.prototype.createHashToRelated=function(e,t,r){var n=this,i={},o=n.blankNodeInfo[e].quads;n.forEach(o,function(r,o,a){var s,l;if("blank node"===r.subject.type&&r.subject.value!==e)l=r.subject.value,s="p";else{if("blank node"!==r.object.type||r.object.value===e)return a();l=r.object.value,s="r"}n.hashRelatedBlankNode(l,r,t,s,function(e,t){t in i?i[t].push(l):i[t]=[l],a()})},function(e){r(e,i)})},e}();Object.keys||(Object.keys=function(e){if(e!==Object(e))throw new TypeError("Object.keys called on non-object");var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}),e.registerRDFParser("application/nquads",ie),e.registerRDFParser("rdfa-api",se),e.IdentifierIssuer=le,e.UniqueNamer=le,le.prototype.clone=function(){var e=new le(this.prefix);return e.counter=this.counter,e.existing=te(this.existing),e},le.prototype.getId=function(e){if(e&&e in this.existing)return this.existing[e];var t=this.prefix+this.counter;return this.counter+=1,e&&(this.existing[e]=t),t},le.prototype.getName=le.prototype.getName,le.prototype.hasId=function(e){return e in this.existing},le.prototype.isNamed=le.prototype.hasId;var De=function(e){this.list=e.sort(),this.done=!1,this.left={};for(var t=0;t<e.length;++t)this.left[e[t]]=!0};De.prototype.hasNext=function(){return!this.done},De.prototype.next=function(){for(var e=this.list.slice(),t=null,r=0,n=this.list.length,i=0;i<n;++i){var o=this.list[i],a=this.left[o];(null===t||o>t)&&(a&&i>0&&o>this.list[i-1]||!a&&i<n-1&&o>this.list[i+1])&&(t=o,r=i)}if(null===t)this.done=!0;else{var s=this.left[t]?r-1:r+1;this.list[r]=this.list[s],this.list[s]=t;for(var i=0;i<n;++i)this.list[i]>t&&(this.left[this.list[i]]=!this.left[this.list[i]])}return e};var Fe=function(e){if(!(this instanceof Fe))return new Fe(e);if(-1===["URDNA2015","URGNA2012"].indexOf(e))throw new Error("Invalid RDF Dataset Normalization algorithm: "+e);Fe._init.call(this,e)};if(Fe.hashNQuads=function(e,t){for(var r=new Fe(e),n=0;n<t.length;++n)r.update(t[n]);return r.digest()},function(e){if(e){var t=r(48);return Fe._init=function(e){e="URDNA2015"===e?"sha256":"sha1",this.md=t.createHash(e)},Fe.prototype.update=function(e){return this.md.update(e,"utf8")},void(Fe.prototype.digest=function(){return this.md.digest("hex")})}Fe._init=function(e){e="URDNA2015"===e?new o.Algorithm:new i.Algorithm,this.md=new n(e)},Fe.prototype.update=function(e){return this.md.update(e)},Fe.prototype.digest=function(){return this.md.digest().toHex()};var n=function(e){if(!(this instanceof n))return new n(e);if(this._algorithm=e,!n._padding||n._padding.length<this._algorithm.blockSize){n._padding=String.fromCharCode(128);for(var t=String.fromCharCode(0),r=64;r>0;)1&r&&(n._padding+=t),(r>>>=1)>0&&(t+=t)}this.start()};n.prototype.start=function(){this.messageLength=0,this.fullMessageLength=[];for(var e=this._algorithm.messageLengthSize/4,t=0;t<e;++t)this.fullMessageLength.push(0);return this._input=new n.ByteBuffer,this.state=this._algorithm.start(),this},n.prototype.update=function(e){e=new n.ByteBuffer(unescape(encodeURIComponent(e))),this.messageLength+=e.length();var t=e.length();t=[t/4294967296>>>0,t>>>0];for(var r=this.fullMessageLength.length-1;r>=0;--r)this.fullMessageLength[r]+=t[1],t[1]=t[0]+(this.fullMessageLength[r]/4294967296>>>0),this.fullMessageLength[r]=this.fullMessageLength[r]>>>0,t[0]=t[1]/4294967296>>>0;for(this._input.putBytes(e.bytes());this._input.length()>=this._algorithm.blockSize;)this.state=this._algorithm.digest(this.state,this._input);return(this._input.read>2048||0===this._input.length())&&this._input.compact(),this},n.prototype.digest=function(){var e=new n.ByteBuffer;e.putBytes(this._input.bytes());var t=this.fullMessageLength[this.fullMessageLength.length-1]+this._algorithm.messageLengthSize,r=t&this._algorithm.blockSize-1;e.putBytes(n._padding.substr(0,this._algorithm.blockSize-r));for(var i=new n.ByteBuffer,o=0;o<this.fullMessageLength.length;++o)i.putInt32(this.fullMessageLength[o]<<3|this.fullMessageLength[o+1]>>>28);this._algorithm.writeMessageLength(e,i);var a=this._algorithm.digest(this.state.copy(),e),s=new n.ByteBuffer;return a.write(s),s},n.ByteBuffer=function(e){this.data="string"==typeof e?e:"",this.read=0},n.ByteBuffer.prototype.putInt32=function(e){this.data+=String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e)},n.ByteBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e},n.ByteBuffer.prototype.putBytes=function(e){this.data+=e},n.ByteBuffer.prototype.bytes=function(){return this.data.slice(this.read)},n.ByteBuffer.prototype.length=function(){return this.data.length-this.read},n.ByteBuffer.prototype.compact=function(){this.data=this.data.slice(this.read),this.read=0},n.ByteBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var r=this.data.charCodeAt(t);r<16&&(e+="0"),e+=r.toString(16)}return e};var i={_w:null};i.Algorithm=function(){this.name="sha1",this.blockSize=64,this.digestLength=20,this.messageLengthSize=8},i.Algorithm.prototype.start=function(){return i._w||(i._w=new Array(80)),i._createState()},i.Algorithm.prototype.writeMessageLength=function(e,t){e.putBytes(t.bytes())},i.Algorithm.prototype.digest=function(e,t){for(var r,n,o,a,s,l,u,c,p=t.length(),d=i._w;p>=64;){for(n=e.h0,o=e.h1,a=e.h2,s=e.h3,l=e.h4,c=0;c<16;++c)r=t.getInt32(),d[c]=r,u=s^o&(a^s),r=(n<<5|n>>>27)+u+l+1518500249+r,l=s,s=a,a=o<<30|o>>>2,o=n,n=r;for(;c<20;++c)r=d[c-3]^d[c-8]^d[c-14]^d[c-16],r=r<<1|r>>>31,d[c]=r,u=s^o&(a^s),r=(n<<5|n>>>27)+u+l+1518500249+r,l=s,s=a,a=o<<30|o>>>2,o=n,n=r;for(;c<32;++c)r=d[c-3]^d[c-8]^d[c-14]^d[c-16],r=r<<1|r>>>31,d[c]=r,u=o^a^s,r=(n<<5|n>>>27)+u+l+1859775393+r,l=s,s=a,a=o<<30|o>>>2,o=n,n=r;for(;c<40;++c)r=d[c-6]^d[c-16]^d[c-28]^d[c-32],r=r<<2|r>>>30,d[c]=r,u=o^a^s,r=(n<<5|n>>>27)+u+l+1859775393+r,l=s,s=a,a=o<<30|o>>>2,o=n,n=r;for(;c<60;++c)r=d[c-6]^d[c-16]^d[c-28]^d[c-32],r=r<<2|r>>>30,d[c]=r,u=o&a|s&(o^a),r=(n<<5|n>>>27)+u+l+2400959708+r,l=s,s=a,a=o<<30|o>>>2,o=n,n=r;for(;c<80;++c)r=d[c-6]^d[c-16]^d[c-28]^d[c-32],r=r<<2|r>>>30,d[c]=r,u=o^a^s,r=(n<<5|n>>>27)+u+l+3395469782+r,l=s,s=a,a=o<<30|o>>>2,o=n,n=r;e.h0=e.h0+n|0,e.h1=e.h1+o|0,e.h2=e.h2+a|0,e.h3=e.h3+s|0,e.h4=e.h4+l|0,p-=64}return e},i._createState=function(){var e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520};return e.copy=function(){var t=i._createState();return t.h0=e.h0,t.h1=e.h1,t.h2=e.h2,t.h3=e.h3,t.h4=e.h4,t},e.write=function(t){t.putInt32(e.h0),t.putInt32(e.h1),t.putInt32(e.h2),t.putInt32(e.h3),t.putInt32(e.h4)},e};var o={_k:null,_w:null};o.Algorithm=function(){this.name="sha256",this.blockSize=64,this.digestLength=32,this.messageLengthSize=8},o.Algorithm.prototype.start=function(){return o._k||o._init(),o._createState()},o.Algorithm.prototype.writeMessageLength=function(e,t){e.putBytes(t.bytes())},o.Algorithm.prototype.digest=function(e,t){for(var r,n,i,a,s,l,u,c,p,d,f,h,g,v,m,y=t.length(),b=o._k,E=o._w;y>=64;){for(u=0;u<16;++u)E[u]=t.getInt32();for(;u<64;++u)r=E[u-2],r=(r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10,n=E[u-15],n=(n>>>7|n<<25)^(n>>>18|n<<14)^n>>>3,E[u]=r+E[u-7]+n+E[u-16]|0;for(c=e.h0,p=e.h1,d=e.h2,f=e.h3,h=e.h4,g=e.h5,v=e.h6,m=e.h7,u=0;u<64;++u)a=(h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7),s=v^h&(g^v),i=(c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),l=c&p|d&(c^p),r=m+a+s+b[u]+E[u],n=i+l,m=v,v=g,g=h,h=f+r|0,f=d,d=p,p=c,c=r+n|0;e.h0=e.h0+c|0,e.h1=e.h1+p|0,e.h2=e.h2+d|0,e.h3=e.h3+f|0,e.h4=e.h4+h|0,e.h5=e.h5+g|0,e.h6=e.h6+v|0,e.h7=e.h7+m|0,y-=64}return e},o._createState=function(){var e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225};return e.copy=function(){var t=o._createState();return t.h0=e.h0,t.h1=e.h1,t.h2=e.h2,t.h3=e.h3,t.h4=e.h4,t.h5=e.h5,t.h6=e.h6,t.h7=e.h7,t},e.write=function(t){t.putInt32(e.h0),t.putInt32(e.h1),t.putInt32(e.h2),t.putInt32(e.h3),t.putInt32(e.h4),t.putInt32(e.h5),t.putInt32(e.h6),t.putInt32(e.h7)},e},o._init=function(){o._k=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],o._w=new Array(64)}}(u),!he)var Me=function(){he=r(48).XMLSerializer};if(e.url={},e.url.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},e.url.parse=function(t,r){for(var n={},i=e.url.parsers[r||"full"],o=i.regex.exec(t),a=i.keys.length;a--;)n[i.keys[a]]=void 0===o[a]?null:o[a];return n.normalizedPath=ue(n.path,!!n.authority),n},u?e.useDocumentLoader("node"):"undefined"!=typeof XMLHttpRequest&&e.useDocumentLoader("xhr"),u){e.use=function(t){switch(t){case"request":e.request=r(48);break;default:throw new _e("Unknown extension.","jsonld.UnknownExtension",{extension:t})}};var je={exports:{},filename:a};r(48)(je,"version"),e.version=je.exports.version}return e},d=function(){return p(function(){return d()})};!u&&r(406)?(s=[],void 0!==(l=function(){return p(d),d}.apply(t,s))&&(e.exports=l)):(p(d),void 0!==e&&e.exports&&(e.exports=d),c&&("undefined"==typeof jsonld?jsonld=jsonldjs=d:jsonldjs=d))}()}).call(t,r(28),r(11),r(104).setImmediate,"/")},function(e,t){},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t){},function(e,t,r){var n=r(10),i=r(10),o=(r(102).QuadIndex,r(102).Pattern),a=r(146),s=r(144).AbstractQueryTree;Callbacks={},Callbacks.ANYTHING={token:"var",value:"_"},Callbacks.added="added",Callbacks.deleted="deleted",Callbacks.eventsFlushed="eventsFlushed",Callbacks.CallbacksBackend=function(){this.aqt=new s,this.engine=arguments[0],this.indexMap={},this.observersMap={},this.queriesIndexMap={},this.emptyNotificationsMap={},this.queriesList=[],this.pendingQueries=[],this.matchedQueries=[],this.updateInProgress=null,this.indices=["SPOG","GP","OGS","POG","GSP","OS"],this.componentOrders={SPOG:["subject","predicate","object","graph"],GP:["graph","predicate","subject","object"],OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate","object"],OS:["object","subject","predicate","graph"]},this.callbackCounter=0,this.callbacksMap={},this.callbacksInverseMap={},this.queryCounter=0,this.queriesMap={},this.queriesCallbacksMap={},this.queriesInverseMap={};for(var e=0;e<this.indices.length;e++){var t=this.indices[e];this.indexMap[t]={},this.queriesIndexMap[t]={}}},Callbacks.CallbacksBackend.prototype.startGraphModification=function(){!0!==this.ongoingModification&&(this.pendingQueries=[].concat(this.queriesList),this.matchedQueries=[],null==this.updateInProgress&&(this.updateInProgress={},this.updateInProgress[Callbacks.added]=[],this.updateInProgress[Callbacks.deleted]=[]))},Callbacks.CallbacksBackend.prototype.nextGraphModification=function(e,t){this.updateInProgress[e].push(t)},Callbacks.CallbacksBackend.prototype.endGraphModification=function(e){if(!0!==this.ongoingModification){var t=this;if(null!=this.updateInProgress){var r=t.updateInProgress;t.updateInProgress=null,this.sendNotification(Callbacks.deleted,r[Callbacks.deleted],function(){t.sendNotification(Callbacks.added,r[Callbacks.added],function(){t.sendEmptyNotification(Callbacks.eventsFlushed,null,function(){t.dispatchQueries(function(){e(!0)})})})})}else e(!0)}else e(!0)},Callbacks.CallbacksBackend.prototype.cancelGraphModification=function(){!0!==this.ongoingModification&&(this.updateInProgress=null)},Callbacks.CallbacksBackend.prototype.sendNotification=function(e,t,r){for(var n={},i=0;i<t.length;i++){var o=t[i];for(var a in this.indexMap){var s=this.indexMap[a],l=this.componentOrders[a];this._searchCallbacksInIndex(s,l,e,o,n),0!=this.pendingQueries.length&&(s=this.queriesIndexMap[a],this._searchQueriesInIndex(s,l,o))}}this.dispatchNotifications(n),null!=r&&r(!0)},Callbacks.CallbacksBackend.prototype.sendEmptyNotification=function(e,t,r){for(var n=this.emptyNotificationsMap[e]||[],i=0;i<n.length;i++)n[i](e,t);r()},Callbacks.CallbacksBackend.prototype.dispatchNotifications=function(e){for(var t in e){var r=this.callbacksMap[t],n=e[t][Callbacks.deleted];if(null!=n)try{r(Callbacks.deleted,n)}catch(e){}for(var i in e[t])if(i!=Callbacks.deleted)try{r(i,e[t][i])}catch(e){}}},Callbacks.CallbacksBackend.prototype._searchCallbacksInIndex=function(e,t,r,n,i){for(var o=n[1],n=n[0],a=0;a<t.length+1;a++){for(var s=e._||[],l=[],u=0;u<s.length;u++){var c=s[u];null!=this.callbacksMap[c]&&(i[c]=i[c]||{},i[c][r]=i[c][r]||[],i[c][r].push(n),l.push(c))}e._=l;var p=t[a];if(null==e[""+o[p]])break;e=e[""+o[p]]}},Callbacks.CallbacksBackend.prototype.subscribeEmpty=function(e,t){var r=this.emptyNotificationsMap[e]||[];r.push(t),this.emptyNotificationsMap[e]=r},Callbacks.CallbacksBackend.prototype.unsubscribeEmpty=function(e,t){var r=this.emptyNotificationsMap[e];null!=r&&(r=n.reject(r,function(e){return e===t})),this.emptyNotificationsMap[e]=r},Callbacks.CallbacksBackend.prototype.subscribe=function(e,t,r,n,i,a){var s=this._tokenizeComponents(e,t,r,n),l={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,l);var u=this;this.engine.normalizeQuad(s,l,!0,function(e){for(var t=new o(e),r=u._indexForPattern(t),n=u.componentOrders[r],s=u.indexMap[r],l=0;l<n.length;l++){var c=n[l],p=e[c];if("_"===p){null==s._&&(s._=[]),u.callbackCounter++,s._.push(u.callbackCounter),u.callbacksMap[u.callbackCounter]=i,u.callbacksInverseMap[i]=u.callbackCounter;break}l===n.length-1?(s[p]=s[p]||{_:[]},u.callbackCounter++,s[p]._.push(u.callbackCounter),u.callbacksMap[u.callbackCounter]=i,u.callbacksInverseMap[i]=u.callbackCounter):(s[p]=s[p]||{},s=s[p])}null!=a&&a(!0)})},Callbacks.CallbacksBackend.prototype.unsubscribe=function(e){var t=this.callbacksInverseMap[e];null!=t&&(delete this.callbacksInverseMap[e],delete this.callbacksMap[t])},Callbacks.CallbacksBackend.prototype._tokenizeComponents=function(e,t,r,n){var i={};return null==e?i.subject=Callbacks.ANYTHING:0==e.indexOf("_:")?i.subject={token:"blank",value:e}:i.subject={token:"uri",value:e},i.predicate=null==t?Callbacks.ANYTHING:{token:"uri",value:t},i.object=null==r?Callbacks.ANYTHING:{token:"uri",value:r},i.graph=null==n?Callbacks.ANYTHING:{token:"uri",value:n},i},Callbacks.CallbacksBackend.prototype._indexForPattern=function(e){for(var t=e.indexKey,r=this.indices,i=0;i<r.length;i++)for(var o=r[i],a=this.componentOrders[o],s=0;s<a.length&&!1!==n.include(t,a[s]);s++)if(s==t.length-1)return o;return"SPOG"},Callbacks.CallbacksBackend.prototype.observeNode=function(){var e,t,r,n;4===arguments.length?(e=arguments[0],t=arguments[1],r=arguments[2],n=arguments[3]):(e=arguments[0],t=this.engine.lexicon.defaultGraphUri,r=arguments[1],n=arguments[2]);var i="CONSTRUCT { <"+e+"> ?p ?o } WHERE { GRAPH <"+t+"> { <"+e+"> ?p ?o } }",o=this,s={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,s);var l=[];this.engine.execute(i,function(t,i){if(t)n&&n(!1);else{var u=i,c=!1,p=function(e,t){if("eventsFlushed"===e&&c){c=!1;try{r(u)}catch(e){}}else if("eventsFlushed"!==e){c=!0;for(var n=0;n<t.length;n++){var i=t[n],p=a.buildRDFResource(i.subject,l,o.engine,s),d=a.buildRDFResource(i.predicate,l,o.engine,s),f=a.buildRDFResource(i.object,l,o.engine,s);null!=p&&null!=d&&null!=f&&(i=new a.Triple(p,d,f),e===Callbacks.added?u.add(i):e===Callbacks.deleted&&u.remove(i))}}};o.observersMap[r]=p,o.subscribeEmpty(Callbacks.eventsFlushed,p),o.subscribe(e,null,null,null,p,function(){try{r(u)}catch(e){}n&&n(!0)})}})},Callbacks.CallbacksBackend.prototype.stopObservingNode=function(e){var t=this.observersMap[e];return!!t&&(this.unsubscribe(t),this.unsubscribeEmpty(Callbacks.eventsFlushed,t),!0)},Callbacks.CallbacksBackend.prototype.observeQuery=function(e,t,r){var n=this.aqt.parseQueryString(e),a=this.aqt.parseSelect(n.units[0]),s=this.aqt.collectBasicTriples(a),l=this,u={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,u);var c=this.queryCounter;this.queryCounter++,this.queriesMap[c]=e,this.queriesInverseMap[e]=c,this.queriesList.push(c),this.queriesCallbacksMap[c]=t,i.eachSeries(s,function(e,t){null==e.graph&&(e.graph=l.engine.lexicon.defaultGraphUriTerm),l.engine.normalizeQuad(e,u,!0,function(e){for(var r=new o(e),n=l._indexForPattern(r),i=l.componentOrders[n],a=l.queriesIndexMap[n],s=0;s<i.length;s++){var u=i[s],p=e[u];if("string"==typeof p){null==a._&&(a._=[]),a._.push(c);break}s===i.length-1?(a[p]=a[p]||{_:[]},a[p]._.push(c)):(a[p]=a[p]||{},a=a[p])}t()})},function(){l.engine.execute(e,function(e,r){e?console.log("ERROR in query callback "+r):t(r)}),null!=r&&r()})},Callbacks.CallbacksBackend.prototype.stopObservingQuery=function(e){var t=this.queriesInverseMap[e];null!=t&&(delete this.queriesInverseMap[e],delete this.queriesMap[t],this.queriesList=n.reject(this.queriesList,function(e){return e===t}))},Callbacks.CallbacksBackend.prototype._searchQueriesInIndex=function(e,t,r){for(var i=r[1],r=r[0],o=0;o<t.length+1;o++){for(var a=e._||[],s=[],l=0;l<a.length;l++){var u=a[l];n.include(this.pendingQueries,u)&&(n.remove(this.pendingQueries,function(e){return e===u}),this.matchedQueries.push(u)),null!=this.queriesMap[u]&&s.push(u)}e._=s;var c=t[o];if(null==e[""+i[c]])break;e=e[""+i[c]]}},Callbacks.CallbacksBackend.prototype.dispatchQueries=function(e){var t,r,n=this,o={};i.eachSeries(this.matchedQueries,function(e,i){null==o[e]?(o[e]=!0,t=n.queriesMap[e],r=n.queriesCallbacksMap[e],n.engine.execute(t,function(e,t){if(!e)try{r(t)}catch(e){}i()})):i()},function(){e()})},Callbacks.CallbacksBackend.added=Callbacks.added,Callbacks.CallbacksBackend.deleted=Callbacks.deleted,Callbacks.CallbacksBackend.eventsFlushed=Callbacks.eventsFlushed,e.exports=Callbacks},function(e,t,r){var n=r(102).QuadIndex,i=r(10);QuadBackend=function(e,t){this.indexMap={},this.treeOrder=e.treeOrder,this.indices=e.index||QuadBackend.allIndices,this.componentOrders=QuadBackend.componentOrders;var r=this;i.eachSeries(this.indices,function(e,t){new n({order:r.treeOrder,componentOrder:r.componentOrders[e]},function(n){r.indexMap[e]=n,t()})},function(){t(r)})},QuadBackend.allIndices=["SPOG","GP","OGS","POG","GSP","OS"],QuadBackend.componentOrders={SPOG:["subject","predicate","object","graph"],GP:["graph","predicate","subject","object"],OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate","object"],OS:["object","subject","predicate","graph"]},QuadBackend.prototype._indexForPattern=function(e){for(var t=e.indexKey,r=0;r<QuadBackend.allIndices.length;r++)for(var n=QuadBackend.allIndices[r],o=QuadBackend.componentOrders[n],a=0;a<o.length&&!1!==i.include(t,o[a]);a++)if(a==t.length-1)return n;return"SPOG"},QuadBackend.prototype.index=function(e,t){var r=this;i.eachSeries(this.indices,function(t,n){r.indexMap[t].insert(e,function(){n()})},function(){t(!0)})},QuadBackend.prototype.range=function(e,t){var r=this._indexForPattern(e),n=this.indexMap[r];null!=n&&n.range(e,function(e){t(e)})},QuadBackend.prototype.search=function(e,t){var r=this.indexMap.SPOG;null!=r&&r.search(e,function(e){t(null!=e)})},QuadBackend.prototype.delete=function(e,t){var r=this;i.eachSeries(this.indices,function(t,n){r.indexMap[t].delete(e,function(){n()})},function(){t(!0)})},QuadBackend.prototype.clear=function(e){var t=this;i.eachSeries(this.indices,function(e,r){new n({order:t.treeOrder,componentOrder:t.componentOrders[e]},function(n){t.indexMap[e]=n,r()})},function(){e(!0)})},e.exports.QuadBackend=QuadBackend},function(e,t,r){var n=r(10);PersistentQuadBackend=function(e,t){var r=this;if(0!==arguments){n.registerIndexedDB(r),this.indexMap={},this.indices=["S","P","O","G","SP","SO","SG","PO","PG","OG","SPO","SPG","SOG","POG","SPOG"],this.componentOrders={S:["subject","predicate","object","graph"],P:["predicate","subject","object","graph"],O:["object","subject","predicate","graph"],G:["graph","subject","predicate","object"],SP:["subject","predicate","object","graph"],SO:["subject","object","predicate","graph"],SG:["subject","graph","predicate","object"],PO:["predicate","object","subject","graph"],PG:["predicate","graph","subject","object"],OG:["object","graph","subject","predicate"],SPO:["subject","predicate","object","graph"],SPG:["subject","predicate","graph","object"],SOG:["subject","object","graph","predicate"],POG:["predicate","object","graph","subject"],SPOG:["subject","predicate","object","graph"]},this.componentOrdersMap={};for(var i in this.componentOrders){var o=this.componentOrders[i],a=o.slice(0,i.length).sort().join(".");this.componentOrdersMap[a]=i}r.dbName=e.name||"rdfstorejs";var s=r.indexedDB.open(this.dbName+"_db",1);s.onerror=function(e){t(null,new Error("Error opening IndexedDB: "+e.target.errorCode))},s.onsuccess=function(e){r.db=e.target.result,t(r)},s.onupgradeneeded=function(e){var t=e.target.result,i=t.createObjectStore(r.dbName,{keyPath:"SPOG"});n.each(r.indices,function(e){"SPOG"!==e&&i.createIndex(e,e,{unique:!1})})}}},PersistentQuadBackend.prototype.index=function(e,t){var r=this;n.each(this.indices,function(t){e[t]=r._genMinIndexKey(e,t)});var i=r.db.transaction([r.dbName],"readwrite");i.oncomplete=function(e){},i.onerror=function(e){t(null,new Error(e.target.statusCode))},i.objectStore(r.dbName).add(e).onsuccess=function(e){t(!0)}},PersistentQuadBackend.prototype.range=function(e,t){var r,n=this,i=n.db.transaction([n.dbName]).objectStore(n.dbName),o=this._indexForPattern(e),a=this._genMinIndexKey(e,o),s=this._genMaxIndexKey(e,o),l=n.IDBKeyRange.bound(a,s,!1,!1),u=[];r="SPOG"===o?i:i.index(o),r.openCursor(l).onsuccess=function(e){var r=e.target.result;r?(u.push(r.value),r.continue()):t(u)}},PersistentQuadBackend.prototype.search=function(e,t){var r=this,n=r.db.transaction([r.dbName]).objectStore(r.dbName),i=this._genMinIndexKey(e,"SPOG"),o=n.get(i);o.onerror=function(e){t(null,new Error(e.target.statusCode))},o.onsuccess=function(e){t(null!=e.target.result)}},PersistentQuadBackend.prototype.delete=function(e,t){var r=this,n=r._genMinIndexKey(e,"SPOG"),i=r.db.transaction([r.dbName],"readwrite").objectStore(r.dbName).delete(n);i.onsuccess=function(){t(!0)},i.onerror=function(e){t(null,new Error(e.target.statusCode))}},PersistentQuadBackend.prototype._genMinIndexKey=function(e,t){var r=this.componentOrders[t];return n.map(r,function(t){return"string"==typeof e[t]||null==e[t]?"0":e[t]}).join(".")},PersistentQuadBackend.prototype._genMaxIndexKey=function(e,t){for(var r=this.componentOrders[t],i=[],o=0;o<r.length;o++){var a=r[o],s=e[a];i[o]="string"==typeof s?"z":s}return n.map(i,function(e){return""+e}).join(".")},PersistentQuadBackend.prototype._indexForPattern=function(e){var t=this,r=e.indexKey,n=r.sort().join("."),i=t.componentOrdersMap[n];if(null==i)throw new Error("Error, cannot find index for indexKey "+n);return i},PersistentQuadBackend.prototype.clear=function(e){var t,r=this,n=r.db.transaction([r.dbName],"readwrite");t=n.objectStore(r.dbName).clear(),t.onsuccess=function(){e()},t.onerror=function(){e()}},e.exports.PersistentQuadBackend=PersistentQuadBackend},function(e,t,r){var n=(r(145).Tree,r(10)),i=n,o=r(229).Lexicon;PersistentLexicon=function(e,t){var r=this;n.registerIndexedDB(r),this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri},this.oidCounter=1,r.dbName=t||"rdfstorejs";var i=r.indexedDB.open(this.dbName+"_lexicon",1);i.onerror=function(t){e(null,new Error("Error opening IndexedDB: "+t.target.errorCode))},i.onsuccess=function(t){r.db=t.target.result,e(r)},i.onupgradeneeded=function(e){r.db=e.target.result,r.db.createObjectStore("knownGraphs",{keyPath:"oid"}).createIndex("uriToken","uriToken",{unique:!0}),r.db.createObjectStore("components",{keyPath:"id",autoIncrement:!0}).createIndex("value","value",{unique:!0})}},PersistentLexicon.prototype.registerGraph=function(e,t,r){if(e!=this.defaultGraphOid){var n=this.db.transaction(["knownGraphs"],"readwrite");n.onerror=function(e){r(null,new Error(e.target.statusCode))};var i=n.objectStore("knownGraphs");i.get(t).onsuccess=function(n){n.target.result?r(!0):i.add({oid:e,uriToken:t}).onsuccess=function(e){r(!0)}}}else r()},PersistentLexicon.prototype.registeredGraphs=function(e,t){var r=[],n=this.db.transaction(["knownGraphs"],"readwrite").objectStore("knownGraphs"),i=n.openCursor();i.onsuccess=function(n){var i=n.target.result;i?(!0===e?r.push(i.value.uriToken):r.push(i.value.oid),i.continue()):t(r)},i.onerror=function(e){t(null,new Error("Error retrieving data from the cursor: "+e.target.errorCode))}},PersistentLexicon.prototype.registerUri=function(e,t){var r=this;if(e===this.defaultGraphUri)t(this.defaultGraphOid);else{var n=r.db.transaction(["components"],"readwrite").objectStore("components"),i=n.index("value").get("_u:"+e);i.onsuccess=function(r){var i=r.target.result;if(i){i.counter++;var o=i.id,a=n.put(i);a.onsuccess=function(e){t(o)},a.onerror=function(e){t(null,new Error("Error updating the URI data"+e.target.errorCode))}}else{var s=n.add({value:"_u:"+e,counter:0,uri:!0});s.onsuccess=function(e){t(e.target.result)},s.onerror=function(e){t(null,new Error("Error inserting the URI data"+e.target.errorCode))}}},i.onerror=function(e){t(null,new Error("Error retrieving the URI data"+e.target.errorCode))}}},PersistentLexicon.prototype.resolveUri=function(e,t){if(e===this.defaultGraphUri)t(this.defaultGraphOid);else{var r=this.db.transaction(["components"]).objectStore("components"),n=r.index("value").get("_u:"+e);n.onsuccess=function(e){t(null!=e.target.result?e.target.result.id:-1)},n.onerror=function(e){t(null,new Error("Error retrieving uri data "+e.target.errorCode))}}},PersistentLexicon.prototype.resolveUriCost=function(e,t){if(e===this.defaultGraphUri)t(0);else{var r=that.db.transaction(["components"]).objectStore("components"),n=r.index("value").get("_u:"+e);n.onsuccess=function(e){t(null!=e.target.result?e.target.result.cost:-1)},n.onerror=function(e){t(null,new Error("Error retrieving uri data "+e.target.errorCode))}}},PersistentLexicon.prototype.registerBlank=function(e){var t=guid(),r=this,n=r.db.transaction(["components"],"readwrite").objectStore("components"),i=n.add({value:"_b:"+t,counter:0,label:!0});i.onsuccess=function(t){e(t.target.result)},i.onerror=function(t){e(null,new Error("Error inserting the URI data"+t.target.errorCode))}},PersistentLexicon.prototype.resolveBlankCost=function(e,t){t(0)},PersistentLexicon.prototype.registerLiteral=function(e,t){var r=this,n=r.db.transaction(["components"],"readwrite").objectStore("components"),i=n.index("value").get("_l:"+e);i.onsuccess=function(r){var i=r.target.result;if(i){i.counter++;var o=i.id,a=n.put(i);a.onsuccess=function(e){t(o)},a.onerror=function(e){t(null,new Error("Error updating the literal data"+e.target.errorCode))}}else{var s=n.add({value:"_l:"+e,counter:0,literal:!0});s.onsuccess=function(e){t(e.target.result)},s.onerror=function(e){t(null,new Error("Error inserting the literal data"+e.target.errorCode))}}},i.onerror=function(e){t(null,new Error("Error retrieving the literal data"+e.target.errorCode))}},PersistentLexicon.prototype.resolveLiteral=function(e,t){var r=that.db.transaction(["components"]).objectStore("components"),n=r.index("value").get("_l:"+e);n.onsuccess=function(e){t(null!=e.target.result?e.target.result.id:-1)},n.onerror=function(e){t(null,new Error("Error retrieving literal data "+e.target.errorCode))}},PersistentLexicon.prototype.resolveLiteralCost=function(e,t){var r=that.db.transaction(["components"]).objectStore("components"),n=r.index("components").get(e);n.onsuccess=function(e){t(null!=e.target.result?e.target.result.cost:-1)},n.onerror=function(e){t(null,new Error("Error retrieving literal data "+e.target.errorCode))}},PersistentLexicon.prototype.parseLiteral=function(e){return o.prototype.parseLiteral(e)},PersistentLexicon.prototype.parseUri=function(e){return o.prototype.parseUri(e)},PersistentLexicon.prototype.retrieve=function(e,t){var r,n,i=this;e===this.defaultGraphOid?t({token:"uri",value:this.defaultGraphUri,prefix:null,suffix:null,defaultGraph:!0}):(r=i.db.transaction(["components"]),n=r.objectStore("components").get(e),n.onsuccess=function(e){if(null!=e.target.result)if(null!=e.target.result.label){var r="_:"+e.target.result.id;t({token:"blank",value:r})}else null!=e.target.result.uri?t(i.parseUri(e.target.result.value.slice(3,e.target.result.value.length))):null!=e.target.result.literal?t(i.parseLiteral(e.target.result.value.slice(3,e.target.result.value.length))):(console.log(e.target.result),t(null,new Error("Unknown type of component "+e.target.result)));else t(null,null)},n.onerror=function(e){t(null,new Error("Error searching in blanks data "+e.target.errorCode))})},PersistentLexicon.prototype.clear=function(e){var t=this;this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri};var r,n=t.db.transaction(["components"],"readwrite"),i=n.objectStore("components"),o=function(){null!=e&&e()};r=i.clear(),r.onsuccess=o,r.onerror=o},PersistentLexicon.prototype.unregister=function(e,t,r){var n=this;i.seq(function(r){n._unregisterTerm(e.subject.token,t.subject,r)},function(r){n._unregisterTerm(e.predicate.token,t.predicate,r)},function(r){n._unregisterTerm(e.object.token,t.object,r)},function(r){null!=e.graph?n._unregisterTerm(e.graph.token,t.graph,r):r()})(function(){r(!0)})},PersistentLexicon.prototype._unregisterTerm=function(e,t,r){var n,i=this,o=i.db.transaction(["components","knownGraphs"],"readwrite");if("uri"===e)if(t!=this.defaultGraphOid){n=o.objectStore("components").delete(t),n.onsuccess=function(){o.objectStore("knownGraphs").delete(t).onsuccess=function(){r()}}()}else r();else n=o.objectStore("components").delete(t),n.onsuccess=function(){r()}},e.exports={PersistentLexicon:PersistentLexicon}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SearchService=t.AutocompletionResult=void 0;var i=r(2),o=n(i),a=r(1),s=n(a),l=r(0),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(l),c=t.AutocompletionResult=function e(t,r){(0,s.default)(this,e),this.id=t,this.description=r},p=t.SearchService=function(){function e(t,r,n){(0,s.default)(this,e),this.$q=t,this.$ngRedux=r,this.sparqlAutocompleteService=n}return e.$inject=["$q","$ngRedux","sparqlAutocompleteService"],(0,o.default)(e,[{key:"searchSources",value:function(e){var t=this;return this.sparqlAutocompleteService.autocomplete(e,20,!0).then(function(e){return t.processResults(e)},null,function(e){e.results&&t.processResults(e.results)})}},{key:"processResults",value:function(e){var t=this;console.log(e);var r=this.$ngRedux.getState().frontend.active.activeLayout.items.map(function(e){return e.id}),n=[];return e.localMatchingResults.forEach(function(e){return e.results.forEach(function(e){-1===r.indexOf(e.ids[0].value)&&n.push(new c(e.ids[0].value,e.matchedLabel.value))})}),e.remoteResults.forEach(function(e){return e.results.forEach(function(e){-1===r.indexOf(e.ids[0].value)&&e.additionalInformation.type&&e.additionalInformation.type[0]&&e.datasources.reduce(function(r,n){return t.$ngRedux.getState().frontend.sources.sourceClassToggle[n]&&t.$ngRedux.getState().frontend.sources.sourceClassToggle[n][e.additionalInformation.type[0].value]},!1)&&n.push(new c(e.ids[0].value,e.matchedLabel.value))})}),n}}]),e}();u.module("fibra.services.search-service",["fibra.services.sparql-autocomplete-service"]).config(["$provide",function(e){e.service("searchService",p)}])},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ItemsService=void 0;var i=r(1),o=n(i),a=r(2),s=n(a),l=r(0),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(l),c=t.ItemsService=function(){function e(t,r){(0,o.default)(this,e),this.testData=[{id:"http://www.w3.org/2002/07/owl#sameAs",description:"same As"},{id:"http://emlo.bodleian.ox.ac.uk/id/cccc8972-7adb-463d-b039-bcee2898b222",description:"cccc8972-7adb-463d-b039-bcee2898b222"},{id:"http://www.w3.org/2004/02/skos/core#prefLabel",description:"pref Label"},{id:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type",description:"type"},{id:"http://www.cidoc-crm.org/cidoc-crm/E21_Person",description:"Person"},{id:"http://ldf.fi/sdfb/person_10007541",description:"John Locke"},{id:"http://www.cidoc-crm.org/cidoc-crm/E53_Place",description:"Place"},{id:"http://ldf.fi/sdfb/person_10006012",description:"Hobbes, Thomas, 1588-1679"},{id:"http://ldf.fi/sdfb/person_10009549",description:"Samuel Pepys"},{id:"http://emlo.bodleian.ox.ac.uk/id/7ce5b3fe-1fc7-4c42-80f1-120f91ab0a1c",description:"Edinburgh"},{id:"http://xmlns.com/foaf/0.1/name",description:"name"},{id:"http://www.w3.org/2004/02/skos/core#altLabel",description:"alt Label"},{id:"http://emlo.bodleian.ox.ac.uk/schema#ipersonId",description:"iperson_id"},{id:"http://ldf.fi/sdfb/schema#odbnId",description:"ODBN id"},{id:"http://purl.org/dc/terms/description",description:"description"},{id:"http://xmlns.com/foaf/0.1/family_name",description:"family name"},{id:"http://xmlns.com/foaf/0.1/givenname",description:"givenname"},{id:"http://ldf.fi/sdfb/schema#relationship_39_4",description:"unlikely met"},{id:"http://ldf.fi/sdfb/person_10011671",description:"King Charles II"},{id:"http://ldf.fi/sdfb/person_10011670",description:"King Charles I"},{id:"http://ldf.fi/sdfb/person_10007966",description:"Henrietta Maria, Queen consort of Charles I, 1609-1669"},{id:"http://ldf.fi/sdfb/person_10011474",description:"Thomas Stanley"},{id:"http://ldf.fi/sdfb/person_10010637",description:"Thomas Salmon"},{id:"http://ldf.fi/sdfb/person_10011108",description:"Simpson, Christopher, 1602-1669"},{id:"http://ldf.fi/sdfb/schema#relationship_59_4",description:"possibly met"},{id:"http://ldf.fi/sdfb/person_10011229",description:"Robert Smith"},{id:"http://ldf.fi/sdfb/person_10010863",description:"Sir Charles Sedley"},{id:"http://ldf.fi/sdfb/person_10010009",description:"Henry Purcell"},{id:"http://ldf.fi/sdfb/schema#relationship_79_4",description:"likely met"},{id:"http://ldf.fi/sdfb/person_10010932",description:"Thomas Shadwell"},{id:"http://ldf.fi/sdfb/person_10010906",description:"Elkanah Settle"},{id:"http://ldf.fi/sdfb/person_10011822",description:"Silas Taylor"},{id:"http://ldf.fi/sdfb/schema#relationship_99_4",description:"very likely met"},{id:"http://ldf.fi/sdfb/person_10010636",description:"Salmon, Thomas, 1647-1706"},{id:"http://ldf.fi/sdfb/schema#relationship_100_4",description:"met"},{id:"http://ldf.fi/sdfb/schema#relationship_19_4",description:"very unlikely met"},{id:"http://ldf.fi/sdfb/person_10009069",description:"Titus Oates"},{id:"http://ldf.fi/sdfb/person_10013084",description:"Anthony Wood"},{id:"http://ldf.fi/sdfb/person_10009676",description:"Phillips, John, 1631-1706"},{id:"http://ldf.fi/sdfb/person_10011957",description:"John Tillotson"},{id:"http://ldf.fi/sdfb/person_10010824",description:"Sir William Scroggs"},{id:"http://ldf.fi/sdfb/person_10010730",description:"Sir George Savile"},{id:"http://ldf.fi/sdfb/person_10012251",description:"Sir Henry Vane the younger"},{id:"http://ldf.fi/sdfb/person_10012466",description:"John Wallis"},{id:"http://ldf.fi/sdfb/person_10010252",description:"Rich, Mary, 1624-1678"},{id:"http://ldf.fi/sdfb/person_10012250",description:"Sir Henry Vane"},{id:"http://ldf.fi/sdfb/person_10011006",description:"Sir Fleetwood Sheppard"},{id:"http://ldf.fi/sdfb/person_10012817",description:"Bulstrode Whitelocke"},{id:"http://ldf.fi/sdfb/person_10010549",description:"Edward Russell"},{id:"http://ldf.fi/sdfb/person_10012940",description:"Thomas Willis"},{id:"http://ldf.fi/sdfb/person_10011975",description:"Thomas Tollemache"},{id:"http://ldf.fi/sdfb/person_10010404",description:"John Rogers"},{id:"http://ldf.fi/sdfb/person_10011557",description:"Sir James Stewart of Goodtrees"},{id:"http://ldf.fi/sdfb/person_10010372",description:"Sir William Robinson"},{id:"http://ldf.fi/sdfb/person_10012810",description:"Robert Whitehall"},{id:"http://ldf.fi/sdfb/person_10012503",description:"Izaak Walton"},{id:"http://ldf.fi/sdfb/person_10013158",description:"Sir Robert Wright"},{id:"http://ldf.fi/sdfb/person_10013033",description:"Richard Wiseman"},{id:"http://ldf.fi/sdfb/person_10011246",description:"Thomas Smith"},{id:"http://ldf.fi/sdfb/person_10011522",description:"George Stepney"},{id:"http://ldf.fi/sdfb/person_10011797",description:"Thomas Tanner"},{id:"http://ldf.fi/sdfb/person_10009947",description:"Colonel Thomas Pride"},{id:"http://ldf.fi/sdfb/person_10012521",description:"John Ward"},{id:"http://ldf.fi/sdfb/person_10010920",description:"Elizabeth Seymour"},{id:"http://ldf.fi/sdfb/person_10009872",description:"Thomas Povey"},{id:"http://ldf.fi/sdfb/person_10009619",description:"Peter Pett"},{id:"http://ldf.fi/sdfb/person_10013041",description:"Willem Wissing"},{id:"http://ldf.fi/sdfb/person_10010916",description:"Charles Seymour duke of Somerset"},{id:"http://ldf.fi/sdfb/person_10012305",description:"Aubrey de Vere"},{id:"http://ldf.fi/sdfb/person_10011635",description:"Giles Strangways"},{id:"http://ldf.fi/sdfb/person_10009968",description:"Sir William Pritchard"},{id:"http://ldf.fi/sdfb/person_10012683",description:"Henrietta Maria Wentworth"},{id:"http://ldf.fi/sdfb/person_10012226",description:"James Ussher"},{id:"http://ldf.fi/sdfb/person_10010747",description:"Sir Robert Sawyer"},{id:"http://ldf.fi/sdfb/person_10013300",description:"Prince Rupert of the Rhine"},{id:"http://ldf.fi/sdfb/person_10013082",description:"Laurence Womock"},{id:"http://ldf.fi/sdfb/person_10012908",description:"Abigail Williams"},{id:"http://ldf.fi/sdfb/person_10011666",description:"Queen Anne"},{id:"http://ldf.fi/sdfb/person_10012567",description:"Sir Philip Warwick"},{id:"http://ldf.fi/sdfb/person_10009976",description:"Edward Progers"},{id:"http://ldf.fi/sdfb/person_10012962",description:"John Wilmot"},{id:"http://ldf.fi/sdfb/person_10011976",description:"Elizabeth Tollet"},{id:"http://ldf.fi/sdfb/person_10009698",description:"Edward Pierce"},{id:"http://ldf.fi/sdfb/person_10011896",description:"Ralph Thoresby"},{id:"http://ldf.fi/sdfb/person_10011334",description:"John Spademan"},{id:"http://ldf.fi/sdfb/person_10010793",description:"James Scott Duke of Monmouth"},{id:"http://ldf.fi/sdfb/person_10012876",description:"Sir John Wildman"},{id:"http://ldf.fi/sdfb/person_10009625",description:"Maximilian Petty"},{id:"http://ldf.fi/sdfb/person_10013141",description:"Matthew Wren"},{id:"http://ldf.fi/sdfb/person_10011672",description:"Charles Stuart"},{id:"http://ldf.fi/sdfb/person_10011641",description:"Robert Streater"},{id:"http://ldf.fi/sdfb/person_10009620",description:"Sir Peter Pett"},{id:"http://ldf.fi/sdfb/person_10011827",description:"Sir Thomas Teddeman"},{id:"http://ldf.fi/sdfb/person_10011399",description:"William Spurstowe"},{id:"http://ldf.fi/sdfb/person_10012872",description:"Robert Wild"},{id:"http://ldf.fi/sdfb/person_10012563",description:"Sir William Warren"},{id:"http://ldf.fi/sdfb/person_10010758",description:"Scarborough, Charles"},{id:"http://ldf.fi/sdfb/person_10012136",description:"Turberville, Daubeney, 1612-1696"},{id:"http://ldf.fi/sdfb/person_10010709",description:"Margaret Saunders"},{id:"http://ldf.fi/sdfb/person_10012983",description:"William Winde"}],this.$q=t,this.$ngRedux=r}return e.$inject=["$q","$ngRedux"],(0,s.default)(e,[{key:"getAllItems",value:function(){return this.$q.resolve(this.testData.filter(function(e){return!(e.id.startsWith("http://www.w3.org/")||e.id.startsWith("http://xmlns.com/")||e.id.startsWith("http://www.cidoc-crm.org/")||e.id.startsWith("http://purl.org/"))}))}},{key:"getFilteredItems",value:function(){return this.getAllItems()}},{key:"getAllItemsCount",value:function(){return this.getAllItems().then(function(e){return e.length})}},{key:"getFilteredItemsCount",value:function(){return this.getFilteredItems().then(function(e){return e.length})}}]),e}();u.module("fibra.services.items-service",[]).config(["$provide",function(e){e.service("itemsService",c)}])},function(e,t,r){"use strict";var n=r(0),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(n);r(415),r(444),r(446),r(447),r(448),r(450),r(232),r(458),r(460),r(462),r(464),r(466),r(106),r(469),r(471),r(473),r(475),r(154),r(477),r(479),r(481),r(483),r(485),r(510),i.module("fibra.components",["fibra.components.construct-view","fibra.components.explore","fibra.components.property-popover","fibra.components.palette","fibra.components.verify","fibra.components.explore-table","fibra.components.explore-type","fibra.components.projects-view","fibra.components.citable","fibra.components.callback","fibra.components.login","fibra.components.configure","fibra.components.citable-editor","fibra.components.edit-primary-endpoint-configuration","fibra.components.edit-remote-endpoint-configuration","fibra.components.edit-schema-view","fibra.components.project-source-configurations-view","fibra.components.project-sources-view","fibra.components.type-select","fibra.components.upload","fibra.components.project","fibra.components.sources","fibra.components.active","fibra.components.filter"])},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectsViewComponent=t.ProjectsViewComponentController=void 0;var o=r(1),a=i(o),s=r(2),l=i(s),u=r(0),c=n(u),p=r(154),d=r(418),f=n(d),h=r(442),g=i(h),v=t.ProjectsViewComponentController=function(){function e(t,r,n,i){var o=this;(0,a.default)(this,e),this.projectService=t,this.projectSourceState={},this.projects={},this.projectSources={};var s=null;if(s&&0!==s.length||(s=[],n.projectSources=s),r.isLoggedIn()&&!s.some(function(e){return"Personal projects"===e.id})){var l=f.SHA256(r.loginState());s.unshift(new p.ProjectSourceInfo("Projects","http://ldf.fi/fibra/sparql","http://ldf.fi/fibra/sparql","http://ldf.fi/fibra/sparql","http://ldf.fi/fibra/user/"+l+"/projects/","http://ldf.fi/fibra/fusekiEndpointWithTextIndexAndSecoFunctions"))}s.forEach(function(e){o.projectSources[e.id]=e,o.projects[e.id]=[],o.projectSourceState[e.id]="loading",t.listProjects(e).then(function(t){o.projectSourceState[e.id]="ready",o.projects[e.id]=t},function(t){o.projectSourceState[e.id]="error",o.projects[e.id]=t})})}return e.$inject=["projectService","socialAuthService","$localStorage","$document"],(0,l.default)(e,[{key:"deleteProject",value:function(e,t,r){this.projects[e].splice(t,1),this.projectService.deleteCitable(this.projectSources[e].updateEndpoint,r)}},{key:"$postLink",value:function(){console.log("hello?"),(0,g.default)()}}]),e}(),m=t.ProjectsViewComponent=function e(){(0,a.default)(this,e),this.controller=v,this.template=r(443)()};c.module("fibra.components.projects-view",[]).component("projectsView",new m).controller("projectsSortController",["$scope",function(e){e.item={id:"0",name:"Date Created"},e.options=[{id:"0",description:"Date created.",name:"Date created"},{id:"1",description:"Alphabetical.",name:"A to Z"},{id:"2",description:"Alphabetical (reversed).",name:"Z to A"}]}])},function(e,t,r){function n(e){var t="";return t+='<div class="container"><h1>Fibra</h1><h2>Your project sources</h2><div class="well" ng-repeat="source in $ctrl.projectSources"><div class="pull-right"><button class="btn btn-xs btn-danger" ng-click="$ctrl.deleteProjectSource($index)"><span class="glyphicon glyphicon-remove"></span></button></div><div class="form-group"><label>Name</label><input class="form-control" type="text" ng-model="source.id"></div><div class="form-group"><label>SPARQL query endpoint address</label><input class="form-control" type="text" ng-model="source.sparqlEndpoint"></div><div class="form-group"><label>SPARQL update endpoint address</label><input class="form-control" type="text" ng-model="source.updateEndpoint"></div><div class="form-group"><label>SPARQL graph store protocol endpoint address</label><input class="form-control" type="text" ng-model="source.graphStoreEndpoint"></div><div class="form-group"><label>Graph</label><input class="form-control" type="text" ng-model="source.graph"></div><div class="form-group"><label>Type IRI</label><input class="form-control" type="text" ng-model="source.type"></div><button class="btn btn-xs" ui-sref="projectSourceConfigurations({sourceId:source.id})" title="Examine project source configurations"><span class="glyphicon glyphicon-cog"></span></button></div><button class="btn btn-success" ng-click="$ctrl.addNewProjectSource()">Add new</button><a ui-sref="projects()">Back to projects</a></div>'}r(8);e.exports=n},function(e,t){},function(e,t,r){!function(n,i,o){e.exports=t=i(r(4),r(105),r(419),r(420),r(60),r(61),r(155),r(230),r(421),r(231),r(422),r(423),r(424),r(156),r(425),r(49),r(12),r(426),r(427),r(428),r(429),r(430),r(431),r(432),r(433),r(434),r(435),r(436),r(437),r(438),r(439),r(440),r(441))}(0,function(e){return e})},function(e,t,r){!function(n,i){e.exports=t=i(r(4))}(0,function(e){return function(){if("function"==typeof ArrayBuffer){var t=e,r=t.lib,n=r.WordArray,i=n.init;(n.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var t=e.byteLength,r=[],n=0;n<t;n++)r[n>>>2]|=e[n]<<24-n%4*8;i.call(this,r,t)}else i.apply(this,arguments)}).prototype=n}}(),e.lib.WordArray})},function(e,t,r){!function(n,i){e.exports=t=i(r(4))}(0,function(e){return function(){function t(e){return e<<8&4278255360|e>>>8&16711935}var r=e,n=r.lib,i=n.WordArray,o=r.enc;o.Utf16=o.Utf16BE={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i+=2){var o=t[i>>>2]>>>16-i%4*8&65535;n.push(String.fromCharCode(o))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n>>>1]|=e.charCodeAt(n)<<16-n%2*16;return i.create(r,2*t)}};o.Utf16LE={stringify:function(e){for(var r=e.words,n=e.sigBytes,i=[],o=0;o<n;o+=2){var a=t(r[o>>>2]>>>16-o%4*8&65535);i.push(String.fromCharCode(a))}return i.join("")},parse:function(e){for(var r=e.length,n=[],o=0;o<r;o++)n[o>>>1]|=t(e.charCodeAt(o)<<16-o%2*16);return i.create(n,2*r)}}}(),e.enc.Utf16})},function(e,t,r){!function(n,i,o){e.exports=t=i(r(4),r(230))}(0,function(e){return function(){var t=e,r=t.lib,n=r.WordArray,i=t.algo,o=i.SHA256,a=i.SHA224=o.extend({_doReset:function(){this._hash=new n.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=o._doFinalize.call(this);return e.sigBytes-=4,e}});t.SHA224=o._createHelper(a),t.HmacSHA224=o._createHmacHelper(a)}(),e.SHA224})},function(e,t,r){!function(n,i,o){e.exports=t=i(r(4),r(105),r(231))}(0,function(e){return function(){var t=e,r=t.x64,n=r.Word,i=r.WordArray,o=t.algo,a=o.SHA512,s=o.SHA384=a.extend({_doReset:function(){this._hash=new i.init([new n.init(3418070365,3238371032),new n.init(1654270250,914150663),new n.init(2438529370,812702999),new n.init(355462360,4144912697),new n.init(1731405415,4290775857),new n.init(2394180231,1750603025),new n.init(3675008525,1694076839),new n.init(1203062813,3204075428)])},_doFinalize:function(){var e=a._doFinalize.call(this);return e.sigBytes-=16,e}});t.SHA384=a._createHelper(s),t.HmacSHA384=a._createHmacHelper(s)}(),e.SHA384})},function(e,t,r){!function(n,i,o){e.exports=t=i(r(4),r(105))}(0,function(e){return function(t){var r=e,n=r.lib,i=n.WordArray,o=n.Hasher,a=r.x64,s=a.Word,l=r.algo,u=[],c=[],p=[];!function(){for(var e=1,t=0,r=0;r<24;r++){u[e+5*t]=(r+1)*(r+2)/2%64;var n=t%5,i=(2*e+3*t)%5;e=n,t=i}for(var e=0;e<5;e++)for(var t=0;t<5;t++)c[e+5*t]=t+(2*e+3*t)%5*5;for(var o=1,a=0;a<24;a++){for(var l=0,d=0,f=0;f<7;f++){if(1&o){var h=(1<<f)-1;h<32?d^=1<<h:l^=1<<h-32}128&o?o=o<<1^113:o<<=1}p[a]=s.create(l,d)}}();var d=[];!function(){for(var e=0;e<25;e++)d[e]=s.create()}();var f=l.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new s.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var r=this._state,n=this.blockSize/2,i=0;i<n;i++){var o=e[t+2*i],a=e[t+2*i+1];o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8);var s=r[i];s.high^=a,s.low^=o}for(var l=0;l<24;l++){for(var f=0;f<5;f++){for(var h=0,g=0,v=0;v<5;v++){var s=r[f+5*v];h^=s.high,g^=s.low}var m=d[f];m.high=h,m.low=g}for(var f=0;f<5;f++)for(var y=d[(f+4)%5],b=d[(f+1)%5],E=b.high,x=b.low,h=y.high^(E<<1|x>>>31),g=y.low^(x<<1|E>>>31),v=0;v<5;v++){var s=r[f+5*v];s.high^=h,s.low^=g}for(var S=1;S<25;S++){var s=r[S],C=s.high,w=s.low,T=u[S];if(T<32)var h=C<<T|w>>>32-T,g=w<<T|C>>>32-T;else var h=w<<T-32|C>>>64-T,g=C<<T-32|w>>>64-T;var A=d[c[S]];A.high=h,A.low=g}var I=d[0],L=r[0];I.high=L.high,I.low=L.low;for(var f=0;f<5;f++)for(var v=0;v<5;v++){var S=f+5*v,s=r[S],N=d[S],R=d[(f+1)%5+5*v],_=d[(f+2)%5+5*v];s.high=N.high^~R.high&_.high,s.low=N.low^~R.low&_.low}var s=r[0],k=p[l];s.high^=k.high,s.low^=k.low}},_doFinalize:function(){var e=this._data,r=e.words,n=(this._nDataBytes,8*e.sigBytes),o=32*this.blockSize;r[n>>>5]|=1<<24-n%32,r[(t.ceil((n+1)/o)*o>>>5)-1]|=128,e.sigBytes=4*r.length,this._process();for(var a=this._state,s=this.cfg.outputLength/8,l=s/8,u=[],c=0;c<l;c++){var p=a[c],d=p.high,f=p.low;d=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),f=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),u.push(f),u.push(d)}return new i.init(u,s)},clone:function(){for(var e=o.clone.call(this),t=e._state=this._state.slice(0),r=0;r<25;r++)t[r]=t[r].clone();return e}});r.SHA3=o._createHelper(f),r.HmacSHA3=o._createHmacHelper(f)}(Math),e.SHA3})},function(e,t,r){!function(n,i){e.exports=t=i(r(4))}(0,function(e){/** @preserve
	(c) 2012 by Cdric Mesnil. All rights reserved.

	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
	    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
	*/
return function(t){function r(e,t,r){return e^t^r}function n(e,t,r){return e&t|~e&r}function i(e,t,r){return(e|~t)^r}function o(e,t,r){return e&r|t&~r}function a(e,t,r){return e^(t|~r)}function s(e,t){return e<<t|e>>>32-t}var l=e,u=l.lib,c=u.WordArray,p=u.Hasher,d=l.algo,f=c.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),h=c.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),g=c.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),v=c.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),m=c.create([0,1518500249,1859775393,2400959708,2840853838]),y=c.create([1352829926,1548603684,1836072691,2053994217,0]),b=d.RIPEMD160=p.extend({_doReset:function(){this._hash=c.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var l=0;l<16;l++){var u=t+l,c=e[u];e[u]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}var p,d,b,E,x,S,C,w,T,A,I=this._hash.words,L=m.words,N=y.words,R=f.words,_=h.words,k=g.words,O=v.words;S=p=I[0],C=d=I[1],w=b=I[2],T=E=I[3],A=x=I[4];for(var P,l=0;l<80;l+=1)P=p+e[t+R[l]]|0,P+=l<16?r(d,b,E)+L[0]:l<32?n(d,b,E)+L[1]:l<48?i(d,b,E)+L[2]:l<64?o(d,b,E)+L[3]:a(d,b,E)+L[4],P|=0,P=s(P,k[l]),P=P+x|0,p=x,x=E,E=s(b,10),b=d,d=P,P=S+e[t+_[l]]|0,P+=l<16?a(C,w,T)+N[0]:l<32?o(C,w,T)+N[1]:l<48?i(C,w,T)+N[2]:l<64?n(C,w,T)+N[3]:r(C,w,T)+N[4],P|=0,P=s(P,O[l]),P=P+A|0,S=A,A=T,T=s(w,10),w=C,C=P;P=I[1]+b+T|0,I[1]=I[2]+E+A|0,I[2]=I[3]+x+S|0,I[3]=I[4]+p+C|0,I[4]=I[0]+d+w|0,I[0]=P},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),e.sigBytes=4*(t.length+1),this._process();for(var i=this._hash,o=i.words,a=0;a<5;a++){var s=o[a];o[a]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}return i},clone:function(){var e=p.clone.call(this);return e._hash=this._hash.clone(),e}});l.RIPEMD160=p._createHelper(b),l.HmacRIPEMD160=p._createHmacHelper(b)}(Math),e.RIPEMD160})},function(e,t,r){!function(n,i,o){e.exports=t=i(r(4),r(155),r(156))}(0,function(e){return function(){var t=e,r=t.lib,n=r.Base,i=r.WordArray,o=t.algo,a=o.SHA1,s=o.HMAC,l=o.PBKDF2=n.extend({cfg:n.extend({keySize:4,hasher:a,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var r=this.cfg,n=s.create(r.hasher,e),o=i.create(),a=i.create([1]),l=o.words,u=a.words,c=r.keySize,p=r.iterations;l.length<c;){var d=n.update(t).finalize(a);n.reset();for(var f=d.words,h=f.length,g=d,v=1;v<p;v++){g=n.finalize(g),n.reset();for(var m=g.words,y=0;y<h;y++)f[y]^=m[y]}o.concat(d),u[0]++}return o.sigBytes=4*c,o}});t.PBKDF2=function(e,t,r){return l.create(r).compute(e,t)}}(),e.PBKDF2})},function(e,t,r){!function(n,i,o){e.exports=t=i(r(4),r(12))}(0,function(e){return e.mode.CFB=function(){function t(e,t,r,n){var i=this._iv;if(i){var o=i.slice(0);this._iv=void 0}else var o=this._prevBlock;n.encryptBlock(o,0);for(var a=0;a<r;a++)e[t+a]^=o[a]}var r=e.lib.BlockCipherMode.extend();return r.Encryptor=r.extend({processBlock:function(e,r){var n=this._cipher,i=n.blockSize;t.call(this,e,r,i,n),this._prevBlock=e.slice(r,r+i)}}),r.Decryptor=r.extend({processBlock:function(e,r){var n=this._cipher,i=n.blockSize,o=e.slice(r,r+i);t.call(this,e,r,i,n),this._prevBlock=o}}),r}(),e.mode.CFB})},function(e,t,r){!function(n,i,o){e.exports=t=i(r(4),r(12))}(0,function(e){return e.mode.CTR=function(){var t=e.lib.BlockCipherMode.extend(),r=t.Encryptor=t.extend({processBlock:function(e,t){var r=this._cipher,n=r.blockSize,i=this._iv,o=this._counter;i&&(o=this._counter=i.slice(0),this._iv=void 0);var a=o.slice(0);r.encryptBlock(a,0),o[n-1]=o[n-1]+1|0;for(var s=0;s<n;s++)e[t+s]^=a[s]}});return t.Decryptor=r,t}(),e.mode.CTR})},function(e,t,r){!function(n,i,o){e.exports=t=i(r(4),r(12))}(0,function(e){/** @preserve
	 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
	 * derived from CryptoJS.mode.CTR
	 * Jan Hruby jhruby.web@gmail.com
	 */
return e.mode.CTRGladman=function(){function t(e){if(255==(e>>24&255)){var t=e>>16&255,r=e>>8&255,n=255&e;255===t?(t=0,255===r?(r=0,255===n?n=0:++n):++r):++t,e=0,e+=t<<16,e+=r<<8,e+=n}else e+=1<<24;return e}function r(e){return 0===(e[0]=t(e[0]))&&(e[1]=t(e[1])),e}var n=e.lib.BlockCipherMode.extend(),i=n.Encryptor=n.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize,o=this._iv,a=this._counter;o&&(a=this._counter=o.slice(0),this._iv=void 0),r(a);var s=a.slice(0);n.encryptBlock(s,0);for(var l=0;l<i;l++)e[t+l]^=s[l]}});return n.Decryptor=i,n}(),e.mode.CTRGladman})},function(e,t,r){!function(n,i,o){e.exports=t=i(r(4),r(12))}(0,function(e){return e.mode.OFB=function(){var t=e.lib.BlockCipherMode.extend(),r=t.Encryptor=t.extend({processBlock:function(e,t){var r=this._cipher,n=r.blockSize,i=this._iv,o=this._keystream;i&&(o=this._keystream=i.slice(0),this._iv=void 0),r.encryptBlock(o,0);for(var a=0;a<n;a++)e[t+a]^=o[a]}});return t.Decryptor=r,t}(),e.mode.OFB})},function(e,t,r){!function(n,i,o){e.exports=t=i(r(4),r(12))}(0,function(e){return e.mode.ECB=function(){var t=e.lib.BlockCipherMode.extend();return t.Encryptor=t.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),t.Decryptor=t.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),t}(),e.mode.ECB})},function(e,t,r){!function(n,i,o){e.exports=t=i(r(4),r(12))}(0,function(e){return e.pad.AnsiX923={pad:function(e,t){var r=e.sigBytes,n=4*t,i=n-r%n,o=r+i-1;e.clamp(),e.words[o>>>2]|=i<<24-o%4*8,e.sigBytes+=i},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Ansix923})},function(e,t,r){!function(n,i,o){e.exports=t=i(r(4),r(12))}(0,function(e){return e.pad.Iso10126={pad:function(t,r){var n=4*r,i=n-t.sigBytes%n;t.concat(e.lib.WordArray.random(i-1)).concat(e.lib.WordArray.create([i<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Iso10126})},function(e,t,r){!function(n,i,o){e.exports=t=i(r(4),r(12))}(0,function(e){return e.pad.Iso97971={pad:function(t,r){t.concat(e.lib.WordArray.create([2147483648],1)),e.pad.ZeroPadding.pad(t,r)},unpad:function(t){e.pad.ZeroPadding.unpad(t),t.sigBytes--}},e.pad.Iso97971})},function(e,t,r){!function(n,i,o){e.exports=t=i(r(4),r(12))}(0,function(e){return e.pad.ZeroPadding={pad:function(e,t){var r=4*t;e.clamp(),e.sigBytes+=r-(e.sigBytes%r||r)},unpad:function(e){for(var t=e.words,r=e.sigBytes-1;!(t[r>>>2]>>>24-r%4*8&255);)r--;e.sigBytes=r+1}},e.pad.ZeroPadding})},function(e,t,r){!function(n,i,o){e.exports=t=i(r(4),r(12))}(0,function(e){return e.pad.NoPadding={pad:function(){},unpad:function(){}},e.pad.NoPadding})},function(e,t,r){!function(n,i,o){e.exports=t=i(r(4),r(12))}(0,function(e){return function(t){var r=e,n=r.lib,i=n.CipherParams,o=r.enc,a=o.Hex,s=r.format;s.Hex={stringify:function(e){return e.ciphertext.toString(a)},parse:function(e){var t=a.parse(e);return i.create({ciphertext:t})}}}(),e.format.Hex})},function(e,t,r){!function(n,i,o){e.exports=t=i(r(4),r(60),r(61),r(49),r(12))}(0,function(e){return function(){var t=e,r=t.lib,n=r.BlockCipher,i=t.algo,o=[],a=[],s=[],l=[],u=[],c=[],p=[],d=[],f=[],h=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;for(var r=0,n=0,t=0;t<256;t++){var i=n^n<<1^n<<2^n<<3^n<<4;i=i>>>8^255&i^99,o[r]=i,a[i]=r;var g=e[r],v=e[g],m=e[v],y=257*e[i]^16843008*i;s[r]=y<<24|y>>>8,l[r]=y<<16|y>>>16,u[r]=y<<8|y>>>24,c[r]=y;var y=16843009*m^65537*v^257*g^16843008*r;p[i]=y<<24|y>>>8,d[i]=y<<16|y>>>16,f[i]=y<<8|y>>>24,h[i]=y,r?(r=g^e[e[e[m^g]]],n^=e[e[n]]):r=n=1}}();var g=[0,1,2,4,8,16,32,64,128,27,54],v=i.AES=n.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,r=e.sigBytes/4,n=this._nRounds=r+6,i=4*(n+1),a=this._keySchedule=[],s=0;s<i;s++)if(s<r)a[s]=t[s];else{var l=a[s-1];s%r?r>6&&s%r==4&&(l=o[l>>>24]<<24|o[l>>>16&255]<<16|o[l>>>8&255]<<8|o[255&l]):(l=l<<8|l>>>24,l=o[l>>>24]<<24|o[l>>>16&255]<<16|o[l>>>8&255]<<8|o[255&l],l^=g[s/r|0]<<24),a[s]=a[s-r]^l}for(var u=this._invKeySchedule=[],c=0;c<i;c++){var s=i-c;if(c%4)var l=a[s];else var l=a[s-4];u[c]=c<4||s<=4?l:p[o[l>>>24]]^d[o[l>>>16&255]]^f[o[l>>>8&255]]^h[o[255&l]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,s,l,u,c,o)},decryptBlock:function(e,t){var r=e[t+1];e[t+1]=e[t+3],e[t+3]=r,this._doCryptBlock(e,t,this._invKeySchedule,p,d,f,h,a);var r=e[t+1];e[t+1]=e[t+3],e[t+3]=r},_doCryptBlock:function(e,t,r,n,i,o,a,s){for(var l=this._nRounds,u=e[t]^r[0],c=e[t+1]^r[1],p=e[t+2]^r[2],d=e[t+3]^r[3],f=4,h=1;h<l;h++){var g=n[u>>>24]^i[c>>>16&255]^o[p>>>8&255]^a[255&d]^r[f++],v=n[c>>>24]^i[p>>>16&255]^o[d>>>8&255]^a[255&u]^r[f++],m=n[p>>>24]^i[d>>>16&255]^o[u>>>8&255]^a[255&c]^r[f++],y=n[d>>>24]^i[u>>>16&255]^o[c>>>8&255]^a[255&p]^r[f++];u=g,c=v,p=m,d=y}var g=(s[u>>>24]<<24|s[c>>>16&255]<<16|s[p>>>8&255]<<8|s[255&d])^r[f++],v=(s[c>>>24]<<24|s[p>>>16&255]<<16|s[d>>>8&255]<<8|s[255&u])^r[f++],m=(s[p>>>24]<<24|s[d>>>16&255]<<16|s[u>>>8&255]<<8|s[255&c])^r[f++],y=(s[d>>>24]<<24|s[u>>>16&255]<<16|s[c>>>8&255]<<8|s[255&p])^r[f++];e[t]=g,e[t+1]=v,e[t+2]=m,e[t+3]=y},keySize:8});t.AES=n._createHelper(v)}(),e.AES})},function(e,t,r){!function(n,i,o){e.exports=t=i(r(4),r(60),r(61),r(49),r(12))}(0,function(e){return function(){function t(e,t){var r=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=r,this._lBlock^=r<<e}function r(e,t){var r=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=r,this._rBlock^=r<<e}var n=e,i=n.lib,o=i.WordArray,a=i.BlockCipher,s=n.algo,l=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],u=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],p=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],d=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],f=s.DES=a.extend({_doReset:function(){for(var e=this._key,t=e.words,r=[],n=0;n<56;n++){var i=l[n]-1;r[n]=t[i>>>5]>>>31-i%32&1}for(var o=this._subKeys=[],a=0;a<16;a++){for(var s=o[a]=[],p=c[a],n=0;n<24;n++)s[n/6|0]|=r[(u[n]-1+p)%28]<<31-n%6,s[4+(n/6|0)]|=r[28+(u[n+24]-1+p)%28]<<31-n%6;s[0]=s[0]<<1|s[0]>>>31;for(var n=1;n<7;n++)s[n]=s[n]>>>4*(n-1)+3;s[7]=s[7]<<5|s[7]>>>27}for(var d=this._invSubKeys=[],n=0;n<16;n++)d[n]=o[15-n]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,n,i){this._lBlock=e[n],this._rBlock=e[n+1],t.call(this,4,252645135),t.call(this,16,65535),r.call(this,2,858993459),r.call(this,8,16711935),t.call(this,1,1431655765);for(var o=0;o<16;o++){for(var a=i[o],s=this._lBlock,l=this._rBlock,u=0,c=0;c<8;c++)u|=p[c][((l^a[c])&d[c])>>>0];this._lBlock=l,this._rBlock=s^u}var f=this._lBlock;this._lBlock=this._rBlock,this._rBlock=f,t.call(this,1,1431655765),r.call(this,8,16711935),r.call(this,2,858993459),t.call(this,16,65535),t.call(this,4,252645135),e[n]=this._lBlock,e[n+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});n.DES=a._createHelper(f);var h=s.TripleDES=a.extend({_doReset:function(){var e=this._key,t=e.words;this._des1=f.createEncryptor(o.create(t.slice(0,2))),this._des2=f.createEncryptor(o.create(t.slice(2,4))),this._des3=f.createEncryptor(o.create(t.slice(4,6)))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});n.TripleDES=a._createHelper(h)}(),e.TripleDES})},function(e,t,r){!function(n,i,o){e.exports=t=i(r(4),r(60),r(61),r(49),r(12))}(0,function(e){return function(){function t(){for(var e=this._S,t=this._i,r=this._j,n=0,i=0;i<4;i++){t=(t+1)%256,r=(r+e[t])%256;var o=e[t];e[t]=e[r],e[r]=o,n|=e[(e[t]+e[r])%256]<<24-8*i}return this._i=t,this._j=r,n}var r=e,n=r.lib,i=n.StreamCipher,o=r.algo,a=o.RC4=i.extend({_doReset:function(){for(var e=this._key,t=e.words,r=e.sigBytes,n=this._S=[],i=0;i<256;i++)n[i]=i;for(var i=0,o=0;i<256;i++){var a=i%r,s=t[a>>>2]>>>24-a%4*8&255;o=(o+n[i]+s)%256;var l=n[i];n[i]=n[o],n[o]=l}this._i=this._j=0},_doProcessBlock:function(e,r){e[r]^=t.call(this)},keySize:8,ivSize:0});r.RC4=i._createHelper(a);var s=o.RC4Drop=a.extend({cfg:a.cfg.extend({drop:192}),_doReset:function(){a._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)t.call(this)}});r.RC4Drop=i._createHelper(s)}(),e.RC4})},function(e,t,r){!function(n,i,o){e.exports=t=i(r(4),r(60),r(61),r(49),r(12))}(0,function(e){return function(){function t(){for(var e=this._X,t=this._C,r=0;r<8;r++)s[r]=t[r];t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<s[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<s[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<s[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<s[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<s[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<s[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<s[6]>>>0?1:0)|0,this._b=t[7]>>>0<s[7]>>>0?1:0;for(var r=0;r<8;r++){var n=e[r]+t[r],i=65535&n,o=n>>>16,a=((i*i>>>17)+i*o>>>15)+o*o,u=((4294901760&n)*n|0)+((65535&n)*n|0);l[r]=a^u}e[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,e[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,e[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,e[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,e[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,e[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,e[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,e[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}var r=e,n=r.lib,i=n.StreamCipher,o=r.algo,a=[],s=[],l=[],u=o.Rabbit=i.extend({_doReset:function(){for(var e=this._key.words,r=this.cfg.iv,n=0;n<4;n++)e[n]=16711935&(e[n]<<8|e[n]>>>24)|4278255360&(e[n]<<24|e[n]>>>8);var i=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],o=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var n=0;n<4;n++)t.call(this);for(var n=0;n<8;n++)o[n]^=i[n+4&7];if(r){var a=r.words,s=a[0],l=a[1],u=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),c=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8),p=u>>>16|4294901760&c,d=c<<16|65535&u;o[0]^=u,o[1]^=p,o[2]^=c,o[3]^=d,o[4]^=u,o[5]^=p,o[6]^=c,o[7]^=d;for(var n=0;n<4;n++)t.call(this)}},_doProcessBlock:function(e,r){var n=this._X;t.call(this),a[0]=n[0]^n[5]>>>16^n[3]<<16,a[1]=n[2]^n[7]>>>16^n[5]<<16,a[2]=n[4]^n[1]>>>16^n[7]<<16,a[3]=n[6]^n[3]>>>16^n[1]<<16;for(var i=0;i<4;i++)a[i]=16711935&(a[i]<<8|a[i]>>>24)|4278255360&(a[i]<<24|a[i]>>>8),e[r+i]^=a[i]},blockSize:4,ivSize:2});r.Rabbit=i._createHelper(u)}(),e.Rabbit})},function(e,t,r){!function(n,i,o){e.exports=t=i(r(4),r(60),r(61),r(49),r(12))}(0,function(e){return function(){function t(){for(var e=this._X,t=this._C,r=0;r<8;r++)s[r]=t[r];t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<s[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<s[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<s[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<s[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<s[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<s[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<s[6]>>>0?1:0)|0,this._b=t[7]>>>0<s[7]>>>0?1:0;for(var r=0;r<8;r++){var n=e[r]+t[r],i=65535&n,o=n>>>16,a=((i*i>>>17)+i*o>>>15)+o*o,u=((4294901760&n)*n|0)+((65535&n)*n|0);l[r]=a^u}e[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,e[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,e[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,e[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,e[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,e[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,e[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,e[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}var r=e,n=r.lib,i=n.StreamCipher,o=r.algo,a=[],s=[],l=[],u=o.RabbitLegacy=i.extend({_doReset:function(){var e=this._key.words,r=this.cfg.iv,n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],i=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var o=0;o<4;o++)t.call(this);for(var o=0;o<8;o++)i[o]^=n[o+4&7];if(r){var a=r.words,s=a[0],l=a[1],u=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),c=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8),p=u>>>16|4294901760&c,d=c<<16|65535&u;i[0]^=u,i[1]^=p,i[2]^=c,i[3]^=d,i[4]^=u,i[5]^=p,i[6]^=c,i[7]^=d;for(var o=0;o<4;o++)t.call(this)}},_doProcessBlock:function(e,r){var n=this._X;t.call(this),a[0]=n[0]^n[5]>>>16^n[3]<<16,a[1]=n[2]^n[7]>>>16^n[5]<<16,a[2]=n[4]^n[1]>>>16^n[7]<<16,a[3]=n[6]^n[3]>>>16^n[1]<<16;for(var i=0;i<4;i++)a[i]=16711935&(a[i]<<8|a[i]>>>24)|4278255360&(a[i]<<24|a[i]>>>8),e[r+i]^=a[i]},blockSize:4,ivSize:2});r.RabbitLegacy=i._createHelper(u)}(),e.RabbitLegacy})},function(e,t,r){!function(t,r){e.exports=r()}(0,function(){"use strict";function e(e){return Array.prototype.slice.call(e)}function t(e){var t=parseInt(e,10);return c<t?c:t}function r(e){return e.hasAttribute("data-no-resize")||(0===e.offsetWidth&&0===e.offsetHeight?(e.setAttribute("width",e.naturalWidth),e.setAttribute("height",e.naturalHeight)):(e.setAttribute("width",e.offsetWidth),e.setAttribute("height",e.offsetHeight))),e}function n(e,t){var n=e.nodeName.toLowerCase(),i=document.createElement("img");i.addEventListener("load",function(){"img"===n?r(e).setAttribute("src",t):e.style.backgroundImage="url("+t+")"}),i.setAttribute("src",t),e.setAttribute(h,!0)}function i(e,r){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,o=t(i);if(r&&1<o){n(e,r.replace(p,"@"+o+"x$1"))}}function o(e,t,r){1<c&&n(e,r)}function a(t){return t?"function"==typeof t.forEach?t:e(t):"undefined"==typeof document?[]:e(document.querySelectorAll(f))}function s(e){return e.style.backgroundImage.replace(d,"$2")}function l(e){a(e).forEach(function(e){if(!e.getAttribute(h)){var t="img"===e.nodeName.toLowerCase(),r=t?e.getAttribute("src"):s(e),n=e.getAttribute("data-rjs"),a=!isNaN(parseInt(n,10));if(null===n)return;a?i(e,r,n):o(e,r,n)}})}var u="undefined"!=typeof window,c=Math.round(u?window.devicePixelRatio||1:1),p=/(\.[A-z]{3,4}\/?(\?.*)?)$/,d=/url\(('|")?([^)'"]+)('|")?\)/i,f="[data-rjs]",h="data-rjs-processed";return u&&(window.addEventListener("load",function(){l()}),window.retinajs=l),l})},function(e,t,r){function n(e){var t="";return t+='<div class="container"><h3 class="header-title">Data Pen<span class="header-subtitle">Projects</span></h3><div class="head"><div class="sort-container" ng-controller="projectsSortController"><select ng-model="item.id" ng-selected="0" ng-options="option.id as option.name for option in options"><option ng-repeat="option in data.availableOptions" value="{{option.id}}">{{option.name}}</option></select></div></div><div ng-repeat="(id,projectSource) in $ctrl.projectSources track by $index">  <a ui-sref="configure({sourceId:id})"> <button class="new-project-button" type="button" data-toggle="modal" data-target="#newProjectDialog">Start new project</button><div class="modal" id="newProjectDialog" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="false"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><h5 class="modal-title">Modal title</h5><div class="button close" type="button" data-dismiss="modal" aria-label="Close"><div class="span" aria-hidden="true">&times;</div></div></div><div class="modal-body">stuff here</div><div class="modal-footer"><div class="button btn btn-secondary" type="button" data-dismiss="modal">Close</div><div class="button btn btn-primary" type="button">Save changes</div></div></div></div></div></a><div class="row"></div><div class="spinner" ng-if="$ctrl.projectSourceState[id]==\'loading\'"></div><div class="alert alert-danger" ng-if="$ctrl.projectSourceState[id]==\'error\'">Error loading: {{projects}}</div><ul class="projects-list"><li ng-if="$ctrl.projectSourceState[id]==\'ready\'" ng-repeat="project in $ctrl.projects[id] track by $index"><a ui-sref="project({id:project.id,sparqlEndpoint:project.source.sparqlEndpoint,graph:project.source.graph})"><citable citable="project" no-link></citable></a></li></ul></div></div>'}r(8);e.exports=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CitableComponent=void 0;var n=r(1),i=function(e){return e&&e.__esModule?e:{default:e}}(n),o=r(0),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(o),s=t.CitableComponent=function e(){(0,i.default)(this,e),this.bindings={citable:"<",noLink:"@"},this.template=r(445)()};a.module("fibra.components.citable",[]).component("citable",new s)},function(e,t,r){function n(e){var t="";return t+='<a ng-if="$ctrl.citable.url &amp;&amp; !$ctrl.noLink" href="{{$ctrl.citable.url}}" title="{{$ctrl.citable.descriptions | prefLang}}">{{$ctrl.citable.labels | prefLang}}</a><div class="row project-cell" ng-init="cogStatus=\'\'" ng-mouseenter="cogStatus=\'visible\'" ng-mouseleave="cogStatus=\'\'"><span class="citable-label col-md-4" ng-if="!$ctrl.citable.url" title="{{$ctrl.citable.labels | prefLang}}">{{$ctrl.citable.labels | prefLang}}<span class="edit-project-icon glyphicon glyphicon-cog" ng-class="cogStatus"></span></span><span class="citable-description col-md-5" ng-if="!$ctrl.citable.url" title="{{$ctrl.citable.descriptions | prefLang}}">{{$ctrl.citable.descriptions | prefLang}}</span><span class="citable-date col-md-3">01 January 1970</span><span ng-repeat="rightsHolder in $ctrl.citable.rightsHolders"><span ng-if="$first">&nbsp;(</span><a ng-if="rightsHolder.url" href="{{rightsHolder.url}}" title="{{rightsHolder.descriptions | prefLang}}">{{rightsHolder.labels | prefLang}}</a><span ng-if="!rightsHolder.url" title="{{rightsHolder.descriptions | prefLang}}">{{rightsHolder.labels | prefLang}}</span><span ng-if="$middle">,&nbsp;</span><span ng-if="$last">)</span></span></div>'}r(8);e.exports=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CallbackController=t.CallbackComponent=void 0;var n=r(1),i=function(e){return e&&e.__esModule?e:{default:e}}(n),o=r(0),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(o),s=t.CallbackComponent=function e(){(0,i.default)(this,e),this.controller=l,this.template="<div>Please wait...</div>"},l=t.CallbackController=function e(t,r,n,o,a){(0,i.default)(this,e);var s={code:n.code,state:t.redirectState?t.redirectState:"projects"};s.code||window.location.search.replace("?","").split("&").forEach(function(e){var t=e.split("=");s[t[0]]=t[1]}),t.requestTime?$.getJSON("https://fibra-auth-gateway.herokuapp.com/authenticate/"+s.code,function(e){a.$apply(function(r){$.get("https://api.github.com/user/emails?access_token="+e.token,function(r){a.$apply(function(n){var i=r.filter(function(e){return e.primary&&e.verified})[0];i&&i.email?(t.login_provider="Github",t.user_email=i.email,t.access_token=e.token,t.requestTime=null,o.location.href=o.location.origin+o.location.pathname+"#!/"+s.state):alert("Authentication failed")})})})}):o.location.href="http://localhost:3000/#!/?"+o.location.href.split("?")[1]};l.$inject=["$localStorage","$sessionStorage","$stateParams","$window","$scope"],a.module("fibra.components.callback",[]).component("callback",new s)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoginController=t.LoginComponent=void 0;var n=r(1),i=function(e){return e&&e.__esModule?e:{default:e}}(n),o=r(0),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(o),s=t.LoginComponent=function e(){(0,i.default)(this,e),this.controller=l,this.template='<button ng-click="login()">Login with Github</button>'},l=t.LoginController=function e(t,r,n,o,a){(0,i.default)(this,e),r.login=function(){n.redirectState=a.redirect_hash.replace("#/",""),n.requestTime=Date.now(),o.location.href="https://github.com/login/oauth/authorize?client_id=6a9ff845a1c35f43a0f2&scope=user:email"}};l.$inject=["$urlService","$scope","$localStorage","$window","$stateParams"],a.module("fibra.components.login",[]).component("login",new s)},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ConstructViewComponent=t.ConstructViewComponentController=void 0;var o=r(1),a=i(o),s=r(2),l=i(s),u=r(71),c=r(0),p=n(c),d=r(41),f=n(d),h=r(45),g=n(h),v=t.ConstructViewComponentController=function(){function e(t,r,n,i,o){var s=this;(0,a.default)(this,e),this.sparqlTreeService=t,this.projectService=r,this.fibraService=n,this.$ngRedux=i,this.$q=o,this.paletteDisplay=!0,this.limitFilter="";var l=i.connect(this.mapTypesToThis,f)(this),c=i.connect(this.mapItemsToThis,g)(this);this.unsubscribe=function(){l(),c()};var p=r.getCurrentProject();this.currentProjectSource=r.getProjectSources().find(function(e){return e.sparqlEndpoint===p.source.sparqlEndpoint&&e.graph===p.source.graph}),n.on("change",function(){var e=n.getState().construct.displayTypes;return s.limitFilter="",e.forEach(function(e){e&&(s.limitFilter+="<"+e.id+">,")}),0!==s.limitFilter.length&&(s.limitFilter="FILTER (?groupId IN ("+s.limitFilter.substring(0,s.limitFilter.length-1)+"))"),s.$q.resolve("ok")}),this.classTreePromise=t.getTree(this.fibraService.getState().project.endpoint,this.fibraService.getState().project.treeQuery),this.classTreePromise.then(function(e){s.classTree=e,s.clearTypes(),s.traverseClassTree(e,function(e){return-1===s.types.types.indexOf(e)&&0===e.children.length},function(e){return s.addType(e)})}),this.fibraService.on("change",function(){return s.classTreePromise=t.getTree(s.fibraService.getState().project.endpoint,u.SparqlTreeService.getClassTreeQuery),s.classTreePromise.then(function(e){return s.classTree=e,"ok"})}),this.fibraService.on("action",function(){return s.state=n.getState(),s.$q.resolve("ok")}),this.state=n.getState()}return e.$inject=["sparqlTreeService","projectService","fibraService","$ngRedux","$q"],(0,l.default)(e,[{key:"createItem",value:function(e){var t=e.additionalInformation.type[0]?e.additionalInformation.type[0].value:"",r=this.types.types.filter(function(e){return e.id===t})[0],n=this.fibraService.getState().construct.displayTypes;if(!n[0]&&r)this.setOrderedTypes([r]);else if(!n[1]&&r&&n[0]!==r){var i=n.concat([]);i.push(r),this.setOrderedTypes(i)}return this.fibraService.dispatchAction(this.displayItem(e.ids[0]))}},{key:"downloadRDF",value:function(){var e=this.fibraService.getState().project.graph,t="http://ldf.fi/fibra/sparql?graph="+e,r=new XMLHttpRequest;r.open("GET",t,!0),r.onload=function(e){if(4===r.readyState)if(200===r.status){var t=r.responseText,n=document.createElement("a");n.href="data:application/rdf+xml;charset=utf-8,"+t,n.download="fibra.ttl",document.body.appendChild(n),n.click(),document.body.removeChild(n)}else console.error(r.statusText)},r.send(null)}},{key:"$onDestroy",value:function(){this.unsubscribe()}},{key:"mapTypesToThis",value:function(e){return{types:e.types}}},{key:"mapItemsToThis",value:function(e){return{items:e.items}}},{key:"traverseClassTree",value:function(e,t,r){var n=function e(n){t(n)&&(r(n),n.children.forEach(e))};e.forEach(n)}}]),e}(),m=t.ConstructViewComponent=function e(){(0,a.default)(this,e),this.controller=v,this.template=r(449)()};p.module("fibra.components.construct-view",["fibra.services"]).component("constructView",new m)},function(e,t,r){function n(e){var t="";return t+='<nav class="navbar navbar-default navbar-static-top palette-relevant" id="menu-bar" ng-class="{\'palette-offset\': $ctrl.paletteDisplay }"><div class="pull-left" id="type-bar"><explore-type></explore-type></div><div class="pull-left" id="menu-icons"><span class="btn-group"><button class="btn btn-xs" ng-init="eeMode = true" ng-click="eeMode = !eeMode"><span class="glyphicon glyphicon-piggy-bank" aria-hidden="true"></span></button></span><span class="btn-group"><button class="btn btn-xs" ng-init="linkMode = false" ng-click="linkMode = !linkMode" ng-class="{\'btn-primary\': linkMode}"><span class="glyphicon glyphicon-link" aria-hidden="true"></span></button></span><span class="btn-group"><button class="btn btn-xs disabled"><span class="glyphicon glyphicon-zoom-in" aria-hidden="true"></span></button><button class="btn btn-xs disabled"><span class="glyphicon glyphicon-zoom-out" aria-hidden="true"></span></button></span><span class="btn-group"><button class="btn btn-xs disabled"><span class="glyphicon glyphicon-upload" aria-hidden="true"></span></button><button class="btn btn-xs" ng-click="$ctrl.downloadRDF()"><span class="glyphicon glyphicon-download" aria-hidden="true"></span></button></span><span class="btn-group"><button class="btn btn-xs" ui-sref="configure({id:$ctrl.state.project.id,sourceId:$ctrl.currentProjectSource.id})"><span class="glyphicon glyphicon-cog"></span></button></span></div><div class="pull-right"><span class="glyphicon glyphicon-refresh fa-spin" ng-show="$ctrl.state.actionsRunning &gt; 0"></span></div></nav><div class="container-fluid main"><div class="row main no-gutter"><div class="col-md-12"><div class="col-md-12 palette-relevant" id="middle-column" ng-class="{\'palette-offset\': $ctrl.paletteDisplay }"><div id="enrichcontainer-outer" ng-class="{\'hide\': eeMode}">Enrich goes here</div><div id="explorecontainer-outer" ng-class="{\'hide\': !eeMode}"><explore link-mode="linkMode"></explore></div></div></div></div></div><div id="palette-container" ng-show="$ctrl.paletteDisplay" ng-class="{\'enrich\': !eeMode}"><palette></palette></div>'}r(8);e.exports=n},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ExploreComponent=void 0;var o=r(451),a=i(o),s=r(42),l=i(s),u=r(1),c=i(u),p=r(2),d=i(p),f=r(21),h=r(455),g=r(232),v=r(50),m=n(v),y=r(7),b=r(0),E=n(b),x=r(80),S=n(x),C=r(41),w=n(C),T=r(45),A=n(T),I=function(){function e(t,r,n,i,o,a,s,l,u){var p=this;(0,c.default)(this,e),this.$element=t,this.$compile=r,this.$window=n,this.$scope=i,this.$timeout=o,this.sparqlItemService=a,this.fibraService=s,this.$ngRedux=l,this.$q=u,this.primaryItems=[],this.secondaryItems=[],this.tertiaryItems=[],this.untypedItems=[],this.removedUntypedItems=[],this.allItems=[],this.radiusInitial=1,this.radius=8,this.radiusBounce=15,this.gridOffset=50,this.chargeForce=m.forceCollide(this.gridOffset/1.5),this.chargeForce2=m.forceCollide(this.gridOffset/1.5),this.svgBackgroundColor="#EEE",this.lastClickX=0,this.lastClickY=0;var d=l.connect(this.mapVerifyToThis,S)(this),f=l.connect(this.mapTypesToThis,w)(this),v=l.connect(this.mapItemsToThis,A)(this);this.unsubscribe=function(){d(),f(),v()},this.sunburst=new h.Sunburst(t,r,i,a,s,this.displayItem,this.displayItems),this.propertyPopover=new g.PropertyPopover(t,i,s,r),this.fibraService.on("change",function(){return p.queryAndBuild()}),this.itemService=a,this.links=[],this.$scope.layout={choice:"force",links:"hide"},this.$scope.$watch("layout.choice",this.updateExplore.bind(this,!1)),this.$scope.$watch("layout.links",this.updateExplore.bind(this,!1))}return e.$inject=["$element","$compile","$window","$scope","$timeout","sparqlItemService","fibraService","$ngRedux","$q"],(0,d.default)(e,[{key:"$onChanges",value:function(e){this.svgSel&&this.updateExplore(!1,!1)}},{key:"$postLink",value:function(){var e=this;this.svgSel=m.select(this.$element[0]).select("svg"),this.svgSel.append("rect").classed("background",!0).style("fill",this.svgBackgroundColor).on("click",function(){e.lastClickX=m.event.offsetX,e.lastClickY=m.event.offsetY,e.createDisplayItem(e.$q,e.sparqlItemService).then(function(){e.fibraService.dispatch("change")})}),this.svgSel.append("g").attr("class","links"),this.sunburst.addSunburstGroup(this.svgSel),this.radius=8,this.tooltip=m.select("body").append("div").style("position","absolute").style("z-index","20").style("background-color","gray").style("color","white").style("padding","3px").style("border-radius","2px").style("visibility","hidden"),this.edittip=m.select("body").append("div").attr("id","edittip").style("position","absolute").style("z-index","40").style("background-color","white").style("color","gray").style("border","1px solid gray").style("padding","3px").style("border-radius","2px").style("visibility","hidden"),this.updateSizing(),this.queryAndBuild()}},{key:"highlightLinks",value:function(e,t){m.selectAll("line").classed("relevant",!1);for(var r=0;r<this.links.length;r++){var n=this.links[r].source,i=this.links[r].target;n.index!==t&&i.index!==t||m.select("#link-"+r).classed("relevant",!0)}}},{key:"$onDestroy",value:function(){this.unsubscribe()}},{key:"queryAndBuild",value:function(){var e=this,t=this.sparqlItemService.getItems(this.items.items,!1).then(function(t){e.propertyPopover.hidePopover(),e.lockExisting(e.primaryItems),e.lockExisting(e.secondaryItems),e.lockExisting(e.tertiaryItems);var r=e.types.displayTypes,n=e.filterItemsByType(t,y.OWL.Thing.value);if(e.removedUntypedItems=e.untypedItems.filter(function(e){return-1===n.indexOf(e)}),e.untypedItems=e.mergeNodes(e.untypedItems,e.filterItemsByType(t,y.OWL.Thing.value)),r[0]&&(e.primaryItems=e.mergeNodes(e.primaryItems,e.filterItemsByType(t,r[0].id))),r[1]&&(e.secondaryItems=e.mergeNodes(e.secondaryItems,e.filterItemsByType(t,r[1].id))),r[2]&&(e.tertiaryItems=e.mergeNodes(e.tertiaryItems,e.filterItemsByType(t,r[2].id))),e.allItems=e.primaryItems.concat(e.secondaryItems).concat(e.tertiaryItems).concat(e.untypedItems),e.properties=[],e.primaryItems[0]&&e.primaryItems[0].localProperties){var i=!0,o=!1,a=void 0;try{for(var s,u=(0,l.default)(e.primaryItems[0].localProperties);!(i=(s=u.next()).done);i=!0){var c=s.value;e.properties.push({key:c.toCanonical(),value:c.label})}}catch(e){o=!0,a=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw a}}}return e.links=e.mergeLinks(e.links),"ok"}).then(function(){return e.updateExplore()});return this.fibraService.dispatchAction(this.fibraService.placeHolderAction(t)),t}},{key:"lockExisting",value:function(e){e.forEach(function(e){e.fx=e.gx,e.fy=e.gy})}},{key:"filterItemsByType",value:function(e,t){return e.filter(function(e){var r=e.localProperties.concat(e.remoteProperties).filter(function(e){return"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"===e.value});return!!r[0]&&-1!==r[0].values.map(function(e){return e.value.value}).indexOf(t)})}},{key:"updateSizing",value:function(){var e=window.innerWidth,t=window.innerHeight;this.exploreWidth=e,this.exploreHeight=t-36,m.select(this.$element[0]).select("#explorecontainer").style("height",this.exploreHeight+"px"),m.select(this.$element[0]).select("#exploretable").style("height",t-50+"px"),this.svgSel.style("width",e+"px").style("height",t-36+"px"),this.svgSel.select("rect.background").style("width",e+"px").style("height",t-36+"px");this.svgSel.style("width").replace("px",""),this.svgSel.style("height").replace("px","")}},{key:"appendNodes",value:function(e,t){var r=this,n=e.append("g").attr("id",function(e,r){return"node-"+r+"-"+t}).attr("class","node").classed(t,!0).append("circle").classed("node-circle",!0).classed(t,!0).attr("id",function(e,r){return"node-circle-"+r+"-"+t}).attr("r",this.radiusInitial+"px").call(m.drag().on("start",function(e,t){r.linkMode?r.dragline=r.svgSel.append("line").attr("class","dragLine"):(e.fx=e.x,e.fy=e.y)}).on("drag",function(e,t,n){r.linkMode?r.dragline.attr("x1",e.x).attr("y1",e.y).attr("x2",m.event.x).attr("y2",m.event.y):(m.select(n[t]).classed("fixed",!0),e.x=m.event.x,e.y=m.event.y),r.updateExplore(!1,!1)}).on("end",function(e,t,n){if(r.linkMode){var i=+r.dragline.attr("x2"),o=+r.dragline.attr("y2"),a=!1;m.selectAll(".node").each(function(t,n){Math.abs(i-t.x)<r.radius&&Math.abs(o-t.y)<r.radius&&(a=!0,r.itemProperty(t,[new f.PropertyAndValue(y.SKOS.related,y.DataFactory.instance.nodeFromNode(e))],[]).then(function(e){return r.dragline.remove(),r.queryAndBuild(),e}))}),a||r.dragline.remove()}else m.select(n[t]).classed("fixed")||(e.fx=void 0,e.fy=void 0)})).on("mouseover",function(e,t){r.highlightLinks(e,t),r.tooltip.style("top",m.event.pageY-10+"px").style("left",m.event.pageX+10+"px").style("visibility","visible").text(e.label)}).on("mouseout",function(e,t){r.svgSel.selectAll("line").classed("relevant",!1),r.tooltip.style("visibility","hidden")}).on("click",function(e,t,n){var i=e.selected;r.svgSel.selectAll(".node").each(function(e){e.selected=!1}),e.selected=!i,r.updateExplore(!1),e.selected?r.svgSel.select("g.sunburst-overlay").datum(e).each(r.sunburst.buildSunburst.bind(r)).style("display","block"):r.svgSel.select(".sunburst-overlay").style("display","none"),r.highlightLinks(e,t)});return n.transition().attr("r",this.radius+this.radiusBounce+"px").transition().attr("r",this.radius+"px"),n}},{key:"snapToGrid",value:function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=void 0,i=void 0;return r?(n=Math.round(e/this.gridOffset)*this.gridOffset,i=Math.round(t/this.gridOffset)*this.gridOffset):(n=Math.round(e/this.gridOffset)*this.gridOffset-this.gridOffset/2,i=Math.round(t/this.gridOffset)*this.gridOffset-this.gridOffset/2),[n,i]}},{key:"tickTransformNodes",value:function(e){var t=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.attr("transform",function(e,n){var i=e.x,o=e.y;e.x<t.radius&&(i=t.radius),e.y<t.radius&&(o=t.radius);var s=i,l=o;if("forcegrid"===t.$scope.layout.choice){var u=t.snapToGrid(i,o,r),c=(0,a.default)(u,2);s=c[0],l=c[1]}return e.gx=s,e.gy=l,"translate("+s+", "+l+")"}),e.filter(function(e){return e.selected}).node()){var n=this.sunburst.buildSunburst,i=this.svgSel,o=function(e,t,r){i.select("g.sunburst-overlay").datum(e).each(n.bind(this))};e.filter(function(e){return e.selected}).each(o.bind(this))}}},{key:"genericTick",value:function(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=e,a=t,s=r,l=n;i&&(o=o.transition(),a=a.transition(),s=s.transition(),l=l.transition()),this.tickTransformNodes(o,!0),this.tickTransformNodes(a,!1),this.tickTransformNodes(s,!1),this.svgSel.selectAll(".node-circle").classed("selected-circle",function(e){return e.selected}).style("cursor",this.linkMode?"crosshair":"initial"),this.svgSel.selectAll(".node-circle").classed("labeled",function(e){return!!e.label}).classed("verified",function(e){return e.localProperties.filter(function(e){return"http://www.w3.org/2002/07/owl#sameAs"===e.value}).length>0}),l.attr("x1",function(e){return e.source.gx}).attr("y1",function(e){return e.source.gy}).attr("x2",function(e){return e.target.gx}).attr("y2",function(e){return e.target.gy})}},{key:"updateExplore",value:function(){var e=this,t=(!(arguments.length>0&&void 0!==arguments[0])||arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1]),r=this.svgSel.selectAll("circle.untyped").data(this.untypedItems,function(e){return e.value}),n=this.svgSel.selectAll("circle.primary").data(this.primaryItems,function(e){return e.value}),i=this.svgSel.selectAll("circle.secondary").data(this.secondaryItems,function(e){return e.value});n.exit().remove(),i.exit().remove(),r.exit().remove(),r.enter().each(function(t,r,n){t.x=e.lastClickX,t.y=e.lastClickY,t.fx=e.lastClickX,t.fy=e.lastClickY,t.gx=e.lastClickX,t.gy=e.lastClickY}).each(this.propertyPopover.addPopover.bind(this,this.$scope,this.svgSel));var o=function(t){t.x=e.items.itemIndex[t.value].x,t.y=e.items.itemIndex[t.value].y,t.fx=e.items.itemIndex[t.value].x,t.fy=e.items.itemIndex[t.value].y,t.gx=e.items.itemIndex[t.value].x,t.gx=e.items.itemIndex[t.value].y;var r=e.removedUntypedItems.filter(function(e){return e.value===t.value})[0];r&&(t.x=r.x,t.y=r.y,t.fx=r.fx,t.fy=r.fy,t.gx=r.gx,t.gy=r.gy)};n.enter().each(o),i.enter().each(o),n=n.merge(this.appendNodes(n.enter(),"primary")),i=i.merge(this.appendNodes(i.enter(),"secondary")),r=r.merge(this.appendNodes(r.enter(),"untyped"));var a=this.svgSel.select("g.links").selectAll("line").data(this.links);return a.exit().remove(),a=a.enter().append("line").attr("id",function(e,t){return"link-"+t}).on("mouseover",function(t,r){e.tooltip.style("top",m.event.pageY-10+"px").style("left",m.event.pageX+10+"px").style("visibility","visible").text(t.property.label)}).on("mouseout",function(t,r){e.tooltip.style("visibility","hidden")}).merge(a).style("visibility","show"===this.$scope.layout.links?"visible":"hidden"),this.sunburst.addSunburstGroup(this.svgSel),this.genericTick(n,i,r,a,t),this.$q.resolve("ok")}},{key:"mapVerifyToThis",value:function(e){return{verify:e.verify}}},{key:"mapTypesToThis",value:function(e){return{types:e.types}}},{key:"mapItemsToThis",value:function(e){return{items:e.items}}},{key:"mergeNodes",value:function(e,t){for(var r=[],n=0;n<e.length;n++)for(var i=0;i<t.length;i++)e[n].toCanonical()===t[i].toCanonical()&&(r.push(e[n]),e[n].label=t[i].label,e[n].localProperties=t[i].localProperties);for(var o=0;o<t.length;o++){for(var a=!1,s=0;s<r.length;s++)r[s].toCanonical()===t[o].toCanonical()&&(a=!0);a||r.push(t[o])}return r}},{key:"mergeLinks",value:function(e){var t=[],r=this.primaryItems.concat(this.secondaryItems),n=new y.ENodeMap,i=!0,o=!1,a=void 0;try{for(var s,u=(0,l.default)(r);!(i=(s=u.next()).done);i=!0){var c=s.value;n.set(c,c);var p=c.localProperties.filter(function(e){return y.OWL.sameAs.equals(e)})[0];if(p&&p.values){var d=!0,f=!1,h=void 0;try{for(var g,v=(0,l.default)(p.values);!(d=(g=v.next()).done);d=!0){var m=g.value;n.set(m.value,c)}}catch(e){f=!0,h=e}finally{try{!d&&v.return&&v.return()}finally{if(f)throw h}}}}}catch(e){o=!0,a=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw a}}var b=!0,E=!1,x=void 0;try{for(var S,C=(0,l.default)(r);!(b=(S=C.next()).done);b=!0){var w=S.value,T=!0,A=!1,I=void 0;try{for(var L,N=(0,l.default)(w.localProperties);!(T=(L=N.next()).done);T=!0){var R=L.value,_=!0,k=!1,O=void 0;try{for(var P,D=(0,l.default)(R.values);!(_=(P=D.next()).done);_=!0){var F=P.value;n.has(F.value)&&w!==n.get(F.value)&&-1!==r.indexOf(n.get(F.value))&&t.push({source:w,target:n.get(F.value),property:R})}}catch(e){k=!0,O=e}finally{try{!_&&D.return&&D.return()}finally{if(k)throw O}}}}catch(e){A=!0,I=e}finally{try{!T&&N.return&&N.return()}finally{if(A)throw I}}}}catch(e){E=!0,x=e}finally{try{!b&&C.return&&C.return()}finally{if(E)throw x}}return t}}]),e}(),L=t.ExploreComponent=function e(){(0,c.default)(this,e),this.bindings={linkMode:"<"},this.controller=I,this.template=r(457)()};E.module("fibra.components.explore",["fibra.services"]).component("explore",new L)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=r(452),o=n(i),a=r(42),s=n(a);t.default=function(){function e(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=(0,s.default)(e);!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(i)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if((0,o.default)(Object(t)))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(e,t,r){e.exports={default:r(453),__esModule:!0}},function(e,t,r){r(67),r(54),e.exports=r(454)},function(e,t,r){var n=r(86),i=r(14)("iterator"),o=r(53);e.exports=r(9).isIterable=function(e){var t=Object(e);return void 0!==t[i]||"@@iterator"in t||o.hasOwnProperty(n(t))}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Sunburst=void 0;var i=r(1),o=n(i),a=r(2),s=n(a),l=r(50),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(l);t.Sunburst=function(){function e(t,r,n,i,a,s,l){var c=this;(0,o.default)(this,e),this.$element=t,this.$compile=r,this.$scope=n,this.sparqlItemService=i,this.fibraService=a,this.displayItem=s,this.displayItems=l,this.sbRadius=200,this.lessRadius=this.sbRadius*this.sbRadius/3-144,this.sbArc=u.arc().startAngle(function(e){return e.x0}).endAngle(function(e){return e.x1}).innerRadius(function(e){return Math.sqrt(e.y0-c.lessRadius)}).outerRadius(function(e){return Math.sqrt(e.y1-c.lessRadius)}),this.sbPart=u.partition().size([2*Math.PI,this.sbRadius*this.sbRadius]),this.item_info_tip_displayed=!1,this.sbTooltip=u.select("body").append("div").style("position","absolute").style("z-index","20").style("background-color","gray").style("color","white").style("padding","3px").style("border-radius","2px").style("visibility","hidden"),this.item_info_tip=u.select("body").append("div").attr("id","item_info_tip").style("position","absolute").style("z-index","20").style("background-color","white").style("padding","3px").style("visibility","hidden"),this.buildSunburst=this.buildSunburst.bind(this)}return(0,s.default)(e,[{key:"addSunburstGroup",value:function(e){var t=this;this.sel=e,this.sbGroup&&this.sbGroup.remove(),this.sbGroup=e.append("g").classed("sunburst-overlay",!0),this.sel.on("click",function(){t.item_info_tip_displayed&&(t.item_info_tip.style("visibility","hidden"),t.item_info_tip_displayed=!1)})}},{key:"buildSunburst",value:function(e,t,r){var n=this;this.original_data=e,this.sbGroup.attr("transform",function(e){return"translate("+e.gx+","+e.gy+")"});var i=u.hierarchy(e,function(e){return e.localProperties?e.localProperties.concat(e.remoteProperties):e.values?e.values.map(function(e){return e.value}):void 0});i.sum(function(e){return void 0===e.values&&void 0===e.localProperties?1:0});var o=(this.sbPart(i),this.sbGroup.selectAll("path").data(i.descendants(),function(e){return e.data}));o.exit().remove(),o.enter().filter(function(e){return e.depth>0}).append("path").classed("sunburst-cell",!0).on("mouseover",function(e,t){n.sbTooltip.style("top",u.event.pageY-10+"px").style("left",u.event.pageX+10+"px").style("visibility","visible").text(2===e.depth?e.data.label+" (click to add)":e.data.label+" (click to add all children)")}).on("mouseout",function(){n.sbTooltip.style("visibility","hidden")}).on("click",function(e,t){2===e.depth?n.fibraService.dispatchAction(n.displayItem(e.data)):n.fibraService.dispatchAction(n.displayItems(e.children.map(function(e){return e.data}))),n.original_data.selected=!1,n.sbTooltip.style("visibility","hidden"),n.sbGroup.remove()}).merge(o).attr("d",this.sbArc).style("stroke","#fff")}},{key:"selectItem",value:function(e){this.selectedItem=e}}]),e}()},function(e,t,r){function n(e){var t="";return t+='<div><div class="form-group"><label class="control-label" for="typeSelect">Type<button class="btn btn-sm pull-right" type="button" ng-show="$ctrl.showTypeCreate" ng-click="$ctrl.typeCreate($ctrl.typeQueryGS())">Create Type</button><input class="form-control label-input pull-right" type="text" ng-model="$ctrl.typeQueryGS" ng-model-options="{ getterSetter: true }" uib-typeahead="type.label for type in $ctrl.getTypes() | filter:$viewValue | limitTo:8" ng-change="$ctrl.typeEvaluate($ctrl.typeQueryGS())" typeahead-on-select="$ctrl.typeChange($item, $model, $label, $event)"></label></div><div class="form-group" ng-show="$ctrl.chosenType.id !== $ctrl.thingType"><label class="control-label" for="labelField">Label<input class="form-control label-input pull-right" type="text" ng-model="$ctrl.label" ng-blur="$ctrl.labelChange()"></label></div><div class="form-group"><a class="btn btn-sm" ng-click="$ctrl.deleteAndClose()">Cancel</a><a class="btn btn-sm" ng-click="$ctrl.closePopover()" ng-show="$ctrl.label!==\'\'">Save and close</a></div></div>'}r(8);e.exports=n},function(e,t,r){function n(e){var t="";return t+='<div id="explorecontainer"><svg id="explore"></svg></div><div id="layout-choice"><label>Force<input type="radio" ng-model="layout.choice" value="force"></label><label>Force Grid<input type="radio" ng-model="layout.choice" value="forcegrid"></label></div><div id="link-options"><label>Show<input type="radio" ng-model="layout.links" value="show"></label><label>Hide<input type="radio" ng-model="layout.links" value="hide"></label></div><div id="tablecontainer"><explore-table primary-items="$ctrl.primaryItems" secondary-items="$ctrl.secondaryItems"></explore-table></div><div id="verifycontainer" ng-show="$ctrl.verify"><verify node="$ctrl.verify"></verify></div>'}r(8);e.exports=n},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.PaletteComponent=t.PaletteComponentController=void 0;var o=r(30),a=i(o),s=r(94),l=i(s),u=r(1),c=i(u),p=r(2),d=i(p),f=r(50),h=n(f),g=r(7),v=r(0),m=n(v),y=r(41),b=n(y),E=r(45),x=n(E),S=t.PaletteComponentController=function(){function e(t,r,n,i,o,a,s){(0,c.default)(this,e),this.fibraService=t,this.$element=r,this.sparqlItemService=n,this.$q=i,this.$ngRedux=o,this.$scope=a,this.FileSaver=s,this.paletteItems=[],this.paletteSearchHeight=74,this.typeColorScale=h.scaleOrdinal(h.schemeCategory20c),this.labelFilter="",this.typeItemTree=h.map(),this.expanded=!0,this.typeGroupingProp={value:g.RDF.type.value,label:"Type"},this.groupingProp=this.typeGroupingProp,this.groupingProps=[];var l=o.connect(this.mapTypesToThis,b)(this),u=o.connect(this.mapItemsToThis,x)(this);this.unsubscribe=function(){l(),u()},this.typeItemTree.set("",{label:"No type defined",items:[],expanded:!1}),this.query()}return e.$inject=["fibraService","$element","sparqlItemService","$q","$ngRedux","$scope","FileSaver"],(0,d.default)(e,[{key:"$onDestroy",value:function(){this.unsubscribe()}},{key:"query",value:function(){var e=this;return this.typeItemTreePromise=this.loadAllItems(this.sparqlItemService).then(function(){return e.mergeItems(e.paletteItems,e.items.allItems)})}},{key:"rebuild",value:function(){this.typeItemTree=this.mergeItems(this.paletteItems,this.paletteItems),this.build(this.typeItemTree)}},{key:"$postLink",value:function(){var e=this;this.containerDiv=h.select(this.$element[0]).select("div.inner-palette-container"),this.divSel=h.select(this.$element[0]).select("div.palette"),this.nodeDrag=h.select(this.$element[0]).select(".palette-node-drag"),this.nodeDrag.style("display","none"),this.nodeDrag.append("circle"),this.containerDiv.style("height","100%").style("width","100%"),this.divSel.style("height","100%").style("width","100%"),this.tooltip=h.select("body").append("div").style("position","absolute").style("z-index","20").style("background-color","gray").style("color","white").style("padding","3px").style("border-radius","2px").style("visibility","hidden");var t=function(){return e.query().then(e.build.bind(e)).then(function(){return"Done"})};this.fibraService.on("change",t),this.typeItemTreePromise.then(function(t){e.build.bind(e)(t)})}},{key:"addItem",value:function(e,t){var r=e.typeValue,n=this.types.types.filter(function(e){return e.id===r})[0],i=this.types.displayTypes;if(!i[0]&&n)this.setOrderedTypes([n]);else if(!i[1]&&n&&i[0]!==n){var o=i.concat([]);o.push(n),this.setOrderedTypes(o)}return this.displayItem(new g.NamedNode(e.value),t),this.fibraService.dispatch("change"),this.$q.resolve()}},{key:"createItemLocal",value:function(e){var t=g.DataFactory.instance.namedNode(e);this.createItem(t)}},{key:"downloadCSV",value:function(e){var t=new Blob([h.csvFormat(e.value.items.map(function(e){var t,r=e.localProperties.filter(function(e){return e.value===g.OWL.sameAs.value})[0],n=e.localProperties.filter(function(e){return e.value===g.SKOS.prefLabel.value})[0];return t={},(0,l.default)(t,g.SKOS.prefLabel.value,n?n.values[0].value.value:""),(0,l.default)(t,"FibraId",e.value),(0,l.default)(t,"Match",r?r.values[0].value.value:""),t}),[g.SKOS.prefLabel.value,"FibraId","Match"])],{type:"application/csv;charset=utf-8"}),r=e.value.label+".csv";this.FileSaver.saveAs(t,r)}},{key:"build",value:function(e){var t=this,r=this;this.updateSizing();var n=e.entries().filter(function(e){return""!==e.key}),i=n.reduce(function(e,t){return e.concat(t.value.items)},[]),o=i.length>300?i.length>2e3?1:2:4,a=this.paletteHeight-25*n.length,s=(Math.sqrt(this.paletteWidth*a/i.length)-o)/2,l=s>8?8:s,u=2*l+o/2,c=2*l+o/2,p=Math.floor(this.paletteWidth/u)-1,d=this.nodeDrag,f=this.addItem.bind(this);this.paletteWidth;this.typesD3=this.divSel.selectAll("div.type").data(n,function(e){return e.key}),this.typesD3.exit().remove();var g=this.typesD3.enter().append("div").classed("type",!0).classed("inverse-icon",!0).text(function(e){return e.value.label});g.append("span").classed("glyphicon",!0).classed("glyphicon-download",!0).on("click",function(e){return t.downloadCSV(e)}),g.append("span").classed("glyphicon",!0).classed("expand-button",!0).on("click",function(e){e.value.expanded=!e.value.expanded,t.typeItemTreePromise.then(t.build.bind(t))}),g.append("svg").attr("width","100%"),this.typesD3=g.merge(this.typesD3),this.typesD3.selectAll(".expand-button").classed("glyphicon-resize-small",function(e){return e.value.expanded}).classed("glyphicon-resize-full",function(e){return!e.value.expanded}),this.typesD3.selectAll("svg").style("display",function(e){return e.value.expanded?"block":"none"});var v=this.typesD3.select("svg").attr("height",function(e){return(Math.ceil(e.value.items.length/p)+1)*c});this.circles=v.selectAll("circle.item").data(function(e){return e.value.items},function(e){return e.value}),this.circles.exit().remove(),this.circles=this.circles.enter().append("circle").classed("item",!0).attr("r",l).on("mouseover",function(e,r){t.tooltip.style("top",h.event.pageY-10+"px").style("left",h.event.pageX+10+"px").style("visibility","visible").text(e.label+" ("+e.groupLabel+")")}).on("mouseout",function(e,r){t.tooltip.style("visibility","hidden")}).call(h.drag().on("start",function(e){r.expanded=!1,r.$scope.$digest();var t=h.select(this);d.style("display","block"),d.select("circle").classed("item",t.classed("item")).attr("r",t.attr("r")).attr("fill",t.attr("fill")).attr("transform","translate(8,8)"),d.style("left",h.event.sourceEvent.clientX-r.paletteOffsetLeft-14).style("top",h.event.sourceEvent.clientY-r.paletteOffsetTop-10)}).on("drag",function(e){d.style("left",h.event.sourceEvent.clientX-r.paletteOffsetLeft-14).style("top",h.event.sourceEvent.clientY-r.paletteOffsetTop-10)}).on("end",function(e){r.expanded=!0,r.$scope.$digest();var t=h.select("#explorecontainer").node();h.event.sourceEvent.clientX>t.getBoundingClientRect().left&&h.event.sourceEvent.clientX<t.getBoundingClientRect().right&&h.event.sourceEvent.clientY>t.getBoundingClientRect().top&&h.event.sourceEvent.clientY<t.getBoundingClientRect().bottom?f(h.select(this).datum(),[h.event.sourceEvent.clientX-t.getBoundingClientRect().left,h.event.sourceEvent.clientY-t.getBoundingClientRect().top]).then(function(){d.style("display","none")}):d.style("display","none")})).merge(this.circles).call(this.update.bind(this));var m=v.selectAll("text").data(function(e){return e.value.items},function(e){return e.value});m=m.enter().append("text").style("pointer-events","none").merge(m),m.text(function(e){return e.label.split(" ").length>1?(e.label.split(" ")[0][0]+e.label.split(" ")[1][0]).toUpperCase():e.label[0]+e.label[1]}).attr("font-family","Ludica Console, monospace").attr("font-size",1.25*l+"px").attr("transform",function(e,t){return"translate("+((t%p+1)*u-.7*l)+","+((Math.floor(t/p)+1)*c+.4*l)+")"}),this.circles.transition().attr("fill",function(e){return t.typeColorScale(e.typeValue)}).attr("transform",function(e,t){return"translate("+(t%p+1)*u+","+(Math.floor(t/p)+1)*c+")"})}},{key:"update",value:function(e){var t=this;(e||this.circles).classed("displayed",function(e){return!!t.items.itemIndex[e.value]}).classed("filtered",function(e){return t.labelFilter&&!(-1!==e.label.toUpperCase().indexOf(t.labelFilter.toUpperCase()))})}},{key:"mapTypesToThis",value:function(e){return{types:e.types}}},{key:"mapItemsToThis",value:function(e){return{items:e.items}}},{key:"updateSizing",value:function(){this.paletteWidth=Math.round(.15*window.innerWidth),this.paletteHeight=Math.round(.95*window.innerHeight)-this.paletteSearchHeight,this.paletteOffsetLeft=Math.round(.01*window.innerHeight),this.paletteOffsetTop=Math.round(.04*window.innerHeight),this.divSel.style("height",this.paletteHeight+"px"),this.containerDiv.style("height",Math.round(.95*window.innerHeight)+"px")}},{key:"mergeItems",value:function(e,t){var r=this;this.typeItemTree=h.map(),this.paletteItems=[];var n=[];return this.groupingProps=[],t.forEach(function(e){var t=e.localProperties.filter(function(e){return e.value===r.groupingProp.value})[0],i=e.localProperties.filter(function(e){return e.value===g.RDF.type.value})[0],o=(0,a.default)({},e);t&&t.values[0]&&i&&i.values[0]?(o.groupValue=t.values[0].value.value,o.groupLabel=t.values[0].value.label,o.typeValue=i.values[0].value.value,r.typeItemTree.has(o.groupValue)?r.typeItemTree.get(o.groupValue).items.push(o):r.typeItemTree.set(o.groupValue,{label:o.groupLabel,items:[o],expanded:!0})):(o.groupValue="",o.groupLabel="No type defined",o.typeValue=""),r.paletteItems.push(o),e.localProperties.forEach(function(e){-1===n.indexOf(e.value)&&(n.push(e.value),r.groupingProps.push({value:e.value,label:e.label}))})}),this.typeItemTree.values().forEach(function(e){e.items.sort(function(e,t){return e.label===t.label?0:e.label>t.label?1:-1})}),this.typeItemTree}}]),e}(),C=t.PaletteComponent=function e(){(0,c.default)(this,e),this.template=r(459)(),this.controller=S};m.module("fibra.components.palette",["fibra.services"]).component("palette",new C)},function(e,t,r){function n(e){var t="";return t+='<svg class="palette-node-drag"></svg><div class="inner-palette-container" ng-class="{\'expanded\': $ctrl.expanded}"><div class="btn-group"><button class="btn btn-default" ng-class="{\'active\': $ctrl.groupingProp === $ctrl.typeGroupingProp}" ng-click="$ctrl.groupingProp = $ctrl.typeGroupingProp; $ctrl.rebuild()">Types</button><div class="btn-group" uib-dropdown><button class="btn btn-default" type="button" uib-dropdown-toggle>Group&nbsp;<span class="caret"></span></button><ul class="dropdown-menu" uib-dropdown-menu role="menu"><li role="menuitem" ng-repeat="prop in $ctrl.groupingProps"><a ng-class="{\'active\': $ctrl.groupingProp !== $ctrl.typeGroupingProp}" ng-click="$ctrl.groupingProp = prop; $ctrl.rebuild()">{{prop.label}}</a></li></ul></div></div><div class="palette"></div><div class="palette-upload" ng-show="displayUpload"><upload on-upload="displayUpload=false"></upload></div><input class="palette-filter" type="text" placeholder="filter by label" ng-model="$ctrl.labelFilter" ng-change="$ctrl.update()"><span ng-click="$ctrl.createItemLocal($ctrl.labelFilter)"><span class="glyphicon glyphicon-plus inverse-icon"></span></span><span ng-default="displayUpload=false" ng-click="displayUpload = true"><span class="glyphicon glyphicon-upload inverse-icon"></span></span></div>'}r(8);e.exports=n},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ExploreVerifyComponent=t.ExploreVerifyComponentController=void 0;var o=r(1),a=i(o),s=r(2),l=i(s),u=r(21),c=r(70),p=r(7),d=r(0),f=n(d),h=r(80),g=n(h),v=t.ExploreVerifyComponentController=function(){function e(t,r,n,i){(0,a.default)(this,e),this.fibraService=t,this.$ngRedux=r,this.$q=n,this.sparqlAutocompleteService=i,this.limitFilter="",this.queryString="",this.relevantTypes=[],this.fibraService=t,this.canceller=n.defer();var o=r.connect(this.mapVerifyToThis,g)(this),s=r.connect(this.mapItemsToThis,g)(this);this.unsubscribe=function(){o(),s()}}return e.$inject=["fibraService","$ngRedux","$q","sparqlAutocompleteService"],(0,l.default)(e,[{key:"$onDestroy",value:function(){this.unsubscribe()}},{key:"$onChanges",value:function(e){this.node&&(this.queryString=this.node.label,this.runQuery())}},{key:"mapVerifyToThis",value:function(e){return{verify:e.verify}}},{key:"mapItemsToThis",value:function(e){return{items:e.items}}},{key:"runQuery",value:function(){var e=this;this.canceller.resolve(),this.updateResults(new c.AutocompletionResults),this.queryRunning=!0,this.error=!1,this.limitFilter="",this.canceller=this.$q.defer();var t=this.node.localProperties.filter(function(e){return"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"===e.value})[0];this.relevantTypes=t?t.values.map(function(e){return e.value}):[],0!==this.limitFilter.length&&(this.limitFilter="FILTER (?groupId IN ("+this.limitFilter.substring(0,this.limitFilter.length-1)+"))"),console.log("Query info",this.queryString,this.limitFilter),this.sparqlAutocompleteService.autocomplete(this.queryString,6,!0,this.limitFilter,this.canceller.promise).then(function(t){console.log("Results in verify: ",t),e.queryRunning=!1,e.updateResults(t)},function(){console.log("Error in verify"),e.queryRunning=!1,e.error=!0},function(t){console.log("Update in verify: ",t),t.error?e.error=!0:e.updateResults(t.results)})}},{key:"updateResults",value:function(e){console.log("Relevant types",this.relevantTypes);this.relevantTypes.map(function(e){return e.label});this.matchingResults=e.remoteResults,console.log("Matches",this.matchingResults)}},{key:"sourcesFromResult",value:function(e){return" (Sources: "+e.datasources.join(", ")+")"}},{key:"verify",value:function(e){var t=this,r=e.ids.map(function(e){return new u.PropertyAndValue(p.OWL.sameAs,e)});this.fibraService.dispatchAction(this.itemProperty(this.node,r)).then(function(){t.clear()})}},{key:"clear",value:function(){this.verifyItem(null)}}]),e}(),m=t.ExploreVerifyComponent=function e(){(0,a.default)(this,e),this.template=r(461)(),this.controller=v,this.bindings={node:"<"}};f.module("fibra.components.verify",["fibra.services"]).component("verify",new m)},function(e,t,r){function n(e){var t="";return t+='<div class="verify-container"><div class="verify-header">Verify<div class="verify-cancel pull-left" ng-click="$ctrl.clear()">X</div><span class="glyphicon glyphicon-refresh fa-spin form-control-feedback" ng-show="$ctrl.queryRunning"></span></div><div class="verify-input"><input type="text" placeholder="search term" ng-model="$ctrl.queryString"><button class="btn btn-sm btn-primary" ng-click="$ctrl.runQuery()">Search</button></div><div class="verify-content"><ul class="verify-result-group" ng-repeat="grp in $ctrl.matchingResults"><div class="verify-result-group-header">{{grp.label}}</div><div class="verify-result" ng-repeat="rslt in grp.results" ng-click="$ctrl.verify(rslt)"><button class="btn btn-sm" ng-click="$ctrl.verify(rslt)">Verify</button><span>{{ rslt.matchedLabel.value }}</span><span>{{ $ctrl.sourcesFromResult(rslt) }}</span></div></ul></div></div>'}r(8);e.exports=n},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ExploreTableComponent=t.ExploreTableComponentController=void 0;var o=r(1),a=i(o),s=r(2),l=i(s),u=r(21),c=r(7),p=r(89),d=r(0),f=n(d),h=r(80),g=n(h),v=r(45),m=n(v),y=t.ExploreTableComponentController=function(){function e(t,r,n,i){(0,a.default)(this,e),this.fibraService=t,this.$ngRedux=r,this.$q=n,this.sparqlItemService=i,this.primaryItems=[],this.secondaryItems=[],this.tableTypes=["primary","secondary"],this.primary={properties:[],items:[]},this.secondary={properties:[],items:[]},this.removedProperties=[],this.originalPropertiesMap={},this.fibraService=t;var o=r.connect(this.mapVerifyToThis,g)(this),s=r.connect(this.mapItemsToThis,m)(this);this.unsubscribe=function(){o(),s()}}return e.$inject=["fibraService","$ngRedux","$q","sparqlItemService"],(0,l.default)(e,[{key:"$onDestroy",value:function(){this.unsubscribe()}},{key:"$onChanges",value:function(e){this.primary.properties=[],this.secondary.properties=[],this.primary.items=this.primaryItems,this.secondary.items=this.secondaryItems,this.sortProperties()}},{key:"mapVerifyToThis",value:function(e){return{verify:e.verify}}},{key:"mapItemsToThis",value:function(e){return{items:e.items}}},{key:"selectItem",value:function(e){this.editItem=e;var t=e.localProperties.map(function(e){var t=new u.PropertyToValues(e);return e.values.filter(function(e){return"Literal"===e.value.termType}).forEach(function(e){var r=c.DataFactory.instance.literal(e.value.value),n=new p.FullRichNodeFromNode(r,e.value.label,void 0,void 0,e.value.sourceEndpoints);t.values.push(new u.RichPropertyValue(n,e.properties))}),t}).filter(function(e){return e.values.length>0});this.originalPropertiesMap[e.value]=t}},{key:"itemVerified",value:function(e){return!!e.localProperties.filter(function(e){return e.value===c.OWL.sameAs.value})[0]}},{key:"saveItem",value:function(e){var t=e.localProperties.map(function(e){return e.values.filter(function(e){return"Literal"===e.value.termType}).map(function(t){return new u.PropertyAndValue(e,c.DataFactory.instance.literal(t.value.value))})}).reduce(function(e,t){return e.concat(t)},[]);this.itemProperty(e,t,this.originalPropertiesMap[e.value].map(function(e){return e.toPropertyAndValues(!0)}).reduce(function(e,t){return e.concat(t)},[]))}},{key:"hide",value:function(e){this.hideItem(e),this.fibraService.dispatch("change")}},{key:"delete",value:function(e){var t=this;this.deleteItem(this.$q,this.sparqlItemService,e).then(function(){t.fibraService.dispatch("change")})}},{key:"sortProperties",value:function(){var e=this;["primary","secondary"].forEach(function(t){for(var r=0;r<e[t].items.length;r++)for(var n=0;n<e[t].items[r].localProperties.length;n++){for(var i=!1,o=0;o<e.removedProperties.length;o++)e.removedProperties[o]===e[t].items[r].localProperties[n].value&&(i=!0);for(var a=0;a<e[t].properties.length;a++)e[t].properties[a].value===e[t].items[r].localProperties[n].value&&(i=!0);i||e[t].properties.push(e[t].items[r].localProperties[n])}})}},{key:"removeFromProperties",value:function(e){var t=this;["primary","secondary"].forEach(function(r){for(var n=0;n<t[r].properties.length;n++)t[r].properties[n].value===e.value&&t[r].properties.splice(n,1)}),this.addToRemovedProperties(e.value)}},{key:"addToRemovedProperties",value:function(e){this.removedProperties.push(e)}},{key:"addFromRemovedProperties",value:function(e){for(var t=0;t<this.removedProperties.length;t++)this.removedProperties[t]==e&&this.removedProperties.splice(t,1);this.fibraService.dispatch("change")}},{key:"downloadcsv",value:function(){for(var e=this.primary.items,t="data:text/csv;charset=utf-8,",r=0;r<this.primary.properties.length;r++)t+=this.primary.properties[r].label+",";t+="\n";for(var n=0;n<e.length;n++){for(var i=0;i<e[n].localProperties.length;i++)t+=e[n].localProperties[i].values[0].value.value+",";t+="\n"}var o=encodeURI(t);window.open(o)}}]),e}(),b=t.ExploreTableComponent=function e(){(0,a.default)(this,e),this.template=r(463)(),this.controller=y,this.bindings={primaryItems:"<",secondaryItems:"<"}};f.module("fibra.components.explore-table",["fibra.services"]).component("exploreTable",new b)},function(e,t,r){function n(e){var t="";return t+='<uib-tabset><uib-tab ng-repeat="t in $ctrl.tableTypes" index="$index" heading="{{$ctrl.fibraService.getState().construct.displayTypes[$index] ? $ctrl.fibraService.getState().construct.displayTypes[$index].label : t }}"><div class="widthcontainer"><a ng-click="$ctrl.downloadcsv()">Download</a><table class="exploretable table table-striped" style="table-layout: fixed;"><tr><th>Label</th><th ng-repeat="p in $ctrl[t].properties" ng-click="$ctrl.removeFromProperties(p)">{{ p.label }}</th><th>Actions</th></tr><tr ng-repeat="item in $ctrl[t].items"><td ng-click="$ctrl.selectItem(item)">{{ item.label.value }}</td><td ng-repeat="p in $ctrl[t].properties" ng-if="item === $ctrl.editItem"><input type="text" ng-repeat="e in $ctrl.editItem.localProperties" ng-if="e.value == p.value &amp;&amp; e.values[0].value.termType === \'Literal\'" ng-model="e.values[0].value.value"><small ng-repeat="e in item.localProperties" ng-if="e.value == p.value &amp;&amp; e.values[0].value.termType !== \'Literal\'">{{e.values[0].value.label.value}}</small></td><td ng-repeat="p in $ctrl[t].properties" ng-click="$ctrl.selectItem(item)" ng-if="item !== $ctrl.editItem"><small ng-repeat="e in item.localProperties" ng-if="e.value == p.value"><p ng-repeat="i in e.values">{{i.value.label}}</p></small></td><td><a ng-click="$ctrl.hide(item)">Hide</a><a ng-click="$ctrl.verifyItem(item)" ng-if="!$ctrl.itemVerified(item)">&nbsp;Verify</a><a ng-click="$ctrl.delete(item)">&nbsp;Delete</a><a ng-click="$ctrl.saveItem($ctrl.editItem)" ng-if="item === $ctrl.editItem">&nbsp;Save</a></td></tr></table><div>Hidden Properties (click to show)<p ng-repeat="x in $ctrl.removedProperties" ng-click="$ctrl.addFromRemovedProperties(x)">{{ x }}</p></div></div></uib-tab></uib-tabset>'}r(8);e.exports=n},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ExploreTypeComponent=t.ExploreTypeComponentController=void 0;var o=r(1),a=i(o),s=r(2),l=i(s),u=r(0),c=n(u),p=r(41),d=n(p),f=t.ExploreTypeComponentController=function(){function e(t,r){(0,a.default)(this,e),this.fibraService=t,this.$ngRedux=r,this.unsubscribe=r.connect(this.mapStateToThis,d)(this),this.fibraService=t}return e.$inject=["fibraService","$ngRedux"],(0,l.default)(e,[{key:"primaryClick",value:function(e){var t=this.types.displayTypes.concat([]);t[0]=e,this.setOrderedTypes(t),this.fibraService.dispatch("change")}},{key:"secondaryClick",value:function(e){var t=this.types.displayTypes.concat([]);t[1]=e,this.setOrderedTypes(t),this.fibraService.dispatch("change")}},{key:"tertiaryClick",value:function(e){var t=this.types.displayTypes.concat([]);t[2]=e,this.setOrderedTypes(t),this.fibraService.dispatch("change")}},{key:"$onDestroy",value:function(){this.unsubscribe()}},{key:"mapStateToThis",value:function(e){return{types:e.types}}}]),e}(),h=t.ExploreTypeComponent=function e(){(0,a.default)(this,e),this.template=r(465)(),this.controller=f};c.module("fibra.components.explore-type",["fibra.services"]).component("exploreType",new h)},function(e,t,r){function n(e){var t="";return t+='<div class="btn-group" uib-dropdown><button class="btn btn-primary btn-xs" id="single-button" type="button" uib-dropdown-toggle ng-disabled="disabled">{{ $ctrl.types.displayTypes[0] ? $ctrl.types.displayTypes[0].label : "Primary Nodes" }}&nbsp;<span class="caret"></span></button><ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="single-button"><li role="menuitem" ng-repeat="type in $ctrl.types.types"><a ng-click="$ctrl.primaryClick(type)">{{type.label}} ({{type.instances}})</a></li></ul></div><div class="btn-group" uib-dropdown><button class="btn btn-primary btn-xs" id="single-button" type="button" uib-dropdown-toggle ng-disabled="!$ctrl.types.displayTypes[0] || $ctrl.types.length &lt; 2">{{ $ctrl.types.displayTypes[1] ? $ctrl.types.displayTypes[1].label : "Secondary Nodes" }}&nbsp;<span class="caret"></span></button><ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="single-button"><li role="menuitem" ng-repeat="type in $ctrl.types.types"><a ng-click="$ctrl.secondaryClick(type)">{{type.label}} ({{type.instances}})</a></li></ul></div>'}r(8);e.exports=n},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigureViewComponent=t.ConfigureViewComponentController=void 0;var i=r(1),o=n(i),a=r(2),s=n(a),l=r(127),u=r(154),c=r(92),p=r(7),d=r(0),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(d),h=t.ConfigureViewComponentController=function(){function e(t,r,n,i,a,s){var d=this;if((0,o.default)(this,e),this.$q=t,this.projectService=r,this.sparqlTreeService=i,this.$state=s,this.primaryEndpointConfigurations=[],this.statistics={},this.selectedAuthorities={"http://ldf.fi/fibra/geonamesCidocLiteEndpointConfiguration":!0,"http://ldf.fi/fibra/viafCidocLiteEndpointConfiguration":!0},this.selectedArchives={},this.selectedSchemas={"http://ldf.fi/fibra/cidocCRMSchema":!0},this.schemas=[],this.authorities=[],this.archives=[],this.projectSources=r.getProjectSources(),this.projectSource=this.projectSources.find(function(e){return e.id===a.sourceId}),a.id)r.loadProject(this.projectSource,a.id,!1).then(function(e){d.project=e,d.selectedTemplate=e.asTemplate()});else{var f="http://ldf.fi/fibra/project_"+(0,c.UUID)();this.project=new l.Project(f),this.project.labels=[p.DataFactory.literal("",n.getState().language)],this.project.descriptions=[p.DataFactory.literal("",n.getState().language)],this.project.source=this.projectSource,this.project.endpoint=this.projectSource.sparqlEndpoint,this.project.updateEndpoint=this.projectSource.updateEndpoint,this.project.graphStoreEndpoint=this.projectSource.graphStoreEndpoint,this.project.graph=f}[new u.ProjectSourceInfo("Shared projects","http://ldf.fi/fibra/sparql","http://ldf.fi/fibra/update","http://ldf.fi/fibra/data","http://ldf.fi/fibra/shared-projects/","http://ldf.fi/fibra/fusekiEndpointWithTextIndexAndSecoFunctions")].concat(this.projectSources).forEach(function(e){r.listPrimaryEndpointConfigurations(e).then(function(e){if(!d.selectedTemplate){var t=e.find(function(e){return void 0!==e.compatibleEndpoints.find(function(e){return e===d.projectSource.type})});t&&(d.selectedTemplate=t,d.changeTemplate())}d.primaryEndpointConfigurations=d.primaryEndpointConfigurations.concat(e)}),r.listAuthorityEndpointConfigurations(e).then(function(e){return d.authorities=d.authorities.concat(e)}),r.listArchiveEndpointConfigurations(e).then(function(e){return d.archives=d.archives.concat(e)}),r.listSchemas(e).then(function(e){return d.schemas=d.schemas.concat(e)})})}return e.$inject=["$q","projectService","fibraService","sparqlTreeService","$stateParams","$state"],(0,s.default)(e,[{key:"saveAndOpen",value:function(){var e=this;this.project.authorityEndpoints=this.authorities.filter(function(t){return e.selectedAuthorities[t.id]}),this.project.archiveEndpoints=this.archives.filter(function(t){return e.selectedArchives[t.id]}),this.project.schemas=this.schemas.filter(function(t){return e.selectedSchemas[t.id]}),console.log(this.project),this.projectService.saveCitable(this.projectSource.updateEndpoint,this.projectSource.graphStoreEndpoint,this.project).then(function(){return e.$state.go("project",{id:e.project.id,sparqlEndpoint:e.project.source.sparqlEndpoint,graph:e.project.source.graph})})}},{key:"delete",value:function(){var e=this;this.projectService.deleteCitable(this.projectSource.updateEndpoint,this.project).then(function(){return e.$state.go("projects")})}},{key:"changeTemplate",value:function(){this.project&&this.selectedTemplate.copyToProject(this.project)}}]),e}(),g=t.ConfigureViewComponent=function e(){(0,o.default)(this,e),this.controller=h,this.template=r(467)()};f.module("fibra.components.configure",["fibra.services"]).component("configureView",new g).controller("projectsListController",["$scope",function(e){e.options=[{id:"0",description:"1st project name.",name:"Project name 1"},{id:"1",description:"2nd project name.",name:"Project name 2"},{id:"2",description:"3rd project name.",name:"Project name 3"}]}])},function(e,t,r){function n(e){var t="";return t+='<div class="container"><h3 class="header-title">Data Pen<span class="header-subtitle">New project</span></h3><div class="project-setup-container col-md-10 col-md-offset-1"><div class="row"><div class="header"><h4 class="col-md-3 col-md-offset-1">Start a new project.</h4></div></div><div class="left-side col-md-4 col-md-offset-1"><citable-editor citable="$ctrl.project" no-id></citable-editor></div><div class="right-side col-md-4 col-md-offset-1"><h5>Pull from an existing project</h5><p>Start with an existing sources and/or filter configuration from another project (optional).</p><div class="project-selection"><label>Project:  </label><div class="project-dropdown-container" ng-controller="projectsListController"><select ng-model="item.id" ng-selected="0" ng-options="option.id as option.name for option in options"><option ng-repeat="option in data.availableOptions" value="{{option.id}}">{{option.name}}</option></select></div><div class="project-pull-options"><div class="label-checkbox-container"><label>Sources<input type="checkbox"></label></div><div class="label-checkbox-container"><label>Filters<input type="checkbox"></label></div></div></div></div><div class="action-items"><button class="save-project" ng-click="$ctrl.saveAndOpen()">Save and open</button><button class="cancel-project" ng-click="$ctrl.delete()">Cancel</button></div></div></div>'}r(8);e.exports=n},function(e,t,r){function n(e){var t="";return t+='<div class="title"><div class="row"><label>Title</label></div><div class="row"><div class="form-group" ng-repeat="label in $ctrl.citable.labels"><input class="title-input" type="text" ng-model="label.value"></div></div></div><div class="description"><div class="row"><label>Description</label></div><div class="row"><div class="form-group" ng-repeat="descr in $ctrl.citable.descriptions"><textarea class="description-input form-control" ng-model="descr.value"></textarea></div></div></div>'}r(8);e.exports=n},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EditPrimaryEndpointConfigurationViewComponent=t.EditPrimaryEndpointConfigurationViewComponentController=void 0;var i=r(15),o=n(i),a=r(1),s=n(a),l=r(18),u=n(l),c=r(2),p=n(c),d=r(19),f=n(d),h=r(106),g=r(91),v=r(7),m=r(0),y=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(m),b=t.EditPrimaryEndpointConfigurationViewComponentController=function(e){function t(e,r,n,i){(0,s.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e.sourceId,n,i));return e.id?n.loadPrimaryEndpointConfiguration(a.projectSource,e.id).then(function(e){return a.c=e}):(a.c=new g.PrimaryEndpointConfiguration,a.c.id=e.id,a.c.labels=[v.DataFactory.literal("",r.getState().language)],a.c.descriptions=[v.DataFactory.literal("",r.getState().language)]),a}return t.$inject=["$stateParams","fibraService","projectService","toastr"],(0,f.default)(t,e),(0,p.default)(t,[{key:"addCompatibleEndpoint",value:function(){this.c.compatibleEndpoints.push("")}},{key:"removeCompatibleEndpoint",value:function(e){this.c.compatibleEndpoints.splice(e,1)}}]),t}(h.EditCitableComponentController),E=t.EditPrimaryEndpointConfigurationViewComponent=function e(){(0,s.default)(this,e),this.controller=b,this.template=r(470)()};y.module("fibra.components.edit-primary-endpoint-configuration",["fibra.services"]).component("editPrimaryEndpointConfigurationView",new E)},function(e,t,r){function n(e){var t="";return t+='<div class="container"><h1>Fibra</h1><h2>Edit project template</h2><citable-editor citable="$ctrl.c"></citable-editor><div class="form-group"><label>Project storage</label><select class="form-control" ng-model="$ctrl.projectSource" ng-options="ps as ps.id for ps in $ctrl.projectSources"></select></div><h4>Compatible endpoints</h4><div class="form-group" ng-repeat="ce in $ctrl.c.compatibleEndpoints"><button class="pull-right btn btn-xs" ng-click="$ctrl.removeCompatibleEndpoint($index)"><span class="glyphicon glyphicon-remove"></span></button><label>endpoint IRI</label><input class="form-control" type="text" ng-model="$ctrl.c.compatibleEndpoints[$index]"></div><button class="btn btn-xs" ng-click="$ctrl.addCompatibleEndpoint()"><span class="glyphicon glyphicon-plus"></span></button><div class="form-group"><label>Autocompletion query template</label><yasqe content="$ctrl.c.autocompletionQuery" on-content-changed="$ctrl.c.autocompletionQuery = content"></yasqe></div><div class="form-group"><label>Item query template</label><yasqe content="$ctrl.c.itemQuery" on-content-changed="$ctrl.c.itemQuery = content"></yasqe></div><div class="form-group"><label>Item deletion query template</label><yasqe content="$ctrl.c.deleteItemQuery" on-content-changed="$ctrl.c.deleteItemQuery = content"></yasqe></div><div class="form-group"><label>Tree query template</label><yasqe content="$ctrl.c.treeQuery" on-content-changed="$ctrl.c.treeQuery = content"></yasqe></div><div class="form-group"><label>Class query template</label><yasqe content="$ctrl.c.classQuery" on-content-changed="$ctrl.c.classQuery = content"></yasqe></div><div class="form-group"><label>Property query template</label><yasqe content="$ctrl.c.propertyQuery" on-content-changed="$ctrl.c.propertyQuery = content"></yasqe></div><button class="btn btn-success" ng-click="$ctrl.save()" ng-disabled="$ctrl.disabled">Save to endpoint</button><button class="btn btn-danger" ng-click="$ctrl.delete()" ng-disabled="$ctrl.disabled">Delete</button></div>'}r(8);e.exports=n},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EditRemoteEndpointConfigurationViewComponent=t.EditRemoteEndpointConfigurationViewComponentController=void 0;var i=r(15),o=n(i),a=r(1),s=n(a),l=r(18),u=n(l),c=r(2),p=n(c),d=r(19),f=n(d),h=r(106),g=r(129),v=r(7),m=r(0),y=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(m),b=t.EditRemoteEndpointConfigurationViewComponentController=function(e){function t(e,r,n,i){(0,s.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e.sourceId,n,i));return e.id?n.loadRemoteEndpointConfiguration(a.projectSource,e.id).then(function(e){return a.c=e}):(a.c=new g.RemoteEndpointConfiguration,a.c.labels=[v.DataFactory.literal("",r.getState().language)],a.c.descriptions=[v.DataFactory.literal("",r.getState().language)],a.c.types=[v.DataFactory.namedNode("")]),a}return t.$inject=["$stateParams","fibraService","projectService","toastr"],(0,f.default)(t,e),(0,p.default)(t,[{key:"addType",value:function(){this.c.types.push(v.DataFactory.namedNode(""))}},{key:"removeType",value:function(e){this.c.types.splice(e,1)}}]),t}(h.EditCitableComponentController),E=t.EditRemoteEndpointConfigurationViewComponent=function e(){(0,s.default)(this,e),this.controller=b,this.template=r(472)()};y.module("fibra.components.edit-remote-endpoint-configuration",["fibra.services"]).component("editRemoteEndpointConfigurationView",new E)},function(e,t,r){function n(e){var t="";return t+='<div class="container"><h1>Fibra</h1><h2>Edit remote configuration</h2><citable-editor citable="$ctrl.c"></citable-editor><h4>Endpoint types</h4><div class="form-inline"><div class="form-group" ng-repeat="type in $ctrl.c.types track by $index"><button class="pull-right btn btn-xs" ng-click="$ctrl.removeType($index)"><span class="glyphicon glyphicon-remove"></span></button><select ng-model="type.id"><option value="http://hdlab.stanford.edu/fibra/ontology#AuthorityEndpointConfiguration">Authority</option><option value="http://hdlab.stanford.edu/fibra/ontology#ArchiveEndpointConfiguration">Archive</option></select></div><button class="btn btn-xs" ng-click="$ctrl.addType()"><span class="glyphicon glyphicon-plus"></span></button></div><div class="form-group"><label>Project storage</label><select class="form-control" ng-model="$ctrl.projectSource" ng-options="ps as ps.id for ps in $ctrl.projectSources"></select></div><div class="form-group"><label>Autocompletion query template</label><yasqe content="$ctrl.c.autocompletionQuery" on-content-changed="$ctrl.c.autocompletionQuery = content"></yasqe></div><div class="form-group"><label>Item query template</label><yasqe content="$ctrl.c.itemQuery" on-content-changed="$ctrl.c.itemQuery = content"></yasqe></div><div class="form-group"><label>Tree query template</label><yasqe content="$ctrl.c.treeQuery" on-content-changed="$ctrl.c.treeQuery = content"></yasqe></div><button class="btn btn-success" ng-click="$ctrl.save()" ng-disabled="$ctrl.disabled">Save to endpoint</button></div>'}r(8);e.exports=n},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EditSchemaViewComponent=t.EditSchemaViewComponentController=void 0;var i=r(15),o=n(i),a=r(1),s=n(a),l=r(18),u=n(l),c=r(19),p=n(c),d=r(106),f=r(130),h=r(7),g=r(0),v=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(g),m=t.EditSchemaViewComponentController=function(e){function t(e,r,n,i){(0,s.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e.sourceId,n,i));return e.id?n.loadSchema(a.projectSource,e.id).then(function(e){return a.c=e}):(a.c=new f.Schema,a.c.labels=[h.DataFactory.literal("",r.getState().language)],a.c.descriptions=[h.DataFactory.literal("",r.getState().language)],a.c.endpoint=a.projectSource.sparqlEndpoint),a}return t.$inject=["$stateParams","fibraService","projectService","toastr"],(0,p.default)(t,e),t}(d.EditCitableComponentController),y=t.EditSchemaViewComponent=function e(){(0,s.default)(this,e),this.controller=m,this.template=r(474)};v.module("fibra.components.edit-schema-view",["fibra.services"]).component("editSchemaView",new y)},function(e,t,r){function n(e){var t="";return t+='<div class="container"><h1>Fibra</h1><h2>Edit schema</h2><citable-editor citable="$ctrl.c"></citable-editor><div class="form-group"><label>Project storage</label><select class="form-control" ng-model="$ctrl.projectSource" ng-options="ps as ps.id for ps in $ctrl.projectSources"></select></div><div class="form group"><label>schema endpoint</label><input class="form-control" type="text" ng-model="$ctrl.c.endpoint"></div><div class="form-group"><label>Class query template</label><yasqe content="$ctrl.c.classQuery" on-content-changed="$ctrl.c.classQuery = content"></yasqe></div><div class="form-group"><label>Property query template</label><yasqe content="$ctrl.c.propertyQuery" on-content-changed="$ctrl.c.propertyQuery = content"></yasqe></div><button class="btn btn-success" ng-click="$ctrl.save()" ng-disabled="$ctrl.disabled">Save to endpoint</button><button class="btn btn-danger" ng-click="$ctrl.delete()" ng-disabled="$ctrl.disabled">Delete</button></div>'}r(8);e.exports=n},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectSourceConfigurationsViewComponent=t.ProjectSourceConfigurationsViewComponentController=void 0;var i=r(1),o=n(i),a=r(2),s=n(a),l=r(0),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(l),c=t.ProjectSourceConfigurationsViewComponentController=function(){function e(t,r,n){var i=this;(0,o.default)(this,e),this.projectService=r,this.toastr=n,this.source=r.getProjectSources().find(function(e){return e.id===t.sourceId}),r.listProjects(this.source).then(function(e){return i.projects=e}),r.listSchemas(this.source).then(function(e){return i.schemas=e}),r.listPrimaryEndpointConfigurations(this.source).then(function(e){return i.primaryEndpointConfigurations=e}),r.listAuthorityEndpointConfigurations(this.source).then(function(e){return i.authorityEndpoints=e}),r.listArchiveEndpointConfigurations(this.source).then(function(e){return i.archiveEndpoints=e})}return e.$inject=["$stateParams","projectService","toastr"],(0,s.default)(e,[{key:"delete",value:function(e,t){var r=this;this.projectService.deleteCitable(this.source.updateEndpoint,e[t]).then(function(){e.splice(t,1)},function(e){r.toastr.error("Error deleting resource",e)})}}]),e}(),p=t.ProjectSourceConfigurationsViewComponent=function e(){(0,o.default)(this,e),this.controller=c,this.template=r(476)()};u.module("fibra.components.project-source-configurations-view",["fibra.services"]).component("projectSourceConfigurationsView",new p)},function(e,t,r){function n(e){var t="";return t+='<div class="container"><h1>Fibra</h1><h2>Projects</h2><ul><li ng-repeat="c in $ctrl.projects"><a ui-sref="configure({sourceId:$ctrl.source.id,id:c.id})">{{c.labels | prefLang}}</a><button class="btn btn-danger" ng-click="$ctrl.delete($ctrl.projects, $index)">X</button></li></ul><h2>Schemas</h2><ul><li ng-repeat="c in $ctrl.schemas"><a ui-sref="editSchema({sourceId:$ctrl.source.id,id:c.id})">{{c.labels | prefLang}}</a><button class="btn btn-danger" ng-click="$ctrl.delete($ctrl.schemas, $index)">X</button></li></ul><h2>Primary endpoint configurations</h2><ul><li ng-repeat="c in $ctrl.primaryEndpointConfigurations"><a ui-sref="editPrimaryEndpointConfiguration({sourceId:$ctrl.source.id,id:c.id})">{{c.labels | prefLang}}</a><button class="btn btn-danger" ng-click="$ctrl.delete($ctrl.primaryEndpointConfigurations, $index)">X</button></li></ul><h2>Archive endpoints</h2><ul><li ng-repeat="c in $ctrl.archiveEndpoints"><a ui-sref="editRemoteEndpointConfiguration({sourceId:$ctrl.source.id,id:c.id})">{{c.labels | prefLang}}</a><button class="btn btn-danger" ng-click="$ctrl.delete($ctrl.archiveEndpoints, $index)">X</button></li></ul><h2>Authority endpoints</h2><ul><li ng-repeat="c in $ctrl.authorityEndpoints"><a ui-sref="editRemoteEndpointConfiguration({sourceId:$ctrl.source.id,id:c.id})">{{c.labels | prefLang}}</a><button class="btn btn-danger" ng-click="$ctrl.delete($ctrl.authorityEndpoints, $index)">X</button></li></ul><a ui-sref="projectSources()">Back to project sources</a></div>'}r(8);e.exports=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypeSelectComponent=void 0;var n=r(1),i=function(e){return e&&e.__esModule?e:{default:e}}(n),o=r(0),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(o),s=t.TypeSelectComponent=function e(){(0,i.default)(this,e),this.bindings={tree:"<",onSelect:"&"},this.template=r(478)};a.module("fibra.components.type-select",[]).component("typeSelect",new s)},function(e,t,r){function n(e){var t="";return t+='<script type="text/ng-template" id="type-pill.html"><div class="checkbox"><label><input type="checkbox" ng-model="node.selected" ng-change="$ctrl.onSelect({treeNode:node})">{{node.label}}</label><span class="pull-left">{{node.matchingInstances != node.matchingInstances ? node.matchingInstances+\'/\'+node.instances : node.instances}}</span></div><ul><li ng-repeat="node in node.children" ng-include="\'tree-pill.html\'" ng-class="{selected:node.selected}"></li></ul><\/script><ul><li ng-repeat="node in $ctrl.tree" ng-include="\'type-pill.html\'" ng-class="{selected:node.selected}"></li></ul>'}r(8);e.exports=n},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.UploadComponent=t.UploadComponentController=void 0;var o=r(1),a=i(o),s=r(2),l=i(s),u=r(0),c=n(u),p=r(50),d=n(p),f=r(21),h=r(7),g=r(41),v=n(g),m=r(45),y=n(m),b=t.UploadComponentController=function(){function e(t,r,n,i,o){(0,a.default)(this,e),this.fibraService=t,this.sparqlItemService=r,this.$ngRedux=n,this.$q=i,this.$scope=o,this.classSelect=null;var s=n.connect(this.mapTypesToThis,v)(this),l=n.connect(this.mapItemsToThis,y)(this);this.unsubscribe=function(){s(),l()},this.fibraService=t,o.registerFile=this.registerFile.bind(this)}return e.$inject=["fibraService","sparqlItemService","$ngRedux","$q","$scope"],(0,l.default)(e,[{key:"mapTypesToThis",value:function(e){return{types:e.types}}},{key:"mapItemsToThis",value:function(e){return{items:e.items}}},{key:"registerFile",value:function(e){this.fileInput=e}},{key:"uploadFile",value:function(){var e=this;console.log(this.fileInput,this.types.types.filter(function(t){return t.id===e.classSelect})[0]);var t=this.types.types.filter(function(t){return t.id===e.classSelect})[0],r=new FileReader;r.onload=function(){var n=d.csvParse(r.result),i=n.filter(function(e){return!e.FibraId}),o=n.columns[0];console.log(n,o);var a=[i.length>0?e.fibraService.dispatchAction(e.createItems(e.$q,e.sparqlItemService,i.map(function(e){return h.DataFactory.instance.namedNode(e[o])}),t.id)):e.$q.resolve(e.fibraService.getState()),e.$q.all(n.filter(function(e){return!!e.FibraId}).map(function(t){t.Match&&!t[h.OWL.sameAs.value]&&(t[h.OWL.sameAs.value]=t.Match,delete t.Match);var r=d.entries(t),n=r.filter(function(e){return"FibraId"!==e.key&&e.value&&e.key!==h.OWL.sameAs.value&&"Notes"!==e.key&&"Match"!==e.key}).map(function(e){return new f.PropertyAndValue(h.DataFactory.instance.namedNode(e.key),0===e.value.indexOf("http://")?h.DataFactory.instance.namedNode(e.value):h.DataFactory.instance.literal(e.value))});return r.filter(function(e){return e.key===h.OWL.sameAs.value&&e.value}).forEach(function(e){return n.push(new f.PropertyAndValue(h.OWL.sameAs,h.DataFactory.instance.namedNode(e.value)))}),e.fibraService.dispatchAction(e.itemProperty(e.sparqlItemService,new h.NamedNode(t.FibraId),n))})).then(function(e){return e[e.length-1]})];e.$q.all(a).then(function(){e.fibraService.dispatch("change")})},r.readAsText(this.fileInput.files[0]),this.fileInput.value=null,this.onUpload()}}]),e}(),E=t.UploadComponent=function e(){(0,a.default)(this,e),this.controller=b,this.template=r(480)(),this.bindings={onUpload:"&"}};c.module("fibra.components.upload",[]).component("upload",new E)},function(e,t,r){function n(e){var t="";return t+='<div class="panel panel-default"><div class="panel-body"><h4>Upload data</h4><form class="form-horizontal"><div class="form-group"><label class="col-sm-2 control-label" for="upload-file">File</label><div class="col-sm-9 col-sm-offset-1"><input type="file" id="upload-file" onchange="angular.element(this).scope().registerFile(this)"></div></div><div class="form-group"><label class="col-sm-2 control-label" for="upload-class">Class</label><div class="col-sm-9 col-sm-offset-1"><select class="form-control" ng-model="$ctrl.classSelect"><option ng-repeat="type in $ctrl.types.types" value="{{type.id}}">{{ type.label }}</option><option value="">+ add class</option></select></div></div></form><div class="info">Fibra will assume that the first column of your CSV contains the labels of your entities and that all entities are unique</div><div class="info">If you are unsure about formatting, take a look at the documentation</div><div class="btn btn-primary" ng-click="$ctrl.uploadFile()">Upload to palette!</div></div></div>'}r(8);e.exports=n},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectComponent=t.ProjectComponentController=void 0;var i=r(1),o=n(i),a=r(2),s=n(a),l=r(0),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(l),c=t.ProjectComponentController=function(){function e(t,r,n,i,a,s){var l=this;(0,o.default)(this,e),this.projectActionService=t,this.itemsService=r,this.$stateParams=n,this.$state=i,this.$ngRedux=a,this.$document=s,this.actions={},this.currentView="sources";var u=a.connect(this.mapProjectToActions,null)(this.actions);this.actions.unsubscribe=function(){u()},n.id&&n.sparqlEndpoint&&n.graph&&this.actions.project.id!==n.id&&this.projectActionService.setProject(n.id,n.sparqlEndpoint,n.graph),n.view&&-1!==["sources","filter","active"].indexOf(n.view)&&(this.currentView=n.view),r.getAllItemsCount().then(function(e){return l.projectActionService.setAllItemCount(e)}),r.getFilteredItemsCount().then(function(e){return l.projectActionService.setFilteredItemCount(e)})}return e.$inject=["projectActionService","itemsService","$stateParams","$state","$ngRedux","$document"],(0,s.default)(e,[{key:"$postLink",value:function(){var e=this.setView.bind(this);this.$document.bind("keydown",function(t){t.ctrlKey&&49===t.keyCode?e("sources"):t.ctrlKey&&50===t.keyCode?e("filter"):t.ctrlKey&&51===t.keyCode&&e("active")})}},{key:"setView",value:function(e){this.$state.go("project",{view:e})}},{key:"dataUsedProportion",value:function(){return"filter"===this.currentView?this.actions.project.filteredItemsCount/this.actions.project.allItemsCount*100:"active"===this.currentView?this.actions.project.activeItemsCount/this.actions.project.filteredItemsCount*100:0}},{key:"mapProjectToActions",value:function(e){return{project:e.frontend.project}}}]),e}(),p=t.ProjectComponent=function e(){(0,o.default)(this,e),this.template=r(482)(),this.controller=c};u.module("fibra.components.project",[]).component("project",new p)},function(e,t,r){function n(e){var t="";return t+='<div class="main-area" ng-show="$ctrl.currentView===\'active\'"><active></active></div><div class="main-area" ng-show="$ctrl.currentView===\'filter\'"><filter></filter></div><div class="main-area" ng-show="$ctrl.currentView===\'sources\'"><sources></sources></div><div class="top-nav"><div class="nav-element return-button"><img class="back-icon" src="./app/images/back@2x.png" ui-sref="projects"></div><div class="nav-element project-description push-down">{{ $ctrl.actions.project.description.length > 30 ? $ctrl.actions.project.description.substr(0, 27) + \'...\' : $ctrl.actions.project.description }}</div><div class="nav-element vertical-divider muted">|</div><span class="nav-links"><div class="nav-element nav-link push-down" ng-class="{muted: $ctrl.currentView !== \'sources\', active: $ctrl.currentView === \'sources\'}" ng-click="$ctrl.setView(\'sources\')">Sources</div><div class="nav-element nav-link push-down" ng-class="{muted: $ctrl.currentView !== \'filter\', active: $ctrl.currentView === \'filter\'}" ng-click="$ctrl.setView(\'filter\')">Filter</div><div class="nav-element nav-link push-down" ng-class="{muted: $ctrl.currentView !== \'active\', active: $ctrl.currentView === \'active\'}" ng-click="$ctrl.setView(\'active\')">Active</div></span><div class="nav-element search" ng-hide="$ctrl.currentView===\'sources\'"><input class="search-bar"></div><div class="nav-element bibliography-link"><img class="bib-icon" src="./app/images/bibliography@2x.png"></div><span class="usage" ng-hide="$ctrl.currentView===\'sources\'"><div class="nav-element usage-chart"><div class="progress"><div class="progress-bar" ng-style="{ \'width\': $ctrl.dataUsedProportion() +\'%\' }"></div></div></div></span></div>'}r(8);e.exports=n},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SourcesComponent=t.SourcesComponentController=void 0;var o=r(1),a=i(o),s=r(2),l=i(s),u=r(0),c=n(u),p=r(93),d=n(p),f=r(131),h=i(f),g=t.SourcesComponentController=function(){function e(t,r){(0,a.default)(this,e),this.projectService=t,this.$ngRedux=r,this.actions={},this.state={},this.projectsOpen={};var n=r.connect(this.mapProjectToActions,d)(this.actions),i=r.connect(function(e){return{project:e.frontend.project,sources:e.frontend.sources}},h.default)(this.state);this.actions.unsubscribe=function(){n(),i()},this.localSourceClassTree=c.copy(this.state.sources.sourceClassToggle)}return e.$inject=["projectService","$ngRedux"],(0,l.default)(e,[{key:"getSourceClassStatus",value:function(e,t){return!(!this.state.sources.sourceClassToggle[e]||!this.state.sources.sourceClassToggle[e][t])&&this.state.sources.sourceClassToggle[e][t]}},{key:"mapProjectToActions",value:function(e){return{project:e.frontend.project}}}]),e}(),v=t.SourcesComponent=function e(){(0,a.default)(this,e),this.template=r(484)(),this.controller=g};c.module("fibra.components.sources",[]).component("sources",new v)},function(e,t,r){function n(e){var t="";return t+='<div class="sources-main"><div class="sources-left"><div class="sources-head"><h3 class="pull-left">Project sources</h3><span class="pull-right">add</span></div><div class="sources-list"><span ng-repeat="source in $ctrl.state.sources.sources"><h4 ng-click="$ctrl.projectsOpen[source.id] = !$ctrl.projectsOpen[source.id]"><i class="glyphicon glyphicon-triangle-right" ng-show="!$ctrl.projectsOpen[source.id]"></i><i class="glyphicon glyphicon-triangle-bottom" ng-show="$ctrl.projectsOpen[source.id]"></i><span class="source-name">{{source.labels | prefLang}}</span></h4><div class="class-list" ng-show="$ctrl.projectsOpen[source.id] ? true : false"><label class="checkbox-container" ng-repeat="clss in source.classes" ng-hide="clss.labels.length === 0"> <input type="checkbox" ng-model="$ctrl.localSourceClassTree[source.id][clss.id.value]" ng-click="$ctrl.state.setSourceClassActive(source.id, clss.id.value, !$ctrl.getSourceClassStatus(source.id, clss.id.value))"><span>{{clss.labels | prefLang}}</span></label></div></span></div></div><div class="sources-right"></div></div>'}r(8);e.exports=n},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ActiveComponent=t.ActiveComponentController=void 0;var o=r(1),a=i(o),s=r(2),l=i(s),u=r(0),c=n(u),p=r(185),d=i(p),f=r(50),h=n(f);r(233),r(234);var g=r(487),v=i(g),m=t.ActiveComponentController=function(){function e(t,r,n,i,o){(0,a.default)(this,e),this.projectActionService=t,this.$scope=r,this.$q=n,this.$ngRedux=i,this.searchService=o,this.state={},this.radiusInitial=1,this.radius=8,this.radiusBounce=15,this.nodeSearchTopOffset=39,this.circularMenuTopOffset=55,this.currentlyAdding=!1,this.unsubscribe=i.connect(function(e){return{project:e.frontend.project,active:e.frontend.active}},d.default)(this.state)}return e.$inject=["projectActionService","$scope","$q","$ngRedux","searchService"],(0,l.default)(e,[{key:"$onDestroy",value:function(){this.unsubscribe()}},{key:"$postLink",value:function(){this.buildCanvas(),this.nodeSearch=h.select(".node-search"),this.menu=(0,v.default)("#circle-menu").config({background:"#FFFFFF",backgroundHover:"#DDDDDD",diameter:150,menus:[{title:"E"},{title:"C"},{title:"D"},{title:"?"},{title:"T"}]}),this.updateCanvas()}},{key:"buildCanvas",value:function(){var e=h.select(".main-svg"),t=e.select(".main-g");t.select("rect").on("click",this.canvasClick.bind(this,t));this.updateCanvasSize()}},{key:"canvasClick",value:function(e){var t=this;this.$scope.$apply(function(){t.currentlyAdding||(t.nodeSearchOffsetTop=h.event.offsetY,t.nodeSearchOffsetLeft=h.event.offsetX,t.appendNode(e,t.nodeSearchOffsetTop,t.nodeSearchOffsetLeft,"addition-node"),t.nodeSearch.style("top",h.event.offsetY+t.nodeSearchTopOffset+"px"),t.getCanvasSize().width-(h.event.offsetX+t.state.active.dividerPercent/100*window.innerWidth)>380?t.nodeSearch.style("left",h.event.offsetX+t.state.active.dividerPercent/100*window.innerWidth+30+"px"):t.nodeSearch.style("left",h.event.offsetX+t.state.active.dividerPercent/100*window.innerWidth-30-350+"px")),t.currentlyAdding=!0})}},{key:"nodeSearchRemove",value:function(){h.select(".addition-node").remove(),this.currentlyAdding=!1,this.nodeSearchSelected=""}},{key:"nodeSearchResults",value:function(e){return this.searchService.searchSources(e)}},{key:"nodeSearchSelect",value:function(e,t,r,n){var i=this,o={id:e.id,description:e.description,topOffset:this.nodeSearchOffsetTop,leftOffset:this.nodeSearchOffsetLeft};this.state.addItemToCurrentLayout(o).then(function(){i.updateCanvas(),i.$scope.$apply(i.nodeSearchRemove.bind(i))}),this.projectActionService.setActiveItemCount(this.state.active.activeLayout.items.length)}},{key:"nodeClick",value:function(e,t){this.menu.show([e.leftOffset,e.topOffset+this.circularMenuTopOffset]),console.log(h.event)}},{key:"appendNode",value:function(e,t,r,n){var i=e.append("g").classed("node",!0).classed(n,!0).attr("transform","translate("+r+","+t+")");return i.append("circle").classed("node-circle",!0).attr("r",this.radiusInitial+"px").transition().attr("r",this.radiusBounce+"px").transition().attr("r",this.radius+"px"),i}},{key:"maintainNode",value:function(e,t,r){return e.attr("transform","translate("+t+","+r+")"),e.select("circle").transition().attr("r",this.radius+"px"),e}},{key:"updateCanvas",value:function(){var e=this,t=h.select(".main-svg"),r=t.select(".main-g"),n=r.select(".main-g-items"),i=this,o=n.selectAll(".item-node").data(this.state.active.activeLayout.items,function(e){return e.id}),a=o.enter().append("g").classed("node",!0).classed("item-node",!0).attr("transform",function(e){return"translate("+e.leftOffset+","+e.topOffset+")"});a.append("circle").classed("node-circle",!0).on("click",function(t,r,n){e.nodeClick(t,n)}),o=o.merge(a),o.each(function(e,t){i.maintainNode(h.select(o.nodes()[t]),e.leftOffset,e.topOffset)})}},{key:"updateCanvasSize",value:function(){var e=this.getCanvasSize(),t=e.height,r=e.width,n=h.select(".main-background");n.style("height",t),n.style("width",r)}},{key:"getCanvasSize",value:function(){var e=h.select(".main-svg");return{height:e.node().clientHeight,width:e.node().clientWidth}}},{key:"dragDivider",value:function(e){var t=100*e.clientX/window.innerWidth;this.state.setActiveDividerPercentage(t>98?100:t<2?0:t)}},{key:"tableWidthStyle",value:function(){return{width:this.state.active.dividerPercent+"%"}}},{key:"canvasWidthStyle",value:function(){return{width:100-this.state.active.dividerPercent+"%",left:this.state.active.dividerPercent+"%"}}},{key:"dragTabLeftStyle",value:function(){return{left:this.state.active.dividerPercent+"%"}}}]),e}(),y=t.ActiveComponent=function e(){(0,a.default)(this,e),this.template=r(509)(),this.controller=m};c.module("fibra.components.active",["ui.bootstrap","fibra.actions.project","fibra.services.search-service","filearts.dragDrop","ui.grid","ui.grid.autoResize"]).component("active",new y)},function(e,t){/*!
 * ui-grid - v4.0.7 - 2017-09-27
 * Copyright (c) 2017 ; License: MIT 
 */
!function(){"use strict";angular.module("ui.grid.i18n",[]),angular.module("ui.grid",["ui.grid.i18n"])}(),function(){"use strict";angular.module("ui.grid").constant("uiGridConstants",{LOG_DEBUG_MESSAGES:!0,LOG_WARN_MESSAGES:!0,LOG_ERROR_MESSAGES:!0,CUSTOM_FILTERS:/CUSTOM_FILTERS/g,COL_FIELD:/COL_FIELD/g,MODEL_COL_FIELD:/MODEL_COL_FIELD/g,TOOLTIP:/title=\"TOOLTIP\"/g,DISPLAY_CELL_TEMPLATE:/DISPLAY_CELL_TEMPLATE/g,TEMPLATE_REGEXP:/<.+>/,FUNC_REGEXP:/(\([^)]*\))?$/,DOT_REGEXP:/\./g,APOS_REGEXP:/'/g,BRACKET_REGEXP:/^(.*)((?:\s*\[\s*\d+\s*\]\s*)|(?:\s*\[\s*"(?:[^"\\]|\\.)*"\s*\]\s*)|(?:\s*\[\s*'(?:[^'\\]|\\.)*'\s*\]\s*))(.*)$/,COL_CLASS_PREFIX:"ui-grid-col",ENTITY_BINDING:"$$this",events:{GRID_SCROLL:"uiGridScroll",COLUMN_MENU_SHOWN:"uiGridColMenuShown",ITEM_DRAGGING:"uiGridItemDragStart",COLUMN_HEADER_CLICK:"uiGridColumnHeaderClick"},keymap:{TAB:9,STRG:17,CAPSLOCK:20,CTRL:17,CTRLRIGHT:18,CTRLR:18,SHIFT:16,RETURN:13,ENTER:13,BACKSPACE:8,BCKSP:8,ALT:18,ALTR:17,ALTRIGHT:17,SPACE:32,WIN:91,MAC:91,FN:null,PG_UP:33,PG_DOWN:34,UP:38,DOWN:40,LEFT:37,RIGHT:39,ESC:27,DEL:46,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123},ASC:"asc",DESC:"desc",filter:{STARTS_WITH:2,ENDS_WITH:4,EXACT:8,CONTAINS:16,GREATER_THAN:32,GREATER_THAN_OR_EQUAL:64,LESS_THAN:128,LESS_THAN_OR_EQUAL:256,NOT_EQUAL:512,SELECT:"select",INPUT:"input"},aggregationTypes:{sum:2,count:4,avg:8,min:16,max:32},CURRENCY_SYMBOLS:["","","Ar","","","B/.","Br","Bs.","Bs.F.","GH","","c","Ch.","","C$","D","","","..",".","JD",".",".","",".","..",".","Db","$","","Esc","","","Ft","FBu","FCFA","CFA","Fr","FRw","G","gr","","h","","","K","kr","kn","MK","ZK","Kz","K","L","Le","","E","lp","M","KM","MT","","Nfk","","Nu.","UM","T$","MOP$","","Pt.","","..","LL","LS","P","Q","q","R","R$","..",".",".","","RM","p","Rf.","","","SRe","Rp","","Ksh","Sh.So.","USh","S/","SDR","","\t","WS$","","VT","","","z"],scrollDirection:{UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right",NONE:"none"},dataChange:{ALL:"all",EDIT:"edit",ROW:"row",COLUMN:"column",OPTIONS:"options"},scrollbars:{NEVER:0,ALWAYS:1}})}(),angular.module("ui.grid").directive("uiGridCell",["$compile","$parse","gridUtil","uiGridConstants",function(e,t,r,n){return{priority:0,scope:!1,require:"?^uiGrid",compile:function(){return{pre:function(t,i,o,a){if(a&&t.col.compiledElementFn)!function(){(0,t.col.compiledElementFn)(t,function(e,t){i.append(e)})}();else if(a&&!t.col.compiledElementFn)t.col.getCompiledElementFn().then(function(e){e(t,function(e,t){i.append(e)})}).catch(angular.noop);else{var s=t.col.cellTemplate.replace(n.MODEL_COL_FIELD,"row.entity."+r.preEval(t.col.field)).replace(n.COL_FIELD,"grid.getCellValue(row, col)"),l=e(s)(t);i.append(l)}},post:function(e,t,r,i){var o=e.col.getColClass(!1);t.addClass(o);var a,s=function(r){var n=t;a&&(n.removeClass(a),a=null),a=angular.isFunction(e.col.cellClass)?e.col.cellClass(e.grid,e.row,e.col,e.rowRenderIndex,e.colRenderIndex):e.col.cellClass,n.addClass(a)};e.col.cellClass&&s();var l=e.grid.registerDataChangeCallback(s,[n.dataChange.COLUMN,n.dataChange.EDIT]),u=function(r,n){if(r!==n){(a||e.col.cellClass)&&s();var i=e.col.getColClass(!1);i!==o&&(t.removeClass(o),t.addClass(i),o=i)}},c=e.$watch("row",u),p=function(){l(),c()};e.$on("$destroy",p),t.on("$destroy",p)}}}}}]),function(){angular.module("ui.grid").service("uiGridColumnMenuService",["i18nService","uiGridConstants","gridUtil",function(e,t,r){var n={initialize:function(e,t){e.grid=t.grid,t.columnMenuScope=e,e.menuShown=!1},setColMenuItemWatch:function(e){var t=e.$watch("col.menuItems",function(t){void 0!==t&&t&&angular.isArray(t)?(t.forEach(function(t){void 0!==t.context&&t.context||(t.context={}),t.context.col=e.col}),e.menuItems=e.defaultMenuItems.concat(t)):e.menuItems=e.defaultMenuItems});e.$on("$destroy",t)},sortable:function(e){return!!(e.grid.options.enableSorting&&void 0!==e.col&&e.col&&e.col.enableSorting)},isActiveSort:function(e,t){return void 0!==e.col&&void 0!==e.col.sort&&void 0!==e.col.sort.direction&&e.col.sort.direction===t},suppressRemoveSort:function(e){return!(!e.col||!e.col.suppressRemoveSort)},hideable:function(e){return void 0===e.col||!e.col||!e.col.colDef||!1!==e.col.colDef.enableHiding},getDefaultMenuItems:function(r){return[{title:function(){return e.getSafeText("sort.ascending")},icon:"ui-grid-icon-sort-alt-up",action:function(e){e.stopPropagation(),r.sortColumn(e,t.ASC)},shown:function(){return n.sortable(r)},active:function(){return n.isActiveSort(r,t.ASC)}},{title:function(){return e.getSafeText("sort.descending")},icon:"ui-grid-icon-sort-alt-down",action:function(e){e.stopPropagation(),r.sortColumn(e,t.DESC)},shown:function(){return n.sortable(r)},active:function(){return n.isActiveSort(r,t.DESC)}},{title:function(){return e.getSafeText("sort.remove")},icon:"ui-grid-icon-cancel",action:function(e){e.stopPropagation(),r.unsortColumn()},shown:function(){return n.sortable(r)&&void 0!==r.col&&void 0!==r.col.sort&&void 0!==r.col.sort.direction&&null!==r.col.sort.direction&&!n.suppressRemoveSort(r)}},{title:function(){return e.getSafeText("column.hide")},icon:"ui-grid-icon-cancel",shown:function(){return n.hideable(r)},action:function(e){e.stopPropagation(),r.hideColumn()}}]},getColumnElementPosition:function(e,t,n){var i={};return i.left=n[0].offsetLeft,i.top=n[0].offsetTop,i.parentLeft=n[0].offsetParent.offsetLeft,i.offset=0,t.grid.options.offsetLeft&&(i.offset=t.grid.options.offsetLeft),i.height=r.elementHeight(n,!0),i.width=r.elementWidth(n,!0),i},repositionMenu:function(e,t,n,i,o){var a=i[0].querySelectorAll(".ui-grid-menu"),s=r.closestElm(o,".ui-grid-render-container"),l=s.getBoundingClientRect().left-e.grid.element[0].getBoundingClientRect().left,u=s.querySelectorAll(".ui-grid-viewport")[0].scrollLeft,c=t.lastMenuWidth?t.lastMenuWidth:e.lastMenuWidth?e.lastMenuWidth:170,p=t.lastMenuPaddingRight?t.lastMenuPaddingRight:e.lastMenuPaddingRight?e.lastMenuPaddingRight:10;if(0!==a.length){var d=a[0].querySelectorAll(".ui-grid-menu-mid");0===d.length||angular.element(d).hasClass("ng-hide")||(c=r.elementWidth(a,!0),e.lastMenuWidth=c,t.lastMenuWidth=c,p=parseInt(r.getStyles(angular.element(a)[0]).paddingRight,10),e.lastMenuPaddingRight=p,t.lastMenuPaddingRight=p)}var f=n.left+l-u+n.parentLeft+n.width-c+p;f<n.offset&&(f=n.offset),i.css("left",f+"px"),i.css("top",n.top+n.height+"px")}};return n}]).directive("uiGridColumnMenu",["$timeout","gridUtil","uiGridConstants","uiGridColumnMenuService","$document",function(e,t,r,n,i){return{priority:0,scope:!0,require:"^uiGrid",templateUrl:"ui-grid/uiGridColumnMenu",replace:!0,link:function(o,a,s,l){n.initialize(o,l),o.defaultMenuItems=n.getDefaultMenuItems(o),o.menuItems=o.defaultMenuItems,n.setColMenuItemWatch(o),o.showMenu=function(e,t,r){o.col=e;var i=n.getColumnElementPosition(o,e,t);o.menuShown?(o.colElement=t,o.colElementPosition=i,o.hideThenShow=!0,o.$broadcast("hide-menu",{originalEvent:r})):(o.menuShown=!0,n.repositionMenu(o,e,i,a,t),o.colElement=t,o.colElementPosition=i,o.$broadcast("show-menu",{originalEvent:r}))},o.hideMenu=function(e){o.menuShown=!1,e||o.$broadcast("hide-menu")},o.$on("menu-hidden",function(){o.hideThenShow?(delete o.hideThenShow,n.repositionMenu(o,o.col,o.colElementPosition,a,o.colElement),o.$broadcast("show-menu"),o.menuShown=!0):(o.hideMenu(!0),o.col&&t.focus.bySelector(i,".ui-grid-header-cell."+o.col.getColClass()+" .ui-grid-column-menu-button",o.col.grid,!1))}),o.$on("menu-shown",function(){e(function(){n.repositionMenu(o,o.col,o.colElementPosition,a,o.colElement),t.focus.bySelector(i,".ui-grid-menu-items .ui-grid-menu-item",!0),delete o.colElementPosition,delete o.columnElement},200)}),o.sortColumn=function(e,t){e.stopPropagation(),o.grid.sortColumn(o.col,t,!0).then(function(){o.grid.refresh(),o.hideMenu()}).catch(angular.noop)},o.unsortColumn=function(){o.col.unsort(),o.grid.refresh(),o.hideMenu()};var u=function(){e(function(){var e,r=function(){return t.focus.byId("grid-menu",o.grid)};o.grid.columns.some(function(t,r){if(angular.equals(t,o.col))return e=r,!0});var n;if(o.grid.columns.some(function(t,r){if(!t.visible)return!1;if(r<e)n=t;else{if(r>e&&!n)return n=t,!0;if(r>e&&n)return!0}}),n){var a=n.getColClass();t.focus.bySelector(i,".ui-grid-header-cell."+a+" .ui-grid-header-cell-primary-focus",!0).then(angular.noop,function(e){if("canceled"!==e)return r()}).catch(angular.noop)}else r()})};o.hideColumn=function(){o.col.colDef.visible=!1,o.col.visible=!1,o.grid.queueGridRefresh(),o.hideMenu(),o.grid.api.core.notifyDataChange(r.dataChange.COLUMN),o.grid.api.core.raise.columnVisibilityChanged(o.col),u()}},controller:["$scope",function(e){var t=this;e.$watch("menuItems",function(e){t.menuItems=e})}]}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridFilter",["$compile","$templateCache","i18nService","gridUtil",function(e,t,r,n){return{compile:function(){return{pre:function(t,r,n,i){t.col.updateFilters=function(n){if(r.children().remove(),n){var i=t.col.filterHeaderTemplate;r.append(e(i)(t))}},t.$on("$destroy",function(){delete t.col.updateFilters})},post:function(e,t,i,o){e.aria=r.getSafeText("headerCell.aria"),e.removeFilter=function(e,r){e.term=null,n.focus.bySelector(t,".ui-grid-filter-input-"+r)}}}}}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridFooterCell",["$timeout","gridUtil","uiGridConstants","$compile",function(e,t,r,n){return{priority:0,scope:{col:"=",row:"=",renderIndex:"="},replace:!0,require:"^uiGrid",compile:function(e,t,i){return{pre:function(e,t,r,i){var o=n(e.col.footerCellTemplate)(e);t.append(o)},post:function(e,t,n,i){e.grid=i.grid;var o=e.col.getColClass(!1);t.addClass(o);var a,s=function(r){var n=t;a&&(n.removeClass(a),a=null),a=angular.isFunction(e.col.footerCellClass)?e.col.footerCellClass(e.grid,e.row,e.col,e.rowRenderIndex,e.colRenderIndex):e.col.footerCellClass,n.addClass(a)};e.col.footerCellClass&&s(),e.col.updateAggregationValue();var l=e.grid.registerDataChangeCallback(s,[r.dataChange.COLUMN]);e.grid.api.core.on.rowsRendered(e,e.col.updateAggregationValue),e.grid.api.core.on.rowsRendered(e,s),e.$on("$destroy",l)}}}}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridFooter",["$templateCache","$compile","uiGridConstants","gridUtil","$timeout",function(e,t,r,n,i){return{restrict:"EA",replace:!0,require:["^uiGrid","^uiGridRenderContainer"],scope:!0,compile:function(e,r){return{pre:function(e,r,i,o){var a=o[0],s=o[1];e.grid=a.grid,e.colContainer=s.colContainer,s.footer=r;var l=e.grid.options.footerTemplate;n.getTemplate(l).then(function(n){var i=angular.element(n),o=t(i)(e);if(r.append(o),s){var a=r[0].getElementsByClassName("ui-grid-footer-viewport")[0];a&&(s.footerViewport=a)}}).catch(angular.noop)},post:function(e,t,r,i){var o=i[0],a=i[1];o.grid;n.disableAnimations(t),a.footer=t;var s=t[0].getElementsByClassName("ui-grid-footer-viewport")[0];s&&(a.footerViewport=s)}}}}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridGridFooter",["$templateCache","$compile","uiGridConstants","gridUtil","$timeout",function(e,t,r,n,i){return{restrict:"EA",replace:!0,require:"^uiGrid",scope:!0,compile:function(e,r){return{pre:function(e,r,i,o){e.grid=o.grid;var a=e.grid.options.gridFooterTemplate;n.getTemplate(a).then(function(n){var i=angular.element(n),o=t(i)(e);r.append(o)}).catch(angular.noop)},post:function(e,t,r,n){}}}}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridGroupPanel",["$compile","uiGridConstants","gridUtil",function(e,t,r){return{restrict:"EA",replace:!0,require:"?^uiGrid",scope:!1,compile:function(t,n){return{pre:function(t,n,i,o){var a=t.grid.options.groupPanelTemplate||"ui-grid/ui-grid-group-panel";r.getTemplate(a).then(function(r){var i=angular.element(r),o=e(i)(t);n.append(o)}).catch(angular.noop)},post:function(e,t,r,n){t.bind("$destroy",function(){})}}}}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridHeaderCell",["$compile","$timeout","$window","$document","gridUtil","uiGridConstants","ScrollEvent","i18nService",function(e,t,r,n,i,o,a,s){return{priority:0,scope:{col:"=",row:"=",renderIndex:"="},require:["^uiGrid","^uiGridRenderContainer"],replace:!0,compile:function(){return{pre:function(t,r,n){var i=e(t.col.headerCellTemplate)(t);r.append(i)},post:function(e,r,i,a){var l=a[0],u=a[1];e.i18n={headerCell:s.getSafeText("headerCell"),sort:s.getSafeText("sort")},e.isSortPriorityVisible=function(){return angular.isNumber(e.col.sort.priority)&&e.grid.columns.some(function(t,r){return angular.isNumber(t.sort.priority)&&t!==e.col})},e.getSortDirectionAriaLabel=function(){var t=e.col,r=t.sort.direction===o.ASC?e.i18n.sort.ascending:t.sort.direction===o.DESC?e.i18n.sort.descending:e.i18n.sort.none,n=r;return e.isSortPriorityVisible()&&(n=n+". "+e.i18n.headerCell.priority+" "+(t.sort.priority+1)),n},e.grid=l.grid,e.renderContainer=l.grid.renderContainers[u.containerId];var c=e.col.getColClass(!1);r.addClass(c),e.menuShown=!1,e.asc=o.ASC,e.desc=o.DESC;var p,d,f=(angular.element(r[0].querySelectorAll(".ui-grid-header-cell-menu")),angular.element(r[0].querySelectorAll(".ui-grid-cell-contents"))),h=[];e.downFn=function(i){i.stopPropagation(),void 0!==i.originalEvent&&void 0!==i.originalEvent&&(i=i.originalEvent),i.button&&0!==i.button||(d=i.pageX,e.mousedownStartTime=(new Date).getTime(),e.mousedownTimeout=t(function(){},500),e.mousedownTimeout.then(function(){e.colMenu&&l.columnMenuScope.showMenu(e.col,r,i)}).catch(angular.noop),l.fireEvent(o.events.COLUMN_HEADER_CLICK,{event:i,columnName:e.col.colDef.name}),e.offAllEvents(),"touchstart"===i.type?(n.on("touchend",e.upFn),n.on("touchmove",e.moveFn)):"mousedown"===i.type&&(n.on("mouseup",e.upFn),n.on("mousemove",e.moveFn)))},e.upFn=function(r){r.stopPropagation(),t.cancel(e.mousedownTimeout),e.offAllEvents(),e.onDownEvents(r.type),(new Date).getTime()-e.mousedownStartTime>500||e.sortable&&e.handleClick(r)},e.moveFn=function(r){0!=r.pageX-d&&(t.cancel(e.mousedownTimeout),e.offAllEvents(),e.onDownEvents(r.type))},e.clickFn=function(t){t.stopPropagation(),f.off("click",e.clickFn)},e.offAllEvents=function(){f.off("touchstart",e.downFn),f.off("mousedown",e.downFn),n.off("touchend",e.upFn),n.off("mouseup",e.upFn),n.off("touchmove",e.moveFn),n.off("mousemove",e.moveFn),f.off("click",e.clickFn)},e.onDownEvents=function(r){switch(r){case"touchmove":case"touchend":f.on("click",e.clickFn),f.on("touchstart",e.downFn),t(function(){f.on("mousedown",e.downFn)},500);break;case"mousemove":case"mouseup":f.on("click",e.clickFn),f.on("mousedown",e.downFn),t(function(){f.on("touchstart",e.downFn)},500);break;default:f.on("click",e.clickFn),f.on("touchstart",e.downFn),f.on("mousedown",e.downFn)}};var g=function(n){var i=r;p&&(i.removeClass(p),p=null),p=angular.isFunction(e.col.headerCellClass)?e.col.headerCellClass(e.grid,e.row,e.col,e.rowRenderIndex,e.colRenderIndex):e.col.headerCellClass,i.addClass(p),t(function(){var t=e.grid.renderContainers.right?e.grid.renderContainers.right:e.grid.renderContainers.body;e.isLastCol=e.col===t.visibleColumnCache[t.visibleColumnCache.length-1]}),e.col.enableSorting?e.sortable=!0:e.sortable=!1;var a=e.filterable;l.grid.options.enableFiltering&&e.col.enableFiltering?e.filterable=!0:e.filterable=!1,a!==e.filterable&&(void 0!==e.col.updateFilters&&e.col.updateFilters(e.filterable),e.filterable?(e.col.filters.forEach(function(t,r){h.push(e.$watch("col.filters["+r+"].term",function(e,t){e!==t&&(l.grid.api.core.raise.filterChanged(),l.grid.api.core.notifyDataChange(o.dataChange.COLUMN),l.grid.queueGridRefresh())}))}),e.$on("$destroy",function(){h.forEach(function(e){e()})})):h.forEach(function(e){e()})),e.col.grid.options&&!1!==e.col.grid.options.enableColumnMenus&&e.col.colDef&&!1!==e.col.colDef.enableColumnMenu?e.colMenu=!0:e.colMenu=!1,e.offAllEvents(),(e.sortable||e.colMenu)&&(e.onDownEvents(),e.$on("$destroy",function(){e.offAllEvents()}))};g();var v=e.grid.registerDataChangeCallback(g,[o.dataChange.COLUMN]);e.$on("$destroy",v),e.handleClick=function(t){var r=!1;t.shiftKey&&(r=!0),l.grid.sortColumn(e.col,r).then(function(){l.columnMenuScope&&l.columnMenuScope.hideMenu(),l.grid.refresh()}).catch(angular.noop)},e.toggleMenu=function(t){t.stopPropagation(),l.columnMenuScope.menuShown&&l.columnMenuScope.col===e.col?l.columnMenuScope.hideMenu():l.columnMenuScope.showMenu(e.col,r)}}}}}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridHeader",["$templateCache","$compile","uiGridConstants","gridUtil","$timeout","ScrollEvent",function(e,t,r,n,i,o){return{restrict:"EA",replace:!0,require:["^uiGrid","^uiGridRenderContainer"],scope:!0,compile:function(e,r){return{pre:function(e,r,i,a){function s(){c.header=c.colContainer.header=r;var e=r[0].getElementsByClassName("ui-grid-header-canvas");e.length>0?c.headerCanvas=c.colContainer.headerCanvas=e[0]:c.headerCanvas=null}function l(e){if(!u.grid.isScrollingHorizontally){var t=n.normalizeScrollLeft(c.headerViewport,u.grid),r=c.colContainer.scrollHorizontal(t),i=new o(u.grid,null,c.colContainer,o.Sources.ViewPortScroll);i.newScrollLeft=t,r>-1&&(i.x={percentage:r}),u.grid.scrollContainers(null,i)}}var u=a[0],c=a[1];e.grid=u.grid,e.colContainer=c.colContainer,s();var p;p=e.grid.options.showHeader?e.grid.options.headerTemplate?e.grid.options.headerTemplate:"ui-grid/ui-grid-header":"ui-grid/ui-grid-no-header",n.getTemplate(p).then(function(n){var i=angular.element(n),o=t(i)(e);if(r.replaceWith(o),r=o,s(),c){var a=r[0].getElementsByClassName("ui-grid-header-viewport")[0];a&&(c.headerViewport=a,angular.element(a).on("scroll",l),e.$on("$destroy",function(){angular.element(a).off("scroll",l)}))}e.grid.queueRefresh()}).catch(angular.noop)},post:function(e,t,r,i){function o(){var e=s.colContainer.visibleColumnCache,t="",r=0;return e.forEach(function(e){t+=e.getColClassDefinition(),r+=e.drawnWidth}),s.colContainer.canvasWidth=r,t}var a=i[0],s=i[1];a.grid;n.disableAnimations(t),s.header=t;var l=t[0].getElementsByClassName("ui-grid-header-viewport")[0];l&&(s.headerViewport=l),a&&a.grid.registerStyleComputation({priority:15,func:o})}}}}}])}(),function(){angular.module("ui.grid").service("uiGridGridMenuService",["gridUtil","i18nService","uiGridConstants",function(e,t,r){var n={initialize:function(e,t){t.gridMenuScope=e,e.grid=t,e.registeredMenuItems=[],e.$on("$destroy",function(){e.grid&&e.grid.gridMenuScope&&(e.grid.gridMenuScope=null),e.grid&&(e.grid=null),e.registeredMenuItems&&(e.registeredMenuItems=null)}),e.registeredMenuItems=[],t.api.registerMethod("core","addToGridMenu",n.addToGridMenu),t.api.registerMethod("core","removeFromGridMenu",n.removeFromGridMenu)},addToGridMenu:function(t,r){angular.isArray(r)?t.gridMenuScope?(t.gridMenuScope.registeredMenuItems=t.gridMenuScope.registeredMenuItems?t.gridMenuScope.registeredMenuItems:[],t.gridMenuScope.registeredMenuItems=t.gridMenuScope.registeredMenuItems.concat(r)):e.logError("Asked to addToGridMenu, but gridMenuScope not present.  Timing issue?  Please log issue with ui-grid"):e.logError("addToGridMenu: menuItems must be an array, and is not, not adding any items")},removeFromGridMenu:function(t,r){var n=-1;t&&t.gridMenuScope&&t.gridMenuScope.registeredMenuItems.forEach(function(t,i){t.id===r&&(n>-1?e.logError("removeFromGridMenu: found multiple items with the same id, removing only the last"):n=i)}),n>-1&&t.gridMenuScope.registeredMenuItems.splice(n,1)},getMenuItems:function(r){var i=[];r.grid.options.gridMenuCustomItems&&(angular.isArray(r.grid.options.gridMenuCustomItems)?i=i.concat(r.grid.options.gridMenuCustomItems):e.logError("gridOptions.gridMenuCustomItems must be an array, and is not"));var o=[{title:t.getSafeText("gridMenu.clearAllFilters"),action:function(e){r.grid.clearAllFilters()},shown:function(){return r.grid.options.enableFiltering},order:100}];return i=i.concat(o),i=i.concat(r.registeredMenuItems),!1!==r.grid.options.gridMenuShowHideColumns&&(i=i.concat(n.showHideColumns(r))),i.sort(function(e,t){return e.order-t.order}),i},showHideColumns:function(e){var r=[];return e.grid.options.columnDefs&&0!==e.grid.options.columnDefs.length&&0!==e.grid.columns.length?(r.push({title:t.getSafeText("gridMenu.columns"),order:300}),e.grid.options.gridMenuTitleFilter=e.grid.options.gridMenuTitleFilter?e.grid.options.gridMenuTitleFilter:function(e){return e},e.grid.options.columnDefs.forEach(function(t,i){if(!1!==t.enableHiding){var o={icon:"ui-grid-icon-ok",action:function(e){e.stopPropagation(),n.toggleColumnVisibility(this.context.gridCol)},shown:function(){return!0===this.context.gridCol.colDef.visible||void 0===this.context.gridCol.colDef.visible},context:{gridCol:e.grid.getColumn(t.name||t.field)},leaveOpen:!0,order:301+2*i};n.setMenuItemTitle(o,t,e.grid),r.push(o),o={icon:"ui-grid-icon-cancel",action:function(e){e.stopPropagation(),n.toggleColumnVisibility(this.context.gridCol)},shown:function(){return!(!0===this.context.gridCol.colDef.visible||void 0===this.context.gridCol.colDef.visible)},context:{gridCol:e.grid.getColumn(t.name||t.field)},leaveOpen:!0,order:301+2*i+1},n.setMenuItemTitle(o,t,e.grid),r.push(o)}}),r):r},setMenuItemTitle:function(t,r,n){var i=n.options.gridMenuTitleFilter(r.displayName||e.readableColumnName(r.name)||r.field);"string"==typeof i?t.title=i:i.then?(t.title="",i.then(function(e){t.title=e},function(e){t.title=e}).catch(angular.noop)):(e.logError("Expected gridMenuTitleFilter to return a string or a promise, it has returned neither, bad config"),t.title="badconfig")},toggleColumnVisibility:function(e){e.colDef.visible=!(!0===e.colDef.visible||void 0===e.colDef.visible),e.grid.refresh(),e.grid.api.core.notifyDataChange(r.dataChange.COLUMN),e.grid.api.core.raise.columnVisibilityChanged(e)}};return n}]).directive("uiGridMenuButton",["gridUtil","uiGridConstants","uiGridGridMenuService","i18nService",function(e,t,r,n){return{priority:0,scope:!0,require:["^uiGrid"],templateUrl:"ui-grid/ui-grid-menu-button",replace:!0,link:function(t,i,o,a){var s=a[0];t.i18n={aria:n.getSafeText("gridMenu.aria")},r.initialize(t,s.grid),t.shown=!1,t.toggleMenu=function(){t.shown?(t.$broadcast("hide-menu"),t.shown=!1):(t.menuItems=r.getMenuItems(t),t.$broadcast("show-menu"),t.shown=!0)},t.$on("menu-hidden",function(){t.shown=!1,e.focus.bySelector(i,".ui-grid-icon-container")})}}}])}(),function(){angular.module("ui.grid").directive("uiGridMenu",["$compile","$timeout","$window","$document","gridUtil","uiGridConstants","i18nService",function(e,t,r,n,i,o,a){return{priority:0,scope:{menuItems:"=",autoHide:"=?"},require:"?^uiGrid",templateUrl:"ui-grid/uiGridMenu",replace:!1,link:function(n,s,l,u){if(n.dynamicStyles="",u&&u.grid&&u.grid.options&&u.grid.options.gridMenuTemplate){var c=u.grid.options.gridMenuTemplate;i.getTemplate(c).then(function(t){var r=angular.element(t),i=e(r)(n);s.replaceWith(i)}).catch(angular.noop)}var p=function(e){var t=e-u.grid.headerHeight-20;n.dynamicStyles=[".grid"+u.grid.id+" .ui-grid-menu-mid {","max-height: "+t+"px;","}"].join(" ")};u&&(p(u.grid.gridHeight),u.grid.api.core.on.gridDimensionChanged(n,function(e,t,r,n){p(r)})),n.i18n={close:a.getSafeText("columnMenu.close")},n.showMenu=function(e,r){n.shown?n.shownMid||(n.shownMid=!0,n.$emit("menu-shown")):(n.shown=!0,t(function(){n.shownMid=!0,n.$emit("menu-shown")}));var o="click";r&&r.originalEvent&&r.originalEvent.type&&"touchstart"===r.originalEvent.type&&(o=r.originalEvent.type),angular.element(document).off("click touchstart",d),s.off("keyup",f),s.off("keydown",h),t(function(){angular.element(document).on(o,d),s.on("keyup",f),s.on("keydown",h)}),i.focus.bySelector(s,"button[type=button]",!0)},n.hideMenu=function(e){n.shown&&(n.shownMid=!1,t(function(){n.shownMid||(n.shown=!1,n.$emit("menu-hidden"))},200)),angular.element(document).off("click touchstart",d),s.off("keyup",f),s.off("keydown",h)},n.$on("hide-menu",function(e,t){n.hideMenu(e,t)}),n.$on("show-menu",function(e,t){n.showMenu(e,t)});var d=function(){n.shown&&n.$apply(function(){n.hideMenu()})},f=function(e){27===e.keyCode&&n.hideMenu()},h=function(e){var t=function(t){return t.focus(),e.preventDefault(),!1};if(9===e.keyCode){var r,n,i=s[0].querySelectorAll("button:not(.ng-hide)");i.length>0&&(r=i[0],n=i[i.length-1],e.target!==n||e.shiftKey?e.target===r&&e.shiftKey&&t(n):t(r))}};void 0!==n.autoHide&&void 0!==n.autoHide||(n.autoHide=!0),n.autoHide&&angular.element(r).on("resize",d),n.$on("$destroy",function(){angular.element(r).off("resize",d),angular.element(document).off("click touchstart",d),s.off("keyup",f),s.off("keydown",h)}),u&&n.$on("$destroy",u.grid.api.core.on.scrollBegin(n,d)),n.$on("$destroy",n.$on(o.events.ITEM_DRAGGING,d))}}}]).directive("uiGridMenuItem",["gridUtil","$compile","i18nService",function(e,t,r){return{priority:0,scope:{name:"=",active:"=",action:"=",icon:"=",shown:"=",context:"=",templateUrl:"=",leaveOpen:"=",screenReaderOnly:"="},require:["?^uiGrid"],templateUrl:"ui-grid/uiGridMenuItem",replace:!1,compile:function(){return{pre:function(r,n){r.templateUrl&&e.getTemplate(r.templateUrl).then(function(e){var i=angular.element(e),o=t(i)(r);n.replaceWith(o)}).catch(angular.noop)},post:function(t,n,i,o){var a=o[0];void 0!==t.shown&&null!==t.shown||(t.shown=function(){return!0}),t.itemShown=function(){var e={};return t.context&&(e.context=t.context),void 0!==a&&a&&(e.grid=a.grid),t.shown.call(e)},t.itemAction=function(r,n){if(r.stopPropagation(),"function"==typeof t.action){var i={};t.context&&(i.context=t.context),void 0!==a&&a&&(i.grid=a.grid),t.action.call(i,r,n),t.leaveOpen?e.focus.bySelector(angular.element(r.target.parentElement),"button[type=button]",!0):t.$emit("hide-menu")}},t.label=function(){var e=t.name;return"function"==typeof t.name&&(e=t.name.call()),e},t.i18n=r.get()}}}}}])}(),function(){"use strict";var e=angular.module("ui.grid");angular.forEach([{tag:"Src",method:"attr"},{tag:"Text",method:"text"},{tag:"Href",method:"attr"},{tag:"Class",method:"addClass"},{tag:"Html",method:"html"},{tag:"Alt",method:"attr"},{tag:"Style",method:"css"},{tag:"Value",method:"attr"},{tag:"Id",method:"attr"},{tag:"Id",directiveName:"IdGrid",method:"attr",appendGridId:!0},{tag:"Title",method:"attr"},{tag:"Label",method:"attr",aria:!0},{tag:"Labelledby",method:"attr",aria:!0},{tag:"Labelledby",directiveName:"LabelledbyGrid",appendGridId:!0,method:"attr",aria:!0},{tag:"Describedby",method:"attr",aria:!0},{tag:"Describedby",directiveName:"DescribedbyGrid",appendGridId:!0,method:"attr",aria:!0}],function(t){var r=(t.aria?"uiGridOneBindAria":"uiGridOneBind")+(t.directiveName?t.directiveName:t.tag);e.directive(r,["gridUtil",function(e){return{restrict:"A",require:["?uiGrid","?^uiGrid"],link:function(n,i,o,a){var s=function(t){var i;if(n.grid)i=n.grid;else if(n.col&&n.col.grid)i=n.col.grid;else if(!a.some(function(e){if(e&&e.grid)return i=e.grid,!0}))throw e.logError("["+r+"] A valid grid could not be found to bind id. Are you using this directive within the correct scope? Trying to generate id: [gridID]-"+t),new Error("No valid grid could be found");if(i){new RegExp(i.id.toString()).test(t)||(t=i.id.toString()+"-"+t)}return t},l=n.$watch(o[r],function(e){if(e){if(t.appendGridId){var r=null;angular.forEach(e.split(" "),function(e){r=(r?r+" ":"")+s(e)}),e=r}switch(t.method){case"attr":t.aria?i[t.method]("aria-"+t.tag.toLowerCase(),e):i[t.method](t.tag.toLowerCase(),e);break;case"addClass":if(angular.isObject(e)&&!angular.isArray(e)){var n=[],o=!1;if(angular.forEach(e,function(e,t){null!==e&&void 0!==e&&(o=!0,e&&n.push(t))}),!o)return;e=n}if(!e)return;i.addClass(angular.isArray(e)?e.join(" "):e);break;default:i[t.method](e)}l()}},!0)}}}])})}(),function(){"use strict";var e=angular.module("ui.grid");e.directive("uiGridRenderContainer",["$timeout","$document","uiGridConstants","gridUtil","ScrollEvent",function(e,t,r,n,i){return{replace:!0,transclude:!0,templateUrl:"ui-grid/uiGridRenderContainer",require:["^uiGrid","uiGridRenderContainer"],scope:{containerId:"=",rowContainerName:"=",colContainerName:"=",bindScrollHorizontal:"=",bindScrollVertical:"=",enableVerticalScrollbar:"=",enableHorizontalScrollbar:"="},controller:"uiGridRenderContainer as RenderContainer",compile:function(){return{pre:function(e,t,r,n){var i=n[0],o=n[1],a=e.grid=i.grid;if(!e.rowContainerName)throw"No row render container name specified";if(!e.colContainerName)throw"No column render container name specified";if(!a.renderContainers[e.rowContainerName])throw"Row render container '"+e.rowContainerName+"' is not registered.";if(!a.renderContainers[e.colContainerName])throw"Column render container '"+e.colContainerName+"' is not registered.";var s=e.rowContainer=a.renderContainers[e.rowContainerName],l=e.colContainer=a.renderContainers[e.colContainerName];o.containerId=e.containerId,o.rowContainer=s,o.colContainer=l},post:function(e,t,r,o){function a(){var t="",r=p.canvasWidth,n=p.getViewportWidth(),i=c.getCanvasHeight(),o=c.getViewportHeight();p.needsHScrollbarPlaceholder()&&(o-=u.scrollbarHeight);var a,l;return a=l=p.getHeaderViewportWidth(),t+="\n .grid"+s.grid.id+" .ui-grid-render-container-"+e.containerId+" .ui-grid-canvas { width: "+r+"px; height: "+i+"px; }",t+="\n .grid"+s.grid.id+" .ui-grid-render-container-"+e.containerId+" .ui-grid-header-canvas { width: "+(r+u.scrollbarWidth)+"px; }",h.explicitHeaderCanvasHeight?t+="\n .grid"+s.grid.id+" .ui-grid-render-container-"+e.containerId+" .ui-grid-header-canvas { height: "+h.explicitHeaderCanvasHeight+"px; }":t+="\n .grid"+s.grid.id+" .ui-grid-render-container-"+e.containerId+" .ui-grid-header-canvas { height: inherit; }",t+="\n .grid"+s.grid.id+" .ui-grid-render-container-"+e.containerId+" .ui-grid-viewport { width: "+n+"px; height: "+o+"px; }",t+="\n .grid"+s.grid.id+" .ui-grid-render-container-"+e.containerId+" .ui-grid-header-viewport { width: "+a+"px; }",t+="\n .grid"+s.grid.id+" .ui-grid-render-container-"+e.containerId+" .ui-grid-footer-canvas { width: "+(r+u.scrollbarWidth)+"px; }",t+="\n .grid"+s.grid.id+" .ui-grid-render-container-"+e.containerId+" .ui-grid-footer-viewport { width: "+l+"px; }"}var s=o[0],l=o[1],u=s.grid,c=l.rowContainer,p=l.colContainer,d=null,f=null,h=u.renderContainers[e.containerId];t.addClass("ui-grid-render-container-"+e.containerId),n.on.mousewheel(t,function(e){var t=new i(u,c,p,i.Sources.RenderContainerMouseWheel);if(0!==e.deltaY){var r=-1*e.deltaY*e.deltaFactor;d=l.viewport[0].scrollTop,t.verticalScrollLength=c.getVerticalScrollLength();var o=(d+r)/t.verticalScrollLength;o>=1&&d<t.verticalScrollLength&&(l.viewport[0].scrollTop=t.verticalScrollLength),o<0?o=0:o>1&&(o=1),t.y={percentage:o,pixels:r}}if(0!==e.deltaX){var a=e.deltaX*e.deltaFactor;f=n.normalizeScrollLeft(l.viewport,u),t.horizontalScrollLength=p.getCanvasWidth()-p.getViewportWidth();var s=(f+a)/t.horizontalScrollLength;s<0?s=0:s>1&&(s=1),t.x={percentage:s,pixels:a}}0!==e.deltaY&&(t.atTop(d)||t.atBottom(d))||0!==e.deltaX&&(t.atLeft(f)||t.atRight(f))||(e.preventDefault(),e.stopPropagation(),t.fireThrottledScrollingEvent("",t))}),t.bind("$destroy",function(){t.unbind("keydown"),["touchstart","touchmove","touchend","keydown","wheel","mousewheel","DomMouseScroll","MozMousePixelScroll"].forEach(function(e){t.unbind(e)})}),s.grid.registerStyleComputation({priority:6,func:a})}}}}}]),e.controller("uiGridRenderContainer",["$scope","gridUtil",function(e,t){}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridRow",["gridUtil",function(e){return{replace:!0,require:["^uiGrid","^uiGridRenderContainer"],scope:{row:"=uiGridRow",rowRenderIndex:"="},compile:function(){return{pre:function(e,t,r,n){function i(){e.row.getRowTemplateFn.then(function(r){var n=e.$new();r(n,function(e,r){s&&(s.remove(),l.$destroy()),t.empty().append(e),s=e,l=n})}).catch(angular.noop)}var o=n[0],a=n[1];o.grid;e.grid=o.grid,e.colContainer=a.colContainer;var s,l;i(),e.$watch("row.getRowTemplateFn",function(e,t){e!==t&&i()})},post:function(e,t,r,n){}}}}}])}(),function(){angular.module("ui.grid").directive("uiGridStyle",["gridUtil","$interpolate",function(e,t){return{link:function(e,r,n,i){var o=t(r.text(),!0);o&&e.$watch(o,function(e){r.text(e)})}}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridViewport",["gridUtil","ScrollEvent","uiGridConstants","$log",function(e,t,r,n){return{replace:!0,scope:{},controllerAs:"Viewport",templateUrl:"ui-grid/uiGridViewport",require:["^uiGrid","^uiGridRenderContainer"],link:function(r,n,i,o){function a(i){var o=n[0].scrollTop,a=e.normalizeScrollLeft(n,g),s=f.scrollVertical(o),l=h.scrollHorizontal(a),u=new t(g,f,h,t.Sources.ViewPortScroll);u.newScrollLeft=a,u.newScrollTop=o,l>-1&&(u.x={percentage:l}),s>-1&&(u.y={percentage:s}),g.scrollContainers(r.$parent.containerId,u)}function s(e){d.prevScrollArgs=e;var t=e.getNewScrollTop(f,d.viewport);n[0].scrollTop=t}function l(t){d.prevScrollArgs=t;var r=t.getNewScrollLeft(h,d.viewport);n[0].scrollLeft=e.denormalizeScrollLeft(d.viewport,r,g)}function u(t){var r=t.getNewScrollLeft(h,d.viewport);d.headerViewport&&(d.headerViewport.scrollLeft=e.denormalizeScrollLeft(d.viewport,r,g))}function c(t){var r=t.getNewScrollLeft(h,d.viewport);d.footerViewport&&(d.footerViewport.scrollLeft=e.denormalizeScrollLeft(d.viewport,r,g))}var p=o[0],d=o[1];r.containerCtrl=d;var f=d.rowContainer,h=d.colContainer,g=p.grid;r.grid=p.grid,r.rowContainer=d.rowContainer,r.colContainer=d.colContainer,d.viewport=n,g&&g.options&&g.options.customScroller?g.options.customScroller(n,a):n.on("scroll",a);r.$parent.bindScrollVertical&&g.addVerticalScrollSync(r.$parent.containerId,s),r.$parent.bindScrollHorizontal&&(g.addHorizontalScrollSync(r.$parent.containerId,l),g.addHorizontalScrollSync(r.$parent.containerId+"header",u),g.addHorizontalScrollSync(r.$parent.containerId+"footer",c)),r.$on("$destroy",function(){n.off()})},controller:["$scope",function(e){this.rowStyle=function(t){var r=e.rowContainer,n=e.colContainer,i={};if(0!==r.currentTopRow){var o="translateY("+r.currentTopRow*r.grid.options.rowHeight+"px)";i.transform=o,i["-webkit-transform"]=o,i["-ms-transform"]=o}return 0!==n.currentFirstColumn&&(n.grid.isRTL()?i["margin-right"]=n.columnOffset+"px":i["margin-left"]=n.columnOffset+"px"),i}}]}}])}(),function(){angular.module("ui.grid").directive("uiGridVisible",function(){return function(e,t,r){e.$watch(r.uiGridVisible,function(e){t[e?"removeClass":"addClass"]("ui-grid-invisible")})}})}(),function(){"use strict";function e(e,t,r){return{templateUrl:"ui-grid/ui-grid",scope:{uiGrid:"="},replace:!0,transclude:!0,controller:"uiGridController",compile:function(){return{post:function(n,i,o,a){function s(){i[0].offsetWidth<=0&&h<f?(setTimeout(s,d),h++):n.$applyAsync(l)}function l(){p.gridWidth=n.gridWidth=t.elementWidth(i),p.canvasWidth=a.grid.gridWidth,p.gridHeight=n.gridHeight=t.elementHeight(i),p.gridHeight<=p.options.rowHeight&&p.options.enableMinHeightCheck&&u(),p.refreshCanvas(!0)}function u(){var e=p.options.minRowsToShow*p.options.rowHeight,o=p.options.showHeader?p.options.headerRowHeight:0,a=p.calcFooterHeight(),s=0;p.options.enableHorizontalScrollbar===r.scrollbars.ALWAYS&&(s=t.getScrollbarWidth());var l=0;if(angular.forEach(p.options.columnDefs,function(e){e.hasOwnProperty("filter")?l<1&&(l=1):e.hasOwnProperty("filters")&&l<e.filters.length&&(l=e.filters.length)}),p.options.enableFiltering&&!l){p.options.columnDefs.length&&p.options.columnDefs.every(function(e){return!1===e.enableFiltering})||(l=1)}var u=l*o,c=o+e+a+s+u;i.css("height",c+"px"),p.gridHeight=n.gridHeight=t.elementHeight(i)}function c(){p.gridWidth=n.gridWidth=t.elementWidth(i),p.gridHeight=n.gridHeight=t.elementHeight(i),p.refreshCanvas(!0)}var p=a.grid;a.scrollbars=[],p.element=i;var d=100,f=20,h=0;!function(){var t,r;angular.element(e).on("resize",c),i.on("$destroy",function(){angular.element(e).off("resize",c),t(),r()}),t=n.$watch(function(){return p.hasLeftContainer()},function(e,t){e!==t&&p.refreshCanvas(!0)}),r=n.$watch(function(){return p.hasRightContainer()},function(e,t){e!==t&&p.refreshCanvas(!0)})}(),l(),p.renderingComplete(),s()}}}}}angular.module("ui.grid").controller("uiGridController",["$scope","$element","$attrs","gridUtil","$q","uiGridConstants","gridClassFactory","$parse","$compile",function(e,t,r,n,i,o,a,s,l){function u(e){return e?e.length:0}function c(t,r){t&&t!==r&&(d.grid.options.columnDefs=e.uiGrid.columnDefs,d.grid.callDataChangeCallbacks(o.dataChange.COLUMN,{orderByColumnDefs:!0,preCompileCellTemplates:!0}))}function p(t){var n=[];if(t=angular.isString(e.uiGrid.data)?d.grid.appScope[e.uiGrid.data]:e.uiGrid.data,h=t,t){var a=d.grid.columns.length>(d.grid.rowHeaderColumns?d.grid.rowHeaderColumns.length:0);!a&&!r.uiGridColumns&&0===d.grid.options.columnDefs.length&&t.length>0&&d.grid.buildColumnDefsFromData(t),!a&&(d.grid.options.columnDefs.length>0||t.length>0)&&n.push(d.grid.buildColumns().then(function(){d.grid.preCompileCellTemplates()}).catch(angular.noop)),i.all(n).then(function(){d.grid.modifyRows(h).then(function(){d.grid.redrawInPlace(!0),e.$evalAsync(function(){d.grid.refreshCanvas(!0),d.grid.callDataChangeCallbacks(o.dataChange.ROW)})}).catch(angular.noop)}).catch(angular.noop)}}var d=this,f=[];d.grid=a.createGrid(e.uiGrid),d.grid.appScope=d.grid.appScope||e.$parent,t.addClass("grid"+d.grid.id),d.grid.rtl="rtl"===n.getStyles(t[0]).direction,e.grid=d.grid,r.uiGridColumns&&f.push(r.$observe("uiGridColumns",function(e){d.grid.options.columnDefs=angular.isString(e)?angular.fromJson(e):e,d.grid.buildColumns().then(function(){d.grid.preCompileCellTemplates(),d.grid.refreshCanvas(!0)}).catch(angular.noop)})),d.grid.options.fastWatch?(d.uiGrid=e.uiGrid,angular.isString(e.uiGrid.data)?(f.push(e.$parent.$watch(e.uiGrid.data,p)),f.push(e.$parent.$watch(function(){return d.grid.appScope[e.uiGrid.data]?d.grid.appScope[e.uiGrid.data].length:void 0},p))):(f.push(e.$parent.$watch(function(){return e.uiGrid.data},p)),f.push(e.$parent.$watch(function(){return u(e.uiGrid.data)},function(){p(e.uiGrid.data)}))),f.push(e.$parent.$watch(function(){return e.uiGrid.columnDefs},c)),f.push(e.$parent.$watch(function(){return u(e.uiGrid.columnDefs)},function(){c(e.uiGrid.columnDefs)}))):(angular.isString(e.uiGrid.data)?f.push(e.$parent.$watchCollection(e.uiGrid.data,p)):f.push(e.$parent.$watchCollection(function(){return e.uiGrid.data},p)),f.push(e.$parent.$watchCollection(function(){return e.uiGrid.columnDefs},c)));var h,g=e.$watch(function(){return d.grid.styleComputations},function(){d.grid.refreshCanvas(!0)});e.$on("$destroy",function(){f.forEach(function(e){e()}),g()}),d.fireEvent=function(t,r){r=r||{},angular.isUndefined(r.grid)&&(r.grid=d.grid),e.$broadcast(t,r)},d.innerCompile=function(t){l(t)(e)}}]),angular.module("ui.grid").directive("uiGrid",e),e.$inject=["$window","gridUtil","uiGridConstants"]}(),function(){"use strict";angular.module("ui.grid").directive("uiGridPinnedContainer",["gridUtil",function(e){return{restrict:"EA",replace:!0,template:'<div class="ui-grid-pinned-container"><div ui-grid-render-container container-id="side" row-container-name="\'body\'" col-container-name="side" bind-scroll-vertical="true" class="{{ side }} ui-grid-render-container-{{ side }}"></div></div>',scope:{side:"=uiGridPinnedContainer"},require:"^uiGrid",compile:function(){return{post:function(e,t,r,n){function i(){var e=this,t=0;e.visibleColumnCache.forEach(function(e){t+=e.drawnWidth});var r=e.getViewportAdjustment();return t+=r.width}function o(){if("left"===e.side||"right"===e.side){for(var t=s.renderContainers[e.side].visibleColumnCache,r=0,n=0;n<t.length;n++){var i=t[n];r+=i.drawnWidth||i.width||0}return r}}function a(){var r="";return"left"!==e.side&&"right"!==e.side||(l=o(),t.attr("style",null),r+=".grid"+s.id+" .ui-grid-pinned-container-"+e.side+", .grid"+s.id+" .ui-grid-pinned-container-"+e.side+" .ui-grid-render-container-"+e.side+" .ui-grid-viewport { width: "+l+"px; } "),r}var s=n.grid,l=0;t.addClass("ui-grid-pinned-container-"+e.side),"left"!==e.side&&"right"!==e.side||(s.renderContainers[e.side].getViewportWidth=i),s.renderContainers.body.registerViewportAdjuster(function(t){return l=o(),t.width-=l,t.side=e.side,t}),s.registerStyleComputation({priority:15,func:a})}}}}}])}(),function(){angular.module("ui.grid").factory("Grid",["$q","$compile","$parse","gridUtil","uiGridConstants","GridOptions","GridColumn","GridRow","GridApi","rowSorter","rowSearcher","GridRenderContainer","$timeout","ScrollEvent",function(e,t,r,n,i,o,a,s,l,u,c,p,d,f){function h(){}var g=function(e){function t(e){a.isScrollingVertically=!1,a.api.core.raise.scrollEnd(e),a.scrollDirection=i.scrollDirection.NONE}function r(e){a.isScrollingHorizontally=!1,a.api.core.raise.scrollEnd(e),a.scrollDirection=i.scrollDirection.NONE}var a=this;if(void 0===e||void 0===e.id||!e.id)throw new Error("No ID provided. An ID must be given when creating a grid.");if(!/^[_a-zA-Z0-9-]+$/.test(e.id))throw new Error("Grid id '"+e.id+'" is invalid. It must follow CSS selector syntax rules.');a.id=e.id,delete e.id,a.options=o.initialize(e),a.appScope=a.options.appScopeProvider,a.headerHeight=a.options.headerRowHeight,a.footerHeight=a.calcFooterHeight(),a.columnFooterHeight=a.calcColumnFooterHeight(),a.rtl=!1,a.gridHeight=0,a.gridWidth=0,a.columnBuilders=[],a.rowBuilders=[],a.rowsProcessors=[],a.columnsProcessors=[],a.styleComputations=[],a.viewportAdjusters=[],a.rowHeaderColumns=[],a.dataChangeCallbacks={},a.verticalScrollSyncCallBackFns={},a.horizontalScrollSyncCallBackFns={},a.renderContainers={},a.renderContainers.body=new p("body",a),a.cellValueGetterCache={},a.getRowTemplateFn=null,a.rows=[],a.columns=[],a.isScrollingVertically=!1,a.isScrollingHorizontally=!1,a.scrollDirection=i.scrollDirection.NONE,a.disableScrolling=!1;var s=n.debounce(t,a.options.scrollDebounce),c=n.debounce(t,0),d=n.debounce(r,a.options.scrollDebounce),f=n.debounce(r,0);a.flagScrollingVertically=function(e){a.isScrollingVertically||a.isScrollingHorizontally||a.api.core.raise.scrollBegin(e),a.isScrollingVertically=!0,0!==a.options.scrollDebounce&&e.withDelay?s(e):c(e)},a.flagScrollingHorizontally=function(e){a.isScrollingVertically||a.isScrollingHorizontally||a.api.core.raise.scrollBegin(e),a.isScrollingHorizontally=!0,0!==a.options.scrollDebounce&&e.withDelay?d(e):f(e)},a.scrollbarHeight=0,a.scrollbarWidth=0,a.options.enableHorizontalScrollbar===i.scrollbars.ALWAYS&&(a.scrollbarHeight=n.getScrollbarWidth()),a.options.enableVerticalScrollbar===i.scrollbars.ALWAYS&&(a.scrollbarWidth=n.getScrollbarWidth()),a.api=new l(a),a.api.registerMethod("core","refresh",this.refresh),a.api.registerMethod("core","queueGridRefresh",this.queueGridRefresh),a.api.registerMethod("core","refreshRows",this.refreshRows),a.api.registerMethod("core","queueRefresh",this.queueRefresh),a.api.registerMethod("core","handleWindowResize",this.handleWindowResize),a.api.registerMethod("core","addRowHeaderColumn",this.addRowHeaderColumn),a.api.registerMethod("core","scrollToIfNecessary",function(e,t){return a.scrollToIfNecessary(e,t)}),a.api.registerMethod("core","scrollTo",function(e,t){return a.scrollTo(e,t)}),a.api.registerMethod("core","registerRowsProcessor",this.registerRowsProcessor),a.api.registerMethod("core","registerColumnsProcessor",this.registerColumnsProcessor),a.api.registerMethod("core","sortHandleNulls",u.handleNulls),a.api.registerEvent("core","sortChanged"),a.api.registerEvent("core","columnVisibilityChanged"),a.api.registerMethod("core","notifyDataChange",this.notifyDataChange),a.api.registerMethod("core","clearAllFilters",this.clearAllFilters),a.registerDataChangeCallback(a.columnRefreshCallback,[i.dataChange.COLUMN]),a.registerDataChangeCallback(a.processRowsCallback,[i.dataChange.EDIT]),a.registerDataChangeCallback(a.updateFooterHeightCallback,[i.dataChange.OPTIONS]),a.registerStyleComputation({priority:10,func:a.getFooterStyles})};g.prototype.calcFooterHeight=function(){if(!this.hasFooter())return 0;var e=0;return this.options.showGridFooter&&(e+=this.options.gridFooterHeight),e+=this.calcColumnFooterHeight()},g.prototype.calcColumnFooterHeight=function(){var e=0;return this.options.showColumnFooter&&(e+=this.options.columnFooterHeight),e},g.prototype.getFooterStyles=function(){var e=".grid"+this.id+" .ui-grid-footer-aggregates-row { height: "+this.options.columnFooterHeight+"px; }";return e+=" .grid"+this.id+" .ui-grid-footer-info { height: "+this.options.gridFooterHeight+"px; }"},g.prototype.hasFooter=function(){return this.options.showGridFooter||this.options.showColumnFooter},g.prototype.isRTL=function(){return this.rtl},g.prototype.registerColumnBuilder=function(e){this.columnBuilders.push(e)},g.prototype.buildColumnDefsFromData=function(e){this.options.columnDefs=n.getColumnsFromData(e,this.options.excludeProperties)},g.prototype.registerRowBuilder=function(e){this.rowBuilders.push(e)},g.prototype.registerDataChangeCallback=function(e,t,r){var o=n.nextUid();t||(t=[i.dataChange.ALL]),Array.isArray(t)||n.logError("Expected types to be an array or null in registerDataChangeCallback, value passed was: "+t),this.dataChangeCallbacks[o]={callback:e,types:t,_this:r};var a=this;return function(){delete a.dataChangeCallbacks[o]}},g.prototype.callDataChangeCallbacks=function(e,t){angular.forEach(this.dataChangeCallbacks,function(r,n){-1===r.types.indexOf(i.dataChange.ALL)&&-1===r.types.indexOf(e)&&e!==i.dataChange.ALL||(r._this?r.callback.apply(r._this,this,t):r.callback(this,t))},this)},g.prototype.notifyDataChange=function(e){var t=i.dataChange;e===t.ALL||e===t.COLUMN||e===t.EDIT||e===t.ROW||e===t.OPTIONS?this.callDataChangeCallbacks(e):n.logError("Notified of a data change, but the type was not recognised, so no action taken, type was: "+e)},g.prototype.columnRefreshCallback=function(e,t){e.buildColumns(t),e.queueGridRefresh()},g.prototype.processRowsCallback=function(e){e.queueGridRefresh()},g.prototype.updateFooterHeightCallback=function(e){e.footerHeight=e.calcFooterHeight(),e.columnFooterHeight=e.calcColumnFooterHeight()},g.prototype.getColumn=function(e){var t=this.columns.filter(function(t){return t.colDef.name===e});return t.length>0?t[0]:null},g.prototype.getColDef=function(e){var t=this.options.columnDefs.filter(function(t){return t.name===e});return t.length>0?t[0]:null},g.prototype.assignTypes=function(){var e=this;e.options.columnDefs.forEach(function(t,r){if(!t.type){var i=new a(t,r,e),o=e.rows.length>0?e.rows[0]:null;t.type=o?n.guessType(e.getCellValue(o,i)):"string"}})},g.prototype.isRowHeaderColumn=function(e){return-1!==this.rowHeaderColumns.indexOf(e)},g.prototype.addRowHeaderColumn=function(e,t,r){var i=this;void 0===t&&(t=0);var o=new a(e,n.nextUid(),i);o.isRowHeader=!0,i.isRTL()?(i.createRightContainer(),o.renderContainer="right"):(i.createLeftContainer(),o.renderContainer="left"),i.columnBuilders[0](e,o,i.options).then(function(){o.enableFiltering=!1,o.enableSorting=!1,o.enableHiding=!1,o.headerPriority=t,i.rowHeaderColumns.push(o),i.rowHeaderColumns=i.rowHeaderColumns.sort(function(e,t){return e.headerPriority-t.headerPriority}),r||i.buildColumns().then(function(){i.preCompileCellTemplates(),i.queueGridRefresh()}).catch(angular.noop)}).catch(angular.noop)},g.prototype.getOnlyDataColumns=function(){var e=this,t=[];return e.columns.forEach(function(r){-1===e.rowHeaderColumns.indexOf(r)&&t.push(r)}),t},g.prototype.buildColumns=function(t){var r={orderByColumnDefs:!1};angular.extend(r,t);var i,o=this,s=[],l=o.rowHeaderColumns.length;for(i=0;i<o.columns.length;i++)o.getColDef(o.columns[i].name)||(o.columns.splice(i,1),i--);for(var u=o.rowHeaderColumns.length-1;u>=0;u--)o.columns.unshift(o.rowHeaderColumns[u]);if(o.options.columnDefs.forEach(function(e,t){o.preprocessColDef(e);var r=o.getColumn(e.name);r?r.updateColumnDef(e,!1):(r=new a(e,n.nextUid(),o),o.columns.splice(t+l,0,r)),o.columnBuilders.forEach(function(t){s.push(t.call(o,e,r,o.options))})}),r.orderByColumnDefs){var c=o.columns.slice(0),p=Math.min(o.options.columnDefs.length,o.columns.length);for(i=0;i<p;i++)o.columns[i+l].name!==o.options.columnDefs[i].name?c[i+l]=o.getColumn(o.options.columnDefs[i].name):c[i+l]=o.columns[i+l];o.columns.length=0,Array.prototype.splice.apply(o.columns,[0,0].concat(c))}return e.all(s).then(function(){o.rows.length>0&&o.assignTypes(),r.preCompileCellTemplates&&o.preCompileCellTemplates()}).catch(angular.noop)},g.prototype.preCompileCellTemplate=function(e){var r=this,n=e.cellTemplate.replace(i.MODEL_COL_FIELD,r.getQualifiedColField(e));n=n.replace(i.COL_FIELD,"grid.getCellValue(row, col)");var o=t(n);e.compiledElementFn=o,e.compiledElementFnDefer&&e.compiledElementFnDefer.resolve(e.compiledElementFn)},g.prototype.preCompileCellTemplates=function(){var e=this;e.columns.forEach(function(t){t.cellTemplate?e.preCompileCellTemplate(t):t.cellTemplatePromise&&t.cellTemplatePromise.then(function(){e.preCompileCellTemplate(t)}).catch(angular.noop)})},g.prototype.getQualifiedColField=function(e){return e.field===i.ENTITY_BINDING?"row.entity":n.preEval("row.entity."+e.field)},g.prototype.createLeftContainer=function(){this.hasLeftContainer()||(this.renderContainers.left=new p("left",this,{disableColumnOffset:!0}))},g.prototype.createRightContainer=function(){this.hasRightContainer()||(this.renderContainers.right=new p("right",this,{disableColumnOffset:!0}))},g.prototype.hasLeftContainer=function(){return void 0!==this.renderContainers.left},g.prototype.hasRightContainer=function(){return void 0!==this.renderContainers.right},g.prototype.preprocessColDef=function(e){var t=this;if(!e.field&&!e.name)throw new Error("colDef.name or colDef.field property is required");if(void 0===e.name&&void 0!==e.field){for(var r=e.field,n=2;t.getColumn(r);)r=e.field+n.toString(),n++;e.name=r}},g.prototype.newInN=function(e,t,r,n){for(var i=this,o=[],a=0;a<t.length;a++){for(var s=n?t[a][n]:t[a],l=!1,u=0;u<e.length;u++){var c=r?e[u][r]:e[u];if(i.options.rowEquality(s,c)){l=!0;break}}l||o.push(s)}return o},g.prototype.getRow=function(e,t){var r=this;t=void 0===t?r.rows:t;var n=t.filter(function(t){return r.options.rowEquality(t.entity,e)});return n.length>0?n[0]:null},g.prototype.modifyRows=function(t){var r=this,n=r.rows.slice(0),i=r.rowHashMap||r.createRowHashMap(),o=!0;r.rowHashMap=r.createRowHashMap(),r.rows.length=0,t.forEach(function(e,t){var a,l;l=r.options.enableRowHashing?i.get(e):r.getRow(e,n),l&&(a=l,a.entity=e),a||(a=r.processRowBuilders(new s(e,t,r))),r.rows.push(a),r.rowHashMap.put(e,a),a.isSelected||(o=!1)}),r.selection&&(r.selection.selectAll=o),r.assignTypes();var a=e.when(r.processRowsProcessors(r.rows)).then(function(e){return r.setVisibleRows(e)}).catch(angular.noop),l=e.when(r.processColumnsProcessors(r.columns)).then(function(e){return r.setVisibleColumns(e)}).catch(angular.noop);return e.all([a,l])},g.prototype.addRows=function(e){for(var t=this,r=t.rows.length,n=0;n<e.length;n++){var i=t.processRowBuilders(new s(e[n],n+r,t));if(t.options.enableRowHashing){var o=t.rowHashMap.get(i.entity);o&&(o.row=i)}t.rows.push(i)}},g.prototype.processRowBuilders=function(e){var t=this;return t.rowBuilders.forEach(function(r){r.call(t,e,t.options)}),e},g.prototype.registerStyleComputation=function(e){this.styleComputations.push(e)},g.prototype.registerRowsProcessor=function(e,t){if(!angular.isFunction(e))throw"Attempt to register non-function rows processor: "+e;this.rowsProcessors.push({processor:e,priority:t}),this.rowsProcessors.sort(function(e,t){return e.priority-t.priority})},g.prototype.removeRowsProcessor=function(e){var t=-1;this.rowsProcessors.forEach(function(r,n){r.processor===e&&(t=n)}),-1!==t&&this.rowsProcessors.splice(t,1)},g.prototype.processRowsProcessors=function(t){function r(t,i){var a=n.rowsProcessors[t].processor;return e.when(a.call(n,i,n.columns)).then(function(e){if(!e)throw"Processor at index "+t+" did not return a set of renderable rows";if(!angular.isArray(e))throw"Processor at index "+t+" did not return an array";if(++t<=n.rowsProcessors.length-1)return r(t,e);o.resolve(e)}).catch(angular.noop)}var n=this,i=t.slice(0);if(0===n.rowsProcessors.length)return e.when(i);var o=e.defer();return r(0,i),o.promise},g.prototype.setVisibleRows=function(e){var t=this;for(var r in t.renderContainers){var n=t.renderContainers[r];n.canvasHeightShouldUpdate=!0,void 0===n.visibleRowCache?n.visibleRowCache=[]:n.visibleRowCache.length=0}for(var i=0;i<e.length;i++){var o=e[i],a=void 0!==o.renderContainer&&o.renderContainer?o.renderContainer:"body";o.visible&&t.renderContainers[a].visibleRowCache.push(o)}t.api.core.raise.rowsVisibleChanged(this.api),t.api.core.raise.rowsRendered(this.api)},g.prototype.registerColumnsProcessor=function(e,t){if(!angular.isFunction(e))throw"Attempt to register non-function rows processor: "+e;this.columnsProcessors.push({processor:e,priority:t}),this.columnsProcessors.sort(function(e,t){return e.priority-t.priority})},g.prototype.removeColumnsProcessor=function(e){var t=this.columnsProcessors.indexOf(e);void 0!==t&&void 0!==t&&this.columnsProcessors.splice(t,1)},g.prototype.processColumnsProcessors=function(t){function r(t,a){var s=n.columnsProcessors[t].processor;return e.when(s.call(n,a,n.rows)).then(function(e){if(!e)throw"Processor at index "+t+" did not return a set of renderable rows";if(!angular.isArray(e))throw"Processor at index "+t+" did not return an array";if(++t<=n.columnsProcessors.length-1)return r(t,i);o.resolve(i)}).catch(angular.noop)}var n=this,i=t.slice(0);if(0===n.columnsProcessors.length)return e.when(i);var o=e.defer();return r(0,i),o.promise},g.prototype.setVisibleColumns=function(e){var t=this;for(var r in t.renderContainers){t.renderContainers[r].visibleColumnCache.length=0}for(var n=0;n<e.length;n++){var i=e[n];i.visible&&(void 0!==i.renderContainer&&i.renderContainer?t.renderContainers[i.renderContainer].visibleColumnCache.push(i):t.renderContainers.body.visibleColumnCache.push(i))}},g.prototype.handleWindowResize=function(e){var t=this;return t.gridWidth=n.elementWidth(t.element),t.gridHeight=n.elementHeight(t.element),t.queueRefresh()},g.prototype.queueRefresh=function(){var e=this;return e.refreshCanceller&&d.cancel(e.refreshCanceller),e.refreshCanceller=d(function(){e.refreshCanvas(!0)}),e.refreshCanceller.then(function(){e.refreshCanceller=null}).catch(angular.noop),e.refreshCanceller},g.prototype.queueGridRefresh=function(){var e=this;return e.gridRefreshCanceller&&d.cancel(e.gridRefreshCanceller),e.gridRefreshCanceller=d(function(){e.refresh(!0)}),e.gridRefreshCanceller.then(function(){e.gridRefreshCanceller=null}).catch(angular.noop),e.gridRefreshCanceller},g.prototype.updateCanvasHeight=function(){var e=this;for(var t in e.renderContainers)if(e.renderContainers.hasOwnProperty(t)){var r=e.renderContainers[t];r.canvasHeightShouldUpdate=!0}},g.prototype.buildStyles=function(){var e=this;e.customStyles="",e.styleComputations.sort(function(e,t){return null===e.priority?1:null===t.priority?-1:null===e.priority&&null===t.priority?0:e.priority-t.priority}).forEach(function(t){var r=t.func.call(e);angular.isString(r)&&(e.customStyles+="\n"+r)})},g.prototype.minColumnsToRender=function(){var e=this,t=this.getViewportWidth(),r=0,n=0;return e.columns.forEach(function(i,o){if(n<t)n+=i.drawnWidth,r++;else{for(var a=0,s=o;s>=o-r;s--)a+=e.columns[s].drawnWidth;a<t&&r++}}),r},g.prototype.getBodyHeight=function(){return this.getViewportHeight()},g.prototype.getViewportHeight=function(){var e=this,t=this.gridHeight-this.headerHeight-this.footerHeight;return t+=e.getViewportAdjustment().height},g.prototype.getViewportWidth=function(){var e=this,t=this.gridWidth;return t+=e.getViewportAdjustment().width},g.prototype.getHeaderViewportWidth=function(){return this.getViewportWidth()},g.prototype.addVerticalScrollSync=function(e,t){this.verticalScrollSyncCallBackFns[e]=t},g.prototype.addHorizontalScrollSync=function(e,t){this.horizontalScrollSyncCallBackFns[e]=t},g.prototype.scrollContainers=function(e,t){if(t.y){var r=["body","left","right"];this.flagScrollingVertically(t),"body"===e?r=["left","right"]:"left"===e?r=["body","right"]:"right"===e&&(r=["body","left"]);for(var n=0;n<r.length;n++){var i=r[n];this.verticalScrollSyncCallBackFns[i]&&this.verticalScrollSyncCallBackFns[i](t)}}if(t.x){var o=["body","bodyheader","bodyfooter"];this.flagScrollingHorizontally(t),"body"===e&&(o=["bodyheader","bodyfooter"]);for(var a=0;a<o.length;a++){var s=o[a];this.horizontalScrollSyncCallBackFns[s]&&this.horizontalScrollSyncCallBackFns[s](t)}}},g.prototype.registerViewportAdjuster=function(e){this.viewportAdjusters.push(e)},g.prototype.removeViewportAdjuster=function(e){var t=this.viewportAdjusters.indexOf(e);void 0!==t&&void 0!==t&&this.viewportAdjusters.splice(t,1)},g.prototype.getViewportAdjustment=function(){var e=this,t={height:0,width:0};return e.viewportAdjusters.forEach(function(e){t=e.call(this,t)}),t},g.prototype.getVisibleRowCount=function(){return this.renderContainers.body.visibleRowCache.length},g.prototype.getVisibleRows=function(){return this.renderContainers.body.visibleRowCache},g.prototype.getVisibleColumnCount=function(){return this.renderContainers.body.visibleColumnCache.length},g.prototype.searchRows=function(e){return c.search(this,e,this.columns)},g.prototype.sortByColumn=function(e){return u.sort(this,e,this.columns)},g.prototype.getCellValue=function(e,t){return void 0!==e.entity["$$"+t.uid]?e.entity["$$"+t.uid].rendered:this.options.flatEntityAccess&&void 0!==t.field?e.entity[t.field]:(t.cellValueGetterCache||(t.cellValueGetterCache=r(e.getEntityQualifiedColField(t))),t.cellValueGetterCache(e))},g.prototype.getCellDisplayValue=function(e,t){if(!t.cellDisplayGetterCache){var n=t.cellFilter?" | "+t.cellFilter:"";if(void 0!==e.entity["$$"+t.uid])t.cellDisplayGetterCache=r(e.entity["$$"+t.uid].rendered+n);else if(this.options.flatEntityAccess&&void 0!==t.field){var i=t.field.replace(/(')|(\\)/g,"\\$&");t.cellDisplayGetterCache=r("entity['"+i+"']"+n)}else t.cellDisplayGetterCache=r(e.getEntityQualifiedColField(t)+n)}return t.cellDisplayGetterCache(e)},g.prototype.getNextColumnSortPriority=function(){var e=this,t=0;return e.columns.forEach(function(e){e.sort&&void 0!==e.sort.priority&&e.sort.priority>=t&&(t=e.sort.priority+1)}),t},g.prototype.resetColumnSorting=function(e){this.columns.forEach(function(t){t===e||t.suppressRemoveSort||(t.sort={})})},g.prototype.getColumnSorting=function(){var e,t=this,r=[];return e=t.columns.slice(0),e.sort(u.prioritySort).forEach(function(e){e.sort&&void 0!==e.sort.direction&&e.sort.direction&&(e.sort.direction===i.ASC||e.sort.direction===i.DESC)&&r.push(e)}),r},g.prototype.sortColumn=function(t,r,n){var i=this,o=null;if(void 0===t||!t)throw new Error("No column parameter provided");if("boolean"==typeof r?n=r:o=r,n?void 0===t.sort.priority&&(t.sort.priority=i.getNextColumnSortPriority()):(i.resetColumnSorting(t),t.sort.priority=void 0,t.sort.priority=i.getNextColumnSortPriority()),o)t.sort.direction=o;else{var a=t.sortDirectionCycle.indexOf(t.sort.direction?t.sort.direction:null);a=(a+1)%t.sortDirectionCycle.length,t.colDef&&t.suppressRemoveSort&&!t.sortDirectionCycle[a]&&(a=(a+1)%t.sortDirectionCycle.length),t.sortDirectionCycle[a]?t.sort.direction=t.sortDirectionCycle[a]:v(t,i)}return i.api.core.raise.sortChanged(i,i.getColumnSorting()),e.when(t)};var v=function(e,t){t.columns.forEach(function(t){t.sort&&void 0!==t.sort.priority&&t.sort.priority>e.sort.priority&&(t.sort.priority-=1)}),e.sort={}};return g.prototype.renderingComplete=function(){angular.isFunction(this.options.onRegisterApi)&&this.options.onRegisterApi(this.api),this.api.core.raise.renderingComplete(this.api)},g.prototype.createRowHashMap=function(){var e=this,t=new h;return t.grid=e,t},g.prototype.refresh=function(t){var r=this,n=r.processRowsProcessors(r.rows).then(function(e){r.setVisibleRows(e)}).catch(angular.noop),i=r.processColumnsProcessors(r.columns).then(function(e){r.setVisibleColumns(e)}).catch(angular.noop);return e.all([n,i]).then(function(){r.refreshCanvas(!0),r.redrawInPlace(t)}).catch(angular.noop)},g.prototype.refreshRows=function(){var e=this;return e.processRowsProcessors(e.rows).then(function(t){e.setVisibleRows(t),e.redrawInPlace(),e.refreshCanvas(!0)}).catch(angular.noop)},g.prototype.refreshCanvas=function(t){var r=this,i=e.defer(),o=[];for(var a in r.renderContainers)if(r.renderContainers.hasOwnProperty(a)){var s=r.renderContainers[a];if(null===s.canvasWidth||isNaN(s.canvasWidth))continue;(s.header||s.headerCanvas)&&(s.explicitHeaderHeight=s.explicitHeaderHeight||null,s.explicitHeaderCanvasHeight=s.explicitHeaderCanvasHeight||null,o.push(s))}return t&&r.buildStyles(),d(o.length>0?function(){var e,a,s=!1,l=0,u=0,c=function(e,t){return e!==t&&(s=!0),t};for(e=0;e<o.length;e++)if(a=o[e],null!==a.canvasWidth&&!isNaN(a.canvasWidth)){if(a.header){var p=a.headerHeight=c(a.headerHeight,n.outerElementHeight(a.header)),d=n.getBorderSize(a.header,"top"),f=n.getBorderSize(a.header,"bottom"),h=parseInt(p-d-f,10);h=h<0?0:h,a.innerHeaderHeight=h,!a.explicitHeaderHeight&&h>l&&(l=h)}if(a.headerCanvas){var g=a.headerCanvasHeight=c(a.headerCanvasHeight,parseInt(n.outerElementHeight(a.headerCanvas),10));!a.explicitHeaderCanvasHeight&&g>u&&(u=g)}}for(e=0;e<o.length;e++)a=o[e],l>0&&void 0!==a.headerHeight&&null!==a.headerHeight&&(a.explicitHeaderHeight||a.headerHeight<l)&&(a.explicitHeaderHeight=c(a.explicitHeaderHeight,l)),u>0&&void 0!==a.headerCanvasHeight&&null!==a.headerCanvasHeight&&(a.explicitHeaderCanvasHeight||a.headerCanvasHeight<u)&&(a.explicitHeaderCanvasHeight=c(a.explicitHeaderCanvasHeight,u));t&&s&&r.buildStyles(),i.resolve()}:function(){i.resolve()}),i.promise},g.prototype.redrawInPlace=function(e){var t=this;for(var r in t.renderContainers){var n=t.renderContainers[r];e?(n.adjustRows(n.prevScrollTop,null),n.adjustColumns(n.prevScrollLeft,null)):(n.adjustRows(null,n.prevScrolltopPercentage),n.adjustColumns(null,n.prevScrollleftPercentage))}},g.prototype.hasLeftContainerColumns=function(){return this.hasLeftContainer()&&this.renderContainers.left.renderedColumns.length>0},g.prototype.hasRightContainerColumns=function(){return this.hasRightContainer()&&this.renderContainers.right.renderedColumns.length>0},g.prototype.scrollToIfNecessary=function(t,r){var n=this,i=new f(n,"uiGrid.scrollToIfNecessary"),o=n.renderContainers.body.visibleRowCache,a=n.renderContainers.body.visibleColumnCache,s=n.renderContainers.body.prevScrollTop+n.headerHeight;s=s<0?0:s;var l=n.renderContainers.body.prevScrollLeft,u=n.renderContainers.body.prevScrollTop+n.gridHeight-n.renderContainers.body.headerHeight-n.footerHeight-n.scrollbarWidth,c=n.renderContainers.body.prevScrollLeft+Math.ceil(n.renderContainers.body.getViewportWidth());if(null!==t){var p=o.indexOf(t),d=n.renderContainers.body.getCanvasHeight()-n.renderContainers.body.getViewportHeight(),h=p*n.options.rowHeight+n.headerHeight;h=h<0?0:h;var g,v;h<s?(g=n.renderContainers.body.prevScrollTop-(s-h),(v=g/d)<=1&&(i.y={percentage:v})):h>u&&(g=h-u+n.renderContainers.body.prevScrollTop,(v=g/d)<=1&&(i.y={percentage:v}))}if(null!==r){for(var m=a.indexOf(r),y=n.renderContainers.body.getCanvasWidth()-n.renderContainers.body.getViewportWidth(),b=0,E=0;E<m;E++){b+=a[E].drawnWidth}b=b<0?0:b;var x=b+r.drawnWidth;x=x<0?0:x;var S,C;b<l?(S=n.renderContainers.body.prevScrollLeft-(l-b),C=S/y,C=C>1?1:C,i.x={percentage:C}):x>c&&(S=x-c+n.renderContainers.body.prevScrollLeft,C=S/y,C=C>1?1:C,i.x={percentage:C})}var w=e.defer();if(i.y||i.x){i.withDelay=!1,n.scrollContainers("",i);var T=n.api.core.on.scrollEnd(null,function(){w.resolve(i),T()})}else w.resolve();return w.promise},g.prototype.scrollTo=function(e,t){var r=null,n=null;return null!==e&&void 0!==e&&(r=this.getRow(e)),null!==t&&void 0!==t&&(n=this.getColumn(t.name?t.name:t.field)),this.scrollToIfNecessary(r,n)},g.prototype.clearAllFilters=function(e,t,r){if(void 0===e&&(e=!0),void 0===t&&(t=!1),void 0===r&&(r=!1),this.columns.forEach(function(e){e.filters.forEach(function(e){e.term=void 0,t&&(e.condition=void 0),r&&(e.flags=void 0)})}),e)return this.refreshRows()},h.prototype={put:function(e,t){this[this.grid.options.rowIdentity(e)]=t},get:function(e){return this[this.grid.options.rowIdentity(e)]},remove:function(e){var t=this[e=this.grid.options.rowIdentity(e)];return delete this[e],t}},g}])}(),function(){angular.module("ui.grid").factory("GridApi",["$q","$rootScope","gridUtil","uiGridConstants","GridRow","uiGridGridMenuService",function(e,t,r,n,i,o){function a(e,r,n,i){return t.$on(e,function(e){var t=Array.prototype.slice.call(arguments);t.splice(0,1),r.apply(i||n.api,t)})}var s=function(e){this.grid=e,this.listeners=[],this.registerEvent("core","renderingComplete"),this.registerEvent("core","filterChanged"),this.registerMethod("core","setRowInvisible",i.prototype.setRowInvisible),this.registerMethod("core","clearRowInvisible",i.prototype.clearRowInvisible),this.registerMethod("core","getVisibleRows",this.grid.getVisibleRows),this.registerEvent("core","rowsVisibleChanged"),this.registerEvent("core","rowsRendered"),this.registerEvent("core","scrollBegin"),this.registerEvent("core","scrollEnd"),this.registerEvent("core","canvasHeightChanged"),this.registerEvent("core","gridDimensionChanged")};return s.prototype.suppressEvents=function(e,t){var r=this,n=angular.isArray(e)?e:[e],i=r.listeners.filter(function(e){return n.some(function(t){return e.handler===t})});i.forEach(function(e){e.dereg()}),t(),i.forEach(function(e){e.dereg=a(e.eventId,e.handler,r.grid,e._this)})},s.prototype.registerEvent=function(e,n){var i=this;i[e]||(i[e]={});var o=i[e];o.on||(o.on={},o.raise={});var s=i.grid.id+e+n;o.raise[n]=function(){t.$emit.apply(t,[s].concat(Array.prototype.slice.call(arguments)))},o.on[n]=function(t,o,l){if(null!==t&&void 0===t.$on)return void r.logError("asked to listen on "+e+".on."+n+" but scope wasn't passed in the input parameters.  It is legitimate to pass null, but you've passed something else, so you probably forgot to provide scope rather than did it deliberately, not registering");var u=a(s,o,i.grid,l),c={handler:o,dereg:u,eventId:s,scope:t,_this:l};i.listeners.push(c);var p=function(){c.dereg();var e=i.listeners.indexOf(c);i.listeners.splice(e,1)};return t&&t.$on("$destroy",function(){p()}),p}},s.prototype.registerEventsFromObject=function(e){var t=this,r=[];angular.forEach(e,function(e,t){var n={name:t,events:[]};angular.forEach(e,function(e,t){n.events.push(t)}),r.push(n)}),r.forEach(function(e){e.events.forEach(function(r){t.registerEvent(e.name,r)})})},s.prototype.registerMethod=function(e,t,n,i){this[e]||(this[e]={}),this[e][t]=r.createBoundedWrapper(i||this.grid,n)},s.prototype.registerMethodsFromObject=function(e,t){var r=this,n=[];angular.forEach(e,function(e,t){var r={name:t,methods:[]};angular.forEach(e,function(e,t){r.methods.push({name:t,fn:e})}),n.push(r)}),n.forEach(function(e){e.methods.forEach(function(n){r.registerMethod(e.name,n.name,n.fn,t)})})},s}])}(),function(){angular.module("ui.grid").factory("GridColumn",["gridUtil","uiGridConstants","i18nService",function(e,t,r){function n(e,r,n){var i=this;i.grid=n,i.uid=r,i.updateColumnDef(e,!0),i.aggregationValue=void 0,i.updateAggregationValue=function(){if(!i.aggregationType)return void(i.aggregationValue=void 0);var e=0,r=i.grid.getVisibleRows(),n=function(){var e=[];return r.forEach(function(t){var r=i.grid.getCellValue(t,i),n=Number(r);isNaN(n)||e.push(n)}),e};angular.isFunction(i.aggregationType)?i.aggregationValue=i.aggregationType(r,i):i.aggregationType===t.aggregationTypes.count?i.aggregationValue=i.grid.getVisibleRowCount():i.aggregationType===t.aggregationTypes.sum?(n().forEach(function(t){e+=t}),i.aggregationValue=e):i.aggregationType===t.aggregationTypes.avg?(n().forEach(function(t){e+=t}),e/=n().length,i.aggregationValue=e):i.aggregationType===t.aggregationTypes.min?i.aggregationValue=Math.min.apply(null,n()):i.aggregationType===t.aggregationTypes.max?i.aggregationValue=Math.max.apply(null,n()):i.aggregationValue=""},this.getAggregationValue=function(){return i.aggregationValue}}return n.prototype.hideColumn=function(){this.colDef.visible=!1},n.prototype.setPropertyOrDefault=function(e,t,r){var n=this;void 0!==e[t]&&e[t]?n[t]=e[t]:void 0!==n[t]?n[t]=n[t]:n[t]=r||{}},n.prototype.updateColumnDef=function(r,n){var i=this;if(i.colDef=r,void 0===r.name)throw new Error("colDef.name is required for column at index "+i.grid.options.columnDefs.indexOf(r));if(i.displayName=void 0===r.displayName?e.readableColumnName(r.name):r.displayName,!angular.isNumber(i.width)||!i.hasCustomWidth||r.allowCustomWidthOverride){var o=r.width,a="Cannot parse column width '"+o+"' for column named '"+r.name+"'";if(i.hasCustomWidth=!1,angular.isString(o)||angular.isNumber(o))if(angular.isString(o))if(e.endsWith(o,"%")){var s=o.replace(/%/g,""),l=parseInt(s,10);if(isNaN(l))throw new Error(a);i.width=o}else if(o.match(/^(\d+)$/))i.width=parseInt(o.match(/^(\d+)$/)[1],10);else{if(!o.match(/^\*+$/))throw new Error(a);i.width=o}else i.width=o;else i.width="*"}["minWidth","maxWidth"].forEach(function(e){var t=r[e],n="Cannot parse column "+e+" '"+t+"' for column named '"+r.name+"'";if(angular.isString(t)||angular.isNumber(t))if(angular.isString(t)){if(!t.match(/^(\d+)$/))throw new Error(n);i[e]=parseInt(t.match(/^(\d+)$/)[1],10)}else i[e]=t;else i[e]="minWidth"===e?30:9e3}),i.field=void 0===r.field?r.name:r.field,"string"!=typeof i.field&&e.logError("Field is not a string, this is likely to break the code, Field is: "+i.field),i.name=r.name,i.displayName=void 0===r.displayName?e.readableColumnName(r.name):r.displayName,i.aggregationType=angular.isDefined(r.aggregationType)?r.aggregationType:null,i.footerCellTemplate=angular.isDefined(r.footerCellTemplate)?r.footerCellTemplate:null,void 0===r.cellTooltip||!1===r.cellTooltip?i.cellTooltip=!1:!0===r.cellTooltip?i.cellTooltip=function(e,t){return i.grid.getCellValue(e,t)}:"function"==typeof r.cellTooltip?i.cellTooltip=r.cellTooltip:i.cellTooltip=function(e,t){return t.colDef.cellTooltip},void 0===r.headerTooltip||!1===r.headerTooltip?i.headerTooltip=!1:!0===r.headerTooltip?i.headerTooltip=function(e){return e.displayName}:"function"==typeof r.headerTooltip?i.headerTooltip=r.headerTooltip:i.headerTooltip=function(e){return e.colDef.headerTooltip},i.footerCellClass=r.footerCellClass,i.cellClass=r.cellClass,i.headerCellClass=r.headerCellClass,i.cellFilter=r.cellFilter?r.cellFilter:"",i.sortCellFiltered=!!r.sortCellFiltered,i.filterCellFiltered=!!r.filterCellFiltered,i.headerCellFilter=r.headerCellFilter?r.headerCellFilter:"",i.footerCellFilter=r.footerCellFilter?r.footerCellFilter:"",i.visible=e.isNullOrUndefined(r.visible)||r.visible,i.headerClass=r.headerClass,i.enableSorting=void 0!==r.enableSorting?r.enableSorting:i.grid.options.enableSorting,i.sortingAlgorithm=r.sortingAlgorithm,i.sortDirectionCycle=void 0!==r.sortDirectionCycle?r.sortDirectionCycle:[null,t.ASC,t.DESC],void 0===i.suppressRemoveSort&&(i.suppressRemoveSort=void 0!==r.suppressRemoveSort&&r.suppressRemoveSort),i.enableFiltering=void 0===r.enableFiltering||r.enableFiltering,i.setPropertyOrDefault(r,"menuItems",[]),n&&i.setPropertyOrDefault(r,"sort"),i.setPropertyOrDefault(r,"defaultSort");var u=[];r.filter?u.push(r.filter):r.filters?u=r.filters:u.push({}),n?(i.setPropertyOrDefault(r,"filter"),i.setPropertyOrDefault(r,"extraStyle"),i.setPropertyOrDefault(r,"filters",u)):i.filters.length===u.length&&i.filters.forEach(function(e,t){void 0!==u[t].placeholder&&(e.placeholder=u[t].placeholder),void 0!==u[t].ariaLabel&&(e.ariaLabel=u[t].ariaLabel),void 0!==u[t].flags&&(e.flags=u[t].flags),void 0!==u[t].type&&(e.type=u[t].type),void 0!==u[t].selectOptions&&(e.selectOptions=u[t].selectOptions)})},n.prototype.unsort=function(){this.sort={},this.grid.api.core.raise.sortChanged(this.grid,this.grid.getColumnSorting())},n.prototype.getColClass=function(e){var r=t.COL_CLASS_PREFIX+this.uid;return e?"."+r:r},n.prototype.isPinnedLeft=function(){return"left"===this.renderContainer},n.prototype.isPinnedRight=function(){return"right"===this.renderContainer},n.prototype.getColClassDefinition=function(){return" .grid"+this.grid.id+" "+this.getColClass(!0)+" { min-width: "+this.drawnWidth+"px; max-width: "+this.drawnWidth+"px; }"},n.prototype.getRenderContainer=function(){var e=this,t=e.renderContainer;return null!==t&&""!==t&&void 0!==t||(t="body"),e.grid.renderContainers[t]},n.prototype.showColumn=function(){this.colDef.visible=!0},n.prototype.getAggregationText=function(){var e=this;if(e.colDef.aggregationHideLabel)return"";if(e.colDef.aggregationLabel)return e.colDef.aggregationLabel;switch(e.colDef.aggregationType){case t.aggregationTypes.count:return r.getSafeText("aggregation.count");case t.aggregationTypes.sum:return r.getSafeText("aggregation.sum");case t.aggregationTypes.avg:return r.getSafeText("aggregation.avg");case t.aggregationTypes.min:return r.getSafeText("aggregation.min");case t.aggregationTypes.max:return r.getSafeText("aggregation.max");default:return""}},n.prototype.getCellTemplate=function(){return this.cellTemplatePromise},n.prototype.getCompiledElementFn=function(){return this.compiledElementFnDefer.promise},n}])}(),function(){angular.module("ui.grid").factory("GridOptions",["gridUtil","uiGridConstants",function(e,t){return{initialize:function(r){return r.onRegisterApi=r.onRegisterApi||angular.noop(),r.data=r.data||[],r.columnDefs=r.columnDefs||[],r.excludeProperties=r.excludeProperties||["$$hashKey"],r.enableRowHashing=!1!==r.enableRowHashing,r.rowIdentity=r.rowIdentity||function(t){return e.hashKey(t)},r.getRowIdentity=r.getRowIdentity||function(e){return e.$$hashKey},r.flatEntityAccess=!0===r.flatEntityAccess,r.showHeader=void 0===r.showHeader||r.showHeader,r.showHeader?r.headerRowHeight=void 0!==r.headerRowHeight?r.headerRowHeight:30:r.headerRowHeight=0,"string"==typeof r.rowHeight?r.rowHeight=parseInt(r.rowHeight)||30:r.rowHeight=r.rowHeight||30,r.minRowsToShow=void 0!==r.minRowsToShow?r.minRowsToShow:10,r.showGridFooter=!0===r.showGridFooter,r.showColumnFooter=!0===r.showColumnFooter,r.columnFooterHeight=void 0!==r.columnFooterHeight?r.columnFooterHeight:30,r.gridFooterHeight=void 0!==r.gridFooterHeight?r.gridFooterHeight:30,r.columnWidth=void 0!==r.columnWidth?r.columnWidth:50,r.maxVisibleColumnCount=void 0!==r.maxVisibleColumnCount?r.maxVisibleColumnCount:200,r.virtualizationThreshold=void 0!==r.virtualizationThreshold?r.virtualizationThreshold:20,r.columnVirtualizationThreshold=void 0!==r.columnVirtualizationThreshold?r.columnVirtualizationThreshold:10,r.excessRows=void 0!==r.excessRows?r.excessRows:4,r.scrollThreshold=void 0!==r.scrollThreshold?r.scrollThreshold:4,r.excessColumns=void 0!==r.excessColumns?r.excessColumns:4,r.horizontalScrollThreshold=void 0!==r.horizontalScrollThreshold?r.horizontalScrollThreshold:2,r.aggregationCalcThrottle=void 0!==r.aggregationCalcThrottle?r.aggregationCalcThrottle:500,r.wheelScrollThrottle=void 0!==r.wheelScrollThrottle?r.wheelScrollThrottle:70,r.scrollDebounce=void 0!==r.scrollDebounce?r.scrollDebounce:300,r.enableSorting=!1!==r.enableSorting,r.enableFiltering=!0===r.enableFiltering,r.enableColumnMenus=!1!==r.enableColumnMenus,r.enableVerticalScrollbar=void 0!==r.enableVerticalScrollbar?r.enableVerticalScrollbar:t.scrollbars.ALWAYS,r.enableHorizontalScrollbar=void 0!==r.enableHorizontalScrollbar?r.enableHorizontalScrollbar:t.scrollbars.ALWAYS,r.enableMinHeightCheck=!1!==r.enableMinHeightCheck,r.minimumColumnSize=void 0!==r.minimumColumnSize?r.minimumColumnSize:10,r.rowEquality=r.rowEquality||function(e,t){return e===t},r.headerTemplate=r.headerTemplate||null,r.footerTemplate=r.footerTemplate||"ui-grid/ui-grid-footer",r.gridFooterTemplate=r.gridFooterTemplate||"ui-grid/ui-grid-grid-footer",r.rowTemplate=r.rowTemplate||"ui-grid/ui-grid-row",r.gridMenuTemplate=r.gridMenuTemplate||"ui-grid/uiGridMenu",r.appScopeProvider=r.appScopeProvider||null,r}}}])}(),function(){angular.module("ui.grid").factory("GridRenderContainer",["gridUtil","uiGridConstants",function(e,t){function r(e,t,r){var n=this;n.name=e,n.grid=t,n.visibleRowCache=[],n.visibleColumnCache=[],n.renderedRows=[],n.renderedColumns=[],n.prevScrollTop=0,n.prevScrolltopPercentage=0,n.prevRowScrollIndex=0,n.prevScrollLeft=0,n.prevScrollleftPercentage=0,n.prevColumnScrollIndex=0,n.columnStyles="",n.viewportAdjusters=[],n.hasHScrollbar=!1,n.hasVScrollbar=!1,n.canvasHeightShouldUpdate=!0,n.$$canvasHeight=0,r&&angular.isObject(r)&&angular.extend(n,r),t.registerStyleComputation({priority:5,func:function(){return n.updateColumnWidths(),n.columnStyles}})}return r.prototype.reset=function(){this.visibleColumnCache.length=0,this.visibleRowCache.length=0,this.renderedRows.length=0,this.renderedColumns.length=0},r.prototype.containsColumn=function(e){return-1!==this.visibleColumnCache.indexOf(e)},r.prototype.minRowsToRender=function(){for(var e=this,t=0,r=0,n=e.getViewportHeight(),i=e.visibleRowCache.length-1;r<n&&i>=0;i--)r+=e.visibleRowCache[i].height,t++;return t},r.prototype.minColumnsToRender=function(){for(var e=this,t=this.getViewportWidth(),r=0,n=0,i=0;i<e.visibleColumnCache.length;i++){var o=e.visibleColumnCache[i];if(n<t)n+=o.drawnWidth?o.drawnWidth:0,r++;else{for(var a=0,s=i;s>=i-r;s--)a+=e.visibleColumnCache[s].drawnWidth?e.visibleColumnCache[s].drawnWidth:0;a<t&&r++}}return r},r.prototype.getVisibleRowCount=function(){return this.visibleRowCache.length},r.prototype.registerViewportAdjuster=function(e){this.viewportAdjusters.push(e)},r.prototype.removeViewportAdjuster=function(e){var t=this.viewportAdjusters.indexOf(e);t>-1&&this.viewportAdjusters.splice(t,1)},r.prototype.getViewportAdjustment=function(){var e=this,t={height:0,width:0};return e.viewportAdjusters.forEach(function(e){t=e.call(this,t)}),t},r.prototype.getMargin=function(e){var t=this,r=0;return t.viewportAdjusters.forEach(function(t){var n=t.call(this,{height:0,width:0});n.side&&n.side===e&&(r+=-1*n.width)}),r},r.prototype.getViewportHeight=function(){var e=this,t=e.headerHeight?e.headerHeight:e.grid.headerHeight,r=e.grid.gridHeight-t-e.grid.footerHeight;return r+=e.getViewportAdjustment().height},r.prototype.getViewportWidth=function(){var e=this,t=e.grid.gridWidth;return t+=e.getViewportAdjustment().width},r.prototype.getHeaderViewportWidth=function(){return this.getViewportWidth()},r.prototype.getCanvasHeight=function(){var e=this;if(!e.canvasHeightShouldUpdate)return e.$$canvasHeight;var t=e.$$canvasHeight;return e.$$canvasHeight=0,e.visibleRowCache.forEach(function(t){e.$$canvasHeight+=t.height}),e.canvasHeightShouldUpdate=!1,e.grid.api.core.raise.canvasHeightChanged(t,e.$$canvasHeight),e.$$canvasHeight},r.prototype.getVerticalScrollLength=function(){return this.getCanvasHeight()-this.getViewportHeight()+this.grid.scrollbarHeight!==0?this.getCanvasHeight()-this.getViewportHeight()+this.grid.scrollbarHeight:-1},r.prototype.getHorizontalScrollLength=function(){return this.getCanvasWidth()-this.getViewportWidth()+this.grid.scrollbarWidth!==0?this.getCanvasWidth()-this.getViewportWidth()+this.grid.scrollbarWidth:-1},r.prototype.getCanvasWidth=function(){return this.canvasWidth},r.prototype.setRenderedRows=function(e){this.renderedRows.length=e.length;for(var t=0;t<e.length;t++)this.renderedRows[t]=e[t]},r.prototype.setRenderedColumns=function(e){this.renderedColumns.length=e.length;for(var t=0;t<e.length;t++)this.renderedColumns[t]=e[t];this.updateColumnOffset()},r.prototype.updateColumnOffset=function(){for(var e=0,t=0;t<this.currentFirstColumn;t++)e+=this.visibleColumnCache[t].drawnWidth;this.columnOffset=e},r.prototype.scrollVertical=function(e){var r=-1;if(e!==this.prevScrollTop){var n=e-this.prevScrollTop;n>0&&(this.grid.scrollDirection=t.scrollDirection.DOWN),n<0&&(this.grid.scrollDirection=t.scrollDirection.UP);return r=e/this.getVerticalScrollLength(),r>1&&(r=1),r<0&&(r=0),this.adjustScrollVertical(e,r),r}},r.prototype.scrollHorizontal=function(e){var r=-1;if(e!==this.prevScrollLeft){var n=e-this.prevScrollLeft;n>0&&(this.grid.scrollDirection=t.scrollDirection.RIGHT),n<0&&(this.grid.scrollDirection=t.scrollDirection.LEFT);var i=this.getHorizontalScrollLength();return r=0!==i?e/i:0,this.adjustScrollHorizontal(e,r),r}},r.prototype.adjustScrollVertical=function(e,t,r){(this.prevScrollTop!==e||r)&&(void 0!==e&&void 0!==e&&null!==e||(e=(this.getCanvasHeight()-this.getViewportHeight())*t),this.adjustRows(e,t,!1),this.prevScrollTop=e,this.prevScrolltopPercentage=t,this.grid.queueRefresh())},r.prototype.adjustScrollHorizontal=function(e,t,r){(this.prevScrollLeft!==e||r)&&(void 0!==e&&void 0!==e&&null!==e||(e=(this.getCanvasWidth()-this.getViewportWidth())*t),this.adjustColumns(e,t),this.prevScrollLeft=e,this.prevScrollleftPercentage=t,this.grid.queueRefresh())},r.prototype.adjustRows=function(e,t,r){var n=this,i=n.minRowsToRender(),o=n.visibleRowCache,a=o.length-i;void 0!==t&&null!==t||!e||(t=e/n.getVerticalScrollLength());var s=Math.ceil(Math.min(a,a*t));s>a&&(s=a);var l=[];if(o.length>n.grid.options.virtualizationThreshold){if(void 0!==e&&null!==e){if(!n.grid.suppressParentScrollDown&&n.prevScrollTop<e&&s<n.prevRowScrollIndex+n.grid.options.scrollThreshold&&s<a)return;if(!n.grid.suppressParentScrollUp&&n.prevScrollTop>e&&s>n.prevRowScrollIndex-n.grid.options.scrollThreshold&&s<a)return}var u={},c={};u=Math.max(0,s-n.grid.options.excessRows),c=Math.min(o.length,s+i+n.grid.options.excessRows),l=[u,c]}else{var p=n.visibleRowCache.length;l=[0,Math.max(p,i+n.grid.options.excessRows)]}n.updateViewableRowRange(l),n.prevRowScrollIndex=s},r.prototype.adjustColumns=function(e,t){var r=this,n=r.minColumnsToRender(),i=r.visibleColumnCache,o=i.length-n;void 0!==t&&null!==t||!e||(t=e/r.getHorizontalScrollLength());var a=Math.ceil(Math.min(o,o*t));a>o&&(a=o);var s=[];if(i.length>r.grid.options.columnVirtualizationThreshold&&r.getCanvasWidth()>r.getViewportWidth()){s=[Math.max(0,a-r.grid.options.excessColumns),Math.min(i.length,a+n+r.grid.options.excessColumns)]}else{var l=r.visibleColumnCache.length;s=[0,Math.max(l,n+r.grid.options.excessColumns)]}r.updateViewableColumnRange(s),r.prevColumnScrollIndex=a},r.prototype.updateViewableRowRange=function(e){var t=this.visibleRowCache.slice(e[0],e[1]);this.currentTopRow=e[0],this.setRenderedRows(t)},r.prototype.updateViewableColumnRange=function(e){var t=this.visibleColumnCache.slice(e[0],e[1]);this.currentFirstColumn=e[0],this.setRenderedColumns(t)},r.prototype.headerCellWrapperStyle=function(){var e=this;if(0!==e.currentFirstColumn){var t=e.columnOffset;return e.grid.isRTL()?{"margin-right":t+"px"}:{"margin-left":t+"px"}}return null},r.prototype.updateColumnWidths=function(){var t=this,r=[],n=0,i=0,o="",a=t.grid.getViewportWidth()-t.grid.scrollbarWidth,s=[];angular.forEach(t.grid.renderContainers,function(e,t){s=s.concat(e.visibleColumnCache)}),s.forEach(function(t,o){var s=0;t.visible&&(angular.isNumber(t.width)?(s=parseInt(t.width,10),i+=s,t.drawnWidth=s):e.endsWith(t.width,"%")?(s=parseInt(parseInt(t.width.replace(/%/g,""),10)/100*a),s>t.maxWidth&&(s=t.maxWidth),s<t.minWidth&&(s=t.minWidth),i+=s,t.drawnWidth=s):angular.isString(t.width)&&-1!==t.width.indexOf("*")&&(n+=t.width.length,r.push(t)))});var l=a-i;if(r.length>0){var u=l/n;r.forEach(function(e){var t=parseInt(e.width.length*u,10);t>e.maxWidth&&(t=e.maxWidth),t<e.minWidth&&(t=e.minWidth),i+=t,e.drawnWidth=t})}for(var c=function(e){e.drawnWidth<e.maxWidth&&p>0&&(e.drawnWidth++,i++,p--,d=!0)},p=a-i,d=!0;p>0&&d;)d=!1,r.forEach(c);var f=function(e){e.drawnWidth>e.minWidth&&h>0&&(e.drawnWidth--,i--,h--,d=!0)},h=i-a;for(d=!0;h>0&&d;)d=!1,r.forEach(f);var g=0;t.visibleColumnCache.forEach(function(e){e.visible&&(g+=e.drawnWidth)}),s.forEach(function(e){o+=e.getColClassDefinition()}),t.canvasWidth=g,this.columnStyles=o},r.prototype.needsHScrollbarPlaceholder=function(){return this.grid.options.enableHorizontalScrollbar&&!this.hasHScrollbar&&!this.grid.disableScrolling},r.prototype.getViewportStyle=function(){var e=this,r={};return e.hasHScrollbar=!1,e.hasVScrollbar=!1,e.grid.disableScrolling?(r["overflow-x"]="hidden",r["overflow-y"]="hidden",r):("body"===e.name?(e.hasHScrollbar=e.grid.options.enableHorizontalScrollbar!==t.scrollbars.NEVER,e.grid.isRTL()?e.grid.hasLeftContainerColumns()||(e.hasVScrollbar=e.grid.options.enableVerticalScrollbar!==t.scrollbars.NEVER):e.grid.hasRightContainerColumns()||(e.hasVScrollbar=e.grid.options.enableVerticalScrollbar!==t.scrollbars.NEVER)):"left"===e.name?e.hasVScrollbar=!!e.grid.isRTL()&&e.grid.options.enableVerticalScrollbar!==t.scrollbars.NEVER:e.hasVScrollbar=!e.grid.isRTL()&&e.grid.options.enableVerticalScrollbar!==t.scrollbars.NEVER,r["overflow-x"]=e.hasHScrollbar?"auto":"hidden",r["overflow-y"]=e.hasVScrollbar?"auto":"hidden",r)},r}])}(),function(){angular.module("ui.grid").factory("GridRow",["gridUtil","uiGridConstants",function(e,t){function r(t,r,n){this.grid=n,this.entity=t,this.uid=e.nextUid(),this.visible=!0,this.$$height=n.options.rowHeight}return Object.defineProperty(r.prototype,"height",{get:function(){return this.$$height},set:function(e){e!==this.$$height&&(this.grid.updateCanvasHeight(),this.$$height=e)}}),r.prototype.getQualifiedColField=function(e){return"row."+this.getEntityQualifiedColField(e)},r.prototype.getEntityQualifiedColField=function(r){return r.field===t.ENTITY_BINDING?"entity":e.preEval("entity."+r.field)},r.prototype.setRowInvisible=function(e){e&&e.setThisRowInvisible&&e.setThisRowInvisible("user")},r.prototype.clearRowInvisible=function(e){e&&e.clearThisRowInvisible&&e.clearThisRowInvisible("user")},r.prototype.setThisRowInvisible=function(e,t){this.invisibleReason||(this.invisibleReason={}),this.invisibleReason[e]=!0,this.evaluateRowVisibility(t)},r.prototype.clearThisRowInvisible=function(e,t){void 0!==this.invisibleReason&&delete this.invisibleReason[e],this.evaluateRowVisibility(t)},r.prototype.evaluateRowVisibility=function(e){var t=!0;void 0!==this.invisibleReason&&angular.forEach(this.invisibleReason,function(e,r){e&&(t=!1)}),void 0!==this.visible&&this.visible===t||(this.visible=t,e||(this.grid.queueGridRefresh(),this.grid.api.core.raise.rowsVisibleChanged(this)))},r}])}(),function(){"use strict";angular.module("ui.grid").factory("GridRowColumn",["$parse","$filter",function(e,t){var r=function e(t,r){if(!(this instanceof e))throw"Using GridRowColumn as a function insead of as a constructor. Must be called with `new` keyword";this.row=t,this.col=r};return r.prototype.getIntersectionValueRaw=function(){return e(this.row.getEntityQualifiedColField(this.col))(this.row)},r}])}(),function(){angular.module("ui.grid").factory("ScrollEvent",["gridUtil",function(e){function t(t,r,n,i){var o=this;if(!t)throw new Error("grid argument is required");o.grid=t,o.source=i,o.withDelay=!0,o.sourceRowContainer=r,o.sourceColContainer=n,o.newScrollLeft=null,o.newScrollTop=null,o.x=null,o.y=null,o.verticalScrollLength=-9999999,o.horizontalScrollLength=-999999,o.fireThrottledScrollingEvent=e.throttle(function(e){o.grid.scrollContainers(e,o)},o.grid.options.wheelScrollThrottle,{trailing:!0})}return t.prototype.getNewScrollLeft=function(t,r){var n=this;if(!n.newScrollLeft){var i,o=t.getCanvasWidth()-t.getViewportWidth(),a=e.normalizeScrollLeft(r,n.grid);if(void 0!==n.x.percentage&&void 0!==n.x.percentage)i=n.x.percentage;else{if(void 0===n.x.pixels||void 0===n.x.pixels)throw new Error("No percentage or pixel value provided for scroll event X axis");i=n.x.percentage=(a+n.x.pixels)/o}return Math.max(0,i*o)}return n.newScrollLeft},t.prototype.getNewScrollTop=function(e,t){var r=this;if(!r.newScrollTop){var n,i=e.getVerticalScrollLength(),o=t[0].scrollTop;if(void 0!==r.y.percentage&&void 0!==r.y.percentage)n=r.y.percentage;else{if(void 0===r.y.pixels||void 0===r.y.pixels)throw new Error("No percentage or pixel value provided for scroll event Y axis");n=r.y.percentage=(o+r.y.pixels)/i}return Math.max(0,n*i)}return r.newScrollTop},t.prototype.atTop=function(e){return this.y&&(0===this.y.percentage||this.verticalScrollLength<0)&&0===e},t.prototype.atBottom=function(e){return this.y&&(1===this.y.percentage||0===this.verticalScrollLength)&&e>0},t.prototype.atLeft=function(e){return this.x&&(0===this.x.percentage||this.horizontalScrollLength<0)&&0===e},t.prototype.atRight=function(e){return this.x&&(1===this.x.percentage||0===this.horizontalScrollLength)&&e>0},t.Sources={ViewPortScroll:"ViewPortScroll",RenderContainerMouseWheel:"RenderContainerMouseWheel",RenderContainerTouchMove:"RenderContainerTouchMove",Other:99},t}])}(),function(){"use strict";angular.module("ui.grid").service("gridClassFactory",["gridUtil","$q","$compile","$templateCache","uiGridConstants","Grid","GridColumn","GridRow",function(e,t,r,n,i,o,a,s){var l={createGrid:function(n){n=void 0!==n?n:{},n.id=e.newId();var i=new o(n);if(i.options.rowTemplate){var a=t.defer();i.getRowTemplateFn=a.promise,e.getTemplate(i.options.rowTemplate).then(function(e){var t=r(e);a.resolve(t)},function(e){throw new Error("Couldn't fetch/use row template '"+i.options.rowTemplate+"'")}).catch(angular.noop)}return i.registerColumnBuilder(l.defaultColumnBuilder),i.registerRowBuilder(l.rowTemplateAssigner),i.registerRowsProcessor(function(e){return e.forEach(function(e){e.evaluateRowVisibility(!0)},50),e}),i.registerColumnsProcessor(function(e){return e.forEach(function(e){e.visible=!angular.isDefined(e.colDef.visible)||e.colDef.visible}),e},50),i.registerRowsProcessor(i.searchRows,100),i.options.externalSort&&angular.isFunction(i.options.externalSort)?i.registerRowsProcessor(i.options.externalSort,200):i.registerRowsProcessor(i.sortByColumn,200),i},defaultColumnBuilder:function(r,n,o){var a=[],s=function(t,o,s,l,u){r[t]?n[o]=r[t]:n[o]=s,a.push(e.getTemplate(n[o]).then(function(e){angular.isFunction(e)&&(e=e());var r="cellTooltip"===u?"col.cellTooltip(row,col)":"col.headerTooltip(col)";u&&!1===n[u]?e=e.replace(i.TOOLTIP,""):u&&n[u]&&(e=e.replace(i.TOOLTIP,'title="{{'+r+' CUSTOM_FILTERS }}"')),n[t]=l?e.replace(i.CUSTOM_FILTERS,function(){return n[l]?"|"+n[l]:""}):e},function(e){throw new Error("Couldn't fetch/use colDef."+t+" '"+r[t]+"'")}).catch(angular.noop))};return s("cellTemplate","providedCellTemplate","ui-grid/uiGridCell","cellFilter","cellTooltip"),n.cellTemplatePromise=a[0],s("headerCellTemplate","providedHeaderCellTemplate","ui-grid/uiGridHeaderCell","headerCellFilter","headerTooltip"),s("footerCellTemplate","providedFooterCellTemplate","ui-grid/uiGridFooterCell","footerCellFilter"),s("filterHeaderTemplate","providedFilterHeaderTemplate","ui-grid/ui-grid-filter"),n.compiledElementFnDefer=t.defer(),t.all(a)},rowTemplateAssigner:function(n){var i=this;if(n.rowTemplate){var o=t.defer();n.getRowTemplateFn=o.promise,e.getTemplate(n.rowTemplate).then(function(e){var t=r(e);o.resolve(t)},function(e){throw new Error("Couldn't fetch/use row template '"+n.rowTemplate+"'")})}else n.rowTemplate=i.options.rowTemplate,n.getRowTemplateFn=i.getRowTemplateFn;return n.getRowTemplateFn}};return l}])}(),function(){function e(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}angular.module("ui.grid").service("rowSearcher",["gridUtil","uiGridConstants",function(t,r){var n=r.filter.CONTAINS,i={};return i.getTerm=function(e){if(void 0===e.term)return e.term;var t=e.term;return"string"==typeof t&&(t=t.trim()),t},i.stripTerm=function(t){var r=i.getTerm(t);return"string"==typeof r?e(r.replace(/(^\*|\*$)/g,"")):r},i.guessCondition=function(e){if(void 0===e.term||!e.term)return n;var t=i.getTerm(e);if(/\*/.test(t)){var r="";e.flags&&e.flags.caseSensitive||(r+="i");var o=t.replace(/(\\)?\*/g,function(e,t){return t?e:"[\\s\\S]*?"});return new RegExp("^"+o+"$",r)}return n},i.setupFilters=function(e){for(var n=[],o=e.length,a=0;a<o;a++){var s=e[a];if(s.noTerm||!t.isNullOrUndefined(s.term)){var l={},u="";s.flags&&s.flags.caseSensitive||(u+="i"),t.isNullOrUndefined(s.term)||(s.rawTerm?l.term=s.term:l.term=i.stripTerm(s)),l.noTerm=s.noTerm,s.condition?l.condition=s.condition:l.condition=i.guessCondition(s),l.flags=angular.extend({caseSensitive:!1,date:!1},s.flags),l.condition===r.filter.STARTS_WITH&&(l.startswithRE=new RegExp("^"+l.term,u)),l.condition===r.filter.ENDS_WITH&&(l.endswithRE=new RegExp(l.term+"$",u)),l.condition===r.filter.CONTAINS&&(l.containsRE=new RegExp(l.term,u)),l.condition===r.filter.EXACT&&(l.exactRE=new RegExp("^"+l.term+"$",u)),n.push(l)}}return n},i.runColumnFilter=function(e,t,n,i){var o,a=typeof i.condition,s=i.term;if(o=n.filterCellFiltered?e.getCellDisplayValue(t,n):e.getCellValue(t,n),i.condition instanceof RegExp)return i.condition.test(o);if("function"===a)return i.condition(s,o,t,n);if(i.startswithRE)return i.startswithRE.test(o);if(i.endswithRE)return i.endswithRE.test(o);if(i.containsRE)return i.containsRE.test(o);if(i.exactRE)return i.exactRE.test(o);if(i.condition===r.filter.NOT_EQUAL)return!new RegExp("^"+s+"$").exec(o);if("number"==typeof o&&"string"==typeof s){var l=parseFloat(s.replace(/\\\./,".").replace(/\\\-/,"-"));isNaN(l)||(s=l)}return!0===i.flags.date&&(o=new Date(o),s=new Date(s.replace(/\\/g,""))),i.condition===r.filter.GREATER_THAN?o>s:i.condition===r.filter.GREATER_THAN_OR_EQUAL?o>=s:i.condition===r.filter.LESS_THAN?o<s:i.condition!==r.filter.LESS_THAN_OR_EQUAL||o<=s},i.searchColumn=function(e,r,n,o){if(e.options.useExternalFiltering)return!0;for(var a=o.length,s=0;s<a;s++){var l=o[s];if((!t.isNullOrUndefined(l.term)&&""!==l.term||l.noTerm)&&!i.runColumnFilter(e,r,n,l))return!1}return!0},i.search=function(e,r,n){if(r){if(!e.options.enableFiltering)return r;for(var o=[],a=n.length,s=0;s<a;s++){var l=n[s];void 0!==l.filters&&function(e){var r=!1;return e.forEach(function(e){(!t.isNullOrUndefined(e.term)&&""!==e.term||e.noTerm)&&(r=!0)}),r}(l.filters)&&o.push({col:l,filters:i.setupFilters(l.filters)})}if(o.length>0){for(var u=function(e,t,r,n){t.visible&&!i.searchColumn(e,t,r,n)&&(t.visible=!1)},c=o.length,p=0;p<c;p++)!function(e,t){for(var n=r.length,i=0;i<n;i++)u(e,r[i],t.col,t.filters)}(e,o[p]);e.api.core.raise.rowsVisibleChanged&&e.api.core.raise.rowsVisibleChanged()}return r}},i}])}(),function(){angular.module("ui.grid").service("rowSorter",["$parse","uiGridConstants",function(e,t){var r="("+t.CURRENCY_SYMBOLS.map(function(e){return"\\"+e}).join("|")+")?",n=(new RegExp("^[-+]?"+r+"[\\d,.]+"+r+"%?$"),{colSortFnCache:{}});return n.guessSortFn=function(e){switch(e){case"number":return n.sortNumber;case"numberStr":return n.sortNumberStr;case"boolean":return n.sortBool;case"string":return n.sortAlpha;case"date":return n.sortDate;case"object":return n.basicSort;default:throw new Error("No sorting function found for type:"+e)}},n.handleNulls=function(e,t){if(!e&&0!==e&&!1!==e||!t&&0!==t&&!1!==t){if(!e&&0!==e&&!1!==e&&!t&&0!==t&&!1!==t)return 0;if(!e&&0!==e&&!1!==e)return 1;if(!t&&0!==t&&!1!==t)return-1}return null},n.basicSort=function(e,t){var r=n.handleNulls(e,t);return null!==r?r:e===t?0:e<t?-1:1},n.sortNumber=function(e,t){var r=n.handleNulls(e,t);return null!==r?r:e-t},n.sortNumberStr=function(e,t){var r=n.handleNulls(e,t);if(null!==r)return r;var i,o,a=!1,s=!1;return i=parseFloat(e.replace(/[^0-9.-]/g,"")),isNaN(i)&&(a=!0),o=parseFloat(t.replace(/[^0-9.-]/g,"")),isNaN(o)&&(s=!0),a&&s?0:a?1:s?-1:i-o},n.sortAlpha=function(e,t){var r=n.handleNulls(e,t);if(null!==r)return r;var i=e.toString().toLowerCase(),o=t.toString().toLowerCase();return i===o?0:i.localeCompare(o)},n.sortDate=function(e,t){var r=n.handleNulls(e,t);if(null!==r)return r;e instanceof Date||(e=new Date(e)),t instanceof Date||(t=new Date(t));var i=e.getTime(),o=t.getTime();return i===o?0:i<o?-1:1},n.sortBool=function(e,t){var r=n.handleNulls(e,t);return null!==r?r:e&&t?0:e||t?e?1:-1:0},n.getSortFn=function(e,t,r){var i;return n.colSortFnCache[t.colDef.name]?i=n.colSortFnCache[t.colDef.name]:void 0!==t.sortingAlgorithm?(i=t.sortingAlgorithm,n.colSortFnCache[t.colDef.name]=t.sortingAlgorithm):t.sortCellFiltered&&t.cellFilter?(i=n.sortAlpha,n.colSortFnCache[t.colDef.name]=i):(i=n.guessSortFn(t.colDef.type),i?n.colSortFnCache[t.colDef.name]=i:i=n.sortAlpha),i},n.prioritySort=function(e,t){return void 0!==e.sort.priority&&void 0!==t.sort.priority?e.sort.priority<t.sort.priority?-1:e.sort.priority===t.sort.priority?0:1:void 0!==e.sort.priority?-1:void 0!==t.sort.priority?1:0},n.sort=function(e,r,i){if(r){if(e.options.useExternalSorting)return r;var o=[],a=[];if(i.forEach(function(e){!e.sort||e.sort.ignoreSort||!e.sort.direction||e.sort.direction!==t.ASC&&e.sort.direction!==t.DESC?e.defaultSort&&e.defaultSort.direction&&(e.defaultSort.direction===t.ASC||e.defaultSort.direction===t.DESC)&&a.push({col:e,sort:e.defaultSort}):o.push({col:e,sort:e.sort})}),o=o.sort(n.prioritySort),a=a.sort(n.prioritySort),o=o.concat(a),0===o.length)return r;var s,l,u=function(e,t){e.entity.$$uiGridIndex=t};r.forEach(u);var c=r.slice(0),p=function(r,i){for(var a,u=0,p=0;0===u&&p<o.length;){s=o[p].col,l=o[p].sort.direction,a=n.getSortFn(e,s,c);var d,f;s.sortCellFiltered?(d=e.getCellDisplayValue(r,s),f=e.getCellDisplayValue(i,s)):(d=e.getCellValue(r,s),f=e.getCellValue(i,s)),u=a(d,f,r,i,l,s),p++}return 0===u?r.entity.$$uiGridIndex-i.entity.$$uiGridIndex:l===t.ASC?u:0-u},d=r.sort(p),f=function(e,t){delete e.entity.$$uiGridIndex};return r.forEach(f),d}},n}])}(),function(){function e(e){var t=e;return void 0!==t.length&&t.length&&(t=e[0]),t.ownerDocument.defaultView.getComputedStyle(t,null)}function t(e,t,r,n,i){for(var o=r===(n?"border":"content")?4:"width"===t?1:0,a=0,s=["Top","Right","Bottom","Left"];o<4;o+=2){var l=s[o];if("margin"===r){var u=parseFloat(i[r+l]);isNaN(u)||(a+=u)}if(n){if("content"===r){var c=parseFloat(i["padding"+l]);isNaN(c)||(a-=c)}if("margin"!==r){var p=parseFloat(i["border"+l+"Width"]);isNaN(p)||(a-=p)}}else{var d=parseFloat(i["padding"+l]);if(isNaN(d)||(a+=d),"padding"!==r){var f=parseFloat(i["border"+l+"Width"]);isNaN(f)||(a+=f)}}}return a}function r(r,n,i){var o,s=!0,l=e(r),u="border-box"===l.boxSizing;if(o<=0||null==o){if(o=l[n],(o<0||null==o)&&(o=r.style[n]),a.test(o))return o;s=u&&!0,o=parseFloat(o)||0}return o+t(r,n,i||(u?"border":"content"),s,l)}function n(t){t=angular.element(t)[0];var r=t.parentElement;return r||(r=document.getElementsByTagName("body")[0]),parseInt(e(r).fontSize)||parseInt(e(t).fontSize)||16}var i,o=angular.module("ui.grid");"function"!=typeof Function.prototype.bind&&(i=function(){var e=Array.prototype.slice;return function(t){var r=this,n=e.call(arguments,1);return n.length?function(){return arguments.length?r.apply(t,n.concat(e.call(arguments))):r.apply(t,n)}:function(){return arguments.length?r.apply(t,arguments):r.call(t)}}});var a=new RegExp("^("+/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source+")(?!px)[a-z%]+$","i"),s=/^(block|none|table(?!-c[ea]).+)/,l={position:"absolute",visibility:"hidden",display:"block"},u=["0","0","0","0"];o.service("gridUtil",["$log","$window","$document","$http","$templateCache","$timeout","$interval","$injector","$q","$interpolate","uiGridConstants",function(o,a,c,p,d,f,h,g,v,m,y){function b(e,t){var r=angular.element(this),n=0,i=0,o=0,a=0;if(t.originalEvent&&(t=t.originalEvent),"detail"in t&&(o=-1*t.detail),"wheelDelta"in t&&(o=t.wheelDelta),"wheelDeltaY"in t&&(o=t.wheelDeltaY),"wheelDeltaX"in t&&(i=-1*t.wheelDeltaX),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(i=-1*o,o=0),n=0===o?i:o,"deltaY"in t&&(o=-1*t.deltaY,n=o),"deltaX"in t&&(i=t.deltaX,0===o&&(n=-1*i)),0!==o||0!==i){if(1===t.deltaMode){var s=r.data("mousewheel-line-height");n*=s,o*=s,i*=s}else if(2===t.deltaMode){var l=r.data("mousewheel-page-height");n*=l,o*=l,i*=l}a=Math.max(Math.abs(o),Math.abs(i)),(!w||a<w)&&(w=a,x(t,a)&&(w/=40)),n=Math[n>=1?"floor":"ceil"](n/w),i=Math[i>=1?"floor":"ceil"](i/w),o=Math[o>=1?"floor":"ceil"](o/w);var u={originalEvent:t,deltaX:i,deltaY:o,deltaFactor:w,preventDefault:function(){t.preventDefault()},stopPropagation:function(){t.stopPropagation()}};C&&clearTimeout(C),C=setTimeout(E,200),e.call(r[0],u)}}function E(){w=null}function x(e,t){return"mousewheel"===e.type&&t%120==0}var S={augmentWidthOrHeight:t,getStyles:e,createBoundedWrapper:function(e,t){return function(){return t.apply(e,arguments)}},readableColumnName:function(e){return void 0===e||void 0===e||null===e?e:("string"!=typeof e&&(e=String(e)),e.replace(/_+/g," ").replace(/^[A-Z]+$/,function(e){return angular.lowercase(angular.uppercase(e.charAt(0))+e.slice(1))}).replace(/([\w\u00C0-\u017F]+)/g,function(e){return angular.uppercase(e.charAt(0))+e.slice(1)}).replace(/(\w+?(?=[A-Z]))/g,"$1 "))},getColumnsFromData:function(e,t){var r=[];if(!e||void 0===e[0]||void 0===e[0])return[];angular.isUndefined(t)&&(t=[]);var n=e[0];return angular.forEach(n,function(e,n){-1===t.indexOf(n)&&r.push({name:n})}),r},newId:function(){var e=(new Date).getTime();return function(){return e+=1}}(),getTemplate:function(e){if(d.get(e))return S.postProcessTemplate(d.get(e));if(angular.isFunction(e.then))return e.then(S.postProcessTemplate).catch(angular.noop);try{if(angular.element(e).length>0)return v.when(e).then(S.postProcessTemplate).catch(angular.noop)}catch(e){}return S.logDebug("fetching url",e),p({method:"GET",url:e}).then(function(t){var r=t.data.trim();return d.put(e,r),r},function(t){throw new Error("Could not get template "+e+": "+t)}).then(S.postProcessTemplate).catch(angular.noop)},postProcessTemplate:function(e){var t=m.startSymbol(),r=m.endSymbol();return"{{"===t&&"}}"===r||(e=e.replace(/\{\{/g,t),e=e.replace(/\}\}/g,r)),v.when(e)},guessType:function(e){var t=typeof e;switch(t){case"number":case"boolean":case"string":return t;default:return angular.isDate(e)?"date":"object"}},elementWidth:function(e){},elementHeight:function(e){},getScrollbarWidth:function(){var e=document.createElement("div");e.style.visibility="hidden",e.style.width="100px",e.style.msOverflowStyle="scrollbar",document.body.appendChild(e);var t=e.offsetWidth;e.style.overflow="scroll";var r=document.createElement("div");r.style.width="100%",e.appendChild(r);var n=r.offsetWidth;return e.parentNode.removeChild(e),t-n},swap:function(e,t,r,n){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=r.apply(e,n||[]);for(o in t)e.style[o]=a[o];return i},fakeElement:function(e,t,r,n){var i,o,a=angular.element(e).clone()[0];for(o in t)a.style[o]=t[o];return angular.element(document.body).append(a),i=r.call(a,a),angular.element(a).remove(),i},normalizeWheelEvent:function(e){var t,r,n,i=e||window.event,o=([].slice.call(arguments,1),0),a=0,s=0,l=0,u=0;return i.originalEvent&&(i=i.originalEvent),i.wheelDelta&&(o=i.wheelDelta),i.detail&&(o=-1*i.detail),s=o,void 0!==i.axis&&i.axis===i.HORIZONTAL_AXIS&&(s=0,a=-1*o),i.deltaY&&(s=-1*i.deltaY,o=s),i.deltaX&&(a=i.deltaX,o=-1*a),void 0!==i.wheelDeltaY&&(s=i.wheelDeltaY),void 0!==i.wheelDeltaX&&(a=i.wheelDeltaX),l=Math.abs(o),(!t||l<t)&&(t=l),u=Math.max(Math.abs(s),Math.abs(a)),(!r||u<r)&&(r=u),n=o>0?"floor":"ceil",o=Math[n](o/t),a=Math[n](a/r),s=Math[n](s/r),{delta:o,deltaX:a,deltaY:s}},isTouchEnabled:function(){var e;return("ontouchstart"in a||a.DocumentTouch&&c instanceof DocumentTouch)&&(e=!0),e},isNullOrUndefined:function(e){return void 0===e||null===e},endsWith:function(e,t){return!(!e||!t||"string"!=typeof e)&&-1!==e.indexOf(t,e.length-t.length)},arrayContainsObjectWithProperty:function(e,t,r){var n=!1;return angular.forEach(e,function(e){e[t]===r&&(n=!0)}),n},numericAndNullSort:function(e,t){return null===e?1:null===t?-1:null===e&&null===t?0:e-t},disableAnimations:function(e){var t;try{t=g.get("$animate"),angular.version.major>1||1===angular.version.major&&angular.version.minor>=4?t.enabled(e,!1):t.enabled(!1,e)}catch(e){}},enableAnimations:function(e){var t;try{return t=g.get("$animate"),angular.version.major>1||1===angular.version.major&&angular.version.minor>=4?t.enabled(e,!0):t.enabled(!0,e),t}catch(e){}},nextUid:function(){for(var e,t=u.length;t;){if(t--,57===(e=u[t].charCodeAt(0)))return u[t]="A","uiGrid-"+u.join("");if(90!==e)return u[t]=String.fromCharCode(e+1),"uiGrid-"+u.join("");u[t]="0"}return u.unshift("0"),"uiGrid-"+u.join("")},hashKey:function(e){var t,r=typeof e;return"object"===r&&null!==e?"function"==typeof(t=e.$$hashKey)?t=e.$$hashKey():void 0!==e.$$hashKey&&e.$$hashKey?t=e.$$hashKey:void 0===t&&(t=e.$$hashKey=S.nextUid()):t=e,r+":"+t},resetUids:function(){u=["0","0","0"]},logError:function(e){y.LOG_ERROR_MESSAGES&&o.error(e)},logWarn:function(e){y.LOG_WARN_MESSAGES&&o.warn(e)},logDebug:function(){y.LOG_DEBUG_MESSAGES&&o.debug.apply(o,arguments)}};S.focus={queue:[],byId:function(e,t){this._purgeQueue();var r=f(function(){var r=(t&&t.id?t.id+"-":"")+e,n=a.document.getElementById(r);n?n.focus():S.logWarn("[focus.byId] Element id "+r+" was not found.")},0,!1);return this.queue.push(r),r},byElement:function(e){if(!angular.isElement(e))return S.logWarn("Trying to focus on an element that isn't an element."),v.reject("not-element");e=angular.element(e),this._purgeQueue();var t=f(function(){e&&e[0].focus()},0,!1);return this.queue.push(t),t},bySelector:function(e,t,r){var n=this;if(!angular.isElement(e))throw new Error("The parent element is not an element.");e=angular.element(e);var i=function(){var r=e[0].querySelector(t);return n.byElement(r)};if(this._purgeQueue(),r){var o=f(i,0,!1);return this.queue.push(o),o}return i()},_purgeQueue:function(){this.queue.forEach(function(e){f.cancel(e)}),this.queue=[]}},["width","height"].forEach(function(t){var n=angular.uppercase(t.charAt(0))+t.substr(1);S["element"+n]=function(n,i){var o=n;if(o&&void 0!==o.length&&o.length&&(o=n[0]),o&&null!==o){var a=e(o);return 0===o.offsetWidth&&s.test(a.display)?S.swap(o,l,function(){return r(o,t,i)}):r(o,t,i)}return null},S["outerElement"+n]=function(e,t){return e?S["element"+n].call(this,e,t?"margin":"border"):null}}),S.closestElm=function(e,t){void 0!==e.length&&e.length&&(e=e[0]);var r;["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some(function(e){return"function"==typeof document.body[e]&&(r=e,!0)});for(var n;null!==e;){if(null!==(n=e.parentElement)&&n[r](t))return n;e=n}return null},S.type=function(e){return Function.prototype.toString.call(e.constructor).match(/function (.*?)\(/)[1]},S.getBorderSize=function(t,r){void 0!==t.length&&t.length&&(t=t[0]);var n=e(t);r=r?"border"+r.charAt(0).toUpperCase()+r.slice(1):"border",r+="Width";var i=parseInt(n[r],10);return isNaN(i)?0:i},S.detectBrowser=function(){var e=a.navigator.userAgent,t={chrome:/chrome/i,safari:/safari/i,firefox:/firefox/i,ie:/internet explorer|trident\//i};for(var r in t)if(t[r].test(e))return r;return"unknown"},S.rtlScrollType=function e(){if(e.type)return e.type;var t=angular.element('<div dir="rtl" style="font-size: 14px; width: 1px; height: 1px; position: absolute; top: -1000px; overflow: scroll">A</div>')[0],r="reverse";return document.body.appendChild(t),t.scrollLeft>0?r="default":(t.scrollLeft=1,0===t.scrollLeft&&(r="negative")),angular.element(t).remove(),e.type=r,r},S.normalizeScrollLeft=function(e,t){void 0!==e.length&&e.length&&(e=e[0]);var r=e.scrollLeft;if(t.isRTL())switch(S.rtlScrollType()){case"default":return e.scrollWidth-r-e.clientWidth;case"negative":return Math.abs(r);case"reverse":return r}return r},S.denormalizeScrollLeft=function(e,t,r){if(void 0!==e.length&&e.length&&(e=e[0]),r.isRTL())switch(S.rtlScrollType()){case"default":return e.scrollWidth-e.clientWidth-t;case"negative":return-1*t;case"reverse":return t}return t},S.preEval=function(e){var t=y.BRACKET_REGEXP.exec(e);if(t)return(t[1]?S.preEval(t[1]):t[1])+t[2]+(t[3]?S.preEval(t[3]):t[3]);e=e.replace(y.APOS_REGEXP,"\\'");var r=e.split(y.DOT_REGEXP),n=[r.shift()];return angular.forEach(r,function(e){n.push(e.replace(y.FUNC_REGEXP,"']$1"))}),n.join("['")},S.debounce=function(e,t,r){function n(){a=this,o=arguments;var n=function(){i=null,r||(s=e.apply(a,o))},l=r&&!i;return i&&f.cancel(i),i=f(n,t,!1),l&&(s=e.apply(a,o)),s}var i,o,a,s;return n.cancel=function(){f.cancel(i),i=null},n},S.throttle=function(e,t,r){function n(t){a=+new Date,e.apply(i,o),h(function(){s=null},0,1,!1)}r=r||{};var i,o,a=0,s=null;return function(){if(i=this,o=arguments,null===s){var e=+new Date-a;e>t?n():r.trailing&&(s=h(n,t-e,1,!1))}}},S.on={},S.off={},S._events={},S.addOff=function(e){S.off[e]=function(t,r){var n=S._events[e].indexOf(r);n>0&&S._events[e].removeAt(n)}};var C,w,T="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"];return S.on.mousewheel=function(e,t){if(e&&t){var r=angular.element(e);r.data("mousewheel-line-height",n(r)),r.data("mousewheel-page-height",S.elementHeight(r)),r.data("mousewheel-callbacks")||r.data("mousewheel-callbacks",{});var o=r.data("mousewheel-callbacks");o[t]=(Function.prototype.bind||i).call(b,r[0],t);for(var a=T.length;a;)r.on(T[--a],o[t]);r.on("$destroy",function(){for(var e=T.length;e;)r.off(T[--e],o[t])})}},S.off.mousewheel=function(e,t){var r=angular.element(e),n=r.data("mousewheel-callbacks"),i=n[t];if(i)for(var o=T.length;o;)r.off(T[--o],i);delete n[t],0===Object.keys(n).length&&(r.removeData("mousewheel-line-height"),r.removeData("mousewheel-page-height"),r.removeData("mousewheel-callbacks"))},S}]),o.filter("px",function(){return function(e){return e.match(/^[\d\.]+$/)?e+"px":e}})}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("bg",{headerCell:{aria:{defaultFilterLabel:"  ",removeFilter:" ",columnMenuButtonLabel:"  "},priority:":",filterLabel:"  : "},aggregate:{label:""},search:{placeholder:"...",showingItems:" :",selectedItems:" :",totalItems:":",size:"  :",first:" ",next:" ",previous:" ",last:" "},menu:{text:" :"},sort:{ascending:"   ",descending:"   ",none:" ",remove:" "},column:{hide:" "},aggregation:{count:" : ",sum:": ",avg:": ",min:"-: ",max:"-: "},pinning:{pinLeft:" ",pinRight:" ",unpin:""},columnMenu:{close:""},gridMenu:{aria:{buttonLabel:"  "},columns:":",importerTitle:"  ",exporterAllAsCsv:"    csv",exporterVisibleAsCsv:"     csv",exporterSelectedAsCsv:"     csv",exporterAllAsPdf:"    pdf",exporterVisibleAsPdf:"     pdf",exporterSelectedAsPdf:"     pdf",clearAllFilters:"  "},importer:{noHeaders:"       ,    ?",noObjects:"     ,    ,   ?",invalidCsv:"     ,  ,    CSV ",invalidJson:"     ,  ,    JSON ",jsonNotArray:" JSON     , ."},pagination:{aria:{pageToFirst:"  ",pageBack:" ",pageSelected:" ",pageForward:" ",pageToLast:"  "},sizes:"  ",totalItems:"",through:"",of:""},grouping:{group:"",ungroup:"  ",aggregate_count:": ",aggregate_sum:": ",aggregate_max:": ",aggregate_min:": ",aggregate_avg:": ",aggregate_remove:": "},validate:{error:":",minLength:"     THRESHOLD .",maxLength:"       THRESHOLD .",required:"  ."}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){var t={aggregate:{label:"poloky"},groupPanel:{description:"Pesute zhlav zde pro vytvoen skupiny dle sloupce."},search:{placeholder:"Hledat...",showingItems:"Zobrazuji poloky:",selectedItems:"Vybran poloky:",totalItems:"Celkem poloek:",size:"Velikost strany:",first:"Prvn strana",next:"Dal strana",previous:"Pedchoz strana",last:"Posledn strana"},menu:{text:"Vyberte sloupec:"},sort:{ascending:"Seadit od A-Z",descending:"Seadit od Z-A",remove:"Odebrat seazen"},column:{hide:"Schovat sloupec"},aggregation:{count:"celkem dk: ",sum:"celkem: ",avg:"avg: ",min:"min.: ",max:"max.: "},pinning:{pinLeft:"Zamknout vlevo",pinRight:"Zamknout vpravo",unpin:"Odemknout"},gridMenu:{columns:"Sloupce:",importerTitle:"Importovat soubor",exporterAllAsCsv:"Exportovat vechna data do csv",exporterVisibleAsCsv:"Exportovat viditeln data do csv",exporterSelectedAsCsv:"Exportovat vybran data do csv",exporterAllAsPdf:"Exportovat vechna data do pdf",exporterVisibleAsPdf:"Exportovat viditeln data do pdf",exporterSelectedAsPdf:"Exportovat vybran data do pdf",clearAllFilters:"Odstranit vechny filtry"},importer:{noHeaders:"Nzvy sloupc se nepodailo zskat, obsahuje soubor zhlav?",noObjects:"Data se nepodailo zpracovat, obsahuje soubor dky mimo zhlav?",invalidCsv:"Soubor nelze zpracovat, jedn se o CSV?",invalidJson:"Soubor nelze zpracovat, je to JSON?",jsonNotArray:"Soubor mus obsahovat json. Ukonuji.."},pagination:{sizes:"poloek na strnku",totalItems:"poloek"},grouping:{group:"Seskupit",ungroup:"Odebrat seskupen",aggregate_count:"Agregace: Count",aggregate_sum:"Agregace: Sum",aggregate_max:"Agregace: Max",aggregate_min:"Agregace: Min",aggregate_avg:"Agregace: Avg",aggregate_remove:"Agregace: Odebrat"}};return e.add("cs",t),e.add("cz",t),e.add("cs-cz",t),e.add("cs-CZ",t),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("da",{aggregate:{label:"artikler"},groupPanel:{description:"Grupr rkker udfra en kolonne ved at trkke dens overskift hertil."},search:{placeholder:"Sg...",showingItems:"Viste rkker:",selectedItems:"Valgte rkker:",totalItems:"Rkker totalt:",size:"Side strrelse:",first:"Frste side",next:"Nste side",previous:"Forrige side",last:"Sidste side"},menu:{text:"Vlg kolonner:"},sort:{ascending:"Sorter stigende",descending:"Sorter faldende",none:"Sorter ingen",remove:"Fjern sortering"},column:{hide:"Skjul kolonne"},aggregation:{count:"antal rkker: ",sum:"sum: ",avg:"gns: ",min:"min: ",max:"max: "},gridMenu:{columns:"Kolonner:",importerTitle:"Importer fil",exporterAllAsCsv:"Eksporter alle data som csv",exporterVisibleAsCsv:"Eksporter synlige data som csv",exporterSelectedAsCsv:"Eksporter markerede data som csv",exporterAllAsPdf:"Eksporter alle data som pdf",exporterVisibleAsPdf:"Eksporter synlige data som pdf",exporterSelectedAsPdf:"Eksporter markerede data som pdf",clearAllFilters:"Clear all filters"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."},pagination:{aria:{pageToFirst:"G til frste",pageBack:"G tilbage",pageSelected:"Valgte side",pageForward:"G frem",pageToLast:"G til sidste"},sizes:"genstande per side",totalItems:"genstande",through:"gennem",of:"af"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("de",{headerCell:{aria:{defaultFilterLabel:"Filter fr Spalte",removeFilter:"Filter lschen",columnMenuButtonLabel:"Spaltenmen"},priority:"Prioritt:",filterLabel:"Filter fr Spalte: "},aggregate:{label:"Eintrag"},groupPanel:{description:"Ziehen Sie eine Spaltenberschrift hierhin, um nach dieser Spalte zu gruppieren."},search:{aria:{selected:"Zeile markiert",notSelected:"Zeile nicht markiert"},placeholder:"Suche...",showingItems:"Zeige Eintrge:",selectedItems:"Ausgewhlte Eintrge:",totalItems:"Eintrge gesamt:",size:"Eintrge pro Seite:",first:"Erste Seite",next:"Nchste Seite",previous:"Vorherige Seite",last:"Letzte Seite"},menu:{text:"Spalten auswhlen:"},sort:{ascending:"aufsteigend sortieren",descending:"absteigend sortieren",none:"keine Sortierung",remove:"Sortierung zurcksetzen"},column:{hide:"Spalte ausblenden"},aggregation:{count:"Zeilen insgesamt: ",sum:"gesamt: ",avg:"Durchschnitt: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Links anheften",pinRight:"Rechts anheften",unpin:"Lsen"},columnMenu:{close:"Schlieen"},gridMenu:{aria:{buttonLabel:"Tabellenmen"},columns:"Spalten:",importerTitle:"Datei importieren",exporterAllAsCsv:"Alle Daten als CSV exportieren",exporterVisibleAsCsv:"sichtbare Daten als CSV exportieren",exporterSelectedAsCsv:"markierte Daten als CSV exportieren",exporterAllAsPdf:"Alle Daten als PDF exportieren",exporterVisibleAsPdf:"sichtbare Daten als PDF exportieren",exporterSelectedAsPdf:"markierte Daten als PDF exportieren",clearAllFilters:"Alle Filter zurcksetzen"},importer:{noHeaders:"Es konnten keine Spaltennamen ermittelt werden. Sind in der Datei Spaltendefinitionen enthalten?",noObjects:"Es konnten keine Zeileninformationen gelesen werden, Sind in der Datei auer den Spaltendefinitionen auch Daten enthalten?",invalidCsv:"Die Datei konnte nicht eingelesen werden, ist es eine gltige CSV-Datei?",invalidJson:"Die Datei konnte nicht eingelesen werden. Enthlt sie gltiges JSON?",jsonNotArray:"Die importierte JSON-Datei mu ein Array enthalten. Breche Import ab."},pagination:{aria:{pageToFirst:"Zum Anfang",pageBack:"Seite zurck",pageSelected:"Ausgwhlte Seite",pageForward:"Seite vor",pageToLast:"Zum Ende"},sizes:"Eintrge pro Seite",totalItems:"Eintrgen",through:"bis",of:"von"},grouping:{group:"Gruppieren",ungroup:"Gruppierung aufheben",aggregate_count:"Agg: Anzahl",aggregate_sum:"Agg: Summe",aggregate_max:"Agg: Maximum",aggregate_min:"Agg: Minimum",aggregate_avg:"Agg: Mittelwert",aggregate_remove:"Aggregation entfernen"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("en",{headerCell:{aria:{defaultFilterLabel:"Filter for column",removeFilter:"Remove Filter",columnMenuButtonLabel:"Column Menu"},priority:"Priority:",filterLabel:"Filter for column: "},aggregate:{label:"items"},groupPanel:{description:"Drag a column header here and drop it to group by that column."},search:{aria:{selected:"Row selected",notSelected:"Row not selected"},placeholder:"Search...",showingItems:"Showing Items:",selectedItems:"Selected Items:",totalItems:"Total Items:",size:"Page Size:",first:"First Page",next:"Next Page",previous:"Previous Page",last:"Last Page"},menu:{text:"Choose Columns:"},sort:{ascending:"Sort Ascending",descending:"Sort Descending",none:"Sort None",remove:"Remove Sort"},column:{hide:"Hide Column"},aggregation:{count:"total rows: ",sum:"total: ",avg:"avg: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Pin Left",pinRight:"Pin Right",unpin:"Unpin"},columnMenu:{close:"Close"},gridMenu:{aria:{buttonLabel:"Grid Menu"},columns:"Columns:",importerTitle:"Import file",exporterAllAsCsv:"Export all data as csv",exporterVisibleAsCsv:"Export visible data as csv",exporterSelectedAsCsv:"Export selected data as csv",exporterAllAsPdf:"Export all data as pdf",exporterVisibleAsPdf:"Export visible data as pdf",exporterSelectedAsPdf:"Export selected data as pdf",clearAllFilters:"Clear all filters"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."},pagination:{aria:{pageToFirst:"Page to first",pageBack:"Page back",pageSelected:"Selected page",pageForward:"Page forward",pageToLast:"Page to last"},sizes:"items per page",totalItems:"items",through:"through",of:"of"},grouping:{group:"Group",ungroup:"Ungroup",aggregate_count:"Agg: Count",aggregate_sum:"Agg: Sum",aggregate_max:"Agg: Max",aggregate_min:"Agg: Min",aggregate_avg:"Agg: Avg",aggregate_remove:"Agg: Remove"},validate:{error:"Error:",minLength:"Value should be at least THRESHOLD characters long.",maxLength:"Value should be at most THRESHOLD characters long.",required:"A value is needed."}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("es",{aggregate:{label:"Artculos"},groupPanel:{description:"Arrastre un encabezado de columna aqu y sultelo para agrupar por esa columna."},search:{placeholder:"Buscar...",showingItems:"Artculos Mostrados:",selectedItems:"Artculos Seleccionados:",totalItems:"Artculos Totales:",size:"Tamao de Pgina:",first:"Primera Pgina",next:"Pgina Siguiente",previous:"Pgina Anterior",last:"ltima Pgina"},menu:{text:"Elegir columnas:"},sort:{ascending:"Orden Ascendente",descending:"Orden Descendente",remove:"Sin Ordenar"},column:{hide:"Ocultar la columna"},aggregation:{count:"filas totales: ",sum:"total: ",avg:"media: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Fijar a la Izquierda",pinRight:"Fijar a la Derecha",unpin:"Quitar Fijacin"},gridMenu:{columns:"Columnas:",importerTitle:"Importar archivo",exporterAllAsCsv:"Exportar todo como csv",exporterVisibleAsCsv:"Exportar vista como csv",exporterSelectedAsCsv:"Exportar seleccin como csv",exporterAllAsPdf:"Exportar todo como pdf",exporterVisibleAsPdf:"Exportar vista como pdf",exporterSelectedAsPdf:"Exportar seleccin como pdf",clearAllFilters:"Limpiar todos los filtros"},importer:{noHeaders:"No fue posible derivar los nombres de las columnas, tiene encabezados el archivo?",noObjects:"No fue posible obtener registros, contiene datos el archivo, aparte de los encabezados?",invalidCsv:"No fue posible procesar el archivo, es un CSV vlido?",invalidJson:"No fue posible procesar el archivo, es un Json vlido?",jsonNotArray:"El archivo json importado debe contener un array, abortando."},pagination:{sizes:"registros por pgina",totalItems:"registros",of:"de"},grouping:{group:"Agrupar",ungroup:"Desagrupar",aggregate_count:"Agr: Cont",aggregate_sum:"Agr: Sum",aggregate_max:"Agr: Mx",aggregate_min:"Agr: Min",aggregate_avg:"Agr: Prom",aggregate_remove:"Agr: Quitar"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("fa",{aggregate:{label:""},groupPanel:{description:"            ."},search:{placeholder:"...",showingItems:" :",selectedItems:"  :",totalItems:" :",size:" :",first:" ",next:"",previous:" ",last:" "},menu:{text:" :"},sort:{ascending:" ",descending:" ",remove:"  "},column:{hide:" "},aggregation:{count:": ",sum:": ",avg:": ",min:": ",max:": "},pinning:{pinLeft:"   ",pinRight:"   ",unpin:" "},gridMenu:{columns:":",importerTitle:"  ",exporterAllAsCsv:"     csv",exporterVisibleAsCsv:"      csv",exporterSelectedAsCsv:"     csv",exporterAllAsPdf:"     pdf",exporterVisibleAsPdf:"      pdf",exporterSelectedAsPdf:"     pdf",clearAllFilters:"   "},importer:{noHeaders:"    .    ",noObjects:"   .         ",invalidCsv:"   .    csv   ",invalidJson:"   .   json    ",jsonNotArray:" json      .   ."},pagination:{sizes:"   ",totalItems:"",of:""},grouping:{group:"",ungroup:" ",aggregate_count:"Agg: ",aggregate_sum:"Agg: ",aggregate_max:"Agg: ",aggregate_min:"Agg: ",aggregate_avg:"Agg: ",aggregate_remove:"Agg: "}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("fi",{aggregate:{label:"rivit"},groupPanel:{description:"Raahaa ja pudota otsikko thn ryhmittksesi sarakkeen mukaan."},search:{placeholder:"Hae...",showingItems:"Nytetn rivej:",selectedItems:"Valitut rivit:",totalItems:"Rivej yht.:",size:"Nyt:",first:"Ensimminen sivu",next:"Seuraava sivu",previous:"Edellinen sivu",last:"Viimeinen sivu"},menu:{text:"Valitse sarakkeet:"},sort:{ascending:"Jrjest nouseva",descending:"Jrjest laskeva",remove:"Poista jrjestys"},column:{hide:"Piilota sarake"},aggregation:{count:"Rivej yht.: ",sum:"Summa: ",avg:"K.a.: ",min:"Min: ",max:"Max: "},pinning:{pinLeft:"Lukitse vasemmalle",pinRight:"Lukitse oikealle",unpin:"Poista lukitus"},gridMenu:{columns:"Sarakkeet:",importerTitle:"Tuo tiedosto",exporterAllAsCsv:"Vie tiedot csv-muodossa",exporterVisibleAsCsv:"Vie nkyv tieto csv-muodossa",exporterSelectedAsCsv:"Vie valittu tieto csv-muodossa",exporterAllAsPdf:"Vie tiedot pdf-muodossa",exporterVisibleAsPdf:"Vie nkyv tieto pdf-muodossa",exporterSelectedAsPdf:"Vie valittu tieto pdf-muodossa",clearAllFilters:"Puhdista kaikki suodattimet"},importer:{noHeaders:"Sarakkeen nimi ei voitu ptell, onko tiedostossa otsikkorivi?",noObjects:"Tietoja ei voitu lukea, onko tiedostossa muuta kuin otsikkot?",invalidCsv:"Tiedostoa ei voitu ksitell, oliko se CSV-muodossa?",invalidJson:"Tiedostoa ei voitu ksitell, oliko se JSON-muodossa?",jsonNotArray:"Tiedosto ei sisltnyt taulukkoa, lopetetaan."}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("fr",{headerCell:{aria:{defaultFilterLabel:"Filtre de la colonne",removeFilter:"Supprimer le filtre",columnMenuButtonLabel:"Menu de la colonne"},priority:"Priorit:",filterLabel:"Filtre de la colonne: "},aggregate:{label:"lments"},groupPanel:{description:"Faites glisser une en-tte de colonne ici pour crer un groupe de colonnes."},search:{placeholder:"Recherche...",showingItems:"Affichage des lments :",selectedItems:"lments slectionns :",totalItems:"Nombre total d'lments:",size:"Taille de page:",first:"Premire page",next:"Page Suivante",previous:"Page prcdente",last:"Dernire page"},menu:{text:"Choisir des colonnes :"},sort:{ascending:"Trier par ordre croissant",descending:"Trier par ordre dcroissant",none:"Aucun tri",remove:"Enlever le tri"},column:{hide:"Cacher la colonne"},aggregation:{count:"lignes totales: ",sum:"total: ",avg:"moy: ",min:"min: ",max:"max: "},pinning:{pinLeft:"pingler  gauche",pinRight:"pingler  droite",unpin:"Dtacher"},columnMenu:{close:"Fermer"},gridMenu:{aria:{buttonLabel:"Menu du tableau"},columns:"Colonnes:",importerTitle:"Importer un fichier",exporterAllAsCsv:"Exporter toutes les donnes en CSV",exporterVisibleAsCsv:"Exporter les donnes visibles en CSV",exporterSelectedAsCsv:"Exporter les donnes slectionnes en CSV",exporterAllAsPdf:"Exporter toutes les donnes en PDF",exporterVisibleAsPdf:"Exporter les donnes visibles en PDF",exporterSelectedAsPdf:"Exporter les donnes slectionnes en PDF",clearAllFilters:"Nettoyez tous les filtres"},importer:{noHeaders:"Impossible de dterminer le nom des colonnes, le fichier possde-t-il une en-tte ?",noObjects:"Aucun objet trouv, le fichier possde-t-il des donnes autres que l'en-tte ?",invalidCsv:"Le fichier n'a pas pu tre trait, le CSV est-il valide ?",invalidJson:"Le fichier n'a pas pu tre trait, le JSON est-il valide ?",jsonNotArray:"Le fichier JSON import doit contenir un tableau, abandon."},pagination:{aria:{pageToFirst:"Aller  la premire page",pageBack:"Page prcdente",pageSelected:"Page slectionne",pageForward:"Page suivante",pageToLast:"Aller  la dernire page"},sizes:"lments par page",totalItems:"lments",through:"",of:"sur"},grouping:{group:"Grouper",ungroup:"Dgrouper",aggregate_count:"Agg: Compter",aggregate_sum:"Agg: Somme",aggregate_max:"Agg: Max",aggregate_min:"Agg: Min",aggregate_avg:"Agg: Moy",aggregate_remove:"Agg: Retirer"},validate:{error:"Erreur:",minLength:"La valeur doit tre suprieure ou gale  THRESHOLD caractres.",maxLength:"La valeur doit tre infrieure ou gale  THRESHOLD caractres.",required:"Une valeur est ncssaire."}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("he",{aggregate:{label:"items"},groupPanel:{description:"       ."},search:{placeholder:"...",showingItems:":",selectedItems:'" :',totalItems:'" :',size:" :",first:" ",next:" ",previous:" ",last:" "},menu:{text:" :"},sort:{ascending:" ",descending:" ",remove:""},column:{hide:" "},aggregation:{count:"total rows: ",sum:"total: ",avg:"avg: ",min:"min: ",max:"max: "},gridMenu:{columns:"Columns:",importerTitle:"Import file",exporterAllAsCsv:"Export all data as csv",exporterVisibleAsCsv:"Export visible data as csv",exporterSelectedAsCsv:"Export selected data as csv",exporterAllAsPdf:"Export all data as pdf",exporterVisibleAsPdf:"Export visible data as pdf",exporterSelectedAsPdf:"Export selected data as pdf",clearAllFilters:"Clean all filters"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("hy",{aggregate:{label:""},groupPanel:{description:"        "},search:{placeholder:"...",showingItems:" ",selectedItems:":",totalItems:"",size:"  ",first:" ",next:" ",previous:" ",last:" "},menu:{text:" :"},sort:{ascending:" ",descending:" ",remove:" "},column:{hide:" "},aggregation:{count:"  ",sum:" ",avg:" ",min:" ",max:" "},pinning:{pinLeft:"  ",pinRight:"  ",unpin:""},gridMenu:{columns:":",importerTitle:" ",exporterAllAsCsv:"  CSV",exporterVisibleAsCsv:"   CSV",exporterSelectedAsCsv:"   CSV",exporterAllAsPdf:" PDF",exporterVisibleAsPdf:"   PDF",exporterSelectedAsPdf:"   PDF",clearAllFilters:"  "},importer:{noHeaders:"        ",noObjects:"       ",invalidCsv:"       CSV ",invalidJson:"       Json ",jsonNotArray:" json     ,  "}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("is",{headerCell:{aria:{defaultFilterLabel:"Sa fyrir dlk",removeFilter:"Fjarlgja su",columnMenuButtonLabel:"Dlkavalmynd"},priority:"Forgangsrun:",filterLabel:"Sa fyrir dlka: "},aggregate:{label:"hlutir"},groupPanel:{description:"Dragu dlkhaus hinga til a flokka saman eftir eim dlki."},search:{placeholder:"Leita...",showingItems:"Sni hluti:",selectedItems:"Valdir hlutir:",totalItems:"Hlutir alls:",size:"Str su:",first:"Fyrsta sa",next:"Nsta sa",previous:"Fyrri sa",last:"Sasta sa"},menu:{text:"Veldu dlka:"},sort:{ascending:"Raa hkkandi",descending:"Raa lkkandi",none:"Engin run",remove:"Fjarlgja run"},column:{hide:"Fela dlk"},aggregation:{count:"fjldi raa: ",sum:"summa: ",avg:"mealtal: ",min:"lgmark: ",max:"hmark: "},pinning:{pinLeft:"Festa til vinstri",pinRight:"Festa til hgri",unpin:"Losa"},columnMenu:{close:"Loka"},gridMenu:{aria:{buttonLabel:"Tflu valmynd"},columns:"Dlkar:",importerTitle:"Flytja inn skjal",exporterAllAsCsv:"Flytja t ggn sem csv",exporterVisibleAsCsv:"Flytja t snileg ggn sem csv",exporterSelectedAsCsv:"Flytja t valin ggn sem csv",exporterAllAsPdf:"Flytja t ll ggn sem pdf",exporterVisibleAsPdf:"Flytja t snileg ggn sem pdf",exporterSelectedAsPdf:"Flytja t valin ggn sem pdf",clearAllFilters:"Hreinsa allar sur"},importer:{noHeaders:"Ekki hgt a vinna dlkanfn r skjalinu, er skjali rugglega me haus?",noObjects:"Ekki hgt a vinna hluti r skjalinu, voru rugglega ggn  skjalinu nnur en hausinn?",invalidCsv:"Tkst ekki a vinna skjal, er a rggulega gilt CSV?",invalidJson:"Tkst ekki a vinna skjal, er a rugglega gilt Json?",jsonNotArray:"Innflutt json skjal verur a innihalda fylki, htti vi."},pagination:{aria:{pageToFirst:"Fletta a fyrstu",pageBack:"Fletta til baka",pageSelected:"Valin sa",pageForward:"Fletta fram",pageToLast:"Fletta a sustu"},sizes:"hlutir  su",totalItems:"hlutir",through:"gegnum",of:"af"},grouping:{group:"Flokka",ungroup:"Sundurlia",aggregate_count:"Fjldi: ",aggregate_sum:"Summa: ",aggregate_max:"Hmark: ",aggregate_min:"Lgmark: ",aggregate_avg:"Mealtal: ",aggregate_remove:"Fjarlgja: "},validate:{error:"Villa:",minLength:"Gildi tti a vera a.m.k. THRESHOLD stafa langt.",maxLength:"Gildi tti a vera  mesta lagi THRESHOLD stafa langt.",required:"arf a hafa gildi."}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("it",{aggregate:{label:"elementi"},groupPanel:{description:"Trascina un'intestazione all'interno del gruppo della colonna."},search:{placeholder:"Ricerca...",showingItems:"Mostra:",selectedItems:"Selezionati:",totalItems:"Totali:",size:"Tot Pagine:",first:"Prima",next:"Prossima",previous:"Precedente",last:"Ultima"},menu:{text:"Scegli le colonne:"},sort:{ascending:"Asc.",descending:"Desc.",remove:"Annulla ordinamento"},column:{hide:"Nascondi"},aggregation:{count:"righe totali: ",sum:"tot: ",avg:"media: ",min:"minimo: ",max:"massimo: "},pinning:{pinLeft:"Blocca a sx",pinRight:"Blocca a dx",unpin:"Blocca in alto"},gridMenu:{columns:"Colonne:",importerTitle:"Importa",exporterAllAsCsv:"Esporta tutti i dati in CSV",exporterVisibleAsCsv:"Esporta i dati visibili in CSV",exporterSelectedAsCsv:"Esporta i dati selezionati in CSV",exporterAllAsPdf:"Esporta tutti i dati in PDF",exporterVisibleAsPdf:"Esporta i dati visibili in PDF",exporterSelectedAsPdf:"Esporta i dati selezionati in PDF",clearAllFilters:"Pulire tutti i filtri"},importer:{noHeaders:"Impossibile reperire i nomi delle colonne, sicuro che siano indicati all'interno del file?",noObjects:"Impossibile reperire gli oggetti, sicuro che siano indicati all'interno del file?",invalidCsv:"Impossibile elaborare il file, sicuro che sia un CSV?",invalidJson:"Impossibile elaborare il file, sicuro che sia un JSON valido?",jsonNotArray:"Errore! Il file JSON da importare deve contenere un array."},pagination:{aria:{pageToFirst:"Prima",pageBack:"Indietro",pageSelected:"Pagina selezionata",pageForward:"Avanti",pageToLast:"Ultima"},sizes:"elementi per pagina",totalItems:"elementi",through:"a",of:"di"},grouping:{group:"Raggruppa",ungroup:"Separa",aggregate_count:"Agg: N. Elem.",aggregate_sum:"Agg: Somma",aggregate_max:"Agg: Massimo",aggregate_min:"Agg: Minimo",aggregate_avg:"Agg: Media",aggregate_remove:"Agg: Rimuovi"},validate:{error:"Errore:",minLength:"Lunghezza minima pari a THRESHOLD caratteri.",maxLength:"Lunghezza massima pari a THRESHOLD caratteri.",required:"Necessario inserire un valore."}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("ja",{headerCell:{aria:{defaultFilterLabel:"",removeFilter:"",columnMenuButtonLabel:""},priority:":",filterLabel:": "},aggregate:{label:""},groupPanel:{description:""},search:{placeholder:"...",showingItems:":",selectedItems:":",totalItems:":",size:":",first:"",next:"",previous:"",last:""},menu:{text:":"},sort:{ascending:"",descending:"",none:"",remove:""},column:{hide:""},aggregation:{count:": ",sum:": ",avg:": ",min:": ",max:": "},pinning:{pinLeft:"",pinRight:"",unpin:""},columnMenu:{close:""},gridMenu:{aria:{buttonLabel:""},columns:"/:",importerTitle:"",exporterAllAsCsv:"CSV",exporterVisibleAsCsv:"CSV",exporterSelectedAsCsv:"CSV",exporterAllAsPdf:"PDF",exporterVisibleAsPdf:"PDF",exporterSelectedAsPdf:"PDF",clearAllFilters:""},importer:{noHeaders:"",noObjects:"",invalidCsv:"CSV",invalidJson:"JSON",jsonNotArray:"JSON"},pagination:{aria:{pageToFirst:"",pageBack:"",pageSelected:"",pageForward:"",pageToLast:""},sizes:"/",totalItems:"",through:"",of:"/"},grouping:{group:"",ungroup:"",aggregate_count:": ",aggregate_sum:": ",aggregate_max:": ",aggregate_min:": ",aggregate_avg:": ",aggregate_remove:": "},validate:{error:"Error:",minLength:"THRESHOLD ",maxLength:"THRESHOLD ",required:""}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("ko",{aggregate:{label:""},groupPanel:{description:"       ."},search:{placeholder:"...",showingItems:" :",selectedItems:" :",totalItems:" :",size:" :",first:" ",next:" ",previous:" ",last:" "},menu:{text:" :"},sort:{ascending:" ",descending:" ",remove:" "},column:{hide:" "},aggregation:{count:" : ",sum:": ",avg:": ",min:": ",max:": "},pinning:{pinLeft:" ",pinRight:" ",unpin:" "},gridMenu:{columns:":",importerTitle:" ",exporterAllAsCsv:"csv   ",exporterVisibleAsCsv:"csv   ",exporterSelectedAsCsv:"csv   ",exporterAllAsPdf:"pdf   ",exporterVisibleAsPdf:"pdf   ",exporterSelectedAsPdf:"pdf   ",clearAllFilters:"  "},importer:{noHeaders:"   .      .",noObjects:"   .     .",invalidCsv:"   .  csv  .",invalidJson:"   .  json  .",jsonNotArray:"json    ."},pagination:{sizes:" ",totalItems:" "}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("nl",{aggregate:{label:"items"},groupPanel:{description:"Sleep hier een kolomnaam heen om op te groeperen."},search:{placeholder:"Zoeken...",showingItems:"Getoonde items:",selectedItems:"Geselecteerde items:",totalItems:"Totaal aantal items:",size:"Items per pagina:",first:"Eerste pagina",next:"Volgende pagina",previous:"Vorige pagina",last:"Laatste pagina"},menu:{text:"Kies kolommen:"},sort:{ascending:"Sorteer oplopend",descending:"Sorteer aflopend",remove:"Verwijder sortering"},column:{hide:"Verberg kolom"},aggregation:{count:"Aantal rijen: ",sum:"Som: ",avg:"Gemiddelde: ",min:"Min: ",max:"Max: "},pinning:{pinLeft:"Zet links vast",pinRight:"Zet rechts vast",unpin:"Maak los"},gridMenu:{columns:"Kolommen:",importerTitle:"Importeer bestand",exporterAllAsCsv:"Exporteer alle data als csv",exporterVisibleAsCsv:"Exporteer zichtbare data als csv",exporterSelectedAsCsv:"Exporteer geselecteerde data als csv",exporterAllAsPdf:"Exporteer alle data als pdf",exporterVisibleAsPdf:"Exporteer zichtbare data als pdf",exporterSelectedAsPdf:"Exporteer geselecteerde data als pdf",clearAllFilters:"Reinig alle filters"},importer:{noHeaders:"Kolomnamen kunnen niet worden afgeleid. Heeft het bestand een header?",noObjects:"Objecten kunnen niet worden afgeleid. Bevat het bestand data naast de headers?",invalidCsv:"Het bestand kan niet verwerkt worden. Is het een valide csv bestand?",invalidJson:"Het bestand kan niet verwerkt worden. Is het valide json?",jsonNotArray:"Het json bestand moet een array bevatten. De actie wordt geannuleerd."},pagination:{sizes:"items per pagina",totalItems:"items",of:"van de"},grouping:{group:"Groepeer",ungroup:"Groepering opheffen",aggregate_count:"Agg: Aantal",aggregate_sum:"Agg: Som",aggregate_max:"Agg: Max",aggregate_min:"Agg: Min",aggregate_avg:"Agg: Gem",aggregate_remove:"Agg: Verwijder"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("no",{headerCell:{aria:{defaultFilterLabel:"Filter for kolonne",removeFilter:"Fjern filter",columnMenuButtonLabel:"Kolonnemeny"},priority:"Prioritet:",filterLabel:"Filter for kolonne: "},aggregate:{label:"elementer"},groupPanel:{description:"Trekk en kolonneoverskrift hit og slipp den for  gruppere etter den kolonnen."},search:{placeholder:"Sk...",showingItems:"Viste elementer:",selectedItems:"Valgte elementer:",totalItems:"Antall elementer:",size:"Sidestrrelse:",first:"Frste side",next:"Neste side",previous:"Forrige side",last:"Siste side"},menu:{text:"Velg kolonner:"},sort:{ascending:"Sortere stigende",descending:"Sortere fallende",none:"Ingen sortering",remove:"Fjern sortering"},column:{hide:"Skjul kolonne"},aggregation:{count:"antall rader: ",sum:"total: ",avg:"gjennomsnitt: ",min:"minimum: ",max:"maksimum: "},pinning:{pinLeft:"Fest til venstre",pinRight:"Fest til hyre",unpin:"Lsne"},columnMenu:{close:"Lukk"},gridMenu:{aria:{buttonLabel:"Grid Menu"},columns:"Kolonner:",importerTitle:"Importer fil",exporterAllAsCsv:"Eksporter alle data som csv",exporterVisibleAsCsv:"Eksporter synlige data som csv",exporterSelectedAsCsv:"Eksporter utvalgte data som csv",exporterAllAsPdf:"Eksporter alle data som pdf",exporterVisibleAsPdf:"Eksporter synlige data som pdf",exporterSelectedAsPdf:"Eksporter utvalgte data som pdf",clearAllFilters:"Clear all filters"},importer:{noHeaders:"Kolonnenavn kunne ikke avledes. Har filen en overskrift?",noObjects:"Objekter kunne ikke avledes. Er der andre data i filen enn overskriften?",invalidCsv:"Filen kunne ikke behandles. Er den gyldig CSV?",invalidJson:"Filen kunne ikke behandles. Er den gyldig JSON?",jsonNotArray:"Importert JSON-fil m inneholde en liste. Avbryter."},pagination:{aria:{pageToFirst:"G til frste side",pageBack:"G til forrige side",pageSelected:"Valgte side",pageForward:"G til neste side",pageToLast:"G til siste side"},sizes:"elementer per side",totalItems:"elementer",through:"til",of:"av"},grouping:{group:"Gruppere",ungroup:"Fjerne gruppering",aggregate_count:"Agr: Antall",aggregate_sum:"Agr: Sum",aggregate_max:"Agr: Maksimum",aggregate_min:"Agr: Minimum",aggregate_avg:"Agr: Gjennomsnitt",aggregate_remove:"Agr: Fjern"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("pl",{headerCell:{aria:{defaultFilterLabel:"Filtr dla kolumny",removeFilter:"Usu filtr",columnMenuButtonLabel:"Menu kolumny"},priority:"Prioritet:",filterLabel:"Filtr dla kolumny: "},aggregate:{label:"pozycji"},groupPanel:{description:"Przecignij nagwek kolumny tutaj, aby pogrupowa wedug niej."},search:{aria:{selected:"Wiersz zaznaczony",notSelected:"Wiersz niezaznaczony"},placeholder:"Szukaj...",showingItems:"Widoczne pozycje:",selectedItems:"Zaznaczone pozycje:",totalItems:"Wszystkich pozycji:",size:"Rozmiar strony:",first:"Pierwsza strona",next:"Nastpna strona",previous:"Poprzednia strona",last:"Ostatnia strona"},menu:{text:"Wybierz kolumny:"},sort:{ascending:"Sortuj rosnco",descending:"Sortuj malejco",none:"Brak sortowania",remove:"Wycz sortowanie"},column:{hide:"Ukryj kolumn"},aggregation:{count:"Razem pozycji: ",sum:"Razem: ",avg:"rednia: ",min:"Min: ",max:"Max: "},pinning:{pinLeft:"Przypnij do lewej",pinRight:"Przypnij do prawej",unpin:"Odepnij"},columnMenu:{close:"Zamknij"},gridMenu:{aria:{buttonLabel:"Opcje tabeli"},columns:"Kolumny:",importerTitle:"Importuj plik",exporterAllAsCsv:"Eksportuj wszystkie dane do csv",exporterVisibleAsCsv:"Eksportuj widoczne dane do csv",exporterSelectedAsCsv:"Eksportuj zaznaczone dane do csv",exporterAllAsPdf:"Eksportuj wszystkie dane do pdf",exporterVisibleAsPdf:"Eksportuj widoczne dane do pdf",exporterSelectedAsPdf:"Eksportuj zaznaczone dane do pdf",clearAllFilters:"Wyczy filtry"},importer:{noHeaders:"Nie udao si wczyta nazw kolumn. Czy plik posiada nagwek?",noObjects:"Nie udalo si wczyta pozycji. Czy plik zawiera dane??",invalidCsv:"Nie udao si przetworzy pliku, jest to prawidlowy plik CSV??",invalidJson:"Nie udao si przetworzy pliku, jest to prawidlowy plik Json?",jsonNotArray:"Importowany plik json musi zawiera tablic, importowanie przerwane."},pagination:{aria:{pageToFirst:"Pierwsza strona",pageBack:"Poprzednia strona",pageSelected:"Wybrana strona",pageForward:"Nastpna strona",pageToLast:"Ostatnia strona"},sizes:"pozycji na stron",totalItems:"pozycji",through:"do",of:"z"},grouping:{group:"Grupuj",ungroup:"Rozgrupuj",aggregate_count:"Zbiorczo: Razem",aggregate_sum:"Zbiorczo: Suma",aggregate_max:"Zbiorczo: Max",aggregate_min:"Zbiorczo: Min",aggregate_avg:"Zbiorczo: rednia",aggregate_remove:"Zbiorczo: Usu"},validate:{error:"Bd:",minLength:"Warto powinna skada si z co najmniej THRESHOLD znakw.",maxLength:"Warto powinna skada si z przynajmniej THRESHOLD znakw.",required:"Warto jest wymagana."}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("pt-br",{headerCell:{aria:{defaultFilterLabel:"Filtro por coluna",removeFilter:"Remover filtro",columnMenuButtonLabel:"Menu coluna"},priority:"Prioridade:",filterLabel:"Filtro por coluna: "},aggregate:{label:"itens"},groupPanel:{description:"Arraste e solte uma coluna aqui para agrupar por essa coluna"},search:{placeholder:"Procurar...",showingItems:"Mostrando os Itens:",selectedItems:"Items Selecionados:",totalItems:"Total de Itens:",size:"Tamanho da Pgina:",first:"Primeira Pgina",next:"Prxima Pgina",previous:"Pgina Anterior",last:"ltima Pgina"},menu:{text:"Selecione as colunas:"},sort:{ascending:"Ordenar Ascendente",descending:"Ordenar Descendente",none:"Nenhuma Ordem",remove:"Remover Ordenao"},column:{hide:"Esconder coluna"},aggregation:{count:"total de linhas: ",sum:"total: ",avg:"med: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Fixar Esquerda",pinRight:"Fixar Direita",unpin:"Desprender"},columnMenu:{close:"Fechar"},gridMenu:{aria:{buttonLabel:"Menu Grid"},columns:"Colunas:",importerTitle:"Importar arquivo",exporterAllAsCsv:"Exportar todos os dados como csv",exporterVisibleAsCsv:"Exportar dados visveis como csv",exporterSelectedAsCsv:"Exportar dados selecionados como csv",exporterAllAsPdf:"Exportar todos os dados como pdf",exporterVisibleAsPdf:"Exportar dados visveis como pdf",exporterSelectedAsPdf:"Exportar dados selecionados como pdf",clearAllFilters:"Limpar todos os filtros"},importer:{noHeaders:"Nomes de colunas no puderam ser derivados. O arquivo tem um cabealho?",noObjects:"Objetos no puderam ser derivados. Havia dados no arquivo, alm dos cabealhos?",invalidCsv:"Arquivo no pode ser processado.  um CSV vlido?",invalidJson:"Arquivo no pode ser processado.  um Json vlido?",jsonNotArray:"Arquivo json importado tem que conter um array. Abortando."},pagination:{aria:{pageToFirst:"Primeira pgina",pageBack:"Pgina anterior",pageSelected:"Pgina Selecionada",pageForward:"Proxima",pageToLast:"Anterior"},sizes:"itens por pgina",totalItems:"itens",through:"atravs dos",of:"de"},grouping:{group:"Agrupar",ungroup:"Desagrupar",aggregate_count:"Agr: Contar",aggregate_sum:"Agr: Soma",aggregate_max:"Agr: Max",aggregate_min:"Agr: Min",aggregate_avg:"Agr: Med",aggregate_remove:"Agr: Remover"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("pt",{headerCell:{aria:{defaultFilterLabel:"Filtro por coluna",removeFilter:"Remover filtro",columnMenuButtonLabel:"Menu coluna"},priority:"Prioridade:",filterLabel:"Filtro por coluna: "},aggregate:{label:"itens"},groupPanel:{description:"Arraste e solte uma coluna aqui para agrupar por essa coluna"},search:{placeholder:"Procurar...",showingItems:"Mostrando os Itens:",selectedItems:"Itens Selecionados:",totalItems:"Total de Itens:",size:"Tamanho da Pgina:",first:"Primeira Pgina",next:"Prxima Pgina",previous:"Pgina Anterior",last:"ltima Pgina"},menu:{text:"Selecione as colunas:"},sort:{ascending:"Ordenar Ascendente",descending:"Ordenar Descendente",none:"Nenhuma Ordem",remove:"Remover Ordenao"},column:{hide:"Esconder coluna"},aggregation:{count:"total de linhas: ",sum:"total: ",avg:"med: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Fixar Esquerda",pinRight:"Fixar Direita",unpin:"Desprender"},columnMenu:{close:"Fechar"},gridMenu:{aria:{buttonLabel:"Menu Grid"},columns:"Colunas:",importerTitle:"Importar ficheiro",exporterAllAsCsv:"Exportar todos os dados como csv",exporterVisibleAsCsv:"Exportar dados visveis como csv",exporterSelectedAsCsv:"Exportar dados selecionados como csv",exporterAllAsPdf:"Exportar todos os dados como pdf",exporterVisibleAsPdf:"Exportar dados visveis como pdf",exporterSelectedAsPdf:"Exportar dados selecionados como pdf",clearAllFilters:"Limpar todos os filtros"},importer:{noHeaders:"Nomes de colunas no puderam ser derivados. O ficheiro tem um cabealho?",noObjects:"Objetos no puderam ser derivados. Havia dados no ficheiro, alm dos cabealhos?",invalidCsv:"Ficheiro no pode ser processado.  um CSV vlido?",invalidJson:"Ficheiro no pode ser processado.  um Json vlido?",jsonNotArray:"Ficheiro json importado tem que conter um array. Interrompendo."},pagination:{aria:{pageToFirst:"Primeira pgina",pageBack:"Pgina anterior",pageSelected:"Pgina Selecionada",pageForward:"Prxima",pageToLast:"Anterior"},sizes:"itens por pgina",totalItems:"itens",through:"a",of:"de"},grouping:{group:"Agrupar",ungroup:"Desagrupar",aggregate_count:"Agr: Contar",aggregate_sum:"Agr: Soma",aggregate_max:"Agr: Max",aggregate_min:"Agr: Min",aggregate_avg:"Agr: Med",aggregate_remove:"Agr: Remover"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("ro",{headerCell:{aria:{defaultFilterLabel:"Filtru pentru coloana",removeFilter:"Sterge filtru",columnMenuButtonLabel:"Column Menu"},priority:"Prioritate:",filterLabel:"Filtru pentru coloana:"},aggregate:{label:"Elemente"},groupPanel:{description:"Trage un cap de coloana aici pentru a grupa elementele dupa coloana respectiva"},search:{placeholder:"Cauta...",showingItems:"Arata elementele:",selectedItems:"Elementele selectate:",totalItems:"Total elemente:",size:"Marime pagina:",first:"Prima pagina",next:"Pagina urmatoare",previous:"Pagina anterioara",last:"Ultima pagina"},menu:{text:"Alege coloane:"},sort:{ascending:"Ordoneaza crescator",descending:"Ordoneaza descrescator",none:"Fara ordonare",remove:"Sterge ordonarea"},column:{hide:"Ascunde coloana"},aggregation:{count:"total linii: ",sum:"total: ",avg:"medie: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Pin la stanga",pinRight:"Pin la dreapta",unpin:"Sterge pinul"},columnMenu:{close:"Inchide"},gridMenu:{aria:{buttonLabel:"Grid Menu"},columns:"Coloane:",importerTitle:"Incarca fisier",exporterAllAsCsv:"Exporta toate datele ca csv",exporterVisibleAsCsv:"Exporta datele vizibile ca csv",exporterSelectedAsCsv:"Exporta datele selectate ca csv",exporterAllAsPdf:"Exporta toate datele ca pdf",exporterVisibleAsPdf:"Exporta datele vizibile ca pdf",exporterSelectedAsPdf:"Exporta datele selectate ca csv pdf",clearAllFilters:"Sterge toate filtrele"},importer:{noHeaders:"Numele coloanelor nu a putut fi incarcat, acest fisier are un header?",noObjects:"Datele nu au putut fi incarcate, exista date in fisier in afara numelor de coloane?",invalidCsv:"Fisierul nu a putut fi procesat, ati incarcat un CSV valid ?",invalidJson:"Fisierul nu a putut fi procesat, ati incarcat un Json valid?",jsonNotArray:"Json-ul incarcat trebuie sa contina un array, inchidere."},pagination:{aria:{pageToFirst:"Prima pagina",pageBack:"O pagina inapoi",pageSelected:"Pagina selectata",pageForward:"O pagina inainte",pageToLast:"Ultima pagina"},sizes:"Elemente per pagina",totalItems:"elemente",through:"prin",of:"of"},grouping:{group:"Grupeaza",ungroup:"Opreste gruparea",aggregate_count:"Agg: Count",aggregate_sum:"Agg: Sum",aggregate_max:"Agg: Max",aggregate_min:"Agg: Min",aggregate_avg:"Agg: Avg",aggregate_remove:"Agg: Remove"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("ru",{headerCell:{aria:{defaultFilterLabel:" ",removeFilter:" ",columnMenuButtonLabel:" "},priority:":",filterLabel:" : "},aggregate:{label:""},groupPanel:{description:"       ."},search:{placeholder:"...",showingItems:" :",selectedItems:" :",totalItems:" :",size:" :",first:" ",next:" ",previous:" ",last:" "},menu:{text:" :"},sort:{ascending:" ",descending:" ",none:" ",remove:" "},column:{hide:" "},aggregation:{count:" : ",sum:": ",avg:": ",min:": ",max:": "},pinning:{pinLeft:" ",pinRight:" ",unpin:""},columnMenu:{close:""},gridMenu:{aria:{buttonLabel:""},columns:":",importerTitle:" ",exporterAllAsCsv:"   CSV",exporterVisibleAsCsv:"    CSV",exporterSelectedAsCsv:"    CSV",exporterAllAsPdf:"   PDF",exporterVisibleAsPdf:"    PDF",exporterSelectedAsPdf:"    PDF",clearAllFilters:"  "},importer:{noHeaders:"    ,     ?",noObjects:"   ,       ?",invalidCsv:"   ,   CSV-?",invalidJson:"   ,   JSON?",jsonNotArray:" JSON-   ,  ."},pagination:{aria:{pageToFirst:" ",pageBack:" ",pageSelected:" ",pageForward:" ",pageToLast:" "},sizes:"  ",totalItems:"",through:"",of:""},grouping:{group:"",ungroup:"",aggregate_count:": Count",aggregate_sum:" : ",aggregate_max:" : ",aggregate_min:" : ",aggregate_avg:" : ",aggregate_remove:" : "}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("sk",{aggregate:{label:"items"},groupPanel:{description:"Pretiahni sem nzov stpca pre zoskupenie poda toho stpca."},search:{placeholder:"Hadaj...",showingItems:"Zobrazujem poloky:",selectedItems:"Vybrat poloky:",totalItems:"Poet poloiek:",size:"Poet:",first:"Prv strana",next:"alia strana",previous:"Predchdzajca strana",last:"Posledn strana"},menu:{text:"Vyberte stpce:"},sort:{ascending:"Zotriedi vzostupne",descending:"Zotriedi zostupne",remove:"Vymaza triedenie"},aggregation:{count:"total rows: ",sum:"total: ",avg:"avg: ",min:"min: ",max:"max: "},gridMenu:{columns:"Columns:",importerTitle:"Import file",exporterAllAsCsv:"Export all data as csv",exporterVisibleAsCsv:"Export visible data as csv",exporterSelectedAsCsv:"Export selected data as csv",exporterAllAsPdf:"Export all data as pdf",exporterVisibleAsPdf:"Export visible data as pdf",exporterSelectedAsPdf:"Export selected data as pdf",clearAllFilters:"Clear all filters"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("sv",{aggregate:{label:"Artiklar"},groupPanel:{description:"Dra en kolumnrubrik hit och slpp den fr att gruppera efter den kolumnen."},search:{placeholder:"Sk...",showingItems:"Visar artiklar:",selectedItems:"Valda artiklar:",totalItems:"Antal artiklar:",size:"Sidstorlek:",first:"Frsta sidan",next:"Nsta sida",previous:"Fregende sida",last:"Sista sidan"},menu:{text:"Vlj kolumner:"},sort:{ascending:"Sortera stigande",descending:"Sortera fallande",remove:"Inaktivera sortering"},column:{hide:"Gm kolumn"},aggregation:{count:"Antal rader: ",sum:"Summa: ",avg:"Genomsnitt: ",min:"Min: ",max:"Max: "},pinning:{pinLeft:"Fst vnster",pinRight:"Fst hger",unpin:"Lsgr"},gridMenu:{columns:"Kolumner:",importerTitle:"Importera fil",exporterAllAsCsv:"Exportera all data som CSV",exporterVisibleAsCsv:"Exportera synlig data som CSV",exporterSelectedAsCsv:"Exportera markerad data som CSV",exporterAllAsPdf:"Exportera all data som PDF",exporterVisibleAsPdf:"Exportera synlig data som PDF",exporterSelectedAsPdf:"Exportera markerad data som PDF",clearAllFilters:"Rengr alla filter"},importer:{noHeaders:"Kolumnnamn kunde inte hrledas. Har filen ett sidhuvud?",noObjects:"Objekt kunde inte hrledas. Har filen data undantaget sidhuvud?",invalidCsv:"Filen kunde inte behandlas, r den en giltig CSV?",invalidJson:"Filen kunde inte behandlas, r den en giltig JSON?",jsonNotArray:"Importerad JSON-fil mste innehlla ett flt. Import avbruten."},pagination:{sizes:"Artiklar per sida",totalItems:"Artiklar"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("ta",{aggregate:{label:""},groupPanel:{description:"          "},search:{placeholder:" ...",showingItems:" :",selectedItems:"  :",totalItems:" :",size:" : ",first:" ",next:" ",previous:"  ",last:" "},menu:{text:" :"},sort:{ascending:" ",descending:" ",remove:" "},column:{hide:"   "},aggregation:{count:" :",sum:": ",avg:": ",min:": ",max:": "},pinning:{pinLeft:"  ",pinRight:" ",unpin:""},gridMenu:{columns:":",importerTitle:" : ",exporterAllAsCsv:"  : csv",exporterVisibleAsCsv:"  : csv",exporterSelectedAsCsv:"  : csv",exporterAllAsPdf:"  : pdf",exporterVisibleAsPdf:"  : pdf",exporterSelectedAsPdf:"  : pdf",clearAllFilters:"Clear all filters"},importer:{noHeaders:"   ,   ?",noObjects:"  ,      ? ",invalidCsv:"   ,  ? - csv",invalidJson:"   ,  ? - json",jsonNotArray:"   ,    : json"},pagination:{sizes:" / ",totalItems:" "},grouping:{group:"",ungroup:"",aggregate_count:" : ",aggregate_sum:" : ",aggregate_max:" : ",aggregate_min:" : ",aggregate_avg:" : ",aggregate_remove:" : "}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("tr",{headerCell:{aria:{defaultFilterLabel:"Stun iin filtre",removeFilter:"Filtreyi Kaldr",columnMenuButtonLabel:"Stun Mens"},priority:"ncelik:",filterLabel:"Stun iin filtre: "},aggregate:{label:"kaytlar"},groupPanel:{description:"Stuna gre gruplamak iin stun baln buraya srkleyin ve brakn."},search:{placeholder:"Arama...",showingItems:"Gsterilen Kayt:",selectedItems:"Seili Kayt:",totalItems:"Toplam Kayt:",size:"Sayfa Boyutu:",first:"lk Sayfa",next:"Sonraki Sayfa",previous:"nceki Sayfa",last:"Son Sayfa"},menu:{text:"Stunlar Se:"},sort:{ascending:"Artan Srada Srala",descending:"Azalan Srada Srala",none:"Sralama Yapma",remove:"Sralamay Kaldr"},column:{hide:"Stunu Gizle"},aggregation:{count:"toplam satr: ",sum:"toplam: ",avg:"ort: ",min:"min: ",max:"maks: "},pinning:{pinLeft:"Sola Sabitle",pinRight:"Saa Sabitle",unpin:"Sabitlemeyi Kaldr"},columnMenu:{close:"Kapat"},gridMenu:{aria:{buttonLabel:"Tablo Men"},columns:"Stunlar:",importerTitle:"Dosya ieri aktar",exporterAllAsCsv:"Btn veriyi CSV olarak dar aktar",exporterVisibleAsCsv:"Grnen veriyi CSV olarak dar aktar",exporterSelectedAsCsv:"Seili veriyi CSV olarak dar aktar",exporterAllAsPdf:"Btn veriyi PDF olarak dar aktar",exporterVisibleAsPdf:"Grnen veriyi PDF olarak dar aktar",exporterSelectedAsPdf:"Seili veriyi PDF olarak dar aktar",clearAllFilters:"Btn filtreleri kaldr"},importer:{noHeaders:"Stun isimleri retilemiyor, dosyann bir bal var m?",noObjects:"Nesneler retilemiyor, dosyada balktan baka bir veri var m?",invalidCsv:"Dosya ilenemedi, geerli bir CSV dosyas m?",invalidJson:"Dosya ilenemedi, geerli bir Json dosyas m?",jsonNotArray:"Alnan Json dosyasnda bir dizi bulunmaldr, ilem iptal ediliyor."},pagination:{aria:{pageToFirst:"lk sayfaya",pageBack:"Geri git",pageSelected:"Seili sayfa",pageForward:"leri git",pageToLast:"Sona git"},sizes:"Sayfadaki nesne says",totalItems:"kaytlar",through:"",of:""},grouping:{group:"Grupla",ungroup:"Gruplama",aggregate_count:"Yekun: Say",aggregate_sum:"Yekun: Toplam",aggregate_max:"Yekun: Maks",aggregate_min:"Yekun: Min",aggregate_avg:"Yekun: Ort",aggregate_remove:"Yekun: Sil"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("ua",{headerCell:{aria:{defaultFilterLabel:" ",removeFilter:" ",columnMenuButtonLabel:" "},priority:":",filterLabel:" : "},aggregate:{label:""},groupPanel:{description:"       ."},search:{placeholder:"...",showingItems:" :",selectedItems:" :",totalItems:" :",size:" :",first:" ",next:" ",previous:" ",last:" "},menu:{text:" :"},sort:{ascending:" ",descending:" ",none:" ",remove:" "},column:{hide:" "},aggregation:{count:" : ",sum:": ",avg:": ",min:": ",max:": "},pinning:{pinLeft:" ",pinRight:" ",unpin:""},columnMenu:{close:""},gridMenu:{aria:{buttonLabel:""},columns:":",importerTitle:" ",exporterAllAsCsv:"   CSV",exporterVisibleAsCsv:"    CSV",exporterSelectedAsCsv:"    CSV",exporterAllAsPdf:"   PDF",exporterVisibleAsPdf:"    PDF",exporterSelectedAsPdf:"    PDF",clearAllFilters:"  "},importer:{noHeaders:"    ,     ?",noObjects:"   ,       ?",invalidCsv:"   ,    CSV-?",invalidJson:"   ,    JSON?",jsonNotArray:"JSON-     ,  ."},pagination:{aria:{pageToFirst:" ",pageBack:" ",pageSelected:" ",pageForward:" ",pageToLast:" "},sizes:"  ",totalItems:"",through:"",of:""},grouping:{group:"",ungroup:"",aggregate_count:": ",aggregate_sum:" : ",aggregate_max:" : ",aggregate_min:" : ",aggregate_avg:" : ",aggregate_remove:" : "}}),e}])}])}(),function(){var e=["uiT","uiTranslate"],t=["t","uiTranslate"],r=angular.module("ui.grid.i18n");r.constant("i18nConstants",{MISSING:"[MISSING]",UPDATE_EVENT:"$uiI18n",LOCALE_DIRECTIVE_ALIAS:"uiI18n",DEFAULT_LANG:"en"}),r.service("i18nService",["$log","i18nConstants","$rootScope",function(e,t,r){var n={_langs:{},current:null,get:function(e){return this._langs[e.toLowerCase()]},add:function(e,t){var r=e.toLowerCase();this._langs[r]||(this._langs[r]={}),angular.extend(this._langs[r],t)},getAllLangs:function(){var e=[];if(!this._langs)return e;for(var t in this._langs)e.push(t);return e},setCurrent:function(e){this.current=e.toLowerCase()},getCurrentLang:function(){return this.current}},i={add:function(e,t){"object"==typeof e?angular.forEach(e,function(e){e&&n.add(e,t)}):n.add(e,t)},getAllLangs:function(){return n.getAllLangs()},get:function(e){var t=e||i.getCurrentLang();return n.get(t)},getSafeText:function(e,r){var o=r||i.getCurrentLang(),a=n.get(o);if(!a)return t.MISSING;for(var s=e.split("."),l=a,u=0;u<s.length;++u){if(void 0===l[s[u]]||null===l[s[u]])return t.MISSING;l=l[s[u]]}return l},setCurrentLang:function(e){e&&(n.setCurrent(e),r.$broadcast(t.UPDATE_EVENT))},getCurrentLang:function(){var e=n.getCurrentLang();return e||(e=t.DEFAULT_LANG,n.setCurrent(e)),e}};return i}]);var n=function(e,t){return{compile:function(){return{pre:function(r,n,i){var o=t.LOCALE_DIRECTIVE_ALIAS,a=r.$eval(i[o]);a?r.$watch(i[o],function(){e.setCurrentLang(a)}):i.$$observers&&i.$observe(o,function(){e.setCurrentLang(i[o]||t.DEFAULT_LANG)})}}}}};r.directive("uiI18n",["i18nService","i18nConstants",n]);var i=function(t,r,n){return{restrict:"EA",compile:function(){return{pre:function(i,o,a){var s,l=e[0],u=e[1],c=a[l]||a[u]||o.html(),p=n.MISSING+c;if(a.$$observers){var d=a[l]?l:u;s=a.$observe(d,function(e){e&&o.html(t(e)(r.getCurrentLang())||p)})}var f=t(c),h=i.$on(n.UPDATE_EVENT,function(e){s?s(a[l]||a[u]):o.html(f(r.get())||p)});i.$on("$destroy",h),o.html(f(r.get())||p)}}}}};angular.forEach(e,function(e){r.directive(e,["$parse","i18nService","i18nConstants",i])});var o=function(e,t,r){return function(n){return e(n)(t.get())||r.MISSING+n}};angular.forEach(t,function(e){r.filter(e,["$parse","i18nService","i18nConstants",o])})}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("zh-cn",{headerCell:{aria:{defaultFilterLabel:"",removeFilter:"",columnMenuButtonLabel:""},priority:":",filterLabel:": "},aggregate:{label:""},groupPanel:{description:""},search:{placeholder:"",showingItems:"",selectedItems:"",totalItems:"",size:"",first:"",next:"",previous:"",last:""},menu:{text:""},sort:{ascending:"",descending:"",none:"",remove:""},column:{hide:""},aggregation:{count:"",sum:"",avg:"",min:"",max:""},pinning:{pinLeft:"",pinRight:"",unpin:""},columnMenu:{close:""},gridMenu:{aria:{buttonLabel:""},columns:"",importerTitle:"",exporterAllAsCsv:"CSV",exporterVisibleAsCsv:"CSV",exporterSelectedAsCsv:"CSV",exporterAllAsPdf:"PDF",exporterVisibleAsPdf:"PDF",exporterSelectedAsPdf:"PDF",clearAllFilters:""},importer:{noHeaders:"",noObjects:"",invalidCsv:"CSV",invalidJson:"JSON",jsonNotArray:"JSON"},pagination:{aria:{pageToFirst:"",pageBack:"",pageSelected:"",pageForward:"",pageToLast:""},sizes:"",totalItems:"",through:"",of:""},grouping:{group:"",ungroup:"",aggregate_count:": ",aggregate_sum:": ",aggregate_max:": ",aggregate_min:": ",aggregate_avg:": ",aggregate_remove:": "}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("zh-tw",{aggregate:{label:""},groupPanel:{description:""},search:{placeholder:"",showingItems:"",selectedItems:"",totalItems:"",size:"",first:"",next:"",previous:"",last:""},menu:{text:""},sort:{ascending:"",descending:"",remove:""},column:{hide:""},aggregation:{count:"",sum:"",avg:"",min:"",max:""},pinning:{pinLeft:"",pinRight:"",unpin:""},gridMenu:{columns:"",importerTitle:"",exporterAllAsCsv:"CSV",exporterVisibleAsCsv:"CSV",exporterSelectedAsCsv:"CSV",exporterAllAsPdf:"PDF",exporterVisibleAsPdf:"PDF",exporterSelectedAsPdf:"PDF",clearAllFilters:""},importer:{noHeaders:"",noObjects:"",invalidCsv:"CSV",invalidJson:"JSON",jsonNotArray:"JSON"},pagination:{sizes:"",totalItems:""}}),e}])}])}(),function(){"use strict";angular.module("ui.grid.autoResize",["ui.grid"]).directive("uiGridAutoResize",["$timeout","gridUtil",function(e,t){return{require:"uiGrid",scope:!1,link:function(e,r,n,i){function o(){l=t.elementHeight(r),s=t.elementWidth(r)}function a(){clearTimeout(u),u=setTimeout(function(){var n=t.elementHeight(r),u=t.elementWidth(r);n!==l||u!==s?(i.grid.gridHeight=n,i.grid.gridWidth=u,i.grid.api.core.raise.gridDimensionChanged(l,s,n,u),e.$apply(function(){i.grid.refresh().then(function(){o(),a()})})):a()},250)}var s,l;o();var u;a(),e.$on("$destroy",function(){clearTimeout(u)})}}}])}(),function(){"use strict";var e=angular.module("ui.grid.cellNav",["ui.grid"]);e.constant("uiGridCellNavConstants",{FEATURE_NAME:"gridCellNav",CELL_NAV_EVENT:"cellNav",direction:{LEFT:0,RIGHT:1,UP:2,DOWN:3,PG_UP:4,PG_DOWN:5},EVENT_TYPE:{KEYDOWN:0,CLICK:1,CLEAR:2}}),e.factory("uiGridCellNavFactory",["gridUtil","uiGridConstants","uiGridCellNavConstants","GridRowColumn","$q",function(e,t,r,n,i){var o=function(e,t,r,n){this.rows=e.visibleRowCache,this.columns=t.visibleColumnCache,this.leftColumns=r?r.visibleColumnCache:[],this.rightColumns=n?n.visibleColumnCache:[],this.bodyContainer=e};return o.prototype.getFocusableCols=function(){return this.leftColumns.concat(this.columns,this.rightColumns).filter(function(e){return e.colDef.allowCellFocus})},o.prototype.getFocusableRows=function(){return this.rows.filter(function(e){return!1!==e.allowCellFocus})},o.prototype.getNextRowCol=function(e,t,n){switch(e){case r.direction.LEFT:return this.getRowColLeft(t,n);case r.direction.RIGHT:return this.getRowColRight(t,n);case r.direction.UP:return this.getRowColUp(t,n);case r.direction.DOWN:return this.getRowColDown(t,n);case r.direction.PG_UP:return this.getRowColPageUp(t,n);case r.direction.PG_DOWN:return this.getRowColPageDown(t,n)}},o.prototype.initializeSelection=function(){var e=this.getFocusableCols(),t=this.getFocusableRows();if(0===e.length||0===t.length)return null;return new n(t[0],e[0])},o.prototype.getRowColLeft=function(e,t){var r=this.getFocusableCols(),i=this.getFocusableRows(),o=r.indexOf(t),a=i.indexOf(e);-1===o&&(o=1);var s=0===o?r.length-1:o-1;return s>=o?0===a?new n(e,r[s]):new n(i[a-1],r[s]):new n(e,r[s])},o.prototype.getRowColRight=function(e,t){var r=this.getFocusableCols(),i=this.getFocusableRows(),o=r.indexOf(t),a=i.indexOf(e);-1===o&&(o=0);var s=o===r.length-1?0:o+1;return s<=o?a===i.length-1?new n(e,r[s]):new n(i[a+1],r[s]):new n(e,r[s])},o.prototype.getRowColDown=function(e,t){var r=this.getFocusableCols(),i=this.getFocusableRows(),o=r.indexOf(t),a=i.indexOf(e);return-1===o&&(o=0),a===i.length-1?new n(e,r[o]):new n(i[a+1],r[o])},o.prototype.getRowColPageDown=function(e,t){var r=this.getFocusableCols(),i=this.getFocusableRows(),o=r.indexOf(t),a=i.indexOf(e);-1===o&&(o=0);var s=this.bodyContainer.minRowsToRender();return a>=i.length-s?new n(i[i.length-1],r[o]):new n(i[a+s],r[o])},o.prototype.getRowColUp=function(e,t){var r=this.getFocusableCols(),i=this.getFocusableRows(),o=r.indexOf(t),a=i.indexOf(e);return-1===o&&(o=0),0===a?new n(e,r[o]):new n(i[a-1],r[o])},o.prototype.getRowColPageUp=function(e,t){var r=this.getFocusableCols(),i=this.getFocusableRows(),o=r.indexOf(t),a=i.indexOf(e);-1===o&&(o=0);var s=this.bodyContainer.minRowsToRender();return a-s<0?new n(i[0],r[o]):new n(i[a-s],r[o])},o}]),e.service("uiGridCellNavService",["gridUtil","uiGridConstants","uiGridCellNavConstants","$q","uiGridCellNavFactory","GridRowColumn","ScrollEvent",function(e,t,r,n,i,o,a){var s={initializeGrid:function(e){e.registerColumnBuilder(s.cellNavColumnBuilder),e.cellNav={},e.cellNav.lastRowCol=null,e.cellNav.focusedCells=[],s.defaultGridOptions(e.options);var t={events:{cellNav:{navigate:function(e,t){},viewPortKeyDown:function(e,t){},viewPortKeyPress:function(e,t){}}},methods:{cellNav:{scrollToFocus:function(t,r){return s.scrollToFocus(e,t,r)},getFocusedCell:function(){return e.cellNav.lastRowCol},getCurrentSelection:function(){return e.cellNav.focusedCells},rowColSelectIndex:function(t){for(var r=-1,n=0;n<e.cellNav.focusedCells.length;n++)if(e.cellNav.focusedCells[n].col.uid===t.col.uid&&e.cellNav.focusedCells[n].row.uid===t.row.uid){r=n;break}return r}}}};e.api.registerEventsFromObject(t.events),e.api.registerMethodsFromObject(t.methods)},defaultGridOptions:function(e){e.modifierKeysToMultiSelectCells=!0===e.modifierKeysToMultiSelectCells,e.keyDownOverrides=e.keyDownOverrides||[]},decorateRenderContainers:function(e){var t=e.hasRightContainer()?e.renderContainers.right:null,r=e.hasLeftContainer()?e.renderContainers.left:null;null!==r&&(e.renderContainers.left.cellNav=new i(e.renderContainers.body,r,t,e.renderContainers.body)),null!==t&&(e.renderContainers.right.cellNav=new i(e.renderContainers.body,t,e.renderContainers.body,r)),e.renderContainers.body.cellNav=new i(e.renderContainers.body,e.renderContainers.body,r,t)},getDirection:function(e){return e.keyCode===t.keymap.LEFT||e.keyCode===t.keymap.TAB&&e.shiftKey?r.direction.LEFT:e.keyCode===t.keymap.RIGHT||e.keyCode===t.keymap.TAB?r.direction.RIGHT:e.keyCode===t.keymap.UP||e.keyCode===t.keymap.ENTER&&e.shiftKey?r.direction.UP:e.keyCode===t.keymap.PG_UP?r.direction.PG_UP:e.keyCode===t.keymap.DOWN||e.keyCode===t.keymap.ENTER&&!e.ctrlKey&&!e.altKey?r.direction.DOWN:e.keyCode===t.keymap.PG_DOWN?r.direction.PG_DOWN:null},cellNavColumnBuilder:function(e,t,r){var i=[];return e.allowCellFocus=void 0===e.allowCellFocus||e.allowCellFocus,n.all(i)},scrollToFocus:function(e,t,r){var n=null,i=null;return void 0!==t&&null!==t&&(n=e.getRow(t)),void 0!==r&&null!==r&&(i=e.getColumn(r.name?r.name:r.field)),e.api.core.scrollToIfNecessary(n,i).then(function(){var t={row:n,col:i};null!==n&&null!==i&&e.cellNav.broadcastCellNav(t)})},getLeftWidth:function(e,t){var r=0;if(!t)return r;var n=e.renderContainers.body.visibleColumnCache.indexOf(t);e.renderContainers.body.visibleColumnCache.forEach(function(e,t){t<n&&(r+=e.drawnWidth)});var i=0===n?0:(n+1)/e.renderContainers.body.visibleColumnCache.length;return r+=t.drawnWidth*i}};return s}]),e.directive("uiGridCellnav",["gridUtil","uiGridCellNavService","uiGridCellNavConstants","uiGridConstants","GridRowColumn","$timeout","$compile","i18nService",function(e,t,r,n,i,o,a,s){return{replace:!0,priority:-150,require:"^uiGrid",scope:!1,controller:function(){},compile:function(){return{pre:function(e,o,a,s){var l=e,u=s.grid;t.initializeGrid(u),s.cellNav={},s.cellNav.makeRowCol=function(e){return e instanceof i||(e=new i(e.row,e.col)),e},s.cellNav.getActiveCell=function(){var e=o[0].getElementsByClassName("ui-grid-cell-focus");if(e.length>0)return e[0]},s.cellNav.broadcastCellNav=u.cellNav.broadcastCellNav=function(e,t,n){t=!(void 0===t||!t),e=s.cellNav.makeRowCol(e),s.cellNav.broadcastFocus(e,t,n),l.$broadcast(r.CELL_NAV_EVENT,e,t,n)},s.cellNav.clearFocus=u.cellNav.clearFocus=function(){u.cellNav.focusedCells=[],l.$broadcast(r.CELL_NAV_EVENT)},s.cellNav.broadcastFocus=function(e,t,r){t=!(void 0===t||!t),e=s.cellNav.makeRowCol(e);var n=e.row,o=e.col,a=s.grid.api.cellNav.rowColSelectIndex(e);if(null===u.cellNav.lastRowCol||-1===a){var l=new i(n,o);null!==u.cellNav.lastRowCol&&u.cellNav.lastRowCol.row===l.row&&u.cellNav.lastRowCol.col===l.col||(u.api.cellNav.raise.navigate(l,u.cellNav.lastRowCol,r),u.cellNav.lastRowCol=l),s.grid.options.modifierKeysToMultiSelectCells&&t?u.cellNav.focusedCells.push(e):u.cellNav.focusedCells=[e]}else u.options.modifierKeysToMultiSelectCells&&t&&a>=0&&u.cellNav.focusedCells.splice(a,1)},s.cellNav.handleKeyDown=function(e){var i=t.getDirection(e);if(null===i)return null;var o="body";e.uiGridTargetRenderContainerId&&(o=e.uiGridTargetRenderContainerId);var a=s.grid.api.cellNav.getFocusedCell();if(a){var l=s.grid.renderContainers[o].cellNav.getNextRowCol(i,a.row,a.col),c=s.grid.renderContainers[o].cellNav.getFocusableCols(),p=s.grid.api.cellNav.rowColSelectIndex(l);return i===r.direction.LEFT&&l.col===c[c.length-1]&&l.row===a.row&&e.keyCode===n.keymap.TAB&&e.shiftKey?(u.cellNav.focusedCells.splice(p,1),s.cellNav.clearFocus(),!0):i!==r.direction.RIGHT||l.col!==c[0]||l.row!==a.row||e.keyCode!==n.keymap.TAB||e.shiftKey?(u.scrollToIfNecessary(l.row,l.col).then(function(){s.cellNav.broadcastCellNav(l,null,e)}),e.stopPropagation(),e.preventDefault(),!1):(u.cellNav.focusedCells.splice(p,1),s.cellNav.clearFocus(),!0)}}},post:function(e,t,n,i){var o=i.grid,l=!0;try{angular.module("ngAria")}catch(e){l=!1}l&&function(){var n='<div id="'+o.id+'-aria-speakable" class="ui-grid-a11y-ariascreenreader-speakable ui-grid-offscreen" aria-live="assertive" role="alert" aria-atomic="true" aria-hidden="false" aria-relevant="additions" >&nbsp;</div>',i=a(n)(e);t.prepend(i),e.$on(r.CELL_NAV_EVENT,function(e,t,r,n){if(!n||"focus"!==n.type){for(var a=[],l=o.api.cellNav.getCurrentSelection(),u=0;u<l.length;u++)a.push(function(e){return"selectionRowHeaderCol"===e.col.field?e.row.isSelected?s.getSafeText("search.aria.selected"):s.getSafeText("search.aria.notSelected"):o.getCellDisplayValue(e.row,l[u].col)}(l[u]));var c=a.toString();!function(e){e!==i.text().trim()&&(i[0].style.clip="rect(0px,0px,0px,0px)",i[0].innerHTML="",i[0].style.visibility="hidden",i[0].style.visibility="visible",""!==e&&(i[0].style.clip="auto",i[0].appendChild(document.createTextNode(e+" ")),i[0].style.visibility="hidden",i[0].style.visibility="visible"))}(c)}})}()}}}}}]),e.directive("uiGridRenderContainer",["$timeout","$document","gridUtil","uiGridConstants","uiGridCellNavService","$compile","uiGridCellNavConstants",function(e,t,r,n,i,o,a){return{replace:!0,priority:-99999,require:["^uiGrid","uiGridRenderContainer","?^uiGridCellnav"],scope:!1,compile:function(){return{post:function(t,n,s,l){var u=l[0],c=l[1],p=l[2];if(u.grid.api.cellNav){var d=c.containerId,f=u.grid;if(i.decorateRenderContainers(f),"body"===d){u.grid.options.modifierKeysToMultiSelectCells?n.attr("aria-multiselectable",!0):n.attr("aria-multiselectable",!1);var h=o('<div class="ui-grid-focuser" role="region" aria-live="assertive" aria-atomic="false" tabindex="0" aria-controls="'+f.id+"-aria-speakable "+f.id+'-grid-container" aria-owns="'+f.id+'-grid-container"></div>')(t);n.append(h),h.on("focus",function(e){e.uiGridTargetRenderContainerId=d;var t=u.grid.api.cellNav.getFocusedCell();null===t&&(t=u.grid.renderContainers[d].cellNav.getNextRowCol(a.direction.DOWN,null,null),t.row&&t.col&&u.cellNav.broadcastCellNav(t))}),p.setAriaActivedescendant=function(e){n.attr("aria-activedescendant",e)},p.removeAriaActivedescendant=function(e){n.attr("aria-activedescendant")===e&&n.attr("aria-activedescendant","")},u.focus=function(){r.focus.byElement(h[0])};var g=null;h.on("keydown",function(e){e.uiGridTargetRenderContainerId=d;var t=u.grid.api.cellNav.getFocusedCell();null===(u.grid.options.keyDownOverrides.some(function(t){return Object.keys(t).every(function(r){return t[r]===e[r]})})?null:u.cellNav.handleKeyDown(e))&&(u.grid.api.cellNav.raise.viewPortKeyDown(e,t),g=t)}),h.on("keypress",function(t){g&&(e(function(){u.grid.api.cellNav.raise.viewPortKeyPress(t,g)},4),g=null)}),t.$on("$destroy",function(){h.off()})}}}}}}}]),e.directive("uiGridViewport",["$timeout","$document","gridUtil","uiGridConstants","uiGridCellNavService","uiGridCellNavConstants","$log","$compile",function(e,t,r,n,i,o,a,s){return{replace:!0,priority:-99999,require:["^uiGrid","^uiGridRenderContainer","?^uiGridCellnav"],scope:!1,compile:function(){return{pre:function(e,t,r,n){},post:function(e,t,r,n){var i=n[0],o=n[1];if(i.grid.api.cellNav){if("body"===o.containerId){var a=i.grid;a.api.core.on.scrollBegin(e,function(e){var t=i.grid.api.cellNav.getFocusedCell();null!==t&&o.colContainer.containsColumn(t.col)&&i.cellNav.clearFocus()}),a.api.core.on.scrollEnd(e,function(e){var t=i.grid.api.cellNav.getFocusedCell();null!==t&&o.colContainer.containsColumn(t.col)&&i.cellNav.broadcastCellNav(t)}),a.api.cellNav.on.navigate(e,function(){i.focus()})}}}}}}}]),e.directive("uiGridCell",["$timeout","$document","uiGridCellNavService","gridUtil","uiGridCellNavConstants","uiGridConstants","GridRowColumn",function(e,t,r,n,i,o,a){return{priority:-150,restrict:"A",require:["^uiGrid","?^uiGridCellnav"],scope:!1,link:function(t,r,n,s){function l(e){e.preventDefault()}function u(){h.cellNav.focusedCells.some(function(e,r){return e.row===t.row&&e.col===t.col})?c():p()}function c(){if(!t.focused){r.find("div").addClass("ui-grid-cell-focus"),r.attr("aria-selected",!0),f.setAriaActivedescendant(r.attr("id")),t.focused=!0}}function p(){if(t.focused){r.find("div").removeClass("ui-grid-cell-focus"),r.attr("aria-selected",!1),f.removeAriaActivedescendant(r.attr("id")),t.focused=!1}}var d=s[0],f=s[1];if(d.grid.api.cellNav&&t.col.colDef.allowCellFocus){var h=d.grid;t.focused=!1,r.attr("tabindex",-1),r.find("div").on("click",function(e){d.cellNav.broadcastCellNav(new a(t.row,t.col),e.ctrlKey||e.metaKey,e),e.stopPropagation(),t.$apply()}),r.on("mousedown",l),d.grid.api.edit&&(d.grid.api.edit.on.beginCellEdit(t,function(){r.off("mousedown",l)}),d.grid.api.edit.on.afterCellEdit(t,function(){r.on("mousedown",l)}),d.grid.api.edit.on.cancelCellEdit(t,function(){r.on("mousedown",l)})),u(),r.on("focus",function(e){d.cellNav.broadcastCellNav(new a(t.row,t.col),!1,e),e.stopPropagation(),t.$apply()}),t.$on(i.CELL_NAV_EVENT,u);var g=d.grid.registerDataChangeCallback(function(t){p(),e(u)},[o.dataChange.ROW]);t.$on("$destroy",function(){g(),r.find("div").off(),r.off()})}}}}])}(),function(){"use strict";var e=angular.module("ui.grid.edit",["ui.grid"]);e.constant("uiGridEditConstants",{EDITABLE_CELL_TEMPLATE:/EDITABLE_CELL_TEMPLATE/g,EDITABLE_CELL_DIRECTIVE:/editable_cell_directive/g,events:{BEGIN_CELL_EDIT:"uiGridEventBeginCellEdit",END_CELL_EDIT:"uiGridEventEndCellEdit",CANCEL_CELL_EDIT:"uiGridEventCancelCellEdit"}}),e.service("uiGridEditService",["$q","uiGridConstants","gridUtil",function(e,t,r){var n={initializeGrid:function(e){n.defaultGridOptions(e.options),e.registerColumnBuilder(n.editColumnBuilder),e.edit={};var t={events:{edit:{afterCellEdit:function(e,t,r,n){},beginCellEdit:function(e,t,r){},cancelCellEdit:function(e,t){}}},methods:{edit:{}}};e.api.registerEventsFromObject(t.events)},defaultGridOptions:function(e){e.cellEditableCondition=void 0===e.cellEditableCondition||e.cellEditableCondition,e.enableCellEditOnFocus=void 0!==e.enableCellEditOnFocus&&e.enableCellEditOnFocus},editColumnBuilder:function(t,n,i){var o=[];return t.enableCellEdit=void 0===t.enableCellEdit?void 0===i.enableCellEdit?"object"!==t.type:i.enableCellEdit:t.enableCellEdit,t.cellEditableCondition=void 0===t.cellEditableCondition?i.cellEditableCondition:t.cellEditableCondition,t.enableCellEdit&&(t.editableCellTemplate=t.editableCellTemplate||i.editableCellTemplate||"ui-grid/cellEditor",o.push(r.getTemplate(t.editableCellTemplate).then(function(e){n.editableCellTemplate=e},function(e){throw new Error("Couldn't fetch/use colDef.editableCellTemplate '"+t.editableCellTemplate+"'")}))),t.enableCellEditOnFocus=void 0===t.enableCellEditOnFocus?i.enableCellEditOnFocus:t.enableCellEditOnFocus,e.all(o)},isStartEditKey:function(e){return!(e.metaKey||e.keyCode===t.keymap.ESC||e.keyCode===t.keymap.SHIFT||e.keyCode===t.keymap.CTRL||e.keyCode===t.keymap.ALT||e.keyCode===t.keymap.WIN||e.keyCode===t.keymap.CAPSLOCK||e.keyCode===t.keymap.LEFT||e.keyCode===t.keymap.TAB&&e.shiftKey||e.keyCode===t.keymap.RIGHT||e.keyCode===t.keymap.TAB||e.keyCode===t.keymap.UP||e.keyCode===t.keymap.ENTER&&e.shiftKey||e.keyCode===t.keymap.DOWN||e.keyCode===t.keymap.ENTER)}};return n}]),e.directive("uiGridEdit",["gridUtil","uiGridEditService",function(e,t){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(e,r,n,i){t.initializeGrid(i.grid)},post:function(e,t,r,n){}}}}}]),e.directive("uiGridViewport",["uiGridEditConstants",function(e){return{replace:!0,priority:-99998,require:["^uiGrid","^uiGridRenderContainer"],scope:!1,compile:function(){return{post:function(t,r,n,i){var o=i[0];if(o.grid.api.edit&&o.grid.api.cellNav){"body"===i[1].containerId&&(t.$on(e.events.CANCEL_CELL_EDIT,function(){o.focus()}),t.$on(e.events.END_CELL_EDIT,function(){o.focus()}))}}}}}}]),e.directive("uiGridCell",["$compile","$injector","$timeout","uiGridConstants","uiGridEditConstants","gridUtil","$parse","uiGridEditService","$rootScope","$q",function(e,t,r,n,i,o,a,s,l,u){var c=500;if(t.has("uiGridCellNavService")){t.get("uiGridCellNavService")}return{priority:-100,restrict:"A",scope:!1,require:"?^uiGrid",link:function(t,p,d,f){function h(){p.on("dblclick",E),p.on("touchstart",g),f&&f.grid.api.cellNav&&(k=f.grid.api.cellNav.on.viewPortKeyDown(t,function(e,r){null!==r&&(r.row!==t.row||r.col!==t.col||t.col.colDef.enableCellEditOnFocus||y(e))}),_=f.grid.api.cellNav.on.navigate(t,function(e,n,i){t.col.colDef.enableCellEditOnFocus&&(n&&e.row===n.row&&e.col===n.col||e.row!==t.row||e.col!==t.col||r(function(){E(i)}))})),t.beginEditEventsWired=!0}function g(e){void 0!==e.originalEvent&&void 0!==e.originalEvent&&(e=e.originalEvent),p.on("touchend",v),L=r(function(){},c),L.then(function(){setTimeout(E,0),p.off("touchend",v)})}function v(e){r.cancel(L),p.off("touchend",v)}function m(){p.off("dblclick",E),p.off("keydown",y),p.off("touchstart",g),_(),k(),t.beginEditEventsWired=!1}function y(e){s.isStartEditKey(e)&&E(e)}function b(e,r,n){return!r.isSaving&&(angular.isFunction(e.colDef.cellEditableCondition)?e.colDef.cellEditableCondition(t,n):e.colDef.cellEditableCondition)}function E(e){t.grid.api.core.scrollToIfNecessary(t.row,t.col).then(function(){x(e)})}function x(s){if(!R&&b(t.col,t.row,s)){var c=t.row.getQualifiedColField(t.col);t.col.colDef.editModelField&&(c=o.preEval("row.entity."+t.col.colDef.editModelField)),I=a(c),A=I(t),T=t.col.editableCellTemplate,T=T.replace(n.MODEL_COL_FIELD,c),T=T.replace(n.COL_FIELD,"grid.getCellValue(row, col)");var d=t.col.colDef.editDropdownFilter?"|"+t.col.colDef.editDropdownFilter:"";T=T.replace(n.CUSTOM_FILTERS,d);var f="text";switch(t.col.colDef.type){case"boolean":f="checkbox";break;case"number":f="number";break;case"date":f="date"}T=T.replace("INPUT_TYPE",f);var h=t.col.colDef.editDropdownOptionsFunction;if(h)u.when(h(t.row.entity,t.col.colDef)).then(function(e){t.editDropdownOptionsArray=e});else{var g=t.col.colDef.editDropdownRowEntityOptionsArrayPath;t.editDropdownOptionsArray=g?w(t.row.entity,g):t.col.colDef.editDropdownOptionsArray}t.editDropdownIdLabel=t.col.colDef.editDropdownIdLabel?t.col.colDef.editDropdownIdLabel:"id",t.editDropdownValueLabel=t.col.colDef.editDropdownValueLabel?t.col.colDef.editDropdownValueLabel:"value";var v=function(){R=!0,m();var r=angular.element(T);p.append(r),N=t.$new(),e(r)(N),angular.element(p.children()[0]).addClass("ui-grid-cell-contents-hidden")};l.$$phase?v():t.$apply(v);var y=t.col.grid.api.core.on.scrollBegin(t,function(){t.grid.disableScrolling||(S(),t.grid.api.edit.raise.afterCellEdit(t.row.entity,t.col.colDef,I(t),A),y(),E(),x())}),E=t.$on(i.events.END_CELL_EDIT,function(){S(),t.grid.api.edit.raise.afterCellEdit(t.row.entity,t.col.colDef,I(t),A),E(),y(),x()}),x=t.$on(i.events.CANCEL_CELL_EDIT,function(){C(),x(),y(),E()});t.$broadcast(i.events.BEGIN_CELL_EDIT,s),r(function(){t.grid.api.edit.raise.beginCellEdit(t.row.entity,t.col.colDef,s)})}}function S(){if(t.grid.disableScrolling=!1,R){f&&f.grid.api.cellNav&&f.focus();var e=angular.element(p.children()[0]);N.$destroy();for(var r=p.children(),i=1;i<r.length;i++)angular.element(r[i]).remove();e.removeClass("ui-grid-cell-contents-hidden"),R=!1,h(),t.grid.api.core.notifyDataChange(n.dataChange.EDIT)}}function C(){t.grid.disableScrolling=!1,R&&(I.assign(t,A),t.$apply(),t.grid.api.edit.raise.cancelCellEdit(t.row.entity,t.col.colDef),S())}function w(e,t){t=t.replace(/\[(\w+)\]/g,".$1"),t=t.replace(/^\./,"");for(var r=t.split(".");r.length;){var n=r.shift();if(!(n in e))return;e=e[n]}return e}var T,A,I,L,N,R=!1;if(t.col.colDef.enableCellEdit){var _=function(){},k=function(){},O=function(){t.col.colDef.enableCellEdit&&!1!==t.row.enableCellEdit?t.beginEditEventsWired||h():t.beginEditEventsWired&&m()};O();var P=t.$watch("row",function(e,t){e!==t&&O()});t.$on("$destroy",function(){P(),p.off()})}}}}]),e.directive("uiGridEditor",["gridUtil","uiGridConstants","uiGridEditConstants","$timeout","uiGridEditService",function(e,t,r,n,i){return{scope:!0,require:["?^uiGrid","?^uiGridRenderContainer","ngModel"],compile:function(){return{pre:function(e,t,r){},post:function(e,o,a,s){var l,u,c;s[0]&&(l=s[0]),s[1]&&(u=s[1]),s[2]&&(c=s[2]),e.$on(r.events.BEGIN_CELL_EDIT,function(t,r){if(n(function(){if(o[0].focus(),!o[0].select||!e.col.colDef.enableCellEditOnFocus&&l&&l.grid.api.cellNav)try{o[0].setSelectionRange(o[0].value.length,o[0].value.length)}catch(e){}else o[0].select()}),l&&l.grid.api.cellNav)var a=l.grid.api.cellNav.on.viewPortKeyPress(e,function(e,t){if(i.isStartEditKey(e)){var r="number"==typeof e.which?e.which:e.keyCode;r>0&&(c.$setViewValue(String.fromCharCode(r),e),c.$render())}a()});o.on("mousedown",function(t){"checkbox"===o[0].type&&(o.off("blur",e.stopEdit),n(function(){o[0].focus(),o.on("blur",e.stopEdit)}))}),o.on("blur",e.stopEdit)}),e.deepEdit=!1,e.stopEdit=function(t){e.inputForm&&!e.inputForm.$valid?(t.stopPropagation(),e.$emit(r.events.CANCEL_CELL_EDIT)):e.$emit(r.events.END_CELL_EDIT),e.deepEdit=!1},o.on("click",function(t){"checkbox"!==o[0].type&&(e.deepEdit=!0,n(function(){e.grid.disableScrolling=!0}))}),o.on("keydown",function(n){switch(n.keyCode){case t.keymap.ESC:n.stopPropagation(),e.$emit(r.events.CANCEL_CELL_EDIT)}if(!e.deepEdit||n.keyCode!==t.keymap.LEFT&&n.keyCode!==t.keymap.RIGHT&&n.keyCode!==t.keymap.UP&&n.keyCode!==t.keymap.DOWN)if(l&&l.grid.api.cellNav)n.uiGridTargetRenderContainerId=u.containerId,null!==l.cellNav.handleKeyDown(n)&&e.stopEdit(n);else switch(n.keyCode){case t.keymap.ENTER:case t.keymap.TAB:n.stopPropagation(),n.preventDefault(),e.stopEdit(n)}else n.stopPropagation();return!0}),e.$on("$destroy",function(){o.off()})}}}}}]),e.directive("uiGridEditor",["$filter",function(e){function t(e){if(void 0===e||""===e)return null;var t=e.split("-");if(3!==t.length)return null;var r=parseInt(t[0],10),n=parseInt(t[1],10),i=parseInt(t[2],10);return n<1||r<1||i<1?null:new Date(r,n-1,i)}return{priority:-100,require:"?ngModel",link:function(r,n,i,o){2===angular.version.minor&&i.type&&"date"===i.type&&o&&(o.$formatters.push(function(t){return o.$setValidity(null,!t||!isNaN(t.getTime())),e("date")(t,"yyyy-MM-dd")}),o.$parsers.push(function(e){if(e&&e.length>0){var r=t(e);return o.$setValidity(null,r&&!isNaN(r.getTime())),r}return o.$setValidity(null,!0),null}))}}}]),e.directive("uiGridEditDropdown",["uiGridConstants","uiGridEditConstants","$timeout",function(e,t,r){return{require:["?^uiGrid","?^uiGridRenderContainer"],scope:!0,compile:function(){return{pre:function(e,t,r){},post:function(n,i,o,a){var s=a[0],l=a[1];n.$on(t.events.BEGIN_CELL_EDIT,function(){r(function(){i[0].focus()}),i[0].style.width=i[0].parentElement.offsetWidth-1+"px",i.on("blur",function(e){n.stopEdit(e)})}),n.stopEdit=function(e){n.$emit(t.events.END_CELL_EDIT)},i.on("keydown",function(r){switch(r.keyCode){case e.keymap.ESC:r.stopPropagation(),n.$emit(t.events.CANCEL_CELL_EDIT)}if(s&&s.grid.api.cellNav)r.uiGridTargetRenderContainerId=l.containerId,null!==s.cellNav.handleKeyDown(r)&&n.stopEdit(r);else switch(r.keyCode){case e.keymap.ENTER:case e.keymap.TAB:r.stopPropagation(),r.preventDefault(),n.stopEdit(r)}return!0}),n.$on("$destroy",function(){i.off()})}}}}}]),e.directive("uiGridEditFileChooser",["gridUtil","uiGridConstants","uiGridEditConstants","$timeout",function(e,t,r,n){return{scope:!0,require:["?^uiGrid","?^uiGridRenderContainer"],compile:function(){return{pre:function(e,t,r){},post:function(t,n,i,o){var a;o[0]&&(a=o[0]),o[1]&&o[1];var s=(a.grid,function(n){var i=n.srcElement||n.target;i&&i.files&&i.files.length>0?("function"==typeof t.col.colDef.editFileChooserCallback?t.col.colDef.editFileChooserCallback(t.row,t.col,i.files):e.logError("You need to set colDef.editFileChooserCallback to use the file chooser"),i.form.reset(),t.$emit(r.events.END_CELL_EDIT)):t.$emit(r.events.CANCEL_CELL_EDIT)});n[0].addEventListener("change",s,!1),t.$on(r.events.BEGIN_CELL_EDIT,function(){n[0].focus(),n[0].select(),n.on("blur",function(e){t.$emit(r.events.END_CELL_EDIT)})}),t.$on("$destroy",function(){n.off(),n[0].removeEventListener("change",s,!1)})}}}}}])}(),function(){"use strict";var e=angular.module("ui.grid.emptyBaseLayer",["ui.grid"]);e.service("uiGridBaseLayerService",["gridUtil","$compile",function(e,t){return{initializeGrid:function(e,t){e.baseLayer={emptyRows:[]},!1!==e.options.enableEmptyGridBaseLayer&&(e.options.enableEmptyGridBaseLayer=!t)},setNumberOfEmptyRows:function(e,t){var r=t.options.rowHeight,n=Math.ceil(e/r);if(n>0){t.baseLayer.emptyRows=[];for(var i=0;i<n;i++)t.baseLayer.emptyRows.push({})}}}}]),e.directive("uiGridEmptyBaseLayer",["gridUtil","uiGridBaseLayerService","$parse",function(e,t,r){return{require:"^uiGrid",scope:!1,compile:function(e,n){return{pre:function(e,n,i,o){var a=!1===r(i.uiGridEmptyBaseLayer)(e);t.initializeGrid(o.grid,a)},post:function(e,r,n,i){function o(){var e=s.getViewportHeight();return e!==l&&(l=e,!0)}function a(e){return".grid"+i.grid.id+" .ui-grid-render-container .ui-grid-empty-base-layer-container.ui-grid-canvas { height: "+e+"px; }"}if(i.grid.options.enableEmptyGridBaseLayer){var s=i.grid.renderContainers.body,l=s.getViewportHeight();i.grid.registerStyleComputation({func:function(){return o()&&t.setNumberOfEmptyRows(l,i.grid),a(l)}})}}}}}}]),e.directive("uiGridViewport",["$compile","gridUtil","$templateCache",function(e,t,r){return{priority:-200,scope:!1,compile:function(e,t){var n=r.get("ui-grid/emptyBaseLayerContainer");return e.prepend(n),{pre:function(e,t,r,n){},post:function(e,t,r,n){}}}}}])}(),function(){"use strict";var e=angular.module("ui.grid.expandable",["ui.grid"]);e.service("uiGridExpandableService",["gridUtil","$compile",function(e,t){var r={initializeGrid:function(t){t.expandable={},t.expandable.expandedAll=!1,t.options.enableExpandable=!1!==t.options.enableExpandable,t.options.expandableRowHeight=t.options.expandableRowHeight||150,t.options.expandableRowHeaderWidth=t.options.expandableRowHeaderWidth||40,t.options.enableExpandable&&!t.options.expandableRowTemplate&&(e.logError("You have not set the expandableRowTemplate, disabling expandable module"),t.options.enableExpandable=!1);var n={events:{expandable:{rowExpandedBeforeStateChanged:function(e,t){},rowExpandedStateChanged:function(e,t){}}},methods:{expandable:{toggleRowExpansion:function(e){var n=t.getRow(e);null!==n&&r.toggleRowExpansion(t,n)},expandAllRows:function(){r.expandAllRows(t)},collapseAllRows:function(){r.collapseAllRows(t)},toggleAllRows:function(){r.toggleAllRows(t)},expandRow:function(e){var n=t.getRow(e);null===n||n.isExpanded||r.toggleRowExpansion(t,n)},collapseRow:function(e){var n=t.getRow(e);null!==n&&n.isExpanded&&r.toggleRowExpansion(t,n)},getExpandedRows:function(){return r.getExpandedRows(t).map(function(e){return e.entity})}}}};t.api.registerEventsFromObject(n.events),t.api.registerMethodsFromObject(n.methods)},toggleRowExpansion:function(e,t){e.api.expandable.raise.rowExpandedBeforeStateChanged(t),t.isExpanded=!t.isExpanded,angular.isUndefined(t.expandedRowHeight)&&(t.expandedRowHeight=e.options.expandableRowHeight),t.isExpanded?t.height=t.grid.options.rowHeight+t.expandedRowHeight:(t.height=t.grid.options.rowHeight,e.expandable.expandedAll=!1),e.api.expandable.raise.rowExpandedStateChanged(t)},expandAllRows:function(e,t){e.renderContainers.body.visibleRowCache.forEach(function(t){t.isExpanded||r.toggleRowExpansion(e,t)}),e.expandable.expandedAll=!0,e.queueGridRefresh()},collapseAllRows:function(e){e.renderContainers.body.visibleRowCache.forEach(function(t){t.isExpanded&&r.toggleRowExpansion(e,t)}),e.expandable.expandedAll=!1,e.queueGridRefresh()},toggleAllRows:function(e){e.expandable.expandedAll?r.collapseAllRows(e):r.expandAllRows(e)},getExpandedRows:function(e){return e.rows.filter(function(e){return e.isExpanded})}};return r}]),e.directive("uiGridExpandable",["uiGridExpandableService","$templateCache",function(e,t){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(r,n,i,o){if(e.initializeGrid(o.grid),o.grid.options.enableExpandable&&!1!==o.grid.options.enableExpandableRowHeader){var a={name:"expandableButtons",displayName:"",exporterSuppressExport:!0,enableColumnResizing:!1,enableColumnMenu:!1,width:o.grid.options.expandableRowHeaderWidth||40};a.cellTemplate=t.get("ui-grid/expandableRowHeader"),a.headerCellTemplate=t.get("ui-grid/expandableTopRowHeader"),o.grid.addRowHeaderColumn(a,-90)}},post:function(e,t,r,n){}}}}}]),e.directive("uiGrid",["uiGridExpandableService","$templateCache",function(e,t){return{replace:!0,priority:599,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(e,t,r,n){n.grid.api.core.on.renderingComplete(e,function(){e.row&&e.row.grid&&e.row.grid.options&&e.row.grid.options.enableExpandable&&(n.grid.parentRow=e.row)})},post:function(e,t,r,n){}}}}}]),e.directive("uiGridExpandableRow",["uiGridExpandableService","$timeout","$compile","uiGridConstants","gridUtil","$interval","$log",function(e,t,r,n,i,o,a){return{replace:!1,priority:0,scope:!1,compile:function(){return{pre:function(e,t,n,o){i.getTemplate(e.grid.options.expandableRowTemplate).then(function(n){if(e.grid.options.expandableRowScope){var i=e.grid.options.expandableRowScope;for(var o in i)i.hasOwnProperty(o)&&(e[o]=i[o])}var a=angular.element(n);t.append(a),a=r(a)(e),e.row.expandedRendered=!0})},post:function(e,t,r,n){e.$on("$destroy",function(){e.row.expandedRendered=!1})}}}}}]),e.directive("uiGridRow",["$compile","gridUtil","$templateCache",function(e,t,r){return{priority:-200,scope:!1,compile:function(e,t){return{pre:function(e,t,r,n){e.grid.options.enableExpandable&&(e.expandableRow={},e.expandableRow.shouldRenderExpand=function(){return"body"===e.colContainer.name&&!1!==e.grid.options.enableExpandable&&e.row.isExpanded&&(!e.grid.isScrollingVertically||e.row.expandedRendered)},e.expandableRow.shouldRenderFiller=function(){return e.row.isExpanded&&("body"!==e.colContainer.name||e.grid.isScrollingVertically&&!e.row.expandedRendered)})},post:function(e,t,r,n){}}}}}]),e.directive("uiGridViewport",["$compile","gridUtil","$templateCache",function(e,t,r){return{priority:-200,scope:!1,compile:function(e,t){var n=angular.element(e.children().children()[0]),i=r.get("ui-grid/expandableScrollFiller"),o=r.get("ui-grid/expandableRow");return n.append(o),n.append(i),{pre:function(e,t,r,n){},post:function(e,t,r,n){}}}}}])}(),function(){"use strict";var e=angular.module("ui.grid.exporter",["ui.grid"]);e.constant("uiGridExporterConstants",{featureName:"exporter",ALL:"all",VISIBLE:"visible",SELECTED:"selected",CSV_CONTENT:"CSV_CONTENT",BUTTON_LABEL:"BUTTON_LABEL",FILE_NAME:"FILE_NAME"}),e.service("uiGridExporterService",["$q","uiGridExporterConstants","gridUtil","$compile","$interval","i18nService",function(e,t,r,n,i,o){var a={delay:100,initializeGrid:function(e){e.exporter={},this.defaultGridOptions(e.options);var t={events:{exporter:{}},methods:{exporter:{csvExport:function(t,r){a.csvExport(e,t,r)},pdfExport:function(t,r){a.pdfExport(e,t,r)}}}};e.api.registerEventsFromObject(t.events),e.api.registerMethodsFromObject(t.methods),e.api.core.addToGridMenu?a.addToMenu(e):i(function(){e.api.core.addToGridMenu&&a.addToMenu(e)},this.delay,1)},defaultGridOptions:function(e){e.exporterSuppressMenu=!0===e.exporterSuppressMenu,e.exporterMenuLabel=e.exporterMenuLabel?e.exporterMenuLabel:"Export",e.exporterSuppressColumns=e.exporterSuppressColumns?e.exporterSuppressColumns:[],e.exporterCsvColumnSeparator=e.exporterCsvColumnSeparator?e.exporterCsvColumnSeparator:",",e.exporterCsvFilename=e.exporterCsvFilename?e.exporterCsvFilename:"download.csv",e.exporterPdfFilename=e.exporterPdfFilename?e.exporterPdfFilename:"download.pdf",e.exporterOlderExcelCompatibility=!0===e.exporterOlderExcelCompatibility,e.exporterIsExcelCompatible=!0===e.exporterIsExcelCompatible,e.exporterMenuItemOrder=e.exporterMenuItemOrder?e.exporterMenuItemOrder:200,e.exporterPdfDefaultStyle=e.exporterPdfDefaultStyle?e.exporterPdfDefaultStyle:{fontSize:11},e.exporterPdfTableStyle=e.exporterPdfTableStyle?e.exporterPdfTableStyle:{margin:[0,5,0,15]},e.exporterPdfTableHeaderStyle=e.exporterPdfTableHeaderStyle?e.exporterPdfTableHeaderStyle:{bold:!0,fontSize:12,color:"black"},e.exporterPdfHeader=e.exporterPdfHeader?e.exporterPdfHeader:null,e.exporterPdfFooter=e.exporterPdfFooter?e.exporterPdfFooter:null,e.exporterPdfOrientation=e.exporterPdfOrientation?e.exporterPdfOrientation:"landscape",e.exporterPdfPageSize=e.exporterPdfPageSize?e.exporterPdfPageSize:"A4",e.exporterPdfMaxGridWidth=e.exporterPdfMaxGridWidth?e.exporterPdfMaxGridWidth:720,e.exporterMenuAllData=void 0===e.exporterMenuAllData||e.exporterMenuAllData,e.exporterMenuVisibleData=void 0===e.exporterMenuVisibleData||e.exporterMenuVisibleData,e.exporterMenuSelectedData=void 0===e.exporterMenuSelectedData||e.exporterMenuSelectedData,e.exporterMenuCsv=void 0===e.exporterMenuCsv||e.exporterMenuCsv,e.exporterMenuPdf=void 0===e.exporterMenuPdf||e.exporterMenuPdf,e.exporterPdfCustomFormatter=e.exporterPdfCustomFormatter&&"function"==typeof e.exporterPdfCustomFormatter?e.exporterPdfCustomFormatter:function(e){return e},e.exporterHeaderFilterUseName=!0===e.exporterHeaderFilterUseName,e.exporterFieldCallback=e.exporterFieldCallback?e.exporterFieldCallback:function(e,t,r,n){return n},e.exporterAllDataFn=e.exporterAllDataFn?e.exporterAllDataFn:null,null==e.exporterAllDataFn&&e.exporterAllDataPromise&&(e.exporterAllDataFn=e.exporterAllDataPromise)},addToMenu:function(e){e.api.core.addToGridMenu(e,[{title:o.getSafeText("gridMenu.exporterAllAsCsv"),action:function(r){e.api.exporter.csvExport(t.ALL,t.ALL)},shown:function(){return e.options.exporterMenuCsv&&e.options.exporterMenuAllData},order:e.options.exporterMenuItemOrder},{title:o.getSafeText("gridMenu.exporterVisibleAsCsv"),action:function(r){e.api.exporter.csvExport(t.VISIBLE,t.VISIBLE)},shown:function(){return e.options.exporterMenuCsv&&e.options.exporterMenuVisibleData},order:e.options.exporterMenuItemOrder+1},{title:o.getSafeText("gridMenu.exporterSelectedAsCsv"),action:function(r){e.api.exporter.csvExport(t.SELECTED,t.VISIBLE)},shown:function(){return e.options.exporterMenuCsv&&e.options.exporterMenuSelectedData&&e.api.selection&&e.api.selection.getSelectedRows().length>0},order:e.options.exporterMenuItemOrder+2},{title:o.getSafeText("gridMenu.exporterAllAsPdf"),action:function(r){e.api.exporter.pdfExport(t.ALL,t.ALL)},shown:function(){return e.options.exporterMenuPdf&&e.options.exporterMenuAllData},order:e.options.exporterMenuItemOrder+3},{title:o.getSafeText("gridMenu.exporterVisibleAsPdf"),action:function(r){e.api.exporter.pdfExport(t.VISIBLE,t.VISIBLE)},shown:function(){return e.options.exporterMenuPdf&&e.options.exporterMenuVisibleData},order:e.options.exporterMenuItemOrder+4},{title:o.getSafeText("gridMenu.exporterSelectedAsPdf"),action:function(r){e.api.exporter.pdfExport(t.SELECTED,t.VISIBLE)},shown:function(){return e.options.exporterMenuPdf&&e.options.exporterMenuSelectedData&&e.api.selection&&e.api.selection.getSelectedRows().length>0},order:e.options.exporterMenuItemOrder+5}])},csvExport:function(e,t,r){var n=this;this.loadAllDataIfNeeded(e,t,r).then(function(){var i=e.options.showHeader?n.getColumnHeaders(e,r):[],o=n.getData(e,t,r),a=n.formatAsCsv(i,o,e.options.exporterCsvColumnSeparator);n.downloadFile(e.options.exporterCsvFilename,a,e.options.exporterCsvColumnSeparator,e.options.exporterOlderExcelCompatibility,e.options.exporterIsExcelCompatible)})},loadAllDataIfNeeded:function(r,n,i){if(n===t.ALL&&r.rows.length!==r.options.totalItems&&r.options.exporterAllDataFn)return r.options.exporterAllDataFn().then(function(){r.modifyRows(r.options.data)});var o=e.defer();return o.resolve(),o.promise},getColumnHeaders:function(e,r){var n,i=[];if(r===t.ALL)n=e.columns;else{var o=e.renderContainers.left?e.renderContainers.left.visibleColumnCache.filter(function(e){return e.visible}):[],a=e.renderContainers.body?e.renderContainers.body.visibleColumnCache.filter(function(e){return e.visible}):[],s=e.renderContainers.right?e.renderContainers.right.visibleColumnCache.filter(function(e){return e.visible}):[];n=o.concat(a,s)}return n.forEach(function(t,r){!0!==t.colDef.exporterSuppressExport&&-1===e.options.exporterSuppressColumns.indexOf(t.name)&&i.push({name:t.field,displayName:e.options.exporterHeaderFilter?e.options.exporterHeaderFilterUseName?e.options.exporterHeaderFilter(t.name):e.options.exporterHeaderFilter(t.displayName):t.displayName,width:t.drawnWidth?t.drawnWidth:t.width,align:"number"===t.colDef.type?"right":"left"})}),i},getData:function(e,n,i,o){var a,s,l=[];switch(n){case t.ALL:a=e.rows;break;case t.VISIBLE:a=e.getVisibleRows();break;case t.SELECTED:e.api.selection?a=e.api.selection.getSelectedGridRows():r.logError("selection feature must be enabled to allow selected rows to be exported")}if(i===t.ALL)s=e.columns;else{var u=e.renderContainers.left?e.renderContainers.left.visibleColumnCache.filter(function(e){return e.visible}):[],c=e.renderContainers.body?e.renderContainers.body.visibleColumnCache.filter(function(e){return e.visible}):[],p=e.renderContainers.right?e.renderContainers.right.visibleColumnCache.filter(function(e){return e.visible}):[];s=u.concat(c,p)}return a.forEach(function(r,n){if(!1!==r.exporterEnableExporting){var a=[];s.forEach(function(n,s){if((n.visible||i===t.ALL)&&!0!==n.colDef.exporterSuppressExport&&-1===e.options.exporterSuppressColumns.indexOf(n.name)){var l=o?e.getCellDisplayValue(r,n):e.getCellValue(r,n),u={value:e.options.exporterFieldCallback(e,r,n,l)};n.colDef.exporterPdfAlign&&(u.alignment=n.colDef.exporterPdfAlign),a.push(u)}}),l.push(a)}}),l},formatAsCsv:function(e,t,r){var n=this,i=e.map(function(e){return{value:e.displayName}}),o=i.length>0?n.formatRowAsCsv(this,r)(i)+"\n":"";return o+=t.map(this.formatRowAsCsv(this,r)).join("\n")},formatRowAsCsv:function(e,t){return function(r){return r.map(e.formatFieldAsCsv).join(t)}},formatFieldAsCsv:function(e){return null==e.value?"":"number"==typeof e.value?e.value:"boolean"==typeof e.value?e.value?"TRUE":"FALSE":"string"==typeof e.value?'"'+e.value.replace(/"/g,'""')+'"':JSON.stringify(e.value)},isIE:function(){var e=navigator.userAgent.search(/(?:Edge|MSIE|Trident\/.*; rv:)/),t=!1;return-1!==e&&(t=!0),t},downloadFile:function(e,t,r,n,i){var o,a=document,s=a.createElement("a"),l="application/octet-stream;charset=utf-8",u=this.isIE();if(i&&(t="sep="+r+"\r\n"+t),navigator.msSaveBlob)return navigator.msSaveOrOpenBlob(new Blob([n?"\ufeff":"",t],{type:l}),e);if(u){var c=a.createElement("iframe");return document.body.appendChild(c),c.contentWindow.document.open("text/html","replace"),c.contentWindow.document.write(t),c.contentWindow.document.close(),c.contentWindow.focus(),c.contentWindow.document.execCommand("SaveAs",!0,e),document.body.removeChild(c),!0}if("download"in s){var p=new Blob([n?"\ufeff":"",t],{type:l});o=URL.createObjectURL(p),s.setAttribute("download",e)}else o="data:"+l+","+encodeURIComponent(t),s.setAttribute("target","_blank");s.href=o,s.setAttribute("style","display:none;"),a.body.appendChild(s),setTimeout(function(){if(s.click)s.click();else if(document.createEvent){var e=document.createEvent("MouseEvents");e.initEvent("click",!0,!0),s.dispatchEvent(e)}a.body.removeChild(s)},this.delay)},pdfExport:function(e,t,r){var n=this;this.loadAllDataIfNeeded(e,t,r).then(function(){var i=n.getColumnHeaders(e,r),o=n.getData(e,t,r),a=n.prepareAsPdf(e,i,o);n.isIE()||-1!==navigator.appVersion.indexOf("Edge")?n.downloadPDF(e.options.exporterPdfFilename,a):pdfMake.createPdf(a).open()})},downloadPDF:function(e,t){var r,n=document;n.createElement("a");r=this.isIE();var i,o=pdfMake.createPdf(t);o.getBuffer(function(t){if(i=new Blob([t]),navigator.msSaveBlob)return navigator.msSaveBlob(i,e);if(r){var o=n.createElement("iframe");return document.body.appendChild(o),o.contentWindow.document.open("text/html","replace"),o.contentWindow.document.write(i),o.contentWindow.document.close(),o.contentWindow.focus(),o.contentWindow.document.execCommand("SaveAs",!0,e),document.body.removeChild(o),!0}})},prepareAsPdf:function(e,t,r){var n=this.calculatePdfHeaderWidths(e,t),i=t.map(function(e){return{text:e.displayName,style:"tableHeader"}}),o=r.map(this.formatRowAsPdf(this)),a=[i].concat(o),s={pageOrientation:e.options.exporterPdfOrientation,pageSize:e.options.exporterPdfPageSize,content:[{style:"tableStyle",table:{headerRows:1,widths:n,body:a}}],styles:{tableStyle:e.options.exporterPdfTableStyle,tableHeader:e.options.exporterPdfTableHeaderStyle},defaultStyle:e.options.exporterPdfDefaultStyle};return e.options.exporterPdfLayout&&(s.layout=e.options.exporterPdfLayout),e.options.exporterPdfHeader&&(s.header=e.options.exporterPdfHeader),e.options.exporterPdfFooter&&(s.footer=e.options.exporterPdfFooter),e.options.exporterPdfCustomFormatter&&(s=e.options.exporterPdfCustomFormatter(s)),s},calculatePdfHeaderWidths:function(e,t){var r=0;t.forEach(function(e){"number"==typeof e.width&&(r+=e.width)});var n=0;t.forEach(function(e){if("*"===e.width&&(n+=100),"string"==typeof e.width&&e.width.match(/(\d)*%/)){var t=parseInt(e.width.match(/(\d)*%/)[0]);e.width=r*t/100,n+=e.width}});var i=r+n;return t.map(function(t){return"*"===t.width?t.width:t.width*e.options.exporterPdfMaxGridWidth/i})},formatRowAsPdf:function(e){return function(t){return t.map(e.formatFieldAsPdfString)}},formatFieldAsPdfString:function(e){var t;return t=null==e.value?"":"number"==typeof e.value?e.value.toString():"boolean"==typeof e.value?e.value?"TRUE":"FALSE":"string"==typeof e.value?e.value.replace(/"/g,'""'):JSON.stringify(e.value).replace(/^"/,"").replace(/"$/,""),e.alignment&&"string"==typeof e.alignment&&(t={text:t,alignment:e.alignment}),t}};return a}]),e.directive("uiGridExporter",["uiGridExporterConstants","uiGridExporterService","gridUtil","$compile",function(e,t,r,n){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,link:function(e,r,n,i){t.initializeGrid(i.grid),i.grid.exporter.$scope=e}}}])}(),function(){"use strict";var e=angular.module("ui.grid.grouping",["ui.grid","ui.grid.treeBase"]);e.constant("uiGridGroupingConstants",{featureName:"grouping",rowHeaderColName:"treeBaseRowHeaderCol",EXPANDED:"expanded",COLLAPSED:"collapsed",aggregation:{COUNT:"count",SUM:"sum",MAX:"max",MIN:"min",AVG:"avg"}}),e.service("uiGridGroupingService",["$q","uiGridGroupingConstants","gridUtil","rowSorter","GridRow","gridClassFactory","i18nService","uiGridConstants","uiGridTreeBaseService",function(e,t,r,n,i,o,a,s,l){var u={initializeGrid:function(e,t){l.initializeGrid(e,t),e.grouping={},e.grouping.groupHeaderCache={},u.defaultGridOptions(e.options),e.registerRowsProcessor(u.groupRows,400),e.registerColumnBuilder(u.groupingColumnBuilder),e.registerColumnsProcessor(u.groupingColumnProcessor,400);var r={events:{grouping:{aggregationChanged:{},groupingChanged:{}}},methods:{grouping:{getGrouping:function(t){var r=u.getGrouping(e);return r.grouping.forEach(function(e){e.colName=e.col.name,delete e.col}),r.aggregations.forEach(function(e){e.colName=e.col.name,delete e.col}),r.aggregations=r.aggregations.filter(function(e){return!e.aggregation.source||"grouping"!==e.aggregation.source}),t&&(r.rowExpandedStates=u.getRowExpandedStates(e.grouping.groupingHeaderCache)),r},setGrouping:function(t){u.setGrouping(e,t)},groupColumn:function(t){var r=e.getColumn(t);u.groupColumn(e,r)},ungroupColumn:function(t){var r=e.getColumn(t);u.ungroupColumn(e,r)},clearGrouping:function(){u.clearGrouping(e)},aggregateColumn:function(t,r,n){var i=e.getColumn(t);u.aggregateColumn(e,i,r,n)}}}};e.api.registerEventsFromObject(r.events),e.api.registerMethodsFromObject(r.methods),e.api.core.on.sortChanged(t,u.tidyPriorities)},defaultGridOptions:function(e){e.enableGrouping=!1!==e.enableGrouping,e.groupingShowCounts=!1!==e.groupingShowCounts,e.groupingNullLabel=void 0===e.groupingNullLabel?"Null":e.groupingNullLabel,e.enableGroupHeaderSelection=!0===e.enableGroupHeaderSelection},groupingColumnBuilder:function(e,n,i){if(!1!==e.enableGrouping){void 0===n.grouping&&void 0!==e.grouping?(n.grouping=angular.copy(e.grouping),void 0!==n.grouping.groupPriority&&n.grouping.groupPriority>-1&&(n.treeAggregationFn=l.nativeAggregations()[t.aggregation.COUNT].aggregationFn,n.treeAggregationFinalizerFn=u.groupedFinalizerFn)):void 0===n.grouping&&(n.grouping={}),void 0!==n.grouping&&void 0!==n.grouping.groupPriority&&n.grouping.groupPriority>=0&&(n.suppressRemoveSort=!0);var o={name:"ui.grid.grouping.group",title:a.get().grouping.group,icon:"ui-grid-icon-indent-right",shown:function(){return void 0===this.context.col.grouping||void 0===this.context.col.grouping.groupPriority||this.context.col.grouping.groupPriority<0},action:function(){u.groupColumn(this.context.col.grid,this.context.col)}},s={name:"ui.grid.grouping.ungroup",title:a.get().grouping.ungroup,icon:"ui-grid-icon-indent-left",shown:function(){return void 0!==this.context.col.grouping&&void 0!==this.context.col.grouping.groupPriority&&this.context.col.grouping.groupPriority>=0},action:function(){u.ungroupColumn(this.context.col.grid,this.context.col)}},c={name:"ui.grid.grouping.aggregateRemove",title:a.get().grouping.aggregate_remove,shown:function(){return void 0!==this.context.col.treeAggregationFn},action:function(){u.aggregateColumn(this.context.col.grid,this.context.col,null)}},p=function(e,t){t=t||a.get().grouping["aggregate_"+e]||e;var i={name:"ui.grid.grouping.aggregate"+e,title:t,shown:function(){return void 0===this.context.col.treeAggregation||void 0===this.context.col.treeAggregation.type||this.context.col.treeAggregation.type!==e},action:function(){u.aggregateColumn(this.context.col.grid,this.context.col,e)}};r.arrayContainsObjectWithProperty(n.menuItems,"name","ui.grid.grouping.aggregate"+e)||n.menuItems.push(i)};!1!==n.colDef.groupingShowGroupingMenu&&(r.arrayContainsObjectWithProperty(n.menuItems,"name","ui.grid.grouping.group")||n.menuItems.push(o),r.arrayContainsObjectWithProperty(n.menuItems,"name","ui.grid.grouping.ungroup")||n.menuItems.push(s)),!1!==n.colDef.groupingShowAggregationMenu&&(angular.forEach(l.nativeAggregations(),function(e,t){p(t)}),angular.forEach(i.treeCustomAggregations,function(e,t){p(t,e.menuTitle)}),r.arrayContainsObjectWithProperty(n.menuItems,"name","ui.grid.grouping.aggregateRemove")||n.menuItems.push(c))}},groupingColumnProcessor:function(e,t){return e=u.moveGroupColumns(this,e,t)},groupedFinalizerFn:function(e){var t=this;void 0!==e.groupVal?(e.rendered=e.groupVal,t.grid.options.groupingShowCounts&&"date"!==t.colDef.type&&"object"!==t.colDef.type&&(e.rendered+=" ("+e.value+")")):e.rendered=null},moveGroupColumns:function(e,t,r){return!1===e.options.moveGroupColumns?t:(t.forEach(function(e,t){e.groupingPosition=t}),t.sort(function(e,t){var r,n;return r=e.isRowHeader?e.headerPriority:void 0===e.grouping||void 0===e.grouping.groupPriority||e.grouping.groupPriority<0?null:e.grouping.groupPriority,n=t.isRowHeader?t.headerPriority:void 0===t.grouping||void 0===t.grouping.groupPriority||t.grouping.groupPriority<0?null:t.grouping.groupPriority,null!==r&&null===n?-1:null!==n&&null===r?1:null!==r&&null!==n?r-n:e.groupingPosition-t.groupingPosition}),t.forEach(function(e,t){delete e.groupingPosition}),t)},groupColumn:function(e,r){void 0===r.grouping&&(r.grouping={});var n=u.getGrouping(e);r.grouping.groupPriority=n.grouping.length,r.previousSort=angular.copy(r.sort),r.sort?void 0!==r.sort.direction&&null!==r.sort.direction||(r.sort.direction=s.ASC):r.sort={direction:s.ASC},r.treeAggregation={type:t.aggregation.COUNT,source:"grouping"},r.treeAggregationFn=l.nativeAggregations()[t.aggregation.COUNT].aggregationFn,r.treeAggregationFinalizerFn=u.groupedFinalizerFn,e.api.grouping.raise.groupingChanged(r),e.api.core.raise.sortChanged(e,e.getColumnSorting()),e.queueGridRefresh()},ungroupColumn:function(e,t){void 0!==t.grouping&&(delete t.grouping.groupPriority,delete t.treeAggregation,delete t.customTreeAggregationFinalizer,t.previousSort&&(t.sort=t.previousSort,delete t.previousSort),u.tidyPriorities(e),e.api.grouping.raise.groupingChanged(t),e.api.core.raise.sortChanged(e,e.getColumnSorting()),e.queueGridRefresh())},aggregateColumn:function(e,t,r){void 0!==t.grouping&&void 0!==t.grouping.groupPriority&&t.grouping.groupPriority>=0&&u.ungroupColumn(e,t);var n={};void 0!==e.options.treeCustomAggregations[r]?n=e.options.treeCustomAggregations[r]:void 0!==l.nativeAggregations()[r]&&(n=l.nativeAggregations()[r]),t.treeAggregation={type:r,label:a.get().aggregation[n.label]||n.label},t.treeAggregationFn=n.aggregationFn,t.treeAggregationFinalizerFn=n.finalizerFn,e.api.grouping.raise.aggregationChanged(t),e.queueGridRefresh()},setGrouping:function(e,t){void 0!==t&&(u.clearGrouping(e),t.grouping&&t.grouping.length&&t.grouping.length>0&&t.grouping.forEach(function(t){var r=e.getColumn(t.colName);r&&u.groupColumn(e,r)}),t.aggregations&&t.aggregations.length&&t.aggregations.forEach(function(t){var r=e.getColumn(t.colName);r&&u.aggregateColumn(e,r,t.aggregation.type)}),t.rowExpandedStates&&u.applyRowExpandedStates(e.grouping.groupingHeaderCache,t.rowExpandedStates))},clearGrouping:function(e){var t=u.getGrouping(e);t.grouping.length>0&&t.grouping.forEach(function(t){t.col||(t.col=e.getColumn(t.colName)),u.ungroupColumn(e,t.col)}),t.aggregations.length>0&&t.aggregations.forEach(function(t){t.col||(t.col=e.getColumn(t.colName)),u.aggregateColumn(e,t.col,null)})},tidyPriorities:function(e){void 0!==e&&void 0===e.grid||void 0===this.grid||(e=this.grid);var t=[],r=[];e.columns.forEach(function(e,n){void 0!==e.grouping&&void 0!==e.grouping.groupPriority&&e.grouping.groupPriority>=0?t.push(e):void 0!==e.sort&&void 0!==e.sort.priority&&e.sort.priority>=0&&r.push(e)}),t.sort(function(e,t){return e.grouping.groupPriority-t.grouping.groupPriority}),t.forEach(function(e,t){e.grouping.groupPriority=t,e.suppressRemoveSort=!0,void 0===e.sort&&(e.sort={}),e.sort.priority=t});var n=t.length;r.sort(function(e,t){return e.sort.priority-t.sort.priority}),r.forEach(function(e,t){e.sort.priority=n,e.suppressRemoveSort=e.colDef.suppressRemoveSort,n++})},groupRows:function(e){if(0===e.length)return e;var t=this;t.grouping.oldGroupingHeaderCache=t.grouping.groupingHeaderCache||{},t.grouping.groupingHeaderCache={};for(var r=u.initialiseProcessingState(t),i=function(i,s){var l=t.getCellValue(a,i.col);i.initialised&&0===n.getSortFn(t,i.col,e)(l,i.currentValue)||(u.insertGroupHeader(t,e,o,r,s),o++)},o=0;o<e.length;o++){var a=e[o];a.visible&&r.forEach(i)}return delete t.grouping.oldGroupingHeaderCache,e},initialiseProcessingState:function(e){var t=[];return u.getGrouping(e).grouping.forEach(function(e,r){t.push({fieldName:e.field,col:e.col,initialised:!1,currentValue:null,currentRow:null})}),t},getGrouping:function(e){var t=[],r=[];return e.columns.forEach(function(e,n){e.grouping&&void 0!==e.grouping.groupPriority&&e.grouping.groupPriority>=0&&t.push({field:e.field,col:e,groupPriority:e.grouping.groupPriority,grouping:e.grouping}),e.treeAggregation&&e.treeAggregation.type&&r.push({field:e.field,col:e,aggregation:e.treeAggregation})}),t.sort(function(e,t){return e.groupPriority-t.groupPriority}),t.forEach(function(e,t){e.grouping.groupPriority=t,e.groupPriority=t,delete e.grouping}),{grouping:t,aggregations:r}},insertGroupHeader:function(e,t,r,n,a){var s=(n[a].fieldName,n[a].col),l=e.getCellValue(t[r],s),c=l;void 0!==l&&null!==l||(c=e.options.groupingNullLabel);for(var p=function(e){return angular.isObject(e)?JSON.stringify(e):e},d=e.grouping.oldGroupingHeaderCache,f=0;f<a;f++)d&&d[p(n[f].currentValue)]&&(d=d[p(n[f].currentValue)].children);var h;for(d&&d[p(l)]?(h=d[p(l)].row,h.entity={}):(h=new i({},null,e),o.rowTemplateAssigner.call(e,h)),h.entity["$$"+n[a].col.uid]={groupVal:c},h.treeLevel=a,h.groupHeader=!0,h.internalRow=!0,h.enableCellEdit=!1,h.enableSelection=e.options.enableGroupHeaderSelection,n[a].initialised=!0,n[a].currentValue=l,n[a].currentRow=h,u.finaliseProcessingState(n,a+1),t.splice(r,0,h),d=e.grouping.groupingHeaderCache,f=0;f<a;f++)d=d[p(n[f].currentValue)].children;d[p(l)]={row:h,children:{}}},finaliseProcessingState:function(e,t){for(var r=t;r<e.length;r++)e[r].initialised=!1,e[r].currentRow=null,e[r].currentValue=null},getRowExpandedStates:function(e){if(void 0===e)return{};var t={};return angular.forEach(e,function(e,r){t[r]={state:e.row.treeNode.state},e.children?t[r].children=u.getRowExpandedStates(e.children):t[r].children={}}),t},applyRowExpandedStates:function(e,t){void 0!==t&&angular.forEach(t,function(t,r){e[r]&&(e[r].row.treeNode.state=t.state,t.children&&e[r].children&&u.applyRowExpandedStates(e[r].children,t.children))})}};return u}]),e.directive("uiGridGrouping",["uiGridGroupingConstants","uiGridGroupingService","$templateCache",function(e,t,r){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(e,r,n,i){!1!==i.grid.options.enableGrouping&&t.initializeGrid(i.grid,e)},post:function(e,t,r,n){}}}}}])}(),function(){"use strict";var e=angular.module("ui.grid.importer",["ui.grid"]);e.constant("uiGridImporterConstants",{featureName:"importer"}),e.service("uiGridImporterService",["$q","uiGridConstants","uiGridImporterConstants","gridUtil","$compile","$interval","i18nService","$window",function(e,t,r,n,i,o,a,s){var l={initializeGrid:function(e,t){t.importer={$scope:e},this.defaultGridOptions(t.options);var r={events:{importer:{}},methods:{importer:{importFile:function(e){l.importThisFile(t,e)}}}};t.api.registerEventsFromObject(r.events),t.api.registerMethodsFromObject(r.methods),t.options.enableImporter&&t.options.importerShowMenu&&(t.api.core.addToGridMenu?l.addToMenu(t):o(function(){t.api.core.addToGridMenu&&l.addToMenu(t)},100,1))},defaultGridOptions:function(e){e.enableImporter||void 0===e.enableImporter?s.hasOwnProperty("File")&&s.hasOwnProperty("FileReader")&&s.hasOwnProperty("FileList")&&s.hasOwnProperty("Blob")?e.enableImporter=!0:(n.logError("The File APIs are not fully supported in this browser, grid importer cannot be used."),e.enableImporter=!1):e.enableImporter=!1,e.importerProcessHeaders=e.importerProcessHeaders||l.processHeaders,e.importerHeaderFilter=e.importerHeaderFilter||function(e){return e},e.importerErrorCallback&&"function"==typeof e.importerErrorCallback||delete e.importerErrorCallback,!0!==e.enableImporter||e.importerDataAddCallback||(n.logError("You have not set an importerDataAddCallback, importer is disabled"),e.enableImporter=!1),e.importerShowMenu=!1!==e.importerShowMenu,e.importerObjectCallback=e.importerObjectCallback||function(e,t){return t}},addToMenu:function(e){e.api.core.addToGridMenu(e,[{title:a.getSafeText("gridMenu.importerTitle"),order:150},{templateUrl:"ui-grid/importerMenuItemContainer",action:function(t){this.grid.api.importer.importAFile(e)},order:151}])},importThisFile:function(e,t){if(!t)return void n.logError("No file object provided to importThisFile, should be impossible, aborting");var r=new FileReader;switch(t.type){case"application/json":r.onload=l.importJsonClosure(e);break;default:r.onload=l.importCsvClosure(e)}r.readAsText(t)},importJsonClosure:function(e){return function(t){var r,n=[],i=l.parseJson(e,t);null!==i&&(i.forEach(function(t,i){r=l.newObject(e),angular.extend(r,t),r=e.options.importerObjectCallback(e,r),n.push(r)}),l.addObjects(e,n))}},parseJson:function(e,t){var r;try{r=JSON.parse(t.target.result)}catch(r){return void l.alertError(e,"importer.invalidJson","File could not be processed, is it valid json? Content was: ",t.target.result)}return Array.isArray(r)?r:(l.alertError(e,"importer.jsonNotarray","Import failed, file is not an array, file was: ",t.target.result),[])},importCsvClosure:function(e){return function(t){var r=l.parseCsv(t);if(!r||r.length<1)return void l.alertError(e,"importer.invalidCsv","File could not be processed, is it valid csv? Content was: ",t.target.result);var n=l.createCsvObjects(e,r);if(!n||0===n.length)return void l.alertError(e,"importer.noObjects","Objects were not able to be derived, content was: ",t.target.result);l.addObjects(e,n)}},parseCsv:function(e){var t=e.target.result;return CSV.parse(t)},createCsvObjects:function(e,t){var r=e.options.importerProcessHeaders(e,t.shift());if(!r||0===r.length)return l.alertError(e,"importer.noHeaders","Column names could not be derived, content was: ",t),[];var n,i=[];return t.forEach(function(t,o){n=l.newObject(e),null!==t&&t.forEach(function(e,t){null!==r[t]&&(n[r[t]]=e)}),n=e.options.importerObjectCallback(e,n),i.push(n)}),i},processHeaders:function(e,t){var r=[];if(e.options.columnDefs&&0!==e.options.columnDefs.length){var n=l.flattenColumnDefs(e,e.options.columnDefs);return t.forEach(function(e,t){n[e]?r.push(n[e]):n[e.toLowerCase()]?r.push(n[e.toLowerCase()]):r.push(null)}),r}return t.forEach(function(e,t){r.push(e.replace(/[^0-9a-zA-Z\-_]/g,"_"))}),r},flattenColumnDefs:function(e,t){var r={};return t.forEach(function(t,n){t.name&&(r[t.name]=t.field||t.name,r[t.name.toLowerCase()]=t.field||t.name),t.field&&(r[t.field]=t.field||t.name,r[t.field.toLowerCase()]=t.field||t.name),t.displayName&&(r[t.displayName]=t.field||t.name,r[t.displayName.toLowerCase()]=t.field||t.name),t.displayName&&e.options.importerHeaderFilter&&(r[e.options.importerHeaderFilter(t.displayName)]=t.field||t.name,r[e.options.importerHeaderFilter(t.displayName).toLowerCase()]=t.field||t.name)}),r},addObjects:function(e,r,n){if(e.api.rowEdit){var i=e.registerDataChangeCallback(function(){e.api.rowEdit.setRowsDirty(r),i()},[t.dataChange.ROW]);e.importer.$scope.$on("$destroy",i)}e.importer.$scope.$apply(e.options.importerDataAddCallback(e,r))},newObject:function(e){return void 0!==e.options&&void 0!==e.options.importerNewObject?new e.options.importerNewObject:{}},alertError:function(e,t,r,i){e.options.importerErrorCallback?e.options.importerErrorCallback(e,t,r,i):(s.alert(a.getSafeText(t)),n.logError(r+i))}};return l}]),e.directive("uiGridImporter",["uiGridImporterConstants","uiGridImporterService","gridUtil","$compile",function(e,t,r,n){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,link:function(e,r,n,i){t.initializeGrid(e,i.grid)}}}]),e.directive("uiGridImporterMenuItem",["uiGridImporterConstants","uiGridImporterService","gridUtil","$compile",function(e,t,r,n){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,templateUrl:"ui-grid/importerMenuItem",link:function(e,n,i,o){var a=function(e){var r=e.srcElement||e.target;if(r&&r.files&&1===r.files.length){var n=r.files[0];t.importThisFile(l,n),r.form.reset()}},s=n[0].querySelectorAll(".ui-grid-importer-file-chooser"),l=o.grid;1!==s.length?r.logError("Found > 1 or < 1 file choosers within the menu item, error, cannot continue"):s[0].addEventListener("change",a,!1)}}}])}(),function(){"use strict";var e=angular.module("ui.grid.infiniteScroll",["ui.grid"]);e.service("uiGridInfiniteScrollService",["gridUtil","$compile","$timeout","uiGridConstants","ScrollEvent","$q",function(e,t,r,n,i,o){var a={initializeGrid:function(e,t){if(a.defaultGridOptions(e.options),e.options.enableInfiniteScroll){e.infiniteScroll={dataLoading:!1},a.setScrollDirections(e,e.options.infiniteScrollUp,e.options.infiniteScrollDown),e.api.core.on.scrollEnd(t,a.handleScroll);var r={events:{infiniteScroll:{needLoadMoreData:function(e,t){},needLoadMoreDataTop:function(e,t){}}},methods:{infiniteScroll:{dataLoaded:function(t,r){return a.setScrollDirections(e,t,r),a.adjustScroll(e).then(function(){e.infiniteScroll.dataLoading=!1})},resetScroll:function(t,r){a.setScrollDirections(e,t,r),a.adjustInfiniteScrollPosition(e,0)},saveScrollPercentage:function(){e.infiniteScroll.prevScrollTop=e.renderContainers.body.prevScrollTop,e.infiniteScroll.previousVisibleRows=e.getVisibleRowCount()},dataRemovedTop:function(t,r){a.dataRemovedTop(e,t,r)},dataRemovedBottom:function(t,r){a.dataRemovedBottom(e,t,r)},setScrollDirections:function(t,r){a.setScrollDirections(e,t,r)}}}};e.api.registerEventsFromObject(r.events),e.api.registerMethodsFromObject(r.methods)}},defaultGridOptions:function(e){e.enableInfiniteScroll=!1!==e.enableInfiniteScroll,e.infiniteScrollRowsFromEnd=e.infiniteScrollRowsFromEnd||20,e.infiniteScrollUp=!0===e.infiniteScrollUp,e.infiniteScrollDown=!1!==e.infiniteScrollDown},setScrollDirections:function(e,t,r){e.infiniteScroll.scrollUp=!0===t,e.suppressParentScrollUp=!0===t,e.infiniteScroll.scrollDown=!1!==r,e.suppressParentScrollDown=!1!==r},handleScroll:function(e){if(!(e.grid.infiniteScroll&&e.grid.infiniteScroll.dataLoading||"ui.grid.adjustInfiniteScrollPosition"===e.source)&&e.y)if(0===e.y.percentage)e.grid.scrollDirection=n.scrollDirection.UP,a.loadData(e.grid);else if(1===e.y.percentage)e.grid.scrollDirection=n.scrollDirection.DOWN,a.loadData(e.grid);else{var t=e.grid.options.infiniteScrollRowsFromEnd/e.grid.renderContainers.body.visibleRowCache.length;e.grid.scrollDirection===n.scrollDirection.UP?e.y.percentage<=t&&a.loadData(e.grid):e.grid.scrollDirection===n.scrollDirection.DOWN&&1-e.y.percentage<=t&&a.loadData(e.grid)}},loadData:function(e){e.infiniteScroll.previousVisibleRows=e.renderContainers.body.visibleRowCache.length,e.infiniteScroll.direction=e.scrollDirection,delete e.infiniteScroll.prevScrollTop,e.scrollDirection===n.scrollDirection.UP&&e.infiniteScroll.scrollUp?(e.infiniteScroll.dataLoading=!0,e.api.infiniteScroll.raise.needLoadMoreDataTop()):e.scrollDirection===n.scrollDirection.DOWN&&e.infiniteScroll.scrollDown&&(e.infiniteScroll.dataLoading=!0,e.api.infiniteScroll.raise.needLoadMoreData())},adjustScroll:function(e){var t=o.defer();return r(function(){var i,o,s,l,u;i=e.getViewportHeight()+e.headerHeight-e.renderContainers.body.headerHeight-e.scrollbarHeight,o=e.options.rowHeight,void 0===e.infiniteScroll.direction&&a.adjustInfiniteScrollPosition(e,0),s=e.getVisibleRowCount();var c=o*s;e.infiniteScroll.scrollDown&&i>c&&e.api.infiniteScroll.raise.needLoadMoreData(),e.infiniteScroll.direction===n.scrollDirection.UP&&(l=e.infiniteScroll.prevScrollTop||0,u=l+(s-e.infiniteScroll.previousVisibleRows)*o,a.adjustInfiniteScrollPosition(e,u),r(function(){t.resolve()})),e.infiniteScroll.direction===n.scrollDirection.DOWN&&(u=e.infiniteScroll.prevScrollTop||e.infiniteScroll.previousVisibleRows*o-i,a.adjustInfiniteScrollPosition(e,u),r(function(){t.resolve()}))},0),t.promise},adjustInfiniteScrollPosition:function(e,t){var r=new i(e,null,null,"ui.grid.adjustInfiniteScrollPosition"),n=e.getVisibleRowCount(),o=e.getViewportHeight()+e.headerHeight-e.renderContainers.body.headerHeight-e.scrollbarHeight,a=e.options.rowHeight,s=n*a-o;0===t&&e.infiniteScroll.scrollUp?r.y={percentage:1/s}:r.y={percentage:t/s},e.scrollContainers("",r)},dataRemovedTop:function(e,t,r){var n,i,o,s;a.setScrollDirections(e,t,r),n=e.renderContainers.body.visibleRowCache.length,i=e.infiniteScroll.prevScrollTop,s=e.options.rowHeight,o=i-(e.infiniteScroll.previousVisibleRows-n)*s,a.adjustInfiniteScrollPosition(e,o)},dataRemovedBottom:function(e,t,r){var n;a.setScrollDirections(e,t,r),n=e.infiniteScroll.prevScrollTop,a.adjustInfiniteScrollPosition(e,n)}};return a}]),e.directive("uiGridInfiniteScroll",["uiGridInfiniteScrollService",function(e){return{priority:-200,scope:!1,require:"^uiGrid",compile:function(t,r,n){return{pre:function(t,r,n,i){e.initializeGrid(i.grid,t)},post:function(e,t,r){}}}}}])}(),function(){"use strict";var e=angular.module("ui.grid.moveColumns",["ui.grid"]);e.service("uiGridMoveColumnService",["$q","$timeout","$log","ScrollEvent","uiGridConstants","gridUtil",function(e,t,r,n,i,o){var a={initializeGrid:function(e){var t=this;this.registerPublicApi(e),this.defaultGridOptions(e.options),e.moveColumns={orderCache:[]},e.registerColumnBuilder(t.movableColumnBuilder),e.registerDataChangeCallback(t.verifyColumnOrder,[i.dataChange.COLUMN])},registerPublicApi:function(e){var t=this,r={events:{colMovable:{columnPositionChanged:function(e,t,r){}}},methods:{colMovable:{moveColumn:function(r,n){var i=e.columns;if(!angular.isNumber(r)||!angular.isNumber(n))return void o.logError("MoveColumn: Please provide valid values for originalPosition and finalPosition");for(var a=0,s=0;s<i.length;s++)(angular.isDefined(i[s].colDef.visible)&&!1===i[s].colDef.visible||!0===i[s].isRowHeader)&&a++;if(r>=i.length-a||n>=i.length-a)return void o.logError("MoveColumn: Invalid values for originalPosition, finalPosition");var l=function(e){for(var t=e,r=0;r<=t;r++)angular.isDefined(i[r])&&(angular.isDefined(i[r].colDef.visible)&&!1===i[r].colDef.visible||!0===i[r].isRowHeader)&&t++;return t};t.redrawColumnAtPosition(e,l(r),l(n))}}}};e.api.registerEventsFromObject(r.events),e.api.registerMethodsFromObject(r.methods)},defaultGridOptions:function(e){e.enableColumnMoving=!1!==e.enableColumnMoving},movableColumnBuilder:function(t,r,n){var i=[];return t.enableColumnMoving=void 0===t.enableColumnMoving?n.enableColumnMoving:t.enableColumnMoving,e.all(i)},updateColumnCache:function(e){e.moveColumns.orderCache=e.getOnlyDataColumns()},verifyColumnOrder:function(e){var t,r=e.rowHeaderColumns.length;angular.forEach(e.moveColumns.orderCache,function(n,i){if(-1!==(t=e.columns.indexOf(n))&&t-r!==i){var o=e.columns.splice(t,1)[0];e.columns.splice(i+r,0,o)}})},redrawColumnAtPosition:function(e,r,n){var o=e.columns;if(r!==n){var s=r<n?r+1:r-1,l=Math.min(s,n);for(l;l<=Math.max(s,n)&&!o[l].visible;l++);if(!(l>Math.max(s,n))){var u=o[r];if(u.colDef.enableColumnMoving){if(r>n)for(var c=r;c>n;c--)o[c]=o[c-1];else if(n>r)for(var p=r;p<n;p++)o[p]=o[p+1];o[n]=u,a.updateColumnCache(e),e.queueGridRefresh(),t(function(){e.api.core.notifyDataChange(i.dataChange.COLUMN),e.api.colMovable.raise.columnPositionChanged(u.colDef,r,n)})}}}}};return a}]),e.directive("uiGridMoveColumns",["uiGridMoveColumnService",function(e){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(t,r,n,i){e.initializeGrid(i.grid)},post:function(e,t,r,n){}}}}}]),e.directive("uiGridHeaderCell",["$q","gridUtil","uiGridMoveColumnService","$document","$log","uiGridConstants","ScrollEvent",function(e,t,r,n,i,o,a){return{priority:-10,require:"^uiGrid",compile:function(){return{post:function(e,t,i,o){if(e.col.colDef.enableColumnMoving){var s,l,u,c,p,d,f=angular.element(t[0].querySelectorAll(".ui-grid-cell-contents")),h=!1,g=!1,v=function(t){s=e.grid.element[0].getBoundingClientRect().left,e.grid.hasLeftContainer()&&(s+=e.grid.renderContainers.left.header[0].getBoundingClientRect().width),l=t.pageX||(t.originalEvent?t.originalEvent.pageX:0),u=0,c=s+e.grid.getViewportWidth(),"mousedown"===t.type?(n.on("mousemove",m),n.on("mouseup",y)):"touchstart"===t.type&&(n.on("touchmove",m),n.on("touchend",y))},m=function(e){var t=e.pageX||(e.originalEvent?e.originalEvent.pageX:0),r=t-l;0!==r&&(document.onselectstart=function(){return!1},g=!0,h?h&&(S(r),l=t):x())},y=function(t){if(document.onselectstart=null,p&&(p.remove(),h=!1),E(),b(),g){for(var n=e.grid.columns,i=0,o=0;o<n.length&&n[o].colDef.name!==e.col.colDef.name;o++)i++;var a;if(u<0){var s,l=0;if(e.grid.isRTL()){for(s=i+1;s<n.length;s++)if((angular.isUndefined(n[s].colDef.visible)||!0===n[s].colDef.visible)&&(l+=n[s].drawnWidth||n[s].width||n[s].colDef.width)>Math.abs(u)){r.redrawColumnAtPosition(e.grid,i,s-1);break}}else for(s=i-1;s>=0;s--)if((angular.isUndefined(n[s].colDef.visible)||!0===n[s].colDef.visible)&&(l+=n[s].drawnWidth||n[s].width||n[s].colDef.width)>Math.abs(u)){r.redrawColumnAtPosition(e.grid,i,s+1);break}l<Math.abs(u)&&(a=0,e.grid.isRTL()&&(a=n.length-1),r.redrawColumnAtPosition(e.grid,i,a))}else if(u>0){var c,d=0;if(e.grid.isRTL()){for(c=i-1;c>0;c--)if((angular.isUndefined(n[c].colDef.visible)||!0===n[c].colDef.visible)&&(d+=n[c].drawnWidth||n[c].width||n[c].colDef.width)>u){r.redrawColumnAtPosition(e.grid,i,c);break}}else for(c=i+1;c<n.length;c++)if((angular.isUndefined(n[c].colDef.visible)||!0===n[c].colDef.visible)&&(d+=n[c].drawnWidth||n[c].width||n[c].colDef.width)>u){r.redrawColumnAtPosition(e.grid,i,c-1);break}d<u&&(a=n.length-1,e.grid.isRTL()&&(a=0),r.redrawColumnAtPosition(e.grid,i,a))}}},b=function(){f.on("touchstart",v),f.on("mousedown",v)},E=function(){f.off("touchstart",v),f.off("mousedown",v),n.off("mousemove",m),n.off("touchmove",m),n.off("mouseup",y),n.off("touchend",y)};b();var x=function(){h=!0,p=t.clone(),t.parent().append(p),p.addClass("movingColumn");var r={};r.left=t[0].offsetLeft+"px";var n=e.grid.element[0].getBoundingClientRect().right,i=t[0].getBoundingClientRect().right;i>n&&(d=e.col.drawnWidth+(n-i),r.width=d+"px"),p.css(r)},S=function(t){for(var r=e.grid.columns,n=0,i=0;i<r.length;i++)(angular.isUndefined(r[i].colDef.visible)||!0===r[i].colDef.visible)&&(n+=r[i].drawnWidth||r[i].width||r[i].colDef.width);var l,f=p[0].getBoundingClientRect().left-1,h=p[0].getBoundingClientRect().right;if(l=f-s+t,l=l<c?l:c,(f>=s||t>0)&&(h<=c||t<0))p.css({visibility:"visible",left:p[0].offsetLeft+(l<c?t:c-f)+"px"});else if(n>Math.ceil(o.grid.gridWidth)){t*=8;var g=new a(e.col.grid,null,null,"uiGridHeaderCell.moveElement");g.x={pixels:t},g.grid.scrollContainers("",g)}for(var v=0,m=0;m<r.length;m++)if(angular.isUndefined(r[m].colDef.visible)||!0===r[m].colDef.visible){if(r[m].colDef.name===e.col.colDef.name)break;v+=r[m].drawnWidth||r[m].width||r[m].colDef.width}void 0===e.newScrollLeft?u+=t:u=e.newScrollLeft+l-v,d<e.col.drawnWidth&&(d+=Math.abs(t),p.css({width:d+"px"}))};e.$on("$destroy",E)}}}}}}])}(),function(){"use strict";var e=angular.module("ui.grid.pagination",["ng","ui.grid"]);e.service("uiGridPaginationService",["gridUtil",function(e){var t={initializeGrid:function(e){t.defaultGridOptions(e.options);var r={events:{pagination:{paginationChanged:function(e,t){}}},methods:{pagination:{getPage:function(){return e.options.enablePagination?e.options.paginationCurrentPage:null},getFirstRowIndex:function(){return e.options.useCustomPagination?e.options.paginationPageSizes.reduce(function(t,r,n){return n<e.options.paginationCurrentPage-1?t+r:t},0):(e.options.paginationCurrentPage-1)*e.options.paginationPageSize},getLastRowIndex:function(){return e.options.useCustomPagination?r.methods.pagination.getFirstRowIndex()+e.options.paginationPageSizes[e.options.paginationCurrentPage-1]-1:Math.min(e.options.paginationCurrentPage*e.options.paginationPageSize,e.options.totalItems)-1},getTotalPages:function(){return e.options.enablePagination?e.options.useCustomPagination?e.options.paginationPageSizes.length:0===e.options.totalItems?1:Math.ceil(e.options.totalItems/e.options.paginationPageSize):null},nextPage:function(){e.options.enablePagination&&(e.options.totalItems>0?e.options.paginationCurrentPage=Math.min(e.options.paginationCurrentPage+1,r.methods.pagination.getTotalPages()):e.options.paginationCurrentPage++)},previousPage:function(){e.options.enablePagination&&(e.options.paginationCurrentPage=Math.max(e.options.paginationCurrentPage-1,1))},seek:function(t){if(e.options.enablePagination){if(!angular.isNumber(t)||t<1)throw"Invalid page number: "+t;e.options.paginationCurrentPage=Math.min(t,r.methods.pagination.getTotalPages())}}}}};e.api.registerEventsFromObject(r.events),e.api.registerMethodsFromObject(r.methods);var n=function(t){if(e.options.useExternalPagination||!e.options.enablePagination)return t;var n=parseInt(e.options.paginationPageSize,10),i=parseInt(e.options.paginationCurrentPage,10),o=t.filter(function(e){return e.visible});e.options.totalItems=o.length;var a=r.methods.pagination.getFirstRowIndex(),s=r.methods.pagination.getLastRowIndex();return a>o.length&&(i=e.options.paginationCurrentPage=1,a=(i-1)*n),o.slice(a,s+1)};e.registerRowsProcessor(n,900)},defaultGridOptions:function(t){t.enablePagination=!1!==t.enablePagination,t.enablePaginationControls=!1!==t.enablePaginationControls,t.useExternalPagination=!0===t.useExternalPagination,t.useCustomPagination=!0===t.useCustomPagination,e.isNullOrUndefined(t.totalItems)&&(t.totalItems=0),e.isNullOrUndefined(t.paginationPageSizes)&&(t.paginationPageSizes=[250,500,1e3]),e.isNullOrUndefined(t.paginationPageSize)&&(t.paginationPageSizes.length>0?t.paginationPageSize=t.paginationPageSizes[0]:t.paginationPageSize=0),e.isNullOrUndefined(t.paginationCurrentPage)&&(t.paginationCurrentPage=1),e.isNullOrUndefined(t.paginationTemplate)&&(t.paginationTemplate="ui-grid/pagination")},onPaginationChanged:function(e,t,r){e.api.pagination.raise.paginationChanged(t,r),e.options.useExternalPagination||e.queueGridRefresh()}};return t}]),e.directive("uiGridPagination",["gridUtil","uiGridPaginationService",function(e,t){return{priority:-200,scope:!1,require:"uiGrid",link:{pre:function(r,n,i,o){t.initializeGrid(o.grid),e.getTemplate(o.grid.options.paginationTemplate).then(function(e){var t=angular.element(e);n.append(t),o.innerCompile(t)})}}}}]),e.directive("uiGridPager",["uiGridPaginationService","uiGridConstants","gridUtil","i18nService",function(e,t,r,n){return{priority:-200,scope:!0,require:"^uiGrid",link:function(i,o,a,s){i.aria=n.getSafeText("pagination.aria"),i.paginationApi=s.grid.api.pagination,i.sizesLabel=n.getSafeText("pagination.sizes"),i.totalItemsLabel=n.getSafeText("pagination.totalItems"),i.paginationOf=n.getSafeText("pagination.of"),i.paginationThrough=n.getSafeText("pagination.through");var l=s.grid.options;s.grid.renderContainers.body.registerViewportAdjuster(function(e){return e.height=e.height-r.elementHeight(o,"padding"),e});var u=s.grid.registerDataChangeCallback(function(e){e.options.useExternalPagination||(e.options.totalItems=e.rows.length)},[t.dataChange.ROW]);i.$on("$destroy",u);var c=i.$watch("grid.options.paginationCurrentPage + grid.options.paginationPageSize",function(t,r){if(t!==r&&void 0!==r)return!angular.isNumber(l.paginationCurrentPage)||l.paginationCurrentPage<1?void(l.paginationCurrentPage=1):l.totalItems>0&&l.paginationCurrentPage>i.paginationApi.getTotalPages()?void(l.paginationCurrentPage=i.paginationApi.getTotalPages()):void e.onPaginationChanged(i.grid,l.paginationCurrentPage,l.paginationPageSize)});i.$on("$destroy",function(){c()}),i.cantPageForward=function(){return i.paginationApi.getTotalPages()?i.cantPageToLast():l.data.length<1},i.cantPageToLast=function(){var e=i.paginationApi.getTotalPages();return!e||l.paginationCurrentPage>=e},i.cantPageBackward=function(){return l.paginationCurrentPage<=1};var p=function(e){e&&r.focus.bySelector(o,".ui-grid-pager-control-input")};i.pageFirstPageClick=function(){i.paginationApi.seek(1),p(i.cantPageBackward())},i.pagePreviousPageClick=function(){i.paginationApi.previousPage(),p(i.cantPageBackward())},i.pageNextPageClick=function(){i.paginationApi.nextPage(),p(i.cantPageForward())},i.pageLastPageClick=function(){i.paginationApi.seek(i.paginationApi.getTotalPages()),p(i.cantPageToLast())}}}}])}(),function(){"use strict";var e=angular.module("ui.grid.pinning",["ui.grid"]);e.constant("uiGridPinningConstants",{container:{LEFT:"left",RIGHT:"right",NONE:""}}),e.service("uiGridPinningService",["gridUtil","GridRenderContainer","i18nService","uiGridPinningConstants",function(e,t,r,n){var i={initializeGrid:function(e){i.defaultGridOptions(e.options),e.registerColumnBuilder(i.pinningColumnBuilder);var t={events:{pinning:{columnPinned:function(e,t){}}},methods:{pinning:{pinColumn:function(t,r){i.pinColumn(e,t,r)}}}};e.api.registerEventsFromObject(t.events),e.api.registerMethodsFromObject(t.methods)},defaultGridOptions:function(e){e.enablePinning=!1!==e.enablePinning},pinningColumnBuilder:function(t,o,a){if(t.enablePinning=void 0===t.enablePinning?a.enablePinning:t.enablePinning,t.pinnedLeft?(o.renderContainer="left",o.grid.createLeftContainer()):t.pinnedRight&&(o.renderContainer="right",o.grid.createRightContainer()),t.enablePinning){var s={name:"ui.grid.pinning.pinLeft",title:r.get().pinning.pinLeft,icon:"ui-grid-icon-left-open",shown:function(){return void 0===this.context.col.renderContainer||!this.context.col.renderContainer||"left"!==this.context.col.renderContainer},action:function(){i.pinColumn(this.context.col.grid,this.context.col,n.container.LEFT)}},l={name:"ui.grid.pinning.pinRight",title:r.get().pinning.pinRight,icon:"ui-grid-icon-right-open",shown:function(){return void 0===this.context.col.renderContainer||!this.context.col.renderContainer||"right"!==this.context.col.renderContainer},action:function(){i.pinColumn(this.context.col.grid,this.context.col,n.container.RIGHT)}},u={name:"ui.grid.pinning.unpin",title:r.get().pinning.unpin,icon:"ui-grid-icon-cancel",shown:function(){return void 0!==this.context.col.renderContainer&&null!==this.context.col.renderContainer&&"body"!==this.context.col.renderContainer},action:function(){i.pinColumn(this.context.col.grid,this.context.col,n.container.NONE)}};e.arrayContainsObjectWithProperty(o.menuItems,"name","ui.grid.pinning.pinLeft")||o.menuItems.push(s),e.arrayContainsObjectWithProperty(o.menuItems,"name","ui.grid.pinning.pinRight")||o.menuItems.push(l),e.arrayContainsObjectWithProperty(o.menuItems,"name","ui.grid.pinning.unpin")||o.menuItems.push(u)}},pinColumn:function(e,t,r){r===n.container.NONE?(t.renderContainer=null,t.colDef.pinnedLeft=t.colDef.pinnedRight=!1):(t.renderContainer=r,r===n.container.LEFT?e.createLeftContainer():r===n.container.RIGHT&&e.createRightContainer()),e.refresh().then(function(){e.api.pinning.raise.columnPinned(t.colDef,r)})}};return i}]),e.directive("uiGridPinning",["gridUtil","uiGridPinningService",function(e,t){return{require:"uiGrid",scope:!1,compile:function(){return{pre:function(e,r,n,i){t.initializeGrid(i.grid)},post:function(e,t,r,n){}}}}}])}(),function(){"use strict";var e=angular.module("ui.grid.resizeColumns",["ui.grid"]);e.service("uiGridResizeColumnsService",["gridUtil","$q","$timeout",function(e,t,r){return{defaultGridOptions:function(e){e.enableColumnResizing=!1!==e.enableColumnResizing,!1===e.enableColumnResize&&(e.enableColumnResizing=!1)},colResizerColumnBuilder:function(e,r,n){var i=[];return e.enableColumnResizing=void 0===e.enableColumnResizing?n.enableColumnResizing:e.enableColumnResizing,!1===e.enableColumnResize&&(e.enableColumnResizing=!1),t.all(i)},registerPublicApi:function(e){var t={events:{colResizable:{columnSizeChanged:function(e,t){}}}};e.api.registerEventsFromObject(t.events)},fireColumnSizeChanged:function(t,n,i){r(function(){t.api.colResizable?t.api.colResizable.raise.columnSizeChanged(n,i):e.logError("The resizeable api is not registered, this may indicate that you've included the module but not added the 'ui-grid-resize-columns' directive to your grid definition.  Cannot raise any events.")})},findTargetCol:function(e,t,r){var n=e.getRenderContainer();if("left"===t){var i=n.visibleColumnCache.indexOf(e);return n.visibleColumnCache[i-1*r]}return e}}}]),e.directive("uiGridResizeColumns",["gridUtil","uiGridResizeColumnsService",function(e,t){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(e,r,n,i){t.defaultGridOptions(i.grid.options),i.grid.registerColumnBuilder(t.colResizerColumnBuilder),t.registerPublicApi(i.grid)},post:function(e,t,r,n){}}}}}]),e.directive("uiGridHeaderCell",["gridUtil","$templateCache","$compile","$q","uiGridResizeColumnsService","uiGridConstants","$timeout",function(e,t,r,n,i,o,a){return{priority:-10,require:"^uiGrid",compile:function(){return{post:function(e,n,s,l){var u=l.grid;if(u.options.enableColumnResizing){var c=t.get("ui-grid/columnResizer"),p=1;u.isRTL()&&(e.position="left",p=-1);var d=function(){for(var t=n[0].getElementsByClassName("ui-grid-column-resizer"),o=0;o<t.length;o++)angular.element(t[o]).remove();var a=i.findTargetCol(e.col,"left",p),s=e.col.getRenderContainer();if(a&&0!==s.visibleColumnCache.indexOf(e.col)&&!1!==a.colDef.enableColumnResizing){var l=angular.element(c).clone();l.attr("position","left"),n.prepend(l),r(l)(e)}if(!1!==e.col.colDef.enableColumnResizing){var u=angular.element(c).clone();u.attr("position","right"),n.append(u),r(u)(e)}};d();var f=function(){a(d)},h=u.registerDataChangeCallback(f,[o.dataChange.COLUMN]);e.$on("$destroy",h)}}}}}}]),e.directive("uiGridColumnResizer",["$document","gridUtil","uiGridConstants","uiGridResizeColumnsService",function(e,t,r,n){var i=angular.element('<div class="ui-grid-resize-overlay"></div>');return{priority:0,scope:{col:"=",position:"@",renderIndex:"="},require:"?^uiGrid",link:function(o,a,s,l){function u(e){l.grid.refreshCanvas(!0).then(function(){l.grid.queueGridRefresh()})}function c(e,t){var r=t;return e.minWidth&&r<e.minWidth?r=e.minWidth:e.maxWidth&&r>e.maxWidth&&(r=e.maxWidth),r}function p(e,t){e.originalEvent&&(e=e.originalEvent),e.preventDefault(),h=(e.targetTouches?e.targetTouches[0]:e).clientX-g,h<0?h=0:h>l.grid.gridWidth&&(h=l.grid.gridWidth);var a=n.findTargetCol(o.col,o.position,v);if(!1!==a.colDef.enableColumnResizing){l.grid.element.hasClass("column-resizing")||l.grid.element.addClass("column-resizing");var s=h-f,u=parseInt(a.drawnWidth+s*v,10);h+=(c(a,u)-u)*v,i.css({left:h+"px"}),l.fireEvent(r.events.ITEM_DRAGGING)}}function d(e,t){e.originalEvent&&(e=e.originalEvent),e.preventDefault(),l.grid.element.removeClass("column-resizing"),i.remove(),h=(e.changedTouches?e.changedTouches[0]:e).clientX-g;var r=h-f;if(0===r)return b(),void y();var a=n.findTargetCol(o.col,o.position,v);if(!1!==a.colDef.enableColumnResizing){var s=parseInt(a.drawnWidth+r*v,10);a.width=c(a,s),a.hasCustomWidth=!0,u(r),n.fireColumnSizeChanged(l.grid,a.colDef,r),b(),y()}}var f=0,h=0,g=0,v=1;l.grid.isRTL()&&(o.position="left",v=-1),"left"===o.position?a.addClass("left"):"right"===o.position&&a.addClass("right");var m=function(t,r){t.originalEvent&&(t=t.originalEvent),t.stopPropagation(),g=l.grid.element[0].getBoundingClientRect().left,f=(t.targetTouches?t.targetTouches[0]:t).clientX-g,l.grid.element.append(i),i.css({left:f}),"touchstart"===t.type?(e.on("touchend",d),e.on("touchmove",p),a.off("mousedown",m)):(e.on("mouseup",d),e.on("mousemove",p),a.off("touchstart",m))},y=function(){a.on("mousedown",m),a.on("touchstart",m)},b=function(){e.off("mouseup",d),e.off("touchend",d),e.off("mousemove",p),e.off("touchmove",p),a.off("mousedown",m),a.off("touchstart",m)};y();var E=function(e,i){e.stopPropagation();var s=n.findTargetCol(o.col,o.position,v);if(!1!==s.colDef.enableColumnResizing){var p=0,d=0,f=t.closestElm(a,".ui-grid-render-container"),h=f.querySelectorAll("."+r.COL_CLASS_PREFIX+s.uid+" .ui-grid-cell-contents");Array.prototype.forEach.call(h,function(e){var r;angular.element(e).parent().hasClass("ui-grid-header-cell")&&(r=angular.element(e).parent()[0].querySelectorAll(".ui-grid-column-menu-button")),t.fakeElement(e,{},function(e){var n=angular.element(e);n.attr("style","float: left");var i=t.elementWidth(n);if(r){i+=t.elementWidth(r)}i>p&&(p=i,d=p-i)})}),s.width=c(s,p),s.hasCustomWidth=!0,u(d),n.fireColumnSizeChanged(l.grid,s.colDef,d)}};a.on("dblclick",E),a.on("$destroy",function(){a.off("dblclick",E),b()})}}}])}(),function(){"use strict";var e=angular.module("ui.grid.rowEdit",["ui.grid","ui.grid.edit","ui.grid.cellNav"]);e.constant("uiGridRowEditConstants",{}),e.service("uiGridRowEditService",["$interval","$q","uiGridConstants","uiGridRowEditConstants","gridUtil",function(e,t,r,n,i){var o={initializeGrid:function(e,t){t.rowEdit={};var r={events:{rowEdit:{saveRow:function(e){}}},methods:{rowEdit:{setSavePromise:function(e,r){o.setSavePromise(t,e,r)},getDirtyRows:function(){return t.rowEdit.dirtyRows?t.rowEdit.dirtyRows:[]},getErrorRows:function(){return t.rowEdit.errorRows?t.rowEdit.errorRows:[]},flushDirtyRows:function(){return o.flushDirtyRows(t)},setRowsDirty:function(e){o.setRowsDirty(t,e)},setRowsClean:function(e){o.setRowsClean(t,e)}}}};t.api.registerEventsFromObject(r.events),t.api.registerMethodsFromObject(r.methods),t.api.core.on.renderingComplete(e,function(r){t.api.edit.on.afterCellEdit(e,o.endEditCell),t.api.edit.on.beginCellEdit(e,o.beginEditCell),t.api.edit.on.cancelCellEdit(e,o.cancelEditCell),t.api.cellNav&&t.api.cellNav.on.navigate(e,o.navigate)})},defaultGridOptions:function(e){},saveRow:function(e,t){var r=this;return function(){if(t.isSaving=!0,t.rowEditSavePromise)return t.rowEditSavePromise;var n=e.api.rowEdit.raise.saveRow(t.entity);return t.rowEditSavePromise?t.rowEditSavePromise.then(r.processSuccessPromise(e,t),r.processErrorPromise(e,t)):i.logError("A promise was not returned when saveRow event was raised, either nobody is listening to event, or event handler did not return a promise"),n}},setSavePromise:function(e,t,r){e.getRow(t).rowEditSavePromise=r},processSuccessPromise:function(e,t){var r=this;return function(){delete t.isSaving,delete t.isDirty,delete t.isError,delete t.rowEditSaveTimer,delete t.rowEditSavePromise,r.removeRow(e.rowEdit.errorRows,t),r.removeRow(e.rowEdit.dirtyRows,t)}},processErrorPromise:function(e,t){return function(){delete t.isSaving,delete t.rowEditSaveTimer,delete t.rowEditSavePromise,t.isError=!0,e.rowEdit.errorRows||(e.rowEdit.errorRows=[]),o.isRowPresent(e.rowEdit.errorRows,t)||e.rowEdit.errorRows.push(t)}},removeRow:function(e,t){void 0!==e&&null!==e&&e.forEach(function(r,n){r.uid===t.uid&&e.splice(n,1)})},isRowPresent:function(e,t){var r=!1;return e.forEach(function(e,n){e.uid===t.uid&&(r=!0)}),r},flushDirtyRows:function(e){var r=[];return e.api.rowEdit.getDirtyRows().forEach(function(t){o.cancelTimer(e,t),o.saveRow(e,t)(),r.push(t.rowEditSavePromise)}),t.all(r)},endEditCell:function(e,t,r,n){var a=this.grid,s=a.getRow(e);if(!s)return void i.logError("Unable to find rowEntity in grid data, dirty flag cannot be set");(r!==n||s.isDirty)&&(a.rowEdit.dirtyRows||(a.rowEdit.dirtyRows=[]),s.isDirty||(s.isDirty=!0,a.rowEdit.dirtyRows.push(s)),delete s.isError,o.considerSetTimer(a,s))},beginEditCell:function(e,t){var r=this.grid,n=r.getRow(e);if(!n)return void i.logError("Unable to find rowEntity in grid data, timer cannot be cancelled");o.cancelTimer(r,n)},cancelEditCell:function(e,t){var r=this.grid,n=r.getRow(e);if(!n)return void i.logError("Unable to find rowEntity in grid data, timer cannot be set");o.considerSetTimer(r,n)},navigate:function(e,t){var r=this.grid;e.row.rowEditSaveTimer&&o.cancelTimer(r,e.row),t&&t.row&&t.row!==e.row&&o.considerSetTimer(r,t.row)},considerSetTimer:function(t,r){if(o.cancelTimer(t,r),r.isDirty&&!r.isSaving&&-1!==t.options.rowEditWaitInterval){var n=t.options.rowEditWaitInterval?t.options.rowEditWaitInterval:2e3;r.rowEditSaveTimer=e(o.saveRow(t,r),n,1)}},cancelTimer:function(t,r){r.rowEditSaveTimer&&!r.isSaving&&(e.cancel(r.rowEditSaveTimer),delete r.rowEditSaveTimer)},setRowsDirty:function(e,t){var r;t.forEach(function(t,n){r=e.getRow(t),r?(e.rowEdit.dirtyRows||(e.rowEdit.dirtyRows=[]),r.isDirty||(r.isDirty=!0,e.rowEdit.dirtyRows.push(r)),delete r.isError,o.considerSetTimer(e,r)):i.logError("requested row not found in rowEdit.setRowsDirty, row was: "+t)})},setRowsClean:function(e,t){var r;t.forEach(function(t,n){r=e.getRow(t),r?(delete r.isDirty,o.removeRow(e.rowEdit.dirtyRows,r),o.cancelTimer(e,r),delete r.isError,o.removeRow(e.rowEdit.errorRows,r)):i.logError("requested row not found in rowEdit.setRowsClean, row was: "+t)})}};return o}]),e.directive("uiGridRowEdit",["gridUtil","uiGridRowEditService","uiGridEditConstants",function(e,t,r){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(e,r,n,i){t.initializeGrid(e,i.grid)},post:function(e,t,r,n){}}}}}]),e.directive("uiGridViewport",["$compile","uiGridConstants","gridUtil","$parse",function(e,t,r,n){return{priority:-200,scope:!1,compile:function(e,t){var r=angular.element(e.children().children()[0]),n=r.attr("ng-class"),i="";return i=n?n.slice(0,-1)+", 'ui-grid-row-dirty': row.isDirty, 'ui-grid-row-saving': row.isSaving, 'ui-grid-row-error': row.isError}":"{'ui-grid-row-dirty': row.isDirty, 'ui-grid-row-saving': row.isSaving, 'ui-grid-row-error': row.isError}",r.attr("ng-class",i),{pre:function(e,t,r,n){},post:function(e,t,r,n){}}}}}])}(),function(){"use strict";var e=angular.module("ui.grid.saveState",["ui.grid","ui.grid.selection","ui.grid.cellNav","ui.grid.grouping","ui.grid.pinning","ui.grid.treeView"]);e.constant("uiGridSaveStateConstants",{featureName:"saveState"}),e.service("uiGridSaveStateService",["$q","uiGridSaveStateConstants","gridUtil","$compile","$interval","uiGridConstants",function(e,t,r,n,i,o){var a={initializeGrid:function(e){e.saveState={},this.defaultGridOptions(e.options);var t={events:{saveState:{}},methods:{saveState:{save:function(){return a.save(e)},restore:function(t,r){return a.restore(e,t,r)}}}};e.api.registerEventsFromObject(t.events),e.api.registerMethodsFromObject(t.methods)},defaultGridOptions:function(e){e.saveWidths=!1!==e.saveWidths,e.saveOrder=!1!==e.saveOrder,e.saveScroll=!0===e.saveScroll,e.saveFocus=!0!==e.saveScroll&&!1!==e.saveFocus,e.saveVisible=!1!==e.saveVisible,e.saveSort=!1!==e.saveSort,e.saveFilter=!1!==e.saveFilter,e.saveSelection=!1!==e.saveSelection,e.saveGrouping=!1!==e.saveGrouping,e.saveGroupingExpandedStates=!0===e.saveGroupingExpandedStates,e.savePinning=!1!==e.savePinning,e.saveTreeView=!1!==e.saveTreeView},save:function(e){var t={};return t.columns=a.saveColumns(e),t.scrollFocus=a.saveScrollFocus(e),t.selection=a.saveSelection(e),t.grouping=a.saveGrouping(e),t.treeView=a.saveTreeView(e),t.pagination=a.savePagination(e),t},restore:function(e,t,r){return r.columns&&a.restoreColumns(e,r.columns),r.scrollFocus&&a.restoreScrollFocus(e,t,r.scrollFocus),r.selection&&a.restoreSelection(e,r.selection),r.grouping&&a.restoreGrouping(e,r.grouping),r.treeView&&a.restoreTreeView(e,r.treeView),r.pagination&&a.restorePagination(e,r.pagination),e.refresh()},saveColumns:function(e){var t=[];return e.getOnlyDataColumns().forEach(function(r){var n={};n.name=r.name,e.options.saveVisible&&(n.visible=r.visible),e.options.saveWidths&&(n.width=r.width),e.options.saveSort&&(n.sort=angular.copy(r.sort)),e.options.saveFilter&&(n.filters=[],r.filters.forEach(function(e){var t={};angular.forEach(e,function(e,r){"condition"!==r&&"$$hashKey"!==r&&"placeholder"!==r&&(t[r]=e)}),n.filters.push(t)})),e.api.pinning&&e.options.savePinning&&(n.pinned=r.renderContainer?r.renderContainer:""),t.push(n)}),t},saveScrollFocus:function(e){if(!e.api.cellNav)return{};var t={};if(e.options.saveFocus){t.focus=!0;var r=e.api.cellNav.getFocusedCell();null!==r&&(null!==r.col&&(t.colName=r.col.colDef.name),null!==r.row&&(t.rowVal=a.getRowVal(e,r.row)))}return(e.options.saveScroll||e.options.saveFocus&&!t.colName&&!t.rowVal)&&(t.focus=!1,e.renderContainers.body.prevRowScrollIndex&&(t.rowVal=a.getRowVal(e,e.renderContainers.body.visibleRowCache[e.renderContainers.body.prevRowScrollIndex])),e.renderContainers.body.prevColScrollIndex&&(t.colName=e.renderContainers.body.visibleColumnCache[e.renderContainers.body.prevColScrollIndex].name)),t},saveSelection:function(e){return e.api.selection&&e.options.saveSelection?e.api.selection.getSelectedGridRows().map(function(t){return a.getRowVal(e,t)}):[]},saveGrouping:function(e){return e.api.grouping&&e.options.saveGrouping?e.api.grouping.getGrouping(e.options.saveGroupingExpandedStates):{}},savePagination:function(e){return e.api.pagination&&e.options.paginationPageSize?{paginationCurrentPage:e.options.paginationCurrentPage,paginationPageSize:e.options.paginationPageSize}:{}},saveTreeView:function(e){return e.api.treeView&&e.options.saveTreeView?e.api.treeView.getTreeView():{}},getRowVal:function(e,t){if(!t)return null;var r={};return e.options.saveRowIdentity?(r.identity=!0,r.row=e.options.saveRowIdentity(t.entity)):(r.identity=!1,r.row=e.renderContainers.body.visibleRowCache.indexOf(t)),r},restoreColumns:function(e,t){var r=!1;t.forEach(function(t,n){var i=e.getColumn(t.name);if(i&&!e.isRowHeaderColumn(i)){!e.options.saveVisible||i.visible===t.visible&&i.colDef.visible===t.visible||(i.visible=t.visible,i.colDef.visible=t.visible,e.api.core.raise.columnVisibilityChanged(i)),e.options.saveWidths&&i.width!==t.width&&(i.width=t.width,i.hasCustomWidth=!0),!e.options.saveSort||angular.equals(i.sort,t.sort)||void 0===i.sort&&angular.isEmpty(t.sort)||(i.sort=angular.copy(t.sort),r=!0),e.options.saveFilter&&!angular.equals(i.filters,t.filters)&&(t.filters.forEach(function(e,t){angular.extend(i.filters[t],e),void 0!==e.term&&null!==e.term||delete i.filters[t].term}),e.api.core.raise.filterChanged()),e.api.pinning&&e.options.savePinning&&i.renderContainer!==t.pinned&&e.api.pinning.pinColumn(i,t.pinned);var o=e.getOnlyDataColumns().indexOf(i);if(-1!==o&&e.options.saveOrder&&o!==n){var a=e.columns.splice(o+e.rowHeaderColumns.length,1)[0];e.columns.splice(n+e.rowHeaderColumns.length,0,a)}}}),r&&e.api.core.raise.sortChanged(e,e.getColumnSorting())},restoreScrollFocus:function(e,t,r){if(e.api.cellNav){var n,i;if(r.colName){var o=e.options.columnDefs.filter(function(e){return e.name===r.colName});o.length>0&&(n=o[0])}r.rowVal&&r.rowVal.row&&(i=r.rowVal.identity?a.findRowByIdentity(e,r.rowVal):e.renderContainers.body.visibleRowCache[r.rowVal.row]);var s=i&&i.entity?i.entity:null;(n||s)&&(r.focus?e.api.cellNav.scrollToFocus(s,n):e.scrollTo(s,n))}},restoreSelection:function(e,t){e.api.selection&&(e.api.selection.clearSelectedRows(),t.forEach(function(t){if(t.identity){var r=a.findRowByIdentity(e,t);r&&e.api.selection.selectRow(r.entity)}else e.api.selection.selectRowByVisibleIndex(t.row)}))},restoreGrouping:function(e,t){e.api.grouping&&void 0!==t&&null!==t&&!angular.equals(t,{})&&e.api.grouping.setGrouping(t)},restoreTreeView:function(e,t){e.api.treeView&&void 0!==t&&null!==t&&!angular.equals(t,{})&&e.api.treeView.setTreeView(t)},restorePagination:function(e,t){e.api.pagination&&e.options.paginationPageSize&&(e.options.paginationCurrentPage=t.paginationCurrentPage,e.options.paginationPageSize=t.paginationPageSize)},findRowByIdentity:function(e,t){if(!e.options.saveRowIdentity)return null;var r=e.rows.filter(function(r){return e.options.saveRowIdentity(r.entity)===t.row});return r.length>0?r[0]:null}};return a}]),e.directive("uiGridSaveState",["uiGridSaveStateConstants","uiGridSaveStateService","gridUtil","$compile",function(e,t,r,n){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,link:function(e,r,n,i){t.initializeGrid(i.grid)}}}])}(),function(){"use strict";var e=angular.module("ui.grid.selection",["ui.grid"]);e.constant("uiGridSelectionConstants",{featureName:"selection",selectionRowHeaderColName:"selectionRowHeaderCol"}),angular.module("ui.grid").config(["$provide",function(e){e.decorator("GridRow",["$delegate",function(e){return e.prototype.setSelected=function(e){e!==this.isSelected&&(this.isSelected=e,this.grid.selection.selectedCount+=e?1:-1)},e}])}]),e.service("uiGridSelectionService",["$q","$templateCache","uiGridSelectionConstants","gridUtil",function(e,t,r,n){var i={initializeGrid:function(e){e.selection={},e.selection.lastSelectedRow=null,e.selection.selectAll=!1,e.selection.selectedCount=0,i.defaultGridOptions(e.options);var t={events:{selection:{rowSelectionChanged:function(e,t,r){},rowSelectionChangedBatch:function(e,t,r){}}},methods:{selection:{toggleRowSelection:function(t,r){var n=e.getRow(t);null!==n&&i.toggleRowSelection(e,n,r,e.options.multiSelect,e.options.noUnselect)},selectRow:function(t,r){var n=e.getRow(t);null===n||n.isSelected||i.toggleRowSelection(e,n,r,e.options.multiSelect,e.options.noUnselect)},selectRowByVisibleIndex:function(t,r){var n=e.renderContainers.body.visibleRowCache[t];null===n||void 0===n||n.isSelected||i.toggleRowSelection(e,n,r,e.options.multiSelect,e.options.noUnselect)},unSelectRow:function(t,r){var n=e.getRow(t);null!==n&&n.isSelected&&i.toggleRowSelection(e,n,r,e.options.multiSelect,e.options.noUnselect)},selectAllRows:function(t){if(!1!==e.options.multiSelect){var r=[];e.rows.forEach(function(n){n.isSelected||!1===n.enableSelection||(n.setSelected(!0),i.decideRaiseSelectionEvent(e,n,r,t))}),i.decideRaiseSelectionBatchEvent(e,r,t),e.selection.selectAll=!0}},selectAllVisibleRows:function(t){if(!1!==e.options.multiSelect){var r=[];e.rows.forEach(function(n){n.visible?n.isSelected||!1===n.enableSelection||(n.setSelected(!0),i.decideRaiseSelectionEvent(e,n,r,t)):n.isSelected&&(n.setSelected(!1),i.decideRaiseSelectionEvent(e,n,r,t))}),i.decideRaiseSelectionBatchEvent(e,r,t),e.selection.selectAll=!0}},clearSelectedRows:function(t){i.clearSelectedRows(e,t)},getSelectedRows:function(){return i.getSelectedRows(e).map(function(e){return e.entity})},getSelectedGridRows:function(){return i.getSelectedRows(e)},getSelectedCount:function(){return e.selection.selectedCount},setMultiSelect:function(t){e.options.multiSelect=t},setModifierKeysToMultiSelect:function(t){e.options.modifierKeysToMultiSelect=t},getSelectAllState:function(){return e.selection.selectAll}}}};e.api.registerEventsFromObject(t.events),e.api.registerMethodsFromObject(t.methods)},defaultGridOptions:function(e){e.enableRowSelection=!1!==e.enableRowSelection,e.multiSelect=!1!==e.multiSelect,e.noUnselect=!0===e.noUnselect,e.modifierKeysToMultiSelect=!0===e.modifierKeysToMultiSelect,e.enableRowHeaderSelection=!1!==e.enableRowHeaderSelection,void 0===e.enableFullRowSelection&&(e.enableFullRowSelection=!e.enableRowHeaderSelection),e.enableSelectAll=!1!==e.enableSelectAll,e.enableSelectionBatchEvent=!1!==e.enableSelectionBatchEvent,e.selectionRowHeaderWidth=angular.isDefined(e.selectionRowHeaderWidth)?e.selectionRowHeaderWidth:30,e.enableFooterTotalSelected=!1!==e.enableFooterTotalSelected,e.isRowSelectable=angular.isDefined(e.isRowSelectable)?e.isRowSelectable:angular.noop},toggleRowSelection:function(e,t,r,n,o){var a=t.isSelected;if(!1!==t.enableSelection||a){var s;n||a?!n&&a&&(s=i.getSelectedRows(e),s.length>1&&(a=!1,i.clearSelectedRows(e,r))):i.clearSelectedRows(e,r),a&&o||(t.setSelected(!a),!0===t.isSelected&&(e.selection.lastSelectedRow=t),s=i.getSelectedRows(e),e.selection.selectAll=e.rows.length===s.length,e.api.selection.raise.rowSelectionChanged(t,r))}},shiftSelect:function(e,t,r,n){if(n){var o=i.getSelectedRows(e),a=o.length>0?e.renderContainers.body.visibleRowCache.indexOf(e.selection.lastSelectedRow):0,s=e.renderContainers.body.visibleRowCache.indexOf(t);if(a>s){var l=a;a=s,s=l}for(var u=[],c=a;c<=s;c++){var p=e.renderContainers.body.visibleRowCache[c];p&&(p.isSelected||!1===p.enableSelection||(p.setSelected(!0),e.selection.lastSelectedRow=p,i.decideRaiseSelectionEvent(e,p,u,r)))}i.decideRaiseSelectionBatchEvent(e,u,r)}},getSelectedRows:function(e){return e.rows.filter(function(e){return e.isSelected})},clearSelectedRows:function(e,t){var r=[];i.getSelectedRows(e).forEach(function(n){n.isSelected&&(n.setSelected(!1),i.decideRaiseSelectionEvent(e,n,r,t))}),i.decideRaiseSelectionBatchEvent(e,r,t),e.selection.selectAll=!1,e.selection.selectedCount=0},decideRaiseSelectionEvent:function(e,t,r,n){e.options.enableSelectionBatchEvent?r.push(t):e.api.selection.raise.rowSelectionChanged(t,n)},decideRaiseSelectionBatchEvent:function(e,t,r){t.length>0&&e.api.selection.raise.rowSelectionChangedBatch(t,r)}};return i}]),e.directive("uiGridSelection",["uiGridSelectionConstants","uiGridSelectionService","$templateCache","uiGridConstants",function(e,t,r,n){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(r,i,o,a){if(t.initializeGrid(a.grid),a.grid.options.enableRowHeaderSelection){var s={name:e.selectionRowHeaderColName,displayName:"",width:a.grid.options.selectionRowHeaderWidth,minWidth:10,cellTemplate:"ui-grid/selectionRowHeader",headerCellTemplate:"ui-grid/selectionHeaderCell",enableColumnResizing:!1,enableColumnMenu:!1,exporterSuppressExport:!0,allowCellFocus:!0};a.grid.addRowHeaderColumn(s,0)}var l=!1,u=function(e){return e.forEach(function(e){e.enableSelection=a.grid.options.isRowSelectable(e)}),e},c=function(){a.grid.options.isRowSelectable!==angular.noop&&!0!==l&&(a.grid.registerRowsProcessor(u,500),l=!0)};c();var p=a.grid.registerDataChangeCallback(c,[n.dataChange.OPTIONS]);r.$on("$destroy",p)},post:function(e,t,r,n){}}}}}]),e.directive("uiGridSelectionRowHeaderButtons",["$templateCache","uiGridSelectionService","gridUtil",function(e,t,r){return{replace:!0,restrict:"E",template:e.get("ui-grid/selectionRowHeaderButtons"),scope:!0,require:"^uiGrid",link:function(e,n,i,o){function a(e,r){if(r.stopPropagation(),r.shiftKey)t.shiftSelect(l,e,r,l.options.multiSelect);else if(r.ctrlKey||r.metaKey)t.toggleRowSelection(l,e,r,l.options.multiSelect,l.options.noUnselect);else if(e.groupHeader)for(var n=0;n<e.treeNode.children.length;n++)t.toggleRowSelection(l,e.treeNode.children[n].row,r,l.options.multiSelect,l.options.noUnselect);else t.toggleRowSelection(l,e,r,l.options.multiSelect&&!l.options.modifierKeysToMultiSelect,l.options.noUnselect)}function s(e){(e.ctrlKey||e.shiftKey)&&(e.target.onselectstart=function(){return!1},window.setTimeout(function(){e.target.onselectstart=null},0))}var l=o.grid;e.selectButtonClick=a,"ie"===r.detectBrowser()&&n.on("mousedown",s),e.$on("$destroy",function(){n.off()})}}}]),e.directive("uiGridSelectionSelectAllButtons",["$templateCache","uiGridSelectionService",function(e,t){return{replace:!0,restrict:"E",template:e.get("ui-grid/selectionSelectAllButtons"),scope:!1,link:function(e,r,n,i){var o=e.col.grid;e.headerButtonClick=function(e,r){o.selection.selectAll?(t.clearSelectedRows(o,r),o.options.noUnselect&&o.api.selection.selectRowByVisibleIndex(0,r),o.selection.selectAll=!1):o.options.multiSelect&&(o.api.selection.selectAllVisibleRows(r),o.selection.selectAll=!0)}}}}]),e.directive("uiGridViewport",["$compile","uiGridConstants","uiGridSelectionConstants","gridUtil","$parse","uiGridSelectionService",function(e,t,r,n,i,o){return{priority:-200,scope:!1,compile:function(e,t){var r=angular.element(e.children().children()[0]),n=r.attr("ng-class"),i="";return i=n?n.slice(0,-1)+",'ui-grid-row-selected': row.isSelected}":"{'ui-grid-row-selected': row.isSelected}",r.attr("ng-class",i),{pre:function(e,t,r,n){},post:function(e,t,r,n){}}}}}]),e.directive("uiGridCell",["$compile","uiGridConstants","uiGridSelectionConstants","gridUtil","$parse","uiGridSelectionService","$timeout",function(e,t,r,n,i,o,a){return{priority:-200,restrict:"A",require:"?^uiGrid",scope:!1,link:function(e,r,n,i){function s(){e.grid.options.enableRowSelection&&e.grid.options.enableFullRowSelection&&(r.addClass("ui-grid-disable-selection"),r.on("touchstart",p),r.on("touchend",d),r.on("click",c),e.registered=!0)}function l(){e.registered&&(r.removeClass("ui-grid-disable-selection"),r.off("touchstart",p),r.off("touchend",d),r.off("click",c),e.registered=!1)}var u=0;i.grid.api.cellNav&&i.grid.api.cellNav.on.viewPortKeyDown(e,function(t,r){null!==r&&r.row===e.row&&r.col===e.col&&32===t.keyCode&&"selectionRowHeaderCol"===e.col.colDef.name&&(o.toggleRowSelection(e.grid,e.row,t,e.grid.options.multiSelect&&!e.grid.options.modifierKeysToMultiSelect,e.grid.options.noUnselect),e.$apply())});var c=function(t){"ui-grid-icon-minus-squared"!==t.target.className&&"ui-grid-icon-plus-squared"!==t.target.className&&(r.off("touchend",d),t.shiftKey?o.shiftSelect(e.grid,e.row,t,e.grid.options.multiSelect):t.ctrlKey||t.metaKey?o.toggleRowSelection(e.grid,e.row,t,e.grid.options.multiSelect,e.grid.options.noUnselect):o.toggleRowSelection(e.grid,e.row,t,e.grid.options.multiSelect&&!e.grid.options.modifierKeysToMultiSelect,e.grid.options.noUnselect),e.$apply(),a(function(){r.on("touchend",d)},300))},p=function(e){u=(new Date).getTime(),r.off("click",c)},d=function(e){(new Date).getTime()-u<300&&c(e),a(function(){r.on("click",c)},300)};s();var f=e.grid.registerDataChangeCallback(function(){e.grid.options.enableRowSelection&&e.grid.options.enableFullRowSelection&&!e.registered?s():e.grid.options.enableRowSelection&&e.grid.options.enableFullRowSelection||!e.registered||l()},[t.dataChange.OPTIONS]);r.on("$destroy",f)}}}]),e.directive("uiGridGridFooter",["$compile","uiGridConstants","gridUtil",function(e,t,r){return{restrict:"EA",replace:!0,priority:-1e3,require:"^uiGrid",scope:!0,compile:function(t,n){return{pre:function(t,n,i,o){o.grid.options.showGridFooter&&r.getTemplate("ui-grid/gridFooterSelectedItems").then(function(r){var i=angular.element(r),o=e(i)(t);angular.element(n[0].getElementsByClassName("ui-grid-grid-footer")[0]).append(o)})},post:function(e,t,r,n){}}}}}])}(),function(){"use strict";var e=angular.module("ui.grid.treeBase",["ui.grid"]);e.constant("uiGridTreeBaseConstants",{featureName:"treeBase",rowHeaderColName:"treeBaseRowHeaderCol",EXPANDED:"expanded",COLLAPSED:"collapsed",aggregation:{COUNT:"count",SUM:"sum",MAX:"max",MIN:"min",AVG:"avg"}}),e.service("uiGridTreeBaseService",["$q","uiGridTreeBaseConstants","gridUtil","GridRow","gridClassFactory","i18nService","uiGridConstants","rowSorter",function(e,t,r,n,i,o,a,s){var l={initializeGrid:function(e,t){e.treeBase={},e.treeBase.numberLevels=0,e.treeBase.expandAll=!1,e.treeBase.tree=[],l.defaultGridOptions(e.options),e.registerRowsProcessor(l.treeRows,410),e.registerColumnBuilder(l.treeBaseColumnBuilder),l.createRowHeader(e);var r={events:{treeBase:{rowExpanded:{},rowCollapsed:{}}},methods:{treeBase:{expandAllRows:function(){l.expandAllRows(e)},collapseAllRows:function(){l.collapseAllRows(e)},toggleRowTreeState:function(t){l.toggleRowTreeState(e,t)},expandRow:function(t){l.expandRow(e,t)},expandRowChildren:function(t){l.expandRowChildren(e,t)},collapseRow:function(t){l.collapseRow(e,t)},collapseRowChildren:function(t){l.collapseRowChildren(e,t)},getTreeExpandedState:function(){return{expandedState:l.getTreeState(e)}},setTreeState:function(t){l.setTreeState(e,t)},getRowChildren:function(e){return e.treeNode.children.map(function(e){return e.row})}}}};e.api.registerEventsFromObject(r.events),e.api.registerMethodsFromObject(r.methods)},defaultGridOptions:function(e){e.treeRowHeaderBaseWidth=e.treeRowHeaderBaseWidth||30,e.treeIndent=e.treeIndent||10,e.showTreeRowHeader=!1!==e.showTreeRowHeader,e.showTreeExpandNoChildren=!1!==e.showTreeExpandNoChildren,e.treeRowHeaderAlwaysVisible=!1!==e.treeRowHeaderAlwaysVisible,e.treeCustomAggregations=e.treeCustomAggregations||{},e.enableExpandAll=!1!==e.enableExpandAll},treeBaseColumnBuilder:function(e,t,r){void 0!==e.customTreeAggregationFn&&(t.treeAggregationFn=e.customTreeAggregationFn),void 0!==e.treeAggregationType&&(t.treeAggregation={type:e.treeAggregationType},void 0!==r.treeCustomAggregations[e.treeAggregationType]?(t.treeAggregationFn=r.treeCustomAggregations[e.treeAggregationType].aggregationFn,t.treeAggregationFinalizerFn=r.treeCustomAggregations[e.treeAggregationType].finalizerFn,t.treeAggregation.label=r.treeCustomAggregations[e.treeAggregationType].label):void 0!==l.nativeAggregations()[e.treeAggregationType]&&(t.treeAggregationFn=l.nativeAggregations()[e.treeAggregationType].aggregationFn,t.treeAggregation.label=l.nativeAggregations()[e.treeAggregationType].label)),void 0!==e.treeAggregationLabel&&(void 0===t.treeAggregation&&(t.treeAggregation={}),t.treeAggregation.label=e.treeAggregationLabel),t.treeAggregationUpdateEntity=!1!==e.treeAggregationUpdateEntity,void 0===t.customTreeAggregationFinalizerFn&&(t.customTreeAggregationFinalizerFn=e.customTreeAggregationFinalizerFn)},createRowHeader:function(e){var r={name:t.rowHeaderColName,displayName:"",width:e.options.treeRowHeaderBaseWidth,minWidth:10,cellTemplate:"ui-grid/treeBaseRowHeader",headerCellTemplate:"ui-grid/treeBaseHeaderCell",enableColumnResizing:!1,enableColumnMenu:!1,exporterSuppressExport:!0,allowCellFocus:!0};r.visible=e.options.treeRowHeaderAlwaysVisible,e.addRowHeaderColumn(r,-100)},expandAllRows:function(e){e.treeBase.tree.forEach(function(r){l.setAllNodes(e,r,t.EXPANDED)}),e.treeBase.expandAll=!0,e.queueGridRefresh()},collapseAllRows:function(e){e.treeBase.tree.forEach(function(r){l.setAllNodes(e,r,t.COLLAPSED)}),e.treeBase.expandAll=!1,e.queueGridRefresh()},setAllNodes:function(e,r,n){void 0!==r.state&&r.state!==n&&(r.state=n,n===t.EXPANDED?e.api.treeBase.raise.rowExpanded(r.row):e.api.treeBase.raise.rowCollapsed(r.row)),r.children&&r.children.forEach(function(t){l.setAllNodes(e,t,n)})},toggleRowTreeState:function(e,r){void 0===r.treeLevel||null===r.treeLevel||r.treeLevel<0||(r.treeNode.state===t.EXPANDED?l.collapseRow(e,r):l.expandRow(e,r),e.queueGridRefresh())},expandRow:function(e,r){void 0===r.treeLevel||null===r.treeLevel||r.treeLevel<0||r.treeNode.state!==t.EXPANDED&&(r.treeNode.state=t.EXPANDED,e.api.treeBase.raise.rowExpanded(r),e.treeBase.expandAll=l.allExpanded(e.treeBase.tree),e.queueGridRefresh())},expandRowChildren:function(e,r){void 0===r.treeLevel||null===r.treeLevel||r.treeLevel<0||(l.setAllNodes(e,r.treeNode,t.EXPANDED),e.treeBase.expandAll=l.allExpanded(e.treeBase.tree),e.queueGridRefresh())},collapseRow:function(e,r){void 0===r.treeLevel||null===r.treeLevel||r.treeLevel<0||r.treeNode.state!==t.COLLAPSED&&(r.treeNode.state=t.COLLAPSED,e.treeBase.expandAll=!1,e.api.treeBase.raise.rowCollapsed(r),e.queueGridRefresh())},collapseRowChildren:function(e,r){void 0===r.treeLevel||null===r.treeLevel||r.treeLevel<0||(l.setAllNodes(e,r.treeNode,t.COLLAPSED),e.treeBase.expandAll=!1,e.queueGridRefresh())},allExpanded:function(e){var t=!0;return e.forEach(function(e){l.allExpandedInternal(e)||(t=!1)}),t},allExpandedInternal:function(e){if(e.children&&e.children.length>0){if(e.state===t.COLLAPSED)return!1;var r=!0;return e.children.forEach(function(e){l.allExpandedInternal(e)||(r=!1)}),r}return!0},treeRows:function(e){if(0===e.length)return e;var r=this;t.EXPANDED;return r.treeBase.tree=l.createTree(r,e),l.updateRowHeaderWidth(r),l.sortTree(r),l.fixFilter(r),l.renderTree(r.treeBase.tree)},updateRowHeaderWidth:function(e){var r=e.getColumn(t.rowHeaderColName),n=e.options.treeRowHeaderBaseWidth+e.options.treeIndent*Math.max(e.treeBase.numberLevels-1,0);r&&n!==r.width&&(r.width=n,e.queueRefresh());var i=!0;!1===e.options.showTreeRowHeader&&(i=!1),!1===e.options.treeRowHeaderAlwaysVisible&&e.treeBase.numberLevels<=0&&(i=!1),r&&r.visible!==i&&(r.visible=i,r.colDef.visible=i,e.queueGridRefresh())},renderTree:function(e){var r=[];return e.forEach(function(e){e.row.visible&&r.push(e.row),e.state===t.EXPANDED&&e.children&&e.children.length>0&&(r=r.concat(l.renderTree(e.children)))}),r},createTree:function(e,r){var n,i=-1,o=[];e.treeBase.tree=[],e.treeBase.numberLevels=0;var a=l.getAggregations(e),s=function(r){if(void 0!==r.entity.$$treeLevel&&r.treeLevel!==r.entity.$$treeLevel&&(r.treeLevel=r.entity.$$treeLevel),r.treeLevel<=i){for(;r.treeLevel<=i;){var s=o.pop();l.finaliseAggregations(s),i--}n=o.length>0?l.setCurrentState(o):t.EXPANDED}(void 0===r.treeLevel||null===r.treeLevel||r.treeLevel<0)&&r.visible&&l.aggregate(e,r,o),l.addOrUseNode(e,r,o,a),void 0!==r.treeLevel&&null!==r.treeLevel&&r.treeLevel>=0&&(o.push(r),i++,n=l.setCurrentState(o)),e.treeBase.numberLevels<r.treeLevel+1&&(e.treeBase.numberLevels=r.treeLevel+1)};for(r.forEach(s);o.length>0;){var u=o.pop();l.finaliseAggregations(u)}return e.treeBase.tree},addOrUseNode:function(e,r,n,i){var o=[];i.forEach(function(e){o.push(l.buildAggregationObject(e.col))});var a={state:t.COLLAPSED,row:r,parentRow:null,aggregations:o,children:[]};r.treeNode&&(a.state=r.treeNode.state),n.length>0&&(a.parentRow=n[n.length-1]),r.treeNode=a,0===n.length?e.treeBase.tree.push(a):n[n.length-1].treeNode.children.push(a)},setCurrentState:function(e){var r=t.EXPANDED;return e.forEach(function(e){e.treeNode.state===t.COLLAPSED&&(r=t.COLLAPSED)}),r},sortTree:function(e){e.columns.forEach(function(e){e.sort&&e.sort.ignoreSort&&delete e.sort.ignoreSort}),e.treeBase.tree=l.sortInternal(e,e.treeBase.tree)},sortInternal:function(e,r){var n=r.map(function(e){return e.row});n=s.sort(e,n,e.columns);var i=n.map(function(e){return e.treeNode});return i.forEach(function(r){r.state===t.EXPANDED&&r.children&&r.children.length>0&&(r.children=l.sortInternal(e,r.children))}),i},fixFilter:function(e){var t;e.treeBase.tree.forEach(function(e){e.children&&e.children.length>0&&(t=e.row.visible,l.fixFilterInternal(e.children,t))})},fixFilterInternal:function(e,t){return e.forEach(function(e){e.row.visible&&!t&&(l.setParentsVisible(e),t=!0),e.children&&e.children.length>0&&l.fixFilterInternal(e.children,t&&e.row.visible)&&(t=!0)}),t},setParentsVisible:function(e){for(;e.parentRow;)e.parentRow.visible=!0,e=e.parentRow.treeNode},buildAggregationObject:function(e){var t={col:e};return e.treeAggregation&&e.treeAggregation.type&&(t.type=e.treeAggregation.type),e.treeAggregation&&e.treeAggregation.label&&(t.label=e.treeAggregation.label),t},getAggregations:function(e){var t=[];return e.columns.forEach(function(r){void 0!==r.treeAggregationFn&&(t.push(l.buildAggregationObject(r)),e.options.showColumnFooter&&void 0===r.colDef.aggregationType&&r.treeAggregation&&(r.treeFooterAggregation=l.buildAggregationObject(r),r.aggregationType=l.treeFooterAggregationType))}),t},aggregate:function(e,t,r){0===r.length&&t.treeNode&&t.treeNode.aggregations&&t.treeNode.aggregations.forEach(function(r){if(void 0!==r.col.treeFooterAggregation){var n=e.getCellValue(t,r.col),i=Number(n);r.col.treeAggregationFn(r.col.treeFooterAggregation,n,i,t)}}),r.forEach(function(r,n){r.treeNode.aggregations&&r.treeNode.aggregations.forEach(function(r){var i=e.getCellValue(t,r.col),o=Number(i);r.col.treeAggregationFn(r,i,o,t),0===n&&void 0!==r.col.treeFooterAggregation&&r.col.treeAggregationFn(r.col.treeFooterAggregation,i,o,t)})})},nativeAggregations:function(){return{count:{label:o.get().aggregation.count,menuTitle:o.get().grouping.aggregate_count,aggregationFn:function(e,t,r){void 0===e.value?e.value=1:e.value++}},sum:{label:o.get().aggregation.sum,menuTitle:o.get().grouping.aggregate_sum,aggregationFn:function(e,t,r){isNaN(r)||(void 0===e.value?e.value=r:e.value+=r)}},min:{label:o.get().aggregation.min,menuTitle:o.get().grouping.aggregate_min,aggregationFn:function(e,t,r){void 0===e.value?e.value=t:void 0!==t&&null!==t&&(t<e.value||null===e.value)&&(e.value=t)}},max:{label:o.get().aggregation.max,menuTitle:o.get().grouping.aggregate_max,aggregationFn:function(e,t,r){void 0===e.value?e.value=t:void 0!==t&&null!==t&&(t>e.value||null===e.value)&&(e.value=t)}},avg:{label:o.get().aggregation.avg,menuTitle:o.get().grouping.aggregate_avg,aggregationFn:function(e,t,r){void 0===e.count?e.count=1:e.count++,isNaN(r)||(void 0===e.value||void 0===e.sum?(e.value=r,e.sum=r):(e.sum+=r,e.value=e.sum/e.count))}}}},finaliseAggregation:function(e,t){t.col.treeAggregationUpdateEntity&&void 0!==e&&void 0!==e.entity["$$"+t.col.uid]&&angular.extend(t,e.entity["$$"+t.col.uid]),"function"==typeof t.col.treeAggregationFinalizerFn&&t.col.treeAggregationFinalizerFn(t),"function"==typeof t.col.customTreeAggregationFinalizerFn&&t.col.customTreeAggregationFinalizerFn(t),void 0===t.rendered&&(t.rendered=t.label?t.label+t.value:t.value)},finaliseAggregations:function(e){null!=e&&void 0!==e.treeNode.aggregations&&e.treeNode.aggregations.forEach(function(t){if(l.finaliseAggregation(e,t),t.col.treeAggregationUpdateEntity){var r={};angular.forEach(t,function(e,n){t.hasOwnProperty(n)&&"col"!==n&&(r[n]=e)}),e.entity["$$"+t.col.uid]=r}})},treeFooterAggregationType:function(e,t){return l.finaliseAggregation(void 0,t.treeFooterAggregation),void 0===t.treeFooterAggregation.value||null===t.treeFooterAggregation.rendered?"":t.treeFooterAggregation.rendered}};return l}]),e.directive("uiGridTreeBaseRowHeaderButtons",["$templateCache","uiGridTreeBaseService",function(e,t){return{replace:!0,restrict:"E",template:e.get("ui-grid/treeBaseRowHeaderButtons"),scope:!0,require:"^uiGrid",link:function(e,r,n,i){var o=i.grid;e.treeButtonClick=function(e,r){t.toggleRowTreeState(o,e,r)}}}}]),e.directive("uiGridTreeBaseExpandAllButtons",["$templateCache","uiGridTreeBaseService",function(e,t){return{replace:!0,restrict:"E",template:e.get("ui-grid/treeBaseExpandAllButtons"),scope:!1,link:function(e,r,n,i){var o=e.col.grid;e.headerButtonClick=function(e,r){o.treeBase.expandAll?t.collapseAllRows(o,r):t.expandAllRows(o,r)}}}}]),e.directive("uiGridViewport",["$compile","uiGridConstants","gridUtil","$parse",function(e,t,r,n){return{priority:-200,scope:!1,compile:function(e,t){var r=angular.element(e.children().children()[0]),n=r.attr("ng-class"),i="";return i=n?n.slice(0,-1)+",'ui-grid-tree-header-row': row.treeLevel > -1}":"{'ui-grid-tree-header-row': row.treeLevel > -1}",r.attr("ng-class",i),{pre:function(e,t,r,n){},post:function(e,t,r,n){}}}}}])}(),function(){"use strict";var e=angular.module("ui.grid.treeView",["ui.grid","ui.grid.treeBase"]);e.constant("uiGridTreeViewConstants",{featureName:"treeView",rowHeaderColName:"treeBaseRowHeaderCol",EXPANDED:"expanded",COLLAPSED:"collapsed",aggregation:{COUNT:"count",SUM:"sum",MAX:"max",MIN:"min",AVG:"avg"}}),e.service("uiGridTreeViewService",["$q","uiGridTreeViewConstants","uiGridTreeBaseConstants","uiGridTreeBaseService","gridUtil","GridRow","gridClassFactory","i18nService","uiGridConstants",function(e,t,r,n,i,o,a,s,l){var u={initializeGrid:function(e,t){n.initializeGrid(e,t),e.treeView={},e.registerRowsProcessor(u.adjustSorting,60);var r={events:{treeView:{}},methods:{treeView:{}}};e.api.registerEventsFromObject(r.events),e.api.registerMethodsFromObject(r.methods)},defaultGridOptions:function(e){e.enableTreeView=!1!==e.enableTreeView},adjustSorting:function(e){return this.columns.forEach(function(e){e.sort&&(e.sort.ignoreSort=!0)}),e}};return u}]),e.directive("uiGridTreeView",["uiGridTreeViewConstants","uiGridTreeViewService","$templateCache",function(e,t,r){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(e,r,n,i){!1!==i.grid.options.enableTreeView&&t.initializeGrid(i.grid,e)},post:function(e,t,r,n){}}}}}])}(),function(){"use strict";var e=angular.module("ui.grid.validate",["ui.grid"]);e.service("uiGridValidateService",["$sce","$q","$http","i18nService","uiGridConstants",function(e,t,r,n,i){var o={validatorFactories:{},setExternalFactoryFunction:function(e){o.externalFactoryFunction=e},clearExternalFactory:function(){delete o.externalFactoryFunction},getValidatorFromExternalFactory:function(e,t){return o.externalFactoryFunction(e,t).validatorFactory(t)},getMessageFromExternalFactory:function(e,t){return o.externalFactoryFunction(e,t).messageFunction(t)},setValidator:function(e,t,r){o.validatorFactories[e]={validatorFactory:t,messageFunction:r}},getValidator:function(e,t){if(o.externalFactoryFunction){var r=o.getValidatorFromExternalFactory(e,t);if(r)return r}if(!o.validatorFactories[e])throw"Invalid validator name: "+e;return o.validatorFactories[e].validatorFactory(t)},getMessage:function(e,t){if(o.externalFactoryFunction){var r=o.getMessageFromExternalFactory(e,t);if(r)return r}return o.validatorFactories[e].messageFunction(t)},isInvalid:function(e,t){return e["$$invalid"+t.name]},setInvalid:function(e,t){e["$$invalid"+t.name]=!0},setValid:function(e,t){delete e["$$invalid"+t.name]},setError:function(e,t,r){e["$$errors"+t.name]||(e["$$errors"+t.name]={}),e["$$errors"+t.name][r]=!0},clearError:function(e,t,r){e["$$errors"+t.name]&&r in e["$$errors"+t.name]&&delete e["$$errors"+t.name][r]},getErrorMessages:function(e,t){var r=[];return e["$$errors"+t.name]&&0!==Object.keys(e["$$errors"+t.name]).length?(Object.keys(e["$$errors"+t.name]).sort().forEach(function(e){r.push(o.getMessage(e,t.validators[e]))}),r):r},getFormattedErrors:function(t,r){var i="",a=o.getErrorMessages(t,r);if(a.length)return a.forEach(function(e){i+=e+"<br/>"}),e.trustAsHtml("<p><b>"+n.getSafeText("validate.error")+"</b></p>"+i)},getTitleFormattedErrors:function(t,r){var i="",a=o.getErrorMessages(t,r);if(a.length)return a.forEach(function(e){i+=e+"\n"}),e.trustAsHtml(n.getSafeText("validate.error")+"\n"+i)},runValidators:function(e,r,n,i,a){if(n!==i){if(void 0===r.name||!r.name)throw new Error("colDef.name is required to perform validation");o.setValid(e,r);var s=[];for(var l in r.validators){o.clearError(e,r,l);var u=o.getValidator(l,r.validators[l]),c=t.when(u(i,n,e,r)).then(function(e,t,r){return function(s){s||(o.setInvalid(e,t),o.setError(e,t,r),a&&a.api.validate.raise.validationFailed(e,t,n,i))}}(e,r,l));s.push(c)}return t.all(s)}},createDefaultValidators:function(){o.setValidator("minLength",function(e){return function(t,r,n,i){return void 0===r||null===r||""===r||r.length>=e}},function(e){return n.getSafeText("validate.minLength").replace("THRESHOLD",e)}),o.setValidator("maxLength",function(e){return function(t,r,n,i){return void 0===r||null===r||""===r||r.length<=e}},function(e){return n.getSafeText("validate.maxLength").replace("THRESHOLD",e)}),o.setValidator("required",function(e){return function(t,r,n,i){return!e||!(void 0===r||null===r||""===r)}},function(e){return n.getSafeText("validate.required")})},initializeGrid:function(e,t){t.validate={isInvalid:o.isInvalid,getFormattedErrors:o.getFormattedErrors,getTitleFormattedErrors:o.getTitleFormattedErrors,runValidators:o.runValidators};var r={events:{validate:{validationFailed:function(e,t,r,n){}}},methods:{validate:{isInvalid:function(e,r){return t.validate.isInvalid(e,r)},getErrorMessages:function(e,r){return t.validate.getErrorMessages(e,r)},getFormattedErrors:function(e,r){return t.validate.getFormattedErrors(e,r)},getTitleFormattedErrors:function(e,r){return t.validate.getTitleFormattedErrors(e,r)}}}};t.api.registerEventsFromObject(r.events),t.api.registerMethodsFromObject(r.methods),t.edit&&t.api.edit.on.afterCellEdit(e,function(e,r,n,i){t.validate.runValidators(e,r,n,i,t)}),o.createDefaultValidators()}};return o}]),e.directive("uiGridValidate",["gridUtil","uiGridValidateService",function(e,t){return{priority:0,replace:!0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(e,r,n,i){t.initializeGrid(e,i.grid)},post:function(e,t,r,n){}}}}}])}(),angular.module("ui.grid").run(["$templateCache",function(e){"use strict";e.put("ui-grid/ui-grid-filter",'<div class="ui-grid-filter-container" ng-style="col.extraStyle" ng-repeat="colFilter in col.filters" ng-class="{\'ui-grid-filter-cancel-button-hidden\' : colFilter.disableCancelFilterButton === true }"><div ng-if="colFilter.type !== \'select\'"><input type="text" class="ui-grid-filter-input ui-grid-filter-input-{{$index}}" ng-model="colFilter.term" ng-attr-placeholder="{{colFilter.placeholder || \'\'}}" aria-label="{{colFilter.ariaLabel || aria.defaultFilterLabel}}"><div role="button" class="ui-grid-filter-button" ng-click="removeFilter(colFilter, $index)" ng-if="!colFilter.disableCancelFilterButton" ng-disabled="colFilter.term === undefined || colFilter.term === null || colFilter.term === \'\'" ng-show="colFilter.term !== undefined && colFilter.term !== null && colFilter.term !== \'\'"><i class="ui-grid-icon-cancel" ui-grid-one-bind-aria-label="aria.removeFilter">&nbsp;</i></div></div><div ng-if="colFilter.type === \'select\'"><select class="ui-grid-filter-select ui-grid-filter-input-{{$index}}" ng-model="colFilter.term" ng-show="colFilter.selectOptions.length > 0" ng-attr-placeholder="{{colFilter.placeholder || aria.defaultFilterLabel}}" aria-label="{{colFilter.ariaLabel || \'\'}}" ng-options="option.value as option.label for option in colFilter.selectOptions"><option value=""></option></select><div role="button" class="ui-grid-filter-button-select" ng-click="removeFilter(colFilter, $index)" ng-if="!colFilter.disableCancelFilterButton" ng-disabled="colFilter.term === undefined || colFilter.term === null || colFilter.term === \'\'" ng-show="colFilter.term !== undefined && colFilter.term != null"><i class="ui-grid-icon-cancel" ui-grid-one-bind-aria-label="aria.removeFilter">&nbsp;</i></div></div></div>'),e.put("ui-grid/ui-grid-footer",'<div class="ui-grid-footer-panel ui-grid-footer-aggregates-row">\x3c!-- tfooter --\x3e<div class="ui-grid-footer ui-grid-footer-viewport"><div class="ui-grid-footer-canvas"><div class="ui-grid-footer-cell-wrapper" ng-style="colContainer.headerCellWrapperStyle()"><div role="row" class="ui-grid-footer-cell-row"><div ui-grid-footer-cell role="gridcell" ng-repeat="col in colContainer.renderedColumns track by col.uid" col="col" render-index="$index" class="ui-grid-footer-cell ui-grid-clearfix"></div></div></div></div></div></div>'),e.put("ui-grid/ui-grid-grid-footer",'<div class="ui-grid-footer-info ui-grid-grid-footer"><span>{{\'search.totalItems\' | t}} {{grid.rows.length}}</span> <span ng-if="grid.renderContainers.body.visibleRowCache.length !== grid.rows.length" class="ngLabel">({{"search.showingItems" | t}} {{grid.renderContainers.body.visibleRowCache.length}})</span></div>'),e.put("ui-grid/ui-grid-group-panel",'<div class="ui-grid-group-panel"><div ui-t="groupPanel.description" class="description" ng-show="groupings.length == 0"></div><ul ng-show="groupings.length > 0" class="ngGroupList"><li class="ngGroupItem" ng-repeat="group in configGroups"><span class="ngGroupElement"><span class="ngGroupName">{{group.displayName}} <span ng-click="removeGroup($index)" class="ngRemoveGroup">x</span></span> <span ng-hide="$last" class="ngGroupArrow"></span></span></li></ul></div>'),e.put("ui-grid/ui-grid-header",'<div role="rowgroup" class="ui-grid-header">\x3c!-- theader --\x3e<div class="ui-grid-top-panel"><div class="ui-grid-header-viewport"><div class="ui-grid-header-canvas"><div class="ui-grid-header-cell-wrapper" ng-style="colContainer.headerCellWrapperStyle()"><div role="row" class="ui-grid-header-cell-row"><div class="ui-grid-header-cell ui-grid-clearfix" ng-repeat="col in colContainer.renderedColumns track by col.uid" ui-grid-header-cell col="col" render-index="$index"></div></div></div></div></div></div></div>'),e.put("ui-grid/ui-grid-menu-button",'<div class="ui-grid-menu-button"><div role="button" ui-grid-one-bind-id-grid="\'grid-menu\'" class="ui-grid-icon-container" ng-click="toggleMenu()" aria-haspopup="true"><i class="ui-grid-icon-menu" ui-grid-one-bind-aria-label="i18n.aria.buttonLabel">&nbsp;</i></div><div ui-grid-menu menu-items="menuItems"></div></div>'),e.put("ui-grid/ui-grid-no-header",'<div class="ui-grid-top-panel"></div>'),e.put("ui-grid/ui-grid-row","<div ng-repeat=\"(colRenderIndex, col) in colContainer.renderedColumns track by col.uid\" ui-grid-one-bind-id-grid=\"rowRenderIndex + '-' + col.uid + '-cell'\" class=\"ui-grid-cell\" ng-class=\"{ 'ui-grid-row-header-cell': col.isRowHeader }\" role=\"{{col.isRowHeader ? 'rowheader' : 'gridcell'}}\" ui-grid-cell></div>"),e.put("ui-grid/ui-grid",'<div ui-i18n="en" class="ui-grid">\x3c!-- TODO (c0bra): add "scoped" attr here, eventually? --\x3e<style ui-grid-style>.grid{{ grid.id }} {\n      /* Styles for the grid */\n    }\n\n    .grid{{ grid.id }} .ui-grid-row, .grid{{ grid.id }} .ui-grid-cell, .grid{{ grid.id }} .ui-grid-cell .ui-grid-vertical-bar {\n      height: {{ grid.options.rowHeight }}px;\n    }\n\n    .grid{{ grid.id }} .ui-grid-row:last-child .ui-grid-cell {\n      border-bottom-width: {{ ((grid.getTotalRowHeight() < grid.getViewportHeight()) && \'1\') || \'0\' }}px;\n    }\n\n    {{ grid.verticalScrollbarStyles }}\n    {{ grid.horizontalScrollbarStyles }}\n\n    /*\n    .ui-grid[dir=rtl] .ui-grid-viewport {\n      padding-left: {{ grid.verticalScrollbarWidth }}px;\n    }\n    */\n\n    {{ grid.customStyles }}</style><div class="ui-grid-contents-wrapper"><div ui-grid-menu-button ng-if="grid.options.enableGridMenu"></div><div ng-if="grid.hasLeftContainer()" style="width: 0" ui-grid-pinned-container="\'left\'"></div><div ui-grid-render-container container-id="\'body\'" col-container-name="\'body\'" row-container-name="\'body\'" bind-scroll-horizontal="true" bind-scroll-vertical="true" enable-horizontal-scrollbar="grid.options.enableHorizontalScrollbar" enable-vertical-scrollbar="grid.options.enableVerticalScrollbar"></div><div ng-if="grid.hasRightContainer()" style="width: 0" ui-grid-pinned-container="\'right\'"></div><div ui-grid-grid-footer ng-if="grid.options.showGridFooter"></div><div ui-grid-column-menu ng-if="grid.options.enableColumnMenus"></div><div ng-transclude></div></div></div>'),e.put("ui-grid/uiGridCell",'<div class="ui-grid-cell-contents" title="TOOLTIP">{{COL_FIELD CUSTOM_FILTERS}}</div>'),e.put("ui-grid/uiGridColumnMenu",'<div class="ui-grid-column-menu"><div ui-grid-menu menu-items="menuItems">\x3c!-- <div class="ui-grid-column-menu">\n    <div class="inner" ng-show="menuShown">\n      <ul>\n        <div ng-show="grid.options.enableSorting">\n          <li ng-click="sortColumn($event, asc)" ng-class="{ \'selected\' : col.sort.direction == asc }"><i class="ui-grid-icon-sort-alt-up"></i> Sort Ascending</li>\n          <li ng-click="sortColumn($event, desc)" ng-class="{ \'selected\' : col.sort.direction == desc }"><i class="ui-grid-icon-sort-alt-down"></i> Sort Descending</li>\n          <li ng-show="col.sort.direction" ng-click="unsortColumn()"><i class="ui-grid-icon-cancel"></i> Remove Sort</li>\n        </div>\n      </ul>\n    </div>\n  </div> --\x3e</div></div>'),e.put("ui-grid/uiGridFooterCell",'<div class="ui-grid-cell-contents" col-index="renderIndex"><div>{{ col.getAggregationText() + ( col.getAggregationValue() CUSTOM_FILTERS ) }}</div></div>'),e.put("ui-grid/uiGridHeaderCell",'<div role="columnheader" ng-class="{ \'sortable\': sortable }" ui-grid-one-bind-aria-labelledby-grid="col.uid + \'-header-text \' + col.uid + \'-sortdir-text\'" aria-sort="{{col.sort.direction == asc ? \'ascending\' : ( col.sort.direction == desc ? \'descending\' : (!col.sort.direction ? \'none\' : \'other\'))}}"><div role="button" tabindex="0" class="ui-grid-cell-contents ui-grid-header-cell-primary-focus" col-index="renderIndex" title="TOOLTIP"><span class="ui-grid-header-cell-label" ui-grid-one-bind-id-grid="col.uid + \'-header-text\'">{{ col.displayName CUSTOM_FILTERS }}</span> <span ui-grid-one-bind-id-grid="col.uid + \'-sortdir-text\'" ui-grid-visible="col.sort.direction" aria-label="{{getSortDirectionAriaLabel()}}"><i ng-class="{ \'ui-grid-icon-up-dir\': col.sort.direction == asc, \'ui-grid-icon-down-dir\': col.sort.direction == desc, \'ui-grid-icon-blank\': !col.sort.direction }" title="{{isSortPriorityVisible() ? i18n.headerCell.priority + \' \' + ( col.sort.priority + 1 )  : null}}" aria-hidden="true"></i> <sub ui-grid-visible="isSortPriorityVisible()" class="ui-grid-sort-priority-number">{{col.sort.priority + 1}}</sub></span></div><div role="button" tabindex="0" ui-grid-one-bind-id-grid="col.uid + \'-menu-button\'" class="ui-grid-column-menu-button" ng-if="grid.options.enableColumnMenus && !col.isRowHeader  && col.colDef.enableColumnMenu !== false" ng-click="toggleMenu($event)" ng-class="{\'ui-grid-column-menu-button-last-col\': isLastCol}" ui-grid-one-bind-aria-label="i18n.headerCell.aria.columnMenuButtonLabel" aria-haspopup="true"><i class="ui-grid-icon-angle-down" aria-hidden="true">&nbsp;</i></div><div ui-grid-filter></div></div>'),e.put("ui-grid/uiGridMenu",'<div class="ui-grid-menu" ng-if="shown"><style ui-grid-style>{{dynamicStyles}}</style><div class="ui-grid-menu-mid" ng-show="shownMid"><div class="ui-grid-menu-inner"><ul role="menu" class="ui-grid-menu-items"><li ng-repeat="item in menuItems" role="menuitem" ui-grid-menu-item ui-grid-one-bind-id="\'menuitem-\'+$index" action="item.action" name="item.title" active="item.active" icon="item.icon" shown="item.shown" context="item.context" template-url="item.templateUrl" leave-open="item.leaveOpen" screen-reader-only="item.screenReaderOnly"></li></ul></div></div></div>'),e.put("ui-grid/uiGridMenuItem",'<button type="button" class="ui-grid-menu-item" ng-click="itemAction($event, title)" ng-show="itemShown()" ng-class="{ \'ui-grid-menu-item-active\': active(), \'ui-grid-sr-only\': (!focus && screenReaderOnly) }" aria-pressed="{{active()}}" tabindex="0" ng-focus="focus=true" ng-blur="focus=false"><i ng-class="icon" aria-hidden="true">&nbsp;</i> {{ label() }}</button>'),e.put("ui-grid/uiGridRenderContainer","<div role=\"grid\" ui-grid-one-bind-id-grid=\"'grid-container'\" class=\"ui-grid-render-container\" ng-style=\"{ 'margin-left': colContainer.getMargin('left') + 'px', 'margin-right': colContainer.getMargin('right') + 'px' }\">\x3c!-- All of these dom elements are replaced in place --\x3e<div ui-grid-header></div><div ui-grid-viewport></div><div ng-if=\"colContainer.needsHScrollbarPlaceholder()\" class=\"ui-grid-scrollbar-placeholder\" ng-style=\"{height:colContainer.grid.scrollbarHeight + 'px'}\"></div><ui-grid-footer ng-if=\"grid.options.showColumnFooter\"></ui-grid-footer></div>"),e.put("ui-grid/uiGridViewport",'<div role="rowgroup" class="ui-grid-viewport" ng-style="colContainer.getViewportStyle()">\x3c!-- tbody --\x3e<div class="ui-grid-canvas"><div ng-repeat="(rowRenderIndex, row) in rowContainer.renderedRows track by $index" class="ui-grid-row" ng-style="Viewport.rowStyle(rowRenderIndex)"><div role="row" ui-grid-row="row" row-render-index="rowRenderIndex"></div></div></div></div>'),e.put("ui-grid/cellEditor",'<div><form name="inputForm"><input type="INPUT_TYPE" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD"></form></div>'),e.put("ui-grid/dropdownEditor",'<div><form name="inputForm"><select ng-class="\'colt\' + col.uid" ui-grid-edit-dropdown ng-model="MODEL_COL_FIELD" ng-options="field[editDropdownIdLabel] as field[editDropdownValueLabel] CUSTOM_FILTERS for field in editDropdownOptionsArray"></select></form></div>'),e.put("ui-grid/fileChooserEditor",'<div><form name="inputForm"><input ng-class="\'colt\' + col.uid" ui-grid-edit-file-chooser type="file" id="files" name="files[]" ng-model="MODEL_COL_FIELD"></form></div>'),e.put("ui-grid/emptyBaseLayerContainer",'<div class="ui-grid-empty-base-layer-container ui-grid-canvas"><div class="ui-grid-row" ng-repeat="(rowRenderIndex, row) in grid.baseLayer.emptyRows track by $index" ng-style="Viewport.rowStyle(rowRenderIndex)"><div><div><div ng-repeat="(colRenderIndex, col) in colContainer.renderedColumns track by col.colDef.name" class="ui-grid-cell {{ col.getColClass(false) }}"></div></div></div></div></div>'),e.put("ui-grid/expandableRow",'<div ui-grid-expandable-row ng-if="expandableRow.shouldRenderExpand()" class="expandableRow" style="float:left; margin-top: 1px; margin-bottom: 1px" ng-style="{width: (grid.renderContainers.body.getCanvasWidth()) + \'px\', height: row.expandedRowHeight + \'px\'}"></div>'),e.put("ui-grid/expandableRowHeader",'<div class="ui-grid-row-header-cell ui-grid-expandable-buttons-cell"><div class="ui-grid-cell-contents"><i ng-if="!(row.groupHeader==true || row.entity.subGridOptions.disableRowExpandable)" ng-class="{ \'ui-grid-icon-plus-squared\' : !row.isExpanded, \'ui-grid-icon-minus-squared\' : row.isExpanded }" ng-click="grid.api.expandable.toggleRowExpansion(row.entity)"></i></div></div>'),e.put("ui-grid/expandableScrollFiller","<div ng-if=\"expandableRow.shouldRenderFiller()\" ng-class=\"{scrollFiller:true, scrollFillerClass:(colContainer.name === 'body')}\" ng-style=\"{ width: (grid.getViewportWidth()) + 'px', height: row.expandedRowHeight + 2 + 'px', 'margin-left': grid.options.rowHeader.rowHeaderWidth + 'px' }\"><i class=\"ui-grid-icon-spin5 ui-grid-animate-spin\" ng-style=\"{'margin-top': ( row.expandedRowHeight/2 - 5) + 'px', 'margin-left' : ((grid.getViewportWidth() - grid.options.rowHeader.rowHeaderWidth)/2 - 5) + 'px'}\"></i></div>"),e.put("ui-grid/expandableTopRowHeader",'<div class="ui-grid-row-header-cell ui-grid-expandable-buttons-cell"><div class="ui-grid-cell-contents"><i ng-class="{ \'ui-grid-icon-plus-squared\' : !grid.expandable.expandedAll, \'ui-grid-icon-minus-squared\' : grid.expandable.expandedAll }" ng-click="grid.api.expandable.toggleAllRows()"></i></div></div>'),e.put("ui-grid/csvLink",'<span class="ui-grid-exporter-csv-link-span"><a href="data:text/csv;charset=UTF-8,CSV_CONTENT" download="FILE_NAME">LINK_LABEL</a></span>'),e.put("ui-grid/importerMenuItem",'<li class="ui-grid-menu-item"><form><input class="ui-grid-importer-file-chooser" type="file" id="files" name="files[]"></form></li>'),e.put("ui-grid/importerMenuItemContainer","<div ui-grid-importer-menu-item></div>"),e.put("ui-grid/pagination",'<div role="contentinfo" class="ui-grid-pager-panel" ui-grid-pager ng-show="grid.options.enablePaginationControls"><div role="navigation" class="ui-grid-pager-container"><div role="menubar" class="ui-grid-pager-control"><button type="button" role="menuitem" class="ui-grid-pager-first" ui-grid-one-bind-title="aria.pageToFirst" ui-grid-one-bind-aria-label="aria.pageToFirst" ng-click="pageFirstPageClick()" ng-disabled="cantPageBackward()"><div ng-class="grid.isRTL() ? \'last-triangle\' : \'first-triangle\'"><div ng-class="grid.isRTL() ? \'last-bar-rtl\' : \'first-bar\'"></div></div></button> <button type="button" role="menuitem" class="ui-grid-pager-previous" ui-grid-one-bind-title="aria.pageBack" ui-grid-one-bind-aria-label="aria.pageBack" ng-click="pagePreviousPageClick()" ng-disabled="cantPageBackward()"><div ng-class="grid.isRTL() ? \'last-triangle prev-triangle\' : \'first-triangle prev-triangle\'"></div></button> <input type="number" ui-grid-one-bind-title="aria.pageSelected" ui-grid-one-bind-aria-label="aria.pageSelected" class="ui-grid-pager-control-input" ng-model="grid.options.paginationCurrentPage" min="1" max="{{ paginationApi.getTotalPages() }}" required> <span class="ui-grid-pager-max-pages-number" ng-show="paginationApi.getTotalPages() > 0"><abbr ui-grid-one-bind-title="paginationOf">/</abbr> {{ paginationApi.getTotalPages() }}</span> <button type="button" role="menuitem" class="ui-grid-pager-next" ui-grid-one-bind-title="aria.pageForward" ui-grid-one-bind-aria-label="aria.pageForward" ng-click="pageNextPageClick()" ng-disabled="cantPageForward()"><div ng-class="grid.isRTL() ? \'first-triangle next-triangle\' : \'last-triangle next-triangle\'"></div></button> <button type="button" role="menuitem" class="ui-grid-pager-last" ui-grid-one-bind-title="aria.pageToLast" ui-grid-one-bind-aria-label="aria.pageToLast" ng-click="pageLastPageClick()" ng-disabled="cantPageToLast()"><div ng-class="grid.isRTL() ? \'first-triangle\' : \'last-triangle\'"><div ng-class="grid.isRTL() ? \'first-bar-rtl\' : \'last-bar\'"></div></div></button></div><div class="ui-grid-pager-row-count-picker" ng-if="grid.options.paginationPageSizes.length > 1 && !grid.options.useCustomPagination"><select ui-grid-one-bind-aria-labelledby-grid="\'items-per-page-label\'" ng-model="grid.options.paginationPageSize" ng-options="o as o for o in grid.options.paginationPageSizes"></select><span ui-grid-one-bind-id-grid="\'items-per-page-label\'" class="ui-grid-pager-row-count-label">&nbsp;{{sizesLabel}}</span></div><span ng-if="grid.options.paginationPageSizes.length <= 1" class="ui-grid-pager-row-count-label">{{grid.options.paginationPageSize}}&nbsp;{{sizesLabel}}</span></div><div class="ui-grid-pager-count-container"><div class="ui-grid-pager-count"><span ng-show="grid.options.totalItems > 0">{{ 1 + paginationApi.getFirstRowIndex() }} <abbr ui-grid-one-bind-title="paginationThrough">-</abbr> {{ 1 + paginationApi.getLastRowIndex() }} {{paginationOf}} {{grid.options.totalItems}} {{totalItemsLabel}}</span></div></div></div>'),e.put("ui-grid/columnResizer",'<div ui-grid-column-resizer ng-if="grid.options.enableColumnResizing" class="ui-grid-column-resizer" col="col" position="right" render-index="renderIndex" unselectable="on"></div>'),e.put("ui-grid/gridFooterSelectedItems",'<span ng-if="grid.selection.selectedCount !== 0 && grid.options.enableFooterTotalSelected">({{"search.selectedItems" | t}} {{grid.selection.selectedCount}})</span>'),e.put("ui-grid/selectionHeaderCell",'<div>\x3c!-- <div class="ui-grid-vertical-bar">&nbsp;</div> --\x3e<div class="ui-grid-cell-contents" col-index="renderIndex"><ui-grid-selection-select-all-buttons ng-if="grid.options.enableSelectAll"></ui-grid-selection-select-all-buttons></div></div>'),e.put("ui-grid/selectionRowHeader",'<div class="ui-grid-disable-selection"><div class="ui-grid-cell-contents"><ui-grid-selection-row-header-buttons></ui-grid-selection-row-header-buttons></div></div>'),e.put("ui-grid/selectionRowHeaderButtons",'<div class="ui-grid-selection-row-header-buttons ui-grid-icon-ok" ng-class="{\'ui-grid-row-selected\': row.isSelected}" ng-click="selectButtonClick(row, $event)">&nbsp;</div>'),e.put("ui-grid/selectionSelectAllButtons",'<div class="ui-grid-selection-row-header-buttons ui-grid-icon-ok" ng-class="{\'ui-grid-all-selected\': grid.selection.selectAll}" ng-click="headerButtonClick($event)"></div>'),e.put("ui-grid/treeBaseExpandAllButtons",'<div class="ui-grid-tree-base-row-header-buttons" ng-class="{\'ui-grid-icon-minus-squared\': grid.treeBase.numberLevels > 0 && grid.treeBase.expandAll, \'ui-grid-icon-plus-squared\': grid.treeBase.numberLevels > 0 && !grid.treeBase.expandAll}" ng-click="headerButtonClick($event)"></div>'),e.put("ui-grid/treeBaseHeaderCell",'<div><div class="ui-grid-cell-contents" col-index="renderIndex"><ui-grid-tree-base-expand-all-buttons ng-if="grid.options.enableExpandAll"></ui-grid-tree-base-expand-all-buttons></div></div>'),e.put("ui-grid/treeBaseRowHeader",'<div class="ui-grid-cell-contents"><ui-grid-tree-base-row-header-buttons></ui-grid-tree-base-row-header-buttons></div>'),e.put("ui-grid/treeBaseRowHeaderButtons","<div class=\"ui-grid-tree-base-row-header-buttons\" ng-class=\"{'ui-grid-tree-base-header': row.treeLevel > -1 }\" ng-click=\"treeButtonClick(row, $event)\"><i ng-class=\"{'ui-grid-icon-minus-squared': ( ( grid.options.showTreeExpandNoChildren && row.treeLevel > -1 ) || ( row.treeNode.children && row.treeNode.children.length > 0 ) ) && row.treeNode.state === 'expanded', 'ui-grid-icon-plus-squared': ( ( grid.options.showTreeExpandNoChildren && row.treeLevel > -1 ) || ( row.treeNode.children && row.treeNode.children.length > 0 ) ) && row.treeNode.state === 'collapsed'}\" ng-style=\"{'padding-left': grid.options.treeIndent * row.treeLevel + 'px'}\"></i> &nbsp;</div>"),e.put("ui-grid/cellTitleValidator",'<div class="ui-grid-cell-contents" ng-class="{invalid:grid.validate.isInvalid(row.entity,col.colDef)}" title="{{grid.validate.getTitleFormattedErrors(row.entity,col.colDef)}}">{{COL_FIELD CUSTOM_FILTERS}}</div>'),e.put("ui-grid/cellTooltipValidator",'<div class="ui-grid-cell-contents" ng-class="{invalid:grid.validate.isInvalid(row.entity,col.colDef)}" tooltip-html-unsafe="{{grid.validate.getFormattedErrors(row.entity,col.colDef)}}" tooltip-enable="grid.validate.isInvalid(row.entity,col.colDef)" tooltip-append-to-body="true" tooltip-placement="top" title="TOOLTIP">{{COL_FIELD CUSTOM_FILTERS}}</div>')}])},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(235);t.default=function(e){return"string"==typeof e?new n.a(document.querySelector(e)):new n.a(e)}},function(e,t,r){"use strict";var n=r(489),i=r(240);const o={totalAngle:360,spaceDeg:0,background:"#323232",backgroundHover:"#515151",pageBackground:"transparent",percent:.32,diameter:300,position:"top",horizontal:!0,animation:"into",hideAfterClick:!0};t.a=function(e){return e=Object(i.a)(o,e),this._creator=new n.a(this,e),this._creator.createMenu(),this}},function(e,t,r){"use strict";function n(e,t){this._cMenu=e,this._container=e._container,this._config=t,this._calc=new i.a(t),this._anchors=[]}t.a=n;var i=r(490),o=r(498),a=r(499),s=r(501),l=r(502),u=r(503),c=r(239),p=r(504),d=r(505);n.prototype={constructor:n,createMenu:s.a,_createLists:o.a,_createList:a.a,_createAnchor:l.a,_createText:u.a,_createHorizontal:p.a,_createIcon:c.a,_createSubMenu:d.a}},function(e,t,r){"use strict";function n(e){this._config=e;var t=this.config=e,r=t.menus.length,n=360===t.totalAngle?r:r-1;this.radius=e.diameter/2,this.coverRadius=Object(s.a)(this.radius,e.percent),this.clickZoneRadius=this.radius-this.coverRadius,this.listSize=Object(c.a)(e),this.clickZoneSize=Object(u.a)(e),this.menuSize=Object(l.a)(e),this.coverSize=Object(s.b)(this.coverRadius),this.startDeg=Object(a.a)(e),this.centralDeg=(t.totalAngle-t.spaceDeg*n)/r,this.rotateUnit=this.centralDeg+t.spaceDeg,this.skewDeg=90-this.centralDeg,this.unskewDeg=-(90-this.centralDeg/2),this.textTop=Object(p.a)(this.clickZoneRadius)}t.a=n;var i=r(491),o=r(492),a=r(493),s=r(494),l=r(495),u=r(236),c=r(496),p=r(497);n.prototype={constructor:n,rotateDeg:i.a,horizontalDeg:o.a}},function(e,t,r){"use strict";function n(e){return this.startDeg+this.rotateUnit*e}t.a=n},function(e,t,r){"use strict";function n(e){return-(this.rotateDeg(e)+this.unskewDeg)}t.a=n},function(e,t,r){"use strict";function n(e){var t=-(e.totalAngle-180)/2,r={top:t,left:t-90,right:t+90,bottom:t+180};return void 0!==e.start?e.start:r[e.position]}t.a=n},function(e,t,r){"use strict";function n(e,t){var r=e*e*2;return Math.sqrt(r)*t+i}t.a=n;const i=3;t.b=function(e){var t=2*e,r=-t/2;return t+="px",r+="px",{width:t,height:t,marginLeft:r,marginTop:r}}},function(e,t,r){"use strict";t.a=function(e){var t=e.diameter,r=-e.diameter/2;return t+="px",r+="px",{width:t,height:t,marginLeft:r,marginTop:r}}},function(e,t,r){"use strict";t.a=function(e){var t=e.diameter/2+"px";return{width:t,height:t}}},function(e,t,r){"use strict";var n=r(236);t.a=function(e){return.41*e-n.b+"px"}},function(e,t,r){"use strict";t.a=function(e){this._config.menus.forEach(function(t,r){this._createList(e,t,r)},this)}},function(e,t,r){"use strict";var n=r(36);t.a=function(e,t,r){var i=document.createElement("li");Object(n.a)(i,"width",this._calc.listSize.width),Object(n.a)(i,"height",this._calc.listSize.height),Object(n.a)(i,"transform","rotate("+this._calc.rotateDeg(r)+"deg) skew("+this._calc.skewDeg+"deg)"),e.appendChild(i),this._createAnchor(i,t,r)}},function(e,t,r){"use strict";t.a=function(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}},function(e,t,r){"use strict";var n=r(37),i=r(36),o=r(237),a=r(238);t.a=function(){var e=this._container;Object(n.a)(e,"circular-menu",!0),Object(i.a)(e,"width",this._calc.menuSize.width),Object(i.a)(e,"height",this._calc.menuSize.height),Object(i.a)(e,"margin-top",this._calc.menuSize.marginTop),Object(i.a)(e,"margin-left",this._calc.menuSize.marginLeft);var t=this;Object(a.a)(e,"click",function(r){r.toElement===e&&t._cMenu.hide()}),setTimeout(function(){Object(i.a)(e,"display","block")},100),Object(o.a)(e,"width",this._calc.coverSize.width,"after"),Object(o.a)(e,"height",this._calc.coverSize.height,"after"),Object(o.a)(e,"margin-left",this._calc.coverSize.marginLeft,"after"),Object(o.a)(e,"margin-top",this._calc.coverSize.marginTop,"after"),Object(o.a)(e,"border","3px solid "+this._config.pageBackground,"after");var r=e.appendChild(document.createElement("ul"));this._createLists(r)}},function(e,t,r){"use strict";function n(e){return e instanceof Array&&0!==e.length}function i(e){return e instanceof Function?e():Boolean(e)}function o(e,t){t&&(t instanceof Object?(e.href=t.url,e.target=t.blank?"_blank":""):e.href=t)}var a=r(36),s=r(37),l=r(238),u=r(237),c=null;t.a=function(e,t,r){function p(e,t){t.click&&t.click.call(this,e,t),d._config.hideAfterClick&&(d._cMenu.hide(),d._cMenu._pMenu&&d._cMenu._pMenu.hide(),v&&v.hide())}var d=this,f=null,h=document.createElement("a");o(h,t.href),h.setDisabled=function(){Object(s.a)(h,"disabled",i(t.disabled))},this._anchors.push(h),Object(a.a)(h,"width",this._calc.clickZoneSize.width),Object(a.a)(h,"height",this._calc.clickZoneSize.height),Object(a.a)(h,"right",this._calc.clickZoneSize.marginRight),Object(a.a)(h,"bottom",this._calc.clickZoneSize.marginBottom),Object(a.a)(h,"transform","skew("+-this._calc.skewDeg+"deg) rotate("+this._calc.unskewDeg+"deg) scale(1)"),Object(s.a)(h,"disabled",i(t.disabled));var g=100*this._config.percent+"%";if(Object(u.a)(h,"background","radial-gradient(transparent "+g+", "+this._config.background+" "+g+")"),Object(u.a)(h,"background","radial-gradient(transparent "+g+", "+this._config.backgroundHover+" "+g+")","hover"),Object(l.a)(h,"click",p,t),e.appendChild(h),this._createHorizontal(h,t,r),n(t.menus)){var v=this._createSubMenu(d,t.menus,r);Object(l.a)(h,"mouseenter",function(){c=setTimeout(function(){v.styles({top:d._container.offsetTop+d._calc.radius+"px",left:d._container.offsetLeft+d._calc.radius+"px"}).show()},150)}),Object(l.a)(h,"mouseleave",function(e){v._container.contains(e.toElement)||(f=setTimeout(function(){v.hide()},200))}),Object(l.a)(v._container,"mouseenter",function(){clearTimeout(c),clearTimeout(f)}),Object(l.a)(v._container,"mouseleave",function(e){h.contains(e.toElement)&&e.toElement.children[0]!==h||v.hide()})}}},function(e,t,r){"use strict";var n=r(36),i=r(37),o=r(239);t.a=function(e,t,r){var a=document.createElement("span");a.textContent=t.title,Object(i.a)(a,"text",!0),Object(n.a)(a,"margin-top",Object(o.b)(t.icon)?"3px":this._calc.textTop),Object(n.a)(a,"top",Object(o.b)(t.icon)?"-3px":0),e.appendChild(a)}},function(e,t,r){"use strict";var n=r(36),i=r(37);t.a=function(e,t,r){var o=document.createElement("div");Object(i.a)(o,"horizontal",!0),this._config.horizontal&&Object(n.a)(o,"transform","rotate("+this._calc.horizontalDeg(r)+"deg)"),e.appendChild(o),this._createIcon(o,t,r),this._createText(o,t,r)}},function(e,t,r){"use strict";function n(e,t,r){var n=document.createElement("div");Object(i.a)(n,"circular-sub-menu",!0),this._container.parentNode.insertBefore(n,this._container);var c=this._calc.centralDeg*u*t.length,p=this._calc.rotateDeg(r)-c/2+this._calc.centralDeg/2,d=Object(a.a)(this._config,{totalAngle:c,percent:l,diameter:this._config.diameter*s,start:p,animation:"into",menus:t});return new o.a(n,e._cMenu).config(d)}t.a=n;var i=r(37),o=r(235),a=r(240);const s=5/3,l=.45,u=.618},function(e,t,r){"use strict";function n(e){e instanceof Array&&2===e.length&&(Object(a.a)(this._container,"left",e[0]+"px"),Object(a.a)(this._container,"top",e[1]+"px"))}function i(){this._creator._anchors.forEach(function(e){e.setDisabled()})}var o=r(37),a=r(36);t.a=function(e){return i.call(this),n.call(this,e),Object(o.a)(this._container,"opened-nav",!0),this}},function(e,t,r){"use strict";var n=r(37);t.a=function(){return Object(n.a)(this._container,"opened-nav",!1),this}},function(e,t,r){"use strict";var n=r(36);t.a=function(e){if(!e instanceof Object)return this;for(var t in e)e.hasOwnProperty(t)&&Object(n.a)(this._container,t,e[t]);return this}},function(e,t,r){function n(e){var t="";return t+='<div class="main-table" ng-style="$ctrl.tableWidthStyle()"><div class="main-grid" ui-grid="{ data: $ctrl.state.active.activeLayout.items }" ng-hide="$ctrl.state.active.dividerPercent &lt; 2" ui-grid-auto-resize></div></div><div class="main-canvas" ng-style="$ctrl.canvasWidthStyle()"><div class="control-area"><button class="btn btn-circle btn-lg"><img class="btn-icon" src="./app/images/view-options@2x.png"></button><button class="btn btn-circle btn-lg"><img class="btn-icon" src="./app/images/snapshot@2x.png"></button></div><svg class="main-svg"><g class="main-g"><rect class="main-background"></rect><g class="main-g-items"></g></g></svg></div><div class="draggable-divider" drag-container="true" on-drag-end="dragging = false; $ctrl.dragDivider($event)" ng-style="$ctrl.dragTabLeftStyle()"><div class="drag-tab"></div></div><div class="node-search" ng-show="$ctrl.currentlyAdding"><div class="input-group"><div class="input-group-addon"><i class="glyphicon glyphicon-search"></i></div><input class="form-control" type="text" ng-model="$ctrl.nodeSearchSelected" placeholder="Search" uib-typeahead="result.description for result in $ctrl.nodeSearchResults($viewValue)" typeahead-loading="loadingSearchResults" typeahead-no-results="noResults" typeahead-on-select="$ctrl.nodeSearchSelect($item, $model, $label, $event)" typeahead-wait-ms="200"><div class="input-group-addon" ng-click="$ctrl.nodeSearchRemove()"><i class="glyphicon glyphicon-remove"></i></div></div><i class="glyphicon glyphicon-refresh" ng-show="loadingSearchResults"></i><div ng-show="noResults"><i class="glyphicon glyphicon-remove">No Results Found</i></div></div><div class="circle-menu" id="circle-menu"></div>'}r(8);e.exports=n},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.FilterComponent=t.FilterComponentController=void 0;var o=r(511),a=i(o),s=r(1),l=i(s),u=r(2),c=i(u),p=r(0),d=n(p),f=r(93),h=n(f),g=r(184),v=n(g);r(233),r(234);var m=r(50),y=n(m);r(526);var b=t.FilterComponentController=function(){function e(t,r,n,i,o){var a=this;(0,l.default)(this,e),this.projectService=t,this.itemsService=r,this.$scope=n,this.$q=i,this.$ngRedux=o,this.actions={},this.state={},this.allItems=[];var s=o.connect(this.mapProjectToActions,h)(this.actions),u=o.connect(this.mapFilterToActions,v)(this.actions),c=o.connect(function(e){return{project:e.frontend.project,sources:e.frontend.sources,filter:e.frontend.filter}})(this.state);this.actions.unsubscribe=function(){s(),u(),c()},this.itemsService.getAllItems().then(function(e){a.allItems=e}),this.selectedClass=this.getActiveClasses()[0]}return e.$inject=["projectService","itemsService","$scope","$q","$ngRedux"],(0,c.default)(e,[{key:"addFilter",value:function(e,t){this.actions.setFilter(e,t)}},{key:"getActiveClasses",value:function(){var e=this,t=[];return new a.default(this.state.sources.sources.map(function(t){return y.keys(e.state.sources.sourceClassToggle[t.id])}).reduce(function(e,t){return e.concat(t)},[])).forEach(function(r){return t.push(e.state.project.project.dataModel.classMap.s[r])}),t}},{key:"mapProjectToActions",value:function(e){return{project:e.frontend.project}}},{key:"mapFilterToActions",value:function(e){return{filter:e.frontend.filter}}},{key:"dragDivider",value:function(e){var t=100*e.clientX/window.innerWidth;this.actions.setFilterDividerPercentage(t>98?100:t<2?0:t)}},{key:"tableWidthStyle",value:function(){return{width:this.actions.filter.dividerPercent+"%"}}},{key:"canvasWidthStyle",value:function(){return{width:100-this.actions.filter.dividerPercent+"%",left:this.actions.filter.dividerPercent+"%"}}},{key:"dragTabLeftStyle",value:function(){return{left:this.actions.filter.dividerPercent+"%"}}}]),e}(),E=t.FilterComponent=function e(){(0,l.default)(this,e),this.template=r(527)(),this.controller=b};d.module("fibra.components.filter",["ui.bootstrap","filearts.dragDrop","ui.grid","ui.grid.autoResize","rzModule"]).component("filter",new E)},function(e,t,r){e.exports={default:r(512),__esModule:!0}},function(e,t,r){r(126),r(54),r(67),r(513),r(519),r(522),r(524),e.exports=r(9).Set},function(e,t,r){"use strict";var n=r(514),i=r(241);e.exports=r(515)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return n.def(i(this,"Set"),e=0===e?0:e,e)}},n)},function(e,t,r){"use strict";var n=r(24).f,i=r(85),o=r(135),a=r(29),s=r(133),l=r(72),u=r(120),c=r(168),p=r(182),d=r(27),f=r(123).fastKey,h=r(241),g=d?"_s":"size",v=function(e,t){var r,n=f(t);if("F"!==n)return e._i[n];for(r=e._f;r;r=r.n)if(r.k==t)return r};e.exports={getConstructor:function(e,t,r,u){var c=e(function(e,n){s(e,c,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[g]=0,void 0!=n&&l(n,r,e[u],e)});return o(c.prototype,{clear:function(){for(var e=h(this,t),r=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete r[n.i];e._f=e._l=void 0,e[g]=0},delete:function(e){var r=h(this,t),n=v(r,e);if(n){var i=n.n,o=n.p;delete r._i[n.i],n.r=!0,o&&(o.n=i),i&&(i.p=o),r._f==n&&(r._f=i),r._l==n&&(r._l=o),r[g]--}return!!n},forEach:function(e){h(this,t);for(var r,n=a(e,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(n(r.v,r.k,this);r&&r.r;)r=r.p},has:function(e){return!!v(h(this,t),e)}}),d&&n(c.prototype,"size",{get:function(){return h(this,t)[g]}}),c},def:function(e,t,r){var n,i,o=v(e,t);return o?o.v=r:(e._l=o={i:i=f(t,!0),k:t,v:r,p:n=e._l,n:void 0,r:!1},e._f||(e._f=o),n&&(n.n=o),e[g]++,"F"!==i&&(e._i[i]=o)),e},getEntry:v,setStrong:function(e,t,r){u(e,t,function(e,r){this._t=h(e,t),this._k=r,this._l=void 0},function(){for(var e=this,t=e._k,r=e._l;r&&r.r;)r=r.p;return e._t&&(e._l=r=r?r.n:e._t._f)?"keys"==t?c(0,r.k):"values"==t?c(0,r.v):c(0,[r.k,r.v]):(e._t=void 0,c(1))},r?"entries":"values",!r,!0),p(t)}}},function(e,t,r){"use strict";var n=r(17),i=r(13),o=r(123),a=r(38),s=r(31),l=r(135),u=r(72),c=r(133),p=r(26),d=r(68),f=r(24).f,h=r(516)(0),g=r(27);e.exports=function(e,t,r,v,m,y){var b=n[e],E=b,x=m?"set":"add",S=E&&E.prototype,C={};return g&&"function"==typeof E&&(y||S.forEach&&!a(function(){(new E).entries().next()}))?(E=t(function(t,r){c(t,E,e,"_c"),t._c=new b,void 0!=r&&u(r,m,t[x],t)}),h("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in S&&(!y||"clear"!=e)&&s(E.prototype,e,function(r,n){if(c(this,E,e),!t&&y&&!p(r))return"get"==e&&void 0;var i=this._c[e](0===r?0:r,n);return t?this:i})}),y||f(E.prototype,"size",{get:function(){return this._c.size}})):(E=v.getConstructor(t,e,m,x),l(E.prototype,r),o.NEED=!0),d(E,e),C[e]=E,i(i.G+i.W+i.F,C),y||v.setStrong(E,e,m),E}},function(e,t,r){var n=r(29),i=r(113),o=r(52),a=r(81),s=r(517);e.exports=function(e,t){var r=1==e,l=2==e,u=3==e,c=4==e,p=6==e,d=5==e||p,f=t||s;return function(t,s,h){for(var g,v,m=o(t),y=i(m),b=n(s,h,3),E=a(y.length),x=0,S=r?f(t,E):l?f(t,0):void 0;E>x;x++)if((d||x in y)&&(g=y[x],v=b(g,x,m),e))if(r)S[x]=v;else if(v)switch(e){case 3:return!0;case 5:return g;case 6:return x;case 2:S.push(g)}else if(c)return!1;return p?-1:u||c?c:S}}},function(e,t,r){var n=r(518);e.exports=function(e,t){return new(n(e))(t)}},function(e,t,r){var n=r(26),i=r(172),o=r(14)("species");e.exports=function(e){var t;return i(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!i(t.prototype)||(t=void 0),n(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},function(e,t,r){var n=r(13);n(n.P+n.R,"Set",{toJSON:r(520)("Set")})},function(e,t,r){var n=r(86),i=r(521);e.exports=function(e){return function(){if(n(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},function(e,t,r){var n=r(72);e.exports=function(e,t){var r=[];return n(e,!1,r.push,r,t),r}},function(e,t,r){r(523)("Set")},function(e,t,r){"use strict";var n=r(13);e.exports=function(e){n(n.S,e,{of:function(){for(var e=arguments.length,t=Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,r){r(525)("Set")},function(e,t,r){"use strict";var n=r(13),i=r(63),o=r(29),a=r(72);e.exports=function(e){n(n.S,e,{from:function(e){var t,r,n,s,l=arguments[1];return i(this),t=void 0!==l,t&&i(l),void 0==e?new this:(r=[],t?(n=0,s=o(l,arguments[2],2),a(e,!1,function(e){r.push(s(e,n++))})):a(e,!1,r.push,r),new this(r))}})}},function(e,t,r){var n,i,o;/*! angularjs-slider - v6.3.0 - 
 (c) Rafal Zajac <rzajac@gmail.com>, Valentin Hervieu <valentin@hervieu.me>, Jussi Saarivirta <jusasi@gmail.com>, Angelin Sirbu <angelin.sirbu@gmail.com> - 
 https://github.com/angular-slider/angularjs-slider - 
 2017-08-11 */
!function(a,s){"use strict";i=[r(0)],n=s,void 0!==(o="function"==typeof n?n.apply(t,i):n)&&(e.exports=o)}(0,function(e){"use strict";var t=e.module("rzModule",[]).factory("RzSliderOptions",function(){var t={floor:0,ceil:null,step:1,precision:0,minRange:null,maxRange:null,pushRange:!1,minLimit:null,maxLimit:null,id:null,translate:null,getLegend:null,stepsArray:null,bindIndexForStepsArray:!1,draggableRange:!1,draggableRangeOnly:!1,showSelectionBar:!1,showSelectionBarEnd:!1,showSelectionBarFromValue:null,showOuterSelectionBars:!1,hidePointerLabels:!1,hideLimitLabels:!1,autoHideLimitLabels:!0,readOnly:!1,disabled:!1,interval:350,showTicks:!1,showTicksValues:!1,ticksArray:null,ticksTooltip:null,ticksValuesTooltip:null,vertical:!1,getSelectionBarColor:null,getTickColor:null,getPointerColor:null,keyboardSupport:!0,scale:1,enforceStep:!0,enforceRange:!1,noSwitching:!1,onlyBindHandles:!1,onStart:null,onChange:null,onEnd:null,rightToLeft:!1,boundPointerLabels:!0,mergeRangeLabelsIfSame:!1,customTemplateScope:null,logScale:!1,customValueToPosition:null,customPositionToValue:null,selectionBarGradient:null,ariaLabel:null,ariaLabelledBy:null,ariaLabelHigh:null,ariaLabelledByHigh:null},r={},n={};return n.options=function(t){e.extend(r,t)},n.getOptions=function(n){return e.extend({},t,r,n)},n}).factory("rzThrottle",["$timeout",function(e){return function(t,r,n){var i,o,a,s=Date.now||function(){return(new Date).getTime()},l=null,u=0;n=n||{};var c=function(){u=s(),l=null,a=t.apply(i,o),i=o=null};return function(){var p=s(),d=r-(p-u);return i=this,o=arguments,d<=0?(e.cancel(l),l=null,u=p,a=t.apply(i,o),i=o=null):l||!1===n.trailing||(l=e(c,d)),a}}}]).factory("RzSlider",["$timeout","$document","$window","$compile","RzSliderOptions","rzThrottle",function(t,r,n,i,o,a){var s=function(e,t){this.scope=e,this.lowValue=0,this.highValue=0,this.sliderElem=t,this.range=void 0!==this.scope.rzSliderModel&&void 0!==this.scope.rzSliderHigh,this.dragging={active:!1,value:0,difference:0,position:0,lowLimit:0,highLimit:0},this.positionProperty="left",this.dimensionProperty="width",this.handleHalfDim=0,this.maxPos=0,this.precision=0,this.step=1,this.tracking="",this.minValue=0,this.maxValue=0,this.valueRange=0,this.intermediateTicks=!1,this.initHasRun=!1,this.firstKeyDown=!1,this.internalChange=!1,this.cmbLabelShown=!1,this.currentFocusElement=null,this.fullBar=null,this.selBar=null,this.minH=null,this.maxH=null,this.flrLab=null,this.ceilLab=null,this.minLab=null,this.maxLab=null,this.cmbLab=null,this.ticks=null,this.init()};return s.prototype={init:function(){var t,r,i=this,o=function(){i.calcViewDimensions()};this.applyOptions(),this.syncLowValue(),this.range&&this.syncHighValue(),this.initElemHandles(),this.manageElementsStyle(),this.setDisabledState(),this.calcViewDimensions(),this.setMinAndMax(),this.addAccessibility(),this.updateCeilLab(),this.updateFloorLab(),this.initHandles(),this.manageEventsBindings(),this.scope.$on("reCalcViewDimensions",o),e.element(n).on("resize",o),this.initHasRun=!0,t=a(function(){i.onLowHandleChange()},i.options.interval),r=a(function(){i.onHighHandleChange()},i.options.interval),this.scope.$on("rzSliderForceRender",function(){i.resetLabelsValue(),t(),i.range&&r(),i.resetSlider()}),this.scope.$watch("rzSliderOptions()",function(e,t){e!==t&&(i.applyOptions(),i.syncLowValue(),i.range&&i.syncHighValue(),i.resetSlider())},!0),this.scope.$watch("rzSliderModel",function(e,r){i.internalChange||e!==r&&t()}),this.scope.$watch("rzSliderHigh",function(e,t){i.internalChange||e!==t&&(null!=e&&r(),(i.range&&null==e||!i.range&&null!=e)&&(i.applyOptions(),i.resetSlider()))}),this.scope.$on("$destroy",function(){i.unbindEvents(),e.element(n).off("resize",o),i.currentFocusElement=null})},findStepIndex:function(t){for(var r=0,n=0;n<this.options.stepsArray.length;n++){var i=this.options.stepsArray[n];if(i===t){r=n;break}if(e.isDate(i)){if(i.getTime()===t.getTime()){r=n;break}}else if(e.isObject(i)&&(e.isDate(i.value)&&i.value.getTime()===t.getTime()||i.value===t)){r=n;break}}return r},syncLowValue:function(){this.options.stepsArray?this.options.bindIndexForStepsArray?this.lowValue=this.scope.rzSliderModel:this.lowValue=this.findStepIndex(this.scope.rzSliderModel):this.lowValue=this.scope.rzSliderModel},syncHighValue:function(){this.options.stepsArray?this.options.bindIndexForStepsArray?this.highValue=this.scope.rzSliderHigh:this.highValue=this.findStepIndex(this.scope.rzSliderHigh):this.highValue=this.scope.rzSliderHigh},getStepValue:function(t){var r=this.options.stepsArray[t];return e.isDate(r)?r:e.isObject(r)?r.value:r},applyLowValue:function(){this.options.stepsArray?this.options.bindIndexForStepsArray?this.scope.rzSliderModel=this.lowValue:this.scope.rzSliderModel=this.getStepValue(this.lowValue):this.scope.rzSliderModel=this.lowValue},applyHighValue:function(){this.options.stepsArray?this.options.bindIndexForStepsArray?this.scope.rzSliderHigh=this.highValue:this.scope.rzSliderHigh=this.getStepValue(this.highValue):this.scope.rzSliderHigh=this.highValue},onLowHandleChange:function(){this.syncLowValue(),this.range&&this.syncHighValue(),this.setMinAndMax(),this.updateLowHandle(this.valueToPosition(this.lowValue)),this.updateSelectionBar(),this.updateTicksScale(),this.updateAriaAttributes(),this.range&&this.updateCmbLabel()},onHighHandleChange:function(){this.syncLowValue(),this.syncHighValue(),this.setMinAndMax(),this.updateHighHandle(this.valueToPosition(this.highValue)),this.updateSelectionBar(),this.updateTicksScale(),this.updateCmbLabel(),this.updateAriaAttributes()},applyOptions:function(){var t;t=this.scope.rzSliderOptions?this.scope.rzSliderOptions():{},this.options=o.getOptions(t),this.options.step<=0&&(this.options.step=1),this.range=void 0!==this.scope.rzSliderModel&&void 0!==this.scope.rzSliderHigh,this.options.draggableRange=this.range&&this.options.draggableRange,this.options.draggableRangeOnly=this.range&&this.options.draggableRangeOnly,this.options.draggableRangeOnly&&(this.options.draggableRange=!0),this.options.showTicks=this.options.showTicks||this.options.showTicksValues||!!this.options.ticksArray,this.scope.showTicks=this.options.showTicks,(e.isNumber(this.options.showTicks)||this.options.ticksArray)&&(this.intermediateTicks=!0),this.options.showSelectionBar=this.options.showSelectionBar||this.options.showSelectionBarEnd||null!==this.options.showSelectionBarFromValue,this.options.stepsArray?this.parseStepsArray():(this.options.translate?this.customTrFn=this.options.translate:this.customTrFn=function(e){return String(e)},this.getLegend=this.options.getLegend),this.options.vertical&&(this.positionProperty="bottom",this.dimensionProperty="height"),this.options.customTemplateScope&&(this.scope.custom=this.options.customTemplateScope)},parseStepsArray:function(){this.options.floor=0,this.options.ceil=this.options.stepsArray.length-1,this.options.step=1,this.options.translate?this.customTrFn=this.options.translate:this.customTrFn=function(e){return this.options.bindIndexForStepsArray?this.getStepValue(e):e},this.getLegend=function(t){var r=this.options.stepsArray[t];return e.isObject(r)?r.legend:null}},resetSlider:function(){this.manageElementsStyle(),this.addAccessibility(),this.setMinAndMax(),this.updateCeilLab(),this.updateFloorLab(),this.unbindEvents(),this.manageEventsBindings(),this.setDisabledState(),this.calcViewDimensions(),this.refocusPointerIfNeeded()},refocusPointerIfNeeded:function(){this.currentFocusElement&&(this.onPointerFocus(this.currentFocusElement.pointer,this.currentFocusElement.ref),this.focusElement(this.currentFocusElement.pointer))},initElemHandles:function(){e.forEach(this.sliderElem.children(),function(t,r){var n=e.element(t);switch(r){case 0:this.leftOutSelBar=n;break;case 1:this.rightOutSelBar=n;break;case 2:this.fullBar=n;break;case 3:this.selBar=n;break;case 4:this.minH=n;break;case 5:this.maxH=n;break;case 6:this.flrLab=n;break;case 7:this.ceilLab=n;break;case 8:this.minLab=n;break;case 9:this.maxLab=n;break;case 10:this.cmbLab=n;break;case 11:this.ticks=n}},this),this.selBar.rzsp=0,this.minH.rzsp=0,this.maxH.rzsp=0,this.flrLab.rzsp=0,this.ceilLab.rzsp=0,this.minLab.rzsp=0,this.maxLab.rzsp=0,this.cmbLab.rzsp=0},manageElementsStyle:function(){this.range?this.maxH.css("display",""):this.maxH.css("display","none"),this.alwaysHide(this.flrLab,this.options.showTicksValues||this.options.hideLimitLabels),this.alwaysHide(this.ceilLab,this.options.showTicksValues||this.options.hideLimitLabels);var e=this.options.showTicksValues&&!this.intermediateTicks;this.alwaysHide(this.minLab,e||this.options.hidePointerLabels),this.alwaysHide(this.maxLab,e||!this.range||this.options.hidePointerLabels),this.alwaysHide(this.cmbLab,e||!this.range||this.options.hidePointerLabels),this.alwaysHide(this.selBar,!this.range&&!this.options.showSelectionBar),this.alwaysHide(this.leftOutSelBar,!this.range||!this.options.showOuterSelectionBars),this.alwaysHide(this.rightOutSelBar,!this.range||!this.options.showOuterSelectionBars),this.range&&this.options.showOuterSelectionBars&&this.fullBar.addClass("rz-transparent"),this.options.vertical&&this.sliderElem.addClass("rz-vertical"),this.options.draggableRange?this.selBar.addClass("rz-draggable"):this.selBar.removeClass("rz-draggable"),this.intermediateTicks&&this.options.showTicksValues&&this.ticks.addClass("rz-ticks-values-under")},alwaysHide:function(e,t){e.rzAlwaysHide=t,t?this.hideEl(e):this.showEl(e)},manageEventsBindings:function(){this.options.disabled||this.options.readOnly?this.unbindEvents():this.bindEvents()},setDisabledState:function(){this.options.disabled?this.sliderElem.attr("disabled","disabled"):this.sliderElem.attr("disabled",null)},resetLabelsValue:function(){this.minLab.rzsv=void 0,this.maxLab.rzsv=void 0},initHandles:function(){this.updateLowHandle(this.valueToPosition(this.lowValue)),this.range&&this.updateHighHandle(this.valueToPosition(this.highValue)),this.updateSelectionBar(),this.range&&this.updateCmbLabel(),this.updateTicksScale()},translateFn:function(e,t,r,n){n=void 0===n||n;var i="",o=!1,a=t.hasClass("no-label-injection");n?(this.options.stepsArray&&!this.options.bindIndexForStepsArray&&(e=this.getStepValue(e)),i=String(this.customTrFn(e,this.options.id,r))):i=String(e),(void 0===t.rzsv||t.rzsv.length!==i.length||t.rzsv.length>0&&0===t.rzsd)&&(o=!0,t.rzsv=i),a||t.html(i),this.scope[r+"Label"]=i,o&&this.getDimension(t)},setMinAndMax:function(){if(this.step=+this.options.step,this.precision=+this.options.precision,this.minValue=this.options.floor,this.options.logScale&&0===this.minValue)throw Error("Can't use floor=0 with logarithmic scale");this.options.enforceStep&&(this.lowValue=this.roundStep(this.lowValue),this.range&&(this.highValue=this.roundStep(this.highValue))),null!=this.options.ceil?this.maxValue=this.options.ceil:this.maxValue=this.options.ceil=this.range?this.highValue:this.lowValue,this.options.enforceRange&&(this.lowValue=this.sanitizeValue(this.lowValue),this.range&&(this.highValue=this.sanitizeValue(this.highValue))),this.applyLowValue(),this.range&&this.applyHighValue(),this.valueRange=this.maxValue-this.minValue},addAccessibility:function(){this.minH.attr("role","slider"),this.updateAriaAttributes(),!this.options.keyboardSupport||this.options.readOnly||this.options.disabled?this.minH.attr("tabindex",""):this.minH.attr("tabindex","0"),this.options.vertical&&this.minH.attr("aria-orientation","vertical"),this.options.ariaLabel?this.minH.attr("aria-label",this.options.ariaLabel):this.options.ariaLabelledBy&&this.minH.attr("aria-labelledby",this.options.ariaLabelledBy),this.range&&(this.maxH.attr("role","slider"),!this.options.keyboardSupport||this.options.readOnly||this.options.disabled?this.maxH.attr("tabindex",""):this.maxH.attr("tabindex","0"),this.options.vertical&&this.maxH.attr("aria-orientation","vertical"),this.options.ariaLabelHigh?this.maxH.attr("aria-label",this.options.ariaLabelHigh):this.options.ariaLabelledByHigh&&this.maxH.attr("aria-labelledby",this.options.ariaLabelledByHigh))},updateAriaAttributes:function(){this.minH.attr({"aria-valuenow":this.scope.rzSliderModel,"aria-valuetext":this.customTrFn(this.scope.rzSliderModel,this.options.id,"model"),"aria-valuemin":this.minValue,"aria-valuemax":this.maxValue}),this.range&&this.maxH.attr({"aria-valuenow":this.scope.rzSliderHigh,"aria-valuetext":this.customTrFn(this.scope.rzSliderHigh,this.options.id,"high"),"aria-valuemin":this.minValue,"aria-valuemax":this.maxValue})},calcViewDimensions:function(){var e=this.getDimension(this.minH);if(this.handleHalfDim=e/2,this.barDimension=this.getDimension(this.fullBar),this.maxPos=this.barDimension-e,this.getDimension(this.sliderElem),this.sliderElem.rzsp=this.sliderElem[0].getBoundingClientRect()[this.positionProperty],this.initHasRun){this.updateFloorLab(),this.updateCeilLab(),this.initHandles();var r=this;t(function(){r.updateTicksScale()})}},updateTicksScale:function(){if(this.options.showTicks){var e=this.options.ticksArray||this.getTicksArray(),t=this.options.vertical?"translateY":"translateX",r=this;this.options.rightToLeft&&e.reverse(),this.scope.ticks=e.map(function(e){var n=r.valueToPosition(e);r.options.vertical&&(n=r.maxPos-n);var i=t+"("+Math.round(n)+"px)",o={selected:r.isTickSelected(e),style:{"-webkit-transform":i,"-moz-transform":i,"-o-transform":i,"-ms-transform":i,transform:i}};if(o.selected&&r.options.getSelectionBarColor&&(o.style["background-color"]=r.getSelectionBarColor()),!o.selected&&r.options.getTickColor&&(o.style["background-color"]=r.getTickColor(e)),r.options.ticksTooltip&&(o.tooltip=r.options.ticksTooltip(e),o.tooltipPlacement=r.options.vertical?"right":"top"),!0!==r.options.showTicksValues&&e%r.options.showTicksValues!=0||(o.value=r.getDisplayValue(e,"tick-value"),r.options.ticksValuesTooltip&&(o.valueTooltip=r.options.ticksValuesTooltip(e),o.valueTooltipPlacement=r.options.vertical?"right":"top")),r.getLegend){var a=r.getLegend(e,r.options.id);a&&(o.legend=a)}return o})}},getTicksArray:function(){var e=this.step,t=[];this.intermediateTicks&&(e=this.options.showTicks);for(var r=this.minValue;r<=this.maxValue;r+=e)t.push(r);return t},isTickSelected:function(e){if(!this.range)if(null!==this.options.showSelectionBarFromValue){var t=this.options.showSelectionBarFromValue;if(this.lowValue>t&&e>=t&&e<=this.lowValue)return!0;if(this.lowValue<t&&e<=t&&e>=this.lowValue)return!0}else if(this.options.showSelectionBarEnd){if(e>=this.lowValue)return!0}else if(this.options.showSelectionBar&&e<=this.lowValue)return!0;return!!(this.range&&e>=this.lowValue&&e<=this.highValue)},updateFloorLab:function(){this.translateFn(this.minValue,this.flrLab,"floor"),this.getDimension(this.flrLab);var e=this.options.rightToLeft?this.barDimension-this.flrLab.rzsd:0;this.setPosition(this.flrLab,e)},updateCeilLab:function(){this.translateFn(this.maxValue,this.ceilLab,"ceil"),this.getDimension(this.ceilLab);var e=this.options.rightToLeft?0:this.barDimension-this.ceilLab.rzsd;this.setPosition(this.ceilLab,e)},updateHandles:function(e,t){"lowValue"===e?this.updateLowHandle(t):this.updateHighHandle(t),this.updateSelectionBar(),this.updateTicksScale(),this.range&&this.updateCmbLabel()},getHandleLabelPos:function(e,t){var r=this[e].rzsd,n=t-r/2+this.handleHalfDim,i=this.barDimension-r;return this.options.boundPointerLabels?this.options.rightToLeft&&"minLab"===e||!this.options.rightToLeft&&"maxLab"===e?Math.min(n,i):Math.min(Math.max(n,0),i):n},updateLowHandle:function(e){if(this.setPosition(this.minH,e),this.translateFn(this.lowValue,this.minLab,"model"),this.setPosition(this.minLab,this.getHandleLabelPos("minLab",e)),this.options.getPointerColor){var t=this.getPointerColor("min");this.scope.minPointerStyle={backgroundColor:t}}this.options.autoHideLimitLabels&&this.shFloorCeil()},updateHighHandle:function(e){if(this.setPosition(this.maxH,e),this.translateFn(this.highValue,this.maxLab,"high"),this.setPosition(this.maxLab,this.getHandleLabelPos("maxLab",e)),this.options.getPointerColor){var t=this.getPointerColor("max");this.scope.maxPointerStyle={backgroundColor:t}}this.options.autoHideLimitLabels&&this.shFloorCeil()},shFloorCeil:function(){if(!this.options.hidePointerLabels){var e=!1,t=!1,r=this.isLabelBelowFloorLab(this.minLab),n=this.isLabelAboveCeilLab(this.minLab),i=this.isLabelAboveCeilLab(this.maxLab),o=this.isLabelBelowFloorLab(this.cmbLab),a=this.isLabelAboveCeilLab(this.cmbLab);if(r?(e=!0,this.hideEl(this.flrLab)):(e=!1,this.showEl(this.flrLab)),n?(t=!0,this.hideEl(this.ceilLab)):(t=!1,this.showEl(this.ceilLab)),this.range){var s=this.cmbLabelShown?a:i,l=this.cmbLabelShown?o:r;s?this.hideEl(this.ceilLab):t||this.showEl(this.ceilLab),l?this.hideEl(this.flrLab):e||this.showEl(this.flrLab)}}},isLabelBelowFloorLab:function(e){var t=this.options.rightToLeft,r=e.rzsp,n=e.rzsd,i=this.flrLab.rzsp,o=this.flrLab.rzsd;return t?r+n>=i-2:r<=i+o+2},isLabelAboveCeilLab:function(e){var t=this.options.rightToLeft,r=e.rzsp,n=e.rzsd,i=this.ceilLab.rzsp,o=this.ceilLab.rzsd;return t?r<=i+o+2:r+n>=i-2},updateSelectionBar:function(){var e=0,t=0,r=this.options.rightToLeft?!this.options.showSelectionBarEnd:this.options.showSelectionBarEnd,n=this.options.rightToLeft?this.maxH.rzsp+this.handleHalfDim:this.minH.rzsp+this.handleHalfDim;if(this.range)t=Math.abs(this.maxH.rzsp-this.minH.rzsp),e=n;else if(null!==this.options.showSelectionBarFromValue){var i=this.options.showSelectionBarFromValue,o=this.valueToPosition(i),a=this.options.rightToLeft?this.lowValue<=i:this.lowValue>i;a?(t=this.minH.rzsp-o,e=o+this.handleHalfDim):(t=o-this.minH.rzsp,e=this.minH.rzsp+this.handleHalfDim)}else r?(t=Math.abs(this.maxPos-this.minH.rzsp)+this.handleHalfDim,e=this.minH.rzsp+this.handleHalfDim):(t=this.minH.rzsp+this.handleHalfDim,e=0);if(this.setDimension(this.selBar,t),this.setPosition(this.selBar,e),this.range&&this.options.showOuterSelectionBars&&(this.options.rightToLeft?(this.setDimension(this.rightOutSelBar,e),this.setPosition(this.rightOutSelBar,0),this.setDimension(this.leftOutSelBar,this.getDimension(this.fullBar)-(e+t)),this.setPosition(this.leftOutSelBar,e+t)):(this.setDimension(this.leftOutSelBar,e),this.setPosition(this.leftOutSelBar,0),this.setDimension(this.rightOutSelBar,this.getDimension(this.fullBar)-(e+t)),this.setPosition(this.rightOutSelBar,e+t))),this.options.getSelectionBarColor){var s=this.getSelectionBarColor();this.scope.barStyle={backgroundColor:s}}else if(this.options.selectionBarGradient){var l=null!==this.options.showSelectionBarFromValue?this.valueToPosition(this.options.showSelectionBarFromValue):0,u=l-e>0^r,c=this.options.vertical?u?"bottom":"top":u?"left":"right";this.scope.barStyle={backgroundImage:"linear-gradient(to "+c+", "+this.options.selectionBarGradient.from+" 0%,"+this.options.selectionBarGradient.to+" 100%)"},this.options.vertical?(this.scope.barStyle.backgroundPosition="center "+(l+t+e+(u?-this.handleHalfDim:0))+"px",this.scope.barStyle.backgroundSize="100% "+(this.barDimension-this.handleHalfDim)+"px"):(this.scope.barStyle.backgroundPosition=l-e+(u?this.handleHalfDim:0)+"px center",this.scope.barStyle.backgroundSize=this.barDimension-this.handleHalfDim+"px 100%")}},getSelectionBarColor:function(){return this.range?this.options.getSelectionBarColor(this.scope.rzSliderModel,this.scope.rzSliderHigh):this.options.getSelectionBarColor(this.scope.rzSliderModel)},getPointerColor:function(e){return"max"===e?this.options.getPointerColor(this.scope.rzSliderHigh,e):this.options.getPointerColor(this.scope.rzSliderModel,e)},getTickColor:function(e){return this.options.getTickColor(e)},updateCmbLabel:function(){if(this.options.rightToLeft?this.minLab.rzsp-this.minLab.rzsd-10<=this.maxLab.rzsp:this.minLab.rzsp+this.minLab.rzsd+10>=this.maxLab.rzsp){var e=this.getDisplayValue(this.lowValue,"model"),t=this.getDisplayValue(this.highValue,"high"),r="";r=this.options.mergeRangeLabelsIfSame&&e===t?e:this.options.rightToLeft?t+" - "+e:e+" - "+t,this.translateFn(r,this.cmbLab,"cmb",!1);var n=this.options.boundPointerLabels?Math.min(Math.max(this.selBar.rzsp+this.selBar.rzsd/2-this.cmbLab.rzsd/2,0),this.barDimension-this.cmbLab.rzsd):this.selBar.rzsp+this.selBar.rzsd/2-this.cmbLab.rzsd/2;this.setPosition(this.cmbLab,n),this.cmbLabelShown=!0,this.hideEl(this.minLab),this.hideEl(this.maxLab),this.showEl(this.cmbLab)}else this.cmbLabelShown=!1,this.updateHighHandle(this.valueToPosition(this.highValue)),this.updateLowHandle(this.valueToPosition(this.lowValue)),this.showEl(this.maxLab),this.showEl(this.minLab),this.hideEl(this.cmbLab);this.options.autoHideLimitLabels&&this.shFloorCeil()},getDisplayValue:function(e,t){return this.options.stepsArray&&!this.options.bindIndexForStepsArray&&(e=this.getStepValue(e)),this.customTrFn(e,this.options.id,t)},roundStep:function(e,t){var r=t||this.step,n=parseFloat((e-this.minValue)/r).toPrecision(12);return n=Math.round(+n)*r,+(this.minValue+n).toFixed(this.precision)},hideEl:function(e){return e.css({visibility:"hidden"})},showEl:function(e){return e.rzAlwaysHide?e:e.css({visibility:"visible"})},setPosition:function(e,t){e.rzsp=t;var r={};return r[this.positionProperty]=Math.round(t)+"px",e.css(r),t},getDimension:function(e){var t=e[0].getBoundingClientRect();return this.options.vertical?e.rzsd=(t.bottom-t.top)*this.options.scale:e.rzsd=(t.right-t.left)*this.options.scale,e.rzsd},setDimension:function(e,t){e.rzsd=t;var r={};return r[this.dimensionProperty]=Math.round(t)+"px",e.css(r),t},sanitizeValue:function(e){return Math.min(Math.max(e,this.minValue),this.maxValue)},valueToPosition:function(e){var t=this.linearValueToPosition;this.options.customValueToPosition?t=this.options.customValueToPosition:this.options.logScale&&(t=this.logValueToPosition),e=this.sanitizeValue(e);var r=t(e,this.minValue,this.maxValue)||0;return this.options.rightToLeft&&(r=1-r),r*this.maxPos},linearValueToPosition:function(e,t,r){return(e-t)/(r-t)},logValueToPosition:function(e,t,r){return e=Math.log(e),t=Math.log(t),r=Math.log(r),(e-t)/(r-t)},positionToValue:function(e){var t=e/this.maxPos;this.options.rightToLeft&&(t=1-t);var r=this.linearPositionToValue;return this.options.customPositionToValue?r=this.options.customPositionToValue:this.options.logScale&&(r=this.logPositionToValue),r(t,this.minValue,this.maxValue)||0},linearPositionToValue:function(e,t,r){return e*(r-t)+t},logPositionToValue:function(e,t,r){t=Math.log(t),r=Math.log(r);var n=e*(r-t)+t;return Math.exp(n)},getEventAttr:function(e,t){return void 0===e.originalEvent?e[t]:e.originalEvent[t]},getEventXY:function(e,t){var r=this.options.vertical?"clientY":"clientX";if(void 0!==e[r])return e[r];var n=this.getEventAttr(e,"touches");if(void 0!==t)for(var i=0;i<n.length;i++)if(n[i].identifier===t)return n[i][r];return n[0][r]},getEventPosition:function(e,t){var r=this.sliderElem.rzsp;return(this.options.vertical?-this.getEventXY(e,t)+r:this.getEventXY(e,t)-r)*this.options.scale-this.handleHalfDim},getEventNames:function(e){var t={moveEvent:"",endEvent:""};return this.getEventAttr(e,"touches")?(t.moveEvent="touchmove",t.endEvent="touchend"):(t.moveEvent="mousemove",t.endEvent="mouseup"),t},getNearestHandle:function(e){if(!this.range)return this.minH;var t=this.getEventPosition(e),r=Math.abs(t-this.minH.rzsp),n=Math.abs(t-this.maxH.rzsp);return r<n?this.minH:r>n?this.maxH:this.options.rightToLeft?t>this.minH.rzsp?this.minH:this.maxH:t<this.minH.rzsp?this.minH:this.maxH},focusElement:function(e){e[0].focus()},bindEvents:function(){var t,r,n;this.options.draggableRange?(t="rzSliderDrag",r=this.onDragStart,n=this.onDragMove):(t="lowValue",r=this.onStart,n=this.onMove),this.options.onlyBindHandles||(this.selBar.on("mousedown",e.bind(this,r,null,t)),this.selBar.on("mousedown",e.bind(this,n,this.selBar))),this.options.draggableRangeOnly?(this.minH.on("mousedown",e.bind(this,r,null,t)),this.maxH.on("mousedown",e.bind(this,r,null,t))):(this.minH.on("mousedown",e.bind(this,this.onStart,this.minH,"lowValue")),this.range&&this.maxH.on("mousedown",e.bind(this,this.onStart,this.maxH,"highValue")),this.options.onlyBindHandles||(this.fullBar.on("mousedown",e.bind(this,this.onStart,null,null)),this.fullBar.on("mousedown",e.bind(this,this.onMove,this.fullBar)),this.ticks.on("mousedown",e.bind(this,this.onStart,null,null)),this.ticks.on("mousedown",e.bind(this,this.onTickClick,this.ticks)))),this.options.onlyBindHandles||(this.selBar.on("touchstart",e.bind(this,r,null,t)),this.selBar.on("touchstart",e.bind(this,n,this.selBar))),this.options.draggableRangeOnly?(this.minH.on("touchstart",e.bind(this,r,null,t)),this.maxH.on("touchstart",e.bind(this,r,null,t))):(this.minH.on("touchstart",e.bind(this,this.onStart,this.minH,"lowValue")),this.range&&this.maxH.on("touchstart",e.bind(this,this.onStart,this.maxH,"highValue")),this.options.onlyBindHandles||(this.fullBar.on("touchstart",e.bind(this,this.onStart,null,null)),this.fullBar.on("touchstart",e.bind(this,this.onMove,this.fullBar)),this.ticks.on("touchstart",e.bind(this,this.onStart,null,null)),this.ticks.on("touchstart",e.bind(this,this.onTickClick,this.ticks)))),this.options.keyboardSupport&&(this.minH.on("focus",e.bind(this,this.onPointerFocus,this.minH,"lowValue")),this.range&&this.maxH.on("focus",e.bind(this,this.onPointerFocus,this.maxH,"highValue")))},unbindEvents:function(){this.minH.off(),this.maxH.off(),this.fullBar.off(),this.selBar.off(),this.ticks.off()},onStart:function(t,n,i){var o,a,s=this.getEventNames(i);i.stopPropagation(),i.preventDefault(),this.calcViewDimensions(),t?this.tracking=n:(t=this.getNearestHandle(i),this.tracking=t===this.minH?"lowValue":"highValue"),t.addClass("rz-active"),this.options.keyboardSupport&&this.focusElement(t),o=e.bind(this,this.dragging.active?this.onDragMove:this.onMove,t),a=e.bind(this,this.onEnd,o),r.on(s.moveEvent,o),r.on(s.endEvent,a),this.endHandlerToBeRemovedOnEnd=a,this.callOnStart();var l=this.getEventAttr(i,"changedTouches");l&&(this.touchId||(this.isDragging=!0,this.touchId=l[0].identifier))},onMove:function(t,r,n){var i,o=this.getEventAttr(r,"changedTouches");if(o)for(var a=0;a<o.length;a++)if(o[a].identifier===this.touchId){i=o[a];break}if(!o||i){var s,l=this.getEventPosition(r,i?i.identifier:void 0),u=this.options.rightToLeft?this.minValue:this.maxValue,c=this.options.rightToLeft?this.maxValue:this.minValue;l<=0?s=c:l>=this.maxPos?s=u:(s=this.positionToValue(l),s=n&&e.isNumber(this.options.showTicks)?this.roundStep(s,this.options.showTicks):this.roundStep(s)),this.positionTrackingHandle(s)}},onEnd:function(e,t){var n=this.getEventAttr(t,"changedTouches");if(!n||n[0].identifier===this.touchId){this.isDragging=!1,this.touchId=null,this.options.keyboardSupport||(this.minH.removeClass("rz-active"),this.maxH.removeClass("rz-active"),this.tracking=""),this.dragging.active=!1;var i=this.getEventNames(t);r.off(i.moveEvent,e),r.off(i.endEvent,this.endHandlerToBeRemovedOnEnd),this.endHandlerToBeRemovedOnEnd=null,this.callOnEnd()}},onTickClick:function(e,t){this.onMove(e,t,!0)},onPointerFocus:function(t,r){this.tracking=r,t.one("blur",e.bind(this,this.onPointerBlur,t)),t.on("keydown",e.bind(this,this.onKeyboardEvent)),t.on("keyup",e.bind(this,this.onKeyUp)),this.firstKeyDown=!0,t.addClass("rz-active"),this.currentFocusElement={pointer:t,ref:r}},onKeyUp:function(){this.firstKeyDown=!0,this.callOnEnd()},onPointerBlur:function(e){e.off("keydown"),e.off("keyup"),e.removeClass("rz-active"),this.isDragging||(this.tracking="",this.currentFocusElement=null)},getKeyActions:function(e){var t=e+this.step,r=e-this.step,n=e+this.valueRange/10,i=e-this.valueRange/10,o={UP:t,DOWN:r,LEFT:r,RIGHT:t,PAGEUP:n,PAGEDOWN:i,HOME:this.minValue,END:this.maxValue};return this.options.rightToLeft&&(o.LEFT=t,o.RIGHT=r,this.options.vertical&&(o.UP=r,o.DOWN=t)),o},onKeyboardEvent:function(e){var r=this[this.tracking],n=e.keyCode||e.which,i={38:"UP",40:"DOWN",37:"LEFT",39:"RIGHT",33:"PAGEUP",34:"PAGEDOWN",36:"HOME",35:"END"},o=this.getKeyActions(r),a=i[n],s=o[a];if(null!=s&&""!==this.tracking){e.preventDefault(),this.firstKeyDown&&(this.firstKeyDown=!1,this.callOnStart());var l=this;t(function(){var e=l.roundStep(l.sanitizeValue(s));if(l.options.draggableRangeOnly){var t,r,n=l.highValue-l.lowValue;"lowValue"===l.tracking?(t=e,(r=e+n)>l.maxValue&&(r=l.maxValue,t=r-n)):(r=e,(t=e-n)<l.minValue&&(t=l.minValue,r=t+n)),l.positionTrackingBar(t,r)}else l.positionTrackingHandle(e)})}},onDragStart:function(e,t,r){var n=this.getEventPosition(r);this.dragging={active:!0,value:this.positionToValue(n),difference:this.highValue-this.lowValue,lowLimit:this.options.rightToLeft?this.minH.rzsp-n:n-this.minH.rzsp,highLimit:this.options.rightToLeft?n-this.maxH.rzsp:this.maxH.rzsp-n},this.onStart(e,t,r)},getValue:function(e,t,r,n){var i=this.options.rightToLeft,o=null;return o="min"===e?r?n?i?this.minValue:this.maxValue-this.dragging.difference:i?this.maxValue-this.dragging.difference:this.minValue:i?this.positionToValue(t+this.dragging.lowLimit):this.positionToValue(t-this.dragging.lowLimit):r?n?i?this.minValue+this.dragging.difference:this.maxValue:i?this.maxValue:this.minValue+this.dragging.difference:i?this.positionToValue(t+this.dragging.lowLimit)+this.dragging.difference:this.positionToValue(t-this.dragging.lowLimit)+this.dragging.difference,this.roundStep(o)},onDragMove:function(e,t){var r,n,i,o,a,s,l,u,c=this.getEventPosition(t);if(this.options.rightToLeft?(i=this.dragging.lowLimit,o=this.dragging.highLimit,l=this.maxH,u=this.minH):(i=this.dragging.highLimit,o=this.dragging.lowLimit,l=this.minH,u=this.maxH),a=c<=o,s=c>=this.maxPos-i,a){if(0===l.rzsp)return;r=this.getValue("min",c,!0,!1),n=this.getValue("max",c,!0,!1)}else if(s){if(u.rzsp===this.maxPos)return;n=this.getValue("max",c,!0,!0),r=this.getValue("min",c,!0,!0)}else r=this.getValue("min",c,!1),n=this.getValue("max",c,!1);this.positionTrackingBar(r,n)},positionTrackingBar:function(e,t){null!=this.options.minLimit&&e<this.options.minLimit&&(e=this.options.minLimit,t=e+this.dragging.difference),null!=this.options.maxLimit&&t>this.options.maxLimit&&(t=this.options.maxLimit,e=t-this.dragging.difference),this.lowValue=e,this.highValue=t,this.applyLowValue(),this.range&&this.applyHighValue(),this.applyModel(!0),this.updateHandles("lowValue",this.valueToPosition(e)),this.updateHandles("highValue",this.valueToPosition(t))},positionTrackingHandle:function(e){var t=!1;e=this.applyMinMaxLimit(e),this.range&&(this.options.pushRange?(e=this.applyPushRange(e),t=!0):(this.options.noSwitching&&("lowValue"===this.tracking&&e>this.highValue?e=this.applyMinMaxRange(this.highValue):"highValue"===this.tracking&&e<this.lowValue&&(e=this.applyMinMaxRange(this.lowValue))),e=this.applyMinMaxRange(e),"lowValue"===this.tracking&&e>this.highValue?(this.lowValue=this.highValue,this.applyLowValue(),this.applyModel(),this.updateHandles(this.tracking,this.maxH.rzsp),this.updateAriaAttributes(),this.tracking="highValue",this.minH.removeClass("rz-active"),this.maxH.addClass("rz-active"),this.options.keyboardSupport&&this.focusElement(this.maxH),t=!0):"highValue"===this.tracking&&e<this.lowValue&&(this.highValue=this.lowValue,this.applyHighValue(),this.applyModel(),this.updateHandles(this.tracking,this.minH.rzsp),this.updateAriaAttributes(),this.tracking="lowValue",this.maxH.removeClass("rz-active"),this.minH.addClass("rz-active"),this.options.keyboardSupport&&this.focusElement(this.minH),t=!0))),this[this.tracking]!==e&&(this[this.tracking]=e,"lowValue"===this.tracking?this.applyLowValue():this.applyHighValue(),this.applyModel(),this.updateHandles(this.tracking,this.valueToPosition(e)),this.updateAriaAttributes(),t=!0),t&&this.applyModel(!0)},applyMinMaxLimit:function(e){return null!=this.options.minLimit&&e<this.options.minLimit?this.options.minLimit:null!=this.options.maxLimit&&e>this.options.maxLimit?this.options.maxLimit:e},applyMinMaxRange:function(e){var t="lowValue"===this.tracking?this.highValue:this.lowValue,r=Math.abs(e-t);return null!=this.options.minRange&&r<this.options.minRange?"lowValue"===this.tracking?this.highValue-this.options.minRange:this.lowValue+this.options.minRange:null!=this.options.maxRange&&r>this.options.maxRange?"lowValue"===this.tracking?this.highValue-this.options.maxRange:this.lowValue+this.options.maxRange:e},applyPushRange:function(e){var t="lowValue"===this.tracking?this.highValue-e:e-this.lowValue,r=null!==this.options.minRange?this.options.minRange:this.options.step,n=this.options.maxRange;return t<r?("lowValue"===this.tracking?(this.highValue=Math.min(e+r,this.maxValue),e=this.highValue-r,this.applyHighValue(),this.updateHandles("highValue",this.valueToPosition(this.highValue))):(this.lowValue=Math.max(e-r,this.minValue),e=this.lowValue+r,this.applyLowValue(),this.updateHandles("lowValue",this.valueToPosition(this.lowValue))),this.updateAriaAttributes()):null!==n&&t>n&&("lowValue"===this.tracking?(this.highValue=e+n,this.applyHighValue(),this.updateHandles("highValue",this.valueToPosition(this.highValue))):(this.lowValue=e-n,this.applyLowValue(),this.updateHandles("lowValue",this.valueToPosition(this.lowValue))),this.updateAriaAttributes()),e},applyModel:function(e){this.internalChange=!0,this.scope.$apply(),e&&this.callOnChange(),this.internalChange=!1},callOnStart:function(){if(this.options.onStart){var e=this,t="lowValue"===this.tracking?"min":"max";this.scope.$evalAsync(function(){e.options.onStart(e.options.id,e.scope.rzSliderModel,e.scope.rzSliderHigh,t)})}},callOnChange:function(){if(this.options.onChange){var e=this,t="lowValue"===this.tracking?"min":"max";this.scope.$evalAsync(function(){e.options.onChange(e.options.id,e.scope.rzSliderModel,e.scope.rzSliderHigh,t)})}},callOnEnd:function(){if(this.options.onEnd){var e=this,t="lowValue"===this.tracking?"min":"max";this.scope.$evalAsync(function(){e.options.onEnd(e.options.id,e.scope.rzSliderModel,e.scope.rzSliderHigh,t)})}this.scope.$emit("slideEnded")}},s}]).directive("rzslider",["RzSlider",function(e){return{restrict:"AE",replace:!0,scope:{rzSliderModel:"=?",rzSliderHigh:"=?",rzSliderOptions:"&?",rzSliderTplUrl:"@"},templateUrl:function(e,t){return t.rzSliderTplUrl||"rzSliderTpl.html"},link:function(t,r){t.slider=new e(t,r)}}}]);return t.run(["$templateCache",function(e){e.put("rzSliderTpl.html",'<div class=rzslider><span class="rz-bar-wrapper rz-left-out-selection"><span class=rz-bar></span></span> <span class="rz-bar-wrapper rz-right-out-selection"><span class=rz-bar></span></span> <span class=rz-bar-wrapper><span class=rz-bar></span></span> <span class=rz-bar-wrapper><span class="rz-bar rz-selection" ng-style=barStyle></span></span> <span class="rz-pointer rz-pointer-min" ng-style=minPointerStyle></span> <span class="rz-pointer rz-pointer-max" ng-style=maxPointerStyle></span> <span class="rz-bubble rz-limit rz-floor"></span> <span class="rz-bubble rz-limit rz-ceil"></span> <span class=rz-bubble></span> <span class=rz-bubble></span> <span class=rz-bubble></span><ul ng-show=showTicks class=rz-ticks><li ng-repeat="t in ticks track by $index" class=rz-tick ng-class="{\'rz-selected\': t.selected}" ng-style=t.style ng-attr-uib-tooltip="{{ t.tooltip }}" ng-attr-tooltip-placement={{t.tooltipPlacement}} ng-attr-tooltip-append-to-body="{{ t.tooltip ? true : undefined}}"><span ng-if="t.value != null" class=rz-tick-value ng-attr-uib-tooltip="{{ t.valueTooltip }}" ng-attr-tooltip-placement={{t.valueTooltipPlacement}}>{{ t.value }}</span> <span ng-if="t.legend != null" class=rz-tick-legend>{{ t.legend }}</span></li></ul></div>')}]),t.name})},function(e,t,r){function n(e){var t="";return t+='<div class="main-table" ng-style="$ctrl.tableWidthStyle()"><div class="main-grid" ui-grid="{ data: $ctrl.allItems, enableFiltering: true }" ng-hide="$ctrl.actions.filter.dividerPercent &lt; 2" ui-grid-auto-resize></div></div><div class="main-canvas" ng-style="$ctrl.canvasWidthStyle()"><ul class="nav nav-tabs class-nav"><li ng-repeat="clss in $ctrl.getActiveClasses()" ng-class="{ active: $ctrl.selectedClass === clss }"><a ng-click="$ctrl.selectedClass = clss">{{ clss.labels | prefLang }}</a></li></ul><div class="filter-area" ng-repeat="clss in $ctrl.getActiveClasses()" ng-show="$ctrl.selectedClass === clss"><h3 class="filter-heading">Add filter on {{ clss.labels | prefLang }}</h3><button class="btn btn-default add-by-type disabled">Map</button><button class="btn btn-default add-by-type disabled">Timeline</button><button class="btn btn-default add-by-type disabled">Timespan</button><div class="btn-group add-by-property" uib-dropdown><button class="btn btn-default dropdown-toggle" uib-dropdown-toggle>on property&nbsp;<span class="caret"></span></button><ul class="dropdown-menu" uib-dropdown-menu><li ng-repeat="prop in clss.properties"><a ng-click="$ctrl.addFilter(clss, prop)">{{ prop.labels | prefLang }}</a></li></ul></div><hr><div class="filter" ng-repeat="(propId, filter) in $ctrl.state.filter.filtersByClass[clss.id.value]" ng-init="slideMin = filter.domain[0]; slideMax=filter.domain[1]; slideOptions={ floor: filter.selection[0], ceil: filter.selection[1], draggableRange: true, showTicks: filter.domain[1]/10, showTicksValues: true }"><div class="filter-title">{{ filter.description }}: {{ $ctrl.state.project.project.dataModel.propertyMap.s[propId].labels | prefLang }}</div><div class="filter-box"><rzslider rz-slider-model="slideMin" rz-slider-high="slideMax" rz-slider-options="slideOptions"></rzslider></div></div></div></div><div class="draggable-divider" drag-container="true" on-drag-end="dragging = false; $ctrl.dragDivider($event)" ng-style="$ctrl.dragTabLeftStyle()"><div class="drag-tab"></div></div>'}r(8);e.exports=n},function(e,t,r){"use strict";var n=r(0),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(n);r(242),r(529),i.module("fibra.filters",["fibra.filters.pref-lang","fibra.filters.citable"])},function(e,t,r){"use strict";var n=r(242),i=r(0);(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t})(i).module("fibra.filters.citable",[]).filter("citable",["fibraService",function(e){return function(t){var r=e.getState().language,i=(0,n.getPrefLangString)(t.labels,r);return t.rightsHolders.length>0&&(i+=" (",t.rightsHolders.forEach(function(e){return i+=(0,n.getPrefLangString)(e.labels,r)+", "}),i=i.substring(0,i.length-2)+")"),i}}])},function(e,t,r){"use strict";function n(e,t){if(e===t)return!0;var r=f()(e).filter(function(e){return"$$hashKey"!==e}),n=f()(t).filter(function(e){return"$$hashKey"!==e});if(r.length!==n.length)return!1;for(var i=Object.prototype.hasOwnProperty,o=0;o<r.length;o++)if(!i.call(t,r[o])||e[r[o]]!==t[r[o]])return!1;return!0}function i(e){return function(t){return Object(E.bindActionCreators)(e,t)}}function o(e){return function(t,r){var o=t||P,l=w()(r)?i(r):r||D;S()(A()(o),"mapStateToTarget must be a Function. Instead received %s.",o),S()(w()(l)||A()(l),"mapDispatchToTarget must be a plain Object or a Function. Instead received %s.",l);var u=s(e.getState(),o,!1);A()(u)&&(o=u,u=s(e.getState(),o));var c=l(e.dispatch);return function(t){return S()(A()(t)||L()(t),"The target parameter passed to connect must be a Function or a object."),a(t,u,c),e.subscribe(function(){var r=s(e.getState(),o);n(u,r)||(u=r,a(t,u,c))})}}}function a(e,t,r){A()(e)?e(t,r):O(e,t,r)}function s(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=t(e);return r?S()(w()(n),"`mapStateToScope` must return an object. Instead received %s.",n):S()(w()(n)||A()(n),"`mapStateToScope` must return an object or a function. Instead received %s.",n),n}function l(e){return function(t){return function(t){return function(r){var n=t(r);return e.$evalAsync(n),n}}}}function u(){var e=void 0,t=void 0,r=void 0,n=void 0,i=void 0;this.createStoreWith=function(o,a,s,l){S()(A()(o)||j(o),"The reducer parameter passed to createStoreWith must be a Function or an Object. Instead received %s.",void 0===o?"undefined":b()(o)),S()(!s||F(s),"The storeEnhancers parameter passed to createStoreWith must be an Array. Instead received %s.",void 0===s?"undefined":b()(s)),e=o,i=j(o),r=s,t=a||[],n=l},this.$get=function(a){var s=function(e){return $(e)?a.get(e):e},u=k()(t,s),c=function(e){return $(e)?a.get(e):e},d=k()(r,c);if(i){var h=function(t){return $(e[t])?a.get(e[t]):e[t]},v=function(e,t){return G({},e,g()({},t,h(t)))},m=f()(e).reduce(v,{});e=Object(E.combineReducers)(m)}var y=d?E.compose.apply(void 0,p()(d))(E.createStore):E.createStore;u.push(l(a.get("$rootScope")));var b=n?E.applyMiddleware.apply(void 0,p()(u))(y)(e,n):E.applyMiddleware.apply(void 0,p()(u))(y)(e);return G({},b,{connect:o(b)})},this.$get.$inject=["$injector"]}Object.defineProperty(t,"__esModule",{value:!0});var c=r(531),p=r.n(c),d=r(536),f=r.n(d),h=r(94),g=r.n(h),v=r(30),m=r.n(v),y=r(88),b=r.n(y),E=r(109),x=r(539),S=r.n(x),C=r(540),w=r.n(C),T=r(541),A=r.n(T),I=r(542),L=r.n(I),N=r(543),R=r.n(N),_=r(544),k=r.n(_),O=m.a,P=function(){return{}},D=function(e){return{dispatch:e}},F=Array.isArray,M=R()(function(e,t){return(void 0===t?"undefined":b()(t))===e}),j=M("object"),$=M("string"),G=m.a,B=angular.module("ngRedux",[]).provider("$ngRedux",u).name;t.default=B},function(e,t,r){"use strict";t.__esModule=!0;var n=r(532),i=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return(0,i.default)(e)}},function(e,t,r){e.exports={default:r(533),__esModule:!0}},function(e,t,r){r(54),r(534),e.exports=r(9).Array.from},function(e,t,r){"use strict";var n=r(29),i=r(13),o=r(52),a=r(176),s=r(177),l=r(81),u=r(535),c=r(121);i(i.S+i.F*!r(183)(function(e){Array.from(e)}),"Array",{from:function(e){var t,r,i,p,d=o(e),f="function"==typeof this?this:Array,h=arguments.length,g=h>1?arguments[1]:void 0,v=void 0!==g,m=0,y=c(d);if(v&&(g=n(g,h>2?arguments[2]:void 0,2)),void 0==y||f==Array&&s(y))for(t=l(d.length),r=new f(t);t>m;m++)u(r,m,v?g(d[m],m):d[m]);else for(p=y.call(d),r=new f;!(i=p.next()).done;m++)u(r,m,v?a(p,g,[i.value,m],!0):i.value);return r.length=m,r}})},function(e,t,r){"use strict";var n=r(24),i=r(64);e.exports=function(e,t,r){t in e?n.f(e,t,i(0,r)):e[t]=r}},function(e,t,r){e.exports={default:r(537),__esModule:!0}},function(e,t,r){r(538),e.exports=r(9).Object.keys},function(e,t,r){var n=r(52),i=r(65);r(87)("keys",function(){return function(e){return i(n(e))}})},function(e,t,r){"use strict";var n=function(e,t,r,n,i,o,a,s){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[r,n,i,o,a,s],c=0;l=new Error(t.replace(/%s/g,function(){return u[c++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}};e.exports=n},function(e,t){function r(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function n(e){return!!e&&"object"==typeof e}function i(e){if(!n(e)||p.call(e)!=o||r(e))return!1;var t=d(e);if(null===t)return!0;var i=u.call(t,"constructor")&&t.constructor;return"function"==typeof i&&i instanceof i&&l.call(i)==c}var o="[object Object]",a=Function.prototype,s=Object.prototype,l=a.toString,u=s.hasOwnProperty,c=l.call(Object),p=s.toString,d=function(e,t){return function(r){return e(t(r))}}(Object.getPrototypeOf,Object);e.exports=i},function(e,t){function r(e){var t=n(e)?s.call(e):"";return t==i||t==o}function n(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var i="[object Function]",o="[object GeneratorFunction]",a=Object.prototype,s=a.toString;e.exports=r},function(e,t){function r(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=r},function(e,t,r){(function(t){function r(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function n(e,t){for(var r=-1,n=e?e.length:0;++r<n&&!1!==t(e[r],r,e););return e}function i(e,t){return!!(e?e.length:0)&&a(e,t,0)>-1}function o(e,t,r,n){for(var i=e.length,o=r+(n?1:-1);n?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function a(e,t,r){if(t!==t)return o(e,s,r);for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}function s(e){return e!==e}function l(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&n++;return n}function u(e,t){return null==e?void 0:e[t]}function c(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function p(e,t){for(var r=-1,n=e.length,i=0,o=[];++r<n;){var a=e[r];a!==t&&a!==V||(e[r]=V,o[i++]=r)}return o}function d(e){return D(e)?Re(e):{}}function f(e){return!(!D(e)||N(e))&&(P(e)||c(e)?Ne:ge).test(_(e))}function h(e,t,r,n){for(var i=-1,o=e.length,a=r.length,s=-1,l=t.length,u=_e(o-a,0),c=Array(l+u),p=!n;++s<l;)c[s]=t[s];for(;++i<a;)(p||i<o)&&(c[r[i]]=e[i]);for(;u--;)c[s++]=e[i++];return c}function g(e,t,r,n){for(var i=-1,o=e.length,a=-1,s=r.length,l=-1,u=t.length,c=_e(o-s,0),p=Array(c+u),d=!n;++i<c;)p[i]=e[i];for(var f=i;++l<u;)p[f+l]=t[l];for(;++a<s;)(d||i<o)&&(p[f+r[a]]=e[i++]);return p}function v(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}function m(e,t,r){function n(){return(this&&this!==xe&&this instanceof n?o:e).apply(i?r:this,arguments)}var i=t&q,o=y(e);return n}function y(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=d(e.prototype),n=e.apply(r,t);return D(n)?n:r}}function b(e,t,n){function i(){for(var a=arguments.length,s=Array(a),l=a,u=w(i);l--;)s[l]=arguments[l];var c=a<3&&s[0]!==u&&s[a-1]!==u?[]:p(s,u);return(a-=c.length)<n?S(e,t,E,i.placeholder,void 0,s,c,void 0,void 0,n-a):r(this&&this!==xe&&this instanceof i?o:e,this,s)}var o=y(e);return i}function E(e,t,r,n,i,o,a,s,u,c){function d(){for(var T=arguments.length,A=Array(T),I=T;I--;)A[I]=arguments[I];if(b)var L=w(d),N=l(A,L);if(n&&(A=h(A,n,i,b)),o&&(A=g(A,o,a,b)),T-=N,b&&T<c){var _=p(A,L);return S(e,t,E,d.placeholder,r,A,_,s,u,c-T)}var k=v?r:this,O=m?k[e]:e;return T=A.length,s?A=R(A,s):x&&T>1&&A.reverse(),f&&u<T&&(A.length=u),this&&this!==xe&&this instanceof d&&(O=C||y(O)),O.apply(k,A)}var f=t&J,v=t&q,m=t&z,b=t&(W|X),x=t&Z,C=m?void 0:y(e);return d}function x(e,t,n,i){function o(){for(var t=-1,l=arguments.length,u=-1,c=i.length,p=Array(c+l),d=this&&this!==xe&&this instanceof o?s:e;++u<c;)p[u]=i[u];for(;l--;)p[u++]=arguments[++t];return r(d,a?n:this,p)}var a=t&q,s=y(e);return o}function S(e,t,r,n,i,o,a,s,l,u){var c=t&W,p=c?a:void 0,d=c?void 0:a,f=c?o:void 0,h=c?void 0:o;t|=c?Y:K,(t&=~(c?K:Y))&Q||(t&=~(q|z));var g=r(e,t,i,f,p,h,d,s,l,u);return g.placeholder=n,Pe(g,e,t)}function C(e,t,r,n,i,o,a,s){var l=t&z;if(!l&&"function"!=typeof e)throw new TypeError(U);var u=n?n.length:0;if(u||(t&=~(Y|K),n=i=void 0),a=void 0===a?a:_e($(a),0),s=void 0===s?s:$(s),u-=i?i.length:0,t&K){var c=n,p=i;n=i=void 0}var d=[e,t,r,n,i,c,p,o,a,s];if(e=d[0],t=d[1],r=d[2],n=d[3],i=d[4],s=d[9]=null==d[9]?l?0:e.length:_e(d[9]-u,0),!s&&t&(W|X)&&(t&=~(W|X)),t&&t!=q)f=t==W||t==X?b(e,t,s):t!=Y&&t!=(q|Y)||i.length?E.apply(void 0,d):x(e,t,r,n);else var f=m(e,t,r);return Pe(f,e,t)}function w(e){return e.placeholder}function T(e,t){var r=u(e,t);return f(r)?r:void 0}function A(e){var t=e.match(pe);return t?t[1].split(de):[]}function I(e,t){var r=t.length,n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace(ce,"{\n/* [wrapped with "+t+"] */\n")}function L(e,t){return!!(t=null==t?te:t)&&("number"==typeof e||me.test(e))&&e>-1&&e%1==0&&e<t}function N(e){return!!Te&&Te in e}function R(e,t){for(var r=e.length,n=ke(t.length,r),i=v(e);n--;){var o=t[n];e[n]=L(o,r)?i[o]:void 0}return e}function _(e){if(null!=e){try{return Ae.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function k(e,t){return n(ie,function(r){var n="_."+r[0];t&r[1]&&!i(e,n)&&e.push(n)}),e.sort()}function O(e,t,r){t=r?void 0:t;var n=C(e,W,void 0,void 0,void 0,void 0,void 0,t);return n.placeholder=O.placeholder,n}function P(e){var t=D(e)?Le.call(e):"";return t==oe||t==ae}function D(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function F(e){return!!e&&"object"==typeof e}function M(e){return"symbol"==typeof e||F(e)&&Le.call(e)==se}function j(e){if(!e)return 0===e?e:0;if((e=G(e))===ee||e===-ee){return(e<0?-1:1)*re}return e===e?e:0}function $(e){var t=j(e),r=t%1;return t===t?r?t-r:t:0}function G(e){if("number"==typeof e)return e;if(M(e))return ne;if(D(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=D(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(ue,"");var r=he.test(e);return r||ve.test(e)?ye(e.slice(2),r?2:8):fe.test(e)?ne:+e}function B(e){return function(){return e}}function H(e){return e}var U="Expected a function",V="__lodash_placeholder__",q=1,z=2,Q=4,W=8,X=16,Y=32,K=64,J=128,Z=512,ee=1/0,te=9007199254740991,re=1.7976931348623157e308,ne=NaN,ie=[["ary",J],["bind",q],["bindKey",z],["curry",W],["curryRight",X],["flip",Z],["partial",Y],["partialRight",K],["rearg",256]],oe="[object Function]",ae="[object GeneratorFunction]",se="[object Symbol]",le=/[\\^$.*+?()[\]{}|]/g,ue=/^\s+|\s+$/g,ce=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,pe=/\{\n\/\* \[wrapped with (.+)\] \*/,de=/,? & /,fe=/^[-+]0x[0-9a-f]+$/i,he=/^0b[01]+$/i,ge=/^\[object .+?Constructor\]$/,ve=/^0o[0-7]+$/i,me=/^(?:0|[1-9]\d*)$/,ye=parseInt,be="object"==typeof t&&t&&t.Object===Object&&t,Ee="object"==typeof self&&self&&self.Object===Object&&self,xe=be||Ee||Function("return this")(),Se=Function.prototype,Ce=Object.prototype,we=xe["__core-js_shared__"],Te=function(){var e=/[^.]+$/.exec(we&&we.keys&&we.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Ae=Se.toString,Ie=Ce.hasOwnProperty,Le=Ce.toString,Ne=RegExp("^"+Ae.call(Ie).replace(le,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Re=Object.create,_e=Math.max,ke=Math.min,Oe=function(){var e=T(Object,"defineProperty"),t=T.name;return t&&t.length>2?e:void 0}(),Pe=Oe?function(e,t,r){var n=t+"";return Oe(e,"toString",{configurable:!0,enumerable:!1,value:B(I(n,k(A(n),r)))})}:H;O.placeholder={},e.exports=O}).call(t,r(11))},function(e,t,r){(function(e,r){function n(e,t){for(var r=-1,n=e?e.length:0,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}function i(e,t){for(var r=-1,n=e?e.length:0;++r<n;)if(t(e[r],r,e))return!0;return!1}function o(e){return function(t){return null==t?void 0:t[e]}}function a(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function s(e,t){return null==e?void 0:e[t]}function l(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function u(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}function c(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}function p(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function d(){this.__data__=Ht?Ht(null):{}}function f(e){return this.has(e)&&delete this.__data__[e]}function h(e){var t=this.__data__;if(Ht){var r=t[e];return r===je?void 0:r}return Nt.call(t,e)?t[e]:void 0}function g(e){var t=this.__data__;return Ht?void 0!==t[e]:Nt.call(t,e)}function v(e,t){return this.__data__[e]=Ht&&void 0===t?je:t,this}function m(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function y(){this.__data__=[]}function b(e){var t=this.__data__,r=$(t,e);return!(r<0)&&(r==t.length-1?t.pop():Dt.call(t,r,1),!0)}function E(e){var t=this.__data__,r=$(t,e);return r<0?void 0:t[r][1]}function x(e){return $(this.__data__,e)>-1}function S(e,t){var r=this.__data__,n=$(r,e);return n<0?r.push([e,t]):r[n][1]=t,this}function C(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function w(){this.__data__={hash:new p,map:new(jt||m),string:new p}}function T(e){return ae(this,e).delete(e)}function A(e){return ae(this,e).get(e)}function I(e){return ae(this,e).has(e)}function L(e,t){return ae(this,e).set(e,t),this}function N(e){var t=-1,r=e?e.length:0;for(this.__data__=new C;++t<r;)this.add(e[t])}function R(e){return this.__data__.set(e,je),this}function _(e){return this.__data__.has(e)}function k(e){this.__data__=new m(e)}function O(){this.__data__=new m}function P(e){return this.__data__.delete(e)}function D(e){return this.__data__.get(e)}function F(e){return this.__data__.has(e)}function M(e,t){var r=this.__data__;if(r instanceof m){var n=r.__data__;if(!jt||n.length<Fe-1)return n.push([e,t]),this;r=this.__data__=new C(n)}return r.set(e,t),this}function j(e,t){var r=tr(e)||Se(e)?a(e.length,String):[],n=r.length,i=!!n;for(var o in e)!t&&!Nt.call(e,o)||i&&("length"==o||ce(o,n))||r.push(o);return r}function $(e,t){for(var r=e.length;r--;)if(xe(e[r][0],t))return r;return-1}function G(e,t){return e&&Jt(e,t,Oe)}function B(e,t){t=pe(t,e)?[t]:re(t);for(var r=0,n=t.length;null!=e&&r<n;)e=e[me(t[r++])];return r&&r==n?e:void 0}function H(e){return Rt.call(e)}function U(e,t){return null!=e&&t in Object(e)}function V(e,t,r,n,i){return e===t||(null==e||null==t||!Ie(e)&&!Le(t)?e!==e&&t!==t:q(e,t,V,r,n,i))}function q(e,t,r,n,i,o){var a=tr(e),s=tr(t),u=Ve,c=Ve;a||(u=Zt(e),u=u==Ue?Je:u),s||(c=Zt(t),c=c==Ue?Je:c);var p=u==Je&&!l(e),d=c==Je&&!l(t),f=u==c;if(f&&!p)return o||(o=new k),a||rr(e)?ne(e,t,r,n,i,o):ie(e,t,u,r,n,i,o);if(!(i&Ge)){var h=p&&Nt.call(e,"__wrapped__"),g=d&&Nt.call(t,"__wrapped__");if(h||g){var v=h?e.value():e,m=g?t.value():t;return o||(o=new k),r(v,m,n,i,o)}}return!!f&&(o||(o=new k),oe(e,t,r,n,i,o))}function z(e,t,r,n){var i=r.length,o=i,a=!n;if(null==e)return!o;for(e=Object(e);i--;){var s=r[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){s=r[i];var l=s[0],u=e[l],c=s[1];if(a&&s[2]){if(void 0===u&&!(l in e))return!1}else{var p=new k;if(n)var d=n(u,c,l,e,t,p);if(!(void 0===d?V(c,u,n,$e|Ge,p):d))return!1}}return!0}function Q(e){return!(!Ie(e)||fe(e))&&(Te(e)||l(e)?_t:pt).test(ye(e))}function W(e){return Le(e)&&Ae(e.length)&&!!ft[Rt.call(e)]}function X(e){return"function"==typeof e?e:null==e?Pe:"object"==typeof e?tr(e)?Z(e[0],e[1]):J(e):De(e)}function Y(e){if(!he(e))return Ft(e);var t=[];for(var r in Object(e))Nt.call(e,r)&&"constructor"!=r&&t.push(r);return t}function K(e,t){var r=-1,n=Ce(e)?Array(e.length):[];return Kt(e,function(e,i,o){n[++r]=t(e,i,o)}),n}function J(e){var t=se(e);return 1==t.length&&t[0][2]?ve(t[0][0],t[0][1]):function(r){return r===e||z(r,e,t)}}function Z(e,t){return pe(e)&&ge(t)?ve(me(e),t):function(r){var n=_e(r,e);return void 0===n&&n===t?ke(r,e):V(t,n,void 0,$e|Ge)}}function ee(e){return function(t){return B(t,e)}}function te(e){if("string"==typeof e)return e;if(Ne(e))return Yt?Yt.call(e):"";var t=e+"";return"0"==t&&1/e==-Be?"-0":t}function re(e){return tr(e)?e:er(e)}function ne(e,t,r,n,o,a){var s=o&Ge,l=e.length,u=t.length;if(l!=u&&!(s&&u>l))return!1;var c=a.get(e);if(c&&a.get(t))return c==t;var p=-1,d=!0,f=o&$e?new N:void 0;for(a.set(e,t),a.set(t,e);++p<l;){var h=e[p],g=t[p];if(n)var v=s?n(g,h,p,t,e,a):n(h,g,p,e,t,a);if(void 0!==v){if(v)continue;d=!1;break}if(f){if(!i(t,function(e,t){if(!f.has(t)&&(h===e||r(h,e,n,o,a)))return f.add(t)})){d=!1;break}}else if(h!==g&&!r(h,g,n,o,a)){d=!1;break}}return a.delete(e),a.delete(t),d}function ie(e,t,r,n,i,o,a){switch(r){case it:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case nt:return!(e.byteLength!=t.byteLength||!n(new Ot(e),new Ot(t)));case qe:case ze:case Ke:return xe(+e,+t);case Qe:return e.name==t.name&&e.message==t.message;case Ze:case tt:return e==t+"";case Ye:var s=u;case et:var l=o&Ge;if(s||(s=c),e.size!=t.size&&!l)return!1;var p=a.get(e);if(p)return p==t;o|=$e,a.set(e,t);var d=ne(s(e),s(t),n,i,o,a);return a.delete(e),d;case rt:if(Xt)return Xt.call(e)==Xt.call(t)}return!1}function oe(e,t,r,n,i,o){var a=i&Ge,s=Oe(e),l=s.length;if(l!=Oe(t).length&&!a)return!1;for(var u=l;u--;){var c=s[u];if(!(a?c in t:Nt.call(t,c)))return!1}var p=o.get(e);if(p&&o.get(t))return p==t;var d=!0;o.set(e,t),o.set(t,e);for(var f=a;++u<l;){c=s[u];var h=e[c],g=t[c];if(n)var v=a?n(g,h,c,t,e,o):n(h,g,c,e,t,o);if(!(void 0===v?h===g||r(h,g,n,i,o):v)){d=!1;break}f||(f="constructor"==c)}if(d&&!f){var m=e.constructor,y=t.constructor;m!=y&&"constructor"in e&&"constructor"in t&&!("function"==typeof m&&m instanceof m&&"function"==typeof y&&y instanceof y)&&(d=!1)}return o.delete(e),o.delete(t),d}function ae(e,t){var r=e.__data__;return de(t)?r["string"==typeof t?"string":"hash"]:r.map}function se(e){for(var t=Oe(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,ge(i)]}return t}function le(e,t){var r=s(e,t);return Q(r)?r:void 0}function ue(e,t,r){t=pe(t,e)?[t]:re(t);for(var n,i=-1,o=t.length;++i<o;){var a=me(t[i]);if(!(n=null!=e&&r(e,a)))break;e=e[a]}if(n)return n;var o=e?e.length:0;return!!o&&Ae(o)&&ce(a,o)&&(tr(e)||Se(e))}function ce(e,t){return!!(t=null==t?He:t)&&("number"==typeof e||dt.test(e))&&e>-1&&e%1==0&&e<t}function pe(e,t){if(tr(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!Ne(e))||(at.test(e)||!ot.test(e)||null!=t&&e in Object(t))}function de(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function fe(e){return!!It&&It in e}function he(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Tt)}function ge(e){return e===e&&!Ie(e)}function ve(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}}function me(e){if("string"==typeof e||Ne(e))return e;var t=e+"";return"0"==t&&1/e==-Be?"-0":t}function ye(e){if(null!=e){try{return Lt.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function be(e,t){return(tr(e)?n:K)(e,X(t,3))}function Ee(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(Me);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=e.apply(this,n);return r.cache=o.set(i,a),a};return r.cache=new(Ee.Cache||C),r}function xe(e,t){return e===t||e!==e&&t!==t}function Se(e){return we(e)&&Nt.call(e,"callee")&&(!Pt.call(e,"callee")||Rt.call(e)==Ue)}function Ce(e){return null!=e&&Ae(e.length)&&!Te(e)}function we(e){return Le(e)&&Ce(e)}function Te(e){var t=Ie(e)?Rt.call(e):"";return t==We||t==Xe}function Ae(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=He}function Ie(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Le(e){return!!e&&"object"==typeof e}function Ne(e){return"symbol"==typeof e||Le(e)&&Rt.call(e)==rt}function Re(e){return null==e?"":te(e)}function _e(e,t,r){var n=null==e?void 0:B(e,t);return void 0===n?r:n}function ke(e,t){return null!=e&&ue(e,t,U)}function Oe(e){return Ce(e)?j(e):Y(e)}function Pe(e){return e}function De(e){return pe(e)?o(me(e)):ee(e)}var Fe=200,Me="Expected a function",je="__lodash_hash_undefined__",$e=1,Ge=2,Be=1/0,He=9007199254740991,Ue="[object Arguments]",Ve="[object Array]",qe="[object Boolean]",ze="[object Date]",Qe="[object Error]",We="[object Function]",Xe="[object GeneratorFunction]",Ye="[object Map]",Ke="[object Number]",Je="[object Object]",Ze="[object RegExp]",et="[object Set]",tt="[object String]",rt="[object Symbol]",nt="[object ArrayBuffer]",it="[object DataView]",ot=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,at=/^\w*$/,st=/^\./,lt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ut=/[\\^$.*+?()[\]{}|]/g,ct=/\\(\\)?/g,pt=/^\[object .+?Constructor\]$/,dt=/^(?:0|[1-9]\d*)$/,ft={};ft["[object Float32Array]"]=ft["[object Float64Array]"]=ft["[object Int8Array]"]=ft["[object Int16Array]"]=ft["[object Int32Array]"]=ft["[object Uint8Array]"]=ft["[object Uint8ClampedArray]"]=ft["[object Uint16Array]"]=ft["[object Uint32Array]"]=!0,ft[Ue]=ft[Ve]=ft[nt]=ft[qe]=ft[it]=ft[ze]=ft[Qe]=ft[We]=ft[Ye]=ft[Ke]=ft[Je]=ft[Ze]=ft[et]=ft[tt]=ft["[object WeakMap]"]=!1;var ht="object"==typeof e&&e&&e.Object===Object&&e,gt="object"==typeof self&&self&&self.Object===Object&&self,vt=ht||gt||Function("return this")(),mt="object"==typeof t&&t&&!t.nodeType&&t,yt=mt&&"object"==typeof r&&r&&!r.nodeType&&r,bt=yt&&yt.exports===mt,Et=bt&&ht.process,xt=function(){try{return Et&&Et.binding("util")}catch(e){}}(),St=xt&&xt.isTypedArray,Ct=Array.prototype,wt=Function.prototype,Tt=Object.prototype,At=vt["__core-js_shared__"],It=function(){var e=/[^.]+$/.exec(At&&At.keys&&At.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Lt=wt.toString,Nt=Tt.hasOwnProperty,Rt=Tt.toString,_t=RegExp("^"+Lt.call(Nt).replace(ut,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),kt=vt.Symbol,Ot=vt.Uint8Array,Pt=Tt.propertyIsEnumerable,Dt=Ct.splice,Ft=function(e,t){return function(r){return e(t(r))}}(Object.keys,Object),Mt=le(vt,"DataView"),jt=le(vt,"Map"),$t=le(vt,"Promise"),Gt=le(vt,"Set"),Bt=le(vt,"WeakMap"),Ht=le(Object,"create"),Ut=ye(Mt),Vt=ye(jt),qt=ye($t),zt=ye(Gt),Qt=ye(Bt),Wt=kt?kt.prototype:void 0,Xt=Wt?Wt.valueOf:void 0,Yt=Wt?Wt.toString:void 0;p.prototype.clear=d,p.prototype.delete=f,p.prototype.get=h,p.prototype.has=g,p.prototype.set=v,m.prototype.clear=y,m.prototype.delete=b,m.prototype.get=E,m.prototype.has=x,m.prototype.set=S,C.prototype.clear=w,C.prototype.delete=T,C.prototype.get=A,C.prototype.has=I,C.prototype.set=L,N.prototype.add=N.prototype.push=R,N.prototype.has=_,k.prototype.clear=O,k.prototype.delete=P,k.prototype.get=D,k.prototype.has=F,k.prototype.set=M;var Kt=function(e,t){return function(r,n){if(null==r)return r;if(!Ce(r))return e(r,n);for(var i=r.length,o=t?i:-1,a=Object(r);(t?o--:++o<i)&&!1!==n(a[o],o,a););return r}}(G),Jt=function(e){return function(t,r,n){for(var i=-1,o=Object(t),a=n(t),s=a.length;s--;){var l=a[e?s:++i];if(!1===r(o[l],l,o))break}return t}}(),Zt=H;(Mt&&Zt(new Mt(new ArrayBuffer(1)))!=it||jt&&Zt(new jt)!=Ye||$t&&"[object Promise]"!=Zt($t.resolve())||Gt&&Zt(new Gt)!=et||Bt&&"[object WeakMap]"!=Zt(new Bt))&&(Zt=function(e){var t=Rt.call(e),r=t==Je?e.constructor:void 0,n=r?ye(r):void 0;if(n)switch(n){case Ut:return it;case Vt:return Ye;case qt:return"[object Promise]";case zt:return et;case Qt:return"[object WeakMap]"}return t});var er=Ee(function(e){e=Re(e);var t=[];return st.test(e)&&t.push(""),e.replace(lt,function(e,r,n,i){t.push(n?i.replace(ct,"$1"):r||e)}),t});Ee.Cache=C;var tr=Array.isArray,rr=St?function(e){return function(t){return e(t)}}(St):W;r.exports=be}).call(t,r(11),r(110)(e))},function(e,t,r){!function(t,n){e.exports=n(r(0),r(79))}(0,function(e,t){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(t,r){t.exports=e},function(e,r){e.exports=t},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(1),o=function(){function e(e,t){this.$element=e,this.$timeout=t}return e.$inject=["$element","$timeout"],e.prototype.$postLink=function(){var e=this;this.content||(this.content=""),this.yasqe=i(this.$element[0],{createShareLink:!1,sparql:{endpoint:this.endpoint,callbacks:{complete:function(t){return e.onQueryResults({results:t})}},showQueryButton:this.showQueryButton}}),this.yasqe.setValue(this.content),this.yasqe.on("change",function(){return e.onContentChanged({content:e.yasqe.getValue()})}),this.onInit({yasqe:this.yasqe})},e.prototype.$onChanges=function(e){e.endpoint&&!e.endpoint.isFirstChange()&&(this.yasqe.options.sparql.endpoint=e.endpoint.currentValue),e.content&&!e.content.isFirstChange()&&e.content.currentValue!==this.yasqe.getValue()&&this.yasqe.setValue(e.content.currentValue)},e}();t.YasqeComponentController=o;var a=function(){function e(){this.bindings={content:"<",onContentChanged:"&",onQueryResults:"&",endpoint:"<",onInit:"&",showQueryButton:"@"},this.controller=o}return e}();t.YasqeComponent=a,n.module("fi.seco.yasqe",[]).component("yasqe",new a)}])})},function(e,t,r){function n(e){var t=!1;if(e)if(e.code)switch(e.code){case 22:t=!0;break;case 1014:"NS_ERROR_DOM_QUOTA_REACHED"===e.name&&(t=!0)}else-2147024882===e.number&&(t=!0);return t}var i=r(547),o={day:function(){return 864e5},month:function(){o.day()},year:function(){o.month()}},a=e.exports={set:function(e,t,r,a){if(i.enabled&&e&&void 0!==t){"string"==typeof r&&(r=o[r]()),t.documentElement&&(t=(new XMLSerializer).serializeToString(t.documentElement));try{i.set(e,{val:t,exp:r,time:(new Date).getTime()})}catch(e){if(e.quotaExceeded=n(e),!e.quotaExceeded||!a)throw e;a(e)}}},remove:function(e){i.enabled&&e&&i.remove(e)},removeAll:function(e){i.enabled&&(e?"function"==typeof e&&i.each(function(t,r){e(r,t)&&a.remove(r)}):i.clearAll())},get:function(e){if(!i.enabled)return null;if(e){var t=i.get(e);return t?t.exp&&(new Date).getTime()-t.time>t.exp?null:t.val:null}return null}}},function(e,t,r){var n=r(548),i=r(549),o=[r(556)];e.exports=n.createStore(i,o)},function(e,t,r){function n(){var e="undefined"==typeof console?null:console;if(e){(e.warn?e.warn:e.log).apply(e,arguments)}}function i(e,t,r){r||(r=""),e&&!p(e)&&(e=[e]),t&&!p(t)&&(t=[t]);var i=r?"__storejs_"+r+"_":"",o=r?new RegExp("^"+i):null;if(!/^[a-zA-Z0-9_\-]*$/.test(r))throw new Error("store.js namespaces can only have alphanumerics + underscores and dashes");var g={_namespacePrefix:i,_namespaceRegexp:o,_testStorage:function(e){try{var t="__storejs__test__";e.write(t,t);var r=e.read(t)===t;return e.remove(t),r}catch(e){return!1}},_assignPluginFnProp:function(e,t){var r=this[t];this[t]=function(){function t(){if(r)return l(arguments,function(e,t){n[t]=e}),r.apply(i,n)}var n=a(arguments,0),i=this,o=[t].concat(n);return e.apply(i,o)}},_serialize:function(e){return JSON.stringify(e)},_deserialize:function(e,t){if(!e)return t;var r="";try{r=JSON.parse(e)}catch(t){r=e}return void 0!==r?r:t},_addStorage:function(e){this.enabled||this._testStorage(e)&&(this.storage=e,this.enabled=!0)},_addPlugin:function(e){var t=this;if(p(e))return void l(e,function(e){t._addPlugin(e)});if(!s(this.plugins,function(t){return e===t})){if(this.plugins.push(e),!d(e))throw new Error("Plugins must be function values that return objects");var r=e.call(this);if(!f(r))throw new Error("Plugins must return an object of function properties");l(r,function(r,n){if(!d(r))throw new Error("Bad plugin property: "+n+" from plugin "+e.name+". Plugins should only return functions.");t._assignPluginFnProp(r,n)})}},addStorage:function(e){n("store.addStorage(storage) is deprecated. Use createStore([storages])"),this._addStorage(e)}},v=c(g,h,{plugins:[]});return v.raw={},l(v,function(e,t){d(e)&&(v.raw[t]=u(v,e))}),l(e,function(e){v._addStorage(e)}),l(t,function(e){v._addPlugin(e)}),v}var o=r(62),a=o.slice,s=o.pluck,l=o.each,u=o.bind,c=o.create,p=o.isList,d=o.isFunction,f=o.isObject;e.exports={createStore:i};var h={version:"2.0.12",enabled:!1,get:function(e,t){var r=this.storage.read(this._namespacePrefix+e);return this._deserialize(r,t)},set:function(e,t){return void 0===t?this.remove(e):(this.storage.write(this._namespacePrefix+e,this._serialize(t)),t)},remove:function(e){this.storage.remove(this._namespacePrefix+e)},each:function(e){var t=this;this.storage.each(function(r,n){e.call(t,t._deserialize(r),(n||"").replace(t._namespaceRegexp,""))})},clearAll:function(){this.storage.clearAll()},hasNamespace:function(e){return this._namespacePrefix=="__storejs_"+e+"_"},createStore:function(){return i.apply(this,arguments)},addPlugin:function(e){this._addPlugin(e)},namespace:function(e){return i(this.storage,this.plugins,e)}}},function(e,t,r){e.exports=[r(550),r(551),r(552),r(553),r(554),r(555)]},function(e,t,r){function n(){return c.localStorage}function i(e){return n().getItem(e)}function o(e,t){return n().setItem(e,t)}function a(e){for(var t=n().length-1;t>=0;t--){var r=n().key(t);e(i(r),r)}}function s(e){return n().removeItem(e)}function l(){return n().clear()}var u=r(62),c=u.Global;e.exports={name:"localStorage",read:i,write:o,each:a,remove:s,clearAll:l}},function(e,t,r){function n(e){return c[e]}function i(e,t){c[e]=t}function o(e){for(var t=c.length-1;t>=0;t--){var r=c.key(t);e(c[r],r)}}function a(e){return c.removeItem(e)}function s(){o(function(e,t){delete c[e]})}var l=r(62),u=l.Global;e.exports={name:"oldFF-globalStorage",read:n,write:i,each:o,remove:a,clearAll:s};var c=u.globalStorage},function(e,t,r){function n(e,t){if(!h){var r=l(e);f(function(e){e.setAttribute(r,t),e.save(p)})}}function i(e){if(!h){var t=l(e),r=null;return f(function(e){r=e.getAttribute(t)}),r}}function o(e){f(function(t){for(var r=t.XMLDocument.documentElement.attributes,n=r.length-1;n>=0;n--){var i=r[n];e(t.getAttribute(i.name),i.name)}})}function a(e){var t=l(e);f(function(e){e.removeAttribute(t),e.save(p)})}function s(){f(function(e){var t=e.XMLDocument.documentElement.attributes;e.load(p);for(var r=t.length-1;r>=0;r--)e.removeAttribute(t[r].name);e.save(p)})}function l(e){return e.replace(/^\d/,"___$&").replace(g,"___")}var u=r(62),c=u.Global;e.exports={name:"oldIE-userDataStorage",write:n,read:i,each:o,remove:a,clearAll:s};var p="storejs",d=c.document,f=function(){if(!d||!d.documentElement||!d.documentElement.addBehavior)return null;var e,t,r;try{t=new ActiveXObject("htmlfile"),t.open(),t.write('<script>document.w=window<\/script><iframe src="/favicon.ico"></iframe>'),t.close(),e=t.w.frames[0].document,r=e.createElement("div")}catch(t){r=d.createElement("div"),e=d.body}return function(t){var n=[].slice.call(arguments,0);n.unshift(r),e.appendChild(r),r.addBehavior("#default#userData"),r.load(p),t.apply(this,n),e.removeChild(r)}}(),h=(c.navigator?c.navigator.userAgent:"").match(/ (MSIE 8|MSIE 9|MSIE 10)\./),g=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g")},function(e,t,r){function n(e){if(!e||!l(e))return null;var t="(?:^|.*;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*";return unescape(d.cookie.replace(new RegExp(t),"$1"))}function i(e){for(var t=d.cookie.split(/; ?/g),r=t.length-1;r>=0;r--)if(p(t[r])){var n=t[r].split("="),i=unescape(n[0]),o=unescape(n[1]);e(o,i)}}function o(e,t){e&&(d.cookie=escape(e)+"="+escape(t)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/")}function a(e){e&&l(e)&&(d.cookie=escape(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/")}function s(){i(function(e,t){a(t)})}function l(e){return new RegExp("(?:^|;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(d.cookie)}var u=r(62),c=u.Global,p=u.trim;e.exports={name:"cookieStorage",read:n,write:o,each:i,remove:a,clearAll:s};var d=c.document},function(e,t,r){function n(){return c.sessionStorage}function i(e){return n().getItem(e)}function o(e,t){return n().setItem(e,t)}function a(e){for(var t=n().length-1;t>=0;t--){var r=n().key(t);e(i(r),r)}}function s(e){return n().removeItem(e)}function l(){return n().clear()}var u=r(62),c=u.Global;e.exports={name:"sessionStorage",read:i,write:o,each:a,remove:s,clearAll:l}},function(e,t){function r(e){return s[e]}function n(e,t){s[e]=t}function i(e){for(var t in s)s.hasOwnProperty(t)&&e(s[t],t)}function o(e){delete s[e]}function a(e){s={}}e.exports={name:"memoryStorage",read:r,write:n,each:i,remove:o,clearAll:a};var s={}},function(e,t,r){function n(){return r(557),{}}e.exports=n},function(module,exports){"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(e){return e<10?"0"+e:e}function this_value(){return this.valueOf()}function quote(e){return rx_escapable.lastIndex=0,rx_escapable.test(e)?'"'+e.replace(rx_escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var r,n,i,o,a,s=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(l)){for(o=l.length,r=0;r<o;r+=1)a[r]=str(r,l)||"null";return i=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]",gap=s,i}if(rep&&"object"==typeof rep)for(o=rep.length,r=0;r<o;r+=1)"string"==typeof rep[r]&&(n=rep[r],(i=str(n,l))&&a.push(quote(n)+(gap?": ":":")+i));else for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(i=str(n,l))&&a.push(quote(n)+(gap?": ":":")+i);return i=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}",gap=s,i}}var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value);var gap,indent,meta,rep;"function"!=typeof JSON.stringify&&(meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(e,t,r){var n;if(gap="",indent="","number"==typeof r)for(n=0;n<r;n+=1)indent+=" ";else"string"==typeof r&&(indent=r);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var r,n,i=e[t];if(i&&"object"==typeof i)for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n=walk(i,r),void 0!==n?i[r]=n:delete i[r]);return reviver.call(e,t,i)}var j;if(text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}()},function(e,t){e.exports={draw:function(t,r){if(t){var n=e.exports.getElement(r);n&&(t.append?t.append(n):t.appendChild(n))}},getElement:function(e){if(e&&0==e.indexOf("<svg")){var t=new DOMParser,r=t.parseFromString(e,"text/xml"),n=r.documentElement,i=document.createElement("div");return i.className="svgImg",i.appendChild(n),i}return!1}}},function(e,t){e.exports={_args:[["yasgui-utils@1.6.7","/Users/esjewett/git_repos/fibra"]],_development:!0,_from:"yasgui-utils@1.6.7",_id:"yasgui-utils@1.6.7",_inBundle:!1,_integrity:"sha1-K8/FoxVojeOuYFeIPZrjQrIF8mc=",_location:"/yasgui-utils",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"yasgui-utils@1.6.7",name:"yasgui-utils",escapedName:"yasgui-utils",rawSpec:"1.6.7",saveSpec:null,fetchSpec:"1.6.7"},_requiredBy:["/yasgui-yasqe","/yasgui-yasr"],_resolved:"https://registry.npmjs.org/yasgui-utils/-/yasgui-utils-1.6.7.tgz",_spec:"1.6.7",_where:"/Users/esjewett/git_repos/fibra",author:{name:"Laurens Rietveld"},bugs:{url:"https://github.com/YASGUI/Utils/issues"},dependencies:{store:"^2.0.4"},description:"Utils for YASGUI libs",homepage:"https://github.com/YASGUI/Utils",licenses:[{type:"MIT",url:"http://yasgui.github.io/license.txt"}],main:"src/main.js",maintainers:[{name:"Laurens Rietveld",email:"laurens.rietveld@gmail.com",url:"http://laurensrietveld.nl"}],name:"yasgui-utils",repository:{type:"git",url:"git://github.com/YASGUI/Utils.git"},version:"1.6.7"}},function(e,t,r){"use strict";var n=r(20);n.deparam=function(e,t){var r={},i={true:!0,false:!1,null:null};return n.each(e.replace(/\+/g," ").split("&"),function(e,o){var a,s=o.split("="),l=decodeURIComponent(s[0]),u=r,c=0,p=l.split("]["),d=p.length-1;if(/\[/.test(p[0])&&/\]$/.test(p[d])?(p[d]=p[d].replace(/\]$/,""),p=p.shift().split("[").concat(p),d=p.length-1):d=0,2===s.length)if(a=decodeURIComponent(s[1]),t&&(a=a&&!isNaN(a)?+a:"undefined"===a?void 0:void 0!==i[a]?i[a]:a),d)for(;c<=d;c++)l=""===p[c]?u.length:p[c],u=u[l]=c<d?u[l]||(p[c+1]&&isNaN(p[c+1])?{}:[]):a;else n.isArray(r[l])?r[l].push(a):void 0!==r[l]?r[l]=[r[l],a]:r[l]=a;else l&&(r[l]=t?void 0:"")}),r}},function(e,t,r){!function(e){e(r(23),r(244))}(function(e){"use strict";function t(e){this.options=e,this.from=this.to=0}function r(e){return!0===e&&(e={}),null==e.gutter&&(e.gutter="CodeMirror-foldgutter"),null==e.indicatorOpen&&(e.indicatorOpen="CodeMirror-foldgutter-open"),null==e.indicatorFolded&&(e.indicatorFolded="CodeMirror-foldgutter-folded"),e}function n(e,t){for(var r=e.findMarks(p(t,0),p(t+1,0)),n=0;n<r.length;++n)if(r[n].__isFold&&r[n].find().from.line==t)return r[n]}function i(e){if("string"==typeof e){var t=document.createElement("div");return t.className=e+" CodeMirror-guttermarker-subtle",t}return e.cloneNode(!0)}function o(e,t,r){var o=e.state.foldGutter.options,a=t,s=e.foldOption(o,"minFoldSize"),l=e.foldOption(o,"rangeFinder");e.eachLine(t,r,function(t){var r=null;if(n(e,a))r=i(o.indicatorFolded);else{var u=p(a,0),c=l&&l(e,u);c&&c.to.line-c.from.line>=s&&(r=i(o.indicatorOpen))}e.setGutterMarker(t,o.gutter,r),++a})}function a(e){var t=e.getViewport(),r=e.state.foldGutter;r&&(e.operation(function(){o(e,t.from,t.to)}),r.from=t.from,r.to=t.to)}function s(e,t,r){var i=e.state.foldGutter;if(i){var o=i.options;if(r==o.gutter){var a=n(e,t);a?a.clear():e.foldCode(p(t,0),o.rangeFinder)}}}function l(e){var t=e.state.foldGutter;if(t){var r=t.options;t.from=t.to=0,clearTimeout(t.changeUpdate),t.changeUpdate=setTimeout(function(){a(e)},r.foldOnChangeTimeSpan||600)}}function u(e){var t=e.state.foldGutter;if(t){var r=t.options;clearTimeout(t.changeUpdate),t.changeUpdate=setTimeout(function(){var r=e.getViewport();t.from==t.to||r.from-t.to>20||t.from-r.to>20?a(e):e.operation(function(){r.from<t.from&&(o(e,r.from,t.from),t.from=r.from),r.to>t.to&&(o(e,t.to,r.to),t.to=r.to)})},r.updateViewportTimeSpan||400)}}function c(e,t){var r=e.state.foldGutter;if(r){var n=t.line;n>=r.from&&n<r.to&&o(e,n,n+1)}}e.defineOption("foldGutter",!1,function(n,i,o){o&&o!=e.Init&&(n.clearGutter(n.state.foldGutter.options.gutter),n.state.foldGutter=null,n.off("gutterClick",s),n.off("change",l),n.off("viewportChange",u),n.off("fold",c),n.off("unfold",c),n.off("swapDoc",l)),i&&(n.state.foldGutter=new t(r(i)),a(n),n.on("gutterClick",s),n.on("change",l),n.on("viewportChange",u),n.on("fold",c),n.on("unfold",c),n.on("swapDoc",l))});var p=e.Pos})},function(e,t,r){!function(e){e(r(23))}(function(e){"use strict";function t(e,t){return e.line-t.line||e.ch-t.ch}function r(e,t,r,n){this.line=t,this.ch=r,this.cm=e,this.text=e.getLine(t),this.min=n?n.from:e.firstLine(),this.max=n?n.to-1:e.lastLine()}function n(e,t){var r=e.cm.getTokenTypeAt(d(e.line,t));return r&&/\btag\b/.test(r)}function i(e){if(!(e.line>=e.max))return e.ch=0,e.text=e.cm.getLine(++e.line),!0}function o(e){if(!(e.line<=e.min))return e.text=e.cm.getLine(--e.line),e.ch=e.text.length,!0}function a(e){for(;;){var t=e.text.indexOf(">",e.ch);if(-1==t){if(i(e))continue;return}{if(n(e,t+1)){var r=e.text.lastIndexOf("/",t),o=r>-1&&!/\S/.test(e.text.slice(r+1,t));return e.ch=t+1,o?"selfClose":"regular"}e.ch=t+1}}}function s(e){for(;;){var t=e.ch?e.text.lastIndexOf("<",e.ch-1):-1;if(-1==t){if(o(e))continue;return}if(n(e,t+1)){h.lastIndex=t,e.ch=t;var r=h.exec(e.text);if(r&&r.index==t)return r}else e.ch=t}}function l(e){for(;;){h.lastIndex=e.ch;var t=h.exec(e.text);if(!t){if(i(e))continue;return}{if(n(e,t.index+1))return e.ch=t.index+t[0].length,t;e.ch=t.index+1}}}function u(e){for(;;){var t=e.ch?e.text.lastIndexOf(">",e.ch-1):-1;if(-1==t){if(o(e))continue;return}{if(n(e,t+1)){var r=e.text.lastIndexOf("/",t),i=r>-1&&!/\S/.test(e.text.slice(r+1,t));return e.ch=t+1,i?"selfClose":"regular"}e.ch=t}}}function c(e,t){for(var r=[];;){var n,i=l(e),o=e.line,s=e.ch-(i?i[0].length:0);if(!i||!(n=a(e)))return;if("selfClose"!=n)if(i[1]){for(var u=r.length-1;u>=0;--u)if(r[u]==i[2]){r.length=u;break}if(u<0&&(!t||t==i[2]))return{tag:i[2],from:d(o,s),to:d(e.line,e.ch)}}else r.push(i[2])}}function p(e,t){for(var r=[];;){var n=u(e);if(!n)return;if("selfClose"!=n){var i=e.line,o=e.ch,a=s(e);if(!a)return;if(a[1])r.push(a[2]);else{for(var l=r.length-1;l>=0;--l)if(r[l]==a[2]){r.length=l;break}if(l<0&&(!t||t==a[2]))return{tag:a[2],from:d(e.line,e.ch),to:d(i,o)}}}else s(e)}}var d=e.Pos,f="A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",h=new RegExp("<(/?)(["+f+"][A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*)","g");e.registerHelper("fold","xml",function(e,t){for(var n=new r(e,t.line,0);;){var i,o=l(n);if(!o||n.line!=t.line||!(i=a(n)))return;if(!o[1]&&"selfClose"!=i){var s=d(n.line,n.ch),u=c(n,o[2]);return u&&{from:s,to:u.from}}}}),e.findMatchingTag=function(e,n,i){var o=new r(e,n.line,n.ch,i);if(-1!=o.text.indexOf(">")||-1!=o.text.indexOf("<")){var l=a(o),u=l&&d(o.line,o.ch),f=l&&s(o);if(l&&f&&!(t(o,n)>0)){var h={from:d(o.line,o.ch),to:u,tag:f[2]};return"selfClose"==l?{open:h,close:null,at:"open"}:f[1]?{open:p(o,f[2]),close:h,at:"close"}:(o=new r(e,u.line,u.ch,i),{open:h,close:c(o,f[2]),at:"open"})}}},e.findEnclosingTag=function(e,t,n){for(var i=new r(e,t.line,t.ch,n);;){var o=p(i);if(!o)break;var a=new r(e,t.line,t.ch,n),s=c(a,o.tag);if(s)return{open:o,close:s}}},e.scanForClosingTag=function(e,t,n,i){return c(new r(e,t.line,t.ch,i?{from:0,to:i}:null),n)}})},function(e,t,r){!function(e){e(r(23))}(function(e){"use strict";e.registerHelper("fold","brace",function(t,r){function n(n){for(var s=r.ch,l=0;;){var u=s<=0?-1:a.lastIndexOf(n,s-1);if(-1!=u){if(1==l&&u<r.ch)break;if(i=t.getTokenTypeAt(e.Pos(o,u+1)),!/^(comment|string)/.test(i))return u+1;s=u-1}else{if(1==l)break;l=1,s=a.length}}}var i,o=r.line,a=t.getLine(o),s="{",l="}",u=n("{");if(null==u&&(s="[",l="]",u=n("[")),null!=u){var c,p,d=1,f=t.lastLine();e:for(var h=o;h<=f;++h)for(var g=t.getLine(h),v=h==o?u:0;;){var m=g.indexOf(s,v),y=g.indexOf(l,v);if(m<0&&(m=g.length),y<0&&(y=g.length),(v=Math.min(m,y))==g.length)break;if(t.getTokenTypeAt(e.Pos(h,v+1))==i)if(v==m)++d;else if(!--d){c=h,p=v;break e}++v}if(null!=c&&(o!=c||p!=u))return{from:e.Pos(o,u),to:e.Pos(c,p)}}}),e.registerHelper("fold","import",function(t,r){function n(r){if(r<t.firstLine()||r>t.lastLine())return null;var n=t.getTokenAt(e.Pos(r,1));if(/\S/.test(n.string)||(n=t.getTokenAt(e.Pos(r,n.end+1))),"keyword"!=n.type||"import"!=n.string)return null;for(var i=r,o=Math.min(t.lastLine(),r+10);i<=o;++i){var a=t.getLine(i),s=a.indexOf(";");if(-1!=s)return{startCh:n.end,end:e.Pos(i,s)}}}var i,o=r.line,a=n(o);if(!a||n(o-1)||(i=n(o-2))&&i.end.line==o-1)return null;for(var s=a.end;;){var l=n(s.line+1);if(null==l)break;s=l.end}return{from:t.clipPos(e.Pos(o,a.startCh+1)),to:s}}),e.registerHelper("fold","include",function(t,r){function n(r){if(r<t.firstLine()||r>t.lastLine())return null;var n=t.getTokenAt(e.Pos(r,1));return/\S/.test(n.string)||(n=t.getTokenAt(e.Pos(r,n.end+1))),"meta"==n.type&&"#include"==n.string.slice(0,8)?n.start+8:void 0}var i=r.line,o=n(i);if(null==o||null!=n(i-1))return null;for(var a=i;;){if(null==n(a+1))break;++a}return{from:e.Pos(i,o+1),to:t.clipPos(e.Pos(a))}})})},function(e,t,r){!function(e){e(r(23))}(function(e){"use strict";function t(e,t){this.cm=e,this.options=t,this.widget=null,this.debounce=0,this.tick=0,this.startPos=this.cm.getCursor("start"),this.startLen=this.cm.getLine(this.startPos.line).length-this.cm.getSelection().length;var r=this;e.on("cursorActivity",this.activityFunc=function(){r.cursorActivity()})}function r(t,r){return e.cmpPos(r.from,t.from)>0&&t.to.ch-t.from.ch!=r.to.ch-r.from.ch}function n(e,t,r){var n=e.options.hintOptions,i={};for(var o in g)i[o]=g[o];if(n)for(var o in n)void 0!==n[o]&&(i[o]=n[o]);if(r)for(var o in r)void 0!==r[o]&&(i[o]=r[o]);return i.hint.resolve&&(i.hint=i.hint.resolve(e,t)),i}function i(e){return"string"==typeof e?e:e.text}function o(e,t){function r(e,r){var i;i="string"!=typeof r?function(e){return r(e,t)}:n.hasOwnProperty(r)?n[r]:r,o[e]=i}var n={Up:function(){t.moveFocus(-1)},Down:function(){t.moveFocus(1)},PageUp:function(){t.moveFocus(1-t.menuSize(),!0)},PageDown:function(){t.moveFocus(t.menuSize()-1,!0)},Home:function(){t.setFocus(0)},End:function(){t.setFocus(t.length-1)},Enter:t.pick,Tab:t.pick,Esc:t.close},i=e.options.customKeys,o=i?{}:n;if(i)for(var a in i)i.hasOwnProperty(a)&&r(a,i[a]);var s=e.options.extraKeys;if(s)for(var a in s)s.hasOwnProperty(a)&&r(a,s[a]);return o}function a(e,t){for(;t&&t!=e;){if("LI"===t.nodeName.toUpperCase()&&t.parentNode==e)return t;t=t.parentNode}}function s(t,r){this.completion=t,this.data=r,this.picked=!1;var n=this,s=t.cm,l=this.hints=document.createElement("ul");l.className="CodeMirror-hints",this.selectedHint=r.selectedHint||0;for(var u=r.list,c=0;c<u.length;++c){var f=l.appendChild(document.createElement("li")),h=u[c],g=p+(c!=this.selectedHint?"":" "+d);null!=h.className&&(g=h.className+" "+g),f.className=g,h.render?h.render(f,r,h):f.appendChild(document.createTextNode(h.displayText||i(h))),f.hintId=c}var v=s.cursorCoords(t.options.alignWithWord?r.from:null),m=v.left,y=v.bottom,b=!0;l.style.left=m+"px",l.style.top=y+"px";var E=window.innerWidth||Math.max(document.body.offsetWidth,document.documentElement.offsetWidth),x=window.innerHeight||Math.max(document.body.offsetHeight,document.documentElement.offsetHeight);(t.options.container||document.body).appendChild(l);var S=l.getBoundingClientRect(),C=S.bottom-x,w=l.scrollHeight>l.clientHeight+1,T=s.getScrollInfo();if(C>0){var A=S.bottom-S.top;if(v.top-(v.bottom-S.top)-A>0)l.style.top=(y=v.top-A)+"px",b=!1;else if(A>x){l.style.height=x-5+"px",l.style.top=(y=v.bottom-S.top)+"px";var I=s.getCursor();r.from.ch!=I.ch&&(v=s.cursorCoords(I),l.style.left=(m=v.left)+"px",S=l.getBoundingClientRect())}}var L=S.right-E;if(L>0&&(S.right-S.left>E&&(l.style.width=E-5+"px",L-=S.right-S.left-E),l.style.left=(m=v.left-L)+"px"),w)for(var N=l.firstChild;N;N=N.nextSibling)N.style.paddingRight=s.display.nativeBarWidth+"px";if(s.addKeyMap(this.keyMap=o(t,{moveFocus:function(e,t){n.changeActive(n.selectedHint+e,t)},setFocus:function(e){n.changeActive(e)},menuSize:function(){return n.screenAmount()},length:u.length,close:function(){t.close()},pick:function(){n.pick()},data:r})),t.options.closeOnUnfocus){var R;s.on("blur",this.onBlur=function(){R=setTimeout(function(){t.close()},100)}),s.on("focus",this.onFocus=function(){clearTimeout(R)})}return s.on("scroll",this.onScroll=function(){var e=s.getScrollInfo(),r=s.getWrapperElement().getBoundingClientRect(),n=y+T.top-e.top,i=n-(window.pageYOffset||(document.documentElement||document.body).scrollTop);if(b||(i+=l.offsetHeight),i<=r.top||i>=r.bottom)return t.close();l.style.top=n+"px",l.style.left=m+T.left-e.left+"px"}),e.on(l,"dblclick",function(e){var t=a(l,e.target||e.srcElement);t&&null!=t.hintId&&(n.changeActive(t.hintId),n.pick())}),e.on(l,"click",function(e){var r=a(l,e.target||e.srcElement);r&&null!=r.hintId&&(n.changeActive(r.hintId),t.options.completeOnSingleClick&&n.pick())}),e.on(l,"mousedown",function(){setTimeout(function(){s.focus()},20)}),e.signal(r,"select",u[0],l.firstChild),!0}function l(e,t){if(!e.somethingSelected())return t;for(var r=[],n=0;n<t.length;n++)t[n].supportsSelection&&r.push(t[n]);return r}function u(e,t,r,n){if(e.async)e(t,n,r);else{var i=e(t,r);i&&i.then?i.then(n):n(i)}}function c(t,r){var n,i=t.getHelpers(r,"hint");if(i.length){var o=function(e,t,r){function n(i){if(i==o.length)return t(null);u(o[i],e,r,function(e){e&&e.list.length>0?t(e):n(i+1)})}var o=l(e,i);n(0)};return o.async=!0,o.supportsSelection=!0,o}return(n=t.getHelper(t.getCursor(),"hintWords"))?function(t){return e.hint.fromList(t,{words:n})}:e.hint.anyword?function(t,r){return e.hint.anyword(t,r)}:function(){}}var p="CodeMirror-hint",d="CodeMirror-hint-active";e.showHint=function(e,t,r){if(!t)return e.showHint(r);r&&r.async&&(t.async=!0);var n={hint:t};if(r)for(var i in r)n[i]=r[i];return e.showHint(n)},e.defineExtension("showHint",function(r){r=n(this,this.getCursor("start"),r);var i=this.listSelections();if(!(i.length>1)){if(this.somethingSelected()){if(!r.hint.supportsSelection)return;for(var o=0;o<i.length;o++)if(i[o].head.line!=i[o].anchor.line)return}this.state.completionActive&&this.state.completionActive.close();var a=this.state.completionActive=new t(this,r);a.options.hint&&(e.signal(this,"startCompletion",this),a.update(!0))}});var f=window.requestAnimationFrame||function(e){return setTimeout(e,1e3/60)},h=window.cancelAnimationFrame||clearTimeout;t.prototype={close:function(){this.active()&&(this.cm.state.completionActive=null,this.tick=null,this.cm.off("cursorActivity",this.activityFunc),this.widget&&this.data&&e.signal(this.data,"close"),this.widget&&this.widget.close(),e.signal(this.cm,"endCompletion",this.cm))},active:function(){return this.cm.state.completionActive==this},pick:function(t,r){var n=t.list[r];n.hint?n.hint(this.cm,t,n):this.cm.replaceRange(i(n),n.from||t.from,n.to||t.to,"complete"),e.signal(t,"pick",n),this.close()},cursorActivity:function(){this.debounce&&(h(this.debounce),this.debounce=0);var e=this.cm.getCursor(),t=this.cm.getLine(e.line);if(e.line!=this.startPos.line||t.length-e.ch!=this.startLen-this.startPos.ch||e.ch<this.startPos.ch||this.cm.somethingSelected()||e.ch&&this.options.closeCharacters.test(t.charAt(e.ch-1)))this.close();else{var r=this;this.debounce=f(function(){r.update()}),this.widget&&this.widget.disable()}},update:function(e){if(null!=this.tick){var t=this,r=++this.tick;u(this.options.hint,this.cm,this.options,function(n){t.tick==r&&t.finishUpdate(n,e)})}},finishUpdate:function(t,n){this.data&&e.signal(this.data,"update");var i=this.widget&&this.widget.picked||n&&this.options.completeSingle;this.widget&&this.widget.close(),t&&this.data&&r(this.data,t)||(this.data=t,t&&t.list.length&&(i&&1==t.list.length?this.pick(t,0):(this.widget=new s(this,t),e.signal(t,"shown"))))}},s.prototype={close:function(){if(this.completion.widget==this){this.completion.widget=null,this.hints.parentNode.removeChild(this.hints),this.completion.cm.removeKeyMap(this.keyMap);var e=this.completion.cm;this.completion.options.closeOnUnfocus&&(e.off("blur",this.onBlur),e.off("focus",this.onFocus)),e.off("scroll",this.onScroll)}},disable:function(){this.completion.cm.removeKeyMap(this.keyMap);var e=this;this.keyMap={Enter:function(){e.picked=!0}},this.completion.cm.addKeyMap(this.keyMap)},pick:function(){this.completion.pick(this.data,this.selectedHint)},changeActive:function(t,r){if(t>=this.data.list.length?t=r?this.data.list.length-1:0:t<0&&(t=r?0:this.data.list.length-1),this.selectedHint!=t){var n=this.hints.childNodes[this.selectedHint];n.className=n.className.replace(" "+d,""),n=this.hints.childNodes[this.selectedHint=t],n.className+=" "+d,n.offsetTop<this.hints.scrollTop?this.hints.scrollTop=n.offsetTop-3:n.offsetTop+n.offsetHeight>this.hints.scrollTop+this.hints.clientHeight&&(this.hints.scrollTop=n.offsetTop+n.offsetHeight-this.hints.clientHeight+3),e.signal(this.data,"select",this.data.list[this.selectedHint],n)}},screenAmount:function(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1}},e.registerHelper("hint","auto",{resolve:c}),e.registerHelper("hint","fromList",function(t,r){var n=t.getCursor(),i=t.getTokenAt(n),o=e.Pos(n.line,i.end);if(i.string&&/\w/.test(i.string[i.string.length-1]))var a=i.string,s=e.Pos(n.line,i.start);else var a="",s=o;for(var l=[],u=0;u<r.words.length;u++){var c=r.words[u];c.slice(0,a.length)==a&&l.push(c)}if(l.length)return{list:l,from:s,to:o}}),e.commands.autocomplete=e.showHint;var g={hint:e.hint.auto,completeSingle:!0,alignWithWord:!0,closeCharacters:/[\s()\[\]{};:>,]/,closeOnUnfocus:!0,completeOnSingleClick:!0,container:null,customKeys:null,extraKeys:null};e.defineOption("hintOptions",null)})},function(e,t,r){!function(e){e(r(23))}(function(e){"use strict";function t(e,t,i,o){if(this.atOccurrence=!1,this.doc=e,null==o&&"string"==typeof t&&(o=!1),i=i?e.clipPos(i):n(0,0),this.pos={from:i,to:i},"string"!=typeof t)t.global||(t=new RegExp(t.source,t.ignoreCase?"ig":"g")),this.matches=function(r,i){if(r){t.lastIndex=0;for(var o,a,s=e.getLine(i.line).slice(0,i.ch),l=0;;){t.lastIndex=l;var u=t.exec(s);if(!u)break;if(o=u,a=o.index,(l=o.index+(o[0].length||1))==s.length)break}var c=o&&o[0].length||0;c||(0==a&&0==s.length?o=void 0:a!=e.getLine(i.line).length&&c++)}else{t.lastIndex=i.ch;var s=e.getLine(i.line),o=t.exec(s),c=o&&o[0].length||0,a=o&&o.index;a+c==s.length||c||(c=1)}if(o&&c)return{from:n(i.line,a),to:n(i.line,a+c),match:o}};else{var a=t;o&&(t=t.toLowerCase());var s=o?function(e){return e.toLowerCase()}:function(e){return e},l=t.split("\n");if(1==l.length)t.length?this.matches=function(i,o){if(i){var l=e.getLine(o.line).slice(0,o.ch),u=s(l),c=u.lastIndexOf(t);if(c>-1)return c=r(l,u,c),{from:n(o.line,c),to:n(o.line,c+a.length)}}else{var l=e.getLine(o.line).slice(o.ch),u=s(l),c=u.indexOf(t);if(c>-1)return c=r(l,u,c)+o.ch,{from:n(o.line,c),to:n(o.line,c+a.length)}}}:this.matches=function(){};else{var u=a.split("\n");this.matches=function(t,r){var i=l.length-1;if(t){if(r.line-(l.length-1)<e.firstLine())return;if(s(e.getLine(r.line).slice(0,u[i].length))!=l[l.length-1])return;for(var o=n(r.line,u[i].length),a=r.line-1,c=i-1;c>=1;--c,--a)if(l[c]!=s(e.getLine(a)))return;var p=e.getLine(a),d=p.length-u[0].length;if(s(p.slice(d))!=l[0])return;return{from:n(a,d),to:o}}if(!(r.line+(l.length-1)>e.lastLine())){var p=e.getLine(r.line),d=p.length-u[0].length;if(s(p.slice(d))==l[0]){for(var f=n(r.line,d),a=r.line+1,c=1;c<i;++c,++a)if(l[c]!=s(e.getLine(a)))return;if(s(e.getLine(a).slice(0,u[i].length))==l[i])return{from:f,to:n(a,u[i].length)}}}}}}}function r(e,t,r){if(e.length==t.length)return r;for(var n=Math.min(r,e.length);;){var i=e.slice(0,n).toLowerCase().length;if(i<r)++n;else{if(!(i>r))return n;--n}}}var n=e.Pos;t.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(e){function t(e){var t=n(e,0);return r.pos={from:t,to:t},r.atOccurrence=!1,!1}for(var r=this,i=this.doc.clipPos(e?this.pos.from:this.pos.to);;){if(this.pos=this.matches(e,i))return this.atOccurrence=!0,this.pos.match||!0;if(e){if(!i.line)return t(0);i=n(i.line-1,this.doc.getLine(i.line-1).length)}else{var o=this.doc.lineCount();if(i.line==o-1)return t(o);i=n(i.line+1,0)}}},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(t,r){if(this.atOccurrence){var i=e.splitLines(t);this.doc.replaceRange(i,this.pos.from,this.pos.to,r),this.pos.to=n(this.pos.from.line+i.length-1,i[i.length-1].length+(1==i.length?this.pos.from.ch:0))}}},e.defineExtension("getSearchCursor",function(e,r,n){return new t(this.doc,e,r,n)}),e.defineDocExtension("getSearchCursor",function(e,r,n){return new t(this,e,r,n)}),e.defineExtension("selectMatches",function(t,r){for(var n=[],i=this.getSearchCursor(t,this.getCursor("from"),r);i.findNext()&&!(e.cmpPos(i.to(),this.getCursor("to"))>0);)n.push({anchor:i.from(),head:i.to()});n.length&&this.setSelections(n,0)})})},function(e,t,r){!function(e){e(r(23))}(function(e){function t(e,t,n,i){var o=e.getLineHandle(t.line),l=t.ch-1,u=l>=0&&s[o.text.charAt(l)]||s[o.text.charAt(++l)];if(!u)return null;var c=">"==u.charAt(1)?1:-1;if(n&&c>0!=(l==t.ch))return null;var p=e.getTokenTypeAt(a(t.line,l+1)),d=r(e,a(t.line,l+(c>0?1:0)),c,p||null,i);return null==d?null:{from:a(t.line,l),to:d&&d.pos,match:d&&d.ch==u.charAt(0),forward:c>0}}function r(e,t,r,n,i){for(var o=i&&i.maxScanLineLength||1e4,l=i&&i.maxScanLines||1e3,u=[],c=i&&i.bracketRegex?i.bracketRegex:/[(){}[\]]/,p=r>0?Math.min(t.line+l,e.lastLine()+1):Math.max(e.firstLine()-1,t.line-l),d=t.line;d!=p;d+=r){var f=e.getLine(d);if(f){var h=r>0?0:f.length-1,g=r>0?f.length:-1;if(!(f.length>o))for(d==t.line&&(h=t.ch-(r<0?1:0));h!=g;h+=r){var v=f.charAt(h);if(c.test(v)&&(void 0===n||e.getTokenTypeAt(a(d,h+1))==n)){var m=s[v];if(">"==m.charAt(1)==r>0)u.push(v);else{if(!u.length)return{pos:a(d,h),ch:v};u.pop()}}}}}return d-r!=(r>0?e.lastLine():e.firstLine())&&null}function n(e,r,n){for(var i=e.state.matchBrackets.maxHighlightLineLength||1e3,s=[],l=e.listSelections(),u=0;u<l.length;u++){var c=l[u].empty()&&t(e,l[u].head,!1,n);if(c&&e.getLine(c.from.line).length<=i){var p=c.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";s.push(e.markText(c.from,a(c.from.line,c.from.ch+1),{className:p})),c.to&&e.getLine(c.to.line).length<=i&&s.push(e.markText(c.to,a(c.to.line,c.to.ch+1),{className:p}))}}if(s.length){o&&e.state.focused&&e.focus();var d=function(){e.operation(function(){for(var e=0;e<s.length;e++)s[e].clear()})};if(!r)return d;setTimeout(d,800)}}function i(e){e.operation(function(){l&&(l(),l=null),l=n(e,!1,e.state.matchBrackets)})}var o=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<8),a=e.Pos,s={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},l=null;e.defineOption("matchBrackets",!1,function(t,r,n){n&&n!=e.Init&&t.off("cursorActivity",i),r&&(t.state.matchBrackets="object"==typeof r?r:{},t.on("cursorActivity",i))}),e.defineExtension("matchBrackets",function(){n(this,!0)}),e.defineExtension("findMatchingBracket",function(e,r,n){return t(this,e,r,n)}),e.defineExtension("scanForBracket",function(e,t,n,i){return r(this,e,t,n,i)})})},function(e,t,r){!function(e){e(r(23))}(function(e){"use strict";e.runMode=function(t,r,n,i){var o=e.getMode(e.defaults,r),a=/MSIE \d/.test(navigator.userAgent),s=a&&(null==document.documentMode||document.documentMode<9);if(n.appendChild){var l=i&&i.tabSize||e.defaults.tabSize,u=n,c=0;u.innerHTML="",n=function(e,t){if("\n"==e)return u.appendChild(document.createTextNode(s?"\r":e)),void(c=0);for(var r="",n=0;;){var i=e.indexOf("\t",n);if(-1==i){r+=e.slice(n),c+=e.length-n;break}c+=i-n,r+=e.slice(n,i);var o=l-c%l;c+=o;for(var a=0;a<o;++a)r+=" ";n=i+1}if(t){var p=u.appendChild(document.createElement("span"));p.className="cm-"+t.replace(/ +/g," cm-"),p.appendChild(document.createTextNode(r))}else u.appendChild(document.createTextNode(r))}}for(var p=e.splitLines(t),d=i&&i.state||e.startState(o),f=0,h=p.length;f<h;++f){f&&n("\n");var g=new e.StringStream(p[f]);for(!g.string&&o.blankLine&&o.blankLine(d);!g.eol();){var v=o.token(g,d);n(g.current(),v,f,g.start,d),g.start=g.pos}}}})},function(e,t,r){!function(e){e(r(23))}(function(e){"use strict";function t(e){var t=e.getWrapperElement();e.state.fullScreenRestore={scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,width:t.style.width,height:t.style.height},t.style.width="",t.style.height="auto",t.className+=" CodeMirror-fullscreen",document.documentElement.style.overflow="hidden",e.refresh()}function r(e){var t=e.getWrapperElement();t.className=t.className.replace(/\s*CodeMirror-fullscreen\b/,""),document.documentElement.style.overflow="";var r=e.state.fullScreenRestore;t.style.width=r.width,t.style.height=r.height,window.scrollTo(r.scrollLeft,r.scrollTop),e.refresh()}e.defineOption("fullScreen",!1,function(n,i,o){o==e.Init&&(o=!1),!o!=!i&&(i?t(n):r(n))})})},function(e,t,r){"use strict";var n=r(23);n.defineMode("sparql11",function(e,t){function n(e){var t=[],r=s[e];if(void 0!=r)for(var n in r)t.push(n.toString());else t.push(e);return t}function i(e,t){function r(){var r=e.column();t.errorStartPos=r,t.errorEndPos=r+i.text.length}0==e.pos&&(t.possibleCurrent=t.possibleNext);var i=function(){var r=null;if(t.inLiteral){var n=!1;if(r=e.match(y[t.inLiteral].contents.regex,!0,!1),r&&0==r[0].length&&(r=e.match(y[t.inLiteral].closing.regex,!0,!1),n=!0),r&&r[0].length>0){var i={quotePos:n?"end":"content",cat:v[t.inLiteral].CAT,style:y[t.inLiteral].complete.style,text:r[0],start:e.start};return n&&(t.inLiteral=!1),i}}for(var o in y)if(r=e.match(y[o].quotes.regex,!0,!1)){var s;return t.inLiteral?(t.inLiteral=!1,s="end"):(t.inLiteral=o,s="start"),{cat:v[o].CAT,style:y[o].quotes.style,text:r[0],quotePos:s,start:e.start}}for(var l=0;l<x.length;++l)if(r=e.match(x[l].regex,!0,!1))return{cat:x[l].name,style:x[l].style,text:r[0],start:e.start};return(r=e.match(a.keywords,!0,!1))?{cat:e.current().toUpperCase(),style:"keyword",text:r[0],start:e.start}:(r=e.match(a.punct,!0,!1))?{cat:e.current(),style:"punc",text:r[0],start:e.start}:(r=e.match(/^.[A-Za-z0-9]*/,!0,!1),{cat:"<invalid_token>",style:"error",text:r[0],start:e.start})}();if("<invalid_token>"==i.cat)return 1==t.OK&&(t.OK=!1,r()),t.complete=!1,i.style;if("WS"==i.cat||"COMMENT"==i.cat||i.quotePos&&"end"!=i.quotePos)return t.possibleCurrent=t.possibleNext,i.style;var o,l=!1,u=i.cat;if(!i.quotePos||"end"==i.quotePos)for(;t.stack.length>0&&u&&t.OK&&!l;)if(o=t.stack.pop(),s[o]){var c=s[o][u];if(void 0!=c&&function(e){return(t.allowVars||"var"!=e)&&(t.allowBnodes||"blankNode"!=e&&"blankNodePropertyList"!=e&&"blankNodePropertyListPath"!=e)}(o)){for(var p=c.length-1;p>=0;--p)t.stack.push(c[p]);!function(e){switch(t.inPrefixDecl="prefixDecl"===e,e){case"disallowVars":t.allowVars=!1;break;case"allowVars":t.allowVars=!0;break;case"disallowBnodes":t.allowBnodes=!1;break;case"allowBnodes":t.allowBnodes=!0;break;case"storeProperty":t.storeProperty=!0}}(o)}else t.OK=!1,t.complete=!1,r(),t.stack.push(o)}else if(o==u){t.inPrefixDecl&&("PNAME_NS"===o&&i.text.length>0?t.currentPnameNs=i.text.slice(0,-1):void 0!==t.currentPnameNs&&i.text.length>2&&(t.prefixes[t.currentPnameNs]=i.text.slice(1,-1),t.currentPnameNs=void 0)),l=!0,function(e){null==t.queryType&&("SELECT"!=e&&"CONSTRUCT"!=e&&"ASK"!=e&&"DESCRIBE"!=e&&"INSERT"!=e&&"DELETE"!=e&&"LOAD"!=e&&"CLEAR"!=e&&"CREATE"!=e&&"DROP"!=e&&"COPY"!=e&&"MOVE"!=e&&"ADD"!=e||(t.queryType=e))}(o);for(var d=!0,f=t.stack.length;f>0;--f){var h=s[t.stack[f-1]];h&&h.$||(d=!1)}if(t.complete=d,t.storeProperty&&"punc"!=u.cat&&(t.lastProperty=i.text,t.storeProperty=!1),!t.inPrefixDecl&&("PNAME_NS"===u||"PNAME_LN"===u)){var g=i.text.indexOf(":");if(g>=0){var m=i.text.slice(0,g);!t.prefixes[m]&&["bif","xsd","sql"].indexOf(m)<0&&(t.OK=!1,r(),t.errorMsg="Prefix '"+m+"' is not defined")}}}else t.OK=!1,t.complete=!1,r();return!l&&t.OK&&(t.OK=!1,t.complete=!1,r()),t.possibleCurrent.indexOf("a")>=0&&(t.lastPredicateOffset=i.start),t.possibleCurrent=t.possibleNext,t.possibleNext=n(t.stack[t.stack.length-1]),i.style}function o(t,r){if(t.inLiteral)return 0;if(t.stack.length&&"?[or([verbPath,verbSimple]),objectList]"==t.stack[t.stack.length-1])return t.lastPredicateOffset;var n=0,i=t.stack.length-1;if(/^[\}\]\)]/.test(r)){for(var o=r.substr(0,1);i>=0;--i)if(t.stack[i]==o){--i;break}}else{var a=S[t.stack[i]];a&&(n+=a,--i)}for(;i>=0;--i){var a=C[t.stack[i]];a&&(n+=a)}return n*e.indentUnit}var a=(e.indentUnit,r(570)),s=a.table,l="[0-9A-Fa-f]",u="(([A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD])(((([A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|_|-|[0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]))|\\.)*(([A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|_|-|[0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040])))?)?:",c="[eE][\\+-]?[0-9]+",p="(([0-9]+\\.[0-9]*)|(\\.[0-9]+))",d="(([0-9]+\\.[0-9]*"+c+")|(\\.[0-9]+"+c+")|([0-9]+"+c+"))",f="\\\\[tbnrf\\\\\"']",h=l+"{4}",g="(\\\\u"+h+"|\\\\U00(10|0"+l+")"+h+")",v={SINGLE:{CAT:"STRING_LITERAL_LONG1",QUOTES:"'''",CONTENTS:"(('|'')?([^'\\\\]|"+f+"|"+g+"))*"},DOUBLE:{CAT:"STRING_LITERAL_LONG2",QUOTES:'"""',CONTENTS:'(("|"")?([^"\\\\]|'+f+"|"+g+"))*"}};for(var m in v)v[m].COMPLETE=v[m].QUOTES+v[m].CONTENTS+v[m].QUOTES;var y={};for(var m in v)y[m]={complete:{name:"STRING_LITERAL_LONG_"+m,regex:new RegExp("^"+v[m].COMPLETE),style:"string"},contents:{name:"STRING_LITERAL_LONG_"+m,regex:new RegExp("^"+v[m].CONTENTS),style:"string"},closing:{name:"STRING_LITERAL_LONG_"+m,regex:new RegExp("^"+v[m].CONTENTS+v[m].QUOTES),style:"string"},quotes:{name:"STRING_LITERAL_LONG_QUOTES_"+m,regex:new RegExp("^"+v[m].QUOTES),style:"string"}};var b="[\\x20\\x09\\x0D\\x0A]",E="#([^\\n\\r]*[\\n\\r]|[^\\n\\r]*$)",x=[{name:"WS",regex:new RegExp("^"+b+"+"),style:"ws"},{name:"COMMENT",regex:new RegExp("^"+E),style:"comment"},{name:"IRI_REF",regex:new RegExp('^<[^<>"`|{}^\\\0- ]*>'),style:"variable-3"},{name:"VAR1",regex:new RegExp("^\\?([A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|_|[0-9])([A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|_|[0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040])*"),style:"atom"},{name:"VAR2",regex:new RegExp("^\\$([A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|_|[0-9])([A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|_|[0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040])*"),style:"atom"},{name:"LANGTAG",regex:new RegExp("^@[a-zA-Z]+(-[a-zA-Z0-9]+)*"),style:"meta"},{name:"DOUBLE",regex:new RegExp("^"+d),style:"number"},{name:"DECIMAL",regex:new RegExp("^"+p),style:"number"},{name:"INTEGER",regex:new RegExp("^[0-9]+"),style:"number"},{name:"DOUBLE_POSITIVE",regex:new RegExp("^\\+(([0-9]+\\.[0-9]*[eE][\\+-]?[0-9]+)|(\\.[0-9]+[eE][\\+-]?[0-9]+)|([0-9]+[eE][\\+-]?[0-9]+))"),style:"number"},{name:"DECIMAL_POSITIVE",regex:new RegExp("^\\+(([0-9]+\\.[0-9]*)|(\\.[0-9]+))"),style:"number"},{name:"INTEGER_POSITIVE",regex:new RegExp("^\\+[0-9]+"),style:"number"},{name:"DOUBLE_NEGATIVE",regex:new RegExp("^-(([0-9]+\\.[0-9]*[eE][\\+-]?[0-9]+)|(\\.[0-9]+[eE][\\+-]?[0-9]+)|([0-9]+[eE][\\+-]?[0-9]+))"),style:"number"},{name:"DECIMAL_NEGATIVE",regex:new RegExp("^-(([0-9]+\\.[0-9]*)|(\\.[0-9]+))"),style:"number"},{name:"INTEGER_NEGATIVE",regex:new RegExp("^-[0-9]+"),style:"number"},{name:"STRING_LITERAL1",regex:new RegExp("^'(([^\\x27\\x5C\\x0A\\x0D])|\\\\[tbnrf\\\\\"']|(\\\\u[0-9A-Fa-f]{4}|\\\\U00(10|0[0-9A-Fa-f])[0-9A-Fa-f]{4}))*'"),style:"string"},{name:"STRING_LITERAL2",regex:new RegExp('^"(([^\\x22\\x5C\\x0A\\x0D])|\\\\[tbnrf\\\\"\']|(\\\\u[0-9A-Fa-f]{4}|\\\\U00(10|0[0-9A-Fa-f])[0-9A-Fa-f]{4}))*"'),style:"string"},{name:"NIL",regex:new RegExp("^\\(([\\x20\\x09\\x0D\\x0A]|(#([^\\n\\r]*[\\n\\r]|[^\\n\\r]*$)))*\\)"),style:"punc"},{name:"ANON",regex:new RegExp("^\\[([\\x20\\x09\\x0D\\x0A]|(#([^\\n\\r]*[\\n\\r]|[^\\n\\r]*$)))*\\]"),style:"punc"},{name:"PNAME_LN",regex:new RegExp("^(([A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD])(((([A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|_|-|[0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]))|\\.)*(([A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|_|-|[0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040])))?)?:([A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|_|:|[0-9]|((%[0-9A-Fa-f][0-9A-Fa-f])|(\\\\[_~\\.\\-!\\$&'\\(\\)\\*\\+,;=/\\?#@%])))((([A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|_|-|[0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040])|\\.|:|((%[0-9A-Fa-f][0-9A-Fa-f])|(\\\\[_~\\.\\-!\\$&'\\(\\)\\*\\+,;=/\\?#@%])))*(([A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|_|-|[0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040])|:|((%[0-9A-Fa-f][0-9A-Fa-f])|(\\\\[_~\\.\\-!\\$&'\\(\\)\\*\\+,;=/\\?#@%]))))?"),style:"string-2"},{name:"PNAME_NS",regex:new RegExp("^"+u),style:"string-2"},{name:"BLANK_NODE_LABEL",regex:new RegExp("^_:([A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|_|[0-9])((([A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|_|-|[0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040])|\\.)*([A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|_|-|[0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]))?"),style:"string-2"}],S={"*[,, object]":3,"*[(,),object]":3,"*[(,),objectPath]":3,"*[/,pathEltOrInverse]":2,object:2,objectPath:2,objectList:2,objectListPath:2,storeProperty:2,pathMod:2,"?pathMod":2,propertyListNotEmpty:1,propertyList:1,propertyListPath:1,propertyListPathNotEmpty:1,"?[verb,objectList]":1},C={"}":1,"]":1,")":1,"{":-1,"(":-1,"[":-1};return{token:i,startState:function(t){return{tokenize:i,OK:!0,complete:a.acceptEmpty,errorStartPos:null,errorEndPos:null,queryType:null,possibleCurrent:n(a.startSymbol),possibleNext:n(a.startSymbol),allowVars:!0,allowBnodes:!0,storeProperty:!1,lastProperty:"",inLiteral:!1,stack:[a.startSymbol],lastPredicateOffset:e.indentUnit,prefixes:{}}},indent:o,electricChars:"}])"}}),n.defineMIME("application/x-sparql-query","sparql11")},function(e,t){e.exports={table:{"*[&&,valueLogical]":{"&&":["[&&,valueLogical]","*[&&,valueLogical]"],AS:[],")":[],",":[],"||":[],";":[]},"*[,,expression]":{",":["[,,expression]","*[,,expression]"],")":[]},"*[,,objectPath]":{",":["[,,objectPath]","*[,,objectPath]"],".":[],";":[],"]":[],"{":[],OPTIONAL:[],MINUS:[],GRAPH:[],SERVICE:[],FILTER:[],BIND:[],VALUES:[],"}":[]},"*[,,object]":{",":["[,,object]","*[,,object]"],".":[],";":[],"]":[],"}":[],GRAPH:[],"{":[],OPTIONAL:[],MINUS:[],SERVICE:[],FILTER:[],BIND:[],VALUES:[]},"*[/,pathEltOrInverse]":{"/":["[/,pathEltOrInverse]","*[/,pathEltOrInverse]"],"|":[],")":[],"(":[],"[":[],VAR1:[],VAR2:[],NIL:[],IRI_REF:[],TRUE:[],FALSE:[],BLANK_NODE_LABEL:[],ANON:[],PNAME_LN:[],PNAME_NS:[],STRING_LITERAL1:[],STRING_LITERAL2:[],STRING_LITERAL_LONG1:[],STRING_LITERAL_LONG2:[],INTEGER:[],DECIMAL:[],DOUBLE:[],INTEGER_POSITIVE:[],DECIMAL_POSITIVE:[],DOUBLE_POSITIVE:[],INTEGER_NEGATIVE:[],DECIMAL_NEGATIVE:[],DOUBLE_NEGATIVE:[]},"*[;,?[or([verbPath,verbSimple]),objectList]]":{";":["[;,?[or([verbPath,verbSimple]),objectList]]","*[;,?[or([verbPath,verbSimple]),objectList]]"],".":[],"]":[],"{":[],OPTIONAL:[],MINUS:[],GRAPH:[],SERVICE:[],FILTER:[],BIND:[],VALUES:[],"}":[]},"*[;,?[verb,objectList]]":{";":["[;,?[verb,objectList]]","*[;,?[verb,objectList]]"],".":[],"]":[],"}":[],GRAPH:[],"{":[],OPTIONAL:[],MINUS:[],SERVICE:[],FILTER:[],BIND:[],VALUES:[]},"*[UNION,groupGraphPattern]":{UNION:["[UNION,groupGraphPattern]","*[UNION,groupGraphPattern]"],VAR1:[],VAR2:[],NIL:[],"(":[],"[":[],IRI_REF:[],TRUE:[],FALSE:[],BLANK_NODE_LABEL:[],ANON:[],PNAME_LN:[],PNAME_NS:[],STRING_LITERAL1:[],STRING_LITERAL2:[],STRING_LITERAL_LONG1:[],STRING_LITERAL_LONG2:[],INTEGER:[],DECIMAL:[],DOUBLE:[],INTEGER_POSITIVE:[],DECIMAL_POSITIVE:[],DOUBLE_POSITIVE:[],INTEGER_NEGATIVE:[],DECIMAL_NEGATIVE:[],DOUBLE_NEGATIVE:[],".":[],"{":[],OPTIONAL:[],MINUS:[],GRAPH:[],SERVICE:[],FILTER:[],BIND:[],VALUES:[],"}":[]},"*[graphPatternNotTriples,?.,?triplesBlock]":{"{":["[graphPatternNotTriples,?.,?triplesBlock]","*[graphPatternNotTriples,?.,?triplesBlock]"],OPTIONAL:["[graphPatternNotTriples,?.,?triplesBlock]","*[graphPatternNotTriples,?.,?triplesBlock]"],MINUS:["[graphPatternNotTriples,?.,?triplesBlock]","*[graphPatternNotTriples,?.,?triplesBlock]"],GRAPH:["[graphPatternNotTriples,?.,?triplesBlock]","*[graphPatternNotTriples,?.,?triplesBlock]"],SERVICE:["[graphPatternNotTriples,?.,?triplesBlock]","*[graphPatternNotTriples,?.,?triplesBlock]"],FILTER:["[graphPatternNotTriples,?.,?triplesBlock]","*[graphPatternNotTriples,?.,?triplesBlock]"],BIND:["[graphPatternNotTriples,?.,?triplesBlock]","*[graphPatternNotTriples,?.,?triplesBlock]"],VALUES:["[graphPatternNotTriples,?.,?triplesBlock]","*[graphPatternNotTriples,?.,?triplesBlock]"],"}":[]},"*[quadsNotTriples,?.,?triplesTemplate]":{GRAPH:["[quadsNotTriples,?.,?triplesTemplate]","*[quadsNotTriples,?.,?triplesTemplate]"],"}":[]},"*[|,pathOneInPropertySet]":{"|":["[|,pathOneInPropertySet]","*[|,pathOneInPropertySet]"],")":[]},"*[|,pathSequence]":{"|":["[|,pathSequence]","*[|,pathSequence]"],")":[],"(":[],"[":[],VAR1:[],VAR2:[],NIL:[],IRI_REF:[],TRUE:[],FALSE:[],BLANK_NODE_LABEL:[],ANON:[],PNAME_LN:[],PNAME_NS:[],STRING_LITERAL1:[],STRING_LITERAL2:[],STRING_LITERAL_LONG1:[],STRING_LITERAL_LONG2:[],INTEGER:[],DECIMAL:[],DOUBLE:[],INTEGER_POSITIVE:[],DECIMAL_POSITIVE:[],DOUBLE_POSITIVE:[],INTEGER_NEGATIVE:[],DECIMAL_NEGATIVE:[],DOUBLE_NEGATIVE:[]},"*[||,conditionalAndExpression]":{"||":["[||,conditionalAndExpression]","*[||,conditionalAndExpression]"],AS:[],")":[],",":[],";":[]},"*dataBlockValue":{UNDEF:["dataBlockValue","*dataBlockValue"],IRI_REF:["dataBlockValue","*dataBlockValue"],TRUE:["dataBlockValue","*dataBlockValue"],FALSE:["dataBlockValue","*dataBlockValue"],PNAME_LN:["dataBlockValue","*dataBlockValue"],PNAME_NS:["dataBlockValue","*dataBlockValue"],STRING_LITERAL1:["dataBlockValue","*dataBlockValue"],STRING_LITERAL2:["dataBlockValue","*dataBlockValue"],STRING_LITERAL_LONG1:["dataBlockValue","*dataBlockValue"],STRING_LITERAL_LONG2:["dataBlockValue","*dataBlockValue"],INTEGER:["dataBlockValue","*dataBlockValue"],DECIMAL:["dataBlockValue","*dataBlockValue"],DOUBLE:["dataBlockValue","*dataBlockValue"],INTEGER_POSITIVE:["dataBlockValue","*dataBlockValue"],DECIMAL_POSITIVE:["dataBlockValue","*dataBlockValue"],DOUBLE_POSITIVE:["dataBlockValue","*dataBlockValue"],INTEGER_NEGATIVE:["dataBlockValue","*dataBlockValue"],DECIMAL_NEGATIVE:["dataBlockValue","*dataBlockValue"],DOUBLE_NEGATIVE:["dataBlockValue","*dataBlockValue"],"}":[],")":[]},"*datasetClause":{FROM:["datasetClause","*datasetClause"],WHERE:[],"{":[]},"*describeDatasetClause":{FROM:["describeDatasetClause","*describeDatasetClause"],ORDER:[],HAVING:[],GROUP:[],LIMIT:[],OFFSET:[],WHERE:[],"{":[],VALUES:[],$:[]},"*graphNode":{"(":["graphNode","*graphNode"],"[":["graphNode","*graphNode"],VAR1:["graphNode","*graphNode"],VAR2:["graphNode","*graphNode"],NIL:["graphNode","*graphNode"],IRI_REF:["graphNode","*graphNode"],TRUE:["graphNode","*graphNode"],FALSE:["graphNode","*graphNode"],BLANK_NODE_LABEL:["graphNode","*graphNode"],ANON:["graphNode","*graphNode"],PNAME_LN:["graphNode","*graphNode"],PNAME_NS:["graphNode","*graphNode"],STRING_LITERAL1:["graphNode","*graphNode"],STRING_LITERAL2:["graphNode","*graphNode"],STRING_LITERAL_LONG1:["graphNode","*graphNode"],STRING_LITERAL_LONG2:["graphNode","*graphNode"],INTEGER:["graphNode","*graphNode"],DECIMAL:["graphNode","*graphNode"],DOUBLE:["graphNode","*graphNode"],INTEGER_POSITIVE:["graphNode","*graphNode"],DECIMAL_POSITIVE:["graphNode","*graphNode"],DOUBLE_POSITIVE:["graphNode","*graphNode"],INTEGER_NEGATIVE:["graphNode","*graphNode"],DECIMAL_NEGATIVE:["graphNode","*graphNode"],DOUBLE_NEGATIVE:["graphNode","*graphNode"],")":[]},"*graphNodePath":{"(":["graphNodePath","*graphNodePath"],"[":["graphNodePath","*graphNodePath"],VAR1:["graphNodePath","*graphNodePath"],VAR2:["graphNodePath","*graphNodePath"],NIL:["graphNodePath","*graphNodePath"],IRI_REF:["graphNodePath","*graphNodePath"],TRUE:["graphNodePath","*graphNodePath"],FALSE:["graphNodePath","*graphNodePath"],BLANK_NODE_LABEL:["graphNodePath","*graphNodePath"],ANON:["graphNodePath","*graphNodePath"],PNAME_LN:["graphNodePath","*graphNodePath"],PNAME_NS:["graphNodePath","*graphNodePath"],STRING_LITERAL1:["graphNodePath","*graphNodePath"],STRING_LITERAL2:["graphNodePath","*graphNodePath"],STRING_LITERAL_LONG1:["graphNodePath","*graphNodePath"],STRING_LITERAL_LONG2:["graphNodePath","*graphNodePath"],INTEGER:["graphNodePath","*graphNodePath"],DECIMAL:["graphNodePath","*graphNodePath"],DOUBLE:["graphNodePath","*graphNodePath"],INTEGER_POSITIVE:["graphNodePath","*graphNodePath"],DECIMAL_POSITIVE:["graphNodePath","*graphNodePath"],DOUBLE_POSITIVE:["graphNodePath","*graphNodePath"],INTEGER_NEGATIVE:["graphNodePath","*graphNodePath"],DECIMAL_NEGATIVE:["graphNodePath","*graphNodePath"],DOUBLE_NEGATIVE:["graphNodePath","*graphNodePath"],")":[]},"*groupCondition":{"(":["groupCondition","*groupCondition"],STR:["groupCondition","*groupCondition"],LANG:["groupCondition","*groupCondition"],LANGMATCHES:["groupCondition","*groupCondition"],DATATYPE:["groupCondition","*groupCondition"],BOUND:["groupCondition","*groupCondition"],IRI:["groupCondition","*groupCondition"],URI:["groupCondition","*groupCondition"],BNODE:["groupCondition","*groupCondition"],RAND:["groupCondition","*groupCondition"],ABS:["groupCondition","*groupCondition"],CEIL:["groupCondition","*groupCondition"],FLOOR:["groupCondition","*groupCondition"],ROUND:["groupCondition","*groupCondition"],CONCAT:["groupCondition","*groupCondition"],STRLEN:["groupCondition","*groupCondition"],UCASE:["groupCondition","*groupCondition"],LCASE:["groupCondition","*groupCondition"],ENCODE_FOR_URI:["groupCondition","*groupCondition"],CONTAINS:["groupCondition","*groupCondition"],STRSTARTS:["groupCondition","*groupCondition"],STRENDS:["groupCondition","*groupCondition"],STRBEFORE:["groupCondition","*groupCondition"],STRAFTER:["groupCondition","*groupCondition"],YEAR:["groupCondition","*groupCondition"],MONTH:["groupCondition","*groupCondition"],DAY:["groupCondition","*groupCondition"],HOURS:["groupCondition","*groupCondition"],MINUTES:["groupCondition","*groupCondition"],SECONDS:["groupCondition","*groupCondition"],TIMEZONE:["groupCondition","*groupCondition"],TZ:["groupCondition","*groupCondition"],NOW:["groupCondition","*groupCondition"],UUID:["groupCondition","*groupCondition"],STRUUID:["groupCondition","*groupCondition"],MD5:["groupCondition","*groupCondition"],SHA1:["groupCondition","*groupCondition"],SHA256:["groupCondition","*groupCondition"],SHA384:["groupCondition","*groupCondition"],SHA512:["groupCondition","*groupCondition"],COALESCE:["groupCondition","*groupCondition"],IF:["groupCondition","*groupCondition"],STRLANG:["groupCondition","*groupCondition"],STRDT:["groupCondition","*groupCondition"],SAMETERM:["groupCondition","*groupCondition"],ISIRI:["groupCondition","*groupCondition"],ISURI:["groupCondition","*groupCondition"],ISBLANK:["groupCondition","*groupCondition"],ISLITERAL:["groupCondition","*groupCondition"],ISNUMERIC:["groupCondition","*groupCondition"],VAR1:["groupCondition","*groupCondition"],VAR2:["groupCondition","*groupCondition"],SUBSTR:["groupCondition","*groupCondition"],REPLACE:["groupCondition","*groupCondition"],REGEX:["groupCondition","*groupCondition"],EXISTS:["groupCondition","*groupCondition"],NOT:["groupCondition","*groupCondition"],IRI_REF:["groupCondition","*groupCondition"],PNAME_LN:["groupCondition","*groupCondition"],PNAME_NS:["groupCondition","*groupCondition"],VALUES:[],LIMIT:[],OFFSET:[],ORDER:[],HAVING:[],$:[],"}":[]},"*havingCondition":{"(":["havingCondition","*havingCondition"],STR:["havingCondition","*havingCondition"],LANG:["havingCondition","*havingCondition"],LANGMATCHES:["havingCondition","*havingCondition"],DATATYPE:["havingCondition","*havingCondition"],BOUND:["havingCondition","*havingCondition"],IRI:["havingCondition","*havingCondition"],URI:["havingCondition","*havingCondition"],BNODE:["havingCondition","*havingCondition"],RAND:["havingCondition","*havingCondition"],ABS:["havingCondition","*havingCondition"],CEIL:["havingCondition","*havingCondition"],FLOOR:["havingCondition","*havingCondition"],ROUND:["havingCondition","*havingCondition"],CONCAT:["havingCondition","*havingCondition"],STRLEN:["havingCondition","*havingCondition"],UCASE:["havingCondition","*havingCondition"],LCASE:["havingCondition","*havingCondition"],ENCODE_FOR_URI:["havingCondition","*havingCondition"],CONTAINS:["havingCondition","*havingCondition"],STRSTARTS:["havingCondition","*havingCondition"],STRENDS:["havingCondition","*havingCondition"],STRBEFORE:["havingCondition","*havingCondition"],STRAFTER:["havingCondition","*havingCondition"],YEAR:["havingCondition","*havingCondition"],MONTH:["havingCondition","*havingCondition"],DAY:["havingCondition","*havingCondition"],HOURS:["havingCondition","*havingCondition"],MINUTES:["havingCondition","*havingCondition"],SECONDS:["havingCondition","*havingCondition"],TIMEZONE:["havingCondition","*havingCondition"],TZ:["havingCondition","*havingCondition"],NOW:["havingCondition","*havingCondition"],UUID:["havingCondition","*havingCondition"],STRUUID:["havingCondition","*havingCondition"],MD5:["havingCondition","*havingCondition"],SHA1:["havingCondition","*havingCondition"],SHA256:["havingCondition","*havingCondition"],SHA384:["havingCondition","*havingCondition"],SHA512:["havingCondition","*havingCondition"],COALESCE:["havingCondition","*havingCondition"],IF:["havingCondition","*havingCondition"],STRLANG:["havingCondition","*havingCondition"],STRDT:["havingCondition","*havingCondition"],SAMETERM:["havingCondition","*havingCondition"],ISIRI:["havingCondition","*havingCondition"],ISURI:["havingCondition","*havingCondition"],ISBLANK:["havingCondition","*havingCondition"],ISLITERAL:["havingCondition","*havingCondition"],ISNUMERIC:["havingCondition","*havingCondition"],SUBSTR:["havingCondition","*havingCondition"],REPLACE:["havingCondition","*havingCondition"],REGEX:["havingCondition","*havingCondition"],EXISTS:["havingCondition","*havingCondition"],NOT:["havingCondition","*havingCondition"],IRI_REF:["havingCondition","*havingCondition"],PNAME_LN:["havingCondition","*havingCondition"],PNAME_NS:["havingCondition","*havingCondition"],VALUES:[],LIMIT:[],OFFSET:[],ORDER:[],$:[],"}":[]},"*or([[ (,*dataBlockValue,)],NIL])":{"(":["or([[ (,*dataBlockValue,)],NIL])","*or([[ (,*dataBlockValue,)],NIL])"],NIL:["or([[ (,*dataBlockValue,)],NIL])","*or([[ (,*dataBlockValue,)],NIL])"],"}":[]},"*or([[*,unaryExpression],[/,unaryExpression]])":{"*":["or([[*,unaryExpression],[/,unaryExpression]])","*or([[*,unaryExpression],[/,unaryExpression]])"],"/":["or([[*,unaryExpression],[/,unaryExpression]])","*or([[*,unaryExpression],[/,unaryExpression]])"],AS:[],")":[],",":[],"||":[],"&&":[],"=":[],"!=":[],"<":[],">":[],"<=":[],">=":[],IN:[],NOT:[],"+":[],"-":[],INTEGER_POSITIVE:[],DECIMAL_POSITIVE:[],DOUBLE_POSITIVE:[],INTEGER_NEGATIVE:[],DECIMAL_NEGATIVE:[],DOUBLE_NEGATIVE:[],";":[]},"*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])":{"+":["or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],"-":["or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],INTEGER_POSITIVE:["or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],DECIMAL_POSITIVE:["or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],DOUBLE_POSITIVE:["or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],INTEGER_NEGATIVE:["or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],DECIMAL_NEGATIVE:["or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],DOUBLE_NEGATIVE:["or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],AS:[],")":[],",":[],"||":[],"&&":[],"=":[],"!=":[],"<":[],">":[],"<=":[],">=":[],IN:[],NOT:[],";":[]},"*or([baseDecl,prefixDecl])":{BASE:["or([baseDecl,prefixDecl])","*or([baseDecl,prefixDecl])"],PREFIX:["or([baseDecl,prefixDecl])","*or([baseDecl,prefixDecl])"],$:[],CONSTRUCT:[],DESCRIBE:[],ASK:[],INSERT:[],DELETE:[],SELECT:[],LOAD:[],CLEAR:[],DROP:[],ADD:[],MOVE:[],COPY:[],CREATE:[],WITH:[]},"*or([var,[ (,expression,AS,var,)]])":{"(":["or([var,[ (,expression,AS,var,)]])","*or([var,[ (,expression,AS,var,)]])"],VAR1:["or([var,[ (,expression,AS,var,)]])","*or([var,[ (,expression,AS,var,)]])"],VAR2:["or([var,[ (,expression,AS,var,)]])","*or([var,[ (,expression,AS,var,)]])"],WHERE:[],"{":[],FROM:[]},"*orderCondition":{ASC:["orderCondition","*orderCondition"],DESC:["orderCondition","*orderCondition"],VAR1:["orderCondition","*orderCondition"],VAR2:["orderCondition","*orderCondition"],"(":["orderCondition","*orderCondition"],STR:["orderCondition","*orderCondition"],LANG:["orderCondition","*orderCondition"],LANGMATCHES:["orderCondition","*orderCondition"],DATATYPE:["orderCondition","*orderCondition"],BOUND:["orderCondition","*orderCondition"],IRI:["orderCondition","*orderCondition"],URI:["orderCondition","*orderCondition"],BNODE:["orderCondition","*orderCondition"],RAND:["orderCondition","*orderCondition"],ABS:["orderCondition","*orderCondition"],CEIL:["orderCondition","*orderCondition"],FLOOR:["orderCondition","*orderCondition"],ROUND:["orderCondition","*orderCondition"],CONCAT:["orderCondition","*orderCondition"],STRLEN:["orderCondition","*orderCondition"],UCASE:["orderCondition","*orderCondition"],LCASE:["orderCondition","*orderCondition"],ENCODE_FOR_URI:["orderCondition","*orderCondition"],CONTAINS:["orderCondition","*orderCondition"],STRSTARTS:["orderCondition","*orderCondition"],STRENDS:["orderCondition","*orderCondition"],STRBEFORE:["orderCondition","*orderCondition"],STRAFTER:["orderCondition","*orderCondition"],YEAR:["orderCondition","*orderCondition"],MONTH:["orderCondition","*orderCondition"],DAY:["orderCondition","*orderCondition"],HOURS:["orderCondition","*orderCondition"],MINUTES:["orderCondition","*orderCondition"],SECONDS:["orderCondition","*orderCondition"],TIMEZONE:["orderCondition","*orderCondition"],TZ:["orderCondition","*orderCondition"],NOW:["orderCondition","*orderCondition"],UUID:["orderCondition","*orderCondition"],STRUUID:["orderCondition","*orderCondition"],MD5:["orderCondition","*orderCondition"],SHA1:["orderCondition","*orderCondition"],SHA256:["orderCondition","*orderCondition"],SHA384:["orderCondition","*orderCondition"],SHA512:["orderCondition","*orderCondition"],COALESCE:["orderCondition","*orderCondition"],IF:["orderCondition","*orderCondition"],STRLANG:["orderCondition","*orderCondition"],STRDT:["orderCondition","*orderCondition"],SAMETERM:["orderCondition","*orderCondition"],ISIRI:["orderCondition","*orderCondition"],ISURI:["orderCondition","*orderCondition"],ISBLANK:["orderCondition","*orderCondition"],ISLITERAL:["orderCondition","*orderCondition"],ISNUMERIC:["orderCondition","*orderCondition"],SUBSTR:["orderCondition","*orderCondition"],REPLACE:["orderCondition","*orderCondition"],REGEX:["orderCondition","*orderCondition"],EXISTS:["orderCondition","*orderCondition"],NOT:["orderCondition","*orderCondition"],IRI_REF:["orderCondition","*orderCondition"],PNAME_LN:["orderCondition","*orderCondition"],PNAME_NS:["orderCondition","*orderCondition"],VALUES:[],LIMIT:[],OFFSET:[],$:[],"}":[]},"*usingClause":{USING:["usingClause","*usingClause"],WHERE:[]},"*var":{VAR1:["var","*var"],VAR2:["var","*var"],")":[]},"*varOrIRIref":{VAR1:["varOrIRIref","*varOrIRIref"],VAR2:["varOrIRIref","*varOrIRIref"],IRI_REF:["varOrIRIref","*varOrIRIref"],PNAME_LN:["varOrIRIref","*varOrIRIref"],PNAME_NS:["varOrIRIref","*varOrIRIref"],ORDER:[],HAVING:[],GROUP:[],LIMIT:[],OFFSET:[],WHERE:[],"{":[],FROM:[],VALUES:[],$:[]},"+graphNode":{"(":["graphNode","*graphNode"],"[":["graphNode","*graphNode"],VAR1:["graphNode","*graphNode"],VAR2:["graphNode","*graphNode"],NIL:["graphNode","*graphNode"],IRI_REF:["graphNode","*graphNode"],TRUE:["graphNode","*graphNode"],FALSE:["graphNode","*graphNode"],BLANK_NODE_LABEL:["graphNode","*graphNode"],ANON:["graphNode","*graphNode"],PNAME_LN:["graphNode","*graphNode"],PNAME_NS:["graphNode","*graphNode"],STRING_LITERAL1:["graphNode","*graphNode"],STRING_LITERAL2:["graphNode","*graphNode"],STRING_LITERAL_LONG1:["graphNode","*graphNode"],STRING_LITERAL_LONG2:["graphNode","*graphNode"],INTEGER:["graphNode","*graphNode"],DECIMAL:["graphNode","*graphNode"],DOUBLE:["graphNode","*graphNode"],INTEGER_POSITIVE:["graphNode","*graphNode"],DECIMAL_POSITIVE:["graphNode","*graphNode"],DOUBLE_POSITIVE:["graphNode","*graphNode"],INTEGER_NEGATIVE:["graphNode","*graphNode"],DECIMAL_NEGATIVE:["graphNode","*graphNode"],DOUBLE_NEGATIVE:["graphNode","*graphNode"]},"+graphNodePath":{"(":["graphNodePath","*graphNodePath"],"[":["graphNodePath","*graphNodePath"],VAR1:["graphNodePath","*graphNodePath"],VAR2:["graphNodePath","*graphNodePath"],NIL:["graphNodePath","*graphNodePath"],IRI_REF:["graphNodePath","*graphNodePath"],TRUE:["graphNodePath","*graphNodePath"],FALSE:["graphNodePath","*graphNodePath"],BLANK_NODE_LABEL:["graphNodePath","*graphNodePath"],ANON:["graphNodePath","*graphNodePath"],PNAME_LN:["graphNodePath","*graphNodePath"],PNAME_NS:["graphNodePath","*graphNodePath"],STRING_LITERAL1:["graphNodePath","*graphNodePath"],STRING_LITERAL2:["graphNodePath","*graphNodePath"],STRING_LITERAL_LONG1:["graphNodePath","*graphNodePath"],STRING_LITERAL_LONG2:["graphNodePath","*graphNodePath"],INTEGER:["graphNodePath","*graphNodePath"],DECIMAL:["graphNodePath","*graphNodePath"],DOUBLE:["graphNodePath","*graphNodePath"],INTEGER_POSITIVE:["graphNodePath","*graphNodePath"],DECIMAL_POSITIVE:["graphNodePath","*graphNodePath"],DOUBLE_POSITIVE:["graphNodePath","*graphNodePath"],INTEGER_NEGATIVE:["graphNodePath","*graphNodePath"],DECIMAL_NEGATIVE:["graphNodePath","*graphNodePath"],DOUBLE_NEGATIVE:["graphNodePath","*graphNodePath"]},"+groupCondition":{"(":["groupCondition","*groupCondition"],STR:["groupCondition","*groupCondition"],LANG:["groupCondition","*groupCondition"],LANGMATCHES:["groupCondition","*groupCondition"],DATATYPE:["groupCondition","*groupCondition"],BOUND:["groupCondition","*groupCondition"],IRI:["groupCondition","*groupCondition"],URI:["groupCondition","*groupCondition"],BNODE:["groupCondition","*groupCondition"],RAND:["groupCondition","*groupCondition"],ABS:["groupCondition","*groupCondition"],CEIL:["groupCondition","*groupCondition"],FLOOR:["groupCondition","*groupCondition"],ROUND:["groupCondition","*groupCondition"],CONCAT:["groupCondition","*groupCondition"],STRLEN:["groupCondition","*groupCondition"],UCASE:["groupCondition","*groupCondition"],LCASE:["groupCondition","*groupCondition"],ENCODE_FOR_URI:["groupCondition","*groupCondition"],CONTAINS:["groupCondition","*groupCondition"],STRSTARTS:["groupCondition","*groupCondition"],STRENDS:["groupCondition","*groupCondition"],STRBEFORE:["groupCondition","*groupCondition"],STRAFTER:["groupCondition","*groupCondition"],YEAR:["groupCondition","*groupCondition"],MONTH:["groupCondition","*groupCondition"],DAY:["groupCondition","*groupCondition"],HOURS:["groupCondition","*groupCondition"],MINUTES:["groupCondition","*groupCondition"],SECONDS:["groupCondition","*groupCondition"],TIMEZONE:["groupCondition","*groupCondition"],TZ:["groupCondition","*groupCondition"],NOW:["groupCondition","*groupCondition"],UUID:["groupCondition","*groupCondition"],STRUUID:["groupCondition","*groupCondition"],MD5:["groupCondition","*groupCondition"],SHA1:["groupCondition","*groupCondition"],SHA256:["groupCondition","*groupCondition"],SHA384:["groupCondition","*groupCondition"],SHA512:["groupCondition","*groupCondition"],COALESCE:["groupCondition","*groupCondition"],IF:["groupCondition","*groupCondition"],STRLANG:["groupCondition","*groupCondition"],STRDT:["groupCondition","*groupCondition"],SAMETERM:["groupCondition","*groupCondition"],ISIRI:["groupCondition","*groupCondition"],ISURI:["groupCondition","*groupCondition"],ISBLANK:["groupCondition","*groupCondition"],ISLITERAL:["groupCondition","*groupCondition"],ISNUMERIC:["groupCondition","*groupCondition"],VAR1:["groupCondition","*groupCondition"],VAR2:["groupCondition","*groupCondition"],SUBSTR:["groupCondition","*groupCondition"],REPLACE:["groupCondition","*groupCondition"],REGEX:["groupCondition","*groupCondition"],EXISTS:["groupCondition","*groupCondition"],NOT:["groupCondition","*groupCondition"],IRI_REF:["groupCondition","*groupCondition"],PNAME_LN:["groupCondition","*groupCondition"],PNAME_NS:["groupCondition","*groupCondition"]},"+havingCondition":{"(":["havingCondition","*havingCondition"],STR:["havingCondition","*havingCondition"],LANG:["havingCondition","*havingCondition"],LANGMATCHES:["havingCondition","*havingCondition"],DATATYPE:["havingCondition","*havingCondition"],BOUND:["havingCondition","*havingCondition"],IRI:["havingCondition","*havingCondition"],URI:["havingCondition","*havingCondition"],BNODE:["havingCondition","*havingCondition"],RAND:["havingCondition","*havingCondition"],ABS:["havingCondition","*havingCondition"],CEIL:["havingCondition","*havingCondition"],FLOOR:["havingCondition","*havingCondition"],ROUND:["havingCondition","*havingCondition"],CONCAT:["havingCondition","*havingCondition"],STRLEN:["havingCondition","*havingCondition"],UCASE:["havingCondition","*havingCondition"],LCASE:["havingCondition","*havingCondition"],ENCODE_FOR_URI:["havingCondition","*havingCondition"],CONTAINS:["havingCondition","*havingCondition"],STRSTARTS:["havingCondition","*havingCondition"],STRENDS:["havingCondition","*havingCondition"],STRBEFORE:["havingCondition","*havingCondition"],STRAFTER:["havingCondition","*havingCondition"],YEAR:["havingCondition","*havingCondition"],MONTH:["havingCondition","*havingCondition"],DAY:["havingCondition","*havingCondition"],HOURS:["havingCondition","*havingCondition"],MINUTES:["havingCondition","*havingCondition"],SECONDS:["havingCondition","*havingCondition"],TIMEZONE:["havingCondition","*havingCondition"],TZ:["havingCondition","*havingCondition"],NOW:["havingCondition","*havingCondition"],UUID:["havingCondition","*havingCondition"],STRUUID:["havingCondition","*havingCondition"],MD5:["havingCondition","*havingCondition"],SHA1:["havingCondition","*havingCondition"],SHA256:["havingCondition","*havingCondition"],SHA384:["havingCondition","*havingCondition"],SHA512:["havingCondition","*havingCondition"],COALESCE:["havingCondition","*havingCondition"],IF:["havingCondition","*havingCondition"],STRLANG:["havingCondition","*havingCondition"],STRDT:["havingCondition","*havingCondition"],SAMETERM:["havingCondition","*havingCondition"],ISIRI:["havingCondition","*havingCondition"],ISURI:["havingCondition","*havingCondition"],ISBLANK:["havingCondition","*havingCondition"],ISLITERAL:["havingCondition","*havingCondition"],ISNUMERIC:["havingCondition","*havingCondition"],SUBSTR:["havingCondition","*havingCondition"],REPLACE:["havingCondition","*havingCondition"],REGEX:["havingCondition","*havingCondition"],EXISTS:["havingCondition","*havingCondition"],NOT:["havingCondition","*havingCondition"],IRI_REF:["havingCondition","*havingCondition"],PNAME_LN:["havingCondition","*havingCondition"],PNAME_NS:["havingCondition","*havingCondition"]},"+or([var,[ (,expression,AS,var,)]])":{"(":["or([var,[ (,expression,AS,var,)]])","*or([var,[ (,expression,AS,var,)]])"],VAR1:["or([var,[ (,expression,AS,var,)]])","*or([var,[ (,expression,AS,var,)]])"],VAR2:["or([var,[ (,expression,AS,var,)]])","*or([var,[ (,expression,AS,var,)]])"]},"+orderCondition":{ASC:["orderCondition","*orderCondition"],DESC:["orderCondition","*orderCondition"],VAR1:["orderCondition","*orderCondition"],VAR2:["orderCondition","*orderCondition"],"(":["orderCondition","*orderCondition"],STR:["orderCondition","*orderCondition"],LANG:["orderCondition","*orderCondition"],LANGMATCHES:["orderCondition","*orderCondition"],DATATYPE:["orderCondition","*orderCondition"],BOUND:["orderCondition","*orderCondition"],IRI:["orderCondition","*orderCondition"],URI:["orderCondition","*orderCondition"],BNODE:["orderCondition","*orderCondition"],RAND:["orderCondition","*orderCondition"],ABS:["orderCondition","*orderCondition"],CEIL:["orderCondition","*orderCondition"],FLOOR:["orderCondition","*orderCondition"],ROUND:["orderCondition","*orderCondition"],CONCAT:["orderCondition","*orderCondition"],STRLEN:["orderCondition","*orderCondition"],UCASE:["orderCondition","*orderCondition"],LCASE:["orderCondition","*orderCondition"],ENCODE_FOR_URI:["orderCondition","*orderCondition"],CONTAINS:["orderCondition","*orderCondition"],STRSTARTS:["orderCondition","*orderCondition"],STRENDS:["orderCondition","*orderCondition"],STRBEFORE:["orderCondition","*orderCondition"],STRAFTER:["orderCondition","*orderCondition"],YEAR:["orderCondition","*orderCondition"],MONTH:["orderCondition","*orderCondition"],DAY:["orderCondition","*orderCondition"],HOURS:["orderCondition","*orderCondition"],MINUTES:["orderCondition","*orderCondition"],SECONDS:["orderCondition","*orderCondition"],TIMEZONE:["orderCondition","*orderCondition"],TZ:["orderCondition","*orderCondition"],NOW:["orderCondition","*orderCondition"],UUID:["orderCondition","*orderCondition"],STRUUID:["orderCondition","*orderCondition"],MD5:["orderCondition","*orderCondition"],SHA1:["orderCondition","*orderCondition"],SHA256:["orderCondition","*orderCondition"],SHA384:["orderCondition","*orderCondition"],SHA512:["orderCondition","*orderCondition"],COALESCE:["orderCondition","*orderCondition"],IF:["orderCondition","*orderCondition"],STRLANG:["orderCondition","*orderCondition"],STRDT:["orderCondition","*orderCondition"],SAMETERM:["orderCondition","*orderCondition"],ISIRI:["orderCondition","*orderCondition"],ISURI:["orderCondition","*orderCondition"],ISBLANK:["orderCondition","*orderCondition"],ISLITERAL:["orderCondition","*orderCondition"],ISNUMERIC:["orderCondition","*orderCondition"],SUBSTR:["orderCondition","*orderCondition"],REPLACE:["orderCondition","*orderCondition"],REGEX:["orderCondition","*orderCondition"],EXISTS:["orderCondition","*orderCondition"],NOT:["orderCondition","*orderCondition"],IRI_REF:["orderCondition","*orderCondition"],PNAME_LN:["orderCondition","*orderCondition"],PNAME_NS:["orderCondition","*orderCondition"]},"+varOrIRIref":{VAR1:["varOrIRIref","*varOrIRIref"],VAR2:["varOrIRIref","*varOrIRIref"],IRI_REF:["varOrIRIref","*varOrIRIref"],PNAME_LN:["varOrIRIref","*varOrIRIref"],PNAME_NS:["varOrIRIref","*varOrIRIref"]},"?.":{".":["."],VAR1:[],VAR2:[],NIL:[],"(":[],"[":[],IRI_REF:[],TRUE:[],FALSE:[],BLANK_NODE_LABEL:[],ANON:[],PNAME_LN:[],PNAME_NS:[],STRING_LITERAL1:[],STRING_LITERAL2:[],STRING_LITERAL_LONG1:[],STRING_LITERAL_LONG2:[],INTEGER:[],DECIMAL:[],DOUBLE:[],INTEGER_POSITIVE:[],DECIMAL_POSITIVE:[],DOUBLE_POSITIVE:[],INTEGER_NEGATIVE:[],DECIMAL_NEGATIVE:[],DOUBLE_NEGATIVE:[],GRAPH:[],"{":[],OPTIONAL:[],MINUS:[],SERVICE:[],FILTER:[],BIND:[],VALUES:[],"}":[]},"?DISTINCT":{DISTINCT:["DISTINCT"],"!":[],"+":[],"-":[],VAR1:[],VAR2:[],"(":[],STR:[],LANG:[],LANGMATCHES:[],DATATYPE:[],BOUND:[],IRI:[],URI:[],BNODE:[],RAND:[],ABS:[],CEIL:[],FLOOR:[],ROUND:[],CONCAT:[],STRLEN:[],UCASE:[],LCASE:[],ENCODE_FOR_URI:[],CONTAINS:[],STRSTARTS:[],STRENDS:[],STRBEFORE:[],STRAFTER:[],YEAR:[],MONTH:[],DAY:[],HOURS:[],MINUTES:[],SECONDS:[],TIMEZONE:[],TZ:[],NOW:[],UUID:[],STRUUID:[],MD5:[],SHA1:[],SHA256:[],SHA384:[],SHA512:[],COALESCE:[],IF:[],STRLANG:[],STRDT:[],SAMETERM:[],ISIRI:[],ISURI:[],ISBLANK:[],ISLITERAL:[],ISNUMERIC:[],TRUE:[],FALSE:[],COUNT:[],SUM:[],MIN:[],MAX:[],AVG:[],SAMPLE:[],GROUP_CONCAT:[],SUBSTR:[],REPLACE:[],REGEX:[],EXISTS:[],NOT:[],IRI_REF:[],STRING_LITERAL1:[],STRING_LITERAL2:[],STRING_LITERAL_LONG1:[],STRING_LITERAL_LONG2:[],INTEGER:[],DECIMAL:[],DOUBLE:[],INTEGER_POSITIVE:[],DECIMAL_POSITIVE:[],DOUBLE_POSITIVE:[],INTEGER_NEGATIVE:[],DECIMAL_NEGATIVE:[],DOUBLE_NEGATIVE:[],PNAME_LN:[],PNAME_NS:[],"*":[]},"?GRAPH":{GRAPH:["GRAPH"],IRI_REF:[],PNAME_LN:[],PNAME_NS:[]},"?SILENT":{SILENT:["SILENT"],VAR1:[],VAR2:[],IRI_REF:[],PNAME_LN:[],PNAME_NS:[]},"?SILENT_1":{SILENT:["SILENT"],IRI_REF:[],PNAME_LN:[],PNAME_NS:[]},"?SILENT_2":{SILENT:["SILENT"],GRAPH:[],DEFAULT:[],NAMED:[],ALL:[]},"?SILENT_3":{SILENT:["SILENT"],GRAPH:[]},"?SILENT_4":{SILENT:["SILENT"],DEFAULT:[],GRAPH:[],IRI_REF:[],PNAME_LN:[],PNAME_NS:[]},"?WHERE":{WHERE:["WHERE"],"{":[]},"?[,,expression]":{",":["[,,expression]"],")":[]},"?[.,?constructTriples]":{".":["[.,?constructTriples]"],"}":[]},"?[.,?triplesBlock]":{".":["[.,?triplesBlock]"],"{":[],OPTIONAL:[],MINUS:[],GRAPH:[],SERVICE:[],FILTER:[],BIND:[],VALUES:[],"}":[]},"?[.,?triplesTemplate]":{".":["[.,?triplesTemplate]"],"}":[],GRAPH:[]},"?[;,SEPARATOR,=,string]":{";":["[;,SEPARATOR,=,string]"],")":[]},"?[;,update]":{";":["[;,update]"],$:[]},"?[AS,var]":{AS:["[AS,var]"],")":[]},"?[INTO,graphRef]":{INTO:["[INTO,graphRef]"],";":[],$:[]},"?[or([verbPath,verbSimple]),objectList]":{VAR1:["[or([verbPath,verbSimple]),objectList]"],VAR2:["[or([verbPath,verbSimple]),objectList]"],"^":["[or([verbPath,verbSimple]),objectList]"],a:["[or([verbPath,verbSimple]),objectList]"],"!":["[or([verbPath,verbSimple]),objectList]"],"(":["[or([verbPath,verbSimple]),objectList]"],IRI_REF:["[or([verbPath,verbSimple]),objectList]"],PNAME_LN:["[or([verbPath,verbSimple]),objectList]"],PNAME_NS:["[or([verbPath,verbSimple]),objectList]"],";":[],".":[],"]":[],"{":[],OPTIONAL:[],MINUS:[],GRAPH:[],SERVICE:[],FILTER:[],BIND:[],VALUES:[],"}":[]},"?[pathOneInPropertySet,*[|,pathOneInPropertySet]]":{a:["[pathOneInPropertySet,*[|,pathOneInPropertySet]]"],"^":["[pathOneInPropertySet,*[|,pathOneInPropertySet]]"],IRI_REF:["[pathOneInPropertySet,*[|,pathOneInPropertySet]]"],PNAME_LN:["[pathOneInPropertySet,*[|,pathOneInPropertySet]]"],PNAME_NS:["[pathOneInPropertySet,*[|,pathOneInPropertySet]]"],")":[]},"?[update1,?[;,update]]":{INSERT:["[update1,?[;,update]]"],DELETE:["[update1,?[;,update]]"],LOAD:["[update1,?[;,update]]"],CLEAR:["[update1,?[;,update]]"],DROP:["[update1,?[;,update]]"],ADD:["[update1,?[;,update]]"],MOVE:["[update1,?[;,update]]"],COPY:["[update1,?[;,update]]"],CREATE:["[update1,?[;,update]]"],WITH:["[update1,?[;,update]]"],$:[]},"?[verb,objectList]":{a:["[verb,objectList]"],VAR1:["[verb,objectList]"],VAR2:["[verb,objectList]"],IRI_REF:["[verb,objectList]"],PNAME_LN:["[verb,objectList]"],PNAME_NS:["[verb,objectList]"],";":[],".":[],"]":[],"}":[],GRAPH:[],"{":[],OPTIONAL:[],MINUS:[],SERVICE:[],FILTER:[],BIND:[],VALUES:[]},"?argList":{NIL:["argList"],"(":["argList"],AS:[],")":[],",":[],"||":[],"&&":[],"=":[],"!=":[],"<":[],">":[],"<=":[],">=":[],IN:[],NOT:[],"+":[],"-":[],INTEGER_POSITIVE:[],DECIMAL_POSITIVE:[],DOUBLE_POSITIVE:[],INTEGER_NEGATIVE:[],DECIMAL_NEGATIVE:[],DOUBLE_NEGATIVE:[],"*":[],"/":[],";":[]},"?constructTriples":{VAR1:["constructTriples"],VAR2:["constructTriples"],NIL:["constructTriples"],"(":["constructTriples"],"[":["constructTriples"],IRI_REF:["constructTriples"],TRUE:["constructTriples"],FALSE:["constructTriples"],BLANK_NODE_LABEL:["constructTriples"],ANON:["constructTriples"],PNAME_LN:["constructTriples"],PNAME_NS:["constructTriples"],STRING_LITERAL1:["constructTriples"],STRING_LITERAL2:["constructTriples"],STRING_LITERAL_LONG1:["constructTriples"],STRING_LITERAL_LONG2:["constructTriples"],INTEGER:["constructTriples"],DECIMAL:["constructTriples"],DOUBLE:["constructTriples"],INTEGER_POSITIVE:["constructTriples"],DECIMAL_POSITIVE:["constructTriples"],DOUBLE_POSITIVE:["constructTriples"],INTEGER_NEGATIVE:["constructTriples"],DECIMAL_NEGATIVE:["constructTriples"],DOUBLE_NEGATIVE:["constructTriples"],"}":[]},"?groupClause":{GROUP:["groupClause"],VALUES:[],LIMIT:[],OFFSET:[],ORDER:[],HAVING:[],$:[],"}":[]},"?havingClause":{HAVING:["havingClause"],VALUES:[],LIMIT:[],OFFSET:[],ORDER:[],$:[],"}":[]},"?insertClause":{INSERT:["insertClause"],WHERE:[],USING:[]},"?limitClause":{LIMIT:["limitClause"],VALUES:[],$:[],"}":[]},"?limitOffsetClauses":{LIMIT:["limitOffsetClauses"],OFFSET:["limitOffsetClauses"],VALUES:[],$:[],"}":[]},"?offsetClause":{OFFSET:["offsetClause"],VALUES:[],$:[],"}":[]},"?or([DISTINCT,REDUCED])":{DISTINCT:["or([DISTINCT,REDUCED])"],REDUCED:["or([DISTINCT,REDUCED])"],"*":[],"(":[],VAR1:[],VAR2:[]},"?or([LANGTAG,[^^,iriRef]])":{LANGTAG:["or([LANGTAG,[^^,iriRef]])"],"^^":["or([LANGTAG,[^^,iriRef]])"],UNDEF:[],IRI_REF:[],TRUE:[],FALSE:[],PNAME_LN:[],PNAME_NS:[],STRING_LITERAL1:[],STRING_LITERAL2:[],STRING_LITERAL_LONG1:[],STRING_LITERAL_LONG2:[],INTEGER:[],DECIMAL:[],DOUBLE:[],INTEGER_POSITIVE:[],DECIMAL_POSITIVE:[],DOUBLE_POSITIVE:[],INTEGER_NEGATIVE:[],DECIMAL_NEGATIVE:[],DOUBLE_NEGATIVE:[],a:[],VAR1:[],VAR2:[],"^":[],"!":[],"(":[],".":[],";":[],",":[],AS:[],")":[],"||":[],"&&":[],"=":[],"!=":[],"<":[],">":[],"<=":[],">=":[],IN:[],NOT:[],"+":[],"-":[],"*":[],"/":[],"}":[],"[":[],NIL:[],BLANK_NODE_LABEL:[],ANON:[],"]":[],GRAPH:[],"{":[],OPTIONAL:[],MINUS:[],SERVICE:[],FILTER:[],BIND:[],VALUES:[]},"?or([[*,unaryExpression],[/,unaryExpression]])":{"*":["or([[*,unaryExpression],[/,unaryExpression]])"],"/":["or([[*,unaryExpression],[/,unaryExpression]])"],"+":[],"-":[],INTEGER_POSITIVE:[],DECIMAL_POSITIVE:[],DOUBLE_POSITIVE:[],INTEGER_NEGATIVE:[],DECIMAL_NEGATIVE:[],DOUBLE_NEGATIVE:[],AS:[],")":[],",":[],"||":[],"&&":[],"=":[],"!=":[],"<":[],">":[],"<=":[],">=":[],IN:[],NOT:[],";":[]},"?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])":{"=":["or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],"!=":["or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],"<":["or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],">":["or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],"<=":["or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],">=":["or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],IN:["or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],NOT:["or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],AS:[],")":[],",":[],"||":[],"&&":[],";":[]},"?orderClause":{ORDER:["orderClause"],VALUES:[],LIMIT:[],OFFSET:[],$:[],"}":[]},"?pathMod":{"*":["pathMod"],"?":["pathMod"],"+":["pathMod"],"{":["pathMod"],"|":[],"/":[],")":[],"(":[],"[":[],VAR1:[],VAR2:[],NIL:[],IRI_REF:[],TRUE:[],FALSE:[],BLANK_NODE_LABEL:[],ANON:[],PNAME_LN:[],PNAME_NS:[],STRING_LITERAL1:[],STRING_LITERAL2:[],STRING_LITERAL_LONG1:[],STRING_LITERAL_LONG2:[],INTEGER:[],DECIMAL:[],DOUBLE:[],INTEGER_POSITIVE:[],DECIMAL_POSITIVE:[],DOUBLE_POSITIVE:[],INTEGER_NEGATIVE:[],DECIMAL_NEGATIVE:[],DOUBLE_NEGATIVE:[]},"?triplesBlock":{VAR1:["triplesBlock"],VAR2:["triplesBlock"],NIL:["triplesBlock"],"(":["triplesBlock"],"[":["triplesBlock"],IRI_REF:["triplesBlock"],TRUE:["triplesBlock"],FALSE:["triplesBlock"],BLANK_NODE_LABEL:["triplesBlock"],ANON:["triplesBlock"],PNAME_LN:["triplesBlock"],PNAME_NS:["triplesBlock"],STRING_LITERAL1:["triplesBlock"],STRING_LITERAL2:["triplesBlock"],STRING_LITERAL_LONG1:["triplesBlock"],STRING_LITERAL_LONG2:["triplesBlock"],INTEGER:["triplesBlock"],DECIMAL:["triplesBlock"],DOUBLE:["triplesBlock"],INTEGER_POSITIVE:["triplesBlock"],DECIMAL_POSITIVE:["triplesBlock"],DOUBLE_POSITIVE:["triplesBlock"],INTEGER_NEGATIVE:["triplesBlock"],DECIMAL_NEGATIVE:["triplesBlock"],DOUBLE_NEGATIVE:["triplesBlock"],"{":[],OPTIONAL:[],MINUS:[],GRAPH:[],SERVICE:[],FILTER:[],BIND:[],VALUES:[],"}":[]},"?triplesTemplate":{VAR1:["triplesTemplate"],VAR2:["triplesTemplate"],NIL:["triplesTemplate"],"(":["triplesTemplate"],"[":["triplesTemplate"],IRI_REF:["triplesTemplate"],TRUE:["triplesTemplate"],FALSE:["triplesTemplate"],BLANK_NODE_LABEL:["triplesTemplate"],ANON:["triplesTemplate"],PNAME_LN:["triplesTemplate"],PNAME_NS:["triplesTemplate"],STRING_LITERAL1:["triplesTemplate"],STRING_LITERAL2:["triplesTemplate"],STRING_LITERAL_LONG1:["triplesTemplate"],STRING_LITERAL_LONG2:["triplesTemplate"],INTEGER:["triplesTemplate"],DECIMAL:["triplesTemplate"],DOUBLE:["triplesTemplate"],INTEGER_POSITIVE:["triplesTemplate"],DECIMAL_POSITIVE:["triplesTemplate"],DOUBLE_POSITIVE:["triplesTemplate"],INTEGER_NEGATIVE:["triplesTemplate"],DECIMAL_NEGATIVE:["triplesTemplate"],DOUBLE_NEGATIVE:["triplesTemplate"],"}":[],GRAPH:[]},"?whereClause":{WHERE:["whereClause"],"{":["whereClause"],ORDER:[],HAVING:[],GROUP:[],LIMIT:[],OFFSET:[],VALUES:[],$:[]},"[ (,*dataBlockValue,)]":{"(":["(","*dataBlockValue",")"]},"[ (,*var,)]":{"(":["(","*var",")"]},"[ (,expression,)]":{"(":["(","expression",")"]},"[ (,expression,AS,var,)]":{"(":["(","expression","AS","var",")"]},"[!=,numericExpression]":{"!=":["!=","numericExpression"]},"[&&,valueLogical]":{"&&":["&&","valueLogical"]},"[*,unaryExpression]":{"*":["*","unaryExpression"]},"[*datasetClause,WHERE,{,?triplesTemplate,},solutionModifier]":{WHERE:["*datasetClause","WHERE","{","?triplesTemplate","}","solutionModifier"],FROM:["*datasetClause","WHERE","{","?triplesTemplate","}","solutionModifier"]},"[+,multiplicativeExpression]":{"+":["+","multiplicativeExpression"]},"[,,expression]":{",":[",","expression"]},"[,,integer,}]":{",":[",","integer","}"]},"[,,objectPath]":{",":[",","objectPath"]},"[,,object]":{",":[",","object"]},"[,,or([},[integer,}]])]":{",":[",","or([},[integer,}]])"]},"[-,multiplicativeExpression]":{"-":["-","multiplicativeExpression"]},"[.,?constructTriples]":{".":[".","?constructTriples"]},"[.,?triplesBlock]":{".":[".","?triplesBlock"]},"[.,?triplesTemplate]":{".":[".","?triplesTemplate"]},"[/,pathEltOrInverse]":{"/":["/","pathEltOrInverse"]},"[/,unaryExpression]":{"/":["/","unaryExpression"]},"[;,?[or([verbPath,verbSimple]),objectList]]":{";":[";","?[or([verbPath,verbSimple]),objectList]"]},"[;,?[verb,objectList]]":{";":[";","?[verb,objectList]"]},"[;,SEPARATOR,=,string]":{";":[";","SEPARATOR","=","string"]},"[;,update]":{";":[";","update"]},"[<,numericExpression]":{"<":["<","numericExpression"]},"[<=,numericExpression]":{"<=":["<=","numericExpression"]},"[=,numericExpression]":{"=":["=","numericExpression"]},"[>,numericExpression]":{">":[">","numericExpression"]},"[>=,numericExpression]":{">=":[">=","numericExpression"]},"[AS,var]":{AS:["AS","var"]},"[IN,expressionList]":{IN:["IN","expressionList"]},"[INTO,graphRef]":{INTO:["INTO","graphRef"]},"[NAMED,iriRef]":{NAMED:["NAMED","iriRef"]},"[NOT,IN,expressionList]":{NOT:["NOT","IN","expressionList"]},"[UNION,groupGraphPattern]":{UNION:["UNION","groupGraphPattern"]},"[^^,iriRef]":{"^^":["^^","iriRef"]},"[constructTemplate,*datasetClause,whereClause,solutionModifier]":{"{":["constructTemplate","*datasetClause","whereClause","solutionModifier"]},"[deleteClause,?insertClause]":{DELETE:["deleteClause","?insertClause"]},"[graphPatternNotTriples,?.,?triplesBlock]":{"{":["graphPatternNotTriples","?.","?triplesBlock"],OPTIONAL:["graphPatternNotTriples","?.","?triplesBlock"],MINUS:["graphPatternNotTriples","?.","?triplesBlock"],GRAPH:["graphPatternNotTriples","?.","?triplesBlock"],SERVICE:["graphPatternNotTriples","?.","?triplesBlock"],FILTER:["graphPatternNotTriples","?.","?triplesBlock"],BIND:["graphPatternNotTriples","?.","?triplesBlock"],VALUES:["graphPatternNotTriples","?.","?triplesBlock"]},"[integer,or([[,,or([},[integer,}]])],}])]":{INTEGER:["integer","or([[,,or([},[integer,}]])],}])"]},"[integer,}]":{INTEGER:["integer","}"]},"[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]":{INTEGER_POSITIVE:["or([numericLiteralPositive,numericLiteralNegative])","?or([[*,unaryExpression],[/,unaryExpression]])"],DECIMAL_POSITIVE:["or([numericLiteralPositive,numericLiteralNegative])","?or([[*,unaryExpression],[/,unaryExpression]])"],DOUBLE_POSITIVE:["or([numericLiteralPositive,numericLiteralNegative])","?or([[*,unaryExpression],[/,unaryExpression]])"],INTEGER_NEGATIVE:["or([numericLiteralPositive,numericLiteralNegative])","?or([[*,unaryExpression],[/,unaryExpression]])"],DECIMAL_NEGATIVE:["or([numericLiteralPositive,numericLiteralNegative])","?or([[*,unaryExpression],[/,unaryExpression]])"],DOUBLE_NEGATIVE:["or([numericLiteralPositive,numericLiteralNegative])","?or([[*,unaryExpression],[/,unaryExpression]])"]},"[or([verbPath,verbSimple]),objectList]":{VAR1:["or([verbPath,verbSimple])","objectList"],VAR2:["or([verbPath,verbSimple])","objectList"],"^":["or([verbPath,verbSimple])","objectList"],a:["or([verbPath,verbSimple])","objectList"],"!":["or([verbPath,verbSimple])","objectList"],"(":["or([verbPath,verbSimple])","objectList"],IRI_REF:["or([verbPath,verbSimple])","objectList"],PNAME_LN:["or([verbPath,verbSimple])","objectList"],PNAME_NS:["or([verbPath,verbSimple])","objectList"]},"[pathOneInPropertySet,*[|,pathOneInPropertySet]]":{a:["pathOneInPropertySet","*[|,pathOneInPropertySet]"],"^":["pathOneInPropertySet","*[|,pathOneInPropertySet]"],IRI_REF:["pathOneInPropertySet","*[|,pathOneInPropertySet]"],PNAME_LN:["pathOneInPropertySet","*[|,pathOneInPropertySet]"],PNAME_NS:["pathOneInPropertySet","*[|,pathOneInPropertySet]"]},"[quadsNotTriples,?.,?triplesTemplate]":{GRAPH:["quadsNotTriples","?.","?triplesTemplate"]},"[update1,?[;,update]]":{INSERT:["update1","?[;,update]"],DELETE:["update1","?[;,update]"],LOAD:["update1","?[;,update]"],CLEAR:["update1","?[;,update]"],DROP:["update1","?[;,update]"],ADD:["update1","?[;,update]"],MOVE:["update1","?[;,update]"],COPY:["update1","?[;,update]"],CREATE:["update1","?[;,update]"],WITH:["update1","?[;,update]"]},"[verb,objectList]":{a:["verb","objectList"],VAR1:["verb","objectList"],VAR2:["verb","objectList"],IRI_REF:["verb","objectList"],PNAME_LN:["verb","objectList"],PNAME_NS:["verb","objectList"]},"[|,pathOneInPropertySet]":{"|":["|","pathOneInPropertySet"]},"[|,pathSequence]":{"|":["|","pathSequence"]},"[||,conditionalAndExpression]":{"||":["||","conditionalAndExpression"]},add:{ADD:["ADD","?SILENT_4","graphOrDefault","TO","graphOrDefault"]},additiveExpression:{"!":["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],"+":["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],"-":["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],VAR1:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],VAR2:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],"(":["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],STR:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],LANG:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],LANGMATCHES:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],DATATYPE:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],BOUND:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],IRI:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],URI:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],BNODE:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],RAND:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],ABS:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],CEIL:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],FLOOR:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],ROUND:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],CONCAT:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],STRLEN:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],UCASE:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],LCASE:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],ENCODE_FOR_URI:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],CONTAINS:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],STRSTARTS:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],STRENDS:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],STRBEFORE:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],STRAFTER:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],YEAR:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],MONTH:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],DAY:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],HOURS:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],MINUTES:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],SECONDS:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],TIMEZONE:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],TZ:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],NOW:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],UUID:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],STRUUID:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],MD5:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],SHA1:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],SHA256:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],SHA384:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],SHA512:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],COALESCE:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],IF:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],STRLANG:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],STRDT:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],SAMETERM:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],ISIRI:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],ISURI:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],ISBLANK:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],ISLITERAL:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],ISNUMERIC:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],TRUE:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],FALSE:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],COUNT:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],SUM:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],MIN:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],MAX:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],AVG:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],SAMPLE:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],GROUP_CONCAT:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],SUBSTR:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],REPLACE:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],REGEX:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],EXISTS:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],NOT:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],IRI_REF:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],STRING_LITERAL1:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],STRING_LITERAL2:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],STRING_LITERAL_LONG1:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],STRING_LITERAL_LONG2:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],INTEGER:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],DECIMAL:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],DOUBLE:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],INTEGER_POSITIVE:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],DECIMAL_POSITIVE:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],DOUBLE_POSITIVE:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],INTEGER_NEGATIVE:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],DECIMAL_NEGATIVE:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],DOUBLE_NEGATIVE:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],PNAME_LN:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"],PNAME_NS:["multiplicativeExpression","*or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])"]},aggregate:{COUNT:["COUNT","(","?DISTINCT","or([*,expression])",")"],SUM:["SUM","(","?DISTINCT","expression",")"],MIN:["MIN","(","?DISTINCT","expression",")"],MAX:["MAX","(","?DISTINCT","expression",")"],AVG:["AVG","(","?DISTINCT","expression",")"],SAMPLE:["SAMPLE","(","?DISTINCT","expression",")"],GROUP_CONCAT:["GROUP_CONCAT","(","?DISTINCT","expression","?[;,SEPARATOR,=,string]",")"]},allowBnodes:{"}":[]},allowVars:{"}":[]},argList:{NIL:["NIL"],"(":["(","?DISTINCT","expression","*[,,expression]",")"]},askQuery:{ASK:["ASK","*datasetClause","whereClause","solutionModifier"]},baseDecl:{BASE:["BASE","IRI_REF"]},bind:{BIND:["BIND","(","expression","AS","var",")"]},blankNode:{BLANK_NODE_LABEL:["BLANK_NODE_LABEL"],ANON:["ANON"]},blankNodePropertyList:{"[":["[","propertyListNotEmpty","]"]},blankNodePropertyListPath:{"[":["[","propertyListPathNotEmpty","]"]},booleanLiteral:{TRUE:["TRUE"],FALSE:["FALSE"]},brackettedExpression:{"(":["(","expression",")"]},builtInCall:{STR:["STR","(","expression",")"],LANG:["LANG","(","expression",")"],LANGMATCHES:["LANGMATCHES","(","expression",",","expression",")"],DATATYPE:["DATATYPE","(","expression",")"],BOUND:["BOUND","(","var",")"],IRI:["IRI","(","expression",")"],URI:["URI","(","expression",")"],BNODE:["BNODE","or([[ (,expression,)],NIL])"],RAND:["RAND","NIL"],ABS:["ABS","(","expression",")"],CEIL:["CEIL","(","expression",")"],FLOOR:["FLOOR","(","expression",")"],ROUND:["ROUND","(","expression",")"],CONCAT:["CONCAT","expressionList"],SUBSTR:["substringExpression"],STRLEN:["STRLEN","(","expression",")"],REPLACE:["strReplaceExpression"],UCASE:["UCASE","(","expression",")"],LCASE:["LCASE","(","expression",")"],ENCODE_FOR_URI:["ENCODE_FOR_URI","(","expression",")"],CONTAINS:["CONTAINS","(","expression",",","expression",")"],STRSTARTS:["STRSTARTS","(","expression",",","expression",")"],STRENDS:["STRENDS","(","expression",",","expression",")"],STRBEFORE:["STRBEFORE","(","expression",",","expression",")"],STRAFTER:["STRAFTER","(","expression",",","expression",")"],YEAR:["YEAR","(","expression",")"],MONTH:["MONTH","(","expression",")"],DAY:["DAY","(","expression",")"],HOURS:["HOURS","(","expression",")"],MINUTES:["MINUTES","(","expression",")"],SECONDS:["SECONDS","(","expression",")"],TIMEZONE:["TIMEZONE","(","expression",")"],TZ:["TZ","(","expression",")"],NOW:["NOW","NIL"],UUID:["UUID","NIL"],STRUUID:["STRUUID","NIL"],MD5:["MD5","(","expression",")"],SHA1:["SHA1","(","expression",")"],SHA256:["SHA256","(","expression",")"],SHA384:["SHA384","(","expression",")"],SHA512:["SHA512","(","expression",")"],COALESCE:["COALESCE","expressionList"],IF:["IF","(","expression",",","expression",",","expression",")"],STRLANG:["STRLANG","(","expression",",","expression",")"],STRDT:["STRDT","(","expression",",","expression",")"],SAMETERM:["SAMETERM","(","expression",",","expression",")"],ISIRI:["ISIRI","(","expression",")"],ISURI:["ISURI","(","expression",")"],ISBLANK:["ISBLANK","(","expression",")"],ISLITERAL:["ISLITERAL","(","expression",")"],ISNUMERIC:["ISNUMERIC","(","expression",")"],REGEX:["regexExpression"],EXISTS:["existsFunc"],NOT:["notExistsFunc"]},clear:{CLEAR:["CLEAR","?SILENT_2","graphRefAll"]},collection:{"(":["(","+graphNode",")"]},collectionPath:{"(":["(","+graphNodePath",")"]},conditionalAndExpression:{"!":["valueLogical","*[&&,valueLogical]"],"+":["valueLogical","*[&&,valueLogical]"],"-":["valueLogical","*[&&,valueLogical]"],VAR1:["valueLogical","*[&&,valueLogical]"],VAR2:["valueLogical","*[&&,valueLogical]"],"(":["valueLogical","*[&&,valueLogical]"],STR:["valueLogical","*[&&,valueLogical]"],LANG:["valueLogical","*[&&,valueLogical]"],LANGMATCHES:["valueLogical","*[&&,valueLogical]"],DATATYPE:["valueLogical","*[&&,valueLogical]"],BOUND:["valueLogical","*[&&,valueLogical]"],IRI:["valueLogical","*[&&,valueLogical]"],URI:["valueLogical","*[&&,valueLogical]"],BNODE:["valueLogical","*[&&,valueLogical]"],RAND:["valueLogical","*[&&,valueLogical]"],ABS:["valueLogical","*[&&,valueLogical]"],CEIL:["valueLogical","*[&&,valueLogical]"],FLOOR:["valueLogical","*[&&,valueLogical]"],ROUND:["valueLogical","*[&&,valueLogical]"],CONCAT:["valueLogical","*[&&,valueLogical]"],STRLEN:["valueLogical","*[&&,valueLogical]"],UCASE:["valueLogical","*[&&,valueLogical]"],LCASE:["valueLogical","*[&&,valueLogical]"],ENCODE_FOR_URI:["valueLogical","*[&&,valueLogical]"],CONTAINS:["valueLogical","*[&&,valueLogical]"],STRSTARTS:["valueLogical","*[&&,valueLogical]"],STRENDS:["valueLogical","*[&&,valueLogical]"],STRBEFORE:["valueLogical","*[&&,valueLogical]"],STRAFTER:["valueLogical","*[&&,valueLogical]"],YEAR:["valueLogical","*[&&,valueLogical]"],MONTH:["valueLogical","*[&&,valueLogical]"],DAY:["valueLogical","*[&&,valueLogical]"],HOURS:["valueLogical","*[&&,valueLogical]"],MINUTES:["valueLogical","*[&&,valueLogical]"],SECONDS:["valueLogical","*[&&,valueLogical]"],TIMEZONE:["valueLogical","*[&&,valueLogical]"],TZ:["valueLogical","*[&&,valueLogical]"],NOW:["valueLogical","*[&&,valueLogical]"],UUID:["valueLogical","*[&&,valueLogical]"],STRUUID:["valueLogical","*[&&,valueLogical]"],MD5:["valueLogical","*[&&,valueLogical]"],SHA1:["valueLogical","*[&&,valueLogical]"],SHA256:["valueLogical","*[&&,valueLogical]"],SHA384:["valueLogical","*[&&,valueLogical]"],SHA512:["valueLogical","*[&&,valueLogical]"],COALESCE:["valueLogical","*[&&,valueLogical]"],IF:["valueLogical","*[&&,valueLogical]"],STRLANG:["valueLogical","*[&&,valueLogical]"],STRDT:["valueLogical","*[&&,valueLogical]"],SAMETERM:["valueLogical","*[&&,valueLogical]"],ISIRI:["valueLogical","*[&&,valueLogical]"],ISURI:["valueLogical","*[&&,valueLogical]"],ISBLANK:["valueLogical","*[&&,valueLogical]"],ISLITERAL:["valueLogical","*[&&,valueLogical]"],ISNUMERIC:["valueLogical","*[&&,valueLogical]"],TRUE:["valueLogical","*[&&,valueLogical]"],FALSE:["valueLogical","*[&&,valueLogical]"],COUNT:["valueLogical","*[&&,valueLogical]"],SUM:["valueLogical","*[&&,valueLogical]"],MIN:["valueLogical","*[&&,valueLogical]"],MAX:["valueLogical","*[&&,valueLogical]"],AVG:["valueLogical","*[&&,valueLogical]"],SAMPLE:["valueLogical","*[&&,valueLogical]"],GROUP_CONCAT:["valueLogical","*[&&,valueLogical]"],SUBSTR:["valueLogical","*[&&,valueLogical]"],REPLACE:["valueLogical","*[&&,valueLogical]"],REGEX:["valueLogical","*[&&,valueLogical]"],EXISTS:["valueLogical","*[&&,valueLogical]"],NOT:["valueLogical","*[&&,valueLogical]"],IRI_REF:["valueLogical","*[&&,valueLogical]"],STRING_LITERAL1:["valueLogical","*[&&,valueLogical]"],STRING_LITERAL2:["valueLogical","*[&&,valueLogical]"],STRING_LITERAL_LONG1:["valueLogical","*[&&,valueLogical]"],STRING_LITERAL_LONG2:["valueLogical","*[&&,valueLogical]"],INTEGER:["valueLogical","*[&&,valueLogical]"],DECIMAL:["valueLogical","*[&&,valueLogical]"],DOUBLE:["valueLogical","*[&&,valueLogical]"],INTEGER_POSITIVE:["valueLogical","*[&&,valueLogical]"],DECIMAL_POSITIVE:["valueLogical","*[&&,valueLogical]"],DOUBLE_POSITIVE:["valueLogical","*[&&,valueLogical]"],INTEGER_NEGATIVE:["valueLogical","*[&&,valueLogical]"],DECIMAL_NEGATIVE:["valueLogical","*[&&,valueLogical]"],DOUBLE_NEGATIVE:["valueLogical","*[&&,valueLogical]"],PNAME_LN:["valueLogical","*[&&,valueLogical]"],PNAME_NS:["valueLogical","*[&&,valueLogical]"]},conditionalOrExpression:{"!":["conditionalAndExpression","*[||,conditionalAndExpression]"],"+":["conditionalAndExpression","*[||,conditionalAndExpression]"],"-":["conditionalAndExpression","*[||,conditionalAndExpression]"],VAR1:["conditionalAndExpression","*[||,conditionalAndExpression]"],VAR2:["conditionalAndExpression","*[||,conditionalAndExpression]"],"(":["conditionalAndExpression","*[||,conditionalAndExpression]"],STR:["conditionalAndExpression","*[||,conditionalAndExpression]"],LANG:["conditionalAndExpression","*[||,conditionalAndExpression]"],LANGMATCHES:["conditionalAndExpression","*[||,conditionalAndExpression]"],DATATYPE:["conditionalAndExpression","*[||,conditionalAndExpression]"],BOUND:["conditionalAndExpression","*[||,conditionalAndExpression]"],IRI:["conditionalAndExpression","*[||,conditionalAndExpression]"],URI:["conditionalAndExpression","*[||,conditionalAndExpression]"],BNODE:["conditionalAndExpression","*[||,conditionalAndExpression]"],RAND:["conditionalAndExpression","*[||,conditionalAndExpression]"],ABS:["conditionalAndExpression","*[||,conditionalAndExpression]"],CEIL:["conditionalAndExpression","*[||,conditionalAndExpression]"],FLOOR:["conditionalAndExpression","*[||,conditionalAndExpression]"],ROUND:["conditionalAndExpression","*[||,conditionalAndExpression]"],CONCAT:["conditionalAndExpression","*[||,conditionalAndExpression]"],STRLEN:["conditionalAndExpression","*[||,conditionalAndExpression]"],UCASE:["conditionalAndExpression","*[||,conditionalAndExpression]"],LCASE:["conditionalAndExpression","*[||,conditionalAndExpression]"],ENCODE_FOR_URI:["conditionalAndExpression","*[||,conditionalAndExpression]"],CONTAINS:["conditionalAndExpression","*[||,conditionalAndExpression]"],STRSTARTS:["conditionalAndExpression","*[||,conditionalAndExpression]"],STRENDS:["conditionalAndExpression","*[||,conditionalAndExpression]"],STRBEFORE:["conditionalAndExpression","*[||,conditionalAndExpression]"],STRAFTER:["conditionalAndExpression","*[||,conditionalAndExpression]"],YEAR:["conditionalAndExpression","*[||,conditionalAndExpression]"],MONTH:["conditionalAndExpression","*[||,conditionalAndExpression]"],DAY:["conditionalAndExpression","*[||,conditionalAndExpression]"],HOURS:["conditionalAndExpression","*[||,conditionalAndExpression]"],MINUTES:["conditionalAndExpression","*[||,conditionalAndExpression]"],SECONDS:["conditionalAndExpression","*[||,conditionalAndExpression]"],TIMEZONE:["conditionalAndExpression","*[||,conditionalAndExpression]"],TZ:["conditionalAndExpression","*[||,conditionalAndExpression]"],NOW:["conditionalAndExpression","*[||,conditionalAndExpression]"],UUID:["conditionalAndExpression","*[||,conditionalAndExpression]"],STRUUID:["conditionalAndExpression","*[||,conditionalAndExpression]"],MD5:["conditionalAndExpression","*[||,conditionalAndExpression]"],SHA1:["conditionalAndExpression","*[||,conditionalAndExpression]"],SHA256:["conditionalAndExpression","*[||,conditionalAndExpression]"],SHA384:["conditionalAndExpression","*[||,conditionalAndExpression]"],SHA512:["conditionalAndExpression","*[||,conditionalAndExpression]"],COALESCE:["conditionalAndExpression","*[||,conditionalAndExpression]"],IF:["conditionalAndExpression","*[||,conditionalAndExpression]"],STRLANG:["conditionalAndExpression","*[||,conditionalAndExpression]"],STRDT:["conditionalAndExpression","*[||,conditionalAndExpression]"],SAMETERM:["conditionalAndExpression","*[||,conditionalAndExpression]"],ISIRI:["conditionalAndExpression","*[||,conditionalAndExpression]"],ISURI:["conditionalAndExpression","*[||,conditionalAndExpression]"],ISBLANK:["conditionalAndExpression","*[||,conditionalAndExpression]"],ISLITERAL:["conditionalAndExpression","*[||,conditionalAndExpression]"],ISNUMERIC:["conditionalAndExpression","*[||,conditionalAndExpression]"],TRUE:["conditionalAndExpression","*[||,conditionalAndExpression]"],FALSE:["conditionalAndExpression","*[||,conditionalAndExpression]"],COUNT:["conditionalAndExpression","*[||,conditionalAndExpression]"],SUM:["conditionalAndExpression","*[||,conditionalAndExpression]"],MIN:["conditionalAndExpression","*[||,conditionalAndExpression]"],MAX:["conditionalAndExpression","*[||,conditionalAndExpression]"],AVG:["conditionalAndExpression","*[||,conditionalAndExpression]"],SAMPLE:["conditionalAndExpression","*[||,conditionalAndExpression]"],GROUP_CONCAT:["conditionalAndExpression","*[||,conditionalAndExpression]"],SUBSTR:["conditionalAndExpression","*[||,conditionalAndExpression]"],REPLACE:["conditionalAndExpression","*[||,conditionalAndExpression]"],REGEX:["conditionalAndExpression","*[||,conditionalAndExpression]"],EXISTS:["conditionalAndExpression","*[||,conditionalAndExpression]"],NOT:["conditionalAndExpression","*[||,conditionalAndExpression]"],IRI_REF:["conditionalAndExpression","*[||,conditionalAndExpression]"],STRING_LITERAL1:["conditionalAndExpression","*[||,conditionalAndExpression]"],STRING_LITERAL2:["conditionalAndExpression","*[||,conditionalAndExpression]"],STRING_LITERAL_LONG1:["conditionalAndExpression","*[||,conditionalAndExpression]"],STRING_LITERAL_LONG2:["conditionalAndExpression","*[||,conditionalAndExpression]"],INTEGER:["conditionalAndExpression","*[||,conditionalAndExpression]"],DECIMAL:["conditionalAndExpression","*[||,conditionalAndExpression]"],DOUBLE:["conditionalAndExpression","*[||,conditionalAndExpression]"],INTEGER_POSITIVE:["conditionalAndExpression","*[||,conditionalAndExpression]"],DECIMAL_POSITIVE:["conditionalAndExpression","*[||,conditionalAndExpression]"],DOUBLE_POSITIVE:["conditionalAndExpression","*[||,conditionalAndExpression]"],INTEGER_NEGATIVE:["conditionalAndExpression","*[||,conditionalAndExpression]"],DECIMAL_NEGATIVE:["conditionalAndExpression","*[||,conditionalAndExpression]"],DOUBLE_NEGATIVE:["conditionalAndExpression","*[||,conditionalAndExpression]"],PNAME_LN:["conditionalAndExpression","*[||,conditionalAndExpression]"],PNAME_NS:["conditionalAndExpression","*[||,conditionalAndExpression]"]},constraint:{"(":["brackettedExpression"],STR:["builtInCall"],LANG:["builtInCall"],LANGMATCHES:["builtInCall"],DATATYPE:["builtInCall"],BOUND:["builtInCall"],IRI:["builtInCall"],URI:["builtInCall"],BNODE:["builtInCall"],RAND:["builtInCall"],ABS:["builtInCall"],CEIL:["builtInCall"],FLOOR:["builtInCall"],ROUND:["builtInCall"],CONCAT:["builtInCall"],STRLEN:["builtInCall"],UCASE:["builtInCall"],LCASE:["builtInCall"],ENCODE_FOR_URI:["builtInCall"],CONTAINS:["builtInCall"],STRSTARTS:["builtInCall"],STRENDS:["builtInCall"],STRBEFORE:["builtInCall"],STRAFTER:["builtInCall"],YEAR:["builtInCall"],MONTH:["builtInCall"],DAY:["builtInCall"],HOURS:["builtInCall"],MINUTES:["builtInCall"],SECONDS:["builtInCall"],TIMEZONE:["builtInCall"],TZ:["builtInCall"],NOW:["builtInCall"],UUID:["builtInCall"],STRUUID:["builtInCall"],MD5:["builtInCall"],SHA1:["builtInCall"],SHA256:["builtInCall"],SHA384:["builtInCall"],SHA512:["builtInCall"],COALESCE:["builtInCall"],IF:["builtInCall"],STRLANG:["builtInCall"],STRDT:["builtInCall"],SAMETERM:["builtInCall"],ISIRI:["builtInCall"],ISURI:["builtInCall"],ISBLANK:["builtInCall"],ISLITERAL:["builtInCall"],ISNUMERIC:["builtInCall"],SUBSTR:["builtInCall"],REPLACE:["builtInCall"],REGEX:["builtInCall"],EXISTS:["builtInCall"],NOT:["builtInCall"],IRI_REF:["functionCall"],PNAME_LN:["functionCall"],PNAME_NS:["functionCall"]},constructQuery:{CONSTRUCT:["CONSTRUCT","or([[constructTemplate,*datasetClause,whereClause,solutionModifier],[*datasetClause,WHERE,{,?triplesTemplate,},solutionModifier]])"]},constructTemplate:{"{":["{","?constructTriples","}"]},constructTriples:{VAR1:["triplesSameSubject","?[.,?constructTriples]"],VAR2:["triplesSameSubject","?[.,?constructTriples]"],NIL:["triplesSameSubject","?[.,?constructTriples]"],"(":["triplesSameSubject","?[.,?constructTriples]"],"[":["triplesSameSubject","?[.,?constructTriples]"],IRI_REF:["triplesSameSubject","?[.,?constructTriples]"],TRUE:["triplesSameSubject","?[.,?constructTriples]"],FALSE:["triplesSameSubject","?[.,?constructTriples]"],BLANK_NODE_LABEL:["triplesSameSubject","?[.,?constructTriples]"],ANON:["triplesSameSubject","?[.,?constructTriples]"],PNAME_LN:["triplesSameSubject","?[.,?constructTriples]"],PNAME_NS:["triplesSameSubject","?[.,?constructTriples]"],STRING_LITERAL1:["triplesSameSubject","?[.,?constructTriples]"],STRING_LITERAL2:["triplesSameSubject","?[.,?constructTriples]"],STRING_LITERAL_LONG1:["triplesSameSubject","?[.,?constructTriples]"],STRING_LITERAL_LONG2:["triplesSameSubject","?[.,?constructTriples]"],INTEGER:["triplesSameSubject","?[.,?constructTriples]"],DECIMAL:["triplesSameSubject","?[.,?constructTriples]"],DOUBLE:["triplesSameSubject","?[.,?constructTriples]"],INTEGER_POSITIVE:["triplesSameSubject","?[.,?constructTriples]"],DECIMAL_POSITIVE:["triplesSameSubject","?[.,?constructTriples]"],DOUBLE_POSITIVE:["triplesSameSubject","?[.,?constructTriples]"],INTEGER_NEGATIVE:["triplesSameSubject","?[.,?constructTriples]"],DECIMAL_NEGATIVE:["triplesSameSubject","?[.,?constructTriples]"],DOUBLE_NEGATIVE:["triplesSameSubject","?[.,?constructTriples]"]},copy:{COPY:["COPY","?SILENT_4","graphOrDefault","TO","graphOrDefault"]},create:{CREATE:["CREATE","?SILENT_3","graphRef"]},dataBlock:{NIL:["or([inlineDataOneVar,inlineDataFull])"],"(":["or([inlineDataOneVar,inlineDataFull])"],VAR1:["or([inlineDataOneVar,inlineDataFull])"],VAR2:["or([inlineDataOneVar,inlineDataFull])"]},dataBlockValue:{IRI_REF:["iriRef"],PNAME_LN:["iriRef"],PNAME_NS:["iriRef"],STRING_LITERAL1:["rdfLiteral"],STRING_LITERAL2:["rdfLiteral"],STRING_LITERAL_LONG1:["rdfLiteral"],STRING_LITERAL_LONG2:["rdfLiteral"],INTEGER:["numericLiteral"],DECIMAL:["numericLiteral"],DOUBLE:["numericLiteral"],INTEGER_POSITIVE:["numericLiteral"],DECIMAL_POSITIVE:["numericLiteral"],DOUBLE_POSITIVE:["numericLiteral"],INTEGER_NEGATIVE:["numericLiteral"],DECIMAL_NEGATIVE:["numericLiteral"],DOUBLE_NEGATIVE:["numericLiteral"],TRUE:["booleanLiteral"],FALSE:["booleanLiteral"],UNDEF:["UNDEF"]},datasetClause:{FROM:["FROM","or([defaultGraphClause,namedGraphClause])"]},defaultGraphClause:{IRI_REF:["sourceSelector"],PNAME_LN:["sourceSelector"],PNAME_NS:["sourceSelector"]},delete1:{DATA:["DATA","quadDataNoBnodes"],WHERE:["WHERE","quadPatternNoBnodes"],"{":["quadPatternNoBnodes","?insertClause","*usingClause","WHERE","groupGraphPattern"]},deleteClause:{DELETE:["DELETE","quadPattern"]},describeDatasetClause:{FROM:["FROM","or([defaultGraphClause,namedGraphClause])"]},describeQuery:{DESCRIBE:["DESCRIBE","or([+varOrIRIref,*])","*describeDatasetClause","?whereClause","solutionModifier"]},disallowBnodes:{"}":[],GRAPH:[],VAR1:[],VAR2:[],NIL:[],"(":[],"[":[],IRI_REF:[],TRUE:[],FALSE:[],BLANK_NODE_LABEL:[],ANON:[],PNAME_LN:[],PNAME_NS:[],STRING_LITERAL1:[],STRING_LITERAL2:[],STRING_LITERAL_LONG1:[],STRING_LITERAL_LONG2:[],INTEGER:[],DECIMAL:[],DOUBLE:[],INTEGER_POSITIVE:[],DECIMAL_POSITIVE:[],DOUBLE_POSITIVE:[],INTEGER_NEGATIVE:[],DECIMAL_NEGATIVE:[],DOUBLE_NEGATIVE:[]},disallowVars:{"}":[],GRAPH:[],VAR1:[],VAR2:[],NIL:[],"(":[],"[":[],IRI_REF:[],TRUE:[],FALSE:[],BLANK_NODE_LABEL:[],ANON:[],PNAME_LN:[],PNAME_NS:[],STRING_LITERAL1:[],STRING_LITERAL2:[],STRING_LITERAL_LONG1:[],STRING_LITERAL_LONG2:[],INTEGER:[],DECIMAL:[],DOUBLE:[],INTEGER_POSITIVE:[],DECIMAL_POSITIVE:[],DOUBLE_POSITIVE:[],INTEGER_NEGATIVE:[],DECIMAL_NEGATIVE:[],DOUBLE_NEGATIVE:[]},drop:{DROP:["DROP","?SILENT_2","graphRefAll"]},existsFunc:{EXISTS:["EXISTS","groupGraphPattern"]},expression:{"!":["conditionalOrExpression"],"+":["conditionalOrExpression"],"-":["conditionalOrExpression"],VAR1:["conditionalOrExpression"],VAR2:["conditionalOrExpression"],"(":["conditionalOrExpression"],STR:["conditionalOrExpression"],LANG:["conditionalOrExpression"],LANGMATCHES:["conditionalOrExpression"],DATATYPE:["conditionalOrExpression"],BOUND:["conditionalOrExpression"],IRI:["conditionalOrExpression"],URI:["conditionalOrExpression"],BNODE:["conditionalOrExpression"],RAND:["conditionalOrExpression"],ABS:["conditionalOrExpression"],CEIL:["conditionalOrExpression"],FLOOR:["conditionalOrExpression"],ROUND:["conditionalOrExpression"],CONCAT:["conditionalOrExpression"],STRLEN:["conditionalOrExpression"],UCASE:["conditionalOrExpression"],LCASE:["conditionalOrExpression"],ENCODE_FOR_URI:["conditionalOrExpression"],CONTAINS:["conditionalOrExpression"],STRSTARTS:["conditionalOrExpression"],STRENDS:["conditionalOrExpression"],STRBEFORE:["conditionalOrExpression"],STRAFTER:["conditionalOrExpression"],YEAR:["conditionalOrExpression"],MONTH:["conditionalOrExpression"],DAY:["conditionalOrExpression"],HOURS:["conditionalOrExpression"],MINUTES:["conditionalOrExpression"],SECONDS:["conditionalOrExpression"],TIMEZONE:["conditionalOrExpression"],TZ:["conditionalOrExpression"],NOW:["conditionalOrExpression"],UUID:["conditionalOrExpression"],STRUUID:["conditionalOrExpression"],MD5:["conditionalOrExpression"],SHA1:["conditionalOrExpression"],SHA256:["conditionalOrExpression"],SHA384:["conditionalOrExpression"],SHA512:["conditionalOrExpression"],COALESCE:["conditionalOrExpression"],IF:["conditionalOrExpression"],STRLANG:["conditionalOrExpression"],STRDT:["conditionalOrExpression"],SAMETERM:["conditionalOrExpression"],ISIRI:["conditionalOrExpression"],ISURI:["conditionalOrExpression"],ISBLANK:["conditionalOrExpression"],ISLITERAL:["conditionalOrExpression"],ISNUMERIC:["conditionalOrExpression"],TRUE:["conditionalOrExpression"],FALSE:["conditionalOrExpression"],COUNT:["conditionalOrExpression"],SUM:["conditionalOrExpression"],MIN:["conditionalOrExpression"],MAX:["conditionalOrExpression"],AVG:["conditionalOrExpression"],SAMPLE:["conditionalOrExpression"],GROUP_CONCAT:["conditionalOrExpression"],SUBSTR:["conditionalOrExpression"],REPLACE:["conditionalOrExpression"],REGEX:["conditionalOrExpression"],EXISTS:["conditionalOrExpression"],NOT:["conditionalOrExpression"],IRI_REF:["conditionalOrExpression"],STRING_LITERAL1:["conditionalOrExpression"],STRING_LITERAL2:["conditionalOrExpression"],STRING_LITERAL_LONG1:["conditionalOrExpression"],STRING_LITERAL_LONG2:["conditionalOrExpression"],INTEGER:["conditionalOrExpression"],DECIMAL:["conditionalOrExpression"],DOUBLE:["conditionalOrExpression"],INTEGER_POSITIVE:["conditionalOrExpression"],DECIMAL_POSITIVE:["conditionalOrExpression"],DOUBLE_POSITIVE:["conditionalOrExpression"],INTEGER_NEGATIVE:["conditionalOrExpression"],DECIMAL_NEGATIVE:["conditionalOrExpression"],DOUBLE_NEGATIVE:["conditionalOrExpression"],PNAME_LN:["conditionalOrExpression"],PNAME_NS:["conditionalOrExpression"]},expressionList:{NIL:["NIL"],"(":["(","expression","*[,,expression]",")"]},filter:{FILTER:["FILTER","constraint"]},functionCall:{IRI_REF:["iriRef","argList"],PNAME_LN:["iriRef","argList"],PNAME_NS:["iriRef","argList"]},graphGraphPattern:{GRAPH:["GRAPH","varOrIRIref","groupGraphPattern"]},graphNode:{VAR1:["varOrTerm"],VAR2:["varOrTerm"],NIL:["varOrTerm"],IRI_REF:["varOrTerm"],TRUE:["varOrTerm"],FALSE:["varOrTerm"],BLANK_NODE_LABEL:["varOrTerm"],ANON:["varOrTerm"],PNAME_LN:["varOrTerm"],PNAME_NS:["varOrTerm"],STRING_LITERAL1:["varOrTerm"],STRING_LITERAL2:["varOrTerm"],STRING_LITERAL_LONG1:["varOrTerm"],STRING_LITERAL_LONG2:["varOrTerm"],INTEGER:["varOrTerm"],DECIMAL:["varOrTerm"],DOUBLE:["varOrTerm"],INTEGER_POSITIVE:["varOrTerm"],DECIMAL_POSITIVE:["varOrTerm"],DOUBLE_POSITIVE:["varOrTerm"],INTEGER_NEGATIVE:["varOrTerm"],DECIMAL_NEGATIVE:["varOrTerm"],DOUBLE_NEGATIVE:["varOrTerm"],"(":["triplesNode"],"[":["triplesNode"]},graphNodePath:{VAR1:["varOrTerm"],VAR2:["varOrTerm"],NIL:["varOrTerm"],IRI_REF:["varOrTerm"],TRUE:["varOrTerm"],FALSE:["varOrTerm"],BLANK_NODE_LABEL:["varOrTerm"],ANON:["varOrTerm"],PNAME_LN:["varOrTerm"],PNAME_NS:["varOrTerm"],STRING_LITERAL1:["varOrTerm"],STRING_LITERAL2:["varOrTerm"],STRING_LITERAL_LONG1:["varOrTerm"],STRING_LITERAL_LONG2:["varOrTerm"],INTEGER:["varOrTerm"],DECIMAL:["varOrTerm"],DOUBLE:["varOrTerm"],INTEGER_POSITIVE:["varOrTerm"],DECIMAL_POSITIVE:["varOrTerm"],DOUBLE_POSITIVE:["varOrTerm"],INTEGER_NEGATIVE:["varOrTerm"],DECIMAL_NEGATIVE:["varOrTerm"],DOUBLE_NEGATIVE:["varOrTerm"],"(":["triplesNodePath"],"[":["triplesNodePath"]},graphOrDefault:{DEFAULT:["DEFAULT"],IRI_REF:["?GRAPH","iriRef"],PNAME_LN:["?GRAPH","iriRef"],PNAME_NS:["?GRAPH","iriRef"],GRAPH:["?GRAPH","iriRef"]},graphPatternNotTriples:{"{":["groupOrUnionGraphPattern"],OPTIONAL:["optionalGraphPattern"],MINUS:["minusGraphPattern"],GRAPH:["graphGraphPattern"],SERVICE:["serviceGraphPattern"],FILTER:["filter"],BIND:["bind"],VALUES:["inlineData"]},graphRef:{GRAPH:["GRAPH","iriRef"]},graphRefAll:{GRAPH:["graphRef"],DEFAULT:["DEFAULT"],NAMED:["NAMED"],ALL:["ALL"]},graphTerm:{IRI_REF:["iriRef"],PNAME_LN:["iriRef"],PNAME_NS:["iriRef"],STRING_LITERAL1:["rdfLiteral"],STRING_LITERAL2:["rdfLiteral"],STRING_LITERAL_LONG1:["rdfLiteral"],STRING_LITERAL_LONG2:["rdfLiteral"],INTEGER:["numericLiteral"],DECIMAL:["numericLiteral"],DOUBLE:["numericLiteral"],INTEGER_POSITIVE:["numericLiteral"],DECIMAL_POSITIVE:["numericLiteral"],DOUBLE_POSITIVE:["numericLiteral"],INTEGER_NEGATIVE:["numericLiteral"],DECIMAL_NEGATIVE:["numericLiteral"],DOUBLE_NEGATIVE:["numericLiteral"],TRUE:["booleanLiteral"],FALSE:["booleanLiteral"],BLANK_NODE_LABEL:["blankNode"],ANON:["blankNode"],NIL:["NIL"]},groupClause:{GROUP:["GROUP","BY","+groupCondition"]},groupCondition:{STR:["builtInCall"],LANG:["builtInCall"],LANGMATCHES:["builtInCall"],DATATYPE:["builtInCall"],BOUND:["builtInCall"],IRI:["builtInCall"],URI:["builtInCall"],BNODE:["builtInCall"],RAND:["builtInCall"],ABS:["builtInCall"],CEIL:["builtInCall"],FLOOR:["builtInCall"],ROUND:["builtInCall"],CONCAT:["builtInCall"],STRLEN:["builtInCall"],UCASE:["builtInCall"],LCASE:["builtInCall"],ENCODE_FOR_URI:["builtInCall"],CONTAINS:["builtInCall"],STRSTARTS:["builtInCall"],STRENDS:["builtInCall"],STRBEFORE:["builtInCall"],STRAFTER:["builtInCall"],YEAR:["builtInCall"],MONTH:["builtInCall"],DAY:["builtInCall"],HOURS:["builtInCall"],MINUTES:["builtInCall"],SECONDS:["builtInCall"],TIMEZONE:["builtInCall"],TZ:["builtInCall"],NOW:["builtInCall"],UUID:["builtInCall"],STRUUID:["builtInCall"],MD5:["builtInCall"],SHA1:["builtInCall"],SHA256:["builtInCall"],SHA384:["builtInCall"],SHA512:["builtInCall"],COALESCE:["builtInCall"],IF:["builtInCall"],STRLANG:["builtInCall"],STRDT:["builtInCall"],SAMETERM:["builtInCall"],ISIRI:["builtInCall"],ISURI:["builtInCall"],ISBLANK:["builtInCall"],ISLITERAL:["builtInCall"],ISNUMERIC:["builtInCall"],SUBSTR:["builtInCall"],REPLACE:["builtInCall"],REGEX:["builtInCall"],EXISTS:["builtInCall"],NOT:["builtInCall"],IRI_REF:["functionCall"],PNAME_LN:["functionCall"],PNAME_NS:["functionCall"],"(":["(","expression","?[AS,var]",")"],VAR1:["var"],VAR2:["var"]},groupGraphPattern:{"{":["{","or([subSelect,groupGraphPatternSub])","}"]},groupGraphPatternSub:{"{":["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],OPTIONAL:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],MINUS:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],GRAPH:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],SERVICE:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],FILTER:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],BIND:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],VALUES:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],VAR1:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],VAR2:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],NIL:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],"(":["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],"[":["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],IRI_REF:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],TRUE:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],FALSE:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],BLANK_NODE_LABEL:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],ANON:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],PNAME_LN:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],PNAME_NS:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],STRING_LITERAL1:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],STRING_LITERAL2:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],STRING_LITERAL_LONG1:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],STRING_LITERAL_LONG2:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],INTEGER:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],DECIMAL:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],DOUBLE:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],INTEGER_POSITIVE:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],DECIMAL_POSITIVE:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],DOUBLE_POSITIVE:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],INTEGER_NEGATIVE:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],DECIMAL_NEGATIVE:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],DOUBLE_NEGATIVE:["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"],"}":["?triplesBlock","*[graphPatternNotTriples,?.,?triplesBlock]"]},groupOrUnionGraphPattern:{"{":["groupGraphPattern","*[UNION,groupGraphPattern]"]},havingClause:{HAVING:["HAVING","+havingCondition"]},havingCondition:{"(":["constraint"],STR:["constraint"],LANG:["constraint"],LANGMATCHES:["constraint"],DATATYPE:["constraint"],BOUND:["constraint"],IRI:["constraint"],URI:["constraint"],BNODE:["constraint"],RAND:["constraint"],ABS:["constraint"],CEIL:["constraint"],FLOOR:["constraint"],ROUND:["constraint"],CONCAT:["constraint"],STRLEN:["constraint"],UCASE:["constraint"],LCASE:["constraint"],ENCODE_FOR_URI:["constraint"],CONTAINS:["constraint"],STRSTARTS:["constraint"],STRENDS:["constraint"],STRBEFORE:["constraint"],STRAFTER:["constraint"],YEAR:["constraint"],MONTH:["constraint"],DAY:["constraint"],HOURS:["constraint"],MINUTES:["constraint"],SECONDS:["constraint"],TIMEZONE:["constraint"],TZ:["constraint"],NOW:["constraint"],UUID:["constraint"],STRUUID:["constraint"],MD5:["constraint"],SHA1:["constraint"],SHA256:["constraint"],SHA384:["constraint"],SHA512:["constraint"],COALESCE:["constraint"],IF:["constraint"],STRLANG:["constraint"],STRDT:["constraint"],SAMETERM:["constraint"],ISIRI:["constraint"],ISURI:["constraint"],ISBLANK:["constraint"],ISLITERAL:["constraint"],ISNUMERIC:["constraint"],SUBSTR:["constraint"],REPLACE:["constraint"],REGEX:["constraint"],EXISTS:["constraint"],NOT:["constraint"],IRI_REF:["constraint"],PNAME_LN:["constraint"],PNAME_NS:["constraint"]},inlineData:{VALUES:["VALUES","dataBlock"]},inlineDataFull:{NIL:["or([NIL,[ (,*var,)]])","{","*or([[ (,*dataBlockValue,)],NIL])","}"],"(":["or([NIL,[ (,*var,)]])","{","*or([[ (,*dataBlockValue,)],NIL])","}"]},inlineDataOneVar:{VAR1:["var","{","*dataBlockValue","}"],VAR2:["var","{","*dataBlockValue","}"]},insert1:{DATA:["DATA","quadData"],"{":["quadPattern","*usingClause","WHERE","groupGraphPattern"]},insertClause:{INSERT:["INSERT","quadPattern"]},integer:{INTEGER:["INTEGER"]},iriRef:{IRI_REF:["IRI_REF"],PNAME_LN:["prefixedName"],PNAME_NS:["prefixedName"]},iriRefOrFunction:{IRI_REF:["iriRef","?argList"],PNAME_LN:["iriRef","?argList"],PNAME_NS:["iriRef","?argList"]},limitClause:{LIMIT:["LIMIT","INTEGER"]},limitOffsetClauses:{LIMIT:["limitClause","?offsetClause"],OFFSET:["offsetClause","?limitClause"]},load:{LOAD:["LOAD","?SILENT_1","iriRef","?[INTO,graphRef]"]},minusGraphPattern:{MINUS:["MINUS","groupGraphPattern"]},modify:{WITH:["WITH","iriRef","or([[deleteClause,?insertClause],insertClause])","*usingClause","WHERE","groupGraphPattern"]},move:{MOVE:["MOVE","?SILENT_4","graphOrDefault","TO","graphOrDefault"]},multiplicativeExpression:{"!":["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],"+":["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],"-":["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],VAR1:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],VAR2:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],"(":["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],STR:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],LANG:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],LANGMATCHES:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],DATATYPE:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],BOUND:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],IRI:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],URI:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],BNODE:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],RAND:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],ABS:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],CEIL:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],FLOOR:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],ROUND:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],CONCAT:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],STRLEN:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],UCASE:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],LCASE:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],ENCODE_FOR_URI:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],CONTAINS:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],STRSTARTS:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],STRENDS:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],STRBEFORE:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],STRAFTER:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],YEAR:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],MONTH:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],DAY:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],HOURS:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],MINUTES:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],SECONDS:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],TIMEZONE:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],TZ:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],NOW:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],UUID:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],STRUUID:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],MD5:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],SHA1:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],SHA256:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],SHA384:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],SHA512:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],COALESCE:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],IF:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],STRLANG:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],STRDT:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],SAMETERM:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],ISIRI:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],ISURI:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],ISBLANK:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],ISLITERAL:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],ISNUMERIC:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],TRUE:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],FALSE:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],COUNT:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],SUM:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],MIN:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],MAX:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],AVG:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],SAMPLE:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],GROUP_CONCAT:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],SUBSTR:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],REPLACE:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],REGEX:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],EXISTS:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],NOT:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],IRI_REF:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],STRING_LITERAL1:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],STRING_LITERAL2:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],STRING_LITERAL_LONG1:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],STRING_LITERAL_LONG2:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],INTEGER:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],DECIMAL:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],DOUBLE:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],INTEGER_POSITIVE:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],DECIMAL_POSITIVE:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],DOUBLE_POSITIVE:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],INTEGER_NEGATIVE:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],DECIMAL_NEGATIVE:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],DOUBLE_NEGATIVE:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],PNAME_LN:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"],PNAME_NS:["unaryExpression","*or([[*,unaryExpression],[/,unaryExpression]])"]},namedGraphClause:{NAMED:["NAMED","sourceSelector"]},notExistsFunc:{NOT:["NOT","EXISTS","groupGraphPattern"]},numericExpression:{"!":["additiveExpression"],"+":["additiveExpression"],"-":["additiveExpression"],VAR1:["additiveExpression"],VAR2:["additiveExpression"],"(":["additiveExpression"],STR:["additiveExpression"],LANG:["additiveExpression"],LANGMATCHES:["additiveExpression"],DATATYPE:["additiveExpression"],BOUND:["additiveExpression"],IRI:["additiveExpression"],URI:["additiveExpression"],BNODE:["additiveExpression"],RAND:["additiveExpression"],ABS:["additiveExpression"],CEIL:["additiveExpression"],FLOOR:["additiveExpression"],ROUND:["additiveExpression"],CONCAT:["additiveExpression"],STRLEN:["additiveExpression"],UCASE:["additiveExpression"],LCASE:["additiveExpression"],ENCODE_FOR_URI:["additiveExpression"],CONTAINS:["additiveExpression"],STRSTARTS:["additiveExpression"],STRENDS:["additiveExpression"],STRBEFORE:["additiveExpression"],STRAFTER:["additiveExpression"],YEAR:["additiveExpression"],MONTH:["additiveExpression"],DAY:["additiveExpression"],HOURS:["additiveExpression"],MINUTES:["additiveExpression"],SECONDS:["additiveExpression"],TIMEZONE:["additiveExpression"],TZ:["additiveExpression"],NOW:["additiveExpression"],UUID:["additiveExpression"],STRUUID:["additiveExpression"],MD5:["additiveExpression"],SHA1:["additiveExpression"],SHA256:["additiveExpression"],SHA384:["additiveExpression"],SHA512:["additiveExpression"],COALESCE:["additiveExpression"],IF:["additiveExpression"],STRLANG:["additiveExpression"],STRDT:["additiveExpression"],SAMETERM:["additiveExpression"],ISIRI:["additiveExpression"],ISURI:["additiveExpression"],ISBLANK:["additiveExpression"],ISLITERAL:["additiveExpression"],ISNUMERIC:["additiveExpression"],TRUE:["additiveExpression"],FALSE:["additiveExpression"],COUNT:["additiveExpression"],SUM:["additiveExpression"],MIN:["additiveExpression"],MAX:["additiveExpression"],AVG:["additiveExpression"],SAMPLE:["additiveExpression"],GROUP_CONCAT:["additiveExpression"],SUBSTR:["additiveExpression"],REPLACE:["additiveExpression"],REGEX:["additiveExpression"],EXISTS:["additiveExpression"],NOT:["additiveExpression"],IRI_REF:["additiveExpression"],STRING_LITERAL1:["additiveExpression"],STRING_LITERAL2:["additiveExpression"],STRING_LITERAL_LONG1:["additiveExpression"],STRING_LITERAL_LONG2:["additiveExpression"],INTEGER:["additiveExpression"],DECIMAL:["additiveExpression"],DOUBLE:["additiveExpression"],INTEGER_POSITIVE:["additiveExpression"],DECIMAL_POSITIVE:["additiveExpression"],DOUBLE_POSITIVE:["additiveExpression"],INTEGER_NEGATIVE:["additiveExpression"],DECIMAL_NEGATIVE:["additiveExpression"],DOUBLE_NEGATIVE:["additiveExpression"],PNAME_LN:["additiveExpression"],PNAME_NS:["additiveExpression"]},numericLiteral:{INTEGER:["numericLiteralUnsigned"],DECIMAL:["numericLiteralUnsigned"],DOUBLE:["numericLiteralUnsigned"],INTEGER_POSITIVE:["numericLiteralPositive"],DECIMAL_POSITIVE:["numericLiteralPositive"],DOUBLE_POSITIVE:["numericLiteralPositive"],INTEGER_NEGATIVE:["numericLiteralNegative"],DECIMAL_NEGATIVE:["numericLiteralNegative"],DOUBLE_NEGATIVE:["numericLiteralNegative"]},numericLiteralNegative:{INTEGER_NEGATIVE:["INTEGER_NEGATIVE"],DECIMAL_NEGATIVE:["DECIMAL_NEGATIVE"],DOUBLE_NEGATIVE:["DOUBLE_NEGATIVE"]},numericLiteralPositive:{INTEGER_POSITIVE:["INTEGER_POSITIVE"],DECIMAL_POSITIVE:["DECIMAL_POSITIVE"],DOUBLE_POSITIVE:["DOUBLE_POSITIVE"]},numericLiteralUnsigned:{INTEGER:["INTEGER"],DECIMAL:["DECIMAL"],DOUBLE:["DOUBLE"]},object:{"(":["graphNode"],"[":["graphNode"],VAR1:["graphNode"],VAR2:["graphNode"],NIL:["graphNode"],IRI_REF:["graphNode"],TRUE:["graphNode"],FALSE:["graphNode"],BLANK_NODE_LABEL:["graphNode"],ANON:["graphNode"],PNAME_LN:["graphNode"],PNAME_NS:["graphNode"],STRING_LITERAL1:["graphNode"],STRING_LITERAL2:["graphNode"],STRING_LITERAL_LONG1:["graphNode"],STRING_LITERAL_LONG2:["graphNode"],INTEGER:["graphNode"],DECIMAL:["graphNode"],DOUBLE:["graphNode"],INTEGER_POSITIVE:["graphNode"],DECIMAL_POSITIVE:["graphNode"],DOUBLE_POSITIVE:["graphNode"],INTEGER_NEGATIVE:["graphNode"],DECIMAL_NEGATIVE:["graphNode"],DOUBLE_NEGATIVE:["graphNode"]},objectList:{"(":["object","*[,,object]"],"[":["object","*[,,object]"],VAR1:["object","*[,,object]"],VAR2:["object","*[,,object]"],NIL:["object","*[,,object]"],IRI_REF:["object","*[,,object]"],TRUE:["object","*[,,object]"],FALSE:["object","*[,,object]"],BLANK_NODE_LABEL:["object","*[,,object]"],ANON:["object","*[,,object]"],PNAME_LN:["object","*[,,object]"],PNAME_NS:["object","*[,,object]"],STRING_LITERAL1:["object","*[,,object]"],STRING_LITERAL2:["object","*[,,object]"],STRING_LITERAL_LONG1:["object","*[,,object]"],STRING_LITERAL_LONG2:["object","*[,,object]"],INTEGER:["object","*[,,object]"],DECIMAL:["object","*[,,object]"],DOUBLE:["object","*[,,object]"],INTEGER_POSITIVE:["object","*[,,object]"],DECIMAL_POSITIVE:["object","*[,,object]"],DOUBLE_POSITIVE:["object","*[,,object]"],INTEGER_NEGATIVE:["object","*[,,object]"],DECIMAL_NEGATIVE:["object","*[,,object]"],DOUBLE_NEGATIVE:["object","*[,,object]"]},objectListPath:{"(":["objectPath","*[,,objectPath]"],"[":["objectPath","*[,,objectPath]"],VAR1:["objectPath","*[,,objectPath]"],VAR2:["objectPath","*[,,objectPath]"],NIL:["objectPath","*[,,objectPath]"],IRI_REF:["objectPath","*[,,objectPath]"],TRUE:["objectPath","*[,,objectPath]"],FALSE:["objectPath","*[,,objectPath]"],BLANK_NODE_LABEL:["objectPath","*[,,objectPath]"],ANON:["objectPath","*[,,objectPath]"],PNAME_LN:["objectPath","*[,,objectPath]"],PNAME_NS:["objectPath","*[,,objectPath]"],STRING_LITERAL1:["objectPath","*[,,objectPath]"],STRING_LITERAL2:["objectPath","*[,,objectPath]"],STRING_LITERAL_LONG1:["objectPath","*[,,objectPath]"],STRING_LITERAL_LONG2:["objectPath","*[,,objectPath]"],INTEGER:["objectPath","*[,,objectPath]"],DECIMAL:["objectPath","*[,,objectPath]"],DOUBLE:["objectPath","*[,,objectPath]"],INTEGER_POSITIVE:["objectPath","*[,,objectPath]"],DECIMAL_POSITIVE:["objectPath","*[,,objectPath]"],DOUBLE_POSITIVE:["objectPath","*[,,objectPath]"],INTEGER_NEGATIVE:["objectPath","*[,,objectPath]"],DECIMAL_NEGATIVE:["objectPath","*[,,objectPath]"],DOUBLE_NEGATIVE:["objectPath","*[,,objectPath]"]},objectPath:{"(":["graphNodePath"],"[":["graphNodePath"],VAR1:["graphNodePath"],VAR2:["graphNodePath"],NIL:["graphNodePath"],IRI_REF:["graphNodePath"],TRUE:["graphNodePath"],FALSE:["graphNodePath"],BLANK_NODE_LABEL:["graphNodePath"],ANON:["graphNodePath"],PNAME_LN:["graphNodePath"],PNAME_NS:["graphNodePath"],STRING_LITERAL1:["graphNodePath"],STRING_LITERAL2:["graphNodePath"],STRING_LITERAL_LONG1:["graphNodePath"],STRING_LITERAL_LONG2:["graphNodePath"],INTEGER:["graphNodePath"],DECIMAL:["graphNodePath"],DOUBLE:["graphNodePath"],INTEGER_POSITIVE:["graphNodePath"],DECIMAL_POSITIVE:["graphNodePath"],DOUBLE_POSITIVE:["graphNodePath"],INTEGER_NEGATIVE:["graphNodePath"],DECIMAL_NEGATIVE:["graphNodePath"],DOUBLE_NEGATIVE:["graphNodePath"]},offsetClause:{OFFSET:["OFFSET","INTEGER"]},optionalGraphPattern:{OPTIONAL:["OPTIONAL","groupGraphPattern"]},"or([*,expression])":{"*":["*"],"!":["expression"],"+":["expression"],"-":["expression"],VAR1:["expression"],VAR2:["expression"],"(":["expression"],STR:["expression"],LANG:["expression"],LANGMATCHES:["expression"],DATATYPE:["expression"],BOUND:["expression"],IRI:["expression"],URI:["expression"],BNODE:["expression"],RAND:["expression"],ABS:["expression"],CEIL:["expression"],FLOOR:["expression"],ROUND:["expression"],CONCAT:["expression"],STRLEN:["expression"],UCASE:["expression"],LCASE:["expression"],ENCODE_FOR_URI:["expression"],CONTAINS:["expression"],STRSTARTS:["expression"],STRENDS:["expression"],STRBEFORE:["expression"],STRAFTER:["expression"],YEAR:["expression"],MONTH:["expression"],DAY:["expression"],HOURS:["expression"],MINUTES:["expression"],SECONDS:["expression"],TIMEZONE:["expression"],TZ:["expression"],NOW:["expression"],UUID:["expression"],STRUUID:["expression"],MD5:["expression"],SHA1:["expression"],SHA256:["expression"],SHA384:["expression"],SHA512:["expression"],COALESCE:["expression"],IF:["expression"],STRLANG:["expression"],STRDT:["expression"],SAMETERM:["expression"],ISIRI:["expression"],ISURI:["expression"],ISBLANK:["expression"],ISLITERAL:["expression"],ISNUMERIC:["expression"],TRUE:["expression"],FALSE:["expression"],COUNT:["expression"],SUM:["expression"],MIN:["expression"],MAX:["expression"],AVG:["expression"],SAMPLE:["expression"],GROUP_CONCAT:["expression"],SUBSTR:["expression"],REPLACE:["expression"],REGEX:["expression"],EXISTS:["expression"],NOT:["expression"],IRI_REF:["expression"],STRING_LITERAL1:["expression"],STRING_LITERAL2:["expression"],STRING_LITERAL_LONG1:["expression"],STRING_LITERAL_LONG2:["expression"],INTEGER:["expression"],DECIMAL:["expression"],DOUBLE:["expression"],INTEGER_POSITIVE:["expression"],DECIMAL_POSITIVE:["expression"],DOUBLE_POSITIVE:["expression"],INTEGER_NEGATIVE:["expression"],DECIMAL_NEGATIVE:["expression"],DOUBLE_NEGATIVE:["expression"],PNAME_LN:["expression"],PNAME_NS:["expression"]},"or([+or([var,[ (,expression,AS,var,)]]),*])":{"(":["+or([var,[ (,expression,AS,var,)]])"],VAR1:["+or([var,[ (,expression,AS,var,)]])"],VAR2:["+or([var,[ (,expression,AS,var,)]])"],"*":["*"]},"or([+varOrIRIref,*])":{VAR1:["+varOrIRIref"],VAR2:["+varOrIRIref"],IRI_REF:["+varOrIRIref"],PNAME_LN:["+varOrIRIref"],PNAME_NS:["+varOrIRIref"],"*":["*"]},"or([ASC,DESC])":{ASC:["ASC"],DESC:["DESC"]},"or([DISTINCT,REDUCED])":{DISTINCT:["DISTINCT"],REDUCED:["REDUCED"]},"or([LANGTAG,[^^,iriRef]])":{LANGTAG:["LANGTAG"],"^^":["[^^,iriRef]"]},"or([NIL,[ (,*var,)]])":{NIL:["NIL"],"(":["[ (,*var,)]"]},"or([[ (,*dataBlockValue,)],NIL])":{"(":["[ (,*dataBlockValue,)]"],NIL:["NIL"]},"or([[ (,expression,)],NIL])":{"(":["[ (,expression,)]"],NIL:["NIL"]},"or([[*,unaryExpression],[/,unaryExpression]])":{"*":["[*,unaryExpression]"],"/":["[/,unaryExpression]"]},"or([[+,multiplicativeExpression],[-,multiplicativeExpression],[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]])":{"+":["[+,multiplicativeExpression]"],"-":["[-,multiplicativeExpression]"],INTEGER_POSITIVE:["[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]"],DECIMAL_POSITIVE:["[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]"],DOUBLE_POSITIVE:["[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]"],INTEGER_NEGATIVE:["[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]"],DECIMAL_NEGATIVE:["[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]"],DOUBLE_NEGATIVE:["[or([numericLiteralPositive,numericLiteralNegative]),?or([[*,unaryExpression],[/,unaryExpression]])]"]},"or([[,,or([},[integer,}]])],}])":{",":["[,,or([},[integer,}]])]"],"}":["}"]},"or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])":{"=":["[=,numericExpression]"],"!=":["[!=,numericExpression]"],"<":["[<,numericExpression]"],">":["[>,numericExpression]"],"<=":["[<=,numericExpression]"],">=":["[>=,numericExpression]"],IN:["[IN,expressionList]"],NOT:["[NOT,IN,expressionList]"]},"or([[constructTemplate,*datasetClause,whereClause,solutionModifier],[*datasetClause,WHERE,{,?triplesTemplate,},solutionModifier]])":{"{":["[constructTemplate,*datasetClause,whereClause,solutionModifier]"],WHERE:["[*datasetClause,WHERE,{,?triplesTemplate,},solutionModifier]"],FROM:["[*datasetClause,WHERE,{,?triplesTemplate,},solutionModifier]"]},"or([[deleteClause,?insertClause],insertClause])":{DELETE:["[deleteClause,?insertClause]"],INSERT:["insertClause"]},"or([[integer,or([[,,or([},[integer,}]])],}])],[,,integer,}]])":{INTEGER:["[integer,or([[,,or([},[integer,}]])],}])]"],",":["[,,integer,}]"]},"or([baseDecl,prefixDecl])":{BASE:["baseDecl"],PREFIX:["prefixDecl"]},"or([defaultGraphClause,namedGraphClause])":{IRI_REF:["defaultGraphClause"],PNAME_LN:["defaultGraphClause"],PNAME_NS:["defaultGraphClause"],NAMED:["namedGraphClause"]},"or([inlineDataOneVar,inlineDataFull])":{VAR1:["inlineDataOneVar"],VAR2:["inlineDataOneVar"],NIL:["inlineDataFull"],"(":["inlineDataFull"]},"or([iriRef,[NAMED,iriRef]])":{IRI_REF:["iriRef"],PNAME_LN:["iriRef"],PNAME_NS:["iriRef"],NAMED:["[NAMED,iriRef]"]},"or([iriRef,a])":{IRI_REF:["iriRef"],PNAME_LN:["iriRef"],PNAME_NS:["iriRef"],a:["a"]},"or([numericLiteralPositive,numericLiteralNegative])":{INTEGER_POSITIVE:["numericLiteralPositive"],DECIMAL_POSITIVE:["numericLiteralPositive"],DOUBLE_POSITIVE:["numericLiteralPositive"],INTEGER_NEGATIVE:["numericLiteralNegative"],DECIMAL_NEGATIVE:["numericLiteralNegative"],DOUBLE_NEGATIVE:["numericLiteralNegative"]},"or([queryAll,updateAll])":{CONSTRUCT:["queryAll"],DESCRIBE:["queryAll"],ASK:["queryAll"],SELECT:["queryAll"],INSERT:["updateAll"],DELETE:["updateAll"],LOAD:["updateAll"],CLEAR:["updateAll"],DROP:["updateAll"],ADD:["updateAll"],MOVE:["updateAll"],COPY:["updateAll"],CREATE:["updateAll"],WITH:["updateAll"],$:["updateAll"]},"or([selectQuery,constructQuery,describeQuery,askQuery])":{SELECT:["selectQuery"],CONSTRUCT:["constructQuery"],DESCRIBE:["describeQuery"],ASK:["askQuery"]},"or([subSelect,groupGraphPatternSub])":{SELECT:["subSelect"],"{":["groupGraphPatternSub"],OPTIONAL:["groupGraphPatternSub"],MINUS:["groupGraphPatternSub"],GRAPH:["groupGraphPatternSub"],SERVICE:["groupGraphPatternSub"],FILTER:["groupGraphPatternSub"],BIND:["groupGraphPatternSub"],VALUES:["groupGraphPatternSub"],VAR1:["groupGraphPatternSub"],VAR2:["groupGraphPatternSub"],NIL:["groupGraphPatternSub"],"(":["groupGraphPatternSub"],"[":["groupGraphPatternSub"],IRI_REF:["groupGraphPatternSub"],TRUE:["groupGraphPatternSub"],FALSE:["groupGraphPatternSub"],BLANK_NODE_LABEL:["groupGraphPatternSub"],ANON:["groupGraphPatternSub"],PNAME_LN:["groupGraphPatternSub"],PNAME_NS:["groupGraphPatternSub"],STRING_LITERAL1:["groupGraphPatternSub"],STRING_LITERAL2:["groupGraphPatternSub"],STRING_LITERAL_LONG1:["groupGraphPatternSub"],STRING_LITERAL_LONG2:["groupGraphPatternSub"],INTEGER:["groupGraphPatternSub"],DECIMAL:["groupGraphPatternSub"],DOUBLE:["groupGraphPatternSub"],INTEGER_POSITIVE:["groupGraphPatternSub"],DECIMAL_POSITIVE:["groupGraphPatternSub"],DOUBLE_POSITIVE:["groupGraphPatternSub"],INTEGER_NEGATIVE:["groupGraphPatternSub"],DECIMAL_NEGATIVE:["groupGraphPatternSub"],DOUBLE_NEGATIVE:["groupGraphPatternSub"],"}":["groupGraphPatternSub"]},"or([var,[ (,expression,AS,var,)]])":{VAR1:["var"],VAR2:["var"],"(":["[ (,expression,AS,var,)]"]},"or([verbPath,verbSimple])":{"^":["verbPath"],a:["verbPath"],"!":["verbPath"],"(":["verbPath"],IRI_REF:["verbPath"],PNAME_LN:["verbPath"],PNAME_NS:["verbPath"],VAR1:["verbSimple"],VAR2:["verbSimple"]},"or([},[integer,}]])":{"}":["}"],INTEGER:["[integer,}]"]},orderClause:{ORDER:["ORDER","BY","+orderCondition"]},orderCondition:{ASC:["or([ASC,DESC])","brackettedExpression"],DESC:["or([ASC,DESC])","brackettedExpression"],"(":["constraint"],STR:["constraint"],LANG:["constraint"],LANGMATCHES:["constraint"],DATATYPE:["constraint"],BOUND:["constraint"],IRI:["constraint"],URI:["constraint"],BNODE:["constraint"],RAND:["constraint"],ABS:["constraint"],CEIL:["constraint"],FLOOR:["constraint"],ROUND:["constraint"],CONCAT:["constraint"],STRLEN:["constraint"],UCASE:["constraint"],LCASE:["constraint"],ENCODE_FOR_URI:["constraint"],CONTAINS:["constraint"],STRSTARTS:["constraint"],STRENDS:["constraint"],STRBEFORE:["constraint"],STRAFTER:["constraint"],YEAR:["constraint"],MONTH:["constraint"],DAY:["constraint"],HOURS:["constraint"],MINUTES:["constraint"],SECONDS:["constraint"],TIMEZONE:["constraint"],TZ:["constraint"],NOW:["constraint"],UUID:["constraint"],STRUUID:["constraint"],MD5:["constraint"],SHA1:["constraint"],SHA256:["constraint"],SHA384:["constraint"],SHA512:["constraint"],COALESCE:["constraint"],IF:["constraint"],STRLANG:["constraint"],STRDT:["constraint"],SAMETERM:["constraint"],ISIRI:["constraint"],ISURI:["constraint"],ISBLANK:["constraint"],ISLITERAL:["constraint"],ISNUMERIC:["constraint"],SUBSTR:["constraint"],REPLACE:["constraint"],REGEX:["constraint"],EXISTS:["constraint"],NOT:["constraint"],IRI_REF:["constraint"],PNAME_LN:["constraint"],PNAME_NS:["constraint"],VAR1:["var"],VAR2:["var"]},path:{"^":["pathAlternative"],a:["pathAlternative"],"!":["pathAlternative"],"(":["pathAlternative"],IRI_REF:["pathAlternative"],PNAME_LN:["pathAlternative"],PNAME_NS:["pathAlternative"]},pathAlternative:{"^":["pathSequence","*[|,pathSequence]"],a:["pathSequence","*[|,pathSequence]"],"!":["pathSequence","*[|,pathSequence]"],"(":["pathSequence","*[|,pathSequence]"],IRI_REF:["pathSequence","*[|,pathSequence]"],PNAME_LN:["pathSequence","*[|,pathSequence]"],PNAME_NS:["pathSequence","*[|,pathSequence]"]},pathElt:{a:["pathPrimary","?pathMod"],"!":["pathPrimary","?pathMod"],"(":["pathPrimary","?pathMod"],IRI_REF:["pathPrimary","?pathMod"],PNAME_LN:["pathPrimary","?pathMod"],PNAME_NS:["pathPrimary","?pathMod"]},pathEltOrInverse:{a:["pathElt"],"!":["pathElt"],"(":["pathElt"],IRI_REF:["pathElt"],PNAME_LN:["pathElt"],PNAME_NS:["pathElt"],"^":["^","pathElt"]},pathMod:{"*":["*"],"?":["?"],"+":["+"],"{":["{","or([[integer,or([[,,or([},[integer,}]])],}])],[,,integer,}]])"]},pathNegatedPropertySet:{a:["pathOneInPropertySet"],"^":["pathOneInPropertySet"],IRI_REF:["pathOneInPropertySet"],PNAME_LN:["pathOneInPropertySet"],PNAME_NS:["pathOneInPropertySet"],"(":["(","?[pathOneInPropertySet,*[|,pathOneInPropertySet]]",")"]},pathOneInPropertySet:{IRI_REF:["iriRef"],PNAME_LN:["iriRef"],PNAME_NS:["iriRef"],a:["a"],"^":["^","or([iriRef,a])"]},pathPrimary:{IRI_REF:["storeProperty","iriRef"],PNAME_LN:["storeProperty","iriRef"],PNAME_NS:["storeProperty","iriRef"],a:["storeProperty","a"],"!":["!","pathNegatedPropertySet"],"(":["(","path",")"]},pathSequence:{"^":["pathEltOrInverse","*[/,pathEltOrInverse]"],a:["pathEltOrInverse","*[/,pathEltOrInverse]"],"!":["pathEltOrInverse","*[/,pathEltOrInverse]"],"(":["pathEltOrInverse","*[/,pathEltOrInverse]"],IRI_REF:["pathEltOrInverse","*[/,pathEltOrInverse]"],PNAME_LN:["pathEltOrInverse","*[/,pathEltOrInverse]"],PNAME_NS:["pathEltOrInverse","*[/,pathEltOrInverse]"]},prefixDecl:{PREFIX:["PREFIX","PNAME_NS","IRI_REF"]},prefixedName:{PNAME_LN:["PNAME_LN"],PNAME_NS:["PNAME_NS"]},primaryExpression:{"(":["brackettedExpression"],STR:["builtInCall"],LANG:["builtInCall"],LANGMATCHES:["builtInCall"],DATATYPE:["builtInCall"],BOUND:["builtInCall"],IRI:["builtInCall"],URI:["builtInCall"],BNODE:["builtInCall"],RAND:["builtInCall"],ABS:["builtInCall"],CEIL:["builtInCall"],FLOOR:["builtInCall"],ROUND:["builtInCall"],CONCAT:["builtInCall"],STRLEN:["builtInCall"],UCASE:["builtInCall"],LCASE:["builtInCall"],ENCODE_FOR_URI:["builtInCall"],CONTAINS:["builtInCall"],STRSTARTS:["builtInCall"],STRENDS:["builtInCall"],STRBEFORE:["builtInCall"],STRAFTER:["builtInCall"],YEAR:["builtInCall"],MONTH:["builtInCall"],DAY:["builtInCall"],HOURS:["builtInCall"],MINUTES:["builtInCall"],SECONDS:["builtInCall"],TIMEZONE:["builtInCall"],TZ:["builtInCall"],NOW:["builtInCall"],UUID:["builtInCall"],STRUUID:["builtInCall"],MD5:["builtInCall"],SHA1:["builtInCall"],SHA256:["builtInCall"],SHA384:["builtInCall"],SHA512:["builtInCall"],COALESCE:["builtInCall"],IF:["builtInCall"],STRLANG:["builtInCall"],STRDT:["builtInCall"],SAMETERM:["builtInCall"],ISIRI:["builtInCall"],ISURI:["builtInCall"],ISBLANK:["builtInCall"],ISLITERAL:["builtInCall"],ISNUMERIC:["builtInCall"],SUBSTR:["builtInCall"],REPLACE:["builtInCall"],REGEX:["builtInCall"],EXISTS:["builtInCall"],NOT:["builtInCall"],IRI_REF:["iriRefOrFunction"],PNAME_LN:["iriRefOrFunction"],PNAME_NS:["iriRefOrFunction"],STRING_LITERAL1:["rdfLiteral"],STRING_LITERAL2:["rdfLiteral"],STRING_LITERAL_LONG1:["rdfLiteral"],STRING_LITERAL_LONG2:["rdfLiteral"],INTEGER:["numericLiteral"],DECIMAL:["numericLiteral"],DOUBLE:["numericLiteral"],INTEGER_POSITIVE:["numericLiteral"],DECIMAL_POSITIVE:["numericLiteral"],DOUBLE_POSITIVE:["numericLiteral"],INTEGER_NEGATIVE:["numericLiteral"],DECIMAL_NEGATIVE:["numericLiteral"],DOUBLE_NEGATIVE:["numericLiteral"],TRUE:["booleanLiteral"],FALSE:["booleanLiteral"],VAR1:["var"],VAR2:["var"],COUNT:["aggregate"],SUM:["aggregate"],MIN:["aggregate"],MAX:["aggregate"],AVG:["aggregate"],SAMPLE:["aggregate"],GROUP_CONCAT:["aggregate"]},prologue:{BASE:["*or([baseDecl,prefixDecl])"],PREFIX:["*or([baseDecl,prefixDecl])"],$:["*or([baseDecl,prefixDecl])"],CONSTRUCT:["*or([baseDecl,prefixDecl])"],DESCRIBE:["*or([baseDecl,prefixDecl])"],ASK:["*or([baseDecl,prefixDecl])"],INSERT:["*or([baseDecl,prefixDecl])"],DELETE:["*or([baseDecl,prefixDecl])"],SELECT:["*or([baseDecl,prefixDecl])"],LOAD:["*or([baseDecl,prefixDecl])"],CLEAR:["*or([baseDecl,prefixDecl])"],DROP:["*or([baseDecl,prefixDecl])"],ADD:["*or([baseDecl,prefixDecl])"],MOVE:["*or([baseDecl,prefixDecl])"],COPY:["*or([baseDecl,prefixDecl])"],CREATE:["*or([baseDecl,prefixDecl])"],WITH:["*or([baseDecl,prefixDecl])"]},propertyList:{a:["propertyListNotEmpty"],VAR1:["propertyListNotEmpty"],VAR2:["propertyListNotEmpty"],IRI_REF:["propertyListNotEmpty"],PNAME_LN:["propertyListNotEmpty"],PNAME_NS:["propertyListNotEmpty"],".":[],"}":[],GRAPH:[]},propertyListNotEmpty:{a:["verb","objectList","*[;,?[verb,objectList]]"],VAR1:["verb","objectList","*[;,?[verb,objectList]]"],VAR2:["verb","objectList","*[;,?[verb,objectList]]"],IRI_REF:["verb","objectList","*[;,?[verb,objectList]]"],PNAME_LN:["verb","objectList","*[;,?[verb,objectList]]"],PNAME_NS:["verb","objectList","*[;,?[verb,objectList]]"]},propertyListPath:{a:["propertyListNotEmpty"],VAR1:["propertyListNotEmpty"],VAR2:["propertyListNotEmpty"],IRI_REF:["propertyListNotEmpty"],PNAME_LN:["propertyListNotEmpty"],PNAME_NS:["propertyListNotEmpty"],".":[],"{":[],OPTIONAL:[],MINUS:[],GRAPH:[],SERVICE:[],FILTER:[],BIND:[],VALUES:[],"}":[]},propertyListPathNotEmpty:{VAR1:["or([verbPath,verbSimple])","objectListPath","*[;,?[or([verbPath,verbSimple]),objectList]]"],VAR2:["or([verbPath,verbSimple])","objectListPath","*[;,?[or([verbPath,verbSimple]),objectList]]"],"^":["or([verbPath,verbSimple])","objectListPath","*[;,?[or([verbPath,verbSimple]),objectList]]"],a:["or([verbPath,verbSimple])","objectListPath","*[;,?[or([verbPath,verbSimple]),objectList]]"],"!":["or([verbPath,verbSimple])","objectListPath","*[;,?[or([verbPath,verbSimple]),objectList]]"],"(":["or([verbPath,verbSimple])","objectListPath","*[;,?[or([verbPath,verbSimple]),objectList]]"],IRI_REF:["or([verbPath,verbSimple])","objectListPath","*[;,?[or([verbPath,verbSimple]),objectList]]"],PNAME_LN:["or([verbPath,verbSimple])","objectListPath","*[;,?[or([verbPath,verbSimple]),objectList]]"],PNAME_NS:["or([verbPath,verbSimple])","objectListPath","*[;,?[or([verbPath,verbSimple]),objectList]]"]},quadData:{"{":["{","disallowVars","quads","allowVars","}"]},quadDataNoBnodes:{"{":["{","disallowBnodes","disallowVars","quads","allowVars","allowBnodes","}"]},quadPattern:{"{":["{","quads","}"]},quadPatternNoBnodes:{"{":["{","disallowBnodes","quads","allowBnodes","}"]},quads:{GRAPH:["?triplesTemplate","*[quadsNotTriples,?.,?triplesTemplate]"],VAR1:["?triplesTemplate","*[quadsNotTriples,?.,?triplesTemplate]"],VAR2:["?triplesTemplate","*[quadsNotTriples,?.,?triplesTemplate]"],NIL:["?triplesTemplate","*[quadsNotTriples,?.,?triplesTemplate]"],"(":["?triplesTemplate","*[quadsNotTriples,?.,?triplesTemplate]"],"[":["?triplesTemplate","*[quadsNotTriples,?.,?triplesTemplate]"],IRI_REF:["?triplesTemplate","*[quadsNotTriples,?.,?triplesTemplate]"],TRUE:["?triplesTemplate","*[quadsNotTriples,?.,?triplesTemplate]"],FALSE:["?triplesTemplate","*[quadsNotTriples,?.,?triplesTemplate]"],BLANK_NODE_LABEL:["?triplesTemplate","*[quadsNotTriples,?.,?triplesTemplate]"],ANON:["?triplesTemplate","*[quadsNotTriples,?.,?triplesTemplate]"],PNAME_LN:["?triplesTemplate","*[quadsNotTriples,?.,?triplesTemplate]"],PNAME_NS:["?triplesTemplate","*[quadsNotTriples,?.,?triplesTemplate]"],STRING_LITERAL1:["?triplesTemplate","*[quadsNotTriples,?.,?triplesTemplate]"],STRING_LITERAL2:["?triplesTemplate","*[quadsNotTriples,?.,?triplesTemplate]"],STRING_LITERAL_LONG1:["?triplesTemplate","*[quadsNotTriples,?.,?triplesTemplate]"],STRING_LITERAL_LONG2:["?triplesTemplate","*[quadsNotTriples,?.,?triplesTemplate]"],INTEGER:["?triplesTemplate","*[quadsNotTriples,?.,?triplesTemplate]"],DECIMAL:["?triplesTemplate","*[quadsNotTriples,?.,?triplesTemplate]"],DOUBLE:["?triplesTemplate","*[quadsNotTriples,?.,?triplesTemplate]"],INTEGER_POSITIVE:["?triplesTemplate","*[quadsNotTriples,?.,?triplesTemplate]"],DECIMAL_POSITIVE:["?triplesTemplate","*[quadsNotTriples,?.,?triplesTemplate]"],DOUBLE_POSITIVE:["?triplesTemplate","*[quadsNotTriples,?.,?triplesTemplate]"],INTEGER_NEGATIVE:["?triplesTemplate","*[quadsNotTriples,?.,?triplesTemplate]"],DECIMAL_NEGATIVE:["?triplesTemplate","*[quadsNotTriples,?.,?triplesTemplate]"],DOUBLE_NEGATIVE:["?triplesTemplate","*[quadsNotTriples,?.,?triplesTemplate]"],"}":["?triplesTemplate","*[quadsNotTriples,?.,?triplesTemplate]"]},quadsNotTriples:{GRAPH:["GRAPH","varOrIRIref","{","?triplesTemplate","}"]},queryAll:{CONSTRUCT:["or([selectQuery,constructQuery,describeQuery,askQuery])","valuesClause"],DESCRIBE:["or([selectQuery,constructQuery,describeQuery,askQuery])","valuesClause"],ASK:["or([selectQuery,constructQuery,describeQuery,askQuery])","valuesClause"],SELECT:["or([selectQuery,constructQuery,describeQuery,askQuery])","valuesClause"]},rdfLiteral:{STRING_LITERAL1:["string","?or([LANGTAG,[^^,iriRef]])"],STRING_LITERAL2:["string","?or([LANGTAG,[^^,iriRef]])"],STRING_LITERAL_LONG1:["string","?or([LANGTAG,[^^,iriRef]])"],STRING_LITERAL_LONG2:["string","?or([LANGTAG,[^^,iriRef]])"]},regexExpression:{REGEX:["REGEX","(","expression",",","expression","?[,,expression]",")"]},relationalExpression:{"!":["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],"+":["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],"-":["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],VAR1:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],VAR2:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],"(":["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],STR:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],LANG:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],LANGMATCHES:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],DATATYPE:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],BOUND:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],IRI:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],URI:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],BNODE:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],RAND:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],ABS:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],CEIL:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],FLOOR:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],ROUND:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],CONCAT:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],STRLEN:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],UCASE:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],LCASE:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],ENCODE_FOR_URI:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],CONTAINS:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],STRSTARTS:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],STRENDS:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],STRBEFORE:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],STRAFTER:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],YEAR:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],MONTH:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],DAY:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],HOURS:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],MINUTES:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],SECONDS:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],TIMEZONE:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],TZ:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],NOW:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],UUID:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],STRUUID:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],MD5:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],SHA1:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],SHA256:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],SHA384:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],SHA512:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],COALESCE:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],IF:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],STRLANG:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],STRDT:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],SAMETERM:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],ISIRI:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],ISURI:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],ISBLANK:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],ISLITERAL:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],ISNUMERIC:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],TRUE:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],FALSE:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],COUNT:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],SUM:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],MIN:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],MAX:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],AVG:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],SAMPLE:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],GROUP_CONCAT:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],SUBSTR:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],REPLACE:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],REGEX:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],EXISTS:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],NOT:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],IRI_REF:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],STRING_LITERAL1:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],STRING_LITERAL2:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],STRING_LITERAL_LONG1:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],STRING_LITERAL_LONG2:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],INTEGER:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],DECIMAL:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],DOUBLE:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],INTEGER_POSITIVE:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],DECIMAL_POSITIVE:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],DOUBLE_POSITIVE:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],INTEGER_NEGATIVE:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],DECIMAL_NEGATIVE:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],DOUBLE_NEGATIVE:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],PNAME_LN:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"],PNAME_NS:["numericExpression","?or([[=,numericExpression],[!=,numericExpression],[<,numericExpression],[>,numericExpression],[<=,numericExpression],[>=,numericExpression],[IN,expressionList],[NOT,IN,expressionList]])"]},selectClause:{SELECT:["SELECT","?or([DISTINCT,REDUCED])","or([+or([var,[ (,expression,AS,var,)]]),*])"]},selectQuery:{SELECT:["selectClause","*datasetClause","whereClause","solutionModifier"]},serviceGraphPattern:{SERVICE:["SERVICE","?SILENT","varOrIRIref","groupGraphPattern"]},solutionModifier:{LIMIT:["?groupClause","?havingClause","?orderClause","?limitOffsetClauses"],OFFSET:["?groupClause","?havingClause","?orderClause","?limitOffsetClauses"],ORDER:["?groupClause","?havingClause","?orderClause","?limitOffsetClauses"],HAVING:["?groupClause","?havingClause","?orderClause","?limitOffsetClauses"],GROUP:["?groupClause","?havingClause","?orderClause","?limitOffsetClauses"],VALUES:["?groupClause","?havingClause","?orderClause","?limitOffsetClauses"],$:["?groupClause","?havingClause","?orderClause","?limitOffsetClauses"],"}":["?groupClause","?havingClause","?orderClause","?limitOffsetClauses"]},sourceSelector:{IRI_REF:["iriRef"],PNAME_LN:["iriRef"],PNAME_NS:["iriRef"]},sparql11:{$:["prologue","or([queryAll,updateAll])","$"],CONSTRUCT:["prologue","or([queryAll,updateAll])","$"],DESCRIBE:["prologue","or([queryAll,updateAll])","$"],ASK:["prologue","or([queryAll,updateAll])","$"],INSERT:["prologue","or([queryAll,updateAll])","$"],DELETE:["prologue","or([queryAll,updateAll])","$"],SELECT:["prologue","or([queryAll,updateAll])","$"],LOAD:["prologue","or([queryAll,updateAll])","$"],CLEAR:["prologue","or([queryAll,updateAll])","$"],DROP:["prologue","or([queryAll,updateAll])","$"],ADD:["prologue","or([queryAll,updateAll])","$"],MOVE:["prologue","or([queryAll,updateAll])","$"],COPY:["prologue","or([queryAll,updateAll])","$"],CREATE:["prologue","or([queryAll,updateAll])","$"],WITH:["prologue","or([queryAll,updateAll])","$"],BASE:["prologue","or([queryAll,updateAll])","$"],PREFIX:["prologue","or([queryAll,updateAll])","$"]},storeProperty:{VAR1:[],VAR2:[],IRI_REF:[],PNAME_LN:[],PNAME_NS:[],a:[]},strReplaceExpression:{REPLACE:["REPLACE","(","expression",",","expression",",","expression","?[,,expression]",")"]},string:{STRING_LITERAL1:["STRING_LITERAL1"],STRING_LITERAL2:["STRING_LITERAL2"],STRING_LITERAL_LONG1:["STRING_LITERAL_LONG1"],STRING_LITERAL_LONG2:["STRING_LITERAL_LONG2"]},subSelect:{SELECT:["selectClause","whereClause","solutionModifier","valuesClause"]},substringExpression:{SUBSTR:["SUBSTR","(","expression",",","expression","?[,,expression]",")"]},triplesBlock:{VAR1:["triplesSameSubjectPath","?[.,?triplesBlock]"],VAR2:["triplesSameSubjectPath","?[.,?triplesBlock]"],NIL:["triplesSameSubjectPath","?[.,?triplesBlock]"],"(":["triplesSameSubjectPath","?[.,?triplesBlock]"],"[":["triplesSameSubjectPath","?[.,?triplesBlock]"],IRI_REF:["triplesSameSubjectPath","?[.,?triplesBlock]"],TRUE:["triplesSameSubjectPath","?[.,?triplesBlock]"],FALSE:["triplesSameSubjectPath","?[.,?triplesBlock]"],BLANK_NODE_LABEL:["triplesSameSubjectPath","?[.,?triplesBlock]"],ANON:["triplesSameSubjectPath","?[.,?triplesBlock]"],PNAME_LN:["triplesSameSubjectPath","?[.,?triplesBlock]"],PNAME_NS:["triplesSameSubjectPath","?[.,?triplesBlock]"],STRING_LITERAL1:["triplesSameSubjectPath","?[.,?triplesBlock]"],STRING_LITERAL2:["triplesSameSubjectPath","?[.,?triplesBlock]"],STRING_LITERAL_LONG1:["triplesSameSubjectPath","?[.,?triplesBlock]"],STRING_LITERAL_LONG2:["triplesSameSubjectPath","?[.,?triplesBlock]"],INTEGER:["triplesSameSubjectPath","?[.,?triplesBlock]"],DECIMAL:["triplesSameSubjectPath","?[.,?triplesBlock]"],DOUBLE:["triplesSameSubjectPath","?[.,?triplesBlock]"],INTEGER_POSITIVE:["triplesSameSubjectPath","?[.,?triplesBlock]"],DECIMAL_POSITIVE:["triplesSameSubjectPath","?[.,?triplesBlock]"],DOUBLE_POSITIVE:["triplesSameSubjectPath","?[.,?triplesBlock]"],INTEGER_NEGATIVE:["triplesSameSubjectPath","?[.,?triplesBlock]"],DECIMAL_NEGATIVE:["triplesSameSubjectPath","?[.,?triplesBlock]"],DOUBLE_NEGATIVE:["triplesSameSubjectPath","?[.,?triplesBlock]"]},triplesNode:{"(":["collection"],"[":["blankNodePropertyList"]},triplesNodePath:{"(":["collectionPath"],"[":["blankNodePropertyListPath"]},triplesSameSubject:{VAR1:["varOrTerm","propertyListNotEmpty"],VAR2:["varOrTerm","propertyListNotEmpty"],NIL:["varOrTerm","propertyListNotEmpty"],IRI_REF:["varOrTerm","propertyListNotEmpty"],TRUE:["varOrTerm","propertyListNotEmpty"],FALSE:["varOrTerm","propertyListNotEmpty"],BLANK_NODE_LABEL:["varOrTerm","propertyListNotEmpty"],ANON:["varOrTerm","propertyListNotEmpty"],PNAME_LN:["varOrTerm","propertyListNotEmpty"],PNAME_NS:["varOrTerm","propertyListNotEmpty"],STRING_LITERAL1:["varOrTerm","propertyListNotEmpty"],STRING_LITERAL2:["varOrTerm","propertyListNotEmpty"],STRING_LITERAL_LONG1:["varOrTerm","propertyListNotEmpty"],STRING_LITERAL_LONG2:["varOrTerm","propertyListNotEmpty"],INTEGER:["varOrTerm","propertyListNotEmpty"],DECIMAL:["varOrTerm","propertyListNotEmpty"],DOUBLE:["varOrTerm","propertyListNotEmpty"],INTEGER_POSITIVE:["varOrTerm","propertyListNotEmpty"],DECIMAL_POSITIVE:["varOrTerm","propertyListNotEmpty"],DOUBLE_POSITIVE:["varOrTerm","propertyListNotEmpty"],INTEGER_NEGATIVE:["varOrTerm","propertyListNotEmpty"],DECIMAL_NEGATIVE:["varOrTerm","propertyListNotEmpty"],DOUBLE_NEGATIVE:["varOrTerm","propertyListNotEmpty"],"(":["triplesNode","propertyList"],"[":["triplesNode","propertyList"]},triplesSameSubjectPath:{VAR1:["varOrTerm","propertyListPathNotEmpty"],VAR2:["varOrTerm","propertyListPathNotEmpty"],NIL:["varOrTerm","propertyListPathNotEmpty"],IRI_REF:["varOrTerm","propertyListPathNotEmpty"],TRUE:["varOrTerm","propertyListPathNotEmpty"],FALSE:["varOrTerm","propertyListPathNotEmpty"],BLANK_NODE_LABEL:["varOrTerm","propertyListPathNotEmpty"],ANON:["varOrTerm","propertyListPathNotEmpty"],PNAME_LN:["varOrTerm","propertyListPathNotEmpty"],PNAME_NS:["varOrTerm","propertyListPathNotEmpty"],STRING_LITERAL1:["varOrTerm","propertyListPathNotEmpty"],STRING_LITERAL2:["varOrTerm","propertyListPathNotEmpty"],STRING_LITERAL_LONG1:["varOrTerm","propertyListPathNotEmpty"],STRING_LITERAL_LONG2:["varOrTerm","propertyListPathNotEmpty"],INTEGER:["varOrTerm","propertyListPathNotEmpty"],DECIMAL:["varOrTerm","propertyListPathNotEmpty"],DOUBLE:["varOrTerm","propertyListPathNotEmpty"],INTEGER_POSITIVE:["varOrTerm","propertyListPathNotEmpty"],DECIMAL_POSITIVE:["varOrTerm","propertyListPathNotEmpty"],DOUBLE_POSITIVE:["varOrTerm","propertyListPathNotEmpty"],INTEGER_NEGATIVE:["varOrTerm","propertyListPathNotEmpty"],DECIMAL_NEGATIVE:["varOrTerm","propertyListPathNotEmpty"],DOUBLE_NEGATIVE:["varOrTerm","propertyListPathNotEmpty"],"(":["triplesNodePath","propertyListPath"],"[":["triplesNodePath","propertyListPath"]},triplesTemplate:{VAR1:["triplesSameSubject","?[.,?triplesTemplate]"],VAR2:["triplesSameSubject","?[.,?triplesTemplate]"],NIL:["triplesSameSubject","?[.,?triplesTemplate]"],"(":["triplesSameSubject","?[.,?triplesTemplate]"],"[":["triplesSameSubject","?[.,?triplesTemplate]"],IRI_REF:["triplesSameSubject","?[.,?triplesTemplate]"],TRUE:["triplesSameSubject","?[.,?triplesTemplate]"],FALSE:["triplesSameSubject","?[.,?triplesTemplate]"],BLANK_NODE_LABEL:["triplesSameSubject","?[.,?triplesTemplate]"],ANON:["triplesSameSubject","?[.,?triplesTemplate]"],PNAME_LN:["triplesSameSubject","?[.,?triplesTemplate]"],PNAME_NS:["triplesSameSubject","?[.,?triplesTemplate]"],STRING_LITERAL1:["triplesSameSubject","?[.,?triplesTemplate]"],STRING_LITERAL2:["triplesSameSubject","?[.,?triplesTemplate]"],STRING_LITERAL_LONG1:["triplesSameSubject","?[.,?triplesTemplate]"],STRING_LITERAL_LONG2:["triplesSameSubject","?[.,?triplesTemplate]"],INTEGER:["triplesSameSubject","?[.,?triplesTemplate]"],DECIMAL:["triplesSameSubject","?[.,?triplesTemplate]"],DOUBLE:["triplesSameSubject","?[.,?triplesTemplate]"],INTEGER_POSITIVE:["triplesSameSubject","?[.,?triplesTemplate]"],DECIMAL_POSITIVE:["triplesSameSubject","?[.,?triplesTemplate]"],DOUBLE_POSITIVE:["triplesSameSubject","?[.,?triplesTemplate]"],INTEGER_NEGATIVE:["triplesSameSubject","?[.,?triplesTemplate]"],DECIMAL_NEGATIVE:["triplesSameSubject","?[.,?triplesTemplate]"],DOUBLE_NEGATIVE:["triplesSameSubject","?[.,?triplesTemplate]"]},unaryExpression:{"!":["!","primaryExpression"],"+":["+","primaryExpression"],"-":["-","primaryExpression"],VAR1:["primaryExpression"],VAR2:["primaryExpression"],"(":["primaryExpression"],STR:["primaryExpression"],LANG:["primaryExpression"],LANGMATCHES:["primaryExpression"],DATATYPE:["primaryExpression"],BOUND:["primaryExpression"],IRI:["primaryExpression"],URI:["primaryExpression"],BNODE:["primaryExpression"],RAND:["primaryExpression"],ABS:["primaryExpression"],CEIL:["primaryExpression"],FLOOR:["primaryExpression"],ROUND:["primaryExpression"],CONCAT:["primaryExpression"],STRLEN:["primaryExpression"],UCASE:["primaryExpression"],LCASE:["primaryExpression"],ENCODE_FOR_URI:["primaryExpression"],CONTAINS:["primaryExpression"],STRSTARTS:["primaryExpression"],STRENDS:["primaryExpression"],STRBEFORE:["primaryExpression"],STRAFTER:["primaryExpression"],YEAR:["primaryExpression"],MONTH:["primaryExpression"],DAY:["primaryExpression"],HOURS:["primaryExpression"],MINUTES:["primaryExpression"],SECONDS:["primaryExpression"],TIMEZONE:["primaryExpression"],TZ:["primaryExpression"],NOW:["primaryExpression"],UUID:["primaryExpression"],STRUUID:["primaryExpression"],MD5:["primaryExpression"],SHA1:["primaryExpression"],SHA256:["primaryExpression"],SHA384:["primaryExpression"],SHA512:["primaryExpression"],COALESCE:["primaryExpression"],IF:["primaryExpression"],STRLANG:["primaryExpression"],STRDT:["primaryExpression"],SAMETERM:["primaryExpression"],ISIRI:["primaryExpression"],ISURI:["primaryExpression"],ISBLANK:["primaryExpression"],ISLITERAL:["primaryExpression"],ISNUMERIC:["primaryExpression"],TRUE:["primaryExpression"],FALSE:["primaryExpression"],COUNT:["primaryExpression"],SUM:["primaryExpression"],MIN:["primaryExpression"],MAX:["primaryExpression"],AVG:["primaryExpression"],SAMPLE:["primaryExpression"],GROUP_CONCAT:["primaryExpression"],SUBSTR:["primaryExpression"],REPLACE:["primaryExpression"],REGEX:["primaryExpression"],EXISTS:["primaryExpression"],NOT:["primaryExpression"],IRI_REF:["primaryExpression"],STRING_LITERAL1:["primaryExpression"],STRING_LITERAL2:["primaryExpression"],STRING_LITERAL_LONG1:["primaryExpression"],STRING_LITERAL_LONG2:["primaryExpression"],INTEGER:["primaryExpression"],DECIMAL:["primaryExpression"],DOUBLE:["primaryExpression"],INTEGER_POSITIVE:["primaryExpression"],DECIMAL_POSITIVE:["primaryExpression"],DOUBLE_POSITIVE:["primaryExpression"],INTEGER_NEGATIVE:["primaryExpression"],DECIMAL_NEGATIVE:["primaryExpression"],DOUBLE_NEGATIVE:["primaryExpression"],PNAME_LN:["primaryExpression"],PNAME_NS:["primaryExpression"]},update:{INSERT:["prologue","?[update1,?[;,update]]"],DELETE:["prologue","?[update1,?[;,update]]"],LOAD:["prologue","?[update1,?[;,update]]"],CLEAR:["prologue","?[update1,?[;,update]]"],DROP:["prologue","?[update1,?[;,update]]"],ADD:["prologue","?[update1,?[;,update]]"],MOVE:["prologue","?[update1,?[;,update]]"],COPY:["prologue","?[update1,?[;,update]]"],CREATE:["prologue","?[update1,?[;,update]]"],WITH:["prologue","?[update1,?[;,update]]"],BASE:["prologue","?[update1,?[;,update]]"],PREFIX:["prologue","?[update1,?[;,update]]"],$:["prologue","?[update1,?[;,update]]"]},update1:{LOAD:["load"],CLEAR:["clear"],DROP:["drop"],ADD:["add"],MOVE:["move"],COPY:["copy"],CREATE:["create"],INSERT:["INSERT","insert1"],DELETE:["DELETE","delete1"],WITH:["modify"]},updateAll:{INSERT:["?[update1,?[;,update]]"],DELETE:["?[update1,?[;,update]]"],LOAD:["?[update1,?[;,update]]"],CLEAR:["?[update1,?[;,update]]"],DROP:["?[update1,?[;,update]]"],ADD:["?[update1,?[;,update]]"],MOVE:["?[update1,?[;,update]]"],COPY:["?[update1,?[;,update]]"],CREATE:["?[update1,?[;,update]]"],WITH:["?[update1,?[;,update]]"],$:["?[update1,?[;,update]]"]},usingClause:{USING:["USING","or([iriRef,[NAMED,iriRef]])"]},valueLogical:{"!":["relationalExpression"],"+":["relationalExpression"],"-":["relationalExpression"],VAR1:["relationalExpression"],VAR2:["relationalExpression"],"(":["relationalExpression"],STR:["relationalExpression"],LANG:["relationalExpression"],LANGMATCHES:["relationalExpression"],DATATYPE:["relationalExpression"],BOUND:["relationalExpression"],IRI:["relationalExpression"],URI:["relationalExpression"],BNODE:["relationalExpression"],RAND:["relationalExpression"],ABS:["relationalExpression"],CEIL:["relationalExpression"],FLOOR:["relationalExpression"],ROUND:["relationalExpression"],CONCAT:["relationalExpression"],STRLEN:["relationalExpression"],UCASE:["relationalExpression"],LCASE:["relationalExpression"],ENCODE_FOR_URI:["relationalExpression"],CONTAINS:["relationalExpression"],STRSTARTS:["relationalExpression"],STRENDS:["relationalExpression"],STRBEFORE:["relationalExpression"],STRAFTER:["relationalExpression"],YEAR:["relationalExpression"],MONTH:["relationalExpression"],DAY:["relationalExpression"],HOURS:["relationalExpression"],MINUTES:["relationalExpression"],SECONDS:["relationalExpression"],TIMEZONE:["relationalExpression"],TZ:["relationalExpression"],NOW:["relationalExpression"],UUID:["relationalExpression"],STRUUID:["relationalExpression"],MD5:["relationalExpression"],SHA1:["relationalExpression"],SHA256:["relationalExpression"],SHA384:["relationalExpression"],SHA512:["relationalExpression"],COALESCE:["relationalExpression"],IF:["relationalExpression"],STRLANG:["relationalExpression"],STRDT:["relationalExpression"],SAMETERM:["relationalExpression"],ISIRI:["relationalExpression"],ISURI:["relationalExpression"],ISBLANK:["relationalExpression"],ISLITERAL:["relationalExpression"],ISNUMERIC:["relationalExpression"],TRUE:["relationalExpression"],FALSE:["relationalExpression"],COUNT:["relationalExpression"],SUM:["relationalExpression"],MIN:["relationalExpression"],MAX:["relationalExpression"],AVG:["relationalExpression"],SAMPLE:["relationalExpression"],GROUP_CONCAT:["relationalExpression"],SUBSTR:["relationalExpression"],REPLACE:["relationalExpression"],REGEX:["relationalExpression"],EXISTS:["relationalExpression"],NOT:["relationalExpression"],IRI_REF:["relationalExpression"],STRING_LITERAL1:["relationalExpression"],STRING_LITERAL2:["relationalExpression"],STRING_LITERAL_LONG1:["relationalExpression"],STRING_LITERAL_LONG2:["relationalExpression"],INTEGER:["relationalExpression"],DECIMAL:["relationalExpression"],DOUBLE:["relationalExpression"],INTEGER_POSITIVE:["relationalExpression"],DECIMAL_POSITIVE:["relationalExpression"],DOUBLE_POSITIVE:["relationalExpression"],INTEGER_NEGATIVE:["relationalExpression"],DECIMAL_NEGATIVE:["relationalExpression"],DOUBLE_NEGATIVE:["relationalExpression"],PNAME_LN:["relationalExpression"],PNAME_NS:["relationalExpression"]},valuesClause:{VALUES:["VALUES","dataBlock"],$:[],"}":[]},var:{VAR1:["VAR1"],VAR2:["VAR2"]},varOrIRIref:{VAR1:["var"],VAR2:["var"],IRI_REF:["iriRef"],PNAME_LN:["iriRef"],PNAME_NS:["iriRef"]},varOrTerm:{VAR1:["var"],VAR2:["var"],NIL:["graphTerm"],IRI_REF:["graphTerm"],TRUE:["graphTerm"],FALSE:["graphTerm"],BLANK_NODE_LABEL:["graphTerm"],ANON:["graphTerm"],PNAME_LN:["graphTerm"],PNAME_NS:["graphTerm"],STRING_LITERAL1:["graphTerm"],STRING_LITERAL2:["graphTerm"],STRING_LITERAL_LONG1:["graphTerm"],STRING_LITERAL_LONG2:["graphTerm"],INTEGER:["graphTerm"],DECIMAL:["graphTerm"],DOUBLE:["graphTerm"],INTEGER_POSITIVE:["graphTerm"],DECIMAL_POSITIVE:["graphTerm"],DOUBLE_POSITIVE:["graphTerm"],INTEGER_NEGATIVE:["graphTerm"],DECIMAL_NEGATIVE:["graphTerm"],DOUBLE_NEGATIVE:["graphTerm"]},verb:{VAR1:["storeProperty","varOrIRIref"],VAR2:["storeProperty","varOrIRIref"],IRI_REF:["storeProperty","varOrIRIref"],PNAME_LN:["storeProperty","varOrIRIref"],PNAME_NS:["storeProperty","varOrIRIref"],a:["storeProperty","a"]},verbPath:{"^":["path"],a:["path"],"!":["path"],"(":["path"],IRI_REF:["path"],PNAME_LN:["path"],PNAME_NS:["path"]},verbSimple:{VAR1:["var"],VAR2:["var"]},whereClause:{"{":["?WHERE","groupGraphPattern"],WHERE:["?WHERE","groupGraphPattern"]}},keywords:/^(GROUP_CONCAT|DATATYPE|BASE|PREFIX|SELECT|CONSTRUCT|DESCRIBE|ASK|FROM|NAMED|ORDER|BY|LIMIT|ASC|DESC|OFFSET|DISTINCT|REDUCED|WHERE|GRAPH|OPTIONAL|UNION|FILTER|GROUP|HAVING|AS|VALUES|LOAD|CLEAR|DROP|CREATE|MOVE|COPY|SILENT|INSERT|DELETE|DATA|WITH|TO|USING|NAMED|MINUS|BIND|LANGMATCHES|LANG|BOUND|SAMETERM|ISIRI|ISURI|ISBLANK|ISLITERAL|REGEX|TRUE|FALSE|UNDEF|ADD|DEFAULT|ALL|SERVICE|INTO|IN|NOT|IRI|URI|BNODE|RAND|ABS|CEIL|FLOOR|ROUND|CONCAT|STRLEN|UCASE|LCASE|ENCODE_FOR_URI|CONTAINS|STRSTARTS|STRENDS|STRBEFORE|STRAFTER|YEAR|MONTH|DAY|HOURS|MINUTES|SECONDS|TIMEZONE|TZ|NOW|UUID|STRUUID|MD5|SHA1|SHA256|SHA384|SHA512|COALESCE|IF|STRLANG|STRDT|ISNUMERIC|SUBSTR|REPLACE|EXISTS|COUNT|SUM|MIN|MAX|AVG|SAMPLE|SEPARATOR|STR)/i,punct:/^(\*|a|\.|\{|\}|,|\(|\)|;|\[|\]|\|\||&&|=|!=|!|<=|>=|<|>|\+|-|\/|\^\^|\?|\||\^)/,startSymbol:"sparql11",acceptEmpty:!0}},function(e,t,r){"use strict";var n=r(20),i=r(107),o=r(157),a=r(572);r(79);e.exports=function(e,t){var r={},l={},u={};t.on("cursorActivity",function(e,t){d(!0)}),t.on("change",function(){var e=[];for(var i in r)r[i].is(":visible")&&e.push(r[i]);if(e.length>0){var o=n(t.getWrapperElement()).find(".CodeMirror-vscrollbar"),a=0;o.is(":visible")&&(a=o.outerWidth()),e.forEach(function(e){e.css("right",a)})}});var c=function(e,r){u[e.name]=new a;for(var n=0;n<r.length;n++)u[e.name].insert(r[n]);var s=i.getPersistencyId(t,e.persistent);s&&o.storage.set(s,r,"month",t.options.onQuotaExceeded)},p=function(e,r){var n=l[e]=new r(t,e);if(n.name=e,n.bulk){var a=function(e){e&&e instanceof Array&&e.length>0&&c(n,e)};if(n.get instanceof Array)a(n.get);else{var s=null,u=i.getPersistencyId(t,n.persistent);u&&(s=o.storage.get(u)),s&&s.length>0?a(s):n.get instanceof Function&&(n.async?n.get(null,a):a(n.get()))}}},d=function(r){if(!t.somethingSelected()){for(var i in l)if(-1!=n.inArray(i,t.options.autocompleters)){var o=l[i];if(o.isValidCompletionPosition)if(o.isValidCompletionPosition()){if(!o.callbacks||!o.callbacks.validPosition||!1!==o.callbacks.validPosition(t,o)){var a=function(n){if(r&&(!n.autoShow||!n.bulk&&n.async))return!1;var i={closeCharacters:/(?=a)b/,completeSingle:!1};!n.bulk&&n.async&&(i.async=!0);var o=function(e,t){return f(n,t)};e.showHint(t,o,i);return!0}(o);if(a)break}}else o.callbacks&&o.callbacks.invalidPosition&&o.callbacks.invalidPosition(t,o)}}},f=function(e,r){var n=t.getCompleteToken();if(e.preProcessToken&&(n=e.preProcessToken(n)),n){if(e.bulk||!e.async)return function(t){var r=t.autocompletionString||t.string,n=[];if(u[e.name])n=u[e.name].autoComplete(r);else if("function"==typeof e.get&&0==e.async)n=e.get(r);else if("object"==typeof e.get)for(var i=r.length,o=0;o<e.get.length;o++){var a=e.get[o];a.slice(0,i)==r&&n.push(a)}return h(n,e,t)}(n);var i=function(t){r(h(t,e,n))};e.get(n,i)}},h=function(r,n,i){for(var o=[],a=0;a<r.length;a++){var l=r[a];n.postProcessToken&&(l=n.postProcessToken(i,l)),o.push({text:l,displayText:l,hint:s})}var u=t.getCursor(),c={completionToken:i.string,list:o,from:{line:u.line,ch:i.start},to:{line:u.line,ch:i.end}};if(n.callbacks)for(var p in n.callbacks)n.callbacks[p]&&e.on(c,p,n.callbacks[p]);return c};return{init:p,completers:l,notifications:{getEl:function(e){return n(r[e.name])},show:function(e,t){t.autoshow||(r[t.name]||(r[t.name]=n("<div class='completionNotification'></div>")),r[t.name].show().text("Press CTRL - <spacebar> to autocomplete").appendTo(n(e.getWrapperElement())))},hide:function(e,t){r[t.name]&&r[t.name].hide()}},autoComplete:d,getTrie:function(e){return"string"==typeof e?u[e]:u[e.name]}}};var s=function(e,t,r){r.text!=e.getTokenAt(e.getCursor()).string&&e.replaceRange(r.text,t.from,t.to)}},function(e,t){var r=e.exports=function(){this.words=0,this.prefixes=0,this.children=[]};r.prototype={insert:function(e,t){if(0!=e.length){var n,i,o=this;if(void 0===t&&(t=0),t===e.length)return void o.words++;o.prefixes++,n=e[t],void 0===o.children[n]&&(o.children[n]=new r),i=o.children[n],i.insert(e,t+1)}},remove:function(e,t){if(0!=e.length){var r,n,i=this;if(void 0===t&&(t=0),void 0!==i){if(t===e.length)return void i.words--;i.prefixes--,r=e[t],n=i.children[r],n.remove(e,t+1)}}},update:function(e,t){0!=e.length&&0!=t.length&&(this.remove(e),this.insert(t))},countWord:function(e,t){if(0==e.length)return 0;var r,n,i=this,o=0;return void 0===t&&(t=0),t===e.length?i.words:(r=e[t],n=i.children[r],void 0!==n&&(o=n.countWord(e,t+1)),o)},countPrefix:function(e,t){if(0==e.length)return 0;var r,n,i=this,o=0;if(void 0===t&&(t=0),t===e.length)return i.prefixes;var r=e[t];return n=i.children[r],void 0!==n&&(o=n.countPrefix(e,t+1)),o},find:function(e){return 0!=e.length&&this.countWord(e)>0},getAllWords:function(e){var t,r,n=this,i=[];if(void 0===e&&(e=""),void 0===n)return[];n.words>0&&i.push(e);for(t in n.children)n.children.hasOwnProperty(t)&&(r=n.children[t],i=i.concat(r.getAllWords(e+t)));return i},autoComplete:function(e,t){var r,n,i=this;return 0==e.length?void 0===t?i.getAllWords(e):[]:(void 0===t&&(t=0),r=e[t],n=i.children[r],void 0===n?[]:t===e.length-1?n.getAllWords(e):n.autoComplete(e,t+1))}}},function(e,t,r){"use strict";var n=r(20),i={"string-2":"prefixed",atom:"var"};e.exports=function(t,r){return t.on("change",function(){e.exports.appendPrefixIfNeeded(t,r)}),{isValidCompletionPosition:function(){return e.exports.isValidCompletionPosition(t)},get:function(t,r){n.get(e.exports.fetchFrom,function(e){var t=[];for(var n in e)if("bif"!=n){var i=n+": <"+e[n]+">";t.push(i)}t.sort(),r(t)})},preProcessToken:function(r){return e.exports.preprocessPrefixTokenForCompletion(t,r)},async:!0,bulk:!0,autoShow:!0,persistent:r,callbacks:{pick:function(){t.collapsePrefixes(!1)}}}},e.exports.isValidCompletionPosition=function(e){var t=e.getCursor(),r=e.getTokenAt(t);if(e.getLine(t.line).length>t.ch)return!1;if("ws"!=r.type&&(r=e.getCompleteToken()),0==!r.string.indexOf("a")&&-1==n.inArray("PNAME_NS",r.state.possibleCurrent))return!1;var i=e.getPreviousNonWsToken(t.line,r);return!(!i||"PREFIX"!=i.string.toUpperCase())},e.exports.preprocessPrefixTokenForCompletion=function(e,t){var r=e.getPreviousNonWsToken(e.getCursor().line,t);return r&&r.string&&":"==r.string.slice(-1)&&(t={start:r.start,end:t.end,string:r.string+" "+t.string,state:t.state}),t},e.exports.appendPrefixIfNeeded=function(e,t){if(e.autocompleters.getTrie(t)&&e.options.autocompleters&&-1!=e.options.autocompleters.indexOf(t)){var r=e.getCursor(),n=e.getTokenAt(r);if("prefixed"==i[n.type]){var o=n.string.indexOf(":");if(-1!==o){var a=e.getPreviousNonWsToken(r.line,n).string.toUpperCase(),s=e.getTokenAt({line:r.line,ch:n.start});if("PREFIX"!=a&&("ws"==s.type||null==s.type)){var l=n.string.substring(0,o+1);if(null==e.getPrefixesFromQuery()[l.slice(0,-1)]){var u=e.autocompleters.getTrie(t).autoComplete(l);u.length>0&&e.addPrefixes(u[0])}}}}}},e.exports.fetchFrom=(0===window.location.protocol.indexOf("http")?"//":"http://")+"prefix.cc/popular/all.file.json"},function(e,t,r){"use strict";var n=r(20);e.exports=function(t,n){return{isValidCompletionPosition:function(){return e.exports.isValidCompletionPosition(t)},get:function(e,n){return r(51).fetchFromLov(t,this,e,n)},preProcessToken:function(r){return e.exports.preProcessToken(t,r)},postProcessToken:function(r,n){return e.exports.postProcessToken(t,r,n)},async:!0,bulk:!1,autoShow:!1,persistent:n,callbacks:{validPosition:t.autocompleters.notifications.show,invalidPosition:t.autocompleters.notifications.hide}}},e.exports.isValidCompletionPosition=function(e){var t=e.getCompleteToken();if(0==t.string.length)return!1;if(0==t.string.indexOf("?"))return!1;if(n.inArray("a",t.state.possibleCurrent)>=0)return!0;var r=e.getCursor();return"rdfs:subPropertyOf"==e.getPreviousNonWsToken(r.line,t).string},e.exports.preProcessToken=function(e,t){return r(51).preprocessResourceTokenForCompletion(e,t)},e.exports.postProcessToken=function(e,t,n){return r(51).postprocessResourceTokenForCompletion(e,t,n)}},function(e,t,r){"use strict";r(20);e.exports=function(t,n){return{isValidCompletionPosition:function(){return e.exports.isValidCompletionPosition(t)},get:function(e,n){return r(51).fetchFromLov(t,this,e,n)},preProcessToken:function(r){return e.exports.preProcessToken(t,r)},postProcessToken:function(r,n){return e.exports.postProcessToken(t,r,n)},async:!0,bulk:!1,autoShow:!1,persistent:n,callbacks:{validPosition:t.autocompleters.notifications.show,invalidPosition:t.autocompleters.notifications.hide}}},e.exports.isValidCompletionPosition=function(e){var t=e.getCompleteToken();if(0==t.string.indexOf("?"))return!1;var r=e.getCursor(),n=e.getPreviousNonWsToken(r.line,t);return"a"==n.string||("rdf:type"==n.string||("rdfs:domain"==n.string||"rdfs:range"==n.string))},e.exports.preProcessToken=function(e,t){return r(51).preprocessResourceTokenForCompletion(e,t)},e.exports.postProcessToken=function(e,t,n){return r(51).postprocessResourceTokenForCompletion(e,t,n)}},function(e,t,r){"use strict";var n=r(20);e.exports=function(e){return{isValidCompletionPosition:function(){var t=e.getTokenAt(e.getCursor());return!("ws"==t.type||!(t=e.getCompleteToken(t))||0!=t.string.indexOf("?"))},get:function(t){if(0==t.trim().length)return[];var r={};n(e.getWrapperElement()).find(".cm-atom").each(function(){var e=this.innerHTML;if(0==e.indexOf("?")){var i=n(this).next();if(i.attr("class")&&i.attr("class").indexOf("cm-atom")>=0&&(e+=i.text()),e.length<=1)return;if(0!==e.indexOf(t))return;if(e==t)return;r[e]=!0}});var i=[];for(var o in r)i.push(o);return i.sort(),i},async:!1,bulk:!1,autoShow:!0}}},function(e,t,r){var n=r(247),i=r(20),o=function(e){return"'"+e+"'"};e.exports={createCurlString:function(e,t){var r=n.getAjaxConfig(e,t),a=r.url;if(0!==r.url.indexOf("http")){var a=window.location.protocol+"//"+window.location.host;0===r.url.indexOf("/")?a+=r.url:a+=window.location.pathname+r.url}var s=["curl",a,"-X",e.options.sparql.requestMethod];"POST"==e.options.sparql.requestMethod&&s.push("--data "+o(i.param(r.data)));for(var l in r.headers)s.push("-H "+o(l+": "+r.headers[l]));return s.join(" ")}}},function(e,t,r){var n=r(20),i=r(79);i.defaults=n.extend(!0,{},i.defaults,{mode:"sparql11",value:"PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nSELECT * WHERE {\n  ?sub ?pred ?obj .\n} \nLIMIT 10",highlightSelectionMatches:{showToken:/\w/},tabMode:"indent",lineNumbers:!0,lineWrapping:!0,backdrop:!1,foldGutter:{rangeFinder:new i.fold.combine(i.fold.brace,i.fold.prefix)},collapsePrefixesOnLoad:!1,gutters:["gutterErrorBar","CodeMirror-linenumbers","CodeMirror-foldgutter"],matchBrackets:!0,fixedGutter:!0,syntaxErrorCheck:!0,onQuotaExceeded:function(e){console.warn("Could not store in localstorage. Skipping..",e)},extraKeys:{"Ctrl-Space":i.autoComplete,"Cmd-Space":i.autoComplete,"Ctrl-D":i.deleteLine,"Ctrl-K":i.deleteLine,"Shift-Ctrl-K":i.deleteLine,"Cmd-D":i.deleteLine,"Cmd-K":i.deleteLine,"Ctrl-/":i.commentLines,"Cmd-/":i.commentLines,"Ctrl-Alt-Down":i.copyLineDown,"Ctrl-Alt-Up":i.copyLineUp,"Cmd-Alt-Down":i.copyLineDown,"Cmd-Alt-Up":i.copyLineUp,"Shift-Ctrl-F":i.doAutoFormat,"Shift-Cmd-F":i.doAutoFormat,"Ctrl-]":i.indentMore,"Cmd-]":i.indentMore,"Ctrl-[":i.indentLess,"Cmd-[":i.indentLess,"Ctrl-S":i.storeQuery,"Cmd-S":i.storeQuery,"Ctrl-Enter":i.executeQuery,"Cmd-Enter":i.executeQuery,F11:function(e){e.setOption("fullScreen",!e.getOption("fullScreen"))},Esc:function(e){e.getOption("fullScreen")&&e.setOption("fullScreen",!1)}},cursorHeight:.9,createShareLink:i.createShareLink,createShortLink:null,consumeShareLink:i.consumeShareLink,persistent:function(e){return"yasqe_"+n(e.getWrapperElement()).closest("[id]").attr("id")+"_queryVal"},sparql:{queryName:function(e){return e.getQueryMode()},showQueryButton:!1,endpoint:"http://dbpedia.org/sparql",requestMethod:"POST",acceptHeaderGraph:"text/turtle,*/*;q=0.9",acceptHeaderSelect:"application/sparql-results+json,*/*;q=0.9",acceptHeaderUpdate:"text/plain,*/*;q=0.9",namedGraphs:[],defaultGraphs:[],args:[],headers:{},getQueryForAjax:null,callbacks:{beforeSend:null,complete:null,error:null,success:null},handlers:{}}})},function(e,t){e.exports={_args:[["yasgui-yasqe@2.11.14","/Users/esjewett/git_repos/fibra"]],_development:!0,_from:"yasgui-yasqe@2.11.14",_id:"yasgui-yasqe@2.11.14",_inBundle:!1,_integrity:"sha512-qtdtT+RmeQhHP6tTL7mSSKbWWuDZ5m17MTHlGbhZYPKZf2Wx3nieGLqip4Pb5eGXryj11rNywgYMm7KN0wdHmw==",_location:"/yasgui-yasqe",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"yasgui-yasqe@2.11.14",name:"yasgui-yasqe",escapedName:"yasgui-yasqe",rawSpec:"2.11.14",saveSpec:null,fetchSpec:"2.11.14"},_requiredBy:["/angular-yasqe-component"],_resolved:"https://registry.npmjs.org/yasgui-yasqe/-/yasgui-yasqe-2.11.14.tgz",_spec:"2.11.14",_where:"/Users/esjewett/git_repos/fibra",author:{name:"Laurens Rietveld"},bugs:{url:"https://github.com/YASGUI/YASQE/issues/"},dependencies:{codemirror:"5.17.0",jquery:"^2.2.4","node-sass":"^3.8.0",prettier:"^1.4.4","require-dir":"^0.3.0","run-sequence":"^1.2.2","vinyl-buffer":"^1.0.0","vinyl-source-stream":"~1.1.0","vinyl-transform":"1.0.0","yasgui-utils":"^1.6.7"},description:"Yet Another SPARQL Query Editor",devDependencies:{"bootstrap-sass":"^3.3.7",browserify:"^13.1.0","browserify-shim":"^3.8.12","browserify-transform-tools":"^1.6.0",exorcist:"^0.4.0",gulp:"^3.9.1","gulp-autoprefixer":"^3.1.0","gulp-bump":"^2.2.0","gulp-concat":"^2.6.0","gulp-connect":"^4.2.0","gulp-cssimport":"^3.1.0","gulp-cssnano":"^2.1.2","gulp-embedlr":"^0.5.2","gulp-filter":"^4.0.0","gulp-git":"^1.10.0","gulp-jsvalidate":"^2.1.0","gulp-livereload":"^3.8.1","gulp-notify":"^2.2.0","gulp-rename":"^1.2.2","gulp-sass":"^2.3.2","gulp-sourcemaps":"^1.6.0","gulp-streamify":"1.0.2","gulp-tag-version":"^1.3.0","gulp-uglify":"^1.5.4","node-sass":"^3.8.0","require-dir":"^0.3.0","run-sequence":"^1.2.2","vinyl-buffer":"^1.0.0","vinyl-source-stream":"~1.1.0","vinyl-transform":"1.0.0",watchify:"^3.7.0"},homepage:"http://yasqe.yasgui.org",keywords:["JavaScript","SPARQL","Editor","Semantic Web","Linked Data"],license:"MIT",main:"src/main.js",maintainers:[{name:"Laurens Rietveld",email:"laurens.rietveld@gmail.com",url:"http://laurensrietveld.nl"}],name:"yasgui-yasqe",optionalShim:{codemirror:{require:"codemirror",global:"CodeMirror"},jquery:{require:"jquery",global:"jQuery"},"../../lib/codemirror":{require:"codemirror",global:"CodeMirror"}},repository:{type:"git",url:"git+https://github.com/YASGUI/YASQE.git"},scripts:{build:"gulp",dev:"gulp serve",major:"gulp major",minor:"gulp minor",patch:"gulp patch"},version:"2.11.14"}},function(e,t,r){var n,i,o;!function(a,s){"use strict";i=[r(0)],n=s,void 0!==(o="function"==typeof n?n.apply(t,i):n)&&(e.exports=o)}(0,function(e){"use strict";function t(e,t){var r;try{r=e[t]}catch(e){r=!1}if(r){var n="__"+Math.round(1e7*Math.random());try{e[t].setItem(n,n),e[t].removeItem(n,n)}catch(e){r=!1}}return r}function r(r){var n=t(window,r);return function(){var i="ngStorage-";this.setKeyPrefix=function(e){if("string"!=typeof e)throw new TypeError("[ngStorage] - "+r+"Provider.setKeyPrefix() expects a String.");i=e};var o=e.toJson,a=e.fromJson;this.setSerializer=function(e){if("function"!=typeof e)throw new TypeError("[ngStorage] - "+r+"Provider.setSerializer expects a function.");o=e},this.setDeserializer=function(e){if("function"!=typeof e)throw new TypeError("[ngStorage] - "+r+"Provider.setDeserializer expects a function.");a=e},this.supported=function(){return!!n},this.get=function(e){return n&&a(n.getItem(i+e))},this.set=function(e,t){return n&&n.setItem(i+e,o(t))},this.remove=function(e){n&&n.removeItem(i+e)},this.$get=["$rootScope","$window","$log","$timeout","$document",function(n,s,l,u,c){var p,d,f=i.length,h=t(s,r),g=h||(l.warn("This browser does not support Web Storage!"),{setItem:e.noop,getItem:e.noop,removeItem:e.noop}),v={$default:function(t){for(var r in t)e.isDefined(v[r])||(v[r]=e.copy(t[r]));return v.$sync(),v},$reset:function(e){for(var t in v)"$"===t[0]||delete v[t]&&g.removeItem(i+t);return v.$default(e)},$sync:function(){for(var e,t=0,r=g.length;t<r;t++)(e=g.key(t))&&i===e.slice(0,f)&&(v[e.slice(f)]=a(g.getItem(e)))},$apply:function(){var t;if(d=null,!e.equals(v,p)){t=e.copy(p),e.forEach(v,function(r,n){e.isDefined(r)&&"$"!==n[0]&&(g.setItem(i+n,o(r)),delete t[n])});for(var r in t)g.removeItem(i+r);p=e.copy(v)}},$supported:function(){return!!h}};return v.$sync(),p=e.copy(v),n.$watch(function(){d||(d=u(v.$apply,100,!1))}),s.addEventListener&&s.addEventListener("storage",function(t){if(t.key){var r=c[0];r.hasFocus&&r.hasFocus()||i!==t.key.slice(0,f)||(t.newValue?v[t.key.slice(f)]=a(t.newValue):delete v[t.key.slice(f)],p=e.copy(v),n.$apply())}}),s.addEventListener&&s.addEventListener("beforeunload",function(){v.$apply()}),v}]}}return e=e&&e.module?e:window.angular,e.module("ngStorage",[]).provider("$localStorage",r("localStorage")).provider("$sessionStorage",r("sessionStorage"))})},function(e,t,r){"use strict";function n(e,t){function r(e,r,s,l){var u=angular.extend({value:r.text()},t.codemirror||{},e.$eval(s.uiCodemirror),e.$eval(s.uiCodemirrorOpts)),c=n(r,u);i(c,s.uiCodemirror||s.uiCodemirrorOpts,e),o(c,l,e),a(c,s.uiRefresh,e),e.$on("CodeMirror",function(e,t){if(!angular.isFunction(t))throw new Error("the CodeMirror event requires a callback function");t(c)}),angular.isFunction(u.onLoad)&&u.onLoad(c)}function n(e,t){var r;return"TEXTAREA"===e[0].tagName?r=window.CodeMirror.fromTextArea(e[0],t):(e.html(""),r=new window.CodeMirror(function(t){e.append(t)},t)),r}function i(e,t,r){function n(t,r){angular.isObject(t)&&i.forEach(function(n){if(t.hasOwnProperty(n)){if(r&&t[n]===r[n])return;e.setOption(n,t[n])}})}if(t){var i=Object.keys(window.CodeMirror.defaults);r.$watch(t,n,!0)}}function o(e,t,r){t&&(t.$formatters.push(function(e){if(angular.isUndefined(e)||null===e)return"";if(angular.isObject(e)||angular.isArray(e))throw new Error("ui-codemirror cannot use an object or an array as a model");return e}),t.$render=function(){var r=t.$viewValue||"";e.setValue(r)},e.on("change",function(e){var n=e.getValue();n!==t.$viewValue&&r.$evalAsync(function(){t.$setViewValue(n)})}))}function a(t,r,n){r&&n.$watch(r,function(r,n){r!==n&&e(function(){t.refresh()})})}return{restrict:"EA",require:"?ngModel",compile:function(){if(angular.isUndefined(window.CodeMirror))throw new Error("ui-codemirror needs CodeMirror to work... (o rly?)");return r}}}angular.module("ui.codemirror",[]).constant("uiCodemirrorConfig",{}).directive("uiCodemirror",n)}]);