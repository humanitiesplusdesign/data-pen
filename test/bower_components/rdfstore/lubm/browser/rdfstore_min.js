/*
 BSD 3-Clause License
 Copyright (c) 2011-2015 Digital Bazaar, Inc.
 All rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are met:

 Redistributions of source code must retain the above copyright notice,
 this list of conditions and the following disclaimer.

 Redistributions in binary form must reproduce the above copyright
 notice, this list of conditions and the following disclaimer in the
 documentation and/or other materials provided with the distribution.

 Neither the name of the Digital Bazaar, Inc. nor the names of its
 contributors may be used to endorse or promote products derived from
 this software without specific prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
 IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED
 TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A
 PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
 TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/
!function(Cc){if("object"==typeof exports)module.exports=Cc();else if("function"==typeof define&&define.amd)define(Cc);else{var x;"undefined"!=typeof window?x=window:"undefined"!=typeof global?x=global:"undefined"!=typeof self&&(x=self);x.rdfstore=Cc()}}(function(){return function x(C,B,m){function h(a,b){if(!B[a]){if(!C[a]){var k="function"==typeof require&&require;if(!b&&k)return k(a,!0);if(c)return c(a,!0);throw Error("Cannot find module '"+a+"'");}k=B[a]={exports:{}};C[a][0].call(k.exports,function(b){var d=
C[a][1][b];return h(d?d:b)},k,k.exports,x,C,B,m)}return B[a].exports}for(var c="function"==typeof require&&require,b=0;b<m.length;b++)h(m[b]);return h}({1:[function(x,C,B){(function(){function m(c){this.message=c}var h="undefined"!=typeof B?B:this;m.prototype=Error();m.prototype.name="InvalidCharacterError";h.btoa||(h.btoa=function(c){for(var b,a,f=0,k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",t="";c.charAt(f|0)||(k="=",f%1);t+=k.charAt(63&b>>8-f%1*8)){a=c.charCodeAt(f+=
.75);if(255<a)throw new m("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");b=b<<8|a}return t});h.atob||(h.atob=function(c){c=c.replace(/=+$/,"");if(1==c.length%4)throw new m("'atob' failed: The string to be decoded is not correctly encoded.");for(var b=0,a,f,k=0,t="";f=c.charAt(k++);~f&&(a=b%4?64*a+f:f,b++%4)?t+=String.fromCharCode(255&a>>(-2*b&6)):0)f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(f);return t})})()},{}],2:[function(x,
C,B){(function(m){function h(b){b=b.charCodeAt(0);if(43===b)return 62;if(47===b)return 63;if(48>b)return-1;if(58>b)return b-48+52;if(91>b)return b-65;if(123>b)return b-97+26}var c="undefined"!==typeof Uint8Array?Uint8Array:Array;m.toByteArray=function(b){function a(d){l[u++]=d}var f,k,t,d,l;if(0<b.length%4)throw Error("Invalid string. Length must be a multiple of 4");f=b.length;d="="===b.charAt(f-2)?2:"="===b.charAt(f-1)?1:0;l=new c(3*b.length/4-d);k=0<d?b.length-4:b.length;var u=0;for(f=0;f<k;f+=
4)t=h(b.charAt(f))<<18|h(b.charAt(f+1))<<12|h(b.charAt(f+2))<<6|h(b.charAt(f+3)),a((t&16711680)>>16),a((t&65280)>>8),a(t&255);2===d?(t=h(b.charAt(f))<<2|h(b.charAt(f+1))>>4,a(t&255)):1===d&&(t=h(b.charAt(f))<<10|h(b.charAt(f+1))<<4|h(b.charAt(f+2))>>2,a(t>>8&255),a(t&255));return l};m.fromByteArray=function(b){var a,f=b.length%3,c="",t,d;a=0;for(d=b.length-f;a<d;a+=3)t=(b[a]<<16)+(b[a+1]<<8)+b[a+2],t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t>>18&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t>>
12&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t>>6&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t&63),c+=t;switch(f){case 1:t=b[b.length-1];c+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t>>2);c+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t<<4&63);c+="==";break;case 2:t=(b[b.length-2]<<8)+b[b.length-1],c+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t>>
10),c+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t>>4&63),c+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t<<2&63),c+="="}return c}})("undefined"===typeof B?this.base64js={}:B)},{}],3:[function(x,C,B){(function(m,h){(function(){function c(d){return"function"===typeof d}function b(){var a=m.nextTick,b=m.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);Array.isArray(b)&&"0"===b[1]&&"10"===b[2]&&(a=setImmediate);return function(){a(d)}}
function a(){return function(){xa(d)}}function f(){var a=0,b=new ya(d),f=document.createTextNode("");b.observe(f,{characterData:!0});return function(){f.data=a=++a%2}}function k(){var a=new MessageChannel;a.port1.onmessage=d;return function(){a.port2.postMessage(0)}}function t(){return function(){setTimeout(d,1)}}function d(){for(var d=0;d<B;d+=2)(0,aa[d])(aa[d+1]),aa[d]=void 0,aa[d+1]=void 0;B=0}function l(){try{var d=x("vertx");xa=d.runOnLoop||d.runOnContext;return a()}catch(b){return t()}}function u(){}
function v(d,a,b,f){try{d.call(a,b,f)}catch(c){return c}}function n(d,a,b){J(function(d){var f=!1,c=v(b,a,function(b){f||(f=!0,a!==b?A(d,b):D(d,b))},function(a){f||(f=!0,E(d,a))},"Settle: "+(d._label||" unknown promise"));!f&&c&&(f=!0,E(d,c))},d)}function z(d,a){1===a._state?D(d,a._result):2===a._state?E(d,a._result):G(a,void 0,function(a){A(d,a)},function(a){E(d,a)})}function A(d,a){if(d===a)E(d,new TypeError("You cannot resolve a promise with itself"));else if("function"===typeof a||"object"===
typeof a&&null!==a)if(a.constructor===d.constructor)z(d,a);else{var b;try{b=a.then}catch(f){ca.error=f,b=ca}b===ca?E(d,ca.error):void 0===b?D(d,a):c(b)?n(d,a,b):D(d,a)}else D(d,a)}function y(d){d._onerror&&d._onerror(d._result);M(d)}function D(d,a){void 0===d._state&&(d._result=a,d._state=1,0!==d._subscribers.length&&J(M,d))}function E(d,a){void 0===d._state&&(d._state=2,d._result=a,J(y,d))}function G(d,a,b,f){var c=d._subscribers,k=c.length;d._onerror=null;c[k]=a;c[k+1]=b;c[k+2]=f;0===k&&d._state&&
J(M,d)}function M(d){var a=d._subscribers,b=d._state;if(0!==a.length){for(var f,c,k=d._result,t=0;t<a.length;t+=3)f=a[t],c=a[t+b],f?O(b,f,c,k):c(k);d._subscribers.length=0}}function L(){this.error=null}function O(d,a,b,f){var k=c(b),t,h,l,n;if(k){try{t=b(f)}catch(J){Aa.error=J,t=Aa}t===Aa?(n=!0,h=t.error,t=null):l=!0;if(a===t){E(a,new TypeError("A promises callback cannot return that same promise."));return}}else t=f,l=!0;void 0===a._state&&(k&&l?A(a,t):n?E(a,h):1===d?D(a,t):2===d&&E(a,t))}function K(d,
a){try{a(function(a){A(d,a)},function(a){E(d,a)})}catch(b){E(d,b)}}function V(d,a){this._instanceConstructor=d;this.promise=new d(u);this._validateInput(a)?(this._input=a,this._remaining=this.length=a.length,this._init(),0===this.length?D(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&D(this.promise,this._result))):E(this.promise,this._validationError())}function N(d){this._id=ea++;this._result=this._state=void 0;this._subscribers=[];if(u!==d){if(!c(d))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");
if(!(this instanceof N))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");K(this,d)}}var F=Array.isArray?Array.isArray:function(d){return"[object Array]"===Object.prototype.toString.call(d)},B=0,xa,H,J=function(a,b){aa[B]=a;aa[B+1]=b;B+=2;2===B&&(H?H(d):fa())},Q="undefined"!==typeof window?window:void 0,ma=Q||{},ya=ma.MutationObserver||ma.WebKitMutationObserver,ma="undefined"!==typeof m&&"[object process]"===
{}.toString.call(m),W="undefined"!==typeof Uint8ClampedArray&&"undefined"!==typeof importScripts&&"undefined"!==typeof MessageChannel,aa=Array(1E3),fa;fa=ma?b():ya?f():W?k():void 0===Q&&"function"===typeof x?l():t();var ca=new L,Aa=new L;V.prototype._validateInput=function(d){return F(d)};V.prototype._validationError=function(){return Error("Array Methods must be provided an Array")};V.prototype._init=function(){this._result=Array(this.length)};V.prototype._enumerate=function(){for(var d=this.length,
a=this.promise,b=this._input,f=0;void 0===a._state&&f<d;f++)this._eachEntry(b[f],f)};V.prototype._eachEntry=function(d,a){var b=this._instanceConstructor;"object"===typeof d&&null!==d?d.constructor===b&&void 0!==d._state?(d._onerror=null,this._settledAt(d._state,a,d._result)):this._willSettleAt(b.resolve(d),a):(this._remaining--,this._result[a]=d)};V.prototype._settledAt=function(d,a,b){var f=this.promise;void 0===f._state&&(this._remaining--,2===d?E(f,b):this._result[a]=b);0===this._remaining&&D(f,
this._result)};V.prototype._willSettleAt=function(d,a){var b=this;G(d,void 0,function(d){b._settledAt(1,a,d)},function(d){b._settledAt(2,a,d)})};var ea=0;N.all=function(d){return(new V(this,d)).promise};N.race=function(d){function a(d){A(f,d)}function b(d){E(f,d)}var f=new this(u);if(!F(d))return E(f,new TypeError("You must pass an array to race.")),f;for(var c=d.length,k=0;void 0===f._state&&k<c;k++)G(this.resolve(d[k]),void 0,a,b);return f};N.resolve=function(d){if(d&&"object"===typeof d&&d.constructor===
this)return d;var a=new this(u);A(a,d);return a};N.reject=function(d){var a=new this(u);E(a,d);return a};N._setScheduler=function(d){H=d};N._setAsap=function(d){J=d};N._asap=J;N.prototype={constructor:N,then:function(d,a){var b=this._state;if(1===b&&!d||2===b&&!a)return this;var f=new this.constructor(u),c=this._result;if(b){var k=arguments[b-1];J(function(){O(b,f,k,c)})}else G(this,f,d,a);return f},"catch":function(d){return this.then(null,d)}};Q=function(){var d;if("undefined"!==typeof h)d=h;else if("undefined"!==
typeof self)d=self;else try{d=Function("return this")()}catch(a){throw Error("polyfill failed because global object is unavailable in this environment");}var b=d.Promise;if(!b||"[object Promise]"!==Object.prototype.toString.call(b.resolve())||b.cast)d.Promise=N};ma={Promise:N,polyfill:Q};"undefined"!==typeof C&&C.exports?C.exports=ma:"undefined"!==typeof this&&(this.ES6Promise=ma);Q()}).call(this)}).call(this,x("7YKIPe"),"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"7YKIPe":10}],
4:[function(x,C,B){function m(){this._events=this._events||{};this._maxListeners=this._maxListeners||void 0}function h(b){return"function"===typeof b}function c(b){return"object"===typeof b&&null!==b}C.exports=m;m.EventEmitter=m;m.prototype._events=void 0;m.prototype._maxListeners=void 0;m.defaultMaxListeners=10;m.prototype.setMaxListeners=function(b){if("number"!==typeof b||0>b||isNaN(b))throw TypeError("n must be a positive number");this._maxListeners=b;return this};m.prototype.emit=function(b){var a,
f,k,t;this._events||(this._events={});if("error"===b&&(!this._events.error||c(this._events.error)&&!this._events.error.length)){a=arguments[1];if(a instanceof Error)throw a;throw TypeError('Uncaught, unspecified "error" event.');}f=this._events[b];if(void 0===f)return!1;if(h(f))switch(arguments.length){case 1:f.call(this);break;case 2:f.call(this,arguments[1]);break;case 3:f.call(this,arguments[1],arguments[2]);break;default:a=arguments.length;k=Array(a-1);for(t=1;t<a;t++)k[t-1]=arguments[t];f.apply(this,
k)}else if(c(f)){a=arguments.length;k=Array(a-1);for(t=1;t<a;t++)k[t-1]=arguments[t];f=f.slice();a=f.length;for(t=0;t<a;t++)f[t].apply(this,k)}return!0};m.prototype.addListener=function(b,a){var f;if(!h(a))throw TypeError("listener must be a function");this._events||(this._events={});this._events.newListener&&this.emit("newListener",b,h(a.listener)?a.listener:a);this._events[b]?c(this._events[b])?this._events[b].push(a):this._events[b]=[this._events[b],a]:this._events[b]=a;c(this._events[b])&&!this._events[b].warned&&
(f=void 0!==this._maxListeners?this._maxListeners:m.defaultMaxListeners)&&0<f&&this._events[b].length>f&&(this._events[b].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[b].length),"function"===typeof console.trace&&console.trace());return this};m.prototype.on=m.prototype.addListener;m.prototype.once=function(b,a){function f(){this.removeListener(b,f);c||(c=!0,a.apply(this,arguments))}
if(!h(a))throw TypeError("listener must be a function");var c=!1;f.listener=a;this.on(b,f);return this};m.prototype.removeListener=function(b,a){var f,k,t;if(!h(a))throw TypeError("listener must be a function");if(!this._events||!this._events[b])return this;f=this._events[b];t=f.length;k=-1;if(f===a||h(f.listener)&&f.listener===a)delete this._events[b],this._events.removeListener&&this.emit("removeListener",b,a);else if(c(f)){for(;0<t--;)if(f[t]===a||f[t].listener&&f[t].listener===a){k=t;break}if(0>
k)return this;1===f.length?(f.length=0,delete this._events[b]):f.splice(k,1);this._events.removeListener&&this.emit("removeListener",b,a)}return this};m.prototype.removeAllListeners=function(b){var a;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[b]&&delete this._events[b],this;if(0===arguments.length){for(a in this._events)"removeListener"!==a&&this.removeAllListeners(a);this.removeAllListeners("removeListener");this._events=
{};return this}a=this._events[b];if(h(a))this.removeListener(b,a);else for(;a.length;)this.removeListener(b,a[a.length-1]);delete this._events[b];return this};m.prototype.listeners=function(b){return this._events&&this._events[b]?h(this._events[b])?[this._events[b]]:this._events[b].slice():[]};m.listenerCount=function(b,a){return b._events&&b._events[a]?h(b._events[a])?1:b._events[a].length:0}},{}],5:[function(x,C,B){},{}],6:[function(x,C,B){function m(d,a,b){if(!(this instanceof m))return new m(d,
a,b);var f=typeof d;if("base64"===a&&"string"===f)for(d=d.trim?d.trim():d.replace(/^\s+|\s+$/g,"");0!==d.length%4;)d+="=";var c;if("number"===f)c=y(d);else if("string"===f)c=m.byteLength(d,a);else if("object"===f)c=y(d.length);else throw Error("First argument needs to be a number, array or string.");var k;m._useTypedArrays?k=m._augment(new Uint8Array(c)):(k=this,k.length=c,k._isBuffer=!0);if(m._useTypedArrays&&"number"===typeof d.byteLength)k._set(d);else{var t=d;if(D(t)||m.isBuffer(t)||t&&"object"===
typeof t&&"number"===typeof t.length)for(a=0;a<c;a++)m.isBuffer(d)?k[a]=d.readUInt8(a):k[a]=d[a];else if("string"===f)k.write(d,0,a);else if("number"===f&&!m._useTypedArrays&&!b)for(a=0;a<c;a++)k[a]=0}return k}function h(d,a,b){var f="";for(b=Math.min(d.length,b);a<b;a++)f+=String.fromCharCode(d[a]);return f}function c(d,a,b,f){f||(F("boolean"===typeof b,"missing or invalid endian"),F(void 0!==a&&null!==a,"missing offset"),F(a+1<d.length,"Trying to read beyond buffer length"));f=d.length;if(!(a>=
f))return b?(b=d[a],a+1<f&&(b|=d[a+1]<<8)):(b=d[a]<<8,a+1<f&&(b|=d[a+1])),b}function b(d,a,b,f){f||(F("boolean"===typeof b,"missing or invalid endian"),F(void 0!==a&&null!==a,"missing offset"),F(a+3<d.length,"Trying to read beyond buffer length"));f=d.length;if(!(a>=f)){var c;b?(a+2<f&&(c=d[a+2]<<16),a+1<f&&(c|=d[a+1]<<8),c|=d[a],a+3<f&&(c+=d[a+3]<<24>>>0)):(a+1<f&&(c=d[a+1]<<16),a+2<f&&(c|=d[a+2]<<8),a+3<f&&(c|=d[a+3]),c+=d[a]<<24>>>0);return c}}function a(d,a,b,f){f||(F("boolean"===typeof b,"missing or invalid endian"),
F(void 0!==a&&null!==a,"missing offset"),F(a+1<d.length,"Trying to read beyond buffer length"));if(!(a>=d.length))return d=c(d,a,b,!0),d&32768?-1*(65535-d+1):d}function f(d,a,f,c){c||(F("boolean"===typeof f,"missing or invalid endian"),F(void 0!==a&&null!==a,"missing offset"),F(a+3<d.length,"Trying to read beyond buffer length"));if(!(a>=d.length))return d=b(d,a,f,!0),d&2147483648?-1*(4294967295-d+1):d}function k(d,a,b,f){f||(F("boolean"===typeof b,"missing or invalid endian"),F(a+3<d.length,"Trying to read beyond buffer length"));
return xa.read(d,a,b,23,4)}function t(d,a,b,f){f||(F("boolean"===typeof b,"missing or invalid endian"),F(a+7<d.length,"Trying to read beyond buffer length"));return xa.read(d,a,b,52,8)}function d(d,a,b,f,c){c||(F(void 0!==a&&null!==a,"missing value"),F("boolean"===typeof f,"missing or invalid endian"),F(void 0!==b&&null!==b,"missing offset"),F(b+1<d.length,"trying to write beyond buffer length"),K(a,65535));var k=d.length;if(!(b>=k))for(c=0,k=Math.min(k-b,2);c<k;c++)d[b+c]=(a&255<<8*(f?c:1-c))>>>
8*(f?c:1-c)}function l(d,a,b,f,c){c||(F(void 0!==a&&null!==a,"missing value"),F("boolean"===typeof f,"missing or invalid endian"),F(void 0!==b&&null!==b,"missing offset"),F(b+3<d.length,"trying to write beyond buffer length"),K(a,4294967295));var k=d.length;if(!(b>=k))for(c=0,k=Math.min(k-b,4);c<k;c++)d[b+c]=a>>>8*(f?c:3-c)&255}function u(a,b,f,c,k){k||(F(void 0!==b&&null!==b,"missing value"),F("boolean"===typeof c,"missing or invalid endian"),F(void 0!==f&&null!==f,"missing offset"),F(f+1<a.length,
"Trying to write beyond buffer length"),V(b,32767,-32768));f>=a.length||(0<=b?d(a,b,f,c,k):d(a,65535+b+1,f,c,k))}function v(d,a,b,f,c){c||(F(void 0!==a&&null!==a,"missing value"),F("boolean"===typeof f,"missing or invalid endian"),F(void 0!==b&&null!==b,"missing offset"),F(b+3<d.length,"Trying to write beyond buffer length"),V(a,2147483647,-2147483648));b>=d.length||(0<=a?l(d,a,b,f,c):l(d,4294967295+a+1,b,f,c))}function n(d,a,b,f,c){c||(F(void 0!==a&&null!==a,"missing value"),F("boolean"===typeof f,
"missing or invalid endian"),F(void 0!==b&&null!==b,"missing offset"),F(b+3<d.length,"Trying to write beyond buffer length"),N(a,3.4028234663852886E38,-3.4028234663852886E38));b>=d.length||xa.write(d,a,b,f,23,4)}function z(d,a,b,f,c){c||(F(void 0!==a&&null!==a,"missing value"),F("boolean"===typeof f,"missing or invalid endian"),F(void 0!==b&&null!==b,"missing offset"),F(b+7<d.length,"Trying to write beyond buffer length"),N(a,1.7976931348623157E308,-1.7976931348623157E308));b>=d.length||xa.write(d,
a,b,f,52,8)}function A(d,a,b){if("number"!==typeof d)return b;d=~~d;if(d>=a)return a;if(0<=d)return d;d+=a;return 0<=d?d:0}function y(d){d=~~Math.ceil(+d);return 0>d?0:d}function D(d){return(Array.isArray||function(d){return"[object Array]"===Object.prototype.toString.call(d)})(d)}function E(d){return 16>d?"0"+d.toString(16):d.toString(16)}function G(d){for(var a=[],b=0;b<d.length;b++){var f=d.charCodeAt(b);if(127>=f)a.push(d.charCodeAt(b));else{var c=b;55296<=f&&57343>=f&&b++;f=encodeURIComponent(d.slice(c,
b+1)).substr(1).split("%");for(c=0;c<f.length;c++)a.push(parseInt(f[c],16))}}return a}function M(d){for(var a=[],b=0;b<d.length;b++)a.push(d.charCodeAt(b)&255);return a}function L(d,a,b,f){for(var c=0;c<f&&!(c+b>=a.length||c>=d.length);c++)a[c+b]=d[c];return c}function O(d){try{return decodeURIComponent(d)}catch(a){return String.fromCharCode(65533)}}function K(d,a){F("number"===typeof d,"cannot write a non-number as a number");F(0<=d,"specified a negative value for writing an unsigned value");F(d<=
a,"value is larger than maximum value for type");F(Math.floor(d)===d,"value has a fractional component")}function V(d,a,b){F("number"===typeof d,"cannot write a non-number as a number");F(d<=a,"value larger than maximum allowed value");F(d>=b,"value smaller than minimum allowed value");F(Math.floor(d)===d,"value has a fractional component")}function N(d,a,b){F("number"===typeof d,"cannot write a non-number as a number");F(d<=a,"value larger than maximum allowed value");F(d>=b,"value smaller than minimum allowed value")}
function F(d,a){if(!d)throw Error(a||"Failed assertion");}var sa=x("base64-js"),xa=x("ieee754");B.Buffer=m;B.SlowBuffer=m;B.INSPECT_MAX_BYTES=50;m.poolSize=8192;m._useTypedArrays=function(){try{var d=new ArrayBuffer(0),a=new Uint8Array(d);a.foo=function(){return 42};return 42===a.foo()&&"function"===typeof a.subarray}catch(b){return!1}}();m.isEncoding=function(d){switch(String(d).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "raw":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;
default:return!1}};m.isBuffer=function(d){return!(null===d||void 0===d||!d._isBuffer)};m.byteLength=function(d,a){var b;d+="";switch(a||"utf8"){case "hex":b=d.length/2;break;case "utf8":case "utf-8":b=G(d).length;break;case "ascii":case "binary":case "raw":b=d.length;break;case "base64":b=sa.toByteArray(d).length;break;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":b=2*d.length;break;default:throw Error("Unknown encoding");}return b};m.concat=function(d,a){F(D(d),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array.");
if(0===d.length)return new m(0);if(1===d.length)return d[0];var b;if("number"!==typeof a)for(b=a=0;b<d.length;b++)a+=d[b].length;var f=new m(a),c=0;for(b=0;b<d.length;b++){var k=d[b];k.copy(f,c);c+=k.length}return f};m.prototype.write=function(d,a,b,f){if(isFinite(a))isFinite(b)||(f=b,b=void 0);else{var c=f;f=a;a=b;b=c}a=Number(a)||0;c=this.length-a;b?(b=Number(b),b>c&&(b=c)):b=c;f=String(f||"utf8").toLowerCase();switch(f){case "hex":a=Number(a)||0;f=this.length-a;b?(b=Number(b),b>f&&(b=f)):b=f;f=
d.length;F(0===f%2,"Invalid hex string");b>f/2&&(b=f/2);for(f=0;f<b;f++)c=parseInt(d.substr(2*f,2),16),F(!isNaN(c),"Invalid hex string"),this[a+f]=c;m._charsWritten=2*f;d=f;break;case "utf8":case "utf-8":d=m._charsWritten=L(G(d),this,a,b);break;case "ascii":d=m._charsWritten=L(M(d),this,a,b);break;case "binary":d=m._charsWritten=L(M(d),this,a,b);break;case "base64":d=m._charsWritten=L(sa.toByteArray(d),this,a,b);break;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":for(var k,c=[],t=0;t<d.length;t++)k=
d.charCodeAt(t),f=k>>8,k%=256,c.push(k),c.push(f);d=m._charsWritten=L(c,this,a,b);break;default:throw Error("Unknown encoding");}return d};m.prototype.toString=function(d,a,b){d=String(d||"utf8").toLowerCase();a=Number(a)||0;b=void 0!==b?Number(b):b=this.length;if(b===a)return"";switch(d){case "hex":d=this.length;if(!a||0>a)a=0;if(!b||0>b||b>d)b=d;for(d="";a<b;a++)d+=E(this[a]);b=d;break;case "utf8":case "utf-8":var f=d="";for(b=Math.min(this.length,b);a<b;a++)127>=this[a]?(d+=O(f)+String.fromCharCode(this[a]),
f=""):f+="%"+this[a].toString(16);b=d+O(f);break;case "ascii":b=h(this,a,b);break;case "binary":b=h(this,a,b);break;case "base64":b=0===a&&b===this.length?sa.fromByteArray(this):sa.fromByteArray(this.slice(a,b));break;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":b=this.slice(a,b);a="";for(d=0;d<b.length;d+=2)a+=String.fromCharCode(b[d]+256*b[d+1]);b=a;break;default:throw Error("Unknown encoding");}return b};m.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||
this,0)}};m.prototype.copy=function(d,a,b,f){b||(b=0);f||0===f||(f=this.length);a||(a=0);if(f!==b&&0!==d.length&&0!==this.length)if(F(f>=b,"sourceEnd < sourceStart"),F(0<=a&&a<d.length,"targetStart out of bounds"),F(0<=b&&b<this.length,"sourceStart out of bounds"),F(0<=f&&f<=this.length,"sourceEnd out of bounds"),f>this.length&&(f=this.length),d.length-a<f-b&&(f=d.length-a+b),f-=b,100>f||!m._useTypedArrays)for(var c=0;c<f;c++)d[c+a]=this[c+b];else d._set(this.subarray(b,b+f),a)};m.prototype.slice=
function(d,a){var b=this.length;d=A(d,b,0);a=A(a,b,b);if(m._useTypedArrays)return m._augment(this.subarray(d,a));for(var b=a-d,f=new m(b,void 0,!0),c=0;c<b;c++)f[c]=this[c+d];return f};m.prototype.get=function(d){console.log(".get() is deprecated. Access using array indexes instead.");return this.readUInt8(d)};m.prototype.set=function(d,a){console.log(".set() is deprecated. Access using array indexes instead.");return this.writeUInt8(d,a)};m.prototype.readUInt8=function(d,a){a||(F(void 0!==d&&null!==
d,"missing offset"),F(d<this.length,"Trying to read beyond buffer length"));if(!(d>=this.length))return this[d]};m.prototype.readUInt16LE=function(d,a){return c(this,d,!0,a)};m.prototype.readUInt16BE=function(d,a){return c(this,d,!1,a)};m.prototype.readUInt32LE=function(d,a){return b(this,d,!0,a)};m.prototype.readUInt32BE=function(d,a){return b(this,d,!1,a)};m.prototype.readInt8=function(d,a){a||(F(void 0!==d&&null!==d,"missing offset"),F(d<this.length,"Trying to read beyond buffer length"));if(!(d>=
this.length))return this[d]&128?-1*(255-this[d]+1):this[d]};m.prototype.readInt16LE=function(d,b){return a(this,d,!0,b)};m.prototype.readInt16BE=function(d,b){return a(this,d,!1,b)};m.prototype.readInt32LE=function(d,a){return f(this,d,!0,a)};m.prototype.readInt32BE=function(d,a){return f(this,d,!1,a)};m.prototype.readFloatLE=function(d,a){return k(this,d,!0,a)};m.prototype.readFloatBE=function(d,a){return k(this,d,!1,a)};m.prototype.readDoubleLE=function(d,a){return t(this,d,!0,a)};m.prototype.readDoubleBE=
function(d,a){return t(this,d,!1,a)};m.prototype.writeUInt8=function(d,a,b){b||(F(void 0!==d&&null!==d,"missing value"),F(void 0!==a&&null!==a,"missing offset"),F(a<this.length,"trying to write beyond buffer length"),K(d,255));a>=this.length||(this[a]=d)};m.prototype.writeUInt16LE=function(a,b,f){d(this,a,b,!0,f)};m.prototype.writeUInt16BE=function(a,b,f){d(this,a,b,!1,f)};m.prototype.writeUInt32LE=function(d,a,b){l(this,d,a,!0,b)};m.prototype.writeUInt32BE=function(d,a,b){l(this,d,a,!1,b)};m.prototype.writeInt8=
function(d,a,b){b||(F(void 0!==d&&null!==d,"missing value"),F(void 0!==a&&null!==a,"missing offset"),F(a<this.length,"Trying to write beyond buffer length"),V(d,127,-128));a>=this.length||(0<=d?this.writeUInt8(d,a,b):this.writeUInt8(255+d+1,a,b))};m.prototype.writeInt16LE=function(d,a,b){u(this,d,a,!0,b)};m.prototype.writeInt16BE=function(d,a,b){u(this,d,a,!1,b)};m.prototype.writeInt32LE=function(d,a,b){v(this,d,a,!0,b)};m.prototype.writeInt32BE=function(d,a,b){v(this,d,a,!1,b)};m.prototype.writeFloatLE=
function(d,a,b){n(this,d,a,!0,b)};m.prototype.writeFloatBE=function(d,a,b){n(this,d,a,!1,b)};m.prototype.writeDoubleLE=function(d,a,b){z(this,d,a,!0,b)};m.prototype.writeDoubleBE=function(d,a,b){z(this,d,a,!1,b)};m.prototype.fill=function(d,a,b){d||(d=0);a||(a=0);b||(b=this.length);"string"===typeof d&&(d=d.charCodeAt(0));F("number"===typeof d&&!isNaN(d),"value is not a number");F(b>=a,"end < start");if(b!==a&&0!==this.length)for(F(0<=a&&a<this.length,"start out of bounds"),F(0<=b&&b<=this.length,
"end out of bounds");a<b;a++)this[a]=d};m.prototype.inspect=function(){for(var d=[],a=this.length,b=0;b<a;b++)if(d[b]=E(this[b]),b===B.INSPECT_MAX_BYTES){d[b+1]="...";break}return"<Buffer "+d.join(" ")+">"};m.prototype.toArrayBuffer=function(){if("undefined"!==typeof Uint8Array){if(m._useTypedArrays)return(new m(this)).buffer;for(var d=new Uint8Array(this.length),a=0,b=d.length;a<b;a+=1)d[a]=this[a];return d.buffer}throw Error("Buffer.toArrayBuffer not supported in this browser");};var H=m.prototype;
m._augment=function(d){d._isBuffer=!0;d._get=d.get;d._set=d.set;d.get=H.get;d.set=H.set;d.write=H.write;d.toString=H.toString;d.toLocaleString=H.toString;d.toJSON=H.toJSON;d.copy=H.copy;d.slice=H.slice;d.readUInt8=H.readUInt8;d.readUInt16LE=H.readUInt16LE;d.readUInt16BE=H.readUInt16BE;d.readUInt32LE=H.readUInt32LE;d.readUInt32BE=H.readUInt32BE;d.readInt8=H.readInt8;d.readInt16LE=H.readInt16LE;d.readInt16BE=H.readInt16BE;d.readInt32LE=H.readInt32LE;d.readInt32BE=H.readInt32BE;d.readFloatLE=H.readFloatLE;
d.readFloatBE=H.readFloatBE;d.readDoubleLE=H.readDoubleLE;d.readDoubleBE=H.readDoubleBE;d.writeUInt8=H.writeUInt8;d.writeUInt16LE=H.writeUInt16LE;d.writeUInt16BE=H.writeUInt16BE;d.writeUInt32LE=H.writeUInt32LE;d.writeUInt32BE=H.writeUInt32BE;d.writeInt8=H.writeInt8;d.writeInt16LE=H.writeInt16LE;d.writeInt16BE=H.writeInt16BE;d.writeInt32LE=H.writeInt32LE;d.writeInt32BE=H.writeInt32BE;d.writeFloatLE=H.writeFloatLE;d.writeFloatBE=H.writeFloatBE;d.writeDoubleLE=H.writeDoubleLE;d.writeDoubleBE=H.writeDoubleBE;
d.fill=H.fill;d.inspect=H.inspect;d.toArrayBuffer=H.toArrayBuffer;return d}},{"base64-js":2,ieee754:23}],7:[function(x,C,B){var m=C.exports;x("events");var h=x("./lib/request"),c=x("url");m.request=function(a,f){"string"===typeof a&&(a=c.parse(a));a||(a={});a.host||a.port||(a.port=parseInt(window.location.port,10));!a.host&&a.hostname&&(a.host=a.hostname);a.scheme||(a.scheme=window.location.protocol.split(":")[0]);a.host||(a.host=window.location.hostname||window.location.host);/:/.test(a.host)&&(a.port||
(a.port=a.host.split(":")[1]),a.host=a.host.split(":")[0]);a.port||(a.port="https"==a.scheme?443:80);var k=new h(new b,a);if(f)k.on("response",f);return k};m.get=function(a,b){a.method="GET";var c=m.request(a,b);c.end();return c};m.Agent=function(){};m.Agent.defaultMaxSockets=4;var b=function(){if("undefined"===typeof window)throw Error("no window object present");if(window.XMLHttpRequest)return window.XMLHttpRequest;if(window.ActiveXObject)for(var a=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"],
b=0;b<a.length;b++)try{var c=new window.ActiveXObject(a[b]);return function(){if(c){var t=c;c=null;return t}return new window.ActiveXObject(a[b])}}catch(t){}throw Error("ajax not supported in this browser");}();m.STATUS_CODES={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",
303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",
422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},
{"./lib/request":8,events:4,url:36}],8:[function(x,C,B){B=x("stream");var m=x("./response"),h=x("Base64");x=x("inherits");var c=C.exports=function(a,c){var t=this;t.writable=!0;t.xhr=a;t.body=[];t.uri=(c.scheme||"http")+"://"+c.host+(c.port?":"+c.port:"")+(c.path||"/");"undefined"===typeof c.withCredentials&&(c.withCredentials=!0);try{a.withCredentials=c.withCredentials}catch(n){}a.open(c.method||"GET",t.uri,!0);t._headers={};if(c.headers)for(var d=b(c.headers),l=0;l<d.length;l++){var u=d[l];t.isSafeRequestHeader(u)&&
t.setHeader(u,c.headers[u])}c.auth&&this.setHeader("Authorization","Basic "+h.btoa(c.auth));var v=new m;v.on("close",function(){t.emit("close")});v.on("ready",function(){t.emit("response",v)});a.onreadystatechange=function(){a.__aborted||v.handle(a)}};x(c,B);c.prototype.setHeader=function(a,b){this._headers[a.toLowerCase()]=b};c.prototype.getHeader=function(a){return this._headers[a.toLowerCase()]};c.prototype.removeHeader=function(a){delete this._headers[a.toLowerCase()]};c.prototype.write=function(a){this.body.push(a)};
c.prototype.destroy=function(a){this.xhr.__aborted=!0;this.xhr.abort();this.emit("close")};c.prototype.end=function(f){void 0!==f&&this.body.push(f);var c=b(this._headers);for(f=0;f<c.length;f++){var t=c[f],d=this._headers[t];if(a(d))for(var h=0;h<d.length;h++)this.xhr.setRequestHeader(t,d[h]);else this.xhr.setRequestHeader(t,d)}if(0===this.body.length)this.xhr.send("");else if("string"===typeof this.body[0])this.xhr.send(this.body.join(""));else{if(a(this.body[0]))for(c=[],f=0;f<this.body.length;f++)c.push.apply(c,
this.body[f]);else if(/Array/.test(Object.prototype.toString.call(this.body[0]))){for(f=h=0;f<this.body.length;f++)h+=this.body[f].length;c=new this.body[0].constructor(h);for(f=t=0;f<this.body.length;f++)for(d=this.body[f],h=0;h<d.length;h++)c[t++]=d[h]}else for(c="",f=0;f<this.body.length;f++)c+=this.body[f].toString();this.xhr.send(c)}};c.unsafeHeaders="accept-charset accept-encoding access-control-request-headers access-control-request-method connection content-length cookie cookie2 content-transfer-encoding date expect host keep-alive origin referer te trailer transfer-encoding upgrade user-agent via".split(" ");
c.prototype.isSafeRequestHeader=function(a){if(!a)return!1;var b;a:if(b=c.unsafeHeaders,a=a.toLowerCase(),b.indexOf)b=b.indexOf(a);else{for(var t=0;t<b.length;t++)if(b[t]===a){b=t;break a}b=-1}return-1===b};var b=Object.keys||function(a){var b=[],c;for(c in a)b.push(c);return b},a=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}},{"./response":9,Base64:1,inherits:24,stream:15}],9:[function(x,C,B){function m(a){a=a.getAllResponseHeaders().split(/\r?\n/);for(var f=
{},c=0;c<a.length;c++){var t=a[c];if(""!==t){var d=t.match(/^([^:]+):\s*(.*)/);d?(t=d[1].toLowerCase(),d=d[2],void 0!==f[t]?b(f[t])?f[t].push(d):f[t]=[f[t],d]:f[t]=d):f[t]=!0}}return f}B=x("stream");x=x("util");C=C.exports=function(a){this.offset=0;this.readable=!0};x.inherits(C,B);var h=!0,c=!0;C.prototype.getResponse=function(a){var b=String(a.responseType).toLowerCase();return"blob"===b?a.responseBlob||a.response:"arraybuffer"===b?a.response:a.responseText};C.prototype.getHeader=function(a){return this.headers[a.toLowerCase()]};
C.prototype.handle=function(a){if(2===a.readyState&&c){try{this.statusCode=a.status,this.headers=m(a)}catch(b){c=!1}c&&this.emit("ready")}else if(h&&3===a.readyState){try{this.statusCode||(this.statusCode=a.status,this.headers=m(a),this.emit("ready"))}catch(b){}try{this._emitData(a)}catch(b){h=!1}}else 4===a.readyState&&(this.statusCode||(this.statusCode=a.status,this.emit("ready")),this._emitData(a),a.error?this.emit("error",this.getResponse(a)):this.emit("end"),this.emit("close"))};C.prototype._emitData=
function(a){a=this.getResponse(a);a.toString().match(/ArrayBuffer/)?(this.emit("data",new Uint8Array(a,this.offset)),this.offset=a.byteLength):a.length>this.offset&&(this.emit("data",a.slice(this.offset)),this.offset=a.length)};var b=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}},{stream:15,util:38}],10:[function(x,C,B){function m(){}x=C.exports={};x.nextTick=function(){if("undefined"!==typeof window&&window.setImmediate)return function(c){return window.setImmediate(c)};
if("undefined"!==typeof window&&window.postMessage&&window.addEventListener){var h=[];window.addEventListener("message",function(c){var b=c.source;b!==window&&null!==b||"process-tick"!==c.data||(c.stopPropagation(),0<h.length&&h.shift()())},!0);return function(c){h.push(c);window.postMessage("process-tick","*")}}return function(c){setTimeout(c,0)}}();x.title="browser";x.browser=!0;x.env={};x.argv=[];x.on=m;x.addListener=m;x.once=m;x.off=m;x.removeListener=m;x.removeAllListeners=m;x.emit=m;x.binding=
function(h){throw Error("process.binding is not supported");};x.cwd=function(){return"/"};x.chdir=function(h){throw Error("process.chdir is not supported");}},{}],11:[function(x,C,B){C.exports=function(h,c,b,a){b=b||"=";var f={};if("string"!==typeof h||0===h.length)return f;var k=/\+/g;h=h.split(c||"&");c=1E3;a&&"number"===typeof a.maxKeys&&(c=a.maxKeys);a=h.length;0<c&&a>c&&(a=c);for(c=0;c<a;++c){var t=h[c].replace(k,"%20"),d=t.indexOf(b),l;0<=d?(l=t.substr(0,d),t=t.substr(d+1)):(l=t,t="");l=decodeURIComponent(l);
t=decodeURIComponent(t);Object.prototype.hasOwnProperty.call(f,l)?m(f[l])?f[l].push(t):f[l]=[f[l],t]:f[l]=t}return f};var m=Array.isArray||function(h){return"[object Array]"===Object.prototype.toString.call(h)}},{}],12:[function(x,C,B){function m(a,b){if(a.map)return a.map(b);for(var c=[],t=0;t<a.length;t++)c.push(b(a[t],t));return c}var h=function(a){switch(typeof a){case "string":return a;case "boolean":return a?"true":"false";case "number":return isFinite(a)?a:"";default:return""}};C.exports=function(a,
f,k,t){f=f||"&";k=k||"=";null===a&&(a=void 0);return"object"===typeof a?m(b(a),function(d){var b=encodeURIComponent(h(d))+k;return c(a[d])?a[d].map(function(d){return b+encodeURIComponent(h(d))}).join(f):b+encodeURIComponent(h(a[d]))}).join(f):t?encodeURIComponent(h(t))+k+encodeURIComponent(h(a)):""};var c=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},b=Object.keys||function(a){var b=[],c;for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b}},
{}],13:[function(x,C,B){B.decode=B.parse=x("./decode");B.encode=B.stringify=x("./encode")},{"./decode":11,"./encode":12}],14:[function(x,C,B){function m(c){if(!(this instanceof m))return new m(c);b.call(this,c);a.call(this,c);c&&!1===c.readable&&(this.readable=!1);c&&!1===c.writable&&(this.writable=!1);this.allowHalfOpen=!0;c&&!1===c.allowHalfOpen&&(this.allowHalfOpen=!1);this.once("end",h)}function h(){if(!this.allowHalfOpen&&!this._writableState.ended){var a=this;c(function(){a.end()})}}C.exports=
m;C=x("inherits");var c=x("process/browser.js").nextTick,b=x("./readable.js"),a=x("./writable.js");C(m,b);m.prototype.write=a.prototype.write;m.prototype.end=a.prototype.end;m.prototype._write=a.prototype._write},{"./readable.js":18,"./writable.js":20,inherits:24,"process/browser.js":16}],15:[function(x,C,B){function m(){h.call(this)}C.exports=m;var h=x("events").EventEmitter;x("inherits")(m,h);m.Readable=x("./readable.js");m.Writable=x("./writable.js");m.Duplex=x("./duplex.js");m.Transform=x("./transform.js");
m.PassThrough=x("./passthrough.js");m.Stream=m;m.prototype.pipe=function(c,b){function a(d){c.writable&&!1===c.write(d)&&u.pause&&u.pause()}function f(){u.readable&&u.resume&&u.resume()}function k(){v||(v=!0,c.end())}function t(){v||(v=!0,"function"===typeof c.destroy&&c.destroy())}function d(d){l();if(0===h.listenerCount(this,"error"))throw d;}function l(){u.removeListener("data",a);c.removeListener("drain",f);u.removeListener("end",k);u.removeListener("close",t);u.removeListener("error",d);c.removeListener("error",
d);u.removeListener("end",l);u.removeListener("close",l);c.removeListener("close",l)}var u=this;u.on("data",a);c.on("drain",f);c._isStdio||b&&!1===b.end||(u.on("end",k),u.on("close",t));var v=!1;u.on("error",d);c.on("error",d);u.on("end",l);u.on("close",l);c.on("close",l);c.emit("pipe",u);return c}},{"./duplex.js":14,"./passthrough.js":17,"./readable.js":18,"./transform.js":19,"./writable.js":20,events:4,inherits:24}],16:[function(x,C,B){x=C.exports={};x.nextTick=function(){if("undefined"!==typeof window&&
window.setImmediate)return function(h){return window.setImmediate(h)};if("undefined"!==typeof window&&window.postMessage&&window.addEventListener){var m=[];window.addEventListener("message",function(h){var c=h.source;c!==window&&null!==c||"process-tick"!==h.data||(h.stopPropagation(),0<m.length&&m.shift()())},!0);return function(h){m.push(h);window.postMessage("process-tick","*")}}return function(h){setTimeout(h,0)}}();x.title="browser";x.browser=!0;x.env={};x.argv=[];x.binding=function(m){throw Error("process.binding is not supported");
};x.cwd=function(){return"/"};x.chdir=function(m){throw Error("process.chdir is not supported");}},{}],17:[function(x,C,B){function m(c){if(!(this instanceof m))return new m(c);h.call(this,c)}C.exports=m;var h=x("./transform.js");x("inherits")(m,h);m.prototype._transform=function(c,b,a){a(null,c)}},{"./transform.js":19,inherits:24}],18:[function(x,C,B){(function(m){function h(d,a){d=d||{};var b=d.highWaterMark;this.highWaterMark=b||0===b?b:16384;this.highWaterMark=~~this.highWaterMark;this.buffer=
[];this.length=0;this.pipes=null;this.pipesCount=0;this.calledRead=this.reading=this.endEmitted=this.ended=this.flowing=!1;this.sync=!0;this.readableListening=this.emittedReadable=this.needReadable=!1;this.objectMode=!!d.objectMode;this.defaultEncoding=d.defaultEncoding||"utf8";this.ranOut=!1;this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;d.encoding&&(G||(G=x("string_decoder").StringDecoder),this.decoder=new G(d.encoding),this.encoding=d.encoding)}function c(d){if(!(this instanceof
c))return new c(d);this._readableState=new h(d,this);this.readable=!0;y.call(this)}function b(d,a,b,c,t){var h;h=b;var l=null;D.isBuffer(h)||"string"===typeof h||null===h||void 0===h||a.objectMode||l||(l=new TypeError("Invalid non-string/buffer chunk"));(h=l)?d.emit("error",h):null===b||void 0===b?(a.reading=!1,a.ended||(a.decoder&&!a.ended&&(b=a.decoder.end())&&b.length&&(a.buffer.push(b),a.length+=a.objectMode?1:b.length),a.ended=!0,0<a.length?f(d):n(d))):a.objectMode||b&&0<b.length?a.ended&&!t?
(b=Error("stream.push() after EOF"),d.emit("error",b)):a.endEmitted&&t?(b=Error("stream.unshift() after end event"),d.emit("error",b)):(!a.decoder||t||c||(b=a.decoder.write(b)),a.length+=a.objectMode?1:b.length,t?a.buffer.unshift(b):(a.reading=!1,a.buffer.push(b)),a.needReadable&&f(d),k(d,a)):t||(a.reading=!1);return!a.ended&&(a.needReadable||a.length<a.highWaterMark||0===a.length)}function a(d,a){if(0===a.length&&a.ended)return 0;if(a.objectMode)return 0===d?0:1;if(isNaN(d)||null===d)return a.flowing&&
a.buffer.length?a.buffer[0].length:a.length;if(0>=d)return 0;if(d>a.highWaterMark){var b=d;if(8388608<=b)b=8388608;else{b--;for(var c=1;32>c;c<<=1)b|=b>>c;b++}a.highWaterMark=b}if(d>a.length){if(a.ended)return a.length;a.needReadable=!0;return 0}return d}function f(d){var a=d._readableState;a.needReadable=!1;a.emittedReadable||(a.emittedReadable=!0,a.sync?E(function(){d.emit("readable")}):d.emit("readable"))}function k(d,a){a.readingMore||(a.readingMore=!0,E(function(){for(var b=a.length;!a.reading&&
!a.flowing&&!a.ended&&a.length<a.highWaterMark&&(d.read(0),b!==a.length);)b=a.length;a.readingMore=!1}))}function t(a){return function(){var b=a._readableState;b.awaitDrain--;0===b.awaitDrain&&d(a)}}function d(d){function a(d,f,t){!1===d.write(c)&&b.awaitDrain++}var b=d._readableState,c;for(b.awaitDrain=0;b.pipesCount&&null!==(c=d.read());)if(1===b.pipesCount?a(b.pipes,0,null):z(b.pipes,a),d.emit("data",c),0<b.awaitDrain)return;0===b.pipesCount?(b.flowing=!1,0<A.listenerCount(d,"data")&&u(d)):b.ranOut=
!0}function l(){this._readableState.ranOut&&(this._readableState.ranOut=!1,d(this))}function u(d,a){if(d._readableState.flowing)throw Error("Cannot switch to old mode now.");var b=a||!1,c=!1;d.readable=!0;d.pipe=y.prototype.pipe;d.on=d.addListener=y.prototype.on;d.on("readable",function(){c=!0;for(var a;!b&&null!==(a=d.read());)d.emit("data",a);null===a&&(c=!1,d._readableState.needReadable=!0)});d.pause=function(){b=!0;this.emit("pause")};d.resume=function(){b=!1;c?E(function(){d.emit("readable")}):
this.read(0);this.emit("resume")};d.emit("readable")}function v(d,a){var b=a.buffer,c=a.length,f=!!a.decoder,t=!!a.objectMode;if(0===b.length)return null;if(0===c)c=null;else if(t)c=b.shift();else if(!d||d>=c)c=f?b.join(""):D.concat(b,c),b.length=0;else if(d<b[0].length)t=b[0],c=t.slice(0,d),b[0]=t.slice(d);else if(d===b[0].length)c=b.shift();else for(var c=f?"":new D(d),k=0,h=0,l=b.length;h<l&&k<d;h++){var t=b[0],n=Math.min(d-k,t.length);f?c+=t.slice(0,n):t.copy(c,k,0,n);n<t.length?b[0]=t.slice(n):
b.shift();k+=n}return c}function n(d){var a=d._readableState;if(0<a.length)throw Error("endReadable called on non-empty stream");!a.endEmitted&&a.calledRead&&(a.ended=!0,E(function(){a.endEmitted||0!==a.length||(a.endEmitted=!0,d.readable=!1,d.emit("end"))}))}function z(d,a){for(var b=0,c=d.length;b<c;b++)a(d[b],b)}C.exports=c;c.ReadableState=h;var A=x("events").EventEmitter,y=x("./index.js"),D=x("buffer").Buffer,E=x("process/browser.js").nextTick,G;x("inherits")(c,y);c.prototype.push=function(d,
a){var c=this._readableState;"string"!==typeof d||c.objectMode||(a=a||c.defaultEncoding,a!==c.encoding&&(d=new D(d,a),a=""));return b(this,c,d,a,!1)};c.prototype.unshift=function(d){return b(this,this._readableState,d,"",!0)};c.prototype.setEncoding=function(d){G||(G=x("string_decoder").StringDecoder);this._readableState.decoder=new G(d);this._readableState.encoding=d};c.prototype.read=function(d){var b=this._readableState;b.calledRead=!0;var c=d;if("number"!==typeof d||0<d)b.emittedReadable=!1;if(0===
d&&b.needReadable&&(b.length>=b.highWaterMark||b.ended))return f(this),null;d=a(d,b);if(0===d&&b.ended)return 0===b.length&&n(this),null;var t=b.needReadable;b.length-d<=b.highWaterMark&&(t=!0);if(b.ended||b.reading)t=!1;t&&(b.reading=!0,b.sync=!0,0===b.length&&(b.needReadable=!0),this._read(b.highWaterMark),b.sync=!1);t&&!b.reading&&(d=a(c,b));c=0<d?v(d,b):null;null===c&&(b.needReadable=!0,d=0);b.length-=d;0!==b.length||b.ended||(b.needReadable=!0);b.ended&&!b.endEmitted&&0===b.length&&n(this);return c};
c.prototype._read=function(d){this.emit("error",Error("not implemented"))};c.prototype.pipe=function(a,b){function c(d){d===y&&k()}function f(){a.end()}function k(){a.removeListener("close",n);a.removeListener("finish",u);a.removeListener("drain",G);a.removeListener("error",h);a.removeListener("unpipe",c);y.removeListener("end",f);y.removeListener("end",k);a._writableState&&!a._writableState.needDrain||G()}function h(d){y.unpipe(a);0===D&&0===A.listenerCount(a,"error")&&a.emit("error",d)}function n(){a.removeListener("finish",
u);y.unpipe(a)}function u(){a.removeListener("close",n);y.unpipe(a)}var y=this,v=this._readableState;switch(v.pipesCount){case 0:v.pipes=a;break;case 1:v.pipes=[v.pipes,a];break;default:v.pipes.push(a)}v.pipesCount+=1;var z=b&&!1===b.end||a===m.stdout||a===m.stderr?k:f;if(v.endEmitted)E(z);else y.once("end",z);a.on("unpipe",c);var G=t(y);a.on("drain",G);var D=A.listenerCount(a,"error");a.once("error",h);a.once("close",n);a.once("finish",u);a.emit("pipe",y);v.flowing||(this.on("readable",l),v.flowing=
!0,E(function(){d(y)}));return a};c.prototype.unpipe=function(d){var a=this._readableState;if(0===a.pipesCount)return this;if(1===a.pipesCount){if(d&&d!==a.pipes)return this;d||(d=a.pipes);a.pipes=null;a.pipesCount=0;this.removeListener("readable",l);a.flowing=!1;d&&d.emit("unpipe",this);return this}if(!d){d=a.pipes;var b=a.pipesCount;a.pipes=null;a.pipesCount=0;this.removeListener("readable",l);a.flowing=!1;for(var c=0;c<b;c++)d[c].emit("unpipe",this);return this}a:{for(var c=a.pipes,b=0,f=c.length;b<
f;b++)if(c[b]===d){c=b;break a}c=-1}if(-1===c)return this;a.pipes.splice(c,1);--a.pipesCount;1===a.pipesCount&&(a.pipes=a.pipes[0]);d.emit("unpipe",this);return this};c.prototype.on=function(d,a){var b=y.prototype.on.call(this,d,a);"data"!==d||this._readableState.flowing||u(this);if("readable"===d&&this.readable){var c=this._readableState;c.readableListening||(c.readableListening=!0,c.emittedReadable=!1,c.needReadable=!0,c.reading?c.length&&f(this,c):this.read(0))}return b};c.prototype.addListener=
c.prototype.on;c.prototype.resume=function(){u(this);this.read(0);this.emit("resume")};c.prototype.pause=function(){u(this,!0);this.emit("pause")};c.prototype.wrap=function(d){var a=this._readableState,b=!1,c=this;d.on("end",function(){if(a.decoder&&!a.ended){var d=a.decoder.end();d&&d.length&&c.push(d)}c.push(null)});d.on("data",function(f){a.decoder&&(f=a.decoder.write(f));f&&(a.objectMode||f.length)&&!c.push(f)&&(b=!0,d.pause())});for(var f in d)"function"===typeof d[f]&&"undefined"===typeof this[f]&&
(this[f]=function(a){return function(){return d[a].apply(d,arguments)}}(f));z(["error","close","destroy","pause","resume"],function(a){d.on(a,function(d){return c.emit.apply(c,a,d)})});c._read=function(a){b&&(b=!1,d.resume())};return c};c._fromList=v}).call(this,x("7YKIPe"))},{"./index.js":15,"7YKIPe":10,buffer:6,events:4,inherits:24,"process/browser.js":16,string_decoder:21}],19:[function(x,C,B){function m(a,b){this.afterTransform=function(a,c){var d;d=b._transformState;d.transforming=!1;var h=d.writecb;
h?(d.writechunk=null,d.writecb=null,null!==c&&void 0!==c&&b.push(c),h&&h(a),d=b._readableState,d.reading=!1,(d.needReadable||d.length<d.highWaterMark)&&b._read(d.highWaterMark),d=void 0):d=b.emit("error",Error("no writecb in Transform class"));return d};this.transforming=this.needTransform=!1;this.writechunk=this.writecb=null}function h(a){if(!(this instanceof h))return new h(a);b.call(this,a);this._transformState=new m(a,this);var f=this;this._readableState.needReadable=!0;this._readableState.sync=
!1;this.once("finish",function(){"function"===typeof this._flush?this._flush(function(a){c(f,a)}):c(f)})}function c(a,b){if(b)return a.emit("error",b);var c=a._transformState;if(a._writableState.length)throw Error("calling transform done when ws.length != 0");if(c.transforming)throw Error("calling transform done when still transforming");return a.push(null)}C.exports=h;var b=x("./duplex.js");x("inherits")(h,b);h.prototype.push=function(a,c){this._transformState.needTransform=!1;return b.prototype.push.call(this,
a,c)};h.prototype._transform=function(a,b,c){throw Error("not implemented");};h.prototype._write=function(a,b,c){var t=this._transformState;t.writecb=c;t.writechunk=a;t.writeencoding=b;t.transforming||(a=this._readableState,(t.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark))};h.prototype._read=function(a){a=this._transformState;a.writechunk&&a.writecb&&!a.transforming?(a.transforming=!0,this._transform(a.writechunk,a.writeencoding,a.afterTransform)):a.needTransform=
!0}},{"./duplex.js":14,inherits:24}],20:[function(x,C,B){function m(d,a,b){this.chunk=d;this.encoding=a;this.callback=b}function h(a,b){a=a||{};var c=a.highWaterMark;this.highWaterMark=c||0===c?c:16384;this.objectMode=!!a.objectMode;this.highWaterMark=~~this.highWaterMark;this.finished=this.ended=this.ending=this.needDrain=!1;this.decodeStrings=!1!==a.decodeStrings;this.defaultEncoding=a.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(a){d(b,
a)};this.writecb=null;this.writelen=0;this.buffer=[]}function c(d){if(!(this instanceof c||this instanceof A.Duplex))return new c(d);this._writableState=new h(d,this);this.writable=!0;A.call(this)}function b(d,a,b){var c=Error("write after end");d.emit("error",c);y(function(){b(c)})}function a(d,a,b,c){var f=!0;if(!D.isBuffer(b)&&"string"!==typeof b&&null!==b&&void 0!==b&&!a.objectMode){var t=new TypeError("Invalid non-string/buffer chunk");d.emit("error",t);y(function(){c(t)});f=!1}return f}function f(d,
a,b,c,f){a.objectMode||!1===a.decodeStrings||"string"!==typeof b||(b=new D(b,c));var t=a.objectMode?1:b.length;a.length+=t;var k=a.length<a.highWaterMark;a.needDrain=!k;a.writing?a.buffer.push(new m(b,c,f)):(a.writelen=t,a.writecb=f,a.writing=!0,a.sync=!0,d._write(b,c,a.onwrite),a.sync=!1);return k}function k(d,a,b,c,f){b?y(function(){f(c)}):f(c);d.emit("error",c)}function t(d){d.writing=!1;d.writecb=null;d.length-=d.writelen;d.writelen=0}function d(d,a){var b=d._writableState,c=b.sync,f=b.writecb;
t(b);if(a)k(d,b,c,a,f);else{var h=b.ending&&0===b.length&&!b.finished&&!b.writing;h||b.bufferProcessing||!b.buffer.length||u(d,b);c?y(function(){l(d,b,h,f)}):l(d,b,h,f)}}function l(d,a,b,c){!b&&0===a.length&&a.needDrain&&(a.needDrain=!1,d.emit("drain"));c();b&&v(d,a)}function u(d,a){a.bufferProcessing=!0;for(var b=0;b<a.buffer.length;b++){var c=a.buffer[b],f=c.chunk,t=d,k=a,h=f,l=c.encoding,c=c.callback;k.writelen=a.objectMode?1:f.length;k.writecb=c;k.writing=!0;k.sync=!0;t._write(h,l,k.onwrite);
k.sync=!1;if(a.writing){b++;break}}a.bufferProcessing=!1;b<a.buffer.length?a.buffer=a.buffer.slice(b):a.buffer.length=0}function v(d,a){var b=a.ending&&0===a.length&&!a.finished&&!a.writing;b&&(a.finished=!0,d.emit("finish"));return b}C.exports=c;c.WritableState=h;var n="undefined"!==typeof Uint8Array?function(d){return d instanceof Uint8Array}:function(d){return d&&d.constructor&&"Uint8Array"===d.constructor.name},z="undefined"!==typeof ArrayBuffer?function(d){return d instanceof ArrayBuffer}:function(d){return d&&
d.constructor&&"ArrayBuffer"===d.constructor.name};C=x("inherits");var A=x("./index.js"),y=x("process/browser.js").nextTick,D=x("buffer").Buffer;C(c,A);c.prototype.pipe=function(){this.emit("error",Error("Cannot pipe. Not readable."))};c.prototype.write=function(d,c,t){var k=this._writableState,h=!1;"function"===typeof c&&(t=c,c=null);!D.isBuffer(d)&&n(d)&&(d=new D(d));z(d)&&"undefined"!==typeof Uint8Array&&(d=new D(new Uint8Array(d)));D.isBuffer(d)?c="buffer":c||(c=k.defaultEncoding);"function"!==
typeof t&&(t=function(){});k.ended?b(this,k,t):a(this,k,d,t)&&(h=f(this,k,d,c,t));return h};c.prototype._write=function(d,a,b){b(Error("not implemented"))};c.prototype.end=function(d,a,b){var c=this._writableState;"function"===typeof d?(b=d,a=d=null):"function"===typeof a&&(b=a,a=null);"undefined"!==typeof d&&null!==d&&this.write(d,a);if(!c.ending&&!c.finished){d=b;c.ending=!0;v(this,c);if(d)if(c.finished)y(d);else this.once("finish",d);c.ended=!0}}},{"./index.js":15,buffer:6,inherits:24,"process/browser.js":16}],
21:[function(x,C,B){function m(a){return a.toString(this.encoding)}function h(a){this.charLength=(a=this.charReceived=a.length%2)?2:0;return a}function c(a){this.charLength=(a=this.charReceived=a.length%3)?3:0;return a}var b=x("buffer").Buffer;x=B.StringDecoder=function(a){this.encoding=(a||"utf8").toLowerCase().replace(/[-_]/,"");if(a&&!b.isEncoding(a))throw Error("Unknown encoding: "+a);switch(this.encoding){case "utf8":this.surrogateSize=3;break;case "ucs2":case "utf16le":this.surrogateSize=2;
this.detectIncompleteChar=h;break;case "base64":this.surrogateSize=3;this.detectIncompleteChar=c;break;default:this.write=m;return}this.charBuffer=new b(6);this.charLength=this.charReceived=0};x.prototype.write=function(a){for(var b="",c=0;this.charLength;){var t=a.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:a.length;a.copy(this.charBuffer,this.charReceived,c,t);this.charReceived+=t-c;c=t;if(this.charReceived<this.charLength)return"";var b=this.charBuffer.slice(0,this.charLength).toString(this.encoding),
d=b.charCodeAt(b.length-1);if(55296<=d&&56319>=d)this.charLength+=this.surrogateSize,b="";else{this.charReceived=this.charLength=0;if(t==a.length)return b;a=a.slice(t,a.length);break}}d=this.detectIncompleteChar(a);c=a.length;this.charLength&&(a.copy(this.charBuffer,0,a.length-d,c),this.charReceived=d,c-=d);b+=a.toString(this.encoding,0,c);c=b.length-1;d=b.charCodeAt(c);return 55296<=d&&56319>=d?(a=this.surrogateSize,this.charLength+=a,this.charReceived+=a,this.charBuffer.copy(this.charBuffer,a,0,
a),this.charBuffer.write(b.charAt(b.length-1),this.encoding),b.substring(0,c)):b};x.prototype.detectIncompleteChar=function(a){for(var b=3<=a.length?3:a.length;0<b;b--){var c=a[a.length-b];if(1==b&&6==c>>5){this.charLength=2;break}if(2>=b&&14==c>>4){this.charLength=3;break}if(3>=b&&30==c>>3){this.charLength=4;break}}return b};x.prototype.end=function(a){var b="";a&&a.length&&(b=this.write(a));this.charReceived&&(a=this.encoding,b+=this.charBuffer.slice(0,this.charReceived).toString(a));return b}},
{buffer:6}],22:[function(x,C,B){var m=x("http");x=C.exports;for(var h in m)m.hasOwnProperty(h)&&(x[h]=m[h]);x.request=function(c,b){c||(c={});c.scheme="https";c.protocol="https:";return m.request.call(this,c,b)}},{http:7}],23:[function(x,C,B){B.read=function(m,h,c,b,a){var f;f=8*a-b-1;var k=(1<<f)-1,t=k>>1,d=-7;a=c?a-1:0;var l=c?-1:1,u=m[h+a];a+=l;c=u&(1<<-d)-1;u>>=-d;for(d+=f;0<d;c=256*c+m[h+a],a+=l,d-=8);f=c&(1<<-d)-1;c>>=-d;for(d+=b;0<d;f=256*f+m[h+a],a+=l,d-=8);if(0===c)c=1-t;else{if(c===k)return f?
NaN:Infinity*(u?-1:1);f+=Math.pow(2,b);c-=t}return(u?-1:1)*f*Math.pow(2,c-b)};B.write=function(m,h,c,b,a,f){var k,t=8*f-a-1,d=(1<<t)-1,l=d>>1,u=23===a?Math.pow(2,-24)-Math.pow(2,-77):0;f=b?0:f-1;var v=b?1:-1,n=0>h||0===h&&0>1/h?1:0;h=Math.abs(h);isNaN(h)||Infinity===h?(h=isNaN(h)?1:0,b=d):(b=Math.floor(Math.log(h)/Math.LN2),1>h*(k=Math.pow(2,-b))&&(b--,k*=2),h=1<=b+l?h+u/k:h+u*Math.pow(2,1-l),2<=h*k&&(b++,k/=2),b+l>=d?(h=0,b=d):1<=b+l?(h=(h*k-1)*Math.pow(2,a),b+=l):(h=h*Math.pow(2,l-1)*Math.pow(2,
a),b=0));for(;8<=a;m[c+f]=h&255,f+=v,h/=256,a-=8);b=b<<a|h;for(t+=a;0<t;m[c+f]=b&255,f+=v,b/=256,t-=8);m[c+f-v]|=128*n}},{}],24:[function(x,C,B){C.exports="function"===typeof Object.create?function(m,h){m.super_=h;m.prototype=Object.create(h.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}})}:function(m,h){m.super_=h;var c=function(){};c.prototype=h.prototype;m.prototype=new c;m.prototype.constructor=m}},{}],25:[function(x,C,B){},{}],26:[function(x,C,B){(function(m,h,c){(function(){var b=
"undefined"!==typeof m&&m.versions&&m.versions.node,a=!b&&("undefined"!==typeof window||"undefined"!==typeof self);a&&"undefined"===typeof h&&("undefined"!==typeof window?h=window:"undefined"!==typeof self?h=self:"undefined"!==typeof $&&(h=$));var f=function(f){function d(){}function k(d,a){if(J(a))for(var b=0;b<a.length;++b)a[b]=k(d,a[b]);else if(ca(a))a["@list"]=k(d,a["@list"]);else if(H(a)){Aa(a)&&(a["@id"]=d.getId(a["@id"]));for(var b=Object.keys(a).sort(),f=0;f<b.length;++f){var c=b[f];"@id"!==
c&&(a[c]=k(d,a[c]))}}return a}function u(d,a,b){if(null===b||void 0===b)return null;var c=F(d,a,{vocab:!0});if("@id"===c)return F(d,b,{base:!0});if("@type"===c)return F(d,b,{vocab:!0,base:!0});var k=f.getContextValue(d,a,"@type");if("@id"===k||"@graph"===c&&Q(b))return{"@id":F(d,b,{base:!0})};if("@vocab"===k)return{"@id":F(d,b,{vocab:!0,base:!0})};if(C(c))return b;c={};null!==k?c["@type"]=k:Q(b)&&(d=f.getContextValue(d,a,"@language"),null!==d&&(c["@language"]=d));-1===["boolean","number","string"].indexOf(typeof b)&&
(b=b.toString());c["@value"]=b;return c}function v(d){var a={};if(fa(d)){a.type="literal";var b=d["@value"],f=d["@type"]||null;"boolean"===typeof b||"[object Boolean]"===Object.prototype.toString.call(b)?(a.value=b.toString(),a.datatype=f||"http://www.w3.org/2001/XMLSchema#boolean"):ya(b)||"http://www.w3.org/2001/XMLSchema#double"===f?(ya(b)||(b=parseFloat(b)),a.value=b.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),a.datatype=f||"http://www.w3.org/2001/XMLSchema#double"):ma(b)?(a.value=b.toFixed(0),
a.datatype=f||"http://www.w3.org/2001/XMLSchema#integer"):"@language"in d?(a.value=b,a.datatype=f||Ba,a.language=d["@language"]):(a.value=b,a.datatype=f||ta)}else d=H(d)?d["@id"]:d,a.type=0===d.indexOf("_:")?"blank node":"IRI",a.value=d;return"IRI"!==a.type||ea(a.value)?a:null}function n(d,a,b,c,k,h){if(J(d))for(var l=0;l<d.length;++l)n(d[l],a,b,c,void 0,h);else if(H(d))if(fa(d)){if("@type"in d){var u=d["@type"];0===u.indexOf("_:")&&(d["@type"]=c.getId(u))}h&&h.push(d)}else{if("@type"in d)for(var y=
d["@type"],l=0;l<y.length;++l)u=y[l],0===u.indexOf("_:")&&c.getId(u);W(k)&&(k=Aa(d)?c.getId(d["@id"]):d["@id"]);h&&h.push({"@id":k});h=a[b];l=h[k]=h[k]||{};l["@id"]=k;u=Object.keys(d).sort();for(y=0;y<u.length;++y){var v=u[y];if("@id"!==v)if("@reverse"===v){var v={"@id":k},z=d["@reverse"],A;for(A in z)for(var D=z[A],E=0;E<D.length;++E){var m=D[E],G=m["@id"];Aa(m)&&(G=c.getId(G));n(m,a,b,c,G);f.addValue(h[G],A,v,{propertyIsArray:!0,allowDuplicate:!1})}}else if("@graph"===v)k in a||(a[k]={}),n(d[v],
a,"@merged"===b?b:k,c);else if("@type"!==v&&C(v)){if("@index"===v&&v in l&&(d[v]!==l[v]||d[v]["@id"]!==l[v]["@id"]))throw new I("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:l});l[v]=d[v]}else if(z=d[v],0===v.indexOf("_:")&&(v=c.getId(v)),0===z.length)f.addValue(l,v,[],{propertyIsArray:!0});else for(D=0;D<z.length;++D)E=z[D],"@type"===v&&(E=0===E.indexOf("_:")?c.getId(E):E),m=E,G=!1,!H(m)||"@value"in m||"@set"in m||"@list"in
m||(G=1<Object.keys(m).length||!("@id"in m)),G||aa(E)?(m=Aa(E)?c.getId(E["@id"]):E["@id"],f.addValue(l,v,{"@id":m},{propertyIsArray:!0,allowDuplicate:!1}),n(E,a,b,c,m)):(ca(E)?(m=[],n(E["@list"],a,b,c,k,m),E={"@list":m}):n(E,a,b,c,k),f.addValue(l,v,E,{propertyIsArray:!0,allowDuplicate:!1}))}}else h&&h.push(d)}function z(d){for(var a=d["@default"],b=Object.keys(d).sort(),c=0;c<b.length;++c){var f=b[c];if("@default"!==f){var k=d[f],h=a[f];h?"@graph"in h||(h["@graph"]=[]):a[f]=h={"@id":f,"@graph":[]};
for(var f=h["@graph"],h=Object.keys(k).sort(),t=0;t<h.length;++t){var l=k[h[t]];aa(l)||f.push(l)}}}return a}function A(d,a,b,f,c){var k=b;if(!J(k)||1!==k.length||!H(k[0]))throw new I("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:k});b=b[0];for(var k=d.options,h={embed:D(b,k,"embed"),explicit:D(b,k,"explicit"),requireAll:D(b,k,"requireAll")},t=b,l={},n=0;n<a.length;++n){var u=a[n],v=d.subjects[u];E(v,t,h)&&(l[u]=v)}a=Object.keys(l).sort();for(t=0;t<
a.length;++t)if(v=a[t],u=l[v],"@link"===h.embed&&v in d.link)M(f,c,d.link[v]);else{null===c&&(d.uniqueEmbeds={});n={};n["@id"]=v;d.link[v]=n;var z;if(!(z="@never"===h.embed))a:{z=d.subjectStack;for(var m=z.length-1;0<=m;--m)if(z[m]["@id"]===u["@id"]){z=!0;break a}z=!1}if(z)M(f,c,n);else{"@last"===h.embed&&(v in d.uniqueEmbeds&&G(d,v),d.uniqueEmbeds[v]={parent:f,property:c});d.subjectStack.push(u);v=Object.keys(u).sort();for(z=0;z<v.length;z++)if(m=v[z],C(m))n[m]=da(u[m]);else if(!h.explicit||m in
b)for(var x=u[m],O=0;O<x.length;++O){var L=x[O];if(ca(L)){var K={"@list":[]};M(n,m,K);var F=L["@list"],N;for(N in F)if(L=F[N],aa(L)){var V=m in b?b[m][0]["@list"]:y(h);A(d,[L["@id"]],V,K,"@list")}else M(K,"@list",da(L))}else aa(L)?(V=m in b?b[m]:y(h),A(d,[L["@id"]],V,n,m)):M(n,m,da(L))}v=Object.keys(b).sort();for(z=0;z<v.length;++z)m=v[z],C(m)||(u=b[m][0],D(u,k,"omitDefault")||m in n||(x="@null","@default"in u&&(x=da(u["@default"])),J(x)||(x=[x]),n[m]=[{"@preserve":x}]));M(f,c,n);d.subjectStack.pop()}}}
function y(d){var a={},b;for(b in d)void 0!==d[b]&&(a["@"+b]=[d[b]]);return[a]}function D(d,a,b){var f="@"+b;d=f in d?d[f][0]:a[b];"embed"===b&&(!0===d?d="@last":!1===d?d="@never":"@always"!==d&&"@never"!==d&&"@link"!==d&&(d="@last"));return d}function E(d,a,b){if("@type"in a&&(1!==a["@type"].length||!H(a["@type"][0]))){a=a["@type"];for(b=0;b<a.length;++b)if(f.hasValue(d,"@type",a[b]))return!0;return!1}var c=!0,k=!1,h;for(h in a){if(C(h)){if("@id"!==h&&"@type"!==h)continue;c=!1;if("@id"===h&&Q(a[h])){if(d[h]!==
a[h])return!1;k=!0;continue}}c=!1;if(h in d){if(J(a[h])&&0===a[h].length&&void 0!==d[h])return!1;k=!0}else{var l=J(a[h])&&H(a[h][0])&&"@default"in a[h][0];if(b.requireAll&&!l)return!1}}return c||k}function G(d,a){var b=d.uniqueEmbeds,c=b[a],k=c.parent,h=c.property,c={"@id":a};if(J(k))for(h=0;h<k.length;++h){if(f.compareValues(k[h],c)){k[h]=c;break}}else{var l=J(k[h]);f.removeValue(k,h,c,{propertyIsArray:l});f.addValue(k,h,c,{propertyIsArray:l})}var n=function(d){for(var a=Object.keys(b),c=0;c<a.length;++c){var f=
a[c];f in b&&H(b[f].parent)&&b[f].parent["@id"]===d&&(delete b[f],n(f))}};n(a)}function M(d,a,b){H(d)?f.addValue(d,a,b,{propertyIsArray:!0}):d.push(b)}function L(d,a,b){if(J(a)){for(var c=[],k=0;k<a.length;++k){var h=L(d,a[k],b);null!==h&&c.push(h)}a=c}else if(H(a)){if("@preserve"in a)return"@null"===a["@preserve"]?null:a["@preserve"];if(fa(a))return a;if(ca(a))return a["@list"]=L(d,a["@list"],b),a;h=K(d,"@id");if(h in a)if(h=a[h],h in b.link)if(k=b.link[h].indexOf(a),-1===k)b.link[h].push(a);else return b.link[h][k];
else b.link[h]=[a];for(c in a)h=L(d,a[c],b),k=f.getContextValue(d,c,"@container"),b.compactArrays&&J(h)&&1===h.length&&null===k&&(h=h[0]),a[c]=h}return a}function O(d,a){return d.length<a.length?-1:a.length<d.length?1:d===a?0:d<a?-1:1}function K(d,a,b,c,k){if(null===a)return a;W(b)&&(b=null);W(k)&&(k=!1);c=c||{};var h=d.getInverse();if(C(a))return a in h?h[a]["@none"]["@type"]["@none"]:a;if(c.vocab&&a in h){var l=d["@language"]||"@none",h=[];H(b)&&"@index"in b&&h.push("@index");var n="@language",
u="@null";if(k)n="@type",u="@reverse",h.push("@set");else if(ca(b)){"@index"in b||h.push("@list");var y=b["@list"],u=0===y.length?l:null,l=null;for(k=0;k<y.length;++k){var v=y[k],z="@none",m="@none";fa(v)?"@language"in v?z=v["@language"]:"@type"in v?m=v["@type"]:z="@null":m="@id";null===u?u=z:z!==u&&fa(v)&&(u="@none");null===l?l=m:m!==l&&(l="@none");if("@none"===u&&"@none"===l)break}u=u||"@none";l=l||"@none";"@none"!==l&&(n="@type",u=l)}else fa(b)?"@language"in b&&!("@index"in b)?(h.push("@language"),
u=b["@language"]):"@type"in b&&(n="@type",u=b["@type"]):(n="@type",u="@id"),h.push("@set");h.push("@none");a:{y=b;k=n;null===u&&(u="@null");n=[];"@id"!==u&&"@reverse"!==u||!aa(y)?n.push(u):("@reverse"===u&&n.push("@reverse"),u=K(d,y["@id"],null,{vocab:!0}),u in d.mappings&&d.mappings[u]&&d.mappings[u]["@id"]===y["@id"]?n.push.apply(n,["@vocab","@id"]):n.push.apply(n,["@id","@vocab"]));n.push("@none");y=d.inverse[a];for(u=0;u<h.length;++u)if(l=h[u],l in y)for(l=y[l][k],v=0;v<n.length;++v)if(z=n[v],
z in l){h=l[z];break a}h=null}if(null!==h)return h}if(c.vocab&&"@vocab"in d&&(h=d["@vocab"],0===a.indexOf(h)&&a!==h&&(h=a.substr(h.length),!(h in d.mappings))))return h;h=null;k=0;n=[];y=d.fastCurieMap;for(u=a.length-1;k<u&&a[k]in y;++k)y=y[a[k]],""in y&&n.push(y[""][0]);for(k=n.length-1;0<=k;--k)for(y=n[k],u=y.terms,l=0;l<u.length;++l)v=u[l]+":"+a.substr(y.iri.length),v in d.mappings&&(null!==b||d.mappings[v]["@id"]!==a)||!(null===h||0>O(v,h))||(h=v);if(null!==h)return h;if(!c.vocab&&(d=d["@base"],
null!==d&&(Q(d)&&(d=f.url.parse(d||"")),b="",""!==d.href?b+=(d.protocol||"")+"//"+(d.authority||""):a.indexOf("//")&&(b+="//"),0===a.indexOf(b)))){a=f.url.parse(a.substr(b.length));d=d.normalizedPath.split("/");b=a.normalizedPath.split("/");for(c=a.fragment||a.query?0:1;0<d.length&&b.length>c&&d[0]===b[0];)d.shift(),b.shift();c="";if(0<d.length)for(d.pop(),h=0;h<d.length;++h)c+="../";c+=b.join("/");null!==a.query&&(c+="?"+a.query);null!==a.fragment&&(c+="#"+a.fragment);""===c&&(c="./");a=c}return a}
function V(d,a,b){if(fa(b)){var c=f.getContextValue(d,a,"@type"),k=f.getContextValue(d,a,"@language"),h=f.getContextValue(d,a,"@container"),h="@index"in b&&"@index"!==h;if(!h&&(b["@type"]===c||b["@language"]===k))return b["@value"];var c=Object.keys(b).length,c=1===c||2===c&&"@index"in b&&!h,k="@language"in d,l=Q(b["@value"]);a=d.mappings[a]&&null===d.mappings[a]["@language"];if(c&&(!k||!l||a))return b["@value"];a={};h&&(a[K(d,"@index")]=b["@index"]);"@type"in b?a[K(d,"@type")]=K(d,b["@type"],null,
{vocab:!0}):"@language"in b&&(a[K(d,"@language")]=b["@language"]);a[K(d,"@value")]=b["@value"];return a}h=F(d,a,{vocab:!0});c=f.getContextValue(d,a,"@type");b=K(d,b["@id"],null,{vocab:"@vocab"===c});if("@id"===c||"@vocab"===c||"@graph"===h)return b;a={};a[K(d,"@id")]=b;return a}function N(d,a,b,c){if(b in c){if(c[b])return;throw new I("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:a,term:b});}c[b]=!1;if(C(b))throw new I("Invalid JSON-LD syntax; keywords cannot be overridden.",
"jsonld.SyntaxError",{code:"keyword redefinition",context:a,term:b});if(""===b)throw new I("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:a});d.mappings[b]&&delete d.mappings[b];var f=a[b];if(null===f||H(f)&&null===f["@id"])d.mappings[b]=null,c[b]=!0;else{Q(f)&&(f={"@id":f});if(!H(f))throw new I("Invalid JSON-LD syntax; @context property values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",
context:a});var k=d.mappings[b]={};k.reverse=!1;if("@reverse"in f){if("@id"in f)throw new I("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:a});var h=f["@reverse"];if(!Q(h))throw new I("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:a});h=F(d,h,{vocab:!0,base:!1},a,c);if(!ea(h))throw new I("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.",
"jsonld.SyntaxError",{code:"invalid IRI mapping",context:a});k["@id"]=h;k.reverse=!0}else if("@id"in f){h=f["@id"];if(!Q(h))throw new I("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:a});if(h!==b){h=F(d,h,{vocab:!0,base:!1},a,c);if(!ea(h)&&!C(h))throw new I("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",
context:a});k["@id"]=h}}var t=b.indexOf(":");k._termHasColon=-1!==t;if(!("@id"in k))if(k._termHasColon)h=b.substr(0,t),h in a&&N(d,a,h,c),d.mappings[h]?(t=b.substr(t+1),k["@id"]=d.mappings[h]["@id"]+t):k["@id"]=b;else{if(!("@vocab"in d))throw new I("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:a,term:b});k["@id"]=d["@vocab"]+b}c[b]=!0;if("@type"in f){b=f["@type"];if(!Q(b))throw new I("Invalid JSON-LD syntax; an @context @type values must be a string.",
"jsonld.SyntaxError",{code:"invalid type mapping",context:a});if("@id"!==b&&"@vocab"!==b){b=F(d,b,{vocab:!0,base:!1},a,c);if(!ea(b))throw new I("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:a});if(0===b.indexOf("_:"))throw new I("Invalid JSON-LD syntax; an @context @type values must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:a});}k["@type"]=b}if("@container"in
f){d=f["@container"];if("@list"!==d&&"@set"!==d&&"@index"!==d&&"@language"!==d)throw new I("Invalid JSON-LD syntax; @context @container value must be one of the following: @list, @set, @index, or @language.","jsonld.SyntaxError",{code:"invalid container mapping",context:a});if(k.reverse&&"@index"!==d&&"@set"!==d&&null!==d)throw new I("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:a});
k["@container"]=d}if("@language"in f&&!("@type"in f)){f=f["@language"];if(null!==f&&!Q(f))throw new I("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:a});null!==f&&(f=f.toLowerCase());k["@language"]=f}h=k["@id"];if("@context"===h||"@preserve"===h)throw new I("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:a});}}function F(d,a,b,c,
k){if(null===a||C(a))return a;a=String(a);c&&a in c&&!0!==k[a]&&N(d,c,a,k);b=b||{};if(b.vocab){var h=d.mappings[a];if(null===h)return null;if(h)return h["@id"]}h=a.indexOf(":");if(-1!==h){b=a.substr(0,h);var l=a.substr(h+1);if("_"===b||0===l.indexOf("//"))return a;c&&b in c&&N(d,c,b,k);return(h=d.mappings[b])?h["@id"]+l:a}if(b.vocab&&"@vocab"in d)return d["@vocab"]+a;b.base&&(a=f.prependBase(d["@base"],a));return a}function B(d){function a(d,b,c){var f=d[b];d=d[b]={};for(var k,h=0;h<f.length;++h)k=
f[h].iri,k=c>=k.length?"":k[c],k in d?d[k].push(f[h]):d[k]=[f[h]];for(b in d)""!==b&&a(d,b,c+1)}return{"@base":f.url.parse(d.base||""),mappings:{},inverse:null,getInverse:function(){if(this.inverse)return this.inverse;for(var d=this.inverse={},b=this.fastCurieMap={},c={},f=this["@language"]||"@none",k=this.mappings,h=Object.keys(k).sort(O),t=0;t<h.length;++t){var l=h[t],n=k[l];if(null!==n){var u=n["@container"]||"@none",y=n["@id"];J(y)||(y=[y]);for(var v=0;v<y.length;++v){var z=y[v],m=d[z],za=C(z);
m?za||n._termHasColon||c[z].push(l):(d[z]=m={},za||n._termHasColon||(c[z]=[l],za={iri:z,terms:c[z]},z[0]in b?b[z[0]].push(za):b[z[0]]=[za]));m[u]||(m[u]={"@language":{},"@type":{}});m=m[u];n.reverse?(m=m["@type"],"@reverse"in m||(m["@reverse"]=l)):"@type"in n?(m=m["@type"],z=n["@type"],z in m||(m[z]=l)):"@language"in n?(m=m["@language"],z=n["@language"]||"@null",z in m||(m[z]=l)):(z=m["@language"],f in z||(z[f]=l),z=m["@type"],"@none"in z||(z["@none"]=l),m=m["@language"],"@none"in m||(m["@none"]=
l))}}}for(var D in b)a(b,D,1);return d},clone:function(){var d={};d["@base"]=this["@base"];d.mappings=da(this.mappings);d.clone=this.clone;d.inverse=null;d.getInverse=this.getInverse;"@language"in this&&(d["@language"]=this["@language"]);"@vocab"in this&&(d["@vocab"]=this["@vocab"]);return d}}}function C(d){if(!Q(d))return!1;switch(d){case "@base":case "@context":case "@container":case "@default":case "@embed":case "@explicit":case "@graph":case "@id":case "@index":case "@language":case "@list":case "@omitDefault":case "@preserve":case "@requireAll":case "@reverse":case "@set":case "@type":case "@value":case "@vocab":return!0}return!1}
function H(d){return"[object Object]"===Object.prototype.toString.call(d)}function J(d){return Array.isArray(d)}function Q(d){return"string"===typeof d||"[object String]"===Object.prototype.toString.call(d)}function ma(d){return"number"===typeof d||"[object Number]"===Object.prototype.toString.call(d)}function ya(d){return ma(d)&&-1!==String(d).indexOf(".")}function W(d){return"undefined"===typeof d}function aa(d){return H(d)&&1===Object.keys(d).length&&"@id"in d}function fa(d){return H(d)&&"@value"in
d}function ca(d){return H(d)&&"@list"in d}function Aa(d){var a=!1;H(d)&&(a="@id"in d?0===d["@id"].indexOf("_:"):0===Object.keys(d).length||!("@value"in d||"@set"in d||"@list"in d));return a}function ea(d){return Q(d)&&-1!==d.indexOf(":")}function da(d){if(d&&"object"===typeof d){var a;if(J(d)){a=[];for(var b=0;b<d.length;++b)a[b]=da(d[b])}else if(H(d))for(b in a={},d)a[b]=da(d[b]);else a=d.toString();return a}return d}function Oa(d,a,b,c){var k=Object.keys(a).length;if(J(d)){for(var h=0;h<d.length;++h)Oa(d[h],
a,b,c);return k<Object.keys(a).length}if(H(d)){for(var l in d)if("@context"!==l)Oa(d[l],a,b,c);else{var n=d[l];if(J(n))for(var u=n.length,h=0;h<u;++h){var y=n[h];Q(y)&&(y=f.prependBase(c,y),b?(y=a[y],J(y)?(Array.prototype.splice.apply(n,[h,1].concat(y)),h+=y.length-1,u=n.length):n[h]=y):y in a||(a[y]=!1))}else Q(n)&&(n=f.prependBase(c,n),b?d[l]=a[n]:n in a||(a[n]=!1))}return k<Object.keys(a).length}return!1}function Pa(d,a,b){var c=null,f=function(d,a,b,k,h){if(Object.keys(a).length>jb)return c=new I("Maximum number of @context URLs exceeded.",
"jsonld.ContextUrlError",{code:"loading remote context failed",max:jb}),h(c);var t={};Oa(d,t,!1,k)||(Oa(d,t,!0,k),h(null,d));var l=[],n;for(n in t)!1===t[n]&&l.push(n);var u=l.length;for(n=0;n<l.length;++n)(function(l){if(l in a)return c=new I("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"recursive context inclusion",url:l}),h(c);var n=da(a);n[l]=!0;var y=function(a,y){if(!c){var v=y?y.document:null;if(!a&&Q(v))try{v=JSON.parse(v)}catch(z){a=z}a?a=new I("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.",
"jsonld.InvalidUrl",{code:"loading remote context failed",url:l,cause:a}):H(v)||(a=new I("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:l,cause:a}));if(a)return c=a,h(c);v="@context"in v?{"@context":v["@context"]}:{"@context":{}};y.contextUrl&&(J(v["@context"])||(v["@context"]=[v["@context"]]),v["@context"].push(y.contextUrl));f(v,n,b,l,function(a,b){if(a)return h(a);t[l]=b["@context"];
--u;0===u&&(Oa(d,t,!0,k),h(null,d))})}},v=b(l,y);v&&"then"in v&&v.then(y.bind(null,null),y)})(l[n])};f(d,{},a.documentLoader,a.base,b)}function eb(d){var a=/^[ \t]*(?:#.*)?$/,b=/^[ \t]*(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z0-9]+)))[ \t]+(?:<([^:]+:[^>]*)>)[ \t]+(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z0-9]+))|(?:"([^"\\]*(?:\\.[^"\\]*)*)"(?:(?:\^\^(?:<([^:]+:[^>]*)>))|(?:@([a-z]+(?:-[a-z0-9]+)*)))?))[ \t]*(?:\.|(?:(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-z0-9]+)))[ \t]*\.))[ \t]*(?:#.*)?$/,c={};d=d.split(/(?:\r\n)|(?:\n)|(?:\r)/g);
for(var f=0,k=0;k<d.length;++k){var h=d[k];f++;if(!a.test(h)){var t=h.match(b);if(null===t)throw new I("Error while parsing N-Quads; invalid quad.","jsonld.ParseError",{line:f});h={};W(t[1])?h.subject={type:"blank node",value:t[2]}:h.subject={type:"IRI",value:t[1]};h.predicate={type:"IRI",value:t[3]};if(W(t[4]))if(W(t[5])){h.object={type:"literal"};W(t[7])?W(t[8])?h.object.datatype=ta:(h.object.datatype=Ba,h.object.language=t[8]):h.object.datatype=t[7];var l=t[6].replace(/\\"/g,'"').replace(/\\t/g,
"\t").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\\\/g,"\\");h.object.value=l}else h.object={type:"blank node",value:t[5]};else h.object={type:"IRI",value:t[4]};l="@default";W(t[9])?W(t[10])||(l=t[10]):l=t[9];if(l in c){for(var t=!0,l=c[l],n=0;t&&n<l.length;++n){var u;a:{u=l[n];for(var y=["subject","predicate","object"],v=0;v<y.length;++v){var z=y[v];if(u[z].type!==h[z].type||u[z].value!==h[z].value){u=!1;break a}}u=u.object.language!==h.object.language||u.object.datatype!==h.object.datatype?
!1:!0}u&&(t=!1)}t&&l.push(h)}else c[l]=[h]}}return c}function fb(d,a){var b=d.subject,c=d.predicate,f=d.object,h=a||null;"name"in d&&d.name&&(h=d.name.value);var k="",k="IRI"===b.type?k+("<"+b.value+">"):k+b.value,k=k+" ",k="IRI"===c.type?k+("<"+c.value+">"):k+c.value,k=k+" ";"IRI"===f.type?k+="<"+f.value+">":"blank node"===f.type?k+=f.value:(b=f.value.replace(/\\/g,"\\\\").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\"/g,'\\"'),k+='"'+b+'"',f.datatype===Ba?f.language&&
(k+="@"+f.language):f.datatype!==ta&&(k+="^^<"+f.datatype+">"));null!==h&&void 0!==h&&(k=0!==h.indexOf("_:")?k+(" <"+h+">"):k+(" "+h));return k+" .\n"}function ba(d){this.prefix=d;this.counter=0;this.existing={}}function Ab(d,a){var b="";0===d.indexOf("/")&&(b="/");for(var c=d.split("/"),f=[];0<c.length;)"."===c[0]||""===c[0]&&1<c.length?c.shift():".."===c[0]?(c.shift(),a||0<f.length&&".."!==f[f.length-1]?f.pop():f.push("..")):f.push(c.shift());return b+f.join("/")}f.compact=function(d,a,b,c){if(2>
arguments.length)return f.nextTick(function(){c(new TypeError("Could not compact, too few arguments."))});"function"===typeof b&&(c=b,b={});b=b||{};if(null===a)return f.nextTick(function(){c(new I("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"}))});if(null===d)return f.nextTick(function(){c(null,null)});"base"in b||(b.base="string"===typeof d?d:"");"compactArrays"in b||(b.compactArrays=!0);"graph"in b||(b.graph=!1);"skipExpansion"in b||(b.skipExpansion=
!1);"documentLoader"in b||(b.documentLoader=f.loadDocument);"link"in b||(b.link=!1);b.link&&(b.skipExpansion=!0);(function(d,a,b){if(a.skipExpansion)return f.nextTick(function(){b(null,d)});f.expand(d,a,b)})(d,b,function(d,k){if(d)return c(new I("Could not expand input before compaction.","jsonld.CompactError",{cause:d}));var h=B(b);f.processContext(h,a,b,function(d,f){if(d)return c(new I("Could not process context before compaction.","jsonld.CompactError",{cause:d}));var h;try{h=(new X).compact(f,
null,k,b)}catch(t){return c(t)}var l=b;l.compactArrays&&!l.graph&&J(h)?1===h.length?h=h[0]:0===h.length&&(h={}):l.graph&&H(h)&&(h=[h]);H(a)&&"@context"in a&&(a=a["@context"]);a=da(a);J(a)||(a=[a]);l=a;a=[];for(var n=0;n<l.length;++n)(!H(l[n])||0<Object.keys(l[n]).length)&&a.push(l[n]);l=0<a.length;1===a.length&&(a=a[0]);if(J(h)){var u=K(f,"@graph"),n=h;h={};l&&(h["@context"]=a);h[u]=n}else if(H(h)&&l)for(u in n=h,h={"@context":a},n)h[u]=n[u];c(null,h,f)})})};f.expand=function(d,a,b){function c(d){"base"in
a||(a.base=d.documentUrl||"");d={document:da(d.document),remoteContext:{"@context":d.contextUrl}};if("expandContext"in a){var f=da(a.expandContext);d.expandContext="object"===typeof f&&"@context"in f?f:{"@context":f}}Pa(d,a,function(d,c){if(d)return b(d);var f;try{var h=new X,k=B(a),t=c.document,l=c.remoteContext["@context"];c.expandContext&&(k=h.processContext(k,c.expandContext["@context"],a));l&&(k=h.processContext(k,l,a));f=h.expand(k,null,t,a,!1);H(f)&&"@graph"in f&&1===Object.keys(f).length?
f=f["@graph"]:null===f&&(f=[]);J(f)||(f=[f])}catch(n){return b(n)}b(null,f)})}if(1>arguments.length)return f.nextTick(function(){b(new TypeError("Could not expand, too few arguments."))});"function"===typeof a&&(b=a,a={});a=a||{};"documentLoader"in a||(a.documentLoader=f.loadDocument);"keepFreeFloatingNodes"in a||(a.keepFreeFloatingNodes=!1);f.nextTick(function(){if("string"===typeof d){var f=function(d,a){if(d)return b(d);try{if(!a.document)throw new I("No remote document found at the given URL.",
"jsonld.NullRemoteDocument");"string"===typeof a.document&&(a.document=JSON.parse(a.document))}catch(f){return b(new I("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",cause:f,remoteDoc:a}))}c(a)},h=a.documentLoader(d,f);h&&"then"in h&&h.then(f.bind(null,null),f)}else c({contextUrl:null,documentUrl:null,document:d})})};f.flatten=function(d,a,b,c){if(1>arguments.length)return f.nextTick(function(){c(new TypeError("Could not flatten, too few arguments."))});
"function"===typeof b?(c=b,b={}):"function"===typeof a&&(c=a,a=null,b={});b=b||{};"base"in b||(b.base="string"===typeof d?d:"");"documentLoader"in b||(b.documentLoader=f.loadDocument);f.expand(d,b,function(d,h){if(d)return c(new I("Could not expand input before flattening.","jsonld.FlattenError",{cause:d}));var k;try{k=(new X).flatten(h)}catch(l){return c(l)}if(null===a)return c(null,k);b.graph=!0;b.skipExpansion=!0;f.compact(k,a,b,function(d,a){if(d)return c(new I("Could not compact flattened output.",
"jsonld.FlattenError",{cause:d}));c(null,a)})})};f.frame=function(d,a,b,c){function h(a){var k=a.document,l;k?(l=k["@context"],a.contextUrl?(l?J(l)?l.push(a.contextUrl):l=[l,a.contextUrl]:l=a.contextUrl,k["@context"]=l):l=l||{}):l={};f.expand(d,b,function(d,a){if(d)return c(new I("Could not expand input before framing.","jsonld.FrameError",{cause:d}));var h=da(b);h.isFrame=!0;h.keepFreeFloatingNodes=!0;f.expand(k,h,function(d,b){if(d)return c(new I("Could not expand frame before framing.","jsonld.FrameError",
{cause:d}));var k;try{k=(new X).frame(a,b,h)}catch(n){return c(n)}h.graph=!0;h.skipExpansion=!0;h.link={};f.compact(k,l,h,function(d,a,b){if(d)return c(new I("Could not compact framed output.","jsonld.FrameError",{cause:d}));d=K(b,"@graph");h.link={};a[d]=L(b,a[d],h);c(null,a)})})})}if(2>arguments.length)return f.nextTick(function(){c(new TypeError("Could not frame, too few arguments."))});"function"===typeof b&&(c=b,b={});b=b||{};"base"in b||(b.base="string"===typeof d?d:"");"documentLoader"in b||
(b.documentLoader=f.loadDocument);"embed"in b||(b.embed="@last");b.explicit=b.explicit||!1;"requireAll"in b||(b.requireAll=!0);b.omitDefault=b.omitDefault||!1;f.nextTick(function(){if("string"===typeof a){var d=function(d,a){if(d)return c(d);try{if(!a.document)throw new I("No remote document found at the given URL.","jsonld.NullRemoteDocument");"string"===typeof a.document&&(a.document=JSON.parse(a.document))}catch(b){return c(new I("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.",
"jsonld.LoadDocumentError",{code:"loading document failed",cause:b,remoteDoc:a}))}h(a)},f=b.documentLoader(a,d);f&&"then"in f&&f.then(d.bind(null,null),d)}else h({contextUrl:null,documentUrl:null,document:a})})};f.link=function(d,a,b,c){var h={};a&&(h["@context"]=a);h["@embed"]="@link";f.frame(d,h,b,c)};f.objectify=function(d,a,b,c){"function"===typeof b&&(c=b,b={});b=b||{};"base"in b||(b.base="string"===typeof d?d:"");"documentLoader"in b||(b.documentLoader=f.loadDocument);f.expand(d,b,function(d,
h){if(d)return c(new I("Could not expand input before linking.","jsonld.LinkError",{cause:d}));var k;try{k=(new X).flatten(h)}catch(l){return c(l)}b.graph=!0;b.skipExpansion=!0;f.compact(k,a,b,function(d,a,b){if(d)return c(new I("Could not compact flattened output before linking.","jsonld.LinkError",{cause:d}));d=K(b,"@graph");var h=a[d][0],k=function(d){if(H(d)||J(d)){if(H(d)){if(k.visited[d["@id"]])return;k.visited[d["@id"]]=!0}for(var a in d){var c=d[a],l="@id"===f.getContextValue(b,a,"@type");
if(J(c)||H(c)||l)if(Q(c)&&l)d[a]=c=h[c],k(c);else if(J(c))for(var n=0;n<c.length;++n)Q(c[n])&&l?c[n]=h[c[n]]:H(c[n])&&"@id"in c[n]&&(c[n]=h[c[n]["@id"]]),k(c[n]);else H(c)&&(d[a]=c=h[c["@id"]],k(c))}}};k.visited={};k(h);a.of_type={};for(var l in h)if("@type"in h[l]){d=h[l]["@type"];J(d)||(d=[d]);for(var n=0;n<d.length;++n)d[n]in a.of_type||(a.of_type[d[n]]=[]),a.of_type[d[n]].push(h[l])}c(null,a)})})};f.normalize=function(d,a,b){if(1>arguments.length)return f.nextTick(function(){b(new TypeError("Could not normalize, too few arguments."))});
"function"===typeof a&&(b=a,a={});a=a||{};"algorithm"in a||(a.algorithm="URGNA2012");"base"in a||(a.base="string"===typeof d?d:"");"documentLoader"in a||(a.documentLoader=f.loadDocument);if("inputFormat"in a){if("application/nquads"!==a.inputFormat)return b(new I("Unknown normalization input format.","jsonld.NormalizeError"));var c=eb(d);(new X).normalize(c,a,b)}else c=da(a),delete c.format,c.produceGeneralizedRdf=!1,f.toRDF(d,c,function(d,c){if(d)return b(new I("Could not convert input to RDF dataset before normalization.",
"jsonld.NormalizeError",{cause:d}));(new X).normalize(c,a,b)})};f.fromRDF=function(d,a,b){if(1>arguments.length)return f.nextTick(function(){b(new TypeError("Could not convert from RDF, too few arguments."))});"function"===typeof a&&(b=a,a={});a=a||{};"useRdfType"in a||(a.useRdfType=!1);"useNativeTypes"in a||(a.useNativeTypes=!1);"format"in a||!Q(d)||"format"in a||(a.format="application/nquads");f.nextTick(function(){function c(d,a,b){(new X).fromRDF(d,a,b)}var f;if(a.format){if(f=a.rdfParser||bb[a.format],
!f)return b(new I("Unknown input format.","jsonld.UnknownFormat",{format:a.format}))}else f=function(){return d};var h=!1;try{d=f(d,function(d,f){h=!0;if(d)return b(d);c(f,a,b)})}catch(k){if(!h)return b(k);throw k;}if(d){if("then"in d)return d.then(function(d){c(d,a,b)},b);c(d,a,b)}})};f.toRDF=function(d,a,b){if(1>arguments.length)return f.nextTick(function(){b(new TypeError("Could not convert to RDF, too few arguments."))});"function"===typeof a&&(b=a,a={});a=a||{};"base"in a||(a.base="string"===
typeof d?d:"");"documentLoader"in a||(a.documentLoader=f.loadDocument);f.expand(d,a,function(d,c){if(d)return b(new I("Could not expand input before serialization to RDF.","jsonld.RdfError",{cause:d}));var f;try{if(f=X.prototype.toRDF(c,a),a.format){if("application/nquads"===a.format){var h=b,k,t=[],l;for(l in f)for(var n=f[l],u=0;u<n.length;++u){var y=n[u];"@default"===l&&(l=null);t.push(fb(y,l))}k=t.sort().join("");return h(null,k)}throw new I("Unknown output format.","jsonld.UnknownFormat",{format:a.format});
}}catch(v){return b(v)}b(null,f)})};f.createNodeMap=function(d,a,b){if(1>arguments.length)return f.nextTick(function(){b(new TypeError("Could not create node map, too few arguments."))});"function"===typeof a&&(b=a,a={});a=a||{};"base"in a||(a.base="string"===typeof d?d:"");"documentLoader"in a||(a.documentLoader=f.loadDocument);f.expand(d,a,function(d,c){if(d)return b(new I("Could not expand input before creating node map.","jsonld.CreateNodeMapError",{cause:d}));var f;try{f=(new X).createNodeMap(c,
a)}catch(h){return b(h)}b(null,f)})};f.merge=function(d,a,b,c){function h(d,a){if(!u){if(d)return u=d,c(new I("Could not expand input before flattening.","jsonld.FlattenError",{cause:d}));l.push(a);0===--y&&k(l)}}function k(d){var h=!0;"mergeNodes"in b&&(h=b.mergeNodes);var l=b.namer||b.issuer||new ba("_:b"),u={"@default":{}},y;try{for(var v=0;v<d.length;++v){var m=d[v],m=f.relabelBlankNodes(m,{issuer:new ba("_:b"+v+"-")}),D=h||0===v?u:{"@default":{}};n(m,D,"@default",l);if(D!==u)for(var A in D){var E=
D[A];if(A in u){var P=u[A],G;for(G in E)G in P||(P[G]=E[G])}else u[A]=E}}y=z(u)}catch(za){return c(za)}d=[];h=Object.keys(y).sort();for(l=0;l<h.length;++l)u=y[h[l]],aa(u)||d.push(u);if(null===a)return c(null,d);b.graph=!0;b.skipExpansion=!0;f.compact(d,a,b,function(d,a){if(d)return c(new I("Could not compact merged output.","jsonld.MergeError",{cause:d}));c(null,a)})}if(1>arguments.length)return f.nextTick(function(){c(new TypeError("Could not merge, too few arguments."))});if(!J(d))return f.nextTick(function(){c(new TypeError('Could not merge, "docs" must be an array.'))});
"function"===typeof b?(c=b,b={}):"function"===typeof a&&(c=a,a=null,b={});b=b||{};for(var l=[],u=null,y=d.length,v=0;v<d.length;++v){var m={},D;for(D in b)m[D]=b[D];f.expand(d[v],m,h)}};f.relabelBlankNodes=function(d,a){a=a||{};var b=a.namer||a.issuer||new ba("_:b");return k(b,d)};f.prependBase=function(d,a){var b;var c=d;if(null===c)b=a;else if(-1!==a.indexOf(":"))b=a;else{Q(c)&&(c=f.url.parse(c||""));b=f.url.parse(a);var h=c.protocol||"",k,l;null!==b.authority?(k=b.authority,l=b.path,c=b.query):
(k=c.authority,""===b.path?(l=c.path,c=null!==b.query?b.query:c.query):(0===b.path.indexOf("/")?l=b.path:(l=c.path,""!==b.path&&(l=l.substr(0,l.lastIndexOf("/")+1),0<l.length&&"/"!==l.substr(-1)&&(l+="/"),l+=b.path)),c=b.query));l=Ab(l,!!k);null!==k&&(h+="//"+k);h+=l;null!==c&&(h+="?"+c);null!==b.fragment&&(h+="#"+b.fragment);""===h&&(h="./");b=h}return b};f.documentLoader=function(d,a){var c=new I("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",
{code:"loading document failed"});return b?a(c,{contextUrl:null,documentUrl:d,document:null}):f.promisify(function(d){d(c)})};f.loadDocument=function(d,a){var b=f.documentLoader(d,a);b&&"then"in b&&b.then(a.bind(null,null),a)};f.promises=function(d){d=d||{};var a=Array.prototype.slice,b=f.promisify,c=d.api||{},k=d.version||"jsonld.js";"string"===typeof d.api&&(d.version||(k=d.api),c={});c.expand=function(d){if(1>arguments.length)throw new TypeError("Could not expand, too few arguments.");return b.apply(null,
[f.expand].concat(a.call(arguments)))};c.compact=function(d,c){if(2>arguments.length)throw new TypeError("Could not compact, too few arguments.");return b.apply(null,[function(d,a,b,c){f.compact(d,a,b,function(d,a){c(d,a)})}].concat(a.call(arguments)))};c.flatten=function(d){if(1>arguments.length)throw new TypeError("Could not flatten, too few arguments.");return b.apply(null,[f.flatten].concat(a.call(arguments)))};c.frame=function(d,c){if(2>arguments.length)throw new TypeError("Could not frame, too few arguments.");
return b.apply(null,[f.frame].concat(a.call(arguments)))};c.fromRDF=function(d){if(1>arguments.length)throw new TypeError("Could not convert from RDF, too few arguments.");return b.apply(null,[f.fromRDF].concat(a.call(arguments)))};c.toRDF=function(d){if(1>arguments.length)throw new TypeError("Could not convert to RDF, too few arguments.");return b.apply(null,[f.toRDF].concat(a.call(arguments)))};c.normalize=function(d){if(1>arguments.length)throw new TypeError("Could not normalize, too few arguments.");
return b.apply(null,[f.normalize].concat(a.call(arguments)))};"jsonld.js"===k&&(c.link=function(d,c){if(2>arguments.length)throw new TypeError("Could not link, too few arguments.");return b.apply(null,[f.link].concat(a.call(arguments)))},c.objectify=function(d){return b.apply(null,[f.objectify].concat(a.call(arguments)))},c.createNodeMap=function(d){return b.apply(null,[f.createNodeMap].concat(a.call(arguments)))},c.merge=function(d){return b.apply(null,[f.merge].concat(a.call(arguments)))});try{f.Promise=
h.Promise||x("es6-promise").Promise}catch(l){d=function(){throw Error("Unable to find a Promise implementation.");};for(var n in c)c[n]=d}return c};f.promisify=function(d){if(!f.Promise)try{f.Promise=h.Promise||x("es6-promise").Promise}catch(a){throw Error("Unable to find a Promise implementation.");}var b=Array.prototype.slice.call(arguments,1);return new f.Promise(function(a,c){d.apply(null,b.concat(function(d,b){d?c(d):a(b)}))})};f.promises({api:f.promises});d.prototype=f.promises({version:"json-ld-1.0"});
d.prototype.toString=function(){return this instanceof d?"[object JsonLdProcessor]":"[object JsonLdProcessorPrototype]"};f.JsonLdProcessor=d;var ia=!!Object.defineProperty;if(ia)try{Object.defineProperty({},"x",{})}catch(za){ia=!1}ia&&(Object.defineProperty(d,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(d.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:d}));a&&"undefined"===typeof h.JsonLdProcessor&&(ia?Object.defineProperty(h,"JsonLdProcessor",{writable:!0,
enumerable:!1,configurable:!0,value:d}):h.JsonLdProcessor=d);var ab="function"===typeof setImmediate&&setImmediate,ia=ab?function(d){ab(d)}:function(d){setTimeout(d,0)};f.nextTick="object"===typeof m&&"function"===typeof m.nextTick?m.nextTick:ia;f.setImmediate=ab?ia:f.nextTick;f.parseLinkHeader=function(d){var a={};d=d.match(/(?:<[^>]*?>|"[^"]*?"|[^,])+/g);for(var b=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,c=0;c<d.length;++c){var f=d[c].match(b);if(f){for(var h={target:f[1]},k=f[2],l=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g;f=
l.exec(k);)h[f[1]]=void 0===f[2]?f[3]:f[2];f=h.rel||"";J(a[f])?a[f].push(h):a[f]=f in a?[a[f],h]:h}}return a};f.RequestQueue=function(){this._requests={}};f.RequestQueue.prototype.wrapLoader=function(d){this._loader=d;this._usePromise=1===d.length;return this.add.bind(this)};f.RequestQueue.prototype.add=function(d,a){var b=this;if(!a&&!b._usePromise)throw Error("callback must be specified.");if(b._usePromise)return new f.Promise(function(a,c){var f=b._requests[d];f||(f=b._requests[d]=b._loader(d).then(function(a){delete b._requests[d];
return a}).catch(function(a){delete b._requests[d];throw a;}));f.then(function(d){a(d)}).catch(function(d){c(d)})});d in b._requests?b._requests[d].push(a):(b._requests[d]=[a],b._loader(d,function(a,c){var f=b._requests[d];delete b._requests[d];for(var h=0;h<f.length;++h)f[h](a,c)}))};f.DocumentCache=function(d){this.order=[];this.cache={};this.size=d||50;this.expires=3E4};f.DocumentCache.prototype.get=function(d){if(d in this.cache){var a=this.cache[d];if(a.expires>=+new Date)return a.ctx;delete this.cache[d];
this.order.splice(this.order.indexOf(d),1)}return null};f.DocumentCache.prototype.set=function(d,a){this.order.length===this.size&&delete this.cache[this.order.shift()];this.order.push(d);this.cache[d]={ctx:a,expires:+new Date+this.expires}};f.ActiveContextCache=function(d){this.order=[];this.cache={};this.size=d||100};f.ActiveContextCache.prototype.get=function(d,a){var b=JSON.stringify(d),c=JSON.stringify(a);return(b=this.cache[b])&&c in b?b[c]:null};f.ActiveContextCache.prototype.set=function(d,
a,b){if(this.order.length===this.size){var c=this.order.shift();delete this.cache[c.activeCtx][c.localCtx]}d=JSON.stringify(d);a=JSON.stringify(a);this.order.push({activeCtx:d,localCtx:a});d in this.cache||(this.cache[d]={});this.cache[d][a]=da(b)};f.cache={activeCtx:new f.ActiveContextCache};f.documentLoaders={};f.documentLoaders.jquery=function(d,a){function b(c,h){if(0!==c.indexOf("http:")&&0!==c.indexOf("https:"))return h(new I('URL could not be dereferenced; only "http" and "https" URLs are supported.',
"jsonld.InvalidUrl",{code:"loading document failed",url:c}),{contextUrl:null,documentUrl:c,document:null});if(a.secure&&0!==c.indexOf("https"))return h(new I('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:c}),{contextUrl:null,documentUrl:c,document:null});d.ajax({url:c,accepts:{json:"application/ld+json, application/json"},headers:{Accept:"application/ld+json, application/json"},dataType:"json",
crossDomain:!0,success:function(d,a,b){d={contextUrl:null,documentUrl:c,document:d};a=b.getResponseHeader("Content-Type");if((b=b.getResponseHeader("Link"))&&"application/ld+json"!==a){b=f.parseLinkHeader(b)[lb];if(J(b))return h(new I("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:c}),d);b&&(d.contextUrl=b.target)}h(null,d)},error:function(d,a,b){h(new I("URL could not be dereferenced, an error occurred.",
"jsonld.LoadDocumentError",{code:"loading document failed",url:c,cause:b}),{contextUrl:null,documentUrl:c,document:null})}})}a=a||{};var c=new f.RequestQueue;return("usePromise"in a?a.usePromise:"undefined"!==typeof Promise)?c.wrapLoader(function(d){return f.promisify(b,d)}):c.wrapLoader(b)};f.documentLoaders.node=function(d){function a(l,n,u){if(0!==l.indexOf("http:")&&0!==l.indexOf("https:"))return u(new I('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",
{code:"loading document failed",url:l}),{contextUrl:null,documentUrl:l,document:null});if(d.secure&&0!==l.indexOf("https"))return u(new I('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:l}),{contextUrl:null,documentUrl:l,document:null});var y=null;if(null!==y)return u(null,y);var v={Accept:"application/ld+json, application/json"},z;for(z in d.headers)v[z]=d.headers[z];h({url:l,headers:v,strictSSL:b,
followRedirect:!1},function(d,b,h){y={contextUrl:null,documentUrl:l,document:h||null};if(d)return u(new I("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:l,cause:d}),y);h=k.STATUS_CODES[b.statusCode];if(400<=b.statusCode)return u(new I("URL could not be dereferenced: "+h,"jsonld.InvalidUrl",{code:"loading document failed",url:l,httpStatusCode:b.statusCode}),y);if(b.headers.link&&"application/ld+json"!==b.headers["content-type"]){h=
f.parseLinkHeader(b.headers.link)[lb];if(J(h))return u(new I("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:l}),y);h&&(y.contextUrl=h.target)}if(300<=b.statusCode&&400>b.statusCode&&b.headers.location){if(n.length===c)return u(new I("URL could not be dereferenced; there were too many redirects.","jsonld.TooManyRedirects",{code:"loading document failed",url:l,httpStatusCode:b.statusCode,redirects:n}),
y);if(-1!==n.indexOf(l))return u(new I("URL could not be dereferenced; infinite redirection was detected.","jsonld.InfiniteRedirectDetected",{code:"recursive context inclusion",url:l,httpStatusCode:b.statusCode,redirects:n}),y);n.push(l);return a(b.headers.location,n,u)}n.push(l);u(d,y)})}d=d||{};var b="strictSSL"in d?d.strictSSL:!0,c="maxRedirects"in d?d.maxRedirects:-1,h="request"in d?d.request:x("request"),k=x("http"),l=new f.RequestQueue;if(d.usePromise)return l.wrapLoader(function(d){return f.promisify(a,
d,[])});var n=d.headers||{};if("Accept"in n||"accept"in n)throw new RangeError('Accept header may not be specified as an option; only "application/ld+json, application/json" is supported.');return l.wrapLoader(function(d,b){a(d,[],b)})};f.documentLoaders.xhr=function(d){function a(c,h){if(0!==c.indexOf("http:")&&0!==c.indexOf("https:"))return h(new I('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:c}),{contextUrl:null,
documentUrl:c,document:null});if(d.secure&&0!==c.indexOf("https"))return h(new I('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:c}),{contextUrl:null,documentUrl:c,document:null});var k=new (d.xhr||XMLHttpRequest);k.onload=function(){if(400<=k.status)return h(new I("URL could not be dereferenced: "+k.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:c,httpStatusCode:k.status}),
{contextUrl:null,documentUrl:c,document:null});var d={contextUrl:null,documentUrl:c,document:k.response},a=k.getResponseHeader("Content-Type"),l;b.test(k.getAllResponseHeaders())&&(l=k.getResponseHeader("Link"));if(l&&"application/ld+json"!==a){l=f.parseLinkHeader(l)[lb];if(J(l))return h(new I("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:c}),d);l&&(d.contextUrl=l.target)}h(null,d)};k.onerror=function(){h(new I("URL could not be dereferenced, an error occurred.",
"jsonld.LoadDocumentError",{code:"loading document failed",url:c}),{contextUrl:null,documentUrl:c,document:null})};k.open("GET",c,!0);k.setRequestHeader("Accept","application/ld+json, application/json");k.send()}d=d||{};var b=/(^|(\r\n))link:/i,c=new f.RequestQueue;return("usePromise"in d?d.usePromise:"undefined"!==typeof Promise)?c.wrapLoader(function(d){return f.promisify(a,d)}):c.wrapLoader(a)};f.useDocumentLoader=function(d){if(!(d in f.documentLoaders))throw new I('Unknown document loader type: "'+
d+'"',"jsonld.UnknownDocumentLoader",{type:d});f.documentLoader=f.documentLoaders[d].apply(f,Array.prototype.slice.call(arguments,1))};f.processContext=function(d,a){var b={},c=2;3<arguments.length&&(b=arguments[2]||{},c+=1);var h=arguments[c];"base"in b||(b.base="");"documentLoader"in b||(b.documentLoader=f.loadDocument);if(null===a)return h(null,B(b));a=da(a);H(a)&&"@context"in a||(a={"@context":a});Pa(a,b,function(a,c){if(a)return h(a);try{c=(new X).processContext(d,c,b)}catch(f){return h(f)}h(null,
c)})};f.hasProperty=function(d,a){var b=!1;a in d&&(b=d[a],b=!J(b)||0<b.length);return b};f.hasValue=function(d,a,b){var c=!1;if(f.hasProperty(d,a))if(d=d[a],a=ca(d),J(d)||a)for(a&&(d=d["@list"]),a=0;a<d.length;++a){if(f.compareValues(b,d[a])){c=!0;break}}else J(b)||(c=f.compareValues(b,d));return c};f.addValue=function(d,a,b,c){c=c||{};"propertyIsArray"in c||(c.propertyIsArray=!1);"allowDuplicate"in c||(c.allowDuplicate=!0);if(J(b)){0!==b.length||!c.propertyIsArray||a in d||(d[a]=[]);for(var h=0;h<
b.length;++h)f.addValue(d,a,b[h],c)}else a in d?(h=!c.allowDuplicate&&f.hasValue(d,a,b),J(d[a])||h&&!c.propertyIsArray||(d[a]=[d[a]]),h||d[a].push(b)):d[a]=c.propertyIsArray?[b]:b};f.getValues=function(d,a){var b=d[a]||[];J(b)||(b=[b]);return b};f.removeProperty=function(d,a){delete d[a]};f.removeValue=function(d,a,b,c){c=c||{};"propertyIsArray"in c||(c.propertyIsArray=!1);var h=f.getValues(d,a).filter(function(d){return!f.compareValues(d,b)});0===h.length?f.removeProperty(d,a):d[a]=1!==h.length||
c.propertyIsArray?h:h[0]};f.compareValues=function(d,a){return d===a||fa(d)&&fa(a)&&d["@value"]===a["@value"]&&d["@type"]===a["@type"]&&d["@language"]===a["@language"]&&d["@index"]===a["@index"]?!0:H(d)&&"@id"in d&&H(a)&&"@id"in a?d["@id"]===a["@id"]:!1};f.getContextValue=function(d,a,b){var c=null;if(null===a)return c;"@language"===b&&b in d&&(c=d[b]);d.mappings[a]&&(d=d.mappings[a],W(b)?c=d:b in d&&(c=d[b]));return c};var bb={};f.registerRDFParser=function(d,a){bb[d]=a};f.unregisterRDFParser=function(d){delete bb[d]};
if(b){if("undefined"===typeof Qa)var Qa=null;if("undefined"===typeof mb)var mb={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12}}var ta="http://www.w3.org/2001/XMLSchema#string",Ba="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",lb="http://www.w3.org/ns/json-ld#context",jb=10,I=function(d,a,c){b?(Error.call(this),
Error.captureStackTrace(this,this.constructor)):"undefined"!==typeof Error&&(this.stack=Error().stack);this.name=a||"jsonld.Error";this.message=d||"An unspecified JSON-LD error occurred.";this.details=c||{}};b?x("util").inherits(I,Error):"undefined"!==typeof Error&&(I.prototype=Error());var X=function(){};X.prototype.compact=function(d,a,b,c){if(J(b)){for(var h=[],k=0;k<b.length;++k){var l=this.compact(d,a,b[k],c);null!==l&&h.push(l)}if(c.compactArrays&&1===h.length){var n=f.getContextValue(d,a,"@container");
null===n&&(h=h[0])}return h}if(H(b)){if(c.link&&"@id"in b&&b["@id"]in c.link)for(h=c.link[b["@id"]],k=0;k<h.length;++k)if(h[k].expanded===b)return h[k].compacted;if(fa(b)||aa(b))return h=V(d,a,b),c.link&&aa(b)&&(b["@id"]in c.link||(c.link[b["@id"]]=[]),c.link[b["@id"]].push({expanded:b,compacted:h})),h;k="@reverse"===a;h={};c.link&&"@id"in b&&(b["@id"]in c.link||(c.link[b["@id"]]=[]),c.link[b["@id"]].push({expanded:b,compacted:h}));for(var u=Object.keys(b).sort(),y=0;y<u.length;++y){var v=u[y],z=
b[v];if("@id"===v||"@type"===v){var m;if(Q(z))m=K(d,z,null,{vocab:"@type"===v});else{m=[];for(var D=0;D<z.length;++D)m.push(K(d,z[D],null,{vocab:!0}))}v=K(d,v);n=J(m)&&0===z.length;f.addValue(h,v,m,{propertyIsArray:n})}else if("@reverse"===v){m=this.compact(d,"@reverse",z,c);for(l in m)d.mappings[l]&&d.mappings[l].reverse&&(z=m[l],n=f.getContextValue(d,l,"@container"),f.addValue(h,l,z,{propertyIsArray:"@set"===n||!c.compactArrays}),delete m[l]);0<Object.keys(m).length&&(v=K(d,v),f.addValue(h,v,m))}else if("@index"===
v)n=f.getContextValue(d,a,"@container"),"@index"!==n&&(v=K(d,v),f.addValue(h,v,z));else if("@graph"!==v&&"@list"!==v&&C(v))v=K(d,v),f.addValue(h,v,z);else for(0===z.length&&(m=K(d,v,z,{vocab:!0},k),f.addValue(h,m,z,{propertyIsArray:!0})),D=0;D<z.length;++D){var A=z[D];m=K(d,v,A,{vocab:!0},k);var n=f.getContextValue(d,m,"@container"),E=ca(A),G=null;E&&(G=A["@list"]);G=this.compact(d,m,E?G:A,c);if(E)if(J(G)||(G=[G]),"@list"!==n)E={},E[K(d,"@list")]=G,G=E,"@index"in A&&(G[K(d,"@index")]=A["@index"]);
else if(m in h)throw new I('JSON-LD compact error; property has a "@list" @container rule but there is more than a single @list that matches the compacted term in the document. Compaction might mix unwanted items into the list.',"jsonld.SyntaxError",{code:"compaction to list of lists"});if("@language"===n||"@index"===n){var M;m in h?M=h[m]:h[m]=M={};"@language"===n&&fa(G)&&(G=G["@value"]);f.addValue(M,A[n],G)}else n=!c.compactArrays||"@set"===n||"@list"===n||J(G)&&0===G.length||"@list"===v||"@graph"===
v,f.addValue(h,m,G,{propertyIsArray:n})}}return h}return b};X.prototype.expand=function(d,a,b,c,h){if(null===b||void 0===b)return null;if(!J(b)&&!H(b))return h||null!==a&&"@graph"!==F(d,a,{vocab:!0})?u(d,a,b):null;if(J(b)){var k=[],l=f.getContextValue(d,a,"@container");h=h||"@list"===l;for(var n=0;n<b.length;++n){var v=this.expand(d,a,b[n],c);if(h&&(J(v)||ca(v)))throw new I("Invalid JSON-LD syntax; lists of lists are not permitted.","jsonld.SyntaxError",{code:"list of lists"});null!==v&&(J(v)?k=k.concat(v):
k.push(v))}return k}"@context"in b&&(d=this.processContext(d,b["@context"],c));for(var n=F(d,a,{vocab:!0}),k={},v=Object.keys(b).sort(),y=0;y<v.length;++y){var z=v[y],m=b[z];if("@context"!==z){var D=F(d,z,{vocab:!0});if(null!==D&&(ea(D)||C(D))){if(C(D)){if("@reverse"===n)throw new I("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:m});if(D in k)throw new I("Invalid JSON-LD syntax; colliding keywords detected.",
"jsonld.SyntaxError",{code:"colliding keywords",keyword:D});}if("@id"===D&&!Q(m)){if(!c.isFrame)throw new I('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:m});if(!H(m))throw new I('Invalid JSON-LD syntax; "@id" value must be a string or an object.',"jsonld.SyntaxError",{code:"invalid @id value",value:m});}if("@type"===D){var l=m,A=void 0;(A=Q(l))||(A=H(l)&&0===Object.keys(l).length);if(!A){A=!1;if(J(l))for(var A=!0,E=0;E<l.length;++E)if(!Q(l[E])){A=
!1;break}if(!A)throw new I('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, or an empty object.',"jsonld.SyntaxError",{code:"invalid type value",value:l});}}if("@graph"===D&&!H(m)&&!J(m))throw new I('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:m});if("@value"===D&&(H(m)||J(m)))throw new I('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",
value:m});if("@language"===D){if(null===m)continue;if(!Q(m))throw new I('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:m});m=m.toLowerCase()}if("@index"===D&&!Q(m))throw new I('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:m});if("@reverse"===D){if(!H(m))throw new I('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",
value:m});m=this.expand(d,"@reverse",m,c);if("@reverse"in m)for(var G in m["@reverse"])f.addValue(k,G,m["@reverse"][G],{propertyIsArray:!0});z=k["@reverse"]||null;for(G in m)if("@reverse"!==G)for(null===z&&(z=k["@reverse"]={}),f.addValue(z,G,[],{propertyIsArray:!0}),D=m[G],l=0;l<D.length;++l){A=D[l];if(fa(A)||ca(A))throw new I('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:m});f.addValue(z,G,A,{propertyIsArray:!0})}}else{l=
f.getContextValue(d,z,"@container");if("@language"===l&&H(m)){for(var A=[],E=Object.keys(m).sort(),M=0;M<E.length;++M){var x=E[M],L=m[x];J(L)||(L=[L]);for(var O=0;O<L.length;++O){var K=L[O];if(null!==K){if(!Q(K))throw new I("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:m});A.push({"@value":K,"@language":x.toLowerCase()})}}}m=A}else if("@index"===l&&H(m)){A=z;E=[];M=Object.keys(m).sort();for(x=0;x<M.length;++x)for(L=
M[x],O=m[L],J(O)||(O=[O]),O=this.expand(d,A,O,c,!1),K=0;K<O.length;++K){var N=O[K];"@index"in N||(N["@index"]=L);E.push(N)}m=E}else if((A="@list"===D)||"@set"===D){if(E=a,A&&"@graph"===n&&(E=null),m=this.expand(d,E,m,c,A),A&&ca(m))throw new I("Invalid JSON-LD syntax; lists of lists are not permitted.","jsonld.SyntaxError",{code:"list of lists"});}else m=this.expand(d,z,m,c,!1);if(null!==m||"@value"===D)if("@list"===D||ca(m)||"@list"!==l||(m=J(m)?m:[m],m={"@list":m}),d.mappings[z]&&d.mappings[z].reverse)for(z=
k["@reverse"]=k["@reverse"]||{},J(m)||(m=[m]),l=0;l<m.length;++l){A=m[l];if(fa(A)||ca(A))throw new I('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:m});f.addValue(z,D,A,{propertyIsArray:!0})}else z=-1===["@index","@id","@type","@value","@language"].indexOf(D),f.addValue(k,D,m,{propertyIsArray:z})}}}}v=Object.keys(k);d=v.length;if("@value"in k){if("@type"in k&&"@language"in k)throw new I('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and "@language".',
"jsonld.SyntaxError",{code:"invalid value object",element:k});b=d-1;"@type"in k&&--b;"@index"in k&&--b;"@language"in k&&--b;if(0!==b)throw new I('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and at most one other property which can be "@type" or "@language".',"jsonld.SyntaxError",{code:"invalid value object",element:k});if(null===k["@value"])k=null;else{if("@language"in k&&!Q(k["@value"]))throw new I("Invalid JSON-LD syntax; only strings may be language-tagged.",
"jsonld.SyntaxError",{code:"invalid language-tagged value",element:k});if("@type"in k&&(!ea(k["@type"])||0===k["@type"].indexOf("_:")))throw new I('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:k});}}else if("@type"in k&&!J(k["@type"]))k["@type"]=[k["@type"]];else if("@set"in k||"@list"in k){if(1<d&&!(2===d&&"@index"in k))throw new I('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',
"jsonld.SyntaxError",{code:"invalid set or list object",element:k});"@set"in k&&(k=k["@set"],v=Object.keys(k),d=v.length)}else 1===d&&"@language"in k&&(k=null);!H(k)||c.keepFreeFloatingNodes||h||null!==a&&"@graph"!==n||!(0===d||"@value"in k||"@list"in k||1===d&&"@id"in k)||(k=null);return k};X.prototype.createNodeMap=function(d,a){a=a||{};var b=a.namer||a.issuer||new ba("_:b"),c={"@default":{}};n(d,c,"@default",b);return z(c)};X.prototype.flatten=function(d){d=this.createNodeMap(d);for(var a=[],b=
Object.keys(d).sort(),c=0;c<b.length;++c){var f=d[b[c]];aa(f)||a.push(f)}return a};X.prototype.frame=function(d,a,b){b={options:b,graphs:{"@default":{},"@merged":{}},subjectStack:[],link:{}};var c=new ba("_:b");n(d,b.graphs,"@merged",c);b.subjects=b.graphs["@merged"];d=[];A(b,Object.keys(b.subjects).sort(),a,d,null);return d};X.prototype.normalize=function(d,a,b){if("URDNA2015"===a.algorithm)return(new Ra(a)).main(d,b);if("URGNA2012"===a.algorithm)return(new Eb(a)).main(d,b);b(Error("Invalid RDF Dataset Normalization algorithm: "+
a.algorithm))};X.prototype.fromRDF=function(d,a,b){var c={},h={"@default":c},k={},l;for(l in d){var n=d[l];l in h||(h[l]={});"@default"===l||l in c||(c[l]={"@id":l});for(var u=h[l],v=0;v<n.length;++v){var y=n[v],m=y.subject.value,z=y.predicate.value,y=y.object;m in u||(u[m]={"@id":m});var m=u[m],D="IRI"===y.type||"blank node"===y.type;!D||y.value in u||(u[y.value]={"@id":y.value});if("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"===z&&!a.useRdfType&&D)f.addValue(m,"@type",y.value,{propertyIsArray:!0});
else{var A;var E=y,G=a.useNativeTypes;"IRI"===E.type||"blank node"===E.type?A={"@id":E.value}:(A={"@value":E.value},E.language?A["@language"]=E.language:((E=E.datatype)||(E=ta),G?("http://www.w3.org/2001/XMLSchema#boolean"===E?"true"===A["@value"]?A["@value"]=!0:"false"===A["@value"]&&(A["@value"]=!1):(G=A["@value"],!isNaN(parseFloat(G))&&isFinite(G)&&("http://www.w3.org/2001/XMLSchema#integer"===E?(G=parseInt(A["@value"],10),G.toFixed(0)===A["@value"]&&(A["@value"]=G)):"http://www.w3.org/2001/XMLSchema#double"===
E&&(A["@value"]=parseFloat(A["@value"])))),-1===["http://www.w3.org/2001/XMLSchema#boolean","http://www.w3.org/2001/XMLSchema#integer","http://www.w3.org/2001/XMLSchema#double",ta].indexOf(E)&&(A["@type"]=E)):E!==ta&&(A["@type"]=E)));f.addValue(m,z,A,{propertyIsArray:!0});D&&("http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"===y.value?(y=u[y.value],"usages"in y||(y.usages=[]),y.usages.push({node:m,property:z,value:A})):k[y.value]=y.value in k?!1:{node:m,property:z,value:A})}}}for(l in h)if(a=h[l],
"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"in a){n=a["http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"];for(d=0;d<n.usages.length;++d){y=n.usages[d];m=y.node;v=y.property;y=y.value;z=[];u=[];for(D=Object.keys(m).length;"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"===v&&H(k[m["@id"]])&&J(m["http://www.w3.org/1999/02/22-rdf-syntax-ns#first"])&&1===m["http://www.w3.org/1999/02/22-rdf-syntax-ns#first"].length&&J(m["http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"])&&1===m["http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"].length&&
(3===D||4===D&&J(m["@type"])&&1===m["@type"].length&&"http://www.w3.org/1999/02/22-rdf-syntax-ns#List"===m["@type"][0])&&(z.push(m["http://www.w3.org/1999/02/22-rdf-syntax-ns#first"][0]),u.push(m["@id"]),y=k[m["@id"]],m=y.node,v=y.property,y=y.value,D=Object.keys(m).length,0===m["@id"].indexOf("_:")););if("http://www.w3.org/1999/02/22-rdf-syntax-ns#first"===v){if("http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"===m["@id"])continue;y=a[y["@id"]]["http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"][0];
z.pop();u.pop()}delete y["@id"];y["@list"]=z.reverse();for(m=0;m<u.length;++m)delete a[u[m]]}delete n.usages}k=[];l=Object.keys(c).sort();for(d=0;d<l.length;++d){a=l[d];m=c[a];if(a in h)for(n=m["@graph"]=[],a=h[a],u=Object.keys(a).sort(),v=0;v<u.length;++v)z=a[u[v]],aa(z)||n.push(z);aa(m)||k.push(m)}b(null,k)};X.prototype.toRDF=function(d,a){var b=new ba("_:b"),c={"@default":{}};n(d,c,"@default",b);for(var f={},h=Object.keys(c).sort(),k=0;k<h.length;++k){var l=h[k];if("@default"===l||ea(l)){for(var t=
l,l=c[l],u=b,y=a,m=[],z=Object.keys(l).sort(),A=0;A<z.length;++A)for(var D=z[A],E=l[D],G=Object.keys(E).sort(),H=0;H<G.length;++H){var M=G[H],x=E[M];if("@type"===M)M="http://www.w3.org/1999/02/22-rdf-syntax-ns#type";else if(C(M))continue;for(var O=0;O<x.length;++O){var L=x[O],K={};K.type=0===D.indexOf("_:")?"blank node":"IRI";K.value=D;if(ea(D)){var J={};J.type=0===M.indexOf("_:")?"blank node":"IRI";J.value=M;if(ea(M)&&("blank node"!==J.type||y.produceGeneralizedRdf))if(ca(L)){for(var L=L["@list"],
F=u,N=m,V={type:"IRI",value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first"},Q={type:"IRI",value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},r=0;r<L.length;++r){var B=L[r],ma={type:"blank node",value:F.getId()};N.push({subject:K,predicate:J,object:ma});K=ma;J=V;(B=v(B))&&N.push({subject:K,predicate:J,object:B});J=Q}N.push({subject:K,predicate:J,object:{type:"IRI",value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}})}else(L=v(L))&&m.push({subject:K,predicate:J,object:L})}}}f[t]=m}}return f};
X.prototype.processContext=function(d,a,b){H(a)&&"@context"in a&&J(a["@context"])&&(a=a["@context"]);a=J(a)?a:[a];if(0===a.length)return d.clone();for(var c=d,h=0;h<a.length;++h){var k=a[h];if(null===k)c=d=B(b);else{H(k)&&"@context"in k&&(k=k["@context"]);if(!H(k))throw new I("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:k});if(f.cache.activeCtx&&(d=f.cache.activeCtx.get(d,k))){c=d;continue}d=c;var c=c.clone(),l={};if("@base"in k){var n=
k["@base"];if(null===n)n=null;else{if(!Q(n))throw new I('Invalid JSON-LD syntax; the value of "@base" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:k});if(""!==n&&!ea(n))throw new I('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI or the empty string.',"jsonld.SyntaxError",{code:"invalid base IRI",context:k});}null!==n&&(n=f.url.parse(n||""));c["@base"]=n;l["@base"]=!0}if("@vocab"in k){n=k["@vocab"];if(null===n)delete c["@vocab"];
else if(Q(n))if(ea(n))c["@vocab"]=n;else throw new I('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:k});else throw new I('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:k});l["@vocab"]=!0}if("@language"in k){n=k["@language"];if(null===n)delete c["@language"];else if(Q(n))c["@language"]=n.toLowerCase();
else throw new I('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:k});l["@language"]=!0}for(var u in k)N(c,k,u,l);f.cache.activeCtx&&f.cache.activeCtx.set(d,k,c)}}return c};var Ra=function(){var d={subject:"s",object:"o",name:"g"},a=function(d){d=d||{};this.name="URDNA2015";this.options=d;this.blankNodeInfo={};this.hashToBlankNodes={};this.canonicalIssuer=new ba("_:c14n");this.quads=[];this.schedule=
{};this.schedule.MAX_DEPTH="maxCallStackDepth"in d?d.maxCallStackDepth:500;this.schedule.MAX_TOTAL_DEPTH="maxTotalCallStackDepth"in d?d.maxCallStackDepth:4294967295;this.schedule.depth=0;this.schedule.totalDepth=0;this.schedule.timeSlice="timeSlice"in d?d.timeSlice:10};a.prototype.doWork=function(d,a){var b=this.schedule;if(b.totalDepth>=b.MAX_TOTAL_DEPTH)return a(Error("Maximum total call stack depth exceeded; normalization aborting."));(function hb(){if(b.depth===b.MAX_DEPTH)return b.depth=0,b.running=
!1,f.nextTick(hb);var c=(new Date).getTime();b.running||(b.start=(new Date).getTime(),b.deadline=b.start+b.timeSlice);if(c<b.deadline)return b.running=!0,b.depth++,b.totalDepth++,d(function(d,c){b.depth--;b.totalDepth--;a(d,c)});b.depth=0;b.running=!1;f.setImmediate(hb)})()};a.prototype.forEach=function(d,a,b){var c=this,f,h=0,k;if(J(d))k=d.length,f=function(){if(h===k)return!1;f.value=d[h++];f.key=h;return!0};else{var l=Object.keys(d);k=l.length;f=function(){if(h===k)return!1;f.key=l[h++];f.value=
d[f.key];return!0}}(function ib(d,h){if(d)return b(d);if(f())return c.doWork(function(){a(f.value,f.key,ib)});b()})()};a.prototype.waterfall=function(d,a){var b=this;b.forEach(d,function(d,a,c){b.doWork(d,c)},a)};a.prototype.whilst=function(d,a,b){var c=this;(function Bb(f){if(f)return b(f);if(!d())return b();c.doWork(a,Bb)})()};a.prototype.main=function(d,a){var b=this;b.schedule.start=(new Date).getTime();var c;if(b.options.format&&"application/nquads"!==b.options.format)return a(new I("Unknown output format.",
"jsonld.UnknownFormat",{format:b.options.format}));var f={};b.waterfall([function(a){b.forEach(d,function(d,a,c){"@default"===a&&(a=null);b.forEach(d,function(d,c,h){null!==a&&(0===a.indexOf("_:")?d.name={type:"blank node",value:a}:d.name={type:"IRI",value:a});b.quads.push(d);b.forEachComponent(d,function(a){"blank node"===a.type&&(a=a.value,a in b.blankNodeInfo?b.blankNodeInfo[a].quads.push(d):(f[a]=!0,b.blankNodeInfo[a]={quads:[d]}))});h()},c)},a)},function(d){var a=!0;b.whilst(function(){return a},
function(d){a=!1;b.hashToBlankNodes={};b.waterfall([function(d){b.forEach(f,function(d,a,c){b.hashFirstDegreeQuads(a,function(d,f){if(d)return c(d);f in b.hashToBlankNodes?b.hashToBlankNodes[f].push(a):b.hashToBlankNodes[f]=[a];c()})},d)},function(d){var c=Object.keys(b.hashToBlankNodes).sort();b.forEach(c,function(d,c,h){c=b.hashToBlankNodes[d];if(1<c.length)return h();c=c[0];b.canonicalIssuer.getId(c);delete f[c];delete b.hashToBlankNodes[d];a=!0;h()},d)}],d)},d)},function(d){var a=Object.keys(b.hashToBlankNodes).sort();
b.forEach(a,function(d,a,c){var f=[],h=b.hashToBlankNodes[d];b.waterfall([function(d){b.forEach(h,function(d,a,c){if(b.canonicalIssuer.hasId(d))return c();a=new ba("_:b");a.getId(d);b.hashNDegreeQuads(d,a,function(d,a){if(d)return c(d);f.push(a);c()})},d)},function(d){f.sort(function(d,a){return d.hash<a.hash?-1:d.hash>a.hash?1:0});b.forEach(f,function(d,a,c){for(var f in d.issuer.existing)b.canonicalIssuer.getId(f);c()},d)}],c)},d)},function(d){var a=[];b.waterfall([function(d){b.forEach(b.quads,
function(d,c,f){b.forEachComponent(d,function(d){"blank node"===d.type&&0!==d.value.indexOf(b.canonicalIssuer.prefix)&&(d.value=b.canonicalIssuer.getId(d.value))});a.push(fb(d));f()},d)},function(d){a.sort();if("application/nquads"===b.options.format)return c=a.join(""),d();c=eb(a.join(""));d()}],d)}],function(d){a(d,c)})};a.prototype.hashFirstDegreeQuads=function(d,a){var b=this,c=b.blankNodeInfo[d];if("hash"in c)return a(null,c.hash);var f=[];b.forEach(c.quads,function(a,c,h){var k={predicate:a.predicate};
b.forEachComponent(a,function(a,c){k[c]=b.modifyFirstDegreeComponent(d,a,c)});f.push(fb(k));h()},function(d){if(d)return a(d);f.sort();c.hash=la.hashNQuads(b.name,f);a(null,c.hash)})};a.prototype.modifyFirstDegreeComponent=function(d,a){if("blank node"!==a.type)return a;a=da(a);a.value=a.value===d?"_:a":"_:z";return a};a.prototype.hashRelatedBlankNode=function(d,a,b,c,f){var h=this,k;h.waterfall([function(a){if(h.canonicalIssuer.hasId(d))return k=h.canonicalIssuer.getId(d),a();if(b.hasId(d))return k=
b.getId(d),a();h.hashFirstDegreeQuads(d,function(d,b){if(d)return a(d);k=b;a()})}],function(d){if(d)return f(d);d=new la(h.name);d.update(c);"g"!==c&&d.update(h.getRelatedPredicate(a));d.update(k);return f(null,d.digest())})};a.prototype.getRelatedPredicate=function(d){return"<"+d.predicate.value+">"};a.prototype.hashNDegreeQuads=function(d,a,b){var c=this,f,h=new la(c.name);c.waterfall([function(b){c.createHashToRelated(d,a,function(d,a){if(d)return b(d);f=a;b()})},function(d){var b=Object.keys(f).sort();
c.forEach(b,function(d,b,k){h.update(d);var l="",t,n=new nb(f[d]);c.whilst(function(){return n.hasNext()},function(d){var b=n.next(),f=a.clone(),h="",k=[];c.waterfall([function(a){c.forEach(b,function(a,b,t){c.canonicalIssuer.hasId(a)?h+=c.canonicalIssuer.getId(a):(f.hasId(a)||k.push(a),h+=f.getId(a));if(0!==l.length&&h.length>=l.length&&h>l)return d();t()},a)},function(a){c.forEach(k,function(a,b,k){c.hashNDegreeQuads(a,f,function(b,c){if(b)return k(b);h+=f.getId(a);h+="<"+c.hash+">";f=c.issuer;
if(0!==l.length&&h.length>=l.length&&h>l)return d();k()})},a)},function(d){if(0===l.length||h<l)l=h,t=f;d()}],d)},function(d){if(d)return k(d);h.update(l);a=t;k()})},d)}],function(d){b(d,{hash:h.digest(),issuer:a})})};a.prototype.createHashToRelated=function(a,b,c){var f=this,h={};f.forEach(f.blankNodeInfo[a].quads,function(c,k,l){f.forEach(c,function(k,l,t){if("predicate"===l||"blank node"!==k.type||k.value===a)return t();var n=k.value;f.hashRelatedBlankNode(n,c,b,d[l],function(d,a){if(d)return t(d);
a in h?h[a].push(n):h[a]=[n];t()})},l)},function(d){c(d,h)})};a.prototype.forEachComponent=function(d,a){for(var b in d)"predicate"!==b&&a(d[b],b,d)};return a}(),Eb=function(){var d=function(d){Ra.call(this,d);this.name="URGNA2012"};d.prototype=new Ra;d.prototype.modifyFirstDegreeComponent=function(d,a,b){if("blank node"!==a.type)return a;a=da(a);a.value="name"===b?"_:g":a.value===d?"_:a":"_:z";return a};d.prototype.getRelatedPredicate=function(d){return d.predicate.value};d.prototype.createHashToRelated=
function(d,a,b){var c=this,f={};c.forEach(c.blankNodeInfo[d].quads,function(b,h,k){var l;if("blank node"===b.subject.type&&b.subject.value!==d)l=b.subject.value,h="p";else if("blank node"===b.object.type&&b.object.value!==d)l=b.object.value,h="r";else return k();c.hashRelatedBlankNode(l,b,a,h,function(d,a){a in f?f[a].push(l):f[a]=[l];k()})},function(d){b(d,f)})};return d}();Object.keys||(Object.keys=function(d){if(d!==Object(d))throw new TypeError("Object.keys called on non-object");var a=[],b;for(b in d)Object.prototype.hasOwnProperty.call(d,
b)&&a.push(b);return a});f.registerRDFParser("application/nquads",eb);f.registerRDFParser("rdfa-api",function(d){for(var a={"@default":[]},b=d.getSubjects(),c=0;c<b.length;++c){var f=b[c];if(null!==f){var h=d.getSubjectTriples(f);if(null!==h){var h=h.predicates,k;for(k in h)for(var l=h[k].objects,t=0;t<l.length;++t){var n=l[t],u={};0===f.indexOf("_:")?u.subject={type:"blank node",value:f}:u.subject={type:"IRI",value:f};0===k.indexOf("_:")?u.predicate={type:"blank node",value:k}:u.predicate={type:"IRI",
value:k};var y=n.value;if("http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral"===n.type){Qa||(Qa=x("xmldom").XMLSerializer);for(var v=new Qa,y="",m=0;m<n.value.length;m++)n.value[m].nodeType===mb.ELEMENT_NODE?y+=v.serializeToString(n.value[m]):n.value[m].nodeType===mb.TEXT_NODE&&(y+=n.value[m].nodeValue)}u.object={};"http://www.w3.org/1999/02/22-rdf-syntax-ns#object"===n.type?0===n.value.indexOf("_:")?u.object.type="blank node":u.object.type="IRI":(u.object.type="literal","http://www.w3.org/1999/02/22-rdf-syntax-ns#PlainLiteral"===
n.type?n.language?(u.object.datatype=Ba,u.object.language=n.language):u.object.datatype=ta:u.object.datatype=n.type);u.object.value=y;a["@default"].push(u)}}}}return a});f.IdentifierIssuer=ba;f.UniqueNamer=ba;ba.prototype.clone=function(){var d=new ba(this.prefix);d.counter=this.counter;d.existing=da(this.existing);return d};ba.prototype.getId=function(d){if(d&&d in this.existing)return this.existing[d];var a=this.prefix+this.counter;this.counter+=1;d&&(this.existing[d]=a);return a};ba.prototype.getName=
ba.prototype.getName;ba.prototype.hasId=function(d){return d in this.existing};ba.prototype.isNamed=ba.prototype.hasId;var nb=function(d){this.list=d.sort();this.done=!1;this.left={};for(var a=0;a<d.length;++a)this.left[d[a]]=!0};nb.prototype.hasNext=function(){return!this.done};nb.prototype.next=function(){for(var d=this.list.slice(),a=null,b=0,c=this.list.length,f=0;f<c;++f){var h=this.list[f],k=this.left[h];(null===a||h>a)&&(k&&0<f&&h>this.list[f-1]||!k&&f<c-1&&h>this.list[f+1])&&(a=h,b=f)}if(null===
a)this.done=!0;else for(f=this.left[a]?b-1:b+1,this.list[b]=this.list[f],this.list[f]=a,f=0;f<c;++f)this.list[f]>a&&(this.left[this.list[f]]=!this.left[this.list[f]]);return d};var la=function(d){if(!(this instanceof la))return new la(d);if(-1===["URDNA2015","URGNA2012"].indexOf(d))throw Error("Invalid RDF Dataset Normalization algorithm: "+d);la._init.call(this,d)};la.hashNQuads=function(d,a){for(var b=new la(d),c=0;c<a.length;++c)b.update(a[c]);return b.digest()};(function(d){if(d){var a=x("crypto");
la._init=function(d){this.md=a.createHash("URDNA2015"===d?"sha256":"sha1")};la.prototype.update=function(d){return this.md.update(d,"utf8")};la.prototype.digest=function(){return this.md.digest("hex")}}else{la._init=function(d){d="URDNA2015"===d?new f.Algorithm:new c.Algorithm;this.md=new b(d)};la.prototype.update=function(d){return this.md.update(d)};la.prototype.digest=function(){return this.md.digest().toHex()};var b=function(d){if(!(this instanceof b))return new b(d);this._algorithm=d;if(!b._padding||
b._padding.length<this._algorithm.blockSize){b._padding=String.fromCharCode(128);d=String.fromCharCode(0);for(var a=64;0<a;)a&1&&(b._padding+=d),a>>>=1,0<a&&(d+=d)}this.start()};b.prototype.start=function(){this.messageLength=0;this.fullMessageLength=[];for(var d=this._algorithm.messageLengthSize/4,a=0;a<d;++a)this.fullMessageLength.push(0);this._input=new b.ByteBuffer;this.state=this._algorithm.start();return this};b.prototype.update=function(d){d=new b.ByteBuffer(unescape(encodeURIComponent(d)));
this.messageLength+=d.length();for(var a=d.length(),a=[a/4294967296>>>0,a>>>0],c=this.fullMessageLength.length-1;0<=c;--c)this.fullMessageLength[c]+=a[1],a[1]=a[0]+(this.fullMessageLength[c]/4294967296>>>0),this.fullMessageLength[c]>>>=0,a[0]=a[1]/4294967296>>>0;for(this._input.putBytes(d.bytes());this._input.length()>=this._algorithm.blockSize;)this.state=this._algorithm.digest(this.state,this._input);(2048<this._input.read||0===this._input.length())&&this._input.compact();return this};b.prototype.digest=
function(){var d=new b.ByteBuffer;d.putBytes(this._input.bytes());d.putBytes(b._padding.substr(0,this._algorithm.blockSize-(this.fullMessageLength[this.fullMessageLength.length-1]+this._algorithm.messageLengthSize&this._algorithm.blockSize-1)));for(var a=new b.ByteBuffer,c=0;c<this.fullMessageLength.length;++c)a.putInt32(this.fullMessageLength[c]<<3|this.fullMessageLength[c+1]>>>28);this._algorithm.writeMessageLength(d,a);d=this._algorithm.digest(this.state.copy(),d);a=new b.ByteBuffer;d.write(a);
return a};b.ByteBuffer=function(d){this.data="string"===typeof d?d:"";this.read=0};b.ByteBuffer.prototype.putInt32=function(d){this.data+=String.fromCharCode(d>>24&255)+String.fromCharCode(d>>16&255)+String.fromCharCode(d>>8&255)+String.fromCharCode(d&255)};b.ByteBuffer.prototype.getInt32=function(){var d=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);this.read+=4;return d};b.ByteBuffer.prototype.putBytes=
function(d){this.data+=d};b.ByteBuffer.prototype.bytes=function(){return this.data.slice(this.read)};b.ByteBuffer.prototype.length=function(){return this.data.length-this.read};b.ByteBuffer.prototype.compact=function(){this.data=this.data.slice(this.read);this.read=0};b.ByteBuffer.prototype.toHex=function(){for(var d="",a=this.read;a<this.data.length;++a){var b=this.data.charCodeAt(a);16>b&&(d+="0");d+=b.toString(16)}return d};var c={_w:null,Algorithm:function(){this.name="sha1";this.blockSize=64;
this.digestLength=20;this.messageLengthSize=8}};c.Algorithm.prototype.start=function(){c._w||(c._w=Array(80));return c._createState()};c.Algorithm.prototype.writeMessageLength=function(d,a){d.putBytes(a.bytes())};c.Algorithm.prototype.digest=function(d,a){for(var b,f,h,k,l,t,n,u,y=a.length(),v=c._w;64<=y;){f=d.h0;h=d.h1;k=d.h2;l=d.h3;t=d.h4;for(u=0;16>u;++u)b=a.getInt32(),v[u]=b,n=l^h&(k^l),b=(f<<5|f>>>27)+n+t+1518500249+b,t=l,l=k,k=h<<30|h>>>2,h=f,f=b;for(;20>u;++u)b=v[u-3]^v[u-8]^v[u-14]^v[u-16],
b=b<<1|b>>>31,v[u]=b,n=l^h&(k^l),b=(f<<5|f>>>27)+n+t+1518500249+b,t=l,l=k,k=h<<30|h>>>2,h=f,f=b;for(;32>u;++u)b=v[u-3]^v[u-8]^v[u-14]^v[u-16],b=b<<1|b>>>31,v[u]=b,n=h^k^l,b=(f<<5|f>>>27)+n+t+1859775393+b,t=l,l=k,k=h<<30|h>>>2,h=f,f=b;for(;40>u;++u)b=v[u-6]^v[u-16]^v[u-28]^v[u-32],b=b<<2|b>>>30,v[u]=b,n=h^k^l,b=(f<<5|f>>>27)+n+t+1859775393+b,t=l,l=k,k=h<<30|h>>>2,h=f,f=b;for(;60>u;++u)b=v[u-6]^v[u-16]^v[u-28]^v[u-32],b=b<<2|b>>>30,v[u]=b,n=h&k|l&(h^k),b=(f<<5|f>>>27)+n+t+2400959708+b,t=l,l=k,k=h<<
30|h>>>2,h=f,f=b;for(;80>u;++u)b=v[u-6]^v[u-16]^v[u-28]^v[u-32],b=b<<2|b>>>30,v[u]=b,n=h^k^l,b=(f<<5|f>>>27)+n+t+3395469782+b,t=l,l=k,k=h<<30|h>>>2,h=f,f=b;d.h0=d.h0+f|0;d.h1=d.h1+h|0;d.h2=d.h2+k|0;d.h3=d.h3+l|0;d.h4=d.h4+t|0;y-=64}return d};c._createState=function(){var d={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520,copy:function(){var a=c._createState();a.h0=d.h0;a.h1=d.h1;a.h2=d.h2;a.h3=d.h3;a.h4=d.h4;return a},write:function(a){a.putInt32(d.h0);a.putInt32(d.h1);a.putInt32(d.h2);
a.putInt32(d.h3);a.putInt32(d.h4)}};return d};var f={_k:null,_w:null,Algorithm:function(){this.name="sha256";this.blockSize=64;this.digestLength=32;this.messageLengthSize=8}};f.Algorithm.prototype.start=function(){f._k||f._init();return f._createState()};f.Algorithm.prototype.writeMessageLength=function(d,a){d.putBytes(a.bytes())};f.Algorithm.prototype.digest=function(d,a){for(var b,c,h,k,l,t,n,u,v,y,m,z,A,D=a.length(),E=f._k,G=f._w;64<=D;){for(l=0;16>l;++l)G[l]=a.getInt32();for(;64>l;++l)b=G[l-2],
b=(b>>>17|b<<15)^(b>>>19|b<<13)^b>>>10,c=G[l-15],c=(c>>>7|c<<25)^(c>>>18|c<<14)^c>>>3,G[l]=b+G[l-7]+c+G[l-16]|0;t=d.h0;n=d.h1;u=d.h2;v=d.h3;y=d.h4;m=d.h5;z=d.h6;A=d.h7;for(l=0;64>l;++l)b=(y>>>6|y<<26)^(y>>>11|y<<21)^(y>>>25|y<<7),h=z^y&(m^z),c=(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10),k=t&n|u&(t^n),b=A+b+h+E[l]+G[l],c+=k,A=z,z=m,m=y,y=v+b|0,v=u,u=n,n=t,t=b+c|0;d.h0=d.h0+t|0;d.h1=d.h1+n|0;d.h2=d.h2+u|0;d.h3=d.h3+v|0;d.h4=d.h4+y|0;d.h5=d.h5+m|0;d.h6=d.h6+z|0;d.h7=d.h7+A|0;D-=64}return d};f._createState=
function(){var d={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225,copy:function(){var a=f._createState();a.h0=d.h0;a.h1=d.h1;a.h2=d.h2;a.h3=d.h3;a.h4=d.h4;a.h5=d.h5;a.h6=d.h6;a.h7=d.h7;return a},write:function(a){a.putInt32(d.h0);a.putInt32(d.h1);a.putInt32(d.h2);a.putInt32(d.h3);a.putInt32(d.h4);a.putInt32(d.h5);a.putInt32(d.h6);a.putInt32(d.h7)}};return d};f._init=function(){f._k=[1116352408,1899447441,3049323471,3921009573,961987163,
1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,
958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];f._w=Array(64)}}})(b);f.url={};f.url.parsers={simple:{keys:"href scheme authority path query fragment".split(" "),regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:"href protocol scheme authority auth user password hostname port path directory file query fragment".split(" "),regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}};
f.url.parse=function(d,a){for(var b={},c=f.url.parsers[a||"full"],h=c.regex.exec(d),k=c.keys.length;k--;)b[c.keys[k]]=void 0===h[k]?null:h[k];b.normalizedPath=Ab(b.path,!!b.authority);return b};b?f.useDocumentLoader("node"):"undefined"!==typeof XMLHttpRequest&&f.useDocumentLoader("xhr");b&&(f.use=function(d){switch(d){case "request":f.request=x("jsonld-request");break;default:throw new I("Unknown extension.","jsonld.UnknownExtension",{extension:d});}},ia={exports:{},filename:c},x("pkginfo")(ia,"version"),
f.version=ia.exports.version);return f},k=function(){return f(function(){return k()})};f(k);"function"===typeof x&&"undefined"!==typeof C&&C.exports&&(C.exports=k);a&&("undefined"===typeof jsonld?jsonld=jsonldjs=k:jsonldjs=k);return k})()}).call(this,x("7YKIPe"),"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},"/../node_modules/jsonld/js")},{"7YKIPe":10,crypto:25,"es6-promise":3,http:25,"jsonld-request":25,pkginfo:25,request:25,util:25,xmldom:25}],27:[function(x,C,B){var m=x;x=
function(){};B=C.exports={Lexer:x("./lib/N3Lexer"),Parser:x("./lib/N3Parser"),Writer:x("./lib/N3Writer"),Store:x("./lib/N3Store"),StreamParser:x("./lib/N3StreamParser"),StreamWriter:x("./lib/N3StreamWriter"),Util:x("./lib/N3Util")};Object.keys(B).forEach(function(h){Object.defineProperty(B,h,{configurable:!0,enumerable:!0,get:function(){delete B[h];return B[h]=m("./lib/N3"+h)}})})},{"./lib/N3Lexer":28,"./lib/N3Parser":29,"./lib/N3Store":30,"./lib/N3StreamParser":31,"./lib/N3StreamWriter":32,"./lib/N3Util":33,
"./lib/N3Writer":34}],28:[function(x,C,B){function m(a){if(!(this instanceof m))return new m(a);if(a&&a.lineMode){this._tripleQuotedString=this._number=this._boolean=/$0^/;var b=this;this._tokenize=this.tokenize;this.tokenize=function(d,a){this._tokenize(d,function(d,c){!d&&/^(?:IRI|prefixed|literal|langcode|type|\.|eof)$/.test(c.type)?a&&a(d,c):a&&a(d||b._syntaxError(c.type,a=null))})}}}var h=String.fromCharCode,c="function"===typeof setImmediate?setImmediate:function(a){setTimeout(a,0)},b=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\[uU]|\\(.)/g,
a={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},f=/[\x00-\x20<>\\"\{\}\|\^\`]/;m.prototype={_iri:/^<((?:[^>\\]|\\[uU])+)>/,_unescapedIri:/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>/,_unescapedString:/^"[^"\\]+"(?=[^"\\])/,_singleQuotedString:/^"[^"\\]*(?:\\.[^"\\]*)*"(?=[^"\\])|^'[^'\\]*(?:\\.[^'\\]*)*'(?=[^'\\])/,_tripleQuotedString:/^""("[^"\\]*(?:(?:\\.|"(?!""))[^"\\]*)*")""|^''('[^'\\]*(?:(?:\\.|'(?!''))[^'\\]*)*')''/,
_langcode:/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,_prefix:/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,_prefixed:/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?=\.?[,;\s#()\[\]\{\}"'<])/,
_blank:/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=\.?[,;:\s#()\[\]\{\}"'<])/,_number:/^[\-+]?(?:\d+\.?\d*([eE](?:[\-\+])?\d+)|\d*\.?\d+)(?=[.,;:\s#()\[\]\{\}"'<])/,_boolean:/^(?:true|false)(?=[.,;:\s#()\[\]\{\}"'<])/,
_keyword:/^@[a-z]+(?=[\s#<:])/,_sparqlKeyword:/^(?:PREFIX|BASE|GRAPH)(?=[\s#<:])/i,_shortPredicates:/^a(?=\s+|<)/,_newline:/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,_whitespace:/^[ \t]+/,_endOfFile:/^(?:#[^\n\r]*)?$/,_tokenizeToEnd:function(a,b){function d(d){a(d._syntaxError(/^\S*/.exec(c)[0]))}for(var c=this._input;;){for(var h;h=this._newline.exec(c);)c=c.substr(h[0].length,c.length),this._line++;if(h=this._whitespace.exec(c))c=c.substr(h[0].length,c.length);if(this._endOfFile.test(c))return b&&
a(c=null,{line:this._line,type:"eof",value:"",prefix:""}),this._input=c;h=this._line;var v="",n="",m="",A=c[0],y=null,D=0,E=!1;switch(A){case "^":if(1===c.length)break;else if("^"!==c[1])return d(this);this._prevTokenType="^";c=c.substr(2);if("<"!==c[0]){E=!0;break}case "<":if(y=this._unescapedIri.exec(c))v="IRI",n=y[1];else if(y=this._iri.exec(c)){n=this._unescape(y[1]);if(null===n||f.test(n))return d(this);v="IRI"}break;case "_":if((y=this._blank.exec(c))||b&&(y=this._blank.exec(c+" ")))v="prefixed",
m="_",n=y[1];break;case '"':case "'":if(y=this._unescapedString.exec(c))v="literal",n=y[0];else if(y=this._singleQuotedString.exec(c)){n=this._unescape(y[0]);if(null===n)return d(this);v="literal";n=n.replace(/^'|'$/g,'"')}else if(y=this._tripleQuotedString.exec(c)){n=y[1]||y[2];this._line+=n.split(/\r\n|\r|\n/).length-1;n=this._unescape(n);if(null===n)return d(this);v="literal";n=n.replace(/^'|'$/g,'"')}break;case "@":if("literal"===this._prevTokenType&&(y=this._langcode.exec(c)))v="langcode",n=
y[1];else if(y=this._keyword.exec(c))v=y[0];break;case ".":if(1===c.length?b:"0">c[1]||"9"<c[1]){v=".";D=1;break}case "0":case "1":case "2":case "3":case "4":case "5":case "6":case "7":case "8":case "9":case "+":case "-":if(y=this._number.exec(c))v="literal",n='"'+y[0]+'"^^http://www.w3.org/2001/XMLSchema#'+(y[1]?"double":/^[+\-]?\d+$/.test(y[0])?"integer":"decimal");break;case "B":case "b":case "p":case "P":case "G":case "g":(y=this._sparqlKeyword.exec(c))?v=y[0].toUpperCase():E=!0;break;case "f":case "t":(y=
this._boolean.exec(c))?(v="literal",n='"'+y[0]+'"^^http://www.w3.org/2001/XMLSchema#boolean'):E=!0;break;case "a":(y=this._shortPredicates.exec(c))?(v="abbreviation",n="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"):E=!0;break;case ",":case ";":case "[":case "]":case "(":case ")":case "{":case "}":D=1;v=A;break;default:E=!0}if(E)if(("@prefix"===this._prevTokenType||"PREFIX"===this._prevTokenType)&&(y=this._prefix.exec(c)))v="prefix",n=y[1]||"";else if((y=this._prefixed.exec(c))||b&&(y=this._prefixed.exec(c+
" ")))v="prefixed",m=y[1]||"",n=this._unescape(y[2]);"^"===this._prevTokenType&&(v="IRI"===v||"prefixed"===v?"type":"");if(!v)return b||!/^'''|^"""/.test(c)&&/\n|\r/.test(c)?d(this):this._input=c;a(null,{line:h,type:v,value:n,prefix:m});this._prevTokenType=v;c=c.substr(D||y[0].length,c.length)}},_unescape:function(c){try{return c.replace(b,function(b,d,c,f){if(d){b=parseInt(d,16);if(isNaN(b))throw Error();return h(b)}if(c){b=parseInt(c,16);if(isNaN(b))throw Error();return 65535>=b?h(b):h(55296+(b-=
65536)/1024,56320+(b&1023))}b=a[f];if(!b)throw Error();return b})}catch(f){return null}},_syntaxError:function(a){this._input=null;return Error('Syntax error: unexpected "'+a+'" on line '+this._line+".")},tokenize:function(a,b){function d(d){null!==h._input&&(h._input+=d,h._tokenizeToEnd(b,!1))}function f(){null!==h._input&&h._tokenizeToEnd(b,!0)}var h=this;this._line=1;"string"===typeof a?(this._input=a,c(function(){h._tokenizeToEnd(b,!0)})):(this._input="",a&&"function"!==typeof a?("function"===
typeof a.setEncoding&&a.setEncoding("utf8"),a.on("data",d),a.on("end",f)):(this.addChunk=d,this.end=f,b||(b=a)))}};C.exports=m},{}],29:[function(x,C,B){function m(d){if(!(this instanceof m))return new m(d);this._tripleStack=[];this._graph=null;d=d||{};this._setBase(d.documentIRI);var a="string"===typeof d.format&&d.format.match(/\w*$/)[0].toLowerCase(),b="turtle"===a,f="trig"===a,k=/triple/.test(a),a=/quad/.test(a),a=k||a;(this._supportsNamedGraphs=!b)||(this._readPredicateOrNamedGraph=this._readPredicate);
this._supportsQuads=!(b||f||k);a&&(this._base="",this._resolveIRI=function(d){this._error("Disallowed relative IRI",d);return this._callback=h,this._subject=null});this._blankNodePrefix="string"!==typeof d.blankNodePrefix?"":"_:"+d.blankNodePrefix.replace(/^_:/,"");this._lexer=d.lexer||new c({lineMode:a})}function h(){}var c=x("./N3Lexer"),b=/^[a-z][a-z0-9+.-]*:/i,a=/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i,f=/(?:^|\/)\.\.?(?:$|[\/#?])/,k=0,t=0;m._resetBlankNodeIds=function(){k=t=0};m.prototype=
{_setBase:function(d){if(!d)d=null;else if(0<=d.indexOf("#"))throw Error("Invalid base IRI "+d);if(this._base=d)this._basePath=d.replace(/[^\/?]*(?:\?.*)?$/,""),d=d.match(a),this._baseRoot=d[0],this._baseScheme=d[1]},_readInTopContext:function(d){switch(d.type){case "eof":if(null!==this._graph)return this._error("Unclosed graph",d);delete this._prefixes._;return this._callback(null,null,this._prefixes);case "@prefix":return this._sparqlStyle=!1,this._readPrefix;case "PREFIX":return this._sparqlStyle=
!0,this._readPrefix;case "@base":return this._sparqlStyle=!1,this._readBaseIRI;case "BASE":return this._sparqlStyle=!0,this._readBaseIRI;case "{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case "GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(d)}},_readSubject:function(d){this._predicate=null;switch(d.type){case "IRI":null===this._base||b.test(d.value)?this._subject=d.value:this._subject=this._resolveIRI(d);
break;case "prefixed":var a=this._prefixes[d.prefix];if(void 0===a)return this._error('Undefined prefix "'+d.prefix+':"',d);this._subject=a+d.value;break;case "[":return this._subject="_:b"+t++,this._tripleStack.push({subject:this._subject,predicate:null,object:null,type:"blank"}),this._readBlankNodeHead;case "(":return this._tripleStack.push({subject:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil",predicate:null,object:null,type:"list"}),this._subject=null,this._readListItem;case "}":return this._readPunctuation(d);
default:return this._error("Expected subject but got "+d.type,d)}return this._readPredicateOrNamedGraph},_readPredicate:function(d){var a=d.type;switch(a){case "IRI":case "abbreviation":null===this._base||b.test(d.value)?this._predicate=d.value:this._predicate=this._resolveIRI(d);break;case "prefixed":if("_"===d.prefix)return this._error("Disallowed blank node as predicate",d);a=this._prefixes[d.prefix];if(void 0===a)return this._error('Undefined prefix "'+d.prefix+':"',d);this._predicate=a+d.value;
break;case ".":case "]":case "}":if(null===this._predicate)return this._error("Unexpected "+a,d);this._subject=null;return"]"===a?this._readBlankNodeTail(d):this._readPunctuation(d);case ";":return this._readPredicate;default:return this._error('Expected predicate to follow "'+this._subject+'"',d)}return this._readObject},_readObject:function(d){switch(d.type){case "IRI":null===this._base||b.test(d.value)?this._object=d.value:this._object=this._resolveIRI(d);break;case "prefixed":var a=this._prefixes[d.prefix];
if(void 0===a)return this._error('Undefined prefix "'+d.prefix+':"',d);this._object=a+d.value;break;case "literal":return this._object=d.value,this._readDataTypeOrLang;case "[":return d="_:b"+t++,this._tripleStack.push({subject:this._subject,predicate:this._predicate,object:d,type:"blank"}),this._subject=d,this._readBlankNodeHead;case "(":return this._tripleStack.push({subject:this._subject,predicate:this._predicate,object:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil",type:"list"}),this._subject=
null,this._readListItem;default:return this._error('Expected object to follow "'+this._predicate+'"',d)}return this._getTripleEndReader()},_readPredicateOrNamedGraph:function(d){return"{"===d.type?this._readGraph(d):this._readPredicate(d)},_readGraph:function(d){if("{"!==d.type)return this._error("Expected graph but got "+d.type,d);this._graph=this._subject;this._subject=null;return this._readSubject},_readBlankNodeHead:function(d){if("]"===d.type)return this._subject=null,this._readBlankNodeTail(d);
this._predicate=null;return this._readPredicate(d)},_readBlankNodeTail:function(d){if("]"!==d.type)return this._readBlankNodePunctuation(d);null!==this._subject&&this._callback(null,{subject:this._subject,predicate:this._predicate,object:this._object,graph:this._graph||""});d=this._tripleStack.pop();this._subject=d.subject;return null!==d.object?(this._predicate=d.predicate,this._object=d.object,this._getTripleEndReader()):null!==this._predicate?this._readPredicate:this._readPredicateOrNamedGraph},
_readDataTypeOrLang:function(d){switch(d.type){case "type":if(""===d.prefix)d=null===this._base||b.test(d.value)?d.value:this._resolveIRI(d);else{var a=this._prefixes[d.prefix];if(void 0===a)return this._error('Undefined prefix "'+d.prefix+':"',d);d=a+d.value}this._object+="^^"+d;return this._getTripleEndReader();case "langcode":return this._object+="@"+d.value.toLowerCase(),this._getTripleEndReader();default:return this._getTripleEndReader().call(this,d)}},_readListItem:function(d){var a=null,c=
null,f=this._subject,h=this._tripleStack,k=h[h.length-1],m=this._readListItem;switch(d.type){case "IRI":a=null===this._base||b.test(d.value)?d.value:this._resolveIRI(d);break;case "prefixed":a=this._prefixes[d.prefix];if(void 0===a)return this._error('Undefined prefix "'+d.prefix+':"',d);a+=d.value;break;case "literal":a=d.value;m=this._readDataTypeOrLang;break;case "[":c="_:b"+t++;a="_:b"+t++;h.push({subject:c,predicate:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first",object:a,type:"blank"});this._subject=
a;m=this._readBlankNodeHead;break;case "(":c="_:b"+t++;h.push({subject:c,predicate:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first",object:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil",type:"list"});this._subject=null;m=this._readListItem;break;case ")":h.pop();0!==h.length&&"list"===h[h.length-1].type&&this._callback(null,{subject:k.subject,predicate:k.predicate,object:k.object,graph:this._graph||""});this._subject=k.subject;if(null===k.predicate){if(m=this._readPredicate,"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"===
k.subject)return m}else if(this._predicate=k.predicate,this._object=k.object,m=this._getTripleEndReader(),"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"===k.object)return m;c="http://www.w3.org/1999/02/22-rdf-syntax-ns#nil";break;default:return this._error('Expected list item instead of "'+d.type+'"',d)}null===c&&(this._subject=c="_:b"+t++);null===f?"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"===k.object?k.object=c:k.subject=c:this._callback(null,{subject:f,predicate:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest",
object:c,graph:this._graph||""});null!==a&&this._callback(null,{subject:c,predicate:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first",object:a,graph:this._graph||""});return m},_readPunctuation:function(d){var a=this._subject,c=this._graph;switch(d.type){case "}":if(null===this._graph)return this._error("Unexpected graph closing",d);this._graph=null;case ".":this._subject=null;d=this._readInTopContext;break;case ";":d=this._readPredicate;break;case ",":d=this._readObject;break;case "IRI":if(this._supportsQuads&&
null===this._graph){c=null===this._base||b.test(d.value)?d.value:this._resolveIRI(d);a=this._subject;d=this._readQuadPunctuation;break}case "prefixed":if(this._supportsQuads&&null===this._graph){c=this._prefixes[d.prefix];if(void 0===c)return this._error('Undefined prefix "'+d.prefix+':"',d);c+=d.value;d=this._readQuadPunctuation;break}default:return this._error('Expected punctuation to follow "'+this._object+'"',d)}null!==a&&this._callback(null,{subject:a,predicate:this._predicate,object:this._object,
graph:c||""});return d},_readBlankNodePunctuation:function(d){switch(d.type){case ";":d=this._readPredicate;break;case ",":d=this._readObject;break;default:return this._error('Expected punctuation to follow "'+this._object+'"',d)}this._callback(null,{subject:this._subject,predicate:this._predicate,object:this._object,graph:this._graph||""});return d},_readQuadPunctuation:function(d){return"."!==d.type?this._error("Expected dot to follow quad",d):this._readInTopContext},_readPrefix:function(d){if("prefix"!==
d.type)return this._error("Expected prefix to follow @prefix",d);this._prefix=d.value;return this._readPrefixIRI},_readPrefixIRI:function(d){if("IRI"!==d.type)return this._error('Expected IRI to follow prefix "'+this._prefix+':"',d);d=null===this._base||b.test(d.value)?d.value:this._resolveIRI(d);this._prefixes[this._prefix]=d;this._prefixCallback(this._prefix,d);return this._readDeclarationPunctuation},_readBaseIRI:function(d){if("IRI"!==d.type)return this._error("Expected IRI to follow base declaration",
d);try{this._setBase(null===this._base||b.test(d.value)?d.value:this._resolveIRI(d))}catch(a){this._error(a.message,d)}return this._readDeclarationPunctuation},_readNamedGraphLabel:function(d){switch(d.type){case "IRI":case "prefixed":return this._readSubject(d),this._readGraph;case "[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",d)}},_readNamedGraphBlankLabel:function(d){if("]"!==d.type)return this._error("Invalid graph label",d);this._subject="_:b"+t++;
return this._readGraph},_readDeclarationPunctuation:function(d){return this._sparqlStyle?this._readInTopContext(d):"."!==d.type?this._error("Expected declaration to end with a dot",d):this._readInTopContext},_getTripleEndReader:function(){var d=this._tripleStack;if(0===d.length)return this._readPunctuation;switch(d[d.length-1].type){case "blank":return this._readBlankNodeTail;case "list":return this._readListItem}},_error:function(d,a){this._callback(Error(d+" at line "+a.line+"."))},_resolveIRI:function(d){d=
d.value;switch(d[0]){case void 0:return this._base;case "#":return this._base+d;case "?":return this._base.replace(/(?:\?.*)?$/,d);case "/":return("/"===d[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(d);default:return this._removeDotSegments(this._basePath+d)}},_removeDotSegments:function(d){if(!f.test(d))return d;for(var a="",b=d.length,c=-1,h=-1,k=0,t="/";c<b;){switch(t){case ":":if(0>h&&"/"===d[++c]&&"/"===d[++c])for(;(h=c+1)<b&&"/"!==d[h];)c=h;break;case "?":case "#":c=b;break;
case "/":if("."===d[c+1])switch(t=d[++c+1],t){case "/":a+=d.substring(k,c-1);k=c+1;break;case void 0:case "?":case "#":return a+d.substring(k,c)+d.substr(c+1);case ".":if(t=d[++c+1],void 0===t||"/"===t||"?"===t||"#"===t){a+=d.substring(k,c-2);(k=a.lastIndexOf("/"))>=h&&(a=a.substr(0,k));if("/"!==t)return a+"/"+d.substr(c+1);k=c+1}}}t=d[++c]}return a+d.substring(k)},parse:function(d,a,b){this._readCallback=this._readInTopContext;this._prefixes=Object.create(null);this._prefixes._=this._blankNodePrefix||
"_:b"+k++ +"_";"function"===typeof d&&(b=a,a=d,d=null);this._callback=a||h;this._prefixCallback=b||h;var c=this;this._lexer.tokenize(d,function(d,a){null!==d?(c._callback(d),c._callback=h):void 0!==c._readCallback&&(c._readCallback=c._readCallback(a))});d||(this.addChunk=this._lexer.addChunk,this.end=this._lexer.end)}};C.exports=m},{"./N3Lexer":28}],30:[function(x,C,B){function m(c,b){if(!(this instanceof m))return new m(c,b);this._size=0;this._graphs=Object.create(null);this._id=0;this._ids=Object.create(null);
this._ids["><"]=0;this._entities=Object.create(null);this._blankNodeIndex=0;b||!c||c[0]||(b=c,c=null);b=b||{};this._prefixes=Object.create(null);b.prefixes&&this.addPrefixes(b.prefixes);this.defaultGraph=b.defaultGraph||"http://example.org/#defaultGraph";c&&this.addTriples(c)}var h=x("./N3Util").expandPrefixedName;m.prototype={get size(){var c=this._size;if(null!==c)return c;var b=this._graphs,a,f,h;for(h in b)for(var t in a=b[h].subjects)for(var d in f=a[t])c+=Object.keys(f[d]).length;return this._size=
c},_addToIndex:function(c,b,a,f){c=c[b]||(c[b]={});a=c[a]||(c[a]={});(c=f in a)||(a[f]=null);return!c},_removeFromIndex:function(c,b,a,f){var h=c[b],t=h[a],d;delete t[f];for(d in t)return;delete h[a];for(d in h)return;delete c[b]},_findInIndex:function(c,b,a,f,h,t,d,l){var u=[],v,n,m=1< !b+!a+!f?Object.keys(this._ids):this._entities;b&&((v=c,c={})[b]=v[b]);for(var A in c){var y=m[A];if(b=c[A]){a&&((v=b,b={})[a]=v[a]);for(var D in b){var E=m[D];if(n=b[D]){n=f?f in n?[f]:[]:Object.keys(n);for(var G=
n.length-1;0<=G;G--){var M={subject:"",predicate:"",object:"",graph:l};M[h]=y;M[t]=E;M[d]=m[n[G]];u.push(M)}}}}}return u},_countInIndex:function(c,b,a,f){var h=0,t,d;b&&((t=c,c={})[b]=t[b]);for(var l in c)if(b=c[l]){a&&((t=b,b={})[a]=t[a]);for(var u in b)if(d=b[u])f?f in d&&h++:h+=Object.keys(d).length}return h},addTriple:function(c,b,a,f){b||(f=c.graph,a=c.object,b=c.predicate,c=c.subject);f=f||this.defaultGraph;var h=this._graphs[f];h||(h=this._graphs[f]={subjects:{},predicates:{},objects:{}},Object.freeze(h));
f=this._ids;var t=this._entities;c=f[c]||(f[t[++this._id]=c]=this._id);b=f[b]||(f[t[++this._id]=b]=this._id);a=f[a]||(f[t[++this._id]=a]=this._id);f=this._addToIndex(h.subjects,c,b,a);this._addToIndex(h.predicates,b,a,c);this._addToIndex(h.objects,a,c,b);this._size=null;return f},addTriples:function(c){for(var b=c.length-1;0<=b;b--)this.addTriple(c[b])},addPrefix:function(c,b){this._prefixes[c]=b},addPrefixes:function(c){for(var b in c)this.addPrefix(b,c[b])},removeTriple:function(c,b,a,f){b||(f=
c.graph,a=c.object,b=c.predicate,c=c.subject);f=f||this.defaultGraph;var h,t=this._ids,d=this._graphs;if(!((c=t[c])&&(b=t[b])&&(a=t[a])&&(h=d[f])))return!1;var l,u;if(!((l=h.subjects[c])&&(u=l[b])&&a in u))return!1;this._removeFromIndex(h.subjects,c,b,a);this._removeFromIndex(h.predicates,b,a,c);this._removeFromIndex(h.objects,a,c,b);null!==this._size&&this._size--;for(c in h.subjects)return!0;delete d[f];return!0},removeTriples:function(c){for(var b=c.length-1;0<=b;b--)this.removeTriple(c[b])},find:function(c,
b,a,f){var k=this._prefixes;return this.findByIRI(h(c,k),h(b,k),h(a,k),h(f,k))},findByIRI:function(c,b,a,f){var h=[],t={},d=this._ids,l,u,v;f?t[f]=this._graphs[f]:t=this._graphs;for(var n in t)if(f=t[n]){if(c&&!(l=d[c])||b&&!(u=d[b])||a&&!(v=d[a]))return h;l?v?h.push(this._findInIndex(f.objects,v,l,u,"object","subject","predicate",n)):h.push(this._findInIndex(f.subjects,l,u,null,"subject","predicate","object",n)):u?h.push(this._findInIndex(f.predicates,u,v,null,"predicate","object","subject",n)):
v?h.push(this._findInIndex(f.objects,v,null,null,"object","subject","predicate",n)):h.push(this._findInIndex(f.subjects,null,null,null,"subject","predicate","object",n))}return 1===h.length?h[0]:h.concat.apply([],h)},count:function(c,b,a,f){var k=this._prefixes;return this.countByIRI(h(c,k),h(b,k),h(a,k),h(f,k))},countByIRI:function(c,b,a,f){f=f||this.defaultGraph;f=this._graphs[f];var h=this._ids;return!f||c&&!(c=h[c])||b&&!(b=h[b])||a&&!(a=h[a])?0:c?a?this._countInIndex(f.objects,a,c,b):this._countInIndex(f.subjects,
c,b,a):b?this._countInIndex(f.predicates,b,a,c):this._countInIndex(f.objects,a,c,b)},createBlankNode:function(c){var b,a;if(c)for(b=c="_:"+c,a=1;this._ids[b];)b=c+a++;else{do b="_:b"+this._blankNodeIndex++;while(this._ids[b])}this._ids[b]=++this._id;return b}};C.exports=m},{"./N3Util":33}],31:[function(x,C,B){function m(b){if(!(this instanceof m))return new m(b);h.call(this,{decodeStrings:!0});this._readableState.objectMode=!0;var a=this,f=new c(b);f.parse(function(b,c){c&&a.push(c)||b&&a.emit("error",
b)},this.emit.bind(this,"prefix"));this._transform=function(a,b,d){f.addChunk(a);d()};this._flush=function(a){f.end();a()}}var h=x("stream").Transform;B=x("util");var c=x("./N3Parser.js");B.inherits(m,h);C.exports=m},{"./N3Parser.js":29,stream:15,util:38}],32:[function(x,C,B){function m(b){if(!(this instanceof m))return new m(b);h.call(this,{encoding:"utf8"});this._writableState.objectMode=!0;var a=this,f=new c({write:function(b,c,d){a.push(b);d&&d()},end:function(b){a.push(null);b&&b()}},b);this._transform=
function(a,b,d){f.addTriple(a,d)};this._flush=function(a){f.end(a)}}var h=x("stream").Transform;B=x("util");var c=x("./N3Writer.js");B.inherits(m,h);C.exports=m},{"./N3Writer.js":34,stream:15,util:38}],33:[function(x,C,B){function m(b,a){for(var f in c)a?b.prototype[f]=h(c[f]):b[f]=c[f];return b}function h(b){return function(a){return b(this,a)}}var c={isIRI:function(b){if(!b)return b;b=b[0];return'"'!==b&&"_"!==b},isLiteral:function(b){return b&&'"'===b[0]},isBlank:function(b){return b&&"_:"===b.substr(0,
2)},getLiteralValue:function(b){var a=/^"([^]*)"/.exec(b);if(!a)throw Error(b+" is not a literal");return a[1]},getLiteralType:function(b){var a=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(b);if(!a)throw Error(b+" is not a literal");return a[1]||(a[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")},getLiteralLanguage:function(b){var a=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(b);if(!a)throw Error(b+" is not a literal");return a[1]?a[1].toLowerCase():
""},isPrefixedName:function(b){return b&&/^[^:\/"']*:[^:\/"']+$/.test(b)},expandPrefixedName:function(b,a){var c=/(?:^|"\^\^)([^:\/#"'\^_]*):[^\/]*$/.exec(b),h,t,d;c&&(h=c[1],t=a[h],d=c.index);return void 0===t?b:0===d?t+b.substr(h.length+1):b.substr(0,d+3)+t+b.substr(d+h.length+4)},createIRI:function(b){return b&&'"'===b[0]?c.getLiteralValue(b):b},createLiteral:function(b,a){if(!a)switch(typeof b){case "boolean":a="http://www.w3.org/2001/XMLSchema#boolean";break;case "number":if(isFinite(b)){a=0===
b%1?"http://www.w3.org/2001/XMLSchema#integer":"http://www.w3.org/2001/XMLSchema#decimal";break}default:return'"'+b+'"'}return'"'+b+(/^[a-z]+(-[a-z0-9]+)*$/i.test(a)?'"@'+a.toLowerCase():'"^^'+a)},prefix:function(b){return c.prefixes({"":b})("")},prefixes:function(b){function a(a,d){if(d||!(a in c)){var b=Object.create(null);d=d||"";c[a]=function(a){return b[a]||(b[a]=d+a)}}return c[a]}var c=Object.create(null),h;for(h in b)a(h,b[h]);return a}};C.exports=m(m)},{}],34:[function(x,C,B){function m(a,
b){if(!(this instanceof m))return new m(a,b);a&&"function"!==typeof a.write&&(b=a,a=null);b=b||{};if(a)this._outputStream=a,this._endStream=void 0===b.end?!0:!!b.end;else{var d="";this._outputStream={write:function(a,b,c){d+=a;c&&c()},end:function(a){a&&a(null,d)}};this._endStream=!0}this._subject=null;/triple|quad/i.test(b.format)?this._writeTriple=this._writeTripleLine:(this._graph="",this._prefixIRIs=Object.create(null),b.prefixes&&this.addPrefixes(b.prefixes))}function h(a){var b=f[a];void 0===
b&&(1===a.length?(b=a.charCodeAt(0).toString(16),b="\\u0000".substr(0,6-b.length)+b):(b=(1024*(a.charCodeAt(0)-55296)+a.charCodeAt(1)+9216).toString(16),b="\\U00000000".substr(0,10-b.length)+b));return b}var c=/^"([^]*)"(?:\^\^(.+)|@([\-a-z]+))?$/i,b=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,a=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,f={"\\":"\\\\",'"':'\\"',"\t":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};m.prototype={_write:function(a,b){this._outputStream.write(a,
"utf8",b)},_writeTriple:function(a,b,d,c,f){try{this._graph!==c&&(this._write((null===this._subject?"":this._graph?"\n}\n":".\n")+(c?this._encodeIriOrBlankNode(c)+" {\n":"")),this._subject=null,this._graph="["!==c[0]?c:"]"),this._subject===a?this._predicate===b?this._write(", "+this._encodeObject(d),f):this._write(";\n    "+this._encodePredicate(this._predicate=b)+" "+this._encodeObject(d),f):this._write((null===this._subject?"":".\n")+this._encodeSubject(this._subject=a)+" "+this._encodePredicate(this._predicate=
b)+" "+this._encodeObject(d),f)}catch(h){f&&f(h)}},_writeTripleLine:function(a,b,d,c,f){delete this._prefixMatch;try{this._write(this._encodeIriOrBlankNode(a)+" "+this._encodeIriOrBlankNode(b)+" "+this._encodeObject(d)+(c?" "+this._encodeIriOrBlankNode(c)+".\n":".\n"),f)}catch(h){f&&f(h)}},_encodeIriOrBlankNode:function(c){var f=c[0];if("["===f||"("===f||"_"===f&&":"===c[1])return c;b.test(c)&&(c=c.replace(a,h));return(f=this._prefixRegex.exec(c))?f[1]?this._prefixIRIs[f[1]]+f[2]:c:"<"+c+">"},_encodeLiteral:function(c,
f,d){b.test(c)&&(c=c.replace(a,h));return d?'"'+c+'"@'+d:f?'"'+c+'"^^'+this._encodeIriOrBlankNode(f):'"'+c+'"'},_encodeSubject:function(a){if('"'===a[0])throw Error("A literal as subject is not allowed: "+a);"["===a[0]&&(this._subject="]");return this._encodeIriOrBlankNode(a)},_encodePredicate:function(a){if('"'===a[0])throw Error("A literal as predicate is not allowed: "+a);return"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"===a?"a":this._encodeIriOrBlankNode(a)},_encodeObject:function(a){if('"'!==
a[0])return this._encodeIriOrBlankNode(a);var b=c.exec(a);if(!b)throw Error("Invalid literal: "+a);return this._encodeLiteral(b[1],b[2],b[3])},_blockedWrite:function(){throw Error("Cannot write because the writer has been closed.");},addTriple:function(a,b,d,c,f){void 0===d?this._writeTriple(a.subject,a.predicate,a.object,a.graph||"",b):"string"!==typeof c?this._writeTriple(a,b,d,"",c):this._writeTriple(a,b,d,c,f)},addTriples:function(a){for(var b=0;b<a.length;b++)this.addTriple(a[b])},addPrefix:function(a,
b,d){var c={};c[a]=b;this.addPrefixes(c,d)},addPrefixes:function(a,b){var d=this._prefixIRIs,c=!1,f;for(f in a){var h=a[f];/[#\/]$/.test(h)&&d[h]!==(f+=":")&&(c=!0,d[h]=f,null!==this._subject&&(this._write(this._graph?"\n}\n":".\n"),this._subject=null,this._graph=""),this._write("@prefix "+f+" <"+h+">.\n"))}if(c){var h=f="",n;for(n in d)f+=f?"|"+n:n,h+=(h?"|":"")+d[n];f=f.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&");this._prefixRegex=new RegExp("^(?:"+h+")[^/]*$|^("+f+")([a-zA-Z][\\-_a-zA-Z0-9]*)$")}this._write(c?
"\n":"",b)},blank:function(a,b){var d=a,c,f;void 0===a?d=[]:"string"===typeof a?d=[{predicate:a,object:b}]:"length"in a||(d=[a]);switch(f=d.length){case 0:return"[]";case 1:if(c=d[0],"["!==c.object[0])return"[ "+this._encodePredicate(c.predicate)+" "+this._encodeObject(c.object)+" ]";default:for(var h="[",n=0;n<f;n++)c=d[n],c.predicate===a?h+=", "+this._encodeObject(c.object):(h+=(n?";\n  ":"\n  ")+this._encodePredicate(c.predicate)+" "+this._encodeObject(c.object),a=c.predicate);return h+"\n]"}},
list:function(a){for(var b=a&&a.length||0,d=Array(b),c=0;c<b;c++)d[c]=this._encodeObject(a[c]);return"("+d.join(" ")+")"},_prefixRegex:/$0^/,end:function(a){null!==this._subject&&(this._write(this._graph?"\n}\n":".\n"),this._subject=null);this._write=this._blockedWrite;var b=a&&function(d,c){b=null;a(d,c)};if(this._endStream)try{return this._outputStream.end(b)}catch(d){}b&&b()}};C.exports=m},{}],35:[function(x,C,B){(function(m){(function(h){function c(d){throw RangeError(E[d]);}function b(d,a){for(var b=
d.length;b--;)d[b]=a(d[b]);return d}function a(d,a){return b(d.split(D),a).join(".")}function f(d){for(var a=[],b=0,c=d.length,f,h;b<c;)f=d.charCodeAt(b++),55296<=f&&56319>=f&&b<c?(h=d.charCodeAt(b++),56320==(h&64512)?a.push(((f&1023)<<10)+(h&1023)+65536):(a.push(f),b--)):a.push(f);return a}function k(d){return b(d,function(d){var a="";65535<d&&(d-=65536,a+=M(d>>>10&1023|55296),d=56320|d&1023);return a+=M(d)}).join("")}function t(d,a){return d+22+75*(26>d)-((0!=a)<<5)}function d(d,a,b){var c=0;d=
b?G(d/700):d>>1;for(d+=G(d/a);455<d;c+=36)d=G(d/35);return G(c+36*d/(d+38))}function l(a){var b=[],f=a.length,h,l=0,t=128,n=72,u,y,m,v,z;u=a.lastIndexOf("-");0>u&&(u=0);for(y=0;y<u;++y)128<=a.charCodeAt(y)&&c("not-basic"),b.push(a.charCodeAt(y));for(u=0<u?u+1:0;u<f;){y=l;h=1;for(m=36;;m+=36){u>=f&&c("invalid-input");v=a.charCodeAt(u++);v=10>v-48?v-22:26>v-65?v-65:26>v-97?v-97:36;(36<=v||v>G((2147483647-l)/h))&&c("overflow");l+=v*h;z=m<=n?1:m>=n+26?26:m-n;if(v<z)break;v=36-z;h>G(2147483647/v)&&c("overflow");
h*=v}h=b.length+1;n=d(l-y,h,0==y);G(l/h)>2147483647-t&&c("overflow");t+=G(l/h);l%=h;b.splice(l++,0,t)}return k(b)}function u(a){var b,h,k,l,n,u,y,m,v,z=[],D,A,E;a=f(a);D=a.length;b=128;h=0;n=72;for(u=0;u<D;++u)v=a[u],128>v&&z.push(M(v));for((k=l=z.length)&&z.push("-");k<D;){y=2147483647;for(u=0;u<D;++u)v=a[u],v>=b&&v<y&&(y=v);A=k+1;y-b>G((2147483647-h)/A)&&c("overflow");h+=(y-b)*A;b=y;for(u=0;u<D;++u)if(v=a[u],v<b&&2147483647<++h&&c("overflow"),v==b){m=h;for(y=36;;y+=36){v=y<=n?1:y>=n+26?26:y-n;if(m<
v)break;E=m-v;m=36-v;z.push(M(t(v+E%m,0)));m=G(E/m)}z.push(M(t(m,0)));n=d(h,A,k==l);h=0;++k}++h;++b}return z.join("")}var v="object"==typeof B&&B,n="object"==typeof C&&C&&C.exports==v&&C,z="object"==typeof m&&m;if(z.global===z||z.window===z)h=z;var A=/^xn--/,y=/[^ -~]/,D=/\x2E|\u3002|\uFF0E|\uFF61/g,E={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},G=Math.floor,M=String.fromCharCode,x,z={version:"1.2.4",
ucs2:{decode:f,encode:k},decode:l,encode:u,toASCII:function(d){return a(d,function(d){return y.test(d)?"xn--"+u(d):d})},toUnicode:function(d){return a(d,function(d){return A.test(d)?l(d.slice(4).toLowerCase()):d})}};if(v&&!v.nodeType)if(n)n.exports=z;else for(x in z)z.hasOwnProperty(x)&&(v[x]=z[x]);else h.punycode=z})(this)}).call(this,"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],36:[function(x,C,B){function m(){this.href=this.path=this.pathname=this.query=this.search=
this.hash=this.hostname=this.port=this.host=this.auth=this.slashes=this.protocol=null}function h(d,a,b){if(d&&c(d)&&d instanceof m)return d;var f=new m;f.parse(d,a,b);return f}function c(d){return"object"===typeof d&&null!==d}var b=x("punycode");B.parse=h;B.resolve=function(d,a){return h(d,!1,!0).resolve(a)};B.resolveObject=function(d,a){return d?h(d,!1,!0).resolveObject(a):a};B.format=function(d){"string"===typeof d&&(d=h(d));return d instanceof m?d.format():m.prototype.format.call(d)};B.Url=m;var a=
/^([a-z0-9.+-]+:)/i,f=/:[0-9]*$/;C="{}|\\^`".split("").concat('<>"` \r\n\t'.split(""));var k=["'"].concat(C),t=["%","/","?",";","#"].concat(k),d=["/","?","#"],l=/^[a-z0-9A-Z_-]{0,63}$/,u=/^([a-z0-9A-Z_-]{0,63})(.*)$/,v={javascript:!0,"javascript:":!0},n={javascript:!0,"javascript:":!0},z={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},A=x("querystring");m.prototype.parse=function(c,f,h){if("string"!==typeof c)throw new TypeError("Parameter 'url' must be a string, not "+
typeof c);c=c.trim();var m=a.exec(c);if(m){var m=m[0],M=m.toLowerCase();this.protocol=M;c=c.substr(m.length)}if(h||m||c.match(/^\/\/[^@\/]+@[^@\/]+/)){var x="//"===c.substr(0,2);!x||m&&n[m]||(c=c.substr(2),this.slashes=!0)}if(!n[m]&&(x||m&&!z[m])){x=-1;for(h=0;h<d.length;h++)m=c.indexOf(d[h]),-1!==m&&(-1===x||m<x)&&(x=m);x=-1===x?c.lastIndexOf("@"):c.lastIndexOf("@",x);-1!==x&&(h=c.slice(0,x),c=c.slice(x+1),this.auth=decodeURIComponent(h));x=-1;for(h=0;h<t.length;h++)m=c.indexOf(t[h]),-1!==m&&(-1===
x||m<x)&&(x=m);-1===x&&(x=c.length);this.host=c.slice(0,x);c=c.slice(x);this.parseHost();this.hostname=this.hostname||"";x="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!x){var O=this.hostname.split(/\./);h=0;for(m=O.length;h<m;h++){var K=O[h];if(K&&!K.match(l)){for(var B="",N=0,F=K.length;N<F;N++)B=127<K.charCodeAt(N)?B+"x":B+K[N];if(!B.match(l)){m=O.slice(0,h);h=O.slice(h+1);if(K=K.match(u))m.push(K[1]),h.unshift(K[2]);h.length&&(c="/"+h.join(".")+c);this.hostname=m.join(".");
break}}}}this.hostname=255<this.hostname.length?"":this.hostname.toLowerCase();if(!x){K=this.hostname.split(".");O=[];for(h=0;h<K.length;++h)m=K[h],O.push(m.match(/[^A-Za-z0-9_-]/)?"xn--"+b.encode(m):m);this.hostname=O.join(".")}h=this.port?":"+this.port:"";this.host=(this.hostname||"")+h;this.href+=this.host;x&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==c[0]&&(c="/"+c))}if(!v[M])for(h=0,m=k.length;h<m;h++)x=k[h],K=encodeURIComponent(x),K===x&&(K=escape(x)),c=c.split(x).join(K);
h=c.indexOf("#");-1!==h&&(this.hash=c.substr(h),c=c.slice(0,h));h=c.indexOf("?");-1!==h?(this.search=c.substr(h),this.query=c.substr(h+1),f&&(this.query=A.parse(this.query)),c=c.slice(0,h)):f&&(this.search="",this.query={});c&&(this.pathname=c);z[M]&&this.hostname&&!this.pathname&&(this.pathname="/");if(this.pathname||this.search)h=this.pathname||"",m=this.search||"",this.path=h+m;this.href=this.format();return this};m.prototype.format=function(){var d=this.auth||"";d&&(d=encodeURIComponent(d),d=
d.replace(/%3A/i,":"),d+="@");var a=this.protocol||"",b=this.pathname||"",f=this.hash||"",h=!1,k="";this.host?h=d+this.host:this.hostname&&(h=d+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(h+=":"+this.port));this.query&&c(this.query)&&Object.keys(this.query).length&&(k=A.stringify(this.query));d=this.search||k&&"?"+k||"";a&&":"!==a.substr(-1)&&(a+=":");this.slashes||(!a||z[a])&&!1!==h?(h="//"+(h||""),b&&"/"!==b.charAt(0)&&(b="/"+b)):h||(h="");f&&"#"!==f.charAt(0)&&
(f="#"+f);d&&"?"!==d.charAt(0)&&(d="?"+d);b=b.replace(/[?#]/g,function(d){return encodeURIComponent(d)});d=d.replace("#","%23");return a+h+b+d+f};m.prototype.resolve=function(d){return this.resolveObject(h(d,!1,!0)).format()};m.prototype.resolveObject=function(d){if("string"===typeof d){var a=new m;a.parse(d,!1,!0);d=a}var b=new m;Object.keys(this).forEach(function(d){b[d]=this[d]},this);b.hash=d.hash;if(""===d.href)return b.href=b.format(),b;if(d.slashes&&!d.protocol)return Object.keys(d).forEach(function(a){"protocol"!==
a&&(b[a]=d[a])}),z[b.protocol]&&b.hostname&&!b.pathname&&(b.path=b.pathname="/"),b.href=b.format(),b;if(d.protocol&&d.protocol!==b.protocol){if(!z[d.protocol])return Object.keys(d).forEach(function(a){b[a]=d[a]}),b.href=b.format(),b;b.protocol=d.protocol;if(d.host||n[d.protocol])b.pathname=d.pathname;else{for(var c=(d.pathname||"").split("/");c.length&&!(d.host=c.shift()););d.host||(d.host="");d.hostname||(d.hostname="");""!==c[0]&&c.unshift("");2>c.length&&c.unshift("");b.pathname=c.join("/")}b.search=
d.search;b.query=d.query;b.host=d.host||"";b.auth=d.auth;b.hostname=d.hostname||d.host;b.port=d.port;if(b.pathname||b.search)b.path=(b.pathname||"")+(b.search||"");b.slashes=b.slashes||d.slashes;b.href=b.format();return b}var a=b.pathname&&"/"===b.pathname.charAt(0),f=d.host||d.pathname&&"/"===d.pathname.charAt(0),h=a=f||a||b.host&&d.pathname,k=b.pathname&&b.pathname.split("/")||[],c=d.pathname&&d.pathname.split("/")||[],l=b.protocol&&!z[b.protocol];l&&(b.hostname="",b.port=null,b.host&&(""===k[0]?
k[0]=b.host:k.unshift(b.host)),b.host="",d.protocol&&(d.hostname=null,d.port=null,d.host&&(""===c[0]?c[0]=d.host:c.unshift(d.host)),d.host=null),a=a&&(""===c[0]||""===k[0]));if(f)b.host=d.host||""===d.host?d.host:b.host,b.hostname=d.hostname||""===d.hostname?d.hostname:b.hostname,b.search=d.search,b.query=d.query,k=c;else if(c.length)k||(k=[]),k.pop(),k=k.concat(c),b.search=d.search,b.query=d.query;else if(null!=d.search){l&&(b.hostname=b.host=k.shift(),l=b.host&&0<b.host.indexOf("@")?b.host.split("@"):
!1)&&(b.auth=l.shift(),b.host=b.hostname=l.shift());b.search=d.search;b.query=d.query;if(null!==b.pathname||null!==b.search)b.path=(b.pathname?b.pathname:"")+(b.search?b.search:"");b.href=b.format();return b}if(!k.length)return b.pathname=null,b.path=b.search?"/"+b.search:null,b.href=b.format(),b;for(var f=k.slice(-1)[0],c=(b.host||d.host)&&("."===f||".."===f)||""===f,t=0,u=k.length;0<=u;u--)f=k[u],"."==f?k.splice(u,1):".."===f?(k.splice(u,1),t++):t&&(k.splice(u,1),t--);if(!a&&!h)for(;t--;t)k.unshift("..");
!a||""===k[0]||k[0]&&"/"===k[0].charAt(0)||k.unshift("");c&&"/"!==k.join("/").substr(-1)&&k.push("");h=""===k[0]||k[0]&&"/"===k[0].charAt(0);l&&(b.hostname=b.host=h?"":k.length?k.shift():"",l=b.host&&0<b.host.indexOf("@")?b.host.split("@"):!1)&&(b.auth=l.shift(),b.host=b.hostname=l.shift());(a=a||b.host&&k.length)&&!h&&k.unshift("");k.length?b.pathname=k.join("/"):(b.pathname=null,b.path=null);if(null!==b.pathname||null!==b.search)b.path=(b.pathname?b.pathname:"")+(b.search?b.search:"");b.auth=d.auth||
b.auth;b.slashes=b.slashes||d.slashes;b.href=b.format();return b};m.prototype.parseHost=function(){var d=this.host,a=f.exec(d);a&&(a=a[0],":"!==a&&(this.port=a.substr(1)),d=d.substr(0,d.length-a.length));d&&(this.hostname=d)}},{punycode:35,querystring:13}],37:[function(x,C,B){C.exports=function(m){return m&&"object"===typeof m&&"function"===typeof m.copy&&"function"===typeof m.fill&&"function"===typeof m.readUInt8}},{}],38:[function(x,C,B){(function(m,h){function c(d,c){var f={seen:[],stylize:a};
3<=arguments.length&&(f.depth=arguments[2]);4<=arguments.length&&(f.colors=arguments[3]);z(c)?f.showHidden=c:c&&B._extend(f,c);D(f.showHidden)&&(f.showHidden=!1);D(f.depth)&&(f.depth=2);D(f.colors)&&(f.colors=!1);D(f.customInspect)&&(f.customInspect=!0);f.colors&&(f.stylize=b);return k(f,d,f.depth)}function b(d,a){var b=c.styles[a];return b?"\u001b["+c.colors[b][0]+"m"+d+"\u001b["+c.colors[b][1]+"m":d}function a(d,a){return d}function f(d){var a={};d.forEach(function(d,b){a[d]=!0});return a}function k(a,
b,c){if(a.customInspect&&b&&O(b.inspect)&&b.inspect!==B.inspect&&(!b.constructor||b.constructor.prototype!==b)){var h=b.inspect(c,a);y(h)||(h=k(a,h,c));return h}if(h=t(a,b))return h;var m=Object.keys(b),z=f(m);a.showHidden&&(m=Object.getOwnPropertyNames(b));if(L(b)&&(0<=m.indexOf("message")||0<=m.indexOf("description")))return d(b);if(0===m.length){if(O(b))return a.stylize("[Function"+(b.name?": "+b.name:"")+"]","special");if(E(b))return a.stylize(RegExp.prototype.toString.call(b),"regexp");if(M(b))return a.stylize(Date.prototype.toString.call(b),
"date");if(L(b))return d(b)}var h="",A=!1,D=["{","}"];n(b)&&(A=!0,D=["[","]"]);O(b)&&(h=" [Function"+(b.name?": "+b.name:"")+"]");E(b)&&(h=" "+RegExp.prototype.toString.call(b));M(b)&&(h=" "+Date.prototype.toUTCString.call(b));L(b)&&(h=" "+d(b));if(0===m.length&&(!A||0==b.length))return D[0]+h+D[1];if(0>c)return E(b)?a.stylize(RegExp.prototype.toString.call(b),"regexp"):a.stylize("[Object]","special");a.seen.push(b);m=A?l(a,b,c,z,m):m.map(function(d){return u(a,b,c,z,d,A)});a.seen.pop();return v(m,
h,D)}function t(d,a){if(D(a))return d.stylize("undefined","undefined");if(y(a)){var b="'"+JSON.stringify(a).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return d.stylize(b,"string")}if(A(a))return d.stylize(""+a,"number");if(z(a))return d.stylize(""+a,"boolean");if(null===a)return d.stylize("null","null")}function d(d){return"["+Error.prototype.toString.call(d)+"]"}function l(d,a,b,c,f){for(var h=[],k=0,l=a.length;k<l;++k)Object.prototype.hasOwnProperty.call(a,String(k))?h.push(u(d,
a,b,c,String(k),!0)):h.push("");f.forEach(function(f){f.match(/^\d+$/)||h.push(u(d,a,b,c,f,!0))});return h}function u(d,a,b,c,f,h){var l,t;a=Object.getOwnPropertyDescriptor(a,f)||{value:a[f]};a.get?t=a.set?d.stylize("[Getter/Setter]","special"):d.stylize("[Getter]","special"):a.set&&(t=d.stylize("[Setter]","special"));Object.prototype.hasOwnProperty.call(c,f)||(l="["+f+"]");t||(0>d.seen.indexOf(a.value)?(t=null===b?k(d,a.value,null):k(d,a.value,b-1),-1<t.indexOf("\n")&&(t=h?t.split("\n").map(function(d){return"  "+
d}).join("\n").substr(2):"\n"+t.split("\n").map(function(d){return"   "+d}).join("\n"))):t=d.stylize("[Circular]","special"));if(D(l)){if(h&&f.match(/^\d+$/))return t;l=JSON.stringify(""+f);l.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(l=l.substr(1,l.length-2),l=d.stylize(l,"name")):(l=l.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),l=d.stylize(l,"string"))}return l+": "+t}function v(d,a,b){var c=0;return 60<d.reduce(function(d,a){c++;0<=a.indexOf("\n")&&c++;return d+a.replace(/\u001b\[\d\d?m/g,
"").length+1},0)?b[0]+(""===a?"":a+"\n ")+" "+d.join(",\n  ")+" "+b[1]:b[0]+a+" "+d.join(", ")+" "+b[1]}function n(d){return Array.isArray(d)}function z(d){return"boolean"===typeof d}function A(d){return"number"===typeof d}function y(d){return"string"===typeof d}function D(d){return void 0===d}function E(d){return G(d)&&"[object RegExp]"===Object.prototype.toString.call(d)}function G(d){return"object"===typeof d&&null!==d}function M(d){return G(d)&&"[object Date]"===Object.prototype.toString.call(d)}
function L(d){return G(d)&&("[object Error]"===Object.prototype.toString.call(d)||d instanceof Error)}function O(d){return"function"===typeof d}function K(d){return 10>d?"0"+d.toString(10):d.toString(10)}function C(){var d=new Date,a=[K(d.getHours()),K(d.getMinutes()),K(d.getSeconds())].join(":");return[d.getDate(),xa[d.getMonth()],a].join(" ")}var N=/%[sdj%]/g;B.format=function(d){if(!y(d)){for(var a=[],b=0;b<arguments.length;b++)a.push(c(arguments[b]));return a.join(" ")}for(var b=1,f=arguments,
h=f.length,a=String(d).replace(N,function(d){if("%%"===d)return"%";if(b>=h)return d;switch(d){case "%s":return String(f[b++]);case "%d":return Number(f[b++]);case "%j":try{return JSON.stringify(f[b++])}catch(a){return"[Circular]"}default:return d}}),k=f[b];b<h;k=f[++b])a=null!==k&&G(k)?a+(" "+c(k)):a+(" "+k);return a};B.deprecate=function(d,a){if(D(h.process))return function(){return B.deprecate(d,a).apply(this,arguments)};if(!0===m.noDeprecation)return d;var b=!1;return function(){if(!b){if(m.throwDeprecation)throw Error(a);
m.traceDeprecation?console.trace(a):console.error(a);b=!0}return d.apply(this,arguments)}};var F={},sa;B.debuglog=function(d){D(sa)&&(sa=m.env.NODE_DEBUG||"");d=d.toUpperCase();if(!F[d])if((new RegExp("\\b"+d+"\\b","i")).test(sa)){var a=m.pid;F[d]=function(){var b=B.format.apply(B,arguments);console.error("%s %d: %s",d,a,b)}}else F[d]=function(){};return F[d]};B.inspect=c;c.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,
39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};c.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"};B.isArray=n;B.isBoolean=z;B.isNull=function(d){return null===d};B.isNullOrUndefined=function(d){return null==d};B.isNumber=A;B.isString=y;B.isSymbol=function(d){return"symbol"===typeof d};B.isUndefined=D;B.isRegExp=E;B.isObject=G;B.isDate=M;B.isError=L;B.isFunction=O;B.isPrimitive=function(d){return null===
d||"boolean"===typeof d||"number"===typeof d||"string"===typeof d||"symbol"===typeof d||"undefined"===typeof d};B.isBuffer=x("./support/isBuffer");var xa="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");B.log=function(){console.log("%s - %s",C(),B.format.apply(B,arguments))};B.inherits=x("inherits");B._extend=function(d,a){if(!a||!G(a))return d;for(var b=Object.keys(a),c=b.length;c--;)d[b[c]]=a[b[c]];return d}}).call(this,x("7YKIPe"),"undefined"!==typeof self?self:"undefined"!==typeof window?
window:{})},{"./support/isBuffer":37,"7YKIPe":10,inherits:24}],39:[function(x,C,B){function m(a,b){this.name="NonSupportedSparqlFeatureError";this.feature=a;this.message=b||"SPARQL feature "+a+" non supported"}function h(a){this.name=ParserError;this.message=a||"Error parsing SPARQL query"}var c=x("./parser"),b=x("./utils");m.prototype=Error();m.constructor=m;h.prototype=Error();h.constructor=h;AbstractQueryTree=function(){};AbstractQueryTree.prototype.parseQueryString=function(a){return c.parse(a)};
AbstractQueryTree.prototype.parseExecutableUnit=function(a){if("select"===a.kind||"ask"===a.kind||"modify"===a.kind||"construct"===a.kind)return this.parseSelect(a);if("insertdata"===a.kind||"deletedata"===a.kind)return this.parseInsertData(a);if("load"===a.kind||"clear"===a.kind||"drop"===a.kind||"create"===a.kind)return a;throw Error("unknown executable unit: "+a.kind);};AbstractQueryTree.prototype.parseSelect=function(a){if(null==a)return console.log("error parsing query"),null;a.pattern=this.build(a.pattern,
{freshCounter:0});return a};AbstractQueryTree.prototype.parseInsertData=function(a){return null==a?(console.log("error parsing query"),null):a};AbstractQueryTree.prototype.build=function(a,b){if("groupgraphpattern"===a.token)return this._buildGroupGraphPattern(a,b);if("basicgraphpattern"===a.token){var c={kind:"BGP",value:a.triplesContext};return c=AbstractQueryTree.translatePathExpressionsInBGP(c,b)}if("graphunionpattern"===a.token){var c=this.build(a.value[0],b),t=this.build(a.value[1],b);return{kind:"UNION",
value:[c,t]}}if("graphgraphpattern"===a.token)return{kind:"GRAPH",value:this.build(a.value,b),graph:a.graph};if(null!=a.token)throw new m(a.token,"Non implemented SPARQL graph pattern: '"+a.token+"'");throw new h("Error parsing graph pattern: '"+JSON.stringify(a)+"'");};AbstractQueryTree.translatePathExpressionsInBGP=function(a,c){var h,t=[],d,l;for(l=0;l<a.value.length;l++)if(a.value[l].predicate&&"path"===a.value[l].predicate.token){h=a.value[l];d=a.value.slice(l+1);var u=AbstractQueryTree.translatePathExpression(h,
c);h=null;if("BGP"===u.kind)t=t.concat(u.value);else{if("ZERO_OR_MORE_PATH"===u.kind||"ONE_OR_MORE_PATH"===u.kind){l=0<t.length?{kind:"JOIN",lvalue:{kind:"BGP",value:t},rvalue:u}:u;if("ZERO_OR_MORE_PATH"===u.kind)if("var"===u.y.token&&0===u.y.value.indexOf("fresh:")&&"var"===u.x.token&&0===u.x.value.indexOf("fresh:"))for(var m=0;m<a.value.length;m++)a.value[m].object&&"var"===a.value[m].object.token&&a.value[m].object.value===u.x.value&&(h=b.clone(a.value[m],!0),h.object=u.y);else if("var"===u.y.token&&
0===u.y.value.indexOf("fresh:"))for(m=0;m<a.value.length;m++)a.value[m].subject&&"var"===a.value[m].subject.token&&a.value[m].subject.value===u.y.value&&(h=b.clone(a.value[m],!0),h.subject=u.x);return 0<d.length?(u=AbstractQueryTree.translatePathExpressionsInBGP({kind:"BGP",value:d},c),null!=h?(t=t.concat([h]).concat(d),{kind:"UNION",value:[{kind:"JOIN",lvalue:l,rvalue:u},{kind:"BGP",value:t}]}):{kind:"JOIN",lvalue:l,rvalue:u}):l}return u}}else t.push(a.value[l]);a.value=t;return a};AbstractQueryTree.translatePathExpression=
function(a,c){if("element"===a.predicate.kind){if("+"===a.predicate.modifier){a.predicate.modifier=null;var h=AbstractQueryTree.translatePathExpression(a,c);return{kind:"ONE_OR_MORE_PATH",path:h,x:a.subject,y:a.object}}if("*"===a.predicate.modifier)return a.predicate.modifier=null,h=AbstractQueryTree.translatePathExpression(a,c),{kind:"ZERO_OR_MORE_PATH",path:h,x:a.subject,y:a.object};a.predicate=a.predicate.value;return{kind:"BGP",value:[a]}}if("sequence"===a.predicate.kind){for(var h=a.subject,
t=a.object,d=a.graph,l,u,v=[],n=0;n<a.predicate.value.length;n++)n!=a.predicate.value.length-1?(l={token:"var",value:"fresh:"+c.freshCounter},c.freshCounter++):l=t,u={subject:h,predicate:a.predicate.value[n],object:l},null!=d&&(u.graph=b.clone(d,!0)),v.push(u),n!=a.predicate.value.length-1&&(h=b.clone(l,!0));return AbstractQueryTree.translatePathExpressionsInBGP({kind:"BGP",value:v},c)}throw new m("Non supported path expression "+a.predicate.kind);};AbstractQueryTree.prototype._buildGroupGraphPattern=
function(a,b){for(var c=a.filters||[],h=a.binds||[],d={kind:"EMPTY_PATTERN"},l=0;l<a.patterns.length;l++){var u=a.patterns[l];"optionalgraphpattern"===u.token?(u=this.build(u.value,b),d="FILTER"===u.kind?{kind:"LEFT_JOIN",lvalue:d,rvalue:u.value,filter:u.filter}:{kind:"LEFT_JOIN",lvalue:d,rvalue:u,filter:!0}):(u=this.build(u,b),d="EMPTY_PATTERN"==d.kind?u:{kind:"JOIN",lvalue:d,rvalue:u})}d.binds=h;if(0!=c.length){if("EMPTY_PATTERN"===d.kind||"LEFT_JOIN"===d.kind&&!0===d.filter||"LEFT_JOIN"===d.kind||
"JOIN"===d.kind||"UNION"===d.kind||"GRAPH"===d.kind||"BGP"===d.kind)return{kind:"FILTER",filter:c,value:d};throw Error("Unknow kind of algebra expression: "+d.kind);}return d};AbstractQueryTree.prototype.collectBasicTriples=function(a,b){null==b&&(b=[]);if("select"===a.kind)b=this.collectBasicTriples(a.pattern,b);else if("BGP"===a.kind)b=b.concat(a.value);else if("ZERO_OR_MORE_PATH"===a.kind)b=this.collectBasicTriples(a.path);else if("UNION"===a.kind)b=this.collectBasicTriples(a.value[0],b),b=this.collectBasicTriples(a.value[1],
b);else if("GRAPH"===a.kind)b=this.collectBasicTriples(a.value,b);else if("LEFT_JOIN"===a.kind||"JOIN"===a.kind)b=this.collectBasicTriples(a.lvalue,b),b=this.collectBasicTriples(a.rvalue,b);else if("FILTER"===a.kind)b=this.collectBasicTriples(a.value,b);else if("construct"===a.kind)b=this.collectBasicTriples(a.pattern,b);else if("EMPTY_PATTERN"!==a.kind)throw"Unknown pattern: "+a.kind;return b};AbstractQueryTree.prototype.bind=function(a,b){null!=a.graph&&a.graph.token&&"var"===a.graph.token&&null!=
b[a.graph.value]&&(a.graph=b[a.graph.value]);if(null!=a.filter){for(var c=[],h=0;h<a.filter.length;h++)a.filter[h].value=this._bindFilter(a.filter[h].value,b),c.push(a.filter[h]);a.filter=c}if("select"===a.kind)a.pattern=this.bind(a.pattern,b);else if("BGP"===a.kind)a.value=this._bindTripleContext(a.value,b);else if("ZERO_OR_MORE_PATH"===a.kind)a.path=this._bindTripleContext(a.path,b),a.x&&"var"===a.x.token&&null!=b[a.x.value]&&(a.x=b[a.x.value]),a.y&&"var"===a.y.token&&null!=b[a.y.value]&&(a.y=b[a.y.value]);
else if("UNION"===a.kind)a.value[0]=this.bind(a.value[0],b),a.value[1]=this.bind(a.value[1],b);else if("GRAPH"===a.kind)a.value=this.bind(a.value,b);else if("LEFT_JOIN"===a.kind||"JOIN"===a.kind)a.lvalue=this.bind(a.lvalue,b),a.rvalue=this.bind(a.rvalue,b);else if("FILTER"===a.kind){var d=this;a.value=this.bind(a.value,b);a.filter=a.filter.map(function(a){return{token:"filter",value:d._bindFilter(a.value,b)}})}else if("EMPTY_PATTERN"!==a.kind)throw"Unknown pattern: "+a.kind;return a};AbstractQueryTree.prototype._bindTripleContext=
function(a,b){for(var c=0;c<a.length;c++){delete a[c].graph;delete a[c].variables;for(var h in a[c]){var d=a[c][h];"var"===d.token&&null!=b[d.value]&&(a[c][h]=b[d.value])}}return a};AbstractQueryTree.prototype._bindFilter=function(a,b){if(null!=a.expressionType){var c=a.expressionType;if("relationalexpression"==c)a.op1=this._bindFilter(a.op1,b),a.op2=this._bindFilter(a.op2,b);else if("conditionalor"==c||"conditionaland"==c)for(c=0;c<a.operands.length;c++)a.operands[c]=this._bindFilter(a.operands[c],
b);else if("additiveexpression"==c)for(a.summand=this._bindFilter(a.summand,b),c=0;c<a.summands.length;c++)a.summands[c].expression=this._bindFilter(a.summands[c].expression,b);else if("builtincall"==c)for(c=0;c<a.args.length;c++)a.args[c]=this._bindFilter(a.args[c],b);else if("multiplicativeexpression"==c)for(a.factor=this._bindFilter(a.factor,b),c=0;c<a.factors.length;c++)a.factors[c].expression=this._bindFilter(a.factors[c].expression,b);else if("unaryexpression"==c)a.expression=this._bindFilter(a.expression,
b);else if("irireforfunction"==c)for(c=0;c<a.factors.args;c++)a.args[c]=this._bindFilter(a.args[c],b);else"atomic"==c&&"var"==a.primaryexpression&&null!=b[a.value.value]&&(c=b[a.value.value],a.primaryexpression="uri"===c.token?"iri":"literal",a.value=c)}return a};AbstractQueryTree.prototype.replace=function(a,c,h,t){null!=a.graph&&a.graph.token&&a.graph.token===c.token&&a.graph.value==c.value&&(a.graph=b.clone(h,!0));if(null!=a.filter){for(var d=[],l=0;l<a.filter.length;l++)a.filter[l].value=this._replaceFilter(a.filter[l].value,
c,h,t),d.push(a.filter[l]);a.filter=d}if("select"===a.kind)a.pattern=this.replace(a.pattern,c,h,t);else if("BGP"===a.kind)a.value=this._replaceTripleContext(a.value,c,h,t);else if("ZERO_OR_MORE_PATH"===a.kind)a.path=this._replaceTripleContext(a.path,c,h,t),a.x&&a.x.token===c.token&&a.value===c.value&&(a.x=b.clone(h,!0)),a.y&&a.y.token===c.token&&a.value===c.value&&(a.y=b.clone(h,!0));else if("UNION"===a.kind)a.value[0]=this.replace(a.value[0],c,h,t),a.value[1]=this.replace(a.value[1],c,h,t);else if("GRAPH"===
a.kind)a.value=this.replace(a.value,c,h);else if("LEFT_JOIN"===a.kind||"JOIN"===a.kind)a.lvalue=this.replace(a.lvalue,c,h,t),a.rvalue=this.replace(a.rvalue,c,h,t);else if("FILTER"===a.kind)a.value=this._replaceFilter(a.value,c,h,t);else if("EMPTY_PATTERN"!==a.kind)throw"Unknown pattern: "+a.kind;return a};AbstractQueryTree.prototype._replaceTripleContext=function(a,c,h,t){for(var d=0;d<a.length;d++)for(var l in a[d]){var u=a[d][l];"var"===u.token&&"var"===c.token&&u.value===c.value?a[d][l]=h:"blank"===
u.token&&"blank"===c.token&&u.value===c.value?a[d][l]=h:"literal"!==u.token&&"uri"!==u.token||"literal"!==c.token&&"uri"!==c.token||u.token!==c.token||b.lexicalFormTerm(u,t)[u.token]!==b.lexicalFormTerm(c,t)[u.token]||(a[d][l]=h)}return a};AbstractQueryTree.prototype._replaceFilter=function(a,b,c,h){if(null!=a.expressionType){var d=a.expressionType;if("relationalexpression"==d)a.op1=this._replaceFilter(a.op1,b,c,h),a.op2=this._replaceFilter(a.op2,b,c,h);else if("conditionalor"==d||"conditionaland"==
d)for(d=0;d<a.operands.length;d++)a.operands[d]=this._replaceFilter(a.operands[d],b,c,h);else if("additiveexpression"==d)for(a.summand=this._replaceFilter(a.summand,b,c,h),d=0;d<a.summands.length;d++)a.summands[d].expression=this._replaceFilter(a.summands[d].expression,b,c,h);else if("builtincall"==d)for(d=0;d<a.args.length;d++)a.args[d]=this._replaceFilter(a.args[d],b,c,h);else if("multiplicativeexpression"==d)for(a.factor=this._replaceFilter(a.factor,b,c,h),d=0;d<a.factors.length;d++)a.factors[d].expression=
this._replaceFilter(a.factors[d].expression,b,c,h);else if("unaryexpression"==d)a.expression=this._replaceFilter(a.expression,b,c,h);else if("irireforfunction"==d)for(d=0;d<a.factors.args;d++)a.args[d]=this._replaceFilter(a.args[d],b,c,h);else"atomic"==d&&(h=null,a.primaryexpression==b.token&&a.value==b.value?h=c.value:"iri"==a.primaryexpression&&"uri"==b.token&&a.value==b.value&&(h=c.value),null!=h&&(a.primaryexpression="uri"===c.token?"iri":c.token,a.value=h))}return a};AbstractQueryTree.prototype.treeWithUnion=
function(a){if(null==a||null==a.kind)return!1;if("select"===a.kind)return this.treeWithUnion(a.pattern);if("BGP"===a.kind)return this.treeWithUnion(a.value);if("ZERO_OR_MORE_PATH"===a.kind)return!1;if("UNION"===a.kind)if(null!=a.value[0].value&&null!=a.value[0].value.variables&&null!=a.value[1].value&&null!=a.value[1].value.variables){if(a.value[0].variables.join("/")===a.values[1].variables.join("/"))return this.treeWithUnion(a.value[0])?!0:this.treeWithUnion(a.value[1])}else return!0;else{if("GRAPH"===
a.kind||"LEFT_JOIN"!==a.kind&&"JOIN"!==a.kind)return!1;if(this.treeWithUnion(a.lvalue))return!0;this.treeWithUnion(a.rvalue)}};C.exports={AbstractQueryTree:AbstractQueryTree,NonSupportedSparqlFeatureError:m,SparqlParserError:h}},{"./parser":46,"./utils":57}],40:[function(x,C,B){var m=x("./utils"),h=m.nextTick,c=function(a,b){if(0!=arguments.length){this.order=a;this.root=this._allocateNode();this.root.isLeaf=!0;this.root.level=0;var c=this;this._diskWrite(this.root,function(a){c.root=a;c._updateRootNode(c.root,
function(d){c.comparator=function(d,a){return d<a?-1:d>a?1:0};c.merger=null;null!=b&&b(c)})})}};c.prototype._allocateNode=function(){return new b};c.prototype._diskWrite=function(a,b){h(function(){b(a)})};c.prototype._diskRead=function(a,b){h(function(){b(a)})};c.prototype._diskDelete=function(a,b){h(function(){b()})};c.prototype._updateRootNode=function(a,b){b(a)};c.prototype.search=function(a,b,c){this.__search(this,a,this.root,b,c)};c.prototype.__search=function(a,b,c,h,d){for(var l=0;l<c.numberActives&&
1===a.comparator(b,c.keys[l].key);)l++;l<c.numberActives&&0===a.comparator(c.keys[l].key,b)?null!=d&&1==d?h(!0):h(c.keys[l].data):!0===c.isLeaf?h(null):a._diskRead(c.children[l],function(c){a.__search(a,b,c,h,d)})};c.prototype.walk=function(a,b){this.__walk(this,this.root,a,b)};c.prototype.__walk=function(a,b,c,h){var d=b.numberActives,l=0;if(b.isLeaf){for(l=0;l<b.numberActives;l++)c(b.keys[l]);return h()}m.whilst(function(){return l<d},function(d){a._diskRead(b.children[l],function(h){a.__walk(a,
h,c,function(){a._diskRead(b.keys[l],function(a){c(a);l++;d()})})})},function(){a._diskRead(b.children[d],function(d){a.__walk(a,d,c,function(){h()})})})};c.prototype.walkNodes=function(a){this.__walkNodes(this,root,a,function(){})};c.prototype.__walkNodes=function(a,b,c,h){if(b.isLeaf)return c(b),h();c(b);var d=b.numberActives,l=0;m.whilst(function(){return l<d},function(d){a._diskRead(b.children[l],function(b){a.__walkNodes(a,b,c,function(){l++;d()})})},function(){a._diskRead(b.children[d],function(d){a.__walkNodes(a,
d,c,function(){})})})};c.prototype._splitChild=function(a,b,c,h){var d=this._allocateNode();d.isLeaf=c.isLeaf;d.level=c.level;d.numberActives=this.order-1;var l=c.keys[this.order-1];c.keys[this.order-1]=null;for(var u=0;u<this.order-1;u++)d.keys[u]=c.keys[u+this.order],c.keys[u+this.order]=null,c.isLeaf||(d.children[u]=c.children[u+this.order],c.children[u+this.order]=null);c.isLeaf||(d.children[u]=c.children[u+this.order],c.children[u+this.order]=null);c.numberActives=this.order-1;for(u=a.numberActives+
1;u>b+1;u--)a.children[u]=a.children[u-1];a.children[b+1]=d;for(u=a.numberActives;u>b;u--)a.keys[u]=a.keys[u-1];a.keys[b]=l;a.numberActives++;var m=this;this._diskWrite(d,function(d){m._diskWrite(a,function(a){a.children[b+1]=d;m._diskWrite(c,function(d){return h(a)})})})};c.prototype.insert=function(a,b,c){if(this.root.numberActives===2*this.order-1){var h=this._allocateNode();h.isLeaf=!1;h.level=this.root.level+1;h.numberActives=0;h.children[0]=this.root;var d=this;this._splitChild(h,0,this.root,
function(l){h=l;d.root=h;d._updateRootNode(h,function(h){d._insertNonFull(h,a,b,c)})})}else this._insertNonFull(this.root,a,b,c)};c.prototype._insertNonFull=function(a,b,c,h){this.__insertNonFull(this,a,a.numberActives-1,b,c,h)};c.prototype.__insertNonFull=function(a,b,c,h,d,l){if(b.isLeaf){for(;0<=c&&-1===a.comparator(h,b.keys[c].key);)b.keys[c+1]=b.keys[c],c--;0<=c&&0===a.comparator(h,b.keys[c].key)?b.keys[c]={key:h,data:d}:(b.keys[c+1]={key:h,data:d},b.numberActives++);a._diskWrite(b,function(d){return l(d)})}else{for(;0<=
c&&-1===a.comparator(h,b.keys[c].key);)c--;c++;a._diskRead(b.children[c],function(u){u.numberActives===2*a.order-1?a._splitChild(b,c,u,function(){1===a.comparator(h,b.keys[c].key)&&c++;a._diskRead(b.children[c],function(b){c=b.numberActives-1;a.__insertNonFull(a,b,c,h,d,l)})}):a._diskRead(b.children[c],function(b){c=b.numberActives-1;a.__insertNonFull(a,b,c,h,d,l)})})}};c.prototype.delete=function(a,b){c.prototype.__deleteSearchNode(this,a,this.root,b)};c.prototype.__deleteSearchNode=function(a,b,
c,h){var d=0;if(0===c.numberActives)return h(!1);for(;d<c.numberActives&&1===a.comparator(b,c.keys[d].key);)d++;var l=d;if(d<c.numberActives&&0===a.comparator(b,c.keys[d].key))return a.__deleteNodeFound(a,l,b,c,h);if(!0===c.isLeaf)return h(!1);a._diskRead(c.children[d],function(u){if(null===u)return h(!1);var m=!1,n=!1,z=null,A=null;l===c.numberActives?(n=!0,A=c.children[l-1],z=c.children[l-1]):0===l?(m=!0,z=c.children[1],A=c.children[1]):(A=c.children[l-1],z=c.children[l+1]);a._diskRead(A,function(l){a._diskRead(z,
function(z){!0===n&&(z=null);!0===m&&(l=null);u.numberActives===a.order-1&&null!=c?null!=z&&z.numberActives>a.order-1?a._moveKey(c,d,-1,function(d){a.__deleteSearchNode(a,b,u,h)}):null!=l&&l.numberActives>a.order-1?a._moveKey(c,d,1,function(d){a.__deleteSearchNode(a,b,u,h)}):null!=l&&l.numberActives===a.order-1?a._mergeSiblings(c,d,-1,function(d){a.__deleteSearchNode(a,b,d,h)}):null!=z&&z.numberActives===a.order-1&&a._mergeSiblings(c,d,1,function(d){a.__deleteSearchNode(a,b,d,h)}):a.__deleteSearchNode(a,
b,u,h)})})})};c.prototype.__deleteNodeFound=function(a,b,c,h,d){if(h.isLeaf&&h.numberActives>a.order-1||h.isLeaf&&h===a.root)return a._deleteKeyFromNode(h,b,function(){d(!0)}),!0;!1===h.isLeaf&&a._diskRead(h.children[b],function(l){l.numberActives>a.order-1?a._getMaxKeyPos(a,l,function(u){c=u.node.keys[u.index];h.keys[b]=c;a._diskWrite(h,function(b){b=l;c=c.key;a.__deleteSearchNode(a,c,b,d)})}):a._diskRead(h.children[b+1],function(u){u.numberActives>a.order-1?a._getMinKeyPos(a,u,function(l){c=l.node.keys[l.index];
h.keys[b]=c;a._diskWrite(h,function(b){b=u;c=c.key;a.__deleteSearchNode(a,c,b,d)})}):l.numberActives===a.order-1&&u.numberActives===a.order-1&&a._mergeNodes(l,h.keys[b],u,function(l){h.children[b]=l;b++;for(var n=b;n<h.numberActives;n++)h.children[n]=h.children[n+1],h.keys[n-1]=h.keys[n];h.children[n]=null;h.keys[n-1]=null;h.numberActives--;0===h.numberActives&&a.root===h&&(a.root=l);a._diskWrite(h,function(b){a.__deleteSearchNode(a,c,l,d)})})})});h.isLeaf&&h.numberActives>a.order-1&&a._deleteKeyFromNode(h,
b,function(b){a.__deleteSearchNode(a,c,b,d)})};c.prototype._moveKey=function(a,b,c,h){1===c&&b--;var d=this;d._diskRead(a.children[b],function(l){d._diskRead(a.children[b+1],function(u){if(-1==c){l.keys[l.numberActives]=a.keys[b];l.children[l.numberActives+1]=u.children[0];u.children[0]=null;l.numberActives++;a.keys[b]=u.keys[0];for(var m=1;m<u.numberActives;m++)u.keys[m-1]=u.keys[m],u.children[m-1]=u.children[m];u.children[u.numberActives-1]=u.children[u.numberActives];u.numberActives--}else{u.children[u.numberActives+
1]=u.children[u.numberActives];for(m=u.numberActives;0<m;m--)u.children[m]=u.children[m-1],u.keys[m]=u.keys[m-1];u.keys[0]=null;u.children[0]=null;u.children[0]=l.children[l.numberActives];u.keys[0]=a.keys[b];u.numberActives++;l.children[l.numberActives]=null;a.keys[b]=l.keys[l.numberActives-1];l.keys[l.numberActives-1]=null;l.numberActives--}d._diskWrite(l,function(b){d._diskWrite(u,function(b){d._diskWrite(a,function(d){return h(d)})})})})})};c.prototype._mergeSiblings=function(a,b,c,h){var d,l,
m;b===a.numberActives?(b--,c=a.children[a.numberActives-1],m=a.children[a.numberActives]):(c=a.children[b],m=a.children[b+1]);var v=this;v._diskRead(c,function(c){v._diskRead(m,function(k){var m=v._allocateNode();m.isLeaf=c.isLeaf;m.level=c.level;for(l=0;l<v.order-1;l++)m.keys[l]=c.keys[l],m.children[l]=c.children[l];m.keys[v.order-1]=a.keys[b];m.children[v.order-1]=c.children[v.order-1];for(l=0;l<v.order-1;l++)m.keys[l+v.order]=k.keys[l],m.children[l+v.order]=k.children[l];m.children[2*v.order-1]=
k.children[v.order-1];a.children[b]=m;for(l=b;l<a.numberActives;l++)a.keys[l]=a.keys[l+1],a.children[l+1]=a.children[l+2];m.numberActives=c.numberActives+k.numberActives+1;a.numberActives--;for(d=a.numberActives;d<2*v.order-1;d++)a.keys[d]=null;0===a.numberActives&&v.root===a&&(v.root=m,m.isLeaf=m.level?!1:!0);v._diskWrite(m,function(d){v._diskWrite(a,function(a){v._diskDelete(c,function(){v._diskDelete(k,function(){if(v.root===d)v._updateRootNode(v.root,function(){return h(d)});else return h(d)})})})})})})};
c.prototype._deleteKeyFromNode=function(a,b,c){var h=2*this.order-1;a.numberActives<h&&(h=a.numberActives);if(!1===a.isLeaf)return!1;for(;b<h-1;b++)a.keys[b]=a.keys[b+1];a.keys.pop();a.numberActives--;this._diskWrite(a,function(d){return c(d)})};c.prototype._mergeNodes=function(a,b,c,h){var d,l;d=this._allocateNode();d.isLeaf=!0;for(l=0;l<a.numberActives;l++)d.keys[l]=a.keys[l],d.children[l]=a.children[l];d.children[a.numberActives]=a.children[a.numberActives];d.keys[a.numberActives]=b;for(l=0;l<
c.numberActives;l++)d.keys[l+a.numberActives+1]=c.keys[l],d.children[l+a.numberActives+1]=c.children[l];d.children[2*this.order-1]=c.children[c.numberActives];d.numberActives=a.numberActives+c.numberActives+1;d.isLeaf=a.isLeaf;d.level=a.level;var m=this;this._diskWrite(d,function(d){m._diskDelete(a,function(){m._diskDelete(c,function(){return h(d)})})})};c.prototype.audit=function(a){var b=[],c=[],h=this,d=function(d){for(var l=0;l<c.length;l++)if(0===h.comparator(c[l],d)){var n=" !!! duplicated key "+
d;!0===a&&console.log(n);b.push(n)}},l=null,h=this;this.walkNodes(function(m){!0===a&&(console.log("--- Node at "+m.level+" level"),console.log(" - leaf? "+m.isLeaf),console.log(" - num actives? "+m.numberActives),console.log(" - keys: "));for(var v=m.numberActives;v<m.keys.length;v++)null!=m.keys[v]&&!0===a&&(console.log(" * warning : redundant key data"),b.push(" * warning : redundant key data"));for(v=m.numberActives+1;v<m.children.length;v++)null!=m.children[v]&&!0===a&&(console.log(" * warning : redundant children data"),
b.push(" * warning : redundant key data"));if(!1===m.isLeaf)for(v=0;v<m.numberActives;v++){var n=this._diskRead(m.children[v]).keys[this._diskRead(m.children[v]).numberActives-1].key,z=this._diskRead(m.children[v+1]).keys[0].key;!0===a&&console.log("   "+m.keys[v].key+"("+n+","+z+")");if(-1===h.comparator(m.keys[v].key,n)){var A=" !!! value max left "+n+" > key "+m.keys[v].key;!0===a&&console.log(A);b.push(A)}1===h.comparator(m.keys[v].key,z)&&(A=" !!! value min right "+z+" < key "+m.keys[v].key,
!0===a&&console.log(A),b.push(A));d(m.keys[v].key);c.push(m.keys[v].key)}else for(null===l?l=m.level:l!=m.level&&(A=" !!! Leaf node with wrong level value",!0===a&&console.log(A),b.push(A)),v=0;v<m.numberActives;v++)!0===a&&console.log(" "+m.keys[v].key),d(m.keys[v].key),c.push(m.keys[v].key);m!=h.root&&(m.numberActives>2*h.order-1&&(!0===a&&(A=" !!!! MAX num keys restriction violated "),console.log(A),b.push(A)),m.numberActives<h.order-1&&(!0===a&&(A=" !!!! MIN num keys restriction violated "),console.log(A),
b.push(A)))});return b};c.prototype._getMaxKeyPos=function(a,b,c){var h={};if(null===b)return c(null);if(!0===b.isLeaf)return h.node=b,h.index=b.numberActives-1,c(h);h.node=b;h.index=b.numberActives-1;a._diskRead(b.children[b.numberActives],function(d){return a._getMaxKeyPos(a,d,c)})};c.prototype._getMinKeyPos=function(a,b,c){var h={};null===b&&c(null);if(!0===b.isLeaf)return h.node=b,h.index=0,c(h);h.node=b;h.index=0;a._diskRead(b.children[0],function(d){return a._getMinKeyPos(a,d,c)})};var b=function(){this.numberActives=
0;this.isLeaf=null;this.keys=[];this.children=[];this.level=0};C.exports={Tree:c,Node:b}},{"./utils":57}],41:[function(x,C,B){(function(m){var h=x("./query_engine").QueryEngine,c=x("./quad_backend").QuadBackend,b=x("./persistent_quad_backend").PersistentQuadBackend,a=x("./lexicon").Lexicon,f=x("./persistent_lexicon").PersistentLexicon,k=x("./rdf_model"),t=x("./utils");Store=function(d,k){var t=null,m=null;if(0==arguments.length)m={};else if(1==arguments.length)m={},t=d;else if(1<arguments.length)m=
d,t=k;else throw"An optional argument map and a callback must be provided";null==m.treeOrder&&(m.treeOrder=15);var n=a,z=c;!0===m.persistent&&(n=f,z=b);this.functionMap={};var A=this;this.customFns={};new n(function(d){var a=function(){new z(m,function(a){var b=function(){m.backend=a;m.lexicon=d;A.engine=new h(m);t(null,A)};m.overwrite?a.clear(b):b()})};!0===m.overwrite?d.clear(a):a()},m.name)};Store.prototype.rdf=k.rdf;Store.prototype.rdf.api=k;Store.prototype.registerCustomFunction=function(d,a){this.customFns[d]=
a;this.engine.setCustomFunctions(this.customFns)};Store.prototype.execute=function(){if(3===arguments.length)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2]);else if(4===arguments.length)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2],arguments[3]);else{var d,a;1===arguments.length?(d=arguments[0],a=function(){}):2===arguments.length&&(d=arguments[0],a=arguments[1]);this.engine.execute(d,a)}};Store.prototype.executeWithEnvironment=function(){var d,a,b;if(3===
arguments.length){d=arguments[0];var c=function(){};a=arguments[1];b=arguments[2]}else 4===arguments.length&&(d=arguments[0],c=arguments[3],a=arguments[1],b=arguments[2]);a=t.map(a,function(d){return{token:"uri",value:d}});b=t.map(b,function(d){return{token:"uri",value:d}});this.engine.execute(d,c,a,b)};Store.prototype.graph=function(){var d=null,a=null;if(1===arguments.length)a=arguments[0]||function(){},d=this.engine.lexicon.defaultGraphUri;else if(2===arguments.length)a=arguments[1]||function(){},
d=arguments[0];else throw"An optional graph URI and a callback function must be provided";null!=this.rdf.resolve(d)&&(d=this.rdf.resolve(d));this.engine.execute("CONSTRUCT { ?s ?p ?o } WHERE { GRAPH <"+d+"> { ?s ?p ?o } }",a)};Store.prototype.node=function(){var d=null,a=null,b=null;if(2===arguments.length)b=arguments[0],a=arguments[1]||function(){},d=this.engine.lexicon.defaultGraphUri;else if(3===arguments.length)b=arguments[0],d=arguments[1],a=arguments[2]||function(){};else throw"An optional graph URI, node URI and a callback function must be provided";
null!=this.rdf.resolve(d)&&(d=this.rdf.resolve(d));null!=this.rdf.resolve(b)&&(b=this.rdf.resolve(b));this.engine.execute("CONSTRUCT { <"+b+"> ?p ?o } WHERE { GRAPH <"+d+"> { <"+b+"> ?p ?o } }",a)};Store.prototype.startObservingNode=function(){var d,a,b;2===arguments.length?(d=arguments[0],b=arguments[1],this.engine.callbacksBackend.observeNode(d,b,function(){})):3===arguments.length&&(d=arguments[0],a=arguments[1],b=arguments[2],this.engine.callbacksBackend.observeNode(d,a,b,function(){}))};Store.prototype.stopObservingNode=
function(d){this.engine.callbacksBackend.stopObservingNode(d)};Store.prototype.startObservingQuery=function(d,a,b){null!=b?this.engine.callbacksBackend.observeQuery(d,a,b):this.engine.callbacksBackend.observeQuery(d,a,function(){})};Store.prototype.stopObservingQuery=function(d){this.engine.callbacksBackend.stopObservingQuery(d)};Store.prototype.subscribe=function(d,a,b,c,h){var f=this,m=function(d,a){var b=[],c={blanks:{},outCache:{}},l=[];t.each(a,function(d){var a=k.buildRDFResource(d.subject,
l,f.engine,c),h=k.buildRDFResource(d.predicate,l,f.engine,c);d=k.buildRDFResource(d.object,l,f.engine,c);null!=a&&null!=h&&null!=d&&(d=new k.Triple(a,h,d),b.push(d))});h(d,b)};this.functionMap[h]=m;this.engine.callbacksBackend.subscribe(d,a,b,c,m,function(){})};Store.prototype.unsubscribe=function(d){this.engine.callbacksBackend.unsubscribe(this.functionMap[d]);delete this.functionMap[d]};Store.prototype.setPrefix=function(d,a){this.rdf.setPrefix(d,a)};Store.prototype.setDefaultPrefix=function(d){this.rdf.setDefaultPrefix(d)};
Store.prototype.insert=function(){var d,a,b;if(1===arguments.length)a=arguments[0],b=function(){};else if(2===arguments.length)a=arguments[0],b=arguments[1]||function(){};else if(3===arguments.length)a=arguments[0],d=this.rdf.createNamedNode(arguments[1]),b=arguments[2]||function(){};else throw"The triples to insert, an optional graph and callback must be provided";var c="",h=this;a.forEach(function(d){c=c+h._nodeToQuery(d.subject)+h._nodeToQuery(d.predicate)+h._nodeToQuery(d.object)+"."});c=null!=
d?"INSERT DATA { GRAPH "+this._nodeToQuery(d)+" { "+c+" } }":"INSERT DATA { "+c+" }";this.engine.execute(c,b)};Store.prototype._nodeToQuery=function(d){if("NamedNode"===d.interfaceName){var a=this.rdf.resolve(d.valueOf());return null!=a?"<"+a+">":"<"+d.valueOf()+">"}return d.toString()};Store.prototype.delete=function(){var d,a,b;if(1===arguments.length)a=arguments[0],b=function(){};else if(2===arguments.length)a=arguments[0],b=arguments[1]||function(){};else if(3===arguments.length)a=arguments[0],
d=this.rdf.createNamedNode(arguments[1]),b=arguments[2]||function(){};else throw"The triples to delete, an optional graph and callback must be provided";var c="",h=this;a.forEach(function(d){c=c+h._nodeToQuery(d.subject)+h._nodeToQuery(d.predicate)+h._nodeToQuery(d.object)+"."});c=null!=d?"DELETE DATA { GRAPH "+this._nodeToQuery(d)+" { "+c+" } }":"DELETE DATA { "+c+" }";this.engine.execute(c,b)};Store.prototype.clear=function(){var d,a;if(0===arguments.length)d=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),
a=function(){};else if(1===arguments.length)d=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),a=arguments[0]||function(){};else if(2===arguments.length)d=this.rdf.createNamedNode(arguments[0]),a=arguments[1]||function(){};else throw"The optional graph and a callback must be provided";d="CLEAR GRAPH "+this._nodeToQuery(d);this.engine.execute(d,a)};Store.prototype.setBatchLoadEvents=function(d){this.engine.eventsOnBatchLoad=d};Store.prototype.registerDefaultNamespace=function(d,a){this.rdf.prefixes.set(d,
a);this.engine.registerDefaultNamespace(d,a)};Store.prototype.registerDefaultProfileNamespaces=function(){var d=this.rdf.prefixes.values(),a;for(a in d)this.registerDefaultNamespace(a,d[a])};Store.prototype.load=function(){var d,a,b,c,h={};if(3===arguments.length)b=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),d=arguments[0],a=arguments[1],c=arguments[2]||function(){};else if(4===arguments.length)d=arguments[0],a=arguments[1],h=arguments[2],"string"===typeof h?(b=this.rdf.createNamedNode(h),
h={}):(b=this.rdf.createNamedNode(h.graph||this.engine.lexicon.defaultGraphUri),delete h.graph),c=arguments[3]||function(){};else if(2===arguments.length)throw"The mediaType of the parser, the data a callback and an optional graph must be provided";if("remote"===d)a=this.rdf.createNamedNode(a),this.engine.execute("LOAD <"+a.valueOf()+"> INTO GRAPH <"+b.valueOf()+">",c);else{var f=this,k=this.engine.rdfLoader.parsers[d];if(!k)return c(Error("Cannot find parser for the provided media type:"+d));d=[k,
{token:"uri",value:b.valueOf()},a,h,function(d,a){d?c(d,a):f.engine.batchLoad(a,function(d){null!=d?c(null,d):c(Error("Erro batch-loading triples."))})}];a&&"string"===typeof a&&0===a.indexOf("file://")?this.engine.rdfLoader.loadFromFile.apply(null,d):this.engine.rdfLoader.tryToParse.apply(null,d)}};Store.prototype.registerParser=function(d,a){this.engine.rdfLoader.registerParser(d,a)};Store.prototype.registeredGraphs=function(d){this.engine.lexicon.registeredGraphs(!0,function(a){a=t.map(a,function(d){return new k.NamedNode(d)});
d(null,a)})};Store.prototype.getNetworkTransport=function(){return NetworkTransport};Store.prototype.setNetworkTransport=function(d){NetworkTransport=d};Store.prototype.close=function(d){null==d&&(d=function(){});this.engine.close?this.engine.close(d):d()};Store.VERSION="0.9.15";Store.yieldFrequency=function(d){Utils.yieldFrequency(d)};C.exports.Store=Store;C.exports.create=function(){return 1==arguments.length?new Store(arguments[0]):2==arguments.length?new Store(arguments[0],arguments[1]):new Store};
C.exports.connect=function(){(1==arguments.length?arguments[0]:2==arguments.length?arguments[1]:arguments[2])(Error("Store#connect is not supported in the 1.x series of the library"))};t.isWorker()&&x("./quad_backend").QuadBackend()}).call(this,"/")},{"./lexicon":44,"./persistent_lexicon":47,"./persistent_quad_backend":48,"./quad_backend":49,"./query_engine":51,"./rdf_model":55,"./utils":57}],42:[function(x,C,B){var m=x("./utils"),h=x("./utils");x("./quad_index");var c=x("./quad_index").Pattern,b=
x("./rdf_model"),a=x("./abstract_query_tree").AbstractQueryTree;Callbacks={ANYTHING:{token:"var",value:"_"},added:"added",deleted:"deleted",eventsFlushed:"eventsFlushed",CallbacksBackend:function(b){this.aqt=new a;this.engine=b;this.indexMap={};this.observersMap={};this.queriesIndexMap={};this.emptyNotificationsMap={};this.queriesList=[];this.pendingQueries=[];this.matchedQueries=[];this.updateInProgress=null;this.indices="SPOG GP OGS POG GSP OS".split(" ");this.componentOrders={SPOG:["subject","predicate",
"object","graph"],GP:["graph","predicate","subject","object"],OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate","object"],OS:["object","subject","predicate","graph"]};this.callbackCounter=0;this.callbacksMap={};this.callbacksInverseMap={};this.queryCounter=0;this.queriesMap={};this.queriesCallbacksMap={};this.queriesInverseMap={};for(b=0;b<this.indices.length;b++){var c=this.indices[b];this.indexMap[c]={};this.queriesIndexMap[c]=
{}}}};Callbacks.CallbacksBackend.prototype.startGraphModification=function(){!0!==this.ongoingModification&&(this.pendingQueries=[].concat(this.queriesList),this.matchedQueries=[],null==this.updateInProgress&&(this.updateInProgress={},this.updateInProgress[Callbacks.added]=[],this.updateInProgress[Callbacks.deleted]=[]))};Callbacks.CallbacksBackend.prototype.nextGraphModification=function(a,b){this.updateInProgress[a].push(b)};Callbacks.CallbacksBackend.prototype.endGraphModification=function(a){if(!0!==
this.ongoingModification){var b=this;if(null!=this.updateInProgress){var c=b.updateInProgress;b.updateInProgress=null;this.sendNotification(Callbacks.deleted,c[Callbacks.deleted],function(){b.sendNotification(Callbacks.added,c[Callbacks.added],function(){b.sendEmptyNotification(Callbacks.eventsFlushed,null,function(){b.dispatchQueries(function(){a(!0)})})})})}else a(!0)}else a(!0)};Callbacks.CallbacksBackend.prototype.cancelGraphModification=function(){!0!==this.ongoingModification&&(this.updateInProgress=
null)};Callbacks.CallbacksBackend.prototype.sendNotification=function(a,b,c){for(var d={},h=0;h<b.length;h++){var m=b[h],v;for(v in this.indexMap){var n=this.indexMap[v],z=this.componentOrders[v];this._searchCallbacksInIndex(n,z,a,m,d);0!=this.pendingQueries.length&&(n=this.queriesIndexMap[v],this._searchQueriesInIndex(n,z,m))}}this.dispatchNotifications(d);null!=c&&c(!0)};Callbacks.CallbacksBackend.prototype.sendEmptyNotification=function(a,b,c){for(var d=this.emptyNotificationsMap[a]||[],h=0;h<
d.length;h++)d[h](a,b);c()};Callbacks.CallbacksBackend.prototype.dispatchNotifications=function(a){for(var b in a){var c=this.callbacksMap[b],d=a[b][Callbacks.deleted];if(null!=d)try{c(Callbacks.deleted,d)}catch(h){}for(var l in a[b])if(l!=Callbacks.deleted)try{c(l,a[b][l])}catch(h){}}};Callbacks.CallbacksBackend.prototype._searchCallbacksInIndex=function(a,b,c,d,h){var m=d[1];d=d[0];for(var v=0;v<b.length+1;v++){for(var n=a._||[],z=[],A=0;A<n.length;A++){var y=n[A];null!=this.callbacksMap[y]&&(h[y]=
h[y]||{},h[y][c]=h[y][c]||[],h[y][c].push(d),z.push(y))}a._=z;n=b[v];if(null!=a[""+m[n]])a=a[""+m[n]];else break}};Callbacks.CallbacksBackend.prototype.subscribeEmpty=function(a,b){var c=this.emptyNotificationsMap[a]||[];c.push(b);this.emptyNotificationsMap[a]=c};Callbacks.CallbacksBackend.prototype.unsubscribeEmpty=function(a,b){var c=this.emptyNotificationsMap[a];null!=c&&(c=m.reject(c,function(d){return d===b}));this.emptyNotificationsMap[a]=c};Callbacks.CallbacksBackend.prototype.subscribe=function(a,
b,h,d,l,m){a=this._tokenizeComponents(a,b,h,d);b={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,b);var v=this;this.engine.normalizeQuad(a,b,!0,function(d){for(var a=new c(d),b=v._indexForPattern(a),a=v.componentOrders[b],b=v.indexMap[b],h=0;h<a.length;h++){var f=d[a[h]];if("_"===f){null==b._&&(b._=[]);v.callbackCounter++;b._.push(v.callbackCounter);v.callbacksMap[v.callbackCounter]=l;v.callbacksInverseMap[l]=v.callbackCounter;break}else h===a.length-1?(b[f]=b[f]||{_:[]},v.callbackCounter++,
b[f]._.push(v.callbackCounter),v.callbacksMap[v.callbackCounter]=l,v.callbacksInverseMap[l]=v.callbackCounter):(b[f]=b[f]||{},b=b[f])}null!=m&&m(!0)})};Callbacks.CallbacksBackend.prototype.unsubscribe=function(a){var b=this.callbacksInverseMap[a];null!=b&&(delete this.callbacksInverseMap[a],delete this.callbacksMap[b])};Callbacks.CallbacksBackend.prototype._tokenizeComponents=function(a,b,c,d){var h={};null==a?h.subject=Callbacks.ANYTHING:0==a.indexOf("_:")?h.subject={token:"blank",value:a}:h.subject=
{token:"uri",value:a};h.predicate=null==b?Callbacks.ANYTHING:{token:"uri",value:b};h.object=null==c?Callbacks.ANYTHING:{token:"uri",value:c};h.graph=null==d?Callbacks.ANYTHING:{token:"uri",value:d};return h};Callbacks.CallbacksBackend.prototype._indexForPattern=function(a){a=a.indexKey;for(var b=this.indices,c=0;c<b.length;c++)for(var d=b[c],h=this.componentOrders[d],u=0;u<h.length&&!1!==m.include(a,h[u]);u++)if(u==a.length-1)return d;return"SPOG"};Callbacks.CallbacksBackend.prototype.observeNode=
function(){var a,c,h,d;4===arguments.length?(a=arguments[0],c=arguments[1],h=arguments[2],d=arguments[3]):(a=arguments[0],c=this.engine.lexicon.defaultGraphUri,h=arguments[1],d=arguments[2]);c="CONSTRUCT { <"+a+"> ?p ?o } WHERE { GRAPH <"+c+"> { <"+a+"> ?p ?o } }";var l=this,m={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,m);var v=[];this.engine.execute(c,function(c,k){if(c)d&&d(!1);else{var A=!1,y=function(d,a){if("eventsFlushed"===d&&A){A=!1;try{h(k)}catch(c){}}else if("eventsFlushed"!==
d){A=!0;for(var f=0;f<a.length;f++){var n=a[f],y=b.buildRDFResource(n.subject,v,l.engine,m),x=b.buildRDFResource(n.predicate,v,l.engine,m),n=b.buildRDFResource(n.object,v,l.engine,m);null!=y&&null!=x&&null!=n&&(n=new b.Triple(y,x,n),d===Callbacks.added?k.add(n):d===Callbacks.deleted&&k.remove(n))}}};l.observersMap[h]=y;l.subscribeEmpty(Callbacks.eventsFlushed,y);l.subscribe(a,null,null,null,y,function(){try{h(k)}catch(a){}d&&d(!0)})}})};Callbacks.CallbacksBackend.prototype.stopObservingNode=function(a){return(a=
this.observersMap[a])?(this.unsubscribe(a),this.unsubscribeEmpty(Callbacks.eventsFlushed,a),!0):!1};Callbacks.CallbacksBackend.prototype.observeQuery=function(a,b,m){var d=this.aqt.parseQueryString(a),d=this.aqt.parseSelect(d.units[0]),d=this.aqt.collectBasicTriples(d),l=this,u={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,u);var v=this.queryCounter;this.queryCounter++;this.queriesMap[v]=a;this.queriesInverseMap[a]=v;this.queriesList.push(v);this.queriesCallbacksMap[v]=b;h.eachSeries(d,
function(d,a){null==d.graph&&(d.graph=l.engine.lexicon.defaultGraphUriTerm);l.engine.normalizeQuad(d,u,!0,function(d){for(var b=new c(d),h=l._indexForPattern(b),b=l.componentOrders[h],h=l.queriesIndexMap[h],f=0;f<b.length;f++){var k=d[b[f]];if("string"===typeof k){null==h._&&(h._=[]);h._.push(v);break}else f===b.length-1?(h[k]=h[k]||{_:[]},h[k]._.push(v)):(h[k]=h[k]||{},h=h[k])}a()})},function(){l.engine.execute(a,function(d,a){d?console.log("ERROR in query callback "+a):b(a)});null!=m&&m()})};Callbacks.CallbacksBackend.prototype.stopObservingQuery=
function(a){var b=this.queriesInverseMap[a];null!=b&&(delete this.queriesInverseMap[a],delete this.queriesMap[b],this.queriesList=m.reject(this.queriesList,function(a){return a===b}))};Callbacks.CallbacksBackend.prototype._searchQueriesInIndex=function(a,b,c){var d=c[1];c=c[0];for(c=0;c<b.length+1;c++){for(var h=a._||[],u=[],v=0;v<h.length;v++){var n=h[v];m.include(this.pendingQueries,n)&&(m.remove(this.pendingQueries,function(d){return d===n}),this.matchedQueries.push(n));null!=this.queriesMap[n]&&
u.push(n)}a._=u;h=b[c];if(null!=a[""+d[h]])a=a[""+d[h]];else break}};Callbacks.CallbacksBackend.prototype.dispatchQueries=function(a){var b=this,c,d,l={};h.eachSeries(this.matchedQueries,function(a,h){null==l[a]?(l[a]=!0,c=b.queriesMap[a],d=b.queriesCallbacksMap[a],b.engine.execute(c,function(a,b){if(!a)try{d(b)}catch(c){}h()})):h()},function(){a()})};Callbacks.CallbacksBackend.added=Callbacks.added;Callbacks.CallbacksBackend.deleted=Callbacks.deleted;Callbacks.CallbacksBackend.eventsFlushed=Callbacks.eventsFlushed;
C.exports=Callbacks},{"./abstract_query_tree":39,"./quad_index":50,"./rdf_model":55,"./utils":57}],43:[function(x,C,B){var m=x("jsonld"),h=function(c,b,a){var h=null;m.normalize(c,{},function(c,m){if(c)a(c);else{var d=function(d){if("blank node"===d.type)return{blank:d.value};if("IRI"===d.type)return{token:"uri",value:d.value};if("literal"===d.type)return null!=d.language?{literal:'"'+d.value+'"@'+d.language}:null!==d.datatype?{literal:'"'+d.value+'"^^<'+d.datatype+">"}:{literal:'"'+d.value+'"'}};
h=[];var l=function(a,c,k){h.push({subject:d(a),predicate:d(c),object:d(k),graph:b})},u;for(u in m)for(var v=m[u],n=0;n<v.length;n++){var z=v[n];l(z.subject,z.predicate,z.object)}a(null,h)}})};B.JSONLDParser={};x=B.JSONLDParser;x.parser={async:!0,parse:function(c,b,a,f){try{"string"===typeof c&&(c=JSON.parse(c)),h(c,b,f)}catch(k){f(k)}}};C.exports={JSONLDParser:x}},{jsonld:26}],44:[function(x,C,B){var m=x("./utils"),h=x("./btree").Tree;Lexicon=function(c){var b=this;this.defaultGraphOid=0;this.defaultGraphUri=
"https://github.com/antoniogarrote/rdfstore-js#default_graph";this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri};this.oidCounter=1;m.seq(function(a){new h(2,function(c){b.uris=c;a()})},function(a){new h(2,function(c){b.literals=c;a()})},function(a){new h(2,function(c){b.knownGraphs=c;a()})},function(a){new h(2,function(c){b.oidUris=c;a()})},function(a){new h(2,function(c){b.oidLiterals=c;a()})},function(a){new h(2,function(c){b.oidBlanks=c;a()})})(function(){null!=
c&&c(b)})};Lexicon.prototype.registerGraph=function(c,b,a){c!=this.defaultGraphOid?this.knownGraphs.insert(c,b,function(){a()}):a()};Lexicon.prototype.registeredGraphs=function(c,b){var a=[];this.knownGraphs.walk(function(b){!0===c?a.push(b.data):a.push(b.key)},function(){b(a)})};Lexicon.prototype.registerUri=function(c,b){var a=this;c===this.defaultGraphUri?b(this.defaultGraphOid):this.uris.search(c,function(h){if(null==h){var k=a.oidCounter,t="u"+k;a.oidCounter++;m.seq(function(d){a.uris.insert(c,
[k,0],function(){d()})},function(d){a.oidUris.insert(t,c,function(){d()})})(function(){b(k)})}else k=h[0],h[1]+=1,b(k)})};Lexicon.prototype.resolveUri=function(c,b){c===this.defaultGraphUri?b(this.defaultGraphOid):this.uris.search(c,function(a){null!=a?b(a[0]):b(-1)})};Lexicon.prototype.resolveUriCost=function(c,b){c===this.defaultGraphUri?b(0):this.uris.search(c,function(a){null!=a?b(a[1]):b(-1)})};Lexicon.prototype.registerBlank=function(c){var b=this.oidCounter;this.oidCounter++;var a=""+b;this.oidBlanks.insert(a,
a,function(){c(b)})};Lexicon.prototype.resolveBlank=function(c,b){var a=this;this.oidBlanks.search(c,function(c){null!=c?b(c):(c=a.oidCounter,this.oidCounter++,b(""+c))})};Lexicon.prototype.resolveBlankCost=function(c,b){b(0)};Lexicon.prototype.registerLiteral=function(c,b){var a=this;this.literals.search(c,function(h){if(null==h){var k=a.oidCounter,t="l"+k;a.oidCounter++;m.seq(function(d){a.literals.insert(c,[k,0],function(){d()})},function(d){a.oidLiterals.insert(t,c,function(){d()})})(function(){b(k)})}else k=
h[0],h[1]+=1,b(k)})};Lexicon.prototype.resolveLiteral=function(c,b){this.literals.search(c,function(a){null!=a?b(a[0]):b(-1)})};Lexicon.prototype.resolveLiteralCost=function(c,b){this.literals.search(c,function(a){null!=a?b(a[1]):b(-1)})};Lexicon.prototype.parseLiteral=function(c){var b=c.lastIndexOf("@");if(-1!=b&&'"'===c[b-1]&&null!=c.substring(b,c.length).match(/^@[a-zA-Z\-]+$/g)){var a=c.substring(1,b-1);c=c.substring(b+1,c.length);return{token:"literal",value:a,lang:c}}b=c.lastIndexOf("^^");
if(-1!=b&&'"'===c[b-1]&&"<"===c[b+2]&&">"===c[c.length-1])return a=c.substring(1,b-1),c=c.substring(b+3,c.length-1),{token:"literal",value:a,type:c};a=c.substring(1,c.length-1);return{token:"literal",value:a}};Lexicon.prototype.parseUri=function(c){return{token:"uri",value:c}};Lexicon.prototype.retrieve=function(c,b){var a=this;c===this.defaultGraphOid?b({token:"uri",value:this.defaultGraphUri,prefix:null,suffix:null,defaultGraph:!0}):m.seq(function(b,h){a.oidUris.search("u"+c,function(b){null!=b?
h(null,a.parseUri(b)):h(null,null)})},function(b,h){null==b?a.oidLiterals.search("l"+c,function(b){null!=b?h(null,a.parseLiteral(b)):h(null,null)}):h(null,b)},function(b,h){null==b?a.oidBlanks.search(""+c,function(a){null!=a?h(null,{token:"blank",value:"_:"+c}):h(null,null)}):h(null,b)})(null,function(a,c){b(c)})};Lexicon.prototype.clear=function(c){var b=this;this.defaultGraphOid=0;this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph";this.defaultGraphUriTerm={token:"uri",
prefix:null,suffix:null,value:this.defaultGraphUri};this.oidCounter=1;m.seq(function(a){new h(2,function(c){b.uris=c;a()})},function(a){new h(2,function(c){b.literals=c;a()})},function(a){new h(2,function(c){b.knownGraphs=c;a()})},function(a){new h(2,function(c){b.oidUris=c;a()})},function(a){new h(2,function(c){b.oidLiterals=c;a()})},function(a){new h(2,function(c){b.oidBlanks=c;a()})})(function(){null!=c&&c()})};Lexicon.prototype.unregister=function(c,b,a){var h=this;m.seq(function(a){h._unregisterTerm(c.subject.token,
b.subject,a)},function(a){h._unregisterTerm(c.predicate.token,b.predicate,a)},function(a){h._unregisterTerm(c.object.token,b.object,a)},function(a){null!=c.graph?h._unregisterTerm(c.graph.token,b.graph,a):a()})(function(){a(!0)})};Lexicon.prototype._unregisterTerm=function(c,b,a){var h=this;if("uri"===c)if(b!=this.defaultGraphOid){var k="u"+b;h.oidUris.search(k,function(c){h.uris.search(c,function(d){var l=d[1];""+d[0]===""+b?0===l?m.seq(function(d){h.oidUris.delete(k,function(){d()})},function(d){h.uris.delete(c,
function(){d()})},function(d){h.knownGraphs.delete(b,function(){d()})})(function(){a()}):h.uris.insert(c,[b,l-1],function(){a()}):a()})})}else a();else"literal"===c?(this.oidCounter++,k="l"+b,h.oidLiterals.search(k,function(c){h.literals.search(c,function(d){var l=d[1];""+d[0]===""+b?0===l?m.seq(function(d){h.oidLiterals.delete(k,function(){d()})},function(d){h.literals.delete(c,function(){d()})})(function(){a()}):h.literals.insert(c,[b,l-1],function(){a()}):a()})})):"blank"===c?h.oidBlanks.delete(""+
b,function(){a()}):a()};C.exports={Lexicon:Lexicon}},{"./btree":40,"./utils":57}],45:[function(x,C,B){if(!x("./utils").isWorker()){var m=x("http"),h=x("https"),c=x("url");NetworkTransport={load:function(b,a,f,k){var t=null==k?3:k;b=c.parse(b,!0,!0);k={host:b.host,hostname:b.hostname,method:"GET",path:b.path,headers:{host:b.hostname,Accept:a}};var d=null;"http:"===b.protocol?(k.port=b.port||80,d=m):"https:"===b.protocol&&(k.port=b.port||443,d=h);b=d.request(k,function(d){var b=d.headers,c="";"2"==
(""+d.statusCode)[0]?(d.on("end",function(){f(null,{headers:b,data:c})}),d.on("data",function(d){c+=d})):"3"==(""+d.statusCode)[0]?0==t?f(Error("Too many redirections")):(d=b.Location||b.location,null!=d?NetworkTransport.load(d,a,f,t-1):f(Error("Redirection without location header"))):f(Error("HTTP error: "+d.statusCode))});b.on("error",f);b.end()}};C.exports={NetworkTransport:NetworkTransport}}},{"./utils":57,http:7,https:22,url:36}],46:[function(x,C,B){C.exports=function(){function m(h,c,b,a){this.message=
h;this.expected=c;this.found=b;this.location=a;this.name="SyntaxError";"function"===typeof Error.captureStackTrace&&Error.captureStackTrace(this,m)}(function(h,c){function b(){this.constructor=h}b.prototype=c.prototype;h.prototype=new b})(m,Error);m.buildMessage=function(h,c){function b(a){return a.charCodeAt(0).toString(16).toUpperCase()}function a(a){return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,
function(d){return"\\x0"+b(d)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(d){return"\\x"+b(d)})}function f(a){return a.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(d){return"\\x0"+b(d)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(d){return"\\x"+b(d)})}var k={literal:function(b){return'"'+a(b.text)+'"'},"class":function(a){var d="",b;for(b=0;b<a.parts.length;b++)d+=
a.parts[b]instanceof Array?f(a.parts[b][0])+"-"+f(a.parts[b][1]):f(a.parts[b]);return"["+(a.inverted?"^":"")+d+"]"},any:function(a){return"any character"},end:function(a){return"end of input"},other:function(a){return a.description}};return"Expected "+function(a){var d=Array(a.length),b;for(b=0;b<a.length;b++){var c=b,h;h=a[b];h=k[h.type](h);d[c]=h}d.sort();if(0<d.length){for(a=b=1;b<d.length;b++)d[b-1]!==d[b]&&(d[a]=d[b],a++);d.length=a}switch(d.length){case 1:return d[0];case 2:return d[0]+" or "+
d[1];default:return d.slice(0,-1).join(", ")+", or "+d[d.length-1]}}(h)+" but "+(c?'"'+a(c)+'"':"end of input")+" found."};return{SyntaxError:m,parse:function(h,c){function b(d,e){return{type:"literal",text:d,ignoreCase:e}}function a(d,e,a){return{type:"class",parts:d,inverted:e,ignoreCase:a}}function f(d){return{type:"other",description:d}}function k(d){var e=Nb[d],a;if(!e){for(a=d-1;!Nb[a];)a--;e=Nb[a];for(e={line:e.line,column:e.column};a<d;)10===h.charCodeAt(a)?(e.line++,e.column=1):e.column++,
a++;Nb[d]=e}return e}function t(d,e){var a=k(d),b=k(e);return{start:{offset:d,line:a.line,column:a.column},end:{offset:e,line:b.line,column:b.column}}}function d(d){g<Fa||(g>Fa&&(Fa=g,Kc=[]),Kc.push(d))}function l(){var a;q++;var b,c;q++;a=g;b=u();if(b!==e){var w,f,k,l,m,t;q++;w=g;f=n();if(f!==e){k=[];for(c=r();c!==e;)k.push(c),c=r();if(k!==e){c=[];for(l=z();l!==e;)c.push(l),l=z();if(c!==e){l=[];for(k=r();k!==e;)l.push(k),k=r();if(l!==e)if(k=y(),k!==e){m=[];for(l=r();l!==e;)m.push(l),l=r();if(m!==
e)if(l=D(),l!==e){m=[];for(t=r();t!==e;)m.push(t),t=r();if(m!==e){var v,A,G,x,E,M,L;q++;m=g;h.substr(g,8)===qd?(t=qd,g+=8):(t=e,0===q&&d(Pg));if(t!==e){v=[];for(A=ja();A!==e;)v.push(A),A=ja();if(v!==e)if(123===h.charCodeAt(g)?(A=Ca,g++):(A=e,0===q&&d(Da)),A!==e){G=[];x=g;40===h.charCodeAt(g)?(E=R,g++):(E=e,0===q&&d(S));if(E!==e){M=[];L=K();if(L!==e)for(;L!==e;)M.push(L),L=K();else M=e;M!==e?(41===h.charCodeAt(g)?(L=T,g++):(L=e,0===q&&d(U)),L!==e?x=E=[E,M,L]:(g=x,x=e)):(g=x,x=e)}else g=x,x=e;for(x===
e&&(x=Ja());x!==e;){G.push(x);x=g;40===h.charCodeAt(g)?(E=R,g++):(E=e,0===q&&d(S));if(E!==e){M=[];L=K();if(L!==e)for(;L!==e;)M.push(L),L=K();else M=e;M!==e?(41===h.charCodeAt(g)?(L=T,g++):(L=e,0===q&&d(U)),L!==e?x=E=[E,M,L]:(g=x,x=e)):(g=x,x=e)}else g=x,x=e;x===e&&(x=Ja())}G!==e?(125===h.charCodeAt(g)?(x=ua,g++):(x=e,0===q&&d(va)),x!==e?m=t=[t,v,A,G,x]:(g=m,m=e)):(g=m,m=e)}else g=m,m=e;else g=m,m=e}else g=m,m=e;m===e&&(m=null);q--;m===e&&0===q&&d(Qg);if(m!==e){w=f;f={named:[],implicit:[]};for(m=0;m<
c.length;m++)t=c[m],"default"===t.kind?f.implicit.push(t.graph):f.named.push(t.graph);0===f.named.length&&0===f.implicit.length&&f.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});c={kind:"select",token:"executableunit"};c.dataset=f;c.projection=w.vars;c.modifier=w.modifier;c.pattern=k;null!=l&&null!=l.limit&&(c.limit=l.limit);null!=l&&null!=l.offset&&(c.offset=l.offset);null!=l&&null!=l.order&&""!=l.order&&(c.order=l.order);
null!=l&&null!=l.group&&(c.group=l.group);w=c}else g=w,w=e}else g=w,w=e}else g=w,w=e;else g=w,w=e}else g=w,w=e;else g=w,w=e}else g=w,w=e}else g=w,w=e}else g=w,w=e;q--;w===e&&0===q&&d(Rg);c=w;if(c===e){q++;c=g;k=[];for(l=r();l!==e;)k.push(l),l=r();if(k!==e)if(h.substr(g,9)===Ob?(l=Ob,g+=9):(l=e,0===q&&d(rd)),l===e&&(h.substr(g,9)===Pb?(l=Pb,g+=9):(l=e,0===q&&d(sd))),l!==e){k=[];for(l=r();l!==e;)k.push(l),l=r();if(k!==e){q++;k=g;123===h.charCodeAt(g)?(l=Ca,g++):(l=e,0===q&&d(Da));if(l!==e){w=[];for(l=
r();l!==e;)w.push(l),l=r();if(w!==e)if(l=eb(),l===e&&(l=null),l!==e){w=[];for(f=r();f!==e;)w.push(f),f=r();w!==e?(125===h.charCodeAt(g)?(f=ua,g++):(f=e,0===q&&d(va)),f!==e?k=l:(g=k,k=e)):(g=k,k=e)}else g=k,k=e;else g=k,k=e}else g=k,k=e;q--;k===e&&0===q&&d(Sg);l=k;if(l!==e){k=[];for(w=r();w!==e;)k.push(w),w=r();if(k!==e){w=[];for(k=z();k!==e;)w.push(k),k=z();if(w!==e){k=[];for(f=r();f!==e;)k.push(f),f=r();if(k!==e)if(f=y(),f!==e){m=[];for(k=r();k!==e;)m.push(k),k=r();if(m!==e)if(k=D(),k!==e){c=l;l=
w;w=f;f={named:[],implicit:[]};for(m=0;m<l.length;m++)t=l[m],"default"===t.kind?f.implicit.push(t.graph):f.named.push(t.graph);0===f.named.length&&0===f.implicit.length&&f.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});l={kind:"construct",token:"executableunit"};l.dataset=f;l.template=c;l.pattern=w;null!=k&&null!=k.limit&&(l.limit=k.limit);null!=k&&null!=k.offset&&(l.offset=k.offset);null!=k&&null!=k.order&&""!=k.order&&(l.order=
k.order);c=l}else g=c,c=e;else g=c,c=e}else g=c,c=e;else g=c,c=e}else g=c,c=e}else g=c,c=e}else g=c,c=e}else g=c,c=e}else g=c,c=e;else g=c,c=e;if(c===e){c=g;k=[];for(l=r();l!==e;)k.push(l),l=r();if(k!==e)if(h.substr(g,9)===Ob?(l=Ob,g+=9):(l=e,0===q&&d(rd)),l===e&&(h.substr(g,9)===Pb?(l=Pb,g+=9):(l=e,0===q&&d(sd))),l!==e){k=[];for(l=r();l!==e;)k.push(l),l=r();if(k!==e){l=[];for(k=z();k!==e;)l.push(k),k=z();if(l!==e){k=[];for(w=r();w!==e;)k.push(w),w=r();if(k!==e)if(h.substr(g,5)===Ta?(w=Ta,g+=5):(w=
e,0===q&&d(Qb)),w===e&&(h.substr(g,5)===Ua?(w=Ua,g+=5):(w=e,0===q&&d(Rb))),w!==e){k=[];for(f=r();f!==e;)k.push(f),f=r();if(k!==e)if(123===h.charCodeAt(g)?(f=Ca,g++):(f=e,0===q&&d(Da)),f!==e){m=[];for(k=r();k!==e;)m.push(k),k=r();if(m!==e)if(k=ya(),k===e&&(k=null),k!==e){w=[];for(f=r();f!==e;)w.push(f),f=r();if(w!==e)if(125===h.charCodeAt(g)?(f=ua,g++):(f=e,0===q&&d(va)),f!==e){f=[];for(w=r();w!==e;)f.push(w),w=r();if(f!==e)if(w=D(),w!==e){c=l;l=w;w={named:[],implicit:[]};for(f=0;f<c.length;f++)m=
c[f],"default"===m.kind?w.implicit.push(m.graph):w.named.push(m.graph);0===w.named.length&&0===w.implicit.length&&w.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});c={kind:"construct",token:"executableunit"};c.dataset=w;c.template=k;c.pattern={token:"basicgraphpattern",triplesContext:k.triplesContext};null!=l&&null!=l.limit&&(c.limit=l.limit);null!=l&&null!=l.offset&&(c.offset=l.offset);null!=l&&null!=l.order&&""!=l.order&&(c.order=
l.order)}else g=c,c=e;else g=c,c=e}else g=c,c=e;else g=c,c=e}else g=c,c=e;else g=c,c=e}else g=c,c=e;else g=c,c=e}else g=c,c=e;else g=c,c=e}else g=c,c=e}else g=c,c=e}else g=c,c=e;else g=c,c=e}q--;c===e&&0===q&&d(Tg);if(c===e){q++;c=g;h.substr(g,8)===td?(k=td,g+=8):(k=e,0===q&&d(Ug));if(k!==e){l=[];w=gb();if(w!==e)for(;w!==e;)l.push(w),w=gb();else l=e;l===e&&(42===h.charCodeAt(g)?(l=Ka,g++):(l=e,0===q&&d(La)));if(l!==e){w=[];for(f=z();f!==e;)w.push(f),f=z();w!==e?(f=y(),f===e&&(f=null),f!==e?(m=D(),
m!==e?c=k=[k,l,w,f,m]:(g=c,c=e)):(g=c,c=e)):(g=c,c=e)}else g=c,c=e}else g=c,c=e;q--;c===e&&0===q&&d(Vg);if(c===e){q++;c=g;k=[];for(l=r();l!==e;)k.push(l),l=r();if(k!==e)if(h.substr(g,3)===ud?(l=ud,g+=3):(l=e,0===q&&d(Wg)),l===e&&(h.substr(g,3)===vd?(l=vd,g+=3):(l=e,0===q&&d(Xg))),l!==e){l=[];for(k=r();k!==e;)l.push(k),k=r();if(l!==e){k=[];for(w=z();w!==e;)k.push(w),w=z();if(k!==e){w=[];for(l=r();l!==e;)w.push(l),l=r();if(w!==e)if(l=y(),l!==e){c=k;k=l;l={named:[],implicit:[]};for(w=0;w<c.length;w++)f=
c[w],"implicit"===f.kind?l.implicit.push(f.graph):l.named.push(f.graph);0===l.named.length&&0===l.implicit.length&&l.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});c={kind:"ask",token:"executableunit"};c.dataset=l;c.pattern=k}else g=c,c=e;else g=c,c=e}else g=c,c=e}else g=c,c=e}else g=c,c=e;else g=c,c=e;q--;c===e&&0===q&&d(Yg)}}}c!==e?(q++,k=g,h.substr(g,6)===Sb?(l=Sb,g+=6):(l=e,0===q&&d(wd)),l===e&&(h.substr(g,6)===Tb?(l=Tb,
g+=6):(l=e,0===q&&d(xd))),l!==e?(w=Aa(),w!==e?k=l=[l,w]:(g=k,k=e)):(g=k,k=e),k===e&&(k=null),k!==e&&(k=null!=k?k[1]:null),q--,k===e&&0===q&&d(Zg),k!==e?a=b={token:"query",kind:"query",prologue:b,units:[c],inlineData:k}:(g=a,a=e)):(g=a,a=e)}else g=a,a=e;q--;a===e&&0===q&&d($g);q--;a===e&&0===q&&d(ah);a===e&&(q++,a=C(),q--,a===e&&0===q&&d(bh));return a}function u(){var a,b,c,w;q++;a=g;q++;b=g;w=[];for(c=r();c!==e;)w.push(c),c=r();if(w!==e)if(h.substr(g,4)===yd?(c=yd,g+=4):(c=e,0===q&&d(ch)),c===e&&
(h.substr(g,4)===zd?(c=zd,g+=4):(c=e,0===q&&d(dh))),c!==e){c=[];for(w=r();w!==e;)c.push(w),w=r();c!==e?(w=Mb(),w!==e?(b={token:"base"},b.value=w):(g=b,b=e)):(g=b,b=e)}else g=b,b=e;else g=b,b=e;q--;b===e&&0===q&&d(eh);b===e&&(b=null);if(b!==e){c=[];for(w=r();w!==e;)c.push(w),w=r();if(c!==e){w=[];for(c=v();c!==e;)w.push(c),c=v();w!==e?a=b={token:"prologue",base:b,prefixes:w}:(g=a,a=e)}else g=a,a=e}else g=a,a=e;q--;a===e&&0===q&&d(fh);return a}function v(){var a,b,c,w;q++;a=g;b=[];for(c=r();c!==e;)b.push(c),
c=r();if(b!==e)if(h.substr(g,6)===Ad?(c=Ad,g+=6):(c=e,0===q&&d(gh)),c===e&&(h.substr(g,6)===Bd?(c=Bd,g+=6):(c=e,0===q&&d(hh))),c!==e){c=[];for(b=r();b!==e;)c.push(b),b=r();if(c!==e)if(b=Gc(),b!==e){w=[];for(c=r();c!==e;)w.push(c),c=r();w!==e?(c=Mb(),c!==e?(a={token:"prefix"},a.prefix=b,a.local=c):(g=a,a=e)):(g=a,a=e)}else g=a,a=e;else g=a,a=e}else g=a,a=e;else g=a,a=e;q--;a===e&&0===q&&d(ih);return a}function n(){var a,b,c,w,f,k,l,n,m,t,u,v,z,y,A,D;q++;a=g;b=[];for(c=r();c!==e;)b.push(c),c=r();if(b!==
e)if(h.substr(g,6)===Cd?(c=Cd,g+=6):(c=e,0===q&&d(jh)),c===e&&(h.substr(g,6)===Dd?(c=Dd,g+=6):(c=e,0===q&&d(kh))),c!==e){c=[];for(b=r();b!==e;)c.push(b),b=r();if(c!==e)if(h.substr(g,8)===na?(b=na,g+=8):(b=e,0===q&&d(Va)),b===e&&(h.substr(g,8)===oa?(b=oa,g+=8):(b=e,0===q&&d(Wa))),b===e&&(h.substr(g,7)===Ed?(b=Ed,g+=7):(b=e,0===q&&d(lh)),b===e&&(h.substr(g,7)===Fd?(b=Fd,g+=7):(b=e,0===q&&d(mh)))),b===e&&(b=null),b!==e){w=[];for(c=r();c!==e;)w.push(c),c=r();if(w!==e){c=[];w=g;f=[];for(k=r();k!==e;)f.push(k),
k=r();if(f!==e)if(k=ja(),k!==e){l=[];for(n=r();n!==e;)l.push(n),n=r();l!==e?w=f=[f,k,l]:(g=w,w=e)}else g=w,w=e;else g=w,w=e;if(w===e){w=g;f=[];for(k=r();k!==e;)f.push(k),k=r();if(f!==e)if(40===h.charCodeAt(g)?(k=R,g++):(k=e,0===q&&d(S)),k!==e){l=[];for(n=r();n!==e;)l.push(n),n=r();if(l!==e)if(n=P(),n!==e){m=[];for(t=r();t!==e;)m.push(t),t=r();if(m!==e)if(h.substr(g,2)===Xa?(t=Xa,g+=2):(t=e,0===q&&d(Ub)),t===e&&(h.substr(g,2)===Ya?(t=Ya,g+=2):(t=e,0===q&&d(Vb))),t!==e){u=[];for(v=r();v!==e;)u.push(v),
v=r();if(u!==e)if(v=ja(),v!==e){z=[];for(y=r();y!==e;)z.push(y),y=r();if(z!==e)if(41===h.charCodeAt(g)?(y=T,g++):(y=e,0===q&&d(U)),y!==e){A=[];for(D=r();D!==e;)A.push(D),D=r();A!==e?w=f=[f,k,l,n,m,t,u,v,z,y,A]:(g=w,w=e)}else g=w,w=e;else g=w,w=e}else g=w,w=e;else g=w,w=e}else g=w,w=e;else g=w,w=e}else g=w,w=e;else g=w,w=e}else g=w,w=e;else g=w,w=e}if(w!==e)for(;w!==e;){c.push(w);w=g;f=[];for(k=r();k!==e;)f.push(k),k=r();if(f!==e)if(k=ja(),k!==e){l=[];for(n=r();n!==e;)l.push(n),n=r();l!==e?w=f=[f,
k,l]:(g=w,w=e)}else g=w,w=e;else g=w,w=e;if(w===e){w=g;f=[];for(k=r();k!==e;)f.push(k),k=r();if(f!==e)if(40===h.charCodeAt(g)?(k=R,g++):(k=e,0===q&&d(S)),k!==e){l=[];for(n=r();n!==e;)l.push(n),n=r();if(l!==e)if(n=P(),n!==e){m=[];for(t=r();t!==e;)m.push(t),t=r();if(m!==e)if(h.substr(g,2)===Xa?(t=Xa,g+=2):(t=e,0===q&&d(Ub)),t===e&&(h.substr(g,2)===Ya?(t=Ya,g+=2):(t=e,0===q&&d(Vb))),t!==e){u=[];for(v=r();v!==e;)u.push(v),v=r();if(u!==e)if(v=ja(),v!==e){z=[];for(y=r();y!==e;)z.push(y),y=r();if(z!==e)if(41===
h.charCodeAt(g)?(y=T,g++):(y=e,0===q&&d(U)),y!==e){A=[];for(D=r();D!==e;)A.push(D),D=r();A!==e?w=f=[f,k,l,n,m,t,u,v,z,y,A]:(g=w,w=e)}else g=w,w=e;else g=w,w=e}else g=w,w=e;else g=w,w=e}else g=w,w=e;else g=w,w=e}else g=w,w=e;else g=w,w=e}else g=w,w=e;else g=w,w=e}}else c=e;if(c===e){c=g;w=[];for(f=r();f!==e;)w.push(f),f=r();if(w!==e)if(42===h.charCodeAt(g)?(f=Ka,g++):(f=e,0===q&&d(La)),f!==e){k=[];for(l=r();l!==e;)k.push(l),l=r();k!==e?c=w=[w,f,k]:(g=c,c=e)}else g=c,c=e;else g=c,c=e}if(c!==e){a=b;
b=c;c=[];if(3===b.length&&"*"===b[1])b={vars:[{token:"variable",kind:"*"}],modifier:Gd(a)};else{for(w=0;w<b.length;w++)f=b[w],3===f.length?c.push({token:"variable",kind:"var",value:f[1]}):c.push({token:"variable",kind:"aliased",expression:f[3],alias:f[7]});b={vars:c,modifier:Gd(a)}}a=b}else g=a,a=e}else g=a,a=e}else g=a,a=e;else g=a,a=e}else g=a,a=e;else g=a,a=e;q--;a===e&&0===q&&d(nh);return a}function z(){var a,b,c,w;q++;a=g;h.substr(g,4)===Hd?(b=Hd,g+=4):(b=e,0===q&&d(oh));b===e&&(h.substr(g,4)===
Id?(b=Id,g+=4):(b=e,0===q&&d(ph)));if(b!==e){c=[];for(b=r();b!==e;)c.push(b),b=r();if(c!==e){q++;b=g;c=[];for(w=r();w!==e;)c.push(w),w=r();c!==e?(w=A(),w!==e?b=c={graph:w,kind:"default",token:"graphClause"}:(g=b,b=e)):(g=b,b=e);q--;b===e&&0===q&&d(qh);if(b===e){q++;b=g;h.substr(g,5)===ob?(c=ob,g+=5):(c=e,0===q&&d(Lc));c===e&&(h.substr(g,5)===pb?(c=pb,g+=5):(c=e,0===q&&d(Mc)));if(c!==e){c=[];for(w=r();w!==e;)c.push(w),w=r();c!==e?(w=A(),w!==e?b=c={graph:w,kind:"named",token:"graphCluase"}:(g=b,b=e)):
(g=b,b=e)}else g=b,b=e;q--;b===e&&0===q&&d(rh)}if(b!==e){c=[];for(w=r();w!==e;)c.push(w),w=r();c!==e?a=b:(g=a,a=e)}else g=a,a=e}else g=a,a=e}else g=a,a=e;q--;a===e&&0===q&&d(sh);return a}function A(){var a;q++;a=ka();q--;a===e&&0===q&&d(th);return a}function y(){var a,b,c,w;q++;a=g;h.substr(g,5)===Ta?(b=Ta,g+=5):(b=e,0===q&&d(Qb));b===e&&(h.substr(g,5)===Ua?(b=Ua,g+=5):(b=e,0===q&&d(Rb)));b===e&&(b=null);if(b!==e){c=[];for(b=r();b!==e;)c.push(b),b=r();if(c!==e)if(b=W(),b!==e){c=[];for(w=r();w!==e;)c.push(w),
w=r();c!==e?a=b:(g=a,a=e)}else g=a,a=e;else g=a,a=e}else g=a,a=e;q--;a===e&&0===q&&d(uh);return a}function D(){var a,b,c,w;q++;a=g;q++;b=g;h.substr(g,5)===Jd?(c=Jd,g+=5):(c=e,0===q&&d(vh));c===e&&(h.substr(g,5)===Kd?(c=Kd,g+=5):(c=e,0===q&&d(wh)));if(c!==e){c=[];for(w=r();w!==e;)c.push(w),w=r();if(c!==e)if(h.substr(g,2)===Wb?(w=Wb,g+=2):(w=e,0===q&&d(Ld)),w===e&&(h.substr(g,2)===Xb?(w=Xb,g+=2):(w=e,0===q&&d(Md))),w!==e){w=[];for(c=r();c!==e;)w.push(c),c=r();if(w!==e){c=[];w=x();if(w!==e)for(;w!==
e;)c.push(w),w=x();else c=e;c!==e?b=c:(g=b,b=e)}else g=b,b=e}else g=b,b=e;else g=b,b=e}else g=b,b=e;q--;b===e&&0===q&&d(xh);b===e&&(b=null);if(b!==e){var f,k;q++;c=g;h.substr(g,6)===Nd?(w=Nd,g+=6):(w=e,0===q&&d(yh));if(w!==e){f=[];k=G();if(k!==e)for(;k!==e;)f.push(k),k=G();else f=e;f!==e?c=w=[w,f]:(g=c,c=e)}else g=c,c=e;q--;c===e&&0===q&&d(zh);c===e&&(c=null);if(c!==e){q++;c=g;h.substr(g,5)===Od?(w=Od,g+=5):(w=e,0===q&&d(Ah));w===e&&(h.substr(g,5)===Pd?(w=Pd,g+=5):(w=e,0===q&&d(Bh)));if(w!==e){w=
[];for(f=r();f!==e;)w.push(f),f=r();if(w!==e)if(h.substr(g,2)===Wb?(f=Wb,g+=2):(f=e,0===q&&d(Ld)),f===e&&(h.substr(g,2)===Xb?(f=Xb,g+=2):(f=e,0===q&&d(Md))),f!==e){f=[];for(w=r();w!==e;)f.push(w),w=r();if(f!==e){w=[];f=M();if(f!==e)for(;f!==e;)w.push(f),f=M();else w=e;if(w!==e){f=[];for(k=r();k!==e;)f.push(k),k=r();f!==e?c=w:(g=c,c=e)}else g=c,c=e}else g=c,c=e}else g=c,c=e;else g=c,c=e}else g=c,c=e;q--;c===e&&0===q&&d(Ch);c===e&&(c=null);if(c!==e){q++;w=g;f=L();f!==e?(k=B(),k===e&&(k=null),k!==e?
w=f=[f,k]:(g=w,w=e)):(g=w,w=e);w===e&&(w=g,f=B(),f!==e?(k=L(),k===e&&(k=null),k!==e?w=f=[f,k]:(g=w,w=e)):(g=w,w=e));if(w!==e){f={};for(k=0;k<w.length;k++){var l=w[k];null!=l&&null!=l.limit?f.limit=l.limit:null!=l&&null!=l.offset&&(f.offset=l.offset)}w=f}q--;w===e&&0===q&&d(Dh);w===e&&(w=null);w!==e?(a=b,b=w,w={},null!=b&&(null!=b.limit&&(w.limit=b.limit),null!=b.offset&&(w.offset=b.offset)),null!=a&&(w.group=a),w.order=c,a=w):(g=a,a=e)}else g=a,a=e}else g=a,a=e}else g=a,a=e;q--;a===e&&0===q&&d(Eh);
return a}function x(){var a,b,c,w,f,k;q++;a=g;b=[];for(c=r();c!==e;)b.push(c),c=r();if(b!==e)if(c=Fc(),c!==e){w=[];for(b=r();b!==e;)w.push(b),b=r();w!==e?a=c:(g=a,a=e)}else g=a,a=e;else g=a,a=e;if(a===e){a=g;b=[];for(c=r();c!==e;)b.push(c),c=r();if(b!==e)if(c=da(),c!==e){w=[];for(b=r();b!==e;)w.push(b),b=r();w!==e?a=c:(g=a,a=e)}else g=a,a=e;else g=a,a=e;if(a===e){a=g;b=[];for(c=r();c!==e;)b.push(c),c=r();if(b!==e)if(40===h.charCodeAt(g)?(c=R,g++):(c=e,0===q&&d(S)),c!==e){w=[];for(b=r();b!==e;)w.push(b),
b=r();if(w!==e)if(b=P(),b!==e){w=[];for(c=r();c!==e;)w.push(c),c=r();if(w!==e){c=g;h.substr(g,2)===Xa?(f=Xa,g+=2):(f=e,0===q&&d(Ub));f===e&&(h.substr(g,2)===Ya?(f=Ya,g+=2):(f=e,0===q&&d(Vb)));if(f!==e){k=[];for(w=r();w!==e;)k.push(w),w=r();k!==e?(w=ja(),w!==e?c=f=[f,k,w]:(g=c,c=e)):(g=c,c=e)}else g=c,c=e;c===e&&(c=null);if(c!==e){f=[];for(k=r();k!==e;)f.push(k),k=r();if(f!==e)if(41===h.charCodeAt(g)?(k=T,g++):(k=e,0===q&&d(U)),k!==e){w=[];for(f=r();f!==e;)w.push(f),f=r();w!==e?(b=0!=c.length?{token:"aliased_expression",
expression:b,alias:c[2]}:b,a=b):(g=a,a=e)}else g=a,a=e;else g=a,a=e}else g=a,a=e}else g=a,a=e}else g=a,a=e;else g=a,a=e}else g=a,a=e;else g=a,a=e;if(a===e){a=g;b=[];for(c=r();c!==e;)b.push(c),c=r();if(b!==e)if(c=ja(),c!==e){w=[];for(b=r();b!==e;)w.push(b),b=r();w!==e?a=c:(g=a,a=e)}else g=a,a=e;else g=a,a=e}}}q--;a===e&&0===q&&d(Fh);return a}function G(){var a;q++;a=ca();q--;a===e&&0===q&&d(Gh);return a}function M(){var a,b,c,w,f;q++;a=g;h.substr(g,3)===Qd?(b=Qd,g+=3):(b=e,0===q&&d(Hh));b===e&&(h.substr(g,
3)===Rd?(b=Rd,g+=3):(b=e,0===q&&d(Ih)),b===e&&(h.substr(g,4)===Sd?(b=Sd,g+=4):(b=e,0===q&&d(Jh)),b===e&&(h.substr(g,4)===Td?(b=Td,g+=4):(b=e,0===q&&d(Kh)))));if(b!==e){c=[];for(w=r();w!==e;)c.push(w),w=r();if(c!==e)if(w=Ec(),w!==e){c=[];for(f=r();f!==e;)c.push(f),f=r();c!==e?(a=w,a=b={direction:b.toUpperCase(),expression:a}):(g=a,a=e)}else g=a,a=e;else g=a,a=e}else g=a,a=e;if(a===e)if(a=g,b=ca(),b===e&&(b=ja()),b!==e){c=[];for(w=r();w!==e;)c.push(w),w=r();c!==e?("var"===b.token&&(b={token:"expression",
expressionType:"atomic",primaryexpression:"var",value:b}),a=b={direction:"ASC",expression:b}):(g=a,a=e)}else g=a,a=e;q--;a===e&&0===q&&d(Lh);return a}function L(){var a,b,c,w;q++;a=g;h.substr(g,5)===Ud?(b=Ud,g+=5):(b=e,0===q&&d(Mh));b===e&&(h.substr(g,5)===Vd?(b=Vd,g+=5):(b=e,0===q&&d(Nh)));if(b!==e){c=[];for(b=r();b!==e;)c.push(b),b=r();if(c!==e)if(b=kb(),b!==e){c=[];for(w=r();w!==e;)c.push(w),w=r();c!==e?a=b={limit:parseInt(b.value)}:(g=a,a=e)}else g=a,a=e;else g=a,a=e}else g=a,a=e;q--;a===e&&0===
q&&d(Oh);return a}function B(){var a,b,c,w;q++;a=g;h.substr(g,6)===Wd?(b=Wd,g+=6):(b=e,0===q&&d(Ph));b===e&&(h.substr(g,6)===Xd?(b=Xd,g+=6):(b=e,0===q&&d(Qh)));if(b!==e){c=[];for(b=r();b!==e;)c.push(b),b=r();if(c!==e)if(b=kb(),b!==e){c=[];for(w=r();w!==e;)c.push(w),w=r();c!==e?a=b={offset:parseInt(b.value)}:(g=a,a=e)}else g=a,a=e;else g=a,a=e}else g=a,a=e;q--;a===e&&0===q&&d(Rh);return a}function K(){var a;q++;a=ka();a===e&&(a=Jb(),a===e&&(a=Kb(),a===e&&(a=Lb(),a===e&&(h.substr(g,5)===Yb?(a=Yb,g+=
5):(a=e,0===q&&d(Yd))))));q--;a===e&&0===q&&d(Sh);return a}function C(){var a,b,c,w,f,k,l,n;q++;a=g;b=u();if(b!==e){c=[];for(w=r();w!==e;)c.push(w),w=r();if(c!==e){q++;q++;c=g;h.substr(g,4)===Zd?(w=Zd,g+=4):(w=e,0===q&&d(Th));w===e&&(h.substr(g,4)===$d?(w=$d,g+=4):(w=e,0===q&&d(Uh)));if(w!==e){f=[];for(w=r();w!==e;)f.push(w),w=r();if(f!==e)if(w=ka(),w!==e){k=[];for(f=r();f!==e;)k.push(f),f=r();if(k!==e){f=g;h.substr(g,4)===ae?(k=ae,g+=4):(k=e,0===q&&d(Vh));k===e&&(h.substr(g,4)===be?(k=be,g+=4):(k=
e,0===q&&d(Wh)));if(k!==e){l=[];for(n=r();n!==e;)l.push(n),n=r();l!==e?(n=sa(),n!==e?f=k=[k,l,n]:(g=f,f=e)):(g=f,f=e)}else g=f,f=e;f===e&&(f=null);f!==e?(c=f,f={kind:"load",token:"executableunit"},f.sourceGraph=w,null!=c&&(f.destinyGraph=c[2]),c=f):(g=c,c=e)}else g=c,c=e}else g=c,c=e;else g=c,c=e}else g=c,c=e;q--;c===e&&0===q&&d(Xh);w=c;if(w===e){q++;w=g;h.substr(g,5)===ce?(c=ce,g+=5):(c=e,0===q&&d(Yh));c===e&&(h.substr(g,5)===de?(c=de,g+=5):(c=e,0===q&&d(Zh)));if(c!==e){c=[];for(f=r();f!==e;)c.push(f),
f=r();if(c!==e)if(h.substr(g,6)===qb?(f=qb,g+=6):(f=e,0===q&&d(Nc)),f===e&&(h.substr(g,6)===rb?(f=rb,g+=6):(f=e,0===q&&d(Oc))),f===e&&(f=null),f!==e){f=[];for(c=r();c!==e;)f.push(c),c=r();f!==e?(c=xa(),c!==e?(w={kind:"clear",token:"executableunit"},w.destinyGraph=c):(g=w,w=e)):(g=w,w=e)}else g=w,w=e;else g=w,w=e}else g=w,w=e;q--;w===e&&0===q&&d($h);if(w===e){q++;w=g;h.substr(g,4)===ee?(c=ee,g+=4):(c=e,0===q&&d(ai));c===e&&(h.substr(g,4)===fe?(c=fe,g+=4):(c=e,0===q&&d(bi)));if(c!==e){c=[];for(f=r();f!==
e;)c.push(f),f=r();if(c!==e)if(h.substr(g,6)===qb?(f=qb,g+=6):(f=e,0===q&&d(Nc)),f===e&&(h.substr(g,6)===rb?(f=rb,g+=6):(f=e,0===q&&d(Oc))),f===e&&(f=null),f!==e){f=[];for(c=r();c!==e;)f.push(c),c=r();f!==e?(c=xa(),c!==e?(w={kind:"drop",token:"executableunit"},w.destinyGraph=c):(g=w,w=e)):(g=w,w=e)}else g=w,w=e;else g=w,w=e}else g=w,w=e;q--;w===e&&0===q&&d(ci);if(w===e){q++;w=g;h.substr(g,6)===ge?(c=ge,g+=6):(c=e,0===q&&d(di));c===e&&(h.substr(g,6)===he?(c=he,g+=6):(c=e,0===q&&d(ei)));if(c!==e){c=
[];for(f=r();f!==e;)c.push(f),f=r();if(c!==e)if(h.substr(g,6)===qb?(f=qb,g+=6):(f=e,0===q&&d(Nc)),f===e&&(h.substr(g,6)===rb?(f=rb,g+=6):(f=e,0===q&&d(Oc))),f===e&&(f=null),f!==e){f=[];for(c=r();c!==e;)f.push(c),c=r();f!==e?(c=sa(),c!==e?(w={kind:"create",token:"executableunit"},w.destinyGraph=c):(g=w,w=e)):(g=w,w=e)}else g=w,w=e;else g=w,w=e}else g=w,w=e;q--;w===e&&0===q&&d(fi);if(w===e){q++;w=g;h.substr(g,6)===Zb?(c=Zb,g+=6):(c=e,0===q&&d(ie));c===e&&(h.substr(g,6)===$b?(c=$b,g+=6):(c=e,0===q&&
d(je)));if(c!==e){c=[];for(f=r();f!==e;)c.push(f),f=r();if(c!==e)if(h.substr(g,4)===ac?(f=ac,g+=4):(f=e,0===q&&d(ke)),f===e&&(h.substr(g,4)===bc?(f=bc,g+=4):(f=e,0===q&&d(le))),f!==e){f=[];for(c=r();c!==e;)f.push(c),c=r();f!==e?(c=J(),c!==e?(w={kind:"insertdata",token:"executableunit"},w.quads=c):(g=w,w=e)):(g=w,w=e)}else g=w,w=e;else g=w,w=e}else g=w,w=e;q--;w===e&&0===q&&d(gi);if(w===e){q++;w=g;h.substr(g,6)===sb?(c=sb,g+=6):(c=e,0===q&&d(Pc));c===e&&(h.substr(g,6)===tb?(c=tb,g+=6):(c=e,0===q&&
d(Qc)));if(c!==e){c=[];for(f=r();f!==e;)c.push(f),f=r();c!==e?(h.substr(g,4)===ac?(f=ac,g+=4):(f=e,0===q&&d(ke)),f===e&&(h.substr(g,4)===bc?(f=bc,g+=4):(f=e,0===q&&d(le))),f!==e?(c=J(),c!==e?(w={kind:"deletedata",token:"executableunit"},w.quads=c):(g=w,w=e)):(g=w,w=e)):(g=w,w=e)}else g=w,w=e;q--;w===e&&0===q&&d(hi);if(w===e){q++;w=g;h.substr(g,6)===sb?(c=sb,g+=6):(c=e,0===q&&d(Pc));c===e&&(h.substr(g,6)===tb?(c=tb,g+=6):(c=e,0===q&&d(Qc)));if(c!==e){c=[];for(f=r();f!==e;)c.push(f),f=r();if(c!==e)if(h.substr(g,
5)===Ta?(f=Ta,g+=5):(f=e,0===q&&d(Qb)),f===e&&(h.substr(g,5)===Ua?(f=Ua,g+=5):(f=e,0===q&&d(Rb))),f!==e){c=[];for(f=r();f!==e;)c.push(f),f=r();if(c!==e)if(f=W(),f!==e){w={kind:"modify"};w.pattern=f;w.with=null;w.using=null;c=[];f=f.patterns[0];f=null==f.triplesContext&&null!=f.patterns?f.patterns[0].triplesContext:f.triplesContext;for(k=0;k<f.length;k++)l={},n=f[k],l.subject=n.subject,l.predicate=n.predicate,l.object=n.object,l.graph=n.graph,c.push(l);w.delete=c}else g=w,w=e;else g=w,w=e}else g=w,
w=e;else g=w,w=e}else g=w,w=e;q--;w===e&&0===q&&d(ii);if(w===e){var m;q++;f=c=g;h.substr(g,4)===me?(k=me,g+=4):(k=e,0===q&&d(ji));k===e&&(h.substr(g,4)===ne?(k=ne,g+=4):(k=e,0===q&&d(ki)));if(k!==e){w=[];for(l=r();l!==e;)w.push(l),l=r();w!==e?(l=ka(),l!==e?f=k=[k,w,l]:(g=f,f=e)):(g=f,f=e)}else g=f,f=e;f===e&&(f=null);if(f!==e){k=[];for(w=r();w!==e;)k.push(w),w=r();if(k!==e){w=g;q++;k=g;h.substr(g,6)===sb?(l=sb,g+=6):(l=e,0===q&&d(Pc));l===e&&(h.substr(g,6)===tb?(l=tb,g+=6):(l=e,0===q&&d(Qc)));l!==
e?(l=H(),l!==e?k=l:(g=k,k=e)):(g=k,k=e);q--;k===e&&0===q&&d(li);l=k;if(l!==e){k=[];for(n=r();n!==e;)k.push(n),n=r();k!==e?(n=N(),n===e&&(n=null),n!==e?w=l=[l,k,n]:(g=w,w=e)):(g=w,w=e)}else g=w,w=e;w===e&&(w=N());if(w!==e){l=[];for(k=r();k!==e;)l.push(k),k=r();if(l!==e){k=[];for(n=F();n!==e;)k.push(n),n=F();if(k!==e){n=[];for(l=r();l!==e;)n.push(l),l=r();if(n!==e)if(h.substr(g,5)===Ta?(l=Ta,g+=5):(l=e,0===q&&d(Qb)),l===e&&(h.substr(g,5)===Ua?(l=Ua,g+=5):(l=e,0===q&&d(Rb))),l!==e){n=[];for(l=r();l!==
e;)n.push(l),l=r();if(n!==e)if(l=W(),l!==e){n=[];for(m=r();m!==e;)n.push(m),m=r();n!==e?(c=f,f=k,k={kind:"modify"},k.with=""!=c&&null!=c?c[2]:null,3!==w.length||""!==w[2]&&null!=w[2]?3===w.length&&null!=w[0].length&&null!=w[1].length&&null!=w[2].length?(k.delete=w[0],k.insert=w[2]):(k.insert=w,k.delete=null):(k.delete=w[0],k.insert=null),""!=f&&(k.using=f),k.pattern=l,c=k):(g=c,c=e)}else g=c,c=e;else g=c,c=e}else g=c,c=e;else g=c,c=e}else g=c,c=e}else g=c,c=e}else g=c,c=e}else g=c,c=e}else g=c,c=
e;q--;c===e&&0===q&&d(mi);w=c}}}}}}}q--;w===e&&0===q&&d(ni);if(w!==e){c=g;f=[];for(k=r();k!==e;)f.push(k),k=r();if(f!==e)if(59===h.charCodeAt(g)?(k=Ma,g++):(k=e,0===q&&d(Na)),k!==e){l=[];for(n=r();n!==e;)l.push(n),n=r();l!==e?(n=C(),n===e&&(n=null),n!==e?c=f=[f,k,l,n]:(g=c,c=e)):(g=c,c=e)}else g=c,c=e;else g=c,c=e;c===e&&(c=null);c!==e?(a=c,c={token:"query",kind:"update"},c.prologue=b,b=[w],null!=a&&null!=a.length&&null!=a[3]&&null!=a[3].units&&(b=b.concat(a[3].units)),c.units=b,a=c):(g=a,a=e)}else g=
a,a=e}else g=a,a=e}else g=a,a=e;q--;a===e&&0===q&&d(oi);return a}function N(){var a,b;q++;a=g;h.substr(g,6)===Zb?(b=Zb,g+=6):(b=e,0===q&&d(ie));b===e&&(h.substr(g,6)===$b?(b=$b,g+=6):(b=e,0===q&&d(je)));b!==e?(b=H(),b!==e?a=b:(g=a,a=e)):(g=a,a=e);q--;a===e&&0===q&&d(pi);return a}function F(){var a,b,c,f,k;q++;a=g;b=[];for(c=r();c!==e;)b.push(c),c=r();if(b!==e)if(h.substr(g,5)===oe?(c=oe,g+=5):(c=e,0===q&&d(qi)),c===e&&(h.substr(g,5)===pe?(c=pe,g+=5):(c=e,0===q&&d(ri))),c!==e){c=[];for(b=r();b!==e;)c.push(b),
b=r();if(c!==e){b=ka();if(b===e)if(b=g,h.substr(g,5)===ob?(c=ob,g+=5):(c=e,0===q&&d(Lc)),c===e&&(h.substr(g,5)===pb?(c=pb,g+=5):(c=e,0===q&&d(Mc))),c!==e){f=[];for(k=r();k!==e;)f.push(k),k=r();f!==e?(k=ka(),k!==e?b=c=[c,f,k]:(g=b,b=e)):(g=b,b=e)}else g=b,b=e;b!==e?(b=null!=b.length?{kind:"named",uri:b[2]}:{kind:"default",uri:b},a=b):(g=a,a=e)}else g=a,a=e}else g=a,a=e;else g=a,a=e;q--;a===e&&0===q&&d(si);return a}function sa(){var a,b,c;q++;a=g;h.substr(g,5)===ub?(b=ub,g+=5):(b=e,0===q&&d(Rc));b===
e&&(h.substr(g,5)===vb?(b=vb,g+=5):(b=e,0===q&&d(Sc)));if(b!==e){b=[];for(c=r();c!==e;)b.push(c),c=r();b!==e?(c=ka(),c!==e?a=c:(g=a,a=e)):(g=a,a=e)}else g=a,a=e;q--;a===e&&0===q&&d(ti);return a}function xa(){var a;q++;a=sa();a===e&&(h.substr(g,7)===qe?(a=qe,g+=7):(a=e,0===q&&d(ui)),a===e&&(h.substr(g,7)===re?(a=re,g+=7):(a=e,0===q&&d(vi))),a!==e&&(a="default"),a===e&&(h.substr(g,5)===ob?(a=ob,g+=5):(a=e,0===q&&d(Lc)),a===e&&(h.substr(g,5)===pb?(a=pb,g+=5):(a=e,0===q&&d(Mc))),a!==e&&(a="named"),a===
e&&(h.substr(g,3)===se?(a=se,g+=3):(a=e,0===q&&d(wi)),a===e&&(h.substr(g,3)===te?(a=te,g+=3):(a=e,0===q&&d(xi))),a!==e&&(a="all"))));q--;a===e&&0===q&&d(yi);return a}function H(){var a,b,c,f;q++;a=g;b=[];for(c=r();c!==e;)b.push(c),c=r();if(b!==e)if(123===h.charCodeAt(g)?(c=Ca,g++):(c=e,0===q&&d(Da)),c!==e){c=[];for(b=r();b!==e;)c.push(b),b=r();if(c!==e)if(b=Q(),b!==e){c=[];for(f=r();f!==e;)c.push(f),f=r();if(c!==e)if(125===h.charCodeAt(g)?(f=ua,g++):(f=e,0===q&&d(va)),f!==e){c=[];for(f=r();f!==e;)c.push(f),
f=r();c!==e?a=b=b.quadsContext:(g=a,a=e)}else g=a,a=e;else g=a,a=e}else g=a,a=e;else g=a,a=e}else g=a,a=e;else g=a,a=e;q--;a===e&&0===q&&d(zi);return a}function J(){var a,b,c,f;q++;a=g;b=[];for(c=r();c!==e;)b.push(c),c=r();if(b!==e)if(123===h.charCodeAt(g)?(c=Ca,g++):(c=e,0===q&&d(Da)),c!==e){c=[];for(b=r();b!==e;)c.push(b),b=r();if(c!==e)if(b=Q(),b!==e){c=[];for(f=r();f!==e;)c.push(f),f=r();if(c!==e)if(125===h.charCodeAt(g)?(f=ua,g++):(f=e,0===q&&d(va)),f!==e){c=[];for(f=r();f!==e;)c.push(f),f=r();
c!==e?a=b=b.quadsContext:(g=a,a=e)}else g=a,a=e;else g=a,a=e}else g=a,a=e;else g=a,a=e}else g=a,a=e;else g=a,a=e;q--;a===e&&0===q&&d(Ai);return a}function Q(){var a,b,c,f,k,l,n;q++;a=g;b=ya();b===e&&(b=null);if(b!==e){c=[];f=g;k=ma();k!==e?(46===h.charCodeAt(g)?(l=pa,g++):(l=e,0===q&&d(qa)),l===e&&(l=null),l!==e?(n=ya(),n===e&&(n=null),n!==e?f=k=[k,l,n]:(g=f,f=e)):(g=f,f=e)):(g=f,f=e);for(;f!==e;)c.push(f),f=g,k=ma(),k!==e?(46===h.charCodeAt(g)?(l=pa,g++):(l=e,0===q&&d(qa)),l===e&&(l=null),l!==e?
(n=ya(),n===e&&(n=null),n!==e?f=k=[k,l,n]:(g=f,f=e)):(g=f,f=e)):(g=f,f=e);if(c!==e){a=b;b=[];if(null!=a&&null!=a.triplesContext)for(f=0;f<a.triplesContext.length;f++)k=a.triplesContext[f],k.graph=null,b.push(k);if(c&&0<c.length&&0<c[0].length&&(b=b.concat(c[0][0].quadsContext),null!=c[0][2]&&null!=c[0][2].triplesContext))for(f=0;f<c[0][2].triplesContext.length;f++)k=c[0][2].triplesContext[f],k.graph=null,b.push(k);a=b={token:"quads",quadsContext:b}}else g=a,a=e}else g=a,a=e;q--;a===e&&0===q&&d(Bi);
return a}function ma(){var a,b,c,f,k;q++;a=g;b=[];for(c=r();c!==e;)b.push(c),c=r();if(b!==e)if(h.substr(g,5)===ub?(c=ub,g+=5):(c=e,0===q&&d(Rc)),c===e&&(h.substr(g,5)===vb?(c=vb,g+=5):(c=e,0===q&&d(Sc))),c!==e){c=[];for(b=r();b!==e;)c.push(b),b=r();if(c!==e)if(b=gb(),b!==e){c=[];for(f=r();f!==e;)c.push(f),f=r();if(c!==e)if(123===h.charCodeAt(g)?(f=Ca,g++):(f=e,0===q&&d(Da)),f!==e){f=[];for(c=r();c!==e;)f.push(c),c=r();if(f!==e)if(c=ya(),c===e&&(c=null),c!==e){f=[];for(k=r();k!==e;)f.push(k),k=r();
if(f!==e)if(125===h.charCodeAt(g)?(k=ua,g++):(k=e,0===q&&d(va)),k!==e){f=[];for(k=r();k!==e;)f.push(k),k=r();if(f!==e){a=b;b=c;c=[];if(null!=b)for(f=0;f<b.triplesContext.length;f++)k=b.triplesContext[f],k.graph=a,c.push(k);a=b={token:"quadsnottriples",quadsContext:c}}else g=a,a=e}else g=a,a=e;else g=a,a=e}else g=a,a=e;else g=a,a=e}else g=a,a=e;else g=a,a=e}else g=a,a=e;else g=a,a=e}else g=a,a=e;else g=a,a=e;q--;a===e&&0===q&&d(Ci);return a}function ya(){var a,b,c,f,k,l,n;q++;a=g;b=fb();if(b!==e){c=
g;f=[];for(k=r();k!==e;)f.push(k),k=r();if(f!==e)if(46===h.charCodeAt(g)?(k=pa,g++):(k=e,0===q&&d(qa)),k!==e){l=[];for(n=r();n!==e;)l.push(n),n=r();l!==e?(n=ya(),n===e&&(n=null),n!==e?c=f=[f,k,l,n]:(g=c,c=e)):(g=c,c=e)}else g=c,c=e;else g=c,c=e;c===e&&(c=null);c!==e?(a=b.triplesContext,null!=c&&"object"===typeof c&&null!=c.length&&null!=c[3]&&null!=c[3].triplesContext&&(a=a.concat(c[3].triplesContext)),a=b={token:"triplestemplate",triplesContext:a}):(g=a,a=e)}else g=a,a=e;q--;a===e&&0===q&&d(Di);
return a}function W(){var a,b,c,f;q++;a=g;123===h.charCodeAt(g)?(b=Ca,g++):(b=e,0===q&&d(Da));if(b!==e){c=[];for(b=r();b!==e;)c.push(b),b=r();if(c!==e){var k;q++;f=g;k=n();k!==e?(b=y(),b!==e?(c=D(),c!==e?(f=k,k={kind:"select",token:"subselect"},k.projection=f.vars,k.modifier=f.modifier,k.pattern=b,null!=c&&null!=c.limit&&(k.limit=c.limit),null!=c&&null!=c.offset&&(k.offset=c.offset),null!=c&&null!=c.order&&""!=c.order&&(k.order=c.order),null!=c&&null!=c.group&&(k.group=c.group),f=k):(g=f,f=e)):(g=
f,f=e)):(g=f,f=e);q--;f===e&&0===q&&d(Ei);b=f;if(b!==e){c=[];for(f=r();f!==e;)c.push(f),f=r();c!==e?(125===h.charCodeAt(g)?(f=ua,g++):(f=e,0===q&&d(va)),f!==e?a=b:(g=a,a=e)):(g=a,a=e)}else g=a,a=e}else g=a,a=e}else g=a,a=e;if(a===e)if(a=g,123===h.charCodeAt(g)?(b=Ca,g++):(b=e,0===q&&d(Da)),b!==e){c=[];for(b=r();b!==e;)c.push(b),b=r();if(c!==e){var l,m,t,u,v;q++;c=g;b=aa();b===e&&(b=null);if(b!==e){k=[];for(f=r();f!==e;)k.push(f),f=r();if(k!==e){f=[];k=g;l=fa();if(l!==e){m=[];for(t=r();t!==e;)m.push(t),
t=r();if(m!==e)if(46===h.charCodeAt(g)?(t=pa,g++):(t=e,0===q&&d(qa)),t===e&&(t=null),t!==e){u=[];for(v=r();v!==e;)u.push(v),v=r();u!==e?(v=aa(),v===e&&(v=null),v!==e?k=l=[l,m,t,u,v]:(g=k,k=e)):(g=k,k=e)}else g=k,k=e;else g=k,k=e}else g=k,k=e;for(;k!==e;)if(f.push(k),k=g,l=fa(),l!==e){m=[];for(t=r();t!==e;)m.push(t),t=r();if(m!==e)if(46===h.charCodeAt(g)?(t=pa,g++):(t=e,0===q&&d(qa)),t===e&&(t=null),t!==e){u=[];for(v=r();v!==e;)u.push(v),v=r();u!==e?(v=aa(),v===e&&(v=null),v!==e?k=l=[l,m,t,u,v]:(g=
k,k=e)):(g=k,k=e)}else g=k,k=e;else g=k,k=e}else g=k,k=e;if(f!==e){k=f;c=[];null!=b&&b!=[]&&c.push(b);for(b=0;b<k.length;b++)for(f=0;f<k[b].length;f++)null!=k[b][f]&&null!=k[b][f].token&&c.push(k[b][f]);k=[];l=[];m=[];t=[];for(b=0;b<c.length;b++)if("triplespattern"!==c[b].token&&"filter"!==c[b].token&&"bind"!==c[b].token){if(0!=l.length||0!=m.length){u=[];for(f=0;f<l.length;f++)u=u.concat(l[f].triplesContext);0<u.length&&k.push({token:"basicgraphpattern",triplesContext:u});l=[]}k.push(c[b])}else"triplespattern"===
c[b].token?l.push(c[b]):"bind"===c[b].token?t.push(c[b]):m.push(c[b]);if(0!=l.length||0!=m.length){u=[];for(f=0;f<l.length;f++)u=u.concat(l[f].triplesContext);0<u.length&&k.push({token:"basicgraphpattern",triplesContext:u})}c=b={token:"groupgraphpattern",patterns:k,filters:m,binds:t}}else g=c,c=e}else g=c,c=e}else g=c,c=e;q--;c===e&&0===q&&d(Fi);b=c;if(b!==e){c=[];for(f=r();f!==e;)c.push(f),f=r();c!==e?(125===h.charCodeAt(g)?(f=ua,g++):(f=e,0===q&&d(va)),f!==e?a=b:(g=a,a=e)):(g=a,a=e)}else g=a,a=
e}else g=a,a=e}else g=a,a=e;q--;a===e&&0===q&&d(Gi);return a}function aa(){var a,b,c,f,k,l;q++;a=g;q++;c=g;f=[];for(b=r();b!==e;)f.push(b),b=r();if(f!==e)if(b=Ib(),b!==e){k=[];for(f=r();f!==e;)k.push(f),f=r();if(k!==e)if(f=mb(),f!==e){c=b;b=f.triplesContext;if(f.pairs)for(k=0;k<f.pairs.length;k++){l=f.pairs[k];var n=null;null!=l[1].length&&(l[1]=l[1][0]);c.token&&"triplesnodecollection"===c.token?(n={subject:c.chainSubject[0],predicate:l[0],object:l[1]},"path"===n.predicate.token&&"element"===n.predicate.kind&&
(n.predicate=n.predicate.value),b.push(n),b=b.concat(c.triplesContext)):(n={subject:c,predicate:l[0],object:l[1]},"path"===n.predicate.token&&"element"===n.predicate.kind&&(n.predicate=n.predicate.value),b.push(n))}f={token:"triplessamesubject"};f.triplesContext=b;f.chainSubject=c;c=f}else g=c,c=e;else g=c,c=e}else g=c,c=e;else g=c,c=e;if(c===e){c=g;f=[];for(b=r();b!==e;)f.push(b),b=r();if(f!==e)if(b=nb(),b!==e){k=[];for(f=r();f!==e;)k.push(f),f=r();if(k!==e){q++;var m,t,u,v,y,z,A,D;q++;l=g;n=ta();
n===e&&(n=Ba());if(n!==e){f=[];for(k=r();k!==e;)f.push(k),k=r();if(f!==e)if(k=Ab(),k!==e){f=[];m=g;t=[];for(u=r();u!==e;)t.push(u),u=r();if(t!==e)if(59===h.charCodeAt(g)?(u=Ma,g++):(u=e,0===q&&d(Na)),u!==e){v=[];for(y=r();y!==e;)v.push(y),y=r();if(v!==e){y=g;z=ta();z===e&&(z=Ba());if(z!==e){A=[];for(D=r();D!==e;)A.push(D),D=r();A!==e?(D=ia(),D!==e?y=z=[z,A,D]:(g=y,y=e)):(g=y,y=e)}else g=y,y=e;y===e&&(y=null);y!==e?m=t=[t,u,v,y]:(g=m,m=e)}else g=m,m=e}else g=m,m=e;else g=m,m=e;for(;m!==e;){f.push(m);
m=g;t=[];for(u=r();u!==e;)t.push(u),u=r();if(t!==e)if(59===h.charCodeAt(g)?(u=Ma,g++):(u=e,0===q&&d(Na)),u!==e){v=[];for(y=r();y!==e;)v.push(y),y=r();if(v!==e){y=g;z=ta();z===e&&(z=Ba());if(z!==e){A=[];for(D=r();D!==e;)A.push(D),D=r();A!==e?(D=ia(),D!==e?y=z=[z,A,D]:(g=y,y=e)):(g=y,y=e)}else g=y,y=e;y===e&&(y=null);y!==e?m=t=[t,u,v,y]:(g=m,m=e)}else g=m,m=e}else g=m,m=e;else g=m,m=e}if(f!==e){t=n;u=k;k={token:"propertylist"};l=[];n=[];for(m=0;m<u.length;m++)null!=u[m].triplesContext?(l=l.concat(u[m].triplesContext),
"triplesnodecollection"===u[m].token&&null!=u[m].chainSubject.length?n.push([t,u[m].chainSubject[0]]):n.push([t,u[m].chainSubject])):n.push([t,u[m]]);for(m=0;m<f.length;m++)for(u=f[m][3],t=u[0],u=u[2]||[],v=0;v<u.length;v++)null!=u[v].triplesContext?(l=l.concat(u[v].triplesContext),n.push([t,u[v].chainSubject])):n.push([t,u[v]]);k.pairs=n;k.triplesContext=l;l=k}else g=l,l=e}else g=l,l=e;else g=l,l=e}else g=l,l=e;q--;l===e&&0===q&&d(Hi);f=l;f===e&&(f=null);q--;f===e&&0===q&&d(Ii);if(f!==e){c=b;k=f;
b=c.triplesContext;f=c.chainSubject;if(null!=k&&null!=k.pairs)for(l=0;l<k.pairs.length;l++)if(n=k.pairs[l],null!=n[1].length&&(n[1]=n[1][0]),"triplesnodecollection"===c.token)for(m=0;m<f.length;m++)t=f[m],null!=t.triplesContext?(u={subject:t.chainSubject,predicate:n[0],object:n[1]},b.concat(t.triplesContext)):(u={subject:f[m],predicate:n[0],object:n[1]},b.push(u));else u={subject:f,predicate:n[0],object:n[1]},b.push(u);c={token:"triplessamesubject"};c.triplesContext=b;c.chainSubject=f}else g=c,c=
e}else g=c,c=e}else g=c,c=e;else g=c,c=e}q--;c===e&&0===q&&d(Ji);b=c;if(b!==e){c=g;f=[];for(k=r();k!==e;)f.push(k),k=r();f!==e?(46===h.charCodeAt(g)?(k=pa,g++):(k=e,0===q&&d(qa)),k!==e?(l=aa(),l===e&&(l=null),l!==e?c=f=[f,k,l]:(g=c,c=e)):(g=c,c=e)):(g=c,c=e);c===e&&(c=null);c!==e?(a=b.triplesContext,null!=c&&"object"===typeof c&&null!=c&&null!=c.length&&null!=c[2]&&null!=c[2].triplesContext&&(a=a.concat(c[2].triplesContext)),a=b={token:"triplespattern",triplesContext:a}):(g=a,a=e)}else g=a,a=e;q--;
a===e&&0===q&&d(Ki);return a}function fa(){var a;q++;var b,c,f,k,l,n,m;q++;b=g;c=W();if(c!==e){a=[];f=g;k=[];for(l=r();l!==e;)k.push(l),l=r();if(k!==e)if(h.substr(g,5)===cc?(l=cc,g+=5):(l=e,0===q&&d(ue)),l===e&&(h.substr(g,5)===dc?(l=dc,g+=5):(l=e,0===q&&d(ve))),l!==e){n=[];for(m=r();m!==e;)n.push(m),m=r();n!==e?(m=W(),m!==e?f=k=[k,l,n,m]:(g=f,f=e)):(g=f,f=e)}else g=f,f=e;else g=f,f=e;for(;f!==e;){a.push(f);f=g;k=[];for(l=r();l!==e;)k.push(l),l=r();if(k!==e)if(h.substr(g,5)===cc?(l=cc,g+=5):(l=e,
0===q&&d(ue)),l===e&&(h.substr(g,5)===dc?(l=dc,g+=5):(l=e,0===q&&d(ve))),l!==e){n=[];for(m=r();m!==e;)n.push(m),m=r();n!==e?(m=W(),m!==e?f=k=[k,l,n,m]:(g=f,f=e)):(g=f,f=e)}else g=f,f=e;else g=f,f=e}if(a!==e){if(0!==a.length){b={token:"graphunionpattern",value:[c]};for(c=0;c<a.length;c++)c==a.length-1?b.value.push(a[c][3]):(b.value.push(a[c][3]),b={token:"graphunionpattern",value:[b]});c=b}b=c}else g=b,b=e}else g=b,b=e;q--;b===e&&0===q&&d(Li);a=b;if(a===e){q++;a=g;b=[];for(c=r();c!==e;)b.push(c),c=
r();if(b!==e)if(h.substr(g,8)===we?(c=we,g+=8):(c=e,0===q&&d(Mi)),c===e&&(h.substr(g,8)===xe?(c=xe,g+=8):(c=e,0===q&&d(Ni))),c!==e){b=[];for(c=r();c!==e;)b.push(c),c=r();b!==e?(c=W(),c!==e?a=b={token:"optionalgraphpattern",value:c}:(g=a,a=e)):(g=a,a=e)}else g=a,a=e;else g=a,a=e;q--;a===e&&0===q&&d(Oi);if(a===e){q++;a=g;h.substr(g,5)===ye?(b=ye,g+=5):(b=e,0===q&&d(Pi));b===e&&(h.substr(g,5)===ze?(b=ze,g+=5):(b=e,0===q&&d(Qi)));if(b!==e){b=[];for(c=r();c!==e;)b.push(c),c=r();b!==e?(c=W(),c!==e?a=b=
{token:"minusgraphpattern",status:"todo",value:c}:(g=a,a=e)):(g=a,a=e)}else g=a,a=e;q--;a===e&&0===q&&d(Ri);if(a===e){q++;a=g;b=[];for(c=r();c!==e;)b.push(c),c=r();if(b!==e)if(h.substr(g,5)===ub?(c=ub,g+=5):(c=e,0===q&&d(Rc)),c===e&&(h.substr(g,5)===vb?(c=vb,g+=5):(c=e,0===q&&d(Sc))),c!==e){c=[];for(b=r();b!==e;)c.push(b),b=r();if(c!==e)if(b=gb(),b!==e){f=[];for(c=r();c!==e;)f.push(c),c=r();if(f!==e)if(c=W(),c!==e){a=b;b=c;for(c=0;c<b.patterns.length;c++)for(f=b.patterns[c],k=0;k<f.triplesContext.length;k++)f.triplesContext[k].graph=
a;b.token="groupgraphpattern";a=b}else g=a,a=e;else g=a,a=e}else g=a,a=e;else g=a,a=e}else g=a,a=e;else g=a,a=e;q--;a===e&&0===q&&d(Si);if(a===e&&(q++,a=g,h.substr(g,7)===Ae?(b=Ae,g+=7):(b=e,0===q&&d(Ti)),b!==e?(b=gb(),b!==e?(c=W(),c!==e?a=b={token:"servicegraphpattern",status:"todo",value:[b,c]}:(g=a,a=e)):(g=a,a=e)):(g=a,a=e),q--,a===e&&0===q&&d(Ui),a===e)){q++;a=g;b=[];for(c=r();c!==e;)b.push(c),c=r();if(b!==e)if(h.substr(g,6)===Be?(c=Be,g+=6):(c=e,0===q&&d(Vi)),c===e&&(h.substr(g,6)===Ce?(c=Ce,
g+=6):(c=e,0===q&&d(Wi))),c!==e){b=[];for(c=r();c!==e;)b.push(c),c=r();b!==e?(c=ca(),c!==e?a=b={token:"filter",value:c}:(g=a,a=e)):(g=a,a=e)}else g=a,a=e;else g=a,a=e;q--;a===e&&0===q&&d(Xi);if(a===e){q++;a=g;b=[];for(c=r();c!==e;)b.push(c),c=r();if(b!==e)if(h.substr(g,4)===De?(c=De,g+=4):(c=e,0===q&&d(Yi)),c===e&&(h.substr(g,4)===Ee?(c=Ee,g+=4):(c=e,0===q&&d(Zi))),c!==e){b=[];for(c=r();c!==e;)b.push(c),c=r();if(b!==e)if(40===h.charCodeAt(g)?(c=R,g++):(c=e,0===q&&d(S)),c!==e){c=[];for(b=r();b!==e;)c.push(b),
b=r();if(c!==e)if(b=P(),b!==e){c=[];for(f=r();f!==e;)c.push(f),f=r();if(c!==e)if(h.substr(g,2)===Ya?(f=Ya,g+=2):(f=e,0===q&&d(Vb)),f===e&&(h.substr(g,2)===Xa?(f=Xa,g+=2):(f=e,0===q&&d(Ub))),f!==e){f=[];for(c=r();c!==e;)f.push(c),c=r();if(f!==e)if(c=ja(),c!==e){f=[];for(k=r();k!==e;)f.push(k),k=r();f!==e?(41===h.charCodeAt(g)?(k=T,g++):(k=e,0===q&&d(U)),k!==e?a=b={token:"bind",expression:b,as:c}:(g=a,a=e)):(g=a,a=e)}else g=a,a=e;else g=a,a=e}else g=a,a=e;else g=a,a=e}else g=a,a=e;else g=a,a=e}else g=
a,a=e;else g=a,a=e}else g=a,a=e;else g=a,a=e;q--;a===e&&0===q&&d($i);if(a===e){q++;a=g;b=[];for(c=r();c!==e;)b.push(c),c=r();if(b!==e)if(h.substr(g,6)===Sb?(c=Sb,g+=6):(c=e,0===q&&d(wd)),c===e&&(h.substr(g,6)===Tb?(c=Tb,g+=6):(c=e,0===q&&d(xd))),c!==e){b=[];for(c=r();c!==e;)b.push(c),c=r();b!==e?(c=Aa(),c!==e?a=c:(g=a,a=e)):(g=a,a=e)}else g=a,a=e;else g=a,a=e;q--;a===e&&0===q&&d(aj)}}}}}}q--;a===e&&0===q&&d(bj);return a}function ca(){var a;q++;a=Ec();a===e&&(a=Fc(),a===e&&(a=da()));q--;a===e&&0===
q&&d(cj);return a}function Aa(){var a;q++;var b,c,f;q++;a=g;b=[];for(c=r();c!==e;)b.push(c),c=r();if(b!==e)if(c=ja(),c!==e){b=[];for(f=r();f!==e;)b.push(f),f=r();if(b!==e)if(123===h.charCodeAt(g)?(f=Ca,g++):(f=e,0===q&&d(Da)),f!==e){f=[];for(b=r();b!==e;)f.push(b),b=r();if(f!==e){b=[];for(f=ea();f!==e;)b.push(f),f=ea();b!==e?(125===h.charCodeAt(g)?(f=ua,g++):(f=e,0===q&&d(va)),f!==e?a=b={token:"inlineData",values:[{"var":c,value:b}]}:(g=a,a=e)):(g=a,a=e)}else g=a,a=e}else g=a,a=e;else g=a,a=e}else g=
a,a=e;else g=a,a=e;q--;a===e&&0===q&&d(dj);if(a===e){var k,l,n,m,t,u,v;q++;a=g;c=[];for(f=r();f!==e;)c.push(f),f=r();if(c!==e){f=Ja();if(f===e)if(f=g,40===h.charCodeAt(g)?(k=R,g++):(k=e,0===q&&d(S)),k!==e){l=[];for(n=r();n!==e;)l.push(n),n=r();if(l!==e){n=[];for(c=ja();c!==e;)n.push(c),c=ja();if(n!==e){c=[];for(b=r();b!==e;)c.push(b),b=r();c!==e?(41===h.charCodeAt(g)?(b=T,g++):(b=e,0===q&&d(U)),b!==e?f=k=[k,l,n,c,b]:(g=f,f=e)):(g=f,f=e)}else g=f,f=e}else g=f,f=e}else g=f,f=e;if(f!==e){k=[];for(l=
r();l!==e;)k.push(l),l=r();if(k!==e)if(123===h.charCodeAt(g)?(l=Ca,g++):(l=e,0===q&&d(Da)),l!==e){n=[];for(c=r();c!==e;)n.push(c),c=r();if(n!==e){c=[];b=g;f=[];for(k=r();k!==e;)f.push(k),k=r();if(f!==e)if(40===h.charCodeAt(g)?(k=R,g++):(k=e,0===q&&d(S)),k!==e){l=[];for(n=r();n!==e;)l.push(n),n=r();if(l!==e){n=[];for(m=ea();m!==e;)n.push(m),m=ea();if(n!==e){m=[];for(t=r();t!==e;)m.push(t),t=r();if(m!==e)if(41===h.charCodeAt(g)?(t=T,g++):(t=e,0===q&&d(U)),t!==e){u=[];for(v=r();v!==e;)u.push(v),v=r();
u!==e?b=f=[f,k,l,n,m,t,u]:(g=b,b=e)}else g=b,b=e;else g=b,b=e}else g=b,b=e}else g=b,b=e}else g=b,b=e;else g=b,b=e;for(b===e&&(b=Ja());b!==e;){c.push(b);b=g;f=[];for(k=r();k!==e;)f.push(k),k=r();if(f!==e)if(40===h.charCodeAt(g)?(k=R,g++):(k=e,0===q&&d(S)),k!==e){l=[];for(n=r();n!==e;)l.push(n),n=r();if(l!==e){n=[];for(m=ea();m!==e;)n.push(m),m=ea();if(n!==e){m=[];for(t=r();t!==e;)m.push(t),t=r();if(m!==e)if(41===h.charCodeAt(g)?(t=T,g++):(t=e,0===q&&d(U)),t!==e){u=[];for(v=r();v!==e;)u.push(v),v=r();
u!==e?b=f=[f,k,l,n,m,t,u]:(g=b,b=e)}else g=b,b=e;else g=b,b=e}else g=b,b=e}else g=b,b=e}else g=b,b=e;else g=b,b=e;b===e&&(b=Ja())}if(c!==e){b=[];for(f=r();f!==e;)b.push(f),f=r();b!==e?(125===h.charCodeAt(g)?(f=ua,g++):(f=e,0===q&&d(va)),f!==e?a=c={token:"inlineData",values:[],todo:!0}:(g=a,a=e)):(g=a,a=e)}else g=a,a=e}else g=a,a=e}else g=a,a=e;else g=a,a=e}else g=a,a=e}else g=a,a=e;q--;a===e&&0===q&&d(ej)}q--;a===e&&0===q&&d(fj);return a}function ea(){var a,b,c,f;q++;a=g;b=[];for(c=r();c!==e;)b.push(c),
c=r();if(b!==e)if(c=Mb(),c===e&&(c=Jb(),c===e&&(c=Kb(),c===e&&(c=Lb(),c===e&&(h.substr(g,5)===Yb?(c=Yb,g+=5):(c=e,0===q&&d(Yd)))))),c!==e){b=[];for(f=r();f!==e;)b.push(f),f=r();b!==e?a=c:(g=a,a=e)}else g=a,a=e;else g=a,a=e;q--;a===e&&0===q&&d(gj);return a}function da(){var a,b,c,f;q++;a=g;b=ka();if(b!==e){c=[];for(f=r();f!==e;)c.push(f),f=r();c!==e?(f=Oa(),f!==e?(a={token:"expression",expressionType:"irireforfunction"},a.iriref=b,a.args=f.value):(g=a,a=e)):(g=a,a=e)}else g=a,a=e;q--;a===e&&0===q&&
d(hj);return a}function Oa(){var a,b,c,f,k,l,n,m;q++;b=Ja();b!==e&&(b={token:"args",value:[]});a=b;if(a===e)if(a=g,40===h.charCodeAt(g)?(b=R,g++):(b=e,0===q&&d(S)),b!==e){c=[];for(b=r();b!==e;)c.push(b),b=r();if(c!==e)if(h.substr(g,8)===na?(b=na,g+=8):(b=e,0===q&&d(Va)),b===e&&(h.substr(g,8)===oa?(b=oa,g+=8):(b=e,0===q&&d(Wa))),b===e&&(b=null),b!==e){f=[];for(c=r();c!==e;)f.push(c),c=r();if(f!==e)if(c=P(),c!==e){k=[];for(f=r();f!==e;)k.push(f),f=r();if(k!==e){f=[];k=g;44===h.charCodeAt(g)?(l=ga,g++):
(l=e,0===q&&d(ha));if(l!==e){n=[];for(m=r();m!==e;)n.push(m),m=r();n!==e?(m=P(),m!==e?k=l=[l,n,m]:(g=k,k=e)):(g=k,k=e)}else g=k,k=e;for(;k!==e;)if(f.push(k),k=g,44===h.charCodeAt(g)?(l=ga,g++):(l=e,0===q&&d(ha)),l!==e){n=[];for(m=r();m!==e;)n.push(m),m=r();n!==e?(m=P(),m!==e?k=l=[l,n,m]:(g=k,k=e)):(g=k,k=e)}else g=k,k=e;if(f!==e)if(41===h.charCodeAt(g)?(k=T,g++):(k=e,0===q&&d(U)),k!==e){a=b;b=c;c=[];for(k=0;k<f.length;k++)c.push(f[k][2]);f={token:"args"};f.value=[b].concat(c);null!=a&&"DISTINCT"===
a.toUpperCase()?f.distinct=!0:f.distinct=!1;a=f}else g=a,a=e;else g=a,a=e}else g=a,a=e}else g=a,a=e;else g=a,a=e}else g=a,a=e;else g=a,a=e}else g=a,a=e;q--;a===e&&0===q&&d(ij);return a}function Pa(){var a,b,c,f,k,l,n;q++;b=Ja();b!==e&&(b={token:"args",value:[]});a=b;if(a===e)if(a=g,40===h.charCodeAt(g)?(b=R,g++):(b=e,0===q&&d(S)),b!==e){c=[];for(b=r();b!==e;)c.push(b),b=r();if(c!==e)if(b=ka(),b===e&&(b=P()),b!==e){f=[];for(c=r();c!==e;)f.push(c),c=r();if(f!==e){c=[];f=g;44===h.charCodeAt(g)?(k=ga,
g++):(k=e,0===q&&d(ha));if(k!==e){l=[];for(n=r();n!==e;)l.push(n),n=r();l!==e?(n=ka(),n===e&&(n=P()),n!==e?f=k=[k,l,n]:(g=f,f=e)):(g=f,f=e)}else g=f,f=e;for(;f!==e;)if(c.push(f),f=g,44===h.charCodeAt(g)?(k=ga,g++):(k=e,0===q&&d(ha)),k!==e){l=[];for(n=r();n!==e;)l.push(n),n=r();l!==e?(n=ka(),n===e&&(n=P()),n!==e?f=k=[k,l,n]:(g=f,f=e)):(g=f,f=e)}else g=f,f=e;if(c!==e)if(41===h.charCodeAt(g)?(f=T,g++):(f=e,0===q&&d(U)),f!==e){a=b;b=[];for(f=0;f<c.length;f++)b.push(c[f][2]);c={token:"args"};c.value=[a].concat(b);
a=c}else g=a,a=e;else g=a,a=e}else g=a,a=e}else g=a,a=e;else g=a,a=e}else g=a,a=e;q--;a===e&&0===q&&d(jj);return a}function eb(){var a,b,c,f,k,l,n;q++;a=g;b=fb();if(b!==e){c=g;f=[];for(k=r();k!==e;)f.push(k),k=r();if(f!==e)if(46===h.charCodeAt(g)?(k=pa,g++):(k=e,0===q&&d(qa)),k!==e){l=[];for(n=r();n!==e;)l.push(n),n=r();l!==e?(n=eb(),n===e&&(n=null),n!==e?c=f=[f,k,l,n]:(g=c,c=e)):(g=c,c=e)}else g=c,c=e;else g=c,c=e;c===e&&(c=null);c!==e?(a=b.triplesContext,null!=c&&"object"===typeof c&&null!=c.length&&
null!=c[3]&&null!=c[3].triplesContext&&(a=a.concat(c[3].triplesContext)),a=b={token:"triplestemplate",triplesContext:a}):(g=a,a=e)}else g=a,a=e;q--;a===e&&0===q&&d(kj);return a}function fb(){var a,b,c,f;q++;a=g;b=[];for(c=r();c!==e;)b.push(c),c=r();if(b!==e)if(c=Ib(),c!==e){f=[];for(b=r();b!==e;)f.push(b),b=r();if(f!==e)if(b=ba(),b!==e){a=b.triplesContext;if(b.pairs)for(f=0;f<b.pairs.length;f++){var h=b.pairs[f],k=null;null!=h[1].length&&(h[1]=h[1][0]);c.token&&"triplesnodecollection"===c.token?(k=
{subject:c.chainSubject[0],predicate:h[0],object:h[1]},a.push(k),a=a.concat(c.triplesContext)):(k={subject:c,predicate:h[0],object:h[1]},a.push(k))}b={token:"triplessamesubject"};b.triplesContext=a;b.chainSubject=c;a=b}else g=a,a=e;else g=a,a=e}else g=a,a=e;else g=a,a=e;if(a===e){a=g;b=[];for(c=r();c!==e;)b.push(c),c=r();if(b!==e)if(c=la(),c!==e){f=[];for(b=r();b!==e;)f.push(b),b=r();if(f!==e)if(q++,b=ba(),b===e&&(b=null),q--,b===e&&0===q&&d(lj),b!==e){f=b;a=c.triplesContext;b=c.chainSubject;if(f.pairs)for(h=
0;h<f.pairs.length;h++)if(k=f.pairs[h],null!=k[1].length&&(k[1]=k[1][0]),"triplesnodecollection"===c.token)for(var l=0;l<b.length;l++){var n=b[l];if(null!=n.triplesContext){var m={subject:n.chainSubject,predicate:k[0],object:k[1]};a.concat(n.triplesContext)}else m={subject:b[l],predicate:k[0],object:k[1]},a.push(m)}else m={subject:b,predicate:k[0],object:k[1]},a.push(m);c={token:"triplessamesubject"};c.triplesContext=a;c.chainSubject=b;a=c}else g=a,a=e;else g=a,a=e}else g=a,a=e;else g=a,a=e}q--;a===
e&&0===q&&d(mj);return a}function ba(){var a,b,c,f,k,l,n,m,t,u,v,y;q++;a=g;b=Qa();if(b!==e){c=[];for(f=r();f!==e;)c.push(f),f=r();if(c!==e)if(f=ia(),f!==e){c=[];k=g;l=[];for(n=r();n!==e;)l.push(n),n=r();if(l!==e)if(59===h.charCodeAt(g)?(n=Ma,g++):(n=e,0===q&&d(Na)),n!==e){m=[];for(t=r();t!==e;)m.push(t),t=r();if(m!==e){t=g;u=Qa();if(u!==e){v=[];for(y=r();y!==e;)v.push(y),y=r();v!==e?(y=ia(),y!==e?t=u=[u,v,y]:(g=t,t=e)):(g=t,t=e)}else g=t,t=e;t===e&&(t=null);t!==e?k=l=[l,n,m,t]:(g=k,k=e)}else g=k,
k=e}else g=k,k=e;else g=k,k=e;for(;k!==e;){c.push(k);k=g;l=[];for(n=r();n!==e;)l.push(n),n=r();if(l!==e)if(59===h.charCodeAt(g)?(n=Ma,g++):(n=e,0===q&&d(Na)),n!==e){m=[];for(t=r();t!==e;)m.push(t),t=r();if(m!==e){t=g;u=Qa();if(u!==e){v=[];for(y=r();y!==e;)v.push(y),y=r();v!==e?(y=ia(),y!==e?t=u=[u,v,y]:(g=t,t=e)):(g=t,t=e)}else g=t,t=e;t===e&&(t=null);t!==e?k=l=[l,n,m,t]:(g=k,k=e)}else g=k,k=e}else g=k,k=e;else g=k,k=e}if(c!==e){l=b;n=f;f={token:"propertylist"};a=[];b=[];for(k=0;k<n.length;k++)null!=
n[k].triplesContext?(a=a.concat(n[k].triplesContext),"triplesnodecollection"===n[k].token&&null!=n[k].chainSubject.length?b.push([l,n[k].chainSubject[0]]):b.push([l,n[k].chainSubject])):b.push([l,n[k]]);for(k=0;k<c.length;k++)for(n=c[k][3],l=n[0],n=n[2]||[],m=0;m<n.length;m++)null!=n[m].triplesContext?(a=a.concat(n[m].triplesContext),b.push([l,n[m].chainSubject])):b.push([l,n[m]]);f.pairs=b;f.triplesContext=a;a=f}else g=a,a=e}else g=a,a=e;else g=a,a=e}else g=a,a=e;q--;a===e&&0===q&&d(nj);return a}
function Ab(){var a,b,c,f,k,l,n;q++;a=g;b=ab();if(b!==e){c=[];for(f=r();f!==e;)c.push(f),f=r();if(c!==e){f=[];c=g;44===h.charCodeAt(g)?(k=ga,g++):(k=e,0===q&&d(ha));if(k!==e){l=[];for(n=r();n!==e;)l.push(n),n=r();l!==e?(n=ab(),n!==e?c=k=[k,l,n]:(g=c,c=e)):(g=c,c=e)}else g=c,c=e;for(;c!==e;)if(f.push(c),c=g,44===h.charCodeAt(g)?(k=ga,g++):(k=e,0===q&&d(ha)),k!==e){l=[];for(n=r();n!==e;)l.push(n),n=r();l!==e?(n=ab(),n!==e?c=k=[k,l,n]:(g=c,c=e)):(g=c,c=e)}else g=c,c=e;if(f!==e){a=f;f=[];f.push(b);for(b=
0;b<a.length;b++)for(c=0;c<a[b].length;c++)"object"==typeof a[b][c]&&null!=a[b][c].token&&f.push(a[b][c]);a=f}else g=a,a=e}else g=a,a=e}else g=a,a=e;q--;a===e&&0===q&&d(oj);return a}function ia(){var a,b,c,f,k,l,n;q++;a=g;b=bb();if(b!==e){c=[];for(f=r();f!==e;)c.push(f),f=r();if(c!==e){f=[];c=g;44===h.charCodeAt(g)?(k=ga,g++):(k=e,0===q&&d(ha));if(k!==e){l=[];for(n=r();n!==e;)l.push(n),n=r();l!==e?(n=bb(),n!==e?c=k=[k,l,n]:(g=c,c=e)):(g=c,c=e)}else g=c,c=e;for(;c!==e;)if(f.push(c),c=g,44===h.charCodeAt(g)?
(k=ga,g++):(k=e,0===q&&d(ha)),k!==e){l=[];for(n=r();n!==e;)l.push(n),n=r();l!==e?(n=bb(),n!==e?c=k=[k,l,n]:(g=c,c=e)):(g=c,c=e)}else g=c,c=e;if(f!==e){a=f;f=[];f.push(b);for(b=0;b<a.length;b++)for(c=0;c<a[b].length;c++)"object"==typeof a[b][c]&&null!=a[b][c].token&&f.push(a[b][c]);a=f}else g=a,a=e}else g=a,a=e}else g=a,a=e;q--;a===e&&0===q&&d(pj);return a}function ab(){var a;q++;a=za();q--;a===e&&0===q&&d(qj);return a}function bb(){var a;q++;a=Dc();q--;a===e&&0===q&&d(rj);return a}function Qa(){var a;
q++;a=gb();a===e&&(97===h.charCodeAt(g)?(a=ec,g++):(a=e,0===q&&d(fc)),a!==e&&(a=Fe()));q--;a===e&&0===q&&d(sj);return a}function mb(){var a,b,c,f,k,l,n,m,t,u,v;q++;a=g;b=ta();b===e&&(b=Ba());if(b!==e){c=[];for(f=r();f!==e;)c.push(f),f=r();if(c!==e)if(f=Ab(),f!==e){c=[];k=g;l=[];for(n=r();n!==e;)l.push(n),n=r();if(l!==e)if(59===h.charCodeAt(g)?(n=Ma,g++):(n=e,0===q&&d(Na)),n!==e){m=[];for(t=r();t!==e;)m.push(t),t=r();m!==e?(t=g,u=ta(),u===e&&(u=Ba()),u!==e?(v=ia(),v!==e?t=u=[u,v]:(g=t,t=e)):(g=t,t=
e),t===e&&(t=null),t!==e?k=l=[l,n,m,t]:(g=k,k=e)):(g=k,k=e)}else g=k,k=e;else g=k,k=e;for(;k!==e;){c.push(k);k=g;l=[];for(n=r();n!==e;)l.push(n),n=r();if(l!==e)if(59===h.charCodeAt(g)?(n=Ma,g++):(n=e,0===q&&d(Na)),n!==e){m=[];for(t=r();t!==e;)m.push(t),t=r();m!==e?(t=g,u=ta(),u===e&&(u=Ba()),u!==e?(v=ia(),v!==e?t=u=[u,v]:(g=t,t=e)):(g=t,t=e),t===e&&(t=null),t!==e?k=l=[l,n,m,t]:(g=k,k=e)):(g=k,k=e)}else g=k,k=e;else g=k,k=e}if(c!==e){l=b;n=f;f={token:"propertylist"};a=[];b=[];for(k=0;k<n.length;k++)null!=
n[k].triplesContext?(a=a.concat(n[k].triplesContext),"triplesnodecollection"===n[k].token&&null!=n[k].chainSubject.length?b.push([l,n[k].chainSubject[0]]):b.push([l,n[k].chainSubject])):b.push([l,n[k]]);for(k=0;k<c.length;k++)for(n=c[k][3],l=n[0],n=n[1]||[],m=0;m<n.length;m++)null!=n[m].triplesContext?(a=a.concat(n[m].triplesContext),b.push([l,n[m].chainSubject])):b.push([l,n[m]]);f.pairs=b;f.triplesContext=a;a=f}else g=a,a=e}else g=a,a=e;else g=a,a=e}else g=a,a=e;q--;a===e&&0===q&&d(tj);return a}
function ta(){var a;q++;a=lb();q--;a===e&&0===q&&d(uj);return a}function Ba(){var a;q++;a=ja();q--;a===e&&0===q&&d(vj);return a}function lb(){var a;q++;var b,c,f,k,l;q++;b=g;c=jb();if(c!==e){a=[];f=g;124===h.charCodeAt(g)?(k=gc,g++):(k=e,0===q&&d(hc));k!==e?(l=jb(),l!==e?f=k=[k,l]:(g=f,f=e)):(g=f,f=e);for(;f!==e;)a.push(f),f=g,124===h.charCodeAt(g)?(k=gc,g++):(k=e,0===q&&d(hc)),k!==e?(l=jb(),l!==e?f=k=[k,l]:(g=f,f=e)):(g=f,f=e);if(a!==e){if(null!=a&&0!==a.length){b=[];for(c=0;c<a.length;c++)b.push(a[1]);
a={token:"path",kind:"alternative"};a.value=b;c=a}b=c}else g=b,b=e}else g=b,b=e;q--;b===e&&0===q&&d(wj);a=b;q--;a===e&&0===q&&d(xj);return a}function jb(){var a,b,c,f,k,l;q++;a=g;b=X();if(b!==e){c=[];f=g;47===h.charCodeAt(g)?(k=cb,g++):(k=e,0===q&&d(db));k!==e?(l=X(),l!==e?f=k=[k,l]:(g=f,f=e)):(g=f,f=e);for(;f!==e;)c.push(f),f=g,47===h.charCodeAt(g)?(k=cb,g++):(k=e,0===q&&d(db)),k!==e?(l=X(),l!==e?f=k=[k,l]:(g=f,f=e)):(g=f,f=e);if(c!==e){if(null!=c&&0!==c.length){a=[b];for(b=0;b<c.length;b++)a.push(c[b][1]);
c={token:"path",kind:"sequence"};c.value=a;b=c}a=b}else g=a,a=e}else g=a,a=e;q--;a===e&&0===q&&d(yj);return a}function I(){var a,b,c;q++;a=g;var f;q++;b=ka();if(b===e&&(97===h.charCodeAt(g)?(c=ec,g++):(c=e,0===q&&d(fc)),c!==e&&(c=Fe()),b=c,b===e)){b=g;33===h.charCodeAt(g)?(c=Tc,g++):(c=e,0===q&&d(Uc));if(c!==e){var k,l,n,m,t,r,u;f=Ra();if(f===e)if(f=g,40===h.charCodeAt(g)?(k=R,g++):(k=e,0===q&&d(S)),k!==e){l=g;n=Ra();if(n!==e){m=[];t=g;124===h.charCodeAt(g)?(r=gc,g++):(r=e,0===q&&d(hc));r!==e?(u=
Ra(),u!==e?t=r=[r,u]:(g=t,t=e)):(g=t,t=e);for(;t!==e;)m.push(t),t=g,124===h.charCodeAt(g)?(r=gc,g++):(r=e,0===q&&d(hc)),r!==e?(u=Ra(),u!==e?t=r=[r,u]:(g=t,t=e)):(g=t,t=e);m!==e?l=n=[n,m]:(g=l,l=e)}else g=l,l=e;l===e&&(l=null);l!==e?(41===h.charCodeAt(g)?(n=T,g++):(n=e,0===q&&d(U)),n!==e?f=k=[k,l,n]:(g=f,f=e)):(g=f,f=e)}else g=f,f=e;f!==e?b=c=[c,f]:(g=b,b=e)}else g=b,b=e;b===e&&(b=g,40===h.charCodeAt(g)?(c=R,g++):(c=e,0===q&&d(S)),c!==e?(f=lb(),f!==e?(41===h.charCodeAt(g)?(c=T,g++):(c=e,0===q&&d(U)),
c!==e?b=f:(g=b,b=e)):(g=b,b=e)):(g=b,b=e))}q--;b===e&&0===q&&d(zj);if(b!==e)if(q++,42===h.charCodeAt(g)?(c=Ka,g++):(c=e,0===q&&d(La)),c===e&&(63===h.charCodeAt(g)?(c=Vc,g++):(c=e,0===q&&d(Wc)),c===e&&(43===h.charCodeAt(g)?(c=Za,g++):(c=e,0===q&&d($a)),c===e&&(c=g,123===h.charCodeAt(g)?(f=Ca,g++):(f=e,0===q&&d(Da)),f!==e?(k=g,l=Eb(),l!==e?(n=g,44===h.charCodeAt(g)?(m=ga,g++):(m=e,0===q&&d(ha)),m!==e?(125===h.charCodeAt(g)?(t=ua,g++):(t=e,0===q&&d(va)),t===e&&(t=g,r=Eb(),r!==e?(125===h.charCodeAt(g)?
(u=ua,g++):(u=e,0===q&&d(va)),u!==e?t=r=[r,u]:(g=t,t=e)):(g=t,t=e)),t!==e?n=m=[m,t]:(g=n,n=e)):(g=n,n=e),n===e&&(125===h.charCodeAt(g)?(n=ua,g++):(n=e,0===q&&d(va))),n!==e?k=l=[l,n]:(g=k,k=e)):(g=k,k=e),k===e&&(k=g,44===h.charCodeAt(g)?(l=ga,g++):(l=e,0===q&&d(ha)),l!==e?(n=Eb(),n!==e?(125===h.charCodeAt(g)?(m=ua,g++):(m=e,0===q&&d(va)),m!==e?k=l=[l,n,m]:(g=k,k=e)):(g=k,k=e)):(g=k,k=e)),k!==e?c=f=[f,k]:(g=c,c=e)):(g=c,c=e)))),q--,c===e&&0===q&&d(Aj),c===e&&(c=null),c!==e){a=b;b=c;if(a.token&&"path"!=
a.token&&""==b)b=a;else if(a.token&&a.token!=v&&""!=b){var v={token:"path",kind:"element"};v.value=a;v.modifier=b;b=v}else a.modifier=b,b=a;a=b}else g=a,a=e;else g=a,a=e;q--;a===e&&0===q&&d(Bj);return a}function X(){var a,b;q++;a=I();a===e&&(a=g,94===h.charCodeAt(g)?(b=Ge,g++):(b=e,0===q&&d(He)),b!==e?(b=I(),b!==e?(a={token:"path",kind:"inversePath"},a.value=b):(g=a,a=e)):(g=a,a=e));q--;a===e&&0===q&&d(Cj);return a}function Ra(){var a,b,c;q++;a=ka();a===e&&(97===h.charCodeAt(g)?(a=ec,g++):(a=e,0===
q&&d(fc)),a===e&&(a=g,94===h.charCodeAt(g)?(b=Ge,g++):(b=e,0===q&&d(He)),b!==e?(c=ka(),c===e&&(97===h.charCodeAt(g)?(c=ec,g++):(c=e,0===q&&d(fc))),c!==e?a=b=[b,c]:(g=a,a=e)):(g=a,a=e)));q--;a===e&&0===q&&d(Dj);return a}function Eb(){var a;q++;a=kb();q--;a===e&&0===q&&d(Ej);return a}function nb(){var a;q++;var b,c,f;q++;a=g;b=[];for(c=r();c!==e;)b.push(c),c=r();if(b!==e)if(40===h.charCodeAt(g)?(c=R,g++):(c=e,0===q&&d(S)),c!==e){c=[];for(b=r();b!==e;)c.push(b),b=r();if(c!==e){b=[];c=za();if(c!==e)for(;c!==
e;)b.push(c),c=za();else b=e;if(b!==e){c=[];for(f=r();f!==e;)c.push(f),f=r();if(c!==e)if(41===h.charCodeAt(g)?(f=T,g++):(f=e,0===q&&d(U)),f!==e){c=[];for(f=r();f!==e;)c.push(f),f=r();c!==e?a=b:(g=a,a=e)}else g=a,a=e;else g=a,a=e}else g=a,a=e}else g=a,a=e}else g=a,a=e;else g=a,a=e;q--;a===e&&0===q&&d(Fj);if(a!==e){b=[];c=[];var k=null;for(f=0;f<a.length;f++)ra++,k=null,null==a[f].chainSubject&&null==a[f].triplesContext?k=a[f]:(k=a[f].chainSubject,b=b.concat(a[f].triplesContext)),k={subject:{token:"blank",
value:"_:"+ra},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first"},object:k},0==f&&c.push(k.subject),b.push(k),k=f===a.length-1?{subject:{token:"blank",value:"_:"+ra},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}:{subject:{token:"blank",value:"_:"+ra},predicate:{token:"uri",prefix:null,suffix:null,
value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"blank",value:"_:"+(ra+1)}},b.push(k);a={token:"triplesnodecollection",triplesContext:b,chainSubject:c}}if(a===e){q++;a=g;b=[];for(c=r();c!==e;)b.push(c),c=r();if(b!==e)if(91===h.charCodeAt(g)?(c=Xc,g++):(c=e,0===q&&d(Yc)),c!==e){c=[];for(b=r();b!==e;)c.push(b),b=r();if(c!==e)if(b=mb(),b!==e)if(93===h.charCodeAt(g)?(c=Zc,g++):(c=e,0===q&&d($c)),c!==e){c=[];for(f=r();f!==e;)c.push(f),f=r();if(c!==e){a=b;ra++;b={token:"blank",value:"_:"+
ra};c=[];for(f=0;f<a.pairs.length;f++){var k=a.pairs[f],l={};l.subject=b;l.predicate=k[0];null!=k[1].length&&(k[1]=k[1][0]);l.object=k[1];c.push(l)}a=b={token:"triplesnode",kind:"blanknodepropertylist",triplesContext:a.triplesContext.concat(c),chainSubject:b}}else g=a,a=e}else g=a,a=e;else g=a,a=e;else g=a,a=e}else g=a,a=e;else g=a,a=e;q--;a===e&&0===q&&d(Gj)}q--;a===e&&0===q&&d(Hj);return a}function la(){var a;q++;var b,c,f;q++;a=g;b=[];for(c=r();c!==e;)b.push(c),c=r();if(b!==e)if(40===h.charCodeAt(g)?
(c=R,g++):(c=e,0===q&&d(S)),c!==e){c=[];for(b=r();b!==e;)c.push(b),b=r();if(c!==e){b=[];c=Dc();if(c!==e)for(;c!==e;)b.push(c),c=Dc();else b=e;if(b!==e){c=[];for(f=r();f!==e;)c.push(f),f=r();if(c!==e)if(41===h.charCodeAt(g)?(f=T,g++):(f=e,0===q&&d(U)),f!==e){c=[];for(f=r();f!==e;)c.push(f),f=r();c!==e?a=b:(g=a,a=e)}else g=a,a=e;else g=a,a=e}else g=a,a=e}else g=a,a=e}else g=a,a=e;else g=a,a=e;q--;a===e&&0===q&&d(Ij);if(a!==e){b=[];c=[];var k=null;for(f=0;f<a.length;f++)ra++,k=null,null==a[f].chainSubject&&
null==a[f].triplesContext?k=a[f]:(k=a[f].chainSubject,b=b.concat(k.triplesContext)),k={subject:{token:"blank",value:"_:"+ra},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first"},object:k},0==f&&c.push(k.subject),b.push(k),k=f===a.length-1?{subject:{token:"blank",value:"_:"+ra},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}:
{subject:{token:"blank",value:"_:"+ra},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"blank",value:"_:"+(ra+1)}},b.push(k);a={token:"triplesnodecollection",triplesContext:b,chainSubject:c}}if(a===e){q++;a=g;b=[];for(c=r();c!==e;)b.push(c),c=r();if(b!==e)if(91===h.charCodeAt(g)?(c=Xc,g++):(c=e,0===q&&d(Yc)),c!==e){c=[];for(b=r();b!==e;)c.push(b),b=r();if(c!==e)if(b=ba(),b!==e){c=[];for(f=r();f!==e;)c.push(f),f=r();if(c!==e)if(93===
h.charCodeAt(g)?(f=Zc,g++):(f=e,0===q&&d($c)),f!==e){c=[];for(f=r();f!==e;)c.push(f),f=r();if(c!==e){a=b;ra++;b={token:"blank",value:"_:"+ra};c=[];for(f=0;f<a.pairs.length;f++){var k=a.pairs[f],l={};l.subject=b;l.predicate=k[0];null!=k[1].length&&(k[1]=k[1][0]);l.object=k[1];c.push(l)}a=b={token:"triplesnode",kind:"blanknodepropertylist",triplesContext:a.triplesContext.concat(c),chainSubject:b}}else g=a,a=e}else g=a,a=e;else g=a,a=e}else g=a,a=e;else g=a,a=e}else g=a,a=e;else g=a,a=e;q--;a===e&&0===
q&&d(Jj)}q--;a===e&&0===q&&d(Kj);return a}function za(){var a,b,c,f,h;q++;a=g;b=[];for(c=r();c!==e;)b.push(c),c=r();if(b!==e)if(c=Ib(),c!==e){f=[];for(h=r();h!==e;)f.push(h),h=r();f!==e?a=b=[b,c,f]:(g=a,a=e)}else g=a,a=e;else g=a,a=e;if(a===e){a=g;b=[];for(c=r();c!==e;)b.push(c),c=r();if(b!==e)if(c=nb(),c!==e){f=[];for(h=r();h!==e;)f.push(h),h=r();f!==e?a=b=[b,c,f]:(g=a,a=e)}else g=a,a=e;else g=a,a=e}a!==e&&(a=a[1]);q--;a===e&&0===q&&d(Lj);return a}function Dc(){var a,b,c,f,h;q++;a=g;b=[];for(c=r();c!==
e;)b.push(c),c=r();if(b!==e)if(c=Ib(),c!==e){f=[];for(h=r();h!==e;)f.push(h),h=r();f!==e?a=b=[b,c,f]:(g=a,a=e)}else g=a,a=e;else g=a,a=e;if(a===e){a=g;b=[];for(c=r();c!==e;)b.push(c),c=r();if(b!==e)if(c=la(),c!==e){f=[];for(h=r();h!==e;)f.push(h),h=r();f!==e?a=b=[b,c,f]:(g=a,a=e)}else g=a,a=e;else g=a,a=e}a!==e&&(a=a[1]);q--;a===e&&0===q&&d(Mj);return a}function Ib(){var a;q++;a=ja();if(a===e){q++;a=ka();if(a===e&&(a=Jb(),a===e&&(a=Kb(),a===e&&(a=Lb(),a===e)))){q++;var b;q++;a=g;h.substr(g,2)===Ie?
(b=Ie,g+=2):(b=e,0===q&&d(Nj));b!==e?(b=Je(),b!==e?a=b:(g=a,a=e)):(g=a,a=e);q--;a===e&&0===q&&d(Oj);a!==e&&(a={token:"blank",value:a});if(a===e){var c,f;q++;a=g;91===h.charCodeAt(g)?(b=Xc,g++):(b=e,0===q&&d(Yc));if(b!==e){c=[];for(f=r();f!==e;)c.push(f),f=r();c!==e?(93===h.charCodeAt(g)?(f=Zc,g++):(f=e,0===q&&d($c)),f!==e?a=b=[b,c,f]:(g=a,a=e)):(g=a,a=e)}else g=a,a=e;q--;a===e&&0===q&&d(Pj);a!==e&&(ra++,a={token:"blank",value:"_:"+ra})}q--;a===e&&0===q&&d(Qj);a===e&&(a=Ja())}q--;a===e&&0===q&&d(Rj)}q--;
a===e&&0===q&&d(Sj);return a}function gb(){var a;q++;a=ja();a===e&&(a=ka());q--;a===e&&0===q&&d(Tj);return a}function ja(){var a,b,c,f;q++;a=g;b=[];for(c=r();c!==e;)b.push(c),c=r();if(b!==e)if(q++,c=g,63===h.charCodeAt(g)?(b=Vc,g++):(b=e,0===q&&d(Wc)),b!==e?(b=Ke(),b!==e?c=b:(g=c,c=e)):(g=c,c=e),q--,c===e&&0===q&&d(Uj),c===e&&(q++,c=g,36===h.charCodeAt(g)?(b=Le,g++):(b=e,0===q&&d(Me)),b!==e?(b=Ke(),b!==e?c=b:(g=c,c=e)):(g=c,c=e),q--,c===e&&0===q&&d(Vj)),c!==e){b=[];for(f=r();f!==e;)b.push(f),f=r();
b!==e?(a={token:"var"},a.value=c):(g=a,a=e)}else g=a,a=e;else g=a,a=e;q--;a===e&&0===q&&d(Wj);return a}function P(){var a;q++;var b,c,f,k,l,n,m;q++;b=g;c=hb();if(c!==e){a=[];f=g;k=[];for(l=r();l!==e;)k.push(l),l=r();if(k!==e)if(h.substr(g,2)===ic?(l=ic,g+=2):(l=e,0===q&&d(Ne)),l!==e){n=[];for(m=r();m!==e;)n.push(m),m=r();n!==e?(m=hb(),m!==e?f=k=[k,l,n,m]:(g=f,f=e)):(g=f,f=e)}else g=f,f=e;else g=f,f=e;for(;f!==e;){a.push(f);f=g;k=[];for(l=r();l!==e;)k.push(l),l=r();if(k!==e)if(h.substr(g,2)===ic?(l=
ic,g+=2):(l=e,0===q&&d(Ne)),l!==e){n=[];for(m=r();m!==e;)n.push(m),m=r();n!==e?(m=hb(),m!==e?f=k=[k,l,n,m]:(g=f,f=e)):(g=f,f=e)}else g=f,f=e;else g=f,f=e}if(a!==e){if(0!==a.length){b={token:"expression",expressionType:"conditionalor"};c=[c];for(f=0;f<a.length;f++)c.push(a[f][3]);b.operands=c;c=b}b=c}else g=b,b=e}else g=b,b=e;q--;b===e&&0===q&&d(Xj);a=b;q--;a===e&&0===q&&d(Yj);return a}function hb(){var a,b,c,f,k,l,n,m;q++;a=g;b=Bb();if(b!==e){c=[];f=g;k=[];for(l=r();l!==e;)k.push(l),l=r();if(k!==
e)if(h.substr(g,2)===jc?(l=jc,g+=2):(l=e,0===q&&d(Oe)),l!==e){n=[];for(m=r();m!==e;)n.push(m),m=r();n!==e?(m=Bb(),m!==e?f=k=[k,l,n,m]:(g=f,f=e)):(g=f,f=e)}else g=f,f=e;else g=f,f=e;for(;f!==e;){c.push(f);f=g;k=[];for(l=r();l!==e;)k.push(l),l=r();if(k!==e)if(h.substr(g,2)===jc?(l=jc,g+=2):(l=e,0===q&&d(Oe)),l!==e){n=[];for(m=r();m!==e;)n.push(m),m=r();n!==e?(m=Bb(),m!==e?f=k=[k,l,n,m]:(g=f,f=e)):(g=f,f=e)}else g=f,f=e;else g=f,f=e}if(c!==e){if(0!==c.length){a={token:"expression",expressionType:"conditionaland"};
b=[b];for(f=0;f<c.length;f++)b.push(c[f][3]);a.operands=b;b=a}a=b}else g=a,a=e}else g=a,a=e;q--;a===e&&0===q&&d(Zj);return a}function Bb(){var a;q++;var b,c,f,k,l,n,m,t,u,v,y,z;q++;b=g;c=wa();if(c!==e){a=[];f=g;k=[];for(l=r();l!==e;)k.push(l),l=r();if(k!==e)if(61===h.charCodeAt(g)?(l=kc,g++):(l=e,0===q&&d(lc)),l!==e){n=[];for(m=r();m!==e;)n.push(m),m=r();n!==e?(m=wa(),m!==e?f=k=[k,l,n,m]:(g=f,f=e)):(g=f,f=e)}else g=f,f=e;else g=f,f=e;if(f===e){f=g;k=[];for(l=r();l!==e;)k.push(l),l=r();if(k!==e)if(h.substr(g,
2)===mc?(l=mc,g+=2):(l=e,0===q&&d(Pe)),l!==e){n=[];for(m=r();m!==e;)n.push(m),m=r();n!==e?(m=wa(),m!==e?f=k=[k,l,n,m]:(g=f,f=e)):(g=f,f=e)}else g=f,f=e;else g=f,f=e;if(f===e){f=g;k=[];for(l=r();l!==e;)k.push(l),l=r();if(k!==e)if(60===h.charCodeAt(g)?(l=ad,g++):(l=e,0===q&&d(bd)),l!==e){n=[];for(m=r();m!==e;)n.push(m),m=r();n!==e?(m=wa(),m!==e?f=k=[k,l,n,m]:(g=f,f=e)):(g=f,f=e)}else g=f,f=e;else g=f,f=e;if(f===e){f=g;k=[];for(l=r();l!==e;)k.push(l),l=r();if(k!==e)if(62===h.charCodeAt(g)?(l=cd,g++):
(l=e,0===q&&d(dd)),l!==e){n=[];for(m=r();m!==e;)n.push(m),m=r();n!==e?(m=wa(),m!==e?f=k=[k,l,n,m]:(g=f,f=e)):(g=f,f=e)}else g=f,f=e;else g=f,f=e;if(f===e){f=g;k=[];for(l=r();l!==e;)k.push(l),l=r();if(k!==e)if(h.substr(g,2)===nc?(l=nc,g+=2):(l=e,0===q&&d(Qe)),l!==e){n=[];for(m=r();m!==e;)n.push(m),m=r();n!==e?(m=wa(),m!==e?f=k=[k,l,n,m]:(g=f,f=e)):(g=f,f=e)}else g=f,f=e;else g=f,f=e;if(f===e){f=g;k=[];for(l=r();l!==e;)k.push(l),l=r();if(k!==e)if(h.substr(g,2)===oc?(l=oc,g+=2):(l=e,0===q&&d(Re)),l!==
e){n=[];for(m=r();m!==e;)n.push(m),m=r();n!==e?(m=wa(),m!==e?f=k=[k,l,n,m]:(g=f,f=e)):(g=f,f=e)}else g=f,f=e;else g=f,f=e;if(f===e){f=g;k=[];for(l=r();l!==e;)k.push(l),l=r();if(k!==e)if(73===h.charCodeAt(g)?(l=pc,g++):(l=e,0===q&&d(qc)),l===e&&(105===h.charCodeAt(g)?(l=rc,g++):(l=e,0===q&&d(sc))),l!==e)if(78===h.charCodeAt(g)?(n=wb,g++):(n=e,0===q&&d(xb)),n===e&&(110===h.charCodeAt(g)?(n=yb,g++):(n=e,0===q&&d(zb))),n!==e){m=[];for(t=r();t!==e;)m.push(t),t=r();m!==e?(t=Pa(),t!==e?f=k=[k,l,n,m,t]:(g=
f,f=e)):(g=f,f=e)}else g=f,f=e;else g=f,f=e;else g=f,f=e;if(f===e){f=g;k=[];for(l=r();l!==e;)k.push(l),l=r();if(k!==e)if(78===h.charCodeAt(g)?(l=wb,g++):(l=e,0===q&&d(xb)),l===e&&(110===h.charCodeAt(g)?(l=yb,g++):(l=e,0===q&&d(zb))),l!==e)if(79===h.charCodeAt(g)?(n=Se,g++):(n=e,0===q&&d(Te)),n===e&&(111===h.charCodeAt(g)?(n=Ue,g++):(n=e,0===q&&d(Ve))),n!==e)if(84===h.charCodeAt(g)?(m=We,g++):(m=e,0===q&&d(Xe)),m===e&&(116===h.charCodeAt(g)?(m=Ye,g++):(m=e,0===q&&d(Ze))),m!==e){t=[];for(u=r();u!==
e;)t.push(u),u=r();if(t!==e)if(73===h.charCodeAt(g)?(u=pc,g++):(u=e,0===q&&d(qc)),u===e&&(105===h.charCodeAt(g)?(u=rc,g++):(u=e,0===q&&d(sc))),u!==e)if(78===h.charCodeAt(g)?(v=wb,g++):(v=e,0===q&&d(xb)),v===e&&(110===h.charCodeAt(g)?(v=yb,g++):(v=e,0===q&&d(zb))),v!==e){y=[];for(z=r();z!==e;)y.push(z),z=r();y!==e?(z=Pa(),z!==e?f=k=[k,l,n,m,t,u,v,y,z]:(g=f,f=e)):(g=f,f=e)}else g=f,f=e;else g=f,f=e;else g=f,f=e}else g=f,f=e;else g=f,f=e;else g=f,f=e;else g=f,f=e}}}}}}}for(;f!==e;){a.push(f);f=g;k=[];
for(l=r();l!==e;)k.push(l),l=r();if(k!==e)if(61===h.charCodeAt(g)?(l=kc,g++):(l=e,0===q&&d(lc)),l!==e){n=[];for(m=r();m!==e;)n.push(m),m=r();n!==e?(m=wa(),m!==e?f=k=[k,l,n,m]:(g=f,f=e)):(g=f,f=e)}else g=f,f=e;else g=f,f=e;if(f===e){f=g;k=[];for(l=r();l!==e;)k.push(l),l=r();if(k!==e)if(h.substr(g,2)===mc?(l=mc,g+=2):(l=e,0===q&&d(Pe)),l!==e){n=[];for(m=r();m!==e;)n.push(m),m=r();n!==e?(m=wa(),m!==e?f=k=[k,l,n,m]:(g=f,f=e)):(g=f,f=e)}else g=f,f=e;else g=f,f=e;if(f===e){f=g;k=[];for(l=r();l!==e;)k.push(l),
l=r();if(k!==e)if(60===h.charCodeAt(g)?(l=ad,g++):(l=e,0===q&&d(bd)),l!==e){n=[];for(m=r();m!==e;)n.push(m),m=r();n!==e?(m=wa(),m!==e?f=k=[k,l,n,m]:(g=f,f=e)):(g=f,f=e)}else g=f,f=e;else g=f,f=e;if(f===e){f=g;k=[];for(l=r();l!==e;)k.push(l),l=r();if(k!==e)if(62===h.charCodeAt(g)?(l=cd,g++):(l=e,0===q&&d(dd)),l!==e){n=[];for(m=r();m!==e;)n.push(m),m=r();n!==e?(m=wa(),m!==e?f=k=[k,l,n,m]:(g=f,f=e)):(g=f,f=e)}else g=f,f=e;else g=f,f=e;if(f===e){f=g;k=[];for(l=r();l!==e;)k.push(l),l=r();if(k!==e)if(h.substr(g,
2)===nc?(l=nc,g+=2):(l=e,0===q&&d(Qe)),l!==e){n=[];for(m=r();m!==e;)n.push(m),m=r();n!==e?(m=wa(),m!==e?f=k=[k,l,n,m]:(g=f,f=e)):(g=f,f=e)}else g=f,f=e;else g=f,f=e;if(f===e){f=g;k=[];for(l=r();l!==e;)k.push(l),l=r();if(k!==e)if(h.substr(g,2)===oc?(l=oc,g+=2):(l=e,0===q&&d(Re)),l!==e){n=[];for(m=r();m!==e;)n.push(m),m=r();n!==e?(m=wa(),m!==e?f=k=[k,l,n,m]:(g=f,f=e)):(g=f,f=e)}else g=f,f=e;else g=f,f=e;if(f===e){f=g;k=[];for(l=r();l!==e;)k.push(l),l=r();if(k!==e)if(73===h.charCodeAt(g)?(l=pc,g++):
(l=e,0===q&&d(qc)),l===e&&(105===h.charCodeAt(g)?(l=rc,g++):(l=e,0===q&&d(sc))),l!==e)if(78===h.charCodeAt(g)?(n=wb,g++):(n=e,0===q&&d(xb)),n===e&&(110===h.charCodeAt(g)?(n=yb,g++):(n=e,0===q&&d(zb))),n!==e){m=[];for(t=r();t!==e;)m.push(t),t=r();m!==e?(t=Pa(),t!==e?f=k=[k,l,n,m,t]:(g=f,f=e)):(g=f,f=e)}else g=f,f=e;else g=f,f=e;else g=f,f=e;if(f===e){f=g;k=[];for(l=r();l!==e;)k.push(l),l=r();if(k!==e)if(78===h.charCodeAt(g)?(l=wb,g++):(l=e,0===q&&d(xb)),l===e&&(110===h.charCodeAt(g)?(l=yb,g++):(l=
e,0===q&&d(zb))),l!==e)if(79===h.charCodeAt(g)?(n=Se,g++):(n=e,0===q&&d(Te)),n===e&&(111===h.charCodeAt(g)?(n=Ue,g++):(n=e,0===q&&d(Ve))),n!==e)if(84===h.charCodeAt(g)?(m=We,g++):(m=e,0===q&&d(Xe)),m===e&&(116===h.charCodeAt(g)?(m=Ye,g++):(m=e,0===q&&d(Ze))),m!==e){t=[];for(u=r();u!==e;)t.push(u),u=r();if(t!==e)if(73===h.charCodeAt(g)?(u=pc,g++):(u=e,0===q&&d(qc)),u===e&&(105===h.charCodeAt(g)?(u=rc,g++):(u=e,0===q&&d(sc))),u!==e)if(78===h.charCodeAt(g)?(v=wb,g++):(v=e,0===q&&d(xb)),v===e&&(110===
h.charCodeAt(g)?(v=yb,g++):(v=e,0===q&&d(zb))),v!==e){y=[];for(z=r();z!==e;)y.push(z),z=r();y!==e?(z=Pa(),z!==e?f=k=[k,l,n,m,t,u,v,y,z]:(g=f,f=e)):(g=f,f=e)}else g=f,f=e;else g=f,f=e;else g=f,f=e}else g=f,f=e;else g=f,f=e;else g=f,f=e;else g=f,f=e}}}}}}}}if(a!==e){b=c;if(0===a.length)c=b;else if("i"===a[0][1]||"I"===a[0][1]||"n"===a[0][1]||"N"===a[0][1]){c={};"i"===a[0][1]||"I"===a[0][1]?(f="=",c.expressionType="conditionalor"):(f="!=",c.expressionType="conditionaland");k=[];for(l=0;l<a[0].length;l++)if("args"===
a[0][l].token){k=a[0][l].value;break}c.token="expression";c.operands=[];for(a=0;a<k.length;a++)l={token:"expression",expressionType:"relationalexpression"},l.operator=f,l.op1=b,l.op2=k[a],c.operands.push(l)}else c={expressionType:"relationalexpression"},c.operator=a[0][1],c.op1=b,c.op2=a[0][3],c.token="expression";b=c}else g=b,b=e}else g=b,b=e;q--;b===e&&0===q&&d(ak);a=b;q--;a===e&&0===q&&d(bk);return a}function wa(){var a;q++;var b,c,f,k,l,n,m,t,u;q++;b=g;c=Cb();if(c!==e){a=[];f=g;k=[];for(l=r();l!==
e;)k.push(l),l=r();if(k!==e)if(43===h.charCodeAt(g)?(l=Za,g++):(l=e,0===q&&d($a)),l!==e){n=[];for(m=r();m!==e;)n.push(m),m=r();n!==e?(m=Cb(),m!==e?f=k=[k,l,n,m]:(g=f,f=e)):(g=f,f=e)}else g=f,f=e;else g=f,f=e;if(f===e){f=g;k=[];for(l=r();l!==e;)k.push(l),l=r();if(k!==e)if(45===h.charCodeAt(g)?(l=Ga,g++):(l=e,0===q&&d(Ha)),l!==e){n=[];for(m=r();m!==e;)n.push(m),m=r();n!==e?(m=Cb(),m!==e?f=k=[k,l,n,m]:(g=f,f=e)):(g=f,f=e)}else g=f,f=e;else g=f,f=e;if(f===e)if(f=g,k=Db(),k===e&&(k=Db()),k!==e){l=g;n=
[];for(m=r();m!==e;)n.push(m),m=r();if(n!==e)if(42===h.charCodeAt(g)?(m=Ka,g++):(m=e,0===q&&d(La)),m!==e){t=[];for(u=r();u!==e;)t.push(u),u=r();t!==e?(u=Ia(),u!==e?l=n=[n,m,t,u]:(g=l,l=e)):(g=l,l=e)}else g=l,l=e;else g=l,l=e;if(l===e){l=g;n=[];for(m=r();m!==e;)n.push(m),m=r();if(n!==e)if(47===h.charCodeAt(g)?(m=cb,g++):(m=e,0===q&&d(db)),m!==e){t=[];for(u=r();u!==e;)t.push(u),u=r();t!==e?(u=Ia(),u!==e?l=n=[n,m,t,u]:(g=l,l=e)):(g=l,l=e)}else g=l,l=e;else g=l,l=e}l===e&&(l=null);l!==e?f=k=[k,l]:(g=
f,f=e)}else g=f,f=e}for(;f!==e;){a.push(f);f=g;k=[];for(l=r();l!==e;)k.push(l),l=r();if(k!==e)if(43===h.charCodeAt(g)?(l=Za,g++):(l=e,0===q&&d($a)),l!==e){n=[];for(m=r();m!==e;)n.push(m),m=r();n!==e?(m=Cb(),m!==e?f=k=[k,l,n,m]:(g=f,f=e)):(g=f,f=e)}else g=f,f=e;else g=f,f=e;if(f===e){f=g;k=[];for(l=r();l!==e;)k.push(l),l=r();if(k!==e)if(45===h.charCodeAt(g)?(l=Ga,g++):(l=e,0===q&&d(Ha)),l!==e){n=[];for(m=r();m!==e;)n.push(m),m=r();n!==e?(m=Cb(),m!==e?f=k=[k,l,n,m]:(g=f,f=e)):(g=f,f=e)}else g=f,f=e;
else g=f,f=e;if(f===e)if(f=g,k=Db(),k===e&&(k=Db()),k!==e){l=g;n=[];for(m=r();m!==e;)n.push(m),m=r();if(n!==e)if(42===h.charCodeAt(g)?(m=Ka,g++):(m=e,0===q&&d(La)),m!==e){t=[];for(u=r();u!==e;)t.push(u),u=r();t!==e?(u=Ia(),u!==e?l=n=[n,m,t,u]:(g=l,l=e)):(g=l,l=e)}else g=l,l=e;else g=l,l=e;if(l===e){l=g;n=[];for(m=r();m!==e;)n.push(m),m=r();if(n!==e)if(47===h.charCodeAt(g)?(m=cb,g++):(m=e,0===q&&d(db)),m!==e){t=[];for(u=r();u!==e;)t.push(u),u=r();t!==e?(u=Ia(),u!==e?l=n=[n,m,t,u]:(g=l,l=e)):(g=l,l=
e)}else g=l,l=e;else g=l,l=e}l===e&&(l=null);l!==e?f=k=[k,l]:(g=f,f=e)}else g=f,f=e}}if(a!==e){if(0!==a.length){b={token:"expression",expressionType:"additiveexpression"};b.summand=c;b.summands=[];for(c=0;c<a.length;c++)k=a[c],f={},4==k.length&&"string"===typeof k[1]?(f.operator=k[1],f.expression=k[3]):(k={},l=f[0],n=f[1][1],m=f[1][3],n=null,0>l.value?(f.operator="-",l.value=-l.value):f.operator="+",k.token="expression",k.expressionType="multiplicativeexpression",k.operator=l,k.factors=[{operator:n,
expression:m}],f.expression=k),b.summands.push(f);c=b}b=c}else g=b,b=e}else g=b,b=e;q--;b===e&&0===q&&d(ck);a=b;q--;a===e&&0===q&&d(dk);return a}function Cb(){var a,b,c,f,k,l,n,m;q++;a=g;b=Ia();if(b!==e){c=[];f=g;k=[];for(l=r();l!==e;)k.push(l),l=r();if(k!==e)if(42===h.charCodeAt(g)?(l=Ka,g++):(l=e,0===q&&d(La)),l!==e){n=[];for(m=r();m!==e;)n.push(m),m=r();n!==e?(m=Ia(),m!==e?f=k=[k,l,n,m]:(g=f,f=e)):(g=f,f=e)}else g=f,f=e;else g=f,f=e;if(f===e){f=g;k=[];for(l=r();l!==e;)k.push(l),l=r();if(k!==e)if(47===
h.charCodeAt(g)?(l=cb,g++):(l=e,0===q&&d(db)),l!==e){n=[];for(m=r();m!==e;)n.push(m),m=r();n!==e?(m=Ia(),m!==e?f=k=[k,l,n,m]:(g=f,f=e)):(g=f,f=e)}else g=f,f=e;else g=f,f=e}for(;f!==e;){c.push(f);f=g;k=[];for(l=r();l!==e;)k.push(l),l=r();if(k!==e)if(42===h.charCodeAt(g)?(l=Ka,g++):(l=e,0===q&&d(La)),l!==e){n=[];for(m=r();m!==e;)n.push(m),m=r();n!==e?(m=Ia(),m!==e?f=k=[k,l,n,m]:(g=f,f=e)):(g=f,f=e)}else g=f,f=e;else g=f,f=e;if(f===e){f=g;k=[];for(l=r();l!==e;)k.push(l),l=r();if(k!==e)if(47===h.charCodeAt(g)?
(l=cb,g++):(l=e,0===q&&d(db)),l!==e){n=[];for(m=r();m!==e;)n.push(m),m=r();n!==e?(m=Ia(),m!==e?f=k=[k,l,n,m]:(g=f,f=e)):(g=f,f=e)}else g=f,f=e;else g=f,f=e}}if(c!==e){if(0!==c.length){a={token:"expression",expressionType:"multiplicativeexpression"};a.factor=b;a.factors=[];for(b=0;b<c.length;b++)f=c[b],k={},k.operator=f[1],k.expression=f[3],a.factors.push(k);b=a}a=b}else g=a,a=e}else g=a,a=e;q--;a===e&&0===q&&d(ek);return a}function Ia(){var a,b,c;q++;a=g;33===h.charCodeAt(g)?(b=Tc,g++):(b=e,0===q&&
d(Uc));if(b!==e){c=[];for(b=r();b!==e;)c.push(b),b=r();c!==e?(b=ib(),b!==e?(a={token:"expression",expressionType:"unaryexpression",unaryexpression:"!"},a.expression=b):(g=a,a=e)):(g=a,a=e)}else g=a,a=e;if(a===e){a=g;43===h.charCodeAt(g)?(b=Za,g++):(b=e,0===q&&d($a));if(b!==e){c=[];for(b=r();b!==e;)c.push(b),b=r();c!==e?(b=ib(),b!==e?(a={token:"expression",expressionType:"unaryexpression",unaryexpression:"+"},a.expression=b):(g=a,a=e)):(g=a,a=e)}else g=a,a=e;if(a===e){a=g;45===h.charCodeAt(g)?(b=Ga,
g++):(b=e,0===q&&d(Ha));if(b!==e){c=[];for(b=r();b!==e;)c.push(b),b=r();c!==e?(b=ib(),b!==e?(a={token:"expression",expressionType:"unaryexpression",unaryexpression:"-"},a.expression=b):(g=a,a=e)):(g=a,a=e)}else g=a,a=e;a===e&&(a=ib())}}q--;a===e&&0===q&&d(fk);return a}function ib(){var a;q++;a=Ec();if(a===e&&(a=Fc(),a===e)){var b,c,f;q++;b=g;a=ka();if(a!==e){c=[];for(f=r();f!==e;)c.push(f),f=r();c!==e?(f=Oa(),f===e&&(f=null),f!==e?(b=f,c={token:"expression",expressionType:"irireforfunction"},c.iriref=
a,c.args=null!=b?b.value:b,b=c):(g=b,b=e)):(g=b,b=e)}else g=b,b=e;q--;b===e&&0===q&&d(gk);a=b;if(a===e&&(a=Jb(),a!==e&&(b={token:"expression",expressionType:"atomic",primaryexpression:"rdfliteral"},b.value=a,a=b),a===e&&(a=Kb(),a!==e&&(b={token:"expression",expressionType:"atomic",primaryexpression:"numericliteral"},b.value=a,a=b),a===e&&(a=Lb(),a!==e&&(b={token:"expression",expressionType:"atomic",primaryexpression:"booleanliteral"},b.value=a,a=b),a===e)))){var k,l,n,m,t,u,v,y,z;q++;c=g;h.substr(g,
5)===$e?(a=$e,g+=5):(a=e,0===q&&d(hk));a===e&&(h.substr(g,5)===af?(a=af,g+=5):(a=e,0===q&&d(ik)));if(a!==e){a=[];for(b=r();b!==e;)a.push(b),b=r();if(a!==e)if(40===h.charCodeAt(g)?(b=R,g++):(b=e,0===q&&d(S)),b!==e){b=[];for(a=r();a!==e;)b.push(a),a=r();if(b!==e)if(h.substr(g,8)===na?(a=na,g+=8):(a=e,0===q&&d(Va)),a===e&&(h.substr(g,8)===oa?(a=oa,g+=8):(a=e,0===q&&d(Wa))),a===e&&(a=null),a!==e){f=[];for(b=r();b!==e;)f.push(b),b=r();if(f!==e)if(42===h.charCodeAt(g)?(b=Ka,g++):(b=e,0===q&&d(La)),b===
e&&(b=P()),b!==e){f=[];for(k=r();k!==e;)f.push(k),k=r();if(f!==e)if(41===h.charCodeAt(g)?(k=T,g++):(k=e,0===q&&d(U)),k!==e){l=[];for(n=r();n!==e;)l.push(n),n=r();l!==e?(c={token:"expression",expressionType:"aggregate",aggregateType:"count"},c.distinct=""!=a&&null!=a?"DISTINCT":a,c.expression=b):(g=c,c=e)}else g=c,c=e;else g=c,c=e}else g=c,c=e;else g=c,c=e}else g=c,c=e;else g=c,c=e}else g=c,c=e;else g=c,c=e}else g=c,c=e;if(c===e){c=g;h.substr(g,12)===bf?(a=bf,g+=12):(a=e,0===q&&d(jk));a===e&&(h.substr(g,
12)===cf?(a=cf,g+=12):(a=e,0===q&&d(kk)));if(a!==e){a=[];for(b=r();b!==e;)a.push(b),b=r();if(a!==e)if(40===h.charCodeAt(g)?(b=R,g++):(b=e,0===q&&d(S)),b!==e){b=[];for(a=r();a!==e;)b.push(a),a=r();if(b!==e)if(h.substr(g,8)===na?(a=na,g+=8):(a=e,0===q&&d(Va)),a===e&&(h.substr(g,8)===oa?(a=oa,g+=8):(a=e,0===q&&d(Wa))),a===e&&(a=null),a!==e){f=[];for(b=r();b!==e;)f.push(b),b=r();if(f!==e)if(b=P(),b!==e){f=g;59===h.charCodeAt(g)?(k=Ma,g++):(k=e,0===q&&d(Na));if(k!==e){l=[];for(n=r();n!==e;)l.push(n),n=
r();if(l!==e)if(h.substr(g,9)===df?(n=df,g+=9):(n=e,0===q&&d(lk)),n!==e){m=[];for(t=r();t!==e;)m.push(t),t=r();if(m!==e)if(61===h.charCodeAt(g)?(t=kc,g++):(t=e,0===q&&d(lc)),t!==e){u=[];for(v=r();v!==e;)u.push(v),v=r();if(u!==e)if(v=od(),v!==e){y=[];for(z=r();z!==e;)y.push(z),z=r();y!==e?f=k=[k,l,n,m,t,u,v,y]:(g=f,f=e)}else g=f,f=e;else g=f,f=e}else g=f,f=e;else g=f,f=e}else g=f,f=e;else g=f,f=e}else g=f,f=e;f===e&&(f=null);if(f!==e)if(41===h.charCodeAt(g)?(k=T,g++):(k=e,0===q&&d(U)),k!==e){l=[];
for(n=r();n!==e;)l.push(n),n=r();l!==e?(c={token:"expression",expressionType:"aggregate",aggregateType:"group_concat"},c.distinct=""!=a&&null!=a?"DISTINCT":a,c.expression=b,c.separator=f):(g=c,c=e)}else g=c,c=e;else g=c,c=e}else g=c,c=e;else g=c,c=e}else g=c,c=e;else g=c,c=e}else g=c,c=e;else g=c,c=e}else g=c,c=e;if(c===e){c=g;h.substr(g,3)===ef?(a=ef,g+=3):(a=e,0===q&&d(mk));a===e&&(h.substr(g,3)===ff?(a=ff,g+=3):(a=e,0===q&&d(nk)));if(a!==e){a=[];for(b=r();b!==e;)a.push(b),b=r();if(a!==e)if(40===
h.charCodeAt(g)?(b=R,g++):(b=e,0===q&&d(S)),b!==e){b=[];for(a=r();a!==e;)b.push(a),a=r();if(b!==e)if(h.substr(g,8)===na?(a=na,g+=8):(a=e,0===q&&d(Va)),a===e&&(h.substr(g,8)===oa?(a=oa,g+=8):(a=e,0===q&&d(Wa))),a===e&&(a=null),a!==e){f=[];for(b=r();b!==e;)f.push(b),b=r();if(f!==e)if(b=P(),b!==e){f=[];for(k=r();k!==e;)f.push(k),k=r();if(f!==e)if(41===h.charCodeAt(g)?(k=T,g++):(k=e,0===q&&d(U)),k!==e){l=[];for(n=r();n!==e;)l.push(n),n=r();l!==e?(c={token:"expression",expressionType:"aggregate",aggregateType:"sum"},
c.distinct=""!=a&&null!=a?"DISTINCT":a,c.expression=b):(g=c,c=e)}else g=c,c=e;else g=c,c=e}else g=c,c=e;else g=c,c=e}else g=c,c=e;else g=c,c=e}else g=c,c=e;else g=c,c=e}else g=c,c=e;if(c===e){c=g;h.substr(g,3)===gf?(a=gf,g+=3):(a=e,0===q&&d(ok));a===e&&(h.substr(g,3)===hf?(a=hf,g+=3):(a=e,0===q&&d(pk)));if(a!==e){a=[];for(b=r();b!==e;)a.push(b),b=r();if(a!==e)if(40===h.charCodeAt(g)?(b=R,g++):(b=e,0===q&&d(S)),b!==e){b=[];for(a=r();a!==e;)b.push(a),a=r();if(b!==e)if(h.substr(g,8)===na?(a=na,g+=8):
(a=e,0===q&&d(Va)),a===e&&(h.substr(g,8)===oa?(a=oa,g+=8):(a=e,0===q&&d(Wa))),a===e&&(a=null),a!==e){f=[];for(b=r();b!==e;)f.push(b),b=r();if(f!==e)if(b=P(),b!==e){f=[];for(k=r();k!==e;)f.push(k),k=r();if(f!==e)if(41===h.charCodeAt(g)?(k=T,g++):(k=e,0===q&&d(U)),k!==e){l=[];for(n=r();n!==e;)l.push(n),n=r();l!==e?(c={token:"expression",expressionType:"aggregate",aggregateType:"min"},c.distinct=""!=a&&null!=a?"DISTINCT":a,c.expression=b):(g=c,c=e)}else g=c,c=e;else g=c,c=e}else g=c,c=e;else g=c,c=e}else g=
c,c=e;else g=c,c=e}else g=c,c=e;else g=c,c=e}else g=c,c=e;if(c===e){c=g;h.substr(g,3)===jf?(a=jf,g+=3):(a=e,0===q&&d(qk));a===e&&(h.substr(g,3)===kf?(a=kf,g+=3):(a=e,0===q&&d(rk)));if(a!==e){a=[];for(b=r();b!==e;)a.push(b),b=r();if(a!==e)if(40===h.charCodeAt(g)?(b=R,g++):(b=e,0===q&&d(S)),b!==e){b=[];for(a=r();a!==e;)b.push(a),a=r();if(b!==e)if(h.substr(g,8)===na?(a=na,g+=8):(a=e,0===q&&d(Va)),a===e&&(h.substr(g,8)===oa?(a=oa,g+=8):(a=e,0===q&&d(Wa))),a===e&&(a=null),a!==e){f=[];for(b=r();b!==e;)f.push(b),
b=r();if(f!==e)if(b=P(),b!==e){f=[];for(k=r();k!==e;)f.push(k),k=r();if(f!==e)if(41===h.charCodeAt(g)?(k=T,g++):(k=e,0===q&&d(U)),k!==e){l=[];for(n=r();n!==e;)l.push(n),n=r();l!==e?(c={token:"expression",expressionType:"aggregate",aggregateType:"max"},c.distinct=""!=a&&null!=a?"DISTINCT":a,c.expression=b):(g=c,c=e)}else g=c,c=e;else g=c,c=e}else g=c,c=e;else g=c,c=e}else g=c,c=e;else g=c,c=e}else g=c,c=e;else g=c,c=e}else g=c,c=e;if(c===e)if(c=g,h.substr(g,3)===lf?(a=lf,g+=3):(a=e,0===q&&d(sk)),a===
e&&(h.substr(g,3)===mf?(a=mf,g+=3):(a=e,0===q&&d(tk))),a!==e){a=[];for(b=r();b!==e;)a.push(b),b=r();if(a!==e)if(40===h.charCodeAt(g)?(b=R,g++):(b=e,0===q&&d(S)),b!==e){b=[];for(a=r();a!==e;)b.push(a),a=r();if(b!==e)if(h.substr(g,8)===na?(a=na,g+=8):(a=e,0===q&&d(Va)),a===e&&(h.substr(g,8)===oa?(a=oa,g+=8):(a=e,0===q&&d(Wa))),a===e&&(a=null),a!==e){f=[];for(b=r();b!==e;)f.push(b),b=r();if(f!==e)if(b=P(),b!==e){f=[];for(k=r();k!==e;)f.push(k),k=r();if(f!==e)if(41===h.charCodeAt(g)?(k=T,g++):(k=e,0===
q&&d(U)),k!==e){l=[];for(n=r();n!==e;)l.push(n),n=r();l!==e?(c={token:"expression",expressionType:"aggregate",aggregateType:"avg"},c.distinct=""!=a&&null!=a?"DISTINCT":a,c.expression=b):(g=c,c=e)}else g=c,c=e;else g=c,c=e}else g=c,c=e;else g=c,c=e}else g=c,c=e;else g=c,c=e}else g=c,c=e;else g=c,c=e}else g=c,c=e}}}}q--;c===e&&0===q&&d(uk);a=c;a===e&&(a=ja(),a!==e&&(b={token:"expression",expressionType:"atomic",primaryexpression:"var"},b.value=a,a=b))}}q--;a===e&&0===q&&d(vk);return a}function Ec(){var a,
b,c,f;q++;a=g;40===h.charCodeAt(g)?(b=R,g++):(b=e,0===q&&d(S));if(b!==e){c=[];for(b=r();b!==e;)c.push(b),b=r();if(c!==e)if(b=P(),b!==e){c=[];for(f=r();f!==e;)c.push(f),f=r();c!==e?(41===h.charCodeAt(g)?(f=T,g++):(f=e,0===q&&d(U)),f!==e?a=b:(g=a,a=e)):(g=a,a=e)}else g=a,a=e;else g=a,a=e}else g=a,a=e;q--;a===e&&0===q&&d(wk);return a}function Fc(){var a,b,c,f,k,l,n,m;q++;a=g;h.substr(g,3)===nf?(b=nf,g+=3):(b=e,0===q&&d(xk));b===e&&(h.substr(g,3)===of?(b=of,g+=3):(b=e,0===q&&d(yk)));if(b!==e){c=[];for(f=
r();f!==e;)c.push(f),f=r();if(c!==e)if(40===h.charCodeAt(g)?(f=R,g++):(f=e,0===q&&d(S)),f!==e){k=[];for(b=r();b!==e;)k.push(b),b=r();if(k!==e)if(b=P(),b!==e){l=[];for(n=r();n!==e;)l.push(n),n=r();l!==e?(41===h.charCodeAt(g)?(n=T,g++):(n=e,0===q&&d(U)),n!==e?(a={token:"expression",expressionType:"builtincall",builtincall:"str"},a.args=[b]):(g=a,a=e)):(g=a,a=e)}else g=a,a=e;else g=a,a=e}else g=a,a=e;else g=a,a=e}else g=a,a=e;if(a===e){a=g;h.substr(g,4)===pf?(b=pf,g+=4):(b=e,0===q&&d(zk));b===e&&(h.substr(g,
4)===qf?(b=qf,g+=4):(b=e,0===q&&d(Ak)));if(b!==e){c=[];for(f=r();f!==e;)c.push(f),f=r();if(c!==e)if(40===h.charCodeAt(g)?(f=R,g++):(f=e,0===q&&d(S)),f!==e){k=[];for(b=r();b!==e;)k.push(b),b=r();if(k!==e)if(b=P(),b!==e){l=[];for(n=r();n!==e;)l.push(n),n=r();l!==e?(41===h.charCodeAt(g)?(n=T,g++):(n=e,0===q&&d(U)),n!==e?(a={token:"expression",expressionType:"builtincall",builtincall:"lang"},a.args=[b]):(g=a,a=e)):(g=a,a=e)}else g=a,a=e;else g=a,a=e}else g=a,a=e;else g=a,a=e}else g=a,a=e;if(a===e){a=
g;h.substr(g,11)===rf?(b=rf,g+=11):(b=e,0===q&&d(Bk));b===e&&(h.substr(g,11)===sf?(b=sf,g+=11):(b=e,0===q&&d(Ck)));if(b!==e){c=[];for(f=r();f!==e;)c.push(f),f=r();if(c!==e)if(40===h.charCodeAt(g)?(f=R,g++):(f=e,0===q&&d(S)),f!==e){k=[];for(b=r();b!==e;)k.push(b),b=r();if(k!==e)if(b=P(),b!==e){l=[];for(n=r();n!==e;)l.push(n),n=r();if(l!==e)if(44===h.charCodeAt(g)?(n=ga,g++):(n=e,0===q&&d(ha)),n!==e){m=[];for(f=r();f!==e;)m.push(f),f=r();if(m!==e)if(f=P(),f!==e){c=[];for(n=r();n!==e;)c.push(n),n=r();
c!==e?(41===h.charCodeAt(g)?(n=T,g++):(n=e,0===q&&d(U)),n!==e?(a={token:"expression",expressionType:"builtincall",builtincall:"langmatches"},a.args=[b,f]):(g=a,a=e)):(g=a,a=e)}else g=a,a=e;else g=a,a=e}else g=a,a=e;else g=a,a=e}else g=a,a=e;else g=a,a=e}else g=a,a=e;else g=a,a=e}else g=a,a=e;if(a===e){a=g;h.substr(g,8)===tf?(b=tf,g+=8):(b=e,0===q&&d(Dk));b===e&&(h.substr(g,8)===uf?(b=uf,g+=8):(b=e,0===q&&d(Ek)));if(b!==e){c=[];for(f=r();f!==e;)c.push(f),f=r();if(c!==e)if(40===h.charCodeAt(g)?(f=R,
g++):(f=e,0===q&&d(S)),f!==e){k=[];for(b=r();b!==e;)k.push(b),b=r();if(k!==e)if(b=P(),b!==e){l=[];for(n=r();n!==e;)l.push(n),n=r();l!==e?(41===h.charCodeAt(g)?(n=T,g++):(n=e,0===q&&d(U)),n!==e?(a={token:"expression",expressionType:"builtincall",builtincall:"datatype"},a.args=[b]):(g=a,a=e)):(g=a,a=e)}else g=a,a=e;else g=a,a=e}else g=a,a=e;else g=a,a=e}else g=a,a=e;if(a===e){a=g;h.substr(g,5)===vf?(b=vf,g+=5):(b=e,0===q&&d(Fk));b===e&&(h.substr(g,5)===wf?(b=wf,g+=5):(b=e,0===q&&d(Gk)));if(b!==e){c=
[];for(f=r();f!==e;)c.push(f),f=r();if(c!==e)if(40===h.charCodeAt(g)?(f=R,g++):(f=e,0===q&&d(S)),f!==e){k=[];for(b=r();b!==e;)k.push(b),b=r();if(k!==e)if(b=ja(),b!==e){l=[];for(n=r();n!==e;)l.push(n),n=r();l!==e?(41===h.charCodeAt(g)?(n=T,g++):(n=e,0===q&&d(U)),n!==e?(a={token:"expression",expressionType:"builtincall",builtincall:"bound"},a.args=[b]):(g=a,a=e)):(g=a,a=e)}else g=a,a=e;else g=a,a=e}else g=a,a=e;else g=a,a=e}else g=a,a=e;if(a===e){a=g;h.substr(g,3)===xf?(b=xf,g+=3):(b=e,0===q&&d(Hk));
b===e&&(h.substr(g,3)===yf?(b=yf,g+=3):(b=e,0===q&&d(Ik)));if(b!==e){c=[];for(f=r();f!==e;)c.push(f),f=r();if(c!==e)if(40===h.charCodeAt(g)?(f=R,g++):(f=e,0===q&&d(S)),f!==e){k=[];for(b=r();b!==e;)k.push(b),b=r();if(k!==e)if(b=P(),b!==e){l=[];for(n=r();n!==e;)l.push(n),n=r();l!==e?(41===h.charCodeAt(g)?(n=T,g++):(n=e,0===q&&d(U)),n!==e?(a={token:"expression",expressionType:"builtincall",builtincall:"iri"},a.args=[b]):(g=a,a=e)):(g=a,a=e)}else g=a,a=e;else g=a,a=e}else g=a,a=e;else g=a,a=e}else g=
a,a=e;if(a===e){a=g;h.substr(g,3)===zf?(b=zf,g+=3):(b=e,0===q&&d(Jk));b===e&&(h.substr(g,3)===Af?(b=Af,g+=3):(b=e,0===q&&d(Kk)));if(b!==e){c=[];for(f=r();f!==e;)c.push(f),f=r();if(c!==e)if(40===h.charCodeAt(g)?(f=R,g++):(f=e,0===q&&d(S)),f!==e){k=[];for(b=r();b!==e;)k.push(b),b=r();if(k!==e)if(b=P(),b!==e){l=[];for(n=r();n!==e;)l.push(n),n=r();l!==e?(41===h.charCodeAt(g)?(n=T,g++):(n=e,0===q&&d(U)),n!==e?(a={token:"expression",expressionType:"builtincall",builtincall:"uri"},a.args=[b]):(g=a,a=e)):
(g=a,a=e)}else g=a,a=e;else g=a,a=e}else g=a,a=e;else g=a,a=e}else g=a,a=e;if(a===e){a=g;h.substr(g,5)===Bf?(b=Bf,g+=5):(b=e,0===q&&d(Lk));b===e&&(h.substr(g,5)===Cf?(b=Cf,g+=5):(b=e,0===q&&d(Mk)));if(b!==e){c=[];for(f=r();f!==e;)c.push(f),f=r();if(c!==e){f=g;40===h.charCodeAt(g)?(k=R,g++):(k=e,0===q&&d(S));if(k!==e){b=[];for(l=r();l!==e;)b.push(l),l=r();if(b!==e)if(l=P(),l!==e){n=[];for(m=r();m!==e;)n.push(m),m=r();n!==e?(41===h.charCodeAt(g)?(m=T,g++):(m=e,0===q&&d(U)),m!==e?f=k=[k,b,l,n,m]:(g=
f,f=e)):(g=f,f=e)}else g=f,f=e;else g=f,f=e}else g=f,f=e;f===e&&(f=Ja());f!==e?(b=f,a={token:"expression",expressionType:"builtincall",builtincall:"bnode"},a.args=5===b.length?[b[2]]:null):(g=a,a=e)}else g=a,a=e}else g=a,a=e;if(a===e){a=g;h.substr(g,8)===Df?(b=Df,g+=8):(b=e,0===q&&d(Nk));b===e&&(h.substr(g,8)===Ef?(b=Ef,g+=8):(b=e,0===q&&d(Ok)));if(b!==e){c=[];for(f=r();f!==e;)c.push(f),f=r();c!==e?(f=Pa(),f!==e?(b={token:"expression",expressionType:"builtincall",builtincall:"coalesce"},b.args=f,
a=b):(g=a,a=e)):(g=a,a=e)}else g=a,a=e;if(a===e){a=g;h.substr(g,2)===Ff?(b=Ff,g+=2):(b=e,0===q&&d(Pk));b===e&&(h.substr(g,2)===Gf?(b=Gf,g+=2):(b=e,0===q&&d(Qk)));if(b!==e){c=[];for(f=r();f!==e;)c.push(f),f=r();if(c!==e)if(40===h.charCodeAt(g)?(f=R,g++):(f=e,0===q&&d(S)),f!==e){k=[];for(b=r();b!==e;)k.push(b),b=r();if(k!==e)if(b=P(),b!==e){l=[];for(n=r();n!==e;)l.push(n),n=r();if(l!==e)if(44===h.charCodeAt(g)?(n=ga,g++):(n=e,0===q&&d(ha)),n!==e){m=[];for(f=r();f!==e;)m.push(f),f=r();if(m!==e)if(f=
P(),f!==e){c=[];for(n=r();n!==e;)c.push(n),n=r();if(c!==e)if(44===h.charCodeAt(g)?(n=ga,g++):(n=e,0===q&&d(ha)),n!==e){n=[];for(c=r();c!==e;)n.push(c),c=r();if(n!==e)if(c=P(),c!==e){n=[];for(l=r();l!==e;)n.push(l),l=r();n!==e?(41===h.charCodeAt(g)?(l=T,g++):(l=e,0===q&&d(U)),l!==e?(a={token:"expression",expressionType:"builtincall",builtincall:"if"},a.args=[b,f,c]):(g=a,a=e)):(g=a,a=e)}else g=a,a=e;else g=a,a=e}else g=a,a=e;else g=a,a=e}else g=a,a=e;else g=a,a=e}else g=a,a=e;else g=a,a=e}else g=a,
a=e;else g=a,a=e}else g=a,a=e;else g=a,a=e}else g=a,a=e;if(a===e){a=g;h.substr(g,9)===Hf?(b=Hf,g+=9):(b=e,0===q&&d(Rk));b===e&&(h.substr(g,9)===If?(b=If,g+=9):(b=e,0===q&&d(Sk)),b===e&&(h.substr(g,9)===Jf?(b=Jf,g+=9):(b=e,0===q&&d(Tk))));if(b!==e){c=[];for(f=r();f!==e;)c.push(f),f=r();if(c!==e)if(40===h.charCodeAt(g)?(f=R,g++):(f=e,0===q&&d(S)),f!==e){k=[];for(b=r();b!==e;)k.push(b),b=r();if(k!==e)if(b=P(),b!==e){l=[];for(n=r();n!==e;)l.push(n),n=r();l!==e?(41===h.charCodeAt(g)?(n=T,g++):(n=e,0===
q&&d(U)),n!==e?(a={token:"expression",expressionType:"builtincall",builtincall:"isliteral"},a.args=[b]):(g=a,a=e)):(g=a,a=e)}else g=a,a=e;else g=a,a=e}else g=a,a=e;else g=a,a=e}else g=a,a=e;if(a===e){a=g;h.substr(g,7)===Kf?(b=Kf,g+=7):(b=e,0===q&&d(Uk));b===e&&(h.substr(g,7)===Lf?(b=Lf,g+=7):(b=e,0===q&&d(Vk)),b===e&&(h.substr(g,7)===Mf?(b=Mf,g+=7):(b=e,0===q&&d(Wk))));if(b!==e){c=[];for(f=r();f!==e;)c.push(f),f=r();if(c!==e)if(40===h.charCodeAt(g)?(f=R,g++):(f=e,0===q&&d(S)),f!==e){k=[];for(b=r();b!==
e;)k.push(b),b=r();if(k!==e)if(b=P(),b!==e){l=[];for(n=r();n!==e;)l.push(n),n=r();l!==e?(41===h.charCodeAt(g)?(n=T,g++):(n=e,0===q&&d(U)),n!==e?(a={token:"expression",expressionType:"builtincall",builtincall:"isblank"},a.args=[b]):(g=a,a=e)):(g=a,a=e)}else g=a,a=e;else g=a,a=e}else g=a,a=e;else g=a,a=e}else g=a,a=e;if(a===e){a=g;h.substr(g,8)===Nf?(b=Nf,g+=8):(b=e,0===q&&d(Xk));b===e&&(h.substr(g,8)===Of?(b=Of,g+=8):(b=e,0===q&&d(Yk)));if(b!==e){c=[];for(f=r();f!==e;)c.push(f),f=r();if(c!==e)if(40===
h.charCodeAt(g)?(f=R,g++):(f=e,0===q&&d(S)),f!==e){k=[];for(b=r();b!==e;)k.push(b),b=r();if(k!==e)if(b=P(),b!==e){l=[];for(n=r();n!==e;)l.push(n),n=r();if(l!==e)if(44===h.charCodeAt(g)?(n=ga,g++):(n=e,0===q&&d(ha)),n!==e){m=[];for(f=r();f!==e;)m.push(f),f=r();if(m!==e)if(f=P(),f!==e){c=[];for(n=r();n!==e;)c.push(n),n=r();c!==e?(41===h.charCodeAt(g)?(n=T,g++):(n=e,0===q&&d(U)),n!==e?(a={token:"expression",expressionType:"builtincall",builtincall:"sameterm"},a.args=[b,f]):(g=a,a=e)):(g=a,a=e)}else g=
a,a=e;else g=a,a=e}else g=a,a=e;else g=a,a=e}else g=a,a=e;else g=a,a=e}else g=a,a=e;else g=a,a=e}else g=a,a=e;if(a===e){a=g;h.substr(g,5)===Pf?(b=Pf,g+=5):(b=e,0===q&&d(Zk));b===e&&(h.substr(g,5)===Qf?(b=Qf,g+=5):(b=e,0===q&&d($k)),b===e&&(h.substr(g,5)===Rf?(b=Rf,g+=5):(b=e,0===q&&d(al)),b===e&&(h.substr(g,5)===Sf?(b=Sf,g+=5):(b=e,0===q&&d(bl)),b===e&&(h.substr(g,5)===Tf?(b=Tf,g+=5):(b=e,0===q&&d(cl)),b===e&&(h.substr(g,5)===Uf?(b=Uf,g+=5):(b=e,0===q&&d(dl)))))));if(b!==e){c=[];for(f=r();f!==e;)c.push(f),
f=r();if(c!==e)if(40===h.charCodeAt(g)?(f=R,g++):(f=e,0===q&&d(S)),f!==e){k=[];for(b=r();b!==e;)k.push(b),b=r();if(k!==e)if(b=P(),b!==e){l=[];for(n=r();n!==e;)l.push(n),n=r();l!==e?(41===h.charCodeAt(g)?(n=T,g++):(n=e,0===q&&d(U)),n!==e?(a={token:"expression",expressionType:"builtincall",builtincall:"isuri"},a.args=[b]):(g=a,a=e)):(g=a,a=e)}else g=a,a=e;else g=a,a=e}else g=a,a=e;else g=a,a=e}else g=a,a=e;if(a===e){a=g;h.substr(g,7)===Vf?(b=Vf,g+=7):(b=e,0===q&&d(el));b===e&&(h.substr(g,7)===Wf?(b=
Wf,g+=7):(b=e,0===q&&d(fl)));if(b!==e){c=[];Xf.test(h.charAt(g))?(f=h.charAt(g),g++):(f=e,0===q&&d(Yf));if(f!==e)for(;f!==e;)c.push(f),Xf.test(h.charAt(g))?(f=h.charAt(g),g++):(f=e,0===q&&d(Yf));else c=e;if(c!==e){f=[];for(k=r();k!==e;)f.push(k),k=r();if(f!==e)if(40===h.charCodeAt(g)?(k=R,g++):(k=e,0===q&&d(S)),k!==e){b=[];l=g;n=[];for(m=r();m!==e;)n.push(m),m=r();n!==e?(m=P(),m!==e?(44===h.charCodeAt(g)?(f=ga,g++):(f=e,0===q&&d(ha)),f!==e?l=n=[n,m,f]:(g=l,l=e)):(g=l,l=e)):(g=l,l=e);for(;l!==e;){b.push(l);
l=g;n=[];for(m=r();m!==e;)n.push(m),m=r();n!==e?(m=P(),m!==e?(44===h.charCodeAt(g)?(f=ga,g++):(f=e,0===q&&d(ha)),f!==e?l=n=[n,m,f]:(g=l,l=e)):(g=l,l=e)):(g=l,l=e)}if(b!==e){l=[];for(n=r();n!==e;)l.push(n),n=r();if(l!==e)if(n=P(),n!==e){m=[];for(f=r();f!==e;)m.push(f),f=r();if(m!==e)if(41===h.charCodeAt(g)?(f=T,g++):(f=e,0===q&&d(U)),f!==e){a=n;f={token:"expression",expressionType:"custom"};f.name=c.join("");c=[];for(n=0;n<b.length;n++)c.push(b[n][1]);c.push(a);f.args=c;a=f}else g=a,a=e;else g=a,a=
e}else g=a,a=e;else g=a,a=e}else g=a,a=e}else g=a,a=e;else g=a,a=e}else g=a,a=e}else g=a,a=e;if(a===e){q++;b=g;h.substr(g,5)===Zf?(a=Zf,g+=5):(a=e,0===q&&d(gl));a===e&&(h.substr(g,5)===$f?(a=$f,g+=5):(a=e,0===q&&d(hl)));if(a!==e){a=[];for(f=r();f!==e;)a.push(f),f=r();if(a!==e)if(40===h.charCodeAt(g)?(f=R,g++):(f=e,0===q&&d(S)),f!==e){f=[];for(a=r();a!==e;)f.push(a),a=r();if(f!==e)if(a=P(),a!==e){f=[];for(c=r();c!==e;)f.push(c),c=r();if(f!==e)if(44===h.charCodeAt(g)?(c=ga,g++):(c=e,0===q&&d(ha)),c!==
e){c=[];for(f=r();f!==e;)c.push(f),f=r();if(c!==e)if(f=P(),f!==e){n=[];for(c=r();c!==e;)n.push(c),c=r();if(n!==e){c=g;44===h.charCodeAt(g)?(n=ga,g++):(n=e,0===q&&d(ha));if(n!==e){l=[];for(m=r();m!==e;)l.push(m),m=r();l!==e?(m=P(),m!==e?c=n=[n,l,m]:(g=c,c=e)):(g=c,c=e)}else g=c,c=e;c===e&&(c=null);if(c!==e){n=[];for(l=r();l!==e;)n.push(l),l=r();n!==e?(41===h.charCodeAt(g)?(l=T,g++):(l=e,0===q&&d(U)),l!==e?(b=c,c={token:"expression",expressionType:"regex"},c.text=a,c.pattern=f,null!=b&&(c.flags=b[2]),
b=c):(g=b,b=e)):(g=b,b=e)}else g=b,b=e}else g=b,b=e}else g=b,b=e;else g=b,b=e}else g=b,b=e;else g=b,b=e}else g=b,b=e;else g=b,b=e}else g=b,b=e;else g=b,b=e}else g=b,b=e;q--;b===e&&0===q&&d(il);a=b;if(a===e){q++;b=g;h.substr(g,6)===tc?(a=tc,g+=6):(a=e,0===q&&d(ag));a===e&&(h.substr(g,6)===uc?(a=uc,g+=6):(a=e,0===q&&d(bg)));if(a!==e){f=[];for(a=r();a!==e;)f.push(a),a=r();f!==e?(a=W(),a!==e?(b={token:"expression",expressionType:"builtincall",builtincall:"exists"},b.args=[a]):(g=b,b=e)):(g=b,b=e)}else g=
b,b=e;q--;b===e&&0===q&&d(jl);a=b;if(a===e){q++;b=g;h.substr(g,3)===cg?(a=cg,g+=3):(a=e,0===q&&d(kl));a===e&&(h.substr(g,3)===dg?(a=dg,g+=3):(a=e,0===q&&d(ll)));if(a!==e){a=[];for(f=r();f!==e;)a.push(f),f=r();if(a!==e)if(h.substr(g,6)===tc?(f=tc,g+=6):(f=e,0===q&&d(ag)),f===e&&(h.substr(g,6)===uc?(f=uc,g+=6):(f=e,0===q&&d(bg))),f!==e){f=[];for(a=r();a!==e;)f.push(a),a=r();f!==e?(a=W(),a!==e?(b={token:"expression",expressionType:"builtincall",builtincall:"notexists"},b.args=[a]):(g=b,b=e)):(g=b,b=
e)}else g=b,b=e;else g=b,b=e}else g=b,b=e;q--;b===e&&0===q&&d(ml);a=b}}}}}}}}}}}}}}}}}q--;a===e&&0===q&&d(nl);return a}function Jb(){var a,b,c,f,k;q++;a=g;b=od();if(b!==e){var l,n,m,t;q++;c=g;64===h.charCodeAt(g)?(f=eg,g++):(f=e,0===q&&d(fg));if(f!==e){k=[];gg.test(h.charAt(g))?(f=h.charAt(g),g++):(f=e,0===q&&d(hg));if(f!==e)for(;f!==e;)k.push(f),gg.test(h.charAt(g))?(f=h.charAt(g),g++):(f=e,0===q&&d(hg));else k=e;if(k!==e){f=[];l=g;45===h.charCodeAt(g)?(n=Ga,g++):(n=e,0===q&&d(Ha));if(n!==e){m=[];
vc.test(h.charAt(g))?(t=h.charAt(g),g++):(t=e,0===q&&d(wc));if(t!==e)for(;t!==e;)m.push(t),vc.test(h.charAt(g))?(t=h.charAt(g),g++):(t=e,0===q&&d(wc));else m=e;m!==e?l=n=[n,m]:(g=l,l=e)}else g=l,l=e;for(;l!==e;)if(f.push(l),l=g,45===h.charCodeAt(g)?(n=Ga,g++):(n=e,0===q&&d(Ha)),n!==e){m=[];vc.test(h.charAt(g))?(t=h.charAt(g),g++):(t=e,0===q&&d(wc));if(t!==e)for(;t!==e;)m.push(t),vc.test(h.charAt(g))?(t=h.charAt(g),g++):(t=e,0===q&&d(wc));else m=e;m!==e?l=n=[n,m]:(g=l,l=e)}else g=l,l=e;f!==e?(c=k,
c=f=0===f.length?("@"+c.join("")).toLowerCase():("@"+c.join("")+"-"+f[0][1].join("")).toLowerCase()):(g=c,c=e)}else g=c,c=e}else g=c,c=e;q--;c===e&&0===q&&d(ol);c===e&&(c=g,h.substr(g,2)===ig?(f=ig,g+=2):(f=e,0===q&&d(pl)),f!==e?(k=ka(),k!==e?c=f=[f,k]:(g=c,c=e)):(g=c,c=e));c===e&&(c=null);c!==e?(a=b,b=c,"string"===typeof b&&0<b.length?b={token:"literal",value:a.value,lang:b.slice(1),type:null}:null!=b&&"object"===typeof b?(b.shift(),b={token:"literal",value:a.value,lang:null,type:b[0]}):b={token:"literal",
value:a.value,lang:null,type:null},a=b):(g=a,a=e)}else g=a,a=e;q--;a===e&&0===q&&d(ql);return a}function Kb(){var a;q++;q++;a=Ic();a===e&&(a=Hc(),a===e&&(a=kb()));q--;a===e&&0===q&&d(rl);if(a===e){q++;var b;q++;a=g;43===h.charCodeAt(g)?(b=Za,g++):(b=e,0===q&&d($a));b!==e?(b=Ic(),b!==e?a=b=jg(b):(g=a,a=e)):(g=a,a=e);q--;a===e&&0===q&&d(sl);a===e&&(q++,a=g,43===h.charCodeAt(g)?(b=Za,g++):(b=e,0===q&&d($a)),b!==e?(b=Hc(),b!==e?a=b=jg(b):(g=a,a=e)):(g=a,a=e),q--,a===e&&0===q&&d(tl),a===e&&(q++,a=g,43===
h.charCodeAt(g)?(b=Za,g++):(b=e,0===q&&d($a)),b!==e?(b=kb(),b!==e?(b.value="+"+b.value,a=b):(g=a,a=e)):(g=a,a=e),q--,a===e&&0===q&&d(ul)));q--;a===e&&0===q&&d(vl);a===e&&(a=Db())}q--;a===e&&0===q&&d(wl);return a}function Db(){var a;q++;var b;q++;a=g;45===h.charCodeAt(g)?(b=Ga,g++):(b=e,0===q&&d(Ha));b!==e?(b=Ic(),b!==e?a=b=ed(b):(g=a,a=e)):(g=a,a=e);q--;a===e&&0===q&&d(xl);a===e&&(q++,a=g,45===h.charCodeAt(g)?(b=Ga,g++):(b=e,0===q&&d(Ha)),b!==e?(b=Hc(),b!==e?a=b=ed(b):(g=a,a=e)):(g=a,a=e),q--,a===
e&&0===q&&d(yl),a===e&&(q++,a=g,45===h.charCodeAt(g)?(b=Ga,g++):(b=e,0===q&&d(Ha)),b!==e?(b=kb(),b!==e?a=b=ed(b):(g=a,a=e)):(g=a,a=e),q--,a===e&&0===q&&d(zl)));q--;a===e&&0===q&&d(Al);return a}function Lb(){var a;q++;h.substr(g,4)===kg?(a=kg,g+=4):(a=e,0===q&&d(Bl));a===e&&(h.substr(g,4)===lg?(a=lg,g+=4):(a=e,0===q&&d(Cl)));a!==e&&(a={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#boolean",value:!0});a===e&&(h.substr(g,5)===mg?(a=mg,g+=5):(a=e,0===q&&d(Dl)),a===e&&(h.substr(g,5)===
ng?(a=ng,g+=5):(a=e,0===q&&d(El))),a!==e&&(a={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#boolean",value:!1}));q--;a===e&&0===q&&d(Fl);return a}function od(){var a;q++;var b,c;q++;a=g;h.substr(g,3)===xc?(b=xc,g+=3):(b=e,0===q&&d(og));if(b!==e){b=[];pg.test(h.charAt(g))?(c=h.charAt(g),g++):(c=e,0===q&&d(qg));for(c===e&&(c=Sa());c!==e;)b.push(c),pg.test(h.charAt(g))?(c=h.charAt(g),g++):(c=e,0===q&&d(qg)),c===e&&(c=Sa());b!==e?(h.substr(g,3)===xc?(c=xc,g+=3):(c=e,0===q&&d(og)),c!==
e?a=b=Ea(b):(g=a,a=e)):(g=a,a=e)}else g=a,a=e;q--;a===e&&0===q&&d(Gl);a!==e&&(a=yc(a));if(a===e){q++;a=g;h.substr(g,3)===zc?(b=zc,g+=3):(b=e,0===q&&d(rg));if(b!==e){b=[];sg.test(h.charAt(g))?(c=h.charAt(g),g++):(c=e,0===q&&d(tg));for(c===e&&(c=Sa());c!==e;)b.push(c),sg.test(h.charAt(g))?(c=h.charAt(g),g++):(c=e,0===q&&d(tg)),c===e&&(c=Sa());b!==e?(h.substr(g,3)===zc?(c=zc,g+=3):(c=e,0===q&&d(rg)),c!==e?a=b=Ea(b):(g=a,a=e)):(g=a,a=e)}else g=a,a=e;q--;a===e&&0===q&&d(Hl);a!==e&&(a=yc(a));if(a===e){q++;
a=g;39===h.charCodeAt(g)?(b=fd,g++):(b=e,0===q&&d(gd));if(b!==e){b=[];ug.test(h.charAt(g))?(c=h.charAt(g),g++):(c=e,0===q&&d(vg));for(c===e&&(c=Sa());c!==e;)b.push(c),ug.test(h.charAt(g))?(c=h.charAt(g),g++):(c=e,0===q&&d(vg)),c===e&&(c=Sa());b!==e?(39===h.charCodeAt(g)?(c=fd,g++):(c=e,0===q&&d(gd)),c!==e?a=b=Ea(b):(g=a,a=e)):(g=a,a=e)}else g=a,a=e;q--;a===e&&0===q&&d(Il);a!==e&&(a=yc(a));if(a===e){q++;a=g;34===h.charCodeAt(g)?(b=wg,g++):(b=e,0===q&&d(xg));if(b!==e){b=[];yg.test(h.charAt(g))?(c=h.charAt(g),
g++):(c=e,0===q&&d(zg));for(c===e&&(c=Sa());c!==e;)b.push(c),yg.test(h.charAt(g))?(c=h.charAt(g),g++):(c=e,0===q&&d(zg)),c===e&&(c=Sa());b!==e?(34===h.charCodeAt(g)?(c=wg,g++):(c=e,0===q&&d(xg)),c!==e?a=b=Ea(b):(g=a,a=e)):(g=a,a=e)}else g=a,a=e;q--;a===e&&0===q&&d(Jl);a!==e&&(a=yc(a))}}}q--;a===e&&0===q&&d(Kl);return a}function ka(){var a;q++;a=Mb();a!==e&&(a={token:"uri",prefix:null,suffix:null,value:a});if(a===e){q++;var b,c;q++;a=g;b=Gc();b!==e?(c=Je(),c!==e?a=b=[b,c]:(g=a,a=e)):(g=a,a=e);q--;
a===e&&0===q&&d(Ll);a!==e&&(a={token:"uri",prefix:a[0],suffix:a[1],value:null});a===e&&(a=Gc(),a!==e&&(a={token:"uri",prefix:a,suffix:"",value:null}));q--;a===e&&0===q&&d(Ml)}q--;a===e&&0===q&&d(Nl);return a}function Mb(){var a,b,c;q++;a=g;60===h.charCodeAt(g)?(b=ad,g++):(b=e,0===q&&d(bd));if(b!==e){b=[];Ag.test(h.charAt(g))?(c=h.charAt(g),g++):(c=e,0===q&&d(Bg));for(;c!==e;)b.push(c),Ag.test(h.charAt(g))?(c=h.charAt(g),g++):(c=e,0===q&&d(Bg));b!==e?(62===h.charCodeAt(g)?(c=cd,g++):(c=e,0===q&&d(dd)),
c!==e?a=b=b.join(""):(g=a,a=e)):(g=a,a=e)}else g=a,a=e;q--;a===e&&0===q&&d(Ol);return a}function Gc(){var a,b,c;q++;a=g;var f,k;q++;b=g;c=pd();if(c!==e){f=[];k=Ac();k===e&&(46===h.charCodeAt(g)?(k=pa,g++):(k=e,0===q&&d(qa)));for(;k!==e;)f.push(k),k=Ac(),k===e&&(46===h.charCodeAt(g)?(k=pa,g++):(k=e,0===q&&d(qa)));if(f!==e){if("."==f[f.length-1])throw Error("Wrong PN_PREFIX, cannot finish with '.'");b=c+=f.join("")}else g=b,b=e}else g=b,b=e;q--;b===e&&0===q&&d(Pl);b===e&&(b=null);b!==e?(58===h.charCodeAt(g)?
(c=Gb,g++):(c=e,0===q&&d(Hb)),c!==e?a=b:(g=a,a=e)):(g=a,a=e);q--;a===e&&0===q&&d(Ql);return a}function kb(){var a,b;q++;a=[];Y.test(h.charAt(g))?(b=h.charAt(g),g++):(b=e,0===q&&d(Z));if(b!==e)for(;b!==e;)a.push(b),Y.test(h.charAt(g))?(b=h.charAt(g),g++):(b=e,0===q&&d(Z));else a=e;a!==e&&(b={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#integer"},b.value=Ea(a),a=b);q--;a===e&&0===q&&d(Rl);return a}function Hc(){var a,b,c,f,k;q++;a=g;b=[];Y.test(h.charAt(g))?(c=h.charAt(g),g++):(c=
e,0===q&&d(Z));if(c!==e)for(;c!==e;)b.push(c),Y.test(h.charAt(g))?(c=h.charAt(g),g++):(c=e,0===q&&d(Z));else b=e;if(b!==e)if(46===h.charCodeAt(g)?(c=pa,g++):(c=e,0===q&&d(qa)),c!==e){f=[];Y.test(h.charAt(g))?(k=h.charAt(g),g++):(k=e,0===q&&d(Z));for(;k!==e;)f.push(k),Y.test(h.charAt(g))?(k=h.charAt(g),g++):(k=e,0===q&&d(Z));f!==e?(a={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#decimal"},a.value=Ea([b,c,f])):(g=a,a=e)}else g=a,a=e;else g=a,a=e;if(a===e)if(a=g,46===h.charCodeAt(g)?
(b=pa,g++):(b=e,0===q&&d(qa)),b!==e){c=[];Y.test(h.charAt(g))?(f=h.charAt(g),g++):(f=e,0===q&&d(Z));if(f!==e)for(;f!==e;)c.push(f),Y.test(h.charAt(g))?(f=h.charAt(g),g++):(f=e,0===q&&d(Z));else c=e;c!==e?(f={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#decimal"},f.value=Ea([b,c]),a=f):(g=a,a=e)}else g=a,a=e;q--;a===e&&0===q&&d(Sl);return a}function Ic(){var a,b,c,f,k;q++;a=g;b=[];Y.test(h.charAt(g))?(c=h.charAt(g),g++):(c=e,0===q&&d(Z));if(c!==e)for(;c!==e;)b.push(c),Y.test(h.charAt(g))?
(c=h.charAt(g),g++):(c=e,0===q&&d(Z));else b=e;if(b!==e)if(46===h.charCodeAt(g)?(c=pa,g++):(c=e,0===q&&d(qa)),c!==e){f=[];Y.test(h.charAt(g))?(k=h.charAt(g),g++):(k=e,0===q&&d(Z));for(;k!==e;)f.push(k),Y.test(h.charAt(g))?(k=h.charAt(g),g++):(k=e,0===q&&d(Z));f!==e?(k=Jc(),k!==e?(a={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"},a.value=Ea([b,c,f,k])):(g=a,a=e)):(g=a,a=e)}else g=a,a=e;else g=a,a=e;if(a===e){a=g;46===h.charCodeAt(g)?(b=pa,g++):(b=e,0===q&&d(qa));if(b!==e){c=
[];Y.test(h.charAt(g))?(f=h.charAt(g),g++):(f=e,0===q&&d(Z));if(f!==e)for(;f!==e;)c.push(f),Y.test(h.charAt(g))?(f=h.charAt(g),g++):(f=e,0===q&&d(Z));else c=e;c!==e?(f=Jc(),f!==e?(k={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"},k.value=Ea([b,c,f]),a=k):(g=a,a=e)):(g=a,a=e)}else g=a,a=e;if(a===e){a=g;b=[];Y.test(h.charAt(g))?(c=h.charAt(g),g++):(c=e,0===q&&d(Z));if(c!==e)for(;c!==e;)b.push(c),Y.test(h.charAt(g))?(c=h.charAt(g),g++):(c=e,0===q&&d(Z));else b=e;b!==e?(c=Jc(),
c!==e?(f={token:"literal",lang:null,type:"http://www.w3.org/2001/XMLSchema#double"},f.value=Ea([b,c]),a=f):(g=a,a=e)):(g=a,a=e)}}q--;a===e&&0===q&&d(Tl);return a}function Jc(){var a,b,c,f,k;q++;a=g;Ul.test(h.charAt(g))?(b=h.charAt(g),g++):(b=e,0===q&&d(Vl));if(b!==e)if(Wl.test(h.charAt(g))?(c=h.charAt(g),g++):(c=e,0===q&&d(Xl)),c===e&&(c=null),c!==e){f=[];Y.test(h.charAt(g))?(k=h.charAt(g),g++):(k=e,0===q&&d(Z));if(k!==e)for(;k!==e;)f.push(k),Y.test(h.charAt(g))?(k=h.charAt(g),g++):(k=e,0===q&&d(Z));
else f=e;f!==e?a=b=Ea([b,c,f]):(g=a,a=e)}else g=a,a=e;else g=a,a=e;q--;a===e&&0===q&&d(Yl);return a}function Sa(){var a,b,c;q++;a=g;92===h.charCodeAt(g)?(b=Cg,g++):(b=e,0===q&&d(Dg));b!==e?(Zl.test(h.charAt(g))?(c=h.charAt(g),g++):(c=e,0===q&&d($l)),c!==e?a=b=[b,c]:(g=a,a=e)):(g=a,a=e);q--;a===e&&0===q&&d(am);return a}function Ja(){var a,b,c;q++;a=g;40===h.charCodeAt(g)?(b=R,g++):(b=e,0===q&&d(S));if(b!==e){b=[];for(c=r();c!==e;)b.push(c),c=r();b!==e?(41===h.charCodeAt(g)?(c=T,g++):(c=e,0===q&&d(U)),
c!==e?a=b={token:"triplesnodecollection",triplesContext:[],chainSubject:[{token:"uri",value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}]}:(g=a,a=e)):(g=a,a=e)}else g=a,a=e;q--;a===e&&0===q&&d(bm);return a}function r(){var a;q++;cm.test(h.charAt(g))?(a=h.charAt(g),g++):(a=e,0===q&&d(dm));if(a===e&&(em.test(h.charAt(g))?(a=h.charAt(g),g++):(a=e,0===q&&d(fm)),a===e&&(gm.test(h.charAt(g))?(a=h.charAt(g),g++):(a=e,0===q&&d(hm)),a===e&&(im.test(h.charAt(g))?(a=h.charAt(g),g++):(a=e,0===q&&d(jm)),
a===e)))){var b,c,f;q++;a=g;35===h.charCodeAt(g)?(b=Eg,g++):(b=e,0===q&&d(Fg));if(b!==e){c=[];Gg.test(h.charAt(g))?(f=h.charAt(g),g++):(f=e,0===q&&d(Hg));for(;f!==e;)c.push(f),Gg.test(h.charAt(g))?(f=h.charAt(g),g++):(f=e,0===q&&d(Hg));c!==e?a=b=[b,c]:(g=a,a=e)}else g=a,a=e;q--;a===e&&0===q&&d(km)}q--;a===e&&0===q&&d(lm);return a}function pd(){var a;q++;mm.test(h.charAt(g))?(a=h.charAt(g),g++):(a=e,0===q&&d(nm));a===e&&(om.test(h.charAt(g))?(a=h.charAt(g),g++):(a=e,0===q&&d(pm)),a===e&&(qm.test(h.charAt(g))?
(a=h.charAt(g),g++):(a=e,0===q&&d(rm)),a===e&&(sm.test(h.charAt(g))?(a=h.charAt(g),g++):(a=e,0===q&&d(tm)),a===e&&(um.test(h.charAt(g))?(a=h.charAt(g),g++):(a=e,0===q&&d(vm)),a===e&&(wm.test(h.charAt(g))?(a=h.charAt(g),g++):(a=e,0===q&&d(xm)),a===e&&(ym.test(h.charAt(g))?(a=h.charAt(g),g++):(a=e,0===q&&d(zm)),a===e&&(Am.test(h.charAt(g))?(a=h.charAt(g),g++):(a=e,0===q&&d(Bm)),a===e&&(Cm.test(h.charAt(g))?(a=h.charAt(g),g++):(a=e,0===q&&d(Dm)),a===e&&(Em.test(h.charAt(g))?(a=h.charAt(g),g++):(a=e,
0===q&&d(Fm)),a===e&&(Gm.test(h.charAt(g))?(a=h.charAt(g),g++):(a=e,0===q&&d(Hm)),a===e&&(Im.test(h.charAt(g))?(a=h.charAt(g),g++):(a=e,0===q&&d(Jm)),a===e&&(Km.test(h.charAt(g))?(a=h.charAt(g),g++):(a=e,0===q&&d(Lm)),a===e&&(Mm.test(h.charAt(g))?(a=h.charAt(g),g++):(a=e,0===q&&d(Nm)))))))))))))));q--;a===e&&0===q&&d(Om);return a}function Fb(){var a;q++;a=pd();a===e&&(95===h.charCodeAt(g)?(a=Ig,g++):(a=e,0===q&&d(Jg)));q--;a===e&&0===q&&d(Pm);return a}function Ke(){var a,b,c,f;q++;a=g;b=Fb();b===
e&&(Y.test(h.charAt(g))?(b=h.charAt(g),g++):(b=e,0===q&&d(Z)));if(b!==e){c=[];f=Fb();f===e&&(Y.test(h.charAt(g))?(f=h.charAt(g),g++):(f=e,0===q&&d(Z)),f===e&&(hd.test(h.charAt(g))?(f=h.charAt(g),g++):(f=e,0===q&&d(id)),f===e&&(jd.test(h.charAt(g))?(f=h.charAt(g),g++):(f=e,0===q&&d(kd)),f===e&&(ld.test(h.charAt(g))?(f=h.charAt(g),g++):(f=e,0===q&&d(md))))));for(;f!==e;)c.push(f),f=Fb(),f===e&&(Y.test(h.charAt(g))?(f=h.charAt(g),g++):(f=e,0===q&&d(Z)),f===e&&(hd.test(h.charAt(g))?(f=h.charAt(g),g++):
(f=e,0===q&&d(id)),f===e&&(jd.test(h.charAt(g))?(f=h.charAt(g),g++):(f=e,0===q&&d(kd)),f===e&&(ld.test(h.charAt(g))?(f=h.charAt(g),g++):(f=e,0===q&&d(md))))));c!==e?a=b+=c.join(""):(g=a,a=e)}else g=a,a=e;q--;a===e&&0===q&&d(Qm);return a}function Ac(){var a;q++;a=Fb();a===e&&(45===h.charCodeAt(g)?(a=Ga,g++):(a=e,0===q&&d(Ha)),a===e&&(Y.test(h.charAt(g))?(a=h.charAt(g),g++):(a=e,0===q&&d(Z)),a===e&&(hd.test(h.charAt(g))?(a=h.charAt(g),g++):(a=e,0===q&&d(id)),a===e&&(jd.test(h.charAt(g))?(a=h.charAt(g),
g++):(a=e,0===q&&d(kd)),a===e&&(ld.test(h.charAt(g))?(a=h.charAt(g),g++):(a=e,0===q&&d(md)))))));q--;a===e&&0===q&&d(Rm);return a}function Je(){var a,b,c,f;q++;a=g;b=Fb();b===e&&(Y.test(h.charAt(g))?(b=h.charAt(g),g++):(b=e,0===q&&d(Z)),b===e&&(58===h.charCodeAt(g)?(b=Gb,g++):(b=e,0===q&&d(Hb)),b===e&&(b=nd())));if(b!==e){c=[];f=Ac();f===e&&(46===h.charCodeAt(g)?(f=pa,g++):(f=e,0===q&&d(qa)),f===e&&(58===h.charCodeAt(g)?(f=Gb,g++):(f=e,0===q&&d(Hb)),f===e&&(f=nd())));for(;f!==e;)c.push(f),f=Ac(),
f===e&&(46===h.charCodeAt(g)?(f=pa,g++):(f=e,0===q&&d(qa)),f===e&&(58===h.charCodeAt(g)?(f=Gb,g++):(f=e,0===q&&d(Hb)),f===e&&(f=nd())));c!==e?a=b+=(c||[]).join(""):(g=a,a=e)}else g=a,a=e;q--;a===e&&0===q&&d(Sm);return a}function nd(){var a;q++;var b,c,f;q++;a=g;37===h.charCodeAt(g)?(b=Kg,g++):(b=e,0===q&&d(Lg));b!==e?(c=Mg(),c!==e?(f=Mg(),f!==e?a=b=[b,c,f]:(g=a,a=e)):(g=a,a=e)):(g=a,a=e);a!==e&&(a=a.join(""));q--;a===e&&0===q&&d(Tm);a===e&&(q++,a=g,92===h.charCodeAt(g)?(b=Cg,g++):(b=e,0===q&&d(Dg)),
b!==e?(95===h.charCodeAt(g)?(b=Ig,g++):(b=e,0===q&&d(Jg)),b===e&&(126===h.charCodeAt(g)?(b=Um,g++):(b=e,0===q&&d(Vm)),b===e&&(46===h.charCodeAt(g)?(b=pa,g++):(b=e,0===q&&d(qa)),b===e&&(45===h.charCodeAt(g)?(b=Ga,g++):(b=e,0===q&&d(Ha)),b===e&&(33===h.charCodeAt(g)?(b=Tc,g++):(b=e,0===q&&d(Uc)),b===e&&(36===h.charCodeAt(g)?(b=Le,g++):(b=e,0===q&&d(Me)),b===e&&(38===h.charCodeAt(g)?(b=Wm,g++):(b=e,0===q&&d(Xm)),b===e&&(39===h.charCodeAt(g)?(b=fd,g++):(b=e,0===q&&d(gd)),b===e&&(40===h.charCodeAt(g)?
(b=R,g++):(b=e,0===q&&d(S)),b===e&&(41===h.charCodeAt(g)?(b=T,g++):(b=e,0===q&&d(U)),b===e&&(42===h.charCodeAt(g)?(b=Ka,g++):(b=e,0===q&&d(La)),b===e&&(43===h.charCodeAt(g)?(b=Za,g++):(b=e,0===q&&d($a)),b===e&&(44===h.charCodeAt(g)?(b=ga,g++):(b=e,0===q&&d(ha)),b===e&&(59===h.charCodeAt(g)?(b=Ma,g++):(b=e,0===q&&d(Na)),b===e&&(58===h.charCodeAt(g)?(b=Gb,g++):(b=e,0===q&&d(Hb)),b===e&&(61===h.charCodeAt(g)?(b=kc,g++):(b=e,0===q&&d(lc)),b===e&&(47===h.charCodeAt(g)?(b=cb,g++):(b=e,0===q&&d(db)),b===
e&&(63===h.charCodeAt(g)?(b=Vc,g++):(b=e,0===q&&d(Wc)),b===e&&(35===h.charCodeAt(g)?(b=Eg,g++):(b=e,0===q&&d(Fg)),b===e&&(64===h.charCodeAt(g)?(b=eg,g++):(b=e,0===q&&d(fg)),b===e&&(37===h.charCodeAt(g)?(b=Kg,g++):(b=e,0===q&&d(Lg)))))))))))))))))))))),b!==e?a="\\"+b:(g=a,a=e)):(g=a,a=e),q--,a===e&&0===q&&d(Ym));q--;a===e&&0===q&&d(Zm);return a}function Mg(){var a;q++;Y.test(h.charAt(g))?(a=h.charAt(g),g++):(a=e,0===q&&d(Z));a===e&&($m.test(h.charAt(g))?(a=h.charAt(g),g++):(a=e,0===q&&d(an)),a===e&&
(bn.test(h.charAt(g))?(a=h.charAt(g),g++):(a=e,0===q&&d(cn))));q--;a===e&&0===q&&d(dn);return a}c=void 0!==c?c:{};var e={},Ng={DOCUMENT:l},Og=l,ah=f("[1] QueryUnit"),$g=f("[2] Query"),fh=f("[3] Prologue"),eh=f("[4] BaseDecl"),yd="BASE",ch=b("BASE",!1),zd="base",dh=b("base",!1),ih=f("[5] PrefixDecl"),Ad="PREFIX",gh=b("PREFIX",!1),Bd="prefix",hh=b("prefix",!1),Rg=f("[6] SelectQuery"),Ei=f("[7] SubSelect"),nh=f("[8] SelectClause"),Cd="SELECT",jh=b("SELECT",!1),Dd="select",kh=b("select",!1),na="DISTINCT",
Va=b("DISTINCT",!1),oa="distinct",Wa=b("distinct",!1),Ed="REDUCED",lh=b("REDUCED",!1),Fd="reduced",mh=b("reduced",!1),R="(",S=b("(",!1),Xa="AS",Ub=b("AS",!1),Ya="as",Vb=b("as",!1),T=")",U=b(")",!1),Ka="*",La=b("*",!1),Tg=f("[9] ConstructQuery"),Ob="CONSTRUCT",rd=b("CONSTRUCT",!1),Pb="construct",sd=b("construct",!1),Ta="WHERE",Qb=b("WHERE",!1),Ua="where",Rb=b("where",!1),Ca="{",Da=b("{",!1),ua="}",va=b("}",!1),Vg=f("[10] DescribeQuery"),td="DESCRIBE",Ug=b("DESCRIBE",!1),Yg=f("[11] AskQuery"),ud="ASK",
Wg=b("ASK",!1),vd="ask",Xg=b("ask",!1),sh=f("[12] DatasetClause"),Hd="FROM",oh=b("FROM",!1),Id="from",ph=b("from",!1),qh=f("[13] DefaultGraphClause"),rh=f("[14] NamedGraphClause"),ob="NAMED",Lc=b("NAMED",!1),pb="named",Mc=b("named",!1),th=f("[15] SourceSelector"),uh=f("[16] WhereClause"),Eh=f("[17] SolutionModifier"),xh=f("[18] GroupClause"),Jd="GROUP",vh=b("GROUP",!1),Kd="group",wh=b("group",!1),Wb="BY",Ld=b("BY",!1),Xb="by",Md=b("by",!1),Fh=f("[19] GroupCondition"),zh=f("[20] HavingClause"),Nd=
"HAVING",yh=b("HAVING",!1),Gh=f("[21] HavingCondition"),Ch=f("[22] OrderClause"),Od="ORDER",Ah=b("ORDER",!1),Pd="order",Bh=b("order",!1),Lh=f("[23] OrderCondition"),Qd="ASC",Hh=b("ASC",!1),Rd="asc",Ih=b("asc",!1),Sd="DESC",Jh=b("DESC",!1),Td="desc",Kh=b("desc",!1),Dh=f("[24] LimitOffsetClauses"),Oh=f("[25] LimitClause"),Ud="LIMIT",Mh=b("LIMIT",!1),Vd="limit",Nh=b("limit",!1),Rh=f("[26] OffsetClause"),Wd="OFFSET",Ph=b("OFFSET",!1),Xd="offset",Qh=b("offset",!1),Qg=f("[27] BindingsClause"),qd="BINDINGS",
Pg=b("BINDINGS",!1),Sh=f("[28] BindingValue"),Yb="UNDEF",Yd=b("UNDEF",!1),Zg=f("[28]\tValuesClause\t  ::=\t( 'VALUES' DataBlock )?"),Sb="VALUES",wd=b("VALUES",!1),Tb="values",xd=b("values",!1),bh=f("[29] UpdateUnit"),oi=f("[30] Update"),Ma=";",Na=b(";",!1),ni=f("[31] Update1"),Xh=f("[32] Load"),Zd="LOAD",Th=b("LOAD",!1),$d="load",Uh=b("load",!1),ae="INTO",Vh=b("INTO",!1),be="into",Wh=b("into",!1),$h=f("[33] Clear"),ce="CLEAR",Yh=b("CLEAR",!1),de="clear",Zh=b("clear",!1),qb="SILENT",Nc=b("SILENT",
!1),rb="silent",Oc=b("silent",!1),ci=f("[34] Drop"),ee="DROP",ai=b("DROP",!1),fe="drop",bi=b("drop",!1),fi=f("[35] Create"),ge="CREATE",di=b("CREATE",!1),he="create",ei=b("create",!1),gi=f("[36] InsertData"),Zb="INSERT",ie=b("INSERT",!1),$b="insert",je=b("insert",!1),ac="DATA",ke=b("DATA",!1),bc="data",le=b("data",!1),hi=f("[37] DeleteData"),sb="DELETE",Pc=b("DELETE",!1),tb="delete",Qc=b("delete",!1),ii=f("[38] DeleteWhere"),mi=f("[39] Modify"),me="WITH",ji=b("WITH",!1),ne="with",ki=b("with",!1),
li=f("[40] DeleteClause"),pi=f("[41] InsertClause"),si=f("[42] UsingClause"),oe="USING",qi=b("USING",!1),pe="using",ri=b("using",!1),ti=f("[43] GraphRef"),ub="GRAPH",Rc=b("GRAPH",!1),vb="graph",Sc=b("graph",!1),yi=f("[44] GraphRefAll"),qe="DEFAULT",ui=b("DEFAULT",!1),re="default",vi=b("default",!1),se="ALL",wi=b("ALL",!1),te="all",xi=b("all",!1),zi=f("[45] QuadPattern"),Ai=f("[46] QuadData"),Bi=f("[47] Quads"),pa=".",qa=b(".",!1),Ci=f("[48] QuadsNotTriples"),Di=f("[49] TriplesTemplate"),Gi=f("[50] GroupGraphPattern"),
Fi=f("[51] GroupGraphPatternSub"),Ki=f("[54] TriplesBlock"),bj=f("[53] GraphPatternNotTriples"),Oi=f("[54] OptionalGraphPattern"),we="OPTIONAL",Mi=b("OPTIONAL",!1),xe="optional",Ni=b("optional",!1),Si=f("[55] GraphGraphPattern"),Ui=f("[56] ServiceGraphPattern"),Ae="SERVICE",Ti=b("SERVICE",!1),Ri=f("[57] MinusGraphPattern"),ye="MINUS",Pi=b("MINUS",!1),ze="minus",Qi=b("minus",!1),Li=f("[58] GroupOrUnionGraphPattern"),cc="UNION",ue=b("UNION",!1),dc="union",ve=b("union",!1),Xi=f("[59] Filter"),Be="FILTER",
Vi=b("FILTER",!1),Ce="filter",Wi=b("filter",!1),$i=f("[60] Bind"),De="BIND",Yi=b("BIND",!1),Ee="bind",Zi=b("bind",!1),cj=f("[60] Constraint"),aj=f("[61] InlineData"),fj=f("[62] DataBlock"),dj=f("[63] InlineDataOneVar"),ej=f("[64] InlineDataFull"),gj=f("[65] DataBlockValue"),hj=f("[61] FunctionCall"),ij=f("[62] ArgList"),ga=",",ha=b(",",!1),jj=f("[63] ExpressionList"),Sg=f("[64] ConstructTemplate"),kj=f("[65] ConstructTriples"),mj=f("[66] TriplesSameSubject"),Hi=f("[83] PropertyListPathNotEmpty"),
nj=f("[67] PropertyListNotEmpty"),lj=f("[68] PropertyList"),oj=f("[86] ObjectListPath"),pj=f("[69] ObjectList"),qj=f("[87] ObjectPath"),rj=f("[70] Object"),sj=f("[71] Verb"),ec="a",fc=b("a",!1),Fe=function(){return{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"}},Ji=f("[72] TriplesSameSubjectPath"),tj=f("[73] PropertyListNotEmptyPath"),Ii=f("[74] PropertyListPath"),uj=f("[75]"),vj=f("[76] VerbSimple"),xj=f("[77] Path"),wj=f("[78] PathAlternative"),gc="|",
hc=b("|",!1),yj=f("[79] PathSequence"),cb="/",db=b("/",!1),Bj=f("[88] PathElt"),Cj=f("[81] PathEltOrInverse"),Ge="^",He=b("^",!1),Aj=f("[82] PathMod"),Vc="?",Wc=b("?",!1),Za="+",$a=b("+",!1),zj=f("[83] PathPrimary"),Tc="!",Uc=b("!",!1),Dj=f("[85] PathOneInPropertySet"),Ej=f("[86] Integer"),Hj=f("[100] TriplesNodePath"),Kj=f("[87] TriplesNode"),Gj=f("[101] BlankNodePropertyListPath"),Xc="[",Yc=b("[",!1),Zc="]",$c=b("]",!1),Jj=f("[88] BlankNodePropertyList"),Fj=f("[103] CollectionPath"),Ij=f("[89] Collection"),
Lj=f("[105] GraphNodePath"),Mj=f("[90] GraphNode"),Sj=f("[91] VarOrTerm"),Tj=f("[92] VarOrIRIref"),Wj=f("[93] Var"),Rj=f("[94] GraphTerm"),Yj=f("[95] Expression"),Xj=f("[96] ConditionalOrExpression"),ic="||",Ne=b("||",!1),Zj=f("[97] ConditionalAndExpression"),jc="&&",Oe=b("&&",!1),bk=f("[98] ValueLogical"),ak=f("[99] RelationalExpression"),kc="=",lc=b("=",!1),mc="!=",Pe=b("!=",!1),ad="<",bd=b("<",!1),cd=">",dd=b(">",!1),nc="<=",Qe=b("<=",!1),oc=">=",Re=b(">=",!1),pc="I",qc=b("I",!1),rc="i",sc=b("i",
!1),wb="N",xb=b("N",!1),yb="n",zb=b("n",!1),Se="O",Te=b("O",!1),Ue="o",Ve=b("o",!1),We="T",Xe=b("T",!1),Ye="t",Ze=b("t",!1),dk=f("[100] NumericExpression"),ck=f("[101] AdditiveExpression"),Ga="-",Ha=b("-",!1),ek=f("[102] MultiplicativeExpression"),fk=f("[103] UnaryExpression"),vk=f("[104] PrimaryExpression"),wk=f("[105] BrackettedExpression"),nl=f("[106] BuiltInCall"),nf="STR",xk=b("STR",!1),of="str",yk=b("str",!1),pf="LANG",zk=b("LANG",!1),qf="lang",Ak=b("lang",!1),rf="LANGMATCHES",Bk=b("LANGMATCHES",
!1),sf="langmatches",Ck=b("langmatches",!1),tf="DATATYPE",Dk=b("DATATYPE",!1),uf="datatype",Ek=b("datatype",!1),vf="BOUND",Fk=b("BOUND",!1),wf="bound",Gk=b("bound",!1),xf="IRI",Hk=b("IRI",!1),yf="iri",Ik=b("iri",!1),zf="URI",Jk=b("URI",!1),Af="uri",Kk=b("uri",!1),Bf="BNODE",Lk=b("BNODE",!1),Cf="bnode",Mk=b("bnode",!1),Df="COALESCE",Nk=b("COALESCE",!1),Ef="coalesce",Ok=b("coalesce",!1),Ff="IF",Pk=b("IF",!1),Gf="if",Qk=b("if",!1),Hf="ISLITERAL",Rk=b("ISLITERAL",!1),If="isliteral",Sk=b("isliteral",!1),
Jf="isLITERAL",Tk=b("isLITERAL",!1),Kf="ISBLANK",Uk=b("ISBLANK",!1),Lf="isblank",Vk=b("isblank",!1),Mf="isBLANK",Wk=b("isBLANK",!1),Nf="SAMETERM",Xk=b("SAMETERM",!1),Of="sameterm",Yk=b("sameterm",!1),Pf="ISURI",Zk=b("ISURI",!1),Qf="isuri",$k=b("isuri",!1),Rf="isURI",al=b("isURI",!1),Sf="ISIRI",bl=b("ISIRI",!1),Tf="isiri",cl=b("isiri",!1),Uf="isIRI",dl=b("isIRI",!1),Vf="custom:",el=b("custom:",!1),Wf="CUSTOM:",fl=b("CUSTOM:",!1),Xf=/^[a-zA-Z0-9_]/,Yf=a([["a","z"],["A","Z"],["0","9"],"_"],!1,!1),il=
f("[107] RegexExpression"),Zf="REGEX",gl=b("REGEX",!1),$f="regex",hl=b("regex",!1),jl=f("[108] ExistsFunc"),tc="EXISTS",ag=b("EXISTS",!1),uc="exists",bg=b("exists",!1),ml=f("[109] NotExistsFunc"),cg="NOT",kl=b("NOT",!1),dg="not",ll=b("not",!1),uk=f("[110] Aggregate"),$e="COUNT",hk=b("COUNT",!1),af="count",ik=b("count",!1),bf="GROUP_CONCAT",jk=b("GROUP_CONCAT",!1),cf="group_concat",kk=b("group_concat",!1),df="SEPARATOR",lk=b("SEPARATOR",!1),ef="SUM",mk=b("SUM",!1),ff="sum",nk=b("sum",!1),gf="MIN",
ok=b("MIN",!1),hf="min",pk=b("min",!1),jf="MAX",qk=b("MAX",!1),kf="max",rk=b("max",!1),lf="AVG",sk=b("AVG",!1),mf="avg",tk=b("avg",!1),gk=f("[117] IRIrefOrFunction"),ql=f("[112] RDFLiteral"),ig="^^",pl=b("^^",!1),wl=f("[113] NumericLiteral"),rl=f("[114] NumericLiteralUnsigned"),vl=f("[115] NumericLiteralPositive"),Al=f("[116] NumericLiteralNegative"),Fl=f("[117] BooleanLiteral"),kg="TRUE",Bl=b("TRUE",!1),lg="true",Cl=b("true",!1),mg="FALSE",Dl=b("FALSE",!1),ng="false",El=b("false",!1),Kl=f("[118] String"),
yc=function(a){return{token:"string",value:a}},Nl=f("[119] IRIref"),Ml=f("[120] PrefixedName"),Qj=f("[121] BlankNode"),Ol=f("[122] IRI_REF"),Ag=/^[^<>"{}|\^`\\]/,Bg=a('<>"{}|^`\\'.split(""),!0,!1),Ql=f("[123] PNAME_NS"),Gb=":",Hb=b(":",!1),Ll=f("[124] PNAME_LN"),Oj=f("[125] BLANK_NODE_LABEL"),Ie="_:",Nj=b("_:",!1),Uj=f("[126] VAR1"),Vj=f("[127] VAR2"),Le="$",Me=b("$",!1),ol=f("[128] LANGTAG"),eg="@",fg=b("@",!1),gg=/^[a-zA-Z]/,hg=a([["a","z"],["A","Z"]],!1,!1),vc=/^[a-zA-Z0-9]/,wc=a([["a","z"],["A",
"Z"],["0","9"]],!1,!1),Rl=f("[129] INTEGER"),Y=/^[0-9]/,Z=a([["0","9"]],!1,!1),Sl=f("[130] DECIMAL"),Tl=f("[131] DOUBLE"),ul=f("[132] INTEGER_POSITIVE"),tl=f("[133] DECIMAL_POSITIVE"),jg=function(a){a.value="+"+a.value;return a},sl=f("[134] DOUBLE_POSITIVE"),zl=f("[135] INTEGER_NEGATIVE"),ed=function(a){a.value="-"+a.value;return a},yl=f("[136] DECIMAL_NEGATIVE"),xl=f("[137] DOUBLE_NEGATIVE"),Yl=f("[138] EXPONENT"),Ul=/^[eE]/,Vl=a(["e","E"],!1,!1),Wl=/^[+\-]/,Xl=a(["+","-"],!1,!1),Il=f("[139] STRING_LITERAL1"),
fd="'",gd=b("'",!1),ug=/^[^'\\\n\r]/,vg=a(["'","\\","\n","\r"],!0,!1),Jl=f("[140] STRING_LITERAL2"),wg='"',xg=b('"',!1),yg=/^[^"\\\n\r]/,zg=a(['"',"\\","\n","\r"],!0,!1),Gl=f("[141] STRING_LITERAL_LONG1"),xc="'''",og=b("'''",!1),pg=/^[^'\\]/,qg=a(["'","\\"],!0,!1),Hl=f("[142] STRING_LITERAL_LONG2"),zc='"""',rg=b('"""',!1),sg=/^[^"\\]/,tg=a(['"',"\\"],!0,!1),am=f("[143] ECHAR"),Cg="\\",Dg=b("\\",!1),Zl=/^[tbnrf"']/,$l=a("tbnrf\"'".split(""),!1,!1),bm=f("[144] NIL"),lm=f("[145] WS"),cm=/^[ ]/,dm=a([" "],
!1,!1),em=/^[\t]/,fm=a(["\t"],!1,!1),gm=/^[\r]/,hm=a(["\r"],!1,!1),im=/^[\n]/,jm=a(["\n"],!1,!1),km=f(" COMMENT"),Eg="#",Fg=b("#",!1),Gg=/^[^\n\r]/,Hg=a(["\n","\r"],!0,!1),Pj=f("[146] ANON"),Om=f("[147] PN_CHARS_BASE"),mm=/^[A-Z]/,nm=a([["A","Z"]],!1,!1),om=/^[a-z]/,pm=a([["a","z"]],!1,!1),qm=/^[\xC0-\xD6]/,rm=a([["\u00c0","\u00d6"]],!1,!1),sm=/^[\xD8-\xF6]/,tm=a([["\u00d8","\u00f6"]],!1,!1),um=/^[\xF8-\u02FF]/,vm=a([["\u00f8","\u02ff"]],!1,!1),wm=/^[\u0370-\u037D]/,xm=a([["\u0370","\u037d"]],!1,
!1),ym=/^[\u037F-\u1FFF]/,zm=a([["\u037f","\u1fff"]],!1,!1),Am=/^[\u200C-\u200D]/,Bm=a([["\u200c","\u200d"]],!1,!1),Cm=/^[\u2070-\u218F]/,Dm=a([["\u2070","\u218f"]],!1,!1),Em=/^[\u2C00-\u2FEF]/,Fm=a([["\u2c00","\u2fef"]],!1,!1),Gm=/^[\u3001-\uD7FF]/,Hm=a([["\u3001","\ud7ff"]],!1,!1),Im=/^[\uF900-\uFDCF]/,Jm=a([["\uf900","\ufdcf"]],!1,!1),Km=/^[\uFDF0-\uFFFD]/,Lm=a([["\ufdf0","\ufffd"]],!1,!1),Mm=/^[\u1000-\uEFFF]/,Nm=a([["\u1000","\uefff"]],!1,!1),Pm=f("[148] PN_CHARS_U"),Ig="_",Jg=b("_",!1),Qm=f("[149] VARNAME"),
hd=/^[\xB7]/,id=a(["\u00b7"],!1,!1),jd=/^[\u0300-\u036F]/,kd=a([["\u0300","\u036f"]],!1,!1),ld=/^[\u203F-\u2040]/,md=a([["\u203f","\u2040"]],!1,!1),Rm=f("[150] PN_CHARS"),Pl=f("[151] PN_PREFIX"),Sm=f("[152] PN_LOCAL"),Zm=f("[170] PLX"),Tm=f("[171] PERCENT"),Kg="%",Lg=b("%",!1),dn=f("[172] HEX"),$m=/^[A-F]/,an=a([["A","F"]],!1,!1),bn=/^[a-f]/,cn=a([["a","f"]],!1,!1),Ym=f("[173] PN_LOCAL_ESC"),Um="~",Vm=b("~",!1),Wm="&",Xm=b("&",!1),g=0,Nb=[{line:1,column:1}],Fa=0,Kc=[],q=0,Bc;if("startRule"in c){if(!(c.startRule in
Ng))throw Error("Can't start parsing from rule \""+c.startRule+'".');Og=Ng[c.startRule]}var Ea=function(a){for(var b="",c=0;c<a.length;c++)b="string"===typeof a[c]?b+a[c]:b+a[c].join("");return b},ra=0,Gd=function(a){var b="";if(null==a)return null;for(var c=0;c<a.length;c++)b+=a[c];return b.toUpperCase()};Bc=Og();if(Bc!==e&&g===h.length)return Bc;Bc!==e&&g<h.length&&d({type:"end"});throw function(a,b,c){return new m(m.buildMessage(a,b),a,b,c)}(Kc,Fa<h.length?h.charAt(Fa):null,Fa<h.length?t(Fa,Fa+
1):t(Fa,Fa));}}}()},{}],47:[function(x,C,B){x("./btree");var m=x("./utils"),h=x("./lexicon").Lexicon;PersistentLexicon=function(c,b){var a=this;m.registerIndexedDB(a);this.defaultGraphOid=0;this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph";this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri};this.oidCounter=1;a.dbName=b||"rdfstorejs";var f=a.indexedDB.open(this.dbName+"_lexicon",1);f.onerror=function(a){c(null,Error("Error opening IndexedDB: "+
a.target.errorCode))};f.onsuccess=function(b){a.db=b.target.result;c(a)};f.onupgradeneeded=function(b){a.db=b.target.result;a.db.createObjectStore("knownGraphs",{keyPath:"oid"}).createIndex("uriToken","uriToken",{unique:!0});a.db.createObjectStore("uris",{keyPath:"id",autoIncrement:!0}).createIndex("uri","uri",{unique:!0});a.db.createObjectStore("blanks",{keyPath:"id",autoIncrement:!0}).createIndex("label","label",{unique:!0});a.db.createObjectStore("literals",{keyPath:"id",autoIncrement:!0}).createIndex("literal",
"literal",{unique:!0})}};PersistentLexicon.prototype.registerGraph=function(c,b,a){if(c!=this.defaultGraphOid){var f=this.db.transaction(["knownGraphs"],"readwrite");f.onerror=function(b){a(null,Error(b.target.statusCode))};f.objectStore("knownGraphs").add({oid:c,uriToken:b}).onsuccess=function(b){a(!0)}}else a()};PersistentLexicon.prototype.registeredGraphs=function(c,b){var a=[],f=this.db.transaction(["knownGraphs"],"readwrite").objectStore("knownGraphs").openCursor();f.onsuccess=function(f){(f=
f.target.result)?(!0===c?a.push(f.value.uriToken):a.push(f.value.oid),f.continue()):b(a)};f.onerror=function(a){b(null,Error("Error retrieving data from the cursor: "+a.target.errorCode))}};PersistentLexicon.prototype.registerUri=function(c,b){if(c===this.defaultGraphUri)b(this.defaultGraphOid);else{var a=this.db.transaction(["uris"],"readwrite").objectStore("uris"),f=a.index("uri").get(c);f.onsuccess=function(f){if(f=f.target.result){f.counter++;var h=f.id;f=a.put(f);f.onsuccess=function(a){b(h)};
f.onerror=function(a){b(null,Error("Error updating the URI data"+a.target.errorCode))}}else f=a.add({uri:c,counter:0}),f.onsuccess=function(a){b(a.target.result)},f.onerror=function(a){b(null,Error("Error inserting the URI data"+a.target.errorCode))}};f.onerror=function(a){b(null,Error("Error retrieving the URI data"+a.target.errorCode))}}};PersistentLexicon.prototype.resolveUri=function(c,b){if(c===this.defaultGraphUri)b(this.defaultGraphOid);else{var a=this.db.transaction(["uris"]).objectStore("uris").index("uri").get(c);
a.onsuccess=function(a){null!=a.target.result?b(a.target.result.id):b(-1)};a.onerror=function(a){b(null,Error("Error retrieving uri data "+a.target.errorCode))}}};PersistentLexicon.prototype.resolveUriCost=function(c,b){if(c===this.defaultGraphUri)b(0);else{var a=that.db.transaction(["uris"]).objectStore("uris").index("uri").get(c);a.onsuccess=function(a){null!=a.target.result?b(a.target.result.cost):b(-1)};a.onerror=function(a){b(null,Error("Error retrieving uri data "+a.target.errorCode))}}};PersistentLexicon.prototype.registerBlank=
function(c){var b=guid(),b=this.db.transaction(["blanks"],"readwrite").objectStore("blanks").add({label:b,counter:0});b.onsuccess=function(a){c(a.target.result)};b.onerror=function(a){c(null,Error("Error inserting the URI data"+a.target.errorCode))}};PersistentLexicon.prototype.resolveBlankCost=function(c,b){b(0)};PersistentLexicon.prototype.registerLiteral=function(c,b){var a=this.db.transaction(["literals"],"readwrite").objectStore("literals"),f=a.index("literal").get(c);f.onsuccess=function(f){if(f=
f.target.result){f.counter++;var h=f.id;f=a.put(f);f.onsuccess=function(a){b(h)};f.onerror=function(a){b(null,Error("Error updating the literal data"+a.target.errorCode))}}else f=a.add({literal:c,counter:0}),f.onsuccess=function(a){b(a.target.result)},f.onerror=function(a){b(null,Error("Error inserting the literal data"+a.target.errorCode))}};f.onerror=function(a){b(null,Error("Error retrieving the literal data"+a.target.errorCode))}};PersistentLexicon.prototype.resolveLiteral=function(c,b){var a=
that.db.transaction(["literals"]).objectStore("literals").index("literal").get(c);a.onsuccess=function(a){null!=a.target.result?b(a.target.result.id):b(-1)};a.onerror=function(a){b(null,Error("Error retrieving literal data "+a.target.errorCode))}};PersistentLexicon.prototype.resolveLiteralCost=function(c,b){var a=that.db.transaction(["literals"]).objectStore("literals").index("literal").get(c);a.onsuccess=function(a){null!=a.target.result?b(a.target.result.cost):b(-1)};a.onerror=function(a){b(null,
Error("Error retrieving literal data "+a.target.errorCode))}};PersistentLexicon.prototype.parseLiteral=function(c){return h.prototype.parseLiteral(c)};PersistentLexicon.prototype.parseUri=function(c){return h.prototype.parseUri(c)};PersistentLexicon.prototype.retrieve=function(c,b){var a=this;if(c===this.defaultGraphOid)b({token:"uri",value:this.defaultGraphUri,prefix:null,suffix:null,defaultGraph:!0});else{var f=a.db.transaction(["uris","literals","blanks"]);m.seq(function(b,h){var d=f.objectStore("uris").get(c);
d.onsuccess=function(b){null!=b.target.result?h(null,a.parseUri(b.target.result.uri)):h(null,null)};d.onerror=function(a){h(Error("Error searching in URIs data "+a.target.errorCode))}},function(b,h){if(null==b){var d=f.objectStore("literals").get(c);d.onsuccess=function(b){null!=b.target.result?h(null,a.parseLiteral(b.target.result.literal)):h(null,null)};d.onerror=function(a){h(Error("Error searching in Literals data "+a.target.errorCode))}}else h(null,b)},function(b,h){if(null==b){var d=f.objectStore("blanks").get(c);
d.onsuccess=function(b){null!=b.target.result?h(null,a.parseLiteral({token:"blank",value:"_:"+b.target.result.id})):h(null,null)};d.onerror=function(a){h(Error("Error searching in blanks data "+a.target.errorCode))}}else h(null,b)})(null,function(a,c){a?b(null,a):b(c)})}};PersistentLexicon.prototype.clear=function(c){this.defaultGraphOid=0;this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph";this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri};
var b=this.db.transaction(["uris","literals","blanks"],"readwrite"),a,f=b.objectStore("uris"),h=b.objectStore("literals"),m=b.objectStore("blanks"),d=function(){null!=c&&c()};a=f.clear();a.onsuccess=function(){a=h.clear();a.onsuccess=function(){a=m.clear();a.onsuccess=d;a.onerror=d};a.onerror=d};a.onerror=d};PersistentLexicon.prototype.unregister=function(c,b,a){var f=this;m.seq(function(a){f._unregisterTerm(c.subject.token,b.subject,a)},function(a){f._unregisterTerm(c.predicate.token,b.predicate,
a)},function(a){f._unregisterTerm(c.object.token,b.object,a)},function(a){null!=c.graph?f._unregisterTerm(c.graph.token,b.graph,a):a()})(function(){a(!0)})};PersistentLexicon.prototype._unregisterTerm=function(c,b,a){var f=this.db.transaction(["uris","literals","blanks","knownGraphs"],"readwrite");"uri"===c?b!=this.defaultGraphOid?(c=f.objectStore("uris").delete(b),c.onsuccess=function(){f.objectStore("knownGraphs").delete(b).onsuccess=function(){a()}}()):a():"literal"===c?(c=f.objectStore("literals").delete(b),
c.onsuccess=function(){a()}):"blank"===c?(c=f.objectStore("blanks").delete(b),c.onsuccess=function(){a()}):a()};C.exports={PersistentLexicon:PersistentLexicon}},{"./btree":40,"./lexicon":44,"./utils":57}],48:[function(x,C,B){var m=x("./utils");PersistentQuadBackend=function(h,c){var b=this;if(0!==arguments){m.registerIndexedDB(b);this.indexMap={};this.indices="SPOG GP OGS POG GSP OS".split(" ");this.componentOrders={SPOG:["subject","predicate","object","graph"],GP:["graph","predicate","subject","object"],
OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate","object"],OS:["object","subject","predicate","graph"]};b.dbName=h.name||"rdfstorejs";var a=b.indexedDB.open(this.dbName+"_db",1);a.onerror=function(a){c(null,Error("Error opening IndexedDB: "+a.target.errorCode))};a.onsuccess=function(a){b.db=a.target.result;c(b)};a.onupgradeneeded=function(a){var c=a.target.result.createObjectStore(b.dbName,{keyPath:"SPOG"});m.each(b.indices,
function(a){"SPOG"!==a&&c.createIndex(a,a,{unique:!1})})}}};PersistentQuadBackend.prototype.index=function(h,c){var b=this;m.each(this.indices,function(a){h[a]=b._genMinIndexKey(h,a)});var a=b.db.transaction([b.dbName],"readwrite");a.oncomplete=function(a){};a.onerror=function(a){c(null,Error(a.target.statusCode))};a.objectStore(b.dbName).add(h).onsuccess=function(a){c(!0)}};PersistentQuadBackend.prototype.range=function(h,c){var b=this.db.transaction([this.dbName]).objectStore(this.dbName),a=this._indexForPattern(h),
f=this._genMinIndexKey(h,a),k=this._genMaxIndexKey(h,a),f=this.IDBKeyRange.bound(f,k,!1,!1),m=[];("SPOG"===a?b:b.index(a)).openCursor(f).onsuccess=function(a){(a=a.target.result)?(m.push(a.value),a.continue()):c(m)}};PersistentQuadBackend.prototype.search=function(h,c){var b=this.db.transaction([this.dbName]).objectStore(this.dbName),a=this._genMinIndexKey(h,"SPOG"),b=b.get(a);b.onerror=function(a){c(null,Error(a.target.statusCode))};b.onsuccess=function(a){c(null!=a.target.result)}};PersistentQuadBackend.prototype.delete=
function(h,c){var b=this._genMinIndexKey(h,"SPOG"),b=this.db.transaction([this.dbName],"readwrite").objectStore(this.dbName).delete(b);b.onsuccess=function(){c(!0)};b.onerror=function(a){c(null,Error(a.target.statusCode))}};PersistentQuadBackend.prototype._genMinIndexKey=function(h,c){return m.map(this.componentOrders[c],function(b){return"string"===typeof h[b]||null==h[b]?"-1":""+h[b]}).join(".")};PersistentQuadBackend.prototype._genMaxIndexKey=function(h,c){for(var b=this.componentOrders[c],a=[],
f=!1,k=0;k<b.length;k++){var t=h[b[k]];"string"===typeof t?(!1===f&&(f=!0,0<=k-1&&(a[k-1]+=1)),a[k]=-1):a[k]=t}return m.map(a,function(a){return""+a}).join(".")};PersistentQuadBackend.prototype._indexForPattern=function(h){h=h.indexKey;for(var c=0;c<this.indices.length;c++)for(var b=this.indices[c],a=this.componentOrders[b],f=0;f<a.length&&!1!==m.include(h,a[f]);f++)if(f==h.length-1)return b;return"SPOG"};PersistentQuadBackend.prototype.clear=function(h){var c;c=this.db.transaction([this.dbName],
"readwrite").objectStore(this.dbName).clear();c.onsuccess=function(){h()};c.onerror=function(){h()}};C.exports.PersistentQuadBackend=PersistentQuadBackend},{"./utils":57}],49:[function(x,C,B){var m=x("./quad_index").QuadIndex,h=x("./utils"),c=x("./utils");QuadBackend=function(b,a){this.indexMap={};this.treeOrder=b.treeOrder;this.indices=b.index||QuadBackend.allIndices;this.componentOrders=QuadBackend.componentOrders;var c=this;h.eachSeries(this.indices,function(a,b){new m({order:c.treeOrder,componentOrder:c.componentOrders[a]},
function(d){c.indexMap[a]=d;b()})},function(){a(c)})};QuadBackend.allIndices="SPOG GP OGS POG GSP OS".split(" ");QuadBackend.componentOrders={SPOG:["subject","predicate","object","graph"],GP:["graph","predicate","subject","object"],OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate","object"],OS:["object","subject","predicate","graph"]};QuadBackend.prototype._indexForPattern=function(b){b=b.indexKey;for(var a=0;a<QuadBackend.allIndices.length;a++)for(var f=
QuadBackend.allIndices[a],h=QuadBackend.componentOrders[f],m=0;m<h.length&&!1!==c.include(b,h[m]);m++)if(m==b.length-1)return f;return"SPOG"};QuadBackend.prototype.index=function(b,a){var c=this;1===this.indices.length?c.indexMap[this.indices[0]].insert(b,function(){a(!0)}):h.eachSeries(this.indices,function(a,h){c.indexMap[a].insert(b,function(){h()})},function(){a(!0)})};QuadBackend.prototype.range=function(b,a){var c=this._indexForPattern(b),c=this.indexMap[c];null!=c&&c.range(b,function(b){a(b)})};
QuadBackend.prototype.search=function(b,a){var c=this.indexMap.SPOG;null!=c&&c.search(b,function(b){a(null!=b)})};QuadBackend.prototype.delete=function(b,a){var c=this;1===this.indices.length?this.indexMap[this.indices[0]].delete(b,function(){a(!0)}):h.eachSeries(this.indices,function(a,h){c.indexMap[a].delete(b,function(){h()})},function(){a(!0)})};QuadBackend.prototype.clear=function(b){var a=this;if(1===this.indices.length){var c=this.indices[0];new m({order:a.treeOrder,componentOrder:a.componentOrders[c]},
function(h){a.indexMap[c]=h;b(!0)})}else h.eachSeries(this.indices,function(b,c){new m({order:a.treeOrder,componentOrder:a.componentOrders[b]},function(d){a.indexMap[b]=d;c()})},function(){b(!0)})};QuadBackendWorker=function(b,a){var c=this;if(h.isWorker())onmessage=function(a){try{var b=a.data,h=b.id,k=b.function,m=b.args;"init"===k?new QuadBackend(m,function(a){c.backend=a;postMessage({id:h,result:!0})}):(m.push(function(a){postMessage({id:h,result:a})}),c.backend[k].apply(c.backend,m))}catch(n){postMessage({error:n.toString()})}};
else if(window.Worker&&!0===b.workers){var k=b.worker_file||"rdfstore.js";this.requestId=0;this.indices="SPOG GP OGS POG GSP OS".split(" ");this.workers={};this.mailbox={};h.eachParallel(this.indices,function(a,d){c.workers[a]=new Worker(k);c.workers[a].onmessage=function(a){a=a.data;if("string"===typeof a)throw Error(a);if(null!=a.error)throw Error(a.error);if(null!=a.id&&0==a.id)d();else{var b=c.mailbox[a.id];delete c.mailbox[a.id];if(null!=a.id&&null!=b)b(a.result);else throw Error("Cannot find callback for message with id:"+
a.id);}};b.index=[a];c.workers[a].postMessage({id:0,"function":"init",args:b})},function(){a(c)})}else new QuadBackend(b,function(b){a(b)})};QuadBackendWorker.prototype.postMessage=function(b,a,c,h){this.requestId<(Number.MAX_SAFE_INTEGER||1E6)?this.requestId++:this.requestId=0;var m=this.requestId;a={id:m,"function":a,args:c};this.mailbox[m]=h;this.workers[b].postMessage(a)};QuadBackendWorker.prototype._indexForPattern=function(b){return QuadBackend.prototype._indexForPattern(b)};QuadBackendWorker.prototype.index=
function(b,a){var c=this;if(h.isWorker())this.backend(b,a);else if("undefined"!==typeof window&&window.Worker)h.eachParallel(this.indices,function(a,h){c.postMessage(a,"index",[b],h)},function(){a(c)});else throw Error("Invoking method of worker proxy in no supported env");};QuadBackendWorker.prototype.range=function(b,a){if(h.isWorker())this.backend(quad,a);else if("undefined"!==typeof window&&window.Worker){var c=this._indexForPattern(b);this.postMessage(c,"range",[b],a)}else throw Error("Invoking method of worker proxy in no supported env");
};QuadBackendWorker.prototype.search=function(b,a){if(h.isWorker())this.backend(b,a);else if("undefined"!==typeof window&&window.Worker)this.postMessage("SPOG","search",[b],a);else throw Error("Invoking method of worker proxy in no supported env");};QuadBackendWorker.prototype.delete=function(b,a){var c=this;if(h.isWorker())this.backend(b,a);else if("undefined"!==typeof window&&window.Worker)h.eachParallel(this.indices,function(a,h){c.postMessage(a,"delete",[b],h)},function(){a(c)});else throw Error("Invoking method of worker proxy in no supported env");
};QuadBackendWorker.prototype.clear=function(b){var a=this;if(h.isWorker())this.backend(quad,b);else if("undefined"!==typeof window&&window.Worker)h.eachParallel(this.indices,function(b,c){a.postMessage(b,"clear",[],c)},function(){b(a)});else throw Error("Invoking method of worker proxy in no supported env");};x=h.isWorker()?QuadBackendWorker:"undefined"!==typeof window&&window.Worker?QuadBackendWorker:QuadBackend;C.exports.QuadBackend=x},{"./quad_index":50,"./utils":57}],50:[function(x,C,B){var m=
x("./btree").Tree,h=x("./utils"),c=x("./utils");NodeKey=function(b,a){this.subject=b.subject;this.predicate=b.predicate;this.object=b.object;this.graph=b.graph;this.order=a};NodeKey.prototype.comparator=function(b){for(var a=0;a<this.order.length;a++){var c=this.order[a];if(null==b[c])break;else{if(this[c]<b[c])return-1;if(this[c]>b[c])return 1}}return 0};Pattern=function(b){this.subject=b.subject;this.predicate=b.predicate;this.object=b.object;this.graph=b.graph;this.indexKey=[];this.keyComponents=
{};var a=[],c=[],k=this;h.forEach(["subject","predicate","object","graph"],function(b){"string"===typeof k[b]?(c.push(b),k.keyComponents[b]=null):(a.push(b),k.keyComponents[b]=k[b],k.indexKey.push(b))});this.order=a.concat(c);this.key=new NodeKey(this.keyComponents,this.order)};QuadIndex=function(b,a){0!=arguments&&(this.componentOrder=b.componentOrder,m.call(this,b.order,function(b){b.comparator=function(a,c){for(var d=0;d<b.componentOrder.length;d++){var h=b.componentOrder[d],m=a[h],h=c[h];if(m<
h)return-1;if(m>h)return 1}return 0};b.rangeComparator=function(a,c){for(var d=0;d<b.componentOrder.length;d++){var h=b.componentOrder[d];if(null==c[h]||null==a[h])break;else{if(a[h]<c[h])return-1;if(a[h]>c[h])return 1}}return 0};a(b)}))};QuadIndex.prototype=h.create(m.prototype,{constructor:m});QuadIndex.prototype.insert=function(b,a){m.prototype.insert.call(this,b,null,function(b){a(b)})};QuadIndex.prototype.search=function(b,a){m.prototype.search.call(this,b,function(b){a(b)},!0)};QuadIndex.prototype.range=
function(b,a){this._rangeTraverse(this,this.root,b,a)};QuadIndex.prototype._rangeTraverse=function(b,a,f,h){var m=f.key,d=[],l=[a];c.whilst(function(){return 0<l.length},function(a){for(var f=l.shift(),h=0;h<f.numberActives&&-1===b.rangeComparator(f.keys[h].key,m);)h++;if(!0===f.isLeaf){for(var k=h;k<f.numberActives&&0===b.rangeComparator(f.keys[k].key,m);)d.push(f.keys[k].key),k++;a()}else b._diskRead(f.children[h],function(k){l.push(k);var y=h;c.whilst(function(){return y<f.numberActives&&0===b.rangeComparator(f.keys[y].key,
m)},function(a){d.push(f.keys[y].key);y++;b._diskRead(f.children[y],function(b){l.push(b);a()})},function(){a()})})},function(){h(d)})};C.exports={QuadIndex:QuadIndex,Pattern:Pattern,NodeKey:NodeKey}},{"./btree":40,"./utils":57}],51:[function(x,C,B){function m(a,b,c){this.name="BindExpressionError";this.bind=b;this.error=c;this.message=a}var h=x("./abstract_query_tree").AbstractQueryTree,c=x("./abstract_query_tree").NonSupportedSparqlFeatureError,b=x("./utils"),a=x("./quad_index"),f=x("./query_plan").QueryPlan,
k=x("./query_filters").QueryFilters,t=x("./rdf_model"),d=x("./rdf_loader").RDFLoader,l=x("./graph_callbacks").CallbacksBackend,u=x("./utils"),v=x("./utils");m.prototype=Error();m.constructor=m;QueryEngine=function(a){0!=arguments.length&&(this.backend=a.backend,this.lexicon=a.lexicon,this.eventsOnBatchLoad=a.eventsOnBatchLoad||!1,this.defaultPrefixes={},this.abstractQueryTree=new h,this.rdfLoader=new d(a.communication),this.callbacksBackend=new l(this),this.customFns=a.customFns||{})};QueryEngine.prototype.setCustomFunctions=
function(a){this.customFns=a};QueryEngine.prototype.registerNsInEnvironment=function(a,b){var c=[];null!=a&&null!=a.prefixes&&(c=a.prefixes);var d={},f;for(f in this.defaultPrefixes)d[f]=this.defaultPrefixes[f];for(f=0;f<c.length;f++){var h=c[f];"prefix"===h.token&&(d[h.prefix]=h.local)}b.namespaces=d;b.base=null!=a&&a.base&&"object"===typeof a.base?a.base.value:null};QueryEngine.prototype.applyModifier=function(a,b){if("DISTINCT"==a){for(var c={},d=[],f=0;f<b.length;f++){var h=b[f],k="",l;for(l in h){var m=
h[l];null==m?k=k+l+"null":"literal"==m.token?(null!=m.value&&(k+=m.value),null!=m.lang&&(k+=m.lang),null!=m.type&&(k+=m.type)):k=m.value?k+l+m.value:k+l+m}null==c[k]&&(d.push(h),c[k]=!0)}return d}return b};QueryEngine.prototype.applyLimitOffset=function(a,b,c){if(null==b&&null==a)return c;null==a&&(a=0);b=null==b?c.length:a+b;return c.slice(a,b)};QueryEngine.prototype.applySingleOrderBy=function(a,b,c,d,f){var h=[],l=this;u.eachSeries(a,function(a,f){k.collect(a.expression,[b],c,d,l,function(a){h.push(a[0].value);
f()})},function(){f({binding:b,value:h})})};QueryEngine.prototype.applyOrderBy=function(a,b,c,d,f){var h=this,k=[];null!=a&&0<a.length?u.eachSeries(b,function(b,f){h.applySingleOrderBy(a,b,c,d,function(a){k.push(a);f()})},function(){k.sort(function(b,c){return h.compareFilteredBindings(b,c,a,d)});for(var b=[],c=0;c<k.length;c++)b.push(k[c].binding);f(b)}):f(b)};QueryEngine.prototype.compareFilteredBindings=function(a,b,c,d){for(var f=0;;){if(f==a.value.length)return 0;var h=c[f].direction;if(null==
a.value[f]&&null==b.value[f])f++;else{if(null==a.value[f])a={value:!1};else if(null==b.value[f])a={value:!0};else if("blank"===a.value[f].token&&"blank"===b.value[f].token){f++;continue}else if("blank"===a.value[f].token)a={value:!1};else if("blank"===b.value[f].token)a={value:!0};else if("uri"===a.value[f].token&&"uri"===b.value[f].token)if(1==k.runEqualityFunction(a.value[f],b.value[f],[],this,d).value){f++;continue}else a=k.runTotalGtFunction(a.value[f],b.value[f],[]);else if("uri"===a.value[f].token)a=
{value:!1};else if("uri"===b.value[f].token)a={value:!0};else if("literal"===a.value[f].token&&"literal"===b.value[f].token&&null==a.value[f].type&&null==b.value[f].type)if(1==k.runEqualityFunction(a.value[f],b.value[f],[],this,d).value){f++;continue}else a=k.runTotalGtFunction(a.value[f],b.value[f],[]);else if("literal"===a.value[f].token&&null==a.value[f].type)a={value:!1};else if("literal"===b.value[f].token&&null==b.value[f].type)a={value:!0};else if(1==k.runEqualityFunction(a.value[f],b.value[f],
[],this,d).value){f++;continue}else a=k.runTotalGtFunction(a.value[f],b.value[f],[]);return 1==a.value?"ASC"===h?1:-1:"ASC"===h?-1:1}}};QueryEngine.prototype.removeDefaultGraphBindings=function(a,b){for(var c=[],d={},f=0;f<b.named.length;f++)d[b.named[f].oid]=!0;for(f=0;f<b.implicit.length;f++)null==d[b.implicit[f].oid]&&c.push(b.implicit[f].oid);c=[];for(f=0;f<a.length;f++){var h=a[f],k=!1,l;for(l in h){for(var m=0;m<d.length;m++)if(h[l]===d[m]){k=!0;break}if(k)break}k||c.push(h)}return c};QueryEngine.prototype.aggregateBindings=
function(a,b,c,d,f){this.copyDenormalizedBindings(b,d.outCache,function(b){for(var h={},l=0;l<a.length;l++){var m=k.runAggregator(a[l],b,this,c,d);a[l].alias?h[a[l].alias.value]=m:h[a[l].value.value]=m}f(h)})};QueryEngine.prototype.projectBindings=function(a,b,c){if("*"===a[0].kind)return b;for(var d=[],f=0;f<b.length;f++){for(var h=b[f],l={},m=!0,t=0;t<a.length;t++)if("variable"==a[t].token&&"aliased"!=a[t].kind)l[a[t].value.value]=h[a[t].value.value];else if("variable"==a[t].token&&"aliased"==a[t].kind){var u=
k.runFilter(a[t].expression,h,this,c,{blanks:{},outCache:{}});if(k.isEbvError(u)){m=!1;break}else l[a[t].alias.value]=u}!0===m&&d.push(l)}return d};QueryEngine.prototype.resolveNsInEnvironment=function(a,b){return b.namespaces[a]};QueryEngine.prototype.normalizeTerm=function(a,c,d,f){if("uri"===a.token)a=b.lexicalFormBaseUri(a,c),null==a?f(null):d?this.lexicon.registerUri(a,f):this.lexicon.resolveUri(a,f);else if("literal"===a.token)a=b.lexicalFormLiteral(a,c),d?this.lexicon.registerLiteral(a,f):
this.lexicon.resolveLiteral(a,f);else if("blank"===a.token){var h=a.value;a=c.blanks[h];null!=a?f(a):d?this.lexicon.registerBlank(function(a){c.blanks[h]=a;f(a)}):this.lexicon.resolveBlank(function(a){c.blanks[h]=a;f(a)})}else"var"===a.token?f(a.value):f(null)};QueryEngine.prototype.normalizeDatasets=function(a,b,c){var d=this;u.eachSeries(a,function(a,c){a.value===d.lexicon.defaultGraphUri?(a.oid=d.lexicon.defaultGraphOid,c()):d.normalizeTerm(a,b,!1,function(b){null!=b&&(a.oid=b);c()})},function(){c(!0)})};
QueryEngine.prototype.normalizeQuad=function(a,c,d,f){var h=null,k=null,l=null,m=null,t=this,v=!1;u.seq(function(f){if(null==a.graph||a.graph.value===t.lexicon.defaultGraphUri)m=0,f();else{var h=b.lexicalFormBaseUri(a.graph,c);t.normalizeTerm(a.graph,c,d,function(b){null!=b?(m=b,!0===d&&"var"!=a.graph.token?t.lexicon.registerGraph(b,h,function(){f()}):f()):(v=!0,f())})}},function(b){!1===v?t.normalizeTerm(a.subject,c,d,function(a){null!=a?h=a:v=!0;b()}):b()},function(b){!1===v?t.normalizeTerm(a.predicate,
c,d,function(a){null!=a?k=a:v=!0;b()}):b()},function(b){!1===v?t.normalizeTerm(a.object,c,d,function(a){null!=a?l=a:v=!0;b()}):b()})(function(){!0===v?f(null):f({subject:h,predicate:k,object:l,graph:m})})};QueryEngine.prototype.denormalizeBindingsList=function(a,b,c){var d=this,f=[];u.eachSeries(a,function(a,c){d.denormalizeBindings(a,b,function(a){f.push(a);c()})},function(){c(f)})};QueryEngine.prototype.copyDenormalizedBindings=function(a,b,c){var d=this,f=[];u.eachSeries(a,function(a,c){var h=
{},k=v.keys(a);u.eachSeries(k,function(c,f){var k=a[c];if(null==k)h[c]=null,f();else if("object"===typeof k)h[c]=k,f();else{var l=b[k];null!=l?(h[c]=l,f()):d.lexicon.retrieve(k,function(a){b[k]=a;h[c]=a;f()})}},function(){f.push(h);c()})},function(){c(f)})};QueryEngine.prototype.denormalizeBindings=function(a,b,c){var d=v.keys(a),f=b.outCache,h=this;u.eachSeries(d,function(c,d){var k=a[c];null==k?(a[c]=null,d()):"object"===typeof k?d():null!=f[k]?(a[c]=f[k],d()):h.lexicon.retrieve(k,function(f){a[c]=
f;"blank"===f.token&&(b.blanks[f.value]=k);d()})},function(){c(a)})};QueryEngine.prototype.execute=function(a,c,d,f){a=b.normalizeUnicodeLiterals(a);a=this.abstractQueryTree.parseQueryString(a);if(null==a)c(!1,"Error parsing query string");else if("query"===a.token&&"update"==a.kind){this.callbacksBackend.startGraphModification();var h=this;this.executeUpdate(a,function(a,b){h.lexicon.updateAfterWrite&&h.lexicon.updateAfterWrite();a?(h.callbacksBackend.cancelGraphModification(),c(a,b)):h.callbacksBackend.endGraphModification(function(){c(a,
b)})})}else"query"===a.token&&"query"==a.kind&&this.executeQuery(a,c,d,f)};QueryEngine.prototype.executeQuery=function(a,b,c,d){var f=a.units,h=this,k={blanks:{},outCache:{}};this.registerNsInEnvironment(a.prologue,k);var l=h.abstractQueryTree.parseExecutableUnit(f[0]);"select"===l.kind?this.executeSelect(l,k,c,d,function(a,c){null==a?"object"===typeof c&&!0===c.denorm?b(null,c.bindings):h.denormalizeBindingsList(c,k,function(a){b(null,a)}):b(a)}):"ask"===l.kind?(l.projection=[{token:"variable",kind:"*"}],
this.executeSelect(l,k,c,d,function(a,c){null==a?0<c.length?b(null,!0):b(null,!1):b(a)})):"construct"===l.kind&&(l.projection=[{token:"variable",kind:"*"}],h=this,this.executeSelect(l,k,c,d,function(a,c){null==a?h.denormalizeBindingsList(c,k,function(a){if(null!=a){var c=new t.Graph;null==l.template&&(l.template={triplesContext:l.pattern});for(var d=1,f=[],n=0;n<a.length;n++){for(var m=a[n],u=0;u<f.length;u++)delete f[u].valuetmp;for(u=0;u<l.template.triplesContext.length;u++){for(var v=["subject",
"predicate","object"],y=l.template.triplesContext[u],A=0;A<v.length;A++){var x=v[A];if("blank"===y[x].token&&(!y[x].valuetmp||null==y[x].valuetmp)){var D="_:b"+d;d++;y[x].valuetmp=D;f.push(y[x])}}v=t.buildRDFResource(y.subject,m,h,k);A=t.buildRDFResource(y.predicate,m,h,k);y=t.buildRDFResource(y.object,m,h,k);null!=v&&null!=A&&null!=y&&(A=new t.Triple(v,A,y),c.add(A))}}b(null,c)}else b(Error("Error denormalizing bindings."))}):b(a)}))};QueryEngine.prototype.executeSelect=function(a,b,c,d,f){if("select"===
a.kind||"ask"===a.kind||"construct"===a.kind||"modify"===a.kind){var h=a.projection,k=a.dataset,l=a.modifier,m=a.limit,t=a.offset,v=a.order,x=this;if(null!=c||null!=d)k.implicit=c||[],k.named=d||[];null!=k.implicit&&0===k.implicit.length&&null!=k.named&&0===k.named.length&&k.implicit.push(this.lexicon.defaultGraphUriTerm);x.normalizeDatasets(k.implicit.concat(k.named),b,function(){try{x.executeSelectUnit(h,k,a.pattern,b,function(c){if(null!=c){if(null!=a.group&&""===a.group){for(var d=!1,y=0;y<a.projection.length;y++)if(null!=
a.projection[y].expression&&"aggregate"===a.projection[y].expression.expressionType){d=!0;break}!0===d&&(a.group="singleGroup")}a.group&&""!=a.group?x.checkGroupSemantics(a.group,h)?x.groupSolution(c,a.group,k,b,function(a){var c=[];u.eachSeries(a,function(a,d){x.aggregateBindings(h,a,k,b,function(a){c.push(a);d()})},function(){f(null,{bindings:c,denorm:!0})})}):f(Error("Incompatible Group and Projection variables")):x.applyOrderBy(v,c,k,b,function(a){a=x.projectBindings(h,a,k);a=x.applyModifier(l,
a);a=x.applyLimitOffset(t,m,a);a=x.removeDefaultGraphBindings(a,k);f(null,a)})}else f(Error("Error executing SELECT query."))})}catch(c){f(c)}})}else f(Error("Cannot execute "+a.kind+" query as a select query"))};QueryEngine.prototype.groupSolution=function(a,b,c,d,f){var h=[],l=[],m=!1,t=this;"singleGroup"===b?f([a]):u.eachSeries(a,function(a,f){var n=!0;u.eachSeries(b,function(b,f){var l=null;if("var"===b.token)l=b.value,0==m&&h.push(l),f();else if("aliased_expression"===b.token){l=b.alias.value;
0==m&&h.push(l);if("var"===b.expression.primaryexpression)a[b.alias.value]=a[b.expression.value.value];else{var u=t.copyDenormalizedBindings([a],d.outCache),u=k.runFilter(b.expression,u[0],t,c,d);k.isEbvError(u)?n=!1:(null!=u.value&&(u.value=""+u.value),a[b.alias.value]=u)}f()}else t.copyDenormalizedBindings([a],d.outCache,function(c){c=k.runFilter(b,c[0],t,d);k.isEbvError(c)?n=!1:(a["groupCondition"+env._i]=c,l="groupCondition"+env._i,0==m&&h.push(l));f()})},function(){0==m&&(m=!0);!0===n&&l.push(a);
f()})},function(){for(var a={},b=0;b<l.length;b++){for(var c=l[b],d="",k=0;k<h.length;k++)var m=c[h[k]],d="object"===typeof m?d+m.value:d+m;null==a[d]?a[d]=[c]:a[d].push(c)}var b=[],n;for(n in a)b.push(a[n]);f(b)})};QueryEngine.prototype.executeSelectUnit=function(a,b,d,f,h){if("BGP"===d.kind)this.executeAndBGP(a,b,d,f,h);else if("UNION"===d.kind)this.executeUNION(a,b,d.value,f,h);else if("JOIN"===d.kind)this.executeJOIN(a,b,d,f,h);else if("LEFT_JOIN"===d.kind)this.executeLEFT_JOIN(a,b,d,f,h);else if("FILTER"===
d.kind){var l=this;this.executeSelectUnit(a,b,d.value,f,function(a){null!=a?k.checkFilters(d,a,!1,b,f,l,h):h([])})}else if("EMPTY_PATTERN"===d.kind)h([]);else throw new c(d.kind);};QueryEngine.prototype.executeUNION=function(a,b,c,d,h){var l=c[0],t=c[1],v=null,x,B;if(2!=c.length)throw"SPARQL algebra UNION with more than two components";var C=this;u.seq(function(c){try{C.executeSelectUnit(a,b,l,d,function(a){x=a;c()})}catch(f){v=f,c()}},function(c){if(null==v)try{C.executeSelectUnit(a,b,t,d,function(a){B=
a;c()})}catch(f){v=f,c()}else c()})(function(){if(null!=v)h(v);else{var a=f.unionBindings(x,B);C.runBinds(c.binds,a,b,d,function(a,f){if(null!=a)throw new m("Error processing bind expressions",c.binds,a);k.checkFilters(c,f,!1,b,d,C,h)})}})};QueryEngine.prototype.executeAndBGP=function(a,b,c,d,h){var l=this;f.executeAndBGPsDPSize(c.value,b,this,d,function(a){null!=a?l.runBinds(c.binds,a,b,d,function(a,f){if(null!=a)throw new m("Error processing bind expressions",c.binds,a);k.checkFilters(c,f,!1,b,
d,l,h)}):h(null)})};QueryEngine.prototype.executeLEFT_JOIN=function(a,b,c,d,h){var l=c.lvalue,t=c.rvalue;if("EMPTY_PATTERN"===l.kind)this.executeSelectUnit(a,b,t,d,h);else{var v=null,x=null,B=null,C=this,V,N;u.seq(function(c){try{C.executeSelectUnit(a,b,l,d,function(a){v=a;c()})}catch(f){B=f,c()}},function(c){if(null!=B)c();else try{C.executeSelectUnit(a,b,t,d,function(a){x=a;c()})}catch(f){B=f,c()}})(function(){if(null!=B)h(B);else{var a=f.leftOuterJoinBindings(v,x);C.runBinds(c.binds,a,b,d,function(f,
l){if(null!=f)throw new m("Error processing bind expressions",c.binds,f);k.checkFilters(c,a,!0,b,d,C,function(a){if(1<v.length&&1<x.length){var b=[],c={},d;for(d in v[0])c[d]=!0;for(d in x[0])1!=c[d]&&b.push(d);V=[];N={};for(c=0;c<a.length;c++)if(!0===a[c].__nullify__){for(var f=0;f<b.length;f++)a[c].bindings[b[f]]=null;var f=[],k=[];for(d in a[c].bindings)null!=a[c].bindings[d]&&(f.push(d+a[c].bindings[d]),f.sort(),k.push(f.join("")));if(null==N[f.join("")]){for(f=0;f<k.length;f++)N[k[f]]=!0;V.push(a[c].bindings)}}else for(d in V.push(a[c]),
f=[],a[c])f.push(d+a[c][d]),f.sort(),N[f.join("")]=!0;h(V)}else h(a)})})}})}};QueryEngine.prototype.executeJOIN=function(a,b,c,d,h){var l=c.lvalue,t=c.rvalue,v=null,x=null,B=null,C=this;u.seq(function(c){try{C.executeSelectUnit(a,b,l,d,function(a){v=a;c()})}catch(f){B=f,c()}},function(c){if(null!=B)c();else try{C.executeSelectUnit(a,b,t,d,function(a){x=a;c()})}catch(f){B=f,c()}})(function(){var a=null;if(null!=B)h(B);else if(0===v.length||0===x.length)h([]);else{var a={},n=[],u;for(u in v[0])a[u]=
!1;for(u in x[0])!1===a[u]&&n.push(u);a=0==n.length?f.joinBindings(v,x):C.abstractQueryTree.treeWithUnion(l)||C.abstractQueryTree.treeWithUnion(t)?f.joinBindings(v,x):f.joinBindings2(n,v,x);C.runBinds(c.binds,a,b,d,function(a,f){if(null!=a)throw new m("Error processing bind expressions",c.binds,a);k.checkFilters(c,f,!1,b,d,C,h)})}})};QueryEngine.prototype.rangeQuery=function(b,c,d){var f=this;f.normalizeQuad(b,c,!1,function(b){null!=b?f.backend.range(new a.Pattern(b),function(a){null==a||0==a.length?
d([]):d(a)}):d(null)})};QueryEngine.prototype.executeUpdate=function(a,c){var d=a.units,f=this,h={blanks:{},outCache:{}};this.registerNsInEnvironment(a.prologue,h);for(var k=0;k<d.length;k++){var l=f.abstractQueryTree.parseExecutableUnit(d[k]);if("insertdata"===l.kind){var m=null;u.eachSeries(l.quads,function(a,b){null===m?f._executeQuadInsert(a,h,function(a){null!=a&&(m=a);b()}):b()},function(){null===m?c(null,!0):c(m)})}else if("deletedata"===l.kind)m=null,u.eachSeries(l.quads,function(a,b){null===
m?f._executeQuadDelete(a,h,function(a){null!=a&&(m=a);b()}):b()},function(){null===m?c(null,!0):c(m)});else if("modify"===l.kind)this._executeModifyQuery(l,h,c);else if("create"===l.kind)c(!0);else if("load"===l.kind){var t={uri:b.lexicalFormBaseUri(l.sourceGraph,h)};null!=l.destinyGraph&&(t={uri:b.lexicalFormBaseUri(l.destinyGraph,h)});f=this;this.rdfLoader.load(l.sourceGraph.value,t,function(a,b){a?c(Error("error batch loading quads")):f.batchLoad(b,function(a){null!==a?c(null,a):c(Error("Error batch loading quads"))})})}else if("drop"===
l.kind)this._executeClearGraph(l.destinyGraph,h,c);else if("clear"===l.kind)this._executeClearGraph(l.destinyGraph,h,c);else throw Error("not supported execution unit");}};QueryEngine.prototype.batchLoad=function(b,c){var d=0,f={},h=this;this.eventsOnBatchLoad&&this.callbacksBackend.startGraphModification();var k=function(a,b,c,d){var k;if(a[b].uri||"uri"===a[b].token){var l=a[b].uri||a[b].value;h.lexicon.registerUri(l,function(f){var k=function(){null!=a[b].uri&&(a[b]={token:"uri",value:a[b].uri},
delete a[b].uri);c[b]=f;d()};"graph"===b?h.lexicon.registerGraph(f,l,function(){k()}):k()})}else a[b].literal||"literal"===a[b].token?h.lexicon.registerLiteral(a[b].literal||a[b].value,function(f){null!=a[b].literal&&(a[b]=h.lexicon.parseLiteral(a[b].literal),delete a[b].literal);c[b]=f;d()}):(k=f[a[b].blank||a[b].value],null==k?h.lexicon.registerBlank(function(h){f[a[b].blank||a[b].value]=h;null==a[b].token&&(a[b].token="blank",a[b].value=a[b].blank,delete a[b].blank);c[b]=h;d()}):(null==a[b].token&&
(a[b].token="blank",a[b].value=a[b].blank,delete a[b].blank),c[b]=k,d()))};u.eachSeries(b,function(b,c){var f={};u.eachSeries(["subject","predicate","object","graph"],function(a,c){k(b,a,f,c)},function(){var k=b;b=f;var m=new a.NodeKey(b);h.backend.search(m,function(a){a?c():h.backend.index(m,function(a){a&&(h.eventsOnBatchLoad&&h.callbacksBackend.nextGraphModification(l.added,[k,b]),d+=1);c()})})})},function(){null!=h.lexicon.updateAfterWrite&&h.lexicon.updateAfterWrite();var a=function(){c(d)};
h.eventsOnBatchLoad?h.callbacksBackend.endGraphModification(a()):a()})};QueryEngine.prototype._executeModifyQuery=function(a,b,c){var d=this,f=!0,h=Error("Error executing modify query"),k=null,l=["subject","predicate","object","graph"];a.insert=null==a.insert?[]:a.insert;a.delete=null==a.delete?[]:a.delete;u.seq(function(c){var l=[],m=[];null!=a.with&&l.push(a.with);if(null!=a.using)for(var m=[],t=0;t<a.using.length;t++){var u=a.using[t];"named"===u.kind?m.push(u.uri):l.push(u.uri)}a.dataset={};a.projection=
[{token:"variable",kind:"*"}];d.executeSelect(a,b,l,m,function(a,l){if(a)return h=a,f=!1,c();d.denormalizeBindingsList(l,b,function(a){null!=a?k=a:(h=Error("Error denormalizing bindings list"),f=!1);c()})})},function(c){var h=a.with;if(f){for(var m=[],t=0;t<a.delete.length;t++)for(var v=a.delete[t],x=0;x<k.length;x++){for(var A={},B=k[x],E=0;E<l.length;E++){var C=l[E];"graph"==C&&null==v[C]?A.graph=h:A[C]="var"===v[C].token?B[v[C].value]:v[C]}m.push(A)}u.eachSeries(m,function(a,c){d._executeQuadDelete(a,
b,function(){c()})},function(){c()})}else c()},function(c){var h=a.with;if(f){for(var m=[],t=0;t<a.insert.length;t++)for(var v=a.insert[t],x=0;x<k.length;x++){for(var A={},E=k[x],B=0;B<l.length;B++){var C=l[B];"graph"==C&&null==v[C]?A.graph=h:A[C]="var"===v[C].token?E[v[C].value]:v[C]}m.push(A)}u.eachSeries(m,function(a,c){d._executeQuadInsert(a,b,function(){c()})},function(){c()})}else c()})(function(){f?c(null):c(h)})};QueryEngine.prototype._executeQuadInsert=function(b,c,d){var f=this,h,k=!1,m=
null;u.seq(function(a){f.normalizeQuad(b,c,!0,function(b){null!=b?h=b:(k=!0,m="Error normalizing quad.");a()})},function(c){if(!1===k){var d=new a.NodeKey(h);f.backend.search(d,function(a){!0===a?c():f.backend.index(d,function(){f.callbacksBackend.nextGraphModification(l.added,[b,h]);c()})})}else c()})(function(){k?d(Error(m)):d(null,!0)})};QueryEngine.prototype._executeQuadDelete=function(b,c,d){var f=this,h,k=!1,m,t;u.seq(function(a){f.normalizeQuad(b,c,!0,function(b){null!=b?h=b:(k=!0,m="Error normalizing quad.");
a()})},function(b){!1===k?(t=new a.NodeKey(h),f.backend.delete(t,function(){b()})):b()},function(a){!1===k?f.lexicon.unregister(b,t,function(){f.callbacksBackend.nextGraphModification(l.deleted,[b,h]);a()}):a()})(function(){k?d(Error(m)):d(null,!0)})};QueryEngine.prototype._executeClearGraph=function(a,c,d){var f=this;"default"===a?this.execute("DELETE { ?s ?p ?o } WHERE { ?s ?p ?o }",d):"named"===a?f.lexicon.registeredGraphs(!0,function(a){if(null!=a){var b=!1;u.eachSeries(a,function(a,c){b?c():
f.execute("DELETE { GRAPH <"+a+"> { ?s ?p ?o } } WHERE { GRAPH <"+a+"> { ?s ?p ?o } }",function(d,h){d?(b=d,c()):f.lexicon.resolveUri(a,function(d){-1!=d?f.lexicon.knownGraphs.delete(d,function(){c()}):(b="Cannot find graph "+a+" to clear it",c())})})},function(){d(!b)})}else d(!1,"Error deleting named graphs")}):"all"===a?(f=this,this.execute("CLEAR DEFAULT",function(a,b){a?d(!1,b):f.execute("CLEAR NAMED",d)})):"uri"==a.token?(a=b.lexicalFormBaseUri(a,c),null!=a?(this.callbacksBackend.ongoingModification=
!0,this.execute("DELETE { GRAPH <"+a+"> { ?s ?p ?o } } WHERE { GRAPH <"+a+"> { ?s ?p ?o } }",function(a){f.callbacksBackend.ongoingModification=!1;d(a)})):d(!1,"wrong graph URI")):d(!1,"wrong graph URI")};QueryEngine.prototype.checkGroupSemantics=function(a,b){if("singleGroup"===a)return!0;for(var c={},d=0;d<a.length;d++){var f=a[d];"var"===f.token?c[f.value]=!0:"aliased_expression"===f.token&&(c[f.alias.value]=!0)}for(d=0;d<b.length;d++)if(f=b[d],"var"===f.kind){if(null==c[f.value.value])return!1}else if("aliased"===
f.kind&&f.expression&&"var"===f.expression.primaryexpression&&null==c[f.expression.value.value])return!1;return!0};QueryEngine.prototype.runBinds=function(a,b,c,d,f){var h=this;null!=a&&0<a.length?h.copyDenormalizedBindings(b,d.outCache,function(l){for(var m=0;m<b.length;m++)for(var t=0;t<a.length;t++){var u=a[t],v=k.runFilter(u.expression,l[m],h,c,d);k.isEbvError(v)?f(v):b[m][u.as.value]=v}f(null,b)}):f(null,b)};QueryEngine.prototype.computeCosts=function(a,b,c){for(var d=0;d<a.length;d++)a[d]._cost=
this.quadCost(a[d],b);c(a)};QueryEngine.prototype.quadCost=function(a,b){return 1};QueryEngine.prototype.registerDefaultNamespace=function(a,b){this.defaultPrefixes[a]=b};C.exports={QueryEngine:QueryEngine}},{"./abstract_query_tree":39,"./graph_callbacks":42,"./quad_index":50,"./query_filters":52,"./query_plan":53,"./rdf_loader":54,"./rdf_model":55,"./utils":57}],52:[function(x,C,B){var m=x("./utils"),h=x("./utils");QueryFilters={checkFilters:function(c,b,a,f,k,m,d){var l=[];c.filter&&"function"!==
typeof c.filter&&(l=c.filter);var u=[];if(null==l||0===l.length||null!=c.length)return d(b);QueryFilters.preprocessExistentialFilters(l,b,m,f,k,function(c){h.eachSeries(c,function(c,d){QueryFilters.run(c.value,b,a,f,k,m,function(a){for(var c=[],f=0;f<a.length;f++){var h=a[f];null!=h.__nullify__?u.push(h):c.push(h)}b=c;d()})},function(){d(b.concat(u))})})},preprocessExistentialFilters:function(c,b,a,f,k,t){var d=[];h.eachSeries(c,function(c,t){if("builtincall"!==c.value.expressionType||"exists"!==
c.value.builtincall&&"notexists"!==c.value.builtincall)if("conditionalor"===c.value.expressionType||"conditionaland"===c.value.expressionType){var v=m.map(c.value.operands,function(a){return{value:a}});QueryFilters.preprocessExistentialFilters(v,b,a,f,k,function(a){c.value.operands=a.map(function(a){return a.value});d.push(c);t()})}else"multiplicativeexpression"===c.value.expressionType?(v=m.map(c.value.factors,function(a){return{value:a}}),QueryFilters.preprocessExistentialFilters(v,b,a,f,k,function(a){c.value.factors=
a.map(function(a){return a.value});d.push(c);t()})):"additiveexpression"===c.value.expressionType?(v=m.map(c.value.summands,function(a){return{value:a}}),QueryFilters.preprocessExistentialFilters(v,b,a,f,k,function(a){c.value.summands=a.map(function(a){return a.value});d.push(c);t()})):"relationalexpression"===c.value.expressionType?(v=[{value:c.value.op1},{value:c.value.op2}],QueryFilters.preprocessExistentialFilters(v,b,a,f,k,function(a){c.value.op1=a[0].value;c.value.op2=a[1].value;d.push(c);t()})):
"irireforfunction"===c.value.expressionType||"custom"===c.value.expressionType?(v=m.map(c.value.args,function(a){return{value:a}}),QueryFilters.preprocessExistentialFilters(v,b,a,f,k,function(a){c.value.args=a.map(function(a){return a.value});d.push(c);t()})):(d.push(c),t());else{var n=c.value.builtincall,x=c.value.args,A={};a.copyDenormalizedBindings(b,k.outCache,function(b){h.eachSeries(b,function(b,c){var d=m.clone(x[0],!0),d=a.abstractQueryTree.parseSelect({pattern:d},b),d=a.abstractQueryTree.bind(d.pattern,
b);a.executeSelectUnit([{kind:"*"}],f,d,k,function(a){var d=null,d="exists"===n?QueryFilters.ebvBoolean(0!==a.length):QueryFilters.ebvBoolean(0===a.length);a=[];for(var f in b)a.push(JSON.stringify(b[f]));a=a.sort().join("");A[a]=d;c()})},function(){c.value.origArgs=c.value.args;c.value.args=A;d.push(c);t()})})}},function(){t(d)})},boundVars:function(c){if(null!=c.expressionType){var b=c.expressionType;if("relationalexpression"==b)return b=c.op2,QueryFilters.boundVars(c.op1)+QueryFilters.boundVars(b);
if("conditionalor"==b||"conditionaland"==b){for(var a=[],b=0;b<c.operands;b++)a=a.concat(QueryFilters.boundVars(c.operands[b]));return a}if("builtincall"==b){if(null==c.args)return[];a=[];for(b=0;b<c.args.length;b++)a=a.concat(QueryFilters.boundVars(c.args[b]));return a}if("multiplicativeexpression"==b){a=QueryFilters.boundVars(c.factor);for(b=0;b<c.factors.length;b++)a=a.concat(QueryFilters.boundVars(c.factors[b].expression));return a}if("additiveexpression"==b){a=QueryFilters.boundVars(c.summand);
for(b=0;b<c.summands.length;b++)a=a.concat(QueryFilters.boundVars(c.summands[b].expression));return a}if("regex"==b)return a=QueryFilters.boundVars(c.expression1),a.concat(QueryFilters.boundVars(c.expression2));if("unaryexpression"==b)return QueryFilters.boundVars(c.expression);if("atomic"==b)return"var"==c.primaryexpression?[c.value]:[]}else throw"Cannot find bound expressions in a no expression token";},run:function(c,b,a,f,h,m,d){m.copyDenormalizedBindings(b,h.outCache,function(l){for(var u=[],
v=0;v<b.length;v++){var n=QueryFilters.runFilter(c,l[v],m,f,h),n=QueryFilters.ebv(n);QueryFilters.isEbvError(n)?a&&(n={__nullify__:!0,bindings:b[v]},u.push(n)):!0===n?u.push(b[v]):a&&(n={__nullify__:!0,bindings:b[v]},u.push(n))}d(u)})},collect:function(c,b,a,f,h,m){h.copyDenormalizedBindings(b,f.outCache,function(d){for(var l=[],u=0;u<d.length;u++){var v=QueryFilters.runFilter(c,d[u],h,a,f);l.push({binding:b[u],value:v})}return m(l)})},runDistinct:function(c,b){},runAggregator:function(c,b,a,f,h){if(null==
b||0===b.length)return QueryFilters.ebvError();if("variable"===c.token&&"var"==c.kind)return b[0][c.value.value];if("variable"===c.token&&"aliased"===c.kind){if("atomic"===c.expression.expressionType&&"var"===c.expression.primaryexpression)return b[0][c.expression.value.value];if("aggregate"===c.expression.expressionType){if("max"===c.expression.aggregateType){for(var t=null,d=0;d<b.length;d++){var l=b[d],l=QueryFilters.runFilter(c.expression.expression,l,a,f,h);QueryFilters.isEbvError(l)||(null===
t?t=l:!0===QueryFilters.runLtFunction(t,l).value&&(t=l))}return null===t?QueryFilters.ebvError():t}if("min"===c.expression.aggregateType){t=null;for(d=0;d<b.length;d++)l=b[d],l=QueryFilters.runFilter(c.expression.expression,l,a,f,h),QueryFilters.isEbvError(l)||(null===t?t=l:!0===QueryFilters.runGtFunction(t,l).value&&(t=l));return null===t?QueryFilters.ebvError():t}if("count"===c.expression.aggregateType){var t={},u=0;if("*"===c.expression.expression)if(null!=c.expression.distinct&&""!=c.expression.distinct)for(d=
0;d<b.length;d++){var l=b[d],v=m.hashTerm(l);null==t[v]&&(t[v]=!0,u++)}else u=b.length;else for(d=0;d<b.length;d++)l=b[d],l=QueryFilters.runFilter(c.expression.expression,l,a,f,h),QueryFilters.isEbvError(l)||(null!=c.expression.distinct&&""!=c.expression.distinct?(v=m.hashTerm(l),null==t[v]&&(t[v]=!0,u++)):u++);return{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:""+u}}if("avg"===c.expression.aggregateType){for(var t={},n={token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",
value:"0"},d=u=0;d<b.length;d++)l=b[d],l=QueryFilters.runFilter(c.expression.expression,l,a,f,h),QueryFilters.isEbvError(l)||(null!=c.expression.distinct&&""!=c.expression.distinct?(v=m.hashTerm(l),null==t[v]&&(t[v]=!0,QueryFilters.isNumeric(l)&&(n=QueryFilters.runSumFunction(n,l),u++))):QueryFilters.isNumeric(l)&&(n=QueryFilters.runSumFunction(n,l),u++));c=QueryFilters.runDivFunction(n,{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:""+u});c.value=""+c.value;return c}if("sum"===
c.expression.aggregateType){t={};n={token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:"0"};for(d=0;d<b.length;d++)l=b[d],l=QueryFilters.runFilter(c.expression.expression,l,a,f,h),QueryFilters.isEbvError(l)||(null!=c.expression.distinct&&""!=c.expression.distinct?(v=m.hashTerm(l),null==t[v]&&(t[v]=!0,QueryFilters.isNumeric(l)&&(n=QueryFilters.runSumFunction(n,l)))):QueryFilters.isNumeric(l)&&(n=QueryFilters.runSumFunction(n,l)));n.value=""+n.value;return n}return l=QueryFilters.runFilter(aggregate.expression,
b[0],f,{blanks:{},outCache:{}})}}},runFilter:function(c,b,a,f,h){if(null!=c.expressionType){var t=c.expressionType;if("relationalexpression"==t){var t=QueryFilters.runFilter(c.op1,b,a,f,h),d=QueryFilters.runFilter(c.op2,b,a,f,h);return QueryFilters.runRelationalFilter(c,t,d,b,a,f,h)}if("conditionalor"==t)return QueryFilters.runOrFunction(c,b,a,f,h);if("conditionaland"==t)return QueryFilters.runAndFunction(c,b,a,f,h);if("additiveexpression"==t)return QueryFilters.runAddition(c.summand,c.summands,b,
a,f,h);if("builtincall"==t)return QueryFilters.runBuiltInCall(c.builtincall,c.args,b,a,f,h);if("multiplicativeexpression"==t)return QueryFilters.runMultiplication(c.factor,c.factors,b,a,f,h);if("unaryexpression"==t)return QueryFilters.runUnaryExpression(c.unaryexpression,c.expression,b,a,f,h);if("irireforfunction"==t)return QueryFilters.runIriRefOrFunction(c.iriref,c.args,b,a,f,h);if("regex"==t)return QueryFilters.runRegex(c.text,c.pattern,c.flags,b,a,f,h);if("custom"==t)return QueryFilters.runBuiltInCall(c.name,
c.args,b,a,f,h);if("atomic"==t){if("var"==c.primaryexpression)return b[c.value.value];"object"==typeof c.value&&null!=c.value.type&&"object"==typeof c.value.type&&(c.value.type=m.lexicalFormBaseUri(c.value.type,h));return c.value}throw"Unknown filter expression type";}throw"Cannot find bound expressions in a no expression token";},isRDFTerm:function(c){return null==c?!1:c.token&&"literal"==c.token||c.token&&"uri"==c.token||c.token&&"blank"==c.token?!0:!1},RDFTermEquality:function(c,b,a,f){return"literal"===
c.token&&"literal"===b.token?c.lang==b.lang&&c.type==b.type&&c.value==b.value?!0:null!=c.type&&null!=b.type?QueryFilters.ebvError():QueryFilters.isSimpleLiteral(c)&&null!=b.type?QueryFilters.ebvError():QueryFilters.isSimpleLiteral(b)&&null!=c.type?QueryFilters.ebvError():!1:"uri"===c.token&&"uri"===b.token?m.lexicalFormBaseUri(c,f)==m.lexicalFormBaseUri(b,f):"blank"===c.token&&"blank"===b.token?c.value==b.value:!1},isInteger:function(c){return null==c?!1:"literal"===c.token?"http://www.w3.org/2001/XMLSchema#integer"==
c.type||"http://www.w3.org/2001/XMLSchema#decimal"==c.type||"http://www.w3.org/2001/XMLSchema#double"==c.type||"http://www.w3.org/2001/XMLSchema#nonPositiveInteger"==c.type||"http://www.w3.org/2001/XMLSchema#negativeInteger"==c.type||"http://www.w3.org/2001/XMLSchema#long"==c.type||"http://www.w3.org/2001/XMLSchema#int"==c.type||"http://www.w3.org/2001/XMLSchema#short"==c.type||"http://www.w3.org/2001/XMLSchema#byte"==c.type||"http://www.w3.org/2001/XMLSchema#nonNegativeInteger"==c.type||"http://www.w3.org/2001/XMLSchema#unsignedLong"==
c.type||"http://www.w3.org/2001/XMLSchema#unsignedInt"==c.type||"http://www.w3.org/2001/XMLSchema#unsignedShort"==c.type||"http://www.w3.org/2001/XMLSchema#unsignedByte"==c.type||"http://www.w3.org/2001/XMLSchema#positiveInteger"==c.type?!0:!1:!1},isFloat:function(c){return null==c?!1:"literal"===c.token?"http://www.w3.org/2001/XMLSchema#float"==c.type?!0:!1:!1},isDecimal:function(c){return null==c?!1:"literal"===c.token?"http://www.w3.org/2001/XMLSchema#decimal"==c.type?!0:!1:!1},isDouble:function(c){return null==
c?!1:"literal"===c.token?"http://www.w3.org/2001/XMLSchema#double"==c.type?!0:!1:!1},isNumeric:function(c){return null==c?!1:"literal"===c.token?"http://www.w3.org/2001/XMLSchema#integer"==c.type||"http://www.w3.org/2001/XMLSchema#decimal"==c.type||"http://www.w3.org/2001/XMLSchema#float"==c.type||"http://www.w3.org/2001/XMLSchema#double"==c.type||"http://www.w3.org/2001/XMLSchema#nonPositiveInteger"==c.type||"http://www.w3.org/2001/XMLSchema#negativeInteger"==c.type||"http://www.w3.org/2001/XMLSchema#long"==
c.type||"http://www.w3.org/2001/XMLSchema#int"==c.type||"http://www.w3.org/2001/XMLSchema#short"==c.type||"http://www.w3.org/2001/XMLSchema#byte"==c.type||"http://www.w3.org/2001/XMLSchema#nonNegativeInteger"==c.type||"http://www.w3.org/2001/XMLSchema#unsignedLong"==c.type||"http://www.w3.org/2001/XMLSchema#unsignedInt"==c.type||"http://www.w3.org/2001/XMLSchema#unsignedShort"==c.type||"http://www.w3.org/2001/XMLSchema#unsignedByte"==c.type||"http://www.w3.org/2001/XMLSchema#positiveInteger"==c.type?
!0:!1:!1},isSimpleLiteral:function(c){return c&&"literal"==c.token?null==c.type&&null==c.lang?!0:!1:!1},isXsdType:function(c,b){return b&&"literal"==b.token?b.type=="http://www.w3.org/2001/XMLSchema#"+c:!1},ebv:function(c){if(null==c||QueryFilters.isEbvError(c))return QueryFilters.ebvError();if(c.token&&"literal"===c.token){if("http://www.w3.org/2001/XMLSchema#integer"==c.type||"http://www.w3.org/2001/XMLSchema#decimal"==c.type||"http://www.w3.org/2001/XMLSchema#double"==c.type||"http://www.w3.org/2001/XMLSchema#nonPositiveInteger"==
c.type||"http://www.w3.org/2001/XMLSchema#negativeInteger"==c.type||"http://www.w3.org/2001/XMLSchema#long"==c.type||"http://www.w3.org/2001/XMLSchema#int"==c.type||"http://www.w3.org/2001/XMLSchema#short"==c.type||"http://www.w3.org/2001/XMLSchema#byte"==c.type||"http://www.w3.org/2001/XMLSchema#nonNegativeInteger"==c.type||"http://www.w3.org/2001/XMLSchema#unsignedLong"==c.type||"http://www.w3.org/2001/XMLSchema#unsignedInt"==c.type||"http://www.w3.org/2001/XMLSchema#unsignedShort"==c.type||"http://www.w3.org/2001/XMLSchema#unsignedByte"==
c.type||"http://www.w3.org/2001/XMLSchema#positiveInteger"==c.type){var b=parseFloat(c.value);return isNaN(b)?!1:0!=parseFloat(c.value)}return"http://www.w3.org/2001/XMLSchema#boolean"===c.type?"true"===c.value||!0===c.value||"True"===c.value:"http://www.w3.org/2001/XMLSchema#string"===c.type?""!=c.value:"http://www.w3.org/2001/XMLSchema#dateTime"===c.type?null!=new Date(c.value):QueryFilters.isEbvError(c)?c:null==c.type?""!=c.value?!0:!1:QueryFilters.ebvError()}return!0===c.value}};QueryFilters.effectiveBooleanValue=
QueryFilters.ebv;QueryFilters.ebvTrue=function(){return{token:"literal",type:"http://www.w3.org/2001/XMLSchema#boolean",value:!0}};QueryFilters.ebvFalse=function(){return{token:"literal",type:"http://www.w3.org/2001/XMLSchema#boolean",value:!1}};QueryFilters.ebvError=function(){return{token:"literal",type:"https://github.com/antoniogarrote/js-tools/types#error",value:null}};QueryFilters.isEbvError=function(c){return"object"==typeof c&&null!=c?"https://github.com/antoniogarrote/js-tools/types#error"===
c.type:!1};QueryFilters.ebvBoolean=function(c){return QueryFilters.isEbvError(c)?c:!0===c?QueryFilters.ebvTrue():QueryFilters.ebvFalse()};QueryFilters.runRelationalFilter=function(c,b,a,f,h,m,d){c=c.operator;if("="===c)return QueryFilters.runEqualityFunction(b,a,f,h,m,d);if("!="===c)return b=QueryFilters.runEqualityFunction(b,a,f,h,m,d),QueryFilters.isEbvError(b)||(b.value=!b.value),b;if("<"===c)return QueryFilters.runLtFunction(b,a,f);if(">"===c)return QueryFilters.runGtFunction(b,a,f);if("<="===
c)return QueryFilters.runLtEqFunction(b,a,f);if(">="===c)return QueryFilters.runGtEqFunction(b,a,f);throw"Error applying relational filter, unknown operator";};QueryFilters.effectiveTypeValue=function(c){if("literal"==c.token){if("http://www.w3.org/2001/XMLSchema#integer"==c.type)return c=parseInt(c.value);if("http://www.w3.org/2001/XMLSchema#decimal"==c.type||"http://www.w3.org/2001/XMLSchema#float"==c.type||"http://www.w3.org/2001/XMLSchema#double"==c.type||"http://www.w3.org/2001/XMLSchema#nonPositiveInteger"==
c.type)return c=parseFloat(c.value);if("http://www.w3.org/2001/XMLSchema#negativeInteger"==c.type||"http://www.w3.org/2001/XMLSchema#long"==c.type||"http://www.w3.org/2001/XMLSchema#int"==c.type||"http://www.w3.org/2001/XMLSchema#short"==c.type||"http://www.w3.org/2001/XMLSchema#byte"==c.type||"http://www.w3.org/2001/XMLSchema#nonNegativeInteger"==c.type||"http://www.w3.org/2001/XMLSchema#unsignedLong"==c.type||"http://www.w3.org/2001/XMLSchema#unsignedInt"==c.type||"http://www.w3.org/2001/XMLSchema#unsignedShort"==
c.type||"http://www.w3.org/2001/XMLSchema#unsignedByte"==c.type||"http://www.w3.org/2001/XMLSchema#positiveInteger"==c.type)return c=parseInt(c.value);if("http://www.w3.org/2001/XMLSchema#date"==c.type||"http://www.w3.org/2001/XMLSchema#dateTime"==c.type)try{return m.parseISO8601(c.value)}catch(b){return null}else return"http://www.w3.org/2001/XMLSchema#boolean"==c.type?!0===c.value||"true"===c.value||"1"===c.value||1===c.value||!0===c.value?!0:!1===c.value||"false"===c.value||"0"===c.value||0===
c.value||!1===c.value?!1:void 0:"http://www.w3.org/2001/XMLSchema#string"==c.type?null===c.value||void 0===c.value?void 0:""+c.value:c.value}else throw console.log("not implemented yet"),console.log(c),"value not supported in operations yet";};QueryFilters.runOrFunction=function(c,b,a,f,h){for(var m=null,d=0;d<c.operands.length;d++){var l=QueryFilters.runFilter(c.operands[d],b,a,f,h);0==QueryFilters.isEbvError(l)&&(l=QueryFilters.ebv(l));null==m?m=l:QueryFilters.isEbvError(l)?m=QueryFilters.isEbvError(m)?
QueryFilters.ebvError():!0===m?!0:QueryFilters.ebvError():!0===l?m=!0:QueryFilters.isEbvError(m)&&(m=QueryFilters.ebvError())}return QueryFilters.ebvBoolean(m)};QueryFilters.runAndFunction=function(c,b,a,f,h){for(var m=null,d=0;d<c.operands.length;d++){var l=QueryFilters.runFilter(c.operands[d],b,a,f,h);0==QueryFilters.isEbvError(l)&&(l=QueryFilters.ebv(l));null==m?m=l:QueryFilters.isEbvError(l)?m=QueryFilters.isEbvError(m)?QueryFilters.ebvError():!0===m?QueryFilters.ebvError():!1:!0===l?QueryFilters.isEbvError(m)&&
(m=QueryFilters.ebvError()):m=!1}return QueryFilters.ebvBoolean(m)};QueryFilters.runEqualityFunction=function(c,b,a,f,h,t){if(QueryFilters.isEbvError(c)||QueryFilters.isEbvError(b))return QueryFilters.ebvError();if(QueryFilters.isNumeric(c)&&QueryFilters.isNumeric(b))return a=QueryFilters.effectiveTypeValue(c),h=QueryFilters.effectiveTypeValue(b),isNaN(a)||isNaN(h)?QueryFilters.ebvBoolean(QueryFilters.RDFTermEquality(c,b,f,t)):QueryFilters.ebvBoolean(a==h);if((QueryFilters.isSimpleLiteral(c)||QueryFilters.isXsdType("string",
c))&&(QueryFilters.isSimpleLiteral(b)||QueryFilters.isXsdType("string",b))||QueryFilters.isXsdType("boolean",c)&&QueryFilters.isXsdType("boolean",b))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(c)==QueryFilters.effectiveTypeValue(b));if((QueryFilters.isXsdType("dateTime",c)||QueryFilters.isXsdType("date",c))&&(QueryFilters.isXsdType("dateTime",b)||QueryFilters.isXsdType("date",b))){if(QueryFilters.isXsdType("dateTime",c)&&QueryFilters.isXsdType("date",b)||QueryFilters.isXsdType("date",
c)&&QueryFilters.isXsdType("dateTime",b))return QueryFilters.ebvFalse();c=m.compareDateComponents(c.value,b.value);return null!=c?0==c?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.isRDFTerm(c)&&QueryFilters.isRDFTerm(b)?QueryFilters.ebvBoolean(QueryFilters.RDFTermEquality(c,b,f,t)):QueryFilters.ebvFalse()};QueryFilters.runGtFunction=function(c,b,a){if(QueryFilters.isEbvError(c)||QueryFilters.isEbvError(b))return QueryFilters.ebvError();if(QueryFilters.isNumeric(c)&&
QueryFilters.isNumeric(b)||QueryFilters.isSimpleLiteral(c)&&QueryFilters.isSimpleLiteral(b)||QueryFilters.isXsdType("string",c)&&QueryFilters.isXsdType("string",b)||QueryFilters.isXsdType("boolean",c)&&QueryFilters.isXsdType("boolean",b))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(c)>QueryFilters.effectiveTypeValue(b));if((QueryFilters.isXsdType("dateTime",c)||QueryFilters.isXsdType("date",c))&&(QueryFilters.isXsdType("dateTime",b)||QueryFilters.isXsdType("date",b))){if(QueryFilters.isXsdType("dateTime",
c)&&QueryFilters.isXsdType("date",b)||QueryFilters.isXsdType("date",c)&&QueryFilters.isXsdType("dateTime",b))return QueryFilters.ebvFalse();c=m.compareDateComponents(c.value,b.value);return null!=c?1==c?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()};QueryFilters.runTotalGtFunction=function(c,b){return QueryFilters.isEbvError(c)||QueryFilters.isEbvError(b)?QueryFilters.ebvError():QueryFilters.isNumeric(c)&&QueryFilters.isNumeric(b)||QueryFilters.isSimpleLiteral(c)&&
QueryFilters.isSimpleLiteral(b)||QueryFilters.isXsdType("string",c)&&QueryFilters.isSimpleLiteral("string",b)||QueryFilters.isXsdType("boolean",c)&&QueryFilters.isSimpleLiteral("boolean",b)||QueryFilters.isXsdType("dateTime",c)&&QueryFilters.isSimpleLiteral("dateTime",b)?QueryFilters.runGtFunction(c,b,[]):c.token&&"uri"===c.token&&b.token&&"uri"===b.token?QueryFilters.ebvBoolean(c.value>b.value):c.token&&"literal"===c.token&&b.token&&"literal"===b.token?QueryFilters.ebvBoolean(""+c.value+c.type+c.lang>
""+b.value+b.type+b.lang):c.token&&"blank"===c.token&&b.token&&"blank"===b.token?QueryFilters.ebvBoolean(c.value>b.value):c.value&&b.value?QueryFilters.ebvBoolean(c.value>b.value):QueryFilters.ebvTrue()};QueryFilters.runLtFunction=function(c,b,a){if(QueryFilters.isEbvError(c)||QueryFilters.isEbvError(b))return QueryFilters.ebvError();if(QueryFilters.isNumeric(c)&&QueryFilters.isNumeric(b)||QueryFilters.isSimpleLiteral(c)&&QueryFilters.isSimpleLiteral(b)||QueryFilters.isXsdType("string",c)&&QueryFilters.isXsdType("string",
b)||QueryFilters.isXsdType("boolean",c)&&QueryFilters.isXsdType("boolean",b))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(c)<QueryFilters.effectiveTypeValue(b));if((QueryFilters.isXsdType("dateTime",c)||QueryFilters.isXsdType("date",c))&&(QueryFilters.isXsdType("dateTime",b)||QueryFilters.isXsdType("date",b))){if(QueryFilters.isXsdType("dateTime",c)&&QueryFilters.isXsdType("date",b)||QueryFilters.isXsdType("date",c)&&QueryFilters.isXsdType("dateTime",b))return QueryFilters.ebvFalse();
c=m.compareDateComponents(c.value,b.value);return null!=c?-1==c?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()};QueryFilters.runGtEqFunction=function(c,b,a){if(QueryFilters.isEbvError(c)||QueryFilters.isEbvError(b))return QueryFilters.ebvError();if(QueryFilters.isNumeric(c)&&QueryFilters.isNumeric(b)||QueryFilters.isSimpleLiteral(c)&&QueryFilters.isSimpleLiteral(b)||QueryFilters.isXsdType("string",c)&&QueryFilters.isXsdType("string",b)||QueryFilters.isXsdType("boolean",
c)&&QueryFilters.isXsdType("boolean",b))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(c)>=QueryFilters.effectiveTypeValue(b));if((QueryFilters.isXsdType("dateTime",c)||QueryFilters.isXsdType("date",c))&&(QueryFilters.isXsdType("dateTime",b)||QueryFilters.isXsdType("date",b))){if(QueryFilters.isXsdType("dateTime",c)&&QueryFilters.isXsdType("date",b)||QueryFilters.isXsdType("date",c)&&QueryFilters.isXsdType("dateTime",b))return QueryFilters.ebvFalse();c=m.compareDateComponents(c.value,
b.value);return null!=c?-1!=c?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()};QueryFilters.runLtEqFunction=function(c,b,a){if(QueryFilters.isEbvError(c)||QueryFilters.isEbvError(b))return QueryFilters.ebvError();if(QueryFilters.isNumeric(c)&&QueryFilters.isNumeric(b)||QueryFilters.isSimpleLiteral(c)&&QueryFilters.isSimpleLiteral(b)||QueryFilters.isXsdType("string",c)&&QueryFilters.isXsdType("string",b)||QueryFilters.isXsdType("boolean",c)&&QueryFilters.isXsdType("boolean",
b))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(c)<=QueryFilters.effectiveTypeValue(b));if((QueryFilters.isXsdType("dateTime",c)||QueryFilters.isXsdType("date",c))&&(QueryFilters.isXsdType("dateTime",b)||QueryFilters.isXsdType("date",b))){if(QueryFilters.isXsdType("dateTime",c)&&QueryFilters.isXsdType("date",b)||QueryFilters.isXsdType("date",c)&&QueryFilters.isXsdType("dateTime",b))return QueryFilters.ebvFalse();c=m.compareDateComponents(c.value,b.value);return null!=c?1!=c?QueryFilters.ebvTrue():
QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()};QueryFilters.runAddition=function(c,b,a,f,h,m){var d=QueryFilters.runFilter(c,a,f,h,m);if(QueryFilters.isEbvError(d))return QueryFilters.ebvError();c=d;if(QueryFilters.isNumeric(d)){for(d=0;d<b.length;d++){var l=QueryFilters.runFilter(b[d].expression,a,f,h,m);if(QueryFilters.isNumeric(l))"+"===b[d].operator?c=QueryFilters.runSumFunction(c,l):"-"===b[d].operator&&(c=QueryFilters.runSubFunction(c,l));else return QueryFilters.ebvFalse()}return c}return QueryFilters.ebvFalse()};
QueryFilters.runSumFunction=function(c,b){if(QueryFilters.isEbvError(c)||QueryFilters.isEbvError(b))return QueryFilters.ebvError();var a=QueryFilters.effectiveTypeValue(c)+QueryFilters.effectiveTypeValue(b);return QueryFilters.isDouble(c)||QueryFilters.isDouble(b)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#double",value:a}:QueryFilters.isFloat(c)||QueryFilters.isFloat(b)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#float",value:a}:QueryFilters.isDecimal(c)||QueryFilters.isDecimal(b)?
{token:"literal",type:"http://www.w3.org/2001/XMLSchema#decimal",value:a}:{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:a}};QueryFilters.runSubFunction=function(c,b){if(QueryFilters.isEbvError(c)||QueryFilters.isEbvError(b))return QueryFilters.ebvError();var a=QueryFilters.effectiveTypeValue(c)-QueryFilters.effectiveTypeValue(b);return QueryFilters.isDouble(c)||QueryFilters.isDouble(b)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#double",value:a}:QueryFilters.isFloat(c)||
QueryFilters.isFloat(b)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#float",value:a}:QueryFilters.isDecimal(c)||QueryFilters.isDecimal(b)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#decimal",value:a}:{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:a}};QueryFilters.runMultiplication=function(c,b,a,f,h,m){c=QueryFilters.runFilter(c,a,f,h,m);if(QueryFilters.isEbvError(c))return c;var d=c;if(QueryFilters.isNumeric(c)){for(var l=0;l<b.length;l++){var u=QueryFilters.runFilter(b[l].expression,
a,f,h,m);if(QueryFilters.isEbvError(u))return c;if(QueryFilters.isNumeric(u))"*"===b[l].operator?d=QueryFilters.runMulFunction(d,u):"/"===b[l].operator&&(d=QueryFilters.runDivFunction(d,u));else return QueryFilters.ebvFalse()}return d}return QueryFilters.ebvFalse()};QueryFilters.runMulFunction=function(c,b){if(QueryFilters.isEbvError(c)||QueryFilters.isEbvError(b))return QueryFilters.ebvError();var a=QueryFilters.effectiveTypeValue(c)*QueryFilters.effectiveTypeValue(b);return QueryFilters.isDouble(c)||
QueryFilters.isDouble(b)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#double",value:a}:QueryFilters.isFloat(c)||QueryFilters.isFloat(b)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#float",value:a}:QueryFilters.isDecimal(c)||QueryFilters.isDecimal(b)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#decimal",value:a}:{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",value:a}};QueryFilters.runDivFunction=function(c,b){if(QueryFilters.isEbvError(c)||QueryFilters.isEbvError(b))return QueryFilters.ebvError();
var a=QueryFilters.effectiveTypeValue(c)/QueryFilters.effectiveTypeValue(b);return QueryFilters.isDouble(c)||QueryFilters.isDouble(b)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#double",value:a}:QueryFilters.isFloat(c)||QueryFilters.isFloat(b)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#float",value:a}:QueryFilters.isDecimal(c)||QueryFilters.isDecimal(b)?{token:"literal",type:"http://www.w3.org/2001/XMLSchema#decimal",value:a}:{token:"literal",type:"http://www.w3.org/2001/XMLSchema#integer",
value:a}};QueryFilters.runBuiltInCall=function(c,b,a,f,h,m){if("notexists"===c||"exists"===c){c=[];for(var d in a)c.push(JSON.stringify(a[d]));c=c.sort().join("");return b[c]}d=[];for(var l=0;l<b.length;l++)if("var"===b[l].token)d.push(b[l]);else{var u=QueryFilters.runFilter(b[l],a,f,h,m);if(QueryFilters.isEbvError(u))return u;d.push(u)}if("str"===c)return"literal"===d[0].token?{token:"literal",type:null,value:""+d[0].value}:"uri"===d[0].token?{token:"literal",type:null,value:d[0].value}:QueryFilters.ebvFalse();
if("lang"===c)return"literal"===d[0].token?null!=d[0].lang?{token:"literal",value:""+d[0].lang}:{token:"literal",value:""}:QueryFilters.ebvError();if("datatype"===c)return"literal"===d[0].token?(a=d[0],null!=a.type?"string"===typeof a.type?{token:"uri",value:a.type,prefix:null,suffix:null}:a.type:null==a.lang?{token:"uri",value:"http://www.w3.org/2001/XMLSchema#string",prefix:null,suffix:null}:QueryFilters.ebvError()):QueryFilters.ebvError();if("isliteral"===c)return"literal"===d[0].token?QueryFilters.ebvTrue():
QueryFilters.ebvFalse();if("isblank"===c)return"blank"===d[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("isuri"===c||"isiri"===c)return"uri"===d[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("sameterm"===c)return a=QueryFilters.RDFTermEquality(d[0],d[1],f,m),QueryFilters.isEbvError(a)&&(a=!1),QueryFilters.ebvBoolean(a);if("langmatches"===c)return a=d[0],b=d[1],"literal"===a.token&&"literal"===b.token?"*"===b.value&&""!=a.value?QueryFilters.ebvTrue():QueryFilters.ebvBoolean(0===
a.value.toLowerCase().indexOf(b.value.toLowerCase())):QueryFilters.ebvError();if("bound"===c)return b=d[0].value,null==b?QueryFilters.ebvError():null!=a[b]?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if(null!=f.customFns[c])return f.customFns[c](QueryFilters,d);throw"Builtin call "+c+" not implemented yet";};QueryFilters.runUnaryExpression=function(c,b,a,f,h,m){b=QueryFilters.runFilter(b,a,f,h,m);if(QueryFilters.isEbvError(b))return b;if("!"===c){var d=QueryFilters.ebv(b);return QueryFilters.isEbvError(d)?
QueryFilters.ebvFalse():QueryFilters.ebvBoolean(!d)}if("+"===c)return QueryFilters.isNumeric(b)?b:QueryFilters.ebvError();if("-"===c){if(QueryFilters.isNumeric(b)){c={};for(d in b)c[d]=b[d];c.value=-c.value;return c}return QueryFilters.ebvError()}};QueryFilters.runRegex=function(c,b,a,f,h,m,d){if(null!=c)c=QueryFilters.runFilter(c,f,h,m,d);else return QueryFilters.ebvError();if(null!=b)b=QueryFilters.runFilter(b,f,h,m,d);else return QueryFilters.ebvError();null!=a&&(a=QueryFilters.runFilter(a,f,h,
m,d));if(null==b||"literal"!==b.token||null!=a&&"literal"!==a.token)return QueryFilters.ebvError();b=b.value;a=null==a?null:a.value;if(null!=c&&"var"==c.token)if(null!=f[c.value])c=f[c.value];else return QueryFilters.ebvError();else if(null!=c&&"literal"===c.token)if(null==c.type||QueryFilters.isXsdType("string",c))c=c.value;else return QueryFilters.ebvError();else return QueryFilters.ebvError();return(null==a?new RegExp(b):new RegExp(b,a.toLowerCase())).exec(c)?QueryFilters.ebvTrue():QueryFilters.ebvFalse()};
QueryFilters.normalizeLiteralDatatype=function(c,b,a){null!=c.value.type&&"object"==typeof c.value.type&&(c.value.type=m.lexicalFormBaseUri(c.value.type,a));return c};QueryFilters.runIriRefOrFunction=function(c,b,a,f,h,t){if(null==b)return c;for(var d=[],l=0;l<b.length;l++)d.push(QueryFilters.runFilter(b[l],a,f,h,t));c=m.lexicalFormBaseUri(c,t);if("http://www.w3.org/2001/XMLSchema#integer"==c||"http://www.w3.org/2001/XMLSchema#decimal"==c||"http://www.w3.org/2001/XMLSchema#double"==c||"http://www.w3.org/2001/XMLSchema#nonPositiveInteger"==
c||"http://www.w3.org/2001/XMLSchema#negativeInteger"==c||"http://www.w3.org/2001/XMLSchema#long"==c||"http://www.w3.org/2001/XMLSchema#int"==c||"http://www.w3.org/2001/XMLSchema#short"==c||"http://www.w3.org/2001/XMLSchema#byte"==c||"http://www.w3.org/2001/XMLSchema#nonNegativeInteger"==c||"http://www.w3.org/2001/XMLSchema#unsignedLong"==c||"http://www.w3.org/2001/XMLSchema#unsignedInt"==c||"http://www.w3.org/2001/XMLSchema#unsignedShort"==c||"http://www.w3.org/2001/XMLSchema#unsignedByte"==c||"http://www.w3.org/2001/XMLSchema#positiveInteger"==
c)if(d=d[0],"literal"===d.token){d=QueryFilters.normalizeLiteralDatatype(d,f,t);if("http://www.w3.org/2001/XMLSchema#integer"==d.type||"http://www.w3.org/2001/XMLSchema#decimal"==d.type||"http://www.w3.org/2001/XMLSchema#double"==d.type||"http://www.w3.org/2001/XMLSchema#nonPositiveInteger"==d.type||"http://www.w3.org/2001/XMLSchema#negativeInteger"==d.type||"http://www.w3.org/2001/XMLSchema#long"==d.type||"http://www.w3.org/2001/XMLSchema#int"==d.type||"http://www.w3.org/2001/XMLSchema#short"==d.type||
"http://www.w3.org/2001/XMLSchema#byte"==d.type||"http://www.w3.org/2001/XMLSchema#nonNegativeInteger"==d.type||"http://www.w3.org/2001/XMLSchema#unsignedLong"==d.type||"http://www.w3.org/2001/XMLSchema#unsignedInt"==d.type||"http://www.w3.org/2001/XMLSchema#unsignedShort"==d.type||"http://www.w3.org/2001/XMLSchema#unsignedByte"==d.type||"http://www.w3.org/2001/XMLSchema#positiveInteger"==d.type)return d.type=c,d;if("http://www.w3.org/2001/XMLSchema#boolean"==d.type)return 1==QueryFilters.ebv(d)?
(d.type=c,d.value=1):(d.type=c,d.value=0),d;if("http://www.w3.org/2001/XMLSchema#float"==d.type||"http://www.w3.org/2001/XMLSchema#double"==d.type)return d.type=c,d.value=parseInt(d.value),d;if("http://www.w3.org/2001/XMLSchema#string"==d.type||null==d.type){if(2<d.value.split(".").length||2<d.value.split("-").length||2<d.value.split("/").length||2<d.value.split("+").length||"http://www.w3.org/2001/XMLSchema#decimal"==c&&(-1!=d.value.indexOf("e")||-1!=d.value.indexOf("E")))return QueryFilters.ebvError();
if("http://www.w3.org/2001/XMLSchema#int"==c||"http://www.w3.org/2001/XMLSchema#integer"==c)if(-1!=d.value.indexOf("e")||-1!=d.value.indexOf("E")||-1!=d.value.indexOf("."))return QueryFilters.ebvError();try{d.value=parseInt(parseFloat(d.value));if(isNaN(d.value))return QueryFilters.ebvError();d.type=c;return d}catch(u){return QueryFilters.ebvError()}}else return QueryFilters.ebvError()}else return QueryFilters.ebvError();else{if("http://www.w3.org/2001/XMLSchema#boolean"==c)return d=d[0],"literal"===
d.token&&null==d.type?"true"===d.value||"1"===d.value?QueryFilters.ebvTrue():"false"===d.value||"0"===d.value?QueryFilters.ebvFalse():QueryFilters.ebvError():"literal"===d.token?QueryFilters.isEbvError(d)?d:QueryFilters.ebvBoolean(d):QueryFilters.ebvError();if("http://www.w3.org/2001/XMLSchema#string"==c)return d=d[0],"literal"===d.token?(d=QueryFilters.normalizeLiteralDatatype(d,f,t),"http://www.w3.org/2001/XMLSchema#integer"==d.type||"http://www.w3.org/2001/XMLSchema#decimal"==d.type||"http://www.w3.org/2001/XMLSchema#double"==
d.type||"http://www.w3.org/2001/XMLSchema#nonPositiveInteger"==d.type||"http://www.w3.org/2001/XMLSchema#negativeInteger"==d.type||"http://www.w3.org/2001/XMLSchema#long"==d.type||"http://www.w3.org/2001/XMLSchema#int"==d.type||"http://www.w3.org/2001/XMLSchema#short"==d.type||"http://www.w3.org/2001/XMLSchema#byte"==d.type||"http://www.w3.org/2001/XMLSchema#nonNegativeInteger"==d.type||"http://www.w3.org/2001/XMLSchema#unsignedLong"==d.type||"http://www.w3.org/2001/XMLSchema#unsignedInt"==d.type||
"http://www.w3.org/2001/XMLSchema#unsignedShort"==d.type||"http://www.w3.org/2001/XMLSchema#unsignedByte"==d.type||"http://www.w3.org/2001/XMLSchema#positiveInteger"==d.type||"http://www.w3.org/2001/XMLSchema#float"==d.type?(d.type=c,d.value=""+d.value,d):"http://www.w3.org/2001/XMLSchema#string"==d.type?d:"http://www.w3.org/2001/XMLSchema#boolean"==d.type?(QueryFilters.ebv(d)?(d.type=c,d.value="true"):(d.type=c,d.value="false"),d):"http://www.w3.org/2001/XMLSchema#dateTime"==d.type||"http://www.w3.org/2001/XMLSchema#date"==
d.type?(d.type=c,"string"!=typeof d.value&&(d.value=m.iso8601(d.value)),d):null==d.type?(d.value=""+d.value,d.type=c,d):QueryFilters.ebvError()):"uri"===d.token?{token:"literal",value:m.lexicalFormBaseUri(d,t),type:c,lang:null}:QueryFilters.ebvError();if("http://www.w3.org/2001/XMLSchema#dateTime"==c||"http://www.w3.org/2001/XMLSchema#date"==c){d=d[0];if("http://www.w3.org/2001/XMLSchema#dateTime"==d.type||"http://www.w3.org/2001/XMLSchema#date"==d.type)return d;if("http://www.w3.org/2001/XMLSchema#string"==
d.type||null==d.type)try{return d.value=m.iso8601(m.parseISO8601(d.value)),d.type=c,d}catch(u){return QueryFilters.ebvError()}else return QueryFilters.ebvError()}else if("http://www.w3.org/2001/XMLSchema#float"==c)if(d=d[0],"literal"===d.token){d=QueryFilters.normalizeLiteralDatatype(d,f,t);if("http://www.w3.org/2001/XMLSchema#decimal"==d.type||"http://www.w3.org/2001/XMLSchema#int"==d.type)return d.type=c,d.value=parseFloat(d.value),d;if("http://www.w3.org/2001/XMLSchema#boolean"==d.type)return 1==
QueryFilters.ebv(d)?(d.type=c,d.value=1):(d.type=c,d.value=0),d;if("http://www.w3.org/2001/XMLSchema#float"==d.type||"http://www.w3.org/2001/XMLSchema#double"==d.type)return d.type=c,d.value=parseFloat(d.value),d;if("http://www.w3.org/2001/XMLSchema#string"==d.type)try{d.value=parseFloat(d.value);if(isNaN(d.value))return QueryFilters.ebvError();d.type=c;return d}catch(u){return QueryFilters.ebvError()}else if(null==d.type){if(2<d.value.split(".").length||2<d.value.split("-").length||2<d.value.split("/").length||
2<d.value.split("+").length)return QueryFilters.ebvError();try{d.value=parseFloat(d.value);if(isNaN(d.value))return QueryFilters.ebvError();d.type=c;return d}catch(u){return QueryFilters.ebvError()}}else return QueryFilters.ebvError()}else return QueryFilters.ebvError();else return null!=f.customFns[c]?f.customFns[c](QueryFilters,d):QueryFilters.ebvError()}};C.exports={QueryFilters:QueryFilters}},{"./utils":57}],53:[function(x,C,B){var m=x("./utils"),h=x("./utils"),c={variablesInBGP:function(b){var a=
b.variables;if(a)return a;var c=b.value||b,a=[],h;for(h in c)c[h]&&"var"===c[h].token?a.push(c[h].value):c[h]&&"blank"===c[h].token&&a.push("blank:"+c[h].value);return b.variables=a},connected:function(b,a){for(var c="/"+b.vars.join("/")+"/",h=0;h<a.vars.length;h++)if(-1!=c.indexOf("/"+a.vars[h]+"/"))return!0;return!1},variablesIntersectionBGP:function(b,a){for(var f=c.variablesInBGP(b),h=c.variablesInBGP(a),m={},d=0;d<f.lenght;d++)m[f[d]]=1;for(d=0;d<h.length;d++)f=m[h[d]]||0,f++,m[h[d]]=f;var h=
[],l;for(l in m)2==m[l]&&h.push(m[l]);return h},executeAndBGPsGroups:function(b){for(var a={},f={},h=0,t=function(a,b){for(var c=0;c<a.length;c++)if(-1!=b.indexOf("/"+a[c]+"/"))return!0;return!1},d=function(b,c,d,h){var k=[],l="",m="",n;for(n in c)l+=n,k=k.concat(a[n]),m+=f[n];m=m+x.join("/")+"/";k.push(b);d[l]=k;h[l]=m},l=0;l<b.length;l++){var u=b[l],v={},n={},x=c.variablesInBGP(u),A={},y;for(y in f)t(x,f[y])?A[y]=!0:(v[y]=a[y],n[y]=f[y]);0===m.size(A)?(v["g"+h]=[u],n["g"+h]="/"+x.join("/")+"/",
h++):d(u,A,v,n);a=v;f=n}return m.values(a)},intersectionSize:function(b,a){for(var c=a.i.split("_"),h=0;h<c.length;h++)if(""!=c[h]&&-1!=b.i.indexOf("_"+c[h]+"_"))return 1;return 0},createJoinTree:function(b,a){for(var c="/"+b.vars.join("/")+"/",h=b.vars.concat([]),t=[],d=0;d<a.vars.length;d++)-1!=c.indexOf("/"+a.vars[d]+"/")?0==a.vars[d].indexOf("_:")?t.push("blank:"+a.vars[d]):t.push(a.vars[d]):h.push(a.vars[d]);for(var c=a.i.split("_"),l=b.i.split("_"),u={},d=0;d<c.length;d++)""!=c[d]&&(u[c[d]]=
!0);for(d=0;d<l.length;d++)""!=l[d]&&(u[l[d]]=!0);d=m.keys(u);return{left:b,right:a,cost:b.cost+a.cost,i:"_"+d.sort().join("_")+"_",vars:h,join:t}},executeBushyTree:function(b,a,f,h,m){null==b.left?c.executeEmptyJoinBGP(b.right,a,f,h,m):null==b.right?c.executeEmptyJoinBGP(b.left,a,f,h,m):c.executeBushyTree(b.left,a,f,h,function(d){null!=d?c.executeBushyTree(b.right,a,f,h,function(a){null!=a?m(c.joinBindings2(b.join,d,a)):m(null)}):m(null)})},executeAndBGPsDPSize:function(b,a,f,k,m){b=c.executeAndBGPsGroups(b);
var d=[];h.eachSeries(b,function(a,b){f.computeCosts(a,k,function(a){var f={},h={},k={},l=1,m=null,t={};k["1"]=[];for(var x=0;x<a.length;x++){l=[];delete a[x].variables;for(var B in a[x])"_cost"!=B&&("var"===a[x][B].token?l.push(a[x][B].value):"blank"===a[x][B].token&&l.push(a[x][B].value));h["_"+x+"_"]={left:a[x],right:null,cost:a[x]._cost,i:"_"+x+"_",vars:l};l={left:a[x],right:null,cost:a[x]._cost,i:"_"+x+"_",vars:l};f["_"+x+"_"]=l;delete a[x]._cost;t["_"+x+"_"]=!0;k["1"].push("_"+x+"_");if(null==
m||m.cost>l.cost)m=l}for(B=2;B<=a.length;B++)for(var C=1;C<B;C++)for(var O=k[""+C]||[],K=k[""+(B-C)]||[],x=0;x<O.length;x++)for(var V=0;V<K.length;V++)if(O[x]!==K[V]){var N=h[O[x]],F=h[K[V]];if(0==c.intersectionSize(N,F)&&c.connected(N,F)&&(l=B,N=c.createJoinTree(f[N.i],f[F.i]),!t[N.i])){t[N.i]=!0;F=N.cost+1;null!=f[N.i]&&(F=f[N.i].cost);var sa=k[B]||[];sa.push(N.i);h[N.i]=N;k[B]=sa;F>N.cost&&(l===B&&(m=N),f[N.i]=N)}}d.push(m);b()})},function(){var b=null;h.eachSeries(d,function(d,h){c.executeBushyTree(d,
a,f,k,function(a){a?(b=null==b?a:c.crossProductBindings(b,a),h()):h("Error executing bushy tree")})},function(a){a?m(null,a):m(b)})})},executeEmptyJoinBGP:function(b,a,f,h,m){return c.executeBGPDatasets(b,a,f,h,m)},executeBGPDatasets:function(b,a,f,k,m){var d={};if(null==b.graph){var l=[];h.eachSeries(a.implicit,function(a,h){null==d[a.oid]?(d[a.oid]=!0,b.graph=a,f.rangeQuery(b,k,function(a){a=c.buildBindingsFromRange(a,b);l.push(a);h()})):h()},function(){var a=c.unionManyBindings(l);m(a)})}else if("var"===
b.graph.token){var u=b.graph.value,l=[];h.eachSeries(a.named,function(a,h){null==d[a.oid]?(d[a.oid]=!0,b.graph=a,null!=l?f.rangeQuery(b,k,function(d){if(null!=d){d=c.buildBindingsFromRange(d,b);for(var f=0;f<d.length;f++)d[f][u]=a.oid;l.push(d)}else l=null;h()}):h()):h()},function(){if(null==l)m(null);else{var a=c.unionManyBindings(l);m(a)}})}else f.rangeQuery(b,k,function(a){null!=a?(a=c.buildBindingsFromRange(a,b),m(a)):m(null)})},buildBindingsFromRange:function(b,a){c.variablesInBGP(a);var f=a.value||
a,h={};for(v in f)f[v]&&"var"===f[v].token?h[v]=f[v].value:f[v]&&"blank"===f[v].token&&(h[v]="blank:"+f[v].value);f=[];if(null!=b)for(var m=0;m<b.length;m++){var d={},l=b[m],u=!1,v;for(v in h){var n=l[v];if(null==d[h[v]]||d[h[v]]===n)d[h[v]]=n;else{u=!0;break}}u||f.push(d)}return f},areCompatibleBindings:function(b,a){for(var c in b)if(null!=a[c]&&a[c]!=b[c])return!1;return!0},mergeBindings:function(b,a){var c={},h;for(h in b)c[h]=b[h];for(h in a)c[h]=a[h];return c},joinBindings2:function(b,a,f){for(var h=
{},m,d,l,u,v=[],n=0;n<a.length;n++){m=a[n];u=h;for(var x=0;x<b.length;x++)d=b[x],d=m[d],x==b.length-1?(l=u[d]||[],l.push(m),u[d]=l):(l=u[d]||{},u=u[d]=l)}for(n=0;n<f.length;n++)for(m=f[n],u=h,x=0;x<b.length;x++)if(d=b[x],d=m[d],null!=u[d])if(x==b.length-1)for(a=0;a<u[d].length;a++)v.push(c.mergeBindings(u[d][a],m));else u=u[d];return v},joinBindings:function(b,a){for(var f=[],h=0;h<b.length;h++)for(var m=b[h],d=0;d<a.length;d++){var l=a[d];c.areCompatibleBindings(m,l)&&f.push(c.mergeBindings(m,l))}return f},
augmentMissingBindings:function(b,a){for(var c in a)null==b[c]&&(b[c]=null);return b},leftOuterJoinBindings:function(b,a){for(var f=[],h=0;h<b.length;h++){for(var m=b[h],d=!1,l=0;l<a.length;l++){var u=a[l];c.areCompatibleBindings(m,u)&&(d=!0,f.push(c.mergeBindings(m,u)))}!1===d&&(c.augmentMissingBindings(m,u),f.push(m))}return f},crossProductBindings:function(b,a){for(var f=[],h=0;h<b.length;h++)for(var m=b[h],d=0;d<a.length;d++)f.push(c.mergeBindings(m,a[d]));return f},unionBindings:function(b,a){return b.concat(a)},
unionManyBindings:function(b){for(var a=[],f=0;f<b.length;f++)a=c.unionBindings(a,b[f]);return a}};C.exports={QueryPlan:c}},{"./utils":57}],54:[function(x,C,B){var m=x("./network_transport").NetworkTransport,h=x("./rvn3_parser").RVN3Parser,c=x("./jsonld_parser").JSONLDParser,b=x("./utils");B=function(a){this.precedences=["text/turtle","text/n3","application/ld+json","application/json"];this.parsers={"text/turtle":h.parser,"text/n3":h.parser,"application/ld+json":c.parser,"application/json":c.parser};
"undefined"!==typeof RDFXMLParser&&(this.precedences.push("application/rdf+xml"),this.parsers["application/rdf+xml"]=RDFXMLParser.parser);if(null!=a)for(var f in a.parsers)this.parsers[f]=a.parsers[f];if(a&&null!=a.precedences)for(f in this.precedences=a.precedences,a.parsers)b.include(this.precedences,f)||this.precedences.push(f);this.acceptHeaderValue="";for(a=0;a<this.precedences.length;a++)this.acceptHeaderValue=0!=a?this.acceptHeaderValue+","+this.precedences[a]:this.acceptHeaderValue+this.precedences[a]};
B.prototype.registerParser=function(a,b){this.parsers[a]=b;this.precedences.push(a)};B.prototype.unregisterParser=function(a){delete this.parsers[a];for(var b=[],c=0;c<this.precedences.length;c++)this.precedences[c]!=a&&b.push(this.precedences[c]);this.precedences=b};B.prototype.setAcceptHeaderPrecedence=function(a){this.precedences=a};B.prototype.load=function(a,b,c){var h=this;m.load(a,this.acceptHeaderValue,function(d,l){if(d)c(d);else{var m=l.headers["Content-Type"]||l.headers["content-type"],
v=l.data;if(null!=m){var m=m.split(";")[0],n;for(n in h.parsers)if(-1!=n.indexOf("/")){var x=n.split("/");if("*"===x[1]){if(-1!=m.indexOf(x[0]))return h.tryToParse(h.parsers[n],b,v,{documentURI:a},c)}else if(-1!=m.indexOf(n)||-1!=m.indexOf(x[1]))return h.tryToParse(h.parsers[n],b,v,{documentURI:a},c)}else if(-1!=m.indexOf(n))return h.tryToParse(h.parsers[n],b,v,{documentURI:a},c);c(Error("Unknown media type : "+m))}else c(Error("Uknown media type"))}})};B.prototype.loadFromFile=function(a,b,c,h){try{var d=
this;x("fs").readFile(c.split("file:/")[1],function(l,m){l?h(l):(m=m.toString("utf8"),d.tryToParse(a,b,m,{documentURI:c},h))})}catch(l){h(l)}};B.prototype.tryToParse=function(a,c,h,m,d){try{"string"===typeof h&&(h=b.normalizeUnicodeLiterals(h)),a.parse(h,c,m,d)}catch(l){console.log(l.message),console.log(l.stack),d(l)}};C.exports={RDFLoader:B}},{"./jsonld_parser":43,"./network_transport":45,"./rvn3_parser":56,"./utils":57,fs:5}],55:[function(x,C,B){var m=x("./utils"),h=x("./query_filters").QueryFilters;
RDFModel={defaultContext:{rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",owl:"http://www.w3.org/2002/07/owl#",xsd:"http://www.w3.org/2001/XMLSchema#",dcterms:"http://purl.org/dc/terms/",foaf:"http://xmlns.com/foaf/0.1/",cal:"http://www.w3.org/2002/12/cal/ical#",vcard:"http://www.w3.org/2006/vcard/ns# ",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",cc:"http://creativecommons.org/ns#",sioc:"http://rdfs.org/sioc/ns#",doap:"http://usefulinc.com/ns/doap#",
com:"http://purl.org/commerce#",ps:"http://purl.org/payswarm#",gr:"http://purl.org/goodrelations/v1#",sig:"http://purl.org/signature#",ccard:"http://purl.org/commerce/creditcard#",ldp:"http://www.w3.org/ns/ldp#"},UrisMap:function(){this.defaultNs="";this.interfaceProperties="get remove set setDefault addAll resolve shrink".split(" ")}};RDFModel.UrisMap.prototype.values=function(){var c={},b;for(b in this)m.include(this.interfaceProperties,b)||"function"===typeof this[b]||"defaultNs"===b||"interfaceProperties"===
b||(c[b]=this[b]);return c};RDFModel.UrisMap.prototype.get=function(c){if(-1!=c.indexOf(" "))throw"Prefix must not contain any whitespaces";return this[c]};RDFModel.UrisMap.prototype.remove=function(c){if(-1!=c.indexOf(" "))throw"Prefix must not contain any whitespaces";delete this[c];return null};RDFModel.UrisMap.prototype.set=function(c,b){if(-1!=c.indexOf(" "))throw"Prefix must not contain any whitespaces";this[c]=b};RDFModel.UrisMap.prototype.setDefault=function(c){this.defaultNs=c};RDFModel.UrisMap.prototype.addAll=
function(c,b){for(var a in c)m.include(this.interfaceProperties,a)||(null!=this[a]?!0===b&&(this[a]=c[a]):this[a]=c[a]);return this};RDFModel.UrisMap.prototype.resolve=function(c){var b=c.split(":");c=b[0];b=b[1];return""===c?null==this.defaultNs?null:this.defaultNs+b:null!=this[c]?this[c]+b:null};RDFModel.UrisMap.prototype.shrink=function(c){for(var b in this){var a=this[b];if(0===c.indexOf(a)&&""!==a&&"defaultNs"!=b)return c=c.split(a)[1],b+":"+c}return c};RDFModel.Profile=function(){this.prefixes=
new RDFModel.UrisMap;this.terms=new RDFModel.UrisMap};RDFModel.Profile.prototype.importProfile=function(c,b){this.prefixes.addAll(c.prefixes,b);this.terms.addAll(c.terms,b)};RDFModel.Profile.prototype.resolve=function(c){return-1!=c.indexOf(":")?this.prefixes.resolve(c):null!=this.terms[c]?this.terms.resolve(c):null};RDFModel.Profile.prototype.setDefaultPrefix=function(c){this.prefixes.setDefault(c)};RDFModel.Profile.prototype.setDefaultVocabulary=function(c){this.terms.setDefault(c)};RDFModel.Profile.prototype.setPrefix=
function(c,b){this.prefixes.set(c,b)};RDFModel.Profile.prototype.setTerm=function(c,b){this.terms.set(c,b)};RDFModel.RDFEnvironment=function(){RDFModel.Profile.call(this);this.blankNodeCounter=0;var c=this;this.filters={s:function(a){return function(b){return b.subject.equals(a)}},p:function(a){return function(b){return b.predicate.equals(a)}},o:function(a){return function(b){return b.object.equals(a)}},sp:function(a,b){return function(c){return c.subject.equals(a)&&c.predicate.equals(b)}},so:function(a,
b){return function(c){return c.subject.equals(a)&&c.object.equals(b)}},po:function(a,b){return function(c){return c.predicate.equals(a)&&c.object.equals(b)}},spo:function(a,b,c){return function(h){return h.subject.equals(a)&&h.predicate.equals(b)&&h.object.equals(c)}},describes:function(a){return function(b){return b.subject.equals(a)||b.object.equals(a)}},type:function(a){var b=c.resolve("rdf:type");return function(c){return c.predicate.equals(b)&&c.object.equals(a)}}};for(var b in RDFModel.defaultContext)this.prefixes.set(b,
RDFModel.defaultContext[b])};RDFModel.RDFEnvironment.prototype=m.create(RDFModel.Profile.prototype,{constructor:RDFModel.RDFEnvironment});RDFModel.RDFEnvironment.prototype.createBlankNode=function(){var c=new RDFModel.BlankNode(this.blankNodeCounter);this.blankNodeCounter++;return c};RDFModel.RDFEnvironment.prototype.createNamedNode=function(c){var b=this.resolve(c);return null!=b?new RDFModel.NamedNode(b):new RDFModel.NamedNode(c)};RDFModel.RDFEnvironment.prototype.createLiteral=function(c,b,a){return null!=
a?new RDFModel.Literal(c,b,a.toString()):new RDFModel.Literal(c,b,a)};RDFModel.RDFEnvironment.prototype.createTriple=function(c,b,a){return new RDFModel.Triple(c,b,a)};RDFModel.RDFEnvironment.prototype.createGraph=function(c){var b=new RDFModel.Graph;if(null!=c)for(var a=0;a<c.length;a++)b.add(c[a]);return b};RDFModel.RDFEnvironment.prototype.createAction=function(c,b){return function(a){return c(a)?b(a):a}};RDFModel.RDFEnvironment.prototype.createProfile=function(c){if(!0===c)return new RDFModel.RDFEnvironment.Profile;
c=new RDFModel.RDFEnvironment.Profile;c.importProfile(this);return c};RDFModel.RDFEnvironment.prototype.createTermMap=function(c){if(!0===c)return new RDFModel.UrisMap;c=this.terms.values();var b=new RDFModel.UrisMap,a;for(a in c)b[a]=c[a];return b};RDFModel.RDFEnvironment.prototype.createPrefixMap=function(c){if(!0===c)return new RDFModel.UrisMap;c=this.prefixes.values();var b=new RDFModel.UrisMap,a;for(a in c)b[a]=c[a];return b};RDFModel.RDFNode=function(c){this.interfaceName=c;this.attributes=
["interfaceName","nominalValue"]};RDFModel.RDFNode.prototype.equals=function(c){if(null==c.interfaceName)return this.valueOf()==c;for(var b in this.attributes){var a=this.attributes[b];if(this[a]!=c[a])return!1}return!0};RDFModel.BlankNode=function(c){RDFModel.RDFNode.call(this,"BlankNode");this.nominalValue="_:"+c;this.bnodeId=c};RDFModel.BlankNode.prototype=m.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.BlankNode});RDFModel.BlankNode.prototype.toString=function(){return this.nominalValue};
RDFModel.BlankNode.prototype.toNT=function(){return this.nominalValue};RDFModel.BlankNode.prototype.valueOf=function(){return this.nominalValue};RDFModel.Literal=function(c,b,a){RDFModel.RDFNode.call(this,"Literal");this.nominalValue=c;null!=b?this.language=b:null!=a&&(this.datatype=a)};RDFModel.Literal.prototype=m.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.Literal});RDFModel.Literal.prototype.toString=function(){var c='"'+this.nominalValue+'"';if(null!=this.language)c=c+"@"+this.language;
else if(null!=this.datatype||this.type)c=c+"^^<"+(this.datatype||this.type)+">";return c};RDFModel.Literal.prototype.toNT=function(){return this.toString()};RDFModel.Literal.prototype.valueOf=function(){return h.effectiveTypeValue({token:"literal",type:this.type||this.datatype,value:this.nominalValue,language:this.language})};RDFModel.NamedNode=function(c){RDFModel.RDFNode.call(this,"NamedNode");this.nominalValue=null!=c.value?c.value:c};RDFModel.NamedNode.prototype=m.create(RDFModel.RDFNode.prototype,
{constructor:RDFModel.NamedNode});RDFModel.NamedNode.prototype.toString=function(){return this.nominalValue};RDFModel.NamedNode.prototype.toNT=function(){return"<"+this.toString()+">"};RDFModel.NamedNode.prototype.valueOf=function(){return this.nominalValue};RDFModel.Triple=function(c,b,a){this.subject=c;this.predicate=b;this.object=a};RDFModel.Triple.prototype.equals=function(c){return this.subject.equals(c.subject)&&this.predicate.equals(c.predicate)&&this.object.equals(c.object)};RDFModel.Triple.prototype.toString=
function(){return this.subject.toNT()+" "+this.predicate.toNT()+" "+this.object.toNT()+" . \r\n"};RDFModel.Graph=function(){this.triples=[];this.duplicates={};this.actions=[];this.length=0};RDFModel.Graph.prototype.add=function(c){for(var b=0;b<this.actions.length;b++)c=this.actions[b](c);b=c.subject.toString()+c.predicate.toString()+c.object.toString();this.duplicates[b]||(this.duplicates[b]=!0,this.triples.push(c));this.length=this.triples.length;return this};RDFModel.Graph.prototype.addAction=
function(c,b){this.actions.push(c);if(1==b)for(var a=0;a<this.triples.length;a++)this.triples[a]=c(this.triples[a]);return this};RDFModel.Graph.prototype.addAll=function(c){c=c.toArray();for(var b=0;b<c.length;b++)this.add(c[b]);this.length=this.triples.length;return this};RDFModel.Graph.prototype.remove=function(c){for(var b=null,a=0;a<this.triples.length;a++)if(this.triples[a].equals(c)){delete this.duplicates[c.subject.toString()+c.predicate.toString()+c.object.toString()];b=a;break}null!=b&&this.triples.splice(b,
1);this.length=this.triples.length;return this};RDFModel.Graph.prototype.toArray=function(){return this.triples};RDFModel.Graph.prototype.some=function(c){for(var b=0;b<this.triples.length;b++)if(!0===c(this.triples[b],this))return!0;return!1};RDFModel.Graph.prototype.every=function(c){for(var b=0;b<this.triples.length;b++)if(!1===c(this.triples[b],this))return!1;return!0};RDFModel.Graph.prototype.filter=function(c){for(var b=new RDFModel.Graph,a=0;a<this.triples.length;a++)!0===c(this.triples[a],
this)&&b.add(this.triples[a]);return b};RDFModel.Graph.prototype.forEach=function(c){for(var b=0;b<this.triples.length;b++)c(this.triples[b],this)};RDFModel.Graph.prototype.merge=function(c){c=new RDFModel.Graph;for(var b=0;b<this.triples.length;b++)c.add(this.triples[b]);return c};RDFModel.Graph.prototype.match=function(c,b,a,f){for(var h=new RDFModel.Graph,m=0,d=0;d<this.triples.length;d++){var l=this.triples[d];if(null==c||l.subject.equals(c))if(null==b||l.predicate.equals(b))if(null==a||l.object.equals(a))if(null==
f||m<f)m++,h.add(l);else break}return h};RDFModel.Graph.prototype.removeMatches=function(c,b,a){for(var f=[],h=0;h<this.triples.length;h++){var m=this.triples[h];if(null==c||m.subject.equals(c))null!=b&&!m.predicate.equals(b)||null!=a&&!m.object.equals(a)||f.push(m)}for(h=0;h<f.length;h++)this.remove(f[h]);return this};RDFModel.Graph.prototype.toNT=function(){var c="";this.forEach(function(b){c+=b.toString()});return c};RDFModel.buildRDFResource=function(c,b,a,f){return"blank"===c.token?RDFModel.buildBlankNode(c,
b,a,f):"literal"===c.token?RDFModel.buildLiteral(c,b,a,f):"uri"===c.token?RDFModel.buildNamedNode(c,b,a,f):"var"===c.token?(c=b[c.value],null!=c?RDFModel.buildRDFResource(c,b,a,f):null):null};RDFModel.buildBlankNode=function(c,b,a,f){null!=c.valuetmp&&(c.value=c.valuetmp);0===c.value.indexOf("_:")&&(c.value=c.value.split("_:")[1]);return new RDFModel.BlankNode(c.value)};RDFModel.buildLiteral=function(c,b,a,f){return new RDFModel.Literal(c.value,c.lang,c.type)};RDFModel.buildNamedNode=function(c,b,
a,f){null==c.value&&null!=c.prefix&&(b=a.resolveNsInEnvironment(c.prefix,f),c.value=b+c.suffix);return new RDFModel.NamedNode(c)};RDFModel.rdf=new RDFModel.RDFEnvironment;C.exports=RDFModel},{"./query_filters":52,"./utils":57}],56:[function(x,C,B){function m(c){switch(c[0]){case '"':return 0<c.indexOf("^^")?(c=c.split("^^"),{literal:c[0]+"^^<"+c[1]+">"}):{literal:c};case "_":return{blank:c.replace("b","")};default:return{token:"uri",value:c,prefix:null,suffix:null}}}var h=x("n3").Parser;C.exports=
{RVN3Parser:{parser:{async:!0,parse:function(c,b,a,f){f||(f=a,a=b,b=null);b&&"string"===typeof b&&(b={token:"uri",value:b,prefix:null,suffix:null});a&&a.baseURI&&(a.documentIRI=a.baseURI);var k=[];(new h(a)).parse(c,function(a,c){a?f(a):c?k.push({subject:m(c.subject),predicate:m(c.predicate),object:m(c.object),graph:b}):f(!1,k)})},resetBlankNodeIds:function(){h._resetBlankNodeIds()}}}}},{n3:27}],57:[function(x,C,B){(function(m){var h=function(){return"undefined"!==typeof m&&m.nextTick?m.nextTick:
"undefined"!==typeof window&&window.setImmediate?window.setImmediate:function(a){setTimeout(a,0)}}(),c=0,b=100,a=function(a){c++;c<b?a():(c=0,h(a))},f=function(a){try{if(null==a)return"";if("uri"===a.token)return"u"+a.value;if("blank"===a.token)return"b"+a.value;if("literal"===a.token){var b="l"+a.value,b=b+(a.type||"");return b+=a.lang||""}}catch(c){if("object"===typeof a){b="";for(p in a)b=b+p+a[p];return b}return a}};parseISO8601=function(a){return Date.parse(a)};Date.prototype.toISOString||function(){function a(b){return 10>
b?"0"+b:b}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"."+(this.getUTCMilliseconds()/1E3).toFixed(3).slice(2,5)+"Z"}}();iso8601=function(a){return a.toISOString()};compareDateComponents=function(a,b){var c=parseISO8601(a),d=parseISO8601(b);return c==d?0:c<d?-1:1};lexicalFormLiteral=function(a,b){var c=a.value,d=a.lang,f=a.type,h=null;null!=c&&
null!=f&&"string"!=typeof f?(c=f.value,null==c&&(c=f.suffix,f=b.namespaces[f.prefix],a.type=f+c,c=f+c),h=-1!=c.indexOf("hexBinary")?'"'+a.value.toLowerCase()+'"^^<'+c+">":'"'+a.value+'"^^<'+c+">"):h=null==d&&null==f?'"'+c+'"':null==f?'"'+c+'"@'+d:-1!=f.indexOf("hexBinary")?'"'+a.value.toLowerCase()+'"^^<'+f+">":'"'+a.value+'"^^<'+f+">";return h};normalizeUnicodeLiterals=function(a){for(var b=a.match(/\\u[0-9abcdefABCDEF]{4,4}/g)||[],c={},d=0;d<b.length;d++)null==c[b[d]]&&(c[b[d]]=!0,a=a.replace(new RegExp("\\"+
b[d],"g"),eval("'"+b[d]+"'")));return a};registerIndexedDB=function(a){if("undefined"===typeof window&&"undefined"!==typeof m&&!1===m.browser){var b=x("sqlite3"),c=x("indexeddb-js"),b=new b.Database(":memory:"),c=c.makeScope("sqlite3",b);a.indexedDB=c.indexedDB;a.IDBKeyRange=c.IDBKeyRange}else c="undefined"===typeof window?self:window,c.indexedDB=c.indexedDB||c.mozIndexedDB||c.webkitIndexedDB||c.msIndexedDB,c.IDBKeyRange=c.IDBKeyRange||c.webkitIDBKeyRange||c.msIDBKeyRange,c.indexedDB?(a.indexedDB=
c.indexedDB,a.IDBKeyRange=c.IDBKeyRange):console.log("The browser does not support IndexDB.")};guid=function(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()};var f=function(a){try{if(null==a)return"";if("uri"===a.token)return"u"+a.value;if("blank"===a.token)return"b"+a.value;if("literal"===a.token){var b="l"+a.value,b=b+(a.type||"");return b+=a.lang||""}}catch(c){if("object"===typeof a){b="";for(p in a)b=b+
p+a[p];return b}return a}},k=function(a,b){for(var c=[],d=0;d<a.length;d++)b(a[d])&&c.push(a[d]);return c},t=function(a,b){if(a.forEach)a.forEach(b);else for(var c=0;c<a.length;c++)b(a[c])};clone=function(a){return JSON.parse(JSON.stringify(a))};var d=function(){function a(){}return function(b){var c=typeof b;if("function"==c||b&&"object"==c){a.prototype=b;var d=new a;a.prototype=null}return d||void 0}}(),l=function(a,b,c){a()?b(function(d){if(d)return c(d);l(a,b,c)}):c()},u=function(b,c,d){d=d||
function(){};if(!b.length)return d();var f=0,h=function(){c(b[f],function(c){c?(d(c),d=function(){}):(f+=1,f>=b.length?d():a(h))})};h()},v=function(a,b,c,d){u(a,function(a,d){c(b,a,function(a,c){b=c;d(a)})},function(a){d(a,b)})};C.exports={isWorker:function(){return"undefined"===typeof m||!0===m.browser?"undefined"===typeof window?!0:!1:!1},nextTick:a,hasTerm:f,lexicalFormBaseUri:function(a,b){var c=null;b=b||{};if(null==a.value)var c=a.prefix,d=a.suffix,f=b.namespaces[c],c=null!=f?f+d:c+":"+d;else c=
a.value;if(null===c)return null;-1==c.indexOf(":")&&(c=(b.base||"")+c);return c},parseISO8601:parseISO8601,compareDateComponents:compareDateComponents,iso8601:iso8601,normalizeUnicodeLiterals:normalizeUnicodeLiterals,lexicalFormLiteral:lexicalFormLiteral,registerIndexedDB:registerIndexedDB,guid:guid,hashTerm:f,keys:function(a){var b=[],c;for(c in a)b.push(c);return b},values:function(a){var b=[],c;for(c in a)b.push(a[c]);return b},size:function(a){if(a.length)return a.length;var b=0,c;for(c in a)b++;
return b},map:function(a,b){if(a.map)return a.map(b);for(var c=[],d=0;d<a.length;d++)c[d]=b(a[d]);return c},each:t,forEach:t,include:function(a,b){for(var c=0;c<a.length;c++)if(a[c]===b)return!0;return!1},reject:k,remove:k,clone:clone,create:d,whilst:l,eachSeries:u,eachParallel:function(a,b,c){c=c||function(){};if(!a.length)return c();for(var d=0,f=!1,h=0;h<a.length;h++)if(!1===f)try{b(a[h],function(){!1===f&&(d++,d===a.length&&c())})}catch(k){f=!0,c(k)}},seq:function(){var a=arguments;return function(){var b=
this,c=Array.prototype.slice.call(arguments),d=c.pop();v(a,c,function(a,c,d){c.apply(b,a.concat([function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1);d(a,b)}]))},function(a,c){d.apply(b,[a].concat(c))})}},yieldFrequency:function(a){b=a}}}).call(this,x("7YKIPe"))},{"7YKIPe":10}]},{},[41])(41)});
